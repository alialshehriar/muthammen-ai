(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))a(f);new MutationObserver(f=>{for(const v of f)if(v.type==="childList")for(const m of v.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function i(f){const v={};return f.integrity&&(v.integrity=f.integrity),f.referrerPolicy&&(v.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?v.credentials="include":f.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function a(f){if(f.ep)return;f.ep=!0;const v=i(f);fetch(f.href,v)}})();var Ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qx={exports:{}},bg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OT;function Nz(){if(OT)return bg;OT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(a,f,v){var m=null;if(v!==void 0&&(m=""+v),f.key!==void 0&&(m=""+f.key),"key"in f){v={};for(var l in f)l!=="key"&&(v[l]=f[l])}else v=f;return f=v.ref,{$$typeof:e,type:a,key:m,ref:f!==void 0?f:null,props:v}}return bg.Fragment=t,bg.jsx=i,bg.jsxs=i,bg}var kT;function Rz(){return kT||(kT=1,qx.exports=Nz()),qx.exports}var A=Rz(),Ux={exports:{}},Dr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IT;function Lz(){if(IT)return Dr;IT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),m=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),O=Symbol.iterator;function B(xe){return xe===null||typeof xe!="object"?null:(xe=O&&xe[O]||xe["@@iterator"],typeof xe=="function"?xe:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,Z={};function U(xe,Xe,ot){this.props=xe,this.context=Xe,this.refs=Z,this.updater=ot||F}U.prototype.isReactComponent={},U.prototype.setState=function(xe,Xe){if(typeof xe!="object"&&typeof xe!="function"&&xe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,xe,Xe,"setState")},U.prototype.forceUpdate=function(xe){this.updater.enqueueForceUpdate(this,xe,"forceUpdate")};function re(){}re.prototype=U.prototype;function se(xe,Xe,ot){this.props=xe,this.context=Xe,this.refs=Z,this.updater=ot||F}var ne=se.prototype=new re;ne.constructor=se,X(ne,U.prototype),ne.isPureReactComponent=!0;var ue=Array.isArray,J={H:null,A:null,T:null,S:null,V:null},ae=Object.prototype.hasOwnProperty;function he(xe,Xe,ot,st,Pt,Vt){return ot=Vt.ref,{$$typeof:e,type:xe,key:Xe,ref:ot!==void 0?ot:null,props:Vt}}function ve(xe,Xe){return he(xe.type,Xe,void 0,void 0,void 0,xe.props)}function Ie(xe){return typeof xe=="object"&&xe!==null&&xe.$$typeof===e}function at(xe){var Xe={"=":"=0",":":"=2"};return"$"+xe.replace(/[=:]/g,function(ot){return Xe[ot]})}var De=/\/+/g;function Fe(xe,Xe){return typeof xe=="object"&&xe!==null&&xe.key!=null?at(""+xe.key):Xe.toString(36)}function tt(){}function ut(xe){switch(xe.status){case"fulfilled":return xe.value;case"rejected":throw xe.reason;default:switch(typeof xe.status=="string"?xe.then(tt,tt):(xe.status="pending",xe.then(function(Xe){xe.status==="pending"&&(xe.status="fulfilled",xe.value=Xe)},function(Xe){xe.status==="pending"&&(xe.status="rejected",xe.reason=Xe)})),xe.status){case"fulfilled":return xe.value;case"rejected":throw xe.reason}}throw xe}function rt(xe,Xe,ot,st,Pt){var Vt=typeof xe;(Vt==="undefined"||Vt==="boolean")&&(xe=null);var Nt=!1;if(xe===null)Nt=!0;else switch(Vt){case"bigint":case"string":case"number":Nt=!0;break;case"object":switch(xe.$$typeof){case e:case t:Nt=!0;break;case z:return Nt=xe._init,rt(Nt(xe._payload),Xe,ot,st,Pt)}}if(Nt)return Pt=Pt(xe),Nt=st===""?"."+Fe(xe,0):st,ue(Pt)?(ot="",Nt!=null&&(ot=Nt.replace(De,"$&/")+"/"),rt(Pt,Xe,ot,"",function(Ot){return Ot})):Pt!=null&&(Ie(Pt)&&(Pt=ve(Pt,ot+(Pt.key==null||xe&&xe.key===Pt.key?"":(""+Pt.key).replace(De,"$&/")+"/")+Nt)),Xe.push(Pt)),1;Nt=0;var yr=st===""?".":st+":";if(ue(xe))for(var ar=0;ar<xe.length;ar++)st=xe[ar],Vt=yr+Fe(st,ar),Nt+=rt(st,Xe,ot,Vt,Pt);else if(ar=B(xe),typeof ar=="function")for(xe=ar.call(xe),ar=0;!(st=xe.next()).done;)st=st.value,Vt=yr+Fe(st,ar++),Nt+=rt(st,Xe,ot,Vt,Pt);else if(Vt==="object"){if(typeof xe.then=="function")return rt(ut(xe),Xe,ot,st,Pt);throw Xe=String(xe),Error("Objects are not valid as a React child (found: "+(Xe==="[object Object]"?"object with keys {"+Object.keys(xe).join(", ")+"}":Xe)+"). If you meant to render a collection of children, use an array instead.")}return Nt}function Pe(xe,Xe,ot){if(xe==null)return xe;var st=[],Pt=0;return rt(xe,st,"","",function(Vt){return Xe.call(ot,Vt,Pt++)}),st}function Ve(xe){if(xe._status===-1){var Xe=xe._result;Xe=Xe(),Xe.then(function(ot){(xe._status===0||xe._status===-1)&&(xe._status=1,xe._result=ot)},function(ot){(xe._status===0||xe._status===-1)&&(xe._status=2,xe._result=ot)}),xe._status===-1&&(xe._status=0,xe._result=Xe)}if(xe._status===1)return xe._result.default;throw xe._result}var Ge=typeof reportError=="function"?reportError:function(xe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Xe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof xe=="object"&&xe!==null&&typeof xe.message=="string"?String(xe.message):String(xe),error:xe});if(!window.dispatchEvent(Xe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",xe);return}console.error(xe)};function ht(){}return Dr.Children={map:Pe,forEach:function(xe,Xe,ot){Pe(xe,function(){Xe.apply(this,arguments)},ot)},count:function(xe){var Xe=0;return Pe(xe,function(){Xe++}),Xe},toArray:function(xe){return Pe(xe,function(Xe){return Xe})||[]},only:function(xe){if(!Ie(xe))throw Error("React.Children.only expected to receive a single React element child.");return xe}},Dr.Component=U,Dr.Fragment=i,Dr.Profiler=f,Dr.PureComponent=se,Dr.StrictMode=a,Dr.Suspense=P,Dr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,Dr.__COMPILER_RUNTIME={__proto__:null,c:function(xe){return J.H.useMemoCache(xe)}},Dr.cache=function(xe){return function(){return xe.apply(null,arguments)}},Dr.cloneElement=function(xe,Xe,ot){if(xe==null)throw Error("The argument must be a React element, but you passed "+xe+".");var st=X({},xe.props),Pt=xe.key,Vt=void 0;if(Xe!=null)for(Nt in Xe.ref!==void 0&&(Vt=void 0),Xe.key!==void 0&&(Pt=""+Xe.key),Xe)!ae.call(Xe,Nt)||Nt==="key"||Nt==="__self"||Nt==="__source"||Nt==="ref"&&Xe.ref===void 0||(st[Nt]=Xe[Nt]);var Nt=arguments.length-2;if(Nt===1)st.children=ot;else if(1<Nt){for(var yr=Array(Nt),ar=0;ar<Nt;ar++)yr[ar]=arguments[ar+2];st.children=yr}return he(xe.type,Pt,void 0,void 0,Vt,st)},Dr.createContext=function(xe){return xe={$$typeof:m,_currentValue:xe,_currentValue2:xe,_threadCount:0,Provider:null,Consumer:null},xe.Provider=xe,xe.Consumer={$$typeof:v,_context:xe},xe},Dr.createElement=function(xe,Xe,ot){var st,Pt={},Vt=null;if(Xe!=null)for(st in Xe.key!==void 0&&(Vt=""+Xe.key),Xe)ae.call(Xe,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(Pt[st]=Xe[st]);var Nt=arguments.length-2;if(Nt===1)Pt.children=ot;else if(1<Nt){for(var yr=Array(Nt),ar=0;ar<Nt;ar++)yr[ar]=arguments[ar+2];Pt.children=yr}if(xe&&xe.defaultProps)for(st in Nt=xe.defaultProps,Nt)Pt[st]===void 0&&(Pt[st]=Nt[st]);return he(xe,Vt,void 0,void 0,null,Pt)},Dr.createRef=function(){return{current:null}},Dr.forwardRef=function(xe){return{$$typeof:l,render:xe}},Dr.isValidElement=Ie,Dr.lazy=function(xe){return{$$typeof:z,_payload:{_status:-1,_result:xe},_init:Ve}},Dr.memo=function(xe,Xe){return{$$typeof:C,type:xe,compare:Xe===void 0?null:Xe}},Dr.startTransition=function(xe){var Xe=J.T,ot={};J.T=ot;try{var st=xe(),Pt=J.S;Pt!==null&&Pt(ot,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(ht,Ge)}catch(Vt){Ge(Vt)}finally{J.T=Xe}},Dr.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},Dr.use=function(xe){return J.H.use(xe)},Dr.useActionState=function(xe,Xe,ot){return J.H.useActionState(xe,Xe,ot)},Dr.useCallback=function(xe,Xe){return J.H.useCallback(xe,Xe)},Dr.useContext=function(xe){return J.H.useContext(xe)},Dr.useDebugValue=function(){},Dr.useDeferredValue=function(xe,Xe){return J.H.useDeferredValue(xe,Xe)},Dr.useEffect=function(xe,Xe,ot){var st=J.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(xe,Xe)},Dr.useId=function(){return J.H.useId()},Dr.useImperativeHandle=function(xe,Xe,ot){return J.H.useImperativeHandle(xe,Xe,ot)},Dr.useInsertionEffect=function(xe,Xe){return J.H.useInsertionEffect(xe,Xe)},Dr.useLayoutEffect=function(xe,Xe){return J.H.useLayoutEffect(xe,Xe)},Dr.useMemo=function(xe,Xe){return J.H.useMemo(xe,Xe)},Dr.useOptimistic=function(xe,Xe){return J.H.useOptimistic(xe,Xe)},Dr.useReducer=function(xe,Xe,ot){return J.H.useReducer(xe,Xe,ot)},Dr.useRef=function(xe){return J.H.useRef(xe)},Dr.useState=function(xe){return J.H.useState(xe)},Dr.useSyncExternalStore=function(xe,Xe,ot){return J.H.useSyncExternalStore(xe,Xe,ot)},Dr.useTransition=function(){return J.H.useTransition()},Dr.version="19.1.0",Dr}var DT;function SS(){return DT||(DT=1,Ux.exports=Lz()),Ux.exports}var ft=SS();const $e=Bn(ft);var Vx={exports:{}},wg={},Gx={exports:{}},Zx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT;function Bz(){return zT||(zT=1,function(e){function t(Pe,Ve){var Ge=Pe.length;Pe.push(Ve);e:for(;0<Ge;){var ht=Ge-1>>>1,xe=Pe[ht];if(0<f(xe,Ve))Pe[ht]=Ve,Pe[Ge]=xe,Ge=ht;else break e}}function i(Pe){return Pe.length===0?null:Pe[0]}function a(Pe){if(Pe.length===0)return null;var Ve=Pe[0],Ge=Pe.pop();if(Ge!==Ve){Pe[0]=Ge;e:for(var ht=0,xe=Pe.length,Xe=xe>>>1;ht<Xe;){var ot=2*(ht+1)-1,st=Pe[ot],Pt=ot+1,Vt=Pe[Pt];if(0>f(st,Ge))Pt<xe&&0>f(Vt,st)?(Pe[ht]=Vt,Pe[Pt]=Ge,ht=Pt):(Pe[ht]=st,Pe[ot]=Ge,ht=ot);else if(Pt<xe&&0>f(Vt,Ge))Pe[ht]=Vt,Pe[Pt]=Ge,ht=Pt;else break e}}return Ve}function f(Pe,Ve){var Ge=Pe.sortIndex-Ve.sortIndex;return Ge!==0?Ge:Pe.id-Ve.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var v=performance;e.unstable_now=function(){return v.now()}}else{var m=Date,l=m.now();e.unstable_now=function(){return m.now()-l}}var P=[],C=[],z=1,O=null,B=3,F=!1,X=!1,Z=!1,U=!1,re=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function ue(Pe){for(var Ve=i(C);Ve!==null;){if(Ve.callback===null)a(C);else if(Ve.startTime<=Pe)a(C),Ve.sortIndex=Ve.expirationTime,t(P,Ve);else break;Ve=i(C)}}function J(Pe){if(Z=!1,ue(Pe),!X)if(i(P)!==null)X=!0,ae||(ae=!0,Fe());else{var Ve=i(C);Ve!==null&&rt(J,Ve.startTime-Pe)}}var ae=!1,he=-1,ve=5,Ie=-1;function at(){return U?!0:!(e.unstable_now()-Ie<ve)}function De(){if(U=!1,ae){var Pe=e.unstable_now();Ie=Pe;var Ve=!0;try{e:{X=!1,Z&&(Z=!1,se(he),he=-1),F=!0;var Ge=B;try{t:{for(ue(Pe),O=i(P);O!==null&&!(O.expirationTime>Pe&&at());){var ht=O.callback;if(typeof ht=="function"){O.callback=null,B=O.priorityLevel;var xe=ht(O.expirationTime<=Pe);if(Pe=e.unstable_now(),typeof xe=="function"){O.callback=xe,ue(Pe),Ve=!0;break t}O===i(P)&&a(P),ue(Pe)}else a(P);O=i(P)}if(O!==null)Ve=!0;else{var Xe=i(C);Xe!==null&&rt(J,Xe.startTime-Pe),Ve=!1}}break e}finally{O=null,B=Ge,F=!1}Ve=void 0}}finally{Ve?Fe():ae=!1}}}var Fe;if(typeof ne=="function")Fe=function(){ne(De)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,ut=tt.port2;tt.port1.onmessage=De,Fe=function(){ut.postMessage(null)}}else Fe=function(){re(De,0)};function rt(Pe,Ve){he=re(function(){Pe(e.unstable_now())},Ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Pe){Pe.callback=null},e.unstable_forceFrameRate=function(Pe){0>Pe||125<Pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<Pe?Math.floor(1e3/Pe):5},e.unstable_getCurrentPriorityLevel=function(){return B},e.unstable_next=function(Pe){switch(B){case 1:case 2:case 3:var Ve=3;break;default:Ve=B}var Ge=B;B=Ve;try{return Pe()}finally{B=Ge}},e.unstable_requestPaint=function(){U=!0},e.unstable_runWithPriority=function(Pe,Ve){switch(Pe){case 1:case 2:case 3:case 4:case 5:break;default:Pe=3}var Ge=B;B=Pe;try{return Ve()}finally{B=Ge}},e.unstable_scheduleCallback=function(Pe,Ve,Ge){var ht=e.unstable_now();switch(typeof Ge=="object"&&Ge!==null?(Ge=Ge.delay,Ge=typeof Ge=="number"&&0<Ge?ht+Ge:ht):Ge=ht,Pe){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=Ge+xe,Pe={id:z++,callback:Ve,priorityLevel:Pe,startTime:Ge,expirationTime:xe,sortIndex:-1},Ge>ht?(Pe.sortIndex=Ge,t(C,Pe),i(P)===null&&Pe===i(C)&&(Z?(se(he),he=-1):Z=!0,rt(J,Ge-ht))):(Pe.sortIndex=xe,t(P,Pe),X||F||(X=!0,ae||(ae=!0,Fe()))),Pe},e.unstable_shouldYield=at,e.unstable_wrapCallback=function(Pe){var Ve=B;return function(){var Ge=B;B=Ve;try{return Pe.apply(this,arguments)}finally{B=Ge}}}}(Zx)),Zx}var NT;function Fz(){return NT||(NT=1,Gx.exports=Bz()),Gx.exports}var Hx={exports:{}},no={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT;function $z(){if(RT)return no;RT=1;var e=SS();function t(P){var C="https://react.dev/errors/"+P;if(1<arguments.length){C+="?args[]="+encodeURIComponent(arguments[1]);for(var z=2;z<arguments.length;z++)C+="&args[]="+encodeURIComponent(arguments[z])}return"Minified React error #"+P+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},f=Symbol.for("react.portal");function v(P,C,z){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:O==null?null:""+O,children:P,containerInfo:C,implementation:z}}var m=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(P,C){if(P==="font")return"";if(typeof C=="string")return C==="use-credentials"?C:""}return no.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,no.createPortal=function(P,C){var z=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C||C.nodeType!==1&&C.nodeType!==9&&C.nodeType!==11)throw Error(t(299));return v(P,C,null,z)},no.flushSync=function(P){var C=m.T,z=a.p;try{if(m.T=null,a.p=2,P)return P()}finally{m.T=C,a.p=z,a.d.f()}},no.preconnect=function(P,C){typeof P=="string"&&(C?(C=C.crossOrigin,C=typeof C=="string"?C==="use-credentials"?C:"":void 0):C=null,a.d.C(P,C))},no.prefetchDNS=function(P){typeof P=="string"&&a.d.D(P)},no.preinit=function(P,C){if(typeof P=="string"&&C&&typeof C.as=="string"){var z=C.as,O=l(z,C.crossOrigin),B=typeof C.integrity=="string"?C.integrity:void 0,F=typeof C.fetchPriority=="string"?C.fetchPriority:void 0;z==="style"?a.d.S(P,typeof C.precedence=="string"?C.precedence:void 0,{crossOrigin:O,integrity:B,fetchPriority:F}):z==="script"&&a.d.X(P,{crossOrigin:O,integrity:B,fetchPriority:F,nonce:typeof C.nonce=="string"?C.nonce:void 0})}},no.preinitModule=function(P,C){if(typeof P=="string")if(typeof C=="object"&&C!==null){if(C.as==null||C.as==="script"){var z=l(C.as,C.crossOrigin);a.d.M(P,{crossOrigin:z,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0})}}else C==null&&a.d.M(P)},no.preload=function(P,C){if(typeof P=="string"&&typeof C=="object"&&C!==null&&typeof C.as=="string"){var z=C.as,O=l(z,C.crossOrigin);a.d.L(P,z,{crossOrigin:O,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0,type:typeof C.type=="string"?C.type:void 0,fetchPriority:typeof C.fetchPriority=="string"?C.fetchPriority:void 0,referrerPolicy:typeof C.referrerPolicy=="string"?C.referrerPolicy:void 0,imageSrcSet:typeof C.imageSrcSet=="string"?C.imageSrcSet:void 0,imageSizes:typeof C.imageSizes=="string"?C.imageSizes:void 0,media:typeof C.media=="string"?C.media:void 0})}},no.preloadModule=function(P,C){if(typeof P=="string")if(C){var z=l(C.as,C.crossOrigin);a.d.m(P,{as:typeof C.as=="string"&&C.as!=="script"?C.as:void 0,crossOrigin:z,integrity:typeof C.integrity=="string"?C.integrity:void 0})}else a.d.m(P)},no.requestFormReset=function(P){a.d.r(P)},no.unstable_batchedUpdates=function(P,C){return P(C)},no.useFormState=function(P,C,z){return m.H.useFormState(P,C,z)},no.useFormStatus=function(){return m.H.useHostTransitionStatus()},no.version="19.1.0",no}var LT;function ZO(){if(LT)return Hx.exports;LT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Hx.exports=$z(),Hx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT;function qz(){if(BT)return wg;BT=1;var e=Fz(),t=SS(),i=ZO();function a(s){var h="https://react.dev/errors/"+s;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+s+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function v(s){var h=s,g=s;if(s.alternate)for(;h.return;)h=h.return;else{s=h;do h=s,(h.flags&4098)!==0&&(g=h.return),s=h.return;while(s)}return h.tag===3?g:null}function m(s){if(s.tag===13){var h=s.memoizedState;if(h===null&&(s=s.alternate,s!==null&&(h=s.memoizedState)),h!==null)return h.dehydrated}return null}function l(s){if(v(s)!==s)throw Error(a(188))}function P(s){var h=s.alternate;if(!h){if(h=v(s),h===null)throw Error(a(188));return h!==s?null:s}for(var g=s,S=h;;){var j=g.return;if(j===null)break;var R=j.alternate;if(R===null){if(S=j.return,S!==null){g=S;continue}break}if(j.child===R.child){for(R=j.child;R;){if(R===g)return l(j),s;if(R===S)return l(j),h;R=R.sibling}throw Error(a(188))}if(g.return!==S.return)g=j,S=R;else{for(var Y=!1,ce=j.child;ce;){if(ce===g){Y=!0,g=j,S=R;break}if(ce===S){Y=!0,S=j,g=R;break}ce=ce.sibling}if(!Y){for(ce=R.child;ce;){if(ce===g){Y=!0,g=R,S=j;break}if(ce===S){Y=!0,S=R,g=j;break}ce=ce.sibling}if(!Y)throw Error(a(189))}}if(g.alternate!==S)throw Error(a(190))}if(g.tag!==3)throw Error(a(188));return g.stateNode.current===g?s:h}function C(s){var h=s.tag;if(h===5||h===26||h===27||h===6)return s;for(s=s.child;s!==null;){if(h=C(s),h!==null)return h;s=s.sibling}return null}var z=Object.assign,O=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),Ie=Symbol.for("react.activity"),at=Symbol.for("react.memo_cache_sentinel"),De=Symbol.iterator;function Fe(s){return s===null||typeof s!="object"?null:(s=De&&s[De]||s["@@iterator"],typeof s=="function"?s:null)}var tt=Symbol.for("react.client.reference");function ut(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===tt?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case X:return"Fragment";case U:return"Profiler";case Z:return"StrictMode";case J:return"Suspense";case ae:return"SuspenseList";case Ie:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case F:return"Portal";case ne:return(s.displayName||"Context")+".Provider";case se:return(s._context.displayName||"Context")+".Consumer";case ue:var h=s.render;return s=s.displayName,s||(s=h.displayName||h.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case he:return h=s.displayName||null,h!==null?h:ut(s.type)||"Memo";case ve:h=s._payload,s=s._init;try{return ut(s(h))}catch{}}return null}var rt=Array.isArray,Pe=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ve=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge={pending:!1,data:null,method:null,action:null},ht=[],xe=-1;function Xe(s){return{current:s}}function ot(s){0>xe||(s.current=ht[xe],ht[xe]=null,xe--)}function st(s,h){xe++,ht[xe]=s.current,s.current=h}var Pt=Xe(null),Vt=Xe(null),Nt=Xe(null),yr=Xe(null);function ar(s,h){switch(st(Nt,h),st(Vt,s),st(Pt,null),h.nodeType){case 9:case 11:s=(s=h.documentElement)&&(s=s.namespaceURI)?pg(s):0;break;default:if(s=h.tagName,h=h.namespaceURI)h=pg(h),s=Kh(h,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ot(Pt),st(Pt,s)}function Ot(){ot(Pt),ot(Vt),ot(Nt)}function er(s){s.memoizedState!==null&&st(yr,s);var h=Pt.current,g=Kh(h,s.type);h!==g&&(st(Vt,s),st(Pt,g))}function or(s){Vt.current===s&&(ot(Pt),ot(Vt)),yr.current===s&&(ot(yr),b._currentValue=Ge)}var _t=Object.prototype.hasOwnProperty,fr=e.unstable_scheduleCallback,Qt=e.unstable_cancelCallback,Yr=e.unstable_shouldYield,tn=e.unstable_requestPaint,Kr=e.unstable_now,ki=e.unstable_getCurrentPriorityLevel,Wn=e.unstable_ImmediatePriority,Ba=e.unstable_UserBlockingPriority,Ii=e.unstable_NormalPriority,Di=e.unstable_LowPriority,Yi=e.unstable_IdlePriority,Mo=e.log,Ts=e.unstable_setDisableYieldValue,zi=null,Jn=null;function ci(s){if(typeof Mo=="function"&&Ts(s),Jn&&typeof Jn.setStrictMode=="function")try{Jn.setStrictMode(zi,s)}catch{}}var ke=Math.clz32?Math.clz32:fe,te=Math.log,ie=Math.LN2;function fe(s){return s>>>=0,s===0?32:31-(te(s)/ie|0)|0}var Se=256,Ee=4194304;function ze(s){var h=s&42;if(h!==0)return h;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function He(s,h,g){var S=s.pendingLanes;if(S===0)return 0;var j=0,R=s.suspendedLanes,Y=s.pingedLanes;s=s.warmLanes;var ce=S&134217727;return ce!==0?(S=ce&~R,S!==0?j=ze(S):(Y&=ce,Y!==0?j=ze(Y):g||(g=ce&~s,g!==0&&(j=ze(g))))):(ce=S&~R,ce!==0?j=ze(ce):Y!==0?j=ze(Y):g||(g=S&~s,g!==0&&(j=ze(g)))),j===0?0:h!==0&&h!==j&&(h&R)===0&&(R=j&-j,g=h&-h,R>=g||R===32&&(g&4194048)!==0)?h:j}function Le(s,h){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&h)===0}function ct(s,h){switch(s){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function St(){var s=Se;return Se<<=1,(Se&4194048)===0&&(Se=256),s}function mt(){var s=Ee;return Ee<<=1,(Ee&62914560)===0&&(Ee=4194304),s}function Bt(s){for(var h=[],g=0;31>g;g++)h.push(s);return h}function Zt(s,h){s.pendingLanes|=h,h!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ue(s,h,g,S,j,R){var Y=s.pendingLanes;s.pendingLanes=g,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=g,s.entangledLanes&=g,s.errorRecoveryDisabledLanes&=g,s.shellSuspendCounter=0;var ce=s.entanglements,Me=s.expirationTimes,qe=s.hiddenUpdates;for(g=Y&~g;0<g;){var pt=31-ke(g),bt=1<<pt;ce[pt]=0,Me[pt]=-1;var et=qe[pt];if(et!==null)for(qe[pt]=null,pt=0;pt<et.length;pt++){var lt=et[pt];lt!==null&&(lt.lane&=-536870913)}g&=~bt}S!==0&&jr(s,S,0),R!==0&&j===0&&s.tag!==0&&(s.suspendedLanes|=R&~(Y&~h))}function jr(s,h,g){s.pendingLanes|=h,s.suspendedLanes&=~h;var S=31-ke(h);s.entangledLanes|=h,s.entanglements[S]=s.entanglements[S]|1073741824|g&4194090}function qr(s,h){var g=s.entangledLanes|=h;for(s=s.entanglements;g;){var S=31-ke(g),j=1<<S;j&h|s[S]&h&&(s[S]|=h),g&=~j}}function Ft(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Er(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ei(){var s=Ve.p;return s!==0?s:(s=window.event,s===void 0?32:je(s.type))}function ui(s,h){var g=Ve.p;try{return Ve.p=s,h()}finally{Ve.p=g}}var hn=Math.random().toString(36).slice(2),Zr="__reactFiber$"+hn,Ar="__reactProps$"+hn,Mn="__reactContainer$"+hn,Ur="__reactEvents$"+hn,wt="__reactListeners$"+hn,Po="__reactHandles$"+hn,ua="__reactResources$"+hn,Mi="__reactMarker$"+hn;function Yn(s){delete s[Zr],delete s[Ar],delete s[Ur],delete s[wt],delete s[Po]}function Ct(s){var h=s[Zr];if(h)return h;for(var g=s.parentNode;g;){if(h=g[Mn]||g[Zr]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(s=gg(s);s!==null;){if(g=s[Zr])return g;s=gg(s)}return h}s=g,g=s.parentNode}return null}function mr(s){if(s=s[Zr]||s[Mn]){var h=s.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return s}return null}function pr(s){var h=s.tag;if(h===5||h===26||h===27||h===6)return s.stateNode;throw Error(a(33))}function vi(s){var h=s[ua];return h||(h=s[ua]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function dn(s){s[Mi]=!0}var so=new Set,vr={};function Fa(s,h){Eo(s,h),Eo(s+"Capture",h)}function Eo(s,h){for(vr[s]=h,s=0;s<h.length;s++)so.add(h[s])}var cl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cc={},Co={};function ul(s){return _t.call(Co,s)?!0:_t.call(cc,s)?!1:cl.test(s)?Co[s]=!0:(cc[s]=!0,!1)}function Pn(s,h,g){if(ul(h))if(g===null)s.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":s.removeAttribute(h);return;case"boolean":var S=h.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){s.removeAttribute(h);return}}s.setAttribute(h,""+g)}}function Ni(s,h,g){if(g===null)s.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttribute(h,""+g)}}function Vr(s,h,g,S){if(S===null)s.removeAttribute(g);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(g);return}s.setAttributeNS(h,g,""+S)}}var hl,dl;function As(s){if(hl===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);hl=h&&h[1]||"",dl=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hl+s+dl}var rs=!1;function lo(s,h){if(!s||rs)return"";rs=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(h){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(lt){var et=lt}Reflect.construct(s,[],bt)}else{try{bt.call()}catch(lt){et=lt}s.call(bt.prototype)}}else{try{throw Error()}catch(lt){et=lt}(bt=s())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(lt){if(lt&&et&&typeof lt.stack=="string")return[lt.stack,et.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var j=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");j&&j.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=S.DetermineComponentFrameRoot(),Y=R[0],ce=R[1];if(Y&&ce){var Me=Y.split(`
`),qe=ce.split(`
`);for(j=S=0;S<Me.length&&!Me[S].includes("DetermineComponentFrameRoot");)S++;for(;j<qe.length&&!qe[j].includes("DetermineComponentFrameRoot");)j++;if(S===Me.length||j===qe.length)for(S=Me.length-1,j=qe.length-1;1<=S&&0<=j&&Me[S]!==qe[j];)j--;for(;1<=S&&0<=j;S--,j--)if(Me[S]!==qe[j]){if(S!==1||j!==1)do if(S--,j--,0>j||Me[S]!==qe[j]){var pt=`
`+Me[S].replace(" at new "," at ");return s.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",s.displayName)),pt}while(1<=S&&0<=j);break}}}finally{rs=!1,Error.prepareStackTrace=g}return(g=s?s.displayName||s.name:"")?As(g):""}function Nf(s){switch(s.tag){case 26:case 27:case 5:return As(s.type);case 16:return As("Lazy");case 13:return As("Suspense");case 19:return As("SuspenseList");case 0:case 15:return lo(s.type,!1);case 11:return lo(s.type.render,!1);case 1:return lo(s.type,!0);case 31:return As("Activity");default:return""}}function eh(s){try{var h="";do h+=Nf(s),s=s.return;while(s);return h}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function Pa(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function fl(s){var h=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Rf(s){var h=fl(s)?"checked":"value",g=Object.getOwnPropertyDescriptor(s.constructor.prototype,h),S=""+s[h];if(!s.hasOwnProperty(h)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var j=g.get,R=g.set;return Object.defineProperty(s,h,{configurable:!0,get:function(){return j.call(this)},set:function(Y){S=""+Y,R.call(this,Y)}}),Object.defineProperty(s,h,{enumerable:g.enumerable}),{getValue:function(){return S},setValue:function(Y){S=""+Y},stopTracking:function(){s._valueTracker=null,delete s[h]}}}}function th(s){s._valueTracker||(s._valueTracker=Rf(s))}function Lf(s){if(!s)return!1;var h=s._valueTracker;if(!h)return!0;var g=h.getValue(),S="";return s&&(S=fl(s)?s.checked?"true":"false":s.value),s=S,s!==g?(h.setValue(s),!0):!1}function rh(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Bf=/[\n"\\]/g;function ha(s){return s.replace(Bf,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function ns(s,h,g,S,j,R,Y,ce){s.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?s.type=Y:s.removeAttribute("type"),h!=null?Y==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+Pa(h)):s.value!==""+Pa(h)&&(s.value=""+Pa(h)):Y!=="submit"&&Y!=="reset"||s.removeAttribute("value"),h!=null?ih(s,Y,Pa(h)):g!=null?ih(s,Y,Pa(g)):S!=null&&s.removeAttribute("value"),j==null&&R!=null&&(s.defaultChecked=!!R),j!=null&&(s.checked=j&&typeof j!="function"&&typeof j!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?s.name=""+Pa(ce):s.removeAttribute("name")}function nh(s,h,g,S,j,R,Y,ce){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(s.type=R),h!=null||g!=null){if(!(R!=="submit"&&R!=="reset"||h!=null))return;g=g!=null?""+Pa(g):"",h=h!=null?""+Pa(h):g,ce||h===s.value||(s.value=h),s.defaultValue=h}S=S??j,S=typeof S!="function"&&typeof S!="symbol"&&!!S,s.checked=ce?s.checked:!!S,s.defaultChecked=!!S,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(s.name=Y)}function ih(s,h,g){h==="number"&&rh(s.ownerDocument)===s||s.defaultValue===""+g||(s.defaultValue=""+g)}function $a(s,h,g,S){if(s=s.options,h){h={};for(var j=0;j<g.length;j++)h["$"+g[j]]=!0;for(g=0;g<s.length;g++)j=h.hasOwnProperty("$"+s[g].value),s[g].selected!==j&&(s[g].selected=j),j&&S&&(s[g].defaultSelected=!0)}else{for(g=""+Pa(g),h=null,j=0;j<s.length;j++){if(s[j].value===g){s[j].selected=!0,S&&(s[j].defaultSelected=!0);return}h!==null||s[j].disabled||(h=s[j])}h!==null&&(h.selected=!0)}}function ah(s,h,g){if(h!=null&&(h=""+Pa(h),h!==s.value&&(s.value=h),g==null)){s.defaultValue!==h&&(s.defaultValue=h);return}s.defaultValue=g!=null?""+Pa(g):""}function Ff(s,h,g,S){if(h==null){if(S!=null){if(g!=null)throw Error(a(92));if(rt(S)){if(1<S.length)throw Error(a(93));S=S[0]}g=S}g==null&&(g=""),h=g}g=Pa(h),s.defaultValue=g,S=s.textContent,S===g&&S!==""&&S!==null&&(s.value=S)}function jo(s,h){if(h){var g=s.firstChild;if(g&&g===s.lastChild&&g.nodeType===3){g.nodeValue=h;return}}s.textContent=h}var Qc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oh(s,h,g){var S=h.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?S?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="":S?s.setProperty(h,g):typeof g!="number"||g===0||Qc.has(h)?h==="float"?s.cssFloat=g:s[h]=(""+g).trim():s[h]=g+"px"}function Ri(s,h,g){if(h!=null&&typeof h!="object")throw Error(a(62));if(s=s.style,g!=null){for(var S in g)!g.hasOwnProperty(S)||h!=null&&h.hasOwnProperty(S)||(S.indexOf("--")===0?s.setProperty(S,""):S==="float"?s.cssFloat="":s[S]="");for(var j in h)S=h[j],h.hasOwnProperty(j)&&g[j]!==S&&oh(s,j,S)}else for(var R in h)h.hasOwnProperty(R)&&oh(s,R,h[R])}function Mr(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ki=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oo(s){return Ki.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var xr=null;function pl(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ko=null,co=null;function Qi(s){var h=mr(s);if(h&&(s=h.stateNode)){var g=s[Ar]||null;e:switch(s=h.stateNode,h.type){case"input":if(ns(s,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),h=g.name,g.type==="radio"&&h!=null){for(g=s;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+ha(""+h)+'"][type="radio"]'),h=0;h<g.length;h++){var S=g[h];if(S!==s&&S.form===s.form){var j=S[Ar]||null;if(!j)throw Error(a(90));ns(S,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name)}}for(h=0;h<g.length;h++)S=g[h],S.form===s.form&&Lf(S)}break e;case"textarea":ah(s,g.value,g.defaultValue);break e;case"select":h=g.value,h!=null&&$a(s,!!g.multiple,h,!1)}}}var hi=!1;function di(s,h,g){if(hi)return s(h,g);hi=!0;try{var S=s(h);return S}finally{if(hi=!1,(ko!==null||co!==null)&&(dp(),ko&&(h=ko,s=co,co=ko=null,Qi(h),s)))for(h=0;h<s.length;h++)Qi(s[h])}}function Kn(s,h){var g=s.stateNode;if(g===null)return null;var S=g[Ar]||null;if(S===null)return null;g=S[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(s=s.type,S=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!S;break e;default:s=!1}if(s)return null;if(g&&typeof g!="function")throw Error(a(231,h,typeof g));return g}var Br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ms=!1;if(Br)try{var fi={};Object.defineProperty(fi,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",fi,fi),window.removeEventListener("test",fi,fi)}catch{Ms=!1}var ti=null,Li=null,Ps=null;function rn(){if(Ps)return Ps;var s,h=Li,g=h.length,S,j="value"in ti?ti.value:ti.textContent,R=j.length;for(s=0;s<g&&h[s]===j[s];s++);var Y=g-s;for(S=1;S<=Y&&h[g-S]===j[R-S];S++);return Ps=j.slice(s,1<S?1-S:void 0)}function yn(s){var h=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&h===13&&(s=13)):s=h,s===10&&(s=13),32<=s||s===13?s:0}function br(){return!0}function ur(){return!1}function pi(s){function h(g,S,j,R,Y){this._reactName=g,this._targetInst=j,this.type=S,this.nativeEvent=R,this.target=Y,this.currentTarget=null;for(var ce in s)s.hasOwnProperty(ce)&&(g=s[ce],this[ce]=g?g(R):R[ce]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?br:ur,this.isPropagationStopped=ur,this}return z(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),h}var hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ml=pi(hr),ri=z({},hr,{view:0,detail:0}),gd=pi(ri),gl,yl,Io,Es=z({},ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:da,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Io&&(Io&&s.type==="mousemove"?(gl=s.screenX-Io.screenX,yl=s.screenY-Io.screenY):yl=gl=0,Io=s),gl)},movementY:function(s){return"movementY"in s?s.movementY:yl}}),sh=pi(Es),lh=z({},Es,{dataTransfer:0}),Jc=pi(lh),Do=z({},ri,{relatedTarget:0}),ni=pi(Do),vl=z({},hr,{animationName:0,elapsedTime:0,pseudoElement:0}),eu=pi(vl),Cs=z({},hr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),_i=pi(Cs),ch=z({},hr,{data:0}),tu=pi(ch),$f={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hc(s){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(s):(s=mi[s])?!!h[s]:!1}function da(){return hc}var uh=z({},ri,{key:function(s){if(s.key){var h=$f[s.key]||s.key;if(h!=="Unidentified")return h}return s.type==="keypress"?(s=yn(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Cm[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:da,charCode:function(s){return s.type==="keypress"?yn(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?yn(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),yd=pi(uh),ru=z({},Es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zo=pi(ru),uo=z({},ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:da}),qf=pi(uo),hh=z({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),jm=pi(hh),vd=z({},Es,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Om=pi(vd),dh=z({},hr,{newState:0,oldState:0}),_d=pi(dh),fh=[9,13,27,32],js=Br&&"CompositionEvent"in window,_l=null;Br&&"documentMode"in document&&(_l=document.documentMode);var ho=Br&&"TextEvent"in window&&!_l,xd=Br&&(!js||_l&&8<_l&&11>=_l),ph=" ",xl=!1;function dc(s,h){switch(s){case"keyup":return fh.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uf(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var is=!1;function km(s,h){switch(s){case"compositionend":return Uf(h);case"keypress":return h.which!==32?null:(xl=!0,ph);case"textInput":return s=h.data,s===ph&&xl?null:s;default:return null}}function fc(s,h){if(is)return s==="compositionend"||!js&&dc(s,h)?(s=rn(),Ps=Li=ti=null,is=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return xd&&h.locale!=="ko"?null:h.data;default:return null}}var Vf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mh(s){var h=s&&s.nodeName&&s.nodeName.toLowerCase();return h==="input"?!!Vf[s.type]:h==="textarea"}function bd(s,h,g,S){ko?co?co.push(S):co=[S]:ko=S,h=ju(h,"onChange"),0<h.length&&(g=new ml("onChange","change",null,g,S),s.push({event:g,listeners:h}))}var pc=null,bl=null;function Gf(s){pv(s,0)}function nu(s){var h=pr(s);if(Lf(h))return s}function mc(s,h){if(s==="change")return h}var wd=!1;if(Br){var as;if(Br){var gh="oninput"in document;if(!gh){var Sd=document.createElement("div");Sd.setAttribute("oninput","return;"),gh=typeof Sd.oninput=="function"}as=gh}else as=!1;wd=as&&(!document.documentMode||9<document.documentMode)}function Os(){pc&&(pc.detachEvent("onpropertychange",Td),bl=pc=null)}function Td(s){if(s.propertyName==="value"&&nu(bl)){var h=[];bd(h,bl,s,pl(s)),di(Gf,h)}}function yh(s,h,g){s==="focusin"?(Os(),pc=h,bl=g,pc.attachEvent("onpropertychange",Td)):s==="focusout"&&Os()}function Im(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return nu(bl)}function Zf(s,h){if(s==="click")return nu(h)}function Ad(s,h){if(s==="input"||s==="change")return nu(h)}function Hf(s,h){return s===h&&(s!==0||1/s===1/h)||s!==s&&h!==h}var fa=typeof Object.is=="function"?Object.is:Hf;function wl(s,h){if(fa(s,h))return!0;if(typeof s!="object"||s===null||typeof h!="object"||h===null)return!1;var g=Object.keys(s),S=Object.keys(h);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var j=g[S];if(!_t.call(h,j)||!fa(s[j],h[j]))return!1}return!0}function vh(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function iu(s,h){var g=vh(s);s=0;for(var S;g;){if(g.nodeType===3){if(S=s+g.textContent.length,s<=h&&S>=h)return{node:g,offset:h-s};s=S}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=vh(g)}}function No(s,h){return s&&h?s===h?!0:s&&s.nodeType===3?!1:h&&h.nodeType===3?No(s,h.parentNode):"contains"in s?s.contains(h):s.compareDocumentPosition?!!(s.compareDocumentPosition(h)&16):!1:!1}function _h(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var h=rh(s.document);h instanceof s.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)s=h.contentWindow;else break;h=rh(s.document)}return h}function au(s){var h=s&&s.nodeName&&s.nodeName.toLowerCase();return h&&(h==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||h==="textarea"||s.contentEditable==="true")}var Fr=Br&&"documentMode"in document&&11>=document.documentMode,Sl=null,ou=null,fo=null,su=!1;function Xf(s,h,g){var S=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;su||Sl==null||Sl!==rh(S)||(S=Sl,"selectionStart"in S&&au(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),fo&&wl(fo,S)||(fo=S,S=ju(ou,"onSelect"),0<S.length&&(h=new ml("onSelect","select",null,h,g),s.push({event:h,listeners:S}),h.target=Sl)))}function Tl(s,h){var g={};return g[s.toLowerCase()]=h.toLowerCase(),g["Webkit"+s]="webkit"+h,g["Moz"+s]="moz"+h,g}var gc={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionrun:Tl("Transition","TransitionRun"),transitionstart:Tl("Transition","TransitionStart"),transitioncancel:Tl("Transition","TransitionCancel"),transitionend:Tl("Transition","TransitionEnd")},Md={},Pd={};Br&&(Pd=document.createElement("div").style,"AnimationEvent"in window||(delete gc.animationend.animation,delete gc.animationiteration.animation,delete gc.animationstart.animation),"TransitionEvent"in window||delete gc.transitionend.transition);function Al(s){if(Md[s])return Md[s];if(!gc[s])return s;var h=gc[s],g;for(g in h)if(h.hasOwnProperty(g)&&g in Pd)return Md[s]=h[g];return s}var Ed=Al("animationend"),lu=Al("animationiteration"),cu=Al("animationstart"),xh=Al("transitionrun"),Cd=Al("transitionstart"),Ml=Al("transitioncancel"),yc=Al("transitionend"),Pl=new Map,pa="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pa.push("scrollEnd");function qa(s,h){Pl.set(s,h),Fa(h,[s])}var jd=new WeakMap;function ma(s,h){if(typeof s=="object"&&s!==null){var g=jd.get(s);return g!==void 0?g:(h={value:s,source:h,stack:eh(h)},jd.set(s,h),h)}return{value:s,source:h,stack:eh(h)}}var xi=[],os=0,vc=0;function ks(){for(var s=os,h=vc=os=0;h<s;){var g=xi[h];xi[h++]=null;var S=xi[h];xi[h++]=null;var j=xi[h];xi[h++]=null;var R=xi[h];if(xi[h++]=null,S!==null&&j!==null){var Y=S.pending;Y===null?j.next=j:(j.next=Y.next,Y.next=j),S.pending=j}R!==0&&Cl(g,j,R)}}function El(s,h,g,S){xi[os++]=s,xi[os++]=h,xi[os++]=g,xi[os++]=S,vc|=S,s.lanes|=S,s=s.alternate,s!==null&&(s.lanes|=S)}function bh(s,h,g,S){return El(s,h,g,S),uu(s)}function po(s,h){return El(s,null,null,h),uu(s)}function Cl(s,h,g){s.lanes|=g;var S=s.alternate;S!==null&&(S.lanes|=g);for(var j=!1,R=s.return;R!==null;)R.childLanes|=g,S=R.alternate,S!==null&&(S.childLanes|=g),R.tag===22&&(s=R.stateNode,s===null||s._visibility&1||(j=!0)),s=R,R=R.return;return s.tag===3?(R=s.stateNode,j&&h!==null&&(j=31-ke(g),s=R.hiddenUpdates,S=s[j],S===null?s[j]=[h]:S.push(h),h.lane=g|536870912),R):null}function uu(s){if(50<Gh)throw Gh=0,ng=null,Error(a(185));for(var h=s.return;h!==null;)s=h,h=s.return;return s.tag===3?s.stateNode:null}var Ro={};function Pr(s,h,g,S){this.tag=s,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(s,h,g,S){return new Pr(s,h,g,S)}function Od(s){return s=s.prototype,!(!s||!s.isReactComponent)}function mo(s,h){var g=s.alternate;return g===null?(g=Bi(s.tag,h,s.key,s.mode),g.elementType=s.elementType,g.type=s.type,g.stateNode=s.stateNode,g.alternate=s,s.alternate=g):(g.pendingProps=h,g.type=s.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=s.flags&65011712,g.childLanes=s.childLanes,g.lanes=s.lanes,g.child=s.child,g.memoizedProps=s.memoizedProps,g.memoizedState=s.memoizedState,g.updateQueue=s.updateQueue,h=s.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=s.sibling,g.index=s.index,g.ref=s.ref,g.refCleanup=s.refCleanup,g}function _c(s,h){s.flags&=65011714;var g=s.alternate;return g===null?(s.childLanes=0,s.lanes=h,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=g.childLanes,s.lanes=g.lanes,s.child=g.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=g.memoizedProps,s.memoizedState=g.memoizedState,s.updateQueue=g.updateQueue,s.type=g.type,h=g.dependencies,s.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),s}function wh(s,h,g,S,j,R){var Y=0;if(S=s,typeof s=="function")Od(s)&&(Y=1);else if(typeof s=="string")Y=cf(s,g,Pt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case Ie:return s=Bi(31,g,h,j),s.elementType=Ie,s.lanes=R,s;case X:return Lo(g.children,j,R,h);case Z:Y=8,j|=24;break;case U:return s=Bi(12,g,h,j|2),s.elementType=U,s.lanes=R,s;case J:return s=Bi(13,g,h,j),s.elementType=J,s.lanes=R,s;case ae:return s=Bi(19,g,h,j),s.elementType=ae,s.lanes=R,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case re:case ne:Y=10;break e;case se:Y=9;break e;case ue:Y=11;break e;case he:Y=14;break e;case ve:Y=16,S=null;break e}Y=29,g=Error(a(130,s===null?"null":typeof s,"")),S=null}return h=Bi(Y,g,h,j),h.elementType=s,h.type=S,h.lanes=R,h}function Lo(s,h,g,S){return s=Bi(7,s,S,h),s.lanes=g,s}function hu(s,h,g){return s=Bi(6,s,null,h),s.lanes=g,s}function kd(s,h,g){return h=Bi(4,s.children!==null?s.children:[],s.key,h),h.lanes=g,h.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},h}var Is=[],ss=0,jl=null,Ol=0,Ji=[],ga=0,Bo=null,Ua=1,Ea="";function Ca(s,h){Is[ss++]=Ol,Is[ss++]=jl,jl=s,Ol=h}function du(s,h,g){Ji[ga++]=Ua,Ji[ga++]=Ea,Ji[ga++]=Bo,Bo=s;var S=Ua;s=Ea;var j=32-ke(S)-1;S&=~(1<<j),g+=1;var R=32-ke(h)+j;if(30<R){var Y=j-j%5;R=(S&(1<<Y)-1).toString(32),S>>=Y,j-=Y,Ua=1<<32-ke(h)+j|g<<j|S,Ea=R+s}else Ua=1<<R|g<<j|S,Ea=s}function Id(s){s.return!==null&&(Ca(s,1),du(s,1,0))}function kl(s){for(;s===jl;)jl=Is[--ss],Is[ss]=null,Ol=Is[--ss],Is[ss]=null;for(;s===Bo;)Bo=Ji[--ga],Ji[ga]=null,Ea=Ji[--ga],Ji[ga]=null,Ua=Ji[--ga],Ji[ga]=null}var ea=null,Dn=null,zr=!1,Fo=null,ja=!1,xc=Error(a(519));function Va(s){var h=Error(a(418,""));throw Fi(ma(h,s)),xc}function bc(s){var h=s.stateNode,g=s.type,S=s.memoizedProps;switch(h[Zr]=s,h[Ar]=S,g){case"dialog":kr("cancel",h),kr("close",h);break;case"iframe":case"object":case"embed":kr("load",h);break;case"video":case"audio":for(g=0;g<qc.length;g++)kr(qc[g],h);break;case"source":kr("error",h);break;case"img":case"image":case"link":kr("error",h),kr("load",h);break;case"details":kr("toggle",h);break;case"input":kr("invalid",h),nh(h,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0),th(h);break;case"select":kr("invalid",h);break;case"textarea":kr("invalid",h),Ff(h,S.value,S.defaultValue,S.children),th(h)}g=S.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||h.textContent===""+g||S.suppressHydrationWarning===!0||yv(h.textContent,g)?(S.popover!=null&&(kr("beforetoggle",h),kr("toggle",h)),S.onScroll!=null&&kr("scroll",h),S.onScrollEnd!=null&&kr("scrollend",h),S.onClick!=null&&(h.onclick=Wh),h=!0):h=!1,h||Va(s)}function fu(s){for(ea=s.return;ea;)switch(ea.tag){case 5:case 13:ja=!1;return;case 27:case 3:ja=!0;return;default:ea=ea.return}}function wc(s){if(s!==ea)return!1;if(!zr)return fu(s),zr=!0,!1;var h=s.tag,g;if((g=h!==3&&h!==27)&&((g=h===5)&&(g=s.type,g=!(g!=="form"&&g!=="button")||Cp(s.type,s.memoizedProps)),g=!g),g&&Dn&&Va(s),fu(s),h===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(317));e:{for(s=s.nextSibling,h=0;s;){if(s.nodeType===8)if(g=s.data,g==="/$"){if(h===0){Dn=Jo(s.nextSibling);break e}h--}else g!=="$"&&g!=="$!"&&g!=="$?"||h++;s=s.nextSibling}Dn=null}}else h===27?(h=Dn,Wl(s.type)?(s=Op,Op=null,Dn=s):Dn=h):Dn=ea?Jo(s.stateNode.nextSibling):null;return!0}function vn(){Dn=ea=null,zr=!1}function Ds(){var s=Fo;return s!==null&&(eo===null?eo=s:eo.push.apply(eo,s),Fo=null),s}function Fi(s){Fo===null?Fo=[s]:Fo.push(s)}var pu=Xe(null),$o=null,go=null;function ya(s,h,g){st(pu,h._currentValue),h._currentValue=g}function va(s){s._currentValue=pu.current,ot(pu)}function Il(s,h,g){for(;s!==null;){var S=s.alternate;if((s.childLanes&h)!==h?(s.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),s===g)break;s=s.return}}function Sc(s,h,g,S){var j=s.child;for(j!==null&&(j.return=s);j!==null;){var R=j.dependencies;if(R!==null){var Y=j.child;R=R.firstContext;e:for(;R!==null;){var ce=R;R=j;for(var Me=0;Me<h.length;Me++)if(ce.context===h[Me]){R.lanes|=g,ce=R.alternate,ce!==null&&(ce.lanes|=g),Il(R.return,g,s),S||(Y=null);break e}R=ce.next}}else if(j.tag===18){if(Y=j.return,Y===null)throw Error(a(341));Y.lanes|=g,R=Y.alternate,R!==null&&(R.lanes|=g),Il(Y,g,s),Y=null}else Y=j.child;if(Y!==null)Y.return=j;else for(Y=j;Y!==null;){if(Y===s){Y=null;break}if(j=Y.sibling,j!==null){j.return=Y.return,Y=j;break}Y=Y.return}j=Y}}function Dl(s,h,g,S){s=null;for(var j=h,R=!1;j!==null;){if(!R){if((j.flags&524288)!==0)R=!0;else if((j.flags&262144)!==0)break}if(j.tag===10){var Y=j.alternate;if(Y===null)throw Error(a(387));if(Y=Y.memoizedProps,Y!==null){var ce=j.type;fa(j.pendingProps.value,Y.value)||(s!==null?s.push(ce):s=[ce])}}else if(j===yr.current){if(Y=j.alternate,Y===null)throw Error(a(387));Y.memoizedState.memoizedState!==j.memoizedState.memoizedState&&(s!==null?s.push(b):s=[b])}j=j.return}s!==null&&Sc(h,s,g,S),h.flags|=262144}function mu(s){for(s=s.firstContext;s!==null;){if(!fa(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ls(s){$o=s,go=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function bi(s){return zs($o,s)}function cs(s,h){return $o===null&&ls(s),zs(s,h)}function zs(s,h){var g=h._currentValue;if(h={context:h,memoizedValue:g,next:null},go===null){if(s===null)throw Error(a(308));go=h,s.dependencies={lanes:0,firstContext:h},s.flags|=524288}else go=go.next=h;return g}var Wf=typeof AbortController<"u"?AbortController:function(){var s=[],h=this.signal={aborted:!1,addEventListener:function(g,S){s.push(S)}};this.abort=function(){h.aborted=!0,s.forEach(function(g){return g()})}},Yf=e.unstable_scheduleCallback,Kf=e.unstable_NormalPriority,ii={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sh(){return{controller:new Wf,data:new Map,refCount:0}}function qo(s){s.refCount--,s.refCount===0&&Yf(Kf,function(){s.controller.abort()})}var Uo=null,$i=0,Oa=0,Ns=null;function Ga(s,h){if(Uo===null){var g=Uo=[];$i=0,Oa=lg(),Ns={status:"pending",value:void 0,then:function(S){g.push(S)}}}return $i++,h.then(Za,Za),h}function Za(){if(--$i===0&&Uo!==null){Ns!==null&&(Ns.status="fulfilled");var s=Uo;Uo=null,Oa=0,Ns=null;for(var h=0;h<s.length;h++)(0,s[h])()}}function Tc(s,h){var g=[],S={status:"pending",value:null,reason:null,then:function(j){g.push(j)}};return s.then(function(){S.status="fulfilled",S.value=h;for(var j=0;j<g.length;j++)(0,g[j])(h)},function(j){for(S.status="rejected",S.reason=j,j=0;j<g.length;j++)(0,g[j])(void 0)}),S}var ka=Pe.S;Pe.S=function(s,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&Ga(s,h),ka!==null&&ka(s,h)};var _a=Xe(null);function Dd(){var s=_a.current;return s!==null?s:On.pooledCache}function Ac(s,h){h===null?st(_a,_a.current):st(_a,h.pool)}function Qf(){var s=Dd();return s===null?null:{parent:ii._currentValue,pool:s}}var us=Error(a(460)),zd=Error(a(474)),Rs=Error(a(542)),yo={then:function(){}};function Dt(s){return s=s.status,s==="fulfilled"||s==="rejected"}function gu(){}function Th(s,h,g){switch(g=s[g],g===void 0?s.push(h):g!==h&&(h.then(gu,gu),h=g),h.status){case"fulfilled":return h.value;case"rejected":throw s=h.reason,Ls(s),s;default:if(typeof h.status=="string")h.then(gu,gu);else{if(s=On,s!==null&&100<s.shellSuspendCounter)throw Error(a(482));s=h,s.status="pending",s.then(function(S){if(h.status==="pending"){var j=h;j.status="fulfilled",j.value=S}},function(S){if(h.status==="pending"){var j=h;j.status="rejected",j.reason=S}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw s=h.reason,Ls(s),s}throw hs=h,us}}var hs=null;function Mc(){if(hs===null)throw Error(a(459));var s=hs;return hs=null,s}function Ls(s){if(s===us||s===Rs)throw Error(a(483))}var Ia=!1;function wr(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pc(s,h){s=s.updateQueue,h.updateQueue===s&&(h.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ds(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function vo(s,h,g){var S=s.updateQueue;if(S===null)return null;if(S=S.shared,(mn&2)!==0){var j=S.pending;return j===null?h.next=h:(h.next=j.next,j.next=h),S.pending=h,h=uu(s),Cl(s,null,g),h}return El(s,S,h,g),uu(s)}function zl(s,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194048)!==0)){var S=h.lanes;S&=s.pendingLanes,g|=S,h.lanes=g,qr(s,g)}}function Ah(s,h){var g=s.updateQueue,S=s.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var j=null,R=null;if(g=g.firstBaseUpdate,g!==null){do{var Y={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};R===null?j=R=Y:R=R.next=Y,g=g.next}while(g!==null);R===null?j=R=h:R=R.next=h}else j=R=h;g={baseState:S.baseState,firstBaseUpdate:j,lastBaseUpdate:R,shared:S.shared,callbacks:S.callbacks},s.updateQueue=g;return}s=g.lastBaseUpdate,s===null?g.firstBaseUpdate=h:s.next=h,g.lastBaseUpdate=h}var Mh=!1;function Bs(){if(Mh){var s=Ns;if(s!==null)throw s}}function Ec(s,h,g,S){Mh=!1;var j=s.updateQueue;Ia=!1;var R=j.firstBaseUpdate,Y=j.lastBaseUpdate,ce=j.shared.pending;if(ce!==null){j.shared.pending=null;var Me=ce,qe=Me.next;Me.next=null,Y===null?R=qe:Y.next=qe,Y=Me;var pt=s.alternate;pt!==null&&(pt=pt.updateQueue,ce=pt.lastBaseUpdate,ce!==Y&&(ce===null?pt.firstBaseUpdate=qe:ce.next=qe,pt.lastBaseUpdate=Me))}if(R!==null){var bt=j.baseState;Y=0,pt=qe=Me=null,ce=R;do{var et=ce.lane&-536870913,lt=et!==ce.lane;if(lt?(Or&et)===et:(S&et)===et){et!==0&&et===Oa&&(Mh=!0),pt!==null&&(pt=pt.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var cr=s,rr=ce;et=h;var Qr=g;switch(rr.tag){case 1:if(cr=rr.payload,typeof cr=="function"){bt=cr.call(Qr,bt,et);break e}bt=cr;break e;case 3:cr.flags=cr.flags&-65537|128;case 0:if(cr=rr.payload,et=typeof cr=="function"?cr.call(Qr,bt,et):cr,et==null)break e;bt=z({},bt,et);break e;case 2:Ia=!0}}et=ce.callback,et!==null&&(s.flags|=64,lt&&(s.flags|=8192),lt=j.callbacks,lt===null?j.callbacks=[et]:lt.push(et))}else lt={lane:et,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},pt===null?(qe=pt=lt,Me=bt):pt=pt.next=lt,Y|=et;if(ce=ce.next,ce===null){if(ce=j.shared.pending,ce===null)break;lt=ce,ce=lt.next,lt.next=null,j.lastBaseUpdate=lt,j.shared.pending=null}}while(!0);pt===null&&(Me=bt),j.baseState=Me,j.firstBaseUpdate=qe,j.lastBaseUpdate=pt,R===null&&(j.shared.lanes=0),Yo|=Y,s.lanes=Y,s.memoizedState=bt}}function Nd(s,h){if(typeof s!="function")throw Error(a(191,s));s.call(h)}function Rd(s,h){var g=s.callbacks;if(g!==null)for(s.callbacks=null,s=0;s<g.length;s++)Nd(g[s],h)}var Nl=Xe(null),yu=Xe(0);function fs(s,h){s=Vl,st(yu,s),st(Nl,h),Vl=s|h.baseLanes}function nn(){st(yu,Vl),st(Nl,Nl.current)}function Ph(){Vl=yu.current,ot(Nl),ot(yu)}var Ha=0,Sr=null,an=null,En=null,vu=!1,Fs=!1,qi=!1,Rl=0,Rt=0,Ht=null,Cc=0;function Fn(){throw Error(a(321))}function jc(s,h){if(h===null)return!1;for(var g=0;g<h.length&&g<s.length;g++)if(!fa(s[g],h[g]))return!1;return!0}function Pi(s,h,g,S,j,R){return Ha=R,Sr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Pe.H=s===null||s.memoizedState===null?ms:Ka,qi=!1,R=g(S,j),qi=!1,Fs&&(R=Xa(h,g,S,j)),Ld(s),R}function Ld(s){Pe.H=wi;var h=an!==null&&an.next!==null;if(Ha=0,En=an=Sr=null,vu=!1,Rt=0,Ht=null,h)throw Error(a(300));s===null||Ei||(s=s.dependencies,s!==null&&mu(s)&&(Ei=!0))}function Xa(s,h,g,S){Sr=s;var j=0;do{if(Fs&&(Ht=null),Rt=0,Fs=!1,25<=j)throw Error(a(301));if(j+=1,En=an=null,s.updateQueue!=null){var R=s.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}Pe.H=Gs,R=h(g,S)}while(Fs);return R}function Ll(){var s=Pe.H,h=s.useState()[0];return h=typeof h.then=="function"?Wa(h):h,s=s.useState()[0],(an!==null?an.memoizedState:null)!==s&&(Sr.flags|=1024),h}function Bd(){var s=Rl!==0;return Rl=0,s}function Fd(s,h,g){h.updateQueue=s.updateQueue,h.flags&=-2053,s.lanes&=~g}function $d(s){if(vu){for(s=s.memoizedState;s!==null;){var h=s.queue;h!==null&&(h.pending=null),s=s.next}vu=!1}Ha=0,En=an=Sr=null,Fs=!1,Rt=Rl=0,Ht=null}function gi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?Sr.memoizedState=En=s:En=En.next=s,En}function _r(){if(an===null){var s=Sr.alternate;s=s!==null?s.memoizedState:null}else s=an.next;var h=En===null?Sr.memoizedState:En.next;if(h!==null)En=h,an=s;else{if(s===null)throw Sr.alternate===null?Error(a(467)):Error(a(310));an=s,s={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},En===null?Sr.memoizedState=En=s:En=En.next=s}return En}function Cn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wa(s){var h=Rt;return Rt+=1,Ht===null&&(Ht=[]),s=Th(Ht,s,h),h=Sr,(En===null?h.memoizedState:En.next)===null&&(h=h.alternate,Pe.H=h===null||h.memoizedState===null?ms:Ka),s}function ps(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Wa(s);if(s.$$typeof===ne)return bi(s)}throw Error(a(438,String(s)))}function $s(s){var h=null,g=Sr.updateQueue;if(g!==null&&(h=g.memoCache),h==null){var S=Sr.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(h={data:S.data.map(function(j){return j.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),g===null&&(g=Cn(),Sr.updateQueue=g),g.memoCache=h,g=h.data[h.index],g===void 0)for(g=h.data[h.index]=Array(s),S=0;S<s;S++)g[S]=at;return h.index++,g}function Ya(s,h){return typeof h=="function"?h(s):h}function qs(s){var h=_r();return _u(h,an,s)}function _u(s,h,g){var S=s.queue;if(S===null)throw Error(a(311));S.lastRenderedReducer=g;var j=s.baseQueue,R=S.pending;if(R!==null){if(j!==null){var Y=j.next;j.next=R.next,R.next=Y}h.baseQueue=j=R,S.pending=null}if(R=s.baseState,j===null)s.memoizedState=R;else{h=j.next;var ce=Y=null,Me=null,qe=h,pt=!1;do{var bt=qe.lane&-536870913;if(bt!==qe.lane?(Or&bt)===bt:(Ha&bt)===bt){var et=qe.revertLane;if(et===0)Me!==null&&(Me=Me.next={lane:0,revertLane:0,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),bt===Oa&&(pt=!0);else if((Ha&et)===et){qe=qe.next,et===Oa&&(pt=!0);continue}else bt={lane:0,revertLane:qe.revertLane,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},Me===null?(ce=Me=bt,Y=R):Me=Me.next=bt,Sr.lanes|=et,Yo|=et;bt=qe.action,qi&&g(R,bt),R=qe.hasEagerState?qe.eagerState:g(R,bt)}else et={lane:bt,revertLane:qe.revertLane,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},Me===null?(ce=Me=et,Y=R):Me=Me.next=et,Sr.lanes|=bt,Yo|=bt;qe=qe.next}while(qe!==null&&qe!==h);if(Me===null?Y=R:Me.next=ce,!fa(R,s.memoizedState)&&(Ei=!0,pt&&(g=Ns,g!==null)))throw g;s.memoizedState=R,s.baseState=Y,s.baseQueue=Me,S.lastRenderedState=R}return j===null&&(S.lanes=0),[s.memoizedState,S.dispatch]}function Vo(s){var h=_r(),g=h.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=s;var S=g.dispatch,j=g.pending,R=h.memoizedState;if(j!==null){g.pending=null;var Y=j=j.next;do R=s(R,Y.action),Y=Y.next;while(Y!==j);fa(R,h.memoizedState)||(Ei=!0),h.memoizedState=R,h.baseQueue===null&&(h.baseState=R),g.lastRenderedState=R}return[R,S]}function Us(s,h,g){var S=Sr,j=_r(),R=zr;if(R){if(g===void 0)throw Error(a(407));g=g()}else g=h();var Y=!fa((an||j).memoizedState,g);Y&&(j.memoizedState=g,Ei=!0),j=j.queue;var ce=Vs.bind(null,S,j,s);if(pe(2048,8,ce,[s]),j.getSnapshot!==h||Y||En!==null&&En.memoizedState.tag&1){if(S.flags|=2048,G(9,Q(),xu.bind(null,S,j,g,h),null),On===null)throw Error(a(349));R||(Ha&124)!==0||Eh(S,h,g)}return g}function Eh(s,h,g){s.flags|=16384,s={getSnapshot:h,value:g},h=Sr.updateQueue,h===null?(h=Cn(),Sr.updateQueue=h,h.stores=[s]):(g=h.stores,g===null?h.stores=[s]:g.push(s))}function xu(s,h,g,S){h.value=g,h.getSnapshot=S,Ch(h)&&jh(s)}function Vs(s,h,g){return g(function(){Ch(h)&&jh(s)})}function Ch(s){var h=s.getSnapshot;s=s.value;try{var g=h();return!fa(s,g)}catch{return!0}}function jh(s){var h=po(s,2);h!==null&&to(h,s,2)}function Oc(s){var h=gi();if(typeof s=="function"){var g=s;if(s=g(),qi){ci(!0);try{g()}finally{ci(!1)}}}return h.memoizedState=h.baseState=s,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:s},h}function Oh(s,h,g,S){return s.baseState=g,_u(s,an,typeof S=="function"?S:Ya)}function x(s,h,g,S,j){if(ai(s))throw Error(a(485));if(s=h.action,s!==null){var R={payload:j,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){R.listeners.push(Y)}};Pe.T!==null?g(!0):R.isTransition=!1,S(R),g=h.pending,g===null?(R.next=h.pending=R,r(h,R)):(R.next=g.next,h.pending=g.next=R)}}function r(s,h){var g=h.action,S=h.payload,j=s.state;if(h.isTransition){var R=Pe.T,Y={};Pe.T=Y;try{var ce=g(j,S),Me=Pe.S;Me!==null&&Me(Y,ce),u(s,h,ce)}catch(qe){_(s,h,qe)}finally{Pe.T=R}}else try{R=g(j,S),u(s,h,R)}catch(qe){_(s,h,qe)}}function u(s,h,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(S){p(s,h,S)},function(S){return _(s,h,S)}):p(s,h,g)}function p(s,h,g){h.status="fulfilled",h.value=g,w(h),s.state=g,h=s.pending,h!==null&&(g=h.next,g===h?s.pending=null:(g=g.next,h.next=g,r(s,g)))}function _(s,h,g){var S=s.pending;if(s.pending=null,S!==null){S=S.next;do h.status="rejected",h.reason=g,w(h),h=h.next;while(h!==S)}s.action=null}function w(s){s=s.listeners;for(var h=0;h<s.length;h++)(0,s[h])()}function M(s,h){return h}function I(s,h){if(zr){var g=On.formState;if(g!==null){e:{var S=Sr;if(zr){if(Dn){t:{for(var j=Dn,R=ja;j.nodeType!==8;){if(!R){j=null;break t}if(j=Jo(j.nextSibling),j===null){j=null;break t}}R=j.data,j=R==="F!"||R==="F"?j:null}if(j){Dn=Jo(j.nextSibling),S=j.data==="F!";break e}}Va(S)}S=!1}S&&(h=g[0])}}return g=gi(),g.memoizedState=g.baseState=h,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:M,lastRenderedState:h},g.queue=S,g=cn.bind(null,Sr,S),S.dispatch=g,S=Oc(!1),R=fn.bind(null,Sr,!1,S.queue),S=gi(),j={state:h,dispatch:null,action:s,pending:null},S.queue=j,g=x.bind(null,Sr,j,R,g),j.dispatch=g,S.memoizedState=s,[h,g,!1]}function D(s){var h=_r();return $(h,an,s)}function $(s,h,g){if(h=_u(s,h,M)[0],s=qs(Ya)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var S=Wa(h)}catch(Y){throw Y===us?Rs:Y}else S=h;h=_r();var j=h.queue,R=j.dispatch;return g!==h.memoizedState&&(Sr.flags|=2048,G(9,Q(),q.bind(null,j,g),null)),[S,R,s]}function q(s,h){s.action=h}function H(s){var h=_r(),g=an;if(g!==null)return $(h,g,s);_r(),h=h.memoizedState,g=_r();var S=g.queue.dispatch;return g.memoizedState=s,[h,S,!1]}function G(s,h,g,S){return s={tag:s,create:g,deps:S,inst:h,next:null},h=Sr.updateQueue,h===null&&(h=Cn(),Sr.updateQueue=h),g=h.lastEffect,g===null?h.lastEffect=s.next=s:(S=g.next,g.next=s,s.next=S,h.lastEffect=s),s}function Q(){return{destroy:void 0,resource:void 0}}function oe(){return _r().memoizedState}function me(s,h,g,S){var j=gi();S=S===void 0?null:S,Sr.flags|=s,j.memoizedState=G(1|h,Q(),g,S)}function pe(s,h,g,S){var j=_r();S=S===void 0?null:S;var R=j.memoizedState.inst;an!==null&&S!==null&&jc(S,an.memoizedState.deps)?j.memoizedState=G(h,R,g,S):(Sr.flags|=s,j.memoizedState=G(1|h,R,g,S))}function ge(s,h){me(8390656,8,s,h)}function _e(s,h){pe(2048,8,s,h)}function Te(s,h){return pe(4,2,s,h)}function be(s,h){return pe(4,4,s,h)}function Ce(s,h){if(typeof h=="function"){s=s();var g=h(s);return function(){typeof g=="function"?g():h(null)}}if(h!=null)return s=s(),h.current=s,function(){h.current=null}}function Oe(s,h,g){g=g!=null?g.concat([s]):null,pe(4,4,Ce.bind(null,h,s),g)}function we(){}function Ne(s,h){var g=_r();h=h===void 0?null:h;var S=g.memoizedState;return h!==null&&jc(h,S[1])?S[0]:(g.memoizedState=[s,h],s)}function nt(s,h){var g=_r();h=h===void 0?null:h;var S=g.memoizedState;if(h!==null&&jc(h,S[1]))return S[0];if(S=s(),qi){ci(!0);try{s()}finally{ci(!1)}}return g.memoizedState=[S,h],S}function We(s,h,g){return g===void 0||(Ha&1073741824)!==0?s.memoizedState=h:(s.memoizedState=g,s=Jy(),Sr.lanes|=s,Yo|=s,g)}function Ke(s,h,g,S){return fa(g,h)?g:Nl.current!==null?(s=We(s,g,S),fa(s,h)||(Ei=!0),s):(Ha&42)===0?(Ei=!0,s.memoizedState=g):(s=Jy(),Sr.lanes|=s,Yo|=s,h)}function Qe(s,h,g,S,j){var R=Ve.p;Ve.p=R!==0&&8>R?R:8;var Y=Pe.T,ce={};Pe.T=ce,fn(s,!1,h,g);try{var Me=j(),qe=Pe.S;if(qe!==null&&qe(ce,Me),Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var pt=Tc(Me,S);Tr(s,h,pt,Ta(s))}else Tr(s,h,S,Ta(s))}catch(bt){Tr(s,h,{then:function(){},status:"rejected",reason:bt},Ta())}finally{Ve.p=R,Pe.T=Y}}function Tt(){}function At(s,h,g,S){if(s.tag!==5)throw Error(a(476));var j=yt(s).queue;Qe(s,j,h,Ge,g===null?Tt:function(){return Lt(s),g(S)})}function yt(s){var h=s.memoizedState;if(h!==null)return h;h={memoizedState:Ge,baseState:Ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:Ge},next:null};var g={};return h.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:g},next:null},s.memoizedState=h,s=s.alternate,s!==null&&(s.memoizedState=h),h}function Lt(s){var h=yt(s).next.queue;Tr(s,h,{},Ta())}function lr(){return bi(b)}function Hr(){return _r().memoizedState}function Xr(){return _r().memoizedState}function ln(s){for(var h=s.return;h!==null;){switch(h.tag){case 24:case 3:var g=Ta();s=ds(g);var S=vo(h,s,g);S!==null&&(to(S,h,g),zl(S,h,g)),h={cache:Sh()},s.payload=h;return}h=h.return}}function jn(s,h,g){var S=Ta();g={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},ai(s)?$n(h,g):(g=bh(s,h,g,S),g!==null&&(to(g,s,S),qn(g,h,S)))}function cn(s,h,g){var S=Ta();Tr(s,h,g,S)}function Tr(s,h,g,S){var j={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(ai(s))$n(h,j);else{var R=s.alternate;if(s.lanes===0&&(R===null||R.lanes===0)&&(R=h.lastRenderedReducer,R!==null))try{var Y=h.lastRenderedState,ce=R(Y,g);if(j.hasEagerState=!0,j.eagerState=ce,fa(ce,Y))return El(s,h,j,0),On===null&&ks(),!1}catch{}finally{}if(g=bh(s,h,j,S),g!==null)return to(g,s,S),qn(g,h,S),!0}return!1}function fn(s,h,g,S){if(S={lane:2,revertLane:lg(),action:S,hasEagerState:!1,eagerState:null,next:null},ai(s)){if(h)throw Error(a(479))}else h=bh(s,g,S,2),h!==null&&to(h,s,2)}function ai(s){var h=s.alternate;return s===Sr||h!==null&&h===Sr}function $n(s,h){Fs=vu=!0;var g=s.pending;g===null?h.next=h:(h.next=g.next,g.next=h),s.pending=h}function qn(s,h,g){if((g&4194048)!==0){var S=h.lanes;S&=s.pendingLanes,g|=S,h.lanes=g,qr(s,g)}}var wi={readContext:bi,use:ps,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useLayoutEffect:Fn,useInsertionEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useSyncExternalStore:Fn,useId:Fn,useHostTransitionStatus:Fn,useFormState:Fn,useActionState:Fn,useOptimistic:Fn,useMemoCache:Fn,useCacheRefresh:Fn},ms={readContext:bi,use:ps,useCallback:function(s,h){return gi().memoizedState=[s,h===void 0?null:h],s},useContext:bi,useEffect:ge,useImperativeHandle:function(s,h,g){g=g!=null?g.concat([s]):null,me(4194308,4,Ce.bind(null,h,s),g)},useLayoutEffect:function(s,h){return me(4194308,4,s,h)},useInsertionEffect:function(s,h){me(4,2,s,h)},useMemo:function(s,h){var g=gi();h=h===void 0?null:h;var S=s();if(qi){ci(!0);try{s()}finally{ci(!1)}}return g.memoizedState=[S,h],S},useReducer:function(s,h,g){var S=gi();if(g!==void 0){var j=g(h);if(qi){ci(!0);try{g(h)}finally{ci(!1)}}}else j=h;return S.memoizedState=S.baseState=j,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:j},S.queue=s,s=s.dispatch=jn.bind(null,Sr,s),[S.memoizedState,s]},useRef:function(s){var h=gi();return s={current:s},h.memoizedState=s},useState:function(s){s=Oc(s);var h=s.queue,g=cn.bind(null,Sr,h);return h.dispatch=g,[s.memoizedState,g]},useDebugValue:we,useDeferredValue:function(s,h){var g=gi();return We(g,s,h)},useTransition:function(){var s=Oc(!1);return s=Qe.bind(null,Sr,s.queue,!0,!1),gi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,h,g){var S=Sr,j=gi();if(zr){if(g===void 0)throw Error(a(407));g=g()}else{if(g=h(),On===null)throw Error(a(349));(Or&124)!==0||Eh(S,h,g)}j.memoizedState=g;var R={value:g,getSnapshot:h};return j.queue=R,ge(Vs.bind(null,S,R,s),[s]),S.flags|=2048,G(9,Q(),xu.bind(null,S,R,g,h),null),g},useId:function(){var s=gi(),h=On.identifierPrefix;if(zr){var g=Ea,S=Ua;g=(S&~(1<<32-ke(S)-1)).toString(32)+g,h="«"+h+"R"+g,g=Rl++,0<g&&(h+="H"+g.toString(32)),h+="»"}else g=Cc++,h="«"+h+"r"+g.toString(32)+"»";return s.memoizedState=h},useHostTransitionStatus:lr,useFormState:I,useActionState:I,useOptimistic:function(s){var h=gi();h.memoizedState=h.baseState=s;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=g,h=fn.bind(null,Sr,!0,g),g.dispatch=h,[s,h]},useMemoCache:$s,useCacheRefresh:function(){return gi().memoizedState=ln.bind(null,Sr)}},Ka={readContext:bi,use:ps,useCallback:Ne,useContext:bi,useEffect:_e,useImperativeHandle:Oe,useInsertionEffect:Te,useLayoutEffect:be,useMemo:nt,useReducer:qs,useRef:oe,useState:function(){return qs(Ya)},useDebugValue:we,useDeferredValue:function(s,h){var g=_r();return Ke(g,an.memoizedState,s,h)},useTransition:function(){var s=qs(Ya)[0],h=_r().memoizedState;return[typeof s=="boolean"?s:Wa(s),h]},useSyncExternalStore:Us,useId:Hr,useHostTransitionStatus:lr,useFormState:D,useActionState:D,useOptimistic:function(s,h){var g=_r();return Oh(g,an,s,h)},useMemoCache:$s,useCacheRefresh:Xr},Gs={readContext:bi,use:ps,useCallback:Ne,useContext:bi,useEffect:_e,useImperativeHandle:Oe,useInsertionEffect:Te,useLayoutEffect:be,useMemo:nt,useReducer:Vo,useRef:oe,useState:function(){return Vo(Ya)},useDebugValue:we,useDeferredValue:function(s,h){var g=_r();return an===null?We(g,s,h):Ke(g,an.memoizedState,s,h)},useTransition:function(){var s=Vo(Ya)[0],h=_r().memoizedState;return[typeof s=="boolean"?s:Wa(s),h]},useSyncExternalStore:Us,useId:Hr,useHostTransitionStatus:lr,useFormState:H,useActionState:H,useOptimistic:function(s,h){var g=_r();return an!==null?Oh(g,an,s,h):(g.baseState=s,[s,g.queue.dispatch])},useMemoCache:$s,useCacheRefresh:Xr},Qa=null,Zs=0;function gs(s){var h=Zs;return Zs+=1,Qa===null&&(Qa=[]),Th(Qa,s,h)}function Da(s,h){h=h.props.ref,s.ref=h!==void 0?h:null}function Ui(s,h){throw h.$$typeof===O?Error(a(525)):(s=Object.prototype.toString.call(h),Error(a(31,s==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":s)))}function _o(s){var h=s._init;return h(s._payload)}function xo(s){function h(Ze,Re){if(s){var Je=Ze.deletions;Je===null?(Ze.deletions=[Re],Ze.flags|=16):Je.push(Re)}}function g(Ze,Re){if(!s)return null;for(;Re!==null;)h(Ze,Re),Re=Re.sibling;return null}function S(Ze){for(var Re=new Map;Ze!==null;)Ze.key!==null?Re.set(Ze.key,Ze):Re.set(Ze.index,Ze),Ze=Ze.sibling;return Re}function j(Ze,Re){return Ze=mo(Ze,Re),Ze.index=0,Ze.sibling=null,Ze}function R(Ze,Re,Je){return Ze.index=Je,s?(Je=Ze.alternate,Je!==null?(Je=Je.index,Je<Re?(Ze.flags|=67108866,Re):Je):(Ze.flags|=67108866,Re)):(Ze.flags|=1048576,Re)}function Y(Ze){return s&&Ze.alternate===null&&(Ze.flags|=67108866),Ze}function ce(Ze,Re,Je,xt){return Re===null||Re.tag!==6?(Re=hu(Je,Ze.mode,xt),Re.return=Ze,Re):(Re=j(Re,Je),Re.return=Ze,Re)}function Me(Ze,Re,Je,xt){var Xt=Je.type;return Xt===X?pt(Ze,Re,Je.props.children,xt,Je.key):Re!==null&&(Re.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===ve&&_o(Xt)===Re.type)?(Re=j(Re,Je.props),Da(Re,Je),Re.return=Ze,Re):(Re=wh(Je.type,Je.key,Je.props,null,Ze.mode,xt),Da(Re,Je),Re.return=Ze,Re)}function qe(Ze,Re,Je,xt){return Re===null||Re.tag!==4||Re.stateNode.containerInfo!==Je.containerInfo||Re.stateNode.implementation!==Je.implementation?(Re=kd(Je,Ze.mode,xt),Re.return=Ze,Re):(Re=j(Re,Je.children||[]),Re.return=Ze,Re)}function pt(Ze,Re,Je,xt,Xt){return Re===null||Re.tag!==7?(Re=Lo(Je,Ze.mode,xt,Xt),Re.return=Ze,Re):(Re=j(Re,Je),Re.return=Ze,Re)}function bt(Ze,Re,Je){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return Re=hu(""+Re,Ze.mode,Je),Re.return=Ze,Re;if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case B:return Je=wh(Re.type,Re.key,Re.props,null,Ze.mode,Je),Da(Je,Re),Je.return=Ze,Je;case F:return Re=kd(Re,Ze.mode,Je),Re.return=Ze,Re;case ve:var xt=Re._init;return Re=xt(Re._payload),bt(Ze,Re,Je)}if(rt(Re)||Fe(Re))return Re=Lo(Re,Ze.mode,Je,null),Re.return=Ze,Re;if(typeof Re.then=="function")return bt(Ze,gs(Re),Je);if(Re.$$typeof===ne)return bt(Ze,cs(Ze,Re),Je);Ui(Ze,Re)}return null}function et(Ze,Re,Je,xt){var Xt=Re!==null?Re.key:null;if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Xt!==null?null:ce(Ze,Re,""+Je,xt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case B:return Je.key===Xt?Me(Ze,Re,Je,xt):null;case F:return Je.key===Xt?qe(Ze,Re,Je,xt):null;case ve:return Xt=Je._init,Je=Xt(Je._payload),et(Ze,Re,Je,xt)}if(rt(Je)||Fe(Je))return Xt!==null?null:pt(Ze,Re,Je,xt,null);if(typeof Je.then=="function")return et(Ze,Re,gs(Je),xt);if(Je.$$typeof===ne)return et(Ze,Re,cs(Ze,Je),xt);Ui(Ze,Je)}return null}function lt(Ze,Re,Je,xt,Xt){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return Ze=Ze.get(Je)||null,ce(Re,Ze,""+xt,Xt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case B:return Ze=Ze.get(xt.key===null?Je:xt.key)||null,Me(Re,Ze,xt,Xt);case F:return Ze=Ze.get(xt.key===null?Je:xt.key)||null,qe(Re,Ze,xt,Xt);case ve:var Ir=xt._init;return xt=Ir(xt._payload),lt(Ze,Re,Je,xt,Xt)}if(rt(xt)||Fe(xt))return Ze=Ze.get(Je)||null,pt(Re,Ze,xt,Xt,null);if(typeof xt.then=="function")return lt(Ze,Re,Je,gs(xt),Xt);if(xt.$$typeof===ne)return lt(Ze,Re,Je,cs(Re,xt),Xt);Ui(Re,xt)}return null}function cr(Ze,Re,Je,xt){for(var Xt=null,Ir=null,Jt=Re,dr=Re=0,kn=null;Jt!==null&&dr<Je.length;dr++){Jt.index>dr?(kn=Jt,Jt=null):kn=Jt.sibling;var Jr=et(Ze,Jt,Je[dr],xt);if(Jr===null){Jt===null&&(Jt=kn);break}s&&Jt&&Jr.alternate===null&&h(Ze,Jt),Re=R(Jr,Re,dr),Ir===null?Xt=Jr:Ir.sibling=Jr,Ir=Jr,Jt=kn}if(dr===Je.length)return g(Ze,Jt),zr&&Ca(Ze,dr),Xt;if(Jt===null){for(;dr<Je.length;dr++)Jt=bt(Ze,Je[dr],xt),Jt!==null&&(Re=R(Jt,Re,dr),Ir===null?Xt=Jt:Ir.sibling=Jt,Ir=Jt);return zr&&Ca(Ze,dr),Xt}for(Jt=S(Jt);dr<Je.length;dr++)kn=lt(Jt,Ze,dr,Je[dr],xt),kn!==null&&(s&&kn.alternate!==null&&Jt.delete(kn.key===null?dr:kn.key),Re=R(kn,Re,dr),Ir===null?Xt=kn:Ir.sibling=kn,Ir=kn);return s&&Jt.forEach(function(Kl){return h(Ze,Kl)}),zr&&Ca(Ze,dr),Xt}function rr(Ze,Re,Je,xt){if(Je==null)throw Error(a(151));for(var Xt=null,Ir=null,Jt=Re,dr=Re=0,kn=null,Jr=Je.next();Jt!==null&&!Jr.done;dr++,Jr=Je.next()){Jt.index>dr?(kn=Jt,Jt=null):kn=Jt.sibling;var Kl=et(Ze,Jt,Jr.value,xt);if(Kl===null){Jt===null&&(Jt=kn);break}s&&Jt&&Kl.alternate===null&&h(Ze,Jt),Re=R(Kl,Re,dr),Ir===null?Xt=Kl:Ir.sibling=Kl,Ir=Kl,Jt=kn}if(Jr.done)return g(Ze,Jt),zr&&Ca(Ze,dr),Xt;if(Jt===null){for(;!Jr.done;dr++,Jr=Je.next())Jr=bt(Ze,Jr.value,xt),Jr!==null&&(Re=R(Jr,Re,dr),Ir===null?Xt=Jr:Ir.sibling=Jr,Ir=Jr);return zr&&Ca(Ze,dr),Xt}for(Jt=S(Jt);!Jr.done;dr++,Jr=Je.next())Jr=lt(Jt,Ze,dr,Jr.value,xt),Jr!==null&&(s&&Jr.alternate!==null&&Jt.delete(Jr.key===null?dr:Jr.key),Re=R(Jr,Re,dr),Ir===null?Xt=Jr:Ir.sibling=Jr,Ir=Jr);return s&&Jt.forEach(function($x){return h(Ze,$x)}),zr&&Ca(Ze,dr),Xt}function Qr(Ze,Re,Je,xt){if(typeof Je=="object"&&Je!==null&&Je.type===X&&Je.key===null&&(Je=Je.props.children),typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case B:e:{for(var Xt=Je.key;Re!==null;){if(Re.key===Xt){if(Xt=Je.type,Xt===X){if(Re.tag===7){g(Ze,Re.sibling),xt=j(Re,Je.props.children),xt.return=Ze,Ze=xt;break e}}else if(Re.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===ve&&_o(Xt)===Re.type){g(Ze,Re.sibling),xt=j(Re,Je.props),Da(xt,Je),xt.return=Ze,Ze=xt;break e}g(Ze,Re);break}else h(Ze,Re);Re=Re.sibling}Je.type===X?(xt=Lo(Je.props.children,Ze.mode,xt,Je.key),xt.return=Ze,Ze=xt):(xt=wh(Je.type,Je.key,Je.props,null,Ze.mode,xt),Da(xt,Je),xt.return=Ze,Ze=xt)}return Y(Ze);case F:e:{for(Xt=Je.key;Re!==null;){if(Re.key===Xt)if(Re.tag===4&&Re.stateNode.containerInfo===Je.containerInfo&&Re.stateNode.implementation===Je.implementation){g(Ze,Re.sibling),xt=j(Re,Je.children||[]),xt.return=Ze,Ze=xt;break e}else{g(Ze,Re);break}else h(Ze,Re);Re=Re.sibling}xt=kd(Je,Ze.mode,xt),xt.return=Ze,Ze=xt}return Y(Ze);case ve:return Xt=Je._init,Je=Xt(Je._payload),Qr(Ze,Re,Je,xt)}if(rt(Je))return cr(Ze,Re,Je,xt);if(Fe(Je)){if(Xt=Fe(Je),typeof Xt!="function")throw Error(a(150));return Je=Xt.call(Je),rr(Ze,Re,Je,xt)}if(typeof Je.then=="function")return Qr(Ze,Re,gs(Je),xt);if(Je.$$typeof===ne)return Qr(Ze,Re,cs(Ze,Je),xt);Ui(Ze,Je)}return typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint"?(Je=""+Je,Re!==null&&Re.tag===6?(g(Ze,Re.sibling),xt=j(Re,Je),xt.return=Ze,Ze=xt):(g(Ze,Re),xt=hu(Je,Ze.mode,xt),xt.return=Ze,Ze=xt),Y(Ze)):g(Ze,Re)}return function(Ze,Re,Je,xt){try{Zs=0;var Xt=Qr(Ze,Re,Je,xt);return Qa=null,Xt}catch(Jt){if(Jt===us||Jt===Rs)throw Jt;var Ir=Bi(29,Jt,null,Ze.mode);return Ir.lanes=xt,Ir.return=Ze,Ir}finally{}}}var Si=xo(!0),zn=xo(!1),on=Xe(null),Un=null;function Tn(s){var h=s.alternate;st(pn,pn.current&1),st(on,s),Un===null&&(h===null||Nl.current!==null||h.memoizedState!==null)&&(Un=s)}function kh(s){if(s.tag===22){if(st(pn,pn.current),st(on,s),Un===null){var h=s.alternate;h!==null&&h.memoizedState!==null&&(Un=s)}}else Ja()}function Ja(){st(pn,pn.current),st(on,on.current)}function ta(s){ot(on),Un===s&&(Un=null),ot(pn)}var pn=Xe(0);function xa(s){for(var h=s;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||el(g)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break;for(;h.sibling===null;){if(h.return===null||h.return===s)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function Go(s,h,g,S){h=s.memoizedState,g=g(S,h),g=g==null?h:z({},h,g),s.memoizedState=g,s.lanes===0&&(s.updateQueue.baseState=g)}var Zo={enqueueSetState:function(s,h,g){s=s._reactInternals;var S=Ta(),j=ds(S);j.payload=h,g!=null&&(j.callback=g),h=vo(s,j,S),h!==null&&(to(h,s,S),zl(h,s,S))},enqueueReplaceState:function(s,h,g){s=s._reactInternals;var S=Ta(),j=ds(S);j.tag=1,j.payload=h,g!=null&&(j.callback=g),h=vo(s,j,S),h!==null&&(to(h,s,S),zl(h,s,S))},enqueueForceUpdate:function(s,h){s=s._reactInternals;var g=Ta(),S=ds(g);S.tag=2,h!=null&&(S.callback=h),h=vo(s,S,g),h!==null&&(to(h,s,g),zl(h,s,g))}};function Ih(s,h,g,S,j,R,Y){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(S,R,Y):h.prototype&&h.prototype.isPureReactComponent?!wl(g,S)||!wl(j,R):!0}function Dh(s,h,g,S){s=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,S),h.state!==s&&Zo.enqueueReplaceState(h,h.state,null)}function ba(s,h){var g=h;if("ref"in h){g={};for(var S in h)S!=="ref"&&(g[S]=h[S])}if(s=s.defaultProps){g===h&&(g=z({},g));for(var j in s)g[j]===void 0&&(g[j]=s[j])}return g}var kc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function zh(s){kc(s)}function Ic(s){console.error(s)}function Dm(s){kc(s)}function Hs(s,h){try{var g=s.onUncaughtError;g(h.value,{componentStack:h.stack})}catch(S){setTimeout(function(){throw S})}}function Dc(s,h,g){try{var S=s.onCaughtError;S(g.value,{componentStack:g.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(j){setTimeout(function(){throw j})}}function Jf(s,h,g){return g=ds(g),g.tag=3,g.payload={element:null},g.callback=function(){Hs(s,h)},g}function qy(s){return s=ds(s),s.tag=3,s}function ep(s,h,g,S){var j=g.type.getDerivedStateFromError;if(typeof j=="function"){var R=S.value;s.payload=function(){return j(R)},s.callback=function(){Dc(h,g,S)}}var Y=g.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(s.callback=function(){Dc(h,g,S),typeof j!="function"&&(Bc===null?Bc=new Set([this]):Bc.add(this));var ce=S.stack;this.componentDidCatch(S.value,{componentStack:ce!==null?ce:""})})}function Uy(s,h,g,S,j){if(g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(h=g.alternate,h!==null&&Dl(h,g,j,!0),g=on.current,g!==null){switch(g.tag){case 13:return Un===null?pp():g.alternate===null&&Zn===0&&(Zn=3),g.flags&=-257,g.flags|=65536,g.lanes=j,S===yo?g.flags|=16384:(h=g.updateQueue,h===null?g.updateQueue=new Set([S]):h.add(S),Qs(s,S,j)),!1;case 22:return g.flags|=65536,S===yo?g.flags|=16384:(h=g.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([S])},g.updateQueue=h):(g=h.retryQueue,g===null?h.retryQueue=new Set([S]):g.add(S)),Qs(s,S,j)),!1}throw Error(a(435,g.tag))}return Qs(s,S,j),pp(),!1}if(zr)return h=on.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=j,S!==xc&&(s=Error(a(422),{cause:S}),Fi(ma(s,g)))):(S!==xc&&(h=Error(a(423),{cause:S}),Fi(ma(h,g))),s=s.current.alternate,s.flags|=65536,j&=-j,s.lanes|=j,S=ma(S,g),j=Jf(s.stateNode,S,j),Ah(s,j),Zn!==4&&(Zn=2)),!1;var R=Error(a(520),{cause:S});if(R=ma(R,g),Uh===null?Uh=[R]:Uh.push(R),Zn!==4&&(Zn=2),h===null)return!0;S=ma(S,g),g=h;do{switch(g.tag){case 3:return g.flags|=65536,s=j&-j,g.lanes|=s,s=Jf(g.stateNode,S,s),Ah(g,s),!1;case 1:if(h=g.type,R=g.stateNode,(g.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Bc===null||!Bc.has(R))))return g.flags|=65536,j&=-j,g.lanes|=j,j=qy(j),ep(j,s,g,S),Ah(g,j),!1}g=g.return}while(g!==null);return!1}var qd=Error(a(461)),Ei=!1;function ra(s,h,g,S){h.child=s===null?zn(h,null,g,S):Si(h,s.child,g,S)}function tp(s,h,g,S,j){g=g.render;var R=h.ref;if("ref"in S){var Y={};for(var ce in S)ce!=="ref"&&(Y[ce]=S[ce])}else Y=S;return ls(h),S=Pi(s,h,g,Y,R,j),ce=Bd(),s!==null&&!Ei?(Fd(s,h,j),Xs(s,h,j)):(zr&&ce&&Id(h),h.flags|=1,ra(s,h,S,j),h.child)}function Vy(s,h,g,S,j){if(s===null){var R=g.type;return typeof R=="function"&&!Od(R)&&R.defaultProps===void 0&&g.compare===null?(h.tag=15,h.type=R,rp(s,h,R,S,j)):(s=wh(g.type,null,S,h,h.mode,j),s.ref=h.ref,s.return=h,h.child=s)}if(R=s.child,!ap(s,j)){var Y=R.memoizedProps;if(g=g.compare,g=g!==null?g:wl,g(Y,S)&&s.ref===h.ref)return Xs(s,h,j)}return h.flags|=1,s=mo(R,S),s.ref=h.ref,s.return=h,h.child=s}function rp(s,h,g,S,j){if(s!==null){var R=s.memoizedProps;if(wl(R,S)&&s.ref===h.ref)if(Ei=!1,h.pendingProps=S=R,ap(s,j))(s.flags&131072)!==0&&(Ei=!0);else return h.lanes=s.lanes,Xs(s,h,j)}return Rm(s,h,g,S,j)}function zm(s,h,g){var S=h.pendingProps,j=S.children,R=s!==null?s.memoizedState:null;if(S.mode==="hidden"){if((h.flags&128)!==0){if(S=R!==null?R.baseLanes|g:g,s!==null){for(j=h.child=s.child,R=0;j!==null;)R=R|j.lanes|j.childLanes,j=j.sibling;h.childLanes=R&~S}else h.childLanes=0,h.child=null;return Nm(s,h,S,g)}if((g&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ac(h,R!==null?R.cachePool:null),R!==null?fs(h,R):nn(),kh(h);else return h.lanes=h.childLanes=536870912,Nm(s,h,R!==null?R.baseLanes|g:g,g)}else R!==null?(Ac(h,R.cachePool),fs(h,R),Ja(),h.memoizedState=null):(s!==null&&Ac(h,null),nn(),Ja());return ra(s,h,j,g),h.child}function Nm(s,h,g,S){var j=Dd();return j=j===null?null:{parent:ii._currentValue,pool:j},h.memoizedState={baseLanes:g,cachePool:j},s!==null&&Ac(h,null),nn(),kh(h),s!==null&&Dl(s,h,S,!0),null}function Bl(s,h){var g=h.ref;if(g===null)s!==null&&s.ref!==null&&(h.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(a(284));(s===null||s.ref!==g)&&(h.flags|=4194816)}}function Rm(s,h,g,S,j){return ls(h),g=Pi(s,h,g,S,void 0,j),S=Bd(),s!==null&&!Ei?(Fd(s,h,j),Xs(s,h,j)):(zr&&S&&Id(h),h.flags|=1,ra(s,h,g,j),h.child)}function bu(s,h,g,S,j,R){return ls(h),h.updateQueue=null,g=Xa(h,S,g,j),Ld(s),S=Bd(),s!==null&&!Ei?(Fd(s,h,R),Xs(s,h,R)):(zr&&S&&Id(h),h.flags|=1,ra(s,h,g,R),h.child)}function Ud(s,h,g,S,j){if(ls(h),h.stateNode===null){var R=Ro,Y=g.contextType;typeof Y=="object"&&Y!==null&&(R=bi(Y)),R=new g(S,R),h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=Zo,h.stateNode=R,R._reactInternals=h,R=h.stateNode,R.props=S,R.state=h.memoizedState,R.refs={},wr(h),Y=g.contextType,R.context=typeof Y=="object"&&Y!==null?bi(Y):Ro,R.state=h.memoizedState,Y=g.getDerivedStateFromProps,typeof Y=="function"&&(Go(h,g,Y,S),R.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(Y=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),Y!==R.state&&Zo.enqueueReplaceState(R,R.state,null),Ec(h,S,R,j),Bs(),R.state=h.memoizedState),typeof R.componentDidMount=="function"&&(h.flags|=4194308),S=!0}else if(s===null){R=h.stateNode;var ce=h.memoizedProps,Me=ba(g,ce);R.props=Me;var qe=R.context,pt=g.contextType;Y=Ro,typeof pt=="object"&&pt!==null&&(Y=bi(pt));var bt=g.getDerivedStateFromProps;pt=typeof bt=="function"||typeof R.getSnapshotBeforeUpdate=="function",ce=h.pendingProps!==ce,pt||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(ce||qe!==Y)&&Dh(h,R,S,Y),Ia=!1;var et=h.memoizedState;R.state=et,Ec(h,S,R,j),Bs(),qe=h.memoizedState,ce||et!==qe||Ia?(typeof bt=="function"&&(Go(h,g,bt,S),qe=h.memoizedState),(Me=Ia||Ih(h,g,Me,S,et,qe,Y))?(pt||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(h.flags|=4194308)):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=qe),R.props=S,R.state=qe,R.context=Y,S=Me):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{R=h.stateNode,Pc(s,h),Y=h.memoizedProps,pt=ba(g,Y),R.props=pt,bt=h.pendingProps,et=R.context,qe=g.contextType,Me=Ro,typeof qe=="object"&&qe!==null&&(Me=bi(qe)),ce=g.getDerivedStateFromProps,(qe=typeof ce=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(Y!==bt||et!==Me)&&Dh(h,R,S,Me),Ia=!1,et=h.memoizedState,R.state=et,Ec(h,S,R,j),Bs();var lt=h.memoizedState;Y!==bt||et!==lt||Ia||s!==null&&s.dependencies!==null&&mu(s.dependencies)?(typeof ce=="function"&&(Go(h,g,ce,S),lt=h.memoizedState),(pt=Ia||Ih(h,g,pt,S,et,lt,Me)||s!==null&&s.dependencies!==null&&mu(s.dependencies))?(qe||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(S,lt,Me),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(S,lt,Me)),typeof R.componentDidUpdate=="function"&&(h.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof R.componentDidUpdate!="function"||Y===s.memoizedProps&&et===s.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||Y===s.memoizedProps&&et===s.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=lt),R.props=S,R.state=lt,R.context=Me,S=pt):(typeof R.componentDidUpdate!="function"||Y===s.memoizedProps&&et===s.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||Y===s.memoizedProps&&et===s.memoizedState||(h.flags|=1024),S=!1)}return R=S,Bl(s,h),S=(h.flags&128)!==0,R||S?(R=h.stateNode,g=S&&typeof g.getDerivedStateFromError!="function"?null:R.render(),h.flags|=1,s!==null&&S?(h.child=Si(h,s.child,null,j),h.child=Si(h,null,g,j)):ra(s,h,g,j),h.memoizedState=R.state,s=h.child):s=Xs(s,h,j),s}function Vd(s,h,g,S){return vn(),h.flags|=256,ra(s,h,g,S),h.child}var Lm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bm(s){return{baseLanes:s,cachePool:Qf()}}function Fm(s,h,g){return s=s!==null?s.childLanes&~g:0,h&&(s|=Ko),s}function Gy(s,h,g){var S=h.pendingProps,j=!1,R=(h.flags&128)!==0,Y;if((Y=R)||(Y=s!==null&&s.memoizedState===null?!1:(pn.current&2)!==0),Y&&(j=!0,h.flags&=-129),Y=(h.flags&32)!==0,h.flags&=-33,s===null){if(zr){if(j?Tn(h):Ja(),zr){var ce=Dn,Me;if(Me=ce){e:{for(Me=ce,ce=ja;Me.nodeType!==8;){if(!ce){ce=null;break e}if(Me=Jo(Me.nextSibling),Me===null){ce=null;break e}}ce=Me}ce!==null?(h.memoizedState={dehydrated:ce,treeContext:Bo!==null?{id:Ua,overflow:Ea}:null,retryLane:536870912,hydrationErrors:null},Me=Bi(18,null,null,0),Me.stateNode=ce,Me.return=h,h.child=Me,ea=h,Dn=null,Me=!0):Me=!1}Me||Va(h)}if(ce=h.memoizedState,ce!==null&&(ce=ce.dehydrated,ce!==null))return el(ce)?h.lanes=32:h.lanes=536870912,null;ta(h)}return ce=S.children,S=S.fallback,j?(Ja(),j=h.mode,ce=Nh({mode:"hidden",children:ce},j),S=Lo(S,j,g,null),ce.return=h,S.return=h,ce.sibling=S,h.child=ce,j=h.child,j.memoizedState=Bm(g),j.childLanes=Fm(s,Y,g),h.memoizedState=Lm,S):(Tn(h),np(h,ce))}if(Me=s.memoizedState,Me!==null&&(ce=Me.dehydrated,ce!==null)){if(R)h.flags&256?(Tn(h),h.flags&=-257,h=ip(s,h,g)):h.memoizedState!==null?(Ja(),h.child=s.child,h.flags|=128,h=null):(Ja(),j=S.fallback,ce=h.mode,S=Nh({mode:"visible",children:S.children},ce),j=Lo(j,ce,g,null),j.flags|=2,S.return=h,j.return=h,S.sibling=j,h.child=S,Si(h,s.child,null,g),S=h.child,S.memoizedState=Bm(g),S.childLanes=Fm(s,Y,g),h.memoizedState=Lm,h=j);else if(Tn(h),el(ce)){if(Y=ce.nextSibling&&ce.nextSibling.dataset,Y)var qe=Y.dgst;Y=qe,S=Error(a(419)),S.stack="",S.digest=Y,Fi({value:S,source:null,stack:null}),h=ip(s,h,g)}else if(Ei||Dl(s,h,g,!1),Y=(g&s.childLanes)!==0,Ei||Y){if(Y=On,Y!==null&&(S=g&-g,S=(S&42)!==0?1:Ft(S),S=(S&(Y.suspendedLanes|g))!==0?0:S,S!==0&&S!==Me.retryLane))throw Me.retryLane=S,po(s,S),to(Y,s,S),qd;ce.data==="$?"||pp(),h=ip(s,h,g)}else ce.data==="$?"?(h.flags|=192,h.child=s.child,h=null):(s=Me.treeContext,Dn=Jo(ce.nextSibling),ea=h,zr=!0,Fo=null,ja=!1,s!==null&&(Ji[ga++]=Ua,Ji[ga++]=Ea,Ji[ga++]=Bo,Ua=s.id,Ea=s.overflow,Bo=h),h=np(h,S.children),h.flags|=4096);return h}return j?(Ja(),j=S.fallback,ce=h.mode,Me=s.child,qe=Me.sibling,S=mo(Me,{mode:"hidden",children:S.children}),S.subtreeFlags=Me.subtreeFlags&65011712,qe!==null?j=mo(qe,j):(j=Lo(j,ce,g,null),j.flags|=2),j.return=h,S.return=h,S.sibling=j,h.child=S,S=j,j=h.child,ce=s.child.memoizedState,ce===null?ce=Bm(g):(Me=ce.cachePool,Me!==null?(qe=ii._currentValue,Me=Me.parent!==qe?{parent:qe,pool:qe}:Me):Me=Qf(),ce={baseLanes:ce.baseLanes|g,cachePool:Me}),j.memoizedState=ce,j.childLanes=Fm(s,Y,g),h.memoizedState=Lm,S):(Tn(h),g=s.child,s=g.sibling,g=mo(g,{mode:"visible",children:S.children}),g.return=h,g.sibling=null,s!==null&&(Y=h.deletions,Y===null?(h.deletions=[s],h.flags|=16):Y.push(s)),h.child=g,h.memoizedState=null,g)}function np(s,h){return h=Nh({mode:"visible",children:h},s.mode),h.return=s,s.child=h}function Nh(s,h){return s=Bi(22,s,null,h),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function ip(s,h,g){return Si(h,s.child,null,g),s=np(h,h.pendingProps.children),s.flags|=2,h.memoizedState=null,s}function $m(s,h,g){s.lanes|=h;var S=s.alternate;S!==null&&(S.lanes|=h),Il(s.return,h,g)}function qm(s,h,g,S,j){var R=s.memoizedState;R===null?s.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:j}:(R.isBackwards=h,R.rendering=null,R.renderingStartTime=0,R.last=S,R.tail=g,R.tailMode=j)}function Zy(s,h,g){var S=h.pendingProps,j=S.revealOrder,R=S.tail;if(ra(s,h,S.children,g),S=pn.current,(S&2)!==0)S=S&1|2,h.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=h.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&$m(s,g,h);else if(s.tag===19)$m(s,g,h);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===h)break e;for(;s.sibling===null;){if(s.return===null||s.return===h)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}S&=1}switch(st(pn,S),j){case"forwards":for(g=h.child,j=null;g!==null;)s=g.alternate,s!==null&&xa(s)===null&&(j=g),g=g.sibling;g=j,g===null?(j=h.child,h.child=null):(j=g.sibling,g.sibling=null),qm(h,!1,j,g,R);break;case"backwards":for(g=null,j=h.child,h.child=null;j!==null;){if(s=j.alternate,s!==null&&xa(s)===null){h.child=j;break}s=j.sibling,j.sibling=g,g=j,j=s}qm(h,!0,g,null,R);break;case"together":qm(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Xs(s,h,g){if(s!==null&&(h.dependencies=s.dependencies),Yo|=h.lanes,(g&h.childLanes)===0)if(s!==null){if(Dl(s,h,g,!1),(g&h.childLanes)===0)return null}else return null;if(s!==null&&h.child!==s.child)throw Error(a(153));if(h.child!==null){for(s=h.child,g=mo(s,s.pendingProps),h.child=g,g.return=h;s.sibling!==null;)s=s.sibling,g=g.sibling=mo(s,s.pendingProps),g.return=h;g.sibling=null}return h.child}function ap(s,h){return(s.lanes&h)!==0?!0:(s=s.dependencies,!!(s!==null&&mu(s)))}function wx(s,h,g){switch(h.tag){case 3:ar(h,h.stateNode.containerInfo),ya(h,ii,s.memoizedState.cache),vn();break;case 27:case 5:er(h);break;case 4:ar(h,h.stateNode.containerInfo);break;case 10:ya(h,h.type,h.memoizedProps.value);break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(Tn(h),h.flags|=128,null):(g&h.child.childLanes)!==0?Gy(s,h,g):(Tn(h),s=Xs(s,h,g),s!==null?s.sibling:null);Tn(h);break;case 19:var j=(s.flags&128)!==0;if(S=(g&h.childLanes)!==0,S||(Dl(s,h,g,!1),S=(g&h.childLanes)!==0),j){if(S)return Zy(s,h,g);h.flags|=128}if(j=h.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),st(pn,pn.current),S)break;return null;case 22:case 23:return h.lanes=0,zm(s,h,g);case 24:ya(h,ii,s.memoizedState.cache)}return Xs(s,h,g)}function op(s,h,g){if(s!==null)if(s.memoizedProps!==h.pendingProps)Ei=!0;else{if(!ap(s,g)&&(h.flags&128)===0)return Ei=!1,wx(s,h,g);Ei=(s.flags&131072)!==0}else Ei=!1,zr&&(h.flags&1048576)!==0&&du(h,Ol,h.index);switch(h.lanes=0,h.tag){case 16:e:{s=h.pendingProps;var S=h.elementType,j=S._init;if(S=j(S._payload),h.type=S,typeof S=="function")Od(S)?(s=ba(S,s),h.tag=1,h=Ud(null,h,S,s,g)):(h.tag=0,h=Rm(null,h,S,s,g));else{if(S!=null){if(j=S.$$typeof,j===ue){h.tag=11,h=tp(null,h,S,s,g);break e}else if(j===he){h.tag=14,h=Vy(null,h,S,s,g);break e}}throw h=ut(S)||S,Error(a(306,h,""))}}return h;case 0:return Rm(s,h,h.type,h.pendingProps,g);case 1:return S=h.type,j=ba(S,h.pendingProps),Ud(s,h,S,j,g);case 3:e:{if(ar(h,h.stateNode.containerInfo),s===null)throw Error(a(387));S=h.pendingProps;var R=h.memoizedState;j=R.element,Pc(s,h),Ec(h,S,null,g);var Y=h.memoizedState;if(S=Y.cache,ya(h,ii,S),S!==R.cache&&Sc(h,[ii],g,!0),Bs(),S=Y.element,R.isDehydrated)if(R={element:S,isDehydrated:!1,cache:Y.cache},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){h=Vd(s,h,S,g);break e}else if(S!==j){j=ma(Error(a(424)),h),Fi(j),h=Vd(s,h,S,g);break e}else{switch(s=h.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Dn=Jo(s.firstChild),ea=h,zr=!0,Fo=null,ja=!0,g=zn(h,null,S,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(vn(),S===j){h=Xs(s,h,g);break e}ra(s,h,S,g)}h=h.child}return h;case 26:return Bl(s,h),s===null?(g=Dp(h.type,null,h.pendingProps,null))?h.memoizedState=g:zr||(g=h.type,s=h.pendingProps,S=Yh(Nt.current).createElement(g),S[Zr]=h,S[Ar]=s,Zi(S,g,s),dn(S),h.stateNode=S):h.memoizedState=Dp(h.type,s.memoizedProps,h.pendingProps,s.memoizedState),null;case 27:return er(h),s===null&&zr&&(S=h.stateNode=Sv(h.type,h.pendingProps,Nt.current),ea=h,ja=!0,j=Dn,Wl(h.type)?(Op=j,Dn=Jo(S.firstChild)):Dn=j),ra(s,h,h.pendingProps.children,g),Bl(s,h),s===null&&(h.flags|=4194304),h.child;case 5:return s===null&&zr&&((j=S=Dn)&&(S=Nx(S,h.type,h.pendingProps,ja),S!==null?(h.stateNode=S,ea=h,Dn=Jo(S.firstChild),ja=!1,j=!0):j=!1),j||Va(h)),er(h),j=h.type,R=h.pendingProps,Y=s!==null?s.memoizedProps:null,S=R.children,Cp(j,R)?S=null:Y!==null&&Cp(j,Y)&&(h.flags|=32),h.memoizedState!==null&&(j=Pi(s,h,Ll,null,null,g),b._currentValue=j),Bl(s,h),ra(s,h,S,g),h.child;case 6:return s===null&&zr&&((s=g=Dn)&&(g=bv(g,h.pendingProps,ja),g!==null?(h.stateNode=g,ea=h,Dn=null,s=!0):s=!1),s||Va(h)),null;case 13:return Gy(s,h,g);case 4:return ar(h,h.stateNode.containerInfo),S=h.pendingProps,s===null?h.child=Si(h,null,S,g):ra(s,h,S,g),h.child;case 11:return tp(s,h,h.type,h.pendingProps,g);case 7:return ra(s,h,h.pendingProps,g),h.child;case 8:return ra(s,h,h.pendingProps.children,g),h.child;case 12:return ra(s,h,h.pendingProps.children,g),h.child;case 10:return S=h.pendingProps,ya(h,h.type,S.value),ra(s,h,S.children,g),h.child;case 9:return j=h.type._context,S=h.pendingProps.children,ls(h),j=bi(j),S=S(j),h.flags|=1,ra(s,h,S,g),h.child;case 14:return Vy(s,h,h.type,h.pendingProps,g);case 15:return rp(s,h,h.type,h.pendingProps,g);case 19:return Zy(s,h,g);case 31:return S=h.pendingProps,g=h.mode,S={mode:S.mode,children:S.children},s===null?(g=Nh(S,g),g.ref=h.ref,h.child=g,g.return=h,h=g):(g=mo(s.child,S),g.ref=h.ref,h.child=g,g.return=h,h=g),h;case 22:return zm(s,h,g);case 24:return ls(h),S=bi(ii),s===null?(j=Dd(),j===null&&(j=On,R=Sh(),j.pooledCache=R,R.refCount++,R!==null&&(j.pooledCacheLanes|=g),j=R),h.memoizedState={parent:S,cache:j},wr(h),ya(h,ii,j)):((s.lanes&g)!==0&&(Pc(s,h),Ec(h,null,null,g),Bs()),j=s.memoizedState,R=h.memoizedState,j.parent!==S?(j={parent:S,cache:S},h.memoizedState=j,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=j),ya(h,ii,S)):(S=R.cache,ya(h,ii,S),S!==j.cache&&Sc(h,[ii],g,!0))),ra(s,h,h.pendingProps.children,g),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function Ws(s){s.flags|=4}function sp(s,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Rp(h)){if(h=on.current,h!==null&&((Or&4194048)===Or?Un!==null:(Or&62914560)!==Or&&(Or&536870912)===0||h!==Un))throw hs=yo,zd;s.flags|=8192}}function zc(s,h){h!==null&&(s.flags|=4),s.flags&16384&&(h=s.tag!==22?mt():536870912,s.lanes|=h,Tu|=h)}function Ci(s,h){if(!zr)switch(s.tailMode){case"hidden":h=s.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?s.tail=null:g.sibling=null;break;case"collapsed":g=s.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?h||s.tail===null?s.tail=null:s.tail.sibling=null:S.sibling=null}}function Vn(s){var h=s.alternate!==null&&s.alternate.child===s.child,g=0,S=0;if(h)for(var j=s.child;j!==null;)g|=j.lanes|j.childLanes,S|=j.subtreeFlags&65011712,S|=j.flags&65011712,j.return=s,j=j.sibling;else for(j=s.child;j!==null;)g|=j.lanes|j.childLanes,S|=j.subtreeFlags,S|=j.flags,j.return=s,j=j.sibling;return s.subtreeFlags|=S,s.childLanes=g,h}function Um(s,h,g){var S=h.pendingProps;switch(kl(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(h),null;case 1:return Vn(h),null;case 3:return g=h.stateNode,S=null,s!==null&&(S=s.memoizedState.cache),h.memoizedState.cache!==S&&(h.flags|=2048),va(ii),Ot(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(wc(h)?Ws(h):s===null||s.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Ds())),Vn(h),null;case 26:return g=h.memoizedState,s===null?(Ws(h),g!==null?(Vn(h),sp(h,g)):(Vn(h),h.flags&=-16777217)):g?g!==s.memoizedState?(Ws(h),Vn(h),sp(h,g)):(Vn(h),h.flags&=-16777217):(s.memoizedProps!==S&&Ws(h),Vn(h),h.flags&=-16777217),null;case 27:or(h),g=Nt.current;var j=h.type;if(s!==null&&h.stateNode!=null)s.memoizedProps!==S&&Ws(h);else{if(!S){if(h.stateNode===null)throw Error(a(166));return Vn(h),null}s=Pt.current,wc(h)?bc(h):(s=Sv(j,S,g),h.stateNode=s,Ws(h))}return Vn(h),null;case 5:if(or(h),g=h.type,s!==null&&h.stateNode!=null)s.memoizedProps!==S&&Ws(h);else{if(!S){if(h.stateNode===null)throw Error(a(166));return Vn(h),null}if(s=Pt.current,wc(h))bc(h);else{switch(j=Yh(Nt.current),s){case 1:s=j.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:s=j.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":s=j.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":s=j.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":s=j.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof S.is=="string"?j.createElement("select",{is:S.is}):j.createElement("select"),S.multiple?s.multiple=!0:S.size&&(s.size=S.size);break;default:s=typeof S.is=="string"?j.createElement(g,{is:S.is}):j.createElement(g)}}s[Zr]=h,s[Ar]=S;e:for(j=h.child;j!==null;){if(j.tag===5||j.tag===6)s.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===h)break e;for(;j.sibling===null;){if(j.return===null||j.return===h)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}h.stateNode=s;e:switch(Zi(s,g,S),g){case"button":case"input":case"select":case"textarea":s=!!S.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ws(h)}}return Vn(h),h.flags&=-16777217,null;case 6:if(s&&h.stateNode!=null)s.memoizedProps!==S&&Ws(h);else{if(typeof S!="string"&&h.stateNode===null)throw Error(a(166));if(s=Nt.current,wc(h)){if(s=h.stateNode,g=h.memoizedProps,S=null,j=ea,j!==null)switch(j.tag){case 27:case 5:S=j.memoizedProps}s[Zr]=h,s=!!(s.nodeValue===g||S!==null&&S.suppressHydrationWarning===!0||yv(s.nodeValue,g)),s||Va(h)}else s=Yh(s).createTextNode(S),s[Zr]=h,h.stateNode=s}return Vn(h),null;case 13:if(S=h.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(j=wc(h),S!==null&&S.dehydrated!==null){if(s===null){if(!j)throw Error(a(318));if(j=h.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(a(317));j[Zr]=h}else vn(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Vn(h),j=!1}else j=Ds(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=j),j=!0;if(!j)return h.flags&256?(ta(h),h):(ta(h),null)}if(ta(h),(h.flags&128)!==0)return h.lanes=g,h;if(g=S!==null,s=s!==null&&s.memoizedState!==null,g){S=h.child,j=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(j=S.alternate.memoizedState.cachePool.pool);var R=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(R=S.memoizedState.cachePool.pool),R!==j&&(S.flags|=2048)}return g!==s&&g&&(h.child.flags|=8192),zc(h,h.updateQueue),Vn(h),null;case 4:return Ot(),s===null&&Ap(h.stateNode.containerInfo),Vn(h),null;case 10:return va(h.type),Vn(h),null;case 19:if(ot(pn),j=h.memoizedState,j===null)return Vn(h),null;if(S=(h.flags&128)!==0,R=j.rendering,R===null)if(S)Ci(j,!1);else{if(Zn!==0||s!==null&&(s.flags&128)!==0)for(s=h.child;s!==null;){if(R=xa(s),R!==null){for(h.flags|=128,Ci(j,!1),s=R.updateQueue,h.updateQueue=s,zc(h,s),h.subtreeFlags=0,s=g,g=h.child;g!==null;)_c(g,s),g=g.sibling;return st(pn,pn.current&1|2),h.child}s=s.sibling}j.tail!==null&&Kr()>Yd&&(h.flags|=128,S=!0,Ci(j,!1),h.lanes=4194304)}else{if(!S)if(s=xa(R),s!==null){if(h.flags|=128,S=!0,s=s.updateQueue,h.updateQueue=s,zc(h,s),Ci(j,!0),j.tail===null&&j.tailMode==="hidden"&&!R.alternate&&!zr)return Vn(h),null}else 2*Kr()-j.renderingStartTime>Yd&&g!==536870912&&(h.flags|=128,S=!0,Ci(j,!1),h.lanes=4194304);j.isBackwards?(R.sibling=h.child,h.child=R):(s=j.last,s!==null?s.sibling=R:h.child=R,j.last=R)}return j.tail!==null?(h=j.tail,j.rendering=h,j.tail=h.sibling,j.renderingStartTime=Kr(),h.sibling=null,s=pn.current,st(pn,S?s&1|2:s&1),h):(Vn(h),null);case 22:case 23:return ta(h),Ph(),S=h.memoizedState!==null,s!==null?s.memoizedState!==null!==S&&(h.flags|=8192):S&&(h.flags|=8192),S?(g&536870912)!==0&&(h.flags&128)===0&&(Vn(h),h.subtreeFlags&6&&(h.flags|=8192)):Vn(h),g=h.updateQueue,g!==null&&zc(h,g.retryQueue),g=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==g&&(h.flags|=2048),s!==null&&ot(_a),null;case 24:return g=null,s!==null&&(g=s.memoizedState.cache),h.memoizedState.cache!==g&&(h.flags|=2048),va(ii),Vn(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function Sx(s,h){switch(kl(h),h.tag){case 1:return s=h.flags,s&65536?(h.flags=s&-65537|128,h):null;case 3:return va(ii),Ot(),s=h.flags,(s&65536)!==0&&(s&128)===0?(h.flags=s&-65537|128,h):null;case 26:case 27:case 5:return or(h),null;case 13:if(ta(h),s=h.memoizedState,s!==null&&s.dehydrated!==null){if(h.alternate===null)throw Error(a(340));vn()}return s=h.flags,s&65536?(h.flags=s&-65537|128,h):null;case 19:return ot(pn),null;case 4:return Ot(),null;case 10:return va(h.type),null;case 22:case 23:return ta(h),Ph(),s!==null&&ot(_a),s=h.flags,s&65536?(h.flags=s&-65537|128,h):null;case 24:return va(ii),null;case 25:return null;default:return null}}function Vm(s,h){switch(kl(h),h.tag){case 3:va(ii),Ot();break;case 26:case 27:case 5:or(h);break;case 4:Ot();break;case 13:ta(h);break;case 19:ot(pn);break;case 10:va(h.type);break;case 22:case 23:ta(h),Ph(),s!==null&&ot(_a);break;case 24:va(ii)}}function Gd(s,h){try{var g=h.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var j=S.next;g=j;do{if((g.tag&s)===s){S=void 0;var R=g.create,Y=g.inst;S=R(),Y.destroy=S}g=g.next}while(g!==j)}}catch(ce){_n(h,h.return,ce)}}function Nc(s,h,g){try{var S=h.updateQueue,j=S!==null?S.lastEffect:null;if(j!==null){var R=j.next;S=R;do{if((S.tag&s)===s){var Y=S.inst,ce=Y.destroy;if(ce!==void 0){Y.destroy=void 0,j=h;var Me=g,qe=ce;try{qe()}catch(pt){_n(j,Me,pt)}}}S=S.next}while(S!==R)}}catch(pt){_n(h,h.return,pt)}}function Gm(s){var h=s.updateQueue;if(h!==null){var g=s.stateNode;try{Rd(h,g)}catch(S){_n(s,s.return,S)}}}function Hy(s,h,g){g.props=ba(s.type,s.memoizedProps),g.state=s.memoizedState;try{g.componentWillUnmount()}catch(S){_n(s,h,S)}}function wu(s,h){try{var g=s.ref;if(g!==null){switch(s.tag){case 26:case 27:case 5:var S=s.stateNode;break;case 30:S=s.stateNode;break;default:S=s.stateNode}typeof g=="function"?s.refCleanup=g(S):g.current=S}}catch(j){_n(s,h,j)}}function ys(s,h){var g=s.ref,S=s.refCleanup;if(g!==null)if(typeof S=="function")try{S()}catch(j){_n(s,h,j)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(j){_n(s,h,j)}else g.current=null}function Zm(s){var h=s.type,g=s.memoizedProps,S=s.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":g.autoFocus&&S.focus();break e;case"img":g.src?S.src=g.src:g.srcSet&&(S.srcset=g.srcSet)}}catch(j){_n(s,s.return,j)}}function Hm(s,h,g){try{var S=s.stateNode;vv(S,s.type,g,h),S[Ar]=h}catch(j){_n(s,s.return,j)}}function Xy(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Wl(s.type)||s.tag===4}function Xm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Xy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Wl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Rh(s,h,g){var S=s.tag;if(S===5||S===6)s=s.stateNode,h?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(s,h):(h=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,h.appendChild(s),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=Wh));else if(S!==4&&(S===27&&Wl(s.type)&&(g=s.stateNode,h=null),s=s.child,s!==null))for(Rh(s,h,g),s=s.sibling;s!==null;)Rh(s,h,g),s=s.sibling}function Lh(s,h,g){var S=s.tag;if(S===5||S===6)s=s.stateNode,h?g.insertBefore(s,h):g.appendChild(s);else if(S!==4&&(S===27&&Wl(s.type)&&(g=s.stateNode),s=s.child,s!==null))for(Lh(s,h,g),s=s.sibling;s!==null;)Lh(s,h,g),s=s.sibling}function Wm(s){var h=s.stateNode,g=s.memoizedProps;try{for(var S=s.type,j=h.attributes;j.length;)h.removeAttributeNode(j[0]);Zi(h,S,g),h[Zr]=s,h[Ar]=g}catch(R){_n(s,s.return,R)}}var za=!1,Nn=!1,Ym=!1,Wy=typeof WeakSet=="function"?WeakSet:Set,Vi=null;function Tx(s,h){if(s=s.containerInfo,Pp=K,s=_h(s),au(s)){if("selectionStart"in s)var g={start:s.selectionStart,end:s.selectionEnd};else e:{g=(g=s.ownerDocument)&&g.defaultView||window;var S=g.getSelection&&g.getSelection();if(S&&S.rangeCount!==0){g=S.anchorNode;var j=S.anchorOffset,R=S.focusNode;S=S.focusOffset;try{g.nodeType,R.nodeType}catch{g=null;break e}var Y=0,ce=-1,Me=-1,qe=0,pt=0,bt=s,et=null;t:for(;;){for(var lt;bt!==g||j!==0&&bt.nodeType!==3||(ce=Y+j),bt!==R||S!==0&&bt.nodeType!==3||(Me=Y+S),bt.nodeType===3&&(Y+=bt.nodeValue.length),(lt=bt.firstChild)!==null;)et=bt,bt=lt;for(;;){if(bt===s)break t;if(et===g&&++qe===j&&(ce=Y),et===R&&++pt===S&&(Me=Y),(lt=bt.nextSibling)!==null)break;bt=et,et=bt.parentNode}bt=lt}g=ce===-1||Me===-1?null:{start:ce,end:Me}}else g=null}g=g||{start:0,end:0}}else g=null;for(Ep={focusedElem:s,selectionRange:g},K=!1,Vi=h;Vi!==null;)if(h=Vi,s=h.child,(h.subtreeFlags&1024)!==0&&s!==null)s.return=h,Vi=s;else for(;Vi!==null;){switch(h=Vi,R=h.alternate,s=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&R!==null){s=void 0,g=h,j=R.memoizedProps,R=R.memoizedState,S=g.stateNode;try{var cr=ba(g.type,j,g.elementType===g.type);s=S.getSnapshotBeforeUpdate(cr,R),S.__reactInternalSnapshotBeforeUpdate=s}catch(rr){_n(g,g.return,rr)}}break;case 3:if((s&1024)!==0){if(s=h.stateNode.containerInfo,g=s.nodeType,g===9)jp(s);else if(g===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":jp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(a(163))}if(s=h.sibling,s!==null){s.return=h.return,Vi=s;break}Vi=h.return}}function Yy(s,h,g){var S=g.flags;switch(g.tag){case 0:case 11:case 15:$l(s,g),S&4&&Gd(5,g);break;case 1:if($l(s,g),S&4)if(s=g.stateNode,h===null)try{s.componentDidMount()}catch(Y){_n(g,g.return,Y)}else{var j=ba(g.type,h.memoizedProps);h=h.memoizedState;try{s.componentDidUpdate(j,h,s.__reactInternalSnapshotBeforeUpdate)}catch(Y){_n(g,g.return,Y)}}S&64&&Gm(g),S&512&&wu(g,g.return);break;case 3:if($l(s,g),S&64&&(s=g.updateQueue,s!==null)){if(h=null,g.child!==null)switch(g.child.tag){case 27:case 5:h=g.child.stateNode;break;case 1:h=g.child.stateNode}try{Rd(s,h)}catch(Y){_n(g,g.return,Y)}}break;case 27:h===null&&S&4&&Wm(g);case 26:case 5:$l(s,g),h===null&&S&4&&Zm(g),S&512&&wu(g,g.return);break;case 12:$l(s,g);break;case 13:$l(s,g),S&4&&Bh(s,g),S&64&&(s=g.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(g=vp.bind(null,g),wv(s,g))));break;case 22:if(S=g.memoizedState!==null||za,!S){h=h!==null&&h.memoizedState!==null||Nn,j=za;var R=Nn;za=S,(Nn=h)&&!R?Xo(s,g,(g.subtreeFlags&8772)!==0):$l(s,g),za=j,Nn=R}break;case 30:break;default:$l(s,g)}}function Ky(s){var h=s.alternate;h!==null&&(s.alternate=null,Ky(h)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(h=s.stateNode,h!==null&&Yn(h)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Gn=null,wa=!1;function Fl(s,h,g){for(g=g.child;g!==null;)Km(s,h,g),g=g.sibling}function Km(s,h,g){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(zi,g)}catch{}switch(g.tag){case 26:Nn||ys(g,h),Fl(s,h,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Nn||ys(g,h);var S=Gn,j=wa;Wl(g.type)&&(Gn=g.stateNode,wa=!1),Fl(s,h,g),nf(g.stateNode),Gn=S,wa=j;break;case 5:Nn||ys(g,h);case 6:if(S=Gn,j=wa,Gn=null,Fl(s,h,g),Gn=S,wa=j,Gn!==null)if(wa)try{(Gn.nodeType===9?Gn.body:Gn.nodeName==="HTML"?Gn.ownerDocument.body:Gn).removeChild(g.stateNode)}catch(R){_n(g,h,R)}else try{Gn.removeChild(g.stateNode)}catch(R){_n(g,h,R)}break;case 18:Gn!==null&&(wa?(s=Gn,mg(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,g.stateNode),ia(s)):mg(Gn,g.stateNode));break;case 4:S=Gn,j=wa,Gn=g.stateNode.containerInfo,wa=!0,Fl(s,h,g),Gn=S,wa=j;break;case 0:case 11:case 14:case 15:Nn||Nc(2,g,h),Nn||Nc(4,g,h),Fl(s,h,g);break;case 1:Nn||(ys(g,h),S=g.stateNode,typeof S.componentWillUnmount=="function"&&Hy(g,h,S)),Fl(s,h,g);break;case 21:Fl(s,h,g);break;case 22:Nn=(S=Nn)||g.memoizedState!==null,Fl(s,h,g),Nn=S;break;default:Fl(s,h,g)}}function Bh(s,h){if(h.memoizedState===null&&(s=h.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ia(s)}catch(g){_n(h,h.return,g)}}function Ax(s){switch(s.tag){case 13:case 19:var h=s.stateNode;return h===null&&(h=s.stateNode=new Wy),h;case 22:return s=s.stateNode,h=s._retryCache,h===null&&(h=s._retryCache=new Wy),h;default:throw Error(a(435,s.tag))}}function Rn(s,h){var g=Ax(s);h.forEach(function(S){var j=_p.bind(null,s,S);g.has(S)||(g.add(S),S.then(j,j))})}function Gi(s,h){var g=h.deletions;if(g!==null)for(var S=0;S<g.length;S++){var j=g[S],R=s,Y=h,ce=Y;e:for(;ce!==null;){switch(ce.tag){case 27:if(Wl(ce.type)){Gn=ce.stateNode,wa=!1;break e}break;case 5:Gn=ce.stateNode,wa=!1;break e;case 3:case 4:Gn=ce.stateNode.containerInfo,wa=!0;break e}ce=ce.return}if(Gn===null)throw Error(a(160));Km(R,Y,j),Gn=null,wa=!1,R=j.alternate,R!==null&&(R.return=null),j.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)Zd(h,s),h=h.sibling}var Ho=null;function Zd(s,h){var g=s.alternate,S=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Gi(h,s),Sa(s),S&4&&(Nc(3,s,s.return),Gd(3,s),Nc(5,s,s.return));break;case 1:Gi(h,s),Sa(s),S&512&&(Nn||g===null||ys(g,g.return)),S&64&&za&&(s=s.updateQueue,s!==null&&(S=s.callbacks,S!==null&&(g=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=g===null?S:g.concat(S))));break;case 26:var j=Ho;if(Gi(h,s),Sa(s),S&512&&(Nn||g===null||ys(g,g.return)),S&4){var R=g!==null?g.memoizedState:null;if(S=s.memoizedState,g===null)if(S===null)if(s.stateNode===null){e:{S=s.type,g=s.memoizedProps,j=j.ownerDocument||j;t:switch(S){case"title":R=j.getElementsByTagName("title")[0],(!R||R[Mi]||R[Zr]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=j.createElement(S),j.head.insertBefore(R,j.querySelector("head > title"))),Zi(R,S,g),R[Zr]=s,dn(R),S=R;break e;case"link":var Y=Np("link","href",j).get(S+(g.href||""));if(Y){for(var ce=0;ce<Y.length;ce++)if(R=Y[ce],R.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&R.getAttribute("rel")===(g.rel==null?null:g.rel)&&R.getAttribute("title")===(g.title==null?null:g.title)&&R.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){Y.splice(ce,1);break t}}R=j.createElement(S),Zi(R,S,g),j.head.appendChild(R);break;case"meta":if(Y=Np("meta","content",j).get(S+(g.content||""))){for(ce=0;ce<Y.length;ce++)if(R=Y[ce],R.getAttribute("content")===(g.content==null?null:""+g.content)&&R.getAttribute("name")===(g.name==null?null:g.name)&&R.getAttribute("property")===(g.property==null?null:g.property)&&R.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&R.getAttribute("charset")===(g.charSet==null?null:g.charSet)){Y.splice(ce,1);break t}}R=j.createElement(S),Zi(R,S,g),j.head.appendChild(R);break;default:throw Error(a(468,S))}R[Zr]=s,dn(R),S=R}s.stateNode=S}else lf(j,s.type,s.stateNode);else s.stateNode=zp(j,S,s.memoizedProps);else R!==S?(R===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):R.count--,S===null?lf(j,s.type,s.stateNode):zp(j,S,s.memoizedProps)):S===null&&s.stateNode!==null&&Hm(s,s.memoizedProps,g.memoizedProps)}break;case 27:Gi(h,s),Sa(s),S&512&&(Nn||g===null||ys(g,g.return)),g!==null&&S&4&&Hm(s,s.memoizedProps,g.memoizedProps);break;case 5:if(Gi(h,s),Sa(s),S&512&&(Nn||g===null||ys(g,g.return)),s.flags&32){j=s.stateNode;try{jo(j,"")}catch(lt){_n(s,s.return,lt)}}S&4&&s.stateNode!=null&&(j=s.memoizedProps,Hm(s,j,g!==null?g.memoizedProps:j)),S&1024&&(Ym=!0);break;case 6:if(Gi(h,s),Sa(s),S&4){if(s.stateNode===null)throw Error(a(162));S=s.memoizedProps,g=s.stateNode;try{g.nodeValue=S}catch(lt){_n(s,s.return,lt)}}break;case 3:if(sf=null,j=Ho,Ho=Iu(h.containerInfo),Gi(h,s),Ho=j,Sa(s),S&4&&g!==null&&g.memoizedState.isDehydrated)try{ia(h.containerInfo)}catch(lt){_n(s,s.return,lt)}Ym&&(Ym=!1,Fh(s));break;case 4:S=Ho,Ho=Iu(s.stateNode.containerInfo),Gi(h,s),Sa(s),Ho=S;break;case 12:Gi(h,s),Sa(s);break;case 13:Gi(h,s),Sa(s),s.child.flags&8192&&s.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(Au=Kr()),S&4&&(S=s.updateQueue,S!==null&&(s.updateQueue=null,Rn(s,S)));break;case 22:j=s.memoizedState!==null;var Me=g!==null&&g.memoizedState!==null,qe=za,pt=Nn;if(za=qe||j,Nn=pt||Me,Gi(h,s),Nn=pt,za=qe,Sa(s),S&8192)e:for(h=s.stateNode,h._visibility=j?h._visibility&-2:h._visibility|1,j&&(g===null||Me||za||Nn||Rc(s)),g=null,h=s;;){if(h.tag===5||h.tag===26){if(g===null){Me=g=h;try{if(R=Me.stateNode,j)Y=R.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{ce=Me.stateNode;var bt=Me.memoizedProps.style,et=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;ce.style.display=et==null||typeof et=="boolean"?"":(""+et).trim()}}catch(lt){_n(Me,Me.return,lt)}}}else if(h.tag===6){if(g===null){Me=h;try{Me.stateNode.nodeValue=j?"":Me.memoizedProps}catch(lt){_n(Me,Me.return,lt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===s)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;g===h&&(g=null),h=h.return}g===h&&(g=null),h.sibling.return=h.return,h=h.sibling}S&4&&(S=s.updateQueue,S!==null&&(g=S.retryQueue,g!==null&&(S.retryQueue=null,Rn(s,g))));break;case 19:Gi(h,s),Sa(s),S&4&&(S=s.updateQueue,S!==null&&(s.updateQueue=null,Rn(s,S)));break;case 30:break;case 21:break;default:Gi(h,s),Sa(s)}}function Sa(s){var h=s.flags;if(h&2){try{for(var g,S=s.return;S!==null;){if(Xy(S)){g=S;break}S=S.return}if(g==null)throw Error(a(160));switch(g.tag){case 27:var j=g.stateNode,R=Xm(s);Lh(s,R,j);break;case 5:var Y=g.stateNode;g.flags&32&&(jo(Y,""),g.flags&=-33);var ce=Xm(s);Lh(s,ce,Y);break;case 3:case 4:var Me=g.stateNode.containerInfo,qe=Xm(s);Rh(s,qe,Me);break;default:throw Error(a(161))}}catch(pt){_n(s,s.return,pt)}s.flags&=-3}h&4096&&(s.flags&=-4097)}function Fh(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var h=s;Fh(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),s=s.sibling}}function $l(s,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Yy(s,h.alternate,h),h=h.sibling}function Rc(s){for(s=s.child;s!==null;){var h=s;switch(h.tag){case 0:case 11:case 14:case 15:Nc(4,h,h.return),Rc(h);break;case 1:ys(h,h.return);var g=h.stateNode;typeof g.componentWillUnmount=="function"&&Hy(h,h.return,g),Rc(h);break;case 27:nf(h.stateNode);case 26:case 5:ys(h,h.return),Rc(h);break;case 22:h.memoizedState===null&&Rc(h);break;case 30:Rc(h);break;default:Rc(h)}s=s.sibling}}function Xo(s,h,g){for(g=g&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var S=h.alternate,j=s,R=h,Y=R.flags;switch(R.tag){case 0:case 11:case 15:Xo(j,R,g),Gd(4,R);break;case 1:if(Xo(j,R,g),S=R,j=S.stateNode,typeof j.componentDidMount=="function")try{j.componentDidMount()}catch(qe){_n(S,S.return,qe)}if(S=R,j=S.updateQueue,j!==null){var ce=S.stateNode;try{var Me=j.shared.hiddenCallbacks;if(Me!==null)for(j.shared.hiddenCallbacks=null,j=0;j<Me.length;j++)Nd(Me[j],ce)}catch(qe){_n(S,S.return,qe)}}g&&Y&64&&Gm(R),wu(R,R.return);break;case 27:Wm(R);case 26:case 5:Xo(j,R,g),g&&S===null&&Y&4&&Zm(R),wu(R,R.return);break;case 12:Xo(j,R,g);break;case 13:Xo(j,R,g),g&&Y&4&&Bh(j,R);break;case 22:R.memoizedState===null&&Xo(j,R,g),wu(R,R.return);break;case 30:break;default:Xo(j,R,g)}h=h.sibling}}function Hd(s,h){var g=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),s=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(s=h.memoizedState.cachePool.pool),s!==g&&(s!=null&&s.refCount++,g!=null&&qo(g))}function Lc(s,h){s=null,h.alternate!==null&&(s=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==s&&(h.refCount++,s!=null&&qo(s))}function bo(s,h,g,S){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Su(s,h,g,S),h=h.sibling}function Su(s,h,g,S){var j=h.flags;switch(h.tag){case 0:case 11:case 15:bo(s,h,g,S),j&2048&&Gd(9,h);break;case 1:bo(s,h,g,S);break;case 3:bo(s,h,g,S),j&2048&&(s=null,h.alternate!==null&&(s=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==s&&(h.refCount++,s!=null&&qo(s)));break;case 12:if(j&2048){bo(s,h,g,S),s=h.stateNode;try{var R=h.memoizedProps,Y=R.id,ce=R.onPostCommit;typeof ce=="function"&&ce(Y,h.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Me){_n(h,h.return,Me)}}else bo(s,h,g,S);break;case 13:bo(s,h,g,S);break;case 23:break;case 22:R=h.stateNode,Y=h.alternate,h.memoizedState!==null?R._visibility&2?bo(s,h,g,S):Xd(s,h):R._visibility&2?bo(s,h,g,S):(R._visibility|=2,Ys(s,h,g,S,(h.subtreeFlags&10256)!==0)),j&2048&&Hd(Y,h);break;case 24:bo(s,h,g,S),j&2048&&Lc(h.alternate,h);break;default:bo(s,h,g,S)}}function Ys(s,h,g,S,j){for(j=j&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var R=s,Y=h,ce=g,Me=S,qe=Y.flags;switch(Y.tag){case 0:case 11:case 15:Ys(R,Y,ce,Me,j),Gd(8,Y);break;case 23:break;case 22:var pt=Y.stateNode;Y.memoizedState!==null?pt._visibility&2?Ys(R,Y,ce,Me,j):Xd(R,Y):(pt._visibility|=2,Ys(R,Y,ce,Me,j)),j&&qe&2048&&Hd(Y.alternate,Y);break;case 24:Ys(R,Y,ce,Me,j),j&&qe&2048&&Lc(Y.alternate,Y);break;default:Ys(R,Y,ce,Me,j)}h=h.sibling}}function Xd(s,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var g=s,S=h,j=S.flags;switch(S.tag){case 22:Xd(g,S),j&2048&&Hd(S.alternate,S);break;case 24:Xd(g,S),j&2048&&Lc(S.alternate,S);break;default:Xd(g,S)}h=h.sibling}}var $h=8192;function Wo(s){if(s.subtreeFlags&$h)for(s=s.child;s!==null;)Qy(s),s=s.sibling}function Qy(s){switch(s.tag){case 26:Wo(s),s.flags&$h&&s.memoizedState!==null&&Fx(Ho,s.memoizedState,s.memoizedProps);break;case 5:Wo(s);break;case 3:case 4:var h=Ho;Ho=Iu(s.stateNode.containerInfo),Wo(s),Ho=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=$h,$h=16777216,Wo(s),$h=h):Wo(s));break;default:Wo(s)}}function Qm(s){var h=s.alternate;if(h!==null&&(s=h.child,s!==null)){h.child=null;do h=s.sibling,s.sibling=null,s=h;while(s!==null)}}function ql(s){var h=s.deletions;if((s.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];Vi=S,Jm(S,s)}Qm(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)lp(s),s=s.sibling}function lp(s){switch(s.tag){case 0:case 11:case 15:ql(s),s.flags&2048&&Nc(9,s,s.return);break;case 3:ql(s);break;case 12:ql(s);break;case 22:var h=s.stateNode;s.memoizedState!==null&&h._visibility&2&&(s.return===null||s.return.tag!==13)?(h._visibility&=-3,Wd(s)):ql(s);break;default:ql(s)}}function Wd(s){var h=s.deletions;if((s.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];Vi=S,Jm(S,s)}Qm(s)}for(s=s.child;s!==null;){switch(h=s,h.tag){case 0:case 11:case 15:Nc(8,h,h.return),Wd(h);break;case 22:g=h.stateNode,g._visibility&2&&(g._visibility&=-3,Wd(h));break;default:Wd(h)}s=s.sibling}}function Jm(s,h){for(;Vi!==null;){var g=Vi;switch(g.tag){case 0:case 11:case 15:Nc(8,g,h);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var S=g.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:qo(g.memoizedState.cache)}if(S=g.child,S!==null)S.return=g,Vi=S;else e:for(g=s;Vi!==null;){S=Vi;var j=S.sibling,R=S.return;if(Ky(S),S===g){Vi=null;break e}if(j!==null){j.return=R,Vi=j;break e}Vi=R}}}var Mx={getCacheForType:function(s){var h=bi(ii),g=h.data.get(s);return g===void 0&&(g=s(),h.data.set(s,g)),g}},Px=typeof WeakMap=="function"?WeakMap:Map,mn=0,On=null,Nr=null,Or=0,gn=0,wo=null,Ul=!1,qh=!1,cp=!1,Vl=0,Zn=0,Yo=0,Gl=0,eg=0,Ko=0,Tu=0,Uh=null,eo=null,tg=!1,Au=0,Yd=1/0,up=null,Bc=null,na=0,Fc=null,Vh=null,Mu=0,Kd=0,hp=null,rg=null,Gh=0,ng=null;function Ta(){if((mn&2)!==0&&Or!==0)return Or&-Or;if(Pe.T!==null){var s=Oa;return s!==0?s:lg()}return ei()}function Jy(){Ko===0&&(Ko=(Or&536870912)===0||zr?St():536870912);var s=on.current;return s!==null&&(s.flags|=32),Ko}function to(s,h,g){(s===On&&(gn===2||gn===9)||s.cancelPendingCommit!==null)&&(Ks(s,0),Zl(s,Or,Ko,!1)),Zt(s,g),((mn&2)===0||s!==On)&&(s===On&&((mn&2)===0&&(Gl|=g),Zn===4&&Zl(s,Or,Ko,!1)),Qo(s))}function ev(s,h,g){if((mn&6)!==0)throw Error(a(327));var S=!g&&(h&124)===0&&(h&s.expiredLanes)===0||Le(s,h),j=S?rv(s,h):Qd(s,h,!0),R=S;do{if(j===0){qh&&!S&&Zl(s,h,0,!1);break}else{if(g=s.current.alternate,R&&!Ex(g)){j=Qd(s,h,!1),R=!1;continue}if(j===2){if(R=h,s.errorRecoveryDisabledLanes&R)var Y=0;else Y=s.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){h=Y;e:{var ce=s;j=Uh;var Me=ce.current.memoizedState.isDehydrated;if(Me&&(Ks(ce,Y).flags|=256),Y=Qd(ce,Y,!1),Y!==2){if(cp&&!Me){ce.errorRecoveryDisabledLanes|=R,Gl|=R,j=4;break e}R=eo,eo=j,R!==null&&(eo===null?eo=R:eo.push.apply(eo,R))}j=Y}if(R=!1,j!==2)continue}}if(j===1){Ks(s,0),Zl(s,h,0,!0);break}e:{switch(S=s,R=j,R){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:Zl(S,h,Ko,!Ul);break e;case 2:eo=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(j=Au+300-Kr(),10<j)){if(Zl(S,h,Ko,!Ul),He(S,0,!0)!==0)break e;S.timeoutHandle=ro(tv.bind(null,S,g,eo,up,tg,h,Ko,Gl,Tu,Ul,R,2,-0,0),j);break e}tv(S,g,eo,up,tg,h,Ko,Gl,Tu,Ul,R,0,-0,0)}}break}while(!0);Qo(s)}function tv(s,h,g,S,j,R,Y,ce,Me,qe,pt,bt,et,lt){if(s.timeoutHandle=-1,bt=h.subtreeFlags,(bt&8192||(bt&16785408)===16785408)&&(Ru={stylesheets:null,count:0,unsuspend:xg},Qy(h),bt=c(),bt!==null)){s.cancelPendingCommit=bt(ov.bind(null,s,h,R,g,S,j,Y,ce,Me,pt,1,et,lt)),Zl(s,R,Y,!qe);return}ov(s,h,R,g,S,j,Y,ce,Me)}function Ex(s){for(var h=s;;){var g=h.tag;if((g===0||g===11||g===15)&&h.flags&16384&&(g=h.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var S=0;S<g.length;S++){var j=g[S],R=j.getSnapshot;j=j.value;try{if(!fa(R(),j))return!1}catch{return!1}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===s)break;for(;h.sibling===null;){if(h.return===null||h.return===s)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Zl(s,h,g,S){h&=~eg,h&=~Gl,s.suspendedLanes|=h,s.pingedLanes&=~h,S&&(s.warmLanes|=h),S=s.expirationTimes;for(var j=h;0<j;){var R=31-ke(j),Y=1<<R;S[R]=-1,j&=~Y}g!==0&&jr(s,g,h)}function dp(){return(mn&6)===0?(Cu(0),!1):!0}function ig(){if(Nr!==null){if(gn===0)var s=Nr.return;else s=Nr,go=$o=null,$d(s),Qa=null,Zs=0,s=Nr;for(;s!==null;)Vm(s.alternate,s),s=s.return;Nr=null}}function Ks(s,h){var g=s.timeoutHandle;g!==-1&&(s.timeoutHandle=-1,Qh(g)),g=s.cancelPendingCommit,g!==null&&(s.cancelPendingCommit=null,g()),ig(),On=s,Nr=g=mo(s.current,null),Or=h,gn=0,wo=null,Ul=!1,qh=Le(s,h),cp=!1,Tu=Ko=eg=Gl=Yo=Zn=0,eo=Uh=null,tg=!1,(h&8)!==0&&(h|=h&32);var S=s.entangledLanes;if(S!==0)for(s=s.entanglements,S&=h;0<S;){var j=31-ke(S),R=1<<j;h|=s[j],S&=~R}return Vl=h,ks(),g}function yi(s,h){Sr=null,Pe.H=wi,h===us||h===Rs?(h=Mc(),gn=3):h===zd?(h=Mc(),gn=4):gn=h===qd?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,wo=h,Nr===null&&(Zn=1,Hs(s,ma(h,s.current)))}function fp(){var s=Pe.H;return Pe.H=wi,s===null?wi:s}function ag(){var s=Pe.A;return Pe.A=Mx,s}function pp(){Zn=4,Ul||(Or&4194048)!==Or&&on.current!==null||(qh=!0),(Yo&134217727)===0&&(Gl&134217727)===0||On===null||Zl(On,Or,Ko,!1)}function Qd(s,h,g){var S=mn;mn|=2;var j=fp(),R=ag();(On!==s||Or!==h)&&(up=null,Ks(s,h)),h=!1;var Y=Zn;e:do try{if(gn!==0&&Nr!==null){var ce=Nr,Me=wo;switch(gn){case 8:ig(),Y=6;break e;case 3:case 2:case 9:case 6:on.current===null&&(h=!0);var qe=gn;if(gn=0,wo=null,Hh(s,ce,Me,qe),g&&qh){Y=0;break e}break;default:qe=gn,gn=0,wo=null,Hh(s,ce,Me,qe)}}Zh(),Y=Zn;break}catch(pt){yi(s,pt)}while(!0);return h&&s.shellSuspendCounter++,go=$o=null,mn=S,Pe.H=j,Pe.A=R,Nr===null&&(On=null,Or=0,ks()),Y}function Zh(){for(;Nr!==null;)nv(Nr)}function rv(s,h){var g=mn;mn|=2;var S=fp(),j=ag();On!==s||Or!==h?(up=null,Yd=Kr()+500,Ks(s,h)):qh=Le(s,h);e:do try{if(gn!==0&&Nr!==null){h=Nr;var R=wo;t:switch(gn){case 1:gn=0,wo=null,Hh(s,h,R,1);break;case 2:case 9:if(Dt(R)){gn=0,wo=null,iv(h);break}h=function(){gn!==2&&gn!==9||On!==s||(gn=7),Qo(s)},R.then(h,h);break e;case 3:gn=7;break e;case 4:gn=5;break e;case 7:Dt(R)?(gn=0,wo=null,iv(h)):(gn=0,wo=null,Hh(s,h,R,7));break;case 5:var Y=null;switch(Nr.tag){case 26:Y=Nr.memoizedState;case 5:case 27:var ce=Nr;if(!Y||Rp(Y)){gn=0,wo=null;var Me=ce.sibling;if(Me!==null)Nr=Me;else{var qe=ce.return;qe!==null?(Nr=qe,mp(qe)):Nr=null}break t}}gn=0,wo=null,Hh(s,h,R,5);break;case 6:gn=0,wo=null,Hh(s,h,R,6);break;case 8:ig(),Zn=6;break e;default:throw Error(a(462))}}Cx();break}catch(pt){yi(s,pt)}while(!0);return go=$o=null,Pe.H=S,Pe.A=j,mn=g,Nr!==null?0:(On=null,Or=0,ks(),Zn)}function Cx(){for(;Nr!==null&&!Yr();)nv(Nr)}function nv(s){var h=op(s.alternate,s,Vl);s.memoizedProps=s.pendingProps,h===null?mp(s):Nr=h}function iv(s){var h=s,g=h.alternate;switch(h.tag){case 15:case 0:h=bu(g,h,h.pendingProps,h.type,void 0,Or);break;case 11:h=bu(g,h,h.pendingProps,h.type.render,h.ref,Or);break;case 5:$d(h);default:Vm(g,h),h=Nr=_c(h,Vl),h=op(g,h,Vl)}s.memoizedProps=s.pendingProps,h===null?mp(s):Nr=h}function Hh(s,h,g,S){go=$o=null,$d(h),Qa=null,Zs=0;var j=h.return;try{if(Uy(s,j,h,g,Or)){Zn=1,Hs(s,ma(g,s.current)),Nr=null;return}}catch(R){if(j!==null)throw Nr=j,R;Zn=1,Hs(s,ma(g,s.current)),Nr=null;return}h.flags&32768?(zr||S===1?s=!0:qh||(Or&536870912)!==0?s=!1:(Ul=s=!0,(S===2||S===9||S===3||S===6)&&(S=on.current,S!==null&&S.tag===13&&(S.flags|=16384))),av(h,s)):mp(h)}function mp(s){var h=s;do{if((h.flags&32768)!==0){av(h,Ul);return}s=h.return;var g=Um(h.alternate,h,Vl);if(g!==null){Nr=g;return}if(h=h.sibling,h!==null){Nr=h;return}Nr=h=s}while(h!==null);Zn===0&&(Zn=5)}function av(s,h){do{var g=Sx(s.alternate,s);if(g!==null){g.flags&=32767,Nr=g;return}if(g=s.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!h&&(s=s.sibling,s!==null)){Nr=s;return}Nr=s=g}while(s!==null);Zn=6,Nr=null}function ov(s,h,g,S,j,R,Y,ce,Me){s.cancelPendingCommit=null;do gp();while(na!==0);if((mn&6)!==0)throw Error(a(327));if(h!==null){if(h===s.current)throw Error(a(177));if(R=h.lanes|h.childLanes,R|=vc,Ue(s,g,R,Y,ce,Me),s===On&&(Nr=On=null,Or=0),Vh=h,Fc=s,Mu=g,Kd=R,hp=j,rg=S,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,jx(Ii,function(){return og(),null})):(s.callbackNode=null,s.callbackPriority=0),S=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||S){S=Pe.T,Pe.T=null,j=Ve.p,Ve.p=2,Y=mn,mn|=4;try{Tx(s,h,g)}finally{mn=Y,Ve.p=j,Pe.T=S}}na=1,sv(),lv(),cv()}}function sv(){if(na===1){na=0;var s=Fc,h=Vh,g=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||g){g=Pe.T,Pe.T=null;var S=Ve.p;Ve.p=2;var j=mn;mn|=4;try{Zd(h,s);var R=Ep,Y=_h(s.containerInfo),ce=R.focusedElem,Me=R.selectionRange;if(Y!==ce&&ce&&ce.ownerDocument&&No(ce.ownerDocument.documentElement,ce)){if(Me!==null&&au(ce)){var qe=Me.start,pt=Me.end;if(pt===void 0&&(pt=qe),"selectionStart"in ce)ce.selectionStart=qe,ce.selectionEnd=Math.min(pt,ce.value.length);else{var bt=ce.ownerDocument||document,et=bt&&bt.defaultView||window;if(et.getSelection){var lt=et.getSelection(),cr=ce.textContent.length,rr=Math.min(Me.start,cr),Qr=Me.end===void 0?rr:Math.min(Me.end,cr);!lt.extend&&rr>Qr&&(Y=Qr,Qr=rr,rr=Y);var Ze=iu(ce,rr),Re=iu(ce,Qr);if(Ze&&Re&&(lt.rangeCount!==1||lt.anchorNode!==Ze.node||lt.anchorOffset!==Ze.offset||lt.focusNode!==Re.node||lt.focusOffset!==Re.offset)){var Je=bt.createRange();Je.setStart(Ze.node,Ze.offset),lt.removeAllRanges(),rr>Qr?(lt.addRange(Je),lt.extend(Re.node,Re.offset)):(Je.setEnd(Re.node,Re.offset),lt.addRange(Je))}}}}for(bt=[],lt=ce;lt=lt.parentNode;)lt.nodeType===1&&bt.push({element:lt,left:lt.scrollLeft,top:lt.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<bt.length;ce++){var xt=bt[ce];xt.element.scrollLeft=xt.left,xt.element.scrollTop=xt.top}}K=!!Pp,Ep=Pp=null}finally{mn=j,Ve.p=S,Pe.T=g}}s.current=h,na=2}}function lv(){if(na===2){na=0;var s=Fc,h=Vh,g=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||g){g=Pe.T,Pe.T=null;var S=Ve.p;Ve.p=2;var j=mn;mn|=4;try{Yy(s,h.alternate,h)}finally{mn=j,Ve.p=S,Pe.T=g}}na=3}}function cv(){if(na===4||na===3){na=0,tn();var s=Fc,h=Vh,g=Mu,S=rg;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?na=5:(na=0,Vh=Fc=null,uv(s,s.pendingLanes));var j=s.pendingLanes;if(j===0&&(Bc=null),Er(g),h=h.stateNode,Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(zi,h,void 0,(h.current.flags&128)===128)}catch{}if(S!==null){h=Pe.T,j=Ve.p,Ve.p=2,Pe.T=null;try{for(var R=s.onRecoverableError,Y=0;Y<S.length;Y++){var ce=S[Y];R(ce.value,{componentStack:ce.stack})}}finally{Pe.T=h,Ve.p=j}}(Mu&3)!==0&&gp(),Qo(s),j=s.pendingLanes,(g&4194090)!==0&&(j&42)!==0?s===ng?Gh++:(Gh=0,ng=s):Gh=0,Cu(0)}}function uv(s,h){(s.pooledCacheLanes&=h)===0&&(h=s.pooledCache,h!=null&&(s.pooledCache=null,qo(h)))}function gp(s){return sv(),lv(),cv(),og()}function og(){if(na!==5)return!1;var s=Fc,h=Kd;Kd=0;var g=Er(Mu),S=Pe.T,j=Ve.p;try{Ve.p=32>g?32:g,Pe.T=null,g=hp,hp=null;var R=Fc,Y=Mu;if(na=0,Vh=Fc=null,Mu=0,(mn&6)!==0)throw Error(a(331));var ce=mn;if(mn|=4,lp(R.current),Su(R,R.current,Y,g),mn=ce,Cu(0,!1),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(zi,R)}catch{}return!0}finally{Ve.p=j,Pe.T=S,uv(s,h)}}function yp(s,h,g){h=ma(g,h),h=Jf(s.stateNode,h,2),s=vo(s,h,2),s!==null&&(Zt(s,2),Qo(s))}function _n(s,h,g){if(s.tag===3)yp(s,s,g);else for(;h!==null;){if(h.tag===3){yp(h,s,g);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Bc===null||!Bc.has(S))){s=ma(g,s),g=qy(2),S=vo(h,g,2),S!==null&&(ep(g,S,h,s),Zt(S,2),Qo(S));break}}h=h.return}}function Qs(s,h,g){var S=s.pingCache;if(S===null){S=s.pingCache=new Px;var j=new Set;S.set(h,j)}else j=S.get(h),j===void 0&&(j=new Set,S.set(h,j));j.has(g)||(cp=!0,j.add(g),s=Jd.bind(null,s,h,g),h.then(s,s))}function Jd(s,h,g){var S=s.pingCache;S!==null&&S.delete(h),s.pingedLanes|=s.suspendedLanes&g,s.warmLanes&=~g,On===s&&(Or&g)===g&&(Zn===4||Zn===3&&(Or&62914560)===Or&&300>Kr()-Au?(mn&2)===0&&Ks(s,0):eg|=g,Tu===Or&&(Tu=0)),Qo(s)}function Pu(s,h){h===0&&(h=mt()),s=po(s,h),s!==null&&(Zt(s,h),Qo(s))}function vp(s){var h=s.memoizedState,g=0;h!==null&&(g=h.retryLane),Pu(s,g)}function _p(s,h){var g=0;switch(s.tag){case 13:var S=s.stateNode,j=s.memoizedState;j!==null&&(g=j.retryLane);break;case 19:S=s.stateNode;break;case 22:S=s.stateNode._retryCache;break;default:throw Error(a(314))}S!==null&&S.delete(h),Pu(s,g)}function jx(s,h){return fr(s,h)}var xp=null,Eu=null,bp=!1,wp=!1,Sp=!1,$c=0;function Qo(s){s!==Eu&&s.next===null&&(Eu===null?xp=Eu=s:Eu=Eu.next=s),wp=!0,bp||(bp=!0,kx())}function Cu(s,h){if(!Sp&&wp){Sp=!0;do for(var g=!1,S=xp;S!==null;){if(s!==0){var j=S.pendingLanes;if(j===0)var R=0;else{var Y=S.suspendedLanes,ce=S.pingedLanes;R=(1<<31-ke(42|s)+1)-1,R&=j&~(Y&~ce),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(g=!0,fv(S,R))}else R=Or,R=He(S,S===On?R:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(R&3)===0||Le(S,R)||(g=!0,fv(S,R));S=S.next}while(g);Sp=!1}}function Ox(){sg()}function sg(){wp=bp=!1;var s=0;$c!==0&&(_v()&&(s=$c),$c=0);for(var h=Kr(),g=null,S=xp;S!==null;){var j=S.next,R=hv(S,h);R===0?(S.next=null,g===null?xp=j:g.next=j,j===null&&(Eu=g)):(g=S,(s!==0||(R&3)!==0)&&(wp=!0)),S=j}Cu(s)}function hv(s,h){for(var g=s.suspendedLanes,S=s.pingedLanes,j=s.expirationTimes,R=s.pendingLanes&-62914561;0<R;){var Y=31-ke(R),ce=1<<Y,Me=j[Y];Me===-1?((ce&g)===0||(ce&S)!==0)&&(j[Y]=ct(ce,h)):Me<=h&&(s.expiredLanes|=ce),R&=~ce}if(h=On,g=Or,g=He(s,s===h?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),S=s.callbackNode,g===0||s===h&&(gn===2||gn===9)||s.cancelPendingCommit!==null)return S!==null&&S!==null&&Qt(S),s.callbackNode=null,s.callbackPriority=0;if((g&3)===0||Le(s,g)){if(h=g&-g,h===s.callbackPriority)return h;switch(S!==null&&Qt(S),Er(g)){case 2:case 8:g=Ba;break;case 32:g=Ii;break;case 268435456:g=Yi;break;default:g=Ii}return S=dv.bind(null,s),g=fr(g,S),s.callbackPriority=h,s.callbackNode=g,h}return S!==null&&S!==null&&Qt(S),s.callbackPriority=2,s.callbackNode=null,2}function dv(s,h){if(na!==0&&na!==5)return s.callbackNode=null,s.callbackPriority=0,null;var g=s.callbackNode;if(gp()&&s.callbackNode!==g)return null;var S=Or;return S=He(s,s===On?S:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),S===0?null:(ev(s,S,h),hv(s,Kr()),s.callbackNode!=null&&s.callbackNode===g?dv.bind(null,s):null)}function fv(s,h){if(gp())return null;ev(s,h,!0)}function kx(){ku(function(){(mn&6)!==0?fr(Wn,Ox):sg()})}function lg(){return $c===0&&($c=St()),$c}function cg(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Oo(""+s)}function ug(s,h){var g=h.ownerDocument.createElement("input");return g.name=h.name,g.value=h.value,s.id&&g.setAttribute("form",s.id),h.parentNode.insertBefore(g,h),s=new FormData(s),g.parentNode.removeChild(g),s}function Hl(s,h,g,S,j){if(h==="submit"&&g&&g.stateNode===j){var R=cg((j[Ar]||null).action),Y=S.submitter;Y&&(h=(h=Y[Ar]||null)?cg(h.formAction):Y.getAttribute("formAction"),h!==null&&(R=h,Y=null));var ce=new ml("action","action",null,S,j);s.push({event:ce,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if($c!==0){var Me=Y?ug(j,Y):new FormData(j);At(g,{pending:!0,data:Me,method:j.method,action:R},null,Me)}}else typeof R=="function"&&(ce.preventDefault(),Me=Y?ug(j,Y):new FormData(j),At(g,{pending:!0,data:Me,method:j.method,action:R},R,Me))},currentTarget:j}]})}}for(var Js=0;Js<pa.length;Js++){var Tp=pa[Js],hg=Tp.toLowerCase(),Ix=Tp[0].toUpperCase()+Tp.slice(1);qa(hg,"on"+Ix)}qa(Ed,"onAnimationEnd"),qa(lu,"onAnimationIteration"),qa(cu,"onAnimationStart"),qa("dblclick","onDoubleClick"),qa("focusin","onFocus"),qa("focusout","onBlur"),qa(xh,"onTransitionRun"),qa(Cd,"onTransitionStart"),qa(Ml,"onTransitionCancel"),qa(yc,"onTransitionEnd"),Eo("onMouseEnter",["mouseout","mouseover"]),Eo("onMouseLeave",["mouseout","mouseover"]),Eo("onPointerEnter",["pointerout","pointerover"]),Eo("onPointerLeave",["pointerout","pointerover"]),Fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qc));function pv(s,h){h=(h&4)!==0;for(var g=0;g<s.length;g++){var S=s[g],j=S.event;S=S.listeners;e:{var R=void 0;if(h)for(var Y=S.length-1;0<=Y;Y--){var ce=S[Y],Me=ce.instance,qe=ce.currentTarget;if(ce=ce.listener,Me!==R&&j.isPropagationStopped())break e;R=ce,j.currentTarget=qe;try{R(j)}catch(pt){kc(pt)}j.currentTarget=null,R=Me}else for(Y=0;Y<S.length;Y++){if(ce=S[Y],Me=ce.instance,qe=ce.currentTarget,ce=ce.listener,Me!==R&&j.isPropagationStopped())break e;R=ce,j.currentTarget=qe;try{R(j)}catch(pt){kc(pt)}j.currentTarget=null,R=Me}}}}function kr(s,h){var g=h[Ur];g===void 0&&(g=h[Ur]=new Set);var S=s+"__bubble";g.has(S)||(fg(h,s,2,!1),g.add(S))}function ef(s,h,g){var S=0;h&&(S|=4),fg(g,s,S,h)}var Xl="_reactListening"+Math.random().toString(36).slice(2);function Ap(s){if(!s[Xl]){s[Xl]=!0,so.forEach(function(g){g!=="selectionchange"&&(dg.has(g)||ef(g,!1,s),ef(g,!0,s))});var h=s.nodeType===9?s:s.ownerDocument;h===null||h[Xl]||(h[Xl]=!0,ef("selectionchange",!1,h))}}function fg(s,h,g,S){switch(je(h)){case 2:var j=ee;break;case 8:j=le;break;default:j=de}g=j.bind(null,h,g,s),j=void 0,!Ms||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(j=!0),S?j!==void 0?s.addEventListener(h,g,{capture:!0,passive:j}):s.addEventListener(h,g,!0):j!==void 0?s.addEventListener(h,g,{passive:j}):s.addEventListener(h,g,!1)}function tf(s,h,g,S,j){var R=S;if((h&1)===0&&(h&2)===0&&S!==null)e:for(;;){if(S===null)return;var Y=S.tag;if(Y===3||Y===4){var ce=S.stateNode.containerInfo;if(ce===j)break;if(Y===4)for(Y=S.return;Y!==null;){var Me=Y.tag;if((Me===3||Me===4)&&Y.stateNode.containerInfo===j)return;Y=Y.return}for(;ce!==null;){if(Y=Ct(ce),Y===null)return;if(Me=Y.tag,Me===5||Me===6||Me===26||Me===27){S=R=Y;continue e}ce=ce.parentNode}}S=S.return}di(function(){var qe=R,pt=pl(g),bt=[];e:{var et=Pl.get(s);if(et!==void 0){var lt=ml,cr=s;switch(s){case"keypress":if(yn(g)===0)break e;case"keydown":case"keyup":lt=yd;break;case"focusin":cr="focus",lt=ni;break;case"focusout":cr="blur",lt=ni;break;case"beforeblur":case"afterblur":lt=ni;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=sh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=Jc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=qf;break;case Ed:case lu:case cu:lt=eu;break;case yc:lt=jm;break;case"scroll":case"scrollend":lt=gd;break;case"wheel":lt=Om;break;case"copy":case"cut":case"paste":lt=_i;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=zo;break;case"toggle":case"beforetoggle":lt=_d}var rr=(h&4)!==0,Qr=!rr&&(s==="scroll"||s==="scrollend"),Ze=rr?et!==null?et+"Capture":null:et;rr=[];for(var Re=qe,Je;Re!==null;){var xt=Re;if(Je=xt.stateNode,xt=xt.tag,xt!==5&&xt!==26&&xt!==27||Je===null||Ze===null||(xt=Kn(Re,Ze),xt!=null&&rr.push(Xh(Re,xt,Je))),Qr)break;Re=Re.return}0<rr.length&&(et=new lt(et,cr,null,g,pt),bt.push({event:et,listeners:rr}))}}if((h&7)===0){e:{if(et=s==="mouseover"||s==="pointerover",lt=s==="mouseout"||s==="pointerout",et&&g!==xr&&(cr=g.relatedTarget||g.fromElement)&&(Ct(cr)||cr[Mn]))break e;if((lt||et)&&(et=pt.window===pt?pt:(et=pt.ownerDocument)?et.defaultView||et.parentWindow:window,lt?(cr=g.relatedTarget||g.toElement,lt=qe,cr=cr?Ct(cr):null,cr!==null&&(Qr=v(cr),rr=cr.tag,cr!==Qr||rr!==5&&rr!==27&&rr!==6)&&(cr=null)):(lt=null,cr=qe),lt!==cr)){if(rr=sh,xt="onMouseLeave",Ze="onMouseEnter",Re="mouse",(s==="pointerout"||s==="pointerover")&&(rr=zo,xt="onPointerLeave",Ze="onPointerEnter",Re="pointer"),Qr=lt==null?et:pr(lt),Je=cr==null?et:pr(cr),et=new rr(xt,Re+"leave",lt,g,pt),et.target=Qr,et.relatedTarget=Je,xt=null,Ct(pt)===qe&&(rr=new rr(Ze,Re+"enter",cr,g,pt),rr.target=Je,rr.relatedTarget=Qr,xt=rr),Qr=xt,lt&&cr)t:{for(rr=lt,Ze=cr,Re=0,Je=rr;Je;Je=Ou(Je))Re++;for(Je=0,xt=Ze;xt;xt=Ou(xt))Je++;for(;0<Re-Je;)rr=Ou(rr),Re--;for(;0<Je-Re;)Ze=Ou(Ze),Je--;for(;Re--;){if(rr===Ze||Ze!==null&&rr===Ze.alternate)break t;rr=Ou(rr),Ze=Ou(Ze)}rr=null}else rr=null;lt!==null&&mv(bt,et,lt,rr,!1),cr!==null&&Qr!==null&&mv(bt,Qr,cr,rr,!0)}}e:{if(et=qe?pr(qe):window,lt=et.nodeName&&et.nodeName.toLowerCase(),lt==="select"||lt==="input"&&et.type==="file")var Xt=mc;else if(mh(et))if(wd)Xt=Ad;else{Xt=Im;var Ir=yh}else lt=et.nodeName,!lt||lt.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?qe&&Mr(qe.elementType)&&(Xt=mc):Xt=Zf;if(Xt&&(Xt=Xt(s,qe))){bd(bt,Xt,g,pt);break e}Ir&&Ir(s,et,qe),s==="focusout"&&qe&&et.type==="number"&&qe.memoizedProps.value!=null&&ih(et,"number",et.value)}switch(Ir=qe?pr(qe):window,s){case"focusin":(mh(Ir)||Ir.contentEditable==="true")&&(Sl=Ir,ou=qe,fo=null);break;case"focusout":fo=ou=Sl=null;break;case"mousedown":su=!0;break;case"contextmenu":case"mouseup":case"dragend":su=!1,Xf(bt,g,pt);break;case"selectionchange":if(Fr)break;case"keydown":case"keyup":Xf(bt,g,pt)}var Jt;if(js)e:{switch(s){case"compositionstart":var dr="onCompositionStart";break e;case"compositionend":dr="onCompositionEnd";break e;case"compositionupdate":dr="onCompositionUpdate";break e}dr=void 0}else is?dc(s,g)&&(dr="onCompositionEnd"):s==="keydown"&&g.keyCode===229&&(dr="onCompositionStart");dr&&(xd&&g.locale!=="ko"&&(is||dr!=="onCompositionStart"?dr==="onCompositionEnd"&&is&&(Jt=rn()):(ti=pt,Li="value"in ti?ti.value:ti.textContent,is=!0)),Ir=ju(qe,dr),0<Ir.length&&(dr=new tu(dr,s,null,g,pt),bt.push({event:dr,listeners:Ir}),Jt?dr.data=Jt:(Jt=Uf(g),Jt!==null&&(dr.data=Jt)))),(Jt=ho?km(s,g):fc(s,g))&&(dr=ju(qe,"onBeforeInput"),0<dr.length&&(Ir=new tu("onBeforeInput","beforeinput",null,g,pt),bt.push({event:Ir,listeners:dr}),Ir.data=Jt)),Hl(bt,s,qe,g,pt)}pv(bt,h)})}function Xh(s,h,g){return{instance:s,listener:h,currentTarget:g}}function ju(s,h){for(var g=h+"Capture",S=[];s!==null;){var j=s,R=j.stateNode;if(j=j.tag,j!==5&&j!==26&&j!==27||R===null||(j=Kn(s,g),j!=null&&S.unshift(Xh(s,j,R)),j=Kn(s,h),j!=null&&S.push(Xh(s,j,R))),s.tag===3)return S;s=s.return}return[]}function Ou(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function mv(s,h,g,S,j){for(var R=h._reactName,Y=[];g!==null&&g!==S;){var ce=g,Me=ce.alternate,qe=ce.stateNode;if(ce=ce.tag,Me!==null&&Me===S)break;ce!==5&&ce!==26&&ce!==27||qe===null||(Me=qe,j?(qe=Kn(g,R),qe!=null&&Y.unshift(Xh(g,qe,Me))):j||(qe=Kn(g,R),qe!=null&&Y.push(Xh(g,qe,Me)))),g=g.return}Y.length!==0&&s.push({event:h,listeners:Y})}var Dx=/\r\n?/g,zx=/\u0000|\uFFFD/g;function gv(s){return(typeof s=="string"?s:""+s).replace(Dx,`
`).replace(zx,"")}function yv(s,h){return h=gv(h),gv(s)===h}function Wh(){}function Gr(s,h,g,S,j,R){switch(g){case"children":typeof S=="string"?h==="body"||h==="textarea"&&S===""||jo(s,S):(typeof S=="number"||typeof S=="bigint")&&h!=="body"&&jo(s,""+S);break;case"className":Ni(s,"class",S);break;case"tabIndex":Ni(s,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Ni(s,g,S);break;case"style":Ri(s,S,R);break;case"data":if(h!=="object"){Ni(s,"data",S);break}case"src":case"href":if(S===""&&(h!=="a"||g!=="href")){s.removeAttribute(g);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){s.removeAttribute(g);break}S=Oo(""+S),s.setAttribute(g,S);break;case"action":case"formAction":if(typeof S=="function"){s.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(g==="formAction"?(h!=="input"&&Gr(s,h,"name",j.name,j,null),Gr(s,h,"formEncType",j.formEncType,j,null),Gr(s,h,"formMethod",j.formMethod,j,null),Gr(s,h,"formTarget",j.formTarget,j,null)):(Gr(s,h,"encType",j.encType,j,null),Gr(s,h,"method",j.method,j,null),Gr(s,h,"target",j.target,j,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){s.removeAttribute(g);break}S=Oo(""+S),s.setAttribute(g,S);break;case"onClick":S!=null&&(s.onclick=Wh);break;case"onScroll":S!=null&&kr("scroll",s);break;case"onScrollEnd":S!=null&&kr("scrollend",s);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(a(61));if(g=S.__html,g!=null){if(j.children!=null)throw Error(a(60));s.innerHTML=g}}break;case"multiple":s.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":s.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){s.removeAttribute("xlink:href");break}g=Oo(""+S),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?s.setAttribute(g,""+S):s.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?s.setAttribute(g,""):s.removeAttribute(g);break;case"capture":case"download":S===!0?s.setAttribute(g,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?s.setAttribute(g,S):s.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?s.setAttribute(g,S):s.removeAttribute(g);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?s.removeAttribute(g):s.setAttribute(g,S);break;case"popover":kr("beforetoggle",s),kr("toggle",s),Pn(s,"popover",S);break;case"xlinkActuate":Vr(s,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":Vr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":Vr(s,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":Vr(s,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":Vr(s,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":Vr(s,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":Vr(s,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":Vr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":Vr(s,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Pn(s,"is",S);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=uc.get(g)||g,Pn(s,g,S))}}function Mp(s,h,g,S,j,R){switch(g){case"style":Ri(s,S,R);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(a(61));if(g=S.__html,g!=null){if(j.children!=null)throw Error(a(60));s.innerHTML=g}}break;case"children":typeof S=="string"?jo(s,S):(typeof S=="number"||typeof S=="bigint")&&jo(s,""+S);break;case"onScroll":S!=null&&kr("scroll",s);break;case"onScrollEnd":S!=null&&kr("scrollend",s);break;case"onClick":S!=null&&(s.onclick=Wh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vr.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(j=g.endsWith("Capture"),h=g.slice(2,j?g.length-7:void 0),R=s[Ar]||null,R=R!=null?R[g]:null,typeof R=="function"&&s.removeEventListener(h,R,j),typeof S=="function")){typeof R!="function"&&R!==null&&(g in s?s[g]=null:s.hasAttribute(g)&&s.removeAttribute(g)),s.addEventListener(h,S,j);break e}g in s?s[g]=S:S===!0?s.setAttribute(g,""):Pn(s,g,S)}}}function Zi(s,h,g){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kr("error",s),kr("load",s);var S=!1,j=!1,R;for(R in g)if(g.hasOwnProperty(R)){var Y=g[R];if(Y!=null)switch(R){case"src":S=!0;break;case"srcSet":j=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Gr(s,h,R,Y,g,null)}}j&&Gr(s,h,"srcSet",g.srcSet,g,null),S&&Gr(s,h,"src",g.src,g,null);return;case"input":kr("invalid",s);var ce=R=Y=j=null,Me=null,qe=null;for(S in g)if(g.hasOwnProperty(S)){var pt=g[S];if(pt!=null)switch(S){case"name":j=pt;break;case"type":Y=pt;break;case"checked":Me=pt;break;case"defaultChecked":qe=pt;break;case"value":R=pt;break;case"defaultValue":ce=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(a(137,h));break;default:Gr(s,h,S,pt,g,null)}}nh(s,R,ce,Me,qe,Y,j,!1),th(s);return;case"select":kr("invalid",s),S=Y=R=null;for(j in g)if(g.hasOwnProperty(j)&&(ce=g[j],ce!=null))switch(j){case"value":R=ce;break;case"defaultValue":Y=ce;break;case"multiple":S=ce;default:Gr(s,h,j,ce,g,null)}h=R,g=Y,s.multiple=!!S,h!=null?$a(s,!!S,h,!1):g!=null&&$a(s,!!S,g,!0);return;case"textarea":kr("invalid",s),R=j=S=null;for(Y in g)if(g.hasOwnProperty(Y)&&(ce=g[Y],ce!=null))switch(Y){case"value":S=ce;break;case"defaultValue":j=ce;break;case"children":R=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(a(91));break;default:Gr(s,h,Y,ce,g,null)}Ff(s,S,j,R),th(s);return;case"option":for(Me in g)if(g.hasOwnProperty(Me)&&(S=g[Me],S!=null))switch(Me){case"selected":s.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:Gr(s,h,Me,S,g,null)}return;case"dialog":kr("beforetoggle",s),kr("toggle",s),kr("cancel",s),kr("close",s);break;case"iframe":case"object":kr("load",s);break;case"video":case"audio":for(S=0;S<qc.length;S++)kr(qc[S],s);break;case"image":kr("error",s),kr("load",s);break;case"details":kr("toggle",s);break;case"embed":case"source":case"link":kr("error",s),kr("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(qe in g)if(g.hasOwnProperty(qe)&&(S=g[qe],S!=null))switch(qe){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Gr(s,h,qe,S,g,null)}return;default:if(Mr(h)){for(pt in g)g.hasOwnProperty(pt)&&(S=g[pt],S!==void 0&&Mp(s,h,pt,S,g,void 0));return}}for(ce in g)g.hasOwnProperty(ce)&&(S=g[ce],S!=null&&Gr(s,h,ce,S,g,null))}function vv(s,h,g,S){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var j=null,R=null,Y=null,ce=null,Me=null,qe=null,pt=null;for(lt in g){var bt=g[lt];if(g.hasOwnProperty(lt)&&bt!=null)switch(lt){case"checked":break;case"value":break;case"defaultValue":Me=bt;default:S.hasOwnProperty(lt)||Gr(s,h,lt,null,S,bt)}}for(var et in S){var lt=S[et];if(bt=g[et],S.hasOwnProperty(et)&&(lt!=null||bt!=null))switch(et){case"type":R=lt;break;case"name":j=lt;break;case"checked":qe=lt;break;case"defaultChecked":pt=lt;break;case"value":Y=lt;break;case"defaultValue":ce=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(a(137,h));break;default:lt!==bt&&Gr(s,h,et,lt,S,bt)}}ns(s,Y,ce,Me,qe,pt,R,j);return;case"select":lt=Y=ce=et=null;for(R in g)if(Me=g[R],g.hasOwnProperty(R)&&Me!=null)switch(R){case"value":break;case"multiple":lt=Me;default:S.hasOwnProperty(R)||Gr(s,h,R,null,S,Me)}for(j in S)if(R=S[j],Me=g[j],S.hasOwnProperty(j)&&(R!=null||Me!=null))switch(j){case"value":et=R;break;case"defaultValue":ce=R;break;case"multiple":Y=R;default:R!==Me&&Gr(s,h,j,R,S,Me)}h=ce,g=Y,S=lt,et!=null?$a(s,!!g,et,!1):!!S!=!!g&&(h!=null?$a(s,!!g,h,!0):$a(s,!!g,g?[]:"",!1));return;case"textarea":lt=et=null;for(ce in g)if(j=g[ce],g.hasOwnProperty(ce)&&j!=null&&!S.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:Gr(s,h,ce,null,S,j)}for(Y in S)if(j=S[Y],R=g[Y],S.hasOwnProperty(Y)&&(j!=null||R!=null))switch(Y){case"value":et=j;break;case"defaultValue":lt=j;break;case"children":break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(a(91));break;default:j!==R&&Gr(s,h,Y,j,S,R)}ah(s,et,lt);return;case"option":for(var cr in g)if(et=g[cr],g.hasOwnProperty(cr)&&et!=null&&!S.hasOwnProperty(cr))switch(cr){case"selected":s.selected=!1;break;default:Gr(s,h,cr,null,S,et)}for(Me in S)if(et=S[Me],lt=g[Me],S.hasOwnProperty(Me)&&et!==lt&&(et!=null||lt!=null))switch(Me){case"selected":s.selected=et&&typeof et!="function"&&typeof et!="symbol";break;default:Gr(s,h,Me,et,S,lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rr in g)et=g[rr],g.hasOwnProperty(rr)&&et!=null&&!S.hasOwnProperty(rr)&&Gr(s,h,rr,null,S,et);for(qe in S)if(et=S[qe],lt=g[qe],S.hasOwnProperty(qe)&&et!==lt&&(et!=null||lt!=null))switch(qe){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(a(137,h));break;default:Gr(s,h,qe,et,S,lt)}return;default:if(Mr(h)){for(var Qr in g)et=g[Qr],g.hasOwnProperty(Qr)&&et!==void 0&&!S.hasOwnProperty(Qr)&&Mp(s,h,Qr,void 0,S,et);for(pt in S)et=S[pt],lt=g[pt],!S.hasOwnProperty(pt)||et===lt||et===void 0&&lt===void 0||Mp(s,h,pt,et,S,lt);return}}for(var Ze in g)et=g[Ze],g.hasOwnProperty(Ze)&&et!=null&&!S.hasOwnProperty(Ze)&&Gr(s,h,Ze,null,S,et);for(bt in S)et=S[bt],lt=g[bt],!S.hasOwnProperty(bt)||et===lt||et==null&&lt==null||Gr(s,h,bt,et,S,lt)}var Pp=null,Ep=null;function Yh(s){return s.nodeType===9?s:s.ownerDocument}function pg(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kh(s,h){if(s===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&h==="foreignObject"?0:s}function Cp(s,h){return s==="textarea"||s==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var rf=null;function _v(){var s=window.event;return s&&s.type==="popstate"?s===rf?!1:(rf=s,!0):(rf=null,!1)}var ro=typeof setTimeout=="function"?setTimeout:void 0,Qh=typeof clearTimeout=="function"?clearTimeout:void 0,Jh=typeof Promise=="function"?Promise:void 0,ku=typeof queueMicrotask=="function"?queueMicrotask:typeof Jh<"u"?function(s){return Jh.resolve(null).then(s).catch(xv)}:ro;function xv(s){setTimeout(function(){throw s})}function Wl(s){return s==="head"}function mg(s,h){var g=h,S=0,j=0;do{var R=g.nextSibling;if(s.removeChild(g),R&&R.nodeType===8)if(g=R.data,g==="/$"){if(0<S&&8>S){g=S;var Y=s.ownerDocument;if(g&1&&nf(Y.documentElement),g&2&&nf(Y.body),g&4)for(g=Y.head,nf(g),Y=g.firstChild;Y;){var ce=Y.nextSibling,Me=Y.nodeName;Y[Mi]||Me==="SCRIPT"||Me==="STYLE"||Me==="LINK"&&Y.rel.toLowerCase()==="stylesheet"||g.removeChild(Y),Y=ce}}if(j===0){s.removeChild(R),ia(h);return}j--}else g==="$"||g==="$?"||g==="$!"?j++:S=g.charCodeAt(0)-48;else S=0;g=R}while(g);ia(h)}function jp(s){var h=s.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var g=h;switch(h=h.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":jp(g),Yn(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}s.removeChild(g)}}function Nx(s,h,g,S){for(;s.nodeType===1;){var j=g;if(s.nodeName.toLowerCase()!==h.toLowerCase()){if(!S&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(S){if(!s[Mi])switch(h){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(R=s.getAttribute("rel"),R==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(R!==j.rel||s.getAttribute("href")!==(j.href==null||j.href===""?null:j.href)||s.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin)||s.getAttribute("title")!==(j.title==null?null:j.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(R=s.getAttribute("src"),(R!==(j.src==null?null:j.src)||s.getAttribute("type")!==(j.type==null?null:j.type)||s.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin))&&R&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(h==="input"&&s.type==="hidden"){var R=j.name==null?null:""+j.name;if(j.type==="hidden"&&s.getAttribute("name")===R)return s}else return s;if(s=Jo(s.nextSibling),s===null)break}return null}function bv(s,h,g){if(h==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!g||(s=Jo(s.nextSibling),s===null))return null;return s}function el(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function wv(s,h){var g=s.ownerDocument;if(s.data!=="$?"||g.readyState==="complete")h();else{var S=function(){h(),g.removeEventListener("DOMContentLoaded",S)};g.addEventListener("DOMContentLoaded",S),s._reactRetry=S}}function Jo(s){for(;s!=null;s=s.nextSibling){var h=s.nodeType;if(h===1||h===3)break;if(h===8){if(h=s.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return s}var Op=null;function gg(s){s=s.previousSibling;for(var h=0;s;){if(s.nodeType===8){var g=s.data;if(g==="$"||g==="$!"||g==="$?"){if(h===0)return s;h--}else g==="/$"&&h++}s=s.previousSibling}return null}function Sv(s,h,g){switch(h=Yh(g),s){case"html":if(s=h.documentElement,!s)throw Error(a(452));return s;case"head":if(s=h.head,!s)throw Error(a(453));return s;case"body":if(s=h.body,!s)throw Error(a(454));return s;default:throw Error(a(451))}}function nf(s){for(var h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Yn(s)}var So=new Map,yg=new Set;function Iu(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var tl=Ve.d;Ve.d={f:kp,r:Ip,D:Rx,C:Lx,L:ed,m:Hi,X:Av,S:vg,M:Mv};function kp(){var s=tl.f(),h=dp();return s||h}function Ip(s){var h=mr(s);h!==null&&h.tag===5&&h.type==="form"?Lt(h):tl.r(s)}var Yl=typeof document>"u"?null:document;function Tv(s,h,g){var S=Yl;if(S&&typeof h=="string"&&h){var j=ha(h);j='link[rel="'+s+'"][href="'+j+'"]',typeof g=="string"&&(j+='[crossorigin="'+g+'"]'),yg.has(j)||(yg.add(j),s={rel:s,crossOrigin:g,href:h},S.querySelector(j)===null&&(h=S.createElement("link"),Zi(h,"link",s),dn(h),S.head.appendChild(h)))}}function Rx(s){tl.D(s),Tv("dns-prefetch",s,null)}function Lx(s,h){tl.C(s,h),Tv("preconnect",s,h)}function ed(s,h,g){tl.L(s,h,g);var S=Yl;if(S&&s&&h){var j='link[rel="preload"][as="'+ha(h)+'"]';h==="image"&&g&&g.imageSrcSet?(j+='[imagesrcset="'+ha(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(j+='[imagesizes="'+ha(g.imageSizes)+'"]')):j+='[href="'+ha(s)+'"]';var R=j;switch(h){case"style":R=td(s);break;case"script":R=Du(s)}So.has(R)||(s=z({rel:"preload",href:h==="image"&&g&&g.imageSrcSet?void 0:s,as:h},g),So.set(R,s),S.querySelector(j)!==null||h==="style"&&S.querySelector(rd(R))||h==="script"&&S.querySelector(zu(R))||(h=S.createElement("link"),Zi(h,"link",s),dn(h),S.head.appendChild(h)))}}function Hi(s,h){tl.m(s,h);var g=Yl;if(g&&s){var S=h&&typeof h.as=="string"?h.as:"script",j='link[rel="modulepreload"][as="'+ha(S)+'"][href="'+ha(s)+'"]',R=j;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=Du(s)}if(!So.has(R)&&(s=z({rel:"modulepreload",href:s},h),So.set(R,s),g.querySelector(j)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(zu(R)))return}S=g.createElement("link"),Zi(S,"link",s),dn(S),g.head.appendChild(S)}}}function vg(s,h,g){tl.S(s,h,g);var S=Yl;if(S&&s){var j=vi(S).hoistableStyles,R=td(s);h=h||"default";var Y=j.get(R);if(!Y){var ce={loading:0,preload:null};if(Y=S.querySelector(rd(R)))ce.loading=5;else{s=z({rel:"stylesheet",href:s,"data-precedence":h},g),(g=So.get(R))&&Nu(s,g);var Me=Y=S.createElement("link");dn(Me),Zi(Me,"link",s),Me._p=new Promise(function(qe,pt){Me.onload=qe,Me.onerror=pt}),Me.addEventListener("load",function(){ce.loading|=1}),Me.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,af(Y,h,S)}Y={type:"stylesheet",instance:Y,count:1,state:ce},j.set(R,Y)}}}function Av(s,h){tl.X(s,h);var g=Yl;if(g&&s){var S=vi(g).hoistableScripts,j=Du(s),R=S.get(j);R||(R=g.querySelector(zu(j)),R||(s=z({src:s,async:!0},h),(h=So.get(j))&&of(s,h),R=g.createElement("script"),dn(R),Zi(R,"link",s),g.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},S.set(j,R))}}function Mv(s,h){tl.M(s,h);var g=Yl;if(g&&s){var S=vi(g).hoistableScripts,j=Du(s),R=S.get(j);R||(R=g.querySelector(zu(j)),R||(s=z({src:s,async:!0,type:"module"},h),(h=So.get(j))&&of(s,h),R=g.createElement("script"),dn(R),Zi(R,"link",s),g.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},S.set(j,R))}}function Dp(s,h,g,S){var j=(j=Nt.current)?Iu(j):null;if(!j)throw Error(a(446));switch(s){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(h=td(g.href),g=vi(j).hoistableStyles,S=g.get(h),S||(S={type:"style",instance:null,count:0,state:null},g.set(h,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){s=td(g.href);var R=vi(j).hoistableStyles,Y=R.get(s);if(Y||(j=j.ownerDocument||j,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(s,Y),(R=j.querySelector(rd(s)))&&!R._p&&(Y.instance=R,Y.state.loading=5),So.has(s)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},So.set(s,g),R||Bx(j,s,g,Y.state))),h&&S===null)throw Error(a(528,""));return Y}if(h&&S!==null)throw Error(a(529,""));return null;case"script":return h=g.async,g=g.src,typeof g=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Du(g),g=vi(j).hoistableScripts,S=g.get(h),S||(S={type:"script",instance:null,count:0,state:null},g.set(h,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,s))}}function td(s){return'href="'+ha(s)+'"'}function rd(s){return'link[rel="stylesheet"]['+s+"]"}function _g(s){return z({},s,{"data-precedence":s.precedence,precedence:null})}function Bx(s,h,g,S){s.querySelector('link[rel="preload"][as="style"]['+h+"]")?S.loading=1:(h=s.createElement("link"),S.preload=h,h.addEventListener("load",function(){return S.loading|=1}),h.addEventListener("error",function(){return S.loading|=2}),Zi(h,"link",g),dn(h),s.head.appendChild(h))}function Du(s){return'[src="'+ha(s)+'"]'}function zu(s){return"script[async]"+s}function zp(s,h,g){if(h.count++,h.instance===null)switch(h.type){case"style":var S=s.querySelector('style[data-href~="'+ha(g.href)+'"]');if(S)return h.instance=S,dn(S),S;var j=z({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return S=(s.ownerDocument||s).createElement("style"),dn(S),Zi(S,"style",j),af(S,g.precedence,s),h.instance=S;case"stylesheet":j=td(g.href);var R=s.querySelector(rd(j));if(R)return h.state.loading|=4,h.instance=R,dn(R),R;S=_g(g),(j=So.get(j))&&Nu(S,j),R=(s.ownerDocument||s).createElement("link"),dn(R);var Y=R;return Y._p=new Promise(function(ce,Me){Y.onload=ce,Y.onerror=Me}),Zi(R,"link",S),h.state.loading|=4,af(R,g.precedence,s),h.instance=R;case"script":return R=Du(g.src),(j=s.querySelector(zu(R)))?(h.instance=j,dn(j),j):(S=g,(j=So.get(R))&&(S=z({},g),of(S,j)),s=s.ownerDocument||s,j=s.createElement("script"),dn(j),Zi(j,"link",S),s.head.appendChild(j),h.instance=j);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(S=h.instance,h.state.loading|=4,af(S,g.precedence,s));return h.instance}function af(s,h,g){for(var S=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),j=S.length?S[S.length-1]:null,R=j,Y=0;Y<S.length;Y++){var ce=S[Y];if(ce.dataset.precedence===h)R=ce;else if(R!==j)break}R?R.parentNode.insertBefore(s,R.nextSibling):(h=g.nodeType===9?g.head:g,h.insertBefore(s,h.firstChild))}function Nu(s,h){s.crossOrigin==null&&(s.crossOrigin=h.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=h.referrerPolicy),s.title==null&&(s.title=h.title)}function of(s,h){s.crossOrigin==null&&(s.crossOrigin=h.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=h.referrerPolicy),s.integrity==null&&(s.integrity=h.integrity)}var sf=null;function Np(s,h,g){if(sf===null){var S=new Map,j=sf=new Map;j.set(g,S)}else j=sf,S=j.get(g),S||(S=new Map,j.set(g,S));if(S.has(s))return S;for(S.set(s,null),g=g.getElementsByTagName(s),j=0;j<g.length;j++){var R=g[j];if(!(R[Mi]||R[Zr]||s==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=R.getAttribute(h)||"";Y=s+Y;var ce=S.get(Y);ce?ce.push(R):S.set(Y,[R])}}return S}function lf(s,h,g){s=s.ownerDocument||s,s.head.insertBefore(g,h==="title"?s.querySelector("head > title"):null)}function cf(s,h,g){if(g===1||h.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return s=h.disabled,typeof h.precedence=="string"&&s==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function Rp(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Ru=null;function xg(){}function Fx(s,h,g){if(Ru===null)throw Error(a(475));var S=Ru;if(h.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var j=td(g.href),R=s.querySelector(rd(j));if(R){s=R._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(S.count++,S=n.bind(S),s.then(S,S)),h.state.loading|=4,h.instance=R,dn(R);return}R=s.ownerDocument||s,g=_g(g),(j=So.get(j))&&Nu(g,j),R=R.createElement("link"),dn(R);var Y=R;Y._p=new Promise(function(ce,Me){Y.onload=ce,Y.onerror=Me}),Zi(R,"link",g),h.instance=R}S.stylesheets===null&&(S.stylesheets=new Map),S.stylesheets.set(h,s),(s=h.state.preload)&&(h.state.loading&3)===0&&(S.count++,h=n.bind(S),s.addEventListener("load",h),s.addEventListener("error",h))}}function c(){if(Ru===null)throw Error(a(475));var s=Ru;return s.stylesheets&&s.count===0&&d(s,s.stylesheets),0<s.count?function(h){var g=setTimeout(function(){if(s.stylesheets&&d(s,s.stylesheets),s.unsuspend){var S=s.unsuspend;s.unsuspend=null,S()}},6e4);return s.unsuspend=h,function(){s.unsuspend=null,clearTimeout(g)}}:null}function n(){if(this.count--,this.count===0){if(this.stylesheets)d(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var o=null;function d(s,h){s.stylesheets=null,s.unsuspend!==null&&(s.count++,o=new Map,h.forEach(y,s),o=null,n.call(s))}function y(s,h){if(!(h.state.loading&4)){var g=o.get(s);if(g)var S=g.get(null);else{g=new Map,o.set(s,g);for(var j=s.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<j.length;R++){var Y=j[R];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(g.set(Y.dataset.precedence,Y),S=Y)}S&&g.set(null,S)}j=h.instance,Y=j.getAttribute("data-precedence"),R=g.get(Y)||S,R===S&&g.set(null,j),g.set(Y,j),this.count++,S=n.bind(this),j.addEventListener("load",S),j.addEventListener("error",S),R?R.parentNode.insertBefore(j,R.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(j,s.firstChild)),h.state.loading|=4}}var b={$$typeof:ne,Provider:null,Consumer:null,_currentValue:Ge,_currentValue2:Ge,_threadCount:0};function T(s,h,g,S,j,R,Y,ce){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.hiddenUpdates=Bt(null),this.identifierPrefix=S,this.onUncaughtError=j,this.onCaughtError=R,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function E(s,h,g,S,j,R,Y,ce,Me,qe,pt,bt){return s=new T(s,h,g,Y,ce,Me,qe,bt),h=1,R===!0&&(h|=24),R=Bi(3,null,null,h),s.current=R,R.stateNode=s,h=Sh(),h.refCount++,s.pooledCache=h,h.refCount++,R.memoizedState={element:S,isDehydrated:g,cache:h},wr(R),s}function k(s){return s?(s=Ro,s):Ro}function N(s,h,g,S,j,R){j=k(j),S.context===null?S.context=j:S.pendingContext=j,S=ds(h),S.payload={element:g},R=R===void 0?null:R,R!==null&&(S.callback=R),g=vo(s,S,h),g!==null&&(to(g,s,h),zl(g,s,h))}function L(s,h){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var g=s.retryLane;s.retryLane=g!==0&&g<h?g:h}}function V(s,h){L(s,h),(s=s.alternate)&&L(s,h)}function W(s){if(s.tag===13){var h=po(s,67108864);h!==null&&to(h,s,67108864),V(s,67108864)}}var K=!0;function ee(s,h,g,S){var j=Pe.T;Pe.T=null;var R=Ve.p;try{Ve.p=2,de(s,h,g,S)}finally{Ve.p=R,Pe.T=j}}function le(s,h,g,S){var j=Pe.T;Pe.T=null;var R=Ve.p;try{Ve.p=8,de(s,h,g,S)}finally{Ve.p=R,Pe.T=j}}function de(s,h,g,S){if(K){var j=ye(S);if(j===null)tf(s,h,S,Be,g),It(s,S);else if(tr(j,s,h,g,S))S.stopPropagation();else if(It(s,S),h&4&&-1<kt.indexOf(s)){for(;j!==null;){var R=mr(j);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var Y=ze(R.pendingLanes);if(Y!==0){var ce=R;for(ce.pendingLanes|=2,ce.entangledLanes|=2;Y;){var Me=1<<31-ke(Y);ce.entanglements[1]|=Me,Y&=~Me}Qo(R),(mn&6)===0&&(Yd=Kr()+500,Cu(0))}}break;case 13:ce=po(R,2),ce!==null&&to(ce,R,2),dp(),V(R,2)}if(R=ye(S),R===null&&tf(s,h,S,Be,g),R===j)break;j=R}j!==null&&S.stopPropagation()}else tf(s,h,S,null,g)}}function ye(s){return s=pl(s),Ae(s)}var Be=null;function Ae(s){if(Be=null,s=Ct(s),s!==null){var h=v(s);if(h===null)s=null;else{var g=h.tag;if(g===13){if(s=m(h),s!==null)return s;s=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;s=null}else h!==s&&(s=null)}}return Be=s,null}function je(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ki()){case Wn:return 2;case Ba:return 8;case Ii:case Di:return 32;case Yi:return 268435456;default:return 32}default:return 32}}var Ye=!1,it=null,gt=null,Et=null,Mt=new Map,jt=new Map,$t=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function It(s,h){switch(s){case"focusin":case"focusout":it=null;break;case"dragenter":case"dragleave":gt=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":Mt.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(h.pointerId)}}function dt(s,h,g,S,j,R){return s===null||s.nativeEvent!==R?(s={blockedOn:h,domEventName:g,eventSystemFlags:S,nativeEvent:R,targetContainers:[j]},h!==null&&(h=mr(h),h!==null&&W(h)),s):(s.eventSystemFlags|=S,h=s.targetContainers,j!==null&&h.indexOf(j)===-1&&h.push(j),s)}function tr(s,h,g,S,j){switch(h){case"focusin":return it=dt(it,s,h,g,S,j),!0;case"dragenter":return gt=dt(gt,s,h,g,S,j),!0;case"mouseover":return Et=dt(Et,s,h,g,S,j),!0;case"pointerover":var R=j.pointerId;return Mt.set(R,dt(Mt.get(R)||null,s,h,g,S,j)),!0;case"gotpointercapture":return R=j.pointerId,jt.set(R,dt(jt.get(R)||null,s,h,g,S,j)),!0}return!1}function sr(s){var h=Ct(s.target);if(h!==null){var g=v(h);if(g!==null){if(h=g.tag,h===13){if(h=m(g),h!==null){s.blockedOn=h,ui(s.priority,function(){if(g.tag===13){var S=Ta();S=Ft(S);var j=po(g,S);j!==null&&to(j,g,S),V(g,S)}});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){s.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Gt(s){if(s.blockedOn!==null)return!1;for(var h=s.targetContainers;0<h.length;){var g=ye(s.nativeEvent);if(g===null){g=s.nativeEvent;var S=new g.constructor(g.type,g);xr=S,g.target.dispatchEvent(S),xr=null}else return h=mr(g),h!==null&&W(h),s.blockedOn=g,!1;h.shift()}return!0}function Ut(s,h,g){Gt(s)&&g.delete(h)}function Cr(){Ye=!1,it!==null&&Gt(it)&&(it=null),gt!==null&&Gt(gt)&&(gt=null),Et!==null&&Gt(Et)&&(Et=null),Mt.forEach(Ut),jt.forEach(Ut)}function xn(s,h){s.blockedOn===h&&(s.blockedOn=null,Ye||(Ye=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Cr)))}var Hn=null;function ji(s){Hn!==s&&(Hn=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Hn===s&&(Hn=null);for(var h=0;h<s.length;h+=3){var g=s[h],S=s[h+1],j=s[h+2];if(typeof S!="function"){if(Ae(S||g)===null)continue;break}var R=mr(g);R!==null&&(s.splice(h,3),h-=3,At(R,{pending:!0,data:j,method:g.method,action:S},S,j))}}))}function ia(s){function h(Me){return xn(Me,s)}it!==null&&xn(it,s),gt!==null&&xn(gt,s),Et!==null&&xn(Et,s),Mt.forEach(h),jt.forEach(h);for(var g=0;g<$t.length;g++){var S=$t[g];S.blockedOn===s&&(S.blockedOn=null)}for(;0<$t.length&&(g=$t[0],g.blockedOn===null);)sr(g),g.blockedOn===null&&$t.shift();if(g=(s.ownerDocument||s).$$reactFormReplay,g!=null)for(S=0;S<g.length;S+=3){var j=g[S],R=g[S+1],Y=j[Ar]||null;if(typeof R=="function")Y||ji(g);else if(Y){var ce=null;if(R&&R.hasAttribute("formAction")){if(j=R,Y=R[Ar]||null)ce=Y.formAction;else if(Ae(j)!==null)continue}else ce=Y.action;typeof ce=="function"?g[S+1]=ce:(g.splice(S,3),S-=3),ji(g)}}}function aa(s){this._internalRoot=s}oi.prototype.render=aa.prototype.render=function(s){var h=this._internalRoot;if(h===null)throw Error(a(409));var g=h.current,S=Ta();N(g,S,s,h,null,null)},oi.prototype.unmount=aa.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var h=s.containerInfo;N(s.current,2,null,s,null,null),dp(),h[Mn]=null}};function oi(s){this._internalRoot=s}oi.prototype.unstable_scheduleHydration=function(s){if(s){var h=ei();s={blockedOn:null,target:s,priority:h};for(var g=0;g<$t.length&&h!==0&&h<$t[g].priority;g++);$t.splice(g,0,s),g===0&&sr(s)}};var An=t.version;if(An!=="19.1.0")throw Error(a(527,An,"19.1.0"));Ve.findDOMNode=function(s){var h=s._reactInternals;if(h===void 0)throw typeof s.render=="function"?Error(a(188)):(s=Object.keys(s).join(","),Error(a(268,s)));return s=P(h),s=s!==null?C(s):null,s=s===null?null:s.stateNode,s};var Ti={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Pe,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var si=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!si.isDisabled&&si.supportsFiber)try{zi=si.inject(Ti),Jn=si}catch{}}return wg.createRoot=function(s,h){if(!f(s))throw Error(a(299));var g=!1,S="",j=zh,R=Ic,Y=Dm,ce=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(j=h.onUncaughtError),h.onCaughtError!==void 0&&(R=h.onCaughtError),h.onRecoverableError!==void 0&&(Y=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(ce=h.unstable_transitionCallbacks)),h=E(s,1,!1,null,null,g,S,j,R,Y,ce,null),s[Mn]=h.current,Ap(s),new aa(h)},wg.hydrateRoot=function(s,h,g){if(!f(s))throw Error(a(299));var S=!1,j="",R=zh,Y=Ic,ce=Dm,Me=null,qe=null;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(j=g.identifierPrefix),g.onUncaughtError!==void 0&&(R=g.onUncaughtError),g.onCaughtError!==void 0&&(Y=g.onCaughtError),g.onRecoverableError!==void 0&&(ce=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(Me=g.unstable_transitionCallbacks),g.formState!==void 0&&(qe=g.formState)),h=E(s,1,!0,h,g??null,S,j,R,Y,ce,Me,qe),h.context=k(null),g=h.current,S=Ta(),S=Ft(S),j=ds(S),j.callback=null,vo(g,j,S),g=S,h.current.lanes=g,Zt(h,g),Qo(h),s[Mn]=h.current,Ap(s),new oi(h)},wg.version="19.1.0",wg}var FT;function Uz(){if(FT)return Vx.exports;FT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Vx.exports=qz(),Vx.exports}var Vz=Uz();function $T(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Gz(...e){return t=>{let i=!1;const a=e.map(f=>{const v=$T(f,t);return!i&&typeof v=="function"&&(i=!0),v});if(i)return()=>{for(let f=0;f<a.length;f++){const v=a[f];typeof v=="function"?v():$T(e[f],null)}}}}function Zz(...e){return ft.useCallback(Gz(...e),e)}function HO(e){const t=Hz(e),i=ft.forwardRef((a,f)=>{const{children:v,...m}=a,l=ft.Children.toArray(v),P=l.find(Wz);if(P){const C=P.props.children,z=l.map(O=>O===P?ft.Children.count(C)>1?ft.Children.only(null):ft.isValidElement(C)?C.props.children:null:O);return A.jsx(t,{...m,ref:f,children:ft.isValidElement(C)?ft.cloneElement(C,void 0,z):null})}return A.jsx(t,{...m,ref:f,children:v})});return i.displayName=`${e}.Slot`,i}var XO=HO("Slot");function Hz(e){const t=ft.forwardRef((i,a)=>{const{children:f,...v}=i,m=ft.isValidElement(f)?Kz(f):void 0,l=Zz(m,a);if(ft.isValidElement(f)){const P=Yz(v,f.props);return f.type!==ft.Fragment&&(P.ref=l),ft.cloneElement(f,P)}return ft.Children.count(f)>1?ft.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Xz=Symbol("radix.slottable");function Wz(e){return ft.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Xz}function Yz(e,t){const i={...t};for(const a in t){const f=e[a],v=t[a];/^on[A-Z]/.test(a)?f&&v?i[a]=(...l)=>{const P=v(...l);return f(...l),P}:f&&(i[a]=f):a==="style"?i[a]={...f,...v}:a==="className"&&(i[a]=[f,v].filter(Boolean).join(" "))}return{...e,...i}}function Kz(e){var a,f;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=(f=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:f.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}function WO(e){var t,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var f=e.length;for(t=0;t<f;t++)e[t]&&(i=WO(e[t]))&&(a&&(a+=" "),a+=i)}else for(i in e)e[i]&&(a&&(a+=" "),a+=i);return a}function sn(){for(var e,t,i=0,a="",f=arguments.length;i<f;i++)(e=arguments[i])&&(t=WO(e))&&(a&&(a+=" "),a+=t);return a}const qT=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,UT=sn,YO=(e,t)=>i=>{var a;if((t==null?void 0:t.variants)==null)return UT(e,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:f,defaultVariants:v}=t,m=Object.keys(f).map(C=>{const z=i==null?void 0:i[C],O=v==null?void 0:v[C];if(z===null)return null;const B=qT(z)||qT(O);return f[C][B]}),l=i&&Object.entries(i).reduce((C,z)=>{let[O,B]=z;return B===void 0||(C[O]=B),C},{}),P=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((C,z)=>{let{class:O,className:B,...F}=z;return Object.entries(F).every(X=>{let[Z,U]=X;return Array.isArray(U)?U.includes({...v,...l}[Z]):{...v,...l}[Z]===U})?[...C,O,B]:C},[]);return UT(e,m,P,i==null?void 0:i.class,i==null?void 0:i.className)},TS="-",Qz=e=>{const t=eN(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:m=>{const l=m.split(TS);return l[0]===""&&l.length!==1&&l.shift(),KO(l,t)||Jz(m)},getConflictingClassGroupIds:(m,l)=>{const P=i[m]||[];return l&&a[m]?[...P,...a[m]]:P}}},KO=(e,t)=>{var m;if(e.length===0)return t.classGroupId;const i=e[0],a=t.nextPart.get(i),f=a?KO(e.slice(1),a):void 0;if(f)return f;if(t.validators.length===0)return;const v=e.join(TS);return(m=t.validators.find(({validator:l})=>l(v)))==null?void 0:m.classGroupId},VT=/^\[(.+)\]$/,Jz=e=>{if(VT.test(e)){const t=VT.exec(e)[1],i=t==null?void 0:t.substring(0,t.indexOf(":"));if(i)return"arbitrary.."+i}},eN=e=>{const{theme:t,classGroups:i}=e,a={nextPart:new Map,validators:[]};for(const f in i)Yw(i[f],a,f,t);return a},Yw=(e,t,i,a)=>{e.forEach(f=>{if(typeof f=="string"){const v=f===""?t:GT(t,f);v.classGroupId=i;return}if(typeof f=="function"){if(tN(f)){Yw(f(a),t,i,a);return}t.validators.push({validator:f,classGroupId:i});return}Object.entries(f).forEach(([v,m])=>{Yw(m,GT(t,v),i,a)})})},GT=(e,t)=>{let i=e;return t.split(TS).forEach(a=>{i.nextPart.has(a)||i.nextPart.set(a,{nextPart:new Map,validators:[]}),i=i.nextPart.get(a)}),i},tN=e=>e.isThemeGetter,rN=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,i=new Map,a=new Map;const f=(v,m)=>{i.set(v,m),t++,t>e&&(t=0,a=i,i=new Map)};return{get(v){let m=i.get(v);if(m!==void 0)return m;if((m=a.get(v))!==void 0)return f(v,m),m},set(v,m){i.has(v)?i.set(v,m):f(v,m)}}},Kw="!",Qw=":",nN=Qw.length,iN=e=>{const{prefix:t,experimentalParseClassName:i}=e;let a=f=>{const v=[];let m=0,l=0,P=0,C;for(let X=0;X<f.length;X++){let Z=f[X];if(m===0&&l===0){if(Z===Qw){v.push(f.slice(P,X)),P=X+nN;continue}if(Z==="/"){C=X;continue}}Z==="["?m++:Z==="]"?m--:Z==="("?l++:Z===")"&&l--}const z=v.length===0?f:f.substring(P),O=aN(z),B=O!==z,F=C&&C>P?C-P:void 0;return{modifiers:v,hasImportantModifier:B,baseClassName:O,maybePostfixModifierPosition:F}};if(t){const f=t+Qw,v=a;a=m=>m.startsWith(f)?v(m.substring(f.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:m,maybePostfixModifierPosition:void 0}}if(i){const f=a;a=v=>i({className:v,parseClassName:f})}return a},aN=e=>e.endsWith(Kw)?e.substring(0,e.length-1):e.startsWith(Kw)?e.substring(1):e,oN=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const f=[];let v=[];return a.forEach(m=>{m[0]==="["||t[m]?(f.push(...v.sort(),m),v=[]):v.push(m)}),f.push(...v.sort()),f}},sN=e=>({cache:rN(e.cacheSize),parseClassName:iN(e),sortModifiers:oN(e),...Qz(e)}),lN=/\s+/,cN=(e,t)=>{const{parseClassName:i,getClassGroupId:a,getConflictingClassGroupIds:f,sortModifiers:v}=t,m=[],l=e.trim().split(lN);let P="";for(let C=l.length-1;C>=0;C-=1){const z=l[C],{isExternal:O,modifiers:B,hasImportantModifier:F,baseClassName:X,maybePostfixModifierPosition:Z}=i(z);if(O){P=z+(P.length>0?" "+P:P);continue}let U=!!Z,re=a(U?X.substring(0,Z):X);if(!re){if(!U){P=z+(P.length>0?" "+P:P);continue}if(re=a(X),!re){P=z+(P.length>0?" "+P:P);continue}U=!1}const se=v(B).join(":"),ne=F?se+Kw:se,ue=ne+re;if(m.includes(ue))continue;m.push(ue);const J=f(re,U);for(let ae=0;ae<J.length;++ae){const he=J[ae];m.push(ne+he)}P=z+(P.length>0?" "+P:P)}return P};function uN(){let e=0,t,i,a="";for(;e<arguments.length;)(t=arguments[e++])&&(i=QO(t))&&(a&&(a+=" "),a+=i);return a}const QO=e=>{if(typeof e=="string")return e;let t,i="";for(let a=0;a<e.length;a++)e[a]&&(t=QO(e[a]))&&(i&&(i+=" "),i+=t);return i};function hN(e,...t){let i,a,f,v=m;function m(P){const C=t.reduce((z,O)=>O(z),e());return i=sN(C),a=i.cache.get,f=i.cache.set,v=l,l(P)}function l(P){const C=a(P);if(C)return C;const z=cN(P,i);return f(P,z),z}return function(){return v(uN.apply(null,arguments))}}const oa=e=>{const t=i=>i[e]||[];return t.isThemeGetter=!0,t},JO=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ek=/^\((?:(\w[\w-]*):)?(.+)\)$/i,dN=/^\d+\/\d+$/,fN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mN=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,gN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yN=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lp=e=>dN.test(e),Rr=e=>!!e&&!Number.isNaN(Number(e)),nd=e=>!!e&&Number.isInteger(Number(e)),Xx=e=>e.endsWith("%")&&Rr(e.slice(0,-1)),Lu=e=>fN.test(e),vN=()=>!0,_N=e=>pN.test(e)&&!mN.test(e),tk=()=>!1,xN=e=>gN.test(e),bN=e=>yN.test(e),wN=e=>!Yt(e)&&!Kt(e),SN=e=>_m(e,ik,tk),Yt=e=>JO.test(e),df=e=>_m(e,ak,_N),Wx=e=>_m(e,EN,Rr),ZT=e=>_m(e,rk,tk),TN=e=>_m(e,nk,bN),Cv=e=>_m(e,ok,xN),Kt=e=>ek.test(e),Sg=e=>xm(e,ak),AN=e=>xm(e,CN),HT=e=>xm(e,rk),MN=e=>xm(e,ik),PN=e=>xm(e,nk),jv=e=>xm(e,ok,!0),_m=(e,t,i)=>{const a=JO.exec(e);return a?a[1]?t(a[1]):i(a[2]):!1},xm=(e,t,i=!1)=>{const a=ek.exec(e);return a?a[1]?t(a[1]):i:!1},rk=e=>e==="position"||e==="percentage",nk=e=>e==="image"||e==="url",ik=e=>e==="length"||e==="size"||e==="bg-size",ak=e=>e==="length",EN=e=>e==="number",CN=e=>e==="family-name",ok=e=>e==="shadow",jN=()=>{const e=oa("color"),t=oa("font"),i=oa("text"),a=oa("font-weight"),f=oa("tracking"),v=oa("leading"),m=oa("breakpoint"),l=oa("container"),P=oa("spacing"),C=oa("radius"),z=oa("shadow"),O=oa("inset-shadow"),B=oa("text-shadow"),F=oa("drop-shadow"),X=oa("blur"),Z=oa("perspective"),U=oa("aspect"),re=oa("ease"),se=oa("animate"),ne=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ue=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],J=()=>[...ue(),Kt,Yt],ae=()=>["auto","hidden","clip","visible","scroll"],he=()=>["auto","contain","none"],ve=()=>[Kt,Yt,P],Ie=()=>[Lp,"full","auto",...ve()],at=()=>[nd,"none","subgrid",Kt,Yt],De=()=>["auto",{span:["full",nd,Kt,Yt]},nd,Kt,Yt],Fe=()=>[nd,"auto",Kt,Yt],tt=()=>["auto","min","max","fr",Kt,Yt],ut=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],rt=()=>["start","end","center","stretch","center-safe","end-safe"],Pe=()=>["auto",...ve()],Ve=()=>[Lp,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...ve()],Ge=()=>[e,Kt,Yt],ht=()=>[...ue(),HT,ZT,{position:[Kt,Yt]}],xe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Xe=()=>["auto","cover","contain",MN,SN,{size:[Kt,Yt]}],ot=()=>[Xx,Sg,df],st=()=>["","none","full",C,Kt,Yt],Pt=()=>["",Rr,Sg,df],Vt=()=>["solid","dashed","dotted","double"],Nt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],yr=()=>[Rr,Xx,HT,ZT],ar=()=>["","none",X,Kt,Yt],Ot=()=>["none",Rr,Kt,Yt],er=()=>["none",Rr,Kt,Yt],or=()=>[Rr,Kt,Yt],_t=()=>[Lp,"full",...ve()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Lu],breakpoint:[Lu],color:[vN],container:[Lu],"drop-shadow":[Lu],ease:["in","out","in-out"],font:[wN],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Lu],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Lu],shadow:[Lu],spacing:["px",Rr],text:[Lu],"text-shadow":[Lu],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Lp,Yt,Kt,U]}],container:["container"],columns:[{columns:[Rr,Yt,Kt,l]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:J()}],overflow:[{overflow:ae()}],"overflow-x":[{"overflow-x":ae()}],"overflow-y":[{"overflow-y":ae()}],overscroll:[{overscroll:he()}],"overscroll-x":[{"overscroll-x":he()}],"overscroll-y":[{"overscroll-y":he()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Ie()}],"inset-x":[{"inset-x":Ie()}],"inset-y":[{"inset-y":Ie()}],start:[{start:Ie()}],end:[{end:Ie()}],top:[{top:Ie()}],right:[{right:Ie()}],bottom:[{bottom:Ie()}],left:[{left:Ie()}],visibility:["visible","invisible","collapse"],z:[{z:[nd,"auto",Kt,Yt]}],basis:[{basis:[Lp,"full","auto",l,...ve()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Rr,Lp,"auto","initial","none",Yt]}],grow:[{grow:["",Rr,Kt,Yt]}],shrink:[{shrink:["",Rr,Kt,Yt]}],order:[{order:[nd,"first","last","none",Kt,Yt]}],"grid-cols":[{"grid-cols":at()}],"col-start-end":[{col:De()}],"col-start":[{"col-start":Fe()}],"col-end":[{"col-end":Fe()}],"grid-rows":[{"grid-rows":at()}],"row-start-end":[{row:De()}],"row-start":[{"row-start":Fe()}],"row-end":[{"row-end":Fe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":tt()}],"auto-rows":[{"auto-rows":tt()}],gap:[{gap:ve()}],"gap-x":[{"gap-x":ve()}],"gap-y":[{"gap-y":ve()}],"justify-content":[{justify:[...ut(),"normal"]}],"justify-items":[{"justify-items":[...rt(),"normal"]}],"justify-self":[{"justify-self":["auto",...rt()]}],"align-content":[{content:["normal",...ut()]}],"align-items":[{items:[...rt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...rt(),{baseline:["","last"]}]}],"place-content":[{"place-content":ut()}],"place-items":[{"place-items":[...rt(),"baseline"]}],"place-self":[{"place-self":["auto",...rt()]}],p:[{p:ve()}],px:[{px:ve()}],py:[{py:ve()}],ps:[{ps:ve()}],pe:[{pe:ve()}],pt:[{pt:ve()}],pr:[{pr:ve()}],pb:[{pb:ve()}],pl:[{pl:ve()}],m:[{m:Pe()}],mx:[{mx:Pe()}],my:[{my:Pe()}],ms:[{ms:Pe()}],me:[{me:Pe()}],mt:[{mt:Pe()}],mr:[{mr:Pe()}],mb:[{mb:Pe()}],ml:[{ml:Pe()}],"space-x":[{"space-x":ve()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":ve()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ve()}],w:[{w:[l,"screen",...Ve()]}],"min-w":[{"min-w":[l,"screen","none",...Ve()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[m]},...Ve()]}],h:[{h:["screen","lh",...Ve()]}],"min-h":[{"min-h":["screen","lh","none",...Ve()]}],"max-h":[{"max-h":["screen","lh",...Ve()]}],"font-size":[{text:["base",i,Sg,df]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Kt,Wx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Xx,Yt]}],"font-family":[{font:[AN,Yt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[f,Kt,Yt]}],"line-clamp":[{"line-clamp":[Rr,"none",Kt,Wx]}],leading:[{leading:[v,...ve()]}],"list-image":[{"list-image":["none",Kt,Yt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Kt,Yt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Ge()}],"text-color":[{text:Ge()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Vt(),"wavy"]}],"text-decoration-thickness":[{decoration:[Rr,"from-font","auto",Kt,df]}],"text-decoration-color":[{decoration:Ge()}],"underline-offset":[{"underline-offset":[Rr,"auto",Kt,Yt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ve()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Kt,Yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Kt,Yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ht()}],"bg-repeat":[{bg:xe()}],"bg-size":[{bg:Xe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},nd,Kt,Yt],radial:["",Kt,Yt],conic:[nd,Kt,Yt]},PN,TN]}],"bg-color":[{bg:Ge()}],"gradient-from-pos":[{from:ot()}],"gradient-via-pos":[{via:ot()}],"gradient-to-pos":[{to:ot()}],"gradient-from":[{from:Ge()}],"gradient-via":[{via:Ge()}],"gradient-to":[{to:Ge()}],rounded:[{rounded:st()}],"rounded-s":[{"rounded-s":st()}],"rounded-e":[{"rounded-e":st()}],"rounded-t":[{"rounded-t":st()}],"rounded-r":[{"rounded-r":st()}],"rounded-b":[{"rounded-b":st()}],"rounded-l":[{"rounded-l":st()}],"rounded-ss":[{"rounded-ss":st()}],"rounded-se":[{"rounded-se":st()}],"rounded-ee":[{"rounded-ee":st()}],"rounded-es":[{"rounded-es":st()}],"rounded-tl":[{"rounded-tl":st()}],"rounded-tr":[{"rounded-tr":st()}],"rounded-br":[{"rounded-br":st()}],"rounded-bl":[{"rounded-bl":st()}],"border-w":[{border:Pt()}],"border-w-x":[{"border-x":Pt()}],"border-w-y":[{"border-y":Pt()}],"border-w-s":[{"border-s":Pt()}],"border-w-e":[{"border-e":Pt()}],"border-w-t":[{"border-t":Pt()}],"border-w-r":[{"border-r":Pt()}],"border-w-b":[{"border-b":Pt()}],"border-w-l":[{"border-l":Pt()}],"divide-x":[{"divide-x":Pt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Pt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Vt(),"hidden","none"]}],"divide-style":[{divide:[...Vt(),"hidden","none"]}],"border-color":[{border:Ge()}],"border-color-x":[{"border-x":Ge()}],"border-color-y":[{"border-y":Ge()}],"border-color-s":[{"border-s":Ge()}],"border-color-e":[{"border-e":Ge()}],"border-color-t":[{"border-t":Ge()}],"border-color-r":[{"border-r":Ge()}],"border-color-b":[{"border-b":Ge()}],"border-color-l":[{"border-l":Ge()}],"divide-color":[{divide:Ge()}],"outline-style":[{outline:[...Vt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Rr,Kt,Yt]}],"outline-w":[{outline:["",Rr,Sg,df]}],"outline-color":[{outline:Ge()}],shadow:[{shadow:["","none",z,jv,Cv]}],"shadow-color":[{shadow:Ge()}],"inset-shadow":[{"inset-shadow":["none",O,jv,Cv]}],"inset-shadow-color":[{"inset-shadow":Ge()}],"ring-w":[{ring:Pt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Ge()}],"ring-offset-w":[{"ring-offset":[Rr,df]}],"ring-offset-color":[{"ring-offset":Ge()}],"inset-ring-w":[{"inset-ring":Pt()}],"inset-ring-color":[{"inset-ring":Ge()}],"text-shadow":[{"text-shadow":["none",B,jv,Cv]}],"text-shadow-color":[{"text-shadow":Ge()}],opacity:[{opacity:[Rr,Kt,Yt]}],"mix-blend":[{"mix-blend":[...Nt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Nt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Rr]}],"mask-image-linear-from-pos":[{"mask-linear-from":yr()}],"mask-image-linear-to-pos":[{"mask-linear-to":yr()}],"mask-image-linear-from-color":[{"mask-linear-from":Ge()}],"mask-image-linear-to-color":[{"mask-linear-to":Ge()}],"mask-image-t-from-pos":[{"mask-t-from":yr()}],"mask-image-t-to-pos":[{"mask-t-to":yr()}],"mask-image-t-from-color":[{"mask-t-from":Ge()}],"mask-image-t-to-color":[{"mask-t-to":Ge()}],"mask-image-r-from-pos":[{"mask-r-from":yr()}],"mask-image-r-to-pos":[{"mask-r-to":yr()}],"mask-image-r-from-color":[{"mask-r-from":Ge()}],"mask-image-r-to-color":[{"mask-r-to":Ge()}],"mask-image-b-from-pos":[{"mask-b-from":yr()}],"mask-image-b-to-pos":[{"mask-b-to":yr()}],"mask-image-b-from-color":[{"mask-b-from":Ge()}],"mask-image-b-to-color":[{"mask-b-to":Ge()}],"mask-image-l-from-pos":[{"mask-l-from":yr()}],"mask-image-l-to-pos":[{"mask-l-to":yr()}],"mask-image-l-from-color":[{"mask-l-from":Ge()}],"mask-image-l-to-color":[{"mask-l-to":Ge()}],"mask-image-x-from-pos":[{"mask-x-from":yr()}],"mask-image-x-to-pos":[{"mask-x-to":yr()}],"mask-image-x-from-color":[{"mask-x-from":Ge()}],"mask-image-x-to-color":[{"mask-x-to":Ge()}],"mask-image-y-from-pos":[{"mask-y-from":yr()}],"mask-image-y-to-pos":[{"mask-y-to":yr()}],"mask-image-y-from-color":[{"mask-y-from":Ge()}],"mask-image-y-to-color":[{"mask-y-to":Ge()}],"mask-image-radial":[{"mask-radial":[Kt,Yt]}],"mask-image-radial-from-pos":[{"mask-radial-from":yr()}],"mask-image-radial-to-pos":[{"mask-radial-to":yr()}],"mask-image-radial-from-color":[{"mask-radial-from":Ge()}],"mask-image-radial-to-color":[{"mask-radial-to":Ge()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ue()}],"mask-image-conic-pos":[{"mask-conic":[Rr]}],"mask-image-conic-from-pos":[{"mask-conic-from":yr()}],"mask-image-conic-to-pos":[{"mask-conic-to":yr()}],"mask-image-conic-from-color":[{"mask-conic-from":Ge()}],"mask-image-conic-to-color":[{"mask-conic-to":Ge()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ht()}],"mask-repeat":[{mask:xe()}],"mask-size":[{mask:Xe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Kt,Yt]}],filter:[{filter:["","none",Kt,Yt]}],blur:[{blur:ar()}],brightness:[{brightness:[Rr,Kt,Yt]}],contrast:[{contrast:[Rr,Kt,Yt]}],"drop-shadow":[{"drop-shadow":["","none",F,jv,Cv]}],"drop-shadow-color":[{"drop-shadow":Ge()}],grayscale:[{grayscale:["",Rr,Kt,Yt]}],"hue-rotate":[{"hue-rotate":[Rr,Kt,Yt]}],invert:[{invert:["",Rr,Kt,Yt]}],saturate:[{saturate:[Rr,Kt,Yt]}],sepia:[{sepia:["",Rr,Kt,Yt]}],"backdrop-filter":[{"backdrop-filter":["","none",Kt,Yt]}],"backdrop-blur":[{"backdrop-blur":ar()}],"backdrop-brightness":[{"backdrop-brightness":[Rr,Kt,Yt]}],"backdrop-contrast":[{"backdrop-contrast":[Rr,Kt,Yt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Rr,Kt,Yt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Rr,Kt,Yt]}],"backdrop-invert":[{"backdrop-invert":["",Rr,Kt,Yt]}],"backdrop-opacity":[{"backdrop-opacity":[Rr,Kt,Yt]}],"backdrop-saturate":[{"backdrop-saturate":[Rr,Kt,Yt]}],"backdrop-sepia":[{"backdrop-sepia":["",Rr,Kt,Yt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":ve()}],"border-spacing-x":[{"border-spacing-x":ve()}],"border-spacing-y":[{"border-spacing-y":ve()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Kt,Yt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Rr,"initial",Kt,Yt]}],ease:[{ease:["linear","initial",re,Kt,Yt]}],delay:[{delay:[Rr,Kt,Yt]}],animate:[{animate:["none",se,Kt,Yt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[Z,Kt,Yt]}],"perspective-origin":[{"perspective-origin":J()}],rotate:[{rotate:Ot()}],"rotate-x":[{"rotate-x":Ot()}],"rotate-y":[{"rotate-y":Ot()}],"rotate-z":[{"rotate-z":Ot()}],scale:[{scale:er()}],"scale-x":[{"scale-x":er()}],"scale-y":[{"scale-y":er()}],"scale-z":[{"scale-z":er()}],"scale-3d":["scale-3d"],skew:[{skew:or()}],"skew-x":[{"skew-x":or()}],"skew-y":[{"skew-y":or()}],transform:[{transform:[Kt,Yt,"","none","gpu","cpu"]}],"transform-origin":[{origin:J()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:_t()}],"translate-x":[{"translate-x":_t()}],"translate-y":[{"translate-y":_t()}],"translate-z":[{"translate-z":_t()}],"translate-none":["translate-none"],accent:[{accent:Ge()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Ge()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Kt,Yt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ve()}],"scroll-mx":[{"scroll-mx":ve()}],"scroll-my":[{"scroll-my":ve()}],"scroll-ms":[{"scroll-ms":ve()}],"scroll-me":[{"scroll-me":ve()}],"scroll-mt":[{"scroll-mt":ve()}],"scroll-mr":[{"scroll-mr":ve()}],"scroll-mb":[{"scroll-mb":ve()}],"scroll-ml":[{"scroll-ml":ve()}],"scroll-p":[{"scroll-p":ve()}],"scroll-px":[{"scroll-px":ve()}],"scroll-py":[{"scroll-py":ve()}],"scroll-ps":[{"scroll-ps":ve()}],"scroll-pe":[{"scroll-pe":ve()}],"scroll-pt":[{"scroll-pt":ve()}],"scroll-pr":[{"scroll-pr":ve()}],"scroll-pb":[{"scroll-pb":ve()}],"scroll-pl":[{"scroll-pl":ve()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Kt,Yt]}],fill:[{fill:["none",...Ge()]}],"stroke-w":[{stroke:[Rr,Sg,df,Wx]}],stroke:[{stroke:["none",...Ge()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ON=hN(jN);function Oy(...e){return ON(sn(e))}const kN=YO("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Sn({className:e,variant:t,size:i,asChild:a=!1,...f}){const v=a?XO:"button";return A.jsx(v,{"data-slot":"button",className:Oy(kN({variant:t,size:i,className:e})),...f})}function nr({className:e,...t}){return A.jsx("div",{"data-slot":"card",className:Oy("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function $r({className:e,type:t,...i}){return A.jsx("input",{type:t,"data-slot":"input",className:Oy("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}ZO();var IN=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],DN=IN.reduce((e,t)=>{const i=HO(`Primitive.${t}`),a=ft.forwardRef((f,v)=>{const{asChild:m,...l}=f,P=m?i:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),A.jsx(P,{...l,ref:v})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),zN="Label",sk=ft.forwardRef((e,t)=>A.jsx(DN.label,{...e,ref:t,onMouseDown:i=>{var f;i.target.closest("button, input, select, textarea")||((f=e.onMouseDown)==null||f.call(e,i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));sk.displayName=zN;var NN=sk;function qt({className:e,...t}){return A.jsx(NN,{"data-slot":"label",className:Oy("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LN=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,a)=>a?a.toUpperCase():i.toLowerCase()),XT=e=>{const t=LN(e);return t.charAt(0).toUpperCase()+t.slice(1)},lk=(...e)=>e.filter((t,i,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===i).join(" ").trim(),BN=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=ft.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:f="",children:v,iconNode:m,...l},P)=>ft.createElement("svg",{ref:P,...FN,width:t,height:t,stroke:e,strokeWidth:a?Number(i)*24/Number(t):i,className:lk("lucide",f),...!v&&!BN(l)&&{"aria-hidden":"true"},...l},[...m.map(([C,z])=>ft.createElement(C,z)),...Array.isArray(v)?v:[v]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=(e,t)=>{const i=ft.forwardRef(({className:a,...f},v)=>ft.createElement($N,{ref:v,iconNode:t,className:lk(`lucide-${RN(XT(e))}`,`lucide-${e}`,a),...f}));return i.displayName=XT(e),i};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],WT=ir("activity",qN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],VN=ir("award",UN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],ZN=ir("bath",GN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],XN=ir("bed",HN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],YN=ir("bell",WN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],QN=ir("book-open",KN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],gf=ir("brain",JN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Of=ir("building-2",eR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ck=ir("calendar",tR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],nR=ir("car",rR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Zc=ir("chart-column",iR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],oR=ir("check",aR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Tg=ir("chevron-down",sR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ag=ir("chevron-up",lR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ld=ir("circle-alert",cR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Uu=ir("circle-check",uR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],uk=ir("clock",hR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fR=ir("compass",dR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],mR=ir("copy",pR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],hk=ir("credit-card",gR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],vR=ir("crown",yR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],xR=ir("database",_R);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],wR=ir("dollar-sign",bR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],TR=ir("download",SR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],MR=ir("external-link",AR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ER=ir("eye",PR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],YT=ir("file-text",CR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],KT=ir("gift",jR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],kR=ir("github",OR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Hg=ir("house",IR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],zR=ir("info",DR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],RR=ir("layout-dashboard",NR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],BR=ir("lightbulb",LR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$R=ir("loader-circle",FR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],QT=ir("lock",qR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],dk=ir("log-in",UR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],GR=ir("log-out",VR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],fk=ir("mail",ZR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],$g=ir("map-pin",HR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Zv=ir("map",XR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],YR=ir("message-square",WR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=[["path",{d:"M5 12h14",key:"1ays0h"}]],QR=ir("minus",KR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],e3=ir("paintbrush",JR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],r3=ir("qr-code",t3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],i3=ir("refresh-ccw",n3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],o3=ir("rotate-ccw",a3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],l3=ir("route",s3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],u3=ir("ruler",c3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vv=ir("settings",h3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],f3=ir("share-2",d3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Hc=ir("sparkles",p3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],pk=ir("target",m3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],Jw=ir("trending-down",g3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],sc=ir("trending-up",y3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],_3=ir("user-check",v3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],b3=ir("user-plus",x3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],S3=ir("user",w3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],bf=ir("users",T3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],mk=ir("zap",A3);function M3({onSubmit:e,isLoading:t}){const[i,a]=ft.useState({}),[f,v]=ft.useState({basic:!0,details:!1,amenities:!1,location:!1,advanced:!1}),m=O=>{v(B=>({...B,[O]:!B[O]}))},l=(O,B)=>{a(F=>({...F,[O]:B}))},P=O=>{a(B=>({...B,[O]:!B[O]}))},C=O=>{O.preventDefault(),e(i)},z=Object.keys(i).filter(O=>{const B=i[O];return B!=null&&B!==""}).length;return A.jsxs("form",{onSubmit:C,className:"space-y-6",children:[A.jsxs(nr,{className:"p-4 card-gradient",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(Hc,{className:"w-5 h-5 text-primary"}),A.jsx("span",{className:"font-semibold",children:"مستوى اكتمال البيانات"})]}),A.jsxs("span",{className:"text-sm text-muted-foreground",children:[z," / 100 حقل"]})]}),A.jsx("div",{className:"w-full h-2 bg-muted rounded-full overflow-hidden",children:A.jsx("div",{className:"progress-bar h-full rounded-full",style:{width:`${Math.min(z/100*100,100)}%`}})}),A.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"كلما أضفت المزيد من التفاصيل، زادت دقة التقييم"})]}),A.jsxs(nr,{className:"overflow-hidden",children:[A.jsxs("button",{type:"button",onClick:()=>m("basic"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:A.jsx(Of,{className:"w-5 h-5 text-primary"})}),A.jsxs("div",{className:"text-right",children:[A.jsx("h3",{className:"font-bold text-lg",children:"البيانات الأساسية"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"المعلومات المطلوبة للتقييم"})]})]}),f.basic?A.jsx(Ag,{}):A.jsx(Tg,{})]}),f.basic&&A.jsxs("div",{className:"p-6 pt-0 grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsxs(qt,{htmlFor:"area",className:"flex items-center gap-2",children:[A.jsx(u3,{className:"w-4 h-4"}),"المساحة (م²) *"]}),A.jsx($r,{id:"area",type:"number",placeholder:"مثال: 300",value:i.area||"",onChange:O=>l("area",O.target.value),required:!0,className:"text-lg"})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs(qt,{htmlFor:"city",className:"flex items-center gap-2",children:[A.jsx($g,{className:"w-4 h-4"}),"المدينة *"]}),A.jsxs("select",{id:"city",value:i.city||"",onChange:O=>l("city",O.target.value),required:!0,className:"w-full px-3 py-2 rounded-md border border-input bg-background text-lg",children:[A.jsx("option",{value:"",children:"اختر المدينة"}),A.jsx("option",{value:"الرياض",children:"الرياض"}),A.jsx("option",{value:"جدة",children:"جدة"}),A.jsx("option",{value:"مكة",children:"مكة المكرمة"}),A.jsx("option",{value:"المدينة",children:"المدينة المنورة"}),A.jsx("option",{value:"الدمام",children:"الدمام"}),A.jsx("option",{value:"الخبر",children:"الخبر"}),A.jsx("option",{value:"الظهران",children:"الظهران"}),A.jsx("option",{value:"الطائف",children:"الطائف"}),A.jsx("option",{value:"تبوك",children:"تبوك"}),A.jsx("option",{value:"بريدة",children:"بريدة"}),A.jsx("option",{value:"خميس مشيط",children:"خميس مشيط"}),A.jsx("option",{value:"حائل",children:"حائل"}),A.jsx("option",{value:"نجران",children:"نجران"}),A.jsx("option",{value:"جازان",children:"جازان"}),A.jsx("option",{value:"ينبع",children:"ينبع"}),A.jsx("option",{value:"الأحساء",children:"الأحساء"}),A.jsx("option",{value:"القطيف",children:"القطيف"}),A.jsx("option",{value:"أبها",children:"أبها"}),A.jsx("option",{value:"عرعر",children:"عرعر"}),A.jsx("option",{value:"سكاكا",children:"سكاكا"}),A.jsx("option",{value:"أخرى",children:"أخرى"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs(qt,{htmlFor:"district",className:"flex items-center gap-2",children:[A.jsx($g,{className:"w-4 h-4"}),"الحي *"]}),A.jsx($r,{id:"district",type:"text",value:i.district||"",onChange:O=>l("district",O.target.value),placeholder:"مثال: الياسمين",required:!0,className:"text-lg"}),!i.district&&A.jsx("p",{className:"text-xs text-red-500",children:"الحي مطلوب"})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs(qt,{htmlFor:"propertyType",className:"flex items-center gap-2",children:[A.jsx(Hg,{className:"w-4 h-4"}),"نوع العقار"]}),A.jsxs("select",{id:"propertyType",value:i.propertyType||"",onChange:O=>l("propertyType",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر النوع"}),A.jsx("option",{value:"فيلا",children:"فيلا"}),A.jsx("option",{value:"شقة",children:"شقة"}),A.jsx("option",{value:"دور",children:"دور"}),A.jsx("option",{value:"عمارة",children:"عمارة"}),A.jsx("option",{value:"أرض",children:"أرض"}),A.jsx("option",{value:"دوبلكس",children:"دوبلكس"}),A.jsx("option",{value:"استوديو",children:"استوديو"}),A.jsx("option",{value:"بنتهاوس",children:"بنتهاوس"}),A.jsx("option",{value:"تاون هاوس",children:"تاون هاوس"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs(qt,{htmlFor:"age",className:"flex items-center gap-2",children:[A.jsx(ck,{className:"w-4 h-4"}),"عمر العقار"]}),A.jsxs("select",{id:"age",value:i.age||"",onChange:O=>l("age",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر العمر"}),A.jsx("option",{value:"جديد",children:"جديد (قيد الإنشاء أو أقل من سنة)"}),A.jsx("option",{value:"1-5",children:"1-5 سنوات"}),A.jsx("option",{value:"6-10",children:"6-10 سنوات"}),A.jsx("option",{value:"11-15",children:"11-15 سنة"}),A.jsx("option",{value:"16-20",children:"16-20 سنة"}),A.jsx("option",{value:"21-30",children:"21-30 سنة"}),A.jsx("option",{value:"أكثر من 30",children:"أكثر من 30 سنة"})]})]})]})]}),A.jsxs(nr,{className:"overflow-hidden",children:[A.jsxs("button",{type:"button",onClick:()=>m("details"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:A.jsx(Hg,{className:"w-5 h-5 text-primary"})}),A.jsxs("div",{className:"text-right",children:[A.jsx("h3",{className:"font-bold text-lg",children:"تفاصيل العقار"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"الغرف والمرافق الأساسية"})]})]}),f.details?A.jsx(Ag,{}):A.jsx(Tg,{})]}),f.details&&A.jsxs("div",{className:"p-6 pt-0 grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsxs(qt,{htmlFor:"bedrooms",className:"flex items-center gap-2",children:[A.jsx(XN,{className:"w-4 h-4"}),"عدد الغرف"]}),A.jsx($r,{id:"bedrooms",type:"number",placeholder:"مثال: 4",value:i.bedrooms||"",onChange:O=>l("bedrooms",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs(qt,{htmlFor:"bathrooms",className:"flex items-center gap-2",children:[A.jsx(ZN,{className:"w-4 h-4"}),"دورات المياه"]}),A.jsx($r,{id:"bathrooms",type:"number",placeholder:"مثال: 3",value:i.bathrooms||"",onChange:O=>l("bathrooms",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs(qt,{htmlFor:"parking",className:"flex items-center gap-2",children:[A.jsx(nR,{className:"w-4 h-4"}),"مواقف السيارات"]}),A.jsx($r,{id:"parking",type:"number",placeholder:"مثال: 2",value:i.parking||"",onChange:O=>l("parking",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"maidRooms",children:"غرف خدم"}),A.jsx($r,{id:"maidRooms",type:"number",placeholder:"العدد",value:i.maidRooms||"",onChange:O=>l("maidRooms",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"guestRooms",children:"غرف ضيوف"}),A.jsx($r,{id:"guestRooms",type:"number",placeholder:"العدد",value:i.guestRooms||"",onChange:O=>l("guestRooms",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"majlis",children:"مجالس"}),A.jsx($r,{id:"majlis",type:"number",placeholder:"العدد",value:i.majlis||"",onChange:O=>l("majlis",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"kitchens",children:"عدد المطابخ"}),A.jsx($r,{id:"kitchens",type:"number",placeholder:"مثال: 1",value:i.kitchens||"",onChange:O=>l("kitchens",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"storage",children:"مخازن"}),A.jsx($r,{id:"storage",type:"number",placeholder:"العدد",value:i.storage||"",onChange:O=>l("storage",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"balconies",children:"شرفات"}),A.jsx($r,{id:"balconies",type:"number",placeholder:"العدد",value:i.balconies||"",onChange:O=>l("balconies",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs(qt,{htmlFor:"finishing",className:"flex items-center gap-2",children:[A.jsx(e3,{className:"w-4 h-4"}),"التشطيب"]}),A.jsxs("select",{id:"finishing",value:i.finishing||"",onChange:O=>l("finishing",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر التشطيب"}),A.jsx("option",{value:"سوبر لوكس",children:"سوبر لوكس"}),A.jsx("option",{value:"لوكس",children:"لوكس"}),A.jsx("option",{value:"ممتاز",children:"ممتاز"}),A.jsx("option",{value:"جيد جداً",children:"جيد جداً"}),A.jsx("option",{value:"جيد",children:"جيد"}),A.jsx("option",{value:"متوسط",children:"متوسط"}),A.jsx("option",{value:"بسيط",children:"بسيط"}),A.jsx("option",{value:"على العظم",children:"على العظم"})]})]})]})]}),A.jsxs(nr,{className:"overflow-hidden",children:[A.jsxs("button",{type:"button",onClick:()=>m("amenities"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:A.jsx(Uu,{className:"w-5 h-5 text-primary"})}),A.jsxs("div",{className:"text-right",children:[A.jsx("h3",{className:"font-bold text-lg",children:"المرافق الإضافية"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"الميزات والخدمات المتوفرة"})]})]}),f.amenities?A.jsx(Ag,{}):A.jsx(Tg,{})]}),f.amenities&&A.jsx("div",{className:"p-6 pt-0 grid grid-cols-2 md:grid-cols-3 gap-3",children:[{id:"مسبح",label:"مسبح"},{id:"مصعد",label:"مصعد"},{id:"مولد_كهرباء",label:"مولد كهرباء"},{id:"نظام_أمني",label:"نظام أمني"},{id:"نظام_إطفاء",label:"نظام إطفاء"},{id:"خزان_ماء",label:"خزان ماء"},{id:"سخان_مركزي",label:"سخان مركزي"},{id:"تكييف_مركزي",label:"تكييف مركزي"},{id:"غرفة_خادمة",label:"غرفة خادمة"},{id:"غرفة_سائق",label:"غرفة سائق"},{id:"مجلس_رجال",label:"مجلس رجال"},{id:"صالة_رياضية",label:"صالة رياضية"},{id:"ملحق_خارجي",label:"ملحق خارجي"},{id:"مطبخ_خارجي",label:"مطبخ خارجي"},{id:"موقف_مظلل",label:"موقف مظلل"},{id:"حديقة",label:"حديقة"},{id:"شلال",label:"شلال"},{id:"نافورة",label:"نافورة"},{id:"ملعب_أطفال",label:"ملعب أطفال"},{id:"غرفة_بخار",label:"غرفة بخار"},{id:"جاكوزي",label:"جاكوزي"},{id:"مدفأة",label:"مدفأة"},{id:"مخزن_تحت_الدرج",label:"مخزن تحت الدرج"},{id:"غرفة_غسيل",label:"غرفة غسيل"},{id:"مدخل_خاص",label:"مدخل خاص"}].map(O=>A.jsxs("label",{className:"flex items-center gap-2 p-3 rounded-lg border border-input hover:bg-accent/50 cursor-pointer transition-colors",children:[A.jsx("input",{type:"checkbox",checked:i[O.id]||!1,onChange:()=>P(O.id),className:"w-4 h-4 rounded border-gray-300"}),A.jsx("span",{className:"text-sm",children:O.label})]},O.id))})]}),A.jsxs(nr,{className:"overflow-hidden",children:[A.jsxs("button",{type:"button",onClick:()=>m("location"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:A.jsx($g,{className:"w-5 h-5 text-primary"})}),A.jsxs("div",{className:"text-right",children:[A.jsx("h3",{className:"font-bold text-lg",children:"الموقع والمحيط"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"القرب من الخدمات والمرافق"})]})]}),f.location?A.jsx(Ag,{}):A.jsx(Tg,{})]}),f.location&&A.jsxs("div",{className:"p-6 pt-0 space-y-4",children:[A.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{id:"قرب_مسجد",label:"مسجد قريب"},{id:"قرب_مدرسة",label:"مدرسة قريبة"},{id:"قرب_مستشفى",label:"مستشفى قريب"},{id:"قرب_مركز_تجاري",label:"مركز تجاري"},{id:"قرب_حديقة",label:"حديقة قريبة"},{id:"قرب_محطة_وقود",label:"محطة وقود"},{id:"قرب_مواصلات_عامة",label:"مواصلات عامة"},{id:"قرب_جامعة",label:"جامعة قريبة"},{id:"قرب_سوبرماركت",label:"سوبرماركت"},{id:"قرب_مطاعم",label:"مطاعم قريبة"},{id:"قرب_صيدلية",label:"صيدلية"},{id:"قرب_بنك",label:"بنك"},{id:"قرب_صراف_آلي",label:"صراف آلي"},{id:"قرب_مكتب_بريد",label:"مكتب بريد"},{id:"قرب_مركز_شرطة",label:"مركز شرطة"},{id:"قرب_دفاع_مدني",label:"دفاع مدني"},{id:"قرب_نادي_رياضي",label:"نادي رياضي"},{id:"قرب_مسبح_عام",label:"مسبح عام"},{id:"قرب_ملاعب",label:"ملاعب رياضية"},{id:"قرب_مكتبة",label:"مكتبة عامة"},{id:"قرب_مسرح",label:"مسرح/سينما"}].map(O=>A.jsxs("label",{className:"flex items-center gap-2 p-3 rounded-lg border border-input hover:bg-accent/50 cursor-pointer transition-colors",children:[A.jsx("input",{type:"checkbox",checked:i[O.id]||!1,onChange:()=>P(O.id),className:"w-4 h-4 rounded border-gray-300"}),A.jsx("span",{className:"text-sm",children:O.label})]},O.id))}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsxs(qt,{htmlFor:"facade",className:"flex items-center gap-2",children:[A.jsx(fR,{className:"w-4 h-4"}),"اتجاه الواجهة"]}),A.jsxs("select",{id:"facade",value:i.facade||"",onChange:O=>l("facade",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر الاتجاه"}),A.jsx("option",{value:"شمالية",children:"شمالية"}),A.jsx("option",{value:"جنوبية",children:"جنوبية"}),A.jsx("option",{value:"شرقية",children:"شرقية"}),A.jsx("option",{value:"غربية",children:"غربية"}),A.jsx("option",{value:"شمالية شرقية",children:"شمالية شرقية"}),A.jsx("option",{value:"شمالية غربية",children:"شمالية غربية"}),A.jsx("option",{value:"جنوبية شرقية",children:"جنوبية شرقية"}),A.jsx("option",{value:"جنوبية غربية",children:"جنوبية غربية"}),A.jsx("option",{value:"ثلاث واجهات",children:"ثلاث واجهات"}),A.jsx("option",{value:"أربع واجهات",children:"أربع واجهات"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs(qt,{htmlFor:"streetWidth",className:"flex items-center gap-2",children:[A.jsx(l3,{className:"w-4 h-4"}),"عرض الشارع"]}),A.jsxs("select",{id:"streetWidth",value:i.streetWidth||"",onChange:O=>l("streetWidth",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر العرض"}),A.jsx("option",{value:"< 10م",children:"أقل من 10 متر"}),A.jsx("option",{value:"10-15م",children:"10-15 متر"}),A.jsx("option",{value:"16-20م",children:"16-20 متر"}),A.jsx("option",{value:"21-30م",children:"21-30 متر"}),A.jsx("option",{value:"> 30م",children:"أكثر من 30 متر"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs(qt,{htmlFor:"view",className:"flex items-center gap-2",children:[A.jsx(ER,{className:"w-4 h-4"}),"الإطلالة"]}),A.jsxs("select",{id:"view",value:i.view||"",onChange:O=>l("view",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر الإطلالة"}),A.jsx("option",{value:"بحر",children:"بحر"}),A.jsx("option",{value:"جبل",children:"جبل"}),A.jsx("option",{value:"حديقة",children:"حديقة"}),A.jsx("option",{value:"شارع رئيسي",children:"شارع رئيسي"}),A.jsx("option",{value:"شارع فرعي",children:"شارع فرعي"}),A.jsx("option",{value:"مبنى مقابل",children:"مبنى مقابل"})]})]})]})]})]}),A.jsxs(nr,{className:"overflow-hidden",children:[A.jsxs("button",{type:"button",onClick:()=>m("advanced"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:A.jsx(sc,{className:"w-5 h-5 text-primary"})}),A.jsxs("div",{className:"text-right",children:[A.jsx("h3",{className:"font-bold text-lg",children:"تفاصيل متقدمة"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"معلومات إضافية لدقة أعلى"})]})]}),f.advanced?A.jsx(Ag,{}):A.jsx(Tg,{})]}),f.advanced&&A.jsxs("div",{className:"p-6 pt-0 space-y-6",children:[A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"أبعاد الأرض والمساحات"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"landArea",children:"مساحة الأرض (م²)"}),A.jsx($r,{id:"landArea",type:"number",placeholder:"للفلل والعمائر",value:i.landArea||"",onChange:O=>l("landArea",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"frontWidth",children:"عرض الواجهة (م)"}),A.jsx($r,{id:"frontWidth",type:"number",placeholder:"مثال: 15",value:i.frontWidth||"",onChange:O=>l("frontWidth",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"depth",children:"العمق (م)"}),A.jsx($r,{id:"depth",type:"number",placeholder:"مثال: 20",value:i.depth||"",onChange:O=>l("depth",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"yardArea",children:"مساحة الحوش (م²)"}),A.jsx($r,{id:"yardArea",type:"number",placeholder:"إن وجد",value:i.yardArea||"",onChange:O=>l("yardArea",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"gardenArea",children:"مساحة الحديقة (م²)"}),A.jsx($r,{id:"gardenArea",type:"number",placeholder:"إن وجدت",value:i.gardenArea||"",onChange:O=>l("gardenArea",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"roofArea",children:"مساحة السطح (م²)"}),A.jsx($r,{id:"roofArea",type:"number",placeholder:"إن كان مفتوح",value:i.roofArea||"",onChange:O=>l("roofArea",O.target.value)})]})]})]}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"تفاصيل البناء والطوابق"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"floor",children:"رقم الطابق"}),A.jsx($r,{id:"floor",type:"number",placeholder:"للشقق",value:i.floor||"",onChange:O=>l("floor",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"totalFloors",children:"إجمالي الطوابق"}),A.jsx($r,{id:"totalFloors",type:"number",placeholder:"في المبنى",value:i.totalFloors||"",onChange:O=>l("totalFloors",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"floorHeight",children:"ارتفاع السقف (م)"}),A.jsx($r,{id:"floorHeight",type:"number",step:"0.1",placeholder:"مثال: 3.2",value:i.floorHeight||"",onChange:O=>l("floorHeight",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"buildingAge",children:"عمر البناء (سنة)"}),A.jsx($r,{id:"buildingAge",type:"number",placeholder:"بالسنوات",value:i.buildingAge||"",onChange:O=>l("buildingAge",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"lastRenovation",children:"آخر تجديد (سنة)"}),A.jsx($r,{id:"lastRenovation",type:"number",placeholder:"مثال: 2023",value:i.lastRenovation||"",onChange:O=>l("lastRenovation",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"structureType",children:"نوع الهيكل"}),A.jsxs("select",{id:"structureType",value:i.structureType||"",onChange:O=>l("structureType",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر النوع"}),A.jsx("option",{value:"خرساني",children:"خرساني"}),A.jsx("option",{value:"حديد",children:"حديد"}),A.jsx("option",{value:"طوب",children:"طوب"}),A.jsx("option",{value:"مختلط",children:"مختلط"})]})]})]})]}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"مواد التشطيب والجودة"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"flooringType",children:"نوع الأرضيات"}),A.jsxs("select",{id:"flooringType",value:i.flooringType||"",onChange:O=>l("flooringType",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر النوع"}),A.jsx("option",{value:"سيراميك",children:"سيراميك"}),A.jsx("option",{value:"بورسلان",children:"بورسلان"}),A.jsx("option",{value:"رخام",children:"رخام"}),A.jsx("option",{value:"باركيه",children:"باركيه"}),A.jsx("option",{value:"موكيت",children:"موكيت"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"wallFinish",children:"تشطيب الجدران"}),A.jsxs("select",{id:"wallFinish",value:i.wallFinish||"",onChange:O=>l("wallFinish",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر النوع"}),A.jsx("option",{value:"دهان",children:"دهان"}),A.jsx("option",{value:"ورق جدران",children:"ورق جدران"}),A.jsx("option",{value:"حجر",children:"حجر"}),A.jsx("option",{value:"جبس",children:"جبس"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"kitchenQuality",children:"جودة المطبخ"}),A.jsxs("select",{id:"kitchenQuality",value:i.kitchenQuality||"",onChange:O=>l("kitchenQuality",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر الجودة"}),A.jsx("option",{value:"فاخر",children:"فاخر"}),A.jsx("option",{value:"جيد",children:"جيد"}),A.jsx("option",{value:"عادي",children:"عادي"}),A.jsx("option",{value:"بسيط",children:"بسيط"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"bathroomQuality",children:"جودة الحمامات"}),A.jsxs("select",{id:"bathroomQuality",value:i.bathroomQuality||"",onChange:O=>l("bathroomQuality",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر الجودة"}),A.jsx("option",{value:"فاخر",children:"فاخر"}),A.jsx("option",{value:"جيد",children:"جيد"}),A.jsx("option",{value:"عادي",children:"عادي"}),A.jsx("option",{value:"بسيط",children:"بسيط"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"windowType",children:"نوع النوافذ"}),A.jsxs("select",{id:"windowType",value:i.windowType||"",onChange:O=>l("windowType",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر النوع"}),A.jsx("option",{value:"UPVC",children:"UPVC"}),A.jsx("option",{value:"ألمنيوم",children:"ألمنيوم"}),A.jsx("option",{value:"خشب",children:"خشب"}),A.jsx("option",{value:"حديد",children:"حديد"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"doorType",children:"نوع الأبواب"}),A.jsxs("select",{id:"doorType",value:i.doorType||"",onChange:O=>l("doorType",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر النوع"}),A.jsx("option",{value:"خشب صلب",children:"خشب صلب"}),A.jsx("option",{value:"خشب مضغوط",children:"خشب مضغوط"}),A.jsx("option",{value:"معدن",children:"معدن"}),A.jsx("option",{value:"UPVC",children:"UPVC"})]})]})]})]}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"الأنظمة والتجهيزات"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"acType",children:"نوع التكييف"}),A.jsxs("select",{id:"acType",value:i.acType||"",onChange:O=>l("acType",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر النوع"}),A.jsx("option",{value:"مركزي",children:"مركزي"}),A.jsx("option",{value:"سبليت",children:"سبليت"}),A.jsx("option",{value:"شباك",children:"شباك"}),A.jsx("option",{value:"مخفي",children:"مخفي"}),A.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"heatingType",children:"نظام التدفئة"}),A.jsxs("select",{id:"heatingType",value:i.heatingType||"",onChange:O=>l("heatingType",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر النوع"}),A.jsx("option",{value:"مركزي",children:"مركزي"}),A.jsx("option",{value:"دفايات",children:"دفايات"}),A.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"waterHeater",children:"سخان المياه"}),A.jsxs("select",{id:"waterHeater",value:i.waterHeater||"",onChange:O=>l("waterHeater",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر النوع"}),A.jsx("option",{value:"مركزي",children:"مركزي"}),A.jsx("option",{value:"كهربائي",children:"كهربائي"}),A.jsx("option",{value:"غاز",children:"غاز"}),A.jsx("option",{value:"شمسي",children:"شمسي"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"waterTank",children:"خزان المياه (لتر)"}),A.jsx($r,{id:"waterTank",type:"number",placeholder:"السعة",value:i.waterTank||"",onChange:O=>l("waterTank",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"generator",children:"مولد كهربائي"}),A.jsxs("select",{id:"generator",value:i.generator||"",onChange:O=>l("generator",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"يوجد؟"}),A.jsx("option",{value:"نعم",children:"نعم"}),A.jsx("option",{value:"لا",children:"لا"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"solarPanels",children:"ألواح شمسية"}),A.jsxs("select",{id:"solarPanels",value:i.solarPanels||"",onChange:O=>l("solarPanels",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"يوجد؟"}),A.jsx("option",{value:"نعم",children:"نعم"}),A.jsx("option",{value:"لا",children:"لا"})]})]})]})]}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"العزل والحماية"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"thermalInsulation",children:"عزل حراري"}),A.jsxs("select",{id:"thermalInsulation",value:i.thermalInsulation||"",onChange:O=>l("thermalInsulation",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"يوجد؟"}),A.jsx("option",{value:"ممتاز",children:"ممتاز"}),A.jsx("option",{value:"جيد",children:"جيد"}),A.jsx("option",{value:"عادي",children:"عادي"}),A.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"waterproofing",children:"عزل مائي"}),A.jsxs("select",{id:"waterproofing",value:i.waterproofing||"",onChange:O=>l("waterproofing",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"يوجد؟"}),A.jsx("option",{value:"ممتاز",children:"ممتاز"}),A.jsx("option",{value:"جيد",children:"جيد"}),A.jsx("option",{value:"عادي",children:"عادي"}),A.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"soundproofing",children:"عزل صوتي"}),A.jsxs("select",{id:"soundproofing",value:i.soundproofing||"",onChange:O=>l("soundproofing",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"يوجد؟"}),A.jsx("option",{value:"ممتاز",children:"ممتاز"}),A.jsx("option",{value:"جيد",children:"جيد"}),A.jsx("option",{value:"عادي",children:"عادي"}),A.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"fireAlarm",children:"نظام إنذار حريق"}),A.jsxs("select",{id:"fireAlarm",value:i.fireAlarm||"",onChange:O=>l("fireAlarm",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"يوجد؟"}),A.jsx("option",{value:"نعم",children:"نعم"}),A.jsx("option",{value:"لا",children:"لا"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"fireExtinguisher",children:"طفايات حريق"}),A.jsx($r,{id:"fireExtinguisher",type:"number",placeholder:"العدد",value:i.fireExtinguisher||"",onChange:O=>l("fireExtinguisher",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"emergencyExit",children:"مخرج طوارئ"}),A.jsxs("select",{id:"emergencyExit",value:i.emergencyExit||"",onChange:O=>l("emergencyExit",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"يوجد؟"}),A.jsx("option",{value:"نعم",children:"نعم"}),A.jsx("option",{value:"لا",children:"لا"})]})]})]})]}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"الاتصالات والتقنية"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"internetSpeed",children:"سرعة الإنترنت (Mbps)"}),A.jsx($r,{id:"internetSpeed",type:"number",placeholder:"مثال: 100",value:i.internetSpeed||"",onChange:O=>l("internetSpeed",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"fiberOptic",children:"ألياف ضوئية"}),A.jsxs("select",{id:"fiberOptic",value:i.fiberOptic||"",onChange:O=>l("fiberOptic",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"متوفر؟"}),A.jsx("option",{value:"نعم",children:"نعم"}),A.jsx("option",{value:"لا",children:"لا"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"smartHome",children:"منزل ذكي"}),A.jsxs("select",{id:"smartHome",value:i.smartHome||"",onChange:O=>l("smartHome",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"يوجد؟"}),A.jsx("option",{value:"كامل",children:"كامل"}),A.jsx("option",{value:"جزئي",children:"جزئي"}),A.jsx("option",{value:"لا",children:"لا"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"satelliteDish",children:"طبق استقبال"}),A.jsxs("select",{id:"satelliteDish",value:i.satelliteDish||"",onChange:O=>l("satelliteDish",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"يوجد؟"}),A.jsx("option",{value:"نعم",children:"نعم"}),A.jsx("option",{value:"لا",children:"لا"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"intercom",children:"انتركم"}),A.jsxs("select",{id:"intercom",value:i.intercom||"",onChange:O=>l("intercom",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"يوجد؟"}),A.jsx("option",{value:"فيديو",children:"فيديو"}),A.jsx("option",{value:"صوتي",children:"صوتي"}),A.jsx("option",{value:"لا",children:"لا"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"cctv",children:"كاميرات مراقبة"}),A.jsx($r,{id:"cctv",type:"number",placeholder:"العدد",value:i.cctv||"",onChange:O=>l("cctv",O.target.value)})]})]})]}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"المسافات من الخدمات (كم)"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"distanceSchool",children:"أقرب مدرسة"}),A.jsx($r,{id:"distanceSchool",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceSchool||"",onChange:O=>l("distanceSchool",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"distanceHospital",children:"أقرب مستشفى"}),A.jsx($r,{id:"distanceHospital",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceHospital||"",onChange:O=>l("distanceHospital",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"distanceMosque",children:"أقرب مسجد"}),A.jsx($r,{id:"distanceMosque",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceMosque||"",onChange:O=>l("distanceMosque",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"distanceMall",children:"أقرب مول"}),A.jsx($r,{id:"distanceMall",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceMall||"",onChange:O=>l("distanceMall",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"distanceSupermarket",children:"أقرب سوبرماركت"}),A.jsx($r,{id:"distanceSupermarket",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceSupermarket||"",onChange:O=>l("distanceSupermarket",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"distanceHighway",children:"أقرب طريق سريع"}),A.jsx($r,{id:"distanceHighway",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceHighway||"",onChange:O=>l("distanceHighway",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"distanceAirport",children:"المطار"}),A.jsx($r,{id:"distanceAirport",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceAirport||"",onChange:O=>l("distanceAirport",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"distanceMetro",children:"محطة مترو/قطار"}),A.jsx($r,{id:"distanceMetro",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceMetro||"",onChange:O=>l("distanceMetro",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"distancePark",children:"أقرب حديقة"}),A.jsx($r,{id:"distancePark",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distancePark||"",onChange:O=>l("distancePark",O.target.value)})]})]})]}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"البيئة المحيطة"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"noiseLevel",children:"مستوى الضوضاء"}),A.jsxs("select",{id:"noiseLevel",value:i.noiseLevel||"",onChange:O=>l("noiseLevel",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر المستوى"}),A.jsx("option",{value:"هادئ جداً",children:"هادئ جداً"}),A.jsx("option",{value:"هادئ",children:"هادئ"}),A.jsx("option",{value:"متوسط",children:"متوسط"}),A.jsx("option",{value:"مزعج",children:"مزعج"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"trafficLevel",children:"كثافة المرور"}),A.jsxs("select",{id:"trafficLevel",value:i.trafficLevel||"",onChange:O=>l("trafficLevel",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر الكثافة"}),A.jsx("option",{value:"منخفضة",children:"منخفضة"}),A.jsx("option",{value:"متوسطة",children:"متوسطة"}),A.jsx("option",{value:"عالية",children:"عالية"}),A.jsx("option",{value:"مزدحم جداً",children:"مزدحم جداً"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"airQuality",children:"جودة الهواء"}),A.jsxs("select",{id:"airQuality",value:i.airQuality||"",onChange:O=>l("airQuality",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر الجودة"}),A.jsx("option",{value:"ممتازة",children:"ممتازة"}),A.jsx("option",{value:"جيدة",children:"جيدة"}),A.jsx("option",{value:"متوسطة",children:"متوسطة"}),A.jsx("option",{value:"سيئة",children:"سيئة"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"sunExposure",children:"التعرض للشمس"}),A.jsxs("select",{id:"sunExposure",value:i.sunExposure||"",onChange:O=>l("sunExposure",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر المستوى"}),A.jsx("option",{value:"كامل",children:"كامل"}),A.jsx("option",{value:"جزئي",children:"جزئي"}),A.jsx("option",{value:"محدود",children:"محدود"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"flooding",children:"احتمال الفيضان"}),A.jsxs("select",{id:"flooding",value:i.flooding||"",onChange:O=>l("flooding",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر المستوى"}),A.jsx("option",{value:"معدوم",children:"معدوم"}),A.jsx("option",{value:"منخفض",children:"منخفض"}),A.jsx("option",{value:"متوسط",children:"متوسط"}),A.jsx("option",{value:"عالي",children:"عالي"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"neighborhoodSafety",children:"أمان الحي"}),A.jsxs("select",{id:"neighborhoodSafety",value:i.neighborhoodSafety||"",onChange:O=>l("neighborhoodSafety",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر المستوى"}),A.jsx("option",{value:"ممتاز",children:"ممتاز"}),A.jsx("option",{value:"جيد",children:"جيد"}),A.jsx("option",{value:"متوسط",children:"متوسط"}),A.jsx("option",{value:"ضعيف",children:"ضعيف"})]})]})]})]}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"معلومات قانونية ومالية"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"ownership",children:"نوع الملكية"}),A.jsxs("select",{id:"ownership",value:i.ownership||"",onChange:O=>l("ownership",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"اختر النوع"}),A.jsx("option",{value:"ملك",children:"ملك"}),A.jsx("option",{value:"إيجار",children:"إيجار"}),A.jsx("option",{value:"وقف",children:"وقف"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"deed",children:"صك إلكتروني"}),A.jsxs("select",{id:"deed",value:i.deed||"",onChange:O=>l("deed",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"يوجد؟"}),A.jsx("option",{value:"نعم",children:"نعم"}),A.jsx("option",{value:"لا",children:"لا"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"mortgage",children:"رهن عقاري"}),A.jsxs("select",{id:"mortgage",value:i.mortgage||"",onChange:O=>l("mortgage",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[A.jsx("option",{value:"",children:"يوجد؟"}),A.jsx("option",{value:"نعم",children:"نعم"}),A.jsx("option",{value:"لا",children:"لا"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"annualTax",children:"الضريبة السنوية (ريال)"}),A.jsx($r,{id:"annualTax",type:"number",placeholder:"إن وجدت",value:i.annualTax||"",onChange:O=>l("annualTax",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"maintenanceFee",children:"رسوم الصيانة (ريال/شهر)"}),A.jsx($r,{id:"maintenanceFee",type:"number",placeholder:"إن وجدت",value:i.maintenanceFee||"",onChange:O=>l("maintenanceFee",O.target.value)})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(qt,{htmlFor:"utilities",children:"فواتير الخدمات (ريال/شهر)"}),A.jsx($r,{id:"utilities",type:"number",placeholder:"متوسط",value:i.utilities||"",onChange:O=>l("utilities",O.target.value)})]})]})]})]})]}),A.jsx(Sn,{type:"submit",disabled:t||!i.area||!i.city||!i.district,className:"w-full h-14 text-lg font-bold primary-gradient hover:opacity-90 transition-opacity",children:t?A.jsxs(A.Fragment,{children:[A.jsx($R,{className:"w-5 h-5 ml-2 animate-spin"}),"جاري التقييم..."]}):A.jsxs(A.Fragment,{children:[A.jsx(Hc,{className:"w-5 h-5 ml-2"}),"احسب القيمة التقديرية"]})}),(!i.area||!i.city)&&A.jsxs("div",{className:"flex items-start gap-2 p-4 rounded-lg bg-amber-50 border border-amber-200",children:[A.jsx(ld,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),A.jsxs("p",{className:"text-sm text-amber-800",children:["يرجى إدخال ",A.jsx("strong",{children:"المساحة"})," و",A.jsx("strong",{children:"المدينة"})," على الأقل للحصول على تقييم أولي"]})]})]})}function P3({result:e}){var v,m;if(!e)return null;const t=l=>new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),i=l=>l>=70?"text-green-600 bg-green-50 border-green-200":l>=50?"text-amber-600 bg-amber-50 border-amber-200":"text-red-600 bg-red-50 border-red-200",a=l=>l>=70?A.jsx(Uu,{className:"w-5 h-5"}):l>=50?A.jsx(ld,{className:"w-5 h-5"}):A.jsx(ld,{className:"w-5 h-5"}),f=l=>l==="صاعد"?A.jsx(sc,{className:"w-5 h-5 text-green-600"}):l==="نازل"?A.jsx(Jw,{className:"w-5 h-5 text-red-600"}):A.jsx(QR,{className:"w-5 h-5 text-gray-600"});return A.jsxs("div",{className:"space-y-6 animate-slide-in",children:[A.jsxs(nr,{className:"p-8 result-badge text-white overflow-hidden relative",children:[A.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:A.jsx("div",{className:"absolute top-4 right-4",children:A.jsx(Hc,{className:"w-32 h-32"})})}),A.jsxs("div",{className:"relative z-10",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx(pk,{className:"w-6 h-6"}),A.jsx("h2",{className:"text-xl font-bold",children:"القيمة التقديرية للعقار"})]}),A.jsxs("div",{className:"mt-4",children:[A.jsx("div",{className:"text-5xl font-black mb-2",children:t(e.estimatedValue)}),A.jsxs("p",{className:"text-white/80 text-sm",children:["النطاق المتوقع: ",t(((v=e.priceRange)==null?void 0:v.min)||e.estimatedValue*.9)," - ",t(((m=e.priceRange)==null?void 0:m.max)||e.estimatedValue*1.1)]})]}),e.source==="gpt"&&A.jsxs("div",{className:"mt-4 flex items-center gap-2 text-white/90 bg-white/10 rounded-lg px-3 py-2 w-fit",children:[A.jsx(gf,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm font-semibold",children:"تم التقييم بواسطة الذكاء الاصطناعي المتقدم"})]})]})]}),!e.usedAgent&&A.jsxs(nr,{className:`p-6 border-2 ${i(e.confidence)}`,children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[a(e.confidence),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:"مستوى الثقة في التقييم"}),A.jsxs("p",{className:"text-sm opacity-80",children:["بناءً على ",e.filledFieldsCount||"عدة"," معلومة مُدخلة"]})]})]}),A.jsxs("div",{className:"text-4xl font-black",children:[e.confidence,"%"]})]}),A.jsx("div",{className:"mt-4 w-full h-3 bg-white/50 rounded-full overflow-hidden",children:A.jsx("div",{className:"h-full rounded-full transition-all duration-1000 ease-out",style:{width:`${e.confidence}%`,background:e.confidence>=70?"linear-gradient(90deg, #22c55e, #16a34a)":e.confidence>=50?"linear-gradient(90deg, #f59e0b, #d97706)":"linear-gradient(90deg, #ef4444, #dc2626)"}})})]}),e.usedAgent&&e.nqs&&A.jsx(nr,{className:"p-6 border-2 border-primary/30 bg-primary/5",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(gf,{className:"w-6 h-6 text-primary"}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:"تم التقييم بواسطة الذكاء الاصطناعي"}),A.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.nqs.notes||"تم حساب القيمة بدقة عالية باستخدام نموذج ذكاء اصطناعي متقدم"})]})]})}),e.analysis&&A.jsxs(nr,{className:"p-6",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[A.jsx(Zc,{className:"w-5 h-5 text-primary"}),A.jsx("h3",{className:"font-bold text-lg",children:"تحليل العوامل المؤثرة"})]}),e.analysis.baseCalculation&&A.jsxs("div",{className:"mb-4 p-4 bg-muted rounded-lg",children:[A.jsx("p",{className:"text-sm font-semibold mb-1",children:"الحساب الأساسي:"}),A.jsx("p",{className:"text-sm",children:e.analysis.baseCalculation})]}),e.analysis.keyFactors&&e.analysis.keyFactors.length>0&&A.jsx("div",{className:"space-y-3",children:e.analysis.keyFactors.map((l,P)=>A.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[A.jsxs("div",{className:"flex items-start justify-between mb-2",children:[A.jsx("h4",{className:"font-semibold",children:l.factor}),A.jsx("span",{className:"text-sm font-bold text-primary",children:l.impact})]}),l.reasoning&&A.jsx("p",{className:"text-sm text-muted-foreground",children:l.reasoning})]},P))}),e.analysis.marketComparison&&A.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[A.jsx("p",{className:"text-sm font-semibold mb-1 text-blue-900",children:"مقارنة السوق:"}),A.jsx("p",{className:"text-sm text-blue-800",children:e.analysis.marketComparison})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.analysis.strengths&&e.analysis.strengths.length>0&&A.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[A.jsxs("h4",{className:"font-semibold text-green-900 mb-2 flex items-center gap-2",children:[A.jsx(Uu,{className:"w-4 h-4"}),"نقاط القوة"]}),A.jsx("ul",{className:"space-y-1",children:e.analysis.strengths.map((l,P)=>A.jsxs("li",{className:"text-sm text-green-800",children:["• ",l]},P))})]}),e.analysis.weaknesses&&e.analysis.weaknesses.length>0&&A.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[A.jsxs("h4",{className:"font-semibold text-amber-900 mb-2 flex items-center gap-2",children:[A.jsx(ld,{className:"w-4 h-4"}),"نقاط الضعف"]}),A.jsx("ul",{className:"space-y-1",children:e.analysis.weaknesses.map((l,P)=>A.jsxs("li",{className:"text-sm text-amber-800",children:["• ",l]},P))})]})]})]}),e.adjustments&&!e.analysis&&A.jsxs(nr,{className:"p-6",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[A.jsx(Zc,{className:"w-5 h-5 text-primary"}),A.jsx("h3",{className:"font-bold text-lg",children:"تفاصيل الحساب"})]}),e.adjustments.baseCalculation&&A.jsxs("div",{className:"mb-4 p-4 bg-muted rounded-lg",children:[A.jsx("p",{className:"text-sm font-semibold mb-1",children:"الحساب الأساسي:"}),A.jsx("p",{className:"text-sm",children:e.adjustments.baseCalculation})]}),e.adjustments.appliedFactors&&e.adjustments.appliedFactors.length>0&&A.jsxs("div",{className:"space-y-2",children:[A.jsx("p",{className:"text-sm font-semibold mb-2",children:"العوامل المطبقة:"}),e.adjustments.appliedFactors.map((l,P)=>A.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[A.jsxs("div",{children:[A.jsxs("span",{className:"font-semibold text-sm",children:[l.factor,":"]}),A.jsx("span",{className:"text-sm text-muted-foreground mr-2",children:l.value})]}),A.jsx("span",{className:"text-sm font-bold text-primary",children:l.impact})]},P))]})]}),e.marketInsights&&A.jsxs(nr,{className:"p-6",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[A.jsx(sc,{className:"w-5 h-5 text-primary"}),A.jsx("h3",{className:"font-bold text-lg",children:"رؤى السوق"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{className:"p-4 border border-border rounded-lg text-center",children:[A.jsx("div",{className:"flex items-center justify-center mb-2",children:f(e.marketInsights.trend)}),A.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"اتجاه السوق"}),A.jsx("p",{className:"font-bold",children:e.marketInsights.trend})]}),A.jsxs("div",{className:"p-4 border border-border rounded-lg text-center",children:[A.jsx("div",{className:"flex items-center justify-center mb-2",children:A.jsx(Zc,{className:"w-5 h-5 text-blue-600"})}),A.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"مستوى الطلب"}),A.jsx("p",{className:"font-bold",children:e.marketInsights.demandLevel})]}),A.jsxs("div",{className:"p-4 border border-border rounded-lg text-center",children:[A.jsx("div",{className:"flex items-center justify-center mb-2",children:A.jsx(uk,{className:"w-5 h-5 text-green-600"})}),A.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"أفضل وقت للبيع"}),A.jsx("p",{className:"font-bold",children:e.marketInsights.bestTimeToSell})]})]})]}),e.investmentScore&&A.jsx(nr,{className:"p-6 border-2 border-primary/20",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(VN,{className:"w-6 h-6 text-primary"}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:"تقييم الاستثمار"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"من 10"})]})]}),A.jsx("div",{className:"text-5xl font-black text-primary",children:e.investmentScore})]})}),e.recommendations&&e.recommendations.length>0&&A.jsxs(nr,{className:"p-6 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[A.jsx(BR,{className:"w-5 h-5 text-blue-600"}),A.jsx("h3",{className:"font-bold text-lg text-blue-900",children:"توصيات لتحسين التقييم"})]}),A.jsx("ul",{className:"space-y-3",children:e.recommendations.map((l,P)=>A.jsxs("li",{className:"flex items-start gap-3 p-3 bg-white/70 rounded-lg",children:[A.jsx(Uu,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),A.jsx("span",{className:"text-sm text-blue-900",children:l})]},P))})]}),e.reasoning&&A.jsxs(nr,{className:"p-6 bg-muted/50",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[A.jsx(gf,{className:"w-5 h-5 text-primary"}),A.jsx("h3",{className:"font-bold text-lg",children:"التحليل الشامل"})]}),A.jsx("p",{className:"text-sm leading-relaxed",children:e.reasoning})]}),e.nqs&&e.nqs.districtFound&&A.jsxs(nr,{className:"p-4 bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx(gf,{className:"w-5 h-5 text-indigo-600"}),A.jsx("h4",{className:"font-semibold text-indigo-900",children:"تحليل جودة الحي (تلقائي)"})]}),A.jsx("p",{className:"text-sm text-indigo-800",children:e.nqs.explanation}),A.jsx("p",{className:"text-xs text-indigo-600 mt-2",children:"ℹ️ تم حساب جودة الحي تلقائياً بناءً على كثافة الخدمات، سهولة النفاذ، المساحات الخضراء، والمؤسسات التعليمية"})]}),A.jsxs("div",{className:"text-center text-sm text-muted-foreground space-y-1",children:[A.jsx("p",{children:"💡 هذا التقييم تقديري ويعتمد على البيانات المُدخلة والسوق الحالي"}),A.jsx("p",{children:"📊 للحصول على تقييم أكثر دقة، يُنصح بإضافة المزيد من التفاصيل"}),e.source==="gpt"&&A.jsxs("p",{className:"font-semibold text-primary",children:["🤖 تم التقييم باستخدام نموذج ",e.model]})]})]})}const E3=YO("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Xg({className:e,variant:t,asChild:i=!1,...a}){const f=i?XO:"span";return A.jsx(f,{"data-slot":"badge",className:Oy(E3({variant:t}),e),...a})}function C3(){const e=[{id:"basic",name:"Basic",nameAr:"الباقة الأساسية",price:"مجاني",status:"active",statusText:"✅ فعّالة",icon:Hc,color:"from-blue-500 to-blue-600",features:["تقييم عقاري أساسي","تحليل السوق العام","نتائج فورية","دعم فني أساسي"]},{id:"smart",name:"Smart",nameAr:"الباقة الذكية",price:"٤٩ ريال",priceNote:"شهرياً",status:"coming",statusText:"🔒 قريباً",icon:mk,color:"from-purple-500 to-purple-600",badge:"الأكثر شعبية",features:["كل مزايا Basic","تحليل الحي الكامل","أفضل مناطق السكن","التكتلات السعرية","تقارير مفصّلة","أولوية في الدعم"]},{id:"pro",name:"Pro",nameAr:"الباقة الاحترافية",price:"١٤٩ ريال",priceNote:"شهرياً",status:"coming",statusText:"🔒 قريباً",icon:vR,color:"from-amber-500 to-amber-600",features:["كل مزايا Smart","خريطة الوعي العقاري","تحليلات متقدمة بالذكاء الاصطناعي","مقارنات غير محدودة","API للتكامل","استشارات شهرية","دعم فني مخصص"]},{id:"api",name:"API",nameAr:"باقة الأعمال",price:"B2B",priceNote:"حسب الاستخدام",status:"coming",statusText:"🔒 قريباً",icon:Of,color:"from-green-500 to-green-600",features:["وصول كامل لـ API","تكامل مع أنظمتك","حدود استخدام مرتفعة","بيانات تاريخية","دعم فني مخصص 24/7","SLA مضمون","تدريب للفريق"]}],t=i=>i==="active"?{text:"مفعّلة",variant:"default",disabled:!0}:{text:"قريباً",variant:"outline",disabled:!0};return A.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted/30 py-12 px-4",children:A.jsxs("div",{className:"container mx-auto max-w-7xl",children:[A.jsxs("div",{className:"text-center mb-12 space-y-4",children:[A.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-semibold mb-4",children:[A.jsx(Hc,{className:"w-4 h-4"}),A.jsx("span",{children:"اختر الباقة المناسبة لك"})]}),A.jsx("h1",{className:"text-4xl md:text-5xl font-black text-balance",children:"باقات مُثمّن"}),A.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto text-balance",children:"ابدأ مجاناً واستكشف قوة الذكاء الاصطناعي في التقييم العقاري"})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:e.map(i=>{const a=i.icon,f=t(i.status),v=i.status==="active";return A.jsxs(nr,{className:`relative p-6 hover-lift ${v?"border-2 border-primary shadow-lg":""}`,children:[i.badge&&A.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:A.jsx(Xg,{className:"bg-gradient-to-r from-amber-500 to-amber-600 text-white",children:i.badge})}),A.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${i.color} w-fit mb-4`,children:A.jsx(a,{className:"w-6 h-6 text-white"})}),A.jsx("h3",{className:"text-xl font-bold mb-1",children:i.nameAr}),A.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:i.name}),A.jsx("div",{className:"mb-4",children:A.jsxs("div",{className:"flex items-baseline gap-2",children:[A.jsx("span",{className:"text-3xl font-black",children:i.price}),i.priceNote&&A.jsx("span",{className:"text-sm text-muted-foreground",children:i.priceNote})]})}),A.jsx("div",{className:"mb-6",children:A.jsx(Xg,{variant:v?"default":"secondary",children:i.statusText})}),A.jsx(Sn,{className:"w-full mb-6",variant:f.variant,disabled:f.disabled,children:f.text}),A.jsx("div",{className:"space-y-3",children:i.features.map((m,l)=>A.jsxs("div",{className:"flex items-start gap-2",children:[A.jsx(oR,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${v?"text-primary":"text-muted-foreground"}`}),A.jsx("span",{className:"text-sm",children:m})]},l))})]},i.id)})}),A.jsx(nr,{className:"p-6 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:A.jsx(Hc,{className:"w-6 h-6 text-blue-600"})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"font-bold text-lg mb-2",children:"النسخة الحالية للتجربة العامة"}),A.jsx("p",{className:"text-muted-foreground mb-4",children:"جميع المزايا المتقدمة ستُتاح في التحديث القادم. نحن نعمل على تطوير تجربة استثنائية لك."}),A.jsxs("div",{className:"flex flex-wrap gap-3",children:[A.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[A.jsx(Zv,{className:"w-4 h-4 text-blue-600"}),A.jsx("span",{children:"خريطة الوعي العقاري"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[A.jsx(Zc,{className:"w-4 h-4 text-purple-600"}),A.jsx("span",{children:"تحليلات متقدمة"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[A.jsx(sc,{className:"w-4 h-4 text-green-600"}),A.jsx("span",{children:"توقعات السوق"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[A.jsx(bf,{className:"w-4 h-4 text-amber-600"}),A.jsx("span",{children:"مقارنات الأحياء"})]})]})]})]})}),A.jsxs("div",{className:"mt-12 text-center",children:[A.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"هل لديك احتياجات خاصة؟"}),A.jsx(Sn,{variant:"outline",size:"lg",children:"تواصل معنا"})]})]})})}const e2="ABCDEFGHJKMNPQRSTUVWXYZ23456789",j3=7;function JT(e=j3){let t="";for(let i=0;i<e;i++){const a=Math.floor(Math.random()*e2.length);t+=e2[a]}return t}function O3(e){return!e||typeof e!="string"||e.length<6||e.length>8?!1:new RegExp(`^[${e2}]+$`).test(e)}function gk(e,t=null){return`${t||window.location.origin}/?ref=${e}`}async function k3(e){const t=gk(e);return`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(t)}`}function I3(e,t){if(!O3(t))throw new Error("رمز إحالة غير صالح");const i=JSON.parse(localStorage.getItem("muth_user_codes")||"{}");i[e]={code:t,createdAt:Date.now()},localStorage.setItem("muth_user_codes",JSON.stringify(i))}function D3(e){var i;return((i=JSON.parse(localStorage.getItem("muth_user_codes")||"{}")[e])==null?void 0:i.code)||null}function z3(e){let t=D3(e);if(!t){t=JT();const i=Object.values(JSON.parse(localStorage.getItem("muth_user_codes")||"{}")).map(f=>f.code);let a=0;for(;i.includes(t)&&a<10;)t=JT(),a++;I3(e,t)}return t}function N3(e){const i=JSON.parse(localStorage.getItem("muth_ref_usages")||"[]").filter(v=>v.code===e);return{clicks:JSON.parse(localStorage.getItem("muth_ref_events")||"[]").filter(v=>v.ref===e).filter(v=>v.type==="click").length,signups:i.length,qualified:i.filter(v=>v.verified).length,lastUsed:i.length>0?Math.max(...i.map(v=>v.timestamp)):null}}function R3(e){const t=[];return e>=1&&t.push({id:"early_access",name:"Early Access",nameAr:"وصول مبكر",description:"شارة Early Access + ظهور في لوحة الداعمين الأوائل",icon:"🌟",unlocked:!0}),e>=3&&t.push({id:"neighborhood_analysis",name:"Neighborhood Analysis",nameAr:"تحليل الحي المختصر",description:"تفعيل تحليل الحي المختصر مبكراً",icon:"🏘️",unlocked:!0}),e>=10&&t.push({id:"founder_tester",name:"Founder Tester",nameAr:"مختبر مؤسس",description:"وصول مبكّر للخريطة التفاعلية + شارة Founder Tester",icon:"👑",unlocked:!0}),e<3&&t.push({id:"neighborhood_analysis",name:"Neighborhood Analysis",nameAr:"تحليل الحي المختصر",description:`يحتاج ${3-e} إحالات إضافية`,icon:"🔒",unlocked:!1,required:3}),e<10&&t.push({id:"founder_tester",name:"Founder Tester",nameAr:"مختبر مؤسس",description:`يحتاج ${10-e} إحالات إضافية`,icon:"🔒",unlocked:!1,required:10}),t}function L3(){const[e]=ft.useState("demo_user"),[t,i]=ft.useState(""),[a,f]=ft.useState(""),[v,m]=ft.useState(""),[l,P]=ft.useState({clicks:0,signups:0,qualified:0}),[C,z]=ft.useState([]),[O,B]=ft.useState(!1),[F,X]=ft.useState(!1),[Z,U]=ft.useState(!1);ft.useEffect(()=>{const ue=z3(e);i(ue);const J=gk(ue);f(J);const ae=N3(ue);P(ae);const he=R3(ae.qualified);z(he),k3(ue).then(ve=>m(ve))},[e]);const re=()=>{navigator.clipboard.writeText(t),B(!0),setTimeout(()=>B(!1),2e3)},se=()=>{navigator.clipboard.writeText(a),X(!0),setTimeout(()=>X(!1),2e3)},ne=async()=>{if(navigator.share)try{await navigator.share({title:"مُثمّن - تقييم عقاري ذكي",text:"جرّب مُثمّن للتقييم العقاري بالذكاء الاصطناعي",url:a})}catch(ue){console.log("خطأ في المشاركة:",ue)}else se()};return A.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted/30 py-12 px-4",children:A.jsxs("div",{className:"container mx-auto max-w-5xl",children:[A.jsxs("div",{className:"text-center mb-12 space-y-4",children:[A.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-semibold mb-4",children:[A.jsx(KT,{className:"w-4 h-4"}),A.jsx("span",{children:"برنامج الإحالات"})]}),A.jsx("h1",{className:"text-4xl md:text-5xl font-black text-balance",children:"إحالاتي"}),A.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto text-balance",children:"انشر كودك وخَلّ مثمّن يكبر بعقلك"})]}),A.jsxs(nr,{className:"p-8 mb-8 card-gradient",children:[A.jsxs("div",{className:"text-center mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold mb-2",children:"رمز الإحالة الخاص بك"}),A.jsx("p",{className:"text-muted-foreground",children:"كل إحالة ترفع ذكاء المنصّة وتحجز لك مزايا خاصّة"})]}),A.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[A.jsx("div",{className:"px-8 py-4 bg-gradient-to-r from-primary/10 to-purple-100 rounded-xl border-2 border-primary/20",children:A.jsx("span",{className:"text-4xl font-black tracking-wider",children:t})}),A.jsx(Sn,{size:"lg",onClick:re,className:"gap-2",children:O?A.jsxs(A.Fragment,{children:[A.jsx(Uu,{className:"w-5 h-5"}),"تم النسخ"]}):A.jsxs(A.Fragment,{children:[A.jsx(mR,{className:"w-5 h-5"}),"نسخ"]})})]}),A.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 mb-6",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx(MR,{className:"w-4 h-4 text-muted-foreground"}),A.jsx("span",{className:"text-sm font-semibold",children:"رابط الإحالة"})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("input",{type:"text",value:a,readOnly:!0,className:"flex-1 bg-white px-4 py-2 rounded-lg text-sm border",dir:"ltr"}),A.jsx(Sn,{variant:"outline",size:"sm",onClick:se,children:F?"تم النسخ":"نسخ"})]})]}),A.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[A.jsxs(Sn,{variant:"outline",onClick:ne,className:"gap-2",children:[A.jsx(f3,{className:"w-4 h-4"}),"مشاركة"]}),A.jsxs(Sn,{variant:"outline",onClick:()=>U(!Z),className:"gap-2",children:[A.jsx(r3,{className:"w-4 h-4"}),Z?"إخفاء QR":"إظهار QR"]})]}),Z&&v&&A.jsxs("div",{className:"mt-6 text-center animate-slide-in",children:[A.jsx("img",{src:v,alt:"QR Code",className:"w-48 h-48 mx-auto rounded-lg border-2 border-border"}),A.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"امسح الكود للوصول السريع"})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[A.jsx(nr,{className:"p-6 hover-lift",children:A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:A.jsx(bf,{className:"w-6 h-6 text-blue-600"})}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-muted-foreground",children:"النقرات"}),A.jsx("p",{className:"text-3xl font-black",children:l.clicks})]})]})}),A.jsx(nr,{className:"p-6 hover-lift",children:A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:A.jsx(sc,{className:"w-6 h-6 text-green-600"})}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-muted-foreground",children:"التسجيلات"}),A.jsx("p",{className:"text-3xl font-black",children:l.signups})]})]})}),A.jsx(nr,{className:"p-6 hover-lift",children:A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:A.jsx(Uu,{className:"w-6 h-6 text-purple-600"})}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-muted-foreground",children:"المؤهلة"}),A.jsx("p",{className:"text-3xl font-black",children:l.qualified})]})]})})]}),A.jsxs(nr,{className:"p-8",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[A.jsx(KT,{className:"w-6 h-6 text-primary"}),A.jsx("h2",{className:"text-2xl font-bold",children:"جوائزك"})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(ue=>A.jsx("div",{className:`p-4 rounded-lg border-2 ${ue.unlocked?"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200":"bg-muted/30 border-border"}`,children:A.jsxs("div",{className:"flex items-start gap-3",children:[A.jsx("div",{className:"text-3xl",children:ue.icon}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx("h3",{className:"font-bold",children:ue.nameAr}),ue.unlocked&&A.jsx(Xg,{className:"bg-green-600",children:"مفعّلة"})]}),A.jsx("p",{className:"text-sm text-muted-foreground",children:ue.description})]})]})},ue.id))}),l.qualified<10&&A.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:A.jsxs("p",{className:"text-sm text-blue-900",children:["💡 ",A.jsx("strong",{children:"قريبًا:"})," خريطة الوعي العقاري الأولى في المملكة 🇸🇦",A.jsx("br",{}),"افتحها بدعمك المبكر - ",10-l.qualified," إحالات إضافية فقط!"]})})]}),A.jsx(nr,{className:"mt-8 p-6 bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-200",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx(Hc,{className:"w-6 h-6 text-purple-600 flex-shrink-0 mt-1"}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold mb-2",children:"كيف تعمل الإحالات؟"}),A.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[A.jsx("li",{children:"• شارك رمزك أو رابطك مع أصدقائك"}),A.jsx("li",{children:"• عند تسجيلهم، تُحسب إحالة جديدة لك"}),A.jsx("li",{children:'• بعد تأكيد البريد الإلكتروني، تصبح الإحالة "مؤهلة"'}),A.jsx("li",{children:"• كل 1، 3، 10 إحالات مؤهلة تفتح مكافأة جديدة"}),A.jsx("li",{children:"• الحد الأقصى: 50 إحالة شهرياً في النسخة التجريبية"})]})]})]})})]})})}function AS(e){const t=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];return String(e).replace(/\d/g,i=>t[i])}function wf(e,t=!0){if(e==null)return"-";const i=new Intl.NumberFormat("ar-SA").format(e);return t?AS(i):i}function od(e,t=1,i=!0){if(e==null)return"-";const a=(e*100).toFixed(t);return`${i?AS(a):a}٪`}function t2(e,t=!0){return`${wf(e,t)} ر.س/م²`}function r2(e,t=!0){return`${wf(e,t)} ر.س/م²/شهر`}function B3(e){const t=new Date(e);return new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"long",day:"numeric"}).format(t)}function yk(e,t=!0){return`${t?AS(e):e} يوم`}function n2(e,t=!0){return od(e,0,t)}function F3(e,t,i=!0){return`${wf(e,i)} - ${wf(t,i)} ر.س/م²`}function eA(e,t=!0){return e>=1e6?`${wf((e/1e6).toFixed(1),t)} مليون`:e>=1e3?`${wf((e/1e3).toFixed(1),t)} ألف`:wf(e,t)}function Rg(e,t="change"){return t==="change"?e>0?"text-green-600":e<0?"text-red-600":"text-muted-foreground":t==="confidence"?e>=.8?"text-green-600":e>=.6?"text-amber-600":"text-red-600":"text-foreground"}function $3({data:e}){const t=[{id:"sale",title:"سعر البيع",value:t2(e.national.sale_price_per_m2),change:e.national.sale_yoy,icon:Of,color:"blue"},{id:"rent",title:"سعر الإيجار",value:r2(e.national.rent_price_per_m2_month),change:e.national.rent_yoy,icon:Hg,color:"green"},{id:"sale_growth",title:"نمو البيع السنوي",value:od(e.national.sale_yoy),change:e.national.sale_yoy,icon:e.national.sale_yoy>0?sc:Jw,color:e.national.sale_yoy>0?"green":"red"},{id:"rent_growth",title:"نمو الإيجار السنوي",value:od(e.national.rent_yoy),change:e.national.rent_yoy,icon:e.national.rent_yoy>0?sc:Jw,color:e.national.rent_yoy>0?"green":"amber"},{id:"days_to_sell",title:"متوسط زمن البيع",value:yk(e.national.avg_days_to_sell),icon:uk,color:"purple"},{id:"confidence",title:"مستوى الثقة الوطني",value:n2(e.national.national_confidence),icon:pk,color:"amber"}],i=a=>{const f={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",red:"bg-red-100 text-red-600",amber:"bg-amber-100 text-amber-600",purple:"bg-purple-100 text-purple-600"};return f[a]||f.blue};return A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(a=>{const f=a.icon,v=i(a.color);return A.jsxs(nr,{className:"p-6 hover-lift",children:[A.jsxs("div",{className:"flex items-start justify-between mb-4",children:[A.jsx("div",{className:`p-3 rounded-xl ${v}`,children:A.jsx(f,{className:"w-6 h-6"})}),a.change!==void 0&&A.jsxs("div",{className:`text-sm font-semibold ${Rg(a.change,"change")}`,children:[a.change>0?"↗":a.change<0?"↘":"→"," ",od(Math.abs(a.change))]})]}),A.jsx("h3",{className:"text-sm text-muted-foreground mb-2",children:a.title}),A.jsx("p",{className:"text-2xl font-black",children:a.value})]},a.id)})})}function q3({cities:e}){const[t,i]=ft.useState(null);return A.jsxs("div",{children:[A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>A.jsxs(nr,{className:"p-6 hover-lift cursor-pointer",onClick:()=>i(a),children:[A.jsxs("div",{className:"flex items-start justify-between mb-4",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx($g,{className:"w-5 h-5 text-primary"}),A.jsx("h3",{className:"text-xl font-bold",children:a.name})]}),A.jsx(Xg,{variant:"secondary",children:n2(a.confidence)})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"سعر البيع"}),A.jsxs("div",{className:"flex items-baseline gap-2",children:[A.jsx("p",{className:"text-lg font-bold",children:t2(a.sale_price_per_m2)}),A.jsx("span",{className:`text-sm ${Rg(a.sale_yoy,"change")}`,children:od(a.sale_yoy)})]})]}),A.jsxs("div",{children:[A.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"سعر الإيجار"}),A.jsxs("div",{className:"flex items-baseline gap-2",children:[A.jsx("p",{className:"text-lg font-bold",children:r2(a.rent_price_per_m2_month)}),A.jsx("span",{className:`text-sm ${Rg(a.rent_yoy,"change")}`,children:od(a.rent_yoy)})]})]}),A.jsx("div",{className:"pt-3 border-t border-border",children:A.jsxs("div",{className:"flex items-center justify-between text-sm",children:[A.jsx("span",{className:"text-muted-foreground",children:"المعاملات"}),A.jsx("span",{className:"font-semibold",children:eA(a.transactions)})]})})]}),A.jsxs(Sn,{variant:"ghost",size:"sm",className:"w-full mt-4 gap-2",children:[A.jsx(zR,{className:"w-4 h-4"}),"عرض التفاصيل"]})]},a.id))}),t&&A.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>i(null),children:A.jsxs(nr,{className:"max-w-2xl w-full p-8 animate-slide-in",onClick:a=>a.stopPropagation(),children:[A.jsxs("div",{className:"flex items-start justify-between mb-6",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-3xl font-black mb-2",children:t.name}),A.jsx("p",{className:"text-muted-foreground",children:t.note})]}),A.jsx(Sn,{variant:"ghost",size:"sm",onClick:()=>i(null),children:"✕"})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[A.jsx(sc,{className:"w-4 h-4 text-blue-600"}),"أسعار البيع"]}),A.jsxs("div",{className:"space-y-2 text-sm",children:[A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-muted-foreground",children:"المتوسط"}),A.jsx("span",{className:"font-semibold",children:t2(t.sale_price_per_m2)})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-muted-foreground",children:"النطاق (P25-P75)"}),A.jsx("span",{className:"font-semibold text-xs",children:F3(t.sale_p25,t.sale_p75)})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-muted-foreground",children:"النمو السنوي"}),A.jsx("span",{className:`font-semibold ${Rg(t.sale_yoy,"change")}`,children:od(t.sale_yoy)})]})]})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[A.jsx(sc,{className:"w-4 h-4 text-green-600"}),"أسعار الإيجار"]}),A.jsxs("div",{className:"space-y-2 text-sm",children:[A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-muted-foreground",children:"المتوسط"}),A.jsx("span",{className:"font-semibold",children:r2(t.rent_price_per_m2_month)})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-muted-foreground",children:"النطاق (P25-P75)"}),A.jsxs("span",{className:"font-semibold text-xs",children:[tA(t.rent_p25)," - ",tA(t.rent_p75)," ر.س"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-muted-foreground",children:"النمو السنوي"}),A.jsx("span",{className:`font-semibold ${Rg(t.rent_yoy,"change")}`,children:od(t.rent_yoy)})]})]})]})]}),A.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-6 border-t border-border",children:[A.jsxs("div",{className:"text-center",children:[A.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"متوسط زمن البيع"}),A.jsx("p",{className:"text-lg font-bold",children:yk(t.avg_days_to_sell)})]}),A.jsxs("div",{className:"text-center",children:[A.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"عدد المعاملات"}),A.jsx("p",{className:"text-lg font-bold",children:eA(t.transactions)})]}),A.jsxs("div",{className:"text-center",children:[A.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"مستوى الثقة"}),A.jsx("p",{className:"text-lg font-bold",children:n2(t.confidence)})]})]})]})})]})}function tA(e){return new Intl.NumberFormat("ar-SA").format(e)}var Yx,rA;function ts(){if(rA)return Yx;rA=1;var e=Array.isArray;return Yx=e,Yx}var Kx,nA;function vk(){if(nA)return Kx;nA=1;var e=typeof Ev=="object"&&Ev&&Ev.Object===Object&&Ev;return Kx=e,Kx}var Qx,iA;function Kc(){if(iA)return Qx;iA=1;var e=vk(),t=typeof self=="object"&&self&&self.Object===Object&&self,i=e||t||Function("return this")();return Qx=i,Qx}var Jx,aA;function ky(){if(aA)return Jx;aA=1;var e=Kc(),t=e.Symbol;return Jx=t,Jx}var e0,oA;function U3(){if(oA)return e0;oA=1;var e=ky(),t=Object.prototype,i=t.hasOwnProperty,a=t.toString,f=e?e.toStringTag:void 0;function v(m){var l=i.call(m,f),P=m[f];try{m[f]=void 0;var C=!0}catch{}var z=a.call(m);return C&&(l?m[f]=P:delete m[f]),z}return e0=v,e0}var t0,sA;function V3(){if(sA)return t0;sA=1;var e=Object.prototype,t=e.toString;function i(a){return t.call(a)}return t0=i,t0}var r0,lA;function Ku(){if(lA)return r0;lA=1;var e=ky(),t=U3(),i=V3(),a="[object Null]",f="[object Undefined]",v=e?e.toStringTag:void 0;function m(l){return l==null?l===void 0?f:a:v&&v in Object(l)?t(l):i(l)}return r0=m,r0}var n0,cA;function Qu(){if(cA)return n0;cA=1;function e(t){return t!=null&&typeof t=="object"}return n0=e,n0}var i0,uA;function bm(){if(uA)return i0;uA=1;var e=Ku(),t=Qu(),i="[object Symbol]";function a(f){return typeof f=="symbol"||t(f)&&e(f)==i}return i0=a,i0}var a0,hA;function MS(){if(hA)return a0;hA=1;var e=ts(),t=bm(),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function f(v,m){if(e(v))return!1;var l=typeof v;return l=="number"||l=="symbol"||l=="boolean"||v==null||t(v)?!0:a.test(v)||!i.test(v)||m!=null&&v in Object(m)}return a0=f,a0}var o0,dA;function hd(){if(dA)return o0;dA=1;function e(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}return o0=e,o0}var s0,fA;function PS(){if(fA)return s0;fA=1;var e=Ku(),t=hd(),i="[object AsyncFunction]",a="[object Function]",f="[object GeneratorFunction]",v="[object Proxy]";function m(l){if(!t(l))return!1;var P=e(l);return P==a||P==f||P==i||P==v}return s0=m,s0}var l0,pA;function G3(){if(pA)return l0;pA=1;var e=Kc(),t=e["__core-js_shared__"];return l0=t,l0}var c0,mA;function Z3(){if(mA)return c0;mA=1;var e=G3(),t=function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function i(a){return!!t&&t in a}return c0=i,c0}var u0,gA;function _k(){if(gA)return u0;gA=1;var e=Function.prototype,t=e.toString;function i(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return u0=i,u0}var h0,yA;function H3(){if(yA)return h0;yA=1;var e=PS(),t=Z3(),i=hd(),a=_k(),f=/[\\^$.*+?()[\]{}|]/g,v=/^\[object .+?Constructor\]$/,m=Function.prototype,l=Object.prototype,P=m.toString,C=l.hasOwnProperty,z=RegExp("^"+P.call(C).replace(f,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function O(B){if(!i(B)||t(B))return!1;var F=e(B)?z:v;return F.test(a(B))}return h0=O,h0}var d0,vA;function X3(){if(vA)return d0;vA=1;function e(t,i){return t==null?void 0:t[i]}return d0=e,d0}var f0,_A;function kf(){if(_A)return f0;_A=1;var e=H3(),t=X3();function i(a,f){var v=t(a,f);return e(v)?v:void 0}return f0=i,f0}var p0,xA;function V_(){if(xA)return p0;xA=1;var e=kf(),t=e(Object,"create");return p0=t,p0}var m0,bA;function W3(){if(bA)return m0;bA=1;var e=V_();function t(){this.__data__=e?e(null):{},this.size=0}return m0=t,m0}var g0,wA;function Y3(){if(wA)return g0;wA=1;function e(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}return g0=e,g0}var y0,SA;function K3(){if(SA)return y0;SA=1;var e=V_(),t="__lodash_hash_undefined__",i=Object.prototype,a=i.hasOwnProperty;function f(v){var m=this.__data__;if(e){var l=m[v];return l===t?void 0:l}return a.call(m,v)?m[v]:void 0}return y0=f,y0}var v0,TA;function Q3(){if(TA)return v0;TA=1;var e=V_(),t=Object.prototype,i=t.hasOwnProperty;function a(f){var v=this.__data__;return e?v[f]!==void 0:i.call(v,f)}return v0=a,v0}var _0,AA;function J3(){if(AA)return _0;AA=1;var e=V_(),t="__lodash_hash_undefined__";function i(a,f){var v=this.__data__;return this.size+=this.has(a)?0:1,v[a]=e&&f===void 0?t:f,this}return _0=i,_0}var x0,MA;function e5(){if(MA)return x0;MA=1;var e=W3(),t=Y3(),i=K3(),a=Q3(),f=J3();function v(m){var l=-1,P=m==null?0:m.length;for(this.clear();++l<P;){var C=m[l];this.set(C[0],C[1])}}return v.prototype.clear=e,v.prototype.delete=t,v.prototype.get=i,v.prototype.has=a,v.prototype.set=f,x0=v,x0}var b0,PA;function t5(){if(PA)return b0;PA=1;function e(){this.__data__=[],this.size=0}return b0=e,b0}var w0,EA;function ES(){if(EA)return w0;EA=1;function e(t,i){return t===i||t!==t&&i!==i}return w0=e,w0}var S0,CA;function G_(){if(CA)return S0;CA=1;var e=ES();function t(i,a){for(var f=i.length;f--;)if(e(i[f][0],a))return f;return-1}return S0=t,S0}var T0,jA;function r5(){if(jA)return T0;jA=1;var e=G_(),t=Array.prototype,i=t.splice;function a(f){var v=this.__data__,m=e(v,f);if(m<0)return!1;var l=v.length-1;return m==l?v.pop():i.call(v,m,1),--this.size,!0}return T0=a,T0}var A0,OA;function n5(){if(OA)return A0;OA=1;var e=G_();function t(i){var a=this.__data__,f=e(a,i);return f<0?void 0:a[f][1]}return A0=t,A0}var M0,kA;function i5(){if(kA)return M0;kA=1;var e=G_();function t(i){return e(this.__data__,i)>-1}return M0=t,M0}var P0,IA;function a5(){if(IA)return P0;IA=1;var e=G_();function t(i,a){var f=this.__data__,v=e(f,i);return v<0?(++this.size,f.push([i,a])):f[v][1]=a,this}return P0=t,P0}var E0,DA;function Z_(){if(DA)return E0;DA=1;var e=t5(),t=r5(),i=n5(),a=i5(),f=a5();function v(m){var l=-1,P=m==null?0:m.length;for(this.clear();++l<P;){var C=m[l];this.set(C[0],C[1])}}return v.prototype.clear=e,v.prototype.delete=t,v.prototype.get=i,v.prototype.has=a,v.prototype.set=f,E0=v,E0}var C0,zA;function CS(){if(zA)return C0;zA=1;var e=kf(),t=Kc(),i=e(t,"Map");return C0=i,C0}var j0,NA;function o5(){if(NA)return j0;NA=1;var e=e5(),t=Z_(),i=CS();function a(){this.size=0,this.__data__={hash:new e,map:new(i||t),string:new e}}return j0=a,j0}var O0,RA;function s5(){if(RA)return O0;RA=1;function e(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}return O0=e,O0}var k0,LA;function H_(){if(LA)return k0;LA=1;var e=s5();function t(i,a){var f=i.__data__;return e(a)?f[typeof a=="string"?"string":"hash"]:f.map}return k0=t,k0}var I0,BA;function l5(){if(BA)return I0;BA=1;var e=H_();function t(i){var a=e(this,i).delete(i);return this.size-=a?1:0,a}return I0=t,I0}var D0,FA;function c5(){if(FA)return D0;FA=1;var e=H_();function t(i){return e(this,i).get(i)}return D0=t,D0}var z0,$A;function u5(){if($A)return z0;$A=1;var e=H_();function t(i){return e(this,i).has(i)}return z0=t,z0}var N0,qA;function h5(){if(qA)return N0;qA=1;var e=H_();function t(i,a){var f=e(this,i),v=f.size;return f.set(i,a),this.size+=f.size==v?0:1,this}return N0=t,N0}var R0,UA;function jS(){if(UA)return R0;UA=1;var e=o5(),t=l5(),i=c5(),a=u5(),f=h5();function v(m){var l=-1,P=m==null?0:m.length;for(this.clear();++l<P;){var C=m[l];this.set(C[0],C[1])}}return v.prototype.clear=e,v.prototype.delete=t,v.prototype.get=i,v.prototype.has=a,v.prototype.set=f,R0=v,R0}var L0,VA;function xk(){if(VA)return L0;VA=1;var e=jS(),t="Expected a function";function i(a,f){if(typeof a!="function"||f!=null&&typeof f!="function")throw new TypeError(t);var v=function(){var m=arguments,l=f?f.apply(this,m):m[0],P=v.cache;if(P.has(l))return P.get(l);var C=a.apply(this,m);return v.cache=P.set(l,C)||P,C};return v.cache=new(i.Cache||e),v}return i.Cache=e,L0=i,L0}var B0,GA;function d5(){if(GA)return B0;GA=1;var e=xk(),t=500;function i(a){var f=e(a,function(m){return v.size===t&&v.clear(),m}),v=f.cache;return f}return B0=i,B0}var F0,ZA;function f5(){if(ZA)return F0;ZA=1;var e=d5(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=e(function(f){var v=[];return f.charCodeAt(0)===46&&v.push(""),f.replace(t,function(m,l,P,C){v.push(P?C.replace(i,"$1"):l||m)}),v});return F0=a,F0}var $0,HA;function OS(){if(HA)return $0;HA=1;function e(t,i){for(var a=-1,f=t==null?0:t.length,v=Array(f);++a<f;)v[a]=i(t[a],a,t);return v}return $0=e,$0}var q0,XA;function p5(){if(XA)return q0;XA=1;var e=ky(),t=OS(),i=ts(),a=bm(),f=e?e.prototype:void 0,v=f?f.toString:void 0;function m(l){if(typeof l=="string")return l;if(i(l))return t(l,m)+"";if(a(l))return v?v.call(l):"";var P=l+"";return P=="0"&&1/l==-1/0?"-0":P}return q0=m,q0}var U0,WA;function bk(){if(WA)return U0;WA=1;var e=p5();function t(i){return i==null?"":e(i)}return U0=t,U0}var V0,YA;function wk(){if(YA)return V0;YA=1;var e=ts(),t=MS(),i=f5(),a=bk();function f(v,m){return e(v)?v:t(v,m)?[v]:i(a(v))}return V0=f,V0}var G0,KA;function X_(){if(KA)return G0;KA=1;var e=bm();function t(i){if(typeof i=="string"||e(i))return i;var a=i+"";return a=="0"&&1/i==-1/0?"-0":a}return G0=t,G0}var Z0,QA;function kS(){if(QA)return Z0;QA=1;var e=wk(),t=X_();function i(a,f){f=e(f,a);for(var v=0,m=f.length;a!=null&&v<m;)a=a[t(f[v++])];return v&&v==m?a:void 0}return Z0=i,Z0}var H0,JA;function Sk(){if(JA)return H0;JA=1;var e=kS();function t(i,a,f){var v=i==null?void 0:e(i,a);return v===void 0?f:v}return H0=t,H0}var m5=Sk();const al=Bn(m5);var X0,eM;function g5(){if(eM)return X0;eM=1;function e(t){return t==null}return X0=e,X0}var y5=g5();const Wr=Bn(y5);var W0,tM;function v5(){if(tM)return W0;tM=1;var e=Ku(),t=ts(),i=Qu(),a="[object String]";function f(v){return typeof v=="string"||!t(v)&&i(v)&&e(v)==a}return W0=f,W0}var _5=v5();const Mf=Bn(_5);var x5=PS();const Lr=Bn(x5);var b5=hd();const wm=Bn(b5);var Y0={exports:{}},bn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rM;function w5(){if(rM)return bn;rM=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),m=Symbol.for("react.context"),l=Symbol.for("react.server_context"),P=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),X;X=Symbol.for("react.module.reference");function Z(U){if(typeof U=="object"&&U!==null){var re=U.$$typeof;switch(re){case e:switch(U=U.type,U){case i:case f:case a:case C:case z:return U;default:switch(U=U&&U.$$typeof,U){case l:case m:case P:case B:case O:case v:return U;default:return re}}case t:return re}}}return bn.ContextConsumer=m,bn.ContextProvider=v,bn.Element=e,bn.ForwardRef=P,bn.Fragment=i,bn.Lazy=B,bn.Memo=O,bn.Portal=t,bn.Profiler=f,bn.StrictMode=a,bn.Suspense=C,bn.SuspenseList=z,bn.isAsyncMode=function(){return!1},bn.isConcurrentMode=function(){return!1},bn.isContextConsumer=function(U){return Z(U)===m},bn.isContextProvider=function(U){return Z(U)===v},bn.isElement=function(U){return typeof U=="object"&&U!==null&&U.$$typeof===e},bn.isForwardRef=function(U){return Z(U)===P},bn.isFragment=function(U){return Z(U)===i},bn.isLazy=function(U){return Z(U)===B},bn.isMemo=function(U){return Z(U)===O},bn.isPortal=function(U){return Z(U)===t},bn.isProfiler=function(U){return Z(U)===f},bn.isStrictMode=function(U){return Z(U)===a},bn.isSuspense=function(U){return Z(U)===C},bn.isSuspenseList=function(U){return Z(U)===z},bn.isValidElementType=function(U){return typeof U=="string"||typeof U=="function"||U===i||U===f||U===a||U===C||U===z||U===F||typeof U=="object"&&U!==null&&(U.$$typeof===B||U.$$typeof===O||U.$$typeof===v||U.$$typeof===m||U.$$typeof===P||U.$$typeof===X||U.getModuleId!==void 0)},bn.typeOf=Z,bn}var nM;function S5(){return nM||(nM=1,Y0.exports=w5()),Y0.exports}var T5=S5(),K0,iM;function Tk(){if(iM)return K0;iM=1;var e=Ku(),t=Qu(),i="[object Number]";function a(f){return typeof f=="number"||t(f)&&e(f)==i}return K0=a,K0}var Q0,aM;function A5(){if(aM)return Q0;aM=1;var e=Tk();function t(i){return e(i)&&i!=+i}return Q0=t,Q0}var M5=A5();const Iy=Bn(M5);var P5=Tk();const E5=Bn(P5);var oc=function(t){return t===0?0:t>0?1:-1},yf=function(t){return Mf(t)&&t.indexOf("%")===t.length-1},zt=function(t){return E5(t)&&!Iy(t)},la=function(t){return zt(t)||Mf(t)},C5=0,Dy=function(t){var i=++C5;return"".concat(t||"").concat(i)},Pf=function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!zt(t)&&!Mf(t))return a;var v;if(yf(t)){var m=t.indexOf("%");v=i*parseFloat(t.slice(0,m))/100}else v=+t;return Iy(v)&&(v=a),f&&v>i&&(v=i),v},ad=function(t){if(!t)return null;var i=Object.keys(t);return i&&i.length?t[i[0]]:null},j5=function(t){if(!Array.isArray(t))return!1;for(var i=t.length,a={},f=0;f<i;f++)if(!a[t[f]])a[t[f]]=!0;else return!0;return!1},ic=function(t,i){return zt(t)&&zt(i)?function(a){return t+a*(i-t)}:function(){return i}};function Hv(e,t,i){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):al(a,t))===i})}var O5=function(t,i){return zt(t)&&zt(i)?t-i:Mf(t)&&Mf(i)?t.localeCompare(i):t instanceof Date&&i instanceof Date?t.getTime()-i.getTime():String(t).localeCompare(String(i))};function Hp(e,t){for(var i in e)if({}.hasOwnProperty.call(e,i)&&(!{}.hasOwnProperty.call(t,i)||e[i]!==t[i]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function i2(e){"@babel/helpers - typeof";return i2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i2(e)}var k5=["viewBox","children"],I5=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],oM=["points","pathLength"],J0={svg:k5,polygon:oM,polyline:oM},IS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Xv=function(t,i){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(ft.isValidElement(t)&&(a=t.props),!wm(a))return null;var f={};return Object.keys(a).forEach(function(v){IS.includes(v)&&(f[v]=i||function(m){return a[v](a,m)})}),f},D5=function(t,i,a){return function(f){return t(i,a,f),null}},Wv=function(t,i,a){if(!wm(t)||i2(t)!=="object")return null;var f=null;return Object.keys(t).forEach(function(v){var m=t[v];IS.includes(v)&&typeof m=="function"&&(f||(f={}),f[v]=D5(m,i,a))}),f},z5=["children"],N5=["children"];function sM(e,t){if(e==null)return{};var i=R5(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function R5(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function a2(e){"@babel/helpers - typeof";return a2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a2(e)}var lM={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Vu=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},cM=null,eb=null,DS=function e(t){if(t===cM&&Array.isArray(eb))return eb;var i=[];return ft.Children.forEach(t,function(a){Wr(a)||(T5.isFragment(a)?i=i.concat(e(a.props.children)):i.push(a))}),eb=i,cM=t,i};function ol(e,t){var i=[],a=[];return Array.isArray(t)?a=t.map(function(f){return Vu(f)}):a=[Vu(t)],DS(e).forEach(function(f){var v=al(f,"type.displayName")||al(f,"type.name");a.indexOf(v)!==-1&&i.push(f)}),i}function bs(e,t){var i=ol(e,t);return i&&i[0]}var uM=function(t){if(!t||!t.props)return!1;var i=t.props,a=i.width,f=i.height;return!(!zt(a)||a<=0||!zt(f)||f<=0)},L5=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],B5=function(t){return t&&t.type&&Mf(t.type)&&L5.indexOf(t.type)>=0},F5=function(t){return t&&a2(t)==="object"&&"clipDot"in t},$5=function(t,i,a,f){var v,m=(v=J0==null?void 0:J0[f])!==null&&v!==void 0?v:[];return i.startsWith("data-")||!Lr(t)&&(f&&m.includes(i)||I5.includes(i))||a&&IS.includes(i)},en=function(t,i,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var f=t;if(ft.isValidElement(t)&&(f=t.props),!wm(f))return null;var v={};return Object.keys(f).forEach(function(m){var l;$5((l=f)===null||l===void 0?void 0:l[m],m,i,a)&&(v[m]=f[m])}),v},o2=function e(t,i){if(t===i)return!0;var a=ft.Children.count(t);if(a!==ft.Children.count(i))return!1;if(a===0)return!0;if(a===1)return hM(Array.isArray(t)?t[0]:t,Array.isArray(i)?i[0]:i);for(var f=0;f<a;f++){var v=t[f],m=i[f];if(Array.isArray(v)||Array.isArray(m)){if(!e(v,m))return!1}else if(!hM(v,m))return!1}return!0},hM=function(t,i){if(Wr(t)&&Wr(i))return!0;if(!Wr(t)&&!Wr(i)){var a=t.props||{},f=a.children,v=sM(a,z5),m=i.props||{},l=m.children,P=sM(m,N5);return f&&l?Hp(v,P)&&o2(f,l):!f&&!l?Hp(v,P):!1}return!1},dM=function(t,i){var a=[],f={};return DS(t).forEach(function(v,m){if(B5(v))a.push(v);else if(v){var l=Vu(v.type),P=i[l]||{},C=P.handler,z=P.once;if(C&&(!z||!f[l])){var O=C(v,l,m);a.push(O),f[l]=!0}}}),a},q5=function(t){var i=t&&t.type;return i&&lM[i]?lM[i]:null},U5=function(t,i){return DS(i).indexOf(t)},V5=["children","width","height","viewBox","className","style","title","desc"];function s2(){return s2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},s2.apply(this,arguments)}function G5(e,t){if(e==null)return{};var i=Z5(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Z5(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function l2(e){var t=e.children,i=e.width,a=e.height,f=e.viewBox,v=e.className,m=e.style,l=e.title,P=e.desc,C=G5(e,V5),z=f||{width:i,height:a,x:0,y:0},O=sn("recharts-surface",v);return $e.createElement("svg",s2({},en(C,!0,"svg"),{className:O,width:i,height:a,style:m,viewBox:"".concat(z.x," ").concat(z.y," ").concat(z.width," ").concat(z.height)}),$e.createElement("title",null,l),$e.createElement("desc",null,P),t)}var H5=["children","className"];function c2(){return c2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},c2.apply(this,arguments)}function X5(e,t){if(e==null)return{};var i=W5(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function W5(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var Oi=$e.forwardRef(function(e,t){var i=e.children,a=e.className,f=X5(e,H5),v=sn("recharts-layer",a);return $e.createElement("g",c2({className:v},en(f,!0),{ref:t}),i)}),Gu=function(t,i){for(var a=arguments.length,f=new Array(a>2?a-2:0),v=2;v<a;v++)f[v-2]=arguments[v]},tb,fM;function Y5(){if(fM)return tb;fM=1;function e(t,i,a){var f=-1,v=t.length;i<0&&(i=-i>v?0:v+i),a=a>v?v:a,a<0&&(a+=v),v=i>a?0:a-i>>>0,i>>>=0;for(var m=Array(v);++f<v;)m[f]=t[f+i];return m}return tb=e,tb}var rb,pM;function K5(){if(pM)return rb;pM=1;var e=Y5();function t(i,a,f){var v=i.length;return f=f===void 0?v:f,!a&&f>=v?i:e(i,a,f)}return rb=t,rb}var nb,mM;function Ak(){if(mM)return nb;mM=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",f=t+i+a,v="\\ufe0e\\ufe0f",m="\\u200d",l=RegExp("["+m+e+f+v+"]");function P(C){return l.test(C)}return nb=P,nb}var ib,gM;function Q5(){if(gM)return ib;gM=1;function e(t){return t.split("")}return ib=e,ib}var ab,yM;function J5(){if(yM)return ab;yM=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",f=t+i+a,v="\\ufe0e\\ufe0f",m="["+e+"]",l="["+f+"]",P="\\ud83c[\\udffb-\\udfff]",C="(?:"+l+"|"+P+")",z="[^"+e+"]",O="(?:\\ud83c[\\udde6-\\uddff]){2}",B="[\\ud800-\\udbff][\\udc00-\\udfff]",F="\\u200d",X=C+"?",Z="["+v+"]?",U="(?:"+F+"(?:"+[z,O,B].join("|")+")"+Z+X+")*",re=Z+X+U,se="(?:"+[z+l+"?",l,O,B,m].join("|")+")",ne=RegExp(P+"(?="+P+")|"+se+re,"g");function ue(J){return J.match(ne)||[]}return ab=ue,ab}var ob,vM;function e4(){if(vM)return ob;vM=1;var e=Q5(),t=Ak(),i=J5();function a(f){return t(f)?i(f):e(f)}return ob=a,ob}var sb,_M;function t4(){if(_M)return sb;_M=1;var e=K5(),t=Ak(),i=e4(),a=bk();function f(v){return function(m){m=a(m);var l=t(m)?i(m):void 0,P=l?l[0]:m.charAt(0),C=l?e(l,1).join(""):m.slice(1);return P[v]()+C}}return sb=f,sb}var lb,xM;function r4(){if(xM)return lb;xM=1;var e=t4(),t=e("toUpperCase");return lb=t,lb}var n4=r4();const W_=Bn(n4);function Xn(e){return function(){return e}}const Mk=Math.cos,Yv=Math.sin,lc=Math.sqrt,Kv=Math.PI,Y_=2*Kv,u2=Math.PI,h2=2*u2,pf=1e-6,i4=h2-pf;function Pk(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function a4(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Pk;const i=10**t;return function(a){this._+=a[0];for(let f=1,v=a.length;f<v;++f)this._+=Math.round(arguments[f]*i)/i+a[f]}}class o4{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Pk:a4(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,a,f){this._append`Q${+t},${+i},${this._x1=+a},${this._y1=+f}`}bezierCurveTo(t,i,a,f,v,m){this._append`C${+t},${+i},${+a},${+f},${this._x1=+v},${this._y1=+m}`}arcTo(t,i,a,f,v){if(t=+t,i=+i,a=+a,f=+f,v=+v,v<0)throw new Error(`negative radius: ${v}`);let m=this._x1,l=this._y1,P=a-t,C=f-i,z=m-t,O=l-i,B=z*z+O*O;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(B>pf)if(!(Math.abs(O*P-C*z)>pf)||!v)this._append`L${this._x1=t},${this._y1=i}`;else{let F=a-m,X=f-l,Z=P*P+C*C,U=F*F+X*X,re=Math.sqrt(Z),se=Math.sqrt(B),ne=v*Math.tan((u2-Math.acos((Z+B-U)/(2*re*se)))/2),ue=ne/se,J=ne/re;Math.abs(ue-1)>pf&&this._append`L${t+ue*z},${i+ue*O}`,this._append`A${v},${v},0,0,${+(O*F>z*X)},${this._x1=t+J*P},${this._y1=i+J*C}`}}arc(t,i,a,f,v,m){if(t=+t,i=+i,a=+a,m=!!m,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(f),P=a*Math.sin(f),C=t+l,z=i+P,O=1^m,B=m?f-v:v-f;this._x1===null?this._append`M${C},${z}`:(Math.abs(this._x1-C)>pf||Math.abs(this._y1-z)>pf)&&this._append`L${C},${z}`,a&&(B<0&&(B=B%h2+h2),B>i4?this._append`A${a},${a},0,1,${O},${t-l},${i-P}A${a},${a},0,1,${O},${this._x1=C},${this._y1=z}`:B>pf&&this._append`A${a},${a},0,${+(B>=u2)},${O},${this._x1=t+a*Math.cos(v)},${this._y1=i+a*Math.sin(v)}`)}rect(t,i,a,f){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${a=+a}v${+f}h${-a}Z`}toString(){return this._}}function zS(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const a=Math.floor(i);if(!(a>=0))throw new RangeError(`invalid digits: ${i}`);t=a}return e},()=>new o4(t)}function NS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ek(e){this._context=e}Ek.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function K_(e){return new Ek(e)}function Ck(e){return e[0]}function jk(e){return e[1]}function Ok(e,t){var i=Xn(!0),a=null,f=K_,v=null,m=zS(l);e=typeof e=="function"?e:e===void 0?Ck:Xn(e),t=typeof t=="function"?t:t===void 0?jk:Xn(t);function l(P){var C,z=(P=NS(P)).length,O,B=!1,F;for(a==null&&(v=f(F=m())),C=0;C<=z;++C)!(C<z&&i(O=P[C],C,P))===B&&((B=!B)?v.lineStart():v.lineEnd()),B&&v.point(+e(O,C,P),+t(O,C,P));if(F)return v=null,F+""||null}return l.x=function(P){return arguments.length?(e=typeof P=="function"?P:Xn(+P),l):e},l.y=function(P){return arguments.length?(t=typeof P=="function"?P:Xn(+P),l):t},l.defined=function(P){return arguments.length?(i=typeof P=="function"?P:Xn(!!P),l):i},l.curve=function(P){return arguments.length?(f=P,a!=null&&(v=f(a)),l):f},l.context=function(P){return arguments.length?(P==null?a=v=null:v=f(a=P),l):a},l}function Ov(e,t,i){var a=null,f=Xn(!0),v=null,m=K_,l=null,P=zS(C);e=typeof e=="function"?e:e===void 0?Ck:Xn(+e),t=typeof t=="function"?t:Xn(t===void 0?0:+t),i=typeof i=="function"?i:i===void 0?jk:Xn(+i);function C(O){var B,F,X,Z=(O=NS(O)).length,U,re=!1,se,ne=new Array(Z),ue=new Array(Z);for(v==null&&(l=m(se=P())),B=0;B<=Z;++B){if(!(B<Z&&f(U=O[B],B,O))===re)if(re=!re)F=B,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),X=B-1;X>=F;--X)l.point(ne[X],ue[X]);l.lineEnd(),l.areaEnd()}re&&(ne[B]=+e(U,B,O),ue[B]=+t(U,B,O),l.point(a?+a(U,B,O):ne[B],i?+i(U,B,O):ue[B]))}if(se)return l=null,se+""||null}function z(){return Ok().defined(f).curve(m).context(v)}return C.x=function(O){return arguments.length?(e=typeof O=="function"?O:Xn(+O),a=null,C):e},C.x0=function(O){return arguments.length?(e=typeof O=="function"?O:Xn(+O),C):e},C.x1=function(O){return arguments.length?(a=O==null?null:typeof O=="function"?O:Xn(+O),C):a},C.y=function(O){return arguments.length?(t=typeof O=="function"?O:Xn(+O),i=null,C):t},C.y0=function(O){return arguments.length?(t=typeof O=="function"?O:Xn(+O),C):t},C.y1=function(O){return arguments.length?(i=O==null?null:typeof O=="function"?O:Xn(+O),C):i},C.lineX0=C.lineY0=function(){return z().x(e).y(t)},C.lineY1=function(){return z().x(e).y(i)},C.lineX1=function(){return z().x(a).y(t)},C.defined=function(O){return arguments.length?(f=typeof O=="function"?O:Xn(!!O),C):f},C.curve=function(O){return arguments.length?(m=O,v!=null&&(l=m(v)),C):m},C.context=function(O){return arguments.length?(O==null?v=l=null:l=m(v=O),C):v},C}class kk{constructor(t,i){this._context=t,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,i){switch(t=+t,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,i,t,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,t,this._y0,t,i);break}}this._x0=t,this._y0=i}}function s4(e){return new kk(e,!0)}function l4(e){return new kk(e,!1)}const RS={draw(e,t){const i=lc(t/Kv);e.moveTo(i,0),e.arc(0,0,i,0,Y_)}},c4={draw(e,t){const i=lc(t/5)/2;e.moveTo(-3*i,-i),e.lineTo(-i,-i),e.lineTo(-i,-3*i),e.lineTo(i,-3*i),e.lineTo(i,-i),e.lineTo(3*i,-i),e.lineTo(3*i,i),e.lineTo(i,i),e.lineTo(i,3*i),e.lineTo(-i,3*i),e.lineTo(-i,i),e.lineTo(-3*i,i),e.closePath()}},Ik=lc(1/3),u4=Ik*2,h4={draw(e,t){const i=lc(t/u4),a=i*Ik;e.moveTo(0,-i),e.lineTo(a,0),e.lineTo(0,i),e.lineTo(-a,0),e.closePath()}},d4={draw(e,t){const i=lc(t),a=-i/2;e.rect(a,a,i,i)}},f4=.8908130915292852,Dk=Yv(Kv/10)/Yv(7*Kv/10),p4=Yv(Y_/10)*Dk,m4=-Mk(Y_/10)*Dk,g4={draw(e,t){const i=lc(t*f4),a=p4*i,f=m4*i;e.moveTo(0,-i),e.lineTo(a,f);for(let v=1;v<5;++v){const m=Y_*v/5,l=Mk(m),P=Yv(m);e.lineTo(P*i,-l*i),e.lineTo(l*a-P*f,P*a+l*f)}e.closePath()}},cb=lc(3),y4={draw(e,t){const i=-lc(t/(cb*3));e.moveTo(0,i*2),e.lineTo(-cb*i,-i),e.lineTo(cb*i,-i),e.closePath()}},rl=-.5,nl=lc(3)/2,d2=1/lc(12),v4=(d2/2+1)*3,_4={draw(e,t){const i=lc(t/v4),a=i/2,f=i*d2,v=a,m=i*d2+i,l=-v,P=m;e.moveTo(a,f),e.lineTo(v,m),e.lineTo(l,P),e.lineTo(rl*a-nl*f,nl*a+rl*f),e.lineTo(rl*v-nl*m,nl*v+rl*m),e.lineTo(rl*l-nl*P,nl*l+rl*P),e.lineTo(rl*a+nl*f,rl*f-nl*a),e.lineTo(rl*v+nl*m,rl*m-nl*v),e.lineTo(rl*l+nl*P,rl*P-nl*l),e.closePath()}};function x4(e,t){let i=null,a=zS(f);e=typeof e=="function"?e:Xn(e||RS),t=typeof t=="function"?t:Xn(t===void 0?64:+t);function f(){let v;if(i||(i=v=a()),e.apply(this,arguments).draw(i,+t.apply(this,arguments)),v)return i=null,v+""||null}return f.type=function(v){return arguments.length?(e=typeof v=="function"?v:Xn(v),f):e},f.size=function(v){return arguments.length?(t=typeof v=="function"?v:Xn(+v),f):t},f.context=function(v){return arguments.length?(i=v??null,f):i},f}function Qv(){}function Jv(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function zk(e){this._context=e}zk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Jv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Jv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function b4(e){return new zk(e)}function Nk(e){this._context=e}Nk.prototype={areaStart:Qv,areaEnd:Qv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Jv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function w4(e){return new Nk(e)}function Rk(e){this._context=e}Rk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,a):this._context.moveTo(i,a);break;case 3:this._point=4;default:Jv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function S4(e){return new Rk(e)}function Lk(e){this._context=e}Lk.prototype={areaStart:Qv,areaEnd:Qv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function T4(e){return new Lk(e)}function bM(e){return e<0?-1:1}function wM(e,t,i){var a=e._x1-e._x0,f=t-e._x1,v=(e._y1-e._y0)/(a||f<0&&-0),m=(i-e._y1)/(f||a<0&&-0),l=(v*f+m*a)/(a+f);return(bM(v)+bM(m))*Math.min(Math.abs(v),Math.abs(m),.5*Math.abs(l))||0}function SM(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function ub(e,t,i){var a=e._x0,f=e._y0,v=e._x1,m=e._y1,l=(v-a)/3;e._context.bezierCurveTo(a+l,f+l*t,v-l,m-l*i,v,m)}function e_(e){this._context=e}e_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ub(this,this._t0,SM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var i=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ub(this,SM(this,i=wM(this,e,t)),i);break;default:ub(this,this._t0,i=wM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}};function Bk(e){this._context=new Fk(e)}(Bk.prototype=Object.create(e_.prototype)).point=function(e,t){e_.prototype.point.call(this,t,e)};function Fk(e){this._context=e}Fk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,i,a,f,v){this._context.bezierCurveTo(t,e,a,i,v,f)}};function A4(e){return new e_(e)}function M4(e){return new Bk(e)}function $k(e){this._context=e}$k.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,i=e.length;if(i)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),i===2)this._context.lineTo(e[1],t[1]);else for(var a=TM(e),f=TM(t),v=0,m=1;m<i;++v,++m)this._context.bezierCurveTo(a[0][v],f[0][v],a[1][v],f[1][v],e[m],t[m]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function TM(e){var t,i=e.length-1,a,f=new Array(i),v=new Array(i),m=new Array(i);for(f[0]=0,v[0]=2,m[0]=e[0]+2*e[1],t=1;t<i-1;++t)f[t]=1,v[t]=4,m[t]=4*e[t]+2*e[t+1];for(f[i-1]=2,v[i-1]=7,m[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)a=f[t]/v[t-1],v[t]-=a,m[t]-=a*m[t-1];for(f[i-1]=m[i-1]/v[i-1],t=i-2;t>=0;--t)f[t]=(m[t]-f[t+1])/v[t];for(v[i-1]=(e[i]+f[i-1])/2,t=0;t<i-1;++t)v[t]=2*e[t+1]-f[t+1];return[f,v]}function P4(e){return new $k(e)}function Q_(e,t){this._context=e,this._t=t}Q_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}break}}this._x=e,this._y=t}};function E4(e){return new Q_(e,.5)}function C4(e){return new Q_(e,0)}function j4(e){return new Q_(e,1)}function Yp(e,t){if((m=e.length)>1)for(var i=1,a,f,v=e[t[0]],m,l=v.length;i<m;++i)for(f=v,v=e[t[i]],a=0;a<l;++a)v[a][1]+=v[a][0]=isNaN(f[a][1])?f[a][0]:f[a][1]}function f2(e){for(var t=e.length,i=new Array(t);--t>=0;)i[t]=t;return i}function O4(e,t){return e[t]}function k4(e){const t=[];return t.key=e,t}function I4(){var e=Xn([]),t=f2,i=Yp,a=O4;function f(v){var m=Array.from(e.apply(this,arguments),k4),l,P=m.length,C=-1,z;for(const O of v)for(l=0,++C;l<P;++l)(m[l][C]=[0,+a(O,m[l].key,C,v)]).data=O;for(l=0,z=NS(t(m));l<P;++l)m[z[l]].index=l;return i(m,z),m}return f.keys=function(v){return arguments.length?(e=typeof v=="function"?v:Xn(Array.from(v)),f):e},f.value=function(v){return arguments.length?(a=typeof v=="function"?v:Xn(+v),f):a},f.order=function(v){return arguments.length?(t=v==null?f2:typeof v=="function"?v:Xn(Array.from(v)),f):t},f.offset=function(v){return arguments.length?(i=v??Yp,f):i},f}function D4(e,t){if((a=e.length)>0){for(var i,a,f=0,v=e[0].length,m;f<v;++f){for(m=i=0;i<a;++i)m+=e[i][f][1]||0;if(m)for(i=0;i<a;++i)e[i][f][1]/=m}Yp(e,t)}}function z4(e,t){if((f=e.length)>0){for(var i=0,a=e[t[0]],f,v=a.length;i<v;++i){for(var m=0,l=0;m<f;++m)l+=e[m][i][1]||0;a[i][1]+=a[i][0]=-l/2}Yp(e,t)}}function N4(e,t){if(!(!((m=e.length)>0)||!((v=(f=e[t[0]]).length)>0))){for(var i=0,a=1,f,v,m;a<v;++a){for(var l=0,P=0,C=0;l<m;++l){for(var z=e[t[l]],O=z[a][1]||0,B=z[a-1][1]||0,F=(O-B)/2,X=0;X<l;++X){var Z=e[t[X]],U=Z[a][1]||0,re=Z[a-1][1]||0;F+=U-re}P+=O,C+=F*O}f[a-1][1]+=f[a-1][0]=i,P&&(i-=C/P)}f[a-1][1]+=f[a-1][0]=i,Yp(e,t)}}function Wg(e){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wg(e)}var R4=["type","size","sizeType"];function p2(){return p2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},p2.apply(this,arguments)}function AM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function MM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?AM(Object(i),!0).forEach(function(a){L4(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):AM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function L4(e,t,i){return t=B4(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function B4(e){var t=F4(e,"string");return Wg(t)=="symbol"?t:t+""}function F4(e,t){if(Wg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Wg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $4(e,t){if(e==null)return{};var i=q4(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function q4(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var qk={symbolCircle:RS,symbolCross:c4,symbolDiamond:h4,symbolSquare:d4,symbolStar:g4,symbolTriangle:y4,symbolWye:_4},U4=Math.PI/180,V4=function(t){var i="symbol".concat(W_(t));return qk[i]||RS},G4=function(t,i,a){if(i==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var f=18*U4;return 1.25*t*t*(Math.tan(f)-Math.tan(f*2)*Math.pow(Math.tan(f),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Z4=function(t,i){qk["symbol".concat(W_(t))]=i},LS=function(t){var i=t.type,a=i===void 0?"circle":i,f=t.size,v=f===void 0?64:f,m=t.sizeType,l=m===void 0?"area":m,P=$4(t,R4),C=MM(MM({},P),{},{type:a,size:v,sizeType:l}),z=function(){var U=V4(a),re=x4().type(U).size(G4(v,l,a));return re()},O=C.className,B=C.cx,F=C.cy,X=en(C,!0);return B===+B&&F===+F&&v===+v?$e.createElement("path",p2({},X,{className:sn("recharts-symbols",O),transform:"translate(".concat(B,", ").concat(F,")"),d:z()})):null};LS.registerSymbol=Z4;function Kp(e){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}function m2(){return m2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},m2.apply(this,arguments)}function PM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function H4(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?PM(Object(i),!0).forEach(function(a){Yg(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):PM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function X4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W4(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Vk(a.key),a)}}function Y4(e,t,i){return t&&W4(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function K4(e,t,i){return t=t_(t),Q4(e,Uk()?Reflect.construct(t,i||[],t_(e).constructor):t.apply(e,i))}function Q4(e,t){if(t&&(Kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J4(e)}function J4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uk=function(){return!!e})()}function t_(e){return t_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},t_(e)}function eL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g2(e,t)}function g2(e,t){return g2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},g2(e,t)}function Yg(e,t,i){return t=Vk(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Vk(e){var t=tL(e,"string");return Kp(t)=="symbol"?t:t+""}function tL(e,t){if(Kp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Kp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ec=32,BS=function(e){function t(){return X4(this,t),K4(this,t,arguments)}return eL(t,e),Y4(t,[{key:"renderIcon",value:function(a){var f=this.props.inactiveColor,v=ec/2,m=ec/6,l=ec/3,P=a.inactive?f:a.color;if(a.type==="plainline")return $e.createElement("line",{strokeWidth:4,fill:"none",stroke:P,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:v,x2:ec,y2:v,className:"recharts-legend-icon"});if(a.type==="line")return $e.createElement("path",{strokeWidth:4,fill:"none",stroke:P,d:"M0,".concat(v,"h").concat(l,`
            A`).concat(m,",").concat(m,",0,1,1,").concat(2*l,",").concat(v,`
            H`).concat(ec,"M").concat(2*l,",").concat(v,`
            A`).concat(m,",").concat(m,",0,1,1,").concat(l,",").concat(v),className:"recharts-legend-icon"});if(a.type==="rect")return $e.createElement("path",{stroke:"none",fill:P,d:"M0,".concat(ec/8,"h").concat(ec,"v").concat(ec*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if($e.isValidElement(a.legendIcon)){var C=H4({},a);return delete C.legendIcon,$e.cloneElement(a.legendIcon,C)}return $e.createElement(LS,{fill:P,cx:v,cy:v,size:ec,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,f=this.props,v=f.payload,m=f.iconSize,l=f.layout,P=f.formatter,C=f.inactiveColor,z={x:0,y:0,width:ec,height:ec},O={display:l==="horizontal"?"inline-block":"block",marginRight:10},B={display:"inline-block",verticalAlign:"middle",marginRight:4};return v.map(function(F,X){var Z=F.formatter||P,U=sn(Yg(Yg({"recharts-legend-item":!0},"legend-item-".concat(X),!0),"inactive",F.inactive));if(F.type==="none")return null;var re=Lr(F.value)?null:F.value;Gu(!Lr(F.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var se=F.inactive?C:F.color;return $e.createElement("li",m2({className:U,style:O,key:"legend-item-".concat(X)},Wv(a.props,F,X)),$e.createElement(l2,{width:m,height:m,viewBox:z,style:B},a.renderIcon(F)),$e.createElement("span",{className:"recharts-legend-item-text",style:{color:se}},Z?Z(re,F,X):re))})}},{key:"render",value:function(){var a=this.props,f=a.payload,v=a.layout,m=a.align;if(!f||!f.length)return null;var l={padding:0,margin:0,textAlign:v==="horizontal"?m:"left"};return $e.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(ft.PureComponent);Yg(BS,"displayName","Legend");Yg(BS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var hb,EM;function rL(){if(EM)return hb;EM=1;var e=Z_();function t(){this.__data__=new e,this.size=0}return hb=t,hb}var db,CM;function nL(){if(CM)return db;CM=1;function e(t){var i=this.__data__,a=i.delete(t);return this.size=i.size,a}return db=e,db}var fb,jM;function iL(){if(jM)return fb;jM=1;function e(t){return this.__data__.get(t)}return fb=e,fb}var pb,OM;function aL(){if(OM)return pb;OM=1;function e(t){return this.__data__.has(t)}return pb=e,pb}var mb,kM;function oL(){if(kM)return mb;kM=1;var e=Z_(),t=CS(),i=jS(),a=200;function f(v,m){var l=this.__data__;if(l instanceof e){var P=l.__data__;if(!t||P.length<a-1)return P.push([v,m]),this.size=++l.size,this;l=this.__data__=new i(P)}return l.set(v,m),this.size=l.size,this}return mb=f,mb}var gb,IM;function Gk(){if(IM)return gb;IM=1;var e=Z_(),t=rL(),i=nL(),a=iL(),f=aL(),v=oL();function m(l){var P=this.__data__=new e(l);this.size=P.size}return m.prototype.clear=t,m.prototype.delete=i,m.prototype.get=a,m.prototype.has=f,m.prototype.set=v,gb=m,gb}var yb,DM;function sL(){if(DM)return yb;DM=1;var e="__lodash_hash_undefined__";function t(i){return this.__data__.set(i,e),this}return yb=t,yb}var vb,zM;function lL(){if(zM)return vb;zM=1;function e(t){return this.__data__.has(t)}return vb=e,vb}var _b,NM;function Zk(){if(NM)return _b;NM=1;var e=jS(),t=sL(),i=lL();function a(f){var v=-1,m=f==null?0:f.length;for(this.__data__=new e;++v<m;)this.add(f[v])}return a.prototype.add=a.prototype.push=t,a.prototype.has=i,_b=a,_b}var xb,RM;function Hk(){if(RM)return xb;RM=1;function e(t,i){for(var a=-1,f=t==null?0:t.length;++a<f;)if(i(t[a],a,t))return!0;return!1}return xb=e,xb}var bb,LM;function Xk(){if(LM)return bb;LM=1;function e(t,i){return t.has(i)}return bb=e,bb}var wb,BM;function Wk(){if(BM)return wb;BM=1;var e=Zk(),t=Hk(),i=Xk(),a=1,f=2;function v(m,l,P,C,z,O){var B=P&a,F=m.length,X=l.length;if(F!=X&&!(B&&X>F))return!1;var Z=O.get(m),U=O.get(l);if(Z&&U)return Z==l&&U==m;var re=-1,se=!0,ne=P&f?new e:void 0;for(O.set(m,l),O.set(l,m);++re<F;){var ue=m[re],J=l[re];if(C)var ae=B?C(J,ue,re,l,m,O):C(ue,J,re,m,l,O);if(ae!==void 0){if(ae)continue;se=!1;break}if(ne){if(!t(l,function(he,ve){if(!i(ne,ve)&&(ue===he||z(ue,he,P,C,O)))return ne.push(ve)})){se=!1;break}}else if(!(ue===J||z(ue,J,P,C,O))){se=!1;break}}return O.delete(m),O.delete(l),se}return wb=v,wb}var Sb,FM;function cL(){if(FM)return Sb;FM=1;var e=Kc(),t=e.Uint8Array;return Sb=t,Sb}var Tb,$M;function uL(){if($M)return Tb;$M=1;function e(t){var i=-1,a=Array(t.size);return t.forEach(function(f,v){a[++i]=[v,f]}),a}return Tb=e,Tb}var Ab,qM;function FS(){if(qM)return Ab;qM=1;function e(t){var i=-1,a=Array(t.size);return t.forEach(function(f){a[++i]=f}),a}return Ab=e,Ab}var Mb,UM;function hL(){if(UM)return Mb;UM=1;var e=ky(),t=cL(),i=ES(),a=Wk(),f=uL(),v=FS(),m=1,l=2,P="[object Boolean]",C="[object Date]",z="[object Error]",O="[object Map]",B="[object Number]",F="[object RegExp]",X="[object Set]",Z="[object String]",U="[object Symbol]",re="[object ArrayBuffer]",se="[object DataView]",ne=e?e.prototype:void 0,ue=ne?ne.valueOf:void 0;function J(ae,he,ve,Ie,at,De,Fe){switch(ve){case se:if(ae.byteLength!=he.byteLength||ae.byteOffset!=he.byteOffset)return!1;ae=ae.buffer,he=he.buffer;case re:return!(ae.byteLength!=he.byteLength||!De(new t(ae),new t(he)));case P:case C:case B:return i(+ae,+he);case z:return ae.name==he.name&&ae.message==he.message;case F:case Z:return ae==he+"";case O:var tt=f;case X:var ut=Ie&m;if(tt||(tt=v),ae.size!=he.size&&!ut)return!1;var rt=Fe.get(ae);if(rt)return rt==he;Ie|=l,Fe.set(ae,he);var Pe=a(tt(ae),tt(he),Ie,at,De,Fe);return Fe.delete(ae),Pe;case U:if(ue)return ue.call(ae)==ue.call(he)}return!1}return Mb=J,Mb}var Pb,VM;function Yk(){if(VM)return Pb;VM=1;function e(t,i){for(var a=-1,f=i.length,v=t.length;++a<f;)t[v+a]=i[a];return t}return Pb=e,Pb}var Eb,GM;function dL(){if(GM)return Eb;GM=1;var e=Yk(),t=ts();function i(a,f,v){var m=f(a);return t(a)?m:e(m,v(a))}return Eb=i,Eb}var Cb,ZM;function fL(){if(ZM)return Cb;ZM=1;function e(t,i){for(var a=-1,f=t==null?0:t.length,v=0,m=[];++a<f;){var l=t[a];i(l,a,t)&&(m[v++]=l)}return m}return Cb=e,Cb}var jb,HM;function pL(){if(HM)return jb;HM=1;function e(){return[]}return jb=e,jb}var Ob,XM;function mL(){if(XM)return Ob;XM=1;var e=fL(),t=pL(),i=Object.prototype,a=i.propertyIsEnumerable,f=Object.getOwnPropertySymbols,v=f?function(m){return m==null?[]:(m=Object(m),e(f(m),function(l){return a.call(m,l)}))}:t;return Ob=v,Ob}var kb,WM;function gL(){if(WM)return kb;WM=1;function e(t,i){for(var a=-1,f=Array(t);++a<t;)f[a]=i(a);return f}return kb=e,kb}var Ib,YM;function yL(){if(YM)return Ib;YM=1;var e=Ku(),t=Qu(),i="[object Arguments]";function a(f){return t(f)&&e(f)==i}return Ib=a,Ib}var Db,KM;function $S(){if(KM)return Db;KM=1;var e=yL(),t=Qu(),i=Object.prototype,a=i.hasOwnProperty,f=i.propertyIsEnumerable,v=e(function(){return arguments}())?e:function(m){return t(m)&&a.call(m,"callee")&&!f.call(m,"callee")};return Db=v,Db}var Lg={exports:{}},zb,QM;function vL(){if(QM)return zb;QM=1;function e(){return!1}return zb=e,zb}Lg.exports;var JM;function Kk(){return JM||(JM=1,function(e,t){var i=Kc(),a=vL(),f=t&&!t.nodeType&&t,v=f&&!0&&e&&!e.nodeType&&e,m=v&&v.exports===f,l=m?i.Buffer:void 0,P=l?l.isBuffer:void 0,C=P||a;e.exports=C}(Lg,Lg.exports)),Lg.exports}var Nb,eP;function qS(){if(eP)return Nb;eP=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function i(a,f){var v=typeof a;return f=f??e,!!f&&(v=="number"||v!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<f}return Nb=i,Nb}var Rb,tP;function US(){if(tP)return Rb;tP=1;var e=9007199254740991;function t(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=e}return Rb=t,Rb}var Lb,rP;function _L(){if(rP)return Lb;rP=1;var e=Ku(),t=US(),i=Qu(),a="[object Arguments]",f="[object Array]",v="[object Boolean]",m="[object Date]",l="[object Error]",P="[object Function]",C="[object Map]",z="[object Number]",O="[object Object]",B="[object RegExp]",F="[object Set]",X="[object String]",Z="[object WeakMap]",U="[object ArrayBuffer]",re="[object DataView]",se="[object Float32Array]",ne="[object Float64Array]",ue="[object Int8Array]",J="[object Int16Array]",ae="[object Int32Array]",he="[object Uint8Array]",ve="[object Uint8ClampedArray]",Ie="[object Uint16Array]",at="[object Uint32Array]",De={};De[se]=De[ne]=De[ue]=De[J]=De[ae]=De[he]=De[ve]=De[Ie]=De[at]=!0,De[a]=De[f]=De[U]=De[v]=De[re]=De[m]=De[l]=De[P]=De[C]=De[z]=De[O]=De[B]=De[F]=De[X]=De[Z]=!1;function Fe(tt){return i(tt)&&t(tt.length)&&!!De[e(tt)]}return Lb=Fe,Lb}var Bb,nP;function Qk(){if(nP)return Bb;nP=1;function e(t){return function(i){return t(i)}}return Bb=e,Bb}var Bg={exports:{}};Bg.exports;var iP;function xL(){return iP||(iP=1,function(e,t){var i=vk(),a=t&&!t.nodeType&&t,f=a&&!0&&e&&!e.nodeType&&e,v=f&&f.exports===a,m=v&&i.process,l=function(){try{var P=f&&f.require&&f.require("util").types;return P||m&&m.binding&&m.binding("util")}catch{}}();e.exports=l}(Bg,Bg.exports)),Bg.exports}var Fb,aP;function Jk(){if(aP)return Fb;aP=1;var e=_L(),t=Qk(),i=xL(),a=i&&i.isTypedArray,f=a?t(a):e;return Fb=f,Fb}var $b,oP;function bL(){if(oP)return $b;oP=1;var e=gL(),t=$S(),i=ts(),a=Kk(),f=qS(),v=Jk(),m=Object.prototype,l=m.hasOwnProperty;function P(C,z){var O=i(C),B=!O&&t(C),F=!O&&!B&&a(C),X=!O&&!B&&!F&&v(C),Z=O||B||F||X,U=Z?e(C.length,String):[],re=U.length;for(var se in C)(z||l.call(C,se))&&!(Z&&(se=="length"||F&&(se=="offset"||se=="parent")||X&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||f(se,re)))&&U.push(se);return U}return $b=P,$b}var qb,sP;function wL(){if(sP)return qb;sP=1;var e=Object.prototype;function t(i){var a=i&&i.constructor,f=typeof a=="function"&&a.prototype||e;return i===f}return qb=t,qb}var Ub,lP;function eI(){if(lP)return Ub;lP=1;function e(t,i){return function(a){return t(i(a))}}return Ub=e,Ub}var Vb,cP;function SL(){if(cP)return Vb;cP=1;var e=eI(),t=e(Object.keys,Object);return Vb=t,Vb}var Gb,uP;function TL(){if(uP)return Gb;uP=1;var e=wL(),t=SL(),i=Object.prototype,a=i.hasOwnProperty;function f(v){if(!e(v))return t(v);var m=[];for(var l in Object(v))a.call(v,l)&&l!="constructor"&&m.push(l);return m}return Gb=f,Gb}var Zb,hP;function zy(){if(hP)return Zb;hP=1;var e=PS(),t=US();function i(a){return a!=null&&t(a.length)&&!e(a)}return Zb=i,Zb}var Hb,dP;function J_(){if(dP)return Hb;dP=1;var e=bL(),t=TL(),i=zy();function a(f){return i(f)?e(f):t(f)}return Hb=a,Hb}var Xb,fP;function AL(){if(fP)return Xb;fP=1;var e=dL(),t=mL(),i=J_();function a(f){return e(f,i,t)}return Xb=a,Xb}var Wb,pP;function ML(){if(pP)return Wb;pP=1;var e=AL(),t=1,i=Object.prototype,a=i.hasOwnProperty;function f(v,m,l,P,C,z){var O=l&t,B=e(v),F=B.length,X=e(m),Z=X.length;if(F!=Z&&!O)return!1;for(var U=F;U--;){var re=B[U];if(!(O?re in m:a.call(m,re)))return!1}var se=z.get(v),ne=z.get(m);if(se&&ne)return se==m&&ne==v;var ue=!0;z.set(v,m),z.set(m,v);for(var J=O;++U<F;){re=B[U];var ae=v[re],he=m[re];if(P)var ve=O?P(he,ae,re,m,v,z):P(ae,he,re,v,m,z);if(!(ve===void 0?ae===he||C(ae,he,l,P,z):ve)){ue=!1;break}J||(J=re=="constructor")}if(ue&&!J){var Ie=v.constructor,at=m.constructor;Ie!=at&&"constructor"in v&&"constructor"in m&&!(typeof Ie=="function"&&Ie instanceof Ie&&typeof at=="function"&&at instanceof at)&&(ue=!1)}return z.delete(v),z.delete(m),ue}return Wb=f,Wb}var Yb,mP;function PL(){if(mP)return Yb;mP=1;var e=kf(),t=Kc(),i=e(t,"DataView");return Yb=i,Yb}var Kb,gP;function EL(){if(gP)return Kb;gP=1;var e=kf(),t=Kc(),i=e(t,"Promise");return Kb=i,Kb}var Qb,yP;function tI(){if(yP)return Qb;yP=1;var e=kf(),t=Kc(),i=e(t,"Set");return Qb=i,Qb}var Jb,vP;function CL(){if(vP)return Jb;vP=1;var e=kf(),t=Kc(),i=e(t,"WeakMap");return Jb=i,Jb}var e1,_P;function jL(){if(_P)return e1;_P=1;var e=PL(),t=CS(),i=EL(),a=tI(),f=CL(),v=Ku(),m=_k(),l="[object Map]",P="[object Object]",C="[object Promise]",z="[object Set]",O="[object WeakMap]",B="[object DataView]",F=m(e),X=m(t),Z=m(i),U=m(a),re=m(f),se=v;return(e&&se(new e(new ArrayBuffer(1)))!=B||t&&se(new t)!=l||i&&se(i.resolve())!=C||a&&se(new a)!=z||f&&se(new f)!=O)&&(se=function(ne){var ue=v(ne),J=ue==P?ne.constructor:void 0,ae=J?m(J):"";if(ae)switch(ae){case F:return B;case X:return l;case Z:return C;case U:return z;case re:return O}return ue}),e1=se,e1}var t1,xP;function OL(){if(xP)return t1;xP=1;var e=Gk(),t=Wk(),i=hL(),a=ML(),f=jL(),v=ts(),m=Kk(),l=Jk(),P=1,C="[object Arguments]",z="[object Array]",O="[object Object]",B=Object.prototype,F=B.hasOwnProperty;function X(Z,U,re,se,ne,ue){var J=v(Z),ae=v(U),he=J?z:f(Z),ve=ae?z:f(U);he=he==C?O:he,ve=ve==C?O:ve;var Ie=he==O,at=ve==O,De=he==ve;if(De&&m(Z)){if(!m(U))return!1;J=!0,Ie=!1}if(De&&!Ie)return ue||(ue=new e),J||l(Z)?t(Z,U,re,se,ne,ue):i(Z,U,he,re,se,ne,ue);if(!(re&P)){var Fe=Ie&&F.call(Z,"__wrapped__"),tt=at&&F.call(U,"__wrapped__");if(Fe||tt){var ut=Fe?Z.value():Z,rt=tt?U.value():U;return ue||(ue=new e),ne(ut,rt,re,se,ue)}}return De?(ue||(ue=new e),a(Z,U,re,se,ne,ue)):!1}return t1=X,t1}var r1,bP;function VS(){if(bP)return r1;bP=1;var e=OL(),t=Qu();function i(a,f,v,m,l){return a===f?!0:a==null||f==null||!t(a)&&!t(f)?a!==a&&f!==f:e(a,f,v,m,i,l)}return r1=i,r1}var n1,wP;function kL(){if(wP)return n1;wP=1;var e=Gk(),t=VS(),i=1,a=2;function f(v,m,l,P){var C=l.length,z=C,O=!P;if(v==null)return!z;for(v=Object(v);C--;){var B=l[C];if(O&&B[2]?B[1]!==v[B[0]]:!(B[0]in v))return!1}for(;++C<z;){B=l[C];var F=B[0],X=v[F],Z=B[1];if(O&&B[2]){if(X===void 0&&!(F in v))return!1}else{var U=new e;if(P)var re=P(X,Z,F,v,m,U);if(!(re===void 0?t(Z,X,i|a,P,U):re))return!1}}return!0}return n1=f,n1}var i1,SP;function rI(){if(SP)return i1;SP=1;var e=hd();function t(i){return i===i&&!e(i)}return i1=t,i1}var a1,TP;function IL(){if(TP)return a1;TP=1;var e=rI(),t=J_();function i(a){for(var f=t(a),v=f.length;v--;){var m=f[v],l=a[m];f[v]=[m,l,e(l)]}return f}return a1=i,a1}var o1,AP;function nI(){if(AP)return o1;AP=1;function e(t,i){return function(a){return a==null?!1:a[t]===i&&(i!==void 0||t in Object(a))}}return o1=e,o1}var s1,MP;function DL(){if(MP)return s1;MP=1;var e=kL(),t=IL(),i=nI();function a(f){var v=t(f);return v.length==1&&v[0][2]?i(v[0][0],v[0][1]):function(m){return m===f||e(m,f,v)}}return s1=a,s1}var l1,PP;function zL(){if(PP)return l1;PP=1;function e(t,i){return t!=null&&i in Object(t)}return l1=e,l1}var c1,EP;function NL(){if(EP)return c1;EP=1;var e=wk(),t=$S(),i=ts(),a=qS(),f=US(),v=X_();function m(l,P,C){P=e(P,l);for(var z=-1,O=P.length,B=!1;++z<O;){var F=v(P[z]);if(!(B=l!=null&&C(l,F)))break;l=l[F]}return B||++z!=O?B:(O=l==null?0:l.length,!!O&&f(O)&&a(F,O)&&(i(l)||t(l)))}return c1=m,c1}var u1,CP;function RL(){if(CP)return u1;CP=1;var e=zL(),t=NL();function i(a,f){return a!=null&&t(a,f,e)}return u1=i,u1}var h1,jP;function LL(){if(jP)return h1;jP=1;var e=VS(),t=Sk(),i=RL(),a=MS(),f=rI(),v=nI(),m=X_(),l=1,P=2;function C(z,O){return a(z)&&f(O)?v(m(z),O):function(B){var F=t(B,z);return F===void 0&&F===O?i(B,z):e(O,F,l|P)}}return h1=C,h1}var d1,OP;function Sm(){if(OP)return d1;OP=1;function e(t){return t}return d1=e,d1}var f1,kP;function BL(){if(kP)return f1;kP=1;function e(t){return function(i){return i==null?void 0:i[t]}}return f1=e,f1}var p1,IP;function FL(){if(IP)return p1;IP=1;var e=kS();function t(i){return function(a){return e(a,i)}}return p1=t,p1}var m1,DP;function $L(){if(DP)return m1;DP=1;var e=BL(),t=FL(),i=MS(),a=X_();function f(v){return i(v)?e(a(v)):t(v)}return m1=f,m1}var g1,zP;function dd(){if(zP)return g1;zP=1;var e=DL(),t=LL(),i=Sm(),a=ts(),f=$L();function v(m){return typeof m=="function"?m:m==null?i:typeof m=="object"?a(m)?t(m[0],m[1]):e(m):f(m)}return g1=v,g1}var y1,NP;function iI(){if(NP)return y1;NP=1;function e(t,i,a,f){for(var v=t.length,m=a+(f?1:-1);f?m--:++m<v;)if(i(t[m],m,t))return m;return-1}return y1=e,y1}var v1,RP;function qL(){if(RP)return v1;RP=1;function e(t){return t!==t}return v1=e,v1}var _1,LP;function UL(){if(LP)return _1;LP=1;function e(t,i,a){for(var f=a-1,v=t.length;++f<v;)if(t[f]===i)return f;return-1}return _1=e,_1}var x1,BP;function VL(){if(BP)return x1;BP=1;var e=iI(),t=qL(),i=UL();function a(f,v,m){return v===v?i(f,v,m):e(f,t,m)}return x1=a,x1}var b1,FP;function GL(){if(FP)return b1;FP=1;var e=VL();function t(i,a){var f=i==null?0:i.length;return!!f&&e(i,a,0)>-1}return b1=t,b1}var w1,$P;function ZL(){if($P)return w1;$P=1;function e(t,i,a){for(var f=-1,v=t==null?0:t.length;++f<v;)if(a(i,t[f]))return!0;return!1}return w1=e,w1}var S1,qP;function HL(){if(qP)return S1;qP=1;function e(){}return S1=e,S1}var T1,UP;function XL(){if(UP)return T1;UP=1;var e=tI(),t=HL(),i=FS(),a=1/0,f=e&&1/i(new e([,-0]))[1]==a?function(v){return new e(v)}:t;return T1=f,T1}var A1,VP;function WL(){if(VP)return A1;VP=1;var e=Zk(),t=GL(),i=ZL(),a=Xk(),f=XL(),v=FS(),m=200;function l(P,C,z){var O=-1,B=t,F=P.length,X=!0,Z=[],U=Z;if(z)X=!1,B=i;else if(F>=m){var re=C?null:f(P);if(re)return v(re);X=!1,B=a,U=new e}else U=C?[]:Z;e:for(;++O<F;){var se=P[O],ne=C?C(se):se;if(se=z||se!==0?se:0,X&&ne===ne){for(var ue=U.length;ue--;)if(U[ue]===ne)continue e;C&&U.push(ne),Z.push(se)}else B(U,ne,z)||(U!==Z&&U.push(ne),Z.push(se))}return Z}return A1=l,A1}var M1,GP;function YL(){if(GP)return M1;GP=1;var e=dd(),t=WL();function i(a,f){return a&&a.length?t(a,e(f,2)):[]}return M1=i,M1}var KL=YL();const ZP=Bn(KL);function aI(e,t,i){return t===!0?ZP(e,i):Lr(t)?ZP(e,t):e}function Qp(e){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qp(e)}var QL=["ref"];function HP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Bu(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?HP(Object(i),!0).forEach(function(a){ex(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):HP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function JL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XP(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,sI(a.key),a)}}function e6(e,t,i){return t&&XP(e.prototype,t),i&&XP(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function t6(e,t,i){return t=r_(t),r6(e,oI()?Reflect.construct(t,i||[],r_(e).constructor):t.apply(e,i))}function r6(e,t){if(t&&(Qp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n6(e)}function n6(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oI=function(){return!!e})()}function r_(e){return r_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},r_(e)}function i6(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y2(e,t)}function y2(e,t){return y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},y2(e,t)}function ex(e,t,i){return t=sI(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function sI(e){var t=a6(e,"string");return Qp(t)=="symbol"?t:t+""}function a6(e,t){if(Qp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Qp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function o6(e,t){if(e==null)return{};var i=s6(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function s6(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function l6(e){return e.value}function c6(e,t){if($e.isValidElement(e))return $e.cloneElement(e,t);if(typeof e=="function")return $e.createElement(e,t);t.ref;var i=o6(t,QL);return $e.createElement(BS,i)}var WP=1,Sf=function(e){function t(){var i;JL(this,t);for(var a=arguments.length,f=new Array(a),v=0;v<a;v++)f[v]=arguments[v];return i=t6(this,t,[].concat(f)),ex(i,"lastBoundingBox",{width:-1,height:-1}),i}return i6(t,e),e6(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,f=this.getBBox();f?(Math.abs(f.width-this.lastBoundingBox.width)>WP||Math.abs(f.height-this.lastBoundingBox.height)>WP)&&(this.lastBoundingBox.width=f.width,this.lastBoundingBox.height=f.height,a&&a(f)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Bu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var f=this.props,v=f.layout,m=f.align,l=f.verticalAlign,P=f.margin,C=f.chartWidth,z=f.chartHeight,O,B;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(m==="center"&&v==="vertical"){var F=this.getBBoxSnapshot();O={left:((C||0)-F.width)/2}}else O=m==="right"?{right:P&&P.right||0}:{left:P&&P.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var X=this.getBBoxSnapshot();B={top:((z||0)-X.height)/2}}else B=l==="bottom"?{bottom:P&&P.bottom||0}:{top:P&&P.top||0};return Bu(Bu({},O),B)}},{key:"render",value:function(){var a=this,f=this.props,v=f.content,m=f.width,l=f.height,P=f.wrapperStyle,C=f.payloadUniqBy,z=f.payload,O=Bu(Bu({position:"absolute",width:m||"auto",height:l||"auto"},this.getDefaultPosition(P)),P);return $e.createElement("div",{className:"recharts-legend-wrapper",style:O,ref:function(F){a.wrapperNode=F}},c6(v,Bu(Bu({},this.props),{},{payload:aI(z,C,l6)})))}}],[{key:"getWithHeight",value:function(a,f){var v=Bu(Bu({},this.defaultProps),a.props),m=v.layout;return m==="vertical"&&zt(a.props.height)?{height:a.props.height}:m==="horizontal"?{width:a.props.width||f}:null}}])}(ft.PureComponent);ex(Sf,"displayName","Legend");ex(Sf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var P1,YP;function u6(){if(YP)return P1;YP=1;var e=ky(),t=$S(),i=ts(),a=e?e.isConcatSpreadable:void 0;function f(v){return i(v)||t(v)||!!(a&&v&&v[a])}return P1=f,P1}var E1,KP;function lI(){if(KP)return E1;KP=1;var e=Yk(),t=u6();function i(a,f,v,m,l){var P=-1,C=a.length;for(v||(v=t),l||(l=[]);++P<C;){var z=a[P];f>0&&v(z)?f>1?i(z,f-1,v,m,l):e(l,z):m||(l[l.length]=z)}return l}return E1=i,E1}var C1,QP;function h6(){if(QP)return C1;QP=1;function e(t){return function(i,a,f){for(var v=-1,m=Object(i),l=f(i),P=l.length;P--;){var C=l[t?P:++v];if(a(m[C],C,m)===!1)break}return i}}return C1=e,C1}var j1,JP;function d6(){if(JP)return j1;JP=1;var e=h6(),t=e();return j1=t,j1}var O1,eE;function cI(){if(eE)return O1;eE=1;var e=d6(),t=J_();function i(a,f){return a&&e(a,f,t)}return O1=i,O1}var k1,tE;function f6(){if(tE)return k1;tE=1;var e=zy();function t(i,a){return function(f,v){if(f==null)return f;if(!e(f))return i(f,v);for(var m=f.length,l=a?m:-1,P=Object(f);(a?l--:++l<m)&&v(P[l],l,P)!==!1;);return f}}return k1=t,k1}var I1,rE;function GS(){if(rE)return I1;rE=1;var e=cI(),t=f6(),i=t(e);return I1=i,I1}var D1,nE;function uI(){if(nE)return D1;nE=1;var e=GS(),t=zy();function i(a,f){var v=-1,m=t(a)?Array(a.length):[];return e(a,function(l,P,C){m[++v]=f(l,P,C)}),m}return D1=i,D1}var z1,iE;function p6(){if(iE)return z1;iE=1;function e(t,i){var a=t.length;for(t.sort(i);a--;)t[a]=t[a].value;return t}return z1=e,z1}var N1,aE;function m6(){if(aE)return N1;aE=1;var e=bm();function t(i,a){if(i!==a){var f=i!==void 0,v=i===null,m=i===i,l=e(i),P=a!==void 0,C=a===null,z=a===a,O=e(a);if(!C&&!O&&!l&&i>a||l&&P&&z&&!C&&!O||v&&P&&z||!f&&z||!m)return 1;if(!v&&!l&&!O&&i<a||O&&f&&m&&!v&&!l||C&&f&&m||!P&&m||!z)return-1}return 0}return N1=t,N1}var R1,oE;function g6(){if(oE)return R1;oE=1;var e=m6();function t(i,a,f){for(var v=-1,m=i.criteria,l=a.criteria,P=m.length,C=f.length;++v<P;){var z=e(m[v],l[v]);if(z){if(v>=C)return z;var O=f[v];return z*(O=="desc"?-1:1)}}return i.index-a.index}return R1=t,R1}var L1,sE;function y6(){if(sE)return L1;sE=1;var e=OS(),t=kS(),i=dd(),a=uI(),f=p6(),v=Qk(),m=g6(),l=Sm(),P=ts();function C(z,O,B){O.length?O=e(O,function(Z){return P(Z)?function(U){return t(U,Z.length===1?Z[0]:Z)}:Z}):O=[l];var F=-1;O=e(O,v(i));var X=a(z,function(Z,U,re){var se=e(O,function(ne){return ne(Z)});return{criteria:se,index:++F,value:Z}});return f(X,function(Z,U){return m(Z,U,B)})}return L1=C,L1}var B1,lE;function v6(){if(lE)return B1;lE=1;function e(t,i,a){switch(a.length){case 0:return t.call(i);case 1:return t.call(i,a[0]);case 2:return t.call(i,a[0],a[1]);case 3:return t.call(i,a[0],a[1],a[2])}return t.apply(i,a)}return B1=e,B1}var F1,cE;function _6(){if(cE)return F1;cE=1;var e=v6(),t=Math.max;function i(a,f,v){return f=t(f===void 0?a.length-1:f,0),function(){for(var m=arguments,l=-1,P=t(m.length-f,0),C=Array(P);++l<P;)C[l]=m[f+l];l=-1;for(var z=Array(f+1);++l<f;)z[l]=m[l];return z[f]=v(C),e(a,this,z)}}return F1=i,F1}var $1,uE;function x6(){if(uE)return $1;uE=1;function e(t){return function(){return t}}return $1=e,$1}var q1,hE;function hI(){if(hE)return q1;hE=1;var e=kf(),t=function(){try{var i=e(Object,"defineProperty");return i({},"",{}),i}catch{}}();return q1=t,q1}var U1,dE;function b6(){if(dE)return U1;dE=1;var e=x6(),t=hI(),i=Sm(),a=t?function(f,v){return t(f,"toString",{configurable:!0,enumerable:!1,value:e(v),writable:!0})}:i;return U1=a,U1}var V1,fE;function w6(){if(fE)return V1;fE=1;var e=800,t=16,i=Date.now;function a(f){var v=0,m=0;return function(){var l=i(),P=t-(l-m);if(m=l,P>0){if(++v>=e)return arguments[0]}else v=0;return f.apply(void 0,arguments)}}return V1=a,V1}var G1,pE;function S6(){if(pE)return G1;pE=1;var e=b6(),t=w6(),i=t(e);return G1=i,G1}var Z1,mE;function T6(){if(mE)return Z1;mE=1;var e=Sm(),t=_6(),i=S6();function a(f,v){return i(t(f,v,e),f+"")}return Z1=a,Z1}var H1,gE;function tx(){if(gE)return H1;gE=1;var e=ES(),t=zy(),i=qS(),a=hd();function f(v,m,l){if(!a(l))return!1;var P=typeof m;return(P=="number"?t(l)&&i(m,l.length):P=="string"&&m in l)?e(l[m],v):!1}return H1=f,H1}var X1,yE;function A6(){if(yE)return X1;yE=1;var e=lI(),t=y6(),i=T6(),a=tx(),f=i(function(v,m){if(v==null)return[];var l=m.length;return l>1&&a(v,m[0],m[1])?m=[]:l>2&&a(m[0],m[1],m[2])&&(m=[m[0]]),t(v,e(m,1),[])});return X1=f,X1}var M6=A6();const ZS=Bn(M6);function Kg(e){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kg(e)}function v2(){return v2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},v2.apply(this,arguments)}function P6(e,t){return O6(e)||j6(e,t)||C6(e,t)||E6()}function E6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C6(e,t){if(e){if(typeof e=="string")return vE(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return vE(e,t)}}function vE(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function j6(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,v,m,l=[],P=!0,C=!1;try{if(v=(i=i.call(e)).next,t!==0)for(;!(P=(a=v.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(z){C=!0,f=z}finally{try{if(!P&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return l}}function O6(e){if(Array.isArray(e))return e}function _E(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function W1(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?_E(Object(i),!0).forEach(function(a){k6(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_E(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function k6(e,t,i){return t=I6(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function I6(e){var t=D6(e,"string");return Kg(t)=="symbol"?t:t+""}function D6(e,t){if(Kg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Kg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z6(e){return Array.isArray(e)&&la(e[0])&&la(e[1])?e.join(" ~ "):e}var N6=function(t){var i=t.separator,a=i===void 0?" : ":i,f=t.contentStyle,v=f===void 0?{}:f,m=t.itemStyle,l=m===void 0?{}:m,P=t.labelStyle,C=P===void 0?{}:P,z=t.payload,O=t.formatter,B=t.itemSorter,F=t.wrapperClassName,X=t.labelClassName,Z=t.label,U=t.labelFormatter,re=t.accessibilityLayer,se=re===void 0?!1:re,ne=function(){if(z&&z.length){var Fe={padding:0,margin:0},tt=(B?ZS(z,B):z).map(function(ut,rt){if(ut.type==="none")return null;var Pe=W1({display:"block",paddingTop:4,paddingBottom:4,color:ut.color||"#000"},l),Ve=ut.formatter||O||z6,Ge=ut.value,ht=ut.name,xe=Ge,Xe=ht;if(Ve&&xe!=null&&Xe!=null){var ot=Ve(Ge,ht,ut,rt,z);if(Array.isArray(ot)){var st=P6(ot,2);xe=st[0],Xe=st[1]}else xe=ot}return $e.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(rt),style:Pe},la(Xe)?$e.createElement("span",{className:"recharts-tooltip-item-name"},Xe):null,la(Xe)?$e.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,$e.createElement("span",{className:"recharts-tooltip-item-value"},xe),$e.createElement("span",{className:"recharts-tooltip-item-unit"},ut.unit||""))});return $e.createElement("ul",{className:"recharts-tooltip-item-list",style:Fe},tt)}return null},ue=W1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},v),J=W1({margin:0},C),ae=!Wr(Z),he=ae?Z:"",ve=sn("recharts-default-tooltip",F),Ie=sn("recharts-tooltip-label",X);ae&&U&&z!==void 0&&z!==null&&(he=U(Z,z));var at=se?{role:"status","aria-live":"assertive"}:{};return $e.createElement("div",v2({className:ve,style:ue},at),$e.createElement("p",{className:Ie,style:J},$e.isValidElement(he)?he:"".concat(he)),ne())};function Qg(e){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qg(e)}function kv(e,t,i){return t=R6(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function R6(e){var t=L6(e,"string");return Qg(t)=="symbol"?t:t+""}function L6(e,t){if(Qg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Qg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mg="recharts-tooltip-wrapper",B6={visibility:"hidden"};function F6(e){var t=e.coordinate,i=e.translateX,a=e.translateY;return sn(Mg,kv(kv(kv(kv({},"".concat(Mg,"-right"),zt(i)&&t&&zt(t.x)&&i>=t.x),"".concat(Mg,"-left"),zt(i)&&t&&zt(t.x)&&i<t.x),"".concat(Mg,"-bottom"),zt(a)&&t&&zt(t.y)&&a>=t.y),"".concat(Mg,"-top"),zt(a)&&t&&zt(t.y)&&a<t.y))}function xE(e){var t=e.allowEscapeViewBox,i=e.coordinate,a=e.key,f=e.offsetTopLeft,v=e.position,m=e.reverseDirection,l=e.tooltipDimension,P=e.viewBox,C=e.viewBoxDimension;if(v&&zt(v[a]))return v[a];var z=i[a]-l-f,O=i[a]+f;if(t[a])return m[a]?z:O;if(m[a]){var B=z,F=P[a];return B<F?Math.max(O,P[a]):Math.max(z,P[a])}var X=O+l,Z=P[a]+C;return X>Z?Math.max(z,P[a]):Math.max(O,P[a])}function $6(e){var t=e.translateX,i=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(i,"px, 0)"):"translate(".concat(t,"px, ").concat(i,"px)")}}function q6(e){var t=e.allowEscapeViewBox,i=e.coordinate,a=e.offsetTopLeft,f=e.position,v=e.reverseDirection,m=e.tooltipBox,l=e.useTranslate3d,P=e.viewBox,C,z,O;return m.height>0&&m.width>0&&i?(z=xE({allowEscapeViewBox:t,coordinate:i,key:"x",offsetTopLeft:a,position:f,reverseDirection:v,tooltipDimension:m.width,viewBox:P,viewBoxDimension:P.width}),O=xE({allowEscapeViewBox:t,coordinate:i,key:"y",offsetTopLeft:a,position:f,reverseDirection:v,tooltipDimension:m.height,viewBox:P,viewBoxDimension:P.height}),C=$6({translateX:z,translateY:O,useTranslate3d:l})):C=B6,{cssProperties:C,cssClasses:F6({translateX:z,translateY:O,coordinate:i})}}function Jp(e){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jp(e)}function bE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function wE(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?bE(Object(i),!0).forEach(function(a){x2(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):bE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function U6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V6(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,fI(a.key),a)}}function G6(e,t,i){return t&&V6(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z6(e,t,i){return t=n_(t),H6(e,dI()?Reflect.construct(t,i||[],n_(e).constructor):t.apply(e,i))}function H6(e,t){if(t&&(Jp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X6(e)}function X6(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dI=function(){return!!e})()}function n_(e){return n_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},n_(e)}function W6(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_2(e,t)}function _2(e,t){return _2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},_2(e,t)}function x2(e,t,i){return t=fI(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function fI(e){var t=Y6(e,"string");return Jp(t)=="symbol"?t:t+""}function Y6(e,t){if(Jp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Jp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var SE=1,K6=function(e){function t(){var i;U6(this,t);for(var a=arguments.length,f=new Array(a),v=0;v<a;v++)f[v]=arguments[v];return i=Z6(this,t,[].concat(f)),x2(i,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),x2(i,"handleKeyDown",function(m){if(m.key==="Escape"){var l,P,C,z;i.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(P=i.props.coordinate)===null||P===void 0?void 0:P.x)!==null&&l!==void 0?l:0,y:(C=(z=i.props.coordinate)===null||z===void 0?void 0:z.y)!==null&&C!==void 0?C:0}})}}),i}return W6(t,e),G6(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>SE||Math.abs(a.height-this.state.lastBoundingBox.height)>SE)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,f;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((f=this.props.coordinate)===null||f===void 0?void 0:f.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,f=this.props,v=f.active,m=f.allowEscapeViewBox,l=f.animationDuration,P=f.animationEasing,C=f.children,z=f.coordinate,O=f.hasPayload,B=f.isAnimationActive,F=f.offset,X=f.position,Z=f.reverseDirection,U=f.useTranslate3d,re=f.viewBox,se=f.wrapperStyle,ne=q6({allowEscapeViewBox:m,coordinate:z,offsetTopLeft:F,position:X,reverseDirection:Z,tooltipBox:this.state.lastBoundingBox,useTranslate3d:U,viewBox:re}),ue=ne.cssClasses,J=ne.cssProperties,ae=wE(wE({transition:B&&v?"transform ".concat(l,"ms ").concat(P):void 0},J),{},{pointerEvents:"none",visibility:!this.state.dismissed&&v&&O?"visible":"hidden",position:"absolute",top:0,left:0},se);return $e.createElement("div",{tabIndex:-1,className:ue,style:ae,ref:function(ve){a.wrapperNode=ve}},C)}}])}(ft.PureComponent),Q6=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Tm={isSsr:Q6()};function em(e){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},em(e)}function TE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function AE(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?TE(Object(i),!0).forEach(function(a){HS(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):TE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function J6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eB(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,mI(a.key),a)}}function tB(e,t,i){return t&&eB(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rB(e,t,i){return t=i_(t),nB(e,pI()?Reflect.construct(t,i||[],i_(e).constructor):t.apply(e,i))}function nB(e,t){if(t&&(em(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iB(e)}function iB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pI=function(){return!!e})()}function i_(e){return i_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},i_(e)}function aB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b2(e,t)}function b2(e,t){return b2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},b2(e,t)}function HS(e,t,i){return t=mI(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function mI(e){var t=oB(e,"string");return em(t)=="symbol"?t:t+""}function oB(e,t){if(em(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(em(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function sB(e){return e.dataKey}function lB(e,t){return $e.isValidElement(e)?$e.cloneElement(e,t):typeof e=="function"?$e.createElement(e,t):$e.createElement(N6,t)}var Vc=function(e){function t(){return J6(this,t),rB(this,t,arguments)}return aB(t,e),tB(t,[{key:"render",value:function(){var a=this,f=this.props,v=f.active,m=f.allowEscapeViewBox,l=f.animationDuration,P=f.animationEasing,C=f.content,z=f.coordinate,O=f.filterNull,B=f.isAnimationActive,F=f.offset,X=f.payload,Z=f.payloadUniqBy,U=f.position,re=f.reverseDirection,se=f.useTranslate3d,ne=f.viewBox,ue=f.wrapperStyle,J=X??[];O&&J.length&&(J=aI(X.filter(function(he){return he.value!=null&&(he.hide!==!0||a.props.includeHidden)}),Z,sB));var ae=J.length>0;return $e.createElement(K6,{allowEscapeViewBox:m,animationDuration:l,animationEasing:P,isAnimationActive:B,active:v,coordinate:z,hasPayload:ae,offset:F,position:U,reverseDirection:re,useTranslate3d:se,viewBox:ne,wrapperStyle:ue},lB(C,AE(AE({},this.props),{},{payload:J})))}}])}(ft.PureComponent);HS(Vc,"displayName","Tooltip");HS(Vc,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Tm.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Y1,ME;function cB(){if(ME)return Y1;ME=1;var e=Kc(),t=function(){return e.Date.now()};return Y1=t,Y1}var K1,PE;function uB(){if(PE)return K1;PE=1;var e=/\s/;function t(i){for(var a=i.length;a--&&e.test(i.charAt(a)););return a}return K1=t,K1}var Q1,EE;function hB(){if(EE)return Q1;EE=1;var e=uB(),t=/^\s+/;function i(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return Q1=i,Q1}var J1,CE;function gI(){if(CE)return J1;CE=1;var e=hB(),t=hd(),i=bm(),a=NaN,f=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,m=/^0o[0-7]+$/i,l=parseInt;function P(C){if(typeof C=="number")return C;if(i(C))return a;if(t(C)){var z=typeof C.valueOf=="function"?C.valueOf():C;C=t(z)?z+"":z}if(typeof C!="string")return C===0?C:+C;C=e(C);var O=v.test(C);return O||m.test(C)?l(C.slice(2),O?2:8):f.test(C)?a:+C}return J1=P,J1}var ew,jE;function dB(){if(jE)return ew;jE=1;var e=hd(),t=cB(),i=gI(),a="Expected a function",f=Math.max,v=Math.min;function m(l,P,C){var z,O,B,F,X,Z,U=0,re=!1,se=!1,ne=!0;if(typeof l!="function")throw new TypeError(a);P=i(P)||0,e(C)&&(re=!!C.leading,se="maxWait"in C,B=se?f(i(C.maxWait)||0,P):B,ne="trailing"in C?!!C.trailing:ne);function ue(tt){var ut=z,rt=O;return z=O=void 0,U=tt,F=l.apply(rt,ut),F}function J(tt){return U=tt,X=setTimeout(ve,P),re?ue(tt):F}function ae(tt){var ut=tt-Z,rt=tt-U,Pe=P-ut;return se?v(Pe,B-rt):Pe}function he(tt){var ut=tt-Z,rt=tt-U;return Z===void 0||ut>=P||ut<0||se&&rt>=B}function ve(){var tt=t();if(he(tt))return Ie(tt);X=setTimeout(ve,ae(tt))}function Ie(tt){return X=void 0,ne&&z?ue(tt):(z=O=void 0,F)}function at(){X!==void 0&&clearTimeout(X),U=0,z=Z=O=X=void 0}function De(){return X===void 0?F:Ie(t())}function Fe(){var tt=t(),ut=he(tt);if(z=arguments,O=this,Z=tt,ut){if(X===void 0)return J(Z);if(se)return clearTimeout(X),X=setTimeout(ve,P),ue(Z)}return X===void 0&&(X=setTimeout(ve,P)),F}return Fe.cancel=at,Fe.flush=De,Fe}return ew=m,ew}var tw,OE;function fB(){if(OE)return tw;OE=1;var e=dB(),t=hd(),i="Expected a function";function a(f,v,m){var l=!0,P=!0;if(typeof f!="function")throw new TypeError(i);return t(m)&&(l="leading"in m?!!m.leading:l,P="trailing"in m?!!m.trailing:P),e(f,v,{leading:l,maxWait:v,trailing:P})}return tw=a,tw}var pB=fB();const yI=Bn(pB);function Jg(e){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jg(e)}function kE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Iv(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?kE(Object(i),!0).forEach(function(a){mB(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function mB(e,t,i){return t=gB(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function gB(e){var t=yB(e,"string");return Jg(t)=="symbol"?t:t+""}function yB(e,t){if(Jg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Jg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vB(e,t){return wB(e)||bB(e,t)||xB(e,t)||_B()}function _B(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xB(e,t){if(e){if(typeof e=="string")return IE(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return IE(e,t)}}function IE(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function bB(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,v,m,l=[],P=!0,C=!1;try{if(v=(i=i.call(e)).next,t!==0)for(;!(P=(a=v.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(z){C=!0,f=z}finally{try{if(!P&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return l}}function wB(e){if(Array.isArray(e))return e}var SB=ft.forwardRef(function(e,t){var i=e.aspect,a=e.initialDimension,f=a===void 0?{width:-1,height:-1}:a,v=e.width,m=v===void 0?"100%":v,l=e.height,P=l===void 0?"100%":l,C=e.minWidth,z=C===void 0?0:C,O=e.minHeight,B=e.maxHeight,F=e.children,X=e.debounce,Z=X===void 0?0:X,U=e.id,re=e.className,se=e.onResize,ne=e.style,ue=ne===void 0?{}:ne,J=ft.useRef(null),ae=ft.useRef();ae.current=se,ft.useImperativeHandle(t,function(){return Object.defineProperty(J.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),J.current},configurable:!0})});var he=ft.useState({containerWidth:f.width,containerHeight:f.height}),ve=vB(he,2),Ie=ve[0],at=ve[1],De=ft.useCallback(function(tt,ut){at(function(rt){var Pe=Math.round(tt),Ve=Math.round(ut);return rt.containerWidth===Pe&&rt.containerHeight===Ve?rt:{containerWidth:Pe,containerHeight:Ve}})},[]);ft.useEffect(function(){var tt=function(ht){var xe,Xe=ht[0].contentRect,ot=Xe.width,st=Xe.height;De(ot,st),(xe=ae.current)===null||xe===void 0||xe.call(ae,ot,st)};Z>0&&(tt=yI(tt,Z,{trailing:!0,leading:!1}));var ut=new ResizeObserver(tt),rt=J.current.getBoundingClientRect(),Pe=rt.width,Ve=rt.height;return De(Pe,Ve),ut.observe(J.current),function(){ut.disconnect()}},[De,Z]);var Fe=ft.useMemo(function(){var tt=Ie.containerWidth,ut=Ie.containerHeight;if(tt<0||ut<0)return null;Gu(yf(m)||yf(P),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,m,P),Gu(!i||i>0,"The aspect(%s) must be greater than zero.",i);var rt=yf(m)?tt:m,Pe=yf(P)?ut:P;i&&i>0&&(rt?Pe=rt/i:Pe&&(rt=Pe*i),B&&Pe>B&&(Pe=B)),Gu(rt>0||Pe>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,rt,Pe,m,P,z,O,i);var Ve=!Array.isArray(F)&&Vu(F.type).endsWith("Chart");return $e.Children.map(F,function(Ge){return $e.isValidElement(Ge)?ft.cloneElement(Ge,Iv({width:rt,height:Pe},Ve?{style:Iv({height:"100%",width:"100%",maxHeight:Pe,maxWidth:rt},Ge.props.style)}:{})):Ge})},[i,F,P,B,O,z,Ie,m]);return $e.createElement("div",{id:U?"".concat(U):void 0,className:sn("recharts-responsive-container",re),style:Iv(Iv({},ue),{},{width:m,height:P,minWidth:z,minHeight:O,maxHeight:B}),ref:J},Fe)}),vI=function(t){return null};vI.displayName="Cell";function ey(e){"@babel/helpers - typeof";return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ey(e)}function DE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function w2(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?DE(Object(i),!0).forEach(function(a){TB(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):DE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function TB(e,t,i){return t=AB(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function AB(e){var t=MB(e,"string");return ey(t)=="symbol"?t:t+""}function MB(e,t){if(ey(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(ey(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bp={widthCache:{},cacheCount:0},PB=2e3,EB={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},zE="recharts_measurement_span";function CB(e){var t=w2({},e);return Object.keys(t).forEach(function(i){t[i]||delete t[i]}),t}var qg=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Tm.isSsr)return{width:0,height:0};var a=CB(i),f=JSON.stringify({text:t,copyStyle:a});if(Bp.widthCache[f])return Bp.widthCache[f];try{var v=document.getElementById(zE);v||(v=document.createElement("span"),v.setAttribute("id",zE),v.setAttribute("aria-hidden","true"),document.body.appendChild(v));var m=w2(w2({},EB),a);Object.assign(v.style,m),v.textContent="".concat(t);var l=v.getBoundingClientRect(),P={width:l.width,height:l.height};return Bp.widthCache[f]=P,++Bp.cacheCount>PB&&(Bp.cacheCount=0,Bp.widthCache={}),P}catch{return{width:0,height:0}}},jB=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function ty(e){"@babel/helpers - typeof";return ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ty(e)}function a_(e,t){return DB(e)||IB(e,t)||kB(e,t)||OB()}function OB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kB(e,t){if(e){if(typeof e=="string")return NE(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return NE(e,t)}}function NE(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function IB(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,v,m,l=[],P=!0,C=!1;try{if(v=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;P=!1}else for(;!(P=(a=v.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(z){C=!0,f=z}finally{try{if(!P&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return l}}function DB(e){if(Array.isArray(e))return e}function zB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RE(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,RB(a.key),a)}}function NB(e,t,i){return t&&RE(e.prototype,t),i&&RE(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function RB(e){var t=LB(e,"string");return ty(t)=="symbol"?t:t+""}function LB(e,t){if(ty(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(ty(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var LE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,BE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,BB=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,FB=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_I={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},$B=Object.keys(_I),Vp="NaN";function qB(e,t){return e*_I[t]}var Dv=function(){function e(t,i){zB(this,e),this.num=t,this.unit=i,this.num=t,this.unit=i,Number.isNaN(t)&&(this.unit=""),i!==""&&!BB.test(i)&&(this.num=NaN,this.unit=""),$B.includes(i)&&(this.num=qB(t,i),this.unit="px")}return NB(e,[{key:"add",value:function(i){return this.unit!==i.unit?new e(NaN,""):new e(this.num+i.num,this.unit)}},{key:"subtract",value:function(i){return this.unit!==i.unit?new e(NaN,""):new e(this.num-i.num,this.unit)}},{key:"multiply",value:function(i){return this.unit!==""&&i.unit!==""&&this.unit!==i.unit?new e(NaN,""):new e(this.num*i.num,this.unit||i.unit)}},{key:"divide",value:function(i){return this.unit!==""&&i.unit!==""&&this.unit!==i.unit?new e(NaN,""):new e(this.num/i.num,this.unit||i.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(i){var a,f=(a=FB.exec(i))!==null&&a!==void 0?a:[],v=a_(f,3),m=v[1],l=v[2];return new e(parseFloat(m),l??"")}}])}();function xI(e){if(e.includes(Vp))return Vp;for(var t=e;t.includes("*")||t.includes("/");){var i,a=(i=LE.exec(t))!==null&&i!==void 0?i:[],f=a_(a,4),v=f[1],m=f[2],l=f[3],P=Dv.parse(v??""),C=Dv.parse(l??""),z=m==="*"?P.multiply(C):P.divide(C);if(z.isNaN())return Vp;t=t.replace(LE,z.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var O,B=(O=BE.exec(t))!==null&&O!==void 0?O:[],F=a_(B,4),X=F[1],Z=F[2],U=F[3],re=Dv.parse(X??""),se=Dv.parse(U??""),ne=Z==="+"?re.add(se):re.subtract(se);if(ne.isNaN())return Vp;t=t.replace(BE,ne.toString())}return t}var FE=/\(([^()]*)\)/;function UB(e){for(var t=e;t.includes("(");){var i=FE.exec(t),a=a_(i,2),f=a[1];t=t.replace(FE,xI(f))}return t}function VB(e){var t=e.replace(/\s+/g,"");return t=UB(t),t=xI(t),t}function GB(e){try{return VB(e)}catch{return Vp}}function rw(e){var t=GB(e.slice(5,-1));return t===Vp?"":t}var ZB=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],HB=["dx","dy","angle","className","breakAll"];function S2(){return S2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},S2.apply(this,arguments)}function $E(e,t){if(e==null)return{};var i=XB(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function XB(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function qE(e,t){return QB(e)||KB(e,t)||YB(e,t)||WB()}function WB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YB(e,t){if(e){if(typeof e=="string")return UE(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return UE(e,t)}}function UE(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function KB(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,v,m,l=[],P=!0,C=!1;try{if(v=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;P=!1}else for(;!(P=(a=v.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(z){C=!0,f=z}finally{try{if(!P&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return l}}function QB(e){if(Array.isArray(e))return e}var bI=/[ \f\n\r\t\v\u2028\u2029]+/,wI=function(t){var i=t.children,a=t.breakAll,f=t.style;try{var v=[];Wr(i)||(a?v=i.toString().split(""):v=i.toString().split(bI));var m=v.map(function(P){return{word:P,width:qg(P,f).width}}),l=a?0:qg(" ",f).width;return{wordsWithComputedWidth:m,spaceWidth:l}}catch{return null}},JB=function(t,i,a,f,v){var m=t.maxLines,l=t.children,P=t.style,C=t.breakAll,z=zt(m),O=l,B=function(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return rt.reduce(function(Pe,Ve){var Ge=Ve.word,ht=Ve.width,xe=Pe[Pe.length-1];if(xe&&(f==null||v||xe.width+ht+a<Number(f)))xe.words.push(Ge),xe.width+=ht+a;else{var Xe={words:[Ge],width:ht};Pe.push(Xe)}return Pe},[])},F=B(i),X=function(rt){return rt.reduce(function(Pe,Ve){return Pe.width>Ve.width?Pe:Ve})};if(!z)return F;for(var Z="…",U=function(rt){var Pe=O.slice(0,rt),Ve=wI({breakAll:C,style:P,children:Pe+Z}).wordsWithComputedWidth,Ge=B(Ve),ht=Ge.length>m||X(Ge).width>Number(f);return[ht,Ge]},re=0,se=O.length-1,ne=0,ue;re<=se&&ne<=O.length-1;){var J=Math.floor((re+se)/2),ae=J-1,he=U(ae),ve=qE(he,2),Ie=ve[0],at=ve[1],De=U(J),Fe=qE(De,1),tt=Fe[0];if(!Ie&&!tt&&(re=J+1),Ie&&tt&&(se=J-1),!Ie&&tt){ue=at;break}ne++}return ue||F},VE=function(t){var i=Wr(t)?[]:t.toString().split(bI);return[{words:i}]},eF=function(t){var i=t.width,a=t.scaleToFit,f=t.children,v=t.style,m=t.breakAll,l=t.maxLines;if((i||a)&&!Tm.isSsr){var P,C,z=wI({breakAll:m,children:f,style:v});if(z){var O=z.wordsWithComputedWidth,B=z.spaceWidth;P=O,C=B}else return VE(f);return JB({breakAll:m,children:f,maxLines:l,style:v},P,C,i,a)}return VE(f)},GE="#808080",o_=function(t){var i=t.x,a=i===void 0?0:i,f=t.y,v=f===void 0?0:f,m=t.lineHeight,l=m===void 0?"1em":m,P=t.capHeight,C=P===void 0?"0.71em":P,z=t.scaleToFit,O=z===void 0?!1:z,B=t.textAnchor,F=B===void 0?"start":B,X=t.verticalAnchor,Z=X===void 0?"end":X,U=t.fill,re=U===void 0?GE:U,se=$E(t,ZB),ne=ft.useMemo(function(){return eF({breakAll:se.breakAll,children:se.children,maxLines:se.maxLines,scaleToFit:O,style:se.style,width:se.width})},[se.breakAll,se.children,se.maxLines,O,se.style,se.width]),ue=se.dx,J=se.dy,ae=se.angle,he=se.className,ve=se.breakAll,Ie=$E(se,HB);if(!la(a)||!la(v))return null;var at=a+(zt(ue)?ue:0),De=v+(zt(J)?J:0),Fe;switch(Z){case"start":Fe=rw("calc(".concat(C,")"));break;case"middle":Fe=rw("calc(".concat((ne.length-1)/2," * -").concat(l," + (").concat(C," / 2))"));break;default:Fe=rw("calc(".concat(ne.length-1," * -").concat(l,")"));break}var tt=[];if(O){var ut=ne[0].width,rt=se.width;tt.push("scale(".concat((zt(rt)?rt/ut:1)/ut,")"))}return ae&&tt.push("rotate(".concat(ae,", ").concat(at,", ").concat(De,")")),tt.length&&(Ie.transform=tt.join(" ")),$e.createElement("text",S2({},en(Ie,!0),{x:at,y:De,className:sn("recharts-text",he),textAnchor:F,fill:re.includes("url")?GE:re}),ne.map(function(Pe,Ve){var Ge=Pe.words.join(ve?"":" ");return $e.createElement("tspan",{x:at,dy:Ve===0?Fe:l,key:"".concat(Ge,"-").concat(Ve)},Ge)}))};function cd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tF(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function XS(e){let t,i,a;e.length!==2?(t=cd,i=(l,P)=>cd(e(l),P),a=(l,P)=>e(l)-P):(t=e===cd||e===tF?e:rF,i=e,a=e);function f(l,P,C=0,z=l.length){if(C<z){if(t(P,P)!==0)return z;do{const O=C+z>>>1;i(l[O],P)<0?C=O+1:z=O}while(C<z)}return C}function v(l,P,C=0,z=l.length){if(C<z){if(t(P,P)!==0)return z;do{const O=C+z>>>1;i(l[O],P)<=0?C=O+1:z=O}while(C<z)}return C}function m(l,P,C=0,z=l.length){const O=f(l,P,C,z-1);return O>C&&a(l[O-1],P)>-a(l[O],P)?O-1:O}return{left:f,center:m,right:v}}function rF(){return 0}function SI(e){return e===null?NaN:+e}function*nF(e,t){for(let i of e)i!=null&&(i=+i)>=i&&(yield i)}const iF=XS(cd),Ny=iF.right;XS(SI).center;class ZE extends Map{constructor(t,i=sF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const[a,f]of t)this.set(a,f)}get(t){return super.get(HE(this,t))}has(t){return super.has(HE(this,t))}set(t,i){return super.set(aF(this,t),i)}delete(t){return super.delete(oF(this,t))}}function HE({_intern:e,_key:t},i){const a=t(i);return e.has(a)?e.get(a):i}function aF({_intern:e,_key:t},i){const a=t(i);return e.has(a)?e.get(a):(e.set(a,i),i)}function oF({_intern:e,_key:t},i){const a=t(i);return e.has(a)&&(i=e.get(a),e.delete(a)),i}function sF(e){return e!==null&&typeof e=="object"?e.valueOf():e}function lF(e=cd){if(e===cd)return TI;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,i)=>{const a=e(t,i);return a||a===0?a:(e(i,i)===0)-(e(t,t)===0)}}function TI(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const cF=Math.sqrt(50),uF=Math.sqrt(10),hF=Math.sqrt(2);function s_(e,t,i){const a=(t-e)/Math.max(0,i),f=Math.floor(Math.log10(a)),v=a/Math.pow(10,f),m=v>=cF?10:v>=uF?5:v>=hF?2:1;let l,P,C;return f<0?(C=Math.pow(10,-f)/m,l=Math.round(e*C),P=Math.round(t*C),l/C<e&&++l,P/C>t&&--P,C=-C):(C=Math.pow(10,f)*m,l=Math.round(e/C),P=Math.round(t/C),l*C<e&&++l,P*C>t&&--P),P<l&&.5<=i&&i<2?s_(e,t,i*2):[l,P,C]}function T2(e,t,i){if(t=+t,e=+e,i=+i,!(i>0))return[];if(e===t)return[e];const a=t<e,[f,v,m]=a?s_(t,e,i):s_(e,t,i);if(!(v>=f))return[];const l=v-f+1,P=new Array(l);if(a)if(m<0)for(let C=0;C<l;++C)P[C]=(v-C)/-m;else for(let C=0;C<l;++C)P[C]=(v-C)*m;else if(m<0)for(let C=0;C<l;++C)P[C]=(f+C)/-m;else for(let C=0;C<l;++C)P[C]=(f+C)*m;return P}function A2(e,t,i){return t=+t,e=+e,i=+i,s_(e,t,i)[2]}function M2(e,t,i){t=+t,e=+e,i=+i;const a=t<e,f=a?A2(t,e,i):A2(e,t,i);return(a?-1:1)*(f<0?1/-f:f)}function XE(e,t){let i;for(const a of e)a!=null&&(i<a||i===void 0&&a>=a)&&(i=a);return i}function WE(e,t){let i;for(const a of e)a!=null&&(i>a||i===void 0&&a>=a)&&(i=a);return i}function AI(e,t,i=0,a=1/0,f){if(t=Math.floor(t),i=Math.floor(Math.max(0,i)),a=Math.floor(Math.min(e.length-1,a)),!(i<=t&&t<=a))return e;for(f=f===void 0?TI:lF(f);a>i;){if(a-i>600){const P=a-i+1,C=t-i+1,z=Math.log(P),O=.5*Math.exp(2*z/3),B=.5*Math.sqrt(z*O*(P-O)/P)*(C-P/2<0?-1:1),F=Math.max(i,Math.floor(t-C*O/P+B)),X=Math.min(a,Math.floor(t+(P-C)*O/P+B));AI(e,t,F,X,f)}const v=e[t];let m=i,l=a;for(Pg(e,i,t),f(e[a],v)>0&&Pg(e,i,a);m<l;){for(Pg(e,m,l),++m,--l;f(e[m],v)<0;)++m;for(;f(e[l],v)>0;)--l}f(e[i],v)===0?Pg(e,i,l):(++l,Pg(e,l,a)),l<=t&&(i=l+1),t<=l&&(a=l-1)}return e}function Pg(e,t,i){const a=e[t];e[t]=e[i],e[i]=a}function dF(e,t,i){if(e=Float64Array.from(nF(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return WE(e);if(t>=1)return XE(e);var a,f=(a-1)*t,v=Math.floor(f),m=XE(AI(e,v).subarray(0,v+1)),l=WE(e.subarray(v+1));return m+(l-m)*(f-v)}}function fF(e,t,i=SI){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+i(e[0],0,e);if(t>=1)return+i(e[a-1],a-1,e);var a,f=(a-1)*t,v=Math.floor(f),m=+i(e[v],v,e),l=+i(e[v+1],v+1,e);return m+(l-m)*(f-v)}}function pF(e,t,i){e=+e,t=+t,i=(f=arguments.length)<2?(t=e,e=0,1):f<3?1:+i;for(var a=-1,f=Math.max(0,Math.ceil((t-e)/i))|0,v=new Array(f);++a<f;)v[a]=e+a*i;return v}function ll(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ju(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const P2=Symbol("implicit");function WS(){var e=new ZE,t=[],i=[],a=P2;function f(v){let m=e.get(v);if(m===void 0){if(a!==P2)return a;e.set(v,m=t.push(v)-1)}return i[m%i.length]}return f.domain=function(v){if(!arguments.length)return t.slice();t=[],e=new ZE;for(const m of v)e.has(m)||e.set(m,t.push(m)-1);return f},f.range=function(v){return arguments.length?(i=Array.from(v),f):i.slice()},f.unknown=function(v){return arguments.length?(a=v,f):a},f.copy=function(){return WS(t,i).unknown(a)},ll.apply(f,arguments),f}function ry(){var e=WS().unknown(void 0),t=e.domain,i=e.range,a=0,f=1,v,m,l=!1,P=0,C=0,z=.5;delete e.unknown;function O(){var B=t().length,F=f<a,X=F?f:a,Z=F?a:f;v=(Z-X)/Math.max(1,B-P+C*2),l&&(v=Math.floor(v)),X+=(Z-X-v*(B-P))*z,m=v*(1-P),l&&(X=Math.round(X),m=Math.round(m));var U=pF(B).map(function(re){return X+v*re});return i(F?U.reverse():U)}return e.domain=function(B){return arguments.length?(t(B),O()):t()},e.range=function(B){return arguments.length?([a,f]=B,a=+a,f=+f,O()):[a,f]},e.rangeRound=function(B){return[a,f]=B,a=+a,f=+f,l=!0,O()},e.bandwidth=function(){return m},e.step=function(){return v},e.round=function(B){return arguments.length?(l=!!B,O()):l},e.padding=function(B){return arguments.length?(P=Math.min(1,C=+B),O()):P},e.paddingInner=function(B){return arguments.length?(P=Math.min(1,B),O()):P},e.paddingOuter=function(B){return arguments.length?(C=+B,O()):C},e.align=function(B){return arguments.length?(z=Math.max(0,Math.min(1,B)),O()):z},e.copy=function(){return ry(t(),[a,f]).round(l).paddingInner(P).paddingOuter(C).align(z)},ll.apply(O(),arguments)}function MI(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return MI(t())},e}function Ug(){return MI(ry.apply(null,arguments).paddingInner(1))}function YS(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function PI(e,t){var i=Object.create(e.prototype);for(var a in t)i[a]=t[a];return i}function Ry(){}var ny=.7,l_=1/ny,Xp="\\s*([+-]?\\d+)\\s*",iy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mF=/^#([0-9a-f]{3,8})$/,gF=new RegExp(`^rgb\\(${Xp},${Xp},${Xp}\\)$`),yF=new RegExp(`^rgb\\(${Xc},${Xc},${Xc}\\)$`),vF=new RegExp(`^rgba\\(${Xp},${Xp},${Xp},${iy}\\)$`),_F=new RegExp(`^rgba\\(${Xc},${Xc},${Xc},${iy}\\)$`),xF=new RegExp(`^hsl\\(${iy},${Xc},${Xc}\\)$`),bF=new RegExp(`^hsla\\(${iy},${Xc},${Xc},${iy}\\)$`),YE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};YS(Ry,ay,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:KE,formatHex:KE,formatHex8:wF,formatHsl:SF,formatRgb:QE,toString:QE});function KE(){return this.rgb().formatHex()}function wF(){return this.rgb().formatHex8()}function SF(){return EI(this).formatHsl()}function QE(){return this.rgb().formatRgb()}function ay(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=mF.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?JE(t):i===3?new es(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?zv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?zv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gF.exec(e))?new es(t[1],t[2],t[3],1):(t=yF.exec(e))?new es(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vF.exec(e))?zv(t[1],t[2],t[3],t[4]):(t=_F.exec(e))?zv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xF.exec(e))?rC(t[1],t[2]/100,t[3]/100,1):(t=bF.exec(e))?rC(t[1],t[2]/100,t[3]/100,t[4]):YE.hasOwnProperty(e)?JE(YE[e]):e==="transparent"?new es(NaN,NaN,NaN,0):null}function JE(e){return new es(e>>16&255,e>>8&255,e&255,1)}function zv(e,t,i,a){return a<=0&&(e=t=i=NaN),new es(e,t,i,a)}function TF(e){return e instanceof Ry||(e=ay(e)),e?(e=e.rgb(),new es(e.r,e.g,e.b,e.opacity)):new es}function E2(e,t,i,a){return arguments.length===1?TF(e):new es(e,t,i,a??1)}function es(e,t,i,a){this.r=+e,this.g=+t,this.b=+i,this.opacity=+a}YS(es,E2,PI(Ry,{brighter(e){return e=e==null?l_:Math.pow(l_,e),new es(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ny:Math.pow(ny,e),new es(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new es(Tf(this.r),Tf(this.g),Tf(this.b),c_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eC,formatHex:eC,formatHex8:AF,formatRgb:tC,toString:tC}));function eC(){return`#${vf(this.r)}${vf(this.g)}${vf(this.b)}`}function AF(){return`#${vf(this.r)}${vf(this.g)}${vf(this.b)}${vf((isNaN(this.opacity)?1:this.opacity)*255)}`}function tC(){const e=c_(this.opacity);return`${e===1?"rgb(":"rgba("}${Tf(this.r)}, ${Tf(this.g)}, ${Tf(this.b)}${e===1?")":`, ${e})`}`}function c_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function vf(e){return e=Tf(e),(e<16?"0":"")+e.toString(16)}function rC(e,t,i,a){return a<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new ac(e,t,i,a)}function EI(e){if(e instanceof ac)return new ac(e.h,e.s,e.l,e.opacity);if(e instanceof Ry||(e=ay(e)),!e)return new ac;if(e instanceof ac)return e;e=e.rgb();var t=e.r/255,i=e.g/255,a=e.b/255,f=Math.min(t,i,a),v=Math.max(t,i,a),m=NaN,l=v-f,P=(v+f)/2;return l?(t===v?m=(i-a)/l+(i<a)*6:i===v?m=(a-t)/l+2:m=(t-i)/l+4,l/=P<.5?v+f:2-v-f,m*=60):l=P>0&&P<1?0:m,new ac(m,l,P,e.opacity)}function MF(e,t,i,a){return arguments.length===1?EI(e):new ac(e,t,i,a??1)}function ac(e,t,i,a){this.h=+e,this.s=+t,this.l=+i,this.opacity=+a}YS(ac,MF,PI(Ry,{brighter(e){return e=e==null?l_:Math.pow(l_,e),new ac(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ny:Math.pow(ny,e),new ac(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*t,f=2*i-a;return new es(nw(e>=240?e-240:e+120,f,a),nw(e,f,a),nw(e<120?e+240:e-120,f,a),this.opacity)},clamp(){return new ac(nC(this.h),Nv(this.s),Nv(this.l),c_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=c_(this.opacity);return`${e===1?"hsl(":"hsla("}${nC(this.h)}, ${Nv(this.s)*100}%, ${Nv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nC(e){return e=(e||0)%360,e<0?e+360:e}function Nv(e){return Math.max(0,Math.min(1,e||0))}function nw(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const KS=e=>()=>e;function PF(e,t){return function(i){return e+i*t}}function EF(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(a){return Math.pow(e+a*t,i)}}function CF(e){return(e=+e)==1?CI:function(t,i){return i-t?EF(t,i,e):KS(isNaN(t)?i:t)}}function CI(e,t){var i=t-e;return i?PF(e,i):KS(isNaN(e)?t:e)}const iC=function e(t){var i=CF(t);function a(f,v){var m=i((f=E2(f)).r,(v=E2(v)).r),l=i(f.g,v.g),P=i(f.b,v.b),C=CI(f.opacity,v.opacity);return function(z){return f.r=m(z),f.g=l(z),f.b=P(z),f.opacity=C(z),f+""}}return a.gamma=e,a}(1);function jF(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,a=t.slice(),f;return function(v){for(f=0;f<i;++f)a[f]=e[f]*(1-v)+t[f]*v;return a}}function OF(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function kF(e,t){var i=t?t.length:0,a=e?Math.min(i,e.length):0,f=new Array(a),v=new Array(i),m;for(m=0;m<a;++m)f[m]=Am(e[m],t[m]);for(;m<i;++m)v[m]=t[m];return function(l){for(m=0;m<a;++m)v[m]=f[m](l);return v}}function IF(e,t){var i=new Date;return e=+e,t=+t,function(a){return i.setTime(e*(1-a)+t*a),i}}function u_(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function DF(e,t){var i={},a={},f;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(f in t)f in e?i[f]=Am(e[f],t[f]):a[f]=t[f];return function(v){for(f in i)a[f]=i[f](v);return a}}var C2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,iw=new RegExp(C2.source,"g");function zF(e){return function(){return e}}function NF(e){return function(t){return e(t)+""}}function RF(e,t){var i=C2.lastIndex=iw.lastIndex=0,a,f,v,m=-1,l=[],P=[];for(e=e+"",t=t+"";(a=C2.exec(e))&&(f=iw.exec(t));)(v=f.index)>i&&(v=t.slice(i,v),l[m]?l[m]+=v:l[++m]=v),(a=a[0])===(f=f[0])?l[m]?l[m]+=f:l[++m]=f:(l[++m]=null,P.push({i:m,x:u_(a,f)})),i=iw.lastIndex;return i<t.length&&(v=t.slice(i),l[m]?l[m]+=v:l[++m]=v),l.length<2?P[0]?NF(P[0].x):zF(t):(t=P.length,function(C){for(var z=0,O;z<t;++z)l[(O=P[z]).i]=O.x(C);return l.join("")})}function Am(e,t){var i=typeof t,a;return t==null||i==="boolean"?KS(t):(i==="number"?u_:i==="string"?(a=ay(t))?(t=a,iC):RF:t instanceof ay?iC:t instanceof Date?IF:OF(t)?jF:Array.isArray(t)?kF:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?DF:u_)(e,t)}function QS(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}function LF(e,t){t===void 0&&(t=e,e=Am);for(var i=0,a=t.length-1,f=t[0],v=new Array(a<0?0:a);i<a;)v[i]=e(f,f=t[++i]);return function(m){var l=Math.max(0,Math.min(a-1,Math.floor(m*=a)));return v[l](m-l)}}function BF(e){return function(){return e}}function h_(e){return+e}var aC=[0,1];function Ao(e){return e}function j2(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:BF(isNaN(t)?NaN:.5)}function FF(e,t){var i;return e>t&&(i=e,e=t,t=i),function(a){return Math.max(e,Math.min(t,a))}}function $F(e,t,i){var a=e[0],f=e[1],v=t[0],m=t[1];return f<a?(a=j2(f,a),v=i(m,v)):(a=j2(a,f),v=i(v,m)),function(l){return v(a(l))}}function qF(e,t,i){var a=Math.min(e.length,t.length)-1,f=new Array(a),v=new Array(a),m=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++m<a;)f[m]=j2(e[m],e[m+1]),v[m]=i(t[m],t[m+1]);return function(l){var P=Ny(e,l,1,a)-1;return v[P](f[P](l))}}function Ly(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function rx(){var e=aC,t=aC,i=Am,a,f,v,m=Ao,l,P,C;function z(){var B=Math.min(e.length,t.length);return m!==Ao&&(m=FF(e[0],e[B-1])),l=B>2?qF:$F,P=C=null,O}function O(B){return B==null||isNaN(B=+B)?v:(P||(P=l(e.map(a),t,i)))(a(m(B)))}return O.invert=function(B){return m(f((C||(C=l(t,e.map(a),u_)))(B)))},O.domain=function(B){return arguments.length?(e=Array.from(B,h_),z()):e.slice()},O.range=function(B){return arguments.length?(t=Array.from(B),z()):t.slice()},O.rangeRound=function(B){return t=Array.from(B),i=QS,z()},O.clamp=function(B){return arguments.length?(m=B?!0:Ao,z()):m!==Ao},O.interpolate=function(B){return arguments.length?(i=B,z()):i},O.unknown=function(B){return arguments.length?(v=B,O):v},function(B,F){return a=B,f=F,z()}}function JS(){return rx()(Ao,Ao)}function UF(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function d_(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,a=e.slice(0,i);return[a.length>1?a[0]+a.slice(2):a,+e.slice(i+1)]}function tm(e){return e=d_(Math.abs(e)),e?e[1]:NaN}function VF(e,t){return function(i,a){for(var f=i.length,v=[],m=0,l=e[0],P=0;f>0&&l>0&&(P+l+1>a&&(l=Math.max(1,a-P)),v.push(i.substring(f-=l,f+l)),!((P+=l+1)>a));)l=e[m=(m+1)%e.length];return v.reverse().join(t)}}function GF(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var ZF=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oy(e){if(!(t=ZF.exec(e)))throw new Error("invalid format: "+e);var t;return new eT({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}oy.prototype=eT.prototype;function eT(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}eT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function HF(e){e:for(var t=e.length,i=1,a=-1,f;i<t;++i)switch(e[i]){case".":a=f=i;break;case"0":a===0&&(a=i),f=i;break;default:if(!+e[i])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(f+1):e}var jI;function XF(e,t){var i=d_(e,t);if(!i)return e+"";var a=i[0],f=i[1],v=f-(jI=Math.max(-8,Math.min(8,Math.floor(f/3)))*3)+1,m=a.length;return v===m?a:v>m?a+new Array(v-m+1).join("0"):v>0?a.slice(0,v)+"."+a.slice(v):"0."+new Array(1-v).join("0")+d_(e,Math.max(0,t+v-1))[0]}function oC(e,t){var i=d_(e,t);if(!i)return e+"";var a=i[0],f=i[1];return f<0?"0."+new Array(-f).join("0")+a:a.length>f+1?a.slice(0,f+1)+"."+a.slice(f+1):a+new Array(f-a.length+2).join("0")}const sC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:UF,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>oC(e*100,t),r:oC,s:XF,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function lC(e){return e}var cC=Array.prototype.map,uC=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function WF(e){var t=e.grouping===void 0||e.thousands===void 0?lC:VF(cC.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",f=e.decimal===void 0?".":e.decimal+"",v=e.numerals===void 0?lC:GF(cC.call(e.numerals,String)),m=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",P=e.nan===void 0?"NaN":e.nan+"";function C(O){O=oy(O);var B=O.fill,F=O.align,X=O.sign,Z=O.symbol,U=O.zero,re=O.width,se=O.comma,ne=O.precision,ue=O.trim,J=O.type;J==="n"?(se=!0,J="g"):sC[J]||(ne===void 0&&(ne=12),ue=!0,J="g"),(U||B==="0"&&F==="=")&&(U=!0,B="0",F="=");var ae=Z==="$"?i:Z==="#"&&/[boxX]/.test(J)?"0"+J.toLowerCase():"",he=Z==="$"?a:/[%p]/.test(J)?m:"",ve=sC[J],Ie=/[defgprs%]/.test(J);ne=ne===void 0?6:/[gprs]/.test(J)?Math.max(1,Math.min(21,ne)):Math.max(0,Math.min(20,ne));function at(De){var Fe=ae,tt=he,ut,rt,Pe;if(J==="c")tt=ve(De)+tt,De="";else{De=+De;var Ve=De<0||1/De<0;if(De=isNaN(De)?P:ve(Math.abs(De),ne),ue&&(De=HF(De)),Ve&&+De==0&&X!=="+"&&(Ve=!1),Fe=(Ve?X==="("?X:l:X==="-"||X==="("?"":X)+Fe,tt=(J==="s"?uC[8+jI/3]:"")+tt+(Ve&&X==="("?")":""),Ie){for(ut=-1,rt=De.length;++ut<rt;)if(Pe=De.charCodeAt(ut),48>Pe||Pe>57){tt=(Pe===46?f+De.slice(ut+1):De.slice(ut))+tt,De=De.slice(0,ut);break}}}se&&!U&&(De=t(De,1/0));var Ge=Fe.length+De.length+tt.length,ht=Ge<re?new Array(re-Ge+1).join(B):"";switch(se&&U&&(De=t(ht+De,ht.length?re-tt.length:1/0),ht=""),F){case"<":De=Fe+De+tt+ht;break;case"=":De=Fe+ht+De+tt;break;case"^":De=ht.slice(0,Ge=ht.length>>1)+Fe+De+tt+ht.slice(Ge);break;default:De=ht+Fe+De+tt;break}return v(De)}return at.toString=function(){return O+""},at}function z(O,B){var F=C((O=oy(O),O.type="f",O)),X=Math.max(-8,Math.min(8,Math.floor(tm(B)/3)))*3,Z=Math.pow(10,-X),U=uC[8+X/3];return function(re){return F(Z*re)+U}}return{format:C,formatPrefix:z}}var Rv,tT,OI;YF({thousands:",",grouping:[3],currency:["$",""]});function YF(e){return Rv=WF(e),tT=Rv.format,OI=Rv.formatPrefix,Rv}function KF(e){return Math.max(0,-tm(Math.abs(e)))}function QF(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(tm(t)/3)))*3-tm(Math.abs(e)))}function JF(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,tm(t)-tm(e))+1}function kI(e,t,i,a){var f=M2(e,t,i),v;switch(a=oy(a??",f"),a.type){case"s":{var m=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(v=QF(f,m))&&(a.precision=v),OI(a,m)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(v=JF(f,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=v-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(v=KF(f))&&(a.precision=v-(a.type==="%")*2);break}}return tT(a)}function fd(e){var t=e.domain;return e.ticks=function(i){var a=t();return T2(a[0],a[a.length-1],i??10)},e.tickFormat=function(i,a){var f=t();return kI(f[0],f[f.length-1],i??10,a)},e.nice=function(i){i==null&&(i=10);var a=t(),f=0,v=a.length-1,m=a[f],l=a[v],P,C,z=10;for(l<m&&(C=m,m=l,l=C,C=f,f=v,v=C);z-- >0;){if(C=A2(m,l,i),C===P)return a[f]=m,a[v]=l,t(a);if(C>0)m=Math.floor(m/C)*C,l=Math.ceil(l/C)*C;else if(C<0)m=Math.ceil(m*C)/C,l=Math.floor(l*C)/C;else break;P=C}return e},e}function f_(){var e=JS();return e.copy=function(){return Ly(e,f_())},ll.apply(e,arguments),fd(e)}function II(e){var t;function i(a){return a==null||isNaN(a=+a)?t:a}return i.invert=i,i.domain=i.range=function(a){return arguments.length?(e=Array.from(a,h_),i):e.slice()},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return II(e).unknown(t)},e=arguments.length?Array.from(e,h_):[0,1],fd(i)}function DI(e,t){e=e.slice();var i=0,a=e.length-1,f=e[i],v=e[a],m;return v<f&&(m=i,i=a,a=m,m=f,f=v,v=m),e[i]=t.floor(f),e[a]=t.ceil(v),e}function hC(e){return Math.log(e)}function dC(e){return Math.exp(e)}function e8(e){return-Math.log(-e)}function t8(e){return-Math.exp(-e)}function r8(e){return isFinite(e)?+("1e"+e):e<0?0:e}function n8(e){return e===10?r8:e===Math.E?Math.exp:t=>Math.pow(e,t)}function i8(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function fC(e){return(t,i)=>-e(-t,i)}function rT(e){const t=e(hC,dC),i=t.domain;let a=10,f,v;function m(){return f=i8(a),v=n8(a),i()[0]<0?(f=fC(f),v=fC(v),e(e8,t8)):e(hC,dC),t}return t.base=function(l){return arguments.length?(a=+l,m()):a},t.domain=function(l){return arguments.length?(i(l),m()):i()},t.ticks=l=>{const P=i();let C=P[0],z=P[P.length-1];const O=z<C;O&&([C,z]=[z,C]);let B=f(C),F=f(z),X,Z;const U=l==null?10:+l;let re=[];if(!(a%1)&&F-B<U){if(B=Math.floor(B),F=Math.ceil(F),C>0){for(;B<=F;++B)for(X=1;X<a;++X)if(Z=B<0?X/v(-B):X*v(B),!(Z<C)){if(Z>z)break;re.push(Z)}}else for(;B<=F;++B)for(X=a-1;X>=1;--X)if(Z=B>0?X/v(-B):X*v(B),!(Z<C)){if(Z>z)break;re.push(Z)}re.length*2<U&&(re=T2(C,z,U))}else re=T2(B,F,Math.min(F-B,U)).map(v);return O?re.reverse():re},t.tickFormat=(l,P)=>{if(l==null&&(l=10),P==null&&(P=a===10?"s":","),typeof P!="function"&&(!(a%1)&&(P=oy(P)).precision==null&&(P.trim=!0),P=tT(P)),l===1/0)return P;const C=Math.max(1,a*l/t.ticks().length);return z=>{let O=z/v(Math.round(f(z)));return O*a<a-.5&&(O*=a),O<=C?P(z):""}},t.nice=()=>i(DI(i(),{floor:l=>v(Math.floor(f(l))),ceil:l=>v(Math.ceil(f(l)))})),t}function zI(){const e=rT(rx()).domain([1,10]);return e.copy=()=>Ly(e,zI()).base(e.base()),ll.apply(e,arguments),e}function pC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function mC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function nT(e){var t=1,i=e(pC(t),mC(t));return i.constant=function(a){return arguments.length?e(pC(t=+a),mC(t)):t},fd(i)}function NI(){var e=nT(rx());return e.copy=function(){return Ly(e,NI()).constant(e.constant())},ll.apply(e,arguments)}function gC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function a8(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function o8(e){return e<0?-e*e:e*e}function iT(e){var t=e(Ao,Ao),i=1;function a(){return i===1?e(Ao,Ao):i===.5?e(a8,o8):e(gC(i),gC(1/i))}return t.exponent=function(f){return arguments.length?(i=+f,a()):i},fd(t)}function aT(){var e=iT(rx());return e.copy=function(){return Ly(e,aT()).exponent(e.exponent())},ll.apply(e,arguments),e}function s8(){return aT.apply(null,arguments).exponent(.5)}function yC(e){return Math.sign(e)*e*e}function l8(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function RI(){var e=JS(),t=[0,1],i=!1,a;function f(v){var m=l8(e(v));return isNaN(m)?a:i?Math.round(m):m}return f.invert=function(v){return e.invert(yC(v))},f.domain=function(v){return arguments.length?(e.domain(v),f):e.domain()},f.range=function(v){return arguments.length?(e.range((t=Array.from(v,h_)).map(yC)),f):t.slice()},f.rangeRound=function(v){return f.range(v).round(!0)},f.round=function(v){return arguments.length?(i=!!v,f):i},f.clamp=function(v){return arguments.length?(e.clamp(v),f):e.clamp()},f.unknown=function(v){return arguments.length?(a=v,f):a},f.copy=function(){return RI(e.domain(),t).round(i).clamp(e.clamp()).unknown(a)},ll.apply(f,arguments),fd(f)}function LI(){var e=[],t=[],i=[],a;function f(){var m=0,l=Math.max(1,t.length);for(i=new Array(l-1);++m<l;)i[m-1]=fF(e,m/l);return v}function v(m){return m==null||isNaN(m=+m)?a:t[Ny(i,m)]}return v.invertExtent=function(m){var l=t.indexOf(m);return l<0?[NaN,NaN]:[l>0?i[l-1]:e[0],l<i.length?i[l]:e[e.length-1]]},v.domain=function(m){if(!arguments.length)return e.slice();e=[];for(let l of m)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(cd),f()},v.range=function(m){return arguments.length?(t=Array.from(m),f()):t.slice()},v.unknown=function(m){return arguments.length?(a=m,v):a},v.quantiles=function(){return i.slice()},v.copy=function(){return LI().domain(e).range(t).unknown(a)},ll.apply(v,arguments)}function BI(){var e=0,t=1,i=1,a=[.5],f=[0,1],v;function m(P){return P!=null&&P<=P?f[Ny(a,P,0,i)]:v}function l(){var P=-1;for(a=new Array(i);++P<i;)a[P]=((P+1)*t-(P-i)*e)/(i+1);return m}return m.domain=function(P){return arguments.length?([e,t]=P,e=+e,t=+t,l()):[e,t]},m.range=function(P){return arguments.length?(i=(f=Array.from(P)).length-1,l()):f.slice()},m.invertExtent=function(P){var C=f.indexOf(P);return C<0?[NaN,NaN]:C<1?[e,a[0]]:C>=i?[a[i-1],t]:[a[C-1],a[C]]},m.unknown=function(P){return arguments.length&&(v=P),m},m.thresholds=function(){return a.slice()},m.copy=function(){return BI().domain([e,t]).range(f).unknown(v)},ll.apply(fd(m),arguments)}function FI(){var e=[.5],t=[0,1],i,a=1;function f(v){return v!=null&&v<=v?t[Ny(e,v,0,a)]:i}return f.domain=function(v){return arguments.length?(e=Array.from(v),a=Math.min(e.length,t.length-1),f):e.slice()},f.range=function(v){return arguments.length?(t=Array.from(v),a=Math.min(e.length,t.length-1),f):t.slice()},f.invertExtent=function(v){var m=t.indexOf(v);return[e[m-1],e[m]]},f.unknown=function(v){return arguments.length?(i=v,f):i},f.copy=function(){return FI().domain(e).range(t).unknown(i)},ll.apply(f,arguments)}const aw=new Date,ow=new Date;function ca(e,t,i,a){function f(v){return e(v=arguments.length===0?new Date:new Date(+v)),v}return f.floor=v=>(e(v=new Date(+v)),v),f.ceil=v=>(e(v=new Date(v-1)),t(v,1),e(v),v),f.round=v=>{const m=f(v),l=f.ceil(v);return v-m<l-v?m:l},f.offset=(v,m)=>(t(v=new Date(+v),m==null?1:Math.floor(m)),v),f.range=(v,m,l)=>{const P=[];if(v=f.ceil(v),l=l==null?1:Math.floor(l),!(v<m)||!(l>0))return P;let C;do P.push(C=new Date(+v)),t(v,l),e(v);while(C<v&&v<m);return P},f.filter=v=>ca(m=>{if(m>=m)for(;e(m),!v(m);)m.setTime(m-1)},(m,l)=>{if(m>=m)if(l<0)for(;++l<=0;)for(;t(m,-1),!v(m););else for(;--l>=0;)for(;t(m,1),!v(m););}),i&&(f.count=(v,m)=>(aw.setTime(+v),ow.setTime(+m),e(aw),e(ow),Math.floor(i(aw,ow))),f.every=v=>(v=Math.floor(v),!isFinite(v)||!(v>0)?null:v>1?f.filter(a?m=>a(m)%v===0:m=>f.count(0,m)%v===0):f)),f}const p_=ca(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);p_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ca(t=>{t.setTime(Math.floor(t/e)*e)},(t,i)=>{t.setTime(+t+i*e)},(t,i)=>(i-t)/e):p_);p_.range;const Fu=1e3,il=Fu*60,$u=il*60,Hu=$u*24,oT=Hu*7,vC=Hu*30,sw=Hu*365,_f=ca(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Fu)},(e,t)=>(t-e)/Fu,e=>e.getUTCSeconds());_f.range;const sT=ca(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fu)},(e,t)=>{e.setTime(+e+t*il)},(e,t)=>(t-e)/il,e=>e.getMinutes());sT.range;const lT=ca(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*il)},(e,t)=>(t-e)/il,e=>e.getUTCMinutes());lT.range;const cT=ca(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fu-e.getMinutes()*il)},(e,t)=>{e.setTime(+e+t*$u)},(e,t)=>(t-e)/$u,e=>e.getHours());cT.range;const uT=ca(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*$u)},(e,t)=>(t-e)/$u,e=>e.getUTCHours());uT.range;const By=ca(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*il)/Hu,e=>e.getDate()-1);By.range;const nx=ca(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hu,e=>e.getUTCDate()-1);nx.range;const $I=ca(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hu,e=>Math.floor(e/Hu));$I.range;function If(e){return ca(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,i)=>{t.setDate(t.getDate()+i*7)},(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*il)/oT)}const ix=If(0),m_=If(1),c8=If(2),u8=If(3),rm=If(4),h8=If(5),d8=If(6);ix.range;m_.range;c8.range;u8.range;rm.range;h8.range;d8.range;function Df(e){return ca(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i*7)},(t,i)=>(i-t)/oT)}const ax=Df(0),g_=Df(1),f8=Df(2),p8=Df(3),nm=Df(4),m8=Df(5),g8=Df(6);ax.range;g_.range;f8.range;p8.range;nm.range;m8.range;g8.range;const hT=ca(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());hT.range;const dT=ca(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());dT.range;const Xu=ca(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Xu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ca(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,i)=>{t.setFullYear(t.getFullYear()+i*e)});Xu.range;const Wu=ca(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Wu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ca(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i*e)});Wu.range;function qI(e,t,i,a,f,v){const m=[[_f,1,Fu],[_f,5,5*Fu],[_f,15,15*Fu],[_f,30,30*Fu],[v,1,il],[v,5,5*il],[v,15,15*il],[v,30,30*il],[f,1,$u],[f,3,3*$u],[f,6,6*$u],[f,12,12*$u],[a,1,Hu],[a,2,2*Hu],[i,1,oT],[t,1,vC],[t,3,3*vC],[e,1,sw]];function l(C,z,O){const B=z<C;B&&([C,z]=[z,C]);const F=O&&typeof O.range=="function"?O:P(C,z,O),X=F?F.range(C,+z+1):[];return B?X.reverse():X}function P(C,z,O){const B=Math.abs(z-C)/O,F=XS(([,,U])=>U).right(m,B);if(F===m.length)return e.every(M2(C/sw,z/sw,O));if(F===0)return p_.every(Math.max(M2(C,z,O),1));const[X,Z]=m[B/m[F-1][2]<m[F][2]/B?F-1:F];return X.every(Z)}return[l,P]}const[y8,v8]=qI(Wu,dT,ax,$I,uT,lT),[_8,x8]=qI(Xu,hT,ix,By,cT,sT);function lw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Eg(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}function b8(e){var t=e.dateTime,i=e.date,a=e.time,f=e.periods,v=e.days,m=e.shortDays,l=e.months,P=e.shortMonths,C=Cg(f),z=jg(f),O=Cg(v),B=jg(v),F=Cg(m),X=jg(m),Z=Cg(l),U=jg(l),re=Cg(P),se=jg(P),ne={a:Ve,A:Ge,b:ht,B:xe,c:null,d:TC,e:TC,f:V8,g:e$,G:r$,H:$8,I:q8,j:U8,L:UI,m:G8,M:Z8,p:Xe,q:ot,Q:PC,s:EC,S:H8,u:X8,U:W8,V:Y8,w:K8,W:Q8,x:null,X:null,y:J8,Y:t$,Z:n$,"%":MC},ue={a:st,A:Pt,b:Vt,B:Nt,c:null,d:AC,e:AC,f:s$,g:y$,G:_$,H:i$,I:a$,j:o$,L:GI,m:l$,M:c$,p:yr,q:ar,Q:PC,s:EC,S:u$,u:h$,U:d$,V:f$,w:p$,W:m$,x:null,X:null,y:g$,Y:v$,Z:x$,"%":MC},J={a:at,A:De,b:Fe,B:tt,c:ut,d:wC,e:wC,f:R8,g:bC,G:xC,H:SC,I:SC,j:I8,L:N8,m:k8,M:D8,p:Ie,q:O8,Q:B8,s:F8,S:z8,u:M8,U:P8,V:E8,w:A8,W:C8,x:rt,X:Pe,y:bC,Y:xC,Z:j8,"%":L8};ne.x=ae(i,ne),ne.X=ae(a,ne),ne.c=ae(t,ne),ue.x=ae(i,ue),ue.X=ae(a,ue),ue.c=ae(t,ue);function ae(Ot,er){return function(or){var _t=[],fr=-1,Qt=0,Yr=Ot.length,tn,Kr,ki;for(or instanceof Date||(or=new Date(+or));++fr<Yr;)Ot.charCodeAt(fr)===37&&(_t.push(Ot.slice(Qt,fr)),(Kr=_C[tn=Ot.charAt(++fr)])!=null?tn=Ot.charAt(++fr):Kr=tn==="e"?" ":"0",(ki=er[tn])&&(tn=ki(or,Kr)),_t.push(tn),Qt=fr+1);return _t.push(Ot.slice(Qt,fr)),_t.join("")}}function he(Ot,er){return function(or){var _t=Eg(1900,void 0,1),fr=ve(_t,Ot,or+="",0),Qt,Yr;if(fr!=or.length)return null;if("Q"in _t)return new Date(_t.Q);if("s"in _t)return new Date(_t.s*1e3+("L"in _t?_t.L:0));if(er&&!("Z"in _t)&&(_t.Z=0),"p"in _t&&(_t.H=_t.H%12+_t.p*12),_t.m===void 0&&(_t.m="q"in _t?_t.q:0),"V"in _t){if(_t.V<1||_t.V>53)return null;"w"in _t||(_t.w=1),"Z"in _t?(Qt=cw(Eg(_t.y,0,1)),Yr=Qt.getUTCDay(),Qt=Yr>4||Yr===0?g_.ceil(Qt):g_(Qt),Qt=nx.offset(Qt,(_t.V-1)*7),_t.y=Qt.getUTCFullYear(),_t.m=Qt.getUTCMonth(),_t.d=Qt.getUTCDate()+(_t.w+6)%7):(Qt=lw(Eg(_t.y,0,1)),Yr=Qt.getDay(),Qt=Yr>4||Yr===0?m_.ceil(Qt):m_(Qt),Qt=By.offset(Qt,(_t.V-1)*7),_t.y=Qt.getFullYear(),_t.m=Qt.getMonth(),_t.d=Qt.getDate()+(_t.w+6)%7)}else("W"in _t||"U"in _t)&&("w"in _t||(_t.w="u"in _t?_t.u%7:"W"in _t?1:0),Yr="Z"in _t?cw(Eg(_t.y,0,1)).getUTCDay():lw(Eg(_t.y,0,1)).getDay(),_t.m=0,_t.d="W"in _t?(_t.w+6)%7+_t.W*7-(Yr+5)%7:_t.w+_t.U*7-(Yr+6)%7);return"Z"in _t?(_t.H+=_t.Z/100|0,_t.M+=_t.Z%100,cw(_t)):lw(_t)}}function ve(Ot,er,or,_t){for(var fr=0,Qt=er.length,Yr=or.length,tn,Kr;fr<Qt;){if(_t>=Yr)return-1;if(tn=er.charCodeAt(fr++),tn===37){if(tn=er.charAt(fr++),Kr=J[tn in _C?er.charAt(fr++):tn],!Kr||(_t=Kr(Ot,or,_t))<0)return-1}else if(tn!=or.charCodeAt(_t++))return-1}return _t}function Ie(Ot,er,or){var _t=C.exec(er.slice(or));return _t?(Ot.p=z.get(_t[0].toLowerCase()),or+_t[0].length):-1}function at(Ot,er,or){var _t=F.exec(er.slice(or));return _t?(Ot.w=X.get(_t[0].toLowerCase()),or+_t[0].length):-1}function De(Ot,er,or){var _t=O.exec(er.slice(or));return _t?(Ot.w=B.get(_t[0].toLowerCase()),or+_t[0].length):-1}function Fe(Ot,er,or){var _t=re.exec(er.slice(or));return _t?(Ot.m=se.get(_t[0].toLowerCase()),or+_t[0].length):-1}function tt(Ot,er,or){var _t=Z.exec(er.slice(or));return _t?(Ot.m=U.get(_t[0].toLowerCase()),or+_t[0].length):-1}function ut(Ot,er,or){return ve(Ot,t,er,or)}function rt(Ot,er,or){return ve(Ot,i,er,or)}function Pe(Ot,er,or){return ve(Ot,a,er,or)}function Ve(Ot){return m[Ot.getDay()]}function Ge(Ot){return v[Ot.getDay()]}function ht(Ot){return P[Ot.getMonth()]}function xe(Ot){return l[Ot.getMonth()]}function Xe(Ot){return f[+(Ot.getHours()>=12)]}function ot(Ot){return 1+~~(Ot.getMonth()/3)}function st(Ot){return m[Ot.getUTCDay()]}function Pt(Ot){return v[Ot.getUTCDay()]}function Vt(Ot){return P[Ot.getUTCMonth()]}function Nt(Ot){return l[Ot.getUTCMonth()]}function yr(Ot){return f[+(Ot.getUTCHours()>=12)]}function ar(Ot){return 1+~~(Ot.getUTCMonth()/3)}return{format:function(Ot){var er=ae(Ot+="",ne);return er.toString=function(){return Ot},er},parse:function(Ot){var er=he(Ot+="",!1);return er.toString=function(){return Ot},er},utcFormat:function(Ot){var er=ae(Ot+="",ue);return er.toString=function(){return Ot},er},utcParse:function(Ot){var er=he(Ot+="",!0);return er.toString=function(){return Ot},er}}}var _C={"-":"",_:" ",0:"0"},Ma=/^\s*\d+/,w8=/^%/,S8=/[\\^$*+?|[\]().{}]/g;function un(e,t,i){var a=e<0?"-":"",f=(a?-e:e)+"",v=f.length;return a+(v<i?new Array(i-v+1).join(t)+f:f)}function T8(e){return e.replace(S8,"\\$&")}function Cg(e){return new RegExp("^(?:"+e.map(T8).join("|")+")","i")}function jg(e){return new Map(e.map((t,i)=>[t.toLowerCase(),i]))}function A8(e,t,i){var a=Ma.exec(t.slice(i,i+1));return a?(e.w=+a[0],i+a[0].length):-1}function M8(e,t,i){var a=Ma.exec(t.slice(i,i+1));return a?(e.u=+a[0],i+a[0].length):-1}function P8(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.U=+a[0],i+a[0].length):-1}function E8(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.V=+a[0],i+a[0].length):-1}function C8(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.W=+a[0],i+a[0].length):-1}function xC(e,t,i){var a=Ma.exec(t.slice(i,i+4));return a?(e.y=+a[0],i+a[0].length):-1}function bC(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),i+a[0].length):-1}function j8(e,t,i){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),i+a[0].length):-1}function O8(e,t,i){var a=Ma.exec(t.slice(i,i+1));return a?(e.q=a[0]*3-3,i+a[0].length):-1}function k8(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.m=a[0]-1,i+a[0].length):-1}function wC(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.d=+a[0],i+a[0].length):-1}function I8(e,t,i){var a=Ma.exec(t.slice(i,i+3));return a?(e.m=0,e.d=+a[0],i+a[0].length):-1}function SC(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.H=+a[0],i+a[0].length):-1}function D8(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.M=+a[0],i+a[0].length):-1}function z8(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.S=+a[0],i+a[0].length):-1}function N8(e,t,i){var a=Ma.exec(t.slice(i,i+3));return a?(e.L=+a[0],i+a[0].length):-1}function R8(e,t,i){var a=Ma.exec(t.slice(i,i+6));return a?(e.L=Math.floor(a[0]/1e3),i+a[0].length):-1}function L8(e,t,i){var a=w8.exec(t.slice(i,i+1));return a?i+a[0].length:-1}function B8(e,t,i){var a=Ma.exec(t.slice(i));return a?(e.Q=+a[0],i+a[0].length):-1}function F8(e,t,i){var a=Ma.exec(t.slice(i));return a?(e.s=+a[0],i+a[0].length):-1}function TC(e,t){return un(e.getDate(),t,2)}function $8(e,t){return un(e.getHours(),t,2)}function q8(e,t){return un(e.getHours()%12||12,t,2)}function U8(e,t){return un(1+By.count(Xu(e),e),t,3)}function UI(e,t){return un(e.getMilliseconds(),t,3)}function V8(e,t){return UI(e,t)+"000"}function G8(e,t){return un(e.getMonth()+1,t,2)}function Z8(e,t){return un(e.getMinutes(),t,2)}function H8(e,t){return un(e.getSeconds(),t,2)}function X8(e){var t=e.getDay();return t===0?7:t}function W8(e,t){return un(ix.count(Xu(e)-1,e),t,2)}function VI(e){var t=e.getDay();return t>=4||t===0?rm(e):rm.ceil(e)}function Y8(e,t){return e=VI(e),un(rm.count(Xu(e),e)+(Xu(e).getDay()===4),t,2)}function K8(e){return e.getDay()}function Q8(e,t){return un(m_.count(Xu(e)-1,e),t,2)}function J8(e,t){return un(e.getFullYear()%100,t,2)}function e$(e,t){return e=VI(e),un(e.getFullYear()%100,t,2)}function t$(e,t){return un(e.getFullYear()%1e4,t,4)}function r$(e,t){var i=e.getDay();return e=i>=4||i===0?rm(e):rm.ceil(e),un(e.getFullYear()%1e4,t,4)}function n$(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+un(t/60|0,"0",2)+un(t%60,"0",2)}function AC(e,t){return un(e.getUTCDate(),t,2)}function i$(e,t){return un(e.getUTCHours(),t,2)}function a$(e,t){return un(e.getUTCHours()%12||12,t,2)}function o$(e,t){return un(1+nx.count(Wu(e),e),t,3)}function GI(e,t){return un(e.getUTCMilliseconds(),t,3)}function s$(e,t){return GI(e,t)+"000"}function l$(e,t){return un(e.getUTCMonth()+1,t,2)}function c$(e,t){return un(e.getUTCMinutes(),t,2)}function u$(e,t){return un(e.getUTCSeconds(),t,2)}function h$(e){var t=e.getUTCDay();return t===0?7:t}function d$(e,t){return un(ax.count(Wu(e)-1,e),t,2)}function ZI(e){var t=e.getUTCDay();return t>=4||t===0?nm(e):nm.ceil(e)}function f$(e,t){return e=ZI(e),un(nm.count(Wu(e),e)+(Wu(e).getUTCDay()===4),t,2)}function p$(e){return e.getUTCDay()}function m$(e,t){return un(g_.count(Wu(e)-1,e),t,2)}function g$(e,t){return un(e.getUTCFullYear()%100,t,2)}function y$(e,t){return e=ZI(e),un(e.getUTCFullYear()%100,t,2)}function v$(e,t){return un(e.getUTCFullYear()%1e4,t,4)}function _$(e,t){var i=e.getUTCDay();return e=i>=4||i===0?nm(e):nm.ceil(e),un(e.getUTCFullYear()%1e4,t,4)}function x$(){return"+0000"}function MC(){return"%"}function PC(e){return+e}function EC(e){return Math.floor(+e/1e3)}var Fp,HI,XI;b$({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function b$(e){return Fp=b8(e),HI=Fp.format,Fp.parse,XI=Fp.utcFormat,Fp.utcParse,Fp}function w$(e){return new Date(e)}function S$(e){return e instanceof Date?+e:+new Date(+e)}function fT(e,t,i,a,f,v,m,l,P,C){var z=JS(),O=z.invert,B=z.domain,F=C(".%L"),X=C(":%S"),Z=C("%I:%M"),U=C("%I %p"),re=C("%a %d"),se=C("%b %d"),ne=C("%B"),ue=C("%Y");function J(ae){return(P(ae)<ae?F:l(ae)<ae?X:m(ae)<ae?Z:v(ae)<ae?U:a(ae)<ae?f(ae)<ae?re:se:i(ae)<ae?ne:ue)(ae)}return z.invert=function(ae){return new Date(O(ae))},z.domain=function(ae){return arguments.length?B(Array.from(ae,S$)):B().map(w$)},z.ticks=function(ae){var he=B();return e(he[0],he[he.length-1],ae??10)},z.tickFormat=function(ae,he){return he==null?J:C(he)},z.nice=function(ae){var he=B();return(!ae||typeof ae.range!="function")&&(ae=t(he[0],he[he.length-1],ae??10)),ae?B(DI(he,ae)):z},z.copy=function(){return Ly(z,fT(e,t,i,a,f,v,m,l,P,C))},z}function T$(){return ll.apply(fT(_8,x8,Xu,hT,ix,By,cT,sT,_f,HI).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function A$(){return ll.apply(fT(y8,v8,Wu,dT,ax,nx,uT,lT,_f,XI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ox(){var e=0,t=1,i,a,f,v,m=Ao,l=!1,P;function C(O){return O==null||isNaN(O=+O)?P:m(f===0?.5:(O=(v(O)-i)*f,l?Math.max(0,Math.min(1,O)):O))}C.domain=function(O){return arguments.length?([e,t]=O,i=v(e=+e),a=v(t=+t),f=i===a?0:1/(a-i),C):[e,t]},C.clamp=function(O){return arguments.length?(l=!!O,C):l},C.interpolator=function(O){return arguments.length?(m=O,C):m};function z(O){return function(B){var F,X;return arguments.length?([F,X]=B,m=O(F,X),C):[m(0),m(1)]}}return C.range=z(Am),C.rangeRound=z(QS),C.unknown=function(O){return arguments.length?(P=O,C):P},function(O){return v=O,i=O(e),a=O(t),f=i===a?0:1/(a-i),C}}function pd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function WI(){var e=fd(ox()(Ao));return e.copy=function(){return pd(e,WI())},Ju.apply(e,arguments)}function YI(){var e=rT(ox()).domain([1,10]);return e.copy=function(){return pd(e,YI()).base(e.base())},Ju.apply(e,arguments)}function KI(){var e=nT(ox());return e.copy=function(){return pd(e,KI()).constant(e.constant())},Ju.apply(e,arguments)}function pT(){var e=iT(ox());return e.copy=function(){return pd(e,pT()).exponent(e.exponent())},Ju.apply(e,arguments)}function M$(){return pT.apply(null,arguments).exponent(.5)}function QI(){var e=[],t=Ao;function i(a){if(a!=null&&!isNaN(a=+a))return t((Ny(e,a,1)-1)/(e.length-1))}return i.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let f of a)f!=null&&!isNaN(f=+f)&&e.push(f);return e.sort(cd),i},i.interpolator=function(a){return arguments.length?(t=a,i):t},i.range=function(){return e.map((a,f)=>t(f/(e.length-1)))},i.quantiles=function(a){return Array.from({length:a+1},(f,v)=>dF(e,v/a))},i.copy=function(){return QI(t).domain(e)},Ju.apply(i,arguments)}function sx(){var e=0,t=.5,i=1,a=1,f,v,m,l,P,C=Ao,z,O=!1,B;function F(Z){return isNaN(Z=+Z)?B:(Z=.5+((Z=+z(Z))-v)*(a*Z<a*v?l:P),C(O?Math.max(0,Math.min(1,Z)):Z))}F.domain=function(Z){return arguments.length?([e,t,i]=Z,f=z(e=+e),v=z(t=+t),m=z(i=+i),l=f===v?0:.5/(v-f),P=v===m?0:.5/(m-v),a=v<f?-1:1,F):[e,t,i]},F.clamp=function(Z){return arguments.length?(O=!!Z,F):O},F.interpolator=function(Z){return arguments.length?(C=Z,F):C};function X(Z){return function(U){var re,se,ne;return arguments.length?([re,se,ne]=U,C=LF(Z,[re,se,ne]),F):[C(0),C(.5),C(1)]}}return F.range=X(Am),F.rangeRound=X(QS),F.unknown=function(Z){return arguments.length?(B=Z,F):B},function(Z){return z=Z,f=Z(e),v=Z(t),m=Z(i),l=f===v?0:.5/(v-f),P=v===m?0:.5/(m-v),a=v<f?-1:1,F}}function JI(){var e=fd(sx()(Ao));return e.copy=function(){return pd(e,JI())},Ju.apply(e,arguments)}function eD(){var e=rT(sx()).domain([.1,1,10]);return e.copy=function(){return pd(e,eD()).base(e.base())},Ju.apply(e,arguments)}function tD(){var e=nT(sx());return e.copy=function(){return pd(e,tD()).constant(e.constant())},Ju.apply(e,arguments)}function mT(){var e=iT(sx());return e.copy=function(){return pd(e,mT()).exponent(e.exponent())},Ju.apply(e,arguments)}function P$(){return mT.apply(null,arguments).exponent(.5)}const CC=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ry,scaleDiverging:JI,scaleDivergingLog:eD,scaleDivergingPow:mT,scaleDivergingSqrt:P$,scaleDivergingSymlog:tD,scaleIdentity:II,scaleImplicit:P2,scaleLinear:f_,scaleLog:zI,scaleOrdinal:WS,scalePoint:Ug,scalePow:aT,scaleQuantile:LI,scaleQuantize:BI,scaleRadial:RI,scaleSequential:WI,scaleSequentialLog:YI,scaleSequentialPow:pT,scaleSequentialQuantile:QI,scaleSequentialSqrt:M$,scaleSequentialSymlog:KI,scaleSqrt:s8,scaleSymlog:NI,scaleThreshold:FI,scaleTime:T$,scaleUtc:A$,tickFormat:kI},Symbol.toStringTag,{value:"Module"}));var uw,jC;function rD(){if(jC)return uw;jC=1;var e=bm();function t(i,a,f){for(var v=-1,m=i.length;++v<m;){var l=i[v],P=a(l);if(P!=null&&(C===void 0?P===P&&!e(P):f(P,C)))var C=P,z=l}return z}return uw=t,uw}var hw,OC;function E$(){if(OC)return hw;OC=1;function e(t,i){return t>i}return hw=e,hw}var dw,kC;function C$(){if(kC)return dw;kC=1;var e=rD(),t=E$(),i=Sm();function a(f){return f&&f.length?e(f,i,t):void 0}return dw=a,dw}var j$=C$();const lx=Bn(j$);var fw,IC;function O$(){if(IC)return fw;IC=1;function e(t,i){return t<i}return fw=e,fw}var pw,DC;function k$(){if(DC)return pw;DC=1;var e=rD(),t=O$(),i=Sm();function a(f){return f&&f.length?e(f,i,t):void 0}return pw=a,pw}var I$=k$();const cx=Bn(I$);var mw,zC;function D$(){if(zC)return mw;zC=1;var e=OS(),t=dd(),i=uI(),a=ts();function f(v,m){var l=a(v)?e:i;return l(v,t(m,3))}return mw=f,mw}var gw,NC;function z$(){if(NC)return gw;NC=1;var e=lI(),t=D$();function i(a,f){return e(t(a,f),1)}return gw=i,gw}var N$=z$();const R$=Bn(N$);var yw,RC;function L$(){if(RC)return yw;RC=1;var e=VS();function t(i,a){return e(i,a)}return yw=t,yw}var B$=L$();const ux=Bn(B$);var Mm=1e9,F$={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},yT,li=!0,sl="[DecimalError] ",Af=sl+"Invalid argument: ",gT=sl+"Exponent out of range: ",Pm=Math.floor,mf=Math.pow,$$=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ws,Aa=1e7,Qn=7,nD=9007199254740991,y_=Pm(nD/Qn),Wt={};Wt.absoluteValue=Wt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Wt.comparedTo=Wt.cmp=function(e){var t,i,a,f,v=this;if(e=new v.constructor(e),v.s!==e.s)return v.s||-e.s;if(v.e!==e.e)return v.e>e.e^v.s<0?1:-1;for(a=v.d.length,f=e.d.length,t=0,i=a<f?a:f;t<i;++t)if(v.d[t]!==e.d[t])return v.d[t]>e.d[t]^v.s<0?1:-1;return a===f?0:a>f^v.s<0?1:-1};Wt.decimalPlaces=Wt.dp=function(){var e=this,t=e.d.length-1,i=(t-e.e)*Qn;if(t=e.d[t],t)for(;t%10==0;t/=10)i--;return i<0?0:i};Wt.dividedBy=Wt.div=function(e){return Zu(this,new this.constructor(e))};Wt.dividedToIntegerBy=Wt.idiv=function(e){var t=this,i=t.constructor;return Ln(Zu(t,new i(e),0,1),i.precision)};Wt.equals=Wt.eq=function(e){return!this.cmp(e)};Wt.exponent=function(){return Wi(this)};Wt.greaterThan=Wt.gt=function(e){return this.cmp(e)>0};Wt.greaterThanOrEqualTo=Wt.gte=function(e){return this.cmp(e)>=0};Wt.isInteger=Wt.isint=function(){return this.e>this.d.length-2};Wt.isNegative=Wt.isneg=function(){return this.s<0};Wt.isPositive=Wt.ispos=function(){return this.s>0};Wt.isZero=function(){return this.s===0};Wt.lessThan=Wt.lt=function(e){return this.cmp(e)<0};Wt.lessThanOrEqualTo=Wt.lte=function(e){return this.cmp(e)<1};Wt.logarithm=Wt.log=function(e){var t,i=this,a=i.constructor,f=a.precision,v=f+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(ws))throw Error(sl+"NaN");if(i.s<1)throw Error(sl+(i.s?"NaN":"-Infinity"));return i.eq(ws)?new a(0):(li=!1,t=Zu(sy(i,v),sy(e,v),v),li=!0,Ln(t,f))};Wt.minus=Wt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?oD(t,e):iD(t,(e.s=-e.s,e))};Wt.modulo=Wt.mod=function(e){var t,i=this,a=i.constructor,f=a.precision;if(e=new a(e),!e.s)throw Error(sl+"NaN");return i.s?(li=!1,t=Zu(i,e,0,1).times(e),li=!0,i.minus(t)):Ln(new a(i),f)};Wt.naturalExponential=Wt.exp=function(){return aD(this)};Wt.naturalLogarithm=Wt.ln=function(){return sy(this)};Wt.negated=Wt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Wt.plus=Wt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?iD(t,e):oD(t,(e.s=-e.s,e))};Wt.precision=Wt.sd=function(e){var t,i,a,f=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Af+e);if(t=Wi(f)+1,a=f.d.length-1,i=a*Qn+1,a=f.d[a],a){for(;a%10==0;a/=10)i--;for(a=f.d[0];a>=10;a/=10)i++}return e&&t>i?t:i};Wt.squareRoot=Wt.sqrt=function(){var e,t,i,a,f,v,m,l=this,P=l.constructor;if(l.s<1){if(!l.s)return new P(0);throw Error(sl+"NaN")}for(e=Wi(l),li=!1,f=Math.sqrt(+l),f==0||f==1/0?(t=Gc(l.d),(t.length+e)%2==0&&(t+="0"),f=Math.sqrt(t),e=Pm((e+1)/2)-(e<0||e%2),f==1/0?t="5e"+e:(t=f.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new P(t)):a=new P(f.toString()),i=P.precision,f=m=i+3;;)if(v=a,a=v.plus(Zu(l,v,m+2)).times(.5),Gc(v.d).slice(0,m)===(t=Gc(a.d)).slice(0,m)){if(t=t.slice(m-3,m+1),f==m&&t=="4999"){if(Ln(v,i+1,0),v.times(v).eq(l)){a=v;break}}else if(t!="9999")break;m+=4}return li=!0,Ln(a,i)};Wt.times=Wt.mul=function(e){var t,i,a,f,v,m,l,P,C,z=this,O=z.constructor,B=z.d,F=(e=new O(e)).d;if(!z.s||!e.s)return new O(0);for(e.s*=z.s,i=z.e+e.e,P=B.length,C=F.length,P<C&&(v=B,B=F,F=v,m=P,P=C,C=m),v=[],m=P+C,a=m;a--;)v.push(0);for(a=C;--a>=0;){for(t=0,f=P+a;f>a;)l=v[f]+F[a]*B[f-a-1]+t,v[f--]=l%Aa|0,t=l/Aa|0;v[f]=(v[f]+t)%Aa|0}for(;!v[--m];)v.pop();return t?++i:v.shift(),e.d=v,e.e=i,li?Ln(e,O.precision):e};Wt.toDecimalPlaces=Wt.todp=function(e,t){var i=this,a=i.constructor;return i=new a(i),e===void 0?i:(Yc(e,0,Mm),t===void 0?t=a.rounding:Yc(t,0,8),Ln(i,e+Wi(i)+1,t))};Wt.toExponential=function(e,t){var i,a=this,f=a.constructor;return e===void 0?i=Ef(a,!0):(Yc(e,0,Mm),t===void 0?t=f.rounding:Yc(t,0,8),a=Ln(new f(a),e+1,t),i=Ef(a,!0,e+1)),i};Wt.toFixed=function(e,t){var i,a,f=this,v=f.constructor;return e===void 0?Ef(f):(Yc(e,0,Mm),t===void 0?t=v.rounding:Yc(t,0,8),a=Ln(new v(f),e+Wi(f)+1,t),i=Ef(a.abs(),!1,e+Wi(a)+1),f.isneg()&&!f.isZero()?"-"+i:i)};Wt.toInteger=Wt.toint=function(){var e=this,t=e.constructor;return Ln(new t(e),Wi(e)+1,t.rounding)};Wt.toNumber=function(){return+this};Wt.toPower=Wt.pow=function(e){var t,i,a,f,v,m,l=this,P=l.constructor,C=12,z=+(e=new P(e));if(!e.s)return new P(ws);if(l=new P(l),!l.s){if(e.s<1)throw Error(sl+"Infinity");return l}if(l.eq(ws))return l;if(a=P.precision,e.eq(ws))return Ln(l,a);if(t=e.e,i=e.d.length-1,m=t>=i,v=l.s,m){if((i=z<0?-z:z)<=nD){for(f=new P(ws),t=Math.ceil(a/Qn+4),li=!1;i%2&&(f=f.times(l),BC(f.d,t)),i=Pm(i/2),i!==0;)l=l.times(l),BC(l.d,t);return li=!0,e.s<0?new P(ws).div(f):Ln(f,a)}}else if(v<0)throw Error(sl+"NaN");return v=v<0&&e.d[Math.max(t,i)]&1?-1:1,l.s=1,li=!1,f=e.times(sy(l,a+C)),li=!0,f=aD(f),f.s=v,f};Wt.toPrecision=function(e,t){var i,a,f=this,v=f.constructor;return e===void 0?(i=Wi(f),a=Ef(f,i<=v.toExpNeg||i>=v.toExpPos)):(Yc(e,1,Mm),t===void 0?t=v.rounding:Yc(t,0,8),f=Ln(new v(f),e,t),i=Wi(f),a=Ef(f,e<=i||i<=v.toExpNeg,e)),a};Wt.toSignificantDigits=Wt.tosd=function(e,t){var i=this,a=i.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Yc(e,1,Mm),t===void 0?t=a.rounding:Yc(t,0,8)),Ln(new a(i),e,t)};Wt.toString=Wt.valueOf=Wt.val=Wt.toJSON=Wt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Wi(e),i=e.constructor;return Ef(e,t<=i.toExpNeg||t>=i.toExpPos)};function iD(e,t){var i,a,f,v,m,l,P,C,z=e.constructor,O=z.precision;if(!e.s||!t.s)return t.s||(t=new z(e)),li?Ln(t,O):t;if(P=e.d,C=t.d,m=e.e,f=t.e,P=P.slice(),v=m-f,v){for(v<0?(a=P,v=-v,l=C.length):(a=C,f=m,l=P.length),m=Math.ceil(O/Qn),l=m>l?m+1:l+1,v>l&&(v=l,a.length=1),a.reverse();v--;)a.push(0);a.reverse()}for(l=P.length,v=C.length,l-v<0&&(v=l,a=C,C=P,P=a),i=0;v;)i=(P[--v]=P[v]+C[v]+i)/Aa|0,P[v]%=Aa;for(i&&(P.unshift(i),++f),l=P.length;P[--l]==0;)P.pop();return t.d=P,t.e=f,li?Ln(t,O):t}function Yc(e,t,i){if(e!==~~e||e<t||e>i)throw Error(Af+e)}function Gc(e){var t,i,a,f=e.length-1,v="",m=e[0];if(f>0){for(v+=m,t=1;t<f;t++)a=e[t]+"",i=Qn-a.length,i&&(v+=id(i)),v+=a;m=e[t],a=m+"",i=Qn-a.length,i&&(v+=id(i))}else if(m===0)return"0";for(;m%10===0;)m/=10;return v+m}var Zu=function(){function e(a,f){var v,m=0,l=a.length;for(a=a.slice();l--;)v=a[l]*f+m,a[l]=v%Aa|0,m=v/Aa|0;return m&&a.unshift(m),a}function t(a,f,v,m){var l,P;if(v!=m)P=v>m?1:-1;else for(l=P=0;l<v;l++)if(a[l]!=f[l]){P=a[l]>f[l]?1:-1;break}return P}function i(a,f,v){for(var m=0;v--;)a[v]-=m,m=a[v]<f[v]?1:0,a[v]=m*Aa+a[v]-f[v];for(;!a[0]&&a.length>1;)a.shift()}return function(a,f,v,m){var l,P,C,z,O,B,F,X,Z,U,re,se,ne,ue,J,ae,he,ve,Ie=a.constructor,at=a.s==f.s?1:-1,De=a.d,Fe=f.d;if(!a.s)return new Ie(a);if(!f.s)throw Error(sl+"Division by zero");for(P=a.e-f.e,he=Fe.length,J=De.length,F=new Ie(at),X=F.d=[],C=0;Fe[C]==(De[C]||0);)++C;if(Fe[C]>(De[C]||0)&&--P,v==null?se=v=Ie.precision:m?se=v+(Wi(a)-Wi(f))+1:se=v,se<0)return new Ie(0);if(se=se/Qn+2|0,C=0,he==1)for(z=0,Fe=Fe[0],se++;(C<J||z)&&se--;C++)ne=z*Aa+(De[C]||0),X[C]=ne/Fe|0,z=ne%Fe|0;else{for(z=Aa/(Fe[0]+1)|0,z>1&&(Fe=e(Fe,z),De=e(De,z),he=Fe.length,J=De.length),ue=he,Z=De.slice(0,he),U=Z.length;U<he;)Z[U++]=0;ve=Fe.slice(),ve.unshift(0),ae=Fe[0],Fe[1]>=Aa/2&&++ae;do z=0,l=t(Fe,Z,he,U),l<0?(re=Z[0],he!=U&&(re=re*Aa+(Z[1]||0)),z=re/ae|0,z>1?(z>=Aa&&(z=Aa-1),O=e(Fe,z),B=O.length,U=Z.length,l=t(O,Z,B,U),l==1&&(z--,i(O,he<B?ve:Fe,B))):(z==0&&(l=z=1),O=Fe.slice()),B=O.length,B<U&&O.unshift(0),i(Z,O,U),l==-1&&(U=Z.length,l=t(Fe,Z,he,U),l<1&&(z++,i(Z,he<U?ve:Fe,U))),U=Z.length):l===0&&(z++,Z=[0]),X[C++]=z,l&&Z[0]?Z[U++]=De[ue]||0:(Z=[De[ue]],U=1);while((ue++<J||Z[0]!==void 0)&&se--)}return X[0]||X.shift(),F.e=P,Ln(F,m?v+Wi(F)+1:v)}}();function aD(e,t){var i,a,f,v,m,l,P=0,C=0,z=e.constructor,O=z.precision;if(Wi(e)>16)throw Error(gT+Wi(e));if(!e.s)return new z(ws);for(li=!1,l=O,m=new z(.03125);e.abs().gte(.1);)e=e.times(m),C+=5;for(a=Math.log(mf(2,C))/Math.LN10*2+5|0,l+=a,i=f=v=new z(ws),z.precision=l;;){if(f=Ln(f.times(e),l),i=i.times(++P),m=v.plus(Zu(f,i,l)),Gc(m.d).slice(0,l)===Gc(v.d).slice(0,l)){for(;C--;)v=Ln(v.times(v),l);return z.precision=O,t==null?(li=!0,Ln(v,O)):v}v=m}}function Wi(e){for(var t=e.e*Qn,i=e.d[0];i>=10;i/=10)t++;return t}function vw(e,t,i){if(t>e.LN10.sd())throw li=!0,i&&(e.precision=i),Error(sl+"LN10 precision limit exceeded");return Ln(new e(e.LN10),t)}function id(e){for(var t="";e--;)t+="0";return t}function sy(e,t){var i,a,f,v,m,l,P,C,z,O=1,B=10,F=e,X=F.d,Z=F.constructor,U=Z.precision;if(F.s<1)throw Error(sl+(F.s?"NaN":"-Infinity"));if(F.eq(ws))return new Z(0);if(t==null?(li=!1,C=U):C=t,F.eq(10))return t==null&&(li=!0),vw(Z,C);if(C+=B,Z.precision=C,i=Gc(X),a=i.charAt(0),v=Wi(F),Math.abs(v)<15e14){for(;a<7&&a!=1||a==1&&i.charAt(1)>3;)F=F.times(e),i=Gc(F.d),a=i.charAt(0),O++;v=Wi(F),a>1?(F=new Z("0."+i),v++):F=new Z(a+"."+i.slice(1))}else return P=vw(Z,C+2,U).times(v+""),F=sy(new Z(a+"."+i.slice(1)),C-B).plus(P),Z.precision=U,t==null?(li=!0,Ln(F,U)):F;for(l=m=F=Zu(F.minus(ws),F.plus(ws),C),z=Ln(F.times(F),C),f=3;;){if(m=Ln(m.times(z),C),P=l.plus(Zu(m,new Z(f),C)),Gc(P.d).slice(0,C)===Gc(l.d).slice(0,C))return l=l.times(2),v!==0&&(l=l.plus(vw(Z,C+2,U).times(v+""))),l=Zu(l,new Z(O),C),Z.precision=U,t==null?(li=!0,Ln(l,U)):l;l=P,f+=2}}function LC(e,t){var i,a,f;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(i<0&&(i=a),i+=+t.slice(a+1),t=t.substring(0,a)):i<0&&(i=t.length),a=0;t.charCodeAt(a)===48;)++a;for(f=t.length;t.charCodeAt(f-1)===48;)--f;if(t=t.slice(a,f),t){if(f-=a,i=i-a-1,e.e=Pm(i/Qn),e.d=[],a=(i+1)%Qn,i<0&&(a+=Qn),a<f){for(a&&e.d.push(+t.slice(0,a)),f-=Qn;a<f;)e.d.push(+t.slice(a,a+=Qn));t=t.slice(a),a=Qn-t.length}else a-=f;for(;a--;)t+="0";if(e.d.push(+t),li&&(e.e>y_||e.e<-y_))throw Error(gT+i)}else e.s=0,e.e=0,e.d=[0];return e}function Ln(e,t,i){var a,f,v,m,l,P,C,z,O=e.d;for(m=1,v=O[0];v>=10;v/=10)m++;if(a=t-m,a<0)a+=Qn,f=t,C=O[z=0];else{if(z=Math.ceil((a+1)/Qn),v=O.length,z>=v)return e;for(C=v=O[z],m=1;v>=10;v/=10)m++;a%=Qn,f=a-Qn+m}if(i!==void 0&&(v=mf(10,m-f-1),l=C/v%10|0,P=t<0||O[z+1]!==void 0||C%v,P=i<4?(l||P)&&(i==0||i==(e.s<0?3:2)):l>5||l==5&&(i==4||P||i==6&&(a>0?f>0?C/mf(10,m-f):0:O[z-1])%10&1||i==(e.s<0?8:7))),t<1||!O[0])return P?(v=Wi(e),O.length=1,t=t-v-1,O[0]=mf(10,(Qn-t%Qn)%Qn),e.e=Pm(-t/Qn)||0):(O.length=1,O[0]=e.e=e.s=0),e;if(a==0?(O.length=z,v=1,z--):(O.length=z+1,v=mf(10,Qn-a),O[z]=f>0?(C/mf(10,m-f)%mf(10,f)|0)*v:0),P)for(;;)if(z==0){(O[0]+=v)==Aa&&(O[0]=1,++e.e);break}else{if(O[z]+=v,O[z]!=Aa)break;O[z--]=0,v=1}for(a=O.length;O[--a]===0;)O.pop();if(li&&(e.e>y_||e.e<-y_))throw Error(gT+Wi(e));return e}function oD(e,t){var i,a,f,v,m,l,P,C,z,O,B=e.constructor,F=B.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new B(e),li?Ln(t,F):t;if(P=e.d,O=t.d,a=t.e,C=e.e,P=P.slice(),m=C-a,m){for(z=m<0,z?(i=P,m=-m,l=O.length):(i=O,a=C,l=P.length),f=Math.max(Math.ceil(F/Qn),l)+2,m>f&&(m=f,i.length=1),i.reverse(),f=m;f--;)i.push(0);i.reverse()}else{for(f=P.length,l=O.length,z=f<l,z&&(l=f),f=0;f<l;f++)if(P[f]!=O[f]){z=P[f]<O[f];break}m=0}for(z&&(i=P,P=O,O=i,t.s=-t.s),l=P.length,f=O.length-l;f>0;--f)P[l++]=0;for(f=O.length;f>m;){if(P[--f]<O[f]){for(v=f;v&&P[--v]===0;)P[v]=Aa-1;--P[v],P[f]+=Aa}P[f]-=O[f]}for(;P[--l]===0;)P.pop();for(;P[0]===0;P.shift())--a;return P[0]?(t.d=P,t.e=a,li?Ln(t,F):t):new B(0)}function Ef(e,t,i){var a,f=Wi(e),v=Gc(e.d),m=v.length;return t?(i&&(a=i-m)>0?v=v.charAt(0)+"."+v.slice(1)+id(a):m>1&&(v=v.charAt(0)+"."+v.slice(1)),v=v+(f<0?"e":"e+")+f):f<0?(v="0."+id(-f-1)+v,i&&(a=i-m)>0&&(v+=id(a))):f>=m?(v+=id(f+1-m),i&&(a=i-f-1)>0&&(v=v+"."+id(a))):((a=f+1)<m&&(v=v.slice(0,a)+"."+v.slice(a)),i&&(a=i-m)>0&&(f+1===m&&(v+="."),v+=id(a))),e.s<0?"-"+v:v}function BC(e,t){if(e.length>t)return e.length=t,!0}function sD(e){var t,i,a;function f(v){var m=this;if(!(m instanceof f))return new f(v);if(m.constructor=f,v instanceof f){m.s=v.s,m.e=v.e,m.d=(v=v.d)?v.slice():v;return}if(typeof v=="number"){if(v*0!==0)throw Error(Af+v);if(v>0)m.s=1;else if(v<0)v=-v,m.s=-1;else{m.s=0,m.e=0,m.d=[0];return}if(v===~~v&&v<1e7){m.e=0,m.d=[v];return}return LC(m,v.toString())}else if(typeof v!="string")throw Error(Af+v);if(v.charCodeAt(0)===45?(v=v.slice(1),m.s=-1):m.s=1,$$.test(v))LC(m,v);else throw Error(Af+v)}if(f.prototype=Wt,f.ROUND_UP=0,f.ROUND_DOWN=1,f.ROUND_CEIL=2,f.ROUND_FLOOR=3,f.ROUND_HALF_UP=4,f.ROUND_HALF_DOWN=5,f.ROUND_HALF_EVEN=6,f.ROUND_HALF_CEIL=7,f.ROUND_HALF_FLOOR=8,f.clone=sD,f.config=f.set=q$,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(i=a[t++])||(e[i]=this[i]);return f.config(e),f}function q$(e){if(!e||typeof e!="object")throw Error(sl+"Object expected");var t,i,a,f=["precision",1,Mm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<f.length;t+=3)if((a=e[i=f[t]])!==void 0)if(Pm(a)===a&&a>=f[t+1]&&a<=f[t+2])this[i]=a;else throw Error(Af+i+": "+a);if((a=e[i="LN10"])!==void 0)if(a==Math.LN10)this[i]=new this(a);else throw Error(Af+i+": "+a);return this}var yT=sD(F$);ws=new yT(1);const In=yT;function U$(e){return H$(e)||Z$(e)||G$(e)||V$()}function V$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G$(e,t){if(e){if(typeof e=="string")return O2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return O2(e,t)}}function Z$(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function H$(e){if(Array.isArray(e))return O2(e)}function O2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var X$=function(t){return t},lD={},cD=function(t){return t===lD},FC=function(t){return function i(){return arguments.length===0||arguments.length===1&&cD(arguments.length<=0?void 0:arguments[0])?i:t.apply(void 0,arguments)}},W$=function e(t,i){return t===1?i:FC(function(){for(var a=arguments.length,f=new Array(a),v=0;v<a;v++)f[v]=arguments[v];var m=f.filter(function(l){return l!==lD}).length;return m>=t?i.apply(void 0,f):e(t-m,FC(function(){for(var l=arguments.length,P=new Array(l),C=0;C<l;C++)P[C]=arguments[C];var z=f.map(function(O){return cD(O)?P.shift():O});return i.apply(void 0,U$(z).concat(P))}))})},hx=function(t){return W$(t.length,t)},k2=function(t,i){for(var a=[],f=t;f<i;++f)a[f-t]=f;return a},Y$=hx(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(i){return t[i]}).map(e)}),K$=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];if(!i.length)return X$;var f=i.reverse(),v=f[0],m=f.slice(1);return function(){return m.reduce(function(l,P){return P(l)},v.apply(void 0,arguments))}},I2=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},uD=function(t){var i=null,a=null;return function(){for(var f=arguments.length,v=new Array(f),m=0;m<f;m++)v[m]=arguments[m];return i&&v.every(function(l,P){return l===i[P]})||(i=v,a=t.apply(void 0,v)),a}};function Q$(e){var t;return e===0?t=1:t=Math.floor(new In(e).abs().log(10).toNumber())+1,t}function J$(e,t,i){for(var a=new In(e),f=0,v=[];a.lt(t)&&f<1e5;)v.push(a.toNumber()),a=a.add(i),f++;return v}var eq=hx(function(e,t,i){var a=+e,f=+t;return a+i*(f-a)}),tq=hx(function(e,t,i){var a=t-+e;return a=a||1/0,(i-e)/a}),rq=hx(function(e,t,i){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(i-e)/a))});const dx={rangeStep:J$,getDigitCount:Q$,interpolateNumber:eq,uninterpolateNumber:tq,uninterpolateTruncation:rq};function D2(e){return aq(e)||iq(e)||hD(e)||nq()}function nq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iq(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function aq(e){if(Array.isArray(e))return z2(e)}function ly(e,t){return lq(e)||sq(e,t)||hD(e,t)||oq()}function oq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hD(e,t){if(e){if(typeof e=="string")return z2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return z2(e,t)}}function z2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function sq(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var i=[],a=!0,f=!1,v=void 0;try{for(var m=e[Symbol.iterator](),l;!(a=(l=m.next()).done)&&(i.push(l.value),!(t&&i.length===t));a=!0);}catch(P){f=!0,v=P}finally{try{!a&&m.return!=null&&m.return()}finally{if(f)throw v}}return i}}function lq(e){if(Array.isArray(e))return e}function dD(e){var t=ly(e,2),i=t[0],a=t[1],f=i,v=a;return i>a&&(f=a,v=i),[f,v]}function fD(e,t,i){if(e.lte(0))return new In(0);var a=dx.getDigitCount(e.toNumber()),f=new In(10).pow(a),v=e.div(f),m=a!==1?.05:.1,l=new In(Math.ceil(v.div(m).toNumber())).add(i).mul(m),P=l.mul(f);return t?P:new In(Math.ceil(P))}function cq(e,t,i){var a=1,f=new In(e);if(!f.isint()&&i){var v=Math.abs(e);v<1?(a=new In(10).pow(dx.getDigitCount(e)-1),f=new In(Math.floor(f.div(a).toNumber())).mul(a)):v>1&&(f=new In(Math.floor(e)))}else e===0?f=new In(Math.floor((t-1)/2)):i||(f=new In(Math.floor(e)));var m=Math.floor((t-1)/2),l=K$(Y$(function(P){return f.add(new In(P-m).mul(a)).toNumber()}),k2);return l(0,t)}function pD(e,t,i,a){var f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(i-1)))return{step:new In(0),tickMin:new In(0),tickMax:new In(0)};var v=fD(new In(t).sub(e).div(i-1),a,f),m;e<=0&&t>=0?m=new In(0):(m=new In(e).add(t).div(2),m=m.sub(new In(m).mod(v)));var l=Math.ceil(m.sub(e).div(v).toNumber()),P=Math.ceil(new In(t).sub(m).div(v).toNumber()),C=l+P+1;return C>i?pD(e,t,i,a,f+1):(C<i&&(P=t>0?P+(i-C):P,l=t>0?l:l+(i-C)),{step:v,tickMin:m.sub(new In(l).mul(v)),tickMax:m.add(new In(P).mul(v))})}function uq(e){var t=ly(e,2),i=t[0],a=t[1],f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,m=Math.max(f,2),l=dD([i,a]),P=ly(l,2),C=P[0],z=P[1];if(C===-1/0||z===1/0){var O=z===1/0?[C].concat(D2(k2(0,f-1).map(function(){return 1/0}))):[].concat(D2(k2(0,f-1).map(function(){return-1/0})),[z]);return i>a?I2(O):O}if(C===z)return cq(C,f,v);var B=pD(C,z,m,v),F=B.step,X=B.tickMin,Z=B.tickMax,U=dx.rangeStep(X,Z.add(new In(.1).mul(F)),F);return i>a?I2(U):U}function hq(e,t){var i=ly(e,2),a=i[0],f=i[1],v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,m=dD([a,f]),l=ly(m,2),P=l[0],C=l[1];if(P===-1/0||C===1/0)return[a,f];if(P===C)return[P];var z=Math.max(t,2),O=fD(new In(C).sub(P).div(z-1),v,0),B=[].concat(D2(dx.rangeStep(new In(P),new In(C).sub(new In(.99).mul(O)),O)),[C]);return a>f?I2(B):B}var dq=uD(uq),fq=uD(hq),pq="Invariant failed";function Cf(e,t){throw new Error(pq)}var mq=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function im(e){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},im(e)}function v_(){return v_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},v_.apply(this,arguments)}function gq(e,t){return xq(e)||_q(e,t)||vq(e,t)||yq()}function yq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vq(e,t){if(e){if(typeof e=="string")return $C(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $C(e,t)}}function $C(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function _q(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,v,m,l=[],P=!0,C=!1;try{if(v=(i=i.call(e)).next,t!==0)for(;!(P=(a=v.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(z){C=!0,f=z}finally{try{if(!P&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return l}}function xq(e){if(Array.isArray(e))return e}function bq(e,t){if(e==null)return{};var i=wq(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function wq(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function Sq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tq(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,yD(a.key),a)}}function Aq(e,t,i){return t&&Tq(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mq(e,t,i){return t=__(t),Pq(e,mD()?Reflect.construct(t,i||[],__(e).constructor):t.apply(e,i))}function Pq(e,t){if(t&&(im(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eq(e)}function Eq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mD=function(){return!!e})()}function __(e){return __=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},__(e)}function Cq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N2(e,t)}function N2(e,t){return N2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},N2(e,t)}function gD(e,t,i){return t=yD(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yD(e){var t=jq(e,"string");return im(t)=="symbol"?t:t+""}function jq(e,t){if(im(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(im(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Fy=function(e){function t(){return Sq(this,t),Mq(this,t,arguments)}return Cq(t,e),Aq(t,[{key:"render",value:function(){var a=this.props,f=a.offset,v=a.layout,m=a.width,l=a.dataKey,P=a.data,C=a.dataPointFormatter,z=a.xAxis,O=a.yAxis,B=bq(a,mq),F=en(B,!1);this.props.direction==="x"&&z.type!=="number"&&Cf();var X=P.map(function(Z){var U=C(Z,l),re=U.x,se=U.y,ne=U.value,ue=U.errorVal;if(!ue)return null;var J=[],ae,he;if(Array.isArray(ue)){var ve=gq(ue,2);ae=ve[0],he=ve[1]}else ae=he=ue;if(v==="vertical"){var Ie=z.scale,at=se+f,De=at+m,Fe=at-m,tt=Ie(ne-ae),ut=Ie(ne+he);J.push({x1:ut,y1:De,x2:ut,y2:Fe}),J.push({x1:tt,y1:at,x2:ut,y2:at}),J.push({x1:tt,y1:De,x2:tt,y2:Fe})}else if(v==="horizontal"){var rt=O.scale,Pe=re+f,Ve=Pe-m,Ge=Pe+m,ht=rt(ne-ae),xe=rt(ne+he);J.push({x1:Ve,y1:xe,x2:Ge,y2:xe}),J.push({x1:Pe,y1:ht,x2:Pe,y2:xe}),J.push({x1:Ve,y1:ht,x2:Ge,y2:ht})}return $e.createElement(Oi,v_({className:"recharts-errorBar",key:"bar-".concat(J.map(function(Xe){return"".concat(Xe.x1,"-").concat(Xe.x2,"-").concat(Xe.y1,"-").concat(Xe.y2)}))},F),J.map(function(Xe){return $e.createElement("line",v_({},Xe,{key:"line-".concat(Xe.x1,"-").concat(Xe.x2,"-").concat(Xe.y1,"-").concat(Xe.y2)}))}))});return $e.createElement(Oi,{className:"recharts-errorBars"},X)}}])}($e.Component);gD(Fy,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});gD(Fy,"displayName","ErrorBar");function cy(e){"@babel/helpers - typeof";return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cy(e)}function qC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function ff(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(i),!0).forEach(function(a){Oq(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):qC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Oq(e,t,i){return t=kq(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function kq(e){var t=Iq(e,"string");return cy(t)=="symbol"?t:t+""}function Iq(e,t){if(cy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(cy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vD=function(t){var i=t.children,a=t.formattedGraphicalItems,f=t.legendWidth,v=t.legendContent,m=bs(i,Sf);if(!m)return null;var l=Sf.defaultProps,P=l!==void 0?ff(ff({},l),m.props):{},C;return m.props&&m.props.payload?C=m.props&&m.props.payload:v==="children"?C=(a||[]).reduce(function(z,O){var B=O.item,F=O.props,X=F.sectors||F.data||[];return z.concat(X.map(function(Z){return{type:m.props.iconType||B.props.legendType,value:Z.name,color:Z.fill,payload:Z}}))},[]):C=(a||[]).map(function(z){var O=z.item,B=O.type.defaultProps,F=B!==void 0?ff(ff({},B),O.props):{},X=F.dataKey,Z=F.name,U=F.legendType,re=F.hide;return{inactive:re,dataKey:X,type:P.iconType||U||"square",color:vT(O),value:Z||X,payload:F}}),ff(ff(ff({},P),Sf.getWithHeight(m,f)),{},{payload:C,item:m})};function uy(e){"@babel/helpers - typeof";return uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uy(e)}function UC(e){return Rq(e)||Nq(e)||zq(e)||Dq()}function Dq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zq(e,t){if(e){if(typeof e=="string")return R2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return R2(e,t)}}function Nq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rq(e){if(Array.isArray(e))return R2(e)}function R2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function VC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Ai(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?VC(Object(i),!0).forEach(function(a){Wp(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):VC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Wp(e,t,i){return t=Lq(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Lq(e){var t=Bq(e,"string");return uy(t)=="symbol"?t:t+""}function Bq(e,t){if(uy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(uy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ss(e,t,i){return Wr(e)||Wr(t)?i:la(t)?al(e,t,i):Lr(t)?t(e):i}function Vg(e,t,i,a){var f=R$(e,function(l){return Ss(l,t)});if(i==="number"){var v=f.filter(function(l){return zt(l)||parseFloat(l)});return v.length?[cx(v),lx(v)]:[1/0,-1/0]}var m=a?f.filter(function(l){return!Wr(l)}):f;return m.map(function(l){return la(l)||l instanceof Date?l:""})}var Fq=function(t){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],f=arguments.length>2?arguments[2]:void 0,v=arguments.length>3?arguments[3]:void 0,m=-1,l=(i=a==null?void 0:a.length)!==null&&i!==void 0?i:0;if(l<=1)return 0;if(v&&v.axisType==="angleAxis"&&Math.abs(Math.abs(v.range[1]-v.range[0])-360)<=1e-6)for(var P=v.range,C=0;C<l;C++){var z=C>0?f[C-1].coordinate:f[l-1].coordinate,O=f[C].coordinate,B=C>=l-1?f[0].coordinate:f[C+1].coordinate,F=void 0;if(oc(O-z)!==oc(B-O)){var X=[];if(oc(B-O)===oc(P[1]-P[0])){F=B;var Z=O+P[1]-P[0];X[0]=Math.min(Z,(Z+z)/2),X[1]=Math.max(Z,(Z+z)/2)}else{F=z;var U=B+P[1]-P[0];X[0]=Math.min(O,(U+O)/2),X[1]=Math.max(O,(U+O)/2)}var re=[Math.min(O,(F+O)/2),Math.max(O,(F+O)/2)];if(t>re[0]&&t<=re[1]||t>=X[0]&&t<=X[1]){m=f[C].index;break}}else{var se=Math.min(z,B),ne=Math.max(z,B);if(t>(se+O)/2&&t<=(ne+O)/2){m=f[C].index;break}}}else for(var ue=0;ue<l;ue++)if(ue===0&&t<=(a[ue].coordinate+a[ue+1].coordinate)/2||ue>0&&ue<l-1&&t>(a[ue].coordinate+a[ue-1].coordinate)/2&&t<=(a[ue].coordinate+a[ue+1].coordinate)/2||ue===l-1&&t>(a[ue].coordinate+a[ue-1].coordinate)/2){m=a[ue].index;break}return m},vT=function(t){var i,a=t,f=a.type.displayName,v=(i=t.type)!==null&&i!==void 0&&i.defaultProps?Ai(Ai({},t.type.defaultProps),t.props):t.props,m=v.stroke,l=v.fill,P;switch(f){case"Line":P=m;break;case"Area":case"Radar":P=m&&m!=="none"?m:l;break;default:P=l;break}return P},$q=function(t){var i=t.barSize,a=t.totalSize,f=t.stackGroups,v=f===void 0?{}:f;if(!v)return{};for(var m={},l=Object.keys(v),P=0,C=l.length;P<C;P++)for(var z=v[l[P]].stackGroups,O=Object.keys(z),B=0,F=O.length;B<F;B++){var X=z[O[B]],Z=X.items,U=X.cateAxisId,re=Z.filter(function(he){return Vu(he.type).indexOf("Bar")>=0});if(re&&re.length){var se=re[0].type.defaultProps,ne=se!==void 0?Ai(Ai({},se),re[0].props):re[0].props,ue=ne.barSize,J=ne[U];m[J]||(m[J]=[]);var ae=Wr(ue)?i:ue;m[J].push({item:re[0],stackList:re.slice(1),barSize:Wr(ae)?void 0:Pf(ae,a,0)})}}return m},qq=function(t){var i=t.barGap,a=t.barCategoryGap,f=t.bandSize,v=t.sizeList,m=v===void 0?[]:v,l=t.maxBarSize,P=m.length;if(P<1)return null;var C=Pf(i,f,0,!0),z,O=[];if(m[0].barSize===+m[0].barSize){var B=!1,F=f/P,X=m.reduce(function(ue,J){return ue+J.barSize||0},0);X+=(P-1)*C,X>=f&&(X-=(P-1)*C,C=0),X>=f&&F>0&&(B=!0,F*=.9,X=P*F);var Z=(f-X)/2>>0,U={offset:Z-C,size:0};z=m.reduce(function(ue,J){var ae={item:J.item,position:{offset:U.offset+U.size+C,size:B?F:J.barSize}},he=[].concat(UC(ue),[ae]);return U=he[he.length-1].position,J.stackList&&J.stackList.length&&J.stackList.forEach(function(ve){he.push({item:ve,position:U})}),he},O)}else{var re=Pf(a,f,0,!0);f-2*re-(P-1)*C<=0&&(C=0);var se=(f-2*re-(P-1)*C)/P;se>1&&(se>>=0);var ne=l===+l?Math.min(se,l):se;z=m.reduce(function(ue,J,ae){var he=[].concat(UC(ue),[{item:J.item,position:{offset:re+(se+C)*ae+(se-ne)/2,size:ne}}]);return J.stackList&&J.stackList.length&&J.stackList.forEach(function(ve){he.push({item:ve,position:he[he.length-1].position})}),he},O)}return z},Uq=function(t,i,a,f){var v=a.children,m=a.width,l=a.margin,P=m-(l.left||0)-(l.right||0),C=vD({children:v,legendWidth:P});if(C){var z=f||{},O=z.width,B=z.height,F=C.align,X=C.verticalAlign,Z=C.layout;if((Z==="vertical"||Z==="horizontal"&&X==="middle")&&F!=="center"&&zt(t[F]))return Ai(Ai({},t),{},Wp({},F,t[F]+(O||0)));if((Z==="horizontal"||Z==="vertical"&&F==="center")&&X!=="middle"&&zt(t[X]))return Ai(Ai({},t),{},Wp({},X,t[X]+(B||0)))}return t},Vq=function(t,i,a){return Wr(i)?!0:t==="horizontal"?i==="yAxis":t==="vertical"||a==="x"?i==="xAxis":a==="y"?i==="yAxis":!0},_D=function(t,i,a,f,v){var m=i.props.children,l=ol(m,Fy).filter(function(C){return Vq(f,v,C.props.direction)});if(l&&l.length){var P=l.map(function(C){return C.props.dataKey});return t.reduce(function(C,z){var O=Ss(z,a);if(Wr(O))return C;var B=Array.isArray(O)?[cx(O),lx(O)]:[O,O],F=P.reduce(function(X,Z){var U=Ss(z,Z,0),re=B[0]-Math.abs(Array.isArray(U)?U[0]:U),se=B[1]+Math.abs(Array.isArray(U)?U[1]:U);return[Math.min(re,X[0]),Math.max(se,X[1])]},[1/0,-1/0]);return[Math.min(F[0],C[0]),Math.max(F[1],C[1])]},[1/0,-1/0])}return null},Gq=function(t,i,a,f,v){var m=i.map(function(l){return _D(t,l,a,v,f)}).filter(function(l){return!Wr(l)});return m&&m.length?m.reduce(function(l,P){return[Math.min(l[0],P[0]),Math.max(l[1],P[1])]},[1/0,-1/0]):null},xD=function(t,i,a,f,v){var m=i.map(function(P){var C=P.props.dataKey;return a==="number"&&C&&_D(t,P,C,f)||Vg(t,C,a,v)});if(a==="number")return m.reduce(function(P,C){return[Math.min(P[0],C[0]),Math.max(P[1],C[1])]},[1/0,-1/0]);var l={};return m.reduce(function(P,C){for(var z=0,O=C.length;z<O;z++)l[C[z]]||(l[C[z]]=!0,P.push(C[z]));return P},[])},bD=function(t,i){return t==="horizontal"&&i==="xAxis"||t==="vertical"&&i==="yAxis"||t==="centric"&&i==="angleAxis"||t==="radial"&&i==="radiusAxis"},wD=function(t,i,a,f){if(f)return t.map(function(P){return P.coordinate});var v,m,l=t.map(function(P){return P.coordinate===i&&(v=!0),P.coordinate===a&&(m=!0),P.coordinate});return v||l.push(i),m||l.push(a),l},qu=function(t,i,a){if(!t)return null;var f=t.scale,v=t.duplicateDomain,m=t.type,l=t.range,P=t.realScaleType==="scaleBand"?f.bandwidth()/2:2,C=(i||a)&&m==="category"&&f.bandwidth?f.bandwidth()/P:0;if(C=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?oc(l[0]-l[1])*2*C:C,i&&(t.ticks||t.niceTicks)){var z=(t.ticks||t.niceTicks).map(function(O){var B=v?v.indexOf(O):O;return{coordinate:f(B)+C,value:O,offset:C}});return z.filter(function(O){return!Iy(O.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(O,B){return{coordinate:f(O)+C,value:O,index:B,offset:C}}):f.ticks&&!a?f.ticks(t.tickCount).map(function(O){return{coordinate:f(O)+C,value:O,offset:C}}):f.domain().map(function(O,B){return{coordinate:f(O)+C,value:v?v[O]:O,index:B,offset:C}})},_w=new WeakMap,Lv=function(t,i){if(typeof i!="function")return t;_w.has(t)||_w.set(t,new WeakMap);var a=_w.get(t);if(a.has(i))return a.get(i);var f=function(){t.apply(void 0,arguments),i.apply(void 0,arguments)};return a.set(i,f),f},Zq=function(t,i,a){var f=t.scale,v=t.type,m=t.layout,l=t.axisType;if(f==="auto")return m==="radial"&&l==="radiusAxis"?{scale:ry(),realScaleType:"band"}:m==="radial"&&l==="angleAxis"?{scale:f_(),realScaleType:"linear"}:v==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!a)?{scale:Ug(),realScaleType:"point"}:v==="category"?{scale:ry(),realScaleType:"band"}:{scale:f_(),realScaleType:"linear"};if(Mf(f)){var P="scale".concat(W_(f));return{scale:(CC[P]||Ug)(),realScaleType:CC[P]?P:"point"}}return Lr(f)?{scale:f}:{scale:Ug(),realScaleType:"point"}},GC=1e-4,Hq=function(t){var i=t.domain();if(!(!i||i.length<=2)){var a=i.length,f=t.range(),v=Math.min(f[0],f[1])-GC,m=Math.max(f[0],f[1])+GC,l=t(i[0]),P=t(i[a-1]);(l<v||l>m||P<v||P>m)&&t.domain([i[0],i[a-1]])}},Xq=function(t,i){if(!t)return null;for(var a=0,f=t.length;a<f;a++)if(t[a].item===i)return t[a].position;return null},Wq=function(t,i){if(!i||i.length!==2||!zt(i[0])||!zt(i[1]))return t;var a=Math.min(i[0],i[1]),f=Math.max(i[0],i[1]),v=[t[0],t[1]];return(!zt(t[0])||t[0]<a)&&(v[0]=a),(!zt(t[1])||t[1]>f)&&(v[1]=f),v[0]>f&&(v[0]=f),v[1]<a&&(v[1]=a),v},Yq=function(t){var i=t.length;if(!(i<=0))for(var a=0,f=t[0].length;a<f;++a)for(var v=0,m=0,l=0;l<i;++l){var P=Iy(t[l][a][1])?t[l][a][0]:t[l][a][1];P>=0?(t[l][a][0]=v,t[l][a][1]=v+P,v=t[l][a][1]):(t[l][a][0]=m,t[l][a][1]=m+P,m=t[l][a][1])}},Kq=function(t){var i=t.length;if(!(i<=0))for(var a=0,f=t[0].length;a<f;++a)for(var v=0,m=0;m<i;++m){var l=Iy(t[m][a][1])?t[m][a][0]:t[m][a][1];l>=0?(t[m][a][0]=v,t[m][a][1]=v+l,v=t[m][a][1]):(t[m][a][0]=0,t[m][a][1]=0)}},Qq={sign:Yq,expand:D4,none:Yp,silhouette:z4,wiggle:N4,positive:Kq},Jq=function(t,i,a){var f=i.map(function(l){return l.props.dataKey}),v=Qq[a],m=I4().keys(f).value(function(l,P){return+Ss(l,P,0)}).order(f2).offset(v);return m(t)},eU=function(t,i,a,f,v,m){if(!t)return null;var l=m?i.reverse():i,P={},C=l.reduce(function(O,B){var F,X=(F=B.type)!==null&&F!==void 0&&F.defaultProps?Ai(Ai({},B.type.defaultProps),B.props):B.props,Z=X.stackId,U=X.hide;if(U)return O;var re=X[a],se=O[re]||{hasStack:!1,stackGroups:{}};if(la(Z)){var ne=se.stackGroups[Z]||{numericAxisId:a,cateAxisId:f,items:[]};ne.items.push(B),se.hasStack=!0,se.stackGroups[Z]=ne}else se.stackGroups[Dy("_stackId_")]={numericAxisId:a,cateAxisId:f,items:[B]};return Ai(Ai({},O),{},Wp({},re,se))},P),z={};return Object.keys(C).reduce(function(O,B){var F=C[B];if(F.hasStack){var X={};F.stackGroups=Object.keys(F.stackGroups).reduce(function(Z,U){var re=F.stackGroups[U];return Ai(Ai({},Z),{},Wp({},U,{numericAxisId:a,cateAxisId:f,items:re.items,stackedData:Jq(t,re.items,v)}))},X)}return Ai(Ai({},O),{},Wp({},B,F))},z)},tU=function(t,i){var a=i.realScaleType,f=i.type,v=i.tickCount,m=i.originalDomain,l=i.allowDecimals,P=a||i.scale;if(P!=="auto"&&P!=="linear")return null;if(v&&f==="number"&&m&&(m[0]==="auto"||m[1]==="auto")){var C=t.domain();if(!C.length)return null;var z=dq(C,v,l);return t.domain([cx(z),lx(z)]),{niceTicks:z}}if(v&&f==="number"){var O=t.domain(),B=fq(O,v,l);return{niceTicks:B}}return null};function ZC(e){var t=e.axis,i=e.ticks,a=e.bandSize,f=e.entry,v=e.index,m=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Wr(f[t.dataKey])){var l=Hv(i,"value",f[t.dataKey]);if(l)return l.coordinate+a/2}return i[v]?i[v].coordinate+a/2:null}var P=Ss(f,Wr(m)?t.dataKey:m);return Wr(P)?null:t.scale(P)}var HC=function(t){var i=t.axis,a=t.ticks,f=t.offset,v=t.bandSize,m=t.entry,l=t.index;if(i.type==="category")return a[l]?a[l].coordinate+f:null;var P=Ss(m,i.dataKey,i.domain[l]);return Wr(P)?null:i.scale(P)-v/2+f},rU=function(t){var i=t.numericAxis,a=i.scale.domain();if(i.type==="number"){var f=Math.min(a[0],a[1]),v=Math.max(a[0],a[1]);return f<=0&&v>=0?0:v<0?v:f}return a[0]},nU=function(t,i){var a,f=(a=t.type)!==null&&a!==void 0&&a.defaultProps?Ai(Ai({},t.type.defaultProps),t.props):t.props,v=f.stackId;if(la(v)){var m=i[v];if(m){var l=m.items.indexOf(t);return l>=0?m.stackedData[l]:null}}return null},iU=function(t){return t.reduce(function(i,a){return[cx(a.concat([i[0]]).filter(zt)),lx(a.concat([i[1]]).filter(zt))]},[1/0,-1/0])},SD=function(t,i,a){return Object.keys(t).reduce(function(f,v){var m=t[v],l=m.stackedData,P=l.reduce(function(C,z){var O=iU(z.slice(i,a+1));return[Math.min(C[0],O[0]),Math.max(C[1],O[1])]},[1/0,-1/0]);return[Math.min(P[0],f[0]),Math.max(P[1],f[1])]},[1/0,-1/0]).map(function(f){return f===1/0||f===-1/0?0:f})},XC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,WC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,L2=function(t,i,a){if(Lr(t))return t(i,a);if(!Array.isArray(t))return i;var f=[];if(zt(t[0]))f[0]=a?t[0]:Math.min(t[0],i[0]);else if(XC.test(t[0])){var v=+XC.exec(t[0])[1];f[0]=i[0]-v}else Lr(t[0])?f[0]=t[0](i[0]):f[0]=i[0];if(zt(t[1]))f[1]=a?t[1]:Math.max(t[1],i[1]);else if(WC.test(t[1])){var m=+WC.exec(t[1])[1];f[1]=i[1]+m}else Lr(t[1])?f[1]=t[1](i[1]):f[1]=i[1];return f},x_=function(t,i,a){if(t&&t.scale&&t.scale.bandwidth){var f=t.scale.bandwidth();if(!a||f>0)return f}if(t&&i&&i.length>=2){for(var v=ZS(i,function(O){return O.coordinate}),m=1/0,l=1,P=v.length;l<P;l++){var C=v[l],z=v[l-1];m=Math.min((C.coordinate||0)-(z.coordinate||0),m)}return m===1/0?0:m}return a?void 0:0},YC=function(t,i,a){return!t||!t.length||ux(t,al(a,"type.defaultProps.domain"))?i:t},TD=function(t,i){var a=t.type.defaultProps?Ai(Ai({},t.type.defaultProps),t.props):t.props,f=a.dataKey,v=a.name,m=a.unit,l=a.formatter,P=a.tooltipType,C=a.chartType,z=a.hide;return Ai(Ai({},en(t,!1)),{},{dataKey:f,unit:m,formatter:l,name:v||f,color:vT(t),value:Ss(i,f),type:P,payload:i,chartType:C,hide:z})};function hy(e){"@babel/helpers - typeof";return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hy(e)}function KC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function QC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?KC(Object(i),!0).forEach(function(a){aU(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):KC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function aU(e,t,i){return t=oU(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function oU(e){var t=sU(e,"string");return hy(t)=="symbol"?t:t+""}function sU(e,t){if(hy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(hy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var b_=Math.PI/180,lU=function(t){return t*180/Math.PI},La=function(t,i,a,f){return{x:t+Math.cos(-b_*f)*a,y:i+Math.sin(-b_*f)*a}},cU=function(t,i){var a=t.x,f=t.y,v=i.x,m=i.y;return Math.sqrt(Math.pow(a-v,2)+Math.pow(f-m,2))},uU=function(t,i){var a=t.x,f=t.y,v=i.cx,m=i.cy,l=cU({x:a,y:f},{x:v,y:m});if(l<=0)return{radius:l};var P=(a-v)/l,C=Math.acos(P);return f>m&&(C=2*Math.PI-C),{radius:l,angle:lU(C),angleInRadian:C}},hU=function(t){var i=t.startAngle,a=t.endAngle,f=Math.floor(i/360),v=Math.floor(a/360),m=Math.min(f,v);return{startAngle:i-m*360,endAngle:a-m*360}},dU=function(t,i){var a=i.startAngle,f=i.endAngle,v=Math.floor(a/360),m=Math.floor(f/360),l=Math.min(v,m);return t+l*360},JC=function(t,i){var a=t.x,f=t.y,v=uU({x:a,y:f},i),m=v.radius,l=v.angle,P=i.innerRadius,C=i.outerRadius;if(m<P||m>C)return!1;if(m===0)return!0;var z=hU(i),O=z.startAngle,B=z.endAngle,F=l,X;if(O<=B){for(;F>B;)F-=360;for(;F<O;)F+=360;X=F>=O&&F<=B}else{for(;F>O;)F-=360;for(;F<B;)F+=360;X=F>=B&&F<=O}return X?QC(QC({},i),{},{radius:m,angle:dU(F,i)}):null};function dy(e){"@babel/helpers - typeof";return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dy(e)}var fU=["offset"];function pU(e){return vU(e)||yU(e)||gU(e)||mU()}function mU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gU(e,t){if(e){if(typeof e=="string")return B2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return B2(e,t)}}function yU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vU(e){if(Array.isArray(e))return B2(e)}function B2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function _U(e,t){if(e==null)return{};var i=xU(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function xU(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function ej(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function sa(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ej(Object(i),!0).forEach(function(a){bU(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ej(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function bU(e,t,i){return t=wU(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function wU(e){var t=SU(e,"string");return dy(t)=="symbol"?t:t+""}function SU(e,t){if(dy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(dy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fy(){return fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},fy.apply(this,arguments)}var TU=function(t){var i=t.value,a=t.formatter,f=Wr(t.children)?i:t.children;return Lr(a)?a(f):f},AU=function(t,i){var a=oc(i-t),f=Math.min(Math.abs(i-t),360);return a*f},MU=function(t,i,a){var f=t.position,v=t.viewBox,m=t.offset,l=t.className,P=v,C=P.cx,z=P.cy,O=P.innerRadius,B=P.outerRadius,F=P.startAngle,X=P.endAngle,Z=P.clockWise,U=(O+B)/2,re=AU(F,X),se=re>=0?1:-1,ne,ue;f==="insideStart"?(ne=F+se*m,ue=Z):f==="insideEnd"?(ne=X-se*m,ue=!Z):f==="end"&&(ne=X+se*m,ue=Z),ue=re<=0?ue:!ue;var J=La(C,z,U,ne),ae=La(C,z,U,ne+(ue?1:-1)*359),he="M".concat(J.x,",").concat(J.y,`
    A`).concat(U,",").concat(U,",0,1,").concat(ue?0:1,`,
    `).concat(ae.x,",").concat(ae.y),ve=Wr(t.id)?Dy("recharts-radial-line-"):t.id;return $e.createElement("text",fy({},a,{dominantBaseline:"central",className:sn("recharts-radial-bar-label",l)}),$e.createElement("defs",null,$e.createElement("path",{id:ve,d:he})),$e.createElement("textPath",{xlinkHref:"#".concat(ve)},i))},PU=function(t){var i=t.viewBox,a=t.offset,f=t.position,v=i,m=v.cx,l=v.cy,P=v.innerRadius,C=v.outerRadius,z=v.startAngle,O=v.endAngle,B=(z+O)/2;if(f==="outside"){var F=La(m,l,C+a,B),X=F.x,Z=F.y;return{x:X,y:Z,textAnchor:X>=m?"start":"end",verticalAnchor:"middle"}}if(f==="center")return{x:m,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(f==="centerTop")return{x:m,y:l,textAnchor:"middle",verticalAnchor:"start"};if(f==="centerBottom")return{x:m,y:l,textAnchor:"middle",verticalAnchor:"end"};var U=(P+C)/2,re=La(m,l,U,B),se=re.x,ne=re.y;return{x:se,y:ne,textAnchor:"middle",verticalAnchor:"middle"}},EU=function(t){var i=t.viewBox,a=t.parentViewBox,f=t.offset,v=t.position,m=i,l=m.x,P=m.y,C=m.width,z=m.height,O=z>=0?1:-1,B=O*f,F=O>0?"end":"start",X=O>0?"start":"end",Z=C>=0?1:-1,U=Z*f,re=Z>0?"end":"start",se=Z>0?"start":"end";if(v==="top"){var ne={x:l+C/2,y:P-O*f,textAnchor:"middle",verticalAnchor:F};return sa(sa({},ne),a?{height:Math.max(P-a.y,0),width:C}:{})}if(v==="bottom"){var ue={x:l+C/2,y:P+z+B,textAnchor:"middle",verticalAnchor:X};return sa(sa({},ue),a?{height:Math.max(a.y+a.height-(P+z),0),width:C}:{})}if(v==="left"){var J={x:l-U,y:P+z/2,textAnchor:re,verticalAnchor:"middle"};return sa(sa({},J),a?{width:Math.max(J.x-a.x,0),height:z}:{})}if(v==="right"){var ae={x:l+C+U,y:P+z/2,textAnchor:se,verticalAnchor:"middle"};return sa(sa({},ae),a?{width:Math.max(a.x+a.width-ae.x,0),height:z}:{})}var he=a?{width:C,height:z}:{};return v==="insideLeft"?sa({x:l+U,y:P+z/2,textAnchor:se,verticalAnchor:"middle"},he):v==="insideRight"?sa({x:l+C-U,y:P+z/2,textAnchor:re,verticalAnchor:"middle"},he):v==="insideTop"?sa({x:l+C/2,y:P+B,textAnchor:"middle",verticalAnchor:X},he):v==="insideBottom"?sa({x:l+C/2,y:P+z-B,textAnchor:"middle",verticalAnchor:F},he):v==="insideTopLeft"?sa({x:l+U,y:P+B,textAnchor:se,verticalAnchor:X},he):v==="insideTopRight"?sa({x:l+C-U,y:P+B,textAnchor:re,verticalAnchor:X},he):v==="insideBottomLeft"?sa({x:l+U,y:P+z-B,textAnchor:se,verticalAnchor:F},he):v==="insideBottomRight"?sa({x:l+C-U,y:P+z-B,textAnchor:re,verticalAnchor:F},he):wm(v)&&(zt(v.x)||yf(v.x))&&(zt(v.y)||yf(v.y))?sa({x:l+Pf(v.x,C),y:P+Pf(v.y,z),textAnchor:"end",verticalAnchor:"end"},he):sa({x:l+C/2,y:P+z/2,textAnchor:"middle",verticalAnchor:"middle"},he)},CU=function(t){return"cx"in t&&zt(t.cx)};function ao(e){var t=e.offset,i=t===void 0?5:t,a=_U(e,fU),f=sa({offset:i},a),v=f.viewBox,m=f.position,l=f.value,P=f.children,C=f.content,z=f.className,O=z===void 0?"":z,B=f.textBreakAll;if(!v||Wr(l)&&Wr(P)&&!ft.isValidElement(C)&&!Lr(C))return null;if(ft.isValidElement(C))return ft.cloneElement(C,f);var F;if(Lr(C)){if(F=ft.createElement(C,f),ft.isValidElement(F))return F}else F=TU(f);var X=CU(v),Z=en(f,!0);if(X&&(m==="insideStart"||m==="insideEnd"||m==="end"))return MU(f,F,Z);var U=X?PU(f):EU(f);return $e.createElement(o_,fy({className:sn("recharts-label",O)},Z,U,{breakAll:B}),F)}ao.displayName="Label";var AD=function(t){var i=t.cx,a=t.cy,f=t.angle,v=t.startAngle,m=t.endAngle,l=t.r,P=t.radius,C=t.innerRadius,z=t.outerRadius,O=t.x,B=t.y,F=t.top,X=t.left,Z=t.width,U=t.height,re=t.clockWise,se=t.labelViewBox;if(se)return se;if(zt(Z)&&zt(U)){if(zt(O)&&zt(B))return{x:O,y:B,width:Z,height:U};if(zt(F)&&zt(X))return{x:F,y:X,width:Z,height:U}}return zt(O)&&zt(B)?{x:O,y:B,width:0,height:0}:zt(i)&&zt(a)?{cx:i,cy:a,startAngle:v||f||0,endAngle:m||f||0,innerRadius:C||0,outerRadius:z||P||l||0,clockWise:re}:t.viewBox?t.viewBox:{}},jU=function(t,i){return t?t===!0?$e.createElement(ao,{key:"label-implicit",viewBox:i}):la(t)?$e.createElement(ao,{key:"label-implicit",viewBox:i,value:t}):ft.isValidElement(t)?t.type===ao?ft.cloneElement(t,{key:"label-implicit",viewBox:i}):$e.createElement(ao,{key:"label-implicit",content:t,viewBox:i}):Lr(t)?$e.createElement(ao,{key:"label-implicit",content:t,viewBox:i}):wm(t)?$e.createElement(ao,fy({viewBox:i},t,{key:"label-implicit"})):null:null},OU=function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var f=t.children,v=AD(t),m=ol(f,ao).map(function(P,C){return ft.cloneElement(P,{viewBox:i||v,key:"label-".concat(C)})});if(!a)return m;var l=jU(t.label,i||v);return[l].concat(pU(m))};ao.parseViewBox=AD;ao.renderCallByParent=OU;var xw,tj;function kU(){if(tj)return xw;tj=1;function e(t){var i=t==null?0:t.length;return i?t[i-1]:void 0}return xw=e,xw}var IU=kU();const DU=Bn(IU);function py(e){"@babel/helpers - typeof";return py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},py(e)}var zU=["valueAccessor"],NU=["data","dataKey","clockWise","id","textBreakAll"];function RU(e){return $U(e)||FU(e)||BU(e)||LU()}function LU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BU(e,t){if(e){if(typeof e=="string")return F2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return F2(e,t)}}function FU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $U(e){if(Array.isArray(e))return F2(e)}function F2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function w_(){return w_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},w_.apply(this,arguments)}function rj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function nj(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?rj(Object(i),!0).forEach(function(a){qU(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function qU(e,t,i){return t=UU(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function UU(e){var t=VU(e,"string");return py(t)=="symbol"?t:t+""}function VU(e,t){if(py(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(py(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ij(e,t){if(e==null)return{};var i=GU(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function GU(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var ZU=function(t){return Array.isArray(t.value)?DU(t.value):t.value};function ud(e){var t=e.valueAccessor,i=t===void 0?ZU:t,a=ij(e,zU),f=a.data,v=a.dataKey,m=a.clockWise,l=a.id,P=a.textBreakAll,C=ij(a,NU);return!f||!f.length?null:$e.createElement(Oi,{className:"recharts-label-list"},f.map(function(z,O){var B=Wr(v)?i(z,O):Ss(z&&z.payload,v),F=Wr(l)?{}:{id:"".concat(l,"-").concat(O)};return $e.createElement(ao,w_({},en(z,!0),C,F,{parentViewBox:z.parentViewBox,value:B,textBreakAll:P,viewBox:ao.parseViewBox(Wr(m)?z:nj(nj({},z),{},{clockWise:m})),key:"label-".concat(O),index:O}))}))}ud.displayName="LabelList";function HU(e,t){return e?e===!0?$e.createElement(ud,{key:"labelList-implicit",data:t}):$e.isValidElement(e)||Lr(e)?$e.createElement(ud,{key:"labelList-implicit",data:t,content:e}):wm(e)?$e.createElement(ud,w_({data:t},e,{key:"labelList-implicit"})):null:null}function XU(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&i&&!e.label)return null;var a=e.children,f=ol(a,ud).map(function(m,l){return ft.cloneElement(m,{data:t,key:"labelList-".concat(l)})});if(!i)return f;var v=HU(e.label,t);return[v].concat(RU(f))}ud.renderCallByParent=XU;function my(e){"@babel/helpers - typeof";return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},my(e)}function $2(){return $2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},$2.apply(this,arguments)}function aj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function oj(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?aj(Object(i),!0).forEach(function(a){WU(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):aj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function WU(e,t,i){return t=YU(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function YU(e){var t=KU(e,"string");return my(t)=="symbol"?t:t+""}function KU(e,t){if(my(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(my(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QU=function(t,i){var a=oc(i-t),f=Math.min(Math.abs(i-t),359.999);return a*f},Bv=function(t){var i=t.cx,a=t.cy,f=t.radius,v=t.angle,m=t.sign,l=t.isExternal,P=t.cornerRadius,C=t.cornerIsExternal,z=P*(l?1:-1)+f,O=Math.asin(P/z)/b_,B=C?v:v+m*O,F=La(i,a,z,B),X=La(i,a,f,B),Z=C?v-m*O:v,U=La(i,a,z*Math.cos(O*b_),Z);return{center:F,circleTangency:X,lineTangency:U,theta:O}},MD=function(t){var i=t.cx,a=t.cy,f=t.innerRadius,v=t.outerRadius,m=t.startAngle,l=t.endAngle,P=QU(m,l),C=m+P,z=La(i,a,v,m),O=La(i,a,v,C),B="M ".concat(z.x,",").concat(z.y,`
    A `).concat(v,",").concat(v,`,0,
    `).concat(+(Math.abs(P)>180),",").concat(+(m>C),`,
    `).concat(O.x,",").concat(O.y,`
  `);if(f>0){var F=La(i,a,f,m),X=La(i,a,f,C);B+="L ".concat(X.x,",").concat(X.y,`
            A `).concat(f,",").concat(f,`,0,
            `).concat(+(Math.abs(P)>180),",").concat(+(m<=C),`,
            `).concat(F.x,",").concat(F.y," Z")}else B+="L ".concat(i,",").concat(a," Z");return B},JU=function(t){var i=t.cx,a=t.cy,f=t.innerRadius,v=t.outerRadius,m=t.cornerRadius,l=t.forceCornerRadius,P=t.cornerIsExternal,C=t.startAngle,z=t.endAngle,O=oc(z-C),B=Bv({cx:i,cy:a,radius:v,angle:C,sign:O,cornerRadius:m,cornerIsExternal:P}),F=B.circleTangency,X=B.lineTangency,Z=B.theta,U=Bv({cx:i,cy:a,radius:v,angle:z,sign:-O,cornerRadius:m,cornerIsExternal:P}),re=U.circleTangency,se=U.lineTangency,ne=U.theta,ue=P?Math.abs(C-z):Math.abs(C-z)-Z-ne;if(ue<0)return l?"M ".concat(X.x,",").concat(X.y,`
        a`).concat(m,",").concat(m,",0,0,1,").concat(m*2,`,0
        a`).concat(m,",").concat(m,",0,0,1,").concat(-m*2,`,0
      `):MD({cx:i,cy:a,innerRadius:f,outerRadius:v,startAngle:C,endAngle:z});var J="M ".concat(X.x,",").concat(X.y,`
    A`).concat(m,",").concat(m,",0,0,").concat(+(O<0),",").concat(F.x,",").concat(F.y,`
    A`).concat(v,",").concat(v,",0,").concat(+(ue>180),",").concat(+(O<0),",").concat(re.x,",").concat(re.y,`
    A`).concat(m,",").concat(m,",0,0,").concat(+(O<0),",").concat(se.x,",").concat(se.y,`
  `);if(f>0){var ae=Bv({cx:i,cy:a,radius:f,angle:C,sign:O,isExternal:!0,cornerRadius:m,cornerIsExternal:P}),he=ae.circleTangency,ve=ae.lineTangency,Ie=ae.theta,at=Bv({cx:i,cy:a,radius:f,angle:z,sign:-O,isExternal:!0,cornerRadius:m,cornerIsExternal:P}),De=at.circleTangency,Fe=at.lineTangency,tt=at.theta,ut=P?Math.abs(C-z):Math.abs(C-z)-Ie-tt;if(ut<0&&m===0)return"".concat(J,"L").concat(i,",").concat(a,"Z");J+="L".concat(Fe.x,",").concat(Fe.y,`
      A`).concat(m,",").concat(m,",0,0,").concat(+(O<0),",").concat(De.x,",").concat(De.y,`
      A`).concat(f,",").concat(f,",0,").concat(+(ut>180),",").concat(+(O>0),",").concat(he.x,",").concat(he.y,`
      A`).concat(m,",").concat(m,",0,0,").concat(+(O<0),",").concat(ve.x,",").concat(ve.y,"Z")}else J+="L".concat(i,",").concat(a,"Z");return J},eV={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},PD=function(t){var i=oj(oj({},eV),t),a=i.cx,f=i.cy,v=i.innerRadius,m=i.outerRadius,l=i.cornerRadius,P=i.forceCornerRadius,C=i.cornerIsExternal,z=i.startAngle,O=i.endAngle,B=i.className;if(m<v||z===O)return null;var F=sn("recharts-sector",B),X=m-v,Z=Pf(l,X,0,!0),U;return Z>0&&Math.abs(z-O)<360?U=JU({cx:a,cy:f,innerRadius:v,outerRadius:m,cornerRadius:Math.min(Z,X/2),forceCornerRadius:P,cornerIsExternal:C,startAngle:z,endAngle:O}):U=MD({cx:a,cy:f,innerRadius:v,outerRadius:m,startAngle:z,endAngle:O}),$e.createElement("path",$2({},en(i,!0),{className:F,d:U,role:"img"}))};function gy(e){"@babel/helpers - typeof";return gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gy(e)}function q2(){return q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},q2.apply(this,arguments)}function sj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function lj(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?sj(Object(i),!0).forEach(function(a){tV(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function tV(e,t,i){return t=rV(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function rV(e){var t=nV(e,"string");return gy(t)=="symbol"?t:t+""}function nV(e,t){if(gy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(gy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cj={curveBasisClosed:w4,curveBasisOpen:S4,curveBasis:b4,curveBumpX:s4,curveBumpY:l4,curveLinearClosed:T4,curveLinear:K_,curveMonotoneX:A4,curveMonotoneY:M4,curveNatural:P4,curveStep:E4,curveStepAfter:j4,curveStepBefore:C4},Fv=function(t){return t.x===+t.x&&t.y===+t.y},Og=function(t){return t.x},kg=function(t){return t.y},iV=function(t,i){if(Lr(t))return t;var a="curve".concat(W_(t));return(a==="curveMonotone"||a==="curveBump")&&i?cj["".concat(a).concat(i==="vertical"?"Y":"X")]:cj[a]||K_},aV=function(t){var i=t.type,a=i===void 0?"linear":i,f=t.points,v=f===void 0?[]:f,m=t.baseLine,l=t.layout,P=t.connectNulls,C=P===void 0?!1:P,z=iV(a,l),O=C?v.filter(function(Z){return Fv(Z)}):v,B;if(Array.isArray(m)){var F=C?m.filter(function(Z){return Fv(Z)}):m,X=O.map(function(Z,U){return lj(lj({},Z),{},{base:F[U]})});return l==="vertical"?B=Ov().y(kg).x1(Og).x0(function(Z){return Z.base.x}):B=Ov().x(Og).y1(kg).y0(function(Z){return Z.base.y}),B.defined(Fv).curve(z),B(X)}return l==="vertical"&&zt(m)?B=Ov().y(kg).x1(Og).x0(m):zt(m)?B=Ov().x(Og).y1(kg).y0(m):B=Ok().x(Og).y(kg),B.defined(Fv).curve(z),B(O)},U2=function(t){var i=t.className,a=t.points,f=t.path,v=t.pathRef;if((!a||!a.length)&&!f)return null;var m=a&&a.length?aV(t):f;return $e.createElement("path",q2({},en(t,!1),Xv(t),{className:sn("recharts-curve",i),d:m,ref:v}))},bw={exports:{}},ww,uj;function oV(){if(uj)return ww;uj=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ww=e,ww}var Sw,hj;function sV(){if(hj)return Sw;hj=1;var e=oV();function t(){}function i(){}return i.resetWarningCache=t,Sw=function(){function a(m,l,P,C,z,O){if(O!==e){var B=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw B.name="Invariant Violation",B}}a.isRequired=a;function f(){return a}var v={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:f,element:a,elementType:a,instanceOf:f,node:a,objectOf:f,oneOf:f,oneOfType:f,shape:f,exact:f,checkPropTypes:i,resetWarningCache:t};return v.PropTypes=v,v},Sw}var dj;function lV(){return dj||(dj=1,bw.exports=sV()()),bw.exports}var cV=lV();const wn=Bn(cV);var uV=Object.getOwnPropertyNames,hV=Object.getOwnPropertySymbols,dV=Object.prototype.hasOwnProperty;function fj(e,t){return function(a,f,v){return e(a,f,v)&&t(a,f,v)}}function $v(e){return function(i,a,f){if(!i||!a||typeof i!="object"||typeof a!="object")return e(i,a,f);var v=f.cache,m=v.get(i),l=v.get(a);if(m&&l)return m===a&&l===i;v.set(i,a),v.set(a,i);var P=e(i,a,f);return v.delete(i),v.delete(a),P}}function pj(e){return uV(e).concat(hV(e))}var fV=Object.hasOwn||function(e,t){return dV.call(e,t)};function zf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var pV="__v",mV="__o",gV="_owner",mj=Object.getOwnPropertyDescriptor,gj=Object.keys;function yV(e,t,i){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!i.equals(e[a],t[a],a,a,e,t,i))return!1;return!0}function vV(e,t){return zf(e.getTime(),t.getTime())}function _V(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function xV(e,t){return e===t}function yj(e,t,i){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var f=new Array(a),v=e.entries(),m,l,P=0;(m=v.next())&&!m.done;){for(var C=t.entries(),z=!1,O=0;(l=C.next())&&!l.done;){if(f[O]){O++;continue}var B=m.value,F=l.value;if(i.equals(B[0],F[0],P,O,e,t,i)&&i.equals(B[1],F[1],B[0],F[0],e,t,i)){z=f[O]=!0;break}O++}if(!z)return!1;P++}return!0}var bV=zf;function wV(e,t,i){var a=gj(e),f=a.length;if(gj(t).length!==f)return!1;for(;f-- >0;)if(!ED(e,t,i,a[f]))return!1;return!0}function Ig(e,t,i){var a=pj(e),f=a.length;if(pj(t).length!==f)return!1;for(var v,m,l;f-- >0;)if(v=a[f],!ED(e,t,i,v)||(m=mj(e,v),l=mj(t,v),(m||l)&&(!m||!l||m.configurable!==l.configurable||m.enumerable!==l.enumerable||m.writable!==l.writable)))return!1;return!0}function SV(e,t){return zf(e.valueOf(),t.valueOf())}function TV(e,t){return e.source===t.source&&e.flags===t.flags}function vj(e,t,i){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var f=new Array(a),v=e.values(),m,l;(m=v.next())&&!m.done;){for(var P=t.values(),C=!1,z=0;(l=P.next())&&!l.done;){if(!f[z]&&i.equals(m.value,l.value,m.value,l.value,e,t,i)){C=f[z]=!0;break}z++}if(!C)return!1}return!0}function AV(e,t){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(e[i]!==t[i])return!1;return!0}function MV(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function ED(e,t,i,a){return(a===gV||a===mV||a===pV)&&(e.$$typeof||t.$$typeof)?!0:fV(t,a)&&i.equals(e[a],t[a],a,a,e,t,i)}var PV="[object Arguments]",EV="[object Boolean]",CV="[object Date]",jV="[object Error]",OV="[object Map]",kV="[object Number]",IV="[object Object]",DV="[object RegExp]",zV="[object Set]",NV="[object String]",RV="[object URL]",LV=Array.isArray,_j=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,xj=Object.assign,BV=Object.prototype.toString.call.bind(Object.prototype.toString);function FV(e){var t=e.areArraysEqual,i=e.areDatesEqual,a=e.areErrorsEqual,f=e.areFunctionsEqual,v=e.areMapsEqual,m=e.areNumbersEqual,l=e.areObjectsEqual,P=e.arePrimitiveWrappersEqual,C=e.areRegExpsEqual,z=e.areSetsEqual,O=e.areTypedArraysEqual,B=e.areUrlsEqual;return function(X,Z,U){if(X===Z)return!0;if(X==null||Z==null)return!1;var re=typeof X;if(re!==typeof Z)return!1;if(re!=="object")return re==="number"?m(X,Z,U):re==="function"?f(X,Z,U):!1;var se=X.constructor;if(se!==Z.constructor)return!1;if(se===Object)return l(X,Z,U);if(LV(X))return t(X,Z,U);if(_j!=null&&_j(X))return O(X,Z,U);if(se===Date)return i(X,Z,U);if(se===RegExp)return C(X,Z,U);if(se===Map)return v(X,Z,U);if(se===Set)return z(X,Z,U);var ne=BV(X);return ne===CV?i(X,Z,U):ne===DV?C(X,Z,U):ne===OV?v(X,Z,U):ne===zV?z(X,Z,U):ne===IV?typeof X.then!="function"&&typeof Z.then!="function"&&l(X,Z,U):ne===RV?B(X,Z,U):ne===jV?a(X,Z,U):ne===PV?l(X,Z,U):ne===EV||ne===kV||ne===NV?P(X,Z,U):!1}}function $V(e){var t=e.circular,i=e.createCustomConfig,a=e.strict,f={areArraysEqual:a?Ig:yV,areDatesEqual:vV,areErrorsEqual:_V,areFunctionsEqual:xV,areMapsEqual:a?fj(yj,Ig):yj,areNumbersEqual:bV,areObjectsEqual:a?Ig:wV,arePrimitiveWrappersEqual:SV,areRegExpsEqual:TV,areSetsEqual:a?fj(vj,Ig):vj,areTypedArraysEqual:a?Ig:AV,areUrlsEqual:MV};if(i&&(f=xj({},f,i(f))),t){var v=$v(f.areArraysEqual),m=$v(f.areMapsEqual),l=$v(f.areObjectsEqual),P=$v(f.areSetsEqual);f=xj({},f,{areArraysEqual:v,areMapsEqual:m,areObjectsEqual:l,areSetsEqual:P})}return f}function qV(e){return function(t,i,a,f,v,m,l){return e(t,i,l)}}function UV(e){var t=e.circular,i=e.comparator,a=e.createState,f=e.equals,v=e.strict;if(a)return function(P,C){var z=a(),O=z.cache,B=O===void 0?t?new WeakMap:void 0:O,F=z.meta;return i(P,C,{cache:B,equals:f,meta:F,strict:v})};if(t)return function(P,C){return i(P,C,{cache:new WeakMap,equals:f,meta:void 0,strict:v})};var m={cache:void 0,equals:f,meta:void 0,strict:v};return function(P,C){return i(P,C,m)}}var VV=md();md({strict:!0});md({circular:!0});md({circular:!0,strict:!0});md({createInternalComparator:function(){return zf}});md({strict:!0,createInternalComparator:function(){return zf}});md({circular:!0,createInternalComparator:function(){return zf}});md({circular:!0,createInternalComparator:function(){return zf},strict:!0});function md(e){e===void 0&&(e={});var t=e.circular,i=t===void 0?!1:t,a=e.createInternalComparator,f=e.createState,v=e.strict,m=v===void 0?!1:v,l=$V(e),P=FV(l),C=a?a(P):qV(P);return UV({circular:i,comparator:P,createState:f,equals:C,strict:m})}function GV(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function bj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=-1,a=function f(v){i<0&&(i=v),v-i>t?(e(v),i=-1):GV(f)};requestAnimationFrame(a)}function V2(e){"@babel/helpers - typeof";return V2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V2(e)}function ZV(e){return YV(e)||WV(e)||XV(e)||HV()}function HV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XV(e,t){if(e){if(typeof e=="string")return wj(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return wj(e,t)}}function wj(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function WV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YV(e){if(Array.isArray(e))return e}function KV(){var e={},t=function(){return null},i=!1,a=function f(v){if(!i){if(Array.isArray(v)){if(!v.length)return;var m=v,l=ZV(m),P=l[0],C=l.slice(1);if(typeof P=="number"){bj(f.bind(null,C),P);return}f(P),bj(f.bind(null,C));return}V2(v)==="object"&&(e=v,t(e)),typeof v=="function"&&v()}};return{stop:function(){i=!0},start:function(v){i=!1,a(v)},subscribe:function(v){return t=v,function(){t=function(){return null}}}}}function yy(e){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yy(e)}function Sj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Tj(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Sj(Object(i),!0).forEach(function(a){CD(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Sj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function CD(e,t,i){return t=QV(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function QV(e){var t=JV(e,"string");return yy(t)==="symbol"?t:String(t)}function JV(e,t){if(yy(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(yy(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e9=function(t,i){return[Object.keys(t),Object.keys(i)].reduce(function(a,f){return a.filter(function(v){return f.includes(v)})})},t9=function(t){return t},r9=function(t){return t.replace(/([A-Z])/g,function(i){return"-".concat(i.toLowerCase())})},Gg=function(t,i){return Object.keys(i).reduce(function(a,f){return Tj(Tj({},a),{},CD({},f,t(f,i[f])))},{})},Aj=function(t,i,a){return t.map(function(f){return"".concat(r9(f)," ").concat(i,"ms ").concat(a)}).join(",")};function n9(e,t){return o9(e)||a9(e,t)||jD(e,t)||i9()}function i9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a9(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,v,m,l=[],P=!0,C=!1;try{if(v=(i=i.call(e)).next,t!==0)for(;!(P=(a=v.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(z){C=!0,f=z}finally{try{if(!P&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return l}}function o9(e){if(Array.isArray(e))return e}function s9(e){return u9(e)||c9(e)||jD(e)||l9()}function l9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jD(e,t){if(e){if(typeof e=="string")return G2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return G2(e,t)}}function c9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function u9(e){if(Array.isArray(e))return G2(e)}function G2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var S_=1e-4,OD=function(t,i){return[0,3*t,3*i-6*t,3*t-3*i+1]},kD=function(t,i){return t.map(function(a,f){return a*Math.pow(i,f)}).reduce(function(a,f){return a+f})},Mj=function(t,i){return function(a){var f=OD(t,i);return kD(f,a)}},h9=function(t,i){return function(a){var f=OD(t,i),v=[].concat(s9(f.map(function(m,l){return m*l}).slice(1)),[0]);return kD(v,a)}},Pj=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var f=i[0],v=i[1],m=i[2],l=i[3];if(i.length===1)switch(i[0]){case"linear":f=0,v=0,m=1,l=1;break;case"ease":f=.25,v=.1,m=.25,l=1;break;case"ease-in":f=.42,v=0,m=1,l=1;break;case"ease-out":f=.42,v=0,m=.58,l=1;break;case"ease-in-out":f=0,v=0,m=.58,l=1;break;default:{var P=i[0].split("(");if(P[0]==="cubic-bezier"&&P[1].split(")")[0].split(",").length===4){var C=P[1].split(")")[0].split(",").map(function(U){return parseFloat(U)}),z=n9(C,4);f=z[0],v=z[1],m=z[2],l=z[3]}}}var O=Mj(f,m),B=Mj(v,l),F=h9(f,m),X=function(re){return re>1?1:re<0?0:re},Z=function(re){for(var se=re>1?1:re,ne=se,ue=0;ue<8;++ue){var J=O(ne)-se,ae=F(ne);if(Math.abs(J-se)<S_||ae<S_)return B(ne);ne=X(ne-J/ae)}return B(ne)};return Z.isStepper=!1,Z},d9=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.stiff,a=i===void 0?100:i,f=t.damping,v=f===void 0?8:f,m=t.dt,l=m===void 0?17:m,P=function(z,O,B){var F=-(z-O)*a,X=B*v,Z=B+(F-X)*l/1e3,U=B*l/1e3+z;return Math.abs(U-O)<S_&&Math.abs(Z)<S_?[O,0]:[U,Z]};return P.isStepper=!0,P.dt=l,P},f9=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var f=i[0];if(typeof f=="string")switch(f){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Pj(f);case"spring":return d9();default:if(f.split("(")[0]==="cubic-bezier")return Pj(f)}return typeof f=="function"?f:null};function vy(e){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vy(e)}function Ej(e){return g9(e)||m9(e)||ID(e)||p9()}function p9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function g9(e){if(Array.isArray(e))return H2(e)}function Cj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Ra(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Cj(Object(i),!0).forEach(function(a){Z2(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Cj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Z2(e,t,i){return t=y9(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function y9(e){var t=v9(e,"string");return vy(t)==="symbol"?t:String(t)}function v9(e,t){if(vy(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(vy(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _9(e,t){return w9(e)||b9(e,t)||ID(e,t)||x9()}function x9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ID(e,t){if(e){if(typeof e=="string")return H2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return H2(e,t)}}function H2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function b9(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,v,m,l=[],P=!0,C=!1;try{if(v=(i=i.call(e)).next,t!==0)for(;!(P=(a=v.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(z){C=!0,f=z}finally{try{if(!P&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return l}}function w9(e){if(Array.isArray(e))return e}var T_=function(t,i,a){return t+(i-t)*a},X2=function(t){var i=t.from,a=t.to;return i!==a},S9=function e(t,i,a){var f=Gg(function(v,m){if(X2(m)){var l=t(m.from,m.to,m.velocity),P=_9(l,2),C=P[0],z=P[1];return Ra(Ra({},m),{},{from:C,velocity:z})}return m},i);return a<1?Gg(function(v,m){return X2(m)?Ra(Ra({},m),{},{velocity:T_(m.velocity,f[v].velocity,a),from:T_(m.from,f[v].from,a)}):m},i):e(t,f,a-1)};const T9=function(e,t,i,a,f){var v=e9(e,t),m=v.reduce(function(U,re){return Ra(Ra({},U),{},Z2({},re,[e[re],t[re]]))},{}),l=v.reduce(function(U,re){return Ra(Ra({},U),{},Z2({},re,{from:e[re],velocity:0,to:t[re]}))},{}),P=-1,C,z,O=function(){return null},B=function(){return Gg(function(re,se){return se.from},l)},F=function(){return!Object.values(l).filter(X2).length},X=function(re){C||(C=re);var se=re-C,ne=se/i.dt;l=S9(i,l,ne),f(Ra(Ra(Ra({},e),t),B())),C=re,F()||(P=requestAnimationFrame(O))},Z=function(re){z||(z=re);var se=(re-z)/a,ne=Gg(function(J,ae){return T_.apply(void 0,Ej(ae).concat([i(se)]))},m);if(f(Ra(Ra(Ra({},e),t),ne)),se<1)P=requestAnimationFrame(O);else{var ue=Gg(function(J,ae){return T_.apply(void 0,Ej(ae).concat([i(1)]))},m);f(Ra(Ra(Ra({},e),t),ue))}};return O=i.isStepper?X:Z,function(){return requestAnimationFrame(O),function(){cancelAnimationFrame(P)}}};function am(e){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},am(e)}var A9=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function M9(e,t){if(e==null)return{};var i=P9(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function P9(e,t){if(e==null)return{};var i={},a=Object.keys(e),f,v;for(v=0;v<a.length;v++)f=a[v],!(t.indexOf(f)>=0)&&(i[f]=e[f]);return i}function Tw(e){return O9(e)||j9(e)||C9(e)||E9()}function E9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C9(e,t){if(e){if(typeof e=="string")return W2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return W2(e,t)}}function j9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function O9(e){if(Array.isArray(e))return W2(e)}function W2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function jj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function tc(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?jj(Object(i),!0).forEach(function(a){Fg(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):jj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Fg(e,t,i){return t=DD(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function k9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I9(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,DD(a.key),a)}}function D9(e,t,i){return t&&I9(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function DD(e){var t=z9(e,"string");return am(t)==="symbol"?t:String(t)}function z9(e,t){if(am(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(am(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y2(e,t)}function Y2(e,t){return Y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},Y2(e,t)}function R9(e){var t=L9();return function(){var a=A_(e),f;if(t){var v=A_(this).constructor;f=Reflect.construct(a,arguments,v)}else f=a.apply(this,arguments);return K2(this,f)}}function K2(e,t){if(t&&(am(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q2(e)}function Q2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A_(e){return A_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},A_(e)}var Yu=function(e){N9(i,e);var t=R9(i);function i(a,f){var v;k9(this,i),v=t.call(this,a,f);var m=v.props,l=m.isActive,P=m.attributeName,C=m.from,z=m.to,O=m.steps,B=m.children,F=m.duration;if(v.handleStyleChange=v.handleStyleChange.bind(Q2(v)),v.changeStyle=v.changeStyle.bind(Q2(v)),!l||F<=0)return v.state={style:{}},typeof B=="function"&&(v.state={style:z}),K2(v);if(O&&O.length)v.state={style:O[0].style};else if(C){if(typeof B=="function")return v.state={style:C},K2(v);v.state={style:P?Fg({},P,C):C}}else v.state={style:{}};return v}return D9(i,[{key:"componentDidMount",value:function(){var f=this.props,v=f.isActive,m=f.canBegin;this.mounted=!0,!(!v||!m)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(f){var v=this.props,m=v.isActive,l=v.canBegin,P=v.attributeName,C=v.shouldReAnimate,z=v.to,O=v.from,B=this.state.style;if(l){if(!m){var F={style:P?Fg({},P,z):z};this.state&&B&&(P&&B[P]!==z||!P&&B!==z)&&this.setState(F);return}if(!(VV(f.to,z)&&f.canBegin&&f.isActive)){var X=!f.canBegin||!f.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var Z=X||C?O:f.to;if(this.state&&B){var U={style:P?Fg({},P,Z):Z};(P&&B[P]!==Z||!P&&B!==Z)&&this.setState(U)}this.runAnimation(tc(tc({},this.props),{},{from:Z,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var f=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),f&&f()}},{key:"handleStyleChange",value:function(f){this.changeStyle(f)}},{key:"changeStyle",value:function(f){this.mounted&&this.setState({style:f})}},{key:"runJSAnimation",value:function(f){var v=this,m=f.from,l=f.to,P=f.duration,C=f.easing,z=f.begin,O=f.onAnimationEnd,B=f.onAnimationStart,F=T9(m,l,f9(C),P,this.changeStyle),X=function(){v.stopJSAnimation=F()};this.manager.start([B,z,X,P,O])}},{key:"runStepAnimation",value:function(f){var v=this,m=f.steps,l=f.begin,P=f.onAnimationStart,C=m[0],z=C.style,O=C.duration,B=O===void 0?0:O,F=function(Z,U,re){if(re===0)return Z;var se=U.duration,ne=U.easing,ue=ne===void 0?"ease":ne,J=U.style,ae=U.properties,he=U.onAnimationEnd,ve=re>0?m[re-1]:U,Ie=ae||Object.keys(J);if(typeof ue=="function"||ue==="spring")return[].concat(Tw(Z),[v.runJSAnimation.bind(v,{from:ve.style,to:J,duration:se,easing:ue}),se]);var at=Aj(Ie,se,ue),De=tc(tc(tc({},ve.style),J),{},{transition:at});return[].concat(Tw(Z),[De,se,he]).filter(t9)};return this.manager.start([P].concat(Tw(m.reduce(F,[z,Math.max(B,l)])),[f.onAnimationEnd]))}},{key:"runAnimation",value:function(f){this.manager||(this.manager=KV());var v=f.begin,m=f.duration,l=f.attributeName,P=f.to,C=f.easing,z=f.onAnimationStart,O=f.onAnimationEnd,B=f.steps,F=f.children,X=this.manager;if(this.unSubscribe=X.subscribe(this.handleStyleChange),typeof C=="function"||typeof F=="function"||C==="spring"){this.runJSAnimation(f);return}if(B.length>1){this.runStepAnimation(f);return}var Z=l?Fg({},l,P):P,U=Aj(Object.keys(Z),m,C);X.start([z,v,tc(tc({},Z),{},{transition:U}),m,O])}},{key:"render",value:function(){var f=this.props,v=f.children;f.begin;var m=f.duration;f.attributeName,f.easing;var l=f.isActive;f.steps,f.from,f.to,f.canBegin,f.onAnimationEnd,f.shouldReAnimate,f.onAnimationReStart;var P=M9(f,A9),C=ft.Children.count(v),z=this.state.style;if(typeof v=="function")return v(z);if(!l||C===0||m<=0)return v;var O=function(F){var X=F.props,Z=X.style,U=Z===void 0?{}:Z,re=X.className,se=ft.cloneElement(F,tc(tc({},P),{},{style:tc(tc({},U),z),className:re}));return se};return C===1?O(ft.Children.only(v)):$e.createElement("div",null,ft.Children.map(v,function(B){return O(B)}))}}]),i}(ft.PureComponent);Yu.displayName="Animate";Yu.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Yu.propTypes={from:wn.oneOfType([wn.object,wn.string]),to:wn.oneOfType([wn.object,wn.string]),attributeName:wn.string,duration:wn.number,begin:wn.number,easing:wn.oneOfType([wn.string,wn.func]),steps:wn.arrayOf(wn.shape({duration:wn.number.isRequired,style:wn.object.isRequired,easing:wn.oneOfType([wn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),wn.func]),properties:wn.arrayOf("string"),onAnimationEnd:wn.func})),children:wn.oneOfType([wn.node,wn.func]),isActive:wn.bool,canBegin:wn.bool,onAnimationEnd:wn.func,shouldReAnimate:wn.bool,onAnimationStart:wn.func,onAnimationReStart:wn.func};function _y(e){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_y(e)}function M_(){return M_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},M_.apply(this,arguments)}function B9(e,t){return U9(e)||q9(e,t)||$9(e,t)||F9()}function F9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $9(e,t){if(e){if(typeof e=="string")return Oj(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Oj(e,t)}}function Oj(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function q9(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,v,m,l=[],P=!0,C=!1;try{if(v=(i=i.call(e)).next,t!==0)for(;!(P=(a=v.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(z){C=!0,f=z}finally{try{if(!P&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return l}}function U9(e){if(Array.isArray(e))return e}function kj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Ij(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?kj(Object(i),!0).forEach(function(a){V9(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function V9(e,t,i){return t=G9(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function G9(e){var t=Z9(e,"string");return _y(t)=="symbol"?t:t+""}function Z9(e,t){if(_y(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(_y(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dj=function(t,i,a,f,v){var m=Math.min(Math.abs(a)/2,Math.abs(f)/2),l=f>=0?1:-1,P=a>=0?1:-1,C=f>=0&&a>=0||f<0&&a<0?1:0,z;if(m>0&&v instanceof Array){for(var O=[0,0,0,0],B=0,F=4;B<F;B++)O[B]=v[B]>m?m:v[B];z="M".concat(t,",").concat(i+l*O[0]),O[0]>0&&(z+="A ".concat(O[0],",").concat(O[0],",0,0,").concat(C,",").concat(t+P*O[0],",").concat(i)),z+="L ".concat(t+a-P*O[1],",").concat(i),O[1]>0&&(z+="A ".concat(O[1],",").concat(O[1],",0,0,").concat(C,`,
        `).concat(t+a,",").concat(i+l*O[1])),z+="L ".concat(t+a,",").concat(i+f-l*O[2]),O[2]>0&&(z+="A ".concat(O[2],",").concat(O[2],",0,0,").concat(C,`,
        `).concat(t+a-P*O[2],",").concat(i+f)),z+="L ".concat(t+P*O[3],",").concat(i+f),O[3]>0&&(z+="A ".concat(O[3],",").concat(O[3],",0,0,").concat(C,`,
        `).concat(t,",").concat(i+f-l*O[3])),z+="Z"}else if(m>0&&v===+v&&v>0){var X=Math.min(m,v);z="M ".concat(t,",").concat(i+l*X,`
            A `).concat(X,",").concat(X,",0,0,").concat(C,",").concat(t+P*X,",").concat(i,`
            L `).concat(t+a-P*X,",").concat(i,`
            A `).concat(X,",").concat(X,",0,0,").concat(C,",").concat(t+a,",").concat(i+l*X,`
            L `).concat(t+a,",").concat(i+f-l*X,`
            A `).concat(X,",").concat(X,",0,0,").concat(C,",").concat(t+a-P*X,",").concat(i+f,`
            L `).concat(t+P*X,",").concat(i+f,`
            A `).concat(X,",").concat(X,",0,0,").concat(C,",").concat(t,",").concat(i+f-l*X," Z")}else z="M ".concat(t,",").concat(i," h ").concat(a," v ").concat(f," h ").concat(-a," Z");return z},H9=function(t,i){if(!t||!i)return!1;var a=t.x,f=t.y,v=i.x,m=i.y,l=i.width,P=i.height;if(Math.abs(l)>0&&Math.abs(P)>0){var C=Math.min(v,v+l),z=Math.max(v,v+l),O=Math.min(m,m+P),B=Math.max(m,m+P);return a>=C&&a<=z&&f>=O&&f<=B}return!1},X9={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_T=function(t){var i=Ij(Ij({},X9),t),a=ft.useRef(),f=ft.useState(-1),v=B9(f,2),m=v[0],l=v[1];ft.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var ue=a.current.getTotalLength();ue&&l(ue)}catch{}},[]);var P=i.x,C=i.y,z=i.width,O=i.height,B=i.radius,F=i.className,X=i.animationEasing,Z=i.animationDuration,U=i.animationBegin,re=i.isAnimationActive,se=i.isUpdateAnimationActive;if(P!==+P||C!==+C||z!==+z||O!==+O||z===0||O===0)return null;var ne=sn("recharts-rectangle",F);return se?$e.createElement(Yu,{canBegin:m>0,from:{width:z,height:O,x:P,y:C},to:{width:z,height:O,x:P,y:C},duration:Z,animationEasing:X,isActive:se},function(ue){var J=ue.width,ae=ue.height,he=ue.x,ve=ue.y;return $e.createElement(Yu,{canBegin:m>0,from:"0px ".concat(m===-1?1:m,"px"),to:"".concat(m,"px 0px"),attributeName:"strokeDasharray",begin:U,duration:Z,isActive:re,easing:X},$e.createElement("path",M_({},en(i,!0),{className:ne,d:Dj(he,ve,J,ae,B),ref:a})))}):$e.createElement("path",M_({},en(i,!0),{className:ne,d:Dj(P,C,z,O,B)}))};function J2(){return J2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},J2.apply(this,arguments)}var xT=function(t){var i=t.cx,a=t.cy,f=t.r,v=t.className,m=sn("recharts-dot",v);return i===+i&&a===+a&&f===+f?$e.createElement("circle",J2({},en(t,!1),Xv(t),{className:m,cx:i,cy:a,r:f})):null};function xy(e){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xy(e)}var W9=["x","y","top","left","width","height","className"];function eS(){return eS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},eS.apply(this,arguments)}function zj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Y9(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?zj(Object(i),!0).forEach(function(a){K9(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):zj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function K9(e,t,i){return t=Q9(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Q9(e){var t=J9(e,"string");return xy(t)=="symbol"?t:t+""}function J9(e,t){if(xy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(xy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e7(e,t){if(e==null)return{};var i=t7(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function t7(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var r7=function(t,i,a,f,v,m){return"M".concat(t,",").concat(v,"v").concat(f,"M").concat(m,",").concat(i,"h").concat(a)},n7=function(t){var i=t.x,a=i===void 0?0:i,f=t.y,v=f===void 0?0:f,m=t.top,l=m===void 0?0:m,P=t.left,C=P===void 0?0:P,z=t.width,O=z===void 0?0:z,B=t.height,F=B===void 0?0:B,X=t.className,Z=e7(t,W9),U=Y9({x:a,y:v,top:l,left:C,width:O,height:F},Z);return!zt(a)||!zt(v)||!zt(O)||!zt(F)||!zt(l)||!zt(C)?null:$e.createElement("path",eS({},en(U,!0),{className:sn("recharts-cross",X),d:r7(a,v,O,F,l,C)}))},Aw,Nj;function i7(){if(Nj)return Aw;Nj=1;var e=eI(),t=e(Object.getPrototypeOf,Object);return Aw=t,Aw}var Mw,Rj;function a7(){if(Rj)return Mw;Rj=1;var e=Ku(),t=i7(),i=Qu(),a="[object Object]",f=Function.prototype,v=Object.prototype,m=f.toString,l=v.hasOwnProperty,P=m.call(Object);function C(z){if(!i(z)||e(z)!=a)return!1;var O=t(z);if(O===null)return!0;var B=l.call(O,"constructor")&&O.constructor;return typeof B=="function"&&B instanceof B&&m.call(B)==P}return Mw=C,Mw}var o7=a7();const s7=Bn(o7);var Pw,Lj;function l7(){if(Lj)return Pw;Lj=1;var e=Ku(),t=Qu(),i="[object Boolean]";function a(f){return f===!0||f===!1||t(f)&&e(f)==i}return Pw=a,Pw}var c7=l7();const u7=Bn(c7);function by(e){"@babel/helpers - typeof";return by=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},by(e)}function P_(){return P_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},P_.apply(this,arguments)}function h7(e,t){return m7(e)||p7(e,t)||f7(e,t)||d7()}function d7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f7(e,t){if(e){if(typeof e=="string")return Bj(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Bj(e,t)}}function Bj(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function p7(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,v,m,l=[],P=!0,C=!1;try{if(v=(i=i.call(e)).next,t!==0)for(;!(P=(a=v.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(z){C=!0,f=z}finally{try{if(!P&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return l}}function m7(e){if(Array.isArray(e))return e}function Fj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function $j(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Fj(Object(i),!0).forEach(function(a){g7(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Fj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function g7(e,t,i){return t=y7(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function y7(e){var t=v7(e,"string");return by(t)=="symbol"?t:t+""}function v7(e,t){if(by(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(by(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qj=function(t,i,a,f,v){var m=a-f,l;return l="M ".concat(t,",").concat(i),l+="L ".concat(t+a,",").concat(i),l+="L ".concat(t+a-m/2,",").concat(i+v),l+="L ".concat(t+a-m/2-f,",").concat(i+v),l+="L ".concat(t,",").concat(i," Z"),l},_7={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},x7=function(t){var i=$j($j({},_7),t),a=ft.useRef(),f=ft.useState(-1),v=h7(f,2),m=v[0],l=v[1];ft.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var ne=a.current.getTotalLength();ne&&l(ne)}catch{}},[]);var P=i.x,C=i.y,z=i.upperWidth,O=i.lowerWidth,B=i.height,F=i.className,X=i.animationEasing,Z=i.animationDuration,U=i.animationBegin,re=i.isUpdateAnimationActive;if(P!==+P||C!==+C||z!==+z||O!==+O||B!==+B||z===0&&O===0||B===0)return null;var se=sn("recharts-trapezoid",F);return re?$e.createElement(Yu,{canBegin:m>0,from:{upperWidth:0,lowerWidth:0,height:B,x:P,y:C},to:{upperWidth:z,lowerWidth:O,height:B,x:P,y:C},duration:Z,animationEasing:X,isActive:re},function(ne){var ue=ne.upperWidth,J=ne.lowerWidth,ae=ne.height,he=ne.x,ve=ne.y;return $e.createElement(Yu,{canBegin:m>0,from:"0px ".concat(m===-1?1:m,"px"),to:"".concat(m,"px 0px"),attributeName:"strokeDasharray",begin:U,duration:Z,easing:X},$e.createElement("path",P_({},en(i,!0),{className:se,d:qj(he,ve,ue,J,ae),ref:a})))}):$e.createElement("g",null,$e.createElement("path",P_({},en(i,!0),{className:se,d:qj(P,C,z,O,B)})))},b7=["option","shapeType","propTransformer","activeClassName","isActive"];function wy(e){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wy(e)}function w7(e,t){if(e==null)return{};var i=S7(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function S7(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function Uj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function E_(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Uj(Object(i),!0).forEach(function(a){T7(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Uj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function T7(e,t,i){return t=A7(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function A7(e){var t=M7(e,"string");return wy(t)=="symbol"?t:t+""}function M7(e,t){if(wy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(wy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P7(e,t){return E_(E_({},t),e)}function E7(e,t){return e==="symbols"}function Vj(e){var t=e.shapeType,i=e.elementProps;switch(t){case"rectangle":return $e.createElement(_T,i);case"trapezoid":return $e.createElement(x7,i);case"sector":return $e.createElement(PD,i);case"symbols":if(E7(t))return $e.createElement(LS,i);break;default:return null}}function C7(e){return ft.isValidElement(e)?e.props:e}function j7(e){var t=e.option,i=e.shapeType,a=e.propTransformer,f=a===void 0?P7:a,v=e.activeClassName,m=v===void 0?"recharts-active-shape":v,l=e.isActive,P=w7(e,b7),C;if(ft.isValidElement(t))C=ft.cloneElement(t,E_(E_({},P),C7(t)));else if(Lr(t))C=t(P);else if(s7(t)&&!u7(t)){var z=f(t,P);C=$e.createElement(Vj,{shapeType:i,elementProps:z})}else{var O=P;C=$e.createElement(Vj,{shapeType:i,elementProps:O})}return l?$e.createElement(Oi,{className:m},C):C}function fx(e,t){return t!=null&&"trapezoids"in e.props}function px(e,t){return t!=null&&"sectors"in e.props}function Sy(e,t){return t!=null&&"points"in e.props}function O7(e,t){var i,a,f=e.x===(t==null||(i=t.labelViewBox)===null||i===void 0?void 0:i.x)||e.x===t.x,v=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return f&&v}function k7(e,t){var i=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return i&&a}function I7(e,t){var i=e.x===t.x,a=e.y===t.y,f=e.z===t.z;return i&&a&&f}function D7(e,t){var i;return fx(e,t)?i=O7:px(e,t)?i=k7:Sy(e,t)&&(i=I7),i}function z7(e,t){var i;return fx(e,t)?i="trapezoids":px(e,t)?i="sectors":Sy(e,t)&&(i="points"),i}function N7(e,t){if(fx(e,t)){var i;return(i=t.tooltipPayload)===null||i===void 0||(i=i[0])===null||i===void 0||(i=i.payload)===null||i===void 0?void 0:i.payload}if(px(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Sy(e,t)?t.payload:{}}function R7(e){var t=e.activeTooltipItem,i=e.graphicalItem,a=e.itemData,f=z7(i,t),v=N7(i,t),m=a.filter(function(P,C){var z=ux(v,P),O=i.props[f].filter(function(X){var Z=D7(i,t);return Z(X,t)}),B=i.props[f].indexOf(O[O.length-1]),F=C===B;return z&&F}),l=a.indexOf(m[m.length-1]);return l}var Ew,Gj;function L7(){if(Gj)return Ew;Gj=1;var e=Math.ceil,t=Math.max;function i(a,f,v,m){for(var l=-1,P=t(e((f-a)/(v||1)),0),C=Array(P);P--;)C[m?P:++l]=a,a+=v;return C}return Ew=i,Ew}var Cw,Zj;function zD(){if(Zj)return Cw;Zj=1;var e=gI(),t=1/0,i=17976931348623157e292;function a(f){if(!f)return f===0?f:0;if(f=e(f),f===t||f===-1/0){var v=f<0?-1:1;return v*i}return f===f?f:0}return Cw=a,Cw}var jw,Hj;function B7(){if(Hj)return jw;Hj=1;var e=L7(),t=tx(),i=zD();function a(f){return function(v,m,l){return l&&typeof l!="number"&&t(v,m,l)&&(m=l=void 0),v=i(v),m===void 0?(m=v,v=0):m=i(m),l=l===void 0?v<m?1:-1:i(l),e(v,m,l,f)}}return jw=a,jw}var Ow,Xj;function F7(){if(Xj)return Ow;Xj=1;var e=B7(),t=e();return Ow=t,Ow}var $7=F7();const C_=Bn($7);function Ty(e){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ty(e)}function Wj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Yj(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Wj(Object(i),!0).forEach(function(a){ND(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Wj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function ND(e,t,i){return t=q7(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function q7(e){var t=U7(e,"string");return Ty(t)=="symbol"?t:t+""}function U7(e,t){if(Ty(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Ty(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V7=["Webkit","Moz","O","ms"],G7=function(t,i){var a=t.replace(/(\w)/,function(v){return v.toUpperCase()}),f=V7.reduce(function(v,m){return Yj(Yj({},v),{},ND({},m+a,i))},{});return f[t]=i,f};function om(e){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},om(e)}function j_(){return j_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},j_.apply(this,arguments)}function Kj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function kw(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Kj(Object(i),!0).forEach(function(a){xs(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Kj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Z7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qj(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,LD(a.key),a)}}function H7(e,t,i){return t&&Qj(e.prototype,t),i&&Qj(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function X7(e,t,i){return t=O_(t),W7(e,RD()?Reflect.construct(t,i||[],O_(e).constructor):t.apply(e,i))}function W7(e,t){if(t&&(om(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y7(e)}function Y7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RD=function(){return!!e})()}function O_(e){return O_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},O_(e)}function K7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tS(e,t)}function tS(e,t){return tS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},tS(e,t)}function xs(e,t,i){return t=LD(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function LD(e){var t=Q7(e,"string");return om(t)=="symbol"?t:t+""}function Q7(e,t){if(om(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(om(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var J7=function(t){var i=t.data,a=t.startIndex,f=t.endIndex,v=t.x,m=t.width,l=t.travellerWidth;if(!i||!i.length)return{};var P=i.length,C=Ug().domain(C_(0,P)).range([v,v+m-l]),z=C.domain().map(function(O){return C(O)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:C(a),endX:C(f),scale:C,scaleValues:z}},Jj=function(t){return t.changedTouches&&!!t.changedTouches.length},sm=function(e){function t(i){var a;return Z7(this,t),a=X7(this,t,[i]),xs(a,"handleDrag",function(f){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(f):a.state.isSlideMoving&&a.handleSlideDrag(f)}),xs(a,"handleTouchMove",function(f){f.changedTouches!=null&&f.changedTouches.length>0&&a.handleDrag(f.changedTouches[0])}),xs(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var f=a.props,v=f.endIndex,m=f.onDragEnd,l=f.startIndex;m==null||m({endIndex:v,startIndex:l})}),a.detachDragEndListener()}),xs(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),xs(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),xs(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),xs(a,"handleSlideDragStart",function(f){var v=Jj(f)?f.changedTouches[0]:f;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:v.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return K7(t,e),H7(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var f=a.startX,v=a.endX,m=this.state.scaleValues,l=this.props,P=l.gap,C=l.data,z=C.length-1,O=Math.min(f,v),B=Math.max(f,v),F=t.getIndexInRange(m,O),X=t.getIndexInRange(m,B);return{startIndex:F-F%P,endIndex:X===z?z:X-X%P}}},{key:"getTextOfTick",value:function(a){var f=this.props,v=f.data,m=f.tickFormatter,l=f.dataKey,P=Ss(v[a],l,a);return Lr(m)?m(P,a):P}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var f=this.state,v=f.slideMoveStartX,m=f.startX,l=f.endX,P=this.props,C=P.x,z=P.width,O=P.travellerWidth,B=P.startIndex,F=P.endIndex,X=P.onChange,Z=a.pageX-v;Z>0?Z=Math.min(Z,C+z-O-l,C+z-O-m):Z<0&&(Z=Math.max(Z,C-m,C-l));var U=this.getIndex({startX:m+Z,endX:l+Z});(U.startIndex!==B||U.endIndex!==F)&&X&&X(U),this.setState({startX:m+Z,endX:l+Z,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,f){var v=Jj(f)?f.changedTouches[0]:f;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:v.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var f=this.state,v=f.brushMoveStartX,m=f.movingTravellerId,l=f.endX,P=f.startX,C=this.state[m],z=this.props,O=z.x,B=z.width,F=z.travellerWidth,X=z.onChange,Z=z.gap,U=z.data,re={startX:this.state.startX,endX:this.state.endX},se=a.pageX-v;se>0?se=Math.min(se,O+B-F-C):se<0&&(se=Math.max(se,O-C)),re[m]=C+se;var ne=this.getIndex(re),ue=ne.startIndex,J=ne.endIndex,ae=function(){var ve=U.length-1;return m==="startX"&&(l>P?ue%Z===0:J%Z===0)||l<P&&J===ve||m==="endX"&&(l>P?J%Z===0:ue%Z===0)||l>P&&J===ve};this.setState(xs(xs({},m,C+se),"brushMoveStartX",a.pageX),function(){X&&ae()&&X(ne)})}},{key:"handleTravellerMoveKeyboard",value:function(a,f){var v=this,m=this.state,l=m.scaleValues,P=m.startX,C=m.endX,z=this.state[f],O=l.indexOf(z);if(O!==-1){var B=O+a;if(!(B===-1||B>=l.length)){var F=l[B];f==="startX"&&F>=C||f==="endX"&&F<=P||this.setState(xs({},f,F),function(){v.props.onChange(v.getIndex({startX:v.state.startX,endX:v.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,f=a.x,v=a.y,m=a.width,l=a.height,P=a.fill,C=a.stroke;return $e.createElement("rect",{stroke:C,fill:P,x:f,y:v,width:m,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,f=a.x,v=a.y,m=a.width,l=a.height,P=a.data,C=a.children,z=a.padding,O=ft.Children.only(C);return O?$e.cloneElement(O,{x:f,y:v,width:m,height:l,margin:z,compact:!0,data:P}):null}},{key:"renderTravellerLayer",value:function(a,f){var v,m,l=this,P=this.props,C=P.y,z=P.travellerWidth,O=P.height,B=P.traveller,F=P.ariaLabel,X=P.data,Z=P.startIndex,U=P.endIndex,re=Math.max(a,this.props.x),se=kw(kw({},en(this.props,!1)),{},{x:re,y:C,width:z,height:O}),ne=F||"Min value: ".concat((v=X[Z])===null||v===void 0?void 0:v.name,", Max value: ").concat((m=X[U])===null||m===void 0?void 0:m.name);return $e.createElement(Oi,{tabIndex:0,role:"slider","aria-label":ne,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[f],onTouchStart:this.travellerDragStartHandlers[f],onKeyDown:function(J){["ArrowLeft","ArrowRight"].includes(J.key)&&(J.preventDefault(),J.stopPropagation(),l.handleTravellerMoveKeyboard(J.key==="ArrowRight"?1:-1,f))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(B,se))}},{key:"renderSlide",value:function(a,f){var v=this.props,m=v.y,l=v.height,P=v.stroke,C=v.travellerWidth,z=Math.min(a,f)+C,O=Math.max(Math.abs(f-a)-C,0);return $e.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:P,fillOpacity:.2,x:z,y:m,width:O,height:l})}},{key:"renderText",value:function(){var a=this.props,f=a.startIndex,v=a.endIndex,m=a.y,l=a.height,P=a.travellerWidth,C=a.stroke,z=this.state,O=z.startX,B=z.endX,F=5,X={pointerEvents:"none",fill:C};return $e.createElement(Oi,{className:"recharts-brush-texts"},$e.createElement(o_,j_({textAnchor:"end",verticalAnchor:"middle",x:Math.min(O,B)-F,y:m+l/2},X),this.getTextOfTick(f)),$e.createElement(o_,j_({textAnchor:"start",verticalAnchor:"middle",x:Math.max(O,B)+P+F,y:m+l/2},X),this.getTextOfTick(v)))}},{key:"render",value:function(){var a=this.props,f=a.data,v=a.className,m=a.children,l=a.x,P=a.y,C=a.width,z=a.height,O=a.alwaysShowText,B=this.state,F=B.startX,X=B.endX,Z=B.isTextActive,U=B.isSlideMoving,re=B.isTravellerMoving,se=B.isTravellerFocused;if(!f||!f.length||!zt(l)||!zt(P)||!zt(C)||!zt(z)||C<=0||z<=0)return null;var ne=sn("recharts-brush",v),ue=$e.Children.count(m)===1,J=G7("userSelect","none");return $e.createElement(Oi,{className:ne,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:J},this.renderBackground(),ue&&this.renderPanorama(),this.renderSlide(F,X),this.renderTravellerLayer(F,"startX"),this.renderTravellerLayer(X,"endX"),(Z||U||re||se||O)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var f=a.x,v=a.y,m=a.width,l=a.height,P=a.stroke,C=Math.floor(v+l/2)-1;return $e.createElement($e.Fragment,null,$e.createElement("rect",{x:f,y:v,width:m,height:l,fill:P,stroke:"none"}),$e.createElement("line",{x1:f+1,y1:C,x2:f+m-1,y2:C,fill:"none",stroke:"#fff"}),$e.createElement("line",{x1:f+1,y1:C+2,x2:f+m-1,y2:C+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,f){var v;return $e.isValidElement(a)?v=$e.cloneElement(a,f):Lr(a)?v=a(f):v=t.renderDefaultTraveller(f),v}},{key:"getDerivedStateFromProps",value:function(a,f){var v=a.data,m=a.width,l=a.x,P=a.travellerWidth,C=a.updateId,z=a.startIndex,O=a.endIndex;if(v!==f.prevData||C!==f.prevUpdateId)return kw({prevData:v,prevTravellerWidth:P,prevUpdateId:C,prevX:l,prevWidth:m},v&&v.length?J7({data:v,width:m,x:l,travellerWidth:P,startIndex:z,endIndex:O}):{scale:null,scaleValues:null});if(f.scale&&(m!==f.prevWidth||l!==f.prevX||P!==f.prevTravellerWidth)){f.scale.range([l,l+m-P]);var B=f.scale.domain().map(function(F){return f.scale(F)});return{prevData:v,prevTravellerWidth:P,prevUpdateId:C,prevX:l,prevWidth:m,startX:f.scale(a.startIndex),endX:f.scale(a.endIndex),scaleValues:B}}return null}},{key:"getIndexInRange",value:function(a,f){for(var v=a.length,m=0,l=v-1;l-m>1;){var P=Math.floor((m+l)/2);a[P]>f?l=P:m=P}return f>=a[l]?l:m}}])}(ft.PureComponent);xs(sm,"displayName","Brush");xs(sm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Iw,eO;function eG(){if(eO)return Iw;eO=1;var e=GS();function t(i,a){var f;return e(i,function(v,m,l){return f=a(v,m,l),!f}),!!f}return Iw=t,Iw}var Dw,tO;function tG(){if(tO)return Dw;tO=1;var e=Hk(),t=dd(),i=eG(),a=ts(),f=tx();function v(m,l,P){var C=a(m)?e:i;return P&&f(m,l,P)&&(l=void 0),C(m,t(l,3))}return Dw=v,Dw}var rG=tG();const nG=Bn(rG);var Wc=function(t,i){var a=t.alwaysShow,f=t.ifOverflow;return a&&(f="extendDomain"),f===i},zw,rO;function iG(){if(rO)return zw;rO=1;var e=hI();function t(i,a,f){a=="__proto__"&&e?e(i,a,{configurable:!0,enumerable:!0,value:f,writable:!0}):i[a]=f}return zw=t,zw}var Nw,nO;function aG(){if(nO)return Nw;nO=1;var e=iG(),t=cI(),i=dd();function a(f,v){var m={};return v=i(v,3),t(f,function(l,P,C){e(m,P,v(l,P,C))}),m}return Nw=a,Nw}var oG=aG();const sG=Bn(oG);var Rw,iO;function lG(){if(iO)return Rw;iO=1;function e(t,i){for(var a=-1,f=t==null?0:t.length;++a<f;)if(!i(t[a],a,t))return!1;return!0}return Rw=e,Rw}var Lw,aO;function cG(){if(aO)return Lw;aO=1;var e=GS();function t(i,a){var f=!0;return e(i,function(v,m,l){return f=!!a(v,m,l),f}),f}return Lw=t,Lw}var Bw,oO;function uG(){if(oO)return Bw;oO=1;var e=lG(),t=cG(),i=dd(),a=ts(),f=tx();function v(m,l,P){var C=a(m)?e:t;return P&&f(m,l,P)&&(l=void 0),C(m,i(l,3))}return Bw=v,Bw}var hG=uG();const BD=Bn(hG);var dG=["x","y"];function Ay(e){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ay(e)}function rS(){return rS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},rS.apply(this,arguments)}function sO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Dg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?sO(Object(i),!0).forEach(function(a){fG(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function fG(e,t,i){return t=pG(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function pG(e){var t=mG(e,"string");return Ay(t)=="symbol"?t:t+""}function mG(e,t){if(Ay(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Ay(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gG(e,t){if(e==null)return{};var i=yG(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function yG(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function vG(e,t){var i=e.x,a=e.y,f=gG(e,dG),v="".concat(i),m=parseInt(v,10),l="".concat(a),P=parseInt(l,10),C="".concat(t.height||f.height),z=parseInt(C,10),O="".concat(t.width||f.width),B=parseInt(O,10);return Dg(Dg(Dg(Dg(Dg({},t),f),m?{x:m}:{}),P?{y:P}:{}),{},{height:z,width:B,name:t.name,radius:t.radius})}function lO(e){return $e.createElement(j7,rS({shapeType:"rectangle",propTransformer:vG,activeClassName:"recharts-active-bar"},e))}var _G=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,f){if(typeof t=="number")return t;var v=typeof a=="number";return v?t(a,f):(v||Cf(),i)}},xG=["value","background"],FD;function lm(e){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lm(e)}function bG(e,t){if(e==null)return{};var i=wG(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function wG(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function k_(){return k_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},k_.apply(this,arguments)}function cO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Xi(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?cO(Object(i),!0).forEach(function(a){sd(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):cO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function SG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uO(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,qD(a.key),a)}}function TG(e,t,i){return t&&uO(e.prototype,t),i&&uO(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function AG(e,t,i){return t=I_(t),MG(e,$D()?Reflect.construct(t,i||[],I_(e).constructor):t.apply(e,i))}function MG(e,t){if(t&&(lm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PG(e)}function PG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($D=function(){return!!e})()}function I_(e){return I_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},I_(e)}function EG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nS(e,t)}function nS(e,t){return nS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},nS(e,t)}function sd(e,t,i){return t=qD(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function qD(e){var t=CG(e,"string");return lm(t)=="symbol"?t:t+""}function CG(e,t){if(lm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(lm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $y=function(e){function t(){var i;SG(this,t);for(var a=arguments.length,f=new Array(a),v=0;v<a;v++)f[v]=arguments[v];return i=AG(this,t,[].concat(f)),sd(i,"state",{isAnimationFinished:!1}),sd(i,"id",Dy("recharts-bar-")),sd(i,"handleAnimationEnd",function(){var m=i.props.onAnimationEnd;i.setState({isAnimationFinished:!0}),m&&m()}),sd(i,"handleAnimationStart",function(){var m=i.props.onAnimationStart;i.setState({isAnimationFinished:!1}),m&&m()}),i}return EG(t,e),TG(t,[{key:"renderRectanglesStatically",value:function(a){var f=this,v=this.props,m=v.shape,l=v.dataKey,P=v.activeIndex,C=v.activeBar,z=en(this.props,!1);return a&&a.map(function(O,B){var F=B===P,X=F?C:m,Z=Xi(Xi(Xi({},z),O),{},{isActive:F,option:X,index:B,dataKey:l,onAnimationStart:f.handleAnimationStart,onAnimationEnd:f.handleAnimationEnd});return $e.createElement(Oi,k_({className:"recharts-bar-rectangle"},Wv(f.props,O,B),{key:"rectangle-".concat(O==null?void 0:O.x,"-").concat(O==null?void 0:O.y,"-").concat(O==null?void 0:O.value,"-").concat(B)}),$e.createElement(lO,Z))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,f=this.props,v=f.data,m=f.layout,l=f.isAnimationActive,P=f.animationBegin,C=f.animationDuration,z=f.animationEasing,O=f.animationId,B=this.state.prevData;return $e.createElement(Yu,{begin:P,duration:C,isActive:l,easing:z,from:{t:0},to:{t:1},key:"bar-".concat(O),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(F){var X=F.t,Z=v.map(function(U,re){var se=B&&B[re];if(se){var ne=ic(se.x,U.x),ue=ic(se.y,U.y),J=ic(se.width,U.width),ae=ic(se.height,U.height);return Xi(Xi({},U),{},{x:ne(X),y:ue(X),width:J(X),height:ae(X)})}if(m==="horizontal"){var he=ic(0,U.height),ve=he(X);return Xi(Xi({},U),{},{y:U.y+U.height-ve,height:ve})}var Ie=ic(0,U.width),at=Ie(X);return Xi(Xi({},U),{},{width:at})});return $e.createElement(Oi,null,a.renderRectanglesStatically(Z))})}},{key:"renderRectangles",value:function(){var a=this.props,f=a.data,v=a.isAnimationActive,m=this.state.prevData;return v&&f&&f.length&&(!m||!ux(m,f))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(f)}},{key:"renderBackground",value:function(){var a=this,f=this.props,v=f.data,m=f.dataKey,l=f.activeIndex,P=en(this.props.background,!1);return v.map(function(C,z){C.value;var O=C.background,B=bG(C,xG);if(!O)return null;var F=Xi(Xi(Xi(Xi(Xi({},B),{},{fill:"#eee"},O),P),Wv(a.props,C,z)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:m,index:z,className:"recharts-bar-background-rectangle"});return $e.createElement(lO,k_({key:"background-bar-".concat(z),option:a.props.background,isActive:z===l},F))})}},{key:"renderErrorBar",value:function(a,f){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var v=this.props,m=v.data,l=v.xAxis,P=v.yAxis,C=v.layout,z=v.children,O=ol(z,Fy);if(!O)return null;var B=C==="vertical"?m[0].height/2:m[0].width/2,F=function(U,re){var se=Array.isArray(U.value)?U.value[1]:U.value;return{x:U.x,y:U.y,value:se,errorVal:Ss(U,re)}},X={clipPath:a?"url(#clipPath-".concat(f,")"):null};return $e.createElement(Oi,X,O.map(function(Z){return $e.cloneElement(Z,{key:"error-bar-".concat(f,"-").concat(Z.props.dataKey),data:m,xAxis:l,yAxis:P,layout:C,offset:B,dataPointFormatter:F})}))}},{key:"render",value:function(){var a=this.props,f=a.hide,v=a.data,m=a.className,l=a.xAxis,P=a.yAxis,C=a.left,z=a.top,O=a.width,B=a.height,F=a.isAnimationActive,X=a.background,Z=a.id;if(f||!v||!v.length)return null;var U=this.state.isAnimationFinished,re=sn("recharts-bar",m),se=l&&l.allowDataOverflow,ne=P&&P.allowDataOverflow,ue=se||ne,J=Wr(Z)?this.id:Z;return $e.createElement(Oi,{className:re},se||ne?$e.createElement("defs",null,$e.createElement("clipPath",{id:"clipPath-".concat(J)},$e.createElement("rect",{x:se?C:C-O/2,y:ne?z:z-B/2,width:se?O:O*2,height:ne?B:B*2}))):null,$e.createElement(Oi,{className:"recharts-bar-rectangles",clipPath:ue?"url(#clipPath-".concat(J,")"):null},X?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(ue,J),(!F||U)&&ud.renderCallByParent(this.props,v))}}],[{key:"getDerivedStateFromProps",value:function(a,f){return a.animationId!==f.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:f.curData}:a.data!==f.curData?{curData:a.data}:null}}])}(ft.PureComponent);FD=$y;sd($y,"displayName","Bar");sd($y,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Tm.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});sd($y,"getComposedData",function(e){var t=e.props,i=e.item,a=e.barPosition,f=e.bandSize,v=e.xAxis,m=e.yAxis,l=e.xAxisTicks,P=e.yAxisTicks,C=e.stackedData,z=e.dataStartIndex,O=e.displayedData,B=e.offset,F=Xq(a,i);if(!F)return null;var X=t.layout,Z=i.type.defaultProps,U=Z!==void 0?Xi(Xi({},Z),i.props):i.props,re=U.dataKey,se=U.children,ne=U.minPointSize,ue=X==="horizontal"?m:v,J=C?ue.scale.domain():null,ae=rU({numericAxis:ue}),he=ol(se,vI),ve=O.map(function(Ie,at){var De,Fe,tt,ut,rt,Pe;C?De=Wq(C[z+at],J):(De=Ss(Ie,re),Array.isArray(De)||(De=[ae,De]));var Ve=_G(ne,FD.defaultProps.minPointSize)(De[1],at);if(X==="horizontal"){var Ge,ht=[m.scale(De[0]),m.scale(De[1])],xe=ht[0],Xe=ht[1];Fe=HC({axis:v,ticks:l,bandSize:f,offset:F.offset,entry:Ie,index:at}),tt=(Ge=Xe??xe)!==null&&Ge!==void 0?Ge:void 0,ut=F.size;var ot=xe-Xe;if(rt=Number.isNaN(ot)?0:ot,Pe={x:Fe,y:m.y,width:ut,height:m.height},Math.abs(Ve)>0&&Math.abs(rt)<Math.abs(Ve)){var st=oc(rt||Ve)*(Math.abs(Ve)-Math.abs(rt));tt-=st,rt+=st}}else{var Pt=[v.scale(De[0]),v.scale(De[1])],Vt=Pt[0],Nt=Pt[1];if(Fe=Vt,tt=HC({axis:m,ticks:P,bandSize:f,offset:F.offset,entry:Ie,index:at}),ut=Nt-Vt,rt=F.size,Pe={x:v.x,y:tt,width:v.width,height:rt},Math.abs(Ve)>0&&Math.abs(ut)<Math.abs(Ve)){var yr=oc(ut||Ve)*(Math.abs(Ve)-Math.abs(ut));ut+=yr}}return Xi(Xi(Xi({},Ie),{},{x:Fe,y:tt,width:ut,height:rt,value:C?De:De[1],payload:Ie,background:Pe},he&&he[at]&&he[at].props),{},{tooltipPayload:[TD(i,Ie)],tooltipPosition:{x:Fe+ut/2,y:tt+rt/2}})});return Xi({data:ve,layout:X},B)});function My(e){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},My(e)}function jG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hO(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,UD(a.key),a)}}function OG(e,t,i){return t&&hO(e.prototype,t),i&&hO(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function dO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function rc(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?dO(Object(i),!0).forEach(function(a){mx(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):dO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function mx(e,t,i){return t=UD(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function UD(e){var t=kG(e,"string");return My(t)=="symbol"?t:t+""}function kG(e,t){if(My(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(My(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IG=function(t,i,a,f,v){var m=t.width,l=t.height,P=t.layout,C=t.children,z=Object.keys(i),O={left:a.left,leftMirror:a.left,right:m-a.right,rightMirror:m-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},B=!!bs(C,$y);return z.reduce(function(F,X){var Z=i[X],U=Z.orientation,re=Z.domain,se=Z.padding,ne=se===void 0?{}:se,ue=Z.mirror,J=Z.reversed,ae="".concat(U).concat(ue?"Mirror":""),he,ve,Ie,at,De;if(Z.type==="number"&&(Z.padding==="gap"||Z.padding==="no-gap")){var Fe=re[1]-re[0],tt=1/0,ut=Z.categoricalDomain.sort(O5);if(ut.forEach(function(Pt,Vt){Vt>0&&(tt=Math.min((Pt||0)-(ut[Vt-1]||0),tt))}),Number.isFinite(tt)){var rt=tt/Fe,Pe=Z.layout==="vertical"?a.height:a.width;if(Z.padding==="gap"&&(he=rt*Pe/2),Z.padding==="no-gap"){var Ve=Pf(t.barCategoryGap,rt*Pe),Ge=rt*Pe/2;he=Ge-Ve-(Ge-Ve)/Pe*Ve}}}f==="xAxis"?ve=[a.left+(ne.left||0)+(he||0),a.left+a.width-(ne.right||0)-(he||0)]:f==="yAxis"?ve=P==="horizontal"?[a.top+a.height-(ne.bottom||0),a.top+(ne.top||0)]:[a.top+(ne.top||0)+(he||0),a.top+a.height-(ne.bottom||0)-(he||0)]:ve=Z.range,J&&(ve=[ve[1],ve[0]]);var ht=Zq(Z,v,B),xe=ht.scale,Xe=ht.realScaleType;xe.domain(re).range(ve),Hq(xe);var ot=tU(xe,rc(rc({},Z),{},{realScaleType:Xe}));f==="xAxis"?(De=U==="top"&&!ue||U==="bottom"&&ue,Ie=a.left,at=O[ae]-De*Z.height):f==="yAxis"&&(De=U==="left"&&!ue||U==="right"&&ue,Ie=O[ae]-De*Z.width,at=a.top);var st=rc(rc(rc({},Z),ot),{},{realScaleType:Xe,x:Ie,y:at,scale:xe,width:f==="xAxis"?a.width:Z.width,height:f==="yAxis"?a.height:Z.height});return st.bandSize=x_(st,ot),!Z.hide&&f==="xAxis"?O[ae]+=(De?-1:1)*st.height:Z.hide||(O[ae]+=(De?-1:1)*st.width),rc(rc({},F),{},mx({},X,st))},{})},VD=function(t,i){var a=t.x,f=t.y,v=i.x,m=i.y;return{x:Math.min(a,v),y:Math.min(f,m),width:Math.abs(v-a),height:Math.abs(m-f)}},DG=function(t){var i=t.x1,a=t.y1,f=t.x2,v=t.y2;return VD({x:i,y:a},{x:f,y:v})},GD=function(){function e(t){jG(this,e),this.scale=t}return OG(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=a.bandAware,v=a.position;if(i!==void 0){if(v)switch(v){case"start":return this.scale(i);case"middle":{var m=this.bandwidth?this.bandwidth()/2:0;return this.scale(i)+m}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(i)+l}default:return this.scale(i)}if(f){var P=this.bandwidth?this.bandwidth()/2:0;return this.scale(i)+P}return this.scale(i)}}},{key:"isInRange",value:function(i){var a=this.range(),f=a[0],v=a[a.length-1];return f<=v?i>=f&&i<=v:i>=v&&i<=f}}],[{key:"create",value:function(i){return new e(i)}}])}();mx(GD,"EPS",1e-4);var bT=function(t){var i=Object.keys(t).reduce(function(a,f){return rc(rc({},a),{},mx({},f,GD.create(t[f])))},{});return rc(rc({},i),{},{apply:function(f){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=v.bandAware,l=v.position;return sG(f,function(P,C){return i[C].apply(P,{bandAware:m,position:l})})},isInRange:function(f){return BD(f,function(v,m){return i[m].isInRange(v)})}})};function zG(e){return(e%180+180)%180}var NG=function(t){var i=t.width,a=t.height,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=zG(f),m=v*Math.PI/180,l=Math.atan(a/i),P=m>l&&m<Math.PI-l?a/Math.sin(m):i/Math.cos(m);return Math.abs(P)},Fw,fO;function RG(){if(fO)return Fw;fO=1;var e=dd(),t=zy(),i=J_();function a(f){return function(v,m,l){var P=Object(v);if(!t(v)){var C=e(m,3);v=i(v),m=function(O){return C(P[O],O,P)}}var z=f(v,m,l);return z>-1?P[C?v[z]:z]:void 0}}return Fw=a,Fw}var $w,pO;function LG(){if(pO)return $w;pO=1;var e=zD();function t(i){var a=e(i),f=a%1;return a===a?f?a-f:a:0}return $w=t,$w}var qw,mO;function BG(){if(mO)return qw;mO=1;var e=iI(),t=dd(),i=LG(),a=Math.max;function f(v,m,l){var P=v==null?0:v.length;if(!P)return-1;var C=l==null?0:i(l);return C<0&&(C=a(P+C,0)),e(v,t(m,3),C)}return qw=f,qw}var Uw,gO;function FG(){if(gO)return Uw;gO=1;var e=RG(),t=BG(),i=e(t);return Uw=i,Uw}var $G=FG();const qG=Bn($G);var UG=xk();const VG=Bn(UG);var GG=VG(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),wT=ft.createContext(void 0),ST=ft.createContext(void 0),ZD=ft.createContext(void 0),HD=ft.createContext({}),XD=ft.createContext(void 0),WD=ft.createContext(0),YD=ft.createContext(0),yO=function(t){var i=t.state,a=i.xAxisMap,f=i.yAxisMap,v=i.offset,m=t.clipPathId,l=t.children,P=t.width,C=t.height,z=GG(v);return $e.createElement(wT.Provider,{value:a},$e.createElement(ST.Provider,{value:f},$e.createElement(HD.Provider,{value:v},$e.createElement(ZD.Provider,{value:z},$e.createElement(XD.Provider,{value:m},$e.createElement(WD.Provider,{value:C},$e.createElement(YD.Provider,{value:P},l)))))))},ZG=function(){return ft.useContext(XD)},KD=function(t){var i=ft.useContext(wT);i==null&&Cf();var a=i[t];return a==null&&Cf(),a},HG=function(){var t=ft.useContext(wT);return ad(t)},XG=function(){var t=ft.useContext(ST),i=qG(t,function(a){return BD(a.domain,Number.isFinite)});return i||ad(t)},QD=function(t){var i=ft.useContext(ST);i==null&&Cf();var a=i[t];return a==null&&Cf(),a},WG=function(){var t=ft.useContext(ZD);return t},YG=function(){return ft.useContext(HD)},TT=function(){return ft.useContext(YD)},AT=function(){return ft.useContext(WD)};function cm(e){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cm(e)}function KG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QG(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ez(a.key),a)}}function JG(e,t,i){return t&&QG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function eZ(e,t,i){return t=D_(t),tZ(e,JD()?Reflect.construct(t,i||[],D_(e).constructor):t.apply(e,i))}function tZ(e,t){if(t&&(cm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rZ(e)}function rZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JD=function(){return!!e})()}function D_(e){return D_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},D_(e)}function nZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iS(e,t)}function iS(e,t){return iS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},iS(e,t)}function vO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function _O(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?vO(Object(i),!0).forEach(function(a){MT(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function MT(e,t,i){return t=ez(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ez(e){var t=iZ(e,"string");return cm(t)=="symbol"?t:t+""}function iZ(e,t){if(cm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(cm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function aZ(e,t){return cZ(e)||lZ(e,t)||sZ(e,t)||oZ()}function oZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sZ(e,t){if(e){if(typeof e=="string")return xO(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xO(e,t)}}function xO(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function lZ(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,v,m,l=[],P=!0,C=!1;try{if(v=(i=i.call(e)).next,t!==0)for(;!(P=(a=v.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(z){C=!0,f=z}finally{try{if(!P&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return l}}function cZ(e){if(Array.isArray(e))return e}function aS(){return aS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},aS.apply(this,arguments)}var uZ=function(t,i){var a;return $e.isValidElement(t)?a=$e.cloneElement(t,i):Lr(t)?a=t(i):a=$e.createElement("line",aS({},i,{className:"recharts-reference-line-line"})),a},hZ=function(t,i,a,f,v,m,l,P,C){var z=v.x,O=v.y,B=v.width,F=v.height;if(a){var X=C.y,Z=t.y.apply(X,{position:m});if(Wc(C,"discard")&&!t.y.isInRange(Z))return null;var U=[{x:z+B,y:Z},{x:z,y:Z}];return P==="left"?U.reverse():U}if(i){var re=C.x,se=t.x.apply(re,{position:m});if(Wc(C,"discard")&&!t.x.isInRange(se))return null;var ne=[{x:se,y:O+F},{x:se,y:O}];return l==="top"?ne.reverse():ne}if(f){var ue=C.segment,J=ue.map(function(ae){return t.apply(ae,{position:m})});return Wc(C,"discard")&&nG(J,function(ae){return!t.isInRange(ae)})?null:J}return null};function dZ(e){var t=e.x,i=e.y,a=e.segment,f=e.xAxisId,v=e.yAxisId,m=e.shape,l=e.className,P=e.alwaysShow,C=ZG(),z=KD(f),O=QD(v),B=WG();if(!C||!B)return null;Gu(P===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var F=bT({x:z.scale,y:O.scale}),X=la(t),Z=la(i),U=a&&a.length===2,re=hZ(F,X,Z,U,B,e.position,z.orientation,O.orientation,e);if(!re)return null;var se=aZ(re,2),ne=se[0],ue=ne.x,J=ne.y,ae=se[1],he=ae.x,ve=ae.y,Ie=Wc(e,"hidden")?"url(#".concat(C,")"):void 0,at=_O(_O({clipPath:Ie},en(e,!0)),{},{x1:ue,y1:J,x2:he,y2:ve});return $e.createElement(Oi,{className:sn("recharts-reference-line",l)},uZ(m,at),ao.renderCallByParent(e,DG({x1:ue,y1:J,x2:he,y2:ve})))}var PT=function(e){function t(){return KG(this,t),eZ(this,t,arguments)}return nZ(t,e),JG(t,[{key:"render",value:function(){return $e.createElement(dZ,this.props)}}])}($e.Component);MT(PT,"displayName","ReferenceLine");MT(PT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function oS(){return oS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},oS.apply(this,arguments)}function um(e){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(e)}function bO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function wO(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?bO(Object(i),!0).forEach(function(a){gx(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):bO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function fZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pZ(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,rz(a.key),a)}}function mZ(e,t,i){return t&&pZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gZ(e,t,i){return t=z_(t),yZ(e,tz()?Reflect.construct(t,i||[],z_(e).constructor):t.apply(e,i))}function yZ(e,t){if(t&&(um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vZ(e)}function vZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tz=function(){return!!e})()}function z_(e){return z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},z_(e)}function _Z(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sS(e,t)}function sS(e,t){return sS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},sS(e,t)}function gx(e,t,i){return t=rz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function rz(e){var t=xZ(e,"string");return um(t)=="symbol"?t:t+""}function xZ(e,t){if(um(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(um(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bZ=function(t){var i=t.x,a=t.y,f=t.xAxis,v=t.yAxis,m=bT({x:f.scale,y:v.scale}),l=m.apply({x:i,y:a},{bandAware:!0});return Wc(t,"discard")&&!m.isInRange(l)?null:l},yx=function(e){function t(){return fZ(this,t),gZ(this,t,arguments)}return _Z(t,e),mZ(t,[{key:"render",value:function(){var a=this.props,f=a.x,v=a.y,m=a.r,l=a.alwaysShow,P=a.clipPathId,C=la(f),z=la(v);if(Gu(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!C||!z)return null;var O=bZ(this.props);if(!O)return null;var B=O.x,F=O.y,X=this.props,Z=X.shape,U=X.className,re=Wc(this.props,"hidden")?"url(#".concat(P,")"):void 0,se=wO(wO({clipPath:re},en(this.props,!0)),{},{cx:B,cy:F});return $e.createElement(Oi,{className:sn("recharts-reference-dot",U)},t.renderDot(Z,se),ao.renderCallByParent(this.props,{x:B-m,y:F-m,width:2*m,height:2*m}))}}])}($e.Component);gx(yx,"displayName","ReferenceDot");gx(yx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});gx(yx,"renderDot",function(e,t){var i;return $e.isValidElement(e)?i=$e.cloneElement(e,t):Lr(e)?i=e(t):i=$e.createElement(xT,oS({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),i});function lS(){return lS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},lS.apply(this,arguments)}function hm(e){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hm(e)}function SO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function TO(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?SO(Object(i),!0).forEach(function(a){vx(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):SO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function wZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SZ(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,iz(a.key),a)}}function TZ(e,t,i){return t&&SZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function AZ(e,t,i){return t=N_(t),MZ(e,nz()?Reflect.construct(t,i||[],N_(e).constructor):t.apply(e,i))}function MZ(e,t){if(t&&(hm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PZ(e)}function PZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nz=function(){return!!e})()}function N_(e){return N_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},N_(e)}function EZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cS(e,t)}function cS(e,t){return cS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},cS(e,t)}function vx(e,t,i){return t=iz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function iz(e){var t=CZ(e,"string");return hm(t)=="symbol"?t:t+""}function CZ(e,t){if(hm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(hm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jZ=function(t,i,a,f,v){var m=v.x1,l=v.x2,P=v.y1,C=v.y2,z=v.xAxis,O=v.yAxis;if(!z||!O)return null;var B=bT({x:z.scale,y:O.scale}),F={x:t?B.x.apply(m,{position:"start"}):B.x.rangeMin,y:a?B.y.apply(P,{position:"start"}):B.y.rangeMin},X={x:i?B.x.apply(l,{position:"end"}):B.x.rangeMax,y:f?B.y.apply(C,{position:"end"}):B.y.rangeMax};return Wc(v,"discard")&&(!B.isInRange(F)||!B.isInRange(X))?null:VD(F,X)},_x=function(e){function t(){return wZ(this,t),AZ(this,t,arguments)}return EZ(t,e),TZ(t,[{key:"render",value:function(){var a=this.props,f=a.x1,v=a.x2,m=a.y1,l=a.y2,P=a.className,C=a.alwaysShow,z=a.clipPathId;Gu(C===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var O=la(f),B=la(v),F=la(m),X=la(l),Z=this.props.shape;if(!O&&!B&&!F&&!X&&!Z)return null;var U=jZ(O,B,F,X,this.props);if(!U&&!Z)return null;var re=Wc(this.props,"hidden")?"url(#".concat(z,")"):void 0;return $e.createElement(Oi,{className:sn("recharts-reference-area",P)},t.renderRect(Z,TO(TO({clipPath:re},en(this.props,!0)),U)),ao.renderCallByParent(this.props,U))}}])}($e.Component);vx(_x,"displayName","ReferenceArea");vx(_x,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});vx(_x,"renderRect",function(e,t){var i;return $e.isValidElement(e)?i=$e.cloneElement(e,t):Lr(e)?i=e(t):i=$e.createElement(_T,lS({},t,{className:"recharts-reference-area-rect"})),i});function az(e,t,i){if(t<1)return[];if(t===1&&i===void 0)return e;for(var a=[],f=0;f<e.length;f+=t)a.push(e[f]);return a}function OZ(e,t,i){var a={width:e.width+t.width,height:e.height+t.height};return NG(a,i)}function kZ(e,t,i){var a=i==="width",f=e.x,v=e.y,m=e.width,l=e.height;return t===1?{start:a?f:v,end:a?f+m:v+l}:{start:a?f+m:v+l,end:a?f:v}}function R_(e,t,i,a,f){if(e*t<e*a||e*t>e*f)return!1;var v=i();return e*(t-e*v/2-a)>=0&&e*(t+e*v/2-f)<=0}function IZ(e,t){return az(e,t+1)}function DZ(e,t,i,a,f){for(var v=(a||[]).slice(),m=t.start,l=t.end,P=0,C=1,z=m,O=function(){var X=a==null?void 0:a[P];if(X===void 0)return{v:az(a,C)};var Z=P,U,re=function(){return U===void 0&&(U=i(X,Z)),U},se=X.coordinate,ne=P===0||R_(e,se,re,z,l);ne||(P=0,z=m,C+=1),ne&&(z=se+e*(re()/2+f),P+=C)},B;C<=v.length;)if(B=O(),B)return B.v;return[]}function Py(e){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Py(e)}function AO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function io(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(i),!0).forEach(function(a){zZ(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):AO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function zZ(e,t,i){return t=NZ(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function NZ(e){var t=RZ(e,"string");return Py(t)=="symbol"?t:t+""}function RZ(e,t){if(Py(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Py(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LZ(e,t,i,a,f){for(var v=(a||[]).slice(),m=v.length,l=t.start,P=t.end,C=function(B){var F=v[B],X,Z=function(){return X===void 0&&(X=i(F,B)),X};if(B===m-1){var U=e*(F.coordinate+e*Z()/2-P);v[B]=F=io(io({},F),{},{tickCoord:U>0?F.coordinate-U*e:F.coordinate})}else v[B]=F=io(io({},F),{},{tickCoord:F.coordinate});var re=R_(e,F.tickCoord,Z,l,P);re&&(P=F.tickCoord-e*(Z()/2+f),v[B]=io(io({},F),{},{isShow:!0}))},z=m-1;z>=0;z--)C(z);return v}function BZ(e,t,i,a,f,v){var m=(a||[]).slice(),l=m.length,P=t.start,C=t.end;if(v){var z=a[l-1],O=i(z,l-1),B=e*(z.coordinate+e*O/2-C);m[l-1]=z=io(io({},z),{},{tickCoord:B>0?z.coordinate-B*e:z.coordinate});var F=R_(e,z.tickCoord,function(){return O},P,C);F&&(C=z.tickCoord-e*(O/2+f),m[l-1]=io(io({},z),{},{isShow:!0}))}for(var X=v?l-1:l,Z=function(se){var ne=m[se],ue,J=function(){return ue===void 0&&(ue=i(ne,se)),ue};if(se===0){var ae=e*(ne.coordinate-e*J()/2-P);m[se]=ne=io(io({},ne),{},{tickCoord:ae<0?ne.coordinate-ae*e:ne.coordinate})}else m[se]=ne=io(io({},ne),{},{tickCoord:ne.coordinate});var he=R_(e,ne.tickCoord,J,P,C);he&&(P=ne.tickCoord+e*(J()/2+f),m[se]=io(io({},ne),{},{isShow:!0}))},U=0;U<X;U++)Z(U);return m}function ET(e,t,i){var a=e.tick,f=e.ticks,v=e.viewBox,m=e.minTickGap,l=e.orientation,P=e.interval,C=e.tickFormatter,z=e.unit,O=e.angle;if(!f||!f.length||!a)return[];if(zt(P)||Tm.isSsr)return IZ(f,typeof P=="number"&&zt(P)?P:0);var B=[],F=l==="top"||l==="bottom"?"width":"height",X=z&&F==="width"?qg(z,{fontSize:t,letterSpacing:i}):{width:0,height:0},Z=function(ne,ue){var J=Lr(C)?C(ne.value,ue):ne.value;return F==="width"?OZ(qg(J,{fontSize:t,letterSpacing:i}),X,O):qg(J,{fontSize:t,letterSpacing:i})[F]},U=f.length>=2?oc(f[1].coordinate-f[0].coordinate):1,re=kZ(v,U,F);return P==="equidistantPreserveStart"?DZ(U,re,Z,f,m):(P==="preserveStart"||P==="preserveStartEnd"?B=BZ(U,re,Z,f,m,P==="preserveStartEnd"):B=LZ(U,re,Z,f,m),B.filter(function(se){return se.isShow}))}var FZ=["viewBox"],$Z=["viewBox"],qZ=["ticks"];function dm(e){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(e)}function Gp(){return Gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Gp.apply(this,arguments)}function MO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function To(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?MO(Object(i),!0).forEach(function(a){CT(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):MO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Vw(e,t){if(e==null)return{};var i=UZ(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function UZ(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function VZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PO(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,sz(a.key),a)}}function GZ(e,t,i){return t&&PO(e.prototype,t),i&&PO(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZZ(e,t,i){return t=L_(t),HZ(e,oz()?Reflect.construct(t,i||[],L_(e).constructor):t.apply(e,i))}function HZ(e,t){if(t&&(dm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XZ(e)}function XZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oz=function(){return!!e})()}function L_(e){return L_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},L_(e)}function WZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uS(e,t)}function uS(e,t){return uS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},uS(e,t)}function CT(e,t,i){return t=sz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function sz(e){var t=YZ(e,"string");return dm(t)=="symbol"?t:t+""}function YZ(e,t){if(dm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(dm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Em=function(e){function t(i){var a;return VZ(this,t),a=ZZ(this,t,[i]),a.state={fontSize:"",letterSpacing:""},a}return WZ(t,e),GZ(t,[{key:"shouldComponentUpdate",value:function(a,f){var v=a.viewBox,m=Vw(a,FZ),l=this.props,P=l.viewBox,C=Vw(l,$Z);return!Hp(v,P)||!Hp(m,C)||!Hp(f,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var f=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];f&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var f=this.props,v=f.x,m=f.y,l=f.width,P=f.height,C=f.orientation,z=f.tickSize,O=f.mirror,B=f.tickMargin,F,X,Z,U,re,se,ne=O?-1:1,ue=a.tickSize||z,J=zt(a.tickCoord)?a.tickCoord:a.coordinate;switch(C){case"top":F=X=a.coordinate,U=m+ +!O*P,Z=U-ne*ue,se=Z-ne*B,re=J;break;case"left":Z=U=a.coordinate,X=v+ +!O*l,F=X-ne*ue,re=F-ne*B,se=J;break;case"right":Z=U=a.coordinate,X=v+ +O*l,F=X+ne*ue,re=F+ne*B,se=J;break;default:F=X=a.coordinate,U=m+ +O*P,Z=U+ne*ue,se=Z+ne*B,re=J;break}return{line:{x1:F,y1:Z,x2:X,y2:U},tick:{x:re,y:se}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,f=a.orientation,v=a.mirror,m;switch(f){case"left":m=v?"start":"end";break;case"right":m=v?"end":"start";break;default:m="middle";break}return m}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,f=a.orientation,v=a.mirror,m="end";switch(f){case"left":case"right":m="middle";break;case"top":m=v?"start":"end";break;default:m=v?"end":"start";break}return m}},{key:"renderAxisLine",value:function(){var a=this.props,f=a.x,v=a.y,m=a.width,l=a.height,P=a.orientation,C=a.mirror,z=a.axisLine,O=To(To(To({},en(this.props,!1)),en(z,!1)),{},{fill:"none"});if(P==="top"||P==="bottom"){var B=+(P==="top"&&!C||P==="bottom"&&C);O=To(To({},O),{},{x1:f,y1:v+B*l,x2:f+m,y2:v+B*l})}else{var F=+(P==="left"&&!C||P==="right"&&C);O=To(To({},O),{},{x1:f+F*m,y1:v,x2:f+F*m,y2:v+l})}return $e.createElement("line",Gp({},O,{className:sn("recharts-cartesian-axis-line",al(z,"className"))}))}},{key:"renderTicks",value:function(a,f,v){var m=this,l=this.props,P=l.tickLine,C=l.stroke,z=l.tick,O=l.tickFormatter,B=l.unit,F=ET(To(To({},this.props),{},{ticks:a}),f,v),X=this.getTickTextAnchor(),Z=this.getTickVerticalAnchor(),U=en(this.props,!1),re=en(z,!1),se=To(To({},U),{},{fill:"none"},en(P,!1)),ne=F.map(function(ue,J){var ae=m.getTickLineCoord(ue),he=ae.line,ve=ae.tick,Ie=To(To(To(To({textAnchor:X,verticalAnchor:Z},U),{},{stroke:"none",fill:C},re),ve),{},{index:J,payload:ue,visibleTicksCount:F.length,tickFormatter:O});return $e.createElement(Oi,Gp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ue.value,"-").concat(ue.coordinate,"-").concat(ue.tickCoord)},Wv(m.props,ue,J)),P&&$e.createElement("line",Gp({},se,he,{className:sn("recharts-cartesian-axis-tick-line",al(P,"className"))})),z&&t.renderTickItem(z,Ie,"".concat(Lr(O)?O(ue.value,J):ue.value).concat(B||"")))});return $e.createElement("g",{className:"recharts-cartesian-axis-ticks"},ne)}},{key:"render",value:function(){var a=this,f=this.props,v=f.axisLine,m=f.width,l=f.height,P=f.ticksGenerator,C=f.className,z=f.hide;if(z)return null;var O=this.props,B=O.ticks,F=Vw(O,qZ),X=B;return Lr(P)&&(X=B&&B.length>0?P(this.props):P(F)),m<=0||l<=0||!X||!X.length?null:$e.createElement(Oi,{className:sn("recharts-cartesian-axis",C),ref:function(U){a.layerReference=U}},v&&this.renderAxisLine(),this.renderTicks(X,this.state.fontSize,this.state.letterSpacing),ao.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,f,v){var m;return $e.isValidElement(a)?m=$e.cloneElement(a,f):Lr(a)?m=a(f):m=$e.createElement(o_,Gp({},f,{className:"recharts-cartesian-axis-tick-value"}),v),m}}])}(ft.Component);CT(Em,"displayName","CartesianAxis");CT(Em,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var KZ=["x1","y1","x2","y2","key"],QZ=["offset"];function jf(e){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jf(e)}function EO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function oo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?EO(Object(i),!0).forEach(function(a){JZ(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):EO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function JZ(e,t,i){return t=eH(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function eH(e){var t=tH(e,"string");return jf(t)=="symbol"?t:t+""}function tH(e,t){if(jf(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(jf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xf(){return xf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},xf.apply(this,arguments)}function CO(e,t){if(e==null)return{};var i=rH(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function rH(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var nH=function(t){var i=t.fill;if(!i||i==="none")return null;var a=t.fillOpacity,f=t.x,v=t.y,m=t.width,l=t.height,P=t.ry;return $e.createElement("rect",{x:f,y:v,ry:P,width:m,height:l,stroke:"none",fill:i,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function lz(e,t){var i;if($e.isValidElement(e))i=$e.cloneElement(e,t);else if(Lr(e))i=e(t);else{var a=t.x1,f=t.y1,v=t.x2,m=t.y2,l=t.key,P=CO(t,KZ),C=en(P,!1);C.offset;var z=CO(C,QZ);i=$e.createElement("line",xf({},z,{x1:a,y1:f,x2:v,y2:m,fill:"none",key:l}))}return i}function iH(e){var t=e.x,i=e.width,a=e.horizontal,f=a===void 0?!0:a,v=e.horizontalPoints;if(!f||!v||!v.length)return null;var m=v.map(function(l,P){var C=oo(oo({},e),{},{x1:t,y1:l,x2:t+i,y2:l,key:"line-".concat(P),index:P});return lz(f,C)});return $e.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function aH(e){var t=e.y,i=e.height,a=e.vertical,f=a===void 0?!0:a,v=e.verticalPoints;if(!f||!v||!v.length)return null;var m=v.map(function(l,P){var C=oo(oo({},e),{},{x1:l,y1:t,x2:l,y2:t+i,key:"line-".concat(P),index:P});return lz(f,C)});return $e.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function oH(e){var t=e.horizontalFill,i=e.fillOpacity,a=e.x,f=e.y,v=e.width,m=e.height,l=e.horizontalPoints,P=e.horizontal,C=P===void 0?!0:P;if(!C||!t||!t.length)return null;var z=l.map(function(B){return Math.round(B+f-f)}).sort(function(B,F){return B-F});f!==z[0]&&z.unshift(0);var O=z.map(function(B,F){var X=!z[F+1],Z=X?f+m-B:z[F+1]-B;if(Z<=0)return null;var U=F%t.length;return $e.createElement("rect",{key:"react-".concat(F),y:B,x:a,height:Z,width:v,stroke:"none",fill:t[U],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return $e.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},O)}function sH(e){var t=e.vertical,i=t===void 0?!0:t,a=e.verticalFill,f=e.fillOpacity,v=e.x,m=e.y,l=e.width,P=e.height,C=e.verticalPoints;if(!i||!a||!a.length)return null;var z=C.map(function(B){return Math.round(B+v-v)}).sort(function(B,F){return B-F});v!==z[0]&&z.unshift(0);var O=z.map(function(B,F){var X=!z[F+1],Z=X?v+l-B:z[F+1]-B;if(Z<=0)return null;var U=F%a.length;return $e.createElement("rect",{key:"react-".concat(F),x:B,y:m,width:Z,height:P,stroke:"none",fill:a[U],fillOpacity:f,className:"recharts-cartesian-grid-bg"})});return $e.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},O)}var lH=function(t,i){var a=t.xAxis,f=t.width,v=t.height,m=t.offset;return wD(ET(oo(oo(oo({},Em.defaultProps),a),{},{ticks:qu(a,!0),viewBox:{x:0,y:0,width:f,height:v}})),m.left,m.left+m.width,i)},cH=function(t,i){var a=t.yAxis,f=t.width,v=t.height,m=t.offset;return wD(ET(oo(oo(oo({},Em.defaultProps),a),{},{ticks:qu(a,!0),viewBox:{x:0,y:0,width:f,height:v}})),m.top,m.top+m.height,i)},$p={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function cz(e){var t,i,a,f,v,m,l=TT(),P=AT(),C=YG(),z=oo(oo({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:$p.stroke,fill:(i=e.fill)!==null&&i!==void 0?i:$p.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:$p.horizontal,horizontalFill:(f=e.horizontalFill)!==null&&f!==void 0?f:$p.horizontalFill,vertical:(v=e.vertical)!==null&&v!==void 0?v:$p.vertical,verticalFill:(m=e.verticalFill)!==null&&m!==void 0?m:$p.verticalFill,x:zt(e.x)?e.x:C.left,y:zt(e.y)?e.y:C.top,width:zt(e.width)?e.width:C.width,height:zt(e.height)?e.height:C.height}),O=z.x,B=z.y,F=z.width,X=z.height,Z=z.syncWithTicks,U=z.horizontalValues,re=z.verticalValues,se=HG(),ne=XG();if(!zt(F)||F<=0||!zt(X)||X<=0||!zt(O)||O!==+O||!zt(B)||B!==+B)return null;var ue=z.verticalCoordinatesGenerator||lH,J=z.horizontalCoordinatesGenerator||cH,ae=z.horizontalPoints,he=z.verticalPoints;if((!ae||!ae.length)&&Lr(J)){var ve=U&&U.length,Ie=J({yAxis:ne?oo(oo({},ne),{},{ticks:ve?U:ne.ticks}):void 0,width:l,height:P,offset:C},ve?!0:Z);Gu(Array.isArray(Ie),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(jf(Ie),"]")),Array.isArray(Ie)&&(ae=Ie)}if((!he||!he.length)&&Lr(ue)){var at=re&&re.length,De=ue({xAxis:se?oo(oo({},se),{},{ticks:at?re:se.ticks}):void 0,width:l,height:P,offset:C},at?!0:Z);Gu(Array.isArray(De),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(jf(De),"]")),Array.isArray(De)&&(he=De)}return $e.createElement("g",{className:"recharts-cartesian-grid"},$e.createElement(nH,{fill:z.fill,fillOpacity:z.fillOpacity,x:z.x,y:z.y,width:z.width,height:z.height,ry:z.ry}),$e.createElement(iH,xf({},z,{offset:C,horizontalPoints:ae,xAxis:se,yAxis:ne})),$e.createElement(aH,xf({},z,{offset:C,verticalPoints:he,xAxis:se,yAxis:ne})),$e.createElement(oH,xf({},z,{horizontalPoints:ae})),$e.createElement(sH,xf({},z,{verticalPoints:he})))}cz.displayName="CartesianGrid";var uH=["type","layout","connectNulls","ref"],hH=["key"];function fm(e){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fm(e)}function jO(e,t){if(e==null)return{};var i=dH(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function dH(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function Zg(){return Zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Zg.apply(this,arguments)}function OO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function _s(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?OO(Object(i),!0).forEach(function(a){nc(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):OO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function qp(e){return gH(e)||mH(e)||pH(e)||fH()}function fH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pH(e,t){if(e){if(typeof e=="string")return hS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return hS(e,t)}}function mH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gH(e){if(Array.isArray(e))return hS(e)}function hS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function yH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kO(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,hz(a.key),a)}}function vH(e,t,i){return t&&kO(e.prototype,t),i&&kO(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _H(e,t,i){return t=B_(t),xH(e,uz()?Reflect.construct(t,i||[],B_(e).constructor):t.apply(e,i))}function xH(e,t){if(t&&(fm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bH(e)}function bH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uz=function(){return!!e})()}function B_(e){return B_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},B_(e)}function wH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dS(e,t)}function dS(e,t){return dS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},dS(e,t)}function nc(e,t,i){return t=hz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function hz(e){var t=SH(e,"string");return fm(t)=="symbol"?t:t+""}function SH(e,t){if(fm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(fm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pm=function(e){function t(){var i;yH(this,t);for(var a=arguments.length,f=new Array(a),v=0;v<a;v++)f[v]=arguments[v];return i=_H(this,t,[].concat(f)),nc(i,"state",{isAnimationFinished:!0,totalLength:0}),nc(i,"generateSimpleStrokeDasharray",function(m,l){return"".concat(l,"px ").concat(m-l,"px")}),nc(i,"getStrokeDasharray",function(m,l,P){var C=P.reduce(function(re,se){return re+se});if(!C)return i.generateSimpleStrokeDasharray(l,m);for(var z=Math.floor(m/C),O=m%C,B=l-m,F=[],X=0,Z=0;X<P.length;Z+=P[X],++X)if(Z+P[X]>O){F=[].concat(qp(P.slice(0,X)),[O-Z]);break}var U=F.length%2===0?[0,B]:[B];return[].concat(qp(t.repeat(P,z)),qp(F),U).map(function(re){return"".concat(re,"px")}).join(", ")}),nc(i,"id",Dy("recharts-line-")),nc(i,"pathRef",function(m){i.mainCurve=m}),nc(i,"handleAnimationEnd",function(){i.setState({isAnimationFinished:!0}),i.props.onAnimationEnd&&i.props.onAnimationEnd()}),nc(i,"handleAnimationStart",function(){i.setState({isAnimationFinished:!1}),i.props.onAnimationStart&&i.props.onAnimationStart()}),i}return wH(t,e),vH(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,f){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var v=this.props,m=v.points,l=v.xAxis,P=v.yAxis,C=v.layout,z=v.children,O=ol(z,Fy);if(!O)return null;var B=function(Z,U){return{x:Z.x,y:Z.y,value:Z.value,errorVal:Ss(Z.payload,U)}},F={clipPath:a?"url(#clipPath-".concat(f,")"):null};return $e.createElement(Oi,F,O.map(function(X){return $e.cloneElement(X,{key:"bar-".concat(X.props.dataKey),data:m,xAxis:l,yAxis:P,layout:C,dataPointFormatter:B})}))}},{key:"renderDots",value:function(a,f,v){var m=this.props.isAnimationActive;if(m&&!this.state.isAnimationFinished)return null;var l=this.props,P=l.dot,C=l.points,z=l.dataKey,O=en(this.props,!1),B=en(P,!0),F=C.map(function(Z,U){var re=_s(_s(_s({key:"dot-".concat(U),r:3},O),B),{},{index:U,cx:Z.x,cy:Z.y,value:Z.value,dataKey:z,payload:Z.payload,points:C});return t.renderDotItem(P,re)}),X={clipPath:a?"url(#clipPath-".concat(f?"":"dots-").concat(v,")"):null};return $e.createElement(Oi,Zg({className:"recharts-line-dots",key:"dots"},X),F)}},{key:"renderCurveStatically",value:function(a,f,v,m){var l=this.props,P=l.type,C=l.layout,z=l.connectNulls;l.ref;var O=jO(l,uH),B=_s(_s(_s({},en(O,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:f?"url(#clipPath-".concat(v,")"):null,points:a},m),{},{type:P,layout:C,connectNulls:z});return $e.createElement(U2,Zg({},B,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,f){var v=this,m=this.props,l=m.points,P=m.strokeDasharray,C=m.isAnimationActive,z=m.animationBegin,O=m.animationDuration,B=m.animationEasing,F=m.animationId,X=m.animateNewValues,Z=m.width,U=m.height,re=this.state,se=re.prevPoints,ne=re.totalLength;return $e.createElement(Yu,{begin:z,duration:O,isActive:C,easing:B,from:{t:0},to:{t:1},key:"line-".concat(F),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(ue){var J=ue.t;if(se){var ae=se.length/l.length,he=l.map(function(Fe,tt){var ut=Math.floor(tt*ae);if(se[ut]){var rt=se[ut],Pe=ic(rt.x,Fe.x),Ve=ic(rt.y,Fe.y);return _s(_s({},Fe),{},{x:Pe(J),y:Ve(J)})}if(X){var Ge=ic(Z*2,Fe.x),ht=ic(U/2,Fe.y);return _s(_s({},Fe),{},{x:Ge(J),y:ht(J)})}return _s(_s({},Fe),{},{x:Fe.x,y:Fe.y})});return v.renderCurveStatically(he,a,f)}var ve=ic(0,ne),Ie=ve(J),at;if(P){var De="".concat(P).split(/[,\s]+/gim).map(function(Fe){return parseFloat(Fe)});at=v.getStrokeDasharray(Ie,ne,De)}else at=v.generateSimpleStrokeDasharray(ne,Ie);return v.renderCurveStatically(l,a,f,{strokeDasharray:at})})}},{key:"renderCurve",value:function(a,f){var v=this.props,m=v.points,l=v.isAnimationActive,P=this.state,C=P.prevPoints,z=P.totalLength;return l&&m&&m.length&&(!C&&z>0||!ux(C,m))?this.renderCurveWithAnimation(a,f):this.renderCurveStatically(m,a,f)}},{key:"render",value:function(){var a,f=this.props,v=f.hide,m=f.dot,l=f.points,P=f.className,C=f.xAxis,z=f.yAxis,O=f.top,B=f.left,F=f.width,X=f.height,Z=f.isAnimationActive,U=f.id;if(v||!l||!l.length)return null;var re=this.state.isAnimationFinished,se=l.length===1,ne=sn("recharts-line",P),ue=C&&C.allowDataOverflow,J=z&&z.allowDataOverflow,ae=ue||J,he=Wr(U)?this.id:U,ve=(a=en(m,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},Ie=ve.r,at=Ie===void 0?3:Ie,De=ve.strokeWidth,Fe=De===void 0?2:De,tt=F5(m)?m:{},ut=tt.clipDot,rt=ut===void 0?!0:ut,Pe=at*2+Fe;return $e.createElement(Oi,{className:ne},ue||J?$e.createElement("defs",null,$e.createElement("clipPath",{id:"clipPath-".concat(he)},$e.createElement("rect",{x:ue?B:B-F/2,y:J?O:O-X/2,width:ue?F:F*2,height:J?X:X*2})),!rt&&$e.createElement("clipPath",{id:"clipPath-dots-".concat(he)},$e.createElement("rect",{x:B-Pe/2,y:O-Pe/2,width:F+Pe,height:X+Pe}))):null,!se&&this.renderCurve(ae,he),this.renderErrorBar(ae,he),(se||m)&&this.renderDots(ae,rt,he),(!Z||re)&&ud.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,f){return a.animationId!==f.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:f.curPoints}:a.points!==f.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,f){for(var v=a.length%2!==0?[].concat(qp(a),[0]):a,m=[],l=0;l<f;++l)m=[].concat(qp(m),qp(v));return m}},{key:"renderDotItem",value:function(a,f){var v;if($e.isValidElement(a))v=$e.cloneElement(a,f);else if(Lr(a))v=a(f);else{var m=f.key,l=jO(f,hH),P=sn("recharts-line-dot",typeof a!="boolean"?a.className:"");v=$e.createElement(xT,Zg({key:m},l,{className:P}))}return v}}])}(ft.PureComponent);nc(pm,"displayName","Line");nc(pm,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Tm.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});nc(pm,"getComposedData",function(e){var t=e.props,i=e.xAxis,a=e.yAxis,f=e.xAxisTicks,v=e.yAxisTicks,m=e.dataKey,l=e.bandSize,P=e.displayedData,C=e.offset,z=t.layout,O=P.map(function(B,F){var X=Ss(B,m);return z==="horizontal"?{x:ZC({axis:i,ticks:f,bandSize:l,entry:B,index:F}),y:Wr(X)?null:a.scale(X),value:X,payload:B}:{x:Wr(X)?null:i.scale(X),y:ZC({axis:a,ticks:v,bandSize:l,entry:B,index:F}),value:X,payload:B}});return _s({points:O,layout:z},C)});function mm(e){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mm(e)}function TH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AH(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,pz(a.key),a)}}function MH(e,t,i){return t&&AH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function PH(e,t,i){return t=F_(t),EH(e,dz()?Reflect.construct(t,i||[],F_(e).constructor):t.apply(e,i))}function EH(e,t){if(t&&(mm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CH(e)}function CH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dz=function(){return!!e})()}function F_(e){return F_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},F_(e)}function jH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fS(e,t)}function fS(e,t){return fS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},fS(e,t)}function fz(e,t,i){return t=pz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function pz(e){var t=OH(e,"string");return mm(t)=="symbol"?t:t+""}function OH(e,t){if(mm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(mm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function pS(){return pS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},pS.apply(this,arguments)}function kH(e){var t=e.xAxisId,i=TT(),a=AT(),f=KD(t);return f==null?null:$e.createElement(Em,pS({},f,{className:sn("recharts-".concat(f.axisType," ").concat(f.axisType),f.className),viewBox:{x:0,y:0,width:i,height:a},ticksGenerator:function(m){return qu(m,!0)}}))}var xx=function(e){function t(){return TH(this,t),PH(this,t,arguments)}return jH(t,e),MH(t,[{key:"render",value:function(){return $e.createElement(kH,this.props)}}])}($e.Component);fz(xx,"displayName","XAxis");fz(xx,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function gm(e){"@babel/helpers - typeof";return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gm(e)}function IH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DH(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,yz(a.key),a)}}function zH(e,t,i){return t&&DH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NH(e,t,i){return t=$_(t),RH(e,mz()?Reflect.construct(t,i||[],$_(e).constructor):t.apply(e,i))}function RH(e,t){if(t&&(gm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LH(e)}function LH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mz=function(){return!!e})()}function $_(e){return $_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},$_(e)}function BH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mS(e,t)}function mS(e,t){return mS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},mS(e,t)}function gz(e,t,i){return t=yz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yz(e){var t=FH(e,"string");return gm(t)=="symbol"?t:t+""}function FH(e,t){if(gm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(gm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function gS(){return gS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},gS.apply(this,arguments)}var $H=function(t){var i=t.yAxisId,a=TT(),f=AT(),v=QD(i);return v==null?null:$e.createElement(Em,gS({},v,{className:sn("recharts-".concat(v.axisType," ").concat(v.axisType),v.className),viewBox:{x:0,y:0,width:a,height:f},ticksGenerator:function(l){return qu(l,!0)}}))},Ey=function(e){function t(){return IH(this,t),NH(this,t,arguments)}return BH(t,e),zH(t,[{key:"render",value:function(){return $e.createElement($H,this.props)}}])}($e.Component);gz(Ey,"displayName","YAxis");gz(Ey,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function IO(e){return GH(e)||VH(e)||UH(e)||qH()}function qH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UH(e,t){if(e){if(typeof e=="string")return yS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return yS(e,t)}}function VH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function GH(e){if(Array.isArray(e))return yS(e)}function yS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var vS=function(t,i,a,f,v){var m=ol(t,PT),l=ol(t,yx),P=[].concat(IO(m),IO(l)),C=ol(t,_x),z="".concat(f,"Id"),O=f[0],B=i;if(P.length&&(B=P.reduce(function(Z,U){if(U.props[z]===a&&Wc(U.props,"extendDomain")&&zt(U.props[O])){var re=U.props[O];return[Math.min(Z[0],re),Math.max(Z[1],re)]}return Z},B)),C.length){var F="".concat(O,"1"),X="".concat(O,"2");B=C.reduce(function(Z,U){if(U.props[z]===a&&Wc(U.props,"extendDomain")&&zt(U.props[F])&&zt(U.props[X])){var re=U.props[F],se=U.props[X];return[Math.min(Z[0],re,se),Math.max(Z[1],re,se)]}return Z},B)}return v&&v.length&&(B=v.reduce(function(Z,U){return zt(U)?[Math.min(Z[0],U),Math.max(Z[1],U)]:Z},B)),B},Gw={exports:{}},DO;function ZH(){return DO||(DO=1,function(e){var t=Object.prototype.hasOwnProperty,i="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(i=!1));function f(P,C,z){this.fn=P,this.context=C,this.once=z||!1}function v(P,C,z,O,B){if(typeof z!="function")throw new TypeError("The listener must be a function");var F=new f(z,O||P,B),X=i?i+C:C;return P._events[X]?P._events[X].fn?P._events[X]=[P._events[X],F]:P._events[X].push(F):(P._events[X]=F,P._eventsCount++),P}function m(P,C){--P._eventsCount===0?P._events=new a:delete P._events[C]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var C=[],z,O;if(this._eventsCount===0)return C;for(O in z=this._events)t.call(z,O)&&C.push(i?O.slice(1):O);return Object.getOwnPropertySymbols?C.concat(Object.getOwnPropertySymbols(z)):C},l.prototype.listeners=function(C){var z=i?i+C:C,O=this._events[z];if(!O)return[];if(O.fn)return[O.fn];for(var B=0,F=O.length,X=new Array(F);B<F;B++)X[B]=O[B].fn;return X},l.prototype.listenerCount=function(C){var z=i?i+C:C,O=this._events[z];return O?O.fn?1:O.length:0},l.prototype.emit=function(C,z,O,B,F,X){var Z=i?i+C:C;if(!this._events[Z])return!1;var U=this._events[Z],re=arguments.length,se,ne;if(U.fn){switch(U.once&&this.removeListener(C,U.fn,void 0,!0),re){case 1:return U.fn.call(U.context),!0;case 2:return U.fn.call(U.context,z),!0;case 3:return U.fn.call(U.context,z,O),!0;case 4:return U.fn.call(U.context,z,O,B),!0;case 5:return U.fn.call(U.context,z,O,B,F),!0;case 6:return U.fn.call(U.context,z,O,B,F,X),!0}for(ne=1,se=new Array(re-1);ne<re;ne++)se[ne-1]=arguments[ne];U.fn.apply(U.context,se)}else{var ue=U.length,J;for(ne=0;ne<ue;ne++)switch(U[ne].once&&this.removeListener(C,U[ne].fn,void 0,!0),re){case 1:U[ne].fn.call(U[ne].context);break;case 2:U[ne].fn.call(U[ne].context,z);break;case 3:U[ne].fn.call(U[ne].context,z,O);break;case 4:U[ne].fn.call(U[ne].context,z,O,B);break;default:if(!se)for(J=1,se=new Array(re-1);J<re;J++)se[J-1]=arguments[J];U[ne].fn.apply(U[ne].context,se)}}return!0},l.prototype.on=function(C,z,O){return v(this,C,z,O,!1)},l.prototype.once=function(C,z,O){return v(this,C,z,O,!0)},l.prototype.removeListener=function(C,z,O,B){var F=i?i+C:C;if(!this._events[F])return this;if(!z)return m(this,F),this;var X=this._events[F];if(X.fn)X.fn===z&&(!B||X.once)&&(!O||X.context===O)&&m(this,F);else{for(var Z=0,U=[],re=X.length;Z<re;Z++)(X[Z].fn!==z||B&&!X[Z].once||O&&X[Z].context!==O)&&U.push(X[Z]);U.length?this._events[F]=U.length===1?U[0]:U:m(this,F)}return this},l.prototype.removeAllListeners=function(C){var z;return C?(z=i?i+C:C,this._events[z]&&m(this,z)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l}(Gw)),Gw.exports}var HH=ZH();const XH=Bn(HH);var Zw=new XH,Hw="recharts.syncMouseEvents";function Cy(e){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cy(e)}function WH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YH(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,vz(a.key),a)}}function KH(e,t,i){return t&&YH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xw(e,t,i){return t=vz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function vz(e){var t=QH(e,"string");return Cy(t)=="symbol"?t:t+""}function QH(e,t){if(Cy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Cy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var JH=function(){function e(){WH(this,e),Xw(this,"activeIndex",0),Xw(this,"coordinateList",[]),Xw(this,"layout","horizontal")}return KH(e,[{key:"setDetails",value:function(i){var a,f=i.coordinateList,v=f===void 0?null:f,m=i.container,l=m===void 0?null:m,P=i.layout,C=P===void 0?null:P,z=i.offset,O=z===void 0?null:z,B=i.mouseHandlerCallback,F=B===void 0?null:B;this.coordinateList=(a=v??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=C??this.layout,this.offset=O??this.offset,this.mouseHandlerCallback=F??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(i){if(this.coordinateList.length!==0)switch(i.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(i){this.activeIndex=i}},{key:"spoofMouse",value:function(){var i,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var f=this.container.getBoundingClientRect(),v=f.x,m=f.y,l=f.height,P=this.coordinateList[this.activeIndex].coordinate,C=((i=window)===null||i===void 0?void 0:i.scrollX)||0,z=((a=window)===null||a===void 0?void 0:a.scrollY)||0,O=v+P+C,B=m+this.offset.top+l/2+z;this.mouseHandlerCallback({pageX:O,pageY:B})}}}])}();function eX(e,t,i){if(i==="number"&&t===!0&&Array.isArray(e)){var a=e==null?void 0:e[0],f=e==null?void 0:e[1];if(a&&f&&zt(a)&&zt(f))return!0}return!1}function tX(e,t,i,a){var f=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-f:i.left+.5,y:e==="horizontal"?i.top+.5:t.y-f,width:e==="horizontal"?a:i.width-1,height:e==="horizontal"?i.height-1:a}}function _z(e){var t=e.cx,i=e.cy,a=e.radius,f=e.startAngle,v=e.endAngle,m=La(t,i,a,f),l=La(t,i,a,v);return{points:[m,l],cx:t,cy:i,radius:a,startAngle:f,endAngle:v}}function rX(e,t,i){var a,f,v,m;if(e==="horizontal")a=t.x,v=a,f=i.top,m=i.top+i.height;else if(e==="vertical")f=t.y,m=f,a=i.left,v=i.left+i.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,P=t.cy,C=t.innerRadius,z=t.outerRadius,O=t.angle,B=La(l,P,C,O),F=La(l,P,z,O);a=B.x,f=B.y,v=F.x,m=F.y}else return _z(t);return[{x:a,y:f},{x:v,y:m}]}function jy(e){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jy(e)}function zO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function qv(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(i),!0).forEach(function(a){nX(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):zO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function nX(e,t,i){return t=iX(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function iX(e){var t=aX(e,"string");return jy(t)=="symbol"?t:t+""}function aX(e,t){if(jy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(jy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oX(e){var t,i,a=e.element,f=e.tooltipEventType,v=e.isActive,m=e.activeCoordinate,l=e.activePayload,P=e.offset,C=e.activeTooltipIndex,z=e.tooltipAxisBandSize,O=e.layout,B=e.chartName,F=(t=a.props.cursor)!==null&&t!==void 0?t:(i=a.type.defaultProps)===null||i===void 0?void 0:i.cursor;if(!a||!F||!v||!m||B!=="ScatterChart"&&f!=="axis")return null;var X,Z=U2;if(B==="ScatterChart")X=m,Z=n7;else if(B==="BarChart")X=tX(O,m,P,z),Z=_T;else if(O==="radial"){var U=_z(m),re=U.cx,se=U.cy,ne=U.radius,ue=U.startAngle,J=U.endAngle;X={cx:re,cy:se,startAngle:ue,endAngle:J,innerRadius:ne,outerRadius:ne},Z=PD}else X={points:rX(O,m,P)},Z=U2;var ae=qv(qv(qv(qv({stroke:"#ccc",pointerEvents:"none"},P),X),en(F,!1)),{},{payload:l,payloadIndex:C,className:sn("recharts-tooltip-cursor",F.className)});return ft.isValidElement(F)?ft.cloneElement(F,ae):ft.createElement(Z,ae)}var sX=["item"],lX=["children","className","width","height","style","compact","title","desc"];function ym(e){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ym(e)}function Zp(){return Zp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Zp.apply(this,arguments)}function NO(e,t){return hX(e)||uX(e,t)||bz(e,t)||cX()}function cX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uX(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,v,m,l=[],P=!0,C=!1;try{if(v=(i=i.call(e)).next,t!==0)for(;!(P=(a=v.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(z){C=!0,f=z}finally{try{if(!P&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return l}}function hX(e){if(Array.isArray(e))return e}function RO(e,t){if(e==null)return{};var i=dX(e,t),a,f;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(f=0;f<v.length;f++)a=v[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function dX(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function fX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pX(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,wz(a.key),a)}}function mX(e,t,i){return t&&pX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gX(e,t,i){return t=q_(t),yX(e,xz()?Reflect.construct(t,i||[],q_(e).constructor):t.apply(e,i))}function yX(e,t){if(t&&(ym(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vX(e)}function vX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xz=function(){return!!e})()}function q_(e){return q_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},q_(e)}function _X(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_S(e,t)}function _S(e,t){return _S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},_S(e,t)}function vm(e){return wX(e)||bX(e)||bz(e)||xX()}function xX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bz(e,t){if(e){if(typeof e=="string")return xS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xS(e,t)}}function bX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wX(e){if(Array.isArray(e))return xS(e)}function xS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function LO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function vt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(i),!0).forEach(function(a){gr(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):LO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function gr(e,t,i){return t=wz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function wz(e){var t=SX(e,"string");return ym(t)=="symbol"?t:t+""}function SX(e,t){if(ym(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(ym(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TX={xAxis:["bottom","top"],yAxis:["left","right"]},AX={width:"100%",height:"100%"},Sz={x:0,y:0};function Uv(e){return e}var MX=function(t,i){return i==="horizontal"?t.x:i==="vertical"?t.y:i==="centric"?t.angle:t.radius},PX=function(t,i,a,f){var v=i.find(function(z){return z&&z.index===a});if(v){if(t==="horizontal")return{x:v.coordinate,y:f.y};if(t==="vertical")return{x:f.x,y:v.coordinate};if(t==="centric"){var m=v.coordinate,l=f.radius;return vt(vt(vt({},f),La(f.cx,f.cy,l,m)),{},{angle:m,radius:l})}var P=v.coordinate,C=f.angle;return vt(vt(vt({},f),La(f.cx,f.cy,P,C)),{},{angle:C,radius:P})}return Sz},bx=function(t,i){var a=i.graphicalItems,f=i.dataStartIndex,v=i.dataEndIndex,m=(a??[]).reduce(function(l,P){var C=P.props.data;return C&&C.length?[].concat(vm(l),vm(C)):l},[]);return m.length>0?m:t&&t.length&&zt(f)&&zt(v)?t.slice(f,v+1):[]};function Tz(e){return e==="number"?[0,"auto"]:void 0}var bS=function(t,i,a,f){var v=t.graphicalItems,m=t.tooltipAxis,l=bx(i,t);return a<0||!v||!v.length||a>=l.length?null:v.reduce(function(P,C){var z,O=(z=C.props.data)!==null&&z!==void 0?z:i;O&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(O=O.slice(t.dataStartIndex,t.dataEndIndex+1));var B;if(m.dataKey&&!m.allowDuplicatedCategory){var F=O===void 0?l:O;B=Hv(F,m.dataKey,f)}else B=O&&O[a]||l[a];return B?[].concat(vm(P),[TD(C,B)]):P},[])},BO=function(t,i,a,f){var v=f||{x:t.chartX,y:t.chartY},m=MX(v,a),l=t.orderedTooltipTicks,P=t.tooltipAxis,C=t.tooltipTicks,z=Fq(m,l,C,P);if(z>=0&&C){var O=C[z]&&C[z].value,B=bS(t,i,z,O),F=PX(a,l,z,v);return{activeTooltipIndex:z,activeLabel:O,activePayload:B,activeCoordinate:F}}return null},EX=function(t,i){var a=i.axes,f=i.graphicalItems,v=i.axisType,m=i.axisIdKey,l=i.stackGroups,P=i.dataStartIndex,C=i.dataEndIndex,z=t.layout,O=t.children,B=t.stackOffset,F=bD(z,v);return a.reduce(function(X,Z){var U,re=Z.type.defaultProps!==void 0?vt(vt({},Z.type.defaultProps),Z.props):Z.props,se=re.type,ne=re.dataKey,ue=re.allowDataOverflow,J=re.allowDuplicatedCategory,ae=re.scale,he=re.ticks,ve=re.includeHidden,Ie=re[m];if(X[Ie])return X;var at=bx(t.data,{graphicalItems:f.filter(function(ot){var st,Pt=m in ot.props?ot.props[m]:(st=ot.type.defaultProps)===null||st===void 0?void 0:st[m];return Pt===Ie}),dataStartIndex:P,dataEndIndex:C}),De=at.length,Fe,tt,ut;eX(re.domain,ue,se)&&(Fe=L2(re.domain,null,ue),F&&(se==="number"||ae!=="auto")&&(ut=Vg(at,ne,"category")));var rt=Tz(se);if(!Fe||Fe.length===0){var Pe,Ve=(Pe=re.domain)!==null&&Pe!==void 0?Pe:rt;if(ne){if(Fe=Vg(at,ne,se),se==="category"&&F){var Ge=j5(Fe);J&&Ge?(tt=Fe,Fe=C_(0,De)):J||(Fe=YC(Ve,Fe,Z).reduce(function(ot,st){return ot.indexOf(st)>=0?ot:[].concat(vm(ot),[st])},[]))}else if(se==="category")J?Fe=Fe.filter(function(ot){return ot!==""&&!Wr(ot)}):Fe=YC(Ve,Fe,Z).reduce(function(ot,st){return ot.indexOf(st)>=0||st===""||Wr(st)?ot:[].concat(vm(ot),[st])},[]);else if(se==="number"){var ht=Gq(at,f.filter(function(ot){var st,Pt,Vt=m in ot.props?ot.props[m]:(st=ot.type.defaultProps)===null||st===void 0?void 0:st[m],Nt="hide"in ot.props?ot.props.hide:(Pt=ot.type.defaultProps)===null||Pt===void 0?void 0:Pt.hide;return Vt===Ie&&(ve||!Nt)}),ne,v,z);ht&&(Fe=ht)}F&&(se==="number"||ae!=="auto")&&(ut=Vg(at,ne,"category"))}else F?Fe=C_(0,De):l&&l[Ie]&&l[Ie].hasStack&&se==="number"?Fe=B==="expand"?[0,1]:SD(l[Ie].stackGroups,P,C):Fe=xD(at,f.filter(function(ot){var st=m in ot.props?ot.props[m]:ot.type.defaultProps[m],Pt="hide"in ot.props?ot.props.hide:ot.type.defaultProps.hide;return st===Ie&&(ve||!Pt)}),se,z,!0);if(se==="number")Fe=vS(O,Fe,Ie,v,he),Ve&&(Fe=L2(Ve,Fe,ue));else if(se==="category"&&Ve){var xe=Ve,Xe=Fe.every(function(ot){return xe.indexOf(ot)>=0});Xe&&(Fe=xe)}}return vt(vt({},X),{},gr({},Ie,vt(vt({},re),{},{axisType:v,domain:Fe,categoricalDomain:ut,duplicateDomain:tt,originalDomain:(U=re.domain)!==null&&U!==void 0?U:rt,isCategorical:F,layout:z})))},{})},CX=function(t,i){var a=i.graphicalItems,f=i.Axis,v=i.axisType,m=i.axisIdKey,l=i.stackGroups,P=i.dataStartIndex,C=i.dataEndIndex,z=t.layout,O=t.children,B=bx(t.data,{graphicalItems:a,dataStartIndex:P,dataEndIndex:C}),F=B.length,X=bD(z,v),Z=-1;return a.reduce(function(U,re){var se=re.type.defaultProps!==void 0?vt(vt({},re.type.defaultProps),re.props):re.props,ne=se[m],ue=Tz("number");if(!U[ne]){Z++;var J;return X?J=C_(0,F):l&&l[ne]&&l[ne].hasStack?(J=SD(l[ne].stackGroups,P,C),J=vS(O,J,ne,v)):(J=L2(ue,xD(B,a.filter(function(ae){var he,ve,Ie=m in ae.props?ae.props[m]:(he=ae.type.defaultProps)===null||he===void 0?void 0:he[m],at="hide"in ae.props?ae.props.hide:(ve=ae.type.defaultProps)===null||ve===void 0?void 0:ve.hide;return Ie===ne&&!at}),"number",z),f.defaultProps.allowDataOverflow),J=vS(O,J,ne,v)),vt(vt({},U),{},gr({},ne,vt(vt({axisType:v},f.defaultProps),{},{hide:!0,orientation:al(TX,"".concat(v,".").concat(Z%2),null),domain:J,originalDomain:ue,isCategorical:X,layout:z})))}return U},{})},jX=function(t,i){var a=i.axisType,f=a===void 0?"xAxis":a,v=i.AxisComp,m=i.graphicalItems,l=i.stackGroups,P=i.dataStartIndex,C=i.dataEndIndex,z=t.children,O="".concat(f,"Id"),B=ol(z,v),F={};return B&&B.length?F=EX(t,{axes:B,graphicalItems:m,axisType:f,axisIdKey:O,stackGroups:l,dataStartIndex:P,dataEndIndex:C}):m&&m.length&&(F=CX(t,{Axis:v,graphicalItems:m,axisType:f,axisIdKey:O,stackGroups:l,dataStartIndex:P,dataEndIndex:C})),F},OX=function(t){var i=ad(t),a=qu(i,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:ZS(a,function(f){return f.coordinate}),tooltipAxis:i,tooltipAxisBandSize:x_(i,a)}},FO=function(t){var i=t.children,a=t.defaultShowTooltip,f=bs(i,sm),v=0,m=0;return t.data&&t.data.length!==0&&(m=t.data.length-1),f&&f.props&&(f.props.startIndex>=0&&(v=f.props.startIndex),f.props.endIndex>=0&&(m=f.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:v,dataEndIndex:m,activeTooltipIndex:-1,isTooltipActive:!!a}},kX=function(t){return!t||!t.length?!1:t.some(function(i){var a=Vu(i&&i.type);return a&&a.indexOf("Bar")>=0})},$O=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},IX=function(t,i){var a=t.props,f=t.graphicalItems,v=t.xAxisMap,m=v===void 0?{}:v,l=t.yAxisMap,P=l===void 0?{}:l,C=a.width,z=a.height,O=a.children,B=a.margin||{},F=bs(O,sm),X=bs(O,Sf),Z=Object.keys(P).reduce(function(J,ae){var he=P[ae],ve=he.orientation;return!he.mirror&&!he.hide?vt(vt({},J),{},gr({},ve,J[ve]+he.width)):J},{left:B.left||0,right:B.right||0}),U=Object.keys(m).reduce(function(J,ae){var he=m[ae],ve=he.orientation;return!he.mirror&&!he.hide?vt(vt({},J),{},gr({},ve,al(J,"".concat(ve))+he.height)):J},{top:B.top||0,bottom:B.bottom||0}),re=vt(vt({},U),Z),se=re.bottom;F&&(re.bottom+=F.props.height||sm.defaultProps.height),X&&i&&(re=Uq(re,f,a,i));var ne=C-re.left-re.right,ue=z-re.top-re.bottom;return vt(vt({brushBottom:se},re),{},{width:Math.max(ne,0),height:Math.max(ue,0)})},DX=function(t,i){if(i==="xAxis")return t[i].width;if(i==="yAxis")return t[i].height},zX=function(t){var i=t.chartName,a=t.GraphicalChild,f=t.defaultTooltipEventType,v=f===void 0?"axis":f,m=t.validateTooltipEventTypes,l=m===void 0?["axis"]:m,P=t.axisComponents,C=t.legendContent,z=t.formatAxisMap,O=t.defaultProps,B=function(re,se){var ne=se.graphicalItems,ue=se.stackGroups,J=se.offset,ae=se.updateId,he=se.dataStartIndex,ve=se.dataEndIndex,Ie=re.barSize,at=re.layout,De=re.barGap,Fe=re.barCategoryGap,tt=re.maxBarSize,ut=$O(at),rt=ut.numericAxisName,Pe=ut.cateAxisName,Ve=kX(ne),Ge=[];return ne.forEach(function(ht,xe){var Xe=bx(re.data,{graphicalItems:[ht],dataStartIndex:he,dataEndIndex:ve}),ot=ht.type.defaultProps!==void 0?vt(vt({},ht.type.defaultProps),ht.props):ht.props,st=ot.dataKey,Pt=ot.maxBarSize,Vt=ot["".concat(rt,"Id")],Nt=ot["".concat(Pe,"Id")],yr={},ar=P.reduce(function(Ii,Di){var Yi=se["".concat(Di.axisType,"Map")],Mo=ot["".concat(Di.axisType,"Id")];Yi&&Yi[Mo]||Di.axisType==="zAxis"||Cf();var Ts=Yi[Mo];return vt(vt({},Ii),{},gr(gr({},Di.axisType,Ts),"".concat(Di.axisType,"Ticks"),qu(Ts)))},yr),Ot=ar[Pe],er=ar["".concat(Pe,"Ticks")],or=ue&&ue[Vt]&&ue[Vt].hasStack&&nU(ht,ue[Vt].stackGroups),_t=Vu(ht.type).indexOf("Bar")>=0,fr=x_(Ot,er),Qt=[],Yr=Ve&&$q({barSize:Ie,stackGroups:ue,totalSize:DX(ar,Pe)});if(_t){var tn,Kr,ki=Wr(Pt)?tt:Pt,Wn=(tn=(Kr=x_(Ot,er,!0))!==null&&Kr!==void 0?Kr:ki)!==null&&tn!==void 0?tn:0;Qt=qq({barGap:De,barCategoryGap:Fe,bandSize:Wn!==fr?Wn:fr,sizeList:Yr[Nt],maxBarSize:ki}),Wn!==fr&&(Qt=Qt.map(function(Ii){return vt(vt({},Ii),{},{position:vt(vt({},Ii.position),{},{offset:Ii.position.offset-Wn/2})})}))}var Ba=ht&&ht.type&&ht.type.getComposedData;Ba&&Ge.push({props:vt(vt({},Ba(vt(vt({},ar),{},{displayedData:Xe,props:re,dataKey:st,item:ht,bandSize:fr,barPosition:Qt,offset:J,stackedData:or,layout:at,dataStartIndex:he,dataEndIndex:ve}))),{},gr(gr(gr({key:ht.key||"item-".concat(xe)},rt,ar[rt]),Pe,ar[Pe]),"animationId",ae)),childIndex:U5(ht,re.children),item:ht})}),Ge},F=function(re,se){var ne=re.props,ue=re.dataStartIndex,J=re.dataEndIndex,ae=re.updateId;if(!uM({props:ne}))return null;var he=ne.children,ve=ne.layout,Ie=ne.stackOffset,at=ne.data,De=ne.reverseStackOrder,Fe=$O(ve),tt=Fe.numericAxisName,ut=Fe.cateAxisName,rt=ol(he,a),Pe=eU(at,rt,"".concat(tt,"Id"),"".concat(ut,"Id"),Ie,De),Ve=P.reduce(function(ot,st){var Pt="".concat(st.axisType,"Map");return vt(vt({},ot),{},gr({},Pt,jX(ne,vt(vt({},st),{},{graphicalItems:rt,stackGroups:st.axisType===tt&&Pe,dataStartIndex:ue,dataEndIndex:J}))))},{}),Ge=IX(vt(vt({},Ve),{},{props:ne,graphicalItems:rt}),se==null?void 0:se.legendBBox);Object.keys(Ve).forEach(function(ot){Ve[ot]=z(ne,Ve[ot],Ge,ot.replace("Map",""),i)});var ht=Ve["".concat(ut,"Map")],xe=OX(ht),Xe=B(ne,vt(vt({},Ve),{},{dataStartIndex:ue,dataEndIndex:J,updateId:ae,graphicalItems:rt,stackGroups:Pe,offset:Ge}));return vt(vt({formattedGraphicalItems:Xe,graphicalItems:rt,offset:Ge,stackGroups:Pe},xe),Ve)},X=function(U){function re(se){var ne,ue,J;return fX(this,re),J=gX(this,re,[se]),gr(J,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),gr(J,"accessibilityManager",new JH),gr(J,"handleLegendBBoxUpdate",function(ae){if(ae){var he=J.state,ve=he.dataStartIndex,Ie=he.dataEndIndex,at=he.updateId;J.setState(vt({legendBBox:ae},F({props:J.props,dataStartIndex:ve,dataEndIndex:Ie,updateId:at},vt(vt({},J.state),{},{legendBBox:ae}))))}}),gr(J,"handleReceiveSyncEvent",function(ae,he,ve){if(J.props.syncId===ae){if(ve===J.eventEmitterSymbol&&typeof J.props.syncMethod!="function")return;J.applySyncEvent(he)}}),gr(J,"handleBrushChange",function(ae){var he=ae.startIndex,ve=ae.endIndex;if(he!==J.state.dataStartIndex||ve!==J.state.dataEndIndex){var Ie=J.state.updateId;J.setState(function(){return vt({dataStartIndex:he,dataEndIndex:ve},F({props:J.props,dataStartIndex:he,dataEndIndex:ve,updateId:Ie},J.state))}),J.triggerSyncEvent({dataStartIndex:he,dataEndIndex:ve})}}),gr(J,"handleMouseEnter",function(ae){var he=J.getMouseInfo(ae);if(he){var ve=vt(vt({},he),{},{isTooltipActive:!0});J.setState(ve),J.triggerSyncEvent(ve);var Ie=J.props.onMouseEnter;Lr(Ie)&&Ie(ve,ae)}}),gr(J,"triggeredAfterMouseMove",function(ae){var he=J.getMouseInfo(ae),ve=he?vt(vt({},he),{},{isTooltipActive:!0}):{isTooltipActive:!1};J.setState(ve),J.triggerSyncEvent(ve);var Ie=J.props.onMouseMove;Lr(Ie)&&Ie(ve,ae)}),gr(J,"handleItemMouseEnter",function(ae){J.setState(function(){return{isTooltipActive:!0,activeItem:ae,activePayload:ae.tooltipPayload,activeCoordinate:ae.tooltipPosition||{x:ae.cx,y:ae.cy}}})}),gr(J,"handleItemMouseLeave",function(){J.setState(function(){return{isTooltipActive:!1}})}),gr(J,"handleMouseMove",function(ae){ae.persist(),J.throttleTriggeredAfterMouseMove(ae)}),gr(J,"handleMouseLeave",function(ae){J.throttleTriggeredAfterMouseMove.cancel();var he={isTooltipActive:!1};J.setState(he),J.triggerSyncEvent(he);var ve=J.props.onMouseLeave;Lr(ve)&&ve(he,ae)}),gr(J,"handleOuterEvent",function(ae){var he=q5(ae),ve=al(J.props,"".concat(he));if(he&&Lr(ve)){var Ie,at;/.*touch.*/i.test(he)?at=J.getMouseInfo(ae.changedTouches[0]):at=J.getMouseInfo(ae),ve((Ie=at)!==null&&Ie!==void 0?Ie:{},ae)}}),gr(J,"handleClick",function(ae){var he=J.getMouseInfo(ae);if(he){var ve=vt(vt({},he),{},{isTooltipActive:!0});J.setState(ve),J.triggerSyncEvent(ve);var Ie=J.props.onClick;Lr(Ie)&&Ie(ve,ae)}}),gr(J,"handleMouseDown",function(ae){var he=J.props.onMouseDown;if(Lr(he)){var ve=J.getMouseInfo(ae);he(ve,ae)}}),gr(J,"handleMouseUp",function(ae){var he=J.props.onMouseUp;if(Lr(he)){var ve=J.getMouseInfo(ae);he(ve,ae)}}),gr(J,"handleTouchMove",function(ae){ae.changedTouches!=null&&ae.changedTouches.length>0&&J.throttleTriggeredAfterMouseMove(ae.changedTouches[0])}),gr(J,"handleTouchStart",function(ae){ae.changedTouches!=null&&ae.changedTouches.length>0&&J.handleMouseDown(ae.changedTouches[0])}),gr(J,"handleTouchEnd",function(ae){ae.changedTouches!=null&&ae.changedTouches.length>0&&J.handleMouseUp(ae.changedTouches[0])}),gr(J,"handleDoubleClick",function(ae){var he=J.props.onDoubleClick;if(Lr(he)){var ve=J.getMouseInfo(ae);he(ve,ae)}}),gr(J,"handleContextMenu",function(ae){var he=J.props.onContextMenu;if(Lr(he)){var ve=J.getMouseInfo(ae);he(ve,ae)}}),gr(J,"triggerSyncEvent",function(ae){J.props.syncId!==void 0&&Zw.emit(Hw,J.props.syncId,ae,J.eventEmitterSymbol)}),gr(J,"applySyncEvent",function(ae){var he=J.props,ve=he.layout,Ie=he.syncMethod,at=J.state.updateId,De=ae.dataStartIndex,Fe=ae.dataEndIndex;if(ae.dataStartIndex!==void 0||ae.dataEndIndex!==void 0)J.setState(vt({dataStartIndex:De,dataEndIndex:Fe},F({props:J.props,dataStartIndex:De,dataEndIndex:Fe,updateId:at},J.state)));else if(ae.activeTooltipIndex!==void 0){var tt=ae.chartX,ut=ae.chartY,rt=ae.activeTooltipIndex,Pe=J.state,Ve=Pe.offset,Ge=Pe.tooltipTicks;if(!Ve)return;if(typeof Ie=="function")rt=Ie(Ge,ae);else if(Ie==="value"){rt=-1;for(var ht=0;ht<Ge.length;ht++)if(Ge[ht].value===ae.activeLabel){rt=ht;break}}var xe=vt(vt({},Ve),{},{x:Ve.left,y:Ve.top}),Xe=Math.min(tt,xe.x+xe.width),ot=Math.min(ut,xe.y+xe.height),st=Ge[rt]&&Ge[rt].value,Pt=bS(J.state,J.props.data,rt),Vt=Ge[rt]?{x:ve==="horizontal"?Ge[rt].coordinate:Xe,y:ve==="horizontal"?ot:Ge[rt].coordinate}:Sz;J.setState(vt(vt({},ae),{},{activeLabel:st,activeCoordinate:Vt,activePayload:Pt,activeTooltipIndex:rt}))}else J.setState(ae)}),gr(J,"renderCursor",function(ae){var he,ve=J.state,Ie=ve.isTooltipActive,at=ve.activeCoordinate,De=ve.activePayload,Fe=ve.offset,tt=ve.activeTooltipIndex,ut=ve.tooltipAxisBandSize,rt=J.getTooltipEventType(),Pe=(he=ae.props.active)!==null&&he!==void 0?he:Ie,Ve=J.props.layout,Ge=ae.key||"_recharts-cursor";return $e.createElement(oX,{key:Ge,activeCoordinate:at,activePayload:De,activeTooltipIndex:tt,chartName:i,element:ae,isActive:Pe,layout:Ve,offset:Fe,tooltipAxisBandSize:ut,tooltipEventType:rt})}),gr(J,"renderPolarAxis",function(ae,he,ve){var Ie=al(ae,"type.axisType"),at=al(J.state,"".concat(Ie,"Map")),De=ae.type.defaultProps,Fe=De!==void 0?vt(vt({},De),ae.props):ae.props,tt=at&&at[Fe["".concat(Ie,"Id")]];return ft.cloneElement(ae,vt(vt({},tt),{},{className:sn(Ie,tt.className),key:ae.key||"".concat(he,"-").concat(ve),ticks:qu(tt,!0)}))}),gr(J,"renderPolarGrid",function(ae){var he=ae.props,ve=he.radialLines,Ie=he.polarAngles,at=he.polarRadius,De=J.state,Fe=De.radiusAxisMap,tt=De.angleAxisMap,ut=ad(Fe),rt=ad(tt),Pe=rt.cx,Ve=rt.cy,Ge=rt.innerRadius,ht=rt.outerRadius;return ft.cloneElement(ae,{polarAngles:Array.isArray(Ie)?Ie:qu(rt,!0).map(function(xe){return xe.coordinate}),polarRadius:Array.isArray(at)?at:qu(ut,!0).map(function(xe){return xe.coordinate}),cx:Pe,cy:Ve,innerRadius:Ge,outerRadius:ht,key:ae.key||"polar-grid",radialLines:ve})}),gr(J,"renderLegend",function(){var ae=J.state.formattedGraphicalItems,he=J.props,ve=he.children,Ie=he.width,at=he.height,De=J.props.margin||{},Fe=Ie-(De.left||0)-(De.right||0),tt=vD({children:ve,formattedGraphicalItems:ae,legendWidth:Fe,legendContent:C});if(!tt)return null;var ut=tt.item,rt=RO(tt,sX);return ft.cloneElement(ut,vt(vt({},rt),{},{chartWidth:Ie,chartHeight:at,margin:De,onBBoxUpdate:J.handleLegendBBoxUpdate}))}),gr(J,"renderTooltip",function(){var ae,he=J.props,ve=he.children,Ie=he.accessibilityLayer,at=bs(ve,Vc);if(!at)return null;var De=J.state,Fe=De.isTooltipActive,tt=De.activeCoordinate,ut=De.activePayload,rt=De.activeLabel,Pe=De.offset,Ve=(ae=at.props.active)!==null&&ae!==void 0?ae:Fe;return ft.cloneElement(at,{viewBox:vt(vt({},Pe),{},{x:Pe.left,y:Pe.top}),active:Ve,label:rt,payload:Ve?ut:[],coordinate:tt,accessibilityLayer:Ie})}),gr(J,"renderBrush",function(ae){var he=J.props,ve=he.margin,Ie=he.data,at=J.state,De=at.offset,Fe=at.dataStartIndex,tt=at.dataEndIndex,ut=at.updateId;return ft.cloneElement(ae,{key:ae.key||"_recharts-brush",onChange:Lv(J.handleBrushChange,ae.props.onChange),data:Ie,x:zt(ae.props.x)?ae.props.x:De.left,y:zt(ae.props.y)?ae.props.y:De.top+De.height+De.brushBottom-(ve.bottom||0),width:zt(ae.props.width)?ae.props.width:De.width,startIndex:Fe,endIndex:tt,updateId:"brush-".concat(ut)})}),gr(J,"renderReferenceElement",function(ae,he,ve){if(!ae)return null;var Ie=J,at=Ie.clipPathId,De=J.state,Fe=De.xAxisMap,tt=De.yAxisMap,ut=De.offset,rt=ae.type.defaultProps||{},Pe=ae.props,Ve=Pe.xAxisId,Ge=Ve===void 0?rt.xAxisId:Ve,ht=Pe.yAxisId,xe=ht===void 0?rt.yAxisId:ht;return ft.cloneElement(ae,{key:ae.key||"".concat(he,"-").concat(ve),xAxis:Fe[Ge],yAxis:tt[xe],viewBox:{x:ut.left,y:ut.top,width:ut.width,height:ut.height},clipPathId:at})}),gr(J,"renderActivePoints",function(ae){var he=ae.item,ve=ae.activePoint,Ie=ae.basePoint,at=ae.childIndex,De=ae.isRange,Fe=[],tt=he.props.key,ut=he.item.type.defaultProps!==void 0?vt(vt({},he.item.type.defaultProps),he.item.props):he.item.props,rt=ut.activeDot,Pe=ut.dataKey,Ve=vt(vt({index:at,dataKey:Pe,cx:ve.x,cy:ve.y,r:4,fill:vT(he.item),strokeWidth:2,stroke:"#fff",payload:ve.payload,value:ve.value},en(rt,!1)),Xv(rt));return Fe.push(re.renderActiveDot(rt,Ve,"".concat(tt,"-activePoint-").concat(at))),Ie?Fe.push(re.renderActiveDot(rt,vt(vt({},Ve),{},{cx:Ie.x,cy:Ie.y}),"".concat(tt,"-basePoint-").concat(at))):De&&Fe.push(null),Fe}),gr(J,"renderGraphicChild",function(ae,he,ve){var Ie=J.filterFormatItem(ae,he,ve);if(!Ie)return null;var at=J.getTooltipEventType(),De=J.state,Fe=De.isTooltipActive,tt=De.tooltipAxis,ut=De.activeTooltipIndex,rt=De.activeLabel,Pe=J.props.children,Ve=bs(Pe,Vc),Ge=Ie.props,ht=Ge.points,xe=Ge.isRange,Xe=Ge.baseLine,ot=Ie.item.type.defaultProps!==void 0?vt(vt({},Ie.item.type.defaultProps),Ie.item.props):Ie.item.props,st=ot.activeDot,Pt=ot.hide,Vt=ot.activeBar,Nt=ot.activeShape,yr=!!(!Pt&&Fe&&Ve&&(st||Vt||Nt)),ar={};at!=="axis"&&Ve&&Ve.props.trigger==="click"?ar={onClick:Lv(J.handleItemMouseEnter,ae.props.onClick)}:at!=="axis"&&(ar={onMouseLeave:Lv(J.handleItemMouseLeave,ae.props.onMouseLeave),onMouseEnter:Lv(J.handleItemMouseEnter,ae.props.onMouseEnter)});var Ot=ft.cloneElement(ae,vt(vt({},Ie.props),ar));function er(Di){return typeof tt.dataKey=="function"?tt.dataKey(Di.payload):null}if(yr)if(ut>=0){var or,_t;if(tt.dataKey&&!tt.allowDuplicatedCategory){var fr=typeof tt.dataKey=="function"?er:"payload.".concat(tt.dataKey.toString());or=Hv(ht,fr,rt),_t=xe&&Xe&&Hv(Xe,fr,rt)}else or=ht==null?void 0:ht[ut],_t=xe&&Xe&&Xe[ut];if(Nt||Vt){var Qt=ae.props.activeIndex!==void 0?ae.props.activeIndex:ut;return[ft.cloneElement(ae,vt(vt(vt({},Ie.props),ar),{},{activeIndex:Qt})),null,null]}if(!Wr(or))return[Ot].concat(vm(J.renderActivePoints({item:Ie,activePoint:or,basePoint:_t,childIndex:ut,isRange:xe})))}else{var Yr,tn=(Yr=J.getItemByXY(J.state.activeCoordinate))!==null&&Yr!==void 0?Yr:{graphicalItem:Ot},Kr=tn.graphicalItem,ki=Kr.item,Wn=ki===void 0?ae:ki,Ba=Kr.childIndex,Ii=vt(vt(vt({},Ie.props),ar),{},{activeIndex:Ba});return[ft.cloneElement(Wn,Ii),null,null]}return xe?[Ot,null,null]:[Ot,null]}),gr(J,"renderCustomized",function(ae,he,ve){return ft.cloneElement(ae,vt(vt({key:"recharts-customized-".concat(ve)},J.props),J.state))}),gr(J,"renderMap",{CartesianGrid:{handler:Uv,once:!0},ReferenceArea:{handler:J.renderReferenceElement},ReferenceLine:{handler:Uv},ReferenceDot:{handler:J.renderReferenceElement},XAxis:{handler:Uv},YAxis:{handler:Uv},Brush:{handler:J.renderBrush,once:!0},Bar:{handler:J.renderGraphicChild},Line:{handler:J.renderGraphicChild},Area:{handler:J.renderGraphicChild},Radar:{handler:J.renderGraphicChild},RadialBar:{handler:J.renderGraphicChild},Scatter:{handler:J.renderGraphicChild},Pie:{handler:J.renderGraphicChild},Funnel:{handler:J.renderGraphicChild},Tooltip:{handler:J.renderCursor,once:!0},PolarGrid:{handler:J.renderPolarGrid,once:!0},PolarAngleAxis:{handler:J.renderPolarAxis},PolarRadiusAxis:{handler:J.renderPolarAxis},Customized:{handler:J.renderCustomized}}),J.clipPathId="".concat((ne=se.id)!==null&&ne!==void 0?ne:Dy("recharts"),"-clip"),J.throttleTriggeredAfterMouseMove=yI(J.triggeredAfterMouseMove,(ue=se.throttleDelay)!==null&&ue!==void 0?ue:1e3/60),J.state={},J}return _X(re,U),mX(re,[{key:"componentDidMount",value:function(){var ne,ue;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(ne=this.props.margin.left)!==null&&ne!==void 0?ne:0,top:(ue=this.props.margin.top)!==null&&ue!==void 0?ue:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var ne=this.props,ue=ne.children,J=ne.data,ae=ne.height,he=ne.layout,ve=bs(ue,Vc);if(ve){var Ie=ve.props.defaultIndex;if(!(typeof Ie!="number"||Ie<0||Ie>this.state.tooltipTicks.length-1)){var at=this.state.tooltipTicks[Ie]&&this.state.tooltipTicks[Ie].value,De=bS(this.state,J,Ie,at),Fe=this.state.tooltipTicks[Ie].coordinate,tt=(this.state.offset.top+ae)/2,ut=he==="horizontal",rt=ut?{x:Fe,y:tt}:{y:Fe,x:tt},Pe=this.state.formattedGraphicalItems.find(function(Ge){var ht=Ge.item;return ht.type.name==="Scatter"});Pe&&(rt=vt(vt({},rt),Pe.props.points[Ie].tooltipPosition),De=Pe.props.points[Ie].tooltipPayload);var Ve={activeTooltipIndex:Ie,isTooltipActive:!0,activeLabel:at,activePayload:De,activeCoordinate:rt};this.setState(Ve),this.renderCursor(ve),this.accessibilityManager.setIndex(Ie)}}}},{key:"getSnapshotBeforeUpdate",value:function(ne,ue){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==ue.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==ne.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==ne.margin){var J,ae;this.accessibilityManager.setDetails({offset:{left:(J=this.props.margin.left)!==null&&J!==void 0?J:0,top:(ae=this.props.margin.top)!==null&&ae!==void 0?ae:0}})}return null}},{key:"componentDidUpdate",value:function(ne){o2([bs(ne.children,Vc)],[bs(this.props.children,Vc)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var ne=bs(this.props.children,Vc);if(ne&&typeof ne.props.shared=="boolean"){var ue=ne.props.shared?"axis":"item";return l.indexOf(ue)>=0?ue:v}return v}},{key:"getMouseInfo",value:function(ne){if(!this.container)return null;var ue=this.container,J=ue.getBoundingClientRect(),ae=jB(J),he={chartX:Math.round(ne.pageX-ae.left),chartY:Math.round(ne.pageY-ae.top)},ve=J.width/ue.offsetWidth||1,Ie=this.inRange(he.chartX,he.chartY,ve);if(!Ie)return null;var at=this.state,De=at.xAxisMap,Fe=at.yAxisMap,tt=this.getTooltipEventType(),ut=BO(this.state,this.props.data,this.props.layout,Ie);if(tt!=="axis"&&De&&Fe){var rt=ad(De).scale,Pe=ad(Fe).scale,Ve=rt&&rt.invert?rt.invert(he.chartX):null,Ge=Pe&&Pe.invert?Pe.invert(he.chartY):null;return vt(vt({},he),{},{xValue:Ve,yValue:Ge},ut)}return ut?vt(vt({},he),ut):null}},{key:"inRange",value:function(ne,ue){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ae=this.props.layout,he=ne/J,ve=ue/J;if(ae==="horizontal"||ae==="vertical"){var Ie=this.state.offset,at=he>=Ie.left&&he<=Ie.left+Ie.width&&ve>=Ie.top&&ve<=Ie.top+Ie.height;return at?{x:he,y:ve}:null}var De=this.state,Fe=De.angleAxisMap,tt=De.radiusAxisMap;if(Fe&&tt){var ut=ad(Fe);return JC({x:he,y:ve},ut)}return null}},{key:"parseEventsOfWrapper",value:function(){var ne=this.props.children,ue=this.getTooltipEventType(),J=bs(ne,Vc),ae={};J&&ue==="axis"&&(J.props.trigger==="click"?ae={onClick:this.handleClick}:ae={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var he=Xv(this.props,this.handleOuterEvent);return vt(vt({},he),ae)}},{key:"addListener",value:function(){Zw.on(Hw,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Zw.removeListener(Hw,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(ne,ue,J){for(var ae=this.state.formattedGraphicalItems,he=0,ve=ae.length;he<ve;he++){var Ie=ae[he];if(Ie.item===ne||Ie.props.key===ne.key||ue===Vu(Ie.item.type)&&J===Ie.childIndex)return Ie}return null}},{key:"renderClipPath",value:function(){var ne=this.clipPathId,ue=this.state.offset,J=ue.left,ae=ue.top,he=ue.height,ve=ue.width;return $e.createElement("defs",null,$e.createElement("clipPath",{id:ne},$e.createElement("rect",{x:J,y:ae,height:he,width:ve})))}},{key:"getXScales",value:function(){var ne=this.state.xAxisMap;return ne?Object.entries(ne).reduce(function(ue,J){var ae=NO(J,2),he=ae[0],ve=ae[1];return vt(vt({},ue),{},gr({},he,ve.scale))},{}):null}},{key:"getYScales",value:function(){var ne=this.state.yAxisMap;return ne?Object.entries(ne).reduce(function(ue,J){var ae=NO(J,2),he=ae[0],ve=ae[1];return vt(vt({},ue),{},gr({},he,ve.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(ne){var ue;return(ue=this.state.xAxisMap)===null||ue===void 0||(ue=ue[ne])===null||ue===void 0?void 0:ue.scale}},{key:"getYScaleByAxisId",value:function(ne){var ue;return(ue=this.state.yAxisMap)===null||ue===void 0||(ue=ue[ne])===null||ue===void 0?void 0:ue.scale}},{key:"getItemByXY",value:function(ne){var ue=this.state,J=ue.formattedGraphicalItems,ae=ue.activeItem;if(J&&J.length)for(var he=0,ve=J.length;he<ve;he++){var Ie=J[he],at=Ie.props,De=Ie.item,Fe=De.type.defaultProps!==void 0?vt(vt({},De.type.defaultProps),De.props):De.props,tt=Vu(De.type);if(tt==="Bar"){var ut=(at.data||[]).find(function(Ge){return H9(ne,Ge)});if(ut)return{graphicalItem:Ie,payload:ut}}else if(tt==="RadialBar"){var rt=(at.data||[]).find(function(Ge){return JC(ne,Ge)});if(rt)return{graphicalItem:Ie,payload:rt}}else if(fx(Ie,ae)||px(Ie,ae)||Sy(Ie,ae)){var Pe=R7({graphicalItem:Ie,activeTooltipItem:ae,itemData:Fe.data}),Ve=Fe.activeIndex===void 0?Pe:Fe.activeIndex;return{graphicalItem:vt(vt({},Ie),{},{childIndex:Ve}),payload:Sy(Ie,ae)?Fe.data[Pe]:Ie.props.data[Pe]}}}return null}},{key:"render",value:function(){var ne=this;if(!uM(this))return null;var ue=this.props,J=ue.children,ae=ue.className,he=ue.width,ve=ue.height,Ie=ue.style,at=ue.compact,De=ue.title,Fe=ue.desc,tt=RO(ue,lX),ut=en(tt,!1);if(at)return $e.createElement(yO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$e.createElement(l2,Zp({},ut,{width:he,height:ve,title:De,desc:Fe}),this.renderClipPath(),dM(J,this.renderMap)));if(this.props.accessibilityLayer){var rt,Pe;ut.tabIndex=(rt=this.props.tabIndex)!==null&&rt!==void 0?rt:0,ut.role=(Pe=this.props.role)!==null&&Pe!==void 0?Pe:"application",ut.onKeyDown=function(Ge){ne.accessibilityManager.keyboardEvent(Ge)},ut.onFocus=function(){ne.accessibilityManager.focus()}}var Ve=this.parseEventsOfWrapper();return $e.createElement(yO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$e.createElement("div",Zp({className:sn("recharts-wrapper",ae),style:vt({position:"relative",cursor:"default",width:he,height:ve},Ie)},Ve,{ref:function(ht){ne.container=ht}}),$e.createElement(l2,Zp({},ut,{width:he,height:ve,title:De,desc:Fe,style:AX}),this.renderClipPath(),dM(J,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(ft.Component);gr(X,"displayName",i),gr(X,"defaultProps",vt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},O)),gr(X,"getDerivedStateFromProps",function(U,re){var se=U.dataKey,ne=U.data,ue=U.children,J=U.width,ae=U.height,he=U.layout,ve=U.stackOffset,Ie=U.margin,at=re.dataStartIndex,De=re.dataEndIndex;if(re.updateId===void 0){var Fe=FO(U);return vt(vt(vt({},Fe),{},{updateId:0},F(vt(vt({props:U},Fe),{},{updateId:0}),re)),{},{prevDataKey:se,prevData:ne,prevWidth:J,prevHeight:ae,prevLayout:he,prevStackOffset:ve,prevMargin:Ie,prevChildren:ue})}if(se!==re.prevDataKey||ne!==re.prevData||J!==re.prevWidth||ae!==re.prevHeight||he!==re.prevLayout||ve!==re.prevStackOffset||!Hp(Ie,re.prevMargin)){var tt=FO(U),ut={chartX:re.chartX,chartY:re.chartY,isTooltipActive:re.isTooltipActive},rt=vt(vt({},BO(re,ne,he)),{},{updateId:re.updateId+1}),Pe=vt(vt(vt({},tt),ut),rt);return vt(vt(vt({},Pe),F(vt({props:U},Pe),re)),{},{prevDataKey:se,prevData:ne,prevWidth:J,prevHeight:ae,prevLayout:he,prevStackOffset:ve,prevMargin:Ie,prevChildren:ue})}if(!o2(ue,re.prevChildren)){var Ve,Ge,ht,xe,Xe=bs(ue,sm),ot=Xe&&(Ve=(Ge=Xe.props)===null||Ge===void 0?void 0:Ge.startIndex)!==null&&Ve!==void 0?Ve:at,st=Xe&&(ht=(xe=Xe.props)===null||xe===void 0?void 0:xe.endIndex)!==null&&ht!==void 0?ht:De,Pt=ot!==at||st!==De,Vt=!Wr(ne),Nt=Vt&&!Pt?re.updateId:re.updateId+1;return vt(vt({updateId:Nt},F(vt(vt({props:U},re),{},{updateId:Nt,dataStartIndex:ot,dataEndIndex:st}),re)),{},{prevChildren:ue,dataStartIndex:ot,dataEndIndex:st})}return null}),gr(X,"renderActiveDot",function(U,re,se){var ne;return ft.isValidElement(U)?ne=ft.cloneElement(U,re):Lr(U)?ne=U(re):ne=$e.createElement(xT,re),$e.createElement(Oi,{className:"recharts-active-dot",key:se},ne)});var Z=ft.forwardRef(function(re,se){return $e.createElement(X,Zp({},re,{ref:se}))});return Z.displayName=X.displayName,Z},NX=zX({chartName:"LineChart",GraphicalChild:pm,axisComponents:[{axisType:"xAxis",AxisComp:xx},{axisType:"yAxis",AxisComp:Ey}],formatAxisMap:IG});function RX({data:e}){const t=e.map(a=>({month:a.month_ar,"البيع (ر.س/م²)":a.sale_price_per_m2,"الإيجار (ر.س/م²/شهر)":a.rent_price_per_m2_month})),i=({active:a,payload:f,label:v})=>a&&f&&f.length?A.jsxs(nr,{className:"p-3 shadow-lg",children:[A.jsx("p",{className:"font-semibold mb-2",children:v}),f.map((m,l)=>A.jsxs("p",{style:{color:m.color},className:"text-sm",children:[m.name,": ",new Intl.NumberFormat("ar-SA").format(m.value)]},l))]}):null;return A.jsxs(nr,{className:"p-6",children:[A.jsxs("div",{className:"mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold mb-2",children:"اتجاهات الأسعار"}),A.jsx("p",{className:"text-muted-foreground",children:"تطور أسعار البيع والإيجار خلال آخر 12 شهر"})]}),A.jsx("div",{className:"w-full h-80",children:A.jsx(SB,{width:"100%",height:"100%",children:A.jsxs(NX,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[A.jsx(cz,{strokeDasharray:"3 3",stroke:"oklch(0.90 0.01 220)"}),A.jsx(xx,{dataKey:"month",tick:{fill:"oklch(0.50 0.01 240)",fontSize:12},angle:-45,textAnchor:"end",height:80}),A.jsx(Ey,{yAxisId:"left",tick:{fill:"oklch(0.50 0.01 240)",fontSize:12},label:{value:"سعر البيع (ر.س/م²)",angle:-90,position:"insideLeft"}}),A.jsx(Ey,{yAxisId:"right",orientation:"right",tick:{fill:"oklch(0.50 0.01 240)",fontSize:12},label:{value:"سعر الإيجار (ر.س/م²/شهر)",angle:90,position:"insideRight"}}),A.jsx(Vc,{content:A.jsx(i,{})}),A.jsx(Sf,{wrapperStyle:{paddingTop:"20px"},iconType:"line"}),A.jsx(pm,{yAxisId:"left",type:"monotone",dataKey:"البيع (ر.س/م²)",stroke:"oklch(0.45 0.15 240)",strokeWidth:3,dot:{fill:"oklch(0.45 0.15 240)",r:4},activeDot:{r:6}}),A.jsx(pm,{yAxisId:"right",type:"monotone",dataKey:"الإيجار (ر.س/م²/شهر)",stroke:"oklch(0.60 0.15 180)",strokeWidth:3,dot:{fill:"oklch(0.60 0.15 180)",r:4},activeDot:{r:6}})]})})}),A.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4 text-sm",children:[A.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600"}),A.jsx("span",{className:"font-semibold",children:"البيع"})]}),A.jsx("p",{className:"text-xs text-muted-foreground",children:"نمو مستمر بنسبة 6٪ سنوياً"})]}),A.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx("div",{className:"w-3 h-3 rounded-full bg-green-600"}),A.jsx("span",{className:"font-semibold",children:"الإيجار"})]}),A.jsx("p",{className:"text-xs text-muted-foreground",children:"استقرار نسبي مع نمو 4٪ سنوياً"})]})]})]})}function LX({data:e}){return A.jsx(nr,{className:"p-6 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:A.jsx(xR,{className:"w-6 h-6 text-blue-600"})}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[A.jsx("h3",{className:"font-bold text-lg",children:"حالة البيانات"}),A.jsx(Xg,{className:"bg-blue-600",children:"نسخة تجريبية"})]}),A.jsxs("div",{className:"space-y-2 mb-4",children:[A.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[A.jsx(ck,{className:"w-4 h-4 text-blue-600"}),A.jsx("span",{className:"text-muted-foreground",children:"آخر تحديث:"}),A.jsx("span",{className:"font-semibold",children:B3(e.updated_at)})]}),A.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[A.jsx(ld,{className:"w-4 h-4 text-amber-600"}),A.jsx("span",{className:"text-muted-foreground",children:"الفترة:"}),A.jsx("span",{className:"font-semibold",children:e.period})]})]}),A.jsxs("div",{className:"p-4 bg-white/80 rounded-lg border border-blue-200",children:[A.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:[A.jsx("strong",{className:"text-foreground",children:"ملاحظة:"})," ",e.note]}),A.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"البيانات الحالية محلية ومُعدّة للعرض التوضيحي. في النسخة النهائية، سيتم تحديث البيانات تلقائياً من مصادر رسمية معتمدة."})]})]})]})})}function BX(){const e=[{title:"جمع البيانات",description:"تجميع بيانات المعاملات العقارية من مصادر رسمية ومعتمدة"},{title:"التنظيف والتحقق",description:"تنقية البيانات واستبعاد القيم الشاذة والمعاملات غير النمطية"},{title:"التحليل الإحصائي",description:"حساب المتوسطات والنطاقات (P25, P50, P75) لكل منطقة"},{title:"حساب الاتجاهات",description:"تحليل التغيرات السنوية والشهرية وتحديد الاتجاهات"},{title:"تقييم الثقة",description:"حساب مستوى الثقة بناءً على حجم العينة وتناسق البيانات"},{title:"التحديث المستمر",description:"تحديث دوري للبيانات والمؤشرات (شهرياً في النسخة النهائية)"}];return A.jsxs(nr,{className:"p-8",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[A.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:A.jsx(QN,{className:"w-6 h-6 text-purple-600"})}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-bold",children:"المنهجية"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"كيف نحسب مؤشرات السوق"})]})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map((t,i)=>A.jsxs("div",{className:"flex gap-4",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-bold text-sm",children:i+1})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold mb-1",children:t.title}),A.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]},i))}),A.jsx("div",{className:"mt-8 p-4 bg-muted/50 rounded-lg",children:A.jsxs("div",{className:"flex items-start gap-3",children:[A.jsx(Uu,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold mb-2",children:"معايير الجودة"}),A.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[A.jsx("li",{children:"• استبعاد المعاملات غير النمطية (أقل من 1% أو أكثر من 99%)"}),A.jsx("li",{children:"• الحد الأدنى للعينة: 100 معاملة لكل منطقة"}),A.jsx("li",{children:"• مستوى الثقة يعكس حجم العينة وتناسق البيانات"}),A.jsx("li",{children:"• التحديث الدوري يضمن دقة المؤشرات"})]})]})]})})]})}const FX="2025Q4",$X="2025-10-13",qX="بيانات تجريبية محلية - سيتم تحديثها من مصادر رسمية لاحقاً",UX={sale_price_per_m2:4350,rent_price_per_m2_month:75,sale_yoy:.06,rent_yoy:.04,avg_days_to_sell:52,national_confidence:.82,total_transactions:245e3,transaction_volume_billion:187.5},VX={sale_trend:"صاعد",rent_trend:"مستقر",demand_level:"مرتفع",supply_level:"متوازن"},GX=["نمو مستمر في أسعار البيع بنسبة 6% سنوياً","استقرار نسبي في أسعار الإيجارات","زيادة الطلب على الوحدات السكنية في المدن الرئيسية","تحسن ملحوظ في سرعة البيع مقارنة بالربع السابق"],ZX={period:FX,updated_at:$X,note:qX,national:UX,trends:VX,insights:GX},HX=[{id:"riyadh",name:"الرياض",name_en:"Riyadh",sale_price_per_m2:4500,rent_price_per_m2_month:80,sale_p25:3200,sale_p50:4500,sale_p75:6200,rent_p25:60,rent_p50:80,rent_p75:110,sale_yoy:.08,rent_yoy:.05,avg_days_to_sell:48,confidence:.88,transactions:85e3,note:"العاصمة - نمو قوي ومستمر"},{id:"jeddah",name:"جدة",name_en:"Jeddah",sale_price_per_m2:4200,rent_price_per_m2_month:75,sale_p25:3e3,sale_p50:4200,sale_p75:5800,rent_p25:55,rent_p50:75,rent_p75:100,sale_yoy:.07,rent_yoy:.04,avg_days_to_sell:50,confidence:.85,transactions:62e3,note:"المدينة الساحلية - طلب مرتفع"},{id:"dammam",name:"الدمام",name_en:"Dammam",sale_price_per_m2:3800,rent_price_per_m2_month:65,sale_p25:2800,sale_p50:3800,sale_p75:5e3,rent_p25:50,rent_p50:65,rent_p75:85,sale_yoy:.05,rent_yoy:.03,avg_days_to_sell:55,confidence:.8,transactions:38e3,note:"المنطقة الشرقية - استقرار نسبي"},{id:"mecca",name:"مكة المكرمة",name_en:"Makkah",sale_price_per_m2:5200,rent_price_per_m2_month:90,sale_p25:3800,sale_p50:5200,sale_p75:7500,rent_p25:70,rent_p50:90,rent_p75:130,sale_yoy:.09,rent_yoy:.06,avg_days_to_sell:45,confidence:.82,transactions:32e3,note:"المدينة المقدسة - طلب استثنائي"},{id:"medina",name:"المدينة المنورة",name_en:"Madinah",sale_price_per_m2:4800,rent_price_per_m2_month:85,sale_p25:3500,sale_p50:4800,sale_p75:6800,rent_p25:65,rent_p50:85,rent_p75:115,sale_yoy:.08,rent_yoy:.05,avg_days_to_sell:47,confidence:.83,transactions:28e3,note:"المدينة المنورة - نمو مستدام"}],XX=[{month:"2024-11",month_ar:"نوفمبر ٢٠٢٤",sale_price_per_m2:4100,rent_price_per_m2_month:72},{month:"2024-12",month_ar:"ديسمبر ٢٠٢٤",sale_price_per_m2:4150,rent_price_per_m2_month:73},{month:"2025-01",month_ar:"يناير ٢٠٢٥",sale_price_per_m2:4180,rent_price_per_m2_month:73},{month:"2025-02",month_ar:"فبراير ٢٠٢٥",sale_price_per_m2:4200,rent_price_per_m2_month:74},{month:"2025-03",month_ar:"مارس ٢٠٢٥",sale_price_per_m2:4220,rent_price_per_m2_month:74},{month:"2025-04",month_ar:"أبريل ٢٠٢٥",sale_price_per_m2:4250,rent_price_per_m2_month:74},{month:"2025-05",month_ar:"مايو ٢٠٢٥",sale_price_per_m2:4270,rent_price_per_m2_month:75},{month:"2025-06",month_ar:"يونيو ٢٠٢٥",sale_price_per_m2:4290,rent_price_per_m2_month:75},{month:"2025-07",month_ar:"يوليو ٢٠٢٥",sale_price_per_m2:4310,rent_price_per_m2_month:75},{month:"2025-08",month_ar:"أغسطس ٢٠٢٥",sale_price_per_m2:4330,rent_price_per_m2_month:76},{month:"2025-09",month_ar:"سبتمبر ٢٠٢٥",sale_price_per_m2:4340,rent_price_per_m2_month:76},{month:"2025-10",month_ar:"أكتوبر ٢٠٢٥",sale_price_per_m2:4350,rent_price_per_m2_month:75}];function WX(){return ZX}function YX(){return HX}function KX(){return XX}function QX(){const e=WX(),t=YX(),i=KX();return A.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted/30 py-12 px-4",children:A.jsxs("div",{className:"container mx-auto max-w-7xl",children:[A.jsxs("div",{className:"text-center mb-12 space-y-4",children:[A.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-semibold mb-4",children:[A.jsx(Zc,{className:"w-4 h-4"}),A.jsx("span",{children:"دراسة السوق العقاري السعودي"})]}),A.jsx("h1",{className:"text-4xl md:text-5xl font-black text-balance",children:"السوق العقاري السعودي"}),A.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto text-balance",children:"تحليل شامل ومؤشرات دقيقة لسوق العقارات في المملكة"})]}),A.jsx("div",{className:"mb-8",children:A.jsx(LX,{data:e})}),A.jsxs("div",{className:"mb-12",children:[A.jsx("h2",{className:"text-2xl font-bold mb-6",children:"المؤشرات الرئيسية"}),A.jsx($3,{data:e})]}),A.jsx("div",{className:"mb-12",children:A.jsx(RX,{data:i})}),A.jsxs("div",{className:"mb-12",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"المدن الرئيسية"}),A.jsx("div",{className:"text-sm text-muted-foreground",children:"اضغط على أي مدينة لعرض التفاصيل"})]}),A.jsx(q3,{cities:t})]}),A.jsxs("div",{className:"mb-12 grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"p-6 rounded-xl bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[A.jsx(Hc,{className:"w-5 h-5 text-green-600"}),A.jsx("h3",{className:"font-bold text-lg",children:"رؤى السوق"})]}),A.jsx("ul",{className:"space-y-2 text-sm",children:e.insights.map((a,f)=>A.jsxs("li",{className:"flex items-start gap-2",children:[A.jsx("span",{className:"text-green-600 font-bold",children:"•"}),A.jsx("span",{children:a})]},f))})]}),A.jsxs("div",{className:"p-6 rounded-xl bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[A.jsx(Zc,{className:"w-5 h-5 text-blue-600"}),A.jsx("h3",{className:"font-bold text-lg",children:"الاتجاهات"})]}),A.jsxs("div",{className:"space-y-3 text-sm",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("span",{className:"text-muted-foreground",children:"اتجاه البيع"}),A.jsx("span",{className:"font-semibold px-3 py-1 bg-green-100 text-green-700 rounded-full",children:e.trends.sale_trend})]}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("span",{className:"text-muted-foreground",children:"اتجاه الإيجار"}),A.jsx("span",{className:"font-semibold px-3 py-1 bg-blue-100 text-blue-700 rounded-full",children:e.trends.rent_trend})]}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("span",{className:"text-muted-foreground",children:"مستوى الطلب"}),A.jsx("span",{className:"font-semibold px-3 py-1 bg-amber-100 text-amber-700 rounded-full",children:e.trends.demand_level})]}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("span",{className:"text-muted-foreground",children:"مستوى العرض"}),A.jsx("span",{className:"font-semibold px-3 py-1 bg-purple-100 text-purple-700 rounded-full",children:e.trends.supply_level})]})]})]})]}),A.jsx("div",{className:"mb-12",children:A.jsx(BX,{})}),A.jsxs("div",{className:"p-8 rounded-xl bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 text-center",children:[A.jsx("h3",{className:"text-2xl font-bold mb-3",children:"قريباً في خطة Smart Plan"}),A.jsx("p",{className:"text-muted-foreground mb-4",children:"🔓 تحليل الحي الكامل، وأفضل مناطق السكن، والتكتلات السعريّة"}),A.jsxs("div",{className:"flex flex-wrap justify-center gap-3 text-sm",children:[A.jsx("span",{className:"px-4 py-2 bg-white rounded-full font-semibold",children:"خريطة تفاعلية"}),A.jsx("span",{className:"px-4 py-2 bg-white rounded-full font-semibold",children:"مقارنات الأحياء"}),A.jsx("span",{className:"px-4 py-2 bg-white rounded-full font-semibold",children:"توقعات الأسعار"}),A.jsx("span",{className:"px-4 py-2 bg-white rounded-full font-semibold",children:"تقارير مفصّلة"})]})]})]})})}var Gv={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.9.0/LICENSE.txt
 */var JX=Gv.exports,qO;function eW(){return qO||(qO=1,function(e,t){(function(i,a){e.exports=a()})(JX,function(){var i={},a={};function f(m,l,P){if(a[m]=P,m==="index"){var C="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",z={};return a.shared(z),a.index(i,z),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),i}}f("shared",["exports"],function(m){function l(c,n,o,d){return new(o||(o=Promise))(function(y,b){function T(N){try{k(d.next(N))}catch(L){b(L)}}function E(N){try{k(d.throw(N))}catch(L){b(L)}}function k(N){var L;N.done?y(N.value):(L=N.value,L instanceof o?L:new o(function(V){V(L)})).then(T,E)}k((d=d.apply(c,n||[])).next())})}function P(c,n){this.x=c,this.y=n}function C(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var z,O;typeof SuppressedError=="function"&&SuppressedError,P.prototype={clone(){return new P(this.x,this.y)},add(c){return this.clone()._add(c)},sub(c){return this.clone()._sub(c)},multByPoint(c){return this.clone()._multByPoint(c)},divByPoint(c){return this.clone()._divByPoint(c)},mult(c){return this.clone()._mult(c)},div(c){return this.clone()._div(c)},rotate(c){return this.clone()._rotate(c)},rotateAround(c,n){return this.clone()._rotateAround(c,n)},matMult(c){return this.clone()._matMult(c)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(c){return this.x===c.x&&this.y===c.y},dist(c){return Math.sqrt(this.distSqr(c))},distSqr(c){const n=c.x-this.x,o=c.y-this.y;return n*n+o*o},angle(){return Math.atan2(this.y,this.x)},angleTo(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith(c){return this.angleWithSep(c.x,c.y)},angleWithSep(c,n){return Math.atan2(this.x*n-this.y*c,this.x*c+this.y*n)},_matMult(c){const n=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=n,this},_add(c){return this.x+=c.x,this.y+=c.y,this},_sub(c){return this.x-=c.x,this.y-=c.y,this},_mult(c){return this.x*=c,this.y*=c,this},_div(c){return this.x/=c,this.y/=c,this},_multByPoint(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint(c){return this.x/=c.x,this.y/=c.y,this},_unit(){return this._div(this.mag()),this},_perp(){const c=this.y;return this.y=this.x,this.x=-c,this},_rotate(c){const n=Math.cos(c),o=Math.sin(c),d=o*this.x+n*this.y;return this.x=n*this.x-o*this.y,this.y=d,this},_rotateAround(c,n){const o=Math.cos(c),d=Math.sin(c),y=n.y+d*(this.x-n.x)+o*(this.y-n.y);return this.x=n.x+o*(this.x-n.x)-d*(this.y-n.y),this.y=y,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:P},P.convert=function(c){if(c instanceof P)return c;if(Array.isArray(c))return new P(+c[0],+c[1]);if(c.x!==void 0&&c.y!==void 0)return new P(+c.x,+c.y);throw new Error("Expected [x, y] or {x, y} point format")};var B=function(){if(O)return z;function c(n,o,d,y){this.cx=3*n,this.bx=3*(d-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(y-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=o,this.p2x=d,this.p2y=y}return O=1,z=c,c.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,o){if(o===void 0&&(o=1e-6),n<0)return 0;if(n>1)return 1;for(var d=n,y=0;y<8;y++){var b=this.sampleCurveX(d)-n;if(Math.abs(b)<o)return d;var T=this.sampleCurveDerivativeX(d);if(Math.abs(T)<1e-6)break;d-=b/T}var E=0,k=1;for(d=n,y=0;y<20&&(b=this.sampleCurveX(d),!(Math.abs(b-n)<o));y++)n>b?E=d:k=d,d=.5*(k-E)+E;return d},solve:function(n,o){return this.sampleCurveY(this.solveCurveX(n,o))}},z}(),F=C(B);let X,Z;function U(){return X==null&&(X=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),X}function re(){if(Z==null&&(Z=!1,U())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let d=0;d<5*5;d++){const y=4*d;n.fillStyle=`rgb(${y},${y+1},${y+2})`,n.fillRect(d%5,Math.floor(d/5),1,1)}const o=n.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&o[d]!==d){Z=!0;break}}}return Z||!1}var se=1e-6,ne=typeof Float32Array<"u"?Float32Array:Array;function ue(){var c=new ne(9);return ne!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function J(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function ae(){var c=new ne(3);return ne!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function he(c){var n=c[0],o=c[1],d=c[2];return Math.sqrt(n*n+o*o+d*d)}function ve(c,n,o){var d=new ne(3);return d[0]=c,d[1]=n,d[2]=o,d}function Ie(c,n,o){return c[0]=n[0]+o[0],c[1]=n[1]+o[1],c[2]=n[2]+o[2],c}function at(c,n,o){return c[0]=n[0]*o,c[1]=n[1]*o,c[2]=n[2]*o,c}function De(c,n,o){var d=n[0],y=n[1],b=n[2],T=o[0],E=o[1],k=o[2];return c[0]=y*k-b*E,c[1]=b*T-d*k,c[2]=d*E-y*T,c}var Fe,tt=he;function ut(c,n,o){var d=n[0],y=n[1],b=n[2],T=n[3];return c[0]=o[0]*d+o[4]*y+o[8]*b+o[12]*T,c[1]=o[1]*d+o[5]*y+o[9]*b+o[13]*T,c[2]=o[2]*d+o[6]*y+o[10]*b+o[14]*T,c[3]=o[3]*d+o[7]*y+o[11]*b+o[15]*T,c}function rt(){var c=new ne(4);return ne!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function Pe(c,n,o,d){var y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",b=Math.PI/360;n*=b,d*=b,o*=b;var T=Math.sin(n),E=Math.cos(n),k=Math.sin(o),N=Math.cos(o),L=Math.sin(d),V=Math.cos(d);switch(y){case"xyz":c[0]=T*N*V+E*k*L,c[1]=E*k*V-T*N*L,c[2]=E*N*L+T*k*V,c[3]=E*N*V-T*k*L;break;case"xzy":c[0]=T*N*V-E*k*L,c[1]=E*k*V-T*N*L,c[2]=E*N*L+T*k*V,c[3]=E*N*V+T*k*L;break;case"yxz":c[0]=T*N*V+E*k*L,c[1]=E*k*V-T*N*L,c[2]=E*N*L-T*k*V,c[3]=E*N*V+T*k*L;break;case"yzx":c[0]=T*N*V+E*k*L,c[1]=E*k*V+T*N*L,c[2]=E*N*L-T*k*V,c[3]=E*N*V-T*k*L;break;case"zxy":c[0]=T*N*V-E*k*L,c[1]=E*k*V+T*N*L,c[2]=E*N*L+T*k*V,c[3]=E*N*V-T*k*L;break;case"zyx":c[0]=T*N*V-E*k*L,c[1]=E*k*V+T*N*L,c[2]=E*N*L-T*k*V,c[3]=E*N*V+T*k*L;break;default:throw new Error("Unknown angle order "+y)}return c}function Ve(){var c=new ne(2);return ne!=Float32Array&&(c[0]=0,c[1]=0),c}function Ge(c,n){var o=new ne(2);return o[0]=c,o[1]=n,o}ae(),Fe=new ne(4),ne!=Float32Array&&(Fe[0]=0,Fe[1]=0,Fe[2]=0,Fe[3]=0),ae(),ve(1,0,0),ve(0,1,0),rt(),rt(),ue(),Ve();const ht=8192;function xe(c,n,o){return n*(ht/(c.tileSize*Math.pow(2,o-c.tileID.overscaledZ)))}function Xe(c,n){return(c%n+n)%n}function ot(c,n,o){return c*(1-o)+n*o}function st(c){if(c<=0)return 0;if(c>=1)return 1;const n=c*c,o=n*c;return 4*(c<.5?o:3*(c-n)+o-.75)}function Pt(c,n,o,d){const y=new F(c,n,o,d);return b=>y.solve(b)}const Vt=Pt(.25,.1,.25,1);function Nt(c,n,o){return Math.min(o,Math.max(n,c))}function yr(c,n,o){const d=o-n,y=((c-n)%d+d)%d+n;return y===n?o:y}function ar(c,...n){for(const o of n)for(const d in o)c[d]=o[d];return c}let Ot=1;function er(c,n,o){const d={};for(const y in c)d[y]=n.call(this,c[y],y,c);return d}function or(c,n,o){const d={};for(const y in c)n.call(this,c[y],y,c)&&(d[y]=c[y]);return d}function _t(c){return Array.isArray(c)?c.map(_t):typeof c=="object"&&c?er(c,_t):c}const fr={};function Qt(c){fr[c]||(typeof console<"u"&&console.warn(c),fr[c]=!0)}function Yr(c,n,o){return(o.y-c.y)*(n.x-c.x)>(n.y-c.y)*(o.x-c.x)}function tn(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let Kr=null;function ki(c){if(Kr==null){const n=c.navigator?c.navigator.userAgent:null;Kr=!!c.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Kr}function Wn(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Ba="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ii(c,n,o,d,y){return l(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const b=new VideoFrame(c,{timestamp:0});try{const T=b==null?void 0:b.format;if(!T||!T.startsWith("BGR")&&!T.startsWith("RGB"))throw new Error(`Unrecognized format ${T}`);const E=T.startsWith("BGR"),k=new Uint8ClampedArray(d*y*4);if(yield b.copyTo(k,function(N,L,V,W,K){const ee=4*Math.max(-L,0),le=(Math.max(0,V)-V)*W*4+ee,de=4*W,ye=Math.max(0,L),Be=Math.max(0,V);return{rect:{x:ye,y:Be,width:Math.min(N.width,L+W)-ye,height:Math.min(N.height,V+K)-Be},layout:[{offset:le,stride:de}]}}(c,n,o,d,y)),E)for(let N=0;N<k.length;N+=4){const L=k[N];k[N]=k[N+2],k[N+2]=L}return k}finally{b.close()}})}let Di,Yi;function Mo(c,n,o,d){return c.addEventListener(n,o,d),{unsubscribe:()=>{c.removeEventListener(n,o,d)}}}function Ts(c){return c*Math.PI/180}function zi(c){return c/Math.PI*180}const Jn={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},ci={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},ke="AbortError";function te(){return new Error(ke)}const ie={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function fe(c){return ie.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const Se="global-dispatcher";class Ee extends Error{constructor(n,o,d,y){super(`AJAXError: ${o} (${n}): ${d}`),this.status=n,this.statusText=o,this.url=d,this.body=y}}const ze=()=>tn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,He=function(c,n){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const d=fe(c.url);if(d)return d(c,n);if(tn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:Se},n)}if(!(/^file:/.test(o=c.url)||/^file:/.test(ze())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,y){return l(this,void 0,void 0,function*(){const b=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:ze(),signal:y.signal});let T,E;d.type!=="json"||b.headers.has("Accept")||b.headers.set("Accept","application/json");try{T=yield fetch(b)}catch(N){throw new Ee(0,N.message,d.url,new Blob)}if(!T.ok){const N=yield T.blob();throw new Ee(T.status,T.statusText,d.url,N)}E=d.type==="arrayBuffer"||d.type==="image"?T.arrayBuffer():d.type==="json"?T.json():T.text();const k=yield E;if(y.signal.aborted)throw te();return{data:k,cacheControl:T.headers.get("Cache-Control"),expires:T.headers.get("Expires")}})}(c,n);if(tn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:Se},n)}var o;return function(d,y){return new Promise((b,T)=>{var E;const k=new XMLHttpRequest;k.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(k.responseType="arraybuffer");for(const N in d.headers)k.setRequestHeader(N,d.headers[N]);d.type==="json"&&(k.responseType="text",!((E=d.headers)===null||E===void 0)&&E.Accept||k.setRequestHeader("Accept","application/json")),k.withCredentials=d.credentials==="include",k.onerror=()=>{T(new Error(k.statusText))},k.onload=()=>{if(!y.signal.aborted)if((k.status>=200&&k.status<300||k.status===0)&&k.response!==null){let N=k.response;if(d.type==="json")try{N=JSON.parse(k.response)}catch(L){return void T(L)}b({data:N,cacheControl:k.getResponseHeader("Cache-Control"),expires:k.getResponseHeader("Expires")})}else{const N=new Blob([k.response],{type:k.getResponseHeader("Content-Type")});T(new Ee(k.status,k.statusText,d.url,N))}},y.signal.addEventListener("abort",()=>{k.abort(),T(te())}),k.send(d.body)})}(c,n)};function Le(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const n=new URL(c),o=window.location;return n.protocol===o.protocol&&n.host===o.host}function ct(c,n,o){o[c]&&o[c].indexOf(n)!==-1||(o[c]=o[c]||[],o[c].push(n))}function St(c,n,o){if(o&&o[c]){const d=o[c].indexOf(n);d!==-1&&o[c].splice(d,1)}}class mt{constructor(n,o={}){ar(this,o),this.type=n}}class Bt extends mt{constructor(n,o={}){super("error",ar({error:n},o))}}class Zt{on(n,o){return this._listeners=this._listeners||{},ct(n,o,this._listeners),{unsubscribe:()=>{this.off(n,o)}}}off(n,o){return St(n,o,this._listeners),St(n,o,this._oneTimeListeners),this}once(n,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},ct(n,o,this._oneTimeListeners),this):new Promise(d=>this.once(n,d))}fire(n,o){typeof n=="string"&&(n=new mt(n,o||{}));const d=n.type;if(this.listens(d)){n.target=this;const y=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const E of y)E.call(this,n);const b=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const E of b)St(d,E,this._oneTimeListeners),E.call(this,n);const T=this._eventedParent;T&&(ar(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(n))}else n instanceof Bt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,o){return this._eventedParent=n,this._eventedParentData=o,this}}var Ue={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const jr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function qr(c,n){const o={};for(const d in c)d!=="ref"&&(o[d]=c[d]);return jr.forEach(d=>{d in n&&(o[d]=n[d])}),o}function Ft(c,n){if(Array.isArray(c)){if(!Array.isArray(n)||c.length!==n.length)return!1;for(let o=0;o<c.length;o++)if(!Ft(c[o],n[o]))return!1;return!0}if(typeof c=="object"&&c!==null&&n!==null){if(typeof n!="object"||Object.keys(c).length!==Object.keys(n).length)return!1;for(const o in c)if(!Ft(c[o],n[o]))return!1;return!0}return c===n}function Er(c,n){c.push(n)}function ei(c,n,o){Er(o,{command:"addSource",args:[c,n[c]]})}function ui(c,n,o){Er(n,{command:"removeSource",args:[c]}),o[c]=!0}function hn(c,n,o,d){ui(c,o,d),ei(c,n,o)}function Zr(c,n,o){let d;for(d in c[o])if(Object.prototype.hasOwnProperty.call(c[o],d)&&d!=="data"&&!Ft(c[o][d],n[o][d]))return!1;for(d in n[o])if(Object.prototype.hasOwnProperty.call(n[o],d)&&d!=="data"&&!Ft(c[o][d],n[o][d]))return!1;return!0}function Ar(c,n,o,d,y,b){c=c||{},n=n||{};for(const T in c)Object.prototype.hasOwnProperty.call(c,T)&&(Ft(c[T],n[T])||o.push({command:b,args:[d,T,n[T],y]}));for(const T in n)Object.prototype.hasOwnProperty.call(n,T)&&!Object.prototype.hasOwnProperty.call(c,T)&&(Ft(c[T],n[T])||o.push({command:b,args:[d,T,n[T],y]}))}function Mn(c){return c.id}function Ur(c,n){return c[n.id]=n,c}class wt{constructor(n,o,d,y){this.message=(n?`${n}: `:"")+d,y&&(this.identifier=y),o!=null&&o.__line__&&(this.line=o.__line__)}}function Po(c,...n){for(const o of n)for(const d in o)c[d]=o[d];return c}class ua extends Error{constructor(n,o){super(o),this.message=o,this.key=n}}class Mi{constructor(n,o=[]){this.parent=n,this.bindings={};for(const[d,y]of o)this.bindings[d]=y}concat(n){return new Mi(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Yn={kind:"null"},Ct={kind:"number"},mr={kind:"string"},pr={kind:"boolean"},vi={kind:"color"},dn={kind:"projectionDefinition"},so={kind:"object"},vr={kind:"value"},Fa={kind:"collator"},Eo={kind:"formatted"},cl={kind:"padding"},cc={kind:"colorArray"},Co={kind:"numberArray"},ul={kind:"resolvedImage"},Pn={kind:"variableAnchorOffsetCollection"};function Ni(c,n){return{kind:"array",itemType:c,N:n}}function Vr(c){if(c.kind==="array"){const n=Vr(c.itemType);return typeof c.N=="number"?`array<${n}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${n}>`}return c.kind}const hl=[Yn,Ct,mr,pr,vi,dn,Eo,so,Ni(vr),cl,Co,cc,ul,Pn];function dl(c,n){if(n.kind==="error")return null;if(c.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!dl(c.itemType,n.itemType))&&(typeof c.N!="number"||c.N===n.N))return null}else{if(c.kind===n.kind)return null;if(c.kind==="value"){for(const o of hl)if(!dl(o,n))return null}}return`Expected ${Vr(c)} but found ${Vr(n)} instead.`}function As(c,n){return n.some(o=>o.kind===c.kind)}function rs(c,n){return n.some(o=>o==="null"?c===null:o==="array"?Array.isArray(c):o==="object"?c&&!Array.isArray(c)&&typeof c=="object":o===typeof c)}function lo(c,n){return c.kind==="array"&&n.kind==="array"?c.itemType.kind===n.itemType.kind&&typeof c.N=="number":c.kind===n.kind}const Nf=.96422,eh=.82521,Pa=4/29,fl=6/29,Rf=3*fl*fl,th=fl*fl*fl,Lf=Math.PI/180,rh=180/Math.PI;function Bf(c){return(c%=360)<0&&(c+=360),c}function ha([c,n,o,d]){let y,b;const T=nh((.2225045*(c=ns(c))+.7168786*(n=ns(n))+.0606169*(o=ns(o)))/1);c===n&&n===o?y=b=T:(y=nh((.4360747*c+.3850649*n+.1430804*o)/Nf),b=nh((.0139322*c+.0971045*n+.7141733*o)/eh));const E=116*T-16;return[E<0?0:E,500*(y-T),200*(T-b),d]}function ns(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function nh(c){return c>th?Math.pow(c,1/3):c/Rf+Pa}function ih([c,n,o,d]){let y=(c+16)/116,b=isNaN(n)?y:y+n/500,T=isNaN(o)?y:y-o/200;return y=1*ah(y),b=Nf*ah(b),T=eh*ah(T),[$a(3.1338561*b-1.6168667*y-.4906146*T),$a(-.9787684*b+1.9161415*y+.033454*T),$a(.0719453*b-.2289914*y+1.4052427*T),d]}function $a(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function ah(c){return c>fl?c*c*c:Rf*(c-Pa)}const Ff=Object.hasOwn||function(c,n){return Object.prototype.hasOwnProperty.call(c,n)};function jo(c,n){return Ff(c,n)?c[n]:void 0}function Qc(c){return parseInt(c.padEnd(2,c),16)/255}function oh(c,n){return Ri(n?c/100:c,0,1)}function Ri(c,n,o){return Math.min(Math.max(n,c),o)}function Mr(c){return!c.some(Number.isNaN)}const uc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ki(c,n,o){return c+o*(n-c)}function Oo(c,n,o){return c.map((d,y)=>Ki(d,n[y],o))}class xr{constructor(n,o,d,y=1,b=!0){this.r=n,this.g=o,this.b=d,this.a=y,b||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[n,o,d,y]))}static parse(n){if(n instanceof xr)return n;if(typeof n!="string")return;const o=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const y=jo(uc,d);if(y){const[T,E,k]=y;return[T/255,E/255,k/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const T=d.length<6?1:2;let E=1;return[Qc(d.slice(E,E+=T)),Qc(d.slice(E,E+=T)),Qc(d.slice(E,E+=T)),Qc(d.slice(E,E+T)||"ff")]}if(d.startsWith("rgb")){const T=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[E,k,N,L,V,W,K,ee,le,de,ye,Be]=T,Ae=[L||" ",K||" ",de].join("");if(Ae==="  "||Ae==="  /"||Ae===",,"||Ae===",,,"){const je=[N,W,le].join(""),Ye=je==="%%%"?100:je===""?255:0;if(Ye){const it=[Ri(+k/Ye,0,1),Ri(+V/Ye,0,1),Ri(+ee/Ye,0,1),ye?oh(+ye,Be):1];if(Mr(it))return it}}return}}const b=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[T,E,k,N,L,V,W,K,ee]=b,le=[k||" ",L||" ",W].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const de=[+E,Ri(+N,0,100),Ri(+V,0,100),K?oh(+K,ee):1];if(Mr(de))return function([ye,Be,Ae,je]){function Ye(it){const gt=(it+ye/30)%12,Et=Be*Math.min(Ae,1-Ae);return Ae-Et*Math.max(-1,Math.min(gt-3,9-gt,1))}return ye=Bf(ye),Be/=100,Ae/=100,[Ye(0),Ye(8),Ye(4),je]}(de)}}}(n);return o?new xr(...o,!1):void 0}get rgb(){const{r:n,g:o,b:d,a:y}=this,b=y||1/0;return this.overwriteGetter("rgb",[n/b,o/b,d/b,y])}get hcl(){return this.overwriteGetter("hcl",function(n){const[o,d,y,b]=ha(n),T=Math.sqrt(d*d+y*y);return[Math.round(1e4*T)?Bf(Math.atan2(y,d)*rh):NaN,T,o,b]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ha(this.rgb))}overwriteGetter(n,o){return Object.defineProperty(this,n,{value:o}),o}toString(){const[n,o,d,y]=this.rgb;return`rgba(${[n,o,d].map(b=>Math.round(255*b)).join(",")},${y})`}static interpolate(n,o,d,y="rgb"){switch(y){case"rgb":{const[b,T,E,k]=Oo(n.rgb,o.rgb,d);return new xr(b,T,E,k,!1)}case"hcl":{const[b,T,E,k]=n.hcl,[N,L,V,W]=o.hcl;let K,ee;if(isNaN(b)||isNaN(N))isNaN(b)?isNaN(N)?K=NaN:(K=N,E!==1&&E!==0||(ee=L)):(K=b,V!==1&&V!==0||(ee=T));else{let Ae=N-b;N>b&&Ae>180?Ae-=360:N<b&&b-N>180&&(Ae+=360),K=b+d*Ae}const[le,de,ye,Be]=function([Ae,je,Ye,it]){return Ae=isNaN(Ae)?0:Ae*Lf,ih([Ye,Math.cos(Ae)*je,Math.sin(Ae)*je,it])}([K,ee??Ki(T,L,d),Ki(E,V,d),Ki(k,W,d)]);return new xr(le,de,ye,Be,!1)}case"lab":{const[b,T,E,k]=ih(Oo(n.lab,o.lab,d));return new xr(b,T,E,k,!1)}}}}xr.black=new xr(0,0,0,1),xr.white=new xr(1,1,1,1),xr.transparent=new xr(0,0,0,0),xr.red=new xr(1,0,0,1);class pl{constructor(n,o,d){this.sensitivity=n?o?"variant":"case":o?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,o){return this.collator.compare(n,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const ko=["bottom","center","top"];class co{constructor(n,o,d,y,b,T){this.text=n,this.image=o,this.scale=d,this.fontStack=y,this.textColor=b,this.verticalAlign=T}}class Qi{constructor(n){this.sections=n}static fromString(n){return new Qi([new co(n,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Qi?n:Qi.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class hi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof hi)return n;if(typeof n=="number")return new hi([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const o of n)if(typeof o!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new hi(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,d){return new hi(Oo(n.values,o.values,d))}}class di{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof di)return n;if(typeof n=="number")return new di([n]);if(Array.isArray(n)){for(const o of n)if(typeof o!="number")return;return new di(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,d){return new di(Oo(n.values,o.values,d))}}class Kn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Kn)return n;if(typeof n=="string"){const d=xr.parse(n);return d?new Kn([d]):void 0}if(!Array.isArray(n))return;const o=[];for(const d of n){if(typeof d!="string")return;const y=xr.parse(d);if(!y)return;o.push(y)}return new Kn(o)}toString(){return JSON.stringify(this.values)}static interpolate(n,o,d,y="rgb"){const b=[];if(n.values.length!=o.values.length)throw new Error(`colorArray: Arrays have mismatched length (${n.values.length} vs. ${o.values.length}), cannot interpolate.`);for(let T=0;T<n.values.length;T++)b.push(xr.interpolate(n.values[T],o.values[T],d,y));return new Kn(b)}}class Br extends Error{constructor(n){super(n),this.name="RuntimeError"}toJSON(){return this.message}}const Ms=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class fi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof fi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let o=0;o<n.length;o+=2){const d=n[o],y=n[o+1];if(typeof d!="string"||!Ms.has(d)||!Array.isArray(y)||y.length!==2||typeof y[0]!="number"||typeof y[1]!="number")return}return new fi(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,d){const y=n.values,b=o.values;if(y.length!==b.length)throw new Br(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${o.toString()}`);const T=[];for(let E=0;E<y.length;E+=2){if(y[E]!==b[E])throw new Br(`Cannot interpolate values containing mismatched anchors. from[${E}]: ${y[E]}, to[${E}]: ${b[E]}`);T.push(y[E]);const[k,N]=y[E+1],[L,V]=b[E+1];T.push([Ki(k,L,d),Ki(N,V,d)])}return new fi(T)}}class ti{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ti({name:n,available:!1}):null}}class Li{constructor(n,o,d){this.from=n,this.to=o,this.transition=d}static interpolate(n,o,d){return new Li(n,o,d)}static parse(n){return n instanceof Li?n:Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"?new Li(n[0],n[1],n[2]):typeof n=="object"&&typeof n.from=="string"&&typeof n.to=="string"&&typeof n.transition=="number"?new Li(n.from,n.to,n.transition):typeof n=="string"?new Li(n,n,1):void 0}}function Ps(c,n,o,d){return typeof c=="number"&&c>=0&&c<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof o=="number"&&o>=0&&o<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[c,n,o,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[c,n,o,d]:[c,n,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function rn(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Li||c instanceof xr||c instanceof pl||c instanceof Qi||c instanceof hi||c instanceof di||c instanceof Kn||c instanceof fi||c instanceof ti)return!0;if(Array.isArray(c)){for(const n of c)if(!rn(n))return!1;return!0}if(typeof c=="object"){for(const n in c)if(!rn(c[n]))return!1;return!0}return!1}function yn(c){if(c===null)return Yn;if(typeof c=="string")return mr;if(typeof c=="boolean")return pr;if(typeof c=="number")return Ct;if(c instanceof xr)return vi;if(c instanceof Li)return dn;if(c instanceof pl)return Fa;if(c instanceof Qi)return Eo;if(c instanceof hi)return cl;if(c instanceof di)return Co;if(c instanceof Kn)return cc;if(c instanceof fi)return Pn;if(c instanceof ti)return ul;if(Array.isArray(c)){const n=c.length;let o;for(const d of c){const y=yn(d);if(o){if(o===y)continue;o=vr;break}o=y}return Ni(o||vr,n)}return so}function br(c){const n=typeof c;return c===null?"":n==="string"||n==="number"||n==="boolean"?String(c):c instanceof xr||c instanceof Li||c instanceof Qi||c instanceof hi||c instanceof di||c instanceof Kn||c instanceof fi||c instanceof ti?c.toString():JSON.stringify(c)}class ur{constructor(n,o){this.type=n,this.value=o}static parse(n,o){if(n.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!rn(n[1]))return o.error("invalid value");const d=n[1];let y=yn(d);const b=o.expectedType;return y.kind!=="array"||y.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(y=b),new ur(y,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const pi={string:mr,number:Ct,boolean:pr,object:so};class hr{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let d,y=1;const b=n[0];if(b==="array"){let E,k;if(n.length>2){const N=n[1];if(typeof N!="string"||!(N in pi)||N==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);E=pi[N],y++}else E=vr;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return o.error('The length argument to "array" must be a positive integer literal',2);k=n[2],y++}d=Ni(E,k)}else{if(!pi[b])throw new Error(`Types doesn't contain name = ${b}`);d=pi[b]}const T=[];for(;y<n.length;y++){const E=o.parse(n[y],y,vr);if(!E)return null;T.push(E)}return new hr(d,T)}evaluate(n){for(let o=0;o<this.args.length;o++){const d=this.args[o].evaluate(n);if(!dl(this.type,yn(d)))return d;if(o===this.args.length-1)throw new Br(`Expected value to be of type ${Vr(this.type)}, but found ${Vr(yn(d))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const ml={"to-boolean":pr,"to-color":vi,"to-number":Ct,"to-string":mr};class ri{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const d=n[0];if(!ml[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&n.length!==2)return o.error("Expected one argument.");const y=ml[d],b=[];for(let T=1;T<n.length;T++){const E=o.parse(n[T],T,vr);if(!E)return null;b.push(E)}return new ri(y,b)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let o,d;for(const y of this.args){if(o=y.evaluate(n),d=null,o instanceof xr)return o;if(typeof o=="string"){const b=n.parseColor(o);if(b)return b}else if(Array.isArray(o)&&(d=o.length<3||o.length>4?`Invalid rgba value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Ps(o[0],o[1],o[2],o[3]),!d))return new xr(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Br(d||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const d of this.args){o=d.evaluate(n);const y=hi.parse(o);if(y)return y}throw new Br(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"numberArray":{let o;for(const d of this.args){o=d.evaluate(n);const y=di.parse(o);if(y)return y}throw new Br(`Could not parse numberArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"colorArray":{let o;for(const d of this.args){o=d.evaluate(n);const y=Kn.parse(o);if(y)return y}throw new Br(`Could not parse colorArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const d of this.args){o=d.evaluate(n);const y=fi.parse(o);if(y)return y}throw new Br(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const d of this.args){if(o=d.evaluate(n),o===null)return 0;const y=Number(o);if(!isNaN(y))return y}throw new Br(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return Qi.fromString(br(this.args[0].evaluate(n)));case"resolvedImage":return ti.fromString(br(this.args[0].evaluate(n)));case"projectionDefinition":return this.args[0].evaluate(n);default:return br(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const gd=["Unknown","Point","LineString","Polygon"];class gl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?gd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let o=this._parseColorCache.get(n);return o||(o=xr.parse(n),this._parseColorCache.set(n,o)),o}}class yl{constructor(n,o,d=[],y,b=new Mi,T=[]){this.registry=n,this.path=d,this.key=d.map(E=>`[${E}]`).join(""),this.scope=b,this.errors=T,this.expectedType=y,this._isConstant=o}parse(n,o,d,y,b={}){return o?this.concat(o,d,y)._parse(n,b):this._parse(n,b)}_parse(n,o){function d(y,b,T){return T==="assert"?new hr(b,[y]):T==="coerce"?new ri(b,[y]):y}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=n[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[y];if(b){let T=b.parse(n,this);if(!T)return null;if(this.expectedType){const E=this.expectedType,k=T.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||k.kind!=="value"){if(E.kind==="projectionDefinition"&&["string","array"].includes(k.kind)||["color","formatted","resolvedImage"].includes(E.kind)&&["value","string"].includes(k.kind)||["padding","numberArray"].includes(E.kind)&&["value","number","array"].includes(k.kind)||E.kind==="colorArray"&&["value","string","array"].includes(k.kind)||E.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(k.kind))T=d(T,E,o.typeAnnotation||"coerce");else if(this.checkSubtype(E,k))return null}else T=d(T,E,o.typeAnnotation||"assert")}if(!(T instanceof ur)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){const E=new gl;try{T=new ur(T.type,T.evaluate(E))}catch(k){return this.error(k.message),null}}return T}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,o,d){const y=typeof n=="number"?this.path.concat(n):this.path,b=d?this.scope.concat(d):this.scope;return new yl(this.registry,this._isConstant,y,o||null,b,this.errors)}error(n,...o){const d=`${this.key}${o.map(y=>`[${y}]`).join("")}`;this.errors.push(new ua(d,n))}checkSubtype(n,o){const d=dl(n,o);return d&&this.error(d),d}}class Io{constructor(n,o){this.type=o.type,this.bindings=[].concat(n),this.result=o}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const o of this.bindings)n(o[1]);n(this.result)}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const d=[];for(let b=1;b<n.length-1;b+=2){const T=n[b];if(typeof T!="string")return o.error(`Expected string, but found ${typeof T} instead.`,b);if(/[^a-zA-Z0-9_]/.test(T))return o.error("Variable names must contain only alphanumeric characters or '_'.",b);const E=o.parse(n[b+1],b+1);if(!E)return null;d.push([T,E])}const y=o.parse(n[n.length-1],n.length-1,o.expectedType,d);return y?new Io(d,y):null}outputDefined(){return this.result.outputDefined()}}class Es{constructor(n,o){this.type=o.type,this.name=n,this.boundExpression=o}static parse(n,o){if(n.length!==2||typeof n[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const d=n[1];return o.scope.has(d)?new Es(d,o.scope.get(d)):o.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class sh{constructor(n,o,d){this.type=n,this.index=o,this.input=d}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=o.parse(n[1],1,Ct),y=o.parse(n[2],2,Ni(o.expectedType||vr));return d&&y?new sh(y.type.itemType,d,y):null}evaluate(n){const o=this.index.evaluate(n),d=this.input.evaluate(n);if(o<0)throw new Br(`Array index out of bounds: ${o} < 0.`);if(o>=d.length)throw new Br(`Array index out of bounds: ${o} > ${d.length-1}.`);if(o!==Math.floor(o))throw new Br(`Array index must be an integer, but found ${o} instead.`);return d[o]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class lh{constructor(n,o){this.type=pr,this.needle=n,this.haystack=o}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=o.parse(n[1],1,vr),y=o.parse(n[2],2,vr);return d&&y?As(d.type,[pr,mr,Ct,Yn,vr])?new lh(d,y):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vr(d.type)} instead`):null}evaluate(n){const o=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!d)return!1;if(!rs(o,["boolean","string","number","null"]))throw new Br(`Expected first argument to be of type boolean, string, number or null, but found ${Vr(yn(o))} instead.`);if(!rs(d,["string","array"]))throw new Br(`Expected second argument to be of type array or string, but found ${Vr(yn(d))} instead.`);return d.indexOf(o)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Jc{constructor(n,o,d){this.type=Ct,this.needle=n,this.haystack=o,this.fromIndex=d}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const d=o.parse(n[1],1,vr),y=o.parse(n[2],2,vr);if(!d||!y)return null;if(!As(d.type,[pr,mr,Ct,Yn,vr]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vr(d.type)} instead`);if(n.length===4){const b=o.parse(n[3],3,Ct);return b?new Jc(d,y,b):null}return new Jc(d,y)}evaluate(n){const o=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!rs(o,["boolean","string","number","null"]))throw new Br(`Expected first argument to be of type boolean, string, number or null, but found ${Vr(yn(o))} instead.`);let y;if(this.fromIndex&&(y=this.fromIndex.evaluate(n)),rs(d,["string"])){const b=d.indexOf(o,y);return b===-1?-1:[...d.slice(0,b)].length}if(rs(d,["array"]))return d.indexOf(o,y);throw new Br(`Expected second argument to be of type array or string, but found ${Vr(yn(d))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Do{constructor(n,o,d,y,b,T){this.inputType=n,this.type=o,this.input=d,this.cases=y,this.outputs=b,this.otherwise=T}static parse(n,o){if(n.length<5)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return o.error("Expected an even number of arguments.");let d,y;o.expectedType&&o.expectedType.kind!=="value"&&(y=o.expectedType);const b={},T=[];for(let N=2;N<n.length-1;N+=2){let L=n[N];const V=n[N+1];Array.isArray(L)||(L=[L]);const W=o.concat(N);if(L.length===0)return W.error("Expected at least one branch label.");for(const ee of L){if(typeof ee!="number"&&typeof ee!="string")return W.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return W.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return W.error("Numeric branch labels must be integer values.");if(d){if(W.checkSubtype(d,yn(ee)))return null}else d=yn(ee);if(b[String(ee)]!==void 0)return W.error("Branch labels must be unique.");b[String(ee)]=T.length}const K=o.parse(V,N,y);if(!K)return null;y=y||K.type,T.push(K)}const E=o.parse(n[1],1,vr);if(!E)return null;const k=o.parse(n[n.length-1],n.length-1,y);return k?E.type.kind!=="value"&&o.concat(1).checkSubtype(d,E.type)?null:new Do(d,y,E,b,T,k):null}evaluate(n){const o=this.input.evaluate(n);return(yn(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class ni{constructor(n,o,d){this.type=n,this.branches=o,this.otherwise=d}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return o.error("Expected an odd number of arguments.");let d;o.expectedType&&o.expectedType.kind!=="value"&&(d=o.expectedType);const y=[];for(let T=1;T<n.length-1;T+=2){const E=o.parse(n[T],T,pr);if(!E)return null;const k=o.parse(n[T+1],T+1,d);if(!k)return null;y.push([E,k]),d=d||k.type}const b=o.parse(n[n.length-1],n.length-1,d);if(!b)return null;if(!d)throw new Error("Can't infer output type");return new ni(d,y,b)}evaluate(n){for(const[o,d]of this.branches)if(o.evaluate(n))return d.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[o,d]of this.branches)n(o),n(d);n(this.otherwise)}outputDefined(){return this.branches.every(([n,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class vl{constructor(n,o,d,y){this.type=n,this.input=o,this.beginIndex=d,this.endIndex=y}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const d=o.parse(n[1],1,vr),y=o.parse(n[2],2,Ct);if(!d||!y)return null;if(!As(d.type,[Ni(vr),mr,vr]))return o.error(`Expected first argument to be of type array or string, but found ${Vr(d.type)} instead`);if(n.length===4){const b=o.parse(n[3],3,Ct);return b?new vl(d.type,d,y,b):null}return new vl(d.type,d,y)}evaluate(n){const o=this.input.evaluate(n),d=this.beginIndex.evaluate(n);let y;if(this.endIndex&&(y=this.endIndex.evaluate(n)),rs(o,["string"]))return[...o].slice(d,y).join("");if(rs(o,["array"]))return o.slice(d,y);throw new Br(`Expected first argument to be of type array or string, but found ${Vr(yn(o))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function eu(c,n){const o=c.length-1;let d,y,b=0,T=o,E=0;for(;b<=T;)if(E=Math.floor((b+T)/2),d=c[E],y=c[E+1],d<=n){if(E===o||n<y)return E;b=E+1}else{if(!(d>n))throw new Br("Input is not a number.");T=E-1}return 0}class Cs{constructor(n,o,d){this.type=n,this.input=o,this.labels=[],this.outputs=[];for(const[y,b]of d)this.labels.push(y),this.outputs.push(b)}static parse(n,o){if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");const d=o.parse(n[1],1,Ct);if(!d)return null;const y=[];let b=null;o.expectedType&&o.expectedType.kind!=="value"&&(b=o.expectedType);for(let T=1;T<n.length;T+=2){const E=T===1?-1/0:n[T],k=n[T+1],N=T,L=T+1;if(typeof E!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(y.length&&y[y.length-1][0]>=E)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',N);const V=o.parse(k,L,b);if(!V)return null;b=b||V.type,y.push([E,V])}return new Cs(b,d,y)}evaluate(n){const o=this.labels,d=this.outputs;if(o.length===1)return d[0].evaluate(n);const y=this.input.evaluate(n);if(y<=o[0])return d[0].evaluate(n);const b=o.length;return y>=o[b-1]?d[b-1].evaluate(n):d[eu(o,y)].evaluate(n)}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function _i(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var ch,tu,$f=function(){if(tu)return ch;function c(n,o,d,y){this.cx=3*n,this.bx=3*(d-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(y-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=o,this.p2x=d,this.p2y=y}return tu=1,ch=c,c.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,o){if(o===void 0&&(o=1e-6),n<0)return 0;if(n>1)return 1;for(var d=n,y=0;y<8;y++){var b=this.sampleCurveX(d)-n;if(Math.abs(b)<o)return d;var T=this.sampleCurveDerivativeX(d);if(Math.abs(T)<1e-6)break;d-=b/T}var E=0,k=1;for(d=n,y=0;y<20&&(b=this.sampleCurveX(d),!(Math.abs(b-n)<o));y++)n>b?E=d:k=d,d=.5*(k-E)+E;return d},solve:function(n,o){return this.sampleCurveY(this.solveCurveX(n,o))}},ch}(),Cm=_i($f);class mi{constructor(n,o,d,y,b){this.type=n,this.operator=o,this.interpolation=d,this.input=y,this.labels=[],this.outputs=[];for(const[T,E]of b)this.labels.push(T),this.outputs.push(E)}static interpolationFactor(n,o,d,y){let b=0;if(n.name==="exponential")b=hc(o,n.base,d,y);else if(n.name==="linear")b=hc(o,1,d,y);else if(n.name==="cubic-bezier"){const T=n.controlPoints;b=new Cm(T[0],T[1],T[2],T[3]).solve(hc(o,1,d,y))}return b}static parse(n,o){let[d,y,b,...T]=n;if(!Array.isArray(y)||y.length===0)return o.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const N=y[1];if(typeof N!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:N}}else{if(y[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const N=y.slice(1);if(N.length!==4||N.some(L=>typeof L!="number"||L<0||L>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:N}}}if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(b=o.parse(b,2,Ct),!b)return null;const E=[];let k=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||o.expectedType==cc?o.expectedType&&o.expectedType.kind!=="value"&&(k=o.expectedType):k=vi;for(let N=0;N<T.length;N+=2){const L=T[N],V=T[N+1],W=N+3,K=N+4;if(typeof L!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(E.length&&E[E.length-1][0]>=L)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);const ee=o.parse(V,K,k);if(!ee)return null;k=k||ee.type,E.push([L,ee])}return lo(k,Ct)||lo(k,dn)||lo(k,vi)||lo(k,cl)||lo(k,Co)||lo(k,cc)||lo(k,Pn)||lo(k,Ni(Ct))?new mi(k,d,y,b,E):o.error(`Type ${Vr(k)} is not interpolatable.`)}evaluate(n){const o=this.labels,d=this.outputs;if(o.length===1)return d[0].evaluate(n);const y=this.input.evaluate(n);if(y<=o[0])return d[0].evaluate(n);const b=o.length;if(y>=o[b-1])return d[b-1].evaluate(n);const T=eu(o,y),E=mi.interpolationFactor(this.interpolation,y,o[T],o[T+1]),k=d[T].evaluate(n),N=d[T+1].evaluate(n);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ki(k,N,E);case"color":return xr.interpolate(k,N,E);case"padding":return hi.interpolate(k,N,E);case"colorArray":return Kn.interpolate(k,N,E);case"numberArray":return di.interpolate(k,N,E);case"variableAnchorOffsetCollection":return fi.interpolate(k,N,E);case"array":return Oo(k,N,E);case"projectionDefinition":return Li.interpolate(k,N,E)}case"interpolate-hcl":switch(this.type.kind){case"color":return xr.interpolate(k,N,E,"hcl");case"colorArray":return Kn.interpolate(k,N,E,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return xr.interpolate(k,N,E,"lab");case"colorArray":return Kn.interpolate(k,N,E,"lab")}}}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function hc(c,n,o,d){const y=d-o,b=c-o;return y===0?0:n===1?b/y:(Math.pow(n,b)-1)/(Math.pow(n,y)-1)}const da={color:xr.interpolate,number:Ki,padding:hi.interpolate,numberArray:di.interpolate,colorArray:Kn.interpolate,variableAnchorOffsetCollection:fi.interpolate,array:Oo};class uh{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let d=null;const y=o.expectedType;y&&y.kind!=="value"&&(d=y);const b=[];for(const E of n.slice(1)){const k=o.parse(E,1+b.length,d,void 0,{typeAnnotation:"omit"});if(!k)return null;d=d||k.type,b.push(k)}if(!d)throw new Error("No output type");const T=y&&b.some(E=>dl(y,E.type));return new uh(T?vr:d,b)}evaluate(n){let o,d=null,y=0;for(const b of this.args)if(y++,d=b.evaluate(n),d&&d instanceof ti&&!d.available&&(o||(o=d.name),d=null,y===this.args.length&&(d=o)),d!==null)break;return d}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function yd(c,n){return c==="=="||c==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function ru(c,n,o,d){return d.compare(n,o)===0}function zo(c,n,o){const d=c!=="=="&&c!=="!=";return class Az{constructor(b,T,E){this.type=pr,this.lhs=b,this.rhs=T,this.collator=E,this.hasUntypedArgument=b.type.kind==="value"||T.type.kind==="value"}static parse(b,T){if(b.length!==3&&b.length!==4)return T.error("Expected two or three arguments.");const E=b[0];let k=T.parse(b[1],1,vr);if(!k)return null;if(!yd(E,k.type))return T.concat(1).error(`"${E}" comparisons are not supported for type '${Vr(k.type)}'.`);let N=T.parse(b[2],2,vr);if(!N)return null;if(!yd(E,N.type))return T.concat(2).error(`"${E}" comparisons are not supported for type '${Vr(N.type)}'.`);if(k.type.kind!==N.type.kind&&k.type.kind!=="value"&&N.type.kind!=="value")return T.error(`Cannot compare types '${Vr(k.type)}' and '${Vr(N.type)}'.`);d&&(k.type.kind==="value"&&N.type.kind!=="value"?k=new hr(N.type,[k]):k.type.kind!=="value"&&N.type.kind==="value"&&(N=new hr(k.type,[N])));let L=null;if(b.length===4){if(k.type.kind!=="string"&&N.type.kind!=="string"&&k.type.kind!=="value"&&N.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(L=T.parse(b[3],3,Fa),!L)return null}return new Az(k,N,L)}evaluate(b){const T=this.lhs.evaluate(b),E=this.rhs.evaluate(b);if(d&&this.hasUntypedArgument){const k=yn(T),N=yn(E);if(k.kind!==N.kind||k.kind!=="string"&&k.kind!=="number")throw new Br(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${k.kind}, ${N.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const k=yn(T),N=yn(E);if(k.kind!=="string"||N.kind!=="string")return n(b,T,E)}return this.collator?o(b,T,E,this.collator.evaluate(b)):n(b,T,E)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}}}const uo=zo("==",function(c,n,o){return n===o},ru),qf=zo("!=",function(c,n,o){return n!==o},function(c,n,o,d){return!ru(0,n,o,d)}),hh=zo("<",function(c,n,o){return n<o},function(c,n,o,d){return d.compare(n,o)<0}),jm=zo(">",function(c,n,o){return n>o},function(c,n,o,d){return d.compare(n,o)>0}),vd=zo("<=",function(c,n,o){return n<=o},function(c,n,o,d){return d.compare(n,o)<=0}),Om=zo(">=",function(c,n,o){return n>=o},function(c,n,o,d){return d.compare(n,o)>=0});class dh{constructor(n,o,d){this.type=Fa,this.locale=d,this.caseSensitive=n,this.diacriticSensitive=o}static parse(n,o){if(n.length!==2)return o.error("Expected one argument.");const d=n[1];if(typeof d!="object"||Array.isArray(d))return o.error("Collator options argument must be an object.");const y=o.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,pr);if(!y)return null;const b=o.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,pr);if(!b)return null;let T=null;return d.locale&&(T=o.parse(d.locale,1,mr),!T)?null:new dh(y,b,T)}evaluate(n){return new pl(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class _d{constructor(n,o,d,y,b){this.type=mr,this.number=n,this.locale=o,this.currency=d,this.minFractionDigits=y,this.maxFractionDigits=b}static parse(n,o){if(n.length!==3)return o.error("Expected two arguments.");const d=o.parse(n[1],1,Ct);if(!d)return null;const y=n[2];if(typeof y!="object"||Array.isArray(y))return o.error("NumberFormat options argument must be an object.");let b=null;if(y.locale&&(b=o.parse(y.locale,1,mr),!b))return null;let T=null;if(y.currency&&(T=o.parse(y.currency,1,mr),!T))return null;let E=null;if(y["min-fraction-digits"]&&(E=o.parse(y["min-fraction-digits"],1,Ct),!E))return null;let k=null;return y["max-fraction-digits"]&&(k=o.parse(y["max-fraction-digits"],1,Ct),!k)?null:new _d(d,b,T,E,k)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class fh{constructor(n){this.type=Eo,this.sections=n}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const d=n[1];if(!Array.isArray(d)&&typeof d=="object")return o.error("First argument must be an image or text section.");const y=[];let b=!1;for(let T=1;T<=n.length-1;++T){const E=n[T];if(b&&typeof E=="object"&&!Array.isArray(E)){b=!1;let k=null;if(E["font-scale"]&&(k=o.parse(E["font-scale"],1,Ct),!k))return null;let N=null;if(E["text-font"]&&(N=o.parse(E["text-font"],1,Ni(mr)),!N))return null;let L=null;if(E["text-color"]&&(L=o.parse(E["text-color"],1,vi),!L))return null;let V=null;if(E["vertical-align"]){if(typeof E["vertical-align"]=="string"&&!ko.includes(E["vertical-align"]))return o.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${E["vertical-align"]}' instead.`);if(V=o.parse(E["vertical-align"],1,mr),!V)return null}const W=y[y.length-1];W.scale=k,W.font=N,W.textColor=L,W.verticalAlign=V}else{const k=o.parse(n[T],1,vr);if(!k)return null;const N=k.type.kind;if(N!=="string"&&N!=="value"&&N!=="null"&&N!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,y.push({content:k,scale:null,font:null,textColor:null,verticalAlign:null})}}return new fh(y)}evaluate(n){return new Qi(this.sections.map(o=>{const d=o.content.evaluate(n);return yn(d)===ul?new co("",d,null,null,null,o.verticalAlign?o.verticalAlign.evaluate(n):null):new co(br(d),null,o.scale?o.scale.evaluate(n):null,o.font?o.font.evaluate(n).join(","):null,o.textColor?o.textColor.evaluate(n):null,o.verticalAlign?o.verticalAlign.evaluate(n):null)}))}eachChild(n){for(const o of this.sections)n(o.content),o.scale&&n(o.scale),o.font&&n(o.font),o.textColor&&n(o.textColor),o.verticalAlign&&n(o.verticalAlign)}outputDefined(){return!1}}class js{constructor(n){this.type=ul,this.input=n}static parse(n,o){if(n.length!==2)return o.error("Expected two arguments.");const d=o.parse(n[1],1,mr);return d?new js(d):o.error("No image name provided.")}evaluate(n){const o=this.input.evaluate(n),d=ti.fromString(o);return d&&n.availableImages&&(d.available=n.availableImages.indexOf(o)>-1),d}eachChild(n){n(this.input)}outputDefined(){return!1}}class _l{constructor(n){this.type=Ct,this.input=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const d=o.parse(n[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Vr(d.type)} instead.`):new _l(d):null}evaluate(n){const o=this.input.evaluate(n);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new Br(`Expected value to be of type string or array, but found ${Vr(yn(o))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const ho=8192;function xd(c,n){const o=(180+c[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,y=Math.pow(2,n.z);return[Math.round(o*y*ho),Math.round(d*y*ho)]}function ph(c,n){const o=Math.pow(2,n.z);return[(y=(c[0]/ho+n.x)/o,360*y-180),(d=(c[1]/ho+n.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,y}function xl(c,n){c[0]=Math.min(c[0],n[0]),c[1]=Math.min(c[1],n[1]),c[2]=Math.max(c[2],n[0]),c[3]=Math.max(c[3],n[1])}function dc(c,n){return!(c[0]<=n[0]||c[2]>=n[2]||c[1]<=n[1]||c[3]>=n[3])}function Uf(c,n,o){const d=c[0]-n[0],y=c[1]-n[1],b=c[0]-o[0],T=c[1]-o[1];return d*T-b*y==0&&d*b<=0&&y*T<=0}function is(c,n,o,d){return(y=[d[0]-o[0],d[1]-o[1]])[0]*(b=[n[0]-c[0],n[1]-c[1]])[1]-y[1]*b[0]!=0&&!(!pc(c,n,o,d)||!pc(o,d,c,n));var y,b}function km(c,n,o){for(const d of o)for(let y=0;y<d.length-1;++y)if(is(c,n,d[y],d[y+1]))return!0;return!1}function fc(c,n,o=!1){let d=!1;for(const E of n)for(let k=0;k<E.length-1;k++){if(Uf(c,E[k],E[k+1]))return o;(b=E[k])[1]>(y=c)[1]!=(T=E[k+1])[1]>y[1]&&y[0]<(T[0]-b[0])*(y[1]-b[1])/(T[1]-b[1])+b[0]&&(d=!d)}var y,b,T;return d}function Vf(c,n){for(const o of n)if(fc(c,o))return!0;return!1}function mh(c,n){for(const o of c)if(!fc(o,n))return!1;for(let o=0;o<c.length-1;++o)if(km(c[o],c[o+1],n))return!1;return!0}function bd(c,n){for(const o of n)if(mh(c,o))return!0;return!1}function pc(c,n,o,d){const y=d[0]-o[0],b=d[1]-o[1],T=(c[0]-o[0])*b-y*(c[1]-o[1]),E=(n[0]-o[0])*b-y*(n[1]-o[1]);return T>0&&E<0||T<0&&E>0}function bl(c,n,o){const d=[];for(let y=0;y<c.length;y++){const b=[];for(let T=0;T<c[y].length;T++){const E=xd(c[y][T],o);xl(n,E),b.push(E)}d.push(b)}return d}function Gf(c,n,o){const d=[];for(let y=0;y<c.length;y++){const b=bl(c[y],n,o);d.push(b)}return d}function nu(c,n,o,d){if(c[0]<o[0]||c[0]>o[2]){const y=.5*d;let b=c[0]-o[0]>y?-d:o[0]-c[0]>y?d:0;b===0&&(b=c[0]-o[2]>y?-d:o[2]-c[0]>y?d:0),c[0]+=b}xl(n,c)}function mc(c,n,o,d){const y=Math.pow(2,d.z)*ho,b=[d.x*ho,d.y*ho],T=[];for(const E of c)for(const k of E){const N=[k.x+b[0],k.y+b[1]];nu(N,n,o,y),T.push(N)}return T}function wd(c,n,o,d){const y=Math.pow(2,d.z)*ho,b=[d.x*ho,d.y*ho],T=[];for(const k of c){const N=[];for(const L of k){const V=[L.x+b[0],L.y+b[1]];xl(n,V),N.push(V)}T.push(N)}if(n[2]-n[0]<=y/2){(E=n)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const k of T)for(const N of k)nu(N,n,o,y)}var E;return T}class as{constructor(n,o){this.type=pr,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(rn(n[1])){const d=n[1];if(d.type==="FeatureCollection"){const y=[];for(const b of d.features){const{type:T,coordinates:E}=b.geometry;T==="Polygon"&&y.push(E),T==="MultiPolygon"&&y.push(...E)}if(y.length)return new as(d,{type:"MultiPolygon",coordinates:y})}else if(d.type==="Feature"){const y=d.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new as(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new as(d,d)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(o,d){const y=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],T=o.canonicalID();if(d.type==="Polygon"){const E=bl(d.coordinates,b,T),k=mc(o.geometry(),y,b,T);if(!dc(y,b))return!1;for(const N of k)if(!fc(N,E))return!1}if(d.type==="MultiPolygon"){const E=Gf(d.coordinates,b,T),k=mc(o.geometry(),y,b,T);if(!dc(y,b))return!1;for(const N of k)if(!Vf(N,E))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(o,d){const y=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],T=o.canonicalID();if(d.type==="Polygon"){const E=bl(d.coordinates,b,T),k=wd(o.geometry(),y,b,T);if(!dc(y,b))return!1;for(const N of k)if(!mh(N,E))return!1}if(d.type==="MultiPolygon"){const E=Gf(d.coordinates,b,T),k=wd(o.geometry(),y,b,T);if(!dc(y,b))return!1;for(const N of k)if(!bd(N,E))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let gh=class{constructor(c=[],n=(o,d)=>o<d?-1:o>d?1:0){if(this.data=c,this.length=this.data.length,this.compare=n,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:n,compare:o}=this,d=n[c];for(;c>0;){const y=c-1>>1,b=n[y];if(o(d,b)>=0)break;n[c]=b,c=y}n[c]=d}_down(c){const{data:n,compare:o}=this,d=this.length>>1,y=n[c];for(;c<d;){let b=1+(c<<1);const T=b+1;if(T<this.length&&o(n[T],n[b])<0&&(b=T),o(n[b],y)>=0)break;n[c]=n[b],c=b}n[c]=y}};function Sd(c,n,o=0,d=c.length-1,y=Td){for(;d>o;){if(d-o>600){const k=d-o+1,N=n-o+1,L=Math.log(k),V=.5*Math.exp(2*L/3),W=.5*Math.sqrt(L*V*(k-V)/k)*(N-k/2<0?-1:1);Sd(c,n,Math.max(o,Math.floor(n-N*V/k+W)),Math.min(d,Math.floor(n+(k-N)*V/k+W)),y)}const b=c[n];let T=o,E=d;for(Os(c,o,n),y(c[d],b)>0&&Os(c,o,d);T<E;){for(Os(c,T,E),T++,E--;y(c[T],b)<0;)T++;for(;y(c[E],b)>0;)E--}y(c[o],b)===0?Os(c,o,E):(E++,Os(c,E,d)),E<=n&&(o=E+1),n<=E&&(d=E-1)}}function Os(c,n,o){const d=c[n];c[n]=c[o],c[o]=d}function Td(c,n){return c<n?-1:c>n?1:0}function yh(c,n){if(c.length<=1)return[c];const o=[];let d,y;for(const b of c){const T=Zf(b);T!==0&&(b.area=Math.abs(T),y===void 0&&(y=T<0),y===T<0?(d&&o.push(d),d=[b]):d.push(b))}if(d&&o.push(d),n>1)for(let b=0;b<o.length;b++)o[b].length<=n||(Sd(o[b],n,1,o[b].length-1,Im),o[b]=o[b].slice(0,n));return o}function Im(c,n){return n.area-c.area}function Zf(c){let n=0;for(let o,d,y=0,b=c.length,T=b-1;y<b;T=y++)o=c[y],d=c[T],n+=(d.x-o.x)*(o.y+d.y);return n}const Ad=1/298.257223563,Hf=Ad*(2-Ad),fa=Math.PI/180;class wl{constructor(n){const o=6378.137*fa*1e3,d=Math.cos(n*fa),y=1/(1-Hf*(1-d*d)),b=Math.sqrt(y);this.kx=o*b*d,this.ky=o*b*y*(1-Hf)}distance(n,o){const d=this.wrap(n[0]-o[0])*this.kx,y=(n[1]-o[1])*this.ky;return Math.sqrt(d*d+y*y)}pointOnLine(n,o){let d,y,b,T,E=1/0;for(let k=0;k<n.length-1;k++){let N=n[k][0],L=n[k][1],V=this.wrap(n[k+1][0]-N)*this.kx,W=(n[k+1][1]-L)*this.ky,K=0;V===0&&W===0||(K=(this.wrap(o[0]-N)*this.kx*V+(o[1]-L)*this.ky*W)/(V*V+W*W),K>1?(N=n[k+1][0],L=n[k+1][1]):K>0&&(N+=V/this.kx*K,L+=W/this.ky*K)),V=this.wrap(o[0]-N)*this.kx,W=(o[1]-L)*this.ky;const ee=V*V+W*W;ee<E&&(E=ee,d=N,y=L,b=k,T=K)}return{point:[d,y],index:b,t:Math.max(0,Math.min(1,T))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function vh(c,n){return n[0]-c[0]}function iu(c){return c[1]-c[0]+1}function No(c,n){return c[1]>=c[0]&&c[1]<n}function _h(c,n){if(c[0]>c[1])return[null,null];const o=iu(c);if(n){if(o===2)return[c,null];const y=Math.floor(o/2);return[[c[0],c[0]+y],[c[0]+y,c[1]]]}if(o===1)return[c,null];const d=Math.floor(o/2)-1;return[[c[0],c[0]+d],[c[0]+d+1,c[1]]]}function au(c,n){if(!No(n,c.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let d=n[0];d<=n[1];++d)xl(o,c[d]);return o}function Fr(c){const n=[1/0,1/0,-1/0,-1/0];for(const o of c)for(const d of o)xl(n,d);return n}function Sl(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function ou(c,n,o){if(!Sl(c)||!Sl(n))return NaN;let d=0,y=0;return c[2]<n[0]&&(d=n[0]-c[2]),c[0]>n[2]&&(d=c[0]-n[2]),c[1]>n[3]&&(y=c[1]-n[3]),c[3]<n[1]&&(y=n[1]-c[3]),o.distance([0,0],[d,y])}function fo(c,n,o){const d=o.pointOnLine(n,c);return o.distance(c,d.point)}function su(c,n,o,d,y){const b=Math.min(fo(c,[o,d],y),fo(n,[o,d],y)),T=Math.min(fo(o,[c,n],y),fo(d,[c,n],y));return Math.min(b,T)}function Xf(c,n,o,d,y){if(!No(n,c.length)||!No(d,o.length))return 1/0;let b=1/0;for(let T=n[0];T<n[1];++T){const E=c[T],k=c[T+1];for(let N=d[0];N<d[1];++N){const L=o[N],V=o[N+1];if(is(E,k,L,V))return 0;b=Math.min(b,su(E,k,L,V,y))}}return b}function Tl(c,n,o,d,y){if(!No(n,c.length)||!No(d,o.length))return NaN;let b=1/0;for(let T=n[0];T<=n[1];++T)for(let E=d[0];E<=d[1];++E)if(b=Math.min(b,y.distance(c[T],o[E])),b===0)return b;return b}function gc(c,n,o){if(fc(c,n,!0))return 0;let d=1/0;for(const y of n){const b=y[0],T=y[y.length-1];if(b!==T&&(d=Math.min(d,fo(c,[T,b],o)),d===0))return d;const E=o.pointOnLine(y,c);if(d=Math.min(d,o.distance(c,E.point)),d===0)return d}return d}function Md(c,n,o,d){if(!No(n,c.length))return NaN;for(let b=n[0];b<=n[1];++b)if(fc(c[b],o,!0))return 0;let y=1/0;for(let b=n[0];b<n[1];++b){const T=c[b],E=c[b+1];for(const k of o)for(let N=0,L=k.length,V=L-1;N<L;V=N++){const W=k[V],K=k[N];if(is(T,E,W,K))return 0;y=Math.min(y,su(T,E,W,K,d))}}return y}function Pd(c,n){for(const o of c)for(const d of o)if(fc(d,n,!0))return!0;return!1}function Al(c,n,o,d=1/0){const y=Fr(c),b=Fr(n);if(d!==1/0&&ou(y,b,o)>=d)return d;if(dc(y,b)){if(Pd(c,n))return 0}else if(Pd(n,c))return 0;let T=1/0;for(const E of c)for(let k=0,N=E.length,L=N-1;k<N;L=k++){const V=E[L],W=E[k];for(const K of n)for(let ee=0,le=K.length,de=le-1;ee<le;de=ee++){const ye=K[de],Be=K[ee];if(is(V,W,ye,Be))return 0;T=Math.min(T,su(V,W,ye,Be,o))}}return T}function Ed(c,n,o,d,y,b){if(!b)return;const T=ou(au(d,b),y,o);T<n&&c.push([T,b,[0,0]])}function lu(c,n,o,d,y,b,T){if(!b||!T)return;const E=ou(au(d,b),au(y,T),o);E<n&&c.push([E,b,T])}function cu(c,n,o,d,y=1/0){let b=Math.min(d.distance(c[0],o[0][0]),y);if(b===0)return b;const T=new gh([[0,[0,c.length-1],[0,0]]],vh),E=Fr(o);for(;T.length>0;){const k=T.pop();if(k[0]>=b)continue;const N=k[1],L=n?50:100;if(iu(N)<=L){if(!No(N,c.length))return NaN;if(n){const V=Md(c,N,o,d);if(isNaN(V)||V===0)return V;b=Math.min(b,V)}else for(let V=N[0];V<=N[1];++V){const W=gc(c[V],o,d);if(b=Math.min(b,W),b===0)return 0}}else{const V=_h(N,n);Ed(T,b,d,c,E,V[0]),Ed(T,b,d,c,E,V[1])}}return b}function xh(c,n,o,d,y,b=1/0){let T=Math.min(b,y.distance(c[0],o[0]));if(T===0)return T;const E=new gh([[0,[0,c.length-1],[0,o.length-1]]],vh);for(;E.length>0;){const k=E.pop();if(k[0]>=T)continue;const N=k[1],L=k[2],V=n?50:100,W=d?50:100;if(iu(N)<=V&&iu(L)<=W){if(!No(N,c.length)&&No(L,o.length))return NaN;let K;if(n&&d)K=Xf(c,N,o,L,y),T=Math.min(T,K);else if(n&&!d){const ee=c.slice(N[0],N[1]+1);for(let le=L[0];le<=L[1];++le)if(K=fo(o[le],ee,y),T=Math.min(T,K),T===0)return T}else if(!n&&d){const ee=o.slice(L[0],L[1]+1);for(let le=N[0];le<=N[1];++le)if(K=fo(c[le],ee,y),T=Math.min(T,K),T===0)return T}else K=Tl(c,N,o,L,y),T=Math.min(T,K)}else{const K=_h(N,n),ee=_h(L,d);lu(E,T,y,c,o,K[0],ee[0]),lu(E,T,y,c,o,K[0],ee[1]),lu(E,T,y,c,o,K[1],ee[0]),lu(E,T,y,c,o,K[1],ee[1])}}return T}function Cd(c){return c.type==="MultiPolygon"?c.coordinates.map(n=>({type:"Polygon",coordinates:n})):c.type==="MultiLineString"?c.coordinates.map(n=>({type:"LineString",coordinates:n})):c.type==="MultiPoint"?c.coordinates.map(n=>({type:"Point",coordinates:n})):[c]}class Ml{constructor(n,o){this.type=Ct,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(rn(n[1])){const d=n[1];if(d.type==="FeatureCollection")return new Ml(d,d.features.map(y=>Cd(y.geometry)).flat());if(d.type==="Feature")return new Ml(d,Cd(d.geometry));if("type"in d&&"coordinates"in d)return new Ml(d,Cd(d))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(o,d){const y=o.geometry(),b=y.flat().map(k=>ph([k.x,k.y],o.canonical));if(y.length===0)return NaN;const T=new wl(b[0][1]);let E=1/0;for(const k of d){switch(k.type){case"Point":E=Math.min(E,xh(b,!1,[k.coordinates],!1,T,E));break;case"LineString":E=Math.min(E,xh(b,!1,k.coordinates,!0,T,E));break;case"Polygon":E=Math.min(E,cu(b,!1,k.coordinates,T,E))}if(E===0)return E}return E}(n,this.geometries);if(n.geometryType()==="LineString")return function(o,d){const y=o.geometry(),b=y.flat().map(k=>ph([k.x,k.y],o.canonical));if(y.length===0)return NaN;const T=new wl(b[0][1]);let E=1/0;for(const k of d){switch(k.type){case"Point":E=Math.min(E,xh(b,!0,[k.coordinates],!1,T,E));break;case"LineString":E=Math.min(E,xh(b,!0,k.coordinates,!0,T,E));break;case"Polygon":E=Math.min(E,cu(b,!0,k.coordinates,T,E))}if(E===0)return E}return E}(n,this.geometries);if(n.geometryType()==="Polygon")return function(o,d){const y=o.geometry();if(y.length===0||y[0].length===0)return NaN;const b=yh(y,0).map(k=>k.map(N=>N.map(L=>ph([L.x,L.y],o.canonical)))),T=new wl(b[0][0][0][1]);let E=1/0;for(const k of d)for(const N of b){switch(k.type){case"Point":E=Math.min(E,cu([k.coordinates],!1,N,T,E));break;case"LineString":E=Math.min(E,cu(k.coordinates,!0,N,T,E));break;case"Polygon":E=Math.min(E,Al(N,k.coordinates,T,E))}if(E===0)return E}return E}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class yc{constructor(n){this.type=vr,this.key=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const d=n[1];return d==null?o.error("Global state property must be defined."):typeof d!="string"?o.error(`Global state property must be string, but found ${typeof n[1]} instead.`):new yc(d)}evaluate(n){var o;const d=(o=n.globals)===null||o===void 0?void 0:o.globalState;return d&&Object.keys(d).length!==0?jo(d,this.key):null}eachChild(){}outputDefined(){return!1}}const Pl={"==":uo,"!=":qf,">":jm,"<":hh,">=":Om,"<=":vd,array:hr,at:sh,boolean:hr,case:ni,coalesce:uh,collator:dh,format:fh,image:js,in:lh,"index-of":Jc,interpolate:mi,"interpolate-hcl":mi,"interpolate-lab":mi,length:_l,let:Io,literal:ur,match:Do,number:hr,"number-format":_d,object:hr,slice:vl,step:Cs,string:hr,"to-boolean":ri,"to-color":ri,"to-number":ri,"to-string":ri,var:Es,within:as,distance:Ml,"global-state":yc};class pa{constructor(n,o,d,y){this.name=n,this.type=o,this._evaluate=d,this.args=y}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,o){const d=n[0],y=pa.definitions[d];if(!y)return o.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(y)?y[0]:y.type,T=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,E=T.filter(([N])=>!Array.isArray(N)||N.length===n.length-1);let k=null;for(const[N,L]of E){k=new yl(o.registry,os,o.path,null,o.scope);const V=[];let W=!1;for(let K=1;K<n.length;K++){const ee=n[K],le=Array.isArray(N)?N[K-1]:N.type,de=k.parse(ee,1+V.length,le);if(!de){W=!0;break}V.push(de)}if(!W)if(Array.isArray(N)&&N.length!==V.length)k.error(`Expected ${N.length} arguments, but found ${V.length} instead.`);else{for(let K=0;K<V.length;K++){const ee=Array.isArray(N)?N[K]:N.type,le=V[K];k.concat(K+1).checkSubtype(ee,le.type)}if(k.errors.length===0)return new pa(d,b,L,V)}}if(E.length===1)o.errors.push(...k.errors);else{const N=(E.length?E:T).map(([V])=>{return W=V,Array.isArray(W)?`(${W.map(Vr).join(", ")})`:`(${Vr(W.type)}...)`;var W}).join(" | "),L=[];for(let V=1;V<n.length;V++){const W=o.parse(n[V],1+L.length);if(!W)return null;L.push(Vr(W.type))}o.error(`Expected arguments of type ${N}, but found (${L.join(", ")}) instead.`)}return null}static register(n,o){pa.definitions=o;for(const d in o)n[d]=pa}}function qa(c,[n,o,d,y]){n=n.evaluate(c),o=o.evaluate(c),d=d.evaluate(c);const b=y?y.evaluate(c):1,T=Ps(n,o,d,b);if(T)throw new Br(T);return new xr(n/255,o/255,d/255,b,!1)}function jd(c,n){return c in n}function ma(c,n){const o=n[c];return o===void 0?null:o}function xi(c){return{type:c}}function os(c){if(c instanceof Es)return os(c.boundExpression);if(c instanceof pa&&c.name==="error"||c instanceof dh||c instanceof as||c instanceof Ml||c instanceof yc)return!1;const n=c instanceof ri||c instanceof hr;let o=!0;return c.eachChild(d=>{o=n?o&&os(d):o&&d instanceof ur}),!!o&&vc(c)&&El(c,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function vc(c){if(c instanceof pa&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof as||c instanceof Ml)return!1;let n=!0;return c.eachChild(o=>{n&&!vc(o)&&(n=!1)}),n}function ks(c){if(c instanceof pa&&c.name==="feature-state")return!1;let n=!0;return c.eachChild(o=>{n&&!ks(o)&&(n=!1)}),n}function El(c,n){if(c instanceof pa&&n.indexOf(c.name)>=0)return!1;let o=!0;return c.eachChild(d=>{o&&!El(d,n)&&(o=!1)}),o}function bh(c){return{result:"success",value:c}}function po(c){return{result:"error",value:c}}function Cl(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function uu(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Ro(c){return!!c.expression&&c.expression.interpolated}function Pr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Bi(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)&&yn(c)===so}function Od(c){return c}function mo(c,n){const o=c.stops&&typeof c.stops[0][0]=="object",d=o||!(o||c.property!==void 0),y=c.type||(Ro(n)?"exponential":"interval"),b=function(L){switch(L.type){case"color":return xr.parse;case"padding":return hi.parse;case"numberArray":return di.parse;case"colorArray":return Kn.parse;default:return null}}(n);if(b&&((c=Po({},c)).stops&&(c.stops=c.stops.map(L=>[L[0],b(L[1])])),c.default=b(c.default?c.default:n.default)),c.colorSpace&&(T=c.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var T;const E=function(L){switch(L){case"exponential":return hu;case"interval":return Lo;case"categorical":return wh;case"identity":return kd;default:throw new Error(`Unknown function type "${L}"`)}}(y);let k,N;if(y==="categorical"){k=Object.create(null);for(const L of c.stops)k[L[0]]=L[1];N=typeof c.stops[0][0]}if(o){const L={},V=[];for(let ee=0;ee<c.stops.length;ee++){const le=c.stops[ee],de=le[0].zoom;L[de]===void 0&&(L[de]={zoom:de,type:c.type,property:c.property,default:c.default,stops:[]},V.push(de)),L[de].stops.push([le[0].value,le[1]])}const W=[];for(const ee of V)W.push([L[ee].zoom,mo(L[ee],n)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:mi.interpolationFactor.bind(void 0,K),zoomStops:W.map(ee=>ee[0]),evaluate:({zoom:ee},le)=>hu({stops:W,base:c.base},n,ee).evaluate(ee,le)}}if(d){const L=y==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:mi.interpolationFactor.bind(void 0,L),zoomStops:c.stops.map(V=>V[0]),evaluate:({zoom:V})=>E(c,n,V,k,N)}}return{kind:"source",evaluate(L,V){const W=V&&V.properties?V.properties[c.property]:void 0;return W===void 0?_c(c.default,n.default):E(c,n,W,k,N)}}}function _c(c,n,o){return c!==void 0?c:n!==void 0?n:o!==void 0?o:void 0}function wh(c,n,o,d,y){return _c(typeof o===y?d[o]:void 0,c.default,n.default)}function Lo(c,n,o){if(Pr(o)!=="number")return _c(c.default,n.default);const d=c.stops.length;if(d===1||o<=c.stops[0][0])return c.stops[0][1];if(o>=c.stops[d-1][0])return c.stops[d-1][1];const y=eu(c.stops.map(b=>b[0]),o);return c.stops[y][1]}function hu(c,n,o){const d=c.base!==void 0?c.base:1;if(Pr(o)!=="number")return _c(c.default,n.default);const y=c.stops.length;if(y===1||o<=c.stops[0][0])return c.stops[0][1];if(o>=c.stops[y-1][0])return c.stops[y-1][1];const b=eu(c.stops.map(L=>L[0]),o),T=function(L,V,W,K){const ee=K-W,le=L-W;return ee===0?0:V===1?le/ee:(Math.pow(V,le)-1)/(Math.pow(V,ee)-1)}(o,d,c.stops[b][0],c.stops[b+1][0]),E=c.stops[b][1],k=c.stops[b+1][1],N=da[n.type]||Od;return typeof E.evaluate=="function"?{evaluate(...L){const V=E.evaluate.apply(void 0,L),W=k.evaluate.apply(void 0,L);if(V!==void 0&&W!==void 0)return N(V,W,T,c.colorSpace)}}:N(E,k,T,c.colorSpace)}function kd(c,n,o){switch(n.type){case"color":o=xr.parse(o);break;case"formatted":o=Qi.fromString(o.toString());break;case"resolvedImage":o=ti.fromString(o.toString());break;case"padding":o=hi.parse(o);break;case"colorArray":o=Kn.parse(o);break;case"numberArray":o=di.parse(o);break;default:Pr(o)===n.type||n.type==="enum"&&n.values[o]||(o=void 0)}return _c(o,c.default,n.default)}pa.register(Pl,{error:[{kind:"error"},[mr],(c,[n])=>{throw new Br(n.evaluate(c))}],typeof:[mr,[vr],(c,[n])=>Vr(yn(n.evaluate(c)))],"to-rgba":[Ni(Ct,4),[vi],(c,[n])=>{const[o,d,y,b]=n.evaluate(c).rgb;return[255*o,255*d,255*y,b]}],rgb:[vi,[Ct,Ct,Ct],qa],rgba:[vi,[Ct,Ct,Ct,Ct],qa],has:{type:pr,overloads:[[[mr],(c,[n])=>jd(n.evaluate(c),c.properties())],[[mr,so],(c,[n,o])=>jd(n.evaluate(c),o.evaluate(c))]]},get:{type:vr,overloads:[[[mr],(c,[n])=>ma(n.evaluate(c),c.properties())],[[mr,so],(c,[n,o])=>ma(n.evaluate(c),o.evaluate(c))]]},"feature-state":[vr,[mr],(c,[n])=>ma(n.evaluate(c),c.featureState||{})],properties:[so,[],c=>c.properties()],"geometry-type":[mr,[],c=>c.geometryType()],id:[vr,[],c=>c.id()],zoom:[Ct,[],c=>c.globals.zoom],"heatmap-density":[Ct,[],c=>c.globals.heatmapDensity||0],elevation:[Ct,[],c=>c.globals.elevation||0],"line-progress":[Ct,[],c=>c.globals.lineProgress||0],accumulated:[vr,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Ct,xi(Ct),(c,n)=>{let o=0;for(const d of n)o+=d.evaluate(c);return o}],"*":[Ct,xi(Ct),(c,n)=>{let o=1;for(const d of n)o*=d.evaluate(c);return o}],"-":{type:Ct,overloads:[[[Ct,Ct],(c,[n,o])=>n.evaluate(c)-o.evaluate(c)],[[Ct],(c,[n])=>-n.evaluate(c)]]},"/":[Ct,[Ct,Ct],(c,[n,o])=>n.evaluate(c)/o.evaluate(c)],"%":[Ct,[Ct,Ct],(c,[n,o])=>n.evaluate(c)%o.evaluate(c)],ln2:[Ct,[],()=>Math.LN2],pi:[Ct,[],()=>Math.PI],e:[Ct,[],()=>Math.E],"^":[Ct,[Ct,Ct],(c,[n,o])=>Math.pow(n.evaluate(c),o.evaluate(c))],sqrt:[Ct,[Ct],(c,[n])=>Math.sqrt(n.evaluate(c))],log10:[Ct,[Ct],(c,[n])=>Math.log(n.evaluate(c))/Math.LN10],ln:[Ct,[Ct],(c,[n])=>Math.log(n.evaluate(c))],log2:[Ct,[Ct],(c,[n])=>Math.log(n.evaluate(c))/Math.LN2],sin:[Ct,[Ct],(c,[n])=>Math.sin(n.evaluate(c))],cos:[Ct,[Ct],(c,[n])=>Math.cos(n.evaluate(c))],tan:[Ct,[Ct],(c,[n])=>Math.tan(n.evaluate(c))],asin:[Ct,[Ct],(c,[n])=>Math.asin(n.evaluate(c))],acos:[Ct,[Ct],(c,[n])=>Math.acos(n.evaluate(c))],atan:[Ct,[Ct],(c,[n])=>Math.atan(n.evaluate(c))],min:[Ct,xi(Ct),(c,n)=>Math.min(...n.map(o=>o.evaluate(c)))],max:[Ct,xi(Ct),(c,n)=>Math.max(...n.map(o=>o.evaluate(c)))],abs:[Ct,[Ct],(c,[n])=>Math.abs(n.evaluate(c))],round:[Ct,[Ct],(c,[n])=>{const o=n.evaluate(c);return o<0?-Math.round(-o):Math.round(o)}],floor:[Ct,[Ct],(c,[n])=>Math.floor(n.evaluate(c))],ceil:[Ct,[Ct],(c,[n])=>Math.ceil(n.evaluate(c))],"filter-==":[pr,[mr,vr],(c,[n,o])=>c.properties()[n.value]===o.value],"filter-id-==":[pr,[vr],(c,[n])=>c.id()===n.value],"filter-type-==":[pr,[mr],(c,[n])=>c.geometryType()===n.value],"filter-<":[pr,[mr,vr],(c,[n,o])=>{const d=c.properties()[n.value],y=o.value;return typeof d==typeof y&&d<y}],"filter-id-<":[pr,[vr],(c,[n])=>{const o=c.id(),d=n.value;return typeof o==typeof d&&o<d}],"filter->":[pr,[mr,vr],(c,[n,o])=>{const d=c.properties()[n.value],y=o.value;return typeof d==typeof y&&d>y}],"filter-id->":[pr,[vr],(c,[n])=>{const o=c.id(),d=n.value;return typeof o==typeof d&&o>d}],"filter-<=":[pr,[mr,vr],(c,[n,o])=>{const d=c.properties()[n.value],y=o.value;return typeof d==typeof y&&d<=y}],"filter-id-<=":[pr,[vr],(c,[n])=>{const o=c.id(),d=n.value;return typeof o==typeof d&&o<=d}],"filter->=":[pr,[mr,vr],(c,[n,o])=>{const d=c.properties()[n.value],y=o.value;return typeof d==typeof y&&d>=y}],"filter-id->=":[pr,[vr],(c,[n])=>{const o=c.id(),d=n.value;return typeof o==typeof d&&o>=d}],"filter-has":[pr,[vr],(c,[n])=>n.value in c.properties()],"filter-has-id":[pr,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[pr,[Ni(mr)],(c,[n])=>n.value.indexOf(c.geometryType())>=0],"filter-id-in":[pr,[Ni(vr)],(c,[n])=>n.value.indexOf(c.id())>=0],"filter-in-small":[pr,[mr,Ni(vr)],(c,[n,o])=>o.value.indexOf(c.properties()[n.value])>=0],"filter-in-large":[pr,[mr,Ni(vr)],(c,[n,o])=>function(d,y,b,T){for(;b<=T;){const E=b+T>>1;if(y[E]===d)return!0;y[E]>d?T=E-1:b=E+1}return!1}(c.properties()[n.value],o.value,0,o.value.length-1)],all:{type:pr,overloads:[[[pr,pr],(c,[n,o])=>n.evaluate(c)&&o.evaluate(c)],[xi(pr),(c,n)=>{for(const o of n)if(!o.evaluate(c))return!1;return!0}]]},any:{type:pr,overloads:[[[pr,pr],(c,[n,o])=>n.evaluate(c)||o.evaluate(c)],[xi(pr),(c,n)=>{for(const o of n)if(o.evaluate(c))return!0;return!1}]]},"!":[pr,[pr],(c,[n])=>!n.evaluate(c)],"is-supported-script":[pr,[mr],(c,[n])=>{const o=c.globals&&c.globals.isSupportedScript;return!o||o(n.evaluate(c))}],upcase:[mr,[mr],(c,[n])=>n.evaluate(c).toUpperCase()],downcase:[mr,[mr],(c,[n])=>n.evaluate(c).toLowerCase()],concat:[mr,xi(vr),(c,n)=>n.map(o=>br(o.evaluate(c))).join("")],"resolved-locale":[mr,[Fa],(c,[n])=>n.evaluate(c).resolvedLocale()]});class Is{constructor(n,o,d){this.expression=n,this._warningHistory={},this._evaluator=new gl,this._defaultValue=o?function(y){if(y.type==="color"&&Bi(y.default))return new xr(0,0,0,0);switch(y.type){case"color":return xr.parse(y.default)||null;case"padding":return hi.parse(y.default)||null;case"numberArray":return di.parse(y.default)||null;case"colorArray":return Kn.parse(y.default)||null;case"variableAnchorOffsetCollection":return fi.parse(y.default)||null;case"projectionDefinition":return Li.parse(y.default)||null;default:return y.default===void 0?null:y.default}}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null,this._globalState=d}evaluateWithoutErrorHandling(n,o,d,y,b,T){return this._globalState&&(n=Ca(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=o,this._evaluator.featureState=d,this._evaluator.canonical=y,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(n,o,d,y,b,T){this._globalState&&(n=Ca(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=o||null,this._evaluator.featureState=d||null,this._evaluator.canonical=y,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=T||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new Br(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function ss(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Pl}function jl(c,n,o){const d=new yl(Pl,os,[],n?function(b){const T={color:vi,string:mr,number:Ct,enum:mr,boolean:pr,formatted:Eo,padding:cl,numberArray:Co,colorArray:cc,projectionDefinition:dn,resolvedImage:ul,variableAnchorOffsetCollection:Pn};return b.type==="array"?Ni(T[b.value]||vr,b.length):T[b.type]}(n):void 0),y=d.parse(c,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?bh(new Is(y,n,o)):po(d.errors)}class Ol{constructor(n,o,d){this.kind=n,this._styleExpression=o,this.isStateDependent=n!=="constant"&&!ks(o.expression),this.globalStateRefs=Ea(o.expression),this._globalState=d}evaluateWithoutErrorHandling(n,o,d,y,b,T){return this._globalState&&(n=Ca(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,o,d,y,b,T)}evaluate(n,o,d,y,b,T){return this._globalState&&(n=Ca(n,this._globalState)),this._styleExpression.evaluate(n,o,d,y,b,T)}}class Ji{constructor(n,o,d,y,b){this.kind=n,this.zoomStops=d,this._styleExpression=o,this.isStateDependent=n!=="camera"&&!ks(o.expression),this.globalStateRefs=Ea(o.expression),this.interpolationType=y,this._globalState=b}evaluateWithoutErrorHandling(n,o,d,y,b,T){return this._globalState&&(n=Ca(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,o,d,y,b,T)}evaluate(n,o,d,y,b,T){return this._globalState&&(n=Ca(n,this._globalState)),this._styleExpression.evaluate(n,o,d,y,b,T)}interpolationFactor(n,o,d){return this.interpolationType?mi.interpolationFactor(this.interpolationType,n,o,d):0}}function ga(c,n,o){const d=jl(c,n,o);if(d.result==="error")return d;const y=d.value.expression,b=vc(y);if(!b&&!Cl(n))return po([new ua("","data expressions not supported")]);const T=El(y,["zoom"]);if(!T&&!uu(n))return po([new ua("","zoom expressions not supported")]);const E=Ua(y);return E||T?E instanceof ua?po([E]):E instanceof mi&&!Ro(n)?po([new ua("",'"interpolate" expressions cannot be used with this property')]):bh(E?new Ji(b?"camera":"composite",d.value,E.labels,E instanceof mi?E.interpolation:void 0,o):new Ol(b?"constant":"source",d.value,o)):po([new ua("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Bo{constructor(n,o){this._parameters=n,this._specification=o,Po(this,mo(this._parameters,this._specification))}static deserialize(n){return new Bo(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Ua(c){let n=null;if(c instanceof Io)n=Ua(c.result);else if(c instanceof uh){for(const o of c.args)if(n=Ua(o),n)break}else(c instanceof Cs||c instanceof mi)&&c.input instanceof pa&&c.input.name==="zoom"&&(n=c);return n instanceof ua||c.eachChild(o=>{const d=Ua(o);d instanceof ua?n=d:!n&&d?n=new ua("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&d&&n!==d&&(n=new ua("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Ea(c,n=new Set){return c instanceof yc&&n.add(c.key),c.eachChild(o=>{Ea(o,n)}),n}function Ca(c,n){const{zoom:o,heatmapDensity:d,elevation:y,lineProgress:b,isSupportedScript:T,accumulated:E}=c??{};return{zoom:o,heatmapDensity:d,elevation:y,lineProgress:b,isSupportedScript:T,accumulated:E,globalState:n}}function du(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const n of c.slice(1))if(!du(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Id={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function kl(c,n){if(c==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};du(c)||(c=zr(c));const o=jl(c,Id,n);if(o.result==="error")throw new Error(o.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,y,b)=>o.value.evaluate(d,y,{},b),needGeometry:Dn(c),getGlobalStateRefs:()=>Ea(o.value.expression)}}function ea(c,n){return c<n?-1:c>n?1:0}function Dn(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let n=1;n<c.length;n++)if(Dn(c[n]))return!0;return!1}function zr(c){if(!c)return!0;const n=c[0];return c.length<=1?n!=="any":n==="=="?Fo(c[1],c[2],"=="):n==="!="?Va(Fo(c[1],c[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Fo(c[1],c[2],n):n==="any"?(o=c.slice(1),["any"].concat(o.map(zr))):n==="all"?["all"].concat(c.slice(1).map(zr)):n==="none"?["all"].concat(c.slice(1).map(zr).map(Va)):n==="in"?ja(c[1],c.slice(2)):n==="!in"?Va(ja(c[1],c.slice(2))):n==="has"?xc(c[1]):n!=="!has"||Va(xc(c[1]));var o}function Fo(c,n,o){switch(c){case"$type":return[`filter-type-${o}`,n];case"$id":return[`filter-id-${o}`,n];default:return[`filter-${o}`,c,n]}}function ja(c,n){if(n.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(o=>typeof o!=typeof n[0])?["filter-in-large",c,["literal",n.sort(ea)]]:["filter-in-small",c,["literal",n]]}}function xc(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Va(c){return["!",c]}function bc(c){const n=typeof c;if(n==="number"||n==="boolean"||n==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let y="[";for(const b of c)y+=`${bc(b)},`;return`${y}]`}const o=Object.keys(c).sort();let d="{";for(let y=0;y<o.length;y++)d+=`${JSON.stringify(o[y])}:${bc(c[o[y]])},`;return`${d}}`}function fu(c){let n="";for(const o of jr)n+=`/${bc(c[o])}`;return n}function wc(c){const n=c.value;return n?[new wt(c.key,n,"constants have been deprecated as of v8")]:[]}function vn(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Ds(c){if(Array.isArray(c))return c.map(Ds);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const n={};for(const o in c)n[o]=Ds(c[o]);return n}return vn(c)}function Fi(c){const n=c.key,o=c.value,d=c.valueSpec||{},y=c.objectElementValidators||{},b=c.style,T=c.styleSpec,E=c.validateSpec;let k=[];const N=Pr(o);if(N!=="object")return[new wt(n,o,`object expected, ${N} found`)];for(const L in o){const V=L.split(".")[0],W=jo(d,V)||d["*"];let K;if(jo(y,V))K=y[V];else if(jo(d,V))K=E;else if(y["*"])K=y["*"];else{if(!d["*"]){k.push(new wt(n,o[L],`unknown property "${L}"`));continue}K=E}k=k.concat(K({key:(n&&`${n}.`)+L,value:o[L],valueSpec:W,style:b,styleSpec:T,object:o,objectKey:L,validateSpec:E},o))}for(const L in d)y[L]||d[L].required&&d[L].default===void 0&&o[L]===void 0&&k.push(new wt(n,o,`missing required property "${L}"`));return k}function pu(c){const n=c.value,o=c.valueSpec,d=c.style,y=c.styleSpec,b=c.key,T=c.arrayElementValidator||c.validateSpec;if(Pr(n)!=="array")return[new wt(b,n,`array expected, ${Pr(n)} found`)];if(o.length&&n.length!==o.length)return[new wt(b,n,`array length ${o.length} expected, length ${n.length} found`)];if(o["min-length"]&&n.length<o["min-length"])return[new wt(b,n,`array length at least ${o["min-length"]} expected, length ${n.length} found`)];let E={type:o.value,values:o.values};y.$version<7&&(E.function=o.function),Pr(o.value)==="object"&&(E=o.value);let k=[];for(let N=0;N<n.length;N++)k=k.concat(T({array:n,arrayIndex:N,value:n[N],valueSpec:E,validateSpec:c.validateSpec,style:d,styleSpec:y,key:`${b}[${N}]`}));return k}function $o(c){const n=c.key,o=c.value,d=c.valueSpec;let y=Pr(o);return y==="number"&&o!=o&&(y="NaN"),y!=="number"?[new wt(n,o,`number expected, ${y} found`)]:"minimum"in d&&o<d.minimum?[new wt(n,o,`${o} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&o>d.maximum?[new wt(n,o,`${o} is greater than the maximum value ${d.maximum}`)]:[]}function go(c){const n=c.valueSpec,o=vn(c.value.type);let d,y,b,T={};const E=o!=="categorical"&&c.value.property===void 0,k=!E,N=Pr(c.value.stops)==="array"&&Pr(c.value.stops[0])==="array"&&Pr(c.value.stops[0][0])==="object",L=Fi({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(K){if(o==="identity")return[new wt(K.key,K.value,'identity function may not have a "stops" property')];let ee=[];const le=K.value;return ee=ee.concat(pu({key:K.key,value:le,valueSpec:K.valueSpec,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:V})),Pr(le)==="array"&&le.length===0&&ee.push(new wt(K.key,le,"array must have at least one stop")),ee},default:function(K){return K.validateSpec({key:K.key,value:K.value,valueSpec:n,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec})}}});return o==="identity"&&E&&L.push(new wt(c.key,c.value,'missing required property "property"')),o==="identity"||c.value.stops||L.push(new wt(c.key,c.value,'missing required property "stops"')),o==="exponential"&&c.valueSpec.expression&&!Ro(c.valueSpec)&&L.push(new wt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(k&&!Cl(c.valueSpec)?L.push(new wt(c.key,c.value,"property functions not supported")):E&&!uu(c.valueSpec)&&L.push(new wt(c.key,c.value,"zoom functions not supported"))),o!=="categorical"&&!N||c.value.property!==void 0||L.push(new wt(c.key,c.value,'"property" property is required')),L;function V(K){let ee=[];const le=K.value,de=K.key;if(Pr(le)!=="array")return[new wt(de,le,`array expected, ${Pr(le)} found`)];if(le.length!==2)return[new wt(de,le,`array length 2 expected, length ${le.length} found`)];if(N){if(Pr(le[0])!=="object")return[new wt(de,le,`object expected, ${Pr(le[0])} found`)];if(le[0].zoom===void 0)return[new wt(de,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new wt(de,le,"object stop key must have value")];if(b&&b>vn(le[0].zoom))return[new wt(de,le[0].zoom,"stop zoom values must appear in ascending order")];vn(le[0].zoom)!==b&&(b=vn(le[0].zoom),y=void 0,T={}),ee=ee.concat(Fi({key:`${de}[0]`,value:le[0],valueSpec:{zoom:{}},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:$o,value:W}}))}else ee=ee.concat(W({key:`${de}[0]`,value:le[0],validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec},le));return ss(Ds(le[1]))?ee.concat([new wt(`${de}[1]`,le[1],"expressions are not allowed in function stops.")]):ee.concat(K.validateSpec({key:`${de}[1]`,value:le[1],valueSpec:n,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec}))}function W(K,ee){const le=Pr(K.value),de=vn(K.value),ye=K.value!==null?K.value:ee;if(d){if(le!==d)return[new wt(K.key,ye,`${le} stop domain type must match previous stop domain type ${d}`)]}else d=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new wt(K.key,ye,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&o!=="categorical"){let Be=`number expected, ${le} found`;return Cl(n)&&o===void 0&&(Be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new wt(K.key,ye,Be)]}return o!=="categorical"||le!=="number"||isFinite(de)&&Math.floor(de)===de?o!=="categorical"&&le==="number"&&y!==void 0&&de<y?[new wt(K.key,ye,"stop domain values must appear in ascending order")]:(y=de,o==="categorical"&&de in T?[new wt(K.key,ye,"stop domain values must be unique")]:(T[de]=!0,[])):[new wt(K.key,ye,`integer expected, found ${de}`)]}}function ya(c){const n=(c.expressionContext==="property"?ga:jl)(Ds(c.value),c.valueSpec);if(n.result==="error")return n.value.map(d=>new wt(`${c.key}${d.key}`,c.value,d.message));const o=n.value.expression||n.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!o.outputDefined())return[new wt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!ks(o))return[new wt(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!ks(o))return[new wt(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!El(o,["zoom","feature-state"]))return[new wt(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!vc(o))return[new wt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function va(c){const n=c.key,o=c.value,d=Pr(o);return d!=="string"?[new wt(n,o,`color expected, ${d} found`)]:xr.parse(String(o))?[]:[new wt(n,o,`color expected, "${o}" found`)]}function Il(c){const n=c.key,o=c.value,d=c.valueSpec,y=[];return Array.isArray(d.values)?d.values.indexOf(vn(o))===-1&&y.push(new wt(n,o,`expected one of [${d.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(d.values).indexOf(vn(o))===-1&&y.push(new wt(n,o,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(o)} found`)),y}function Sc(c){return du(Ds(c.value))?ya(Po({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Dl(c)}function Dl(c){const n=c.value,o=c.key;if(Pr(n)!=="array")return[new wt(o,n,`array expected, ${Pr(n)} found`)];const d=c.styleSpec;let y,b=[];if(n.length<1)return[new wt(o,n,"filter array must have at least 1 element")];switch(b=b.concat(Il({key:`${o}[0]`,value:n[0],valueSpec:d.filter_operator,style:c.style,styleSpec:c.styleSpec})),vn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&vn(n[1])==="$type"&&b.push(new wt(o,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&b.push(new wt(o,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(y=Pr(n[1]),y!=="string"&&b.push(new wt(`${o}[1]`,n[1],`string expected, ${y} found`)));for(let T=2;T<n.length;T++)y=Pr(n[T]),vn(n[1])==="$type"?b=b.concat(Il({key:`${o}[${T}]`,value:n[T],valueSpec:d.geometry_type,style:c.style,styleSpec:c.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&b.push(new wt(`${o}[${T}]`,n[T],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let T=1;T<n.length;T++)b=b.concat(Dl({key:`${o}[${T}]`,value:n[T],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":y=Pr(n[1]),n.length!==2?b.push(new wt(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):y!=="string"&&b.push(new wt(`${o}[1]`,n[1],`string expected, ${y} found`))}return b}function mu(c,n){const o=c.key,d=c.validateSpec,y=c.style,b=c.styleSpec,T=c.value,E=c.objectKey,k=b[`${n}_${c.layerType}`];if(!k)return[];const N=E.match(/^(.*)-transition$/);if(n==="paint"&&N&&k[N[1]]&&k[N[1]].transition)return d({key:o,value:T,valueSpec:b.transition,style:y,styleSpec:b});const L=c.valueSpec||k[E];if(!L)return[new wt(o,T,`unknown property "${E}"`)];let V;if(Pr(T)==="string"&&Cl(L)&&!L.tokens&&(V=/^{([^}]+)}$/.exec(T)))return[new wt(o,T,`"${E}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];const W=[];return c.layerType==="symbol"&&(E==="text-field"&&y&&!y.glyphs&&W.push(new wt(o,T,'use of "text-field" requires a style "glyphs" property')),E==="text-font"&&Bi(Ds(T))&&vn(T.type)==="identity"&&W.push(new wt(o,T,'"text-font" does not support identity functions'))),W.concat(d({key:c.key,value:T,valueSpec:L,style:y,styleSpec:b,expressionContext:"property",propertyType:n,propertyKey:E}))}function ls(c){return mu(c,"paint")}function bi(c){return mu(c,"layout")}function cs(c){let n=[];const o=c.value,d=c.key,y=c.style,b=c.styleSpec;if(Pr(o)!=="object")return[new wt(d,o,`object expected, ${Pr(o)} found`)];o.type||o.ref||n.push(new wt(d,o,'either "type" or "ref" is required'));let T=vn(o.type);const E=vn(o.ref);if(o.id){const k=vn(o.id);for(let N=0;N<c.arrayIndex;N++){const L=y.layers[N];vn(L.id)===k&&n.push(new wt(d,o.id,`duplicate layer id "${o.id}", previously used at line ${L.id.__line__}`))}}if("ref"in o){let k;["type","source","source-layer","filter","layout"].forEach(N=>{N in o&&n.push(new wt(d,o[N],`"${N}" is prohibited for ref layers`))}),y.layers.forEach(N=>{vn(N.id)===E&&(k=N)}),k?k.ref?n.push(new wt(d,o.ref,"ref cannot reference another ref layer")):T=vn(k.type):n.push(new wt(d,o.ref,`ref layer "${E}" not found`))}else if(T!=="background")if(o.source){const k=y.sources&&y.sources[o.source],N=k&&vn(k.type);k?N==="vector"&&T==="raster"?n.push(new wt(d,o.source,`layer "${o.id}" requires a raster source`)):N!=="raster-dem"&&T==="hillshade"||N!=="raster-dem"&&T==="color-relief"?n.push(new wt(d,o.source,`layer "${o.id}" requires a raster-dem source`)):N==="raster"&&T!=="raster"?n.push(new wt(d,o.source,`layer "${o.id}" requires a vector source`)):N!=="vector"||o["source-layer"]?N==="raster-dem"&&T!=="hillshade"&&T!=="color-relief"?n.push(new wt(d,o.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):T!=="line"||!o.paint||!o.paint["line-gradient"]||N==="geojson"&&k.lineMetrics||n.push(new wt(d,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new wt(d,o,`layer "${o.id}" must specify a "source-layer"`)):n.push(new wt(d,o.source,`source "${o.source}" not found`))}else n.push(new wt(d,o,'missing required property "source"'));return n=n.concat(Fi({key:d,value:o,valueSpec:b.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${d}.type`,value:o.type,valueSpec:b.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:o,objectKey:"type"}),filter:Sc,layout:k=>Fi({layer:o,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":N=>bi(Po({layerType:T},N))}}),paint:k=>Fi({layer:o,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":N=>ls(Po({layerType:T},N))}})}})),n}function zs(c){const n=c.value,o=c.key,d=Pr(n);return d!=="string"?[new wt(o,n,`string expected, ${d} found`)]:[]}const Wf={promoteId:function({key:c,value:n}){if(Pr(n)==="string")return zs({key:c,value:n});{const o=[];for(const d in n)o.push(...zs({key:`${c}.${d}`,value:n[d]}));return o}}};function Yf(c){const n=c.value,o=c.key,d=c.styleSpec,y=c.style,b=c.validateSpec;if(!n.type)return[new wt(o,n,'"type" is required')];const T=vn(n.type);let E;switch(T){case"vector":case"raster":return E=Fi({key:o,value:n,valueSpec:d[`source_${T.replace("-","_")}`],style:c.style,styleSpec:d,objectElementValidators:Wf,validateSpec:b}),E;case"raster-dem":return E=function(k){var N;const L=(N=k.sourceName)!==null&&N!==void 0?N:"",V=k.value,W=k.styleSpec,K=W.source_raster_dem,ee=k.style;let le=[];const de=Pr(V);if(V===void 0)return le;if(de!=="object")return le.push(new wt("source_raster_dem",V,`object expected, ${de} found`)),le;const ye=vn(V.encoding)==="custom",Be=["redFactor","greenFactor","blueFactor","baseShift"],Ae=k.value.encoding?`"${k.value.encoding}"`:"Default";for(const je in V)!ye&&Be.includes(je)?le.push(new wt(je,V[je],`In "${L}": "${je}" is only valid when "encoding" is set to "custom". ${Ae} encoding found`)):K[je]?le=le.concat(k.validateSpec({key:je,value:V[je],valueSpec:K[je],validateSpec:k.validateSpec,style:ee,styleSpec:W})):le.push(new wt(je,V[je],`unknown property "${je}"`));return le}({sourceName:o,value:n,style:c.style,styleSpec:d,validateSpec:b}),E;case"geojson":if(E=Fi({key:o,value:n,valueSpec:d.source_geojson,style:y,styleSpec:d,validateSpec:b,objectElementValidators:Wf}),n.cluster)for(const k in n.clusterProperties){const[N,L]=n.clusterProperties[k],V=typeof N=="string"?[N,["accumulated"],["get",k]]:N;E.push(...ya({key:`${o}.${k}.map`,value:L,expressionContext:"cluster-map"})),E.push(...ya({key:`${o}.${k}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return E;case"video":return Fi({key:o,value:n,valueSpec:d.source_video,style:y,validateSpec:b,styleSpec:d});case"image":return Fi({key:o,value:n,valueSpec:d.source_image,style:y,validateSpec:b,styleSpec:d});case"canvas":return[new wt(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Il({key:`${o}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Kf(c){const n=c.value,o=c.styleSpec,d=o.light,y=c.style;let b=[];const T=Pr(n);if(n===void 0)return b;if(T!=="object")return b=b.concat([new wt("light",n,`object expected, ${T} found`)]),b;for(const E in n){const k=E.match(/^(.*)-transition$/);b=b.concat(k&&d[k[1]]&&d[k[1]].transition?c.validateSpec({key:E,value:n[E],valueSpec:o.transition,validateSpec:c.validateSpec,style:y,styleSpec:o}):d[E]?c.validateSpec({key:E,value:n[E],valueSpec:d[E],validateSpec:c.validateSpec,style:y,styleSpec:o}):[new wt(E,n[E],`unknown property "${E}"`)])}return b}function ii(c){const n=c.value,o=c.styleSpec,d=o.sky,y=c.style,b=Pr(n);if(n===void 0)return[];if(b!=="object")return[new wt("sky",n,`object expected, ${b} found`)];let T=[];for(const E in n)T=T.concat(d[E]?c.validateSpec({key:E,value:n[E],valueSpec:d[E],style:y,styleSpec:o}):[new wt(E,n[E],`unknown property "${E}"`)]);return T}function Sh(c){const n=c.value,o=c.styleSpec,d=o.terrain,y=c.style;let b=[];const T=Pr(n);if(n===void 0)return b;if(T!=="object")return b=b.concat([new wt("terrain",n,`object expected, ${T} found`)]),b;for(const E in n)b=b.concat(d[E]?c.validateSpec({key:E,value:n[E],valueSpec:d[E],validateSpec:c.validateSpec,style:y,styleSpec:o}):[new wt(E,n[E],`unknown property "${E}"`)]);return b}function qo(c){let n=[];const o=c.value,d=c.key;if(Array.isArray(o)){const y=[],b=[];for(const T in o)o[T].id&&y.includes(o[T].id)&&n.push(new wt(d,o,`all the sprites' ids must be unique, but ${o[T].id} is duplicated`)),y.push(o[T].id),o[T].url&&b.includes(o[T].url)&&n.push(new wt(d,o,`all the sprites' URLs must be unique, but ${o[T].url} is duplicated`)),b.push(o[T].url),n=n.concat(Fi({key:`${d}[${T}]`,value:o[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return n}return zs({key:d,value:o})}function Uo(c){return n=c.value,n&&n.constructor===Object?[]:[new wt(c.key,c.value,`object expected, ${Pr(c.value)} found`)];var n}const $i={"*":()=>[],array:pu,boolean:function(c){const n=c.value,o=c.key,d=Pr(n);return d!=="boolean"?[new wt(o,n,`boolean expected, ${d} found`)]:[]},number:$o,color:va,constants:wc,enum:Il,filter:Sc,function:go,layer:cs,object:Fi,source:Yf,light:Kf,sky:ii,terrain:Sh,projection:function(c){const n=c.value,o=c.styleSpec,d=o.projection,y=c.style,b=Pr(n);if(n===void 0)return[];if(b!=="object")return[new wt("projection",n,`object expected, ${b} found`)];let T=[];for(const E in n)T=T.concat(d[E]?c.validateSpec({key:E,value:n[E],valueSpec:d[E],style:y,styleSpec:o}):[new wt(E,n[E],`unknown property "${E}"`)]);return T},projectionDefinition:function(c){const n=c.key;let o=c.value;o=o instanceof String?o.valueOf():o;const d=Pr(o);return d!=="array"||function(y){return Array.isArray(y)&&y.length===3&&typeof y[0]=="string"&&typeof y[1]=="string"&&typeof y[2]=="number"}(o)||function(y){return!!["interpolate","step","literal"].includes(y[0])}(o)?["array","string"].includes(d)?[]:[new wt(n,o,`projection expected, invalid type "${d}" found`)]:[new wt(n,o,`projection expected, invalid array ${JSON.stringify(o)} found`)]},string:zs,formatted:function(c){return zs(c).length===0?[]:ya(c)},resolvedImage:function(c){return zs(c).length===0?[]:ya(c)},padding:function(c){const n=c.key,o=c.value;if(Pr(o)==="array"){if(o.length<1||o.length>4)return[new wt(n,o,`padding requires 1 to 4 values; ${o.length} values found`)];const d={type:"number"};let y=[];for(let b=0;b<o.length;b++)y=y.concat(c.validateSpec({key:`${n}[${b}]`,value:o[b],validateSpec:c.validateSpec,valueSpec:d}));return y}return $o({key:n,value:o,valueSpec:{}})},numberArray:function(c){const n=c.key,o=c.value;if(Pr(o)==="array"){const d={type:"number"};if(o.length<1)return[new wt(n,o,"array length at least 1 expected, length 0 found")];let y=[];for(let b=0;b<o.length;b++)y=y.concat(c.validateSpec({key:`${n}[${b}]`,value:o[b],validateSpec:c.validateSpec,valueSpec:d}));return y}return $o({key:n,value:o,valueSpec:{}})},colorArray:function(c){const n=c.key,o=c.value;if(Pr(o)==="array"){if(o.length<1)return[new wt(n,o,"array length at least 1 expected, length 0 found")];let d=[];for(let y=0;y<o.length;y++)d=d.concat(va({key:`${n}[${y}]`,value:o[y]}));return d}return va({key:n,value:o})},variableAnchorOffsetCollection:function(c){const n=c.key,o=c.value,d=Pr(o),y=c.styleSpec;if(d!=="array"||o.length<1||o.length%2!=0)return[new wt(n,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let b=[];for(let T=0;T<o.length;T+=2)b=b.concat(Il({key:`${n}[${T}]`,value:o[T],valueSpec:y.layout_symbol["text-anchor"]})),b=b.concat(pu({key:`${n}[${T+1}]`,value:o[T+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:y}));return b},sprite:qo,state:Uo};function Oa(c){const n=c.value,o=c.valueSpec,d=c.styleSpec;return c.validateSpec=Oa,o.expression&&Bi(vn(n))?go(c):o.expression&&ss(Ds(n))?ya(c):o.type&&$i[o.type]?$i[o.type](c):Fi(Po({},c,{valueSpec:o.type?d[o.type]:o}))}function Ns(c){const n=c.value,o=c.key,d=zs(c);return d.length||(n.indexOf("{fontstack}")===-1&&d.push(new wt(o,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&d.push(new wt(o,n,'"glyphs" url must include a "{range}" token'))),d}function Ga(c,n=Ue){let o=[];return o=o.concat(Oa({key:"",value:c,valueSpec:n.$root,styleSpec:n,style:c,validateSpec:Oa,objectElementValidators:{glyphs:Ns,"*":()=>[]}})),c.constants&&(o=o.concat(wc({key:"constants",value:c.constants}))),Tc(o)}function Za(c){return function(n){return c(Object.assign({},n,{validateSpec:Oa}))}}function Tc(c){return[].concat(c).sort((n,o)=>n.line-o.line)}function ka(c){return function(...n){return Tc(c.apply(this,n))}}Ga.source=ka(Za(Yf)),Ga.sprite=ka(Za(qo)),Ga.glyphs=ka(Za(Ns)),Ga.light=ka(Za(Kf)),Ga.sky=ka(Za(ii)),Ga.terrain=ka(Za(Sh)),Ga.state=ka(Za(Uo)),Ga.layer=ka(Za(cs)),Ga.filter=ka(Za(Sc)),Ga.paintProperty=ka(Za(ls)),Ga.layoutProperty=ka(Za(bi));const _a=Ga,Dd=_a.light,Ac=_a.sky,Qf=_a.paintProperty,us=_a.layoutProperty;function zd(c,n){let o=!1;if(n&&n.length)for(const d of n)c.fire(new Bt(new Error(d.message))),o=!0;return o}class Rs{constructor(n,o,d){const y=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const T=new Int32Array(this.arrayBuffer);n=T[0],this.d=(o=T[1])+2*(d=T[2]);for(let k=0;k<this.d*this.d;k++){const N=T[3+k],L=T[3+k+1];y.push(N===L?null:T.subarray(N,L))}const E=T[3+y.length+1];this.keys=T.subarray(T[3+y.length],E),this.bboxes=T.subarray(E),this.insert=this._insertReadonly}else{this.d=o+2*d;for(let T=0;T<this.d*this.d;T++)y.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=n,this.padding=d,this.scale=o/n,this.uid=0;const b=d/o*n;this.min=-b,this.max=n+b}insert(n,o,d,y,b){this._forEachCell(o,d,y,b,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(o),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(b)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,o,d,y,b,T){this.cells[b].push(T)}query(n,o,d,y,b){const T=this.min,E=this.max;if(n<=T&&o<=T&&E<=d&&E<=y&&!b)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(n,o,d,y,this._queryCell,k,{},b),k}}_queryCell(n,o,d,y,b,T,E,k){const N=this.cells[b];if(N!==null){const L=this.keys,V=this.bboxes;for(let W=0;W<N.length;W++){const K=N[W];if(E[K]===void 0){const ee=4*K;(k?k(V[ee+0],V[ee+1],V[ee+2],V[ee+3]):n<=V[ee+2]&&o<=V[ee+3]&&d>=V[ee+0]&&y>=V[ee+1])?(E[K]=!0,T.push(L[K])):E[K]=!1}}}}_forEachCell(n,o,d,y,b,T,E,k){const N=this._convertToCellCoord(n),L=this._convertToCellCoord(o),V=this._convertToCellCoord(d),W=this._convertToCellCoord(y);for(let K=N;K<=V;K++)for(let ee=L;ee<=W;ee++){const le=this.d*ee+K;if((!k||k(this._convertFromCellCoord(K),this._convertFromCellCoord(ee),this._convertFromCellCoord(K+1),this._convertFromCellCoord(ee+1)))&&b.call(this,n,o,d,y,le,T,E,k))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,o=3+this.cells.length+1+1;let d=0;for(let T=0;T<this.cells.length;T++)d+=this.cells[T].length;const y=new Int32Array(o+d+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let b=o;for(let T=0;T<n.length;T++){const E=n[T];y[3+T]=b,y.set(E,b),b+=E.length}return y[3+n.length]=b,y.set(this.keys,b),b+=this.keys.length,y[3+n.length+1]=b,y.set(this.bboxes,b),b+=this.bboxes.length,y.buffer}static serialize(n,o){const d=n.toArrayBuffer();return o&&o.push(d),{buffer:d}}static deserialize(n){return new Rs(n.buffer)}}const yo={};function Dt(c,n,o={}){if(yo[c])throw new Error(`${c} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:c,writeable:!1}),yo[c]={klass:n,omit:o.omit||[],shallow:o.shallow||[]}}Dt("Object",Object),Dt("Set",Set),Dt("TransferableGridIndex",Rs),Dt("Color",xr),Dt("Error",Error),Dt("AJAXError",Ee),Dt("ResolvedImage",ti),Dt("StylePropertyFunction",Bo),Dt("StyleExpression",Is,{omit:["_evaluator"]}),Dt("ZoomDependentExpression",Ji),Dt("ZoomConstantExpression",Ol),Dt("CompoundExpression",pa,{omit:["_evaluate"]});for(const c in Pl)Pl[c]._classRegistryKey||Dt(`Expression_${c}`,Pl[c]);function gu(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Th(c){return c.$name||c.constructor._classRegistryKey}function hs(c){return!function(n){if(n===null||typeof n!="object")return!1;const o=Th(n);return!(!o||o==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||gu(c)||Wn(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Mc(c,n){if(hs(c))return(gu(c)||Wn(c))&&n&&n.push(c),ArrayBuffer.isView(c)&&n&&n.push(c.buffer),c instanceof ImageData&&n&&n.push(c.data.buffer),c;if(Array.isArray(c)){const b=[];for(const T of c)b.push(Mc(T,n));return b}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);const o=Th(c);if(!o)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!yo[o])throw new Error(`${o} is not registered.`);const{klass:d}=yo[o],y=d.serialize?d.serialize(c,n):{};if(d.serialize){if(n&&y===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const b in c){if(!c.hasOwnProperty(b)||yo[o].omit.indexOf(b)>=0)continue;const T=c[b];y[b]=yo[o].shallow.indexOf(b)>=0?T:Mc(T,n)}c instanceof Error&&(y.message=c.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(y.$name=o),y}function Ls(c){if(hs(c))return c;if(Array.isArray(c))return c.map(Ls);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);const n=Th(c)||"Object";if(!yo[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:o}=yo[n];if(!o)throw new Error(`can't deserialize unregistered class ${n}`);if(o.deserialize)return o.deserialize(c);const d=Object.create(o.prototype);for(const y of Object.keys(c)){if(y==="$name")continue;const b=c[y];d[y]=yo[n].shallow.indexOf(y)>=0?b:Ls(b)}return d}class Ia{constructor(){this.first=!0}update(n,o){const d=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=o),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=d,!0))}}const wr={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Hangul Syllables":c=>c>=44032&&c<=55215,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Pc(c){for(const n of c)if(Bs(n.charCodeAt(0)))return!0;return!1}function ds(c){for(const n of c)if(!Ah(n.charCodeAt(0)))return!1;return!0}function vo(c){const n=c.map(o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch{return null}}).filter(o=>o);return new RegExp(n.join("|"),"u")}const zl=vo(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ah(c){return!zl.test(String.fromCodePoint(c))}const Mh=vo(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Bs(c){return!(c!==746&&c!==747&&(c<4352||!(wr["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||wr["CJK Compatibility"](c)||wr["CJK Strokes"](c)||!(!wr["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||wr["Enclosed CJK Letters and Months"](c)||wr["Ideographic Description Characters"](c)||wr.Kanbun(c)||wr.Katakana(c)&&c!==12540||!(!wr["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!wr["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||wr["Vertical Forms"](c)||wr["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||Mh.test(String.fromCodePoint(c)))))}function Ec(c){return!(Bs(c)||function(n){return!!(wr["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||wr["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||wr["Letterlike Symbols"](n)||wr["Number Forms"](n)||wr["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||wr["Control Pictures"](n)&&n!==9251||wr["Optical Character Recognition"](n)||wr["Enclosed Alphanumerics"](n)||wr["Geometric Shapes"](n)||wr["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||wr["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||wr["CJK Symbols and Punctuation"](n)||wr.Katakana(n)||wr["Private Use Area"](n)||wr["CJK Compatibility Forms"](n)||wr["Small Form Variants"](n)||wr["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(c))}const Nd=vo(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Rd(c){return Nd.test(String.fromCodePoint(c))}function Nl(c,n){return!(!n&&Rd(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||wr.Khmer(c))}function yu(c){for(const n of c)if(Rd(n.charCodeAt(0)))return!0;return!1}const fs=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(fs.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,n){return l(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(c.pluginStatus!=="loading")return this.setState(c),c;const o=c.pluginURL,d=new Promise(b=>{this.loadScriptResolve=b});n(o);const y=new Promise(b=>setTimeout(()=>b(),this.TIMEOUT));if(yield Promise.race([d,y]),this.isParsed()){const b={pluginStatus:"loaded",pluginURL:o};return this.setState(b),b}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${o}`)})}};class nn{constructor(n,o){this.isSupportedScript=Ph,this.zoom=n,o?(this.now=o.now||0,this.fadeDuration=o.fadeDuration||0,this.zoomHistory=o.zoomHistory||new Ia,this.transition=o.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ia,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,o=n-Math.floor(n),d=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*o}}}function Ph(c){return function(n,o){for(const d of n)if(!Nl(d.charCodeAt(0),o))return!1;return!0}(c,fs.getRTLTextPluginStatus()==="loaded")}class Ha{constructor(n,o,d){this.property=n,this.value=o,this.expression=function(y,b,T){if(Bi(y))return new Bo(y,b);if(ss(y)){const E=ga(y,b,T);if(E.result==="error")throw new Error(E.value.map(k=>`${k.key}: ${k.message}`).join(", "));return E.value}{let E=y;return b.type==="color"&&typeof y=="string"?E=xr.parse(y):b.type!=="padding"||typeof y!="number"&&!Array.isArray(y)?b.type!=="numberArray"||typeof y!="number"&&!Array.isArray(y)?b.type!=="colorArray"||typeof y!="string"&&!Array.isArray(y)?b.type==="variableAnchorOffsetCollection"&&Array.isArray(y)?E=fi.parse(y):b.type==="projectionDefinition"&&typeof y=="string"&&(E=Li.parse(y)):E=Kn.parse(y):E=di.parse(y):E=hi.parse(y),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>E}}}(o===void 0?n.specification.default:o,n.specification,d)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(n,o,d){return this.property.possiblyEvaluate(this,n,o,d)}}class Sr{constructor(n,o){this.property=n,this.value=new Ha(n,void 0,o)}transitioned(n,o){return new En(this.property,this.value,o,ar({},n.transition,this.transition),n.now)}untransitioned(){return new En(this.property,this.value,null,{},0)}}class an{constructor(n,o){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues),this._globalState=o}getValue(n){return _t(this._values[n].value.value)}setValue(n,o){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Sr(this._values[n].property,this._globalState)),this._values[n].value=new Ha(this._values[n].property,o===null?void 0:_t(o),this._globalState)}getTransition(n){return _t(this._values[n].transition)}setTransition(n,o){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Sr(this._values[n].property,this._globalState)),this._values[n].transition=_t(o)||void 0}serialize(){const n={};for(const o of Object.keys(this._values)){const d=this.getValue(o);d!==void 0&&(n[o]=d);const y=this.getTransition(o);y!==void 0&&(n[`${o}-transition`]=y)}return n}transitioned(n,o){const d=new vu(this._properties);for(const y of Object.keys(this._values))d._values[y]=this._values[y].transitioned(n,o._values[y]);return d}untransitioned(){const n=new vu(this._properties);for(const o of Object.keys(this._values))n._values[o]=this._values[o].untransitioned();return n}}class En{constructor(n,o,d,y,b){this.property=n,this.value=o,this.begin=b+y.delay||0,this.end=this.begin+y.duration||0,n.specification.transition&&(y.delay||y.duration)&&(this.prior=d)}possiblyEvaluate(n,o,d){const y=n.now||0,b=this.value.possiblyEvaluate(n,o,d),T=this.prior;if(T){if(y>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(y<this.begin)return T.possiblyEvaluate(n,o,d);{const E=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(n,o,d),b,st(E))}}return b}}class vu{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,o,d){const y=new Rl(this._properties);for(const b of Object.keys(this._values))y._values[b]=this._values[b].possiblyEvaluate(n,o,d);return y}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Fs{constructor(n,o){this._properties=n,this._values=Object.create(n.defaultPropertyValues),this._globalState=o}hasValue(n){return this._values[n].value!==void 0}getValue(n){return _t(this._values[n].value)}setValue(n,o){this._values[n]=new Ha(this._values[n].property,o===null?void 0:_t(o),this._globalState)}serialize(){const n={};for(const o of Object.keys(this._values)){const d=this.getValue(o);d!==void 0&&(n[o]=d)}return n}possiblyEvaluate(n,o,d){const y=new Rl(this._properties);for(const b of Object.keys(this._values))y._values[b]=this._values[b].possiblyEvaluate(n,o,d);return y}}class qi{constructor(n,o,d){this.property=n,this.value=o,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,o,d,y){return this.property.evaluate(this.value,this.parameters,n,o,d,y)}}class Rl{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Rt{constructor(n){this.specification=n}possiblyEvaluate(n,o){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(o)}interpolate(n,o,d){const y=da[this.specification.type];return y?y(n,o,d):n}}class Ht{constructor(n,o){this.specification=n,this.overrides=o}possiblyEvaluate(n,o,d,y){return new qi(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(o,null,{},d,y)}:n.expression,o)}interpolate(n,o,d){if(n.value.kind!=="constant"||o.value.kind!=="constant")return n;if(n.value.value===void 0||o.value.value===void 0)return new qi(this,{kind:"constant",value:void 0},n.parameters);const y=da[this.specification.type];if(y){const b=y(n.value.value,o.value.value,d);return new qi(this,{kind:"constant",value:b},n.parameters)}return n}evaluate(n,o,d,y,b,T){return n.kind==="constant"?n.value:n.evaluate(o,d,y,b,T)}}class Cc extends Ht{possiblyEvaluate(n,o,d,y){if(n.value===void 0)return new qi(this,{kind:"constant",value:void 0},o);if(n.expression.kind==="constant"){const b=n.expression.evaluate(o,null,{},d,y),T=n.property.specification.type==="resolvedImage"&&typeof b!="string"?b.name:b,E=this._calculate(T,T,T,o);return new qi(this,{kind:"constant",value:E},o)}if(n.expression.kind==="camera"){const b=this._calculate(n.expression.evaluate({zoom:o.zoom-1}),n.expression.evaluate({zoom:o.zoom}),n.expression.evaluate({zoom:o.zoom+1}),o);return new qi(this,{kind:"constant",value:b},o)}return new qi(this,n.expression,o)}evaluate(n,o,d,y,b,T){if(n.kind==="source"){const E=n.evaluate(o,d,y,b,T);return this._calculate(E,E,E,o)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(o.zoom)-1},d,y),n.evaluate({zoom:Math.floor(o.zoom)},d,y),n.evaluate({zoom:Math.floor(o.zoom)+1},d,y),o):n.value}_calculate(n,o,d,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:n,to:o}:{from:d,to:o}}interpolate(n){return n}}class Fn{constructor(n){this.specification=n}possiblyEvaluate(n,o,d,y){if(n.value!==void 0){if(n.expression.kind==="constant"){const b=n.expression.evaluate(o,null,{},d,y);return this._calculate(b,b,b,o)}return this._calculate(n.expression.evaluate(new nn(Math.floor(o.zoom-1),o)),n.expression.evaluate(new nn(Math.floor(o.zoom),o)),n.expression.evaluate(new nn(Math.floor(o.zoom+1),o)),o)}}_calculate(n,o,d,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:n,to:o}:{from:d,to:o}}interpolate(n){return n}}class jc{constructor(n){this.specification=n}possiblyEvaluate(n,o,d,y){return!!n.expression.evaluate(o,null,{},d,y)}interpolate(){return!1}}class Pi{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in n){const d=n[o];d.specification.overridable&&this.overridableProperties.push(o);const y=this.defaultPropertyValues[o]=new Ha(d,void 0,void 0),b=this.defaultTransitionablePropertyValues[o]=new Sr(d,void 0);this.defaultTransitioningPropertyValues[o]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=y.possiblyEvaluate({})}}}Dt("DataDrivenProperty",Ht),Dt("DataConstantProperty",Rt),Dt("CrossFadedDataDrivenProperty",Cc),Dt("CrossFadedProperty",Fn),Dt("ColorRampProperty",jc);const Ld="-transition";class Xa extends Zt{constructor(n,o,d){if(super(),this.id=n.id,this.type=n.type,this._globalState=d,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter,this._featureFilter=kl(n.filter,d)),o.layout&&(this._unevaluatedLayout=new Fs(o.layout,d)),o.paint)){this._transitionablePaint=new an(o.paint,d);for(const y in n.paint)this.setPaintProperty(y,n.paint[y],{validate:!1});for(const y in n.layout)this.setLayoutProperty(y,n.layout[y],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Rl(o.paint)}}setFilter(n){this.filter=n,this._featureFilter=kl(n,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}getLayoutAffectingGlobalStateRefs(){const n=new Set;if(this._unevaluatedLayout)for(const o in this._unevaluatedLayout._values){const d=this._unevaluatedLayout._values[o];for(const y of d.getGlobalStateRefs())n.add(y)}for(const o of this._featureFilter.getGlobalStateRefs())n.add(o);return n}getPaintAffectingGlobalStateRefs(){var n;const o=new globalThis.Map;if(this._transitionablePaint)for(const d in this._transitionablePaint._values){const y=this._transitionablePaint._values[d].value;for(const b of y.getGlobalStateRefs()){const T=(n=o.get(b))!==null&&n!==void 0?n:[];T.push({name:d,value:y.value}),o.set(b,T)}}return o}setLayoutProperty(n,o,d={}){o!=null&&this._validate(us,`layers.${this.id}.layout.${n}`,n,o,d)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,o):this.visibility=o)}getPaintProperty(n){return n.endsWith(Ld)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,o,d={}){if(o!=null&&this._validate(Qf,`layers.${this.id}.paint.${n}`,n,o,d))return!1;if(n.endsWith(Ld))return this._transitionablePaint.setTransition(n.slice(0,-11),o||void 0),!1;{const y=this._transitionablePaint._values[n],b=y.property.specification["property-type"]==="cross-faded-data-driven",T=y.value.isDataDriven(),E=y.value;this._transitionablePaint.setValue(n,o),this._handleSpecialPaintPropertyUpdate(n);const k=this._transitionablePaint._values[n].value;return k.isDataDriven()||T||b||this._handleOverridablePaintPropertyUpdate(n,E,k)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,o,d){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,o){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,o)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),or(n,(o,d)=>!(o===void 0||d==="layout"&&!Object.keys(o).length||d==="paint"&&!Object.keys(o).length))}_validate(n,o,d,y,b={}){return(!b||b.validate!==!1)&&zd(this,n.call(_a,{key:o,layerType:this.type,objectKey:d,value:y,styleSpec:Ue,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const o=this.paint.get(n);if(o instanceof qi&&Cl(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}let Ll;var Bd={get paint(){return Ll=Ll||new Pi({"raster-opacity":new Rt(Ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new Rt(Ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Rt(Ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Rt(Ue.paint_raster["raster-brightness-max"]),"raster-saturation":new Rt(Ue.paint_raster["raster-saturation"]),"raster-contrast":new Rt(Ue.paint_raster["raster-contrast"]),"raster-resampling":new Rt(Ue.paint_raster["raster-resampling"]),"raster-fade-duration":new Rt(Ue.paint_raster["raster-fade-duration"])})}};class Fd extends Xa{constructor(n,o){super(n,Bd,o)}}const $d={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class gi{constructor(n,o){this._structArray=n,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class _r{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,o){return n._trim(),o&&(n.isTransferred=!0,o.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const o=Object.create(this.prototype);return o.arrayBuffer=n.arrayBuffer,o.length=n.length,o.capacity=n.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Cn(c,n=1){let o=0,d=0;return{members:c.map(y=>{const b=$d[y.type].BYTES_PER_ELEMENT,T=o=Wa(o,Math.max(n,b)),E=y.components||1;return d=Math.max(d,b),o+=b*E,{name:y.name,type:y.type,components:E,offset:T}}),size:Wa(o,Math.max(d,n)),alignment:n}}function Wa(c,n){return Math.ceil(c/n)*n}class ps extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o){const d=this.length;return this.resize(d+1),this.emplace(d,n,o)}emplace(n,o,d){const y=2*n;return this.int16[y+0]=o,this.int16[y+1]=d,n}}ps.prototype.bytesPerElement=4,Dt("StructArrayLayout2i4",ps);class $s extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,d)}emplace(n,o,d,y){const b=3*n;return this.int16[b+0]=o,this.int16[b+1]=d,this.int16[b+2]=y,n}}$s.prototype.bytesPerElement=6,Dt("StructArrayLayout3i6",$s);class Ya extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,y){const b=this.length;return this.resize(b+1),this.emplace(b,n,o,d,y)}emplace(n,o,d,y,b){const T=4*n;return this.int16[T+0]=o,this.int16[T+1]=d,this.int16[T+2]=y,this.int16[T+3]=b,n}}Ya.prototype.bytesPerElement=8,Dt("StructArrayLayout4i8",Ya);class qs extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,b,T){const E=this.length;return this.resize(E+1),this.emplace(E,n,o,d,y,b,T)}emplace(n,o,d,y,b,T,E){const k=6*n;return this.int16[k+0]=o,this.int16[k+1]=d,this.int16[k+2]=y,this.int16[k+3]=b,this.int16[k+4]=T,this.int16[k+5]=E,n}}qs.prototype.bytesPerElement=12,Dt("StructArrayLayout2i4i12",qs);class _u extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,b,T){const E=this.length;return this.resize(E+1),this.emplace(E,n,o,d,y,b,T)}emplace(n,o,d,y,b,T,E){const k=4*n,N=8*n;return this.int16[k+0]=o,this.int16[k+1]=d,this.uint8[N+4]=y,this.uint8[N+5]=b,this.uint8[N+6]=T,this.uint8[N+7]=E,n}}_u.prototype.bytesPerElement=8,Dt("StructArrayLayout2i4ub8",_u);class Vo extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o){const d=this.length;return this.resize(d+1),this.emplace(d,n,o)}emplace(n,o,d){const y=2*n;return this.float32[y+0]=o,this.float32[y+1]=d,n}}Vo.prototype.bytesPerElement=8,Dt("StructArrayLayout2f8",Vo);class Us extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,b,T,E,k,N,L){const V=this.length;return this.resize(V+1),this.emplace(V,n,o,d,y,b,T,E,k,N,L)}emplace(n,o,d,y,b,T,E,k,N,L,V){const W=10*n;return this.uint16[W+0]=o,this.uint16[W+1]=d,this.uint16[W+2]=y,this.uint16[W+3]=b,this.uint16[W+4]=T,this.uint16[W+5]=E,this.uint16[W+6]=k,this.uint16[W+7]=N,this.uint16[W+8]=L,this.uint16[W+9]=V,n}}Us.prototype.bytesPerElement=20,Dt("StructArrayLayout10ui20",Us);class Eh extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,b,T,E,k){const N=this.length;return this.resize(N+1),this.emplace(N,n,o,d,y,b,T,E,k)}emplace(n,o,d,y,b,T,E,k,N){const L=8*n;return this.uint16[L+0]=o,this.uint16[L+1]=d,this.uint16[L+2]=y,this.uint16[L+3]=b,this.uint16[L+4]=T,this.uint16[L+5]=E,this.uint16[L+6]=k,this.uint16[L+7]=N,n}}Eh.prototype.bytesPerElement=16,Dt("StructArrayLayout8ui16",Eh);class xu extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,b,T,E,k,N,L,V,W){const K=this.length;return this.resize(K+1),this.emplace(K,n,o,d,y,b,T,E,k,N,L,V,W)}emplace(n,o,d,y,b,T,E,k,N,L,V,W,K){const ee=12*n;return this.int16[ee+0]=o,this.int16[ee+1]=d,this.int16[ee+2]=y,this.int16[ee+3]=b,this.uint16[ee+4]=T,this.uint16[ee+5]=E,this.uint16[ee+6]=k,this.uint16[ee+7]=N,this.int16[ee+8]=L,this.int16[ee+9]=V,this.int16[ee+10]=W,this.int16[ee+11]=K,n}}xu.prototype.bytesPerElement=24,Dt("StructArrayLayout4i4ui4i24",xu);class Vs extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,d)}emplace(n,o,d,y){const b=3*n;return this.float32[b+0]=o,this.float32[b+1]=d,this.float32[b+2]=y,n}}Vs.prototype.bytesPerElement=12,Dt("StructArrayLayout3f12",Vs);class Ch extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint32[1*n+0]=o,n}}Ch.prototype.bytesPerElement=4,Dt("StructArrayLayout1ul4",Ch);class jh extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,b,T,E,k,N){const L=this.length;return this.resize(L+1),this.emplace(L,n,o,d,y,b,T,E,k,N)}emplace(n,o,d,y,b,T,E,k,N,L){const V=10*n,W=5*n;return this.int16[V+0]=o,this.int16[V+1]=d,this.int16[V+2]=y,this.int16[V+3]=b,this.int16[V+4]=T,this.int16[V+5]=E,this.uint32[W+3]=k,this.uint16[V+8]=N,this.uint16[V+9]=L,n}}jh.prototype.bytesPerElement=20,Dt("StructArrayLayout6i1ul2ui20",jh);class Oc extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,b,T){const E=this.length;return this.resize(E+1),this.emplace(E,n,o,d,y,b,T)}emplace(n,o,d,y,b,T,E){const k=6*n;return this.int16[k+0]=o,this.int16[k+1]=d,this.int16[k+2]=y,this.int16[k+3]=b,this.int16[k+4]=T,this.int16[k+5]=E,n}}Oc.prototype.bytesPerElement=12,Dt("StructArrayLayout2i2i2i12",Oc);class Oh extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,b){const T=this.length;return this.resize(T+1),this.emplace(T,n,o,d,y,b)}emplace(n,o,d,y,b,T){const E=4*n,k=8*n;return this.float32[E+0]=o,this.float32[E+1]=d,this.float32[E+2]=y,this.int16[k+6]=b,this.int16[k+7]=T,n}}Oh.prototype.bytesPerElement=16,Dt("StructArrayLayout2f1f2i16",Oh);class x extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,b,T){const E=this.length;return this.resize(E+1),this.emplace(E,n,o,d,y,b,T)}emplace(n,o,d,y,b,T,E){const k=16*n,N=4*n,L=8*n;return this.uint8[k+0]=o,this.uint8[k+1]=d,this.float32[N+1]=y,this.float32[N+2]=b,this.int16[L+6]=T,this.int16[L+7]=E,n}}x.prototype.bytesPerElement=16,Dt("StructArrayLayout2ub2f2i16",x);class r extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,d)}emplace(n,o,d,y){const b=3*n;return this.uint16[b+0]=o,this.uint16[b+1]=d,this.uint16[b+2]=y,n}}r.prototype.bytesPerElement=6,Dt("StructArrayLayout3ui6",r);class u extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d,y,b,T,E,k,N,L,V,W,K,ee,le,de,ye){const Be=this.length;return this.resize(Be+1),this.emplace(Be,n,o,d,y,b,T,E,k,N,L,V,W,K,ee,le,de,ye)}emplace(n,o,d,y,b,T,E,k,N,L,V,W,K,ee,le,de,ye,Be){const Ae=24*n,je=12*n,Ye=48*n;return this.int16[Ae+0]=o,this.int16[Ae+1]=d,this.uint16[Ae+2]=y,this.uint16[Ae+3]=b,this.uint32[je+2]=T,this.uint32[je+3]=E,this.uint32[je+4]=k,this.uint16[Ae+10]=N,this.uint16[Ae+11]=L,this.uint16[Ae+12]=V,this.float32[je+7]=W,this.float32[je+8]=K,this.uint8[Ye+36]=ee,this.uint8[Ye+37]=le,this.uint8[Ye+38]=de,this.uint32[je+10]=ye,this.int16[Ae+22]=Be,n}}u.prototype.bytesPerElement=48,Dt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",u);class p extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d,y,b,T,E,k,N,L,V,W,K,ee,le,de,ye,Be,Ae,je,Ye,it,gt,Et,Mt,jt,$t,kt){const It=this.length;return this.resize(It+1),this.emplace(It,n,o,d,y,b,T,E,k,N,L,V,W,K,ee,le,de,ye,Be,Ae,je,Ye,it,gt,Et,Mt,jt,$t,kt)}emplace(n,o,d,y,b,T,E,k,N,L,V,W,K,ee,le,de,ye,Be,Ae,je,Ye,it,gt,Et,Mt,jt,$t,kt,It){const dt=32*n,tr=16*n;return this.int16[dt+0]=o,this.int16[dt+1]=d,this.int16[dt+2]=y,this.int16[dt+3]=b,this.int16[dt+4]=T,this.int16[dt+5]=E,this.int16[dt+6]=k,this.int16[dt+7]=N,this.uint16[dt+8]=L,this.uint16[dt+9]=V,this.uint16[dt+10]=W,this.uint16[dt+11]=K,this.uint16[dt+12]=ee,this.uint16[dt+13]=le,this.uint16[dt+14]=de,this.uint16[dt+15]=ye,this.uint16[dt+16]=Be,this.uint16[dt+17]=Ae,this.uint16[dt+18]=je,this.uint16[dt+19]=Ye,this.uint16[dt+20]=it,this.uint16[dt+21]=gt,this.uint16[dt+22]=Et,this.uint32[tr+12]=Mt,this.float32[tr+13]=jt,this.float32[tr+14]=$t,this.uint16[dt+30]=kt,this.uint16[dt+31]=It,n}}p.prototype.bytesPerElement=64,Dt("StructArrayLayout8i15ui1ul2f2ui64",p);class _ extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.float32[1*n+0]=o,n}}_.prototype.bytesPerElement=4,Dt("StructArrayLayout1f4",_);class w extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,d)}emplace(n,o,d,y){const b=3*n;return this.uint16[6*n+0]=o,this.float32[b+1]=d,this.float32[b+2]=y,n}}w.prototype.bytesPerElement=12,Dt("StructArrayLayout1ui2f12",w);class M extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,d)}emplace(n,o,d,y){const b=4*n;return this.uint32[2*n+0]=o,this.uint16[b+2]=d,this.uint16[b+3]=y,n}}M.prototype.bytesPerElement=8,Dt("StructArrayLayout1ul2ui8",M);class I extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o){const d=this.length;return this.resize(d+1),this.emplace(d,n,o)}emplace(n,o,d){const y=2*n;return this.uint16[y+0]=o,this.uint16[y+1]=d,n}}I.prototype.bytesPerElement=4,Dt("StructArrayLayout2ui4",I);class D extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint16[1*n+0]=o,n}}D.prototype.bytesPerElement=2,Dt("StructArrayLayout1ui2",D);class $ extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d,y){const b=this.length;return this.resize(b+1),this.emplace(b,n,o,d,y)}emplace(n,o,d,y,b){const T=4*n;return this.float32[T+0]=o,this.float32[T+1]=d,this.float32[T+2]=y,this.float32[T+3]=b,n}}$.prototype.bytesPerElement=16,Dt("StructArrayLayout4f16",$);class q extends gi{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new P(this.anchorPointX,this.anchorPointY)}}q.prototype.size=20;class H extends jh{get(n){return new q(this,n)}}Dt("CollisionBoxArray",H);class G extends gi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}G.prototype.size=48;class Q extends u{get(n){return new G(this,n)}}Dt("PlacedSymbolArray",Q);class oe extends gi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}oe.prototype.size=64;class me extends p{get(n){return new oe(this,n)}}Dt("SymbolInstanceArray",me);class pe extends _{getoffsetX(n){return this.float32[1*n+0]}}Dt("GlyphOffsetArray",pe);class ge extends $s{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Dt("SymbolLineVertexArray",ge);class _e extends gi{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}_e.prototype.size=12;class Te extends w{get(n){return new _e(this,n)}}Dt("TextAnchorOffsetArray",Te);class be extends gi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}be.prototype.size=8;class Ce extends M{get(n){return new be(this,n)}}Dt("FeatureIndexArray",Ce);class Oe extends ps{}class we extends ps{}class Ne extends ps{}class nt extends qs{}class We extends _u{}class Ke extends Vo{}class Qe extends Us{}class Tt extends Eh{}class At extends xu{}class yt extends Vs{}class Lt extends Ch{}class lr extends Oc{}class Hr extends x{}class Xr extends r{}class ln extends I{}const jn=Cn([{name:"a_pos",components:2,type:"Int16"}],4),{members:cn}=jn;class Tr{constructor(n=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=n}prepareSegment(n,o,d,y){const b=this.segments[this.segments.length-1];return n>Tr.MAX_VERTEX_ARRAY_LENGTH&&Qt(`Max vertices per segment is ${Tr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Tr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!b||b.vertexLength+n>Tr.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==y?this.createNewSegment(o,d,y):b}createNewSegment(n,o,d){const y={vertexOffset:n.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(y.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(y),y}getOrCreateLatestSegment(n,o,d){return this.prepareSegment(0,n,o,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const n of this.segments)for(const o in n.vaos)n.vaos[o].destroy()}static simpleSegment(n,o,d,y){return new Tr([{vertexOffset:n,primitiveOffset:o,vertexLength:d,primitiveLength:y,vaos:{},sortKey:0}])}}function fn(c,n){return 256*(c=Nt(Math.floor(c),0,255))+Nt(Math.floor(n),0,255)}Tr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Dt("SegmentVector",Tr);const ai=Cn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),$n=Cn([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var qn,wi,ms,Ka={exports:{}},Gs={exports:{}},Qa={exports:{}},Zs=function(){if(ms)return Ka.exports;ms=1;var c=(qn||(qn=1,Gs.exports=function(o,d){var y,b,T,E,k,N,L,V;for(b=o.length-(y=3&o.length),T=d,k=3432918353,N=461845907,V=0;V<b;)L=255&o.charCodeAt(V)|(255&o.charCodeAt(++V))<<8|(255&o.charCodeAt(++V))<<16|(255&o.charCodeAt(++V))<<24,++V,T=27492+(65535&(E=5*(65535&(T=(T^=L=(65535&(L=(L=(65535&L)*k+(((L>>>16)*k&65535)<<16)&4294967295)<<15|L>>>17))*N+(((L>>>16)*N&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(L=0,y){case 3:L^=(255&o.charCodeAt(V+2))<<16;case 2:L^=(255&o.charCodeAt(V+1))<<8;case 1:T^=L=(65535&(L=(L=(65535&(L^=255&o.charCodeAt(V)))*k+(((L>>>16)*k&65535)<<16)&4294967295)<<15|L>>>17))*N+(((L>>>16)*N&65535)<<16)&4294967295}return T^=o.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0}),Gs.exports),n=(wi||(wi=1,Qa.exports=function(o,d){for(var y,b=o.length,T=d^b,E=0;b>=4;)y=1540483477*(65535&(y=255&o.charCodeAt(E)|(255&o.charCodeAt(++E))<<8|(255&o.charCodeAt(++E))<<16|(255&o.charCodeAt(++E))<<24))+((1540483477*(y>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),b-=4,++E;switch(b){case 3:T^=(255&o.charCodeAt(E+2))<<16;case 2:T^=(255&o.charCodeAt(E+1))<<8;case 1:T=1540483477*(65535&(T^=255&o.charCodeAt(E)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0}),Qa.exports);return Ka.exports=c,Ka.exports.murmur3=c,Ka.exports.murmur2=n,Ka.exports}(),gs=C(Zs);class Da{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,o,d,y){this.ids.push(Ui(n)),this.positions.push(o,d,y)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=Ui(n);let d=0,y=this.ids.length-1;for(;d<y;){const T=d+y>>1;this.ids[T]>=o?y=T:d=T+1}const b=[];for(;this.ids[d]===o;)b.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return b}static serialize(n,o){const d=new Float64Array(n.ids),y=new Uint32Array(n.positions);return _o(d,y,0,d.length-1),o&&o.push(d.buffer,y.buffer),{ids:d,positions:y}}static deserialize(n){const o=new Da;return o.ids=n.ids,o.positions=n.positions,o.indexed=!0,o}}function Ui(c){const n=+c;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:gs(String(c))}function _o(c,n,o,d){for(;o<d;){const y=c[o+d>>1];let b=o-1,T=d+1;for(;;){do b++;while(c[b]<y);do T--;while(c[T]>y);if(b>=T)break;xo(c,b,T),xo(n,3*b,3*T),xo(n,3*b+1,3*T+1),xo(n,3*b+2,3*T+2)}T-o<d-T?(_o(c,n,o,T),o=T+1):(_o(c,n,T+1,d),d=T)}}function xo(c,n,o){const d=c[n];c[n]=c[o],c[o]=d}Dt("FeaturePositionMap",Da);class Si{constructor(n,o){this.gl=n.gl,this.location=o}}class zn extends Si{constructor(n,o){super(n,o),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class on extends Si{constructor(n,o){super(n,o),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Un extends Si{constructor(n,o){super(n,o),this.current=xr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Tn=new Float32Array(16);function kh(c){return[fn(255*c.r,255*c.g),fn(255*c.b,255*c.a)]}class Ja{constructor(n,o,d){this.value=n,this.uniformNames=o.map(y=>`u_${y}`),this.type=d}setUniform(n,o,d){n.set(d.constantOr(this.value))}getBinding(n,o,d){return this.type==="color"?new Un(n,o):new zn(n,o)}}class ta{constructor(n,o){this.uniformNames=o.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=n.tlbr}setConstantDashPositions(n,o){this.dashTo=[0,n.y,n.height,n.width],this.dashFrom=[0,o.y,o.height,o.width]}setUniform(n,o,d,y){let b=null;y==="u_pattern_to"?b=this.patternTo:y==="u_pattern_from"?b=this.patternFrom:y==="u_dasharray_to"?b=this.dashTo:y==="u_dasharray_from"?b=this.dashFrom:y==="u_pixel_ratio_to"?b=this.pixelRatioTo:y==="u_pixel_ratio_from"&&(b=this.pixelRatioFrom),b!==null&&n.set(b)}getBinding(n,o,d){return d.substr(0,9)==="u_pattern"||d.substr(0,12)==="u_dasharray_"?new on(n,o):new zn(n,o)}}class pn{constructor(n,o,d,y){this.expression=n,this.type=d,this.maxValue=0,this.paintVertexAttributes=o.map(b=>({name:`a_${b}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(n,o,d){const y=this.paintVertexArray.length,b=this.expression.evaluate(new nn(0,d),o,{},d.canonical,[],d.formattedSection);this.paintVertexArray.resize(n),this._setPaintValue(y,n,b)}updatePaintArray(n,o,d,y,b){const T=this.expression.evaluate(new nn(0,b),d,y);this._setPaintValue(n,o,T)}_setPaintValue(n,o,d){if(this.type==="color"){const y=kh(d);for(let b=n;b<o;b++)this.paintVertexArray.emplace(b,y[0],y[1])}else{for(let y=n;y<o;y++)this.paintVertexArray.emplace(y,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class xa{constructor(n,o,d,y,b,T){this.expression=n,this.uniformNames=o.map(E=>`u_${E}_t`),this.type=d,this.useIntegerZoom=y,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=o.map(E=>({name:`a_${E}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new T}populatePaintArray(n,o,d){const y=this.expression.evaluate(new nn(this.zoom,d),o,{},d.canonical,[],d.formattedSection),b=this.expression.evaluate(new nn(this.zoom+1,d),o,{},d.canonical,[],d.formattedSection),T=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(T,n,y,b)}updatePaintArray(n,o,d,y,b){const T=this.expression.evaluate(new nn(this.zoom,b),d,y),E=this.expression.evaluate(new nn(this.zoom+1,b),d,y);this._setPaintValue(n,o,T,E)}_setPaintValue(n,o,d,y){if(this.type==="color"){const b=kh(d),T=kh(y);for(let E=n;E<o;E++)this.paintVertexArray.emplace(E,b[0],b[1],T[0],T[1])}else{for(let b=n;b<o;b++)this.paintVertexArray.emplace(b,d,y);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(y))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,o){const d=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,y=Nt(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);n.set(y)}getBinding(n,o,d){return new zn(n,o)}}class Go{constructor(n,o,d,y,b,T){this.expression=n,this.type=o,this.useIntegerZoom=d,this.zoom=y,this.layerId=T,this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b}populatePaintArray(n,o,d){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(y,n,this.getPositionIds(o),d)}updatePaintArray(n,o,d,y,b){this._setPaintValues(n,o,this.getPositionIds(d),b)}_setPaintValues(n,o,d,y){const b=this.getPositions(y);if(!b||!d)return;const T=b[d.min],E=b[d.mid],k=b[d.max];if(T&&E&&k)for(let N=n;N<o;N++)this.emplace(this.zoomInPaintVertexArray,N,E,T),this.emplace(this.zoomOutPaintVertexArray,N,E,k)}upload(n){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const o=this.getVertexAttributes();this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,o,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,o,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Zo extends Go{getPositions(n){return n.imagePositions}getPositionIds(n){return n.patterns&&n.patterns[this.layerId]}getVertexAttributes(){return ai.members}emplace(n,o,d,y){n.emplace(o,d.tlbr[0],d.tlbr[1],d.tlbr[2],d.tlbr[3],y.tlbr[0],y.tlbr[1],y.tlbr[2],y.tlbr[3],d.pixelRatio,y.pixelRatio)}}class Ih extends Go{getPositions(n){return n.dashPositions}getPositionIds(n){return n.dashes&&n.dashes[this.layerId]}getVertexAttributes(){return $n.members}emplace(n,o,d,y){n.emplace(o,0,d.y,d.height,d.width,0,y.y,y.height,y.width)}}class Dh{constructor(n,o,d){this.binders={},this._buffers=[];const y=[];for(const b in n.paint._values){if(!d(b))continue;const T=n.paint.get(b);if(!(T instanceof qi&&Cl(T.property.specification)))continue;const E=kc(b,n.type),k=T.value,N=T.property.specification.type,L=T.property.useIntegerZoom,V=T.property.specification["property-type"],W=V==="cross-faded"||V==="cross-faded-data-driven";if(k.kind==="constant")this.binders[b]=W?new ta(k.value,E):new Ja(k.value,E,N),y.push(`/u_${b}`);else if(k.kind==="source"||W){const K=zh(b,N,"source");this.binders[b]=W?b==="line-dasharray"?new Ih(k,N,L,o,K,n.id):new Zo(k,N,L,o,K,n.id):new pn(k,E,N,K),y.push(`/a_${b}`)}else{const K=zh(b,N,"composite");this.binders[b]=new xa(k,E,N,L,o,K),y.push(`/z_${b}`)}}this.cacheKey=y.sort().join("")}getMaxValue(n){const o=this.binders[n];return o instanceof pn||o instanceof xa?o.maxValue:0}populatePaintArrays(n,o,d){for(const y in this.binders){const b=this.binders[y];(b instanceof pn||b instanceof xa||b instanceof Go)&&b.populatePaintArray(n,o,d)}}setConstantPatternPositions(n,o){for(const d in this.binders){const y=this.binders[d];y instanceof ta&&y.setConstantPatternPositions(n,o)}}setConstantDashPositions(n,o){for(const d in this.binders){const y=this.binders[d];y instanceof ta&&y.setConstantDashPositions(n,o)}}updatePaintArrays(n,o,d,y,b){let T=!1;for(const E in n){const k=o.getPositions(E);for(const N of k){const L=d.feature(N.index);for(const V in this.binders){const W=this.binders[V];if((W instanceof pn||W instanceof xa||W instanceof Go)&&W.expression.isStateDependent===!0){const K=y.paint.get(V);W.expression=K.value,W.updatePaintArray(N.start,N.end,L,n[E],b),T=!0}}}}return T}defines(){const n=[];for(const o in this.binders){const d=this.binders[o];(d instanceof Ja||d instanceof ta)&&n.push(...d.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return n}getBinderAttributes(){const n=[];for(const o in this.binders){const d=this.binders[o];if(d instanceof pn||d instanceof xa)for(let y=0;y<d.paintVertexAttributes.length;y++)n.push(d.paintVertexAttributes[y].name);else if(d instanceof Go){const y=d.getVertexAttributes();for(const b of y)n.push(b.name)}}return n}getBinderUniforms(){const n=[];for(const o in this.binders){const d=this.binders[o];if(d instanceof Ja||d instanceof ta||d instanceof xa)for(const y of d.uniformNames)n.push(y)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,o){const d=[];for(const y in this.binders){const b=this.binders[y];if(b instanceof Ja||b instanceof ta||b instanceof xa){for(const T of b.uniformNames)if(o[T]){const E=b.getBinding(n,o[T],T);d.push({name:T,property:y,binding:E})}}}return d}setUniforms(n,o,d,y){for(const{name:b,property:T,binding:E}of o)this.binders[T].setUniform(E,y,d.get(T),b)}updatePaintBuffers(n){this._buffers=[];for(const o in this.binders){const d=this.binders[o];if(n&&d instanceof Go){const y=n.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(d instanceof pn||d instanceof xa)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(n){for(const o in this.binders){const d=this.binders[o];(d instanceof pn||d instanceof xa||d instanceof Go)&&d.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const o=this.binders[n];(o instanceof pn||o instanceof xa||o instanceof Go)&&o.destroy()}}}class ba{constructor(n,o,d=()=>!0){this.programConfigurations={};for(const y of n)this.programConfigurations[y.id]=new Dh(y,o,d);this.needsUpload=!1,this._featureMap=new Da,this._bufferOffset=0}populatePaintArrays(n,o,d,y){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(n,o,y);o.id!==void 0&&this._featureMap.add(o.id,d,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,o,d,y){for(const b of d)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(n,this._featureMap,o,b,y)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function kc(c,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${n}-`,"").replace(/-/g,"_")]}function zh(c,n,o){const d={color:{source:Vo,composite:$},number:{source:_,composite:Vo}},y=function(b){return{"line-pattern":{source:Qe,composite:Qe},"fill-pattern":{source:Qe,composite:Qe},"fill-extrusion-pattern":{source:Qe,composite:Qe},"line-dasharray":{source:Tt,composite:Tt}}[b]}(c);return y&&y[o]||d[n][o]}Dt("ConstantBinder",Ja),Dt("CrossFadedConstantBinder",ta),Dt("SourceExpressionBinder",pn),Dt("CrossFadedPatternBinder",Zo),Dt("CrossFadedDasharrayBinder",Ih),Dt("CompositeExpressionBinder",xa),Dt("ProgramConfiguration",Dh,{omit:["_buffers"]}),Dt("ProgramConfigurationSet",ba);const Ic=Math.pow(2,14)-1,Dm=-Ic-1;function Hs(c){const n=ht/c.extent,o=c.loadGeometry();for(let d=0;d<o.length;d++){const y=o[d];for(let b=0;b<y.length;b++){const T=y[b],E=Math.round(T.x*n),k=Math.round(T.y*n);T.x=Nt(E,Dm,Ic),T.y=Nt(k,Dm,Ic),(E<T.x||E>T.x+1||k<T.y||k>T.y+1)&&Qt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function Dc(c,n){return{type:c.type,id:c.id,properties:c.properties,geometry:n?Hs(c):[]}}const Jf=-32768;function qy(c,n,o,d,y){c.emplaceBack(Jf+8*n+d,Jf+8*o+y)}class ep{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasDependencies=!1,this.layoutVertexArray=new we,this.indexArray=new Xr,this.segments=new Tr,this.programConfigurations=new ba(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,d){const y=this.layers[0],b=[];let T=null,E=!1,k=y.type==="heatmap";if(y.type==="circle"){const L=y;T=L.layout.get("circle-sort-key"),E=!T.isConstant(),k=k||L.paint.get("circle-pitch-alignment")==="map"}const N=k?o.subdivisionGranularity.circle:1;for(const{feature:L,id:V,index:W,sourceLayerIndex:K}of n){const ee=this.layers[0]._featureFilter.needGeometry,le=Dc(L,ee);if(!this.layers[0]._featureFilter.filter(new nn(this.zoom),le,d))continue;const de=E?T.evaluate(le,{},d):void 0,ye={id:V,properties:L.properties,type:L.type,sourceLayerIndex:K,index:W,geometry:ee?le.geometry:Hs(L),patterns:{},sortKey:de};b.push(ye)}E&&b.sort((L,V)=>L.sortKey-V.sortKey);for(const L of b){const{geometry:V,index:W,sourceLayerIndex:K}=L,ee=n[W].feature;this.addFeature(L,V,W,d,N),o.featureIndex.insert(ee,V,W,K,this.index)}}update(n,o,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:d})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,cn),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,o,d,y,b=1){let T;switch(b){case 1:T=[0,7];break;case 3:T=[0,2,5,7];break;case 5:T=[0,1,3,4,6,7];break;case 7:T=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${b}; valid values are 1, 3, 5, 7.`)}const E=T.length;for(const k of o)for(const N of k){const L=N.x,V=N.y;if(L<0||L>=ht||V<0||V>=ht)continue;const W=this.segments.prepareSegment(E*E,this.layoutVertexArray,this.indexArray,n.sortKey),K=W.vertexLength;for(let ee=0;ee<E;ee++)for(let le=0;le<E;le++)qy(this.layoutVertexArray,L,V,T[le],T[ee]);for(let ee=0;ee<E-1;ee++)for(let le=0;le<E-1;le++){const de=K+ee*E+le,ye=K+(ee+1)*E+le;this.indexArray.emplaceBack(de,ye+1,de+1),this.indexArray.emplaceBack(de,ye,ye+1)}W.vertexLength+=E*E,W.primitiveLength+=(E-1)*(E-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{imagePositions:{},canonical:y})}}function Uy(c,n){for(let o=0;o<c.length;o++)if(Bl(n,c[o]))return!0;for(let o=0;o<n.length;o++)if(Bl(c,n[o]))return!0;return!!tp(c,n)}function qd(c,n,o){return!!Bl(c,n)||!!rp(n,c,o)}function Ei(c,n){if(c.length===1)return Nm(n,c[0]);for(let o=0;o<n.length;o++){const d=n[o];for(let y=0;y<d.length;y++)if(Bl(c,d[y]))return!0}for(let o=0;o<c.length;o++)if(Nm(n,c[o]))return!0;for(let o=0;o<n.length;o++)if(tp(c,n[o]))return!0;return!1}function ra(c,n,o){if(c.length>1){if(tp(c,n))return!0;for(let d=0;d<n.length;d++)if(rp(n[d],c,o))return!0}for(let d=0;d<c.length;d++)if(rp(c[d],n,o))return!0;return!1}function tp(c,n){if(c.length===0||n.length===0)return!1;for(let o=0;o<c.length-1;o++){const d=c[o],y=c[o+1];for(let b=0;b<n.length-1;b++)if(Vy(d,y,n[b],n[b+1]))return!0}return!1}function Vy(c,n,o,d){return Yr(c,o,d)!==Yr(n,o,d)&&Yr(c,n,o)!==Yr(c,n,d)}function rp(c,n,o){const d=o*o;if(n.length===1)return c.distSqr(n[0])<d;for(let y=1;y<n.length;y++)if(zm(c,n[y-1],n[y])<d)return!0;return!1}function zm(c,n,o){const d=n.distSqr(o);if(d===0)return c.distSqr(n);const y=((c.x-n.x)*(o.x-n.x)+(c.y-n.y)*(o.y-n.y))/d;return c.distSqr(y<0?n:y>1?o:o.sub(n)._mult(y)._add(n))}function Nm(c,n){let o,d,y,b=!1;for(let T=0;T<c.length;T++){o=c[T];for(let E=0,k=o.length-1;E<o.length;k=E++)d=o[E],y=o[k],d.y>n.y!=y.y>n.y&&n.x<(y.x-d.x)*(n.y-d.y)/(y.y-d.y)+d.x&&(b=!b)}return b}function Bl(c,n){let o=!1;for(let d=0,y=c.length-1;d<c.length;y=d++){const b=c[d],T=c[y];b.y>n.y!=T.y>n.y&&n.x<(T.x-b.x)*(n.y-b.y)/(T.y-b.y)+b.x&&(o=!o)}return o}function Rm(c,n,o){const d=o[0],y=o[2];if(c.x<d.x&&n.x<d.x||c.x>y.x&&n.x>y.x||c.y<d.y&&n.y<d.y||c.y>y.y&&n.y>y.y)return!1;const b=Yr(c,n,o[0]);return b!==Yr(c,n,o[1])||b!==Yr(c,n,o[2])||b!==Yr(c,n,o[3])}function bu(c,n,o){const d=n.paint.get(c).value;return d.kind==="constant"?d.value:o.programConfigurations.get(n.id).getMaxValue(c)}function Ud(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Vd(c,n,o,d,y){if(!n[0]&&!n[1])return c;const b=P.convert(n)._mult(y);o==="viewport"&&b._rotate(-d);const T=[];for(let E=0;E<c.length;E++)T.push(c[E].sub(b));return T}function Lm({queryGeometry:c,size:n},o){return qd(c,o,n)}function Bm({queryGeometry:c,size:n,transform:o,unwrappedTileID:d,getElevation:y},b){return qd(c,b,n*(o.projectTileCoordinates(b.x,b.y,d,y).signedDistanceFromCamera/o.cameraToCenterDistance))}function Fm({queryGeometry:c,size:n,transform:o,unwrappedTileID:d,getElevation:y},b){const T=o.projectTileCoordinates(b.x,b.y,d,y).signedDistanceFromCamera,E=n*(o.cameraToCenterDistance/T);return qd(c,Nh(b,o,d,y),E)}function Gy({queryGeometry:c,size:n,transform:o,unwrappedTileID:d,getElevation:y},b){return qd(c,Nh(b,o,d,y),n)}function np({queryGeometry:c,size:n,transform:o,unwrappedTileID:d,getElevation:y,pitchAlignment:b="map",pitchScale:T="map"},E){const k=b==="map"?T==="map"?Lm:Bm:T==="map"?Fm:Gy,N={queryGeometry:c,size:n,transform:o,unwrappedTileID:d,getElevation:y};for(const L of E)for(const V of L)if(k(N,V))return!0;return!1}function Nh(c,n,o,d){const y=n.projectTileCoordinates(c.x,c.y,o,d).point;return new P((.5*y.x+.5)*n.width,(.5*-y.y+.5)*n.height)}let ip,$m;Dt("CircleBucket",ep,{omit:["layers"]});var qm={get paint(){return $m=$m||new Pi({"circle-radius":new Ht(Ue.paint_circle["circle-radius"]),"circle-color":new Ht(Ue.paint_circle["circle-color"]),"circle-blur":new Ht(Ue.paint_circle["circle-blur"]),"circle-opacity":new Ht(Ue.paint_circle["circle-opacity"]),"circle-translate":new Rt(Ue.paint_circle["circle-translate"]),"circle-translate-anchor":new Rt(Ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Rt(Ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Rt(Ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ht(Ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ht(Ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ht(Ue.paint_circle["circle-stroke-opacity"])})},get layout(){return ip=ip||new Pi({"circle-sort-key":new Ht(Ue.layout_circle["circle-sort-key"])})}};class Zy extends Xa{constructor(n,o){super(n,qm,o)}createBucket(n){return new ep(n)}queryRadius(n){const o=n;return bu("circle-radius",this,o)+bu("circle-stroke-width",this,o)+Ud(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:d,geometry:y,transform:b,pixelsToTileUnits:T,unwrappedTileID:E,getElevation:k}){const N=Vd(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-b.bearingInRadians,T),L=this.paint.get("circle-radius").evaluate(o,d)+this.paint.get("circle-stroke-width").evaluate(o,d),V=this.paint.get("circle-pitch-scale"),W=this.paint.get("circle-pitch-alignment");let K,ee;return W==="map"?(K=N,ee=L*T):(K=function(le,de,ye,Be){return le.map(Ae=>Nh(Ae,de,ye,Be))}(N,b,E,k),ee=L),np({queryGeometry:K,size:ee,transform:b,unwrappedTileID:E,getElevation:k,pitchAlignment:W,pitchScale:V},y)}}class Xs extends ep{}let ap;Dt("HeatmapBucket",Xs,{omit:["layers"]});var wx={get paint(){return ap=ap||new Pi({"heatmap-radius":new Ht(Ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ht(Ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Rt(Ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new jc(Ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Rt(Ue.paint_heatmap["heatmap-opacity"])})}};function op(c,{width:n,height:o},d,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==n*o*d)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${n*o*d}`)}else y=new Uint8Array(n*o*d);return c.width=n,c.height=o,c.data=y,c}function Ws(c,{width:n,height:o},d){if(n===c.width&&o===c.height)return;const y=op({},{width:n,height:o},d);sp(c,y,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,n),height:Math.min(c.height,o)},d),c.width=n,c.height=o,c.data=y.data}function sp(c,n,o,d,y,b){if(y.width===0||y.height===0)return n;if(y.width>c.width||y.height>c.height||o.x>c.width-y.width||o.y>c.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>n.width||y.height>n.height||d.x>n.width-y.width||d.y>n.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const T=c.data,E=n.data;if(T===E)throw new Error("srcData equals dstData, so image is already copied");for(let k=0;k<y.height;k++){const N=((o.y+k)*c.width+o.x)*b,L=((d.y+k)*n.width+d.x)*b;for(let V=0;V<y.width*b;V++)E[L+V]=T[N+V]}return n}class zc{constructor(n,o){op(this,n,1,o)}resize(n){Ws(this,n,1)}clone(){return new zc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,d,y,b){sp(n,o,d,y,b,1)}}class Ci{constructor(n,o){op(this,n,4,o)}resize(n){Ws(this,n,4)}replace(n,o){o?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ci({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,d,y,b){sp(n,o,d,y,b,4)}setPixel(n,o,d){const y=4*(n*this.width+o);this.data[y+0]=Math.round(255*d.r/d.a),this.data[y+1]=Math.round(255*d.g/d.a),this.data[y+2]=Math.round(255*d.b/d.a),this.data[y+3]=Math.round(255*d.a)}}function Vn(c){const n={},o=c.resolution||256,d=c.clips?c.clips.length:1,y=c.image||new Ci({width:o,height:d});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const b=(T,E,k)=>{n[c.evaluationKey]=k;const N=c.expression.evaluate(n);y.setPixel(T/4/o,E/4,N)};if(c.clips)for(let T=0,E=0;T<d;++T,E+=4*o)for(let k=0,N=0;k<o;k++,N+=4){const L=k/(o-1),{start:V,end:W}=c.clips[T];b(E,N,V*(1-L)+W*L)}else for(let T=0,E=0;T<o;T++,E+=4)b(0,E,T/(o-1));return y}Dt("AlphaImage",zc),Dt("RGBAImage",Ci);const Um="big-fb";class Sx extends Xa{createBucket(n){return new Xs(n)}constructor(n,o){super(n,wx,o),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Vn({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Um)&&this.heatmapFbos.delete(Um)}queryRadius(n){return bu("heatmap-radius",this,n)}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:d,geometry:y,transform:b,pixelsToTileUnits:T,unwrappedTileID:E,getElevation:k}){return np({queryGeometry:n,size:this.paint.get("heatmap-radius").evaluate(o,d)*T,transform:b,unwrappedTileID:E,getElevation:k},y)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Vm;var Gd={get paint(){return Vm=Vm||new Pi({"hillshade-illumination-direction":new Rt(Ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Rt(Ue.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Rt(Ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Rt(Ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Rt(Ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Rt(Ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Rt(Ue.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Rt(Ue.paint_hillshade["hillshade-method"])})}};class Nc extends Xa{constructor(n,o){super(n,Gd,o),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let n=this.paint.get("hillshade-illumination-direction").values,o=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,y=this.paint.get("hillshade-shadow-color").values;const b=Math.max(n.length,o.length,d.length,y.length);n=n.concat(Array(b-n.length).fill(n.at(-1))),o=o.concat(Array(b-o.length).fill(o.at(-1))),d=d.concat(Array(b-d.length).fill(d.at(-1))),y=y.concat(Array(b-y.length).fill(y.at(-1)));const T=o.map(Ts);return{directionRadians:n.map(Ts),altitudeRadians:T,shadowColor:y,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Gm;var Hy={get paint(){return Gm=Gm||new Pi({"color-relief-opacity":new Rt(Ue["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new jc(Ue["paint_color-relief"]["color-relief-color"])})}};class wu{constructor(n,o,d,y){this.context=n,this.format=d,this.texture=n.gl.createTexture(),this.update(o,y)}update(n,o,d){const{width:y,height:b}=n,T=!(this.size&&this.size[0]===y&&this.size[1]===b||d),{context:E}=this,{gl:k}=E;if(this.useMipmap=!!(o&&o.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!o||o.premultiply!==!1)),T)this.size=[y,b],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||Wn(n)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,n):k.texImage2D(k.TEXTURE_2D,0,this.format,y,b,0,this.format,k.UNSIGNED_BYTE,n.data);else{const{x:N,y:L}=d||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||Wn(n)?k.texSubImage2D(k.TEXTURE_2D,0,N,L,k.RGBA,k.UNSIGNED_BYTE,n):k.texSubImage2D(k.TEXTURE_2D,0,N,L,y,b,k.RGBA,k.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D),E.pixelStoreUnpackFlipY.setDefault(),E.pixelStoreUnpack.setDefault(),E.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(n,o,d){const{context:y}=this,{gl:b}=y;b.bindTexture(b.TEXTURE_2D,this.texture),d!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=b.LINEAR),n!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,n),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,d||n),this.filter=n),o!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,o),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class ys{constructor(n,o,d,y=1,b=1,T=1,E=0){if(this.uid=n,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Qt(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const k=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=y,this.greenFactor=b,this.blueFactor=T,this.baseShift=E;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let N=0;N<k;N++)this.data[this._idx(-1,N)]=this.data[this._idx(0,N)],this.data[this._idx(k,N)]=this.data[this._idx(k-1,N)],this.data[this._idx(N,-1)]=this.data[this._idx(N,0)],this.data[this._idx(N,k)]=this.data[this._idx(N,k-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(k,-1)]=this.data[this._idx(k-1,0)],this.data[this._idx(-1,k)]=this.data[this._idx(0,k-1)],this.data[this._idx(k,k)]=this.data[this._idx(k-1,k-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let N=0;N<k;N++)for(let L=0;L<k;L++){const V=this.get(N,L);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(n,o){const d=new Uint8Array(this.data.buffer),y=4*this._idx(n,o);return this.unpack(d[y],d[y+1],d[y+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,o){if(n<-1||n>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(n+1)}unpack(n,o,d){return n*this.redFactor+o*this.greenFactor+d*this.blueFactor-this.baseShift}pack(n){return Zm(n,this.getUnpackVector())}getPixels(){return new Ci({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,o,d){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let y=o*this.dim,b=o*this.dim+this.dim,T=d*this.dim,E=d*this.dim+this.dim;switch(o){case-1:y=b-1;break;case 1:b=y+1}switch(d){case-1:T=E-1;break;case 1:E=T+1}const k=-o*this.dim,N=-d*this.dim;for(let L=T;L<E;L++)for(let V=y;V<b;V++)this.data[this._idx(V,L)]=n.data[this._idx(V+k,L+N)]}}function Zm(c,n){const o=n[0],d=n[1],y=n[2],b=n[3],T=Math.min(o,d,y),E=Math.round((c+b)/T);return{r:Math.floor(E*T/o)%256,g:Math.floor(E*T/d)%256,b:Math.floor(E*T/y)%256}}Dt("DEMData",ys);class Hm extends Xa{constructor(n,o){super(n,Hy,o)}_createColorRamp(n){const o={elevationStops:[],colorStops:[]},d=this._transitionablePaint._values["color-relief-color"].value.expression;if(d instanceof Ol&&d._styleExpression.expression instanceof mi){this.colorRampExpression=d;const T=d._styleExpression.expression;o.elevationStops=T.labels,o.colorStops=[];for(const E of o.elevationStops)o.colorStops.push(T.evaluate({globals:{elevation:E}}))}if(o.elevationStops.length<1&&(o.elevationStops=[0],o.colorStops=[xr.transparent]),o.elevationStops.length<2&&(o.elevationStops.push(o.elevationStops[0]+1),o.colorStops.push(o.colorStops[0])),o.elevationStops.length<=n)return o;const y={elevationStops:[],colorStops:[]},b=(o.elevationStops.length-1)/(n-1);for(let T=0;T<o.elevationStops.length-.5;T+=b)y.elevationStops.push(o.elevationStops[Math.round(T)]),y.colorStops.push(o.colorStops[Math.round(T)]);return Qt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),y}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(n,o,d){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const y=this._createColorRamp(o),b=new Ci({width:y.colorStops.length,height:1}),T=new Ci({width:y.colorStops.length,height:1});for(let E=0;E<y.elevationStops.length;E++){const k=Zm(y.elevationStops[E],d);T.setPixel(0,E,new xr(k.r/255,k.g/255,k.b/255,1)),b.setPixel(0,E,y.colorStops[E])}return this.colorRampTextures={elevationTexture:new wu(n,T,n.gl.RGBA),colorTexture:new wu(n,b,n.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const Xy=Cn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Xm}=Xy;function Rh(c,n,o){const d=o.patternDependencies;let y=!1;for(const b of n){const T=b.paint.get(`${c}-pattern`);T.isConstant()||(y=!0);const E=T.constantOr(null);E&&(y=!0,d[E.to]=!0,d[E.from]=!0)}return y}function Lh(c,n,o,d,y){const{zoom:b}=d,T=y.patternDependencies;for(const E of n){const k=E.paint.get(`${c}-pattern`).value;if(k.kind!=="constant"){let N=k.evaluate({zoom:b-1},o,{},y.availableImages),L=k.evaluate({zoom:b},o,{},y.availableImages),V=k.evaluate({zoom:b+1},o,{},y.availableImages);N=N&&N.name?N.name:N,L=L&&L.name?L.name:L,V=V&&V.name?V.name:V,T[N]=!0,T[L]=!0,T[V]=!0,o.patterns[E.id]={min:N,mid:L,max:V}}}return o}function Wm(c,n,o,d,y){let b;if(y===function(T,E,k,N){let L=0;for(let V=E,W=k-N;V<k;V+=N)L+=(T[W]-T[V])*(T[V+1]+T[W+1]),W=V;return L}(c,n,o,d)>0)for(let T=n;T<o;T+=d)b=Rc(T/d|0,c[T],c[T+1],b);else for(let T=o-d;T>=n;T-=d)b=Rc(T/d|0,c[T],c[T+1],b);return b&&Gi(b,b.next)&&(Xo(b),b=b.next),b}function za(c,n){if(!c)return c;n||(n=c);let o,d=c;do if(o=!1,d.steiner||!Gi(d,d.next)&&Rn(d.prev,d,d.next)!==0)d=d.next;else{if(Xo(d),d=n=d.prev,d===d.next)break;o=!0}while(o||d!==n);return n}function Nn(c,n,o,d,y,b,T){if(!c)return;!T&&b&&function(k,N,L,V){let W=k;do W.z===0&&(W.z=wa(W.x,W.y,N,L,V)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==k);W.prevZ.nextZ=null,W.prevZ=null,function(K){let ee,le=1;do{let de,ye=K;K=null;let Be=null;for(ee=0;ye;){ee++;let Ae=ye,je=0;for(let it=0;it<le&&(je++,Ae=Ae.nextZ,Ae);it++);let Ye=le;for(;je>0||Ye>0&&Ae;)je!==0&&(Ye===0||!Ae||ye.z<=Ae.z)?(de=ye,ye=ye.nextZ,je--):(de=Ae,Ae=Ae.nextZ,Ye--),Be?Be.nextZ=de:K=de,de.prevZ=Be,Be=de;ye=Ae}Be.nextZ=null,le*=2}while(ee>1)}(W)}(c,d,y,b);let E=c;for(;c.prev!==c.next;){const k=c.prev,N=c.next;if(b?Wy(c,d,y,b):Ym(c))n.push(k.i,c.i,N.i),Xo(c),c=N.next,E=N.next;else if((c=N)===E){T?T===1?Nn(c=Vi(za(c),n),n,o,d,y,b,2):T===2&&Tx(c,n,o,d,y,b):Nn(za(c),n,o,d,y,b,1);break}}}function Ym(c){const n=c.prev,o=c,d=c.next;if(Rn(n,o,d)>=0)return!1;const y=n.x,b=o.x,T=d.x,E=n.y,k=o.y,N=d.y,L=Math.min(y,b,T),V=Math.min(E,k,N),W=Math.max(y,b,T),K=Math.max(E,k,N);let ee=d.next;for(;ee!==n;){if(ee.x>=L&&ee.x<=W&&ee.y>=V&&ee.y<=K&&Bh(y,E,b,k,T,N,ee.x,ee.y)&&Rn(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function Wy(c,n,o,d){const y=c.prev,b=c,T=c.next;if(Rn(y,b,T)>=0)return!1;const E=y.x,k=b.x,N=T.x,L=y.y,V=b.y,W=T.y,K=Math.min(E,k,N),ee=Math.min(L,V,W),le=Math.max(E,k,N),de=Math.max(L,V,W),ye=wa(K,ee,n,o,d),Be=wa(le,de,n,o,d);let Ae=c.prevZ,je=c.nextZ;for(;Ae&&Ae.z>=ye&&je&&je.z<=Be;){if(Ae.x>=K&&Ae.x<=le&&Ae.y>=ee&&Ae.y<=de&&Ae!==y&&Ae!==T&&Bh(E,L,k,V,N,W,Ae.x,Ae.y)&&Rn(Ae.prev,Ae,Ae.next)>=0||(Ae=Ae.prevZ,je.x>=K&&je.x<=le&&je.y>=ee&&je.y<=de&&je!==y&&je!==T&&Bh(E,L,k,V,N,W,je.x,je.y)&&Rn(je.prev,je,je.next)>=0))return!1;je=je.nextZ}for(;Ae&&Ae.z>=ye;){if(Ae.x>=K&&Ae.x<=le&&Ae.y>=ee&&Ae.y<=de&&Ae!==y&&Ae!==T&&Bh(E,L,k,V,N,W,Ae.x,Ae.y)&&Rn(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.prevZ}for(;je&&je.z<=Be;){if(je.x>=K&&je.x<=le&&je.y>=ee&&je.y<=de&&je!==y&&je!==T&&Bh(E,L,k,V,N,W,je.x,je.y)&&Rn(je.prev,je,je.next)>=0)return!1;je=je.nextZ}return!0}function Vi(c,n){let o=c;do{const d=o.prev,y=o.next.next;!Gi(d,y)&&Ho(d,o,o.next,y)&&Fh(d,y)&&Fh(y,d)&&(n.push(d.i,o.i,y.i),Xo(o),Xo(o.next),o=c=y),o=o.next}while(o!==c);return za(o)}function Tx(c,n,o,d,y,b){let T=c;do{let E=T.next.next;for(;E!==T.prev;){if(T.i!==E.i&&Ax(T,E)){let k=$l(T,E);return T=za(T,T.next),k=za(k,k.next),Nn(T,n,o,d,y,b,0),void Nn(k,n,o,d,y,b,0)}E=E.next}T=T.next}while(T!==c)}function Yy(c,n){let o=c.x-n.x;return o===0&&(o=c.y-n.y,o===0)&&(o=(c.next.y-c.y)/(c.next.x-c.x)-(n.next.y-n.y)/(n.next.x-n.x)),o}function Ky(c,n){const o=function(y,b){let T=b;const E=y.x,k=y.y;let N,L=-1/0;if(Gi(y,T))return T;do{if(Gi(y,T.next))return T.next;if(k<=T.y&&k>=T.next.y&&T.next.y!==T.y){const le=T.x+(k-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(le<=E&&le>L&&(L=le,N=T.x<T.next.x?T:T.next,le===E))return N}T=T.next}while(T!==b);if(!N)return null;const V=N,W=N.x,K=N.y;let ee=1/0;T=N;do{if(E>=T.x&&T.x>=W&&E!==T.x&&Km(k<K?E:L,k,W,K,k<K?L:E,k,T.x,T.y)){const le=Math.abs(k-T.y)/(E-T.x);Fh(T,y)&&(le<ee||le===ee&&(T.x>N.x||T.x===N.x&&Gn(N,T)))&&(N=T,ee=le)}T=T.next}while(T!==V);return N}(c,n);if(!o)return n;const d=$l(o,c);return za(d,d.next),za(o,o.next)}function Gn(c,n){return Rn(c.prev,c,n.prev)<0&&Rn(n.next,c,c.next)<0}function wa(c,n,o,d,y){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-o)*y|0)|c<<8))|c<<4))|c<<2))|c<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-d)*y|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Fl(c){let n=c,o=c;do(n.x<o.x||n.x===o.x&&n.y<o.y)&&(o=n),n=n.next;while(n!==c);return o}function Km(c,n,o,d,y,b,T,E){return(y-T)*(n-E)>=(c-T)*(b-E)&&(c-T)*(d-E)>=(o-T)*(n-E)&&(o-T)*(b-E)>=(y-T)*(d-E)}function Bh(c,n,o,d,y,b,T,E){return!(c===T&&n===E)&&Km(c,n,o,d,y,b,T,E)}function Ax(c,n){return c.next.i!==n.i&&c.prev.i!==n.i&&!function(o,d){let y=o;do{if(y.i!==o.i&&y.next.i!==o.i&&y.i!==d.i&&y.next.i!==d.i&&Ho(y,y.next,o,d))return!0;y=y.next}while(y!==o);return!1}(c,n)&&(Fh(c,n)&&Fh(n,c)&&function(o,d){let y=o,b=!1;const T=(o.x+d.x)/2,E=(o.y+d.y)/2;do y.y>E!=y.next.y>E&&y.next.y!==y.y&&T<(y.next.x-y.x)*(E-y.y)/(y.next.y-y.y)+y.x&&(b=!b),y=y.next;while(y!==o);return b}(c,n)&&(Rn(c.prev,c,n.prev)||Rn(c,n.prev,n))||Gi(c,n)&&Rn(c.prev,c,c.next)>0&&Rn(n.prev,n,n.next)>0)}function Rn(c,n,o){return(n.y-c.y)*(o.x-n.x)-(n.x-c.x)*(o.y-n.y)}function Gi(c,n){return c.x===n.x&&c.y===n.y}function Ho(c,n,o,d){const y=Sa(Rn(c,n,o)),b=Sa(Rn(c,n,d)),T=Sa(Rn(o,d,c)),E=Sa(Rn(o,d,n));return y!==b&&T!==E||!(y!==0||!Zd(c,o,n))||!(b!==0||!Zd(c,d,n))||!(T!==0||!Zd(o,c,d))||!(E!==0||!Zd(o,n,d))}function Zd(c,n,o){return n.x<=Math.max(c.x,o.x)&&n.x>=Math.min(c.x,o.x)&&n.y<=Math.max(c.y,o.y)&&n.y>=Math.min(c.y,o.y)}function Sa(c){return c>0?1:c<0?-1:0}function Fh(c,n){return Rn(c.prev,c,c.next)<0?Rn(c,n,c.next)>=0&&Rn(c,c.prev,n)>=0:Rn(c,n,c.prev)<0||Rn(c,c.next,n)<0}function $l(c,n){const o=Hd(c.i,c.x,c.y),d=Hd(n.i,n.x,n.y),y=c.next,b=n.prev;return c.next=n,n.prev=c,o.next=y,y.prev=o,d.next=o,o.prev=d,b.next=d,d.prev=b,d}function Rc(c,n,o,d){const y=Hd(c,n,o);return d?(y.next=d.next,y.prev=d,d.next.prev=y,d.next=y):(y.prev=y,y.next=y),y}function Xo(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Hd(c,n,o){return{i:c,x:n,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Lc{constructor(n,o){if(o>n)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=n,this._minGranularity=o}getGranularityForZoomLevel(n){return Math.max(Math.floor(this._baseZoomGranularity/(1<<n)),this._minGranularity,1)}}class bo{constructor(n){this.fill=n.fill,this.line=n.line,this.tile=n.tile,this.stencil=n.stencil,this.circle=n.circle}}bo.noSubdivision=new bo({fill:new Lc(0,0),line:new Lc(0,0),tile:new Lc(0,0),stencil:new Lc(0,0),circle:1}),Dt("SubdivisionGranularityExpression",Lc),Dt("SubdivisionGranularitySetting",bo);const Su=-32768,Ys=32767;class Xd{constructor(n,o){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=n,this._granularityCellSize=ht/n,this._canonical=o}_getKey(n,o){return(n+=32768)<<16|o+32768}_vertexToIndex(n,o){if(n<-32768||o<-32768||n>32767||o>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(n),y=0|Math.round(o),b=this._getKey(d,y);if(this._vertexDictionary.has(b))return this._vertexDictionary.get(b);const T=this._vertexBuffer.length/2;return this._vertexDictionary.set(b,T),this._vertexBuffer.push(d,y),T}_subdivideTrianglesScanline(n){if(this._granularity<2)return function(y,b){const T=[];for(let E=0;E<b.length;E+=3){const k=b[E],N=b[E+1],L=b[E+2],V=y[2*k],W=y[2*k+1];(y[2*N]-V)*(y[2*L+1]-W)-(y[2*N+1]-W)*(y[2*L]-V)>0?(T.push(k),T.push(L),T.push(N)):(T.push(k),T.push(N),T.push(L))}return T}(this._vertexBuffer,n);const o=[],d=n.length;for(let y=0;y<d;y+=3){const b=[n[y+0],n[y+1],n[y+2]],T=[this._vertexBuffer[2*n[y+0]+0],this._vertexBuffer[2*n[y+0]+1],this._vertexBuffer[2*n[y+1]+0],this._vertexBuffer[2*n[y+1]+1],this._vertexBuffer[2*n[y+2]+0],this._vertexBuffer[2*n[y+2]+1]];let E=1/0,k=1/0,N=-1/0,L=-1/0;for(let le=0;le<3;le++){const de=T[2*le],ye=T[2*le+1];E=Math.min(E,de),N=Math.max(N,de),k=Math.min(k,ye),L=Math.max(L,ye)}if(E===N||k===L)continue;const V=Math.floor(E/this._granularityCellSize),W=Math.ceil(N/this._granularityCellSize),K=Math.floor(k/this._granularityCellSize),ee=Math.ceil(L/this._granularityCellSize);if(V!==W||K!==ee)for(let le=K;le<ee;le++){const de=this._scanlineGenerateVertexRingForCellRow(le,T,b);Qy(this._vertexBuffer,de,o)}else o.push(...b)}return o}_scanlineGenerateVertexRingForCellRow(n,o,d){const y=n*this._granularityCellSize,b=y+this._granularityCellSize,T=[];for(let E=0;E<3;E++){const k=o[2*E],N=o[2*E+1],L=o[2*(E+1)%6],V=o[(2*(E+1)+1)%6],W=o[2*(E+2)%6],K=o[(2*(E+2)+1)%6],ee=L-k,le=V-N,de=ee===0,ye=le===0,Be=(y-N)/le,Ae=(b-N)/le,je=Math.min(Be,Ae),Ye=Math.max(Be,Ae);if(!ye&&(je>=1||Ye<=0)||ye&&(N<y||N>b)){V>=y&&V<=b&&T.push(d[(E+1)%3]);continue}!ye&&je>0&&T.push(this._vertexToIndex(k+ee*je,N+le*je));const it=k+ee*Math.max(je,0),gt=k+ee*Math.min(Ye,1);de||this._generateIntraEdgeVertices(T,k,N,L,V,it,gt),!ye&&Ye<1&&T.push(this._vertexToIndex(k+ee*Ye,N+le*Ye)),(ye||V>=y&&V<=b)&&T.push(d[(E+1)%3]),!ye&&(V<=y||V>=b)&&this._generateInterEdgeVertices(T,k,N,L,V,W,K,gt,y,b)}return T}_generateIntraEdgeVertices(n,o,d,y,b,T,E){const k=y-o,N=b-d,L=N===0,V=L?Math.min(o,y):Math.min(T,E),W=L?Math.max(o,y):Math.max(T,E),K=Math.floor(V/this._granularityCellSize)+1,ee=Math.ceil(W/this._granularityCellSize)-1;if(L?o<y:T<E)for(let le=K;le<=ee;le++){const de=le*this._granularityCellSize;n.push(this._vertexToIndex(de,d+N*(de-o)/k))}else for(let le=ee;le>=K;le--){const de=le*this._granularityCellSize;n.push(this._vertexToIndex(de,d+N*(de-o)/k))}}_generateInterEdgeVertices(n,o,d,y,b,T,E,k,N,L){const V=b-d,W=T-y,K=E-b,ee=(N-b)/K,le=(L-b)/K,de=Math.min(ee,le),ye=Math.max(ee,le),Be=y+W*de;let Ae=Math.floor(Math.min(Be,k)/this._granularityCellSize)+1,je=Math.ceil(Math.max(Be,k)/this._granularityCellSize)-1,Ye=k<Be;const it=K===0;if(it&&(E===N||E===L))return;if(it||de>=1||ye<=0){const Et=d-E,Mt=T+(o-T)*Math.min((N-E)/Et,(L-E)/Et);Ae=Math.floor(Math.min(Mt,k)/this._granularityCellSize)+1,je=Math.ceil(Math.max(Mt,k)/this._granularityCellSize)-1,Ye=k<Mt}const gt=V>0?L:N;if(Ye)for(let Et=Ae;Et<=je;Et++)n.push(this._vertexToIndex(Et*this._granularityCellSize,gt));else for(let Et=je;Et>=Ae;Et--)n.push(this._vertexToIndex(Et*this._granularityCellSize,gt))}_generateOutline(n){const o=[];for(const d of n){const y=Wo(d,this._granularity,!0),b=this._pointArrayToIndices(y),T=[];for(let E=1;E<b.length;E++)T.push(b[E-1]),T.push(b[E]);o.push(T)}return o}_handlePoles(n){let o=!1,d=!1;this._canonical&&(this._canonical.y===0&&(o=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(o||d)&&this._fillPoles(n,o,d)}_ensureNoPoleVertices(){const n=this._vertexBuffer;for(let o=0;o<n.length;o+=2){const d=n[o+1];d===Su&&(n[o+1]=-32767),d===Ys&&(n[o+1]=32766)}}_generatePoleQuad(n,o,d,y,b,T){y>b!=(T===Su)?(n.push(o),n.push(d),n.push(this._vertexToIndex(y,T)),n.push(d),n.push(this._vertexToIndex(b,T)),n.push(this._vertexToIndex(y,T))):(n.push(d),n.push(o),n.push(this._vertexToIndex(y,T)),n.push(this._vertexToIndex(b,T)),n.push(d),n.push(this._vertexToIndex(y,T)))}_fillPoles(n,o,d){const y=this._vertexBuffer,b=ht,T=n.length;for(let E=2;E<T;E+=3){const k=n[E-2],N=n[E-1],L=n[E],V=y[2*k],W=y[2*k+1],K=y[2*N],ee=y[2*N+1],le=y[2*L],de=y[2*L+1];o&&(W===0&&ee===0&&this._generatePoleQuad(n,k,N,V,K,Su),ee===0&&de===0&&this._generatePoleQuad(n,N,L,K,le,Su),de===0&&W===0&&this._generatePoleQuad(n,L,k,le,V,Su)),d&&(W===b&&ee===b&&this._generatePoleQuad(n,k,N,V,K,Ys),ee===b&&de===b&&this._generatePoleQuad(n,N,L,K,le,Ys),de===b&&W===b&&this._generatePoleQuad(n,L,k,le,V,Ys))}}_initializeVertices(n){for(let o=0;o<n.length;o+=2)this._vertexToIndex(n[o],n[o+1])}subdividePolygonInternal(n,o){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:y}=function(E){const k=[],N=[];for(const L of E)if(L.length!==0){L!==E[0]&&k.push(N.length/2);for(let V=0;V<L.length;V++)N.push(L[V].x),N.push(L[V].y)}return{flattened:N,holeIndices:k}}(n);let b;this._initializeVertices(d);try{const E=function(N,L,V=2){const W=L&&L.length,K=W?L[0]*V:N.length;let ee=Wm(N,0,K,V,!0);const le=[];if(!ee||ee.next===ee.prev)return le;let de,ye,Be;if(W&&(ee=function(Ae,je,Ye,it){const gt=[];for(let Et=0,Mt=je.length;Et<Mt;Et++){const jt=Wm(Ae,je[Et]*it,Et<Mt-1?je[Et+1]*it:Ae.length,it,!1);jt===jt.next&&(jt.steiner=!0),gt.push(Fl(jt))}gt.sort(Yy);for(let Et=0;Et<gt.length;Et++)Ye=Ky(gt[Et],Ye);return Ye}(N,L,ee,V)),N.length>80*V){de=N[0],ye=N[1];let Ae=de,je=ye;for(let Ye=V;Ye<K;Ye+=V){const it=N[Ye],gt=N[Ye+1];it<de&&(de=it),gt<ye&&(ye=gt),it>Ae&&(Ae=it),gt>je&&(je=gt)}Be=Math.max(Ae-de,je-ye),Be=Be!==0?32767/Be:0}return Nn(ee,le,V,de,ye,Be,0),le}(d,y),k=this._convertIndices(d,E);b=this._subdivideTrianglesScanline(k)}catch(E){console.error(E)}let T=[];return o&&(T=this._generateOutline(n)),this._ensureNoPoleVertices(),this._handlePoles(b),{verticesFlattened:this._vertexBuffer,indicesTriangles:b,indicesLineList:T}}_convertIndices(n,o){const d=[];for(let y=0;y<o.length;y++)d.push(this._vertexToIndex(n[2*o[y]],n[2*o[y]+1]));return d}_pointArrayToIndices(n){const o=[];for(let d=0;d<n.length;d++){const y=n[d];o.push(this._vertexToIndex(y.x,y.y))}return o}}function $h(c,n,o,d=!0){return new Xd(o,n).subdividePolygonInternal(c,d)}function Wo(c,n,o=!1){if(!c||c.length<1)return[];if(c.length<2)return[];const d=c[0],y=c[c.length-1],b=o&&(d.x!==y.x||d.y!==y.y);if(n<2)return b?[...c,c[0]]:[...c];const T=Math.floor(ht/n),E=[];E.push(new P(c[0].x,c[0].y));const k=c.length,N=b?k:k-1;for(let L=0;L<N;L++){const V=c[L],W=L<k-1?c[L+1]:c[0],K=V.x,ee=V.y,le=W.x,de=W.y,ye=K!==le,Be=ee!==de;if(!ye&&!Be)continue;const Ae=le-K,je=de-ee,Ye=Math.abs(Ae),it=Math.abs(je);let gt=K,Et=ee;for(;;){const jt=Ae>0?(Math.floor(gt/T)+1)*T:(Math.ceil(gt/T)-1)*T,$t=je>0?(Math.floor(Et/T)+1)*T:(Math.ceil(Et/T)-1)*T,kt=Math.abs(gt-jt),It=Math.abs(Et-$t),dt=Math.abs(gt-le),tr=Math.abs(Et-de),sr=ye?kt/Ye:Number.POSITIVE_INFINITY,Gt=Be?It/it:Number.POSITIVE_INFINITY;if((dt<=kt||!ye)&&(tr<=It||!Be))break;if(sr<Gt&&ye||!Be){gt=jt,Et+=je*sr;const Ut=new P(gt,Math.round(Et));E[E.length-1].x===Ut.x&&E[E.length-1].y===Ut.y||E.push(Ut)}else{gt+=Ae*Gt,Et=$t;const Ut=new P(Math.round(gt),Et);E[E.length-1].x===Ut.x&&E[E.length-1].y===Ut.y||E.push(Ut)}}const Mt=new P(le,de);E[E.length-1].x===Mt.x&&E[E.length-1].y===Mt.y||E.push(Mt)}return E}function Qy(c,n,o){if(n.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,y=c[2*n[0]];for(let k=1;k<n.length;k++){const N=c[2*n[k]];N<y&&(y=N,d=k)}const b=n.length;let T=d,E=(T+1)%b;for(;;){const k=T-1>=0?T-1:b-1,N=(E+1)%b,L=c[2*n[k]],V=c[2*n[N]],W=c[2*n[T]],K=c[2*n[T]+1],ee=c[2*n[E]+1];let le=!1;if(L<V)le=!0;else if(L>V)le=!1;else{const de=ee-K,ye=-(c[2*n[E]]-W),Be=K<ee?1:-1;((L-W)*de+(c[2*n[k]+1]-K)*ye)*Be>((V-W)*de+(c[2*n[N]+1]-K)*ye)*Be&&(le=!0)}if(le){const de=n[k],ye=n[T],Be=n[E];de!==ye&&de!==Be&&ye!==Be&&o.push(Be,ye,de),T--,T<0&&(T=b-1)}else{const de=n[N],ye=n[T],Be=n[E];de!==ye&&de!==Be&&ye!==Be&&o.push(Be,ye,de),E++,E>=b&&(E=0)}if(k===N)break}}function Qm(c,n,o,d,y,b,T,E,k){const N=y.length/2,L=T&&E&&k;if(N<Tr.MAX_VERTEX_ARRAY_LENGTH){const V=n.prepareSegment(N,o,d),W=V.vertexLength;for(let le=0;le<b.length;le+=3)d.emplaceBack(W+b[le],W+b[le+1],W+b[le+2]);let K,ee;V.vertexLength+=N,V.primitiveLength+=b.length/3,L&&(ee=T.prepareSegment(N,o,E),K=ee.vertexLength,ee.vertexLength+=N);for(let le=0;le<y.length;le+=2)c(y[le],y[le+1]);if(L)for(let le=0;le<k.length;le++){const de=k[le];for(let ye=1;ye<de.length;ye+=2)E.emplaceBack(K+de[ye-1],K+de[ye]);ee.primitiveLength+=de.length/2}}else(function(V,W,K,ee,le,de){const ye=[];for(let it=0;it<ee.length/2;it++)ye.push(-1);const Be={count:0};let Ae=0,je=V.getOrCreateLatestSegment(W,K),Ye=je.vertexLength;for(let it=2;it<le.length;it+=3){const gt=le[it-2],Et=le[it-1],Mt=le[it];let jt=ye[gt]<Ae,$t=ye[Et]<Ae,kt=ye[Mt]<Ae;je.vertexLength+((jt?1:0)+($t?1:0)+(kt?1:0))>Tr.MAX_VERTEX_ARRAY_LENGTH&&(je=V.createNewSegment(W,K),Ae=Be.count,jt=!0,$t=!0,kt=!0,Ye=0);const It=ql(ye,ee,de,Be,gt,jt,je),dt=ql(ye,ee,de,Be,Et,$t,je),tr=ql(ye,ee,de,Be,Mt,kt,je);K.emplaceBack(Ye+It-Ae,Ye+dt-Ae,Ye+tr-Ae),je.primitiveLength++}})(n,o,d,y,b,c),L&&function(V,W,K,ee,le,de){const ye=[];for(let it=0;it<ee.length/2;it++)ye.push(-1);const Be={count:0};let Ae=0,je=V.getOrCreateLatestSegment(W,K),Ye=je.vertexLength;for(let it=0;it<le.length;it++){const gt=le[it];for(let Et=1;Et<le[it].length;Et+=2){const Mt=gt[Et-1],jt=gt[Et];let $t=ye[Mt]<Ae,kt=ye[jt]<Ae;je.vertexLength+(($t?1:0)+(kt?1:0))>Tr.MAX_VERTEX_ARRAY_LENGTH&&(je=V.createNewSegment(W,K),Ae=Be.count,$t=!0,kt=!0,Ye=0);const It=ql(ye,ee,de,Be,Mt,$t,je),dt=ql(ye,ee,de,Be,jt,kt,je);K.emplaceBack(Ye+It-Ae,Ye+dt-Ae),je.primitiveLength++}}}(T,o,E,y,k,c),n.forceNewSegmentOnNextPrepare(),T==null||T.forceNewSegmentOnNextPrepare()}function ql(c,n,o,d,y,b,T){if(b){const E=d.count;return o(n[2*y],n[2*y+1]),c[y]=d.count,d.count++,T.vertexLength++,E}return c[y]}class lp{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Ne,this.indexArray=new Xr,this.indexArray2=new ln,this.programConfigurations=new ba(n.layers,n.zoom),this.segments=new Tr,this.segments2=new Tr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,d){this.hasDependencies=Rh("fill",this.layers,o);const y=this.layers[0].layout.get("fill-sort-key"),b=!y.isConstant(),T=[];for(const{feature:E,id:k,index:N,sourceLayerIndex:L}of n){const V=this.layers[0]._featureFilter.needGeometry,W=Dc(E,V);if(!this.layers[0]._featureFilter.filter(new nn(this.zoom),W,d))continue;const K=b?y.evaluate(W,{},d,o.availableImages):void 0,ee={id:k,properties:E.properties,type:E.type,sourceLayerIndex:L,index:N,geometry:V?W.geometry:Hs(E),patterns:{},sortKey:K};T.push(ee)}b&&T.sort((E,k)=>E.sortKey-k.sortKey);for(const E of T){const{geometry:k,index:N,sourceLayerIndex:L}=E;if(this.hasDependencies){const V=Lh("fill",this.layers,E,{zoom:this.zoom},o);this.patternFeatures.push(V)}else this.addFeature(E,k,N,d,{},o.subdivisionGranularity);o.featureIndex.insert(n[N].feature,k,N,L,this.index)}}update(n,o,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:d})}addFeatures(n,o,d){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,o,d,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Xm),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,o,d,y,b,T){for(const E of yh(o,500)){const k=$h(E,y,T.fill.getGranularityForZoomLevel(y.z)),N=this.layoutVertexArray;Qm((L,V)=>{N.emplaceBack(L,V)},this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles,this.segments2,this.indexArray2,k.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{imagePositions:b,canonical:y})}}let Wd,Jm;Dt("FillBucket",lp,{omit:["layers","patternFeatures"]});var Mx={get paint(){return Jm=Jm||new Pi({"fill-antialias":new Rt(Ue.paint_fill["fill-antialias"]),"fill-opacity":new Ht(Ue.paint_fill["fill-opacity"]),"fill-color":new Ht(Ue.paint_fill["fill-color"]),"fill-outline-color":new Ht(Ue.paint_fill["fill-outline-color"]),"fill-translate":new Rt(Ue.paint_fill["fill-translate"]),"fill-translate-anchor":new Rt(Ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new Cc(Ue.paint_fill["fill-pattern"])})},get layout(){return Wd=Wd||new Pi({"fill-sort-key":new Ht(Ue.layout_fill["fill-sort-key"])})}};class Px extends Xa{constructor(n,o){super(n,Mx,o)}recalculate(n,o){super.recalculate(n,o);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new lp(n)}queryRadius(){return Ud(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:n,geometry:o,transform:d,pixelsToTileUnits:y}){return Ei(Vd(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,y),o)}isTileClipped(){return!0}}const mn=Cn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),On=Cn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Nr}=mn;class Or{constructor(n,o,d,y,b){this.properties={},this.extent=d,this.type=0,this.id=void 0,this._pbf=n,this._geometry=-1,this._keys=y,this._values=b,n.readFields(gn,this,o)}loadGeometry(){const n=this._pbf;n.pos=this._geometry;const o=n.readVarint()+n.pos,d=[];let y,b=1,T=0,E=0,k=0;for(;n.pos<o;){if(T<=0){const N=n.readVarint();b=7&N,T=N>>3}if(T--,b===1||b===2)E+=n.readSVarint(),k+=n.readSVarint(),b===1&&(y&&d.push(y),y=[]),y&&y.push(new P(E,k));else{if(b!==7)throw new Error(`unknown command ${b}`);y&&y.push(y[0].clone())}}return y&&d.push(y),d}bbox(){const n=this._pbf;n.pos=this._geometry;const o=n.readVarint()+n.pos;let d=1,y=0,b=0,T=0,E=1/0,k=-1/0,N=1/0,L=-1/0;for(;n.pos<o;){if(y<=0){const V=n.readVarint();d=7&V,y=V>>3}if(y--,d===1||d===2)b+=n.readSVarint(),T+=n.readSVarint(),b<E&&(E=b),b>k&&(k=b),T<N&&(N=T),T>L&&(L=T);else if(d!==7)throw new Error(`unknown command ${d}`)}return[E,N,k,L]}toGeoJSON(n,o,d){const y=this.extent*Math.pow(2,d),b=this.extent*n,T=this.extent*o,E=this.loadGeometry();function k(W){return[360*(W.x+b)/y-180,360/Math.PI*Math.atan(Math.exp((1-2*(W.y+T)/y)*Math.PI))-90]}function N(W){return W.map(k)}let L;if(this.type===1){const W=[];for(const ee of E)W.push(ee[0]);const K=N(W);L=W.length===1?{type:"Point",coordinates:K[0]}:{type:"MultiPoint",coordinates:K}}else if(this.type===2){const W=E.map(N);L=W.length===1?{type:"LineString",coordinates:W[0]}:{type:"MultiLineString",coordinates:W}}else{if(this.type!==3)throw new Error("unknown feature type");{const W=function(ee){const le=ee.length;if(le<=1)return[ee];const de=[];let ye,Be;for(let Ae=0;Ae<le;Ae++){const je=wo(ee[Ae]);je!==0&&(Be===void 0&&(Be=je<0),Be===je<0?(ye&&de.push(ye),ye=[ee[Ae]]):ye&&ye.push(ee[Ae]))}return ye&&de.push(ye),de}(E),K=[];for(const ee of W)K.push(ee.map(N));L=K.length===1?{type:"Polygon",coordinates:K[0]}:{type:"MultiPolygon",coordinates:K}}}const V={type:"Feature",geometry:L,properties:this.properties};return this.id!=null&&(V.id=this.id),V}}function gn(c,n,o){c===1?n.id=o.readVarint():c===2?function(d,y){const b=d.readVarint()+d.pos;for(;d.pos<b;){const T=y._keys[d.readVarint()],E=y._values[d.readVarint()];y.properties[T]=E}}(o,n):c===3?n.type=o.readVarint():c===4&&(n._geometry=o.pos)}function wo(c){let n=0;for(let o,d,y=0,b=c.length,T=b-1;y<b;T=y++)o=c[y],d=c[T],n+=(d.x-o.x)*(o.y+d.y);return n}Or.types=["Unknown","Point","LineString","Polygon"];class Ul{constructor(n,o){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(qh,this,o),this.length=this._features.length}feature(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];const o=this._pbf.readVarint()+this._pbf.pos;return new Or(this._pbf,o,this.extent,this._keys,this._values)}}function qh(c,n,o){c===15?n.version=o.readVarint():c===1?n.name=o.readString():c===5?n.extent=o.readVarint():c===2?n._features.push(o.pos):c===3?n._keys.push(o.readString()):c===4&&n._values.push(function(d){let y=null;const b=d.readVarint()+d.pos;for(;d.pos<b;){const T=d.readVarint()>>3;y=T===1?d.readString():T===2?d.readFloat():T===3?d.readDouble():T===4?d.readVarint64():T===5?d.readVarint():T===6?d.readSVarint():T===7?d.readBoolean():null}if(y==null)throw new Error("unknown feature value");return y}(o))}class cp{constructor(n,o){this.layers=n.readFields(Vl,{},o)}}function Vl(c,n,o){if(c===3){const d=new Ul(o,o.readVarint()+o.pos);d.length&&(n[d.name]=d)}}const Zn=Math.pow(2,13);function Yo(c,n,o,d,y,b,T,E){c.emplaceBack(n,o,2*Math.floor(d*Zn)+T,y*Zn*2,b*Zn*2,Math.round(E))}class Gl{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasDependencies=!1,this.layoutVertexArray=new nt,this.centroidVertexArray=new Oe,this.indexArray=new Xr,this.programConfigurations=new ba(n.layers,n.zoom),this.segments=new Tr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,d){this.features=[],this.hasDependencies=Rh("fill-extrusion",this.layers,o);for(const{feature:y,id:b,index:T,sourceLayerIndex:E}of n){const k=this.layers[0]._featureFilter.needGeometry,N=Dc(y,k);if(!this.layers[0]._featureFilter.filter(new nn(this.zoom),N,d))continue;const L={id:b,sourceLayerIndex:E,index:T,geometry:k?N.geometry:Hs(y),properties:y.properties,type:y.type,patterns:{}};this.hasDependencies?this.features.push(Lh("fill-extrusion",this.layers,L,{zoom:this.zoom},o)):this.addFeature(L,L.geometry,T,d,{},o.subdivisionGranularity),o.featureIndex.insert(y,L.geometry,T,E,this.index,!0)}}addFeatures(n,o,d){for(const y of this.features){const{geometry:b}=y;this.addFeature(y,b,y.index,o,d,n.subdivisionGranularity)}}update(n,o,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:d})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Nr),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,On.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,o,d,y,b,T){for(const E of yh(o,500)){const k={x:0,y:0,sampleCount:0},N=this.layoutVertexArray.length;this.processPolygon(k,y,n,E,T);const L=this.layoutVertexArray.length-N,V=Math.floor(k.x/k.sampleCount),W=Math.floor(k.y/k.sampleCount);for(let K=0;K<L;K++)this.centroidVertexArray.emplaceBack(V,W)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{imagePositions:b,canonical:y})}processPolygon(n,o,d,y,b){if(y.length<1||Tu(y[0]))return;for(const V of y)V.length!==0&&eg(n,V);const T={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},E=b.fill.getGranularityForZoomLevel(o.z),k=Or.types[d.type]==="Polygon";for(const V of y){if(V.length===0||Tu(V))continue;const W=Wo(V,E,k);this._generateSideFaces(W,T)}if(!k)return;const N=$h(y,o,E,!1),L=this.layoutVertexArray;Qm((V,W)=>{Yo(L,V,W,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,N.verticesFlattened,N.indicesTriangles)}_generateSideFaces(n,o){let d=0;for(let y=1;y<n.length;y++){const b=n[y],T=n[y-1];if(Ko(b,T))continue;o.segment.vertexLength+4>Tr.MAX_VERTEX_ARRAY_LENGTH&&(o.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const E=b.sub(T)._perp()._unit(),k=T.dist(b);d+k>32768&&(d=0),Yo(this.layoutVertexArray,b.x,b.y,E.x,E.y,0,0,d),Yo(this.layoutVertexArray,b.x,b.y,E.x,E.y,0,1,d),d+=k,Yo(this.layoutVertexArray,T.x,T.y,E.x,E.y,0,0,d),Yo(this.layoutVertexArray,T.x,T.y,E.x,E.y,0,1,d);const N=o.segment.vertexLength;this.indexArray.emplaceBack(N,N+2,N+1),this.indexArray.emplaceBack(N+1,N+2,N+3),o.segment.vertexLength+=4,o.segment.primitiveLength+=2}}}function eg(c,n){for(let o=0;o<n.length;o++){const d=n[o];o===n.length-1&&n[0].x===d.x&&n[0].y===d.y||(c.x+=d.x,c.y+=d.y,c.sampleCount++)}}function Ko(c,n){return c.x===n.x&&(c.x<0||c.x>ht)||c.y===n.y&&(c.y<0||c.y>ht)}function Tu(c){return c.every(n=>n.x<0)||c.every(n=>n.x>ht)||c.every(n=>n.y<0)||c.every(n=>n.y>ht)}let Uh;Dt("FillExtrusionBucket",Gl,{omit:["layers","features"]});var eo={get paint(){return Uh=Uh||new Pi({"fill-extrusion-opacity":new Rt(Ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ht(Ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Rt(Ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Rt(Ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Cc(Ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ht(Ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ht(Ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Rt(Ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class tg extends Xa{constructor(n,o){super(n,eo,o)}createBucket(n){return new Gl(n)}queryRadius(){return Ud(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:d,geometry:y,transform:b,pixelsToTileUnits:T,pixelPosMatrix:E}){const k=Vd(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-b.bearingInRadians,T),N=this.paint.get("fill-extrusion-height").evaluate(o,d),L=this.paint.get("fill-extrusion-base").evaluate(o,d),V=function(K,ee){const le=[];for(const de of K){const ye=[de.x,de.y,0,1];ut(ye,ye,ee),le.push(new P(ye[0]/ye[3],ye[1]/ye[3]))}return le}(k,E),W=function(K,ee,le,de){const ye=[],Be=[],Ae=de[8]*ee,je=de[9]*ee,Ye=de[10]*ee,it=de[11]*ee,gt=de[8]*le,Et=de[9]*le,Mt=de[10]*le,jt=de[11]*le;for(const $t of K){const kt=[],It=[];for(const dt of $t){const tr=dt.x,sr=dt.y,Gt=de[0]*tr+de[4]*sr+de[12],Ut=de[1]*tr+de[5]*sr+de[13],Cr=de[2]*tr+de[6]*sr+de[14],xn=de[3]*tr+de[7]*sr+de[15],Hn=Cr+Ye,ji=xn+it,ia=Gt+gt,aa=Ut+Et,oi=Cr+Mt,An=xn+jt,Ti=new P((Gt+Ae)/ji,(Ut+je)/ji);Ti.z=Hn/ji,kt.push(Ti);const si=new P(ia/An,aa/An);si.z=oi/An,It.push(si)}ye.push(kt),Be.push(It)}return[ye,Be]}(y,L,N,E);return function(K,ee,le){let de=1/0;Ei(le,ee)&&(de=Yd(le,ee[0]));for(let ye=0;ye<ee.length;ye++){const Be=ee[ye],Ae=K[ye];for(let je=0;je<Be.length-1;je++){const Ye=Be[je],it=[Ye,Be[je+1],Ae[je+1],Ae[je],Ye];Uy(le,it)&&(de=Math.min(de,Yd(le,it)))}}return de!==1/0&&de}(W[0],W[1],V)}}function Au(c,n){return c.x*n.x+c.y*n.y}function Yd(c,n){if(c.length===1){let o=0;const d=n[o++];let y;for(;!y||d.equals(y);)if(y=n[o++],!y)return 1/0;for(;o<n.length;o++){const b=n[o],T=c[0],E=y.sub(d),k=b.sub(d),N=T.sub(d),L=Au(E,E),V=Au(E,k),W=Au(k,k),K=Au(N,E),ee=Au(N,k),le=L*W-V*V,de=(W*K-V*ee)/le,ye=(L*ee-V*K)/le,Be=d.z*(1-de-ye)+y.z*de+b.z*ye;if(isFinite(Be))return Be}return 1/0}{let o=1/0;for(const d of n)o=Math.min(o,d.z);return o}}const up=Cn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Bc}=up,na=Cn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Fc}=na,Vh=Math.cos(Math.PI/180*37.5),Mu=Math.pow(2,14)/.5;class Kd{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new We,this.layoutVertexArray2=new Ke,this.indexArray=new Xr,this.programConfigurations=new ba(n.layers,n.zoom),this.segments=new Tr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,d){this.hasDependencies=Rh("line",this.layers,o)||this.hasLineDasharray(this.layers);const y=this.layers[0].layout.get("line-sort-key"),b=!y.isConstant(),T=[];for(const{feature:E,id:k,index:N,sourceLayerIndex:L}of n){const V=this.layers[0]._featureFilter.needGeometry,W=Dc(E,V);if(!this.layers[0]._featureFilter.filter(new nn(this.zoom),W,d))continue;const K=b?y.evaluate(W,{},d):void 0,ee={id:k,properties:E.properties,type:E.type,sourceLayerIndex:L,index:N,geometry:V?W.geometry:Hs(E),patterns:{},dashes:{},sortKey:K};T.push(ee)}b&&T.sort((E,k)=>E.sortKey-k.sortKey);for(const E of T){const{geometry:k,index:N,sourceLayerIndex:L}=E;this.hasDependencies?(Rh("line",this.layers,o)?Lh("line",this.layers,E,{zoom:this.zoom},o):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,E,this.zoom,o),this.patternFeatures.push(E)):this.addFeature(E,k,N,d,{},{},o.subdivisionGranularity),o.featureIndex.insert(n[N].feature,k,N,L,this.index)}}update(n,o,d,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:d,dashPositions:y})}addFeatures(n,o,d,y){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,o,d,y,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Fc)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Bc),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,o,d,y,b,T,E){const k=this.layers[0].layout,N=k.get("line-join").evaluate(n,{}),L=k.get("line-cap"),V=k.get("line-miter-limit"),W=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const K of o)this.addLine(K,n,N,L,V,W,y,E);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{imagePositions:b,dashPositions:T,canonical:y})}addLine(n,o,d,y,b,T,E,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,n=Wo(n,E?k.line.getGranularityForZoomLevel(E.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ae=0;Ae<n.length-1;Ae++)this.totalDistance+=n[Ae].dist(n[Ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const N=Or.types[o.type]==="Polygon";let L=n.length;for(;L>=2&&n[L-1].equals(n[L-2]);)L--;let V=0;for(;V<L-1&&n[V].equals(n[V+1]);)V++;if(L<(N?3:2))return;d==="bevel"&&(b=1.05);const W=this.overscaling<=16?122880/(512*this.overscaling):0,K=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray);let ee,le,de,ye,Be;this.e1=this.e2=-1,N&&(ee=n[L-2],Be=n[V].sub(ee)._unit()._perp());for(let Ae=V;Ae<L;Ae++){if(de=Ae===L-1?N?n[V+1]:void 0:n[Ae+1],de&&n[Ae].equals(de))continue;Be&&(ye=Be),ee&&(le=ee),ee=n[Ae],Be=de?de.sub(ee)._unit()._perp():ye,ye=ye||Be;let je=ye.add(Be);je.x===0&&je.y===0||je._unit();const Ye=ye.x*Be.x+ye.y*Be.y,it=je.x*Be.x+je.y*Be.y,gt=it!==0?1/it:1/0,Et=2*Math.sqrt(2-2*it),Mt=it<Vh&&le&&de,jt=ye.x*Be.y-ye.y*Be.x>0;if(Mt&&Ae>V){const It=ee.dist(le);if(It>2*W){const dt=ee.sub(ee.sub(le)._mult(W/It)._round());this.updateDistance(le,dt),this.addCurrentVertex(dt,ye,0,0,K),le=dt}}const $t=le&&de;let kt=$t?d:N?"butt":y;if($t&&kt==="round"&&(gt<T?kt="miter":gt<=2&&(kt="fakeround")),kt==="miter"&&gt>b&&(kt="bevel"),kt==="bevel"&&(gt>2&&(kt="flipbevel"),gt<b&&(kt="miter")),le&&this.updateDistance(le,ee),kt==="miter")je._mult(gt),this.addCurrentVertex(ee,je,0,0,K);else if(kt==="flipbevel"){if(gt>100)je=Be.mult(-1);else{const It=gt*ye.add(Be).mag()/ye.sub(Be).mag();je._perp()._mult(It*(jt?-1:1))}this.addCurrentVertex(ee,je,0,0,K),this.addCurrentVertex(ee,je.mult(-1),0,0,K)}else if(kt==="bevel"||kt==="fakeround"){const It=-Math.sqrt(gt*gt-1),dt=jt?It:0,tr=jt?0:It;if(le&&this.addCurrentVertex(ee,ye,dt,tr,K),kt==="fakeround"){const sr=Math.round(180*Et/Math.PI/20);for(let Gt=1;Gt<sr;Gt++){let Ut=Gt/sr;if(Ut!==.5){const xn=Ut-.5;Ut+=Ut*xn*(Ut-1)*((1.0904+Ye*(Ye*(3.55645-1.43519*Ye)-3.2452))*xn*xn+(.848013+Ye*(.215638*Ye-1.06021)))}const Cr=Be.sub(ye)._mult(Ut)._add(ye)._unit()._mult(jt?-1:1);this.addHalfVertex(ee,Cr.x,Cr.y,!1,jt,0,K)}}de&&this.addCurrentVertex(ee,Be,-dt,-tr,K)}else if(kt==="butt")this.addCurrentVertex(ee,je,0,0,K);else if(kt==="square"){const It=le?1:-1;this.addCurrentVertex(ee,je,It,It,K)}else kt==="round"&&(le&&(this.addCurrentVertex(ee,ye,0,0,K),this.addCurrentVertex(ee,ye,1,1,K,!0)),de&&(this.addCurrentVertex(ee,Be,-1,-1,K,!0),this.addCurrentVertex(ee,Be,0,0,K)));if(Mt&&Ae<L-1){const It=ee.dist(de);if(It>2*W){const dt=ee.add(de.sub(ee)._mult(W/It)._round());this.updateDistance(ee,dt),this.addCurrentVertex(dt,Be,0,0,K),ee=dt}}}}addCurrentVertex(n,o,d,y,b,T=!1){const E=o.y*y-o.x,k=-o.y-o.x*y;this.addHalfVertex(n,o.x+o.y*d,o.y-o.x*d,T,!1,d,b),this.addHalfVertex(n,E,k,T,!0,-y,b),this.distance>Mu/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,o,d,y,b,T))}addHalfVertex({x:n,y:o},d,y,b,T,E,k){const N=.5*(this.lineClips?this.scaledDistance*(Mu-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(b?1:0),(o<<1)+(T?1:0),Math.round(63*d)+128,Math.round(63*y)+128,1+(E===0?0:E<0?-1:1)|(63&N)<<2,N>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const L=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,L,this.e2),k.primitiveLength++),T?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,o){this.distance+=n.dist(o),this.updateScaledDistance()}hasLineDasharray(n){for(const o of n){const d=o.paint.get("line-dasharray");if(d&&!d.isConstant())return!0}return!1}addLineDashDependencies(n,o,d,y){for(const b of n){const T=b.paint.get("line-dasharray");if(!T||T.value.kind==="constant")continue;const E=b.layout.get("line-cap")==="round",k={dasharray:T.value.evaluate({zoom:d-1},o,{}),round:E},N={dasharray:T.value.evaluate({zoom:d},o,{}),round:E},L={dasharray:T.value.evaluate({zoom:d+1},o,{}),round:E},V=`${k.dasharray.join(",")},${k.round}`,W=`${N.dasharray.join(",")},${N.round}`,K=`${L.dasharray.join(",")},${L.round}`;y.dashDependencies[V]=k,y.dashDependencies[W]=N,y.dashDependencies[K]=L,o.dashes[b.id]={min:V,mid:W,max:K}}}}let hp,rg;Dt("LineBucket",Kd,{omit:["layers","patternFeatures"]});var Gh={get paint(){return rg=rg||new Pi({"line-opacity":new Ht(Ue.paint_line["line-opacity"]),"line-color":new Ht(Ue.paint_line["line-color"]),"line-translate":new Rt(Ue.paint_line["line-translate"]),"line-translate-anchor":new Rt(Ue.paint_line["line-translate-anchor"]),"line-width":new Ht(Ue.paint_line["line-width"]),"line-gap-width":new Ht(Ue.paint_line["line-gap-width"]),"line-offset":new Ht(Ue.paint_line["line-offset"]),"line-blur":new Ht(Ue.paint_line["line-blur"]),"line-dasharray":new Cc(Ue.paint_line["line-dasharray"]),"line-pattern":new Cc(Ue.paint_line["line-pattern"]),"line-gradient":new jc(Ue.paint_line["line-gradient"])})},get layout(){return hp=hp||new Pi({"line-cap":new Rt(Ue.layout_line["line-cap"]),"line-join":new Ht(Ue.layout_line["line-join"]),"line-miter-limit":new Rt(Ue.layout_line["line-miter-limit"]),"line-round-limit":new Rt(Ue.layout_line["line-round-limit"]),"line-sort-key":new Ht(Ue.layout_line["line-sort-key"])})}};class ng extends Ht{possiblyEvaluate(n,o){return o=new nn(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(n,o)}evaluate(n,o,d,y){return o=ar({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(n,o,d,y)}}let Ta;class Jy extends Xa{constructor(n,o){super(n,Gh,o),this.gradientVersion=0,Ta||(Ta=new ng(Gh.paint.properties["line-width"].specification),Ta.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(o)&&o._styleExpression.expression instanceof Cs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,o){super.recalculate(n,o),this.paint._values["line-floorwidth"]=Ta.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Kd(n)}queryRadius(n){const o=n,d=to(bu("line-width",this,o),bu("line-gap-width",this,o)),y=bu("line-offset",this,o);return d/2+Math.abs(y)+Ud(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:d,geometry:y,transform:b,pixelsToTileUnits:T}){const E=Vd(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-b.bearingInRadians,T),k=T/2*to(this.paint.get("line-width").evaluate(o,d),this.paint.get("line-gap-width").evaluate(o,d)),N=this.paint.get("line-offset").evaluate(o,d);return N&&(y=function(L,V){const W=[];for(let K=0;K<L.length;K++){const ee=L[K],le=[];for(let de=0;de<ee.length;de++){const ye=ee[de-1],Be=ee[de],Ae=ee[de+1],je=de===0?new P(0,0):Be.sub(ye)._unit()._perp(),Ye=de===ee.length-1?new P(0,0):Ae.sub(Be)._unit()._perp(),it=je._add(Ye)._unit(),gt=it.x*Ye.x+it.y*Ye.y;gt!==0&&it._mult(1/gt),le.push(it._mult(V)._add(Be))}W.push(le)}return W}(y,N*T)),function(L,V,W){for(let K=0;K<V.length;K++){const ee=V[K];if(L.length>=3){for(let le=0;le<ee.length;le++)if(Bl(L,ee[le]))return!0}if(ra(L,ee,W))return!0}return!1}(E,y,k)}isTileClipped(){return!0}}function to(c,n){return n>0?n+2*c:c}const ev=Cn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),tv=Cn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Cn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ex=Cn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Cn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Zl=Cn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),dp=Cn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ig(c,n,o){return c.sections.forEach(d=>{d.text=function(y,b,T){const E=b.layout.get("text-transform").evaluate(T,{});return E==="uppercase"?y=y.toLocaleUpperCase():E==="lowercase"&&(y=y.toLocaleLowerCase()),fs.applyArabicShaping&&(y=fs.applyArabicShaping(y)),y}(d.text,n,o)}),c}Cn([{name:"triangle",components:3,type:"Uint16"}]),Cn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Cn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Cn([{type:"Float32",name:"offsetX"}]),Cn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Cn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ks={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var yi=24;const fp=4294967296,ag=1/fp,pp=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Qd{constructor(n=new Uint8Array(16)){this.buf=ArrayBuffer.isView(n)?n:new Uint8Array(n),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(n,o,d=this.length){for(;this.pos<d;){const y=this.readVarint(),b=y>>3,T=this.pos;this.type=7&y,n(b,o,this),this.pos===T&&this.skip(y)}return o}readMessage(n,o){return this.readFields(n,o,this.readVarint()+this.pos)}readFixed32(){const n=this.dataView.getUint32(this.pos,!0);return this.pos+=4,n}readSFixed32(){const n=this.dataView.getInt32(this.pos,!0);return this.pos+=4,n}readFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*fp;return this.pos+=8,n}readSFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*fp;return this.pos+=8,n}readFloat(){const n=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,n}readDouble(){const n=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,n}readVarint(n){const o=this.buf;let d,y;return y=o[this.pos++],d=127&y,y<128?d:(y=o[this.pos++],d|=(127&y)<<7,y<128?d:(y=o[this.pos++],d|=(127&y)<<14,y<128?d:(y=o[this.pos++],d|=(127&y)<<21,y<128?d:(y=o[this.pos],d|=(15&y)<<28,function(b,T,E){const k=E.buf;let N,L;if(L=k[E.pos++],N=(112&L)>>4,L<128||(L=k[E.pos++],N|=(127&L)<<3,L<128)||(L=k[E.pos++],N|=(127&L)<<10,L<128)||(L=k[E.pos++],N|=(127&L)<<17,L<128)||(L=k[E.pos++],N|=(127&L)<<24,L<128)||(L=k[E.pos++],N|=(1&L)<<31,L<128))return Zh(b,N,T);throw new Error("Expected varint not more than 10 bytes")}(d,n,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const n=this.readVarint();return n%2==1?(n+1)/-2:n/2}readBoolean(){return!!this.readVarint()}readString(){const n=this.readVarint()+this.pos,o=this.pos;return this.pos=n,n-o>=12&&pp?pp.decode(this.buf.subarray(o,n)):function(d,y,b){let T="",E=y;for(;E<b;){const k=d[E];let N,L,V,W=null,K=k>239?4:k>223?3:k>191?2:1;if(E+K>b)break;K===1?k<128&&(W=k):K===2?(N=d[E+1],(192&N)==128&&(W=(31&k)<<6|63&N,W<=127&&(W=null))):K===3?(N=d[E+1],L=d[E+2],(192&N)==128&&(192&L)==128&&(W=(15&k)<<12|(63&N)<<6|63&L,(W<=2047||W>=55296&&W<=57343)&&(W=null))):K===4&&(N=d[E+1],L=d[E+2],V=d[E+3],(192&N)==128&&(192&L)==128&&(192&V)==128&&(W=(15&k)<<18|(63&N)<<12|(63&L)<<6|63&V,(W<=65535||W>=1114112)&&(W=null))),W===null?(W=65533,K=1):W>65535&&(W-=65536,T+=String.fromCharCode(W>>>10&1023|55296),W=56320|1023&W),T+=String.fromCharCode(W),E+=K}return T}(this.buf,o,n)}readBytes(){const n=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,n);return this.pos=n,o}readPackedVarint(n=[],o){const d=this.readPackedEnd();for(;this.pos<d;)n.push(this.readVarint(o));return n}readPackedSVarint(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSVarint());return n}readPackedBoolean(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readBoolean());return n}readPackedFloat(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFloat());return n}readPackedDouble(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readDouble());return n}readPackedFixed32(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFixed32());return n}readPackedSFixed32(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSFixed32());return n}readPackedFixed64(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFixed64());return n}readPackedSFixed64(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSFixed64());return n}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(n){const o=7&n;if(o===0)for(;this.buf[this.pos++]>127;);else if(o===2)this.pos=this.readVarint()+this.pos;else if(o===5)this.pos+=4;else{if(o!==1)throw new Error(`Unimplemented type: ${o}`);this.pos+=8}}writeTag(n,o){this.writeVarint(n<<3|o)}realloc(n){let o=this.length||16;for(;o<this.pos+n;)o*=2;if(o!==this.length){const d=new Uint8Array(o);d.set(this.buf),this.buf=d,this.dataView=new DataView(d.buffer),this.length=o}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeSFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*ag),!0),this.pos+=8}writeSFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*ag),!0),this.pos+=8}writeVarint(n){(n=+n||0)>268435455||n<0?function(o,d){let y,b;if(o>=0?(y=o%4294967296|0,b=o/4294967296|0):(y=~(-o%4294967296),b=~(-o/4294967296),4294967295^y?y=y+1|0:(y=0,b=b+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(T,E,k){k.buf[k.pos++]=127&T|128,T>>>=7,k.buf[k.pos++]=127&T|128,T>>>=7,k.buf[k.pos++]=127&T|128,T>>>=7,k.buf[k.pos++]=127&T|128,k.buf[k.pos]=127&(T>>>=7)}(y,0,d),function(T,E){const k=(7&T)<<4;E.buf[E.pos++]|=k|((T>>>=3)?128:0),T&&(E.buf[E.pos++]=127&T|((T>>>=7)?128:0),T&&(E.buf[E.pos++]=127&T|((T>>>=7)?128:0),T&&(E.buf[E.pos++]=127&T|((T>>>=7)?128:0),T&&(E.buf[E.pos++]=127&T|((T>>>=7)?128:0),T&&(E.buf[E.pos++]=127&T)))))}(b,d)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))}writeSVarint(n){this.writeVarint(n<0?2*-n-1:2*n)}writeBoolean(n){this.writeVarint(+n)}writeString(n){n=String(n),this.realloc(4*n.length),this.pos++;const o=this.pos;this.pos=function(y,b,T){for(let E,k,N=0;N<b.length;N++){if(E=b.charCodeAt(N),E>55295&&E<57344){if(!k){E>56319||N+1===b.length?(y[T++]=239,y[T++]=191,y[T++]=189):k=E;continue}if(E<56320){y[T++]=239,y[T++]=191,y[T++]=189,k=E;continue}E=k-55296<<10|E-56320|65536,k=null}else k&&(y[T++]=239,y[T++]=191,y[T++]=189,k=null);E<128?y[T++]=E:(E<2048?y[T++]=E>>6|192:(E<65536?y[T++]=E>>12|224:(y[T++]=E>>18|240,y[T++]=E>>12&63|128),y[T++]=E>>6&63|128),y[T++]=63&E|128)}return T}(this.buf,n,this.pos);const d=this.pos-o;d>=128&&rv(o,d,this),this.pos=o-1,this.writeVarint(d),this.pos+=d}writeFloat(n){this.realloc(4),this.dataView.setFloat32(this.pos,n,!0),this.pos+=4}writeDouble(n){this.realloc(8),this.dataView.setFloat64(this.pos,n,!0),this.pos+=8}writeBytes(n){const o=n.length;this.writeVarint(o),this.realloc(o);for(let d=0;d<o;d++)this.buf[this.pos++]=n[d]}writeRawMessage(n,o){this.pos++;const d=this.pos;n(o,this);const y=this.pos-d;y>=128&&rv(d,y,this),this.pos=d-1,this.writeVarint(y),this.pos+=y}writeMessage(n,o,d){this.writeTag(n,2),this.writeRawMessage(o,d)}writePackedVarint(n,o){o.length&&this.writeMessage(n,Cx,o)}writePackedSVarint(n,o){o.length&&this.writeMessage(n,nv,o)}writePackedBoolean(n,o){o.length&&this.writeMessage(n,mp,o)}writePackedFloat(n,o){o.length&&this.writeMessage(n,iv,o)}writePackedDouble(n,o){o.length&&this.writeMessage(n,Hh,o)}writePackedFixed32(n,o){o.length&&this.writeMessage(n,av,o)}writePackedSFixed32(n,o){o.length&&this.writeMessage(n,ov,o)}writePackedFixed64(n,o){o.length&&this.writeMessage(n,sv,o)}writePackedSFixed64(n,o){o.length&&this.writeMessage(n,lv,o)}writeBytesField(n,o){this.writeTag(n,2),this.writeBytes(o)}writeFixed32Field(n,o){this.writeTag(n,5),this.writeFixed32(o)}writeSFixed32Field(n,o){this.writeTag(n,5),this.writeSFixed32(o)}writeFixed64Field(n,o){this.writeTag(n,1),this.writeFixed64(o)}writeSFixed64Field(n,o){this.writeTag(n,1),this.writeSFixed64(o)}writeVarintField(n,o){this.writeTag(n,0),this.writeVarint(o)}writeSVarintField(n,o){this.writeTag(n,0),this.writeSVarint(o)}writeStringField(n,o){this.writeTag(n,2),this.writeString(o)}writeFloatField(n,o){this.writeTag(n,5),this.writeFloat(o)}writeDoubleField(n,o){this.writeTag(n,1),this.writeDouble(o)}writeBooleanField(n,o){this.writeVarintField(n,+o)}}function Zh(c,n,o){return o?4294967296*n+(c>>>0):4294967296*(n>>>0)+(c>>>0)}function rv(c,n,o){const d=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));o.realloc(d);for(let y=o.pos-1;y>=c;y--)o.buf[y+d]=o.buf[y]}function Cx(c,n){for(let o=0;o<c.length;o++)n.writeVarint(c[o])}function nv(c,n){for(let o=0;o<c.length;o++)n.writeSVarint(c[o])}function iv(c,n){for(let o=0;o<c.length;o++)n.writeFloat(c[o])}function Hh(c,n){for(let o=0;o<c.length;o++)n.writeDouble(c[o])}function mp(c,n){for(let o=0;o<c.length;o++)n.writeBoolean(c[o])}function av(c,n){for(let o=0;o<c.length;o++)n.writeFixed32(c[o])}function ov(c,n){for(let o=0;o<c.length;o++)n.writeSFixed32(c[o])}function sv(c,n){for(let o=0;o<c.length;o++)n.writeFixed64(c[o])}function lv(c,n){for(let o=0;o<c.length;o++)n.writeSFixed64(c[o])}function cv(c,n,o){c===1&&o.readMessage(uv,n)}function uv(c,n,o){if(c===3){const{id:d,bitmap:y,width:b,height:T,left:E,top:k,advance:N}=o.readMessage(gp,{});n.push({id:d,bitmap:new zc({width:b+6,height:T+6},y),metrics:{width:b,height:T,left:E,top:k,advance:N}})}}function gp(c,n,o){c===1?n.id=o.readVarint():c===2?n.bitmap=o.readBytes():c===3?n.width=o.readVarint():c===4?n.height=o.readVarint():c===5?n.left=o.readSVarint():c===6?n.top=o.readSVarint():c===7&&(n.advance=o.readVarint())}function og(c){let n=0,o=0;for(const T of c)n+=T.w*T.h,o=Math.max(o,T.w);c.sort((T,E)=>E.h-T.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),o),h:1/0}];let y=0,b=0;for(const T of c)for(let E=d.length-1;E>=0;E--){const k=d[E];if(!(T.w>k.w||T.h>k.h)){if(T.x=k.x,T.y=k.y,b=Math.max(b,T.y+T.h),y=Math.max(y,T.x+T.w),T.w===k.w&&T.h===k.h){const N=d.pop();N&&E<d.length&&(d[E]=N)}else T.h===k.h?(k.x+=T.w,k.w-=T.w):T.w===k.w?(k.y+=T.h,k.h-=T.h):(d.push({x:k.x+T.w,y:k.y,w:k.w-T.w,h:T.h}),k.y+=T.h,k.h-=T.h);break}}return{w:y,h:b,fill:n/(y*b)||0}}class yp{constructor(n,{pixelRatio:o,version:d,stretchX:y,stretchY:b,content:T,textFitWidth:E,textFitHeight:k}){this.paddedRect=n,this.pixelRatio=o,this.stretchX=y,this.stretchY=b,this.content=T,this.version=d,this.textFitWidth=E,this.textFitHeight=k}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class _n{constructor(n,o){const d={},y={};this.haveRenderCallbacks=[];const b=[];this.addImages(n,d,b),this.addImages(o,y,b);const{w:T,h:E}=og(b),k=new Ci({width:T||1,height:E||1});for(const N in n){const L=n[N],V=d[N].paddedRect;Ci.copy(L.data,k,{x:0,y:0},{x:V.x+1,y:V.y+1},L.data)}for(const N in o){const L=o[N],V=y[N].paddedRect,W=V.x+1,K=V.y+1,ee=L.data.width,le=L.data.height;Ci.copy(L.data,k,{x:0,y:0},{x:W,y:K},L.data),Ci.copy(L.data,k,{x:0,y:le-1},{x:W,y:K-1},{width:ee,height:1}),Ci.copy(L.data,k,{x:0,y:0},{x:W,y:K+le},{width:ee,height:1}),Ci.copy(L.data,k,{x:ee-1,y:0},{x:W-1,y:K},{width:1,height:le}),Ci.copy(L.data,k,{x:0,y:0},{x:W+ee,y:K},{width:1,height:le})}this.image=k,this.iconPositions=d,this.patternPositions=y}addImages(n,o,d){for(const y in n){const b=n[y],T={x:0,y:0,w:b.data.width+2,h:b.data.height+2};d.push(T),o[y]=new yp(T,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(n,o){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in n.updatedImages)this.patchUpdatedImage(this.iconPositions[d],n.getImage(d),o),this.patchUpdatedImage(this.patternPositions[d],n.getImage(d),o)}patchUpdatedImage(n,o,d){if(!n||!o||n.version===o.version)return;n.version=o.version;const[y,b]=n.tl;d.update(o.data,void 0,{x:y,y:b})}}var Qs;Dt("ImagePosition",yp),Dt("ImageAtlas",_n),m.ao=void 0,(Qs=m.ao||(m.ao={}))[Qs.none=0]="none",Qs[Qs.horizontal=1]="horizontal",Qs[Qs.vertical=2]="vertical",Qs[Qs.horizontalOnly=3]="horizontalOnly";class Jd{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(n,o,d){const y=new Jd;return y.scale=n||1,y.fontStack=o,y.verticalAlign=d||"bottom",y}static forImage(n,o){const d=new Jd;return d.imageName=n,d.verticalAlign=o||"bottom",d}}class Pu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,o){const d=new Pu;for(let y=0;y<n.sections.length;y++){const b=n.sections[y];b.image?d.addImageSection(b):d.addTextSection(b,o)}return d}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let o="";for(let d=0;d<n.length;d++){const y=n.charCodeAt(d+1)||null,b=n.charCodeAt(d-1)||null;o+=y&&Ec(y)&&!Ks[n[d+1]]||b&&Ec(b)&&!Ks[n[d-1]]||!Ks[n[d]]?n[d]:Ks[n[d]]}return o}(this.text)}trim(){let n=0;for(let d=0;d<this.text.length&&_p[this.text.charCodeAt(d)];d++)n++;let o=this.text.length;for(let d=this.text.length-1;d>=0&&d>=n&&_p[this.text.charCodeAt(d)];d--)o--;this.text=this.text.substring(n,o),this.sectionIndex=this.sectionIndex.slice(n,o)}substring(n,o){const d=new Pu;return d.text=this.text.substring(n,o),d.sectionIndex=this.sectionIndex.slice(n,o),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,o)=>Math.max(n,this.sections[o].scale),0)}getMaxImageSize(n){let o=0,d=0;for(let y=0;y<this.length();y++){const b=this.getSection(y);if(b.imageName){const T=n[b.imageName];if(!T)continue;const E=T.displaySize;o=Math.max(o,E[0]),d=Math.max(d,E[1])}}return{maxImageWidth:o,maxImageHeight:d}}addTextSection(n,o){this.text+=n.text,this.sections.push(Jd.forText(n.scale,n.fontStack||o,n.verticalAlign));const d=this.sections.length-1;for(let y=0;y<n.text.length;++y)this.sectionIndex.push(d)}addImageSection(n){const o=n.image?n.image.name:"";if(o.length===0)return void Qt("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Jd.forImage(o,n.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Qt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function vp(c,n,o,d,y,b,T,E,k,N,L,V,W,K,ee){const le=Pu.fromFeature(c,y);let de;V===m.ao.vertical&&le.verticalizePunctuation();const{processBidirectionalText:ye,processStyledBidirectionalText:Be}=fs;if(ye&&le.sections.length===1){de=[];const Ye=ye(le.toString(),Qo(le,N,b,n,d,K));for(const it of Ye){const gt=new Pu;gt.text=it,gt.sections=le.sections;for(let Et=0;Et<it.length;Et++)gt.sectionIndex.push(0);de.push(gt)}}else if(Be){de=[];const Ye=Be(le.text,le.sectionIndex,Qo(le,N,b,n,d,K));for(const it of Ye){const gt=new Pu;gt.text=it[0],gt.sectionIndex=it[1],gt.sections=le.sections,de.push(gt)}}else de=function(Ye,it){const gt=[],Et=Ye.text;let Mt=0;for(const jt of it)gt.push(Ye.substring(Mt,jt)),Mt=jt;return Mt<Et.length&&gt.push(Ye.substring(Mt,Et.length)),gt}(le,Qo(le,N,b,n,d,K));const Ae=[],je={positionedLines:Ae,text:le.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(Ye,it,gt,Et,Mt,jt,$t,kt,It,dt,tr,sr){let Gt=0,Ut=0,Cr=0,xn=0;const Hn=kt==="right"?1:kt==="left"?0:.5,ji=yi/sr;let ia=0;for(const An of Mt){An.trim();const Ti=An.getMaxScale(),si={positionedGlyphs:[],lineOffset:0};Ye.positionedLines[ia]=si;const s=si.positionedGlyphs;let h=0;if(!An.length()){Ut+=jt,++ia;continue}const g=Ox(Et,An,ji);for(let j=0;j<An.length();j++){const R=An.getSection(j),Y=An.getSectionIndex(j),ce=An.getCharCode(j),Me=hv(It,tr,ce);let qe;if(R.imageName){if(Ye.iconsInText=!0,R.scale=R.scale*ji,qe=fv(R,Me,Ti,g,Et),!qe)continue;h=Math.max(h,qe.imageOffset)}else if(qe=dv(R,ce,Me,g,it,gt),!qe)continue;const{rect:pt,metrics:bt,baselineOffset:et}=qe;s.push({glyph:ce,imageName:R.imageName,x:Gt,y:Ut+et+-17,vertical:Me,scale:R.scale,fontStack:R.fontStack,sectionIndex:Y,metrics:bt,rect:pt}),Me?(Ye.verticalizable=!0,Gt+=(R.imageName?bt.advance:yi)*R.scale+dt):Gt+=bt.advance*R.scale+dt}s.length!==0&&(Cr=Math.max(Gt-dt,Cr),kx(s,0,s.length-1,Hn)),Gt=0,si.lineOffset=Math.max(h,(Ti-1)*yi);const S=jt*Ti+h;Ut+=S,xn=Math.max(S,xn),++ia}const{horizontalAlign:aa,verticalAlign:oi}=Cu($t);(function(An,Ti,si,s,h,g,S,j,R){const Y=(Ti-si)*h;let ce=0;ce=g!==S?-j*s- -17:-s*R*S+.5*S;for(const Me of An)for(const qe of Me.positionedGlyphs)qe.x+=Y,qe.y+=ce})(Ye.positionedLines,Hn,aa,oi,Cr,xn,jt,Ut,Mt.length),Ye.top+=-oi*Ut,Ye.bottom=Ye.top+Ut,Ye.left+=-aa*Cr,Ye.right=Ye.left+Cr}(je,n,o,d,de,T,E,k,V,N,W,ee),!function(Ye){for(const it of Ye)if(it.positionedGlyphs.length!==0)return!1;return!0}(Ae)&&je}const _p={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},jx={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},xp={40:!0};function Eu(c,n,o,d,y,b){if(n.imageName){const T=d[n.imageName];return T?T.displaySize[0]*n.scale*yi/b+y:0}{const T=o[n.fontStack],E=T&&T[c];return E?E.metrics.advance*n.scale+y:0}}function bp(c,n,o,d){const y=Math.pow(c-n,2);return d?c<n?y/2:2*y:y+Math.abs(o)*o}function wp(c,n,o){let d=0;return c===10&&(d-=1e4),o&&(d+=150),c!==40&&c!==65288||(d+=50),n!==41&&n!==65289||(d+=50),d}function Sp(c,n,o,d,y,b){let T=null,E=bp(n,o,y,b);for(const k of d){const N=bp(n-k.x,o,y,b)+k.badness;N<=E&&(T=k,E=N)}return{index:c,x:n,priorBreak:T,badness:E}}function $c(c){return c?$c(c.priorBreak).concat(c.index):[]}function Qo(c,n,o,d,y,b){if(!c)return[];const T=[],E=function(V,W,K,ee,le,de){let ye=0;for(let Be=0;Be<V.length();Be++){const Ae=V.getSection(Be);ye+=Eu(V.getCharCode(Be),Ae,ee,le,W,de)}return ye/Math.max(1,Math.ceil(ye/K))}(c,n,o,d,y,b),k=c.text.indexOf("​")>=0;let N=0;for(let V=0;V<c.length();V++){const W=c.getSection(V),K=c.getCharCode(V);if(_p[K]||(N+=Eu(K,W,d,y,n,b)),V<c.length()-1){const ee=!((L=K)<11904)&&(!!wr["CJK Compatibility Forms"](L)||!!wr["CJK Compatibility"](L)||!!wr["CJK Strokes"](L)||!!wr["CJK Symbols and Punctuation"](L)||!!wr["Enclosed CJK Letters and Months"](L)||!!wr["Halfwidth and Fullwidth Forms"](L)||!!wr["Ideographic Description Characters"](L)||!!wr["Vertical Forms"](L)||Mh.test(String.fromCodePoint(L)));(jx[K]||ee||W.imageName||V!==c.length()-2&&xp[c.getCharCode(V+1)])&&T.push(Sp(V+1,N,E,T,wp(K,c.getCharCode(V+1),ee&&k),!1))}}var L;return $c(Sp(c.length(),N,E,T,0,!0))}function Cu(c){let n=.5,o=.5;switch(c){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:n,verticalAlign:o}}function Ox(c,n,o){const d=n.getMaxScale()*yi,{maxImageWidth:y,maxImageHeight:b}=n.getMaxImageSize(c),T=Math.max(d,b*o);return{verticalLineContentWidth:Math.max(d,y*o),horizontalLineContentHeight:T}}function sg(c){switch(c){case"top":return 0;case"center":return .5;default:return 1}}function hv(c,n,o){return!(c===m.ao.horizontal||!n&&!Bs(o)||n&&(_p[o]||(d=o,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function dv(c,n,o,d,y,b){const T=b[c.fontStack],E=function(N,L,V,W){if(N&&N.rect)return N;const K=L[V.fontStack],ee=K&&K[W];return ee?{rect:null,metrics:ee.metrics}:null}(T&&T[n],y,c,n);if(E===null)return null;let k;if(o)k=d.verticalLineContentWidth-c.scale*yi;else{const N=sg(c.verticalAlign);k=(d.horizontalLineContentHeight-c.scale*yi)*N}return{rect:E.rect,metrics:E.metrics,baselineOffset:k}}function fv(c,n,o,d,y){const b=y[c.imageName];if(!b)return null;const T=b.paddedRect,E=b.displaySize,k={width:E[0],height:E[1],left:1,top:-3,advance:n?E[1]:E[0]};let N;if(n)N=d.verticalLineContentWidth-E[1]*c.scale;else{const L=sg(c.verticalAlign);N=(d.horizontalLineContentHeight-E[1]*c.scale)*L}return{rect:T,metrics:k,baselineOffset:N,imageOffset:(n?E[0]:E[1])*c.scale-yi*o}}function kx(c,n,o,d){if(d===0)return;const y=c[o],b=(c[o].x+y.metrics.advance*y.scale)*d;for(let T=n;T<=o;T++)c[T].x-=b}function lg(c,n,o){const{horizontalAlign:d,verticalAlign:y}=Cu(o),b=n[0]-c.displaySize[0]*d,T=n[1]-c.displaySize[1]*y;return{image:c,top:T,bottom:T+c.displaySize[1],left:b,right:b+c.displaySize[0]}}function cg(c){var n,o;let d=c.left,y=c.top,b=c.right-d,T=c.bottom-y;const E=(n=c.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",k=(o=c.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",N=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(k==="proportional"){if(E==="stretchOnly"&&b/T<N||E==="proportional"){const L=Math.ceil(T*N);d*=L/b,b=L}}else if(E==="proportional"&&k==="stretchOnly"&&N!==0&&b/T>N){const L=Math.ceil(b/N);y*=L/T,T=L}return{x1:d,y1:y,x2:d+b,y2:y+T}}function ug(c,n,o,d,y,b){const T=c.image;let E;if(T.content){const de=T.content,ye=T.pixelRatio||1;E=[de[0]/ye,de[1]/ye,T.displaySize[0]-de[2]/ye,T.displaySize[1]-de[3]/ye]}const k=n.left*b,N=n.right*b;let L,V,W,K;o==="width"||o==="both"?(K=y[0]+k-d[3],V=y[0]+N+d[1]):(K=y[0]+(k+N-T.displaySize[0])/2,V=K+T.displaySize[0]);const ee=n.top*b,le=n.bottom*b;return o==="height"||o==="both"?(L=y[1]+ee-d[0],W=y[1]+le+d[2]):(L=y[1]+(ee+le-T.displaySize[1])/2,W=L+T.displaySize[1]),{image:T,top:L,right:V,bottom:W,left:K,collisionPadding:E}}const Hl=128,Js=32640;function Tp(c,n){const{expression:o}=n;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new nn(c+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:y}=o;let b=0;for(;b<d.length&&d[b]<=c;)b++;b=Math.max(0,b-1);let T=b;for(;T<d.length&&d[T]<c+1;)T++;T=Math.min(d.length-1,T);const E=d[b],k=d[T];return o.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:k,interpolationType:y}:{kind:"camera",minZoom:E,maxZoom:k,minSize:o.evaluate(new nn(E)),maxSize:o.evaluate(new nn(k)),interpolationType:y}}}function hg(c,n,o){let d="never";const y=c.get(n);return y?d=y:c.get(o)&&(d="always"),d}const Ix=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function qc(c,n,o,d,y,b,T,E,k,N,L,V,W){const K=E?Math.min(Js,Math.round(E[0])):0,ee=E?Math.min(Js,Math.round(E[1])):0;c.emplaceBack(n,o,Math.round(32*d),Math.round(32*y),b,T,(K<<1)+(k?1:0),ee,16*N,16*L,256*V,256*W)}function dg(c,n,o){c.emplaceBack(n.x,n.y,o),c.emplaceBack(n.x,n.y,o),c.emplaceBack(n.x,n.y,o),c.emplaceBack(n.x,n.y,o)}function pv(c){for(const n of c.sections)if(yu(n.text))return!0;return!1}class kr{constructor(n){this.layoutVertexArray=new At,this.indexArray=new Xr,this.programConfigurations=n,this.segments=new Tr,this.dynamicLayoutVertexArray=new yt,this.opacityVertexArray=new Lt,this.hasVisibleVertices=!1,this.placedSymbolArray=new Q}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,o,d,y){this.isEmpty()||(d&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ev.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,tv.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,Ix,!0),this.opacityVertexBuffer.itemSize=1),(d||y)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Dt("SymbolBuffers",kr);class ef{constructor(n,o,d){this.layoutVertexArray=new n,this.layoutAttributes=o,this.indexArray=new d,this.segments=new Tr,this.collisionVertexArray=new Hr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Ex.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Dt("CollisionBuffers",ef);class Xl{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=ki(globalThis)?Math.min(n.overscaling,128):n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(T=>T.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Tp(this.zoom,o["text-size"]),this.iconSizeData=Tp(this.zoom,o["icon-size"]);const d=this.layers[0].layout,y=d.get("symbol-sort-key"),b=d.get("symbol-z-order");this.canOverlap=hg(d,"text-overlap","text-allow-overlap")!=="never"||hg(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(T=>m.ao[T])),this.stateDependentLayerIds=this.layers.filter(T=>T.isStateDependent()).map(T=>T.id),this.sourceID=n.sourceID}createArrays(){this.text=new kr(new ba(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new kr(new ba(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new pe,this.lineVertexArray=new ge,this.symbolInstances=new me,this.textAnchorOffsets=new Te}calculateGlyphDependencies(n,o,d,y,b){for(let T=0;T<n.length;T++)if(o[n.charCodeAt(T)]=!0,(d||y)&&b){const E=Ks[n.charAt(T)];E&&(o[E.charCodeAt(0)]=!0)}}populate(n,o,d){const y=this.layers[0],b=y.layout,T=b.get("text-font"),E=b.get("text-field"),k=b.get("icon-image"),N=(E.value.kind!=="constant"||E.value.value instanceof Qi&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),L=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,V=b.get("symbol-sort-key");if(this.features=[],!N&&!L)return;const W=o.iconDependencies,K=o.glyphDependencies,ee=o.availableImages,le=new nn(this.zoom);for(const{feature:de,id:ye,index:Be,sourceLayerIndex:Ae}of n){const je=y._featureFilter.needGeometry,Ye=Dc(de,je);if(!y._featureFilter.filter(le,Ye,d))continue;let it,gt;if(je||(Ye.geometry=Hs(de)),N){const Mt=y.getValueAndResolveTokens("text-field",Ye,d,ee),jt=Qi.factory(Mt),$t=this.hasRTLText=this.hasRTLText||pv(jt);(!$t||fs.getRTLTextPluginStatus()==="unavailable"||$t&&fs.isParsed())&&(it=ig(jt,y,Ye))}if(L){const Mt=y.getValueAndResolveTokens("icon-image",Ye,d,ee);gt=Mt instanceof ti?Mt:ti.fromString(Mt)}if(!it&&!gt)continue;const Et=this.sortFeaturesByKey?V.evaluate(Ye,{},d):void 0;if(this.features.push({id:ye,text:it,icon:gt,index:Be,sourceLayerIndex:Ae,geometry:Ye.geometry,properties:de.properties,type:Or.types[de.type],sortKey:Et}),gt&&(W[gt.name]=!0),it){const Mt=T.evaluate(Ye,{},d).join(","),jt=b.get("text-rotation-alignment")!=="viewport"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(m.ao.vertical)>=0;for(const $t of it.sections)if($t.image)W[$t.image.name]=!0;else{const kt=Pc(it.toString()),It=$t.fontStack||Mt,dt=K[It]=K[It]||{};this.calculateGlyphDependencies($t.text,dt,jt,this.allowVerticalPlacement,kt)}}}b.get("symbol-placement")==="line"&&(this.features=function(de){const ye={},Be={},Ae=[];let je=0;function Ye(Mt){Ae.push(de[Mt]),je++}function it(Mt,jt,$t){const kt=Be[Mt];return delete Be[Mt],Be[jt]=kt,Ae[kt].geometry[0].pop(),Ae[kt].geometry[0]=Ae[kt].geometry[0].concat($t[0]),kt}function gt(Mt,jt,$t){const kt=ye[jt];return delete ye[jt],ye[Mt]=kt,Ae[kt].geometry[0].shift(),Ae[kt].geometry[0]=$t[0].concat(Ae[kt].geometry[0]),kt}function Et(Mt,jt,$t){const kt=$t?jt[0][jt[0].length-1]:jt[0][0];return`${Mt}:${kt.x}:${kt.y}`}for(let Mt=0;Mt<de.length;Mt++){const jt=de[Mt],$t=jt.geometry,kt=jt.text?jt.text.toString():null;if(!kt){Ye(Mt);continue}const It=Et(kt,$t),dt=Et(kt,$t,!0);if(It in Be&&dt in ye&&Be[It]!==ye[dt]){const tr=gt(It,dt,$t),sr=it(It,dt,Ae[tr].geometry);delete ye[It],delete Be[dt],Be[Et(kt,Ae[sr].geometry,!0)]=sr,Ae[tr].geometry=null}else It in Be?it(It,dt,$t):dt in ye?gt(It,dt,$t):(Ye(Mt),ye[It]=je-1,Be[dt]=je-1)}return Ae.filter(Mt=>Mt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((de,ye)=>de.sortKey-ye.sortKey)}update(n,o,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,o,this.layers,{imagePositions:d}),this.icon.programConfigurations.updatePaintArrays(n,o,this.layers,{imagePositions:d}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,o){const d=this.lineVertexArray.length;if(n.segment!==void 0){let y=n.dist(o[n.segment+1]),b=n.dist(o[n.segment]);const T={};for(let E=n.segment+1;E<o.length;E++)T[E]={x:o[E].x,y:o[E].y,tileUnitDistanceFromAnchor:y},E<o.length-1&&(y+=o[E+1].dist(o[E]));for(let E=n.segment||0;E>=0;E--)T[E]={x:o[E].x,y:o[E].y,tileUnitDistanceFromAnchor:b},E>0&&(b+=o[E-1].dist(o[E]));for(let E=0;E<o.length;E++){const k=T[E];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(n,o,d,y,b,T,E,k,N,L,V,W){const K=n.indexArray,ee=n.layoutVertexArray,le=n.segments.prepareSegment(4*o.length,ee,K,this.canOverlap?T.sortKey:void 0),de=this.glyphOffsetArray.length,ye=le.vertexLength,Be=this.allowVerticalPlacement&&E===m.ao.vertical?Math.PI/2:0,Ae=T.text&&T.text.sections;for(let je=0;je<o.length;je++){const{tl:Ye,tr:it,bl:gt,br:Et,tex:Mt,pixelOffsetTL:jt,pixelOffsetBR:$t,minFontScaleX:kt,minFontScaleY:It,glyphOffset:dt,isSDF:tr,sectionIndex:sr}=o[je],Gt=le.vertexLength,Ut=dt[1];qc(ee,k.x,k.y,Ye.x,Ut+Ye.y,Mt.x,Mt.y,d,tr,jt.x,jt.y,kt,It),qc(ee,k.x,k.y,it.x,Ut+it.y,Mt.x+Mt.w,Mt.y,d,tr,$t.x,jt.y,kt,It),qc(ee,k.x,k.y,gt.x,Ut+gt.y,Mt.x,Mt.y+Mt.h,d,tr,jt.x,$t.y,kt,It),qc(ee,k.x,k.y,Et.x,Ut+Et.y,Mt.x+Mt.w,Mt.y+Mt.h,d,tr,$t.x,$t.y,kt,It),dg(n.dynamicLayoutVertexArray,k,Be),K.emplaceBack(Gt,Gt+2,Gt+1),K.emplaceBack(Gt+1,Gt+2,Gt+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(dt[0]),je!==o.length-1&&sr===o[je+1].sectionIndex||n.programConfigurations.populatePaintArrays(ee.length,T,T.index,{imagePositions:{},canonical:W,formattedSection:Ae&&Ae[sr]})}n.placedSymbolArray.emplaceBack(k.x,k.y,de,this.glyphOffsetArray.length-de,ye,N,L,k.segment,d?d[0]:0,d?d[1]:0,y[0],y[1],E,0,!1,0,V)}_addCollisionDebugVertex(n,o,d,y,b,T){return o.emplaceBack(0,0),n.emplaceBack(d.x,d.y,y,b,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(n,o,d,y,b,T,E){const k=b.segments.prepareSegment(4,b.layoutVertexArray,b.indexArray),N=k.vertexLength,L=b.layoutVertexArray,V=b.collisionVertexArray,W=E.anchorX,K=E.anchorY;this._addCollisionDebugVertex(L,V,T,W,K,new P(n,o)),this._addCollisionDebugVertex(L,V,T,W,K,new P(d,o)),this._addCollisionDebugVertex(L,V,T,W,K,new P(d,y)),this._addCollisionDebugVertex(L,V,T,W,K,new P(n,y)),k.vertexLength+=4;const ee=b.indexArray;ee.emplaceBack(N,N+1),ee.emplaceBack(N+1,N+2),ee.emplaceBack(N+2,N+3),ee.emplaceBack(N+3,N),k.primitiveLength+=4}addDebugCollisionBoxes(n,o,d,y){for(let b=n;b<o;b++){const T=this.collisionBoxArray.get(b);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,y?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ef(lr,Zl.members,ln),this.iconCollisionBox=new ef(lr,Zl.members,ln);for(let n=0;n<this.symbolInstances.length;n++){const o=this.symbolInstances.get(n);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(n,o,d,y,b,T,E,k,N){const L={};for(let V=o;V<d;V++){const W=n.get(V);L.textBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},L.textFeatureIndex=W.featureIndex;break}for(let V=y;V<b;V++){const W=n.get(V);L.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},L.verticalTextFeatureIndex=W.featureIndex;break}for(let V=T;V<E;V++){const W=n.get(V);L.iconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},L.iconFeatureIndex=W.featureIndex;break}for(let V=k;V<N;V++){const W=n.get(V);L.verticalIconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},L.verticalIconFeatureIndex=W.featureIndex;break}return L}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const d=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,o){const d=n.placedSymbolArray.get(o),y=d.vertexStartIndex+4*d.numGlyphs;for(let b=d.vertexStartIndex;b<y;b+=4)n.indexArray.emplaceBack(b,b+2,b+1),n.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(n),d=Math.cos(n),y=[],b=[],T=[];for(let E=0;E<this.symbolInstances.length;++E){T.push(E);const k=this.symbolInstances.get(E);y.push(0|Math.round(o*k.anchorX+d*k.anchorY)),b.push(k.featureIndex)}return T.sort((E,k)=>y[E]-y[k]||b[k]-b[E]),T}addToSortKeyRanges(n,o){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===o?d.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const d=this.symbolInstances.get(o);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((y,b,T)=>{y>=0&&T.indexOf(y)===b&&this.addIndicesForPlacedSymbol(this.text,y)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Ap,fg;Dt("SymbolBucket",Xl,{omit:["layers","collisionBoxArray","features","compareText"]}),Xl.MAX_GLYPHS=65535,Xl.addDynamicAttributes=dg;var tf={get paint(){return fg=fg||new Pi({"icon-opacity":new Ht(Ue.paint_symbol["icon-opacity"]),"icon-color":new Ht(Ue.paint_symbol["icon-color"]),"icon-halo-color":new Ht(Ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ht(Ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ht(Ue.paint_symbol["icon-halo-blur"]),"icon-translate":new Rt(Ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new Rt(Ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ht(Ue.paint_symbol["text-opacity"]),"text-color":new Ht(Ue.paint_symbol["text-color"],{runtimeType:vi,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Ht(Ue.paint_symbol["text-halo-color"]),"text-halo-width":new Ht(Ue.paint_symbol["text-halo-width"]),"text-halo-blur":new Ht(Ue.paint_symbol["text-halo-blur"]),"text-translate":new Rt(Ue.paint_symbol["text-translate"]),"text-translate-anchor":new Rt(Ue.paint_symbol["text-translate-anchor"])})},get layout(){return Ap=Ap||new Pi({"symbol-placement":new Rt(Ue.layout_symbol["symbol-placement"]),"symbol-spacing":new Rt(Ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Rt(Ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ht(Ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Rt(Ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Rt(Ue.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Rt(Ue.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Rt(Ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new Rt(Ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Rt(Ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ht(Ue.layout_symbol["icon-size"]),"icon-text-fit":new Rt(Ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Rt(Ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ht(Ue.layout_symbol["icon-image"]),"icon-rotate":new Ht(Ue.layout_symbol["icon-rotate"]),"icon-padding":new Ht(Ue.layout_symbol["icon-padding"]),"icon-keep-upright":new Rt(Ue.layout_symbol["icon-keep-upright"]),"icon-offset":new Ht(Ue.layout_symbol["icon-offset"]),"icon-anchor":new Ht(Ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Rt(Ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Rt(Ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Rt(Ue.layout_symbol["text-rotation-alignment"]),"text-field":new Ht(Ue.layout_symbol["text-field"]),"text-font":new Ht(Ue.layout_symbol["text-font"]),"text-size":new Ht(Ue.layout_symbol["text-size"]),"text-max-width":new Ht(Ue.layout_symbol["text-max-width"]),"text-line-height":new Rt(Ue.layout_symbol["text-line-height"]),"text-letter-spacing":new Ht(Ue.layout_symbol["text-letter-spacing"]),"text-justify":new Ht(Ue.layout_symbol["text-justify"]),"text-radial-offset":new Ht(Ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Rt(Ue.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ht(Ue.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ht(Ue.layout_symbol["text-anchor"]),"text-max-angle":new Rt(Ue.layout_symbol["text-max-angle"]),"text-writing-mode":new Rt(Ue.layout_symbol["text-writing-mode"]),"text-rotate":new Ht(Ue.layout_symbol["text-rotate"]),"text-padding":new Rt(Ue.layout_symbol["text-padding"]),"text-keep-upright":new Rt(Ue.layout_symbol["text-keep-upright"]),"text-transform":new Ht(Ue.layout_symbol["text-transform"]),"text-offset":new Ht(Ue.layout_symbol["text-offset"]),"text-allow-overlap":new Rt(Ue.layout_symbol["text-allow-overlap"]),"text-overlap":new Rt(Ue.layout_symbol["text-overlap"]),"text-ignore-placement":new Rt(Ue.layout_symbol["text-ignore-placement"]),"text-optional":new Rt(Ue.layout_symbol["text-optional"])})}};class Xh{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Yn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(n.formattedSection))return o.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Dt("FormatSectionOverride",Xh,{omit:["defaultValue"]});class ju extends Xa{constructor(n,o){super(n,tf,o)}recalculate(n,o){if(super.recalculate(n,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const y=[];for(const b of d)y.indexOf(b)<0&&y.push(b);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,o,d,y){const b=this.layout.get(n).evaluate(o,{},d,y),T=this._unevaluatedLayout._values[n];return T.isDataDriven()||ss(T.value)||!b?b:function(E,k){return k.replace(/{([^{}]+)}/g,(N,L)=>E&&L in E?String(E[L]):"")}(o.properties,b)}createBucket(n){return new Xl(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of tf.paint.overridableProperties){if(!ju.hasPaintOverride(this.layout,n))continue;const o=this.paint.get(n),d=new Xh(o),y=new Is(d,o.property.specification);let b=null;b=o.value.kind==="constant"||o.value.kind==="source"?new Ol("source",y):new Ji("composite",y,o.value.zoomStops),this.paint._values[n]=new qi(o.property,b,o.parameters)}}_handleOverridablePaintPropertyUpdate(n,o,d){return!(!this.layout||o.isDataDriven()||d.isDataDriven())&&ju.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,o){const d=n.get("text-field"),y=tf.paint.properties[o];let b=!1;const T=E=>{for(const k of E)if(y.overrides&&y.overrides.hasOverride(k))return void(b=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Qi)T(d.value.value.sections);else if(d.value.kind==="source"||d.value.kind==="composite"){const E=N=>{b||(N instanceof ur&&yn(N.value)===Eo?T(N.value.sections):N instanceof fh?T(N.sections):N.eachChild(E))},k=d.value;k._styleExpression&&E(k._styleExpression.expression)}return b}}let Ou;var mv={get paint(){return Ou=Ou||new Pi({"background-color":new Rt(Ue.paint_background["background-color"]),"background-pattern":new Fn(Ue.paint_background["background-pattern"]),"background-opacity":new Rt(Ue.paint_background["background-opacity"])})}};class Dx extends Xa{constructor(n,o){super(n,mv,o)}}class zx extends Xa{constructor(n,o){super(n,{},o),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class gv{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const yv={once:!0},Wh=63710088e-1;class Gr{constructor(n,o){if(isNaN(n)||isNaN(o))throw new Error(`Invalid LngLat object: (${n}, ${o})`);if(this.lng=+n,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Gr(yr(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const o=Math.PI/180,d=this.lat*o,y=n.lat*o,b=Math.sin(d)*Math.sin(y)+Math.cos(d)*Math.cos(y)*Math.cos((n.lng-this.lng)*o);return Wh*Math.acos(Math.min(b,1))}static convert(n){if(n instanceof Gr)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Gr(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Gr(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Mp=2*Math.PI*Wh;function Zi(c){return Mp*Math.cos(c*Math.PI/180)}function vv(c){return(180+c)/360}function Pp(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function Ep(c,n){return c/Zi(n)}function Yh(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function pg(c,n){return c*Zi(Yh(n))}class Kh{constructor(n,o,d=0){this.x=+n,this.y=+o,this.z=+d}static fromLngLat(n,o=0){const d=Gr.convert(n);return new Kh(vv(d.lng),Pp(d.lat),Ep(o,d.lat))}toLngLat(){return new Gr(360*this.x-180,Yh(this.y))}toAltitude(){return pg(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Mp*(n=Yh(this.y),1/Math.cos(n*Math.PI/180));var n}}function Cp(c,n,o){var d=2*Math.PI*6378137/256/Math.pow(2,o);return[c*d-2*Math.PI*6378137/2,n*d-2*Math.PI*6378137/2]}class rf{constructor(n,o,d){if(!function(y,b,T){return!(y<0||y>25||T<0||T>=Math.pow(2,y)||b<0||b>=Math.pow(2,y))}(n,o,d))throw new Error(`x=${o}, y=${d}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=o,this.y=d,this.key=Qh(0,n,n,o,d)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,o,d){const y=(T=this.y,E=this.z,k=Cp(256*(b=this.x),256*(T=Math.pow(2,E)-T-1),E),N=Cp(256*(b+1),256*(T+1),E),k[0]+","+k[1]+","+N[0]+","+N[1]);var b,T,E,k,N;const L=function(V,W,K){let ee,le="";for(let de=V;de>0;de--)ee=1<<de-1,le+=(W&ee?1:0)+(K&ee?2:0);return le}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,y)}isChildOf(n){const o=this.z-n.z;return o>0&&n.x===this.x>>o&&n.y===this.y>>o}getTilePoint(n){const o=Math.pow(2,this.z);return new P((n.x*o-this.x)*ht,(n.y*o-this.y)*ht)}toString(){return`${this.z}/${this.x}/${this.y}`}}class _v{constructor(n,o){this.wrap=n,this.canonical=o,this.key=Qh(n,o.z,o.z,o.x,o.y)}}class ro{constructor(n,o,d,y,b){if(this.terrainRttPosMatrix32f=null,n<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${d}`);this.overscaledZ=n,this.wrap=o,this.canonical=new rf(d,+y,+b),this.key=Qh(o,n,d,y,b)}clone(){return new ro(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-n;return n>this.canonical.z?new ro(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ro(n,this.wrap,n,this.canonical.x>>o,this.canonical.y>>o)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(n,o){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-n;return n>this.canonical.z?Qh(this.wrap*+o,n,this.canonical.z,this.canonical.x,this.canonical.y):Qh(this.wrap*+o,n,n,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(n){if(n.wrap!==this.wrap||this.overscaledZ-n.overscaledZ<=0)return!1;if(n.overscaledZ===0)return this.overscaledZ>0;const o=this.canonical.z-n.canonical.z;return!(o<0)&&n.canonical.x===this.canonical.x>>o&&n.canonical.y===this.canonical.y>>o}children(n){if(this.overscaledZ>=n)return[new ro(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,d=2*this.canonical.x,y=2*this.canonical.y;return[new ro(o,this.wrap,o,d,y),new ro(o,this.wrap,o,d+1,y),new ro(o,this.wrap,o,d,y+1),new ro(o,this.wrap,o,d+1,y+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new ro(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new ro(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new _v(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Kh(n.x-this.wrap,n.y))}}function Qh(c,n,o,d,y){(c*=2)<0&&(c=-1*c-1);const b=1<<o;return(b*b*c+b*y+d).toString(36)+o.toString(36)+n.toString(36)}function Jh(c,n){return n?c.properties[n]:c.id}Dt("CanonicalTileID",rf),Dt("OverscaledTileID",ro,{omit:["terrainRttPosMatrix32f"]});class ku{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(n){return this.minX=Math.min(this.minX,n.x),this.minY=Math.min(this.minY,n.y),this.maxX=Math.max(this.maxX,n.x),this.maxY=Math.max(this.maxY,n.y),this}expandBy(n){return this.minX-=n,this.minY-=n,this.maxX+=n,this.maxY+=n,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(n){return this.expandBy(-n)}map(n){const o=new ku;return o.extend(n(new P(this.minX,this.minY))),o.extend(n(new P(this.maxX,this.minY))),o.extend(n(new P(this.minX,this.maxY))),o.extend(n(new P(this.maxX,this.maxY))),o}static fromPoints(n){const o=new ku;for(const d of n)o.extend(d);return o}contains(n){return n.x>=this.minX&&n.x<=this.maxX&&n.y>=this.minY&&n.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(n){return!this.empty()&&!n.empty()&&n.minX>=this.minX&&n.maxX<=this.maxX&&n.minY>=this.minY&&n.maxY<=this.maxY}intersects(n){return!this.empty()&&!n.empty()&&n.minX<=this.maxX&&n.maxX>=this.minX&&n.minY<=this.maxY&&n.maxY>=this.minY}}class xv{constructor(n){this._stringToNumber={},this._numberToString=[];for(let o=0;o<n.length;o++){const d=n[o];this._stringToNumber[d]=o,this._numberToString[o]=d}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Wl{constructor(n,o,d,y,b){this.type="Feature",this._vectorTileFeature=n,n._z=o,n._x=d,n._y=y,this.properties=n.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(n[o]=this[o]);return n}}class mg{constructor(n,o){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Rs(ht,16,0),this.grid3D=new Rs(ht,16,0),this.featureIndexArray=new Ce,this.promoteId=o}insert(n,o,d,y,b,T){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,y,b);const k=T?this.grid3D:this.grid;for(let N=0;N<o.length;N++){const L=o[N],V=[1/0,1/0,-1/0,-1/0];for(let W=0;W<L.length;W++){const K=L[W];V[0]=Math.min(V[0],K.x),V[1]=Math.min(V[1],K.y),V[2]=Math.max(V[2],K.x),V[3]=Math.max(V[3],K.y)}V[0]<ht&&V[1]<ht&&V[2]>=0&&V[3]>=0&&k.insert(E,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new cp(new Qd(this.rawTileData)).layers,this.sourceLayerCoder=new xv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,o,d,y){this.loadVTLayers();const b=n.params,T=ht/n.tileSize/n.scale,E=kl(b.filter,b.globalState),k=n.queryGeometry,N=n.queryPadding*T,L=ku.fromPoints(k),V=this.grid.query(L.minX-N,L.minY-N,L.maxX+N,L.maxY+N),W=ku.fromPoints(n.cameraQueryGeometry).expandBy(N),K=this.grid3D.query(W.minX,W.minY,W.maxX,W.maxY,(de,ye,Be,Ae)=>function(je,Ye,it,gt,Et){for(const jt of je)if(Ye<=jt.x&&it<=jt.y&&gt>=jt.x&&Et>=jt.y)return!0;const Mt=[new P(Ye,it),new P(Ye,Et),new P(gt,Et),new P(gt,it)];if(je.length>2){for(const jt of Mt)if(Bl(je,jt))return!0}for(let jt=0;jt<je.length-1;jt++)if(Rm(je[jt],je[jt+1],Mt))return!0;return!1}(n.cameraQueryGeometry,de-N,ye-N,Be+N,Ae+N));for(const de of K)V.push(de);V.sort(Nx);const ee={};let le;for(let de=0;de<V.length;de++){const ye=V[de];if(ye===le)continue;le=ye;const Be=this.featureIndexArray.get(ye);let Ae=null;this.loadMatchingFeature(ee,Be.bucketIndex,Be.sourceLayerIndex,Be.featureIndex,E,b.layers,b.availableImages,o,d,y,(je,Ye,it)=>(Ae||(Ae=Hs(je)),Ye.queryIntersectsFeature({queryGeometry:k,feature:je,featureState:it,geometry:Ae,zoom:this.z,transform:n.transform,pixelsToTileUnits:T,pixelPosMatrix:n.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:n.getElevation})))}return ee}loadMatchingFeature(n,o,d,y,b,T,E,k,N,L,V){const W=this.bucketLayerIDs[o];if(T&&!W.some(de=>T.has(de)))return;const K=this.sourceLayerCoder.decode(d),ee=this.vtLayers[K].feature(y);if(b.needGeometry){const de=Dc(ee,!0);if(!b.filter(new nn(this.tileID.overscaledZ),de,this.tileID.canonical))return}else if(!b.filter(new nn(this.tileID.overscaledZ),ee))return;const le=this.getId(ee,K);for(let de=0;de<W.length;de++){const ye=W[de];if(T&&!T.has(ye))continue;const Be=k[ye];if(!Be)continue;let Ae={};le&&L&&(Ae=L.getState(Be.sourceLayer||"_geojsonTileLayer",le));const je=ar({},N[ye]);je.paint=jp(je.paint,Be.paint,ee,Ae,E),je.layout=jp(je.layout,Be.layout,ee,Ae,E);const Ye=!V||V(ee,Be,Ae);if(!Ye)continue;const it=new Wl(ee,this.z,this.x,this.y,le);it.layer=je;let gt=n[ye];gt===void 0&&(gt=n[ye]=[]),gt.push({featureIndex:y,feature:it,intersectionZ:Ye})}}lookupSymbolFeatures(n,o,d,y,b,T,E,k){const N={};this.loadVTLayers();const L=kl(b.filterSpec,b.globalState);for(const V of n)this.loadMatchingFeature(N,d,y,V,L,T,E,k,o);return N}hasLayer(n){for(const o of this.bucketLayerIDs)for(const d of o)if(n===d)return!0;return!1}getId(n,o){var d;let y=n.id;return this.promoteId&&(y=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof y=="boolean"&&(y=Number(y)),y===void 0&&(!((d=n.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(y=Number(n.properties.cluster_id))),y}}function jp(c,n,o,d,y){return er(c,(b,T)=>{const E=n instanceof Rl?n.get(T):null;return E&&E.evaluate?E.evaluate(o,d,y):E})}function Nx(c,n){return n-c}function bv(c,n,o,d,y){const b=[];for(let T=0;T<c.length;T++){const E=c[T];let k;for(let N=0;N<E.length-1;N++){let L=E[N],V=E[N+1];L.x<n&&V.x<n||(L.x<n?L=new P(n,L.y+(n-L.x)/(V.x-L.x)*(V.y-L.y))._round():V.x<n&&(V=new P(n,L.y+(n-L.x)/(V.x-L.x)*(V.y-L.y))._round()),L.y<o&&V.y<o||(L.y<o?L=new P(L.x+(o-L.y)/(V.y-L.y)*(V.x-L.x),o)._round():V.y<o&&(V=new P(L.x+(o-L.y)/(V.y-L.y)*(V.x-L.x),o)._round()),L.x>=d&&V.x>=d||(L.x>=d?L=new P(d,L.y+(d-L.x)/(V.x-L.x)*(V.y-L.y))._round():V.x>=d&&(V=new P(d,L.y+(d-L.x)/(V.x-L.x)*(V.y-L.y))._round()),L.y>=y&&V.y>=y||(L.y>=y?L=new P(L.x+(y-L.y)/(V.y-L.y)*(V.x-L.x),y)._round():V.y>=y&&(V=new P(L.x+(y-L.y)/(V.y-L.y)*(V.x-L.x),y)._round()),k&&L.equals(k[k.length-1])||(k=[L],b.push(k)),k.push(V)))))}}return b}Dt("FeatureIndex",mg,{omit:["rawTileData","sourceLayerCoder"]});class el extends P{constructor(n,o,d,y){super(n,o),this.angle=d,y!==void 0&&(this.segment=y)}clone(){return new el(this.x,this.y,this.angle,this.segment)}}function wv(c,n,o,d,y){if(n.segment===void 0||o===0)return!0;let b=n,T=n.segment+1,E=0;for(;E>-o/2;){if(T--,T<0)return!1;E-=c[T].dist(b),b=c[T]}E+=c[T].dist(c[T+1]),T++;const k=[];let N=0;for(;E<o/2;){const L=c[T],V=c[T+1];if(!V)return!1;let W=c[T-1].angleTo(L)-L.angleTo(V);for(W=Math.abs((W+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:E,angleDelta:W}),N+=W;E-k[0].distance>d;)N-=k.shift().angleDelta;if(N>y)return!1;T++,E+=L.dist(V)}return!0}function Jo(c){let n=0;for(let o=0;o<c.length-1;o++)n+=c[o].dist(c[o+1]);return n}function Op(c,n,o){return c?.6*n*o:0}function gg(c,n){return Math.max(c?c.right-c.left:0,n?n.right-n.left:0)}function Sv(c,n,o,d,y,b){const T=Op(o,y,b),E=gg(o,d)*b;let k=0;const N=Jo(c)/2;for(let L=0;L<c.length-1;L++){const V=c[L],W=c[L+1],K=V.dist(W);if(k+K>N){const ee=(N-k)/K,le=da.number(V.x,W.x,ee),de=da.number(V.y,W.y,ee),ye=new el(le,de,W.angleTo(V),L);return ye._round(),!T||wv(c,ye,E,T,n)?ye:void 0}k+=K}}function nf(c,n,o,d,y,b,T,E,k){const N=Op(d,b,T),L=gg(d,y),V=L*T,W=c[0].x===0||c[0].x===k||c[0].y===0||c[0].y===k;return n-V<n/4&&(n=V+n/4),So(c,W?n/2*E%n:(L/2+2*b)*T*E%n,n,N,o,V,W,!1,k)}function So(c,n,o,d,y,b,T,E,k){const N=b/2,L=Jo(c);let V=0,W=n-o,K=[];for(let ee=0;ee<c.length-1;ee++){const le=c[ee],de=c[ee+1],ye=le.dist(de),Be=de.angleTo(le);for(;W+o<V+ye;){W+=o;const Ae=(W-V)/ye,je=da.number(le.x,de.x,Ae),Ye=da.number(le.y,de.y,Ae);if(je>=0&&je<k&&Ye>=0&&Ye<k&&W-N>=0&&W+N<=L){const it=new el(je,Ye,Be,ee);it._round(),d&&!wv(c,it,b,d,y)||K.push(it)}}V+=ye}return E||K.length||T||(K=So(c,V/2,o,d,y,b,T,!0,k)),K}function yg(c,n,o,d){const y=[],b=c.image,T=b.pixelRatio,E=b.paddedRect.w-2,k=b.paddedRect.h-2;let N={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const L=b.stretchX||[[0,E]],V=b.stretchY||[[0,k]],W=(dt,tr)=>dt+tr[1]-tr[0],K=L.reduce(W,0),ee=V.reduce(W,0),le=E-K,de=k-ee;let ye=0,Be=K,Ae=0,je=ee,Ye=0,it=le,gt=0,Et=de;if(b.content&&d){const dt=b.content,tr=dt[2]-dt[0],sr=dt[3]-dt[1];(b.textFitWidth||b.textFitHeight)&&(N=cg(c)),ye=Iu(L,0,dt[0]),Ae=Iu(V,0,dt[1]),Be=Iu(L,dt[0],dt[2]),je=Iu(V,dt[1],dt[3]),Ye=dt[0]-ye,gt=dt[1]-Ae,it=tr-Be,Et=sr-je}const Mt=N.x1,jt=N.y1,$t=N.x2-Mt,kt=N.y2-jt,It=(dt,tr,sr,Gt)=>{const Ut=kp(dt.stretch-ye,Be,$t,Mt),Cr=Ip(dt.fixed-Ye,it,dt.stretch,K),xn=kp(tr.stretch-Ae,je,kt,jt),Hn=Ip(tr.fixed-gt,Et,tr.stretch,ee),ji=kp(sr.stretch-ye,Be,$t,Mt),ia=Ip(sr.fixed-Ye,it,sr.stretch,K),aa=kp(Gt.stretch-Ae,je,kt,jt),oi=Ip(Gt.fixed-gt,Et,Gt.stretch,ee),An=new P(Ut,xn),Ti=new P(ji,xn),si=new P(ji,aa),s=new P(Ut,aa),h=new P(Cr/T,Hn/T),g=new P(ia/T,oi/T),S=n*Math.PI/180;if(S){const Y=Math.sin(S),ce=Math.cos(S),Me=[ce,-Y,Y,ce];An._matMult(Me),Ti._matMult(Me),s._matMult(Me),si._matMult(Me)}const j=dt.stretch+dt.fixed,R=tr.stretch+tr.fixed;return{tl:An,tr:Ti,bl:s,br:si,tex:{x:b.paddedRect.x+1+j,y:b.paddedRect.y+1+R,w:sr.stretch+sr.fixed-j,h:Gt.stretch+Gt.fixed-R},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:it/T/$t,minFontScaleY:Et/T/kt,isSDF:o}};if(d&&(b.stretchX||b.stretchY)){const dt=tl(L,le,K),tr=tl(V,de,ee);for(let sr=0;sr<dt.length-1;sr++){const Gt=dt[sr],Ut=dt[sr+1];for(let Cr=0;Cr<tr.length-1;Cr++)y.push(It(Gt,tr[Cr],Ut,tr[Cr+1]))}}else y.push(It({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:k+1}));return y}function Iu(c,n,o){let d=0;for(const y of c)d+=Math.max(n,Math.min(o,y[1]))-Math.max(n,Math.min(o,y[0]));return d}function tl(c,n,o){const d=[{fixed:-1,stretch:0}];for(const[y,b]of c){const T=d[d.length-1];d.push({fixed:y-T.stretch,stretch:T.stretch}),d.push({fixed:y-T.stretch,stretch:T.stretch+(b-y)})}return d.push({fixed:n+1,stretch:o}),d}function kp(c,n,o,d){return c/n*o+d}function Ip(c,n,o,d){return c-n*o/d}Dt("Anchor",el);class Yl{constructor(n,o,d,y,b,T,E,k,N,L){var V;if(this.boxStartIndex=n.length,N){let W=T.top,K=T.bottom;const ee=T.collisionPadding;ee&&(W-=ee[1],K+=ee[3]);let le=K-W;le>0&&(le=Math.max(10,le),this.circleDiameter=le)}else{const W=!((V=T.image)===null||V===void 0)&&V.content&&(T.image.textFitWidth||T.image.textFitHeight)?cg(T):{x1:T.left,y1:T.top,x2:T.right,y2:T.bottom};W.y1=W.y1*E-k[0],W.y2=W.y2*E+k[2],W.x1=W.x1*E-k[3],W.x2=W.x2*E+k[1];const K=T.collisionPadding;if(K&&(W.x1-=K[0]*E,W.y1-=K[1]*E,W.x2+=K[2]*E,W.y2+=K[3]*E),L){const ee=new P(W.x1,W.y1),le=new P(W.x2,W.y1),de=new P(W.x1,W.y2),ye=new P(W.x2,W.y2),Be=L*Math.PI/180;ee._rotate(Be),le._rotate(Be),de._rotate(Be),ye._rotate(Be),W.x1=Math.min(ee.x,le.x,de.x,ye.x),W.x2=Math.max(ee.x,le.x,de.x,ye.x),W.y1=Math.min(ee.y,le.y,de.y,ye.y),W.y2=Math.max(ee.y,le.y,de.y,ye.y)}n.emplaceBack(o.x,o.y,W.x1,W.y1,W.x2,W.y2,d,y,b)}this.boxEndIndex=n.length}}class Tv{constructor(n=[],o=(d,y)=>d<y?-1:d>y?1:0){if(this.data=n,this.length=this.data.length,this.compare=o,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:o,compare:d}=this,y=o[n];for(;n>0;){const b=n-1>>1,T=o[b];if(d(y,T)>=0)break;o[n]=T,n=b}o[n]=y}_down(n){const{data:o,compare:d}=this,y=this.length>>1,b=o[n];for(;n<y;){let T=1+(n<<1);const E=T+1;if(E<this.length&&d(o[E],o[T])<0&&(T=E),d(o[T],b)>=0)break;o[n]=o[T],n=T}o[n]=b}}function Rx(c,n=1,o=!1){const d=ku.fromPoints(c[0]),y=Math.min(d.width(),d.height());let b=y/2;const T=new Tv([],Lx),{minX:E,minY:k,maxX:N,maxY:L}=d;if(y===0)return new P(E,k);for(let K=E;K<N;K+=y)for(let ee=k;ee<L;ee+=y)T.push(new ed(K+b,ee+b,b,c));let V=function(K){let ee=0,le=0,de=0;const ye=K[0];for(let Be=0,Ae=ye.length,je=Ae-1;Be<Ae;je=Be++){const Ye=ye[Be],it=ye[je],gt=Ye.x*it.y-it.x*Ye.y;le+=(Ye.x+it.x)*gt,de+=(Ye.y+it.y)*gt,ee+=3*gt}return new ed(le/ee,de/ee,0,K)}(c),W=T.length;for(;T.length;){const K=T.pop();(K.d>V.d||!V.d)&&(V=K,o&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,W)),K.max-V.d<=n||(b=K.h/2,T.push(new ed(K.p.x-b,K.p.y-b,b,c)),T.push(new ed(K.p.x+b,K.p.y-b,b,c)),T.push(new ed(K.p.x-b,K.p.y+b,b,c)),T.push(new ed(K.p.x+b,K.p.y+b,b,c)),W+=4)}return o&&(console.log(`num probes: ${W}`),console.log(`best distance: ${V.d}`)),V.p}function Lx(c,n){return n.max-c.max}function ed(c,n,o,d){this.p=new P(c,n),this.h=o,this.d=function(y,b){let T=!1,E=1/0;for(let k=0;k<b.length;k++){const N=b[k];for(let L=0,V=N.length,W=V-1;L<V;W=L++){const K=N[L],ee=N[W];K.y>y.y!=ee.y>y.y&&y.x<(ee.x-K.x)*(y.y-K.y)/(ee.y-K.y)+K.x&&(T=!T),E=Math.min(E,zm(y,K,ee))}}return(T?1:-1)*Math.sqrt(E)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var Hi;m.aE=void 0,(Hi=m.aE||(m.aE={}))[Hi.center=1]="center",Hi[Hi.left=2]="left",Hi[Hi.right=3]="right",Hi[Hi.top=4]="top",Hi[Hi.bottom=5]="bottom",Hi[Hi["top-left"]=6]="top-left",Hi[Hi["top-right"]=7]="top-right",Hi[Hi["bottom-left"]=8]="bottom-left",Hi[Hi["bottom-right"]=9]="bottom-right";const vg=Number.POSITIVE_INFINITY;function Av(c,n){return n[1]!==vg?function(o,d,y){let b=0,T=0;switch(d=Math.abs(d),y=Math.abs(y),o){case"top-right":case"top-left":case"top":T=y-7;break;case"bottom-right":case"bottom-left":case"bottom":T=7-y}switch(o){case"top-right":case"bottom-right":case"right":b=-d;break;case"top-left":case"bottom-left":case"left":b=d}return[b,T]}(c,n[0],n[1]):function(o,d){let y=0,b=0;d<0&&(d=0);const T=d/Math.SQRT2;switch(o){case"top-right":case"top-left":b=T-7;break;case"bottom-right":case"bottom-left":b=7-T;break;case"bottom":b=7-d;break;case"top":b=d-7}switch(o){case"top-right":case"bottom-right":y=-T;break;case"top-left":case"bottom-left":y=T;break;case"left":y=d;break;case"right":y=-d}return[y,b]}(c,n[0])}function Mv(c,n,o){var d;const y=c.layout,b=(d=y.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(n,{},o);if(b){const E=b.values,k=[];for(let N=0;N<E.length;N+=2){const L=k[N]=E[N],V=E[N+1].map(W=>W*yi);L.startsWith("top")?V[1]-=7:L.startsWith("bottom")&&(V[1]+=7),k[N+1]=V}return new fi(k)}const T=y.get("text-variable-anchor");if(T){let E;E=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[y.get("text-radial-offset").evaluate(n,{},o)*yi,vg]:y.get("text-offset").evaluate(n,{},o).map(N=>N*yi);const k=[];for(const N of T)k.push(N,Av(N,E));return new fi(k)}return null}function Dp(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function td(c,n,o,d,y,b,T,E,k,N,L,V){let W=b.textMaxSize.evaluate(n,{});W===void 0&&(W=T);const K=c.layers[0].layout,ee=K.get("icon-offset").evaluate(n,{},L),le=_g(o.horizontal),de=T/24,ye=c.tilePixelRatio*de,Be=c.tilePixelRatio*W/24,Ae=c.tilePixelRatio*E,je=c.tilePixelRatio*K.get("symbol-spacing"),Ye=K.get("text-padding")*c.tilePixelRatio,it=function(sr,Gt,Ut,Cr=1){const xn=sr.get("icon-padding").evaluate(Gt,{},Ut),Hn=xn&&xn.values;return[Hn[0]*Cr,Hn[1]*Cr,Hn[2]*Cr,Hn[3]*Cr]}(K,n,L,c.tilePixelRatio),gt=K.get("text-max-angle")/180*Math.PI,Et=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point",Mt=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",jt=K.get("symbol-placement"),$t=je/2,kt=K.get("icon-text-fit");let It;d&&kt!=="none"&&(c.allowVerticalPlacement&&o.vertical&&(It=ug(d,o.vertical,kt,K.get("icon-text-fit-padding"),ee,de)),le&&(d=ug(d,le,kt,K.get("icon-text-fit-padding"),ee,de)));const dt=L?V.line.getGranularityForZoomLevel(L.z):1,tr=(sr,Gt)=>{Gt.x<0||Gt.x>=ht||Gt.y<0||Gt.y>=ht||function(Ut,Cr,xn,Hn,ji,ia,aa,oi,An,Ti,si,s,h,g,S,j,R,Y,ce,Me,qe,pt,bt,et,lt){const cr=Ut.addToLineVertexArray(Cr,xn);let rr,Qr,Ze,Re,Je=0,xt=0,Xt=0,Ir=0,Jt=-1,dr=-1;const kn={};let Jr=gs("");if(Ut.allowVerticalPlacement&&Hn.vertical){const Na=oi.layout.get("text-rotate").evaluate(qe,{},et)+90;Ze=new Yl(An,Cr,Ti,si,s,Hn.vertical,h,g,S,Na),aa&&(Re=new Yl(An,Cr,Ti,si,s,aa,R,Y,S,Na))}if(ji){const Na=oi.layout.get("icon-rotate").evaluate(qe,{}),vs=oi.layout.get("icon-text-fit")!=="none",uf=yg(ji,Na,bt,vs),Jl=aa?yg(aa,Na,bt,vs):void 0;Qr=new Yl(An,Cr,Ti,si,s,ji,R,Y,!1,Na),Je=4*uf.length;const hf=Ut.iconSizeData;let Uc=null;hf.kind==="source"?(Uc=[Hl*oi.layout.get("icon-size").evaluate(qe,{})],Uc[0]>Js&&Qt(`${Ut.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):hf.kind==="composite"&&(Uc=[Hl*pt.compositeIconSizes[0].evaluate(qe,{},et),Hl*pt.compositeIconSizes[1].evaluate(qe,{},et)],(Uc[0]>Js||Uc[1]>Js)&&Qt(`${Ut.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ut.addSymbols(Ut.icon,uf,Uc,Me,ce,qe,m.ao.none,Cr,cr.lineStartIndex,cr.lineLength,-1,et),Jt=Ut.icon.placedSymbolArray.length-1,Jl&&(xt=4*Jl.length,Ut.addSymbols(Ut.icon,Jl,Uc,Me,ce,qe,m.ao.vertical,Cr,cr.lineStartIndex,cr.lineLength,-1,et),dr=Ut.icon.placedSymbolArray.length-1)}const Kl=Object.keys(Hn.horizontal);for(const Na of Kl){const vs=Hn.horizontal[Na];if(!rr){Jr=gs(vs.text);const Jl=oi.layout.get("text-rotate").evaluate(qe,{},et);rr=new Yl(An,Cr,Ti,si,s,vs,h,g,S,Jl)}const uf=vs.positionedLines.length===1;if(Xt+=rd(Ut,Cr,vs,ia,oi,S,qe,j,cr,Hn.vertical?m.ao.horizontal:m.ao.horizontalOnly,uf?Kl:[Na],kn,Jt,pt,et),uf)break}Hn.vertical&&(Ir+=rd(Ut,Cr,Hn.vertical,ia,oi,S,qe,j,cr,m.ao.vertical,["vertical"],kn,dr,pt,et));const $x=rr?rr.boxStartIndex:Ut.collisionBoxArray.length,Mz=rr?rr.boxEndIndex:Ut.collisionBoxArray.length,Pz=Ze?Ze.boxStartIndex:Ut.collisionBoxArray.length,Ez=Ze?Ze.boxEndIndex:Ut.collisionBoxArray.length,Cz=Qr?Qr.boxStartIndex:Ut.collisionBoxArray.length,jz=Qr?Qr.boxEndIndex:Ut.collisionBoxArray.length,Oz=Re?Re.boxStartIndex:Ut.collisionBoxArray.length,kz=Re?Re.boxEndIndex:Ut.collisionBoxArray.length;let Ql=-1;const Pv=(Na,vs)=>Na&&Na.circleDiameter?Math.max(Na.circleDiameter,vs):vs;Ql=Pv(rr,Ql),Ql=Pv(Ze,Ql),Ql=Pv(Qr,Ql),Ql=Pv(Re,Ql);const jT=Ql>-1?1:0;jT&&(Ql*=lt/yi),Ut.glyphOffsetArray.length>=Xl.MAX_GLYPHS&&Qt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),qe.sortKey!==void 0&&Ut.addToSortKeyRanges(Ut.symbolInstances.length,qe.sortKey);const Iz=Mv(oi,qe,et),[Dz,zz]=function(Na,vs){const uf=Na.length,Jl=vs==null?void 0:vs.values;if((Jl==null?void 0:Jl.length)>0)for(let hf=0;hf<Jl.length;hf+=2){const Uc=Jl[hf+1];Na.emplaceBack(m.aE[Jl[hf]],Uc[0],Uc[1])}return[uf,Na.length]}(Ut.textAnchorOffsets,Iz);Ut.symbolInstances.emplaceBack(Cr.x,Cr.y,kn.right>=0?kn.right:-1,kn.center>=0?kn.center:-1,kn.left>=0?kn.left:-1,kn.vertical||-1,Jt,dr,Jr,$x,Mz,Pz,Ez,Cz,jz,Oz,kz,Ti,Xt,Ir,Je,xt,jT,0,h,Ql,Dz,zz)}(c,Gt,sr,o,d,y,It,c.layers[0],c.collisionBoxArray,n.index,n.sourceLayerIndex,c.index,ye,[Ye,Ye,Ye,Ye],Et,k,Ae,it,Mt,ee,n,b,N,L,T)};if(jt==="line")for(const sr of bv(n.geometry,0,0,ht,ht)){const Gt=Wo(sr,dt),Ut=nf(Gt,je,gt,o.vertical||le,d,24,Be,c.overscaling,ht);for(const Cr of Ut)le&&Bx(c,le.text,$t,Cr)||tr(Gt,Cr)}else if(jt==="line-center"){for(const sr of n.geometry)if(sr.length>1){const Gt=Wo(sr,dt),Ut=Sv(Gt,gt,o.vertical||le,d,24,Be);Ut&&tr(Gt,Ut)}}else if(n.type==="Polygon")for(const sr of yh(n.geometry,0)){const Gt=Rx(sr,16);tr(Wo(sr[0],dt,!0),new el(Gt.x,Gt.y,0))}else if(n.type==="LineString")for(const sr of n.geometry){const Gt=Wo(sr,dt);tr(Gt,new el(Gt[0].x,Gt[0].y,0))}else if(n.type==="Point")for(const sr of n.geometry)for(const Gt of sr)tr([Gt],new el(Gt.x,Gt.y,0))}function rd(c,n,o,d,y,b,T,E,k,N,L,V,W,K,ee){const le=function(Be,Ae,je,Ye,it,gt,Et,Mt){const jt=Ye.layout.get("text-rotate").evaluate(gt,{})*Math.PI/180,$t=[];for(const kt of Ae.positionedLines)for(const It of kt.positionedGlyphs){if(!It.rect)continue;const dt=It.rect||{};let tr=4,sr=!0,Gt=1,Ut=0;const Cr=(it||Mt)&&It.vertical,xn=It.metrics.advance*It.scale/2;if(Mt&&Ae.verticalizable&&(Ut=kt.lineOffset/2-(It.imageName?-(yi-It.metrics.width*It.scale)/2:(It.scale-1)*yi)),It.imageName){const Y=Et[It.imageName];sr=Y.sdf,Gt=Y.pixelRatio,tr=1/Gt}const Hn=it?[It.x+xn,It.y]:[0,0];let ji=it?[0,0]:[It.x+xn+je[0],It.y+je[1]-Ut],ia=[0,0];Cr&&(ia=ji,ji=[0,0]);const aa=It.metrics.isDoubleResolution?2:1,oi=(It.metrics.left-tr)*It.scale-xn+ji[0],An=(-It.metrics.top-tr)*It.scale+ji[1],Ti=oi+dt.w/aa*It.scale/Gt,si=An+dt.h/aa*It.scale/Gt,s=new P(oi,An),h=new P(Ti,An),g=new P(oi,si),S=new P(Ti,si);if(Cr){const Y=new P(-xn,xn- -17),ce=-Math.PI/2,Me=12-xn,qe=new P(22-Me,-(It.imageName?Me:0)),pt=new P(...ia);s._rotateAround(ce,Y)._add(qe)._add(pt),h._rotateAround(ce,Y)._add(qe)._add(pt),g._rotateAround(ce,Y)._add(qe)._add(pt),S._rotateAround(ce,Y)._add(qe)._add(pt)}if(jt){const Y=Math.sin(jt),ce=Math.cos(jt),Me=[ce,-Y,Y,ce];s._matMult(Me),h._matMult(Me),g._matMult(Me),S._matMult(Me)}const j=new P(0,0),R=new P(0,0);$t.push({tl:s,tr:h,bl:g,br:S,tex:dt,writingMode:Ae.writingMode,glyphOffset:Hn,sectionIndex:It.sectionIndex,isSDF:sr,pixelOffsetTL:j,pixelOffsetBR:R,minFontScaleX:0,minFontScaleY:0})}return $t}(0,o,E,y,b,T,d,c.allowVerticalPlacement),de=c.textSizeData;let ye=null;de.kind==="source"?(ye=[Hl*y.layout.get("text-size").evaluate(T,{})],ye[0]>Js&&Qt(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):de.kind==="composite"&&(ye=[Hl*K.compositeTextSizes[0].evaluate(T,{},ee),Hl*K.compositeTextSizes[1].evaluate(T,{},ee)],(ye[0]>Js||ye[1]>Js)&&Qt(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,le,ye,E,b,T,N,n,k.lineStartIndex,k.lineLength,W,ee);for(const Be of L)V[Be]=c.text.placedSymbolArray.length-1;return 4*le.length}function _g(c){for(const n in c)return c[n];return null}function Bx(c,n,o,d){const y=c.compareText;if(n in y){const b=y[n];for(let T=b.length-1;T>=0;T--)if(d.dist(b[T])<o)return!0}else y[n]=[];return y[n].push(d),!1}const Du=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class zu{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,d]=new Uint8Array(n,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=d>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const b=Du[15&d];if(!b)throw new Error("Unrecognized array type.");const[T]=new Uint16Array(n,2,1),[E]=new Uint32Array(n,4,1);return new zu(E,T,b,n)}constructor(n,o=64,d=Float64Array,y){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=d,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const b=Du.indexOf(this.ArrayType),T=2*n*this.ArrayType.BYTES_PER_ELEMENT,E=n*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-E%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${d}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+E+k,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+T+E+k),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+E+k,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=n)}add(n,o){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=n,this.coords[this._pos++]=o,d}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return zp(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,o,d,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:T,nodeSize:E}=this,k=[0,b.length-1,0],N=[];for(;k.length;){const L=k.pop()||0,V=k.pop()||0,W=k.pop()||0;if(V-W<=E){for(let de=W;de<=V;de++){const ye=T[2*de],Be=T[2*de+1];ye>=n&&ye<=d&&Be>=o&&Be<=y&&N.push(b[de])}continue}const K=W+V>>1,ee=T[2*K],le=T[2*K+1];ee>=n&&ee<=d&&le>=o&&le<=y&&N.push(b[K]),(L===0?n<=ee:o<=le)&&(k.push(W),k.push(K-1),k.push(1-L)),(L===0?d>=ee:y>=le)&&(k.push(K+1),k.push(V),k.push(1-L))}return N}within(n,o,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:b,nodeSize:T}=this,E=[0,y.length-1,0],k=[],N=d*d;for(;E.length;){const L=E.pop()||0,V=E.pop()||0,W=E.pop()||0;if(V-W<=T){for(let de=W;de<=V;de++)sf(b[2*de],b[2*de+1],n,o)<=N&&k.push(y[de]);continue}const K=W+V>>1,ee=b[2*K],le=b[2*K+1];sf(ee,le,n,o)<=N&&k.push(y[K]),(L===0?n-d<=ee:o-d<=le)&&(E.push(W),E.push(K-1),E.push(1-L)),(L===0?n+d>=ee:o+d>=le)&&(E.push(K+1),E.push(V),E.push(1-L))}return k}}function zp(c,n,o,d,y,b){if(y-d<=o)return;const T=d+y>>1;af(c,n,T,d,y,b),zp(c,n,o,d,T-1,1-b),zp(c,n,o,T+1,y,1-b)}function af(c,n,o,d,y,b){for(;y>d;){if(y-d>600){const N=y-d+1,L=o-d+1,V=Math.log(N),W=.5*Math.exp(2*V/3),K=.5*Math.sqrt(V*W*(N-W)/N)*(L-N/2<0?-1:1);af(c,n,o,Math.max(d,Math.floor(o-L*W/N+K)),Math.min(y,Math.floor(o+(N-L)*W/N+K)),b)}const T=n[2*o+b];let E=d,k=y;for(Nu(c,n,d,o),n[2*y+b]>T&&Nu(c,n,d,y);E<k;){for(Nu(c,n,E,k),E++,k--;n[2*E+b]<T;)E++;for(;n[2*k+b]>T;)k--}n[2*d+b]===T?Nu(c,n,d,k):(k++,Nu(c,n,k,y)),k<=o&&(d=k+1),o<=k&&(y=k-1)}}function Nu(c,n,o,d){of(c,o,d),of(n,2*o,2*d),of(n,2*o+1,2*d+1)}function of(c,n,o){const d=c[n];c[n]=c[o],c[o]=d}function sf(c,n,o,d){const y=c-o,b=n-d;return y*y+b*b}var Np;m.cx=void 0,(Np=m.cx||(m.cx={})).create="create",Np.load="load",Np.fullLoad="fullLoad";let lf=null,cf=[];const Rp=1e3/60,Ru="loadTime",xg="fullLoadTime",Fx={mark(c){performance.mark(c)},frame(c){const n=c;lf!=null&&cf.push(n-lf),lf=n},clearMetrics(){lf=null,cf=[],performance.clearMeasures(Ru),performance.clearMeasures(xg);for(const c in m.cx)performance.clearMarks(m.cx[c])},getPerformanceMetrics(){performance.measure(Ru,m.cx.create,m.cx.load),performance.measure(xg,m.cx.create,m.cx.fullLoad);const c=performance.getEntriesByName(Ru)[0].duration,n=performance.getEntriesByName(xg)[0].duration,o=cf.length,d=1/(cf.reduce((b,T)=>b+T,0)/o/1e3),y=cf.filter(b=>b>Rp).reduce((b,T)=>b+(T-Rp)/Rp,0);return{loadTime:c,fullLoadTime:n,fps:d,percentDroppedFrames:y/(o+y)*100,totalFrames:o}}};m.$=ht,m.A=ne,m.B=function([c,n,o]){return n+=90,n*=Math.PI/180,o*=Math.PI/180,{x:c*Math.cos(n)*Math.sin(o),y:c*Math.sin(n)*Math.sin(o),z:c*Math.cos(o)}},m.C=da,m.D=Rt,m.E=Zt,m.F=nn,m.G=Ac,m.H=ki,m.I=yp,m.J=class{constructor(c,n){this.target=c,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new gv(()=>this.process()),this.subscription=Mo(this.target,"message",o=>this.receive(o),!1),this.globalScope=tn(self)?c:window}registerMessageHandler(c,n){this.messageHandlers[c]=n}sendAsync(c,n){return new Promise((o,d)=>{const y=Math.round(1e18*Math.random()).toString(36).substring(0,10),b=n?Mo(n.signal,"abort",()=>{b==null||b.unsubscribe(),delete this.resolveRejects[y];const k={id:y,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(k)},yv):null;this.resolveRejects[y]={resolve:k=>{b==null||b.unsubscribe(),o(k)},reject:k=>{b==null||b.unsubscribe(),d(k)}};const T=[],E=Object.assign(Object.assign({},c),{id:y,sourceMapId:this.mapId,origin:location.origin,data:Mc(c.data,T)});this.target.postMessage(E,{transfer:T})})}receive(c){const n=c.data,o=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[o];const d=this.abortControllers[o];return delete this.abortControllers[o],void(d&&d.abort())}if(tn(self)||n.mustQueue)return this.tasks[o]=n,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,n)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),n=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(c,n)}processTask(c,n){return l(this,void 0,void 0,function*(){if(n.type==="<response>"){const y=this.resolveRejects[c];return delete this.resolveRejects[c],y?void(n.error?y.reject(Ls(n.error)):y.resolve(Ls(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=Ls(n.data),d=new AbortController;this.abortControllers[c]=d;try{const y=yield this.messageHandlers[n.type](n.sourceMapId,o,d);this.completeTask(c,null,y)}catch(y){this.completeTask(c,y)}})}completeTask(c,n,o){const d=[];delete this.abortControllers[c];const y={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Mc(n):null,data:Mc(o,d)};this.target.postMessage(y,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},m.K=Se,m.L=function(){var c=new ne(16);return ne!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},m.M=function(c,n,o){var d,y,b,T,E,k,N,L,V,W,K,ee,le=o[0],de=o[1],ye=o[2];return n===c?(c[12]=n[0]*le+n[4]*de+n[8]*ye+n[12],c[13]=n[1]*le+n[5]*de+n[9]*ye+n[13],c[14]=n[2]*le+n[6]*de+n[10]*ye+n[14],c[15]=n[3]*le+n[7]*de+n[11]*ye+n[15]):(y=n[1],b=n[2],T=n[3],E=n[4],k=n[5],N=n[6],L=n[7],V=n[8],W=n[9],K=n[10],ee=n[11],c[0]=d=n[0],c[1]=y,c[2]=b,c[3]=T,c[4]=E,c[5]=k,c[6]=N,c[7]=L,c[8]=V,c[9]=W,c[10]=K,c[11]=ee,c[12]=d*le+E*de+V*ye+n[12],c[13]=y*le+k*de+W*ye+n[13],c[14]=b*le+N*de+K*ye+n[14],c[15]=T*le+L*de+ee*ye+n[15]),c},m.N=function(c,n,o){var d=o[0],y=o[1],b=o[2];return c[0]=n[0]*d,c[1]=n[1]*d,c[2]=n[2]*d,c[3]=n[3]*d,c[4]=n[4]*y,c[5]=n[5]*y,c[6]=n[6]*y,c[7]=n[7]*y,c[8]=n[8]*b,c[9]=n[9]*b,c[10]=n[10]*b,c[11]=n[11]*b,c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15],c},m.O=function(c,n,o){var d=n[0],y=n[1],b=n[2],T=n[3],E=n[4],k=n[5],N=n[6],L=n[7],V=n[8],W=n[9],K=n[10],ee=n[11],le=n[12],de=n[13],ye=n[14],Be=n[15],Ae=o[0],je=o[1],Ye=o[2],it=o[3];return c[0]=Ae*d+je*E+Ye*V+it*le,c[1]=Ae*y+je*k+Ye*W+it*de,c[2]=Ae*b+je*N+Ye*K+it*ye,c[3]=Ae*T+je*L+Ye*ee+it*Be,c[4]=(Ae=o[4])*d+(je=o[5])*E+(Ye=o[6])*V+(it=o[7])*le,c[5]=Ae*y+je*k+Ye*W+it*de,c[6]=Ae*b+je*N+Ye*K+it*ye,c[7]=Ae*T+je*L+Ye*ee+it*Be,c[8]=(Ae=o[8])*d+(je=o[9])*E+(Ye=o[10])*V+(it=o[11])*le,c[9]=Ae*y+je*k+Ye*W+it*de,c[10]=Ae*b+je*N+Ye*K+it*ye,c[11]=Ae*T+je*L+Ye*ee+it*Be,c[12]=(Ae=o[12])*d+(je=o[13])*E+(Ye=o[14])*V+(it=o[15])*le,c[13]=Ae*y+je*k+Ye*W+it*de,c[14]=Ae*b+je*N+Ye*K+it*ye,c[15]=Ae*T+je*L+Ye*ee+it*Be,c},m.P=P,m.Q=function(c,n){const o={};for(let d=0;d<n.length;d++){const y=n[d];y in c&&(o[y]=c[y])}return o},m.R=Ci,m.S=Gr,m.T=wu,m.U=Pp,m.V=vv,m.W=U,m.X=re,m.Y=Ii,m.Z=ro,m._=l,m.a=ie,m.a$=tt,m.a0=function(c,n){var o,d,y,b,T;if(!c)return n??{};if(!n)return c;let E=Object.assign({},c);if(n.removeAll&&(E={removeAll:!0}),n.remove){const k=new Set(n.remove);E.add&&(E.add=E.add.filter(L=>!k.has(L.id))),E.update&&(E.update=E.update.filter(L=>!k.has(L.id)));const N=new Set(((o=c.add)!==null&&o!==void 0?o:[]).map(L=>L.id));n.remove=n.remove.filter(L=>!N.has(L))}if(n.remove){const k=new Set(E.remove?E.remove.concat(n.remove):n.remove);E.remove=Array.from(k.values())}if(n.add){const k=E.add?E.add.concat(n.add):n.add,N=new Map(k.map(L=>[L.id,L]));E.add=Array.from(N.values())}if(n.update){const k=new Map((d=E.update)===null||d===void 0?void 0:d.map(N=>[N.id,N]));for(const N of n.update){const L=(y=k.get(N.id))!==null&&y!==void 0?y:{id:N.id};N.newGeometry&&(L.newGeometry=N.newGeometry),N.addOrUpdateProperties&&(L.addOrUpdateProperties=((b=L.addOrUpdateProperties)!==null&&b!==void 0?b:[]).concat(N.addOrUpdateProperties)),N.removeProperties&&(L.removeProperties=((T=L.removeProperties)!==null&&T!==void 0?T:[]).concat(N.removeProperties)),N.removeAllProperties&&(L.removeAllProperties=!0),k.set(N.id,L)}E.update=Array.from(k.values())}return E.remove&&E.add&&(E.remove=E.remove.filter(k=>E.add.findIndex(N=>N.id===k)===-1)),E},m.a1=Kh,m.a2=ku,m.a3=25,m.a4=rf,m.a5=c=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(o=>{n.onloadstart=()=>{o(n)};for(const d of c){const y=window.document.createElement("source");Le(d)||(n.crossOrigin="Anonymous"),y.src=d,n.appendChild(y)}})},m.a6=wt,m.a7=function(){return Ot++},m.a8=H,m.a9=Xl,m.aA=function(c){let n=1/0,o=1/0,d=-1/0,y=-1/0;for(const b of c)n=Math.min(n,b.x),o=Math.min(o,b.y),d=Math.max(d,b.x),y=Math.max(y,b.y);return[n,o,d,y]},m.aB=yi,m.aC=xe,m.aD=function(c,n,o,d,y=!1){if(!o[0]&&!o[1])return[0,0];const b=y?d==="map"?-c.bearingInRadians:0:d==="viewport"?c.bearingInRadians:0;if(b){const T=Math.sin(b),E=Math.cos(b);o=[o[0]*E-o[1]*T,o[0]*T+o[1]*E]}return[y?o[0]:xe(n,o[0],c.zoom),y?o[1]:xe(n,o[1],c.zoom)]},m.aF=hg,m.aG=Dp,m.aH=Cu,m.aI=zu,m.aJ=Cn,m.aK=bo,m.aL=Oe,m.aM=Tr,m.aN=Xr,m.aO=yr,m.aP=zi,m.aQ=pg,m.aR=at,m.aS=Ie,m.aT=function(c){var n=new ne(3);return n[0]=c[0],n[1]=c[1],n[2]=c[2],n},m.aU=function(c,n,o){return c[0]=n[0]-o[0],c[1]=n[1]-o[1],c[2]=n[2]-o[2],c},m.aV=function(c,n){var o=n[0],d=n[1],y=n[2],b=o*o+d*d+y*y;return b>0&&(b=1/Math.sqrt(b)),c[0]=n[0]*b,c[1]=n[1]*b,c[2]=n[2]*b,c},m.aW=De,m.aX=function(c,n){return c[0]*n[0]+c[1]*n[1]+c[2]*n[2]},m.aY=function(c,n,o){return c[0]=n[0]*o[0],c[1]=n[1]*o[1],c[2]=n[2]*o[2],c[3]=n[3]*o[3],c},m.aZ=he,m.a_=function(c,n,o){const d=n[0]*o[0]+n[1]*o[1]+n[2]*o[2];return d===0?null:(-(c[0]*o[0]+c[1]*o[1]+c[2]*o[2])-o[3])/d},m.aa=kl,m.ab=Dc,m.ac=Wl,m.ad=function(c){const n={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,d,y,b)=>{const T=y||b;return n[d]=!T||T.toLowerCase(),""}),n["max-age"]){const o=parseInt(n["max-age"],10);isNaN(o)?delete n["max-age"]:n["max-age"]=o}return n},m.ae=Ts,m.af=function(c){return Math.pow(2,c)},m.ag=J,m.ah=Nt,m.ai=85.051129,m.aj=Ep,m.ak=function(c){return Math.log(c)/Math.LN2},m.al=function(c){var n=c[0],o=c[1];return n*n+o*o},m.am=function(c){if(!c.length)return new Set;const n=Math.max(...c.map(k=>k.canonical.z));let o=1/0,d=-1/0,y=1/0,b=-1/0;const T=[];for(const k of c){const{x:N,y:L,z:V}=k.canonical,W=Math.pow(2,n-V),K=N*W,ee=L*W;T.push({id:k,x:K,y:ee}),K<o&&(o=K),K>d&&(d=K),ee<y&&(y=ee),ee>b&&(b=ee)}const E=new Set;for(const k of T)k.x!==o&&k.x!==d&&k.y!==y&&k.y!==b||E.add(k.id);return E},m.an=function(c,n){let o=0,d=0;if(c.kind==="constant")d=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:y,minZoom:b,maxZoom:T}=c,E=y?Nt(mi.interpolationFactor(y,n,b,T),0,1):0;c.kind==="camera"?d=da.number(c.minSize,c.maxSize,E):o=E}return{uSizeT:o,uSize:d}},m.ap=function(c,{uSize:n,uSizeT:o},{lowerSize:d,upperSize:y}){return c.kind==="source"?d/Hl:c.kind==="composite"?da.number(d/Hl,y/Hl,o):n},m.aq=function(c,n){var o=n[0],d=n[1],y=n[2],b=n[3],T=n[4],E=n[5],k=n[6],N=n[7],L=n[8],V=n[9],W=n[10],K=n[11],ee=n[12],le=n[13],de=n[14],ye=n[15],Be=o*E-d*T,Ae=o*k-y*T,je=o*N-b*T,Ye=d*k-y*E,it=d*N-b*E,gt=y*N-b*k,Et=L*le-V*ee,Mt=L*de-W*ee,jt=L*ye-K*ee,$t=V*de-W*le,kt=V*ye-K*le,It=W*ye-K*de,dt=Be*It-Ae*kt+je*$t+Ye*jt-it*Mt+gt*Et;return dt?(c[0]=(E*It-k*kt+N*$t)*(dt=1/dt),c[1]=(y*kt-d*It-b*$t)*dt,c[2]=(le*gt-de*it+ye*Ye)*dt,c[3]=(W*it-V*gt-K*Ye)*dt,c[4]=(k*jt-T*It-N*Mt)*dt,c[5]=(o*It-y*jt+b*Mt)*dt,c[6]=(de*je-ee*gt-ye*Ae)*dt,c[7]=(L*gt-W*je+K*Ae)*dt,c[8]=(T*kt-E*jt+N*Et)*dt,c[9]=(d*jt-o*kt-b*Et)*dt,c[10]=(ee*it-le*je+ye*Be)*dt,c[11]=(V*je-L*it-K*Be)*dt,c[12]=(E*Mt-T*$t-k*Et)*dt,c[13]=(o*$t-d*Mt+y*Et)*dt,c[14]=(le*Ae-ee*Ye-de*Be)*dt,c[15]=(L*Ye-V*Ae+W*Be)*dt,c):null},m.ar=Ve,m.as=function(c){var n=c[0],o=c[1];return Math.sqrt(n*n+o*o)},m.at=function(c){return c[0]=0,c[1]=0,c},m.au=function(c,n,o){return c[0]=n[0]*o,c[1]=n[1]*o,c},m.av=dg,m.aw=ut,m.ax=function(c,n,o,d){const y=n.y-c.y,b=n.x-c.x,T=d.y-o.y,E=d.x-o.x,k=T*b-E*y;if(k===0)return null;const N=(E*(c.y-o.y)-T*(c.x-o.x))/k;return new P(c.x+N*b,c.y+N*y)},m.ay=bv,m.az=Uy,m.b=Wn,m.b$=class extends Si{constructor(c,n){super(c,n),this.current=new Array}set(c){if(c!=this.current){this.current=c;const n=new Float32Array(c);this.gl.uniform1fv(this.location,n)}}},m.b0=function(c,n,o){return c[0]=n[0]*o,c[1]=n[1]*o,c[2]=n[2]*o,c[3]=n[3]*o,c},m.b1=function(c,n){return c[0]*n[0]+c[1]*n[1]+c[2]*n[2]+c[3]},m.b2=_v,m.b3=Qh,m.b4=function(c,n,o,d,y){var b=1/Math.tan(n/2);if(c[0]=b/o,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=b,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,y!=null&&y!==1/0){var T=1/(d-y);c[10]=(y+d)*T,c[14]=2*y*d*T}else c[10]=-1,c[14]=-2*d;return c},m.b5=function(c){var n=new ne(16);return n[0]=c[0],n[1]=c[1],n[2]=c[2],n[3]=c[3],n[4]=c[4],n[5]=c[5],n[6]=c[6],n[7]=c[7],n[8]=c[8],n[9]=c[9],n[10]=c[10],n[11]=c[11],n[12]=c[12],n[13]=c[13],n[14]=c[14],n[15]=c[15],n},m.b6=function(c,n,o){var d=Math.sin(o),y=Math.cos(o),b=n[0],T=n[1],E=n[2],k=n[3],N=n[4],L=n[5],V=n[6],W=n[7];return n!==c&&(c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c[0]=b*y+N*d,c[1]=T*y+L*d,c[2]=E*y+V*d,c[3]=k*y+W*d,c[4]=N*y-b*d,c[5]=L*y-T*d,c[6]=V*y-E*d,c[7]=W*y-k*d,c},m.b7=function(c,n,o){var d=Math.sin(o),y=Math.cos(o),b=n[4],T=n[5],E=n[6],k=n[7],N=n[8],L=n[9],V=n[10],W=n[11];return n!==c&&(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c[4]=b*y+N*d,c[5]=T*y+L*d,c[6]=E*y+V*d,c[7]=k*y+W*d,c[8]=N*y-b*d,c[9]=L*y-T*d,c[10]=V*y-E*d,c[11]=W*y-k*d,c},m.b8=function(){const c=new Float32Array(16);return J(c),c},m.b9=function(){const c=new Float64Array(16);return J(c),c},m.bA=function(c,n){const o=Xe(c,360),d=Xe(n,360),y=d-o,b=d>o?y-360:y+360;return Math.abs(y)<Math.abs(b)?y:b},m.bB=function(c){return c[0]=0,c[1]=0,c[2]=0,c},m.bC=function(c,n,o,d){const y=Math.sqrt(c*c+n*n),b=Math.sqrt(o*o+d*d);c/=y,n/=y,o/=b,d/=b;const T=Math.acos(c*o+n*d);return-n*o+c*d>0?T:-T},m.bD=function(c,n){const o=Xe(c,2*Math.PI),d=Xe(n,2*Math.PI);return Math.min(Math.abs(o-d),Math.abs(o-d+2*Math.PI),Math.abs(o-d-2*Math.PI))},m.bE=function(){const c={},n=Ue.$version;for(const o in Ue.$root){const d=Ue.$root[o];if(d.required){let y=null;y=o==="version"?n:d.type==="array"?[]:{},y!=null&&(c[o]=y)}}return c},m.bF=Ia,m.bG=ze,m.bH=function c(n,o){if(Array.isArray(n)){if(!Array.isArray(o)||n.length!==o.length)return!1;for(let d=0;d<n.length;d++)if(!c(n[d],o[d]))return!1;return!0}if(typeof n=="object"&&n!==null&&o!==null){if(typeof o!="object"||Object.keys(n).length!==Object.keys(o).length)return!1;for(const d in n)if(!c(n[d],o[d]))return!1;return!0}return n===o},m.bI=function(c){c=c.slice();const n=Object.create(null);for(let o=0;o<c.length;o++)n[c[o].id]=c[o];for(let o=0;o<c.length;o++)"ref"in c[o]&&(c[o]=qr(c[o],n[c[o].ref]));return c},m.bJ=function(c,n){if(c.type==="custom")return new zx(c,n);switch(c.type){case"background":return new Dx(c,n);case"circle":return new Zy(c,n);case"color-relief":return new Hm(c,n);case"fill":return new Px(c,n);case"fill-extrusion":return new tg(c,n);case"heatmap":return new Sx(c,n);case"hillshade":return new Nc(c,n);case"line":return new Jy(c,n);case"raster":return new Fd(c,n);case"symbol":return new ju(c,n)}},m.bK=c=>c.type==="raster",m.bL=_t,m.bM=function(c,n){if(!c)return[{command:"setStyle",args:[n]}];let o=[];try{if(!Ft(c.version,n.version))return[{command:"setStyle",args:[n]}];Ft(c.center,n.center)||o.push({command:"setCenter",args:[n.center]}),Ft(c.state,n.state)||o.push({command:"setGlobalState",args:[n.state]}),Ft(c.centerAltitude,n.centerAltitude)||o.push({command:"setCenterAltitude",args:[n.centerAltitude]}),Ft(c.zoom,n.zoom)||o.push({command:"setZoom",args:[n.zoom]}),Ft(c.bearing,n.bearing)||o.push({command:"setBearing",args:[n.bearing]}),Ft(c.pitch,n.pitch)||o.push({command:"setPitch",args:[n.pitch]}),Ft(c.roll,n.roll)||o.push({command:"setRoll",args:[n.roll]}),Ft(c.sprite,n.sprite)||o.push({command:"setSprite",args:[n.sprite]}),Ft(c.glyphs,n.glyphs)||o.push({command:"setGlyphs",args:[n.glyphs]}),Ft(c.transition,n.transition)||o.push({command:"setTransition",args:[n.transition]}),Ft(c.light,n.light)||o.push({command:"setLight",args:[n.light]}),Ft(c.terrain,n.terrain)||o.push({command:"setTerrain",args:[n.terrain]}),Ft(c.sky,n.sky)||o.push({command:"setSky",args:[n.sky]}),Ft(c.projection,n.projection)||o.push({command:"setProjection",args:[n.projection]});const d={},y=[];(function(T,E,k,N){let L;for(L in E=E||{},T=T||{})Object.prototype.hasOwnProperty.call(T,L)&&(Object.prototype.hasOwnProperty.call(E,L)||ui(L,k,N));for(L in E)Object.prototype.hasOwnProperty.call(E,L)&&(Object.prototype.hasOwnProperty.call(T,L)?Ft(T[L],E[L])||(T[L].type==="geojson"&&E[L].type==="geojson"&&Zr(T,E,L)?Er(k,{command:"setGeoJSONSourceData",args:[L,E[L].data]}):hn(L,E,k,N)):ei(L,E,k))})(c.sources,n.sources,y,d);const b=[];c.layers&&c.layers.forEach(T=>{"source"in T&&d[T.source]?o.push({command:"removeLayer",args:[T.id]}):b.push(T)}),o=o.concat(y),function(T,E,k){E=E||[];const N=(T=T||[]).map(Mn),L=E.map(Mn),V=T.reduce(Ur,{}),W=E.reduce(Ur,{}),K=N.slice(),ee=Object.create(null);let le,de,ye,Be,Ae;for(let je=0,Ye=0;je<N.length;je++)le=N[je],Object.prototype.hasOwnProperty.call(W,le)?Ye++:(Er(k,{command:"removeLayer",args:[le]}),K.splice(K.indexOf(le,Ye),1));for(let je=0,Ye=0;je<L.length;je++)le=L[L.length-1-je],K[K.length-1-je]!==le&&(Object.prototype.hasOwnProperty.call(V,le)?(Er(k,{command:"removeLayer",args:[le]}),K.splice(K.lastIndexOf(le,K.length-Ye),1)):Ye++,Be=K[K.length-je],Er(k,{command:"addLayer",args:[W[le],Be]}),K.splice(K.length-je,0,le),ee[le]=!0);for(let je=0;je<L.length;je++)if(le=L[je],de=V[le],ye=W[le],!ee[le]&&!Ft(de,ye))if(Ft(de.source,ye.source)&&Ft(de["source-layer"],ye["source-layer"])&&Ft(de.type,ye.type)){for(Ae in Ar(de.layout,ye.layout,k,le,null,"setLayoutProperty"),Ar(de.paint,ye.paint,k,le,null,"setPaintProperty"),Ft(de.filter,ye.filter)||Er(k,{command:"setFilter",args:[le,ye.filter]}),Ft(de.minzoom,ye.minzoom)&&Ft(de.maxzoom,ye.maxzoom)||Er(k,{command:"setLayerZoomRange",args:[le,ye.minzoom,ye.maxzoom]}),de)Object.prototype.hasOwnProperty.call(de,Ae)&&Ae!=="layout"&&Ae!=="paint"&&Ae!=="filter"&&Ae!=="metadata"&&Ae!=="minzoom"&&Ae!=="maxzoom"&&(Ae.indexOf("paint.")===0?Ar(de[Ae],ye[Ae],k,le,Ae.slice(6),"setPaintProperty"):Ft(de[Ae],ye[Ae])||Er(k,{command:"setLayerProperty",args:[le,Ae,ye[Ae]]}));for(Ae in ye)Object.prototype.hasOwnProperty.call(ye,Ae)&&!Object.prototype.hasOwnProperty.call(de,Ae)&&Ae!=="layout"&&Ae!=="paint"&&Ae!=="filter"&&Ae!=="metadata"&&Ae!=="minzoom"&&Ae!=="maxzoom"&&(Ae.indexOf("paint.")===0?Ar(de[Ae],ye[Ae],k,le,Ae.slice(6),"setPaintProperty"):Ft(de[Ae],ye[Ae])||Er(k,{command:"setLayerProperty",args:[le,Ae,ye[Ae]]}))}else Er(k,{command:"removeLayer",args:[le]}),Be=K[K.lastIndexOf(le)+1],Er(k,{command:"addLayer",args:[ye,Be]})}(b,n.layers,o)}catch(d){console.warn("Unable to compute style diff:",d),o=[{command:"setStyle",args:[n]}]}return o},m.bN=function(c){const n=[],o=c.id;return o===void 0&&n.push({message:`layers.${o}: missing required property "id"`}),c.render===void 0&&n.push({message:`layers.${o}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&n.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),n},m.bO=er,m.bP=or,m.bQ=class extends Si{constructor(c,n){super(c,n),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},m.bR=Un,m.bS=class extends Si{constructor(c,n){super(c,n),this.current=Tn}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let n=1;n<16;n++)if(c[n]!==this.current[n]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},m.bT=on,m.bU=class extends Si{constructor(c,n){super(c,n),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},m.bV=class extends Si{constructor(c,n){super(c,n),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},m.bW=ue,m.bX=function(c,n){var o=Math.sin(n),d=Math.cos(n);return c[0]=d,c[1]=o,c[2]=0,c[3]=-o,c[4]=d,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},m.bY=function(c,n,o){var d=n[0],y=n[1],b=n[2];return c[0]=d*o[0]+y*o[3]+b*o[6],c[1]=d*o[1]+y*o[4]+b*o[7],c[2]=d*o[2]+y*o[5]+b*o[8],c},m.bZ=function(c,n,o,d,y,b,T){var E=1/(n-o),k=1/(d-y),N=1/(b-T);return c[0]=-2*E,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*k,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*N,c[11]=0,c[12]=(n+o)*E,c[13]=(y+d)*k,c[14]=(T+b)*N,c[15]=1,c},m.b_=class extends Si{constructor(c,n){super(c,n),this.current=new Array}set(c){if(c!=this.current){this.current=c;const n=new Float32Array(4*c.length);for(let o=0;o<c.length;o++)n[4*o]=c[o].r,n[4*o+1]=c[o].g,n[4*o+2]=c[o].b,n[4*o+3]=c[o].a;this.gl.uniform4fv(this.location,n)}}},m.ba=function(){return new Float64Array(16)},m.bb=function(c,n,o){const d=new Float64Array(4);return Pe(d,c,n-90,o),d},m.bc=function(c,n,o,d){var y,b,T,E,k,N=n[0],L=n[1],V=n[2],W=n[3],K=o[0],ee=o[1],le=o[2],de=o[3];return(b=N*K+L*ee+V*le+W*de)<0&&(b=-b,K=-K,ee=-ee,le=-le,de=-de),1-b>se?(y=Math.acos(b),T=Math.sin(y),E=Math.sin((1-d)*y)/T,k=Math.sin(d*y)/T):(E=1-d,k=d),c[0]=E*N+k*K,c[1]=E*L+k*ee,c[2]=E*V+k*le,c[3]=E*W+k*de,c},m.bd=function(c){const n=new Float64Array(9);var o,d,y,b,T,E,k,N,L,V,W,K,ee,le,de,ye,Be,Ae;V=(y=(d=c)[0])*(k=y+y),W=(b=d[1])*k,ee=(T=d[2])*k,le=T*(N=b+b),ye=(E=d[3])*k,Be=E*N,Ae=E*(L=T+T),(o=n)[0]=1-(K=b*N)-(de=T*L),o[3]=W-Ae,o[6]=ee+Be,o[1]=W+Ae,o[4]=1-V-de,o[7]=le-ye,o[2]=ee-Be,o[5]=le+ye,o[8]=1-V-K;const je=zi(-Math.asin(Nt(n[2],-1,1)));let Ye,it;return Math.hypot(n[5],n[8])<.001?(Ye=0,it=-zi(Math.atan2(n[3],n[4]))):(Ye=zi(n[5]===0&&n[8]===0?0:Math.atan2(n[5],n[8])),it=zi(n[1]===0&&n[0]===0?0:Math.atan2(n[1],n[0]))),{roll:Ye,pitch:je+90,bearing:it}},m.be=function(c,n){return c.roll==n.roll&&c.pitch==n.pitch&&c.bearing==n.bearing},m.bf=xr,m.bg=zn,m.bh=Su,m.bi=Ys,m.bj=Lc,m.bk=ot,m.bl=st,m.bm=Li,m.bn=function(c,n,o,d,y){return ot(d,y,Nt((c-n)/(o-n),0,1))},m.bo=Xe,m.bp=function(){return new Float64Array(3)},m.bq=function(c,n,o,d){return c[0]=n[0]+o[0]*d,c[1]=n[1]+o[1]*d,c[2]=n[2]+o[2]*d,c},m.br=Pe,m.bs=function(c,n,o){var d=o[0],y=o[1],b=o[2],T=o[3],E=n[0],k=n[1],N=n[2],L=y*N-b*k,V=b*E-d*N,W=d*k-y*E;return c[0]=E+T*(L+=L)+y*(W+=W)-b*(V+=V),c[1]=k+T*V+b*L-d*W,c[2]=N+T*W+d*V-y*L,c},m.bt=function(c,n,o){const d=(y=[c[0],c[1],c[2],n[0],n[1],n[2],o[0],o[1],o[2]])[0]*((L=y[8])*(T=y[4])-(E=y[5])*(N=y[7]))+y[1]*(-L*(b=y[3])+E*(k=y[6]))+y[2]*(N*b-T*k);var y,b,T,E,k,N,L;if(d===0)return null;const V=De([],[n[0],n[1],n[2]],[o[0],o[1],o[2]]),W=De([],[o[0],o[1],o[2]],[c[0],c[1],c[2]]),K=De([],[c[0],c[1],c[2]],[n[0],n[1],n[2]]),ee=at([],V,-c[3]);return Ie(ee,ee,at([],W,-n[3])),Ie(ee,ee,at([],K,-o[3])),at(ee,ee,1/d),ee},m.bu=Wh,m.bv=function(){return new Float64Array(4)},m.bw=function(c,n,o,d){var y=[],b=[];return y[0]=n[0]-o[0],y[1]=n[1]-o[1],y[2]=n[2]-o[2],b[0]=y[0]*Math.cos(d)-y[1]*Math.sin(d),b[1]=y[0]*Math.sin(d)+y[1]*Math.cos(d),b[2]=y[2],c[0]=b[0]+o[0],c[1]=b[1]+o[1],c[2]=b[2]+o[2],c},m.bx=function(c,n,o,d){var y=[],b=[];return y[0]=n[0]-o[0],y[1]=n[1]-o[1],y[2]=n[2]-o[2],b[0]=y[0],b[1]=y[1]*Math.cos(d)-y[2]*Math.sin(d),b[2]=y[1]*Math.sin(d)+y[2]*Math.cos(d),c[0]=b[0]+o[0],c[1]=b[1]+o[1],c[2]=b[2]+o[2],c},m.by=function(c,n,o,d){var y=[],b=[];return y[0]=n[0]-o[0],y[1]=n[1]-o[1],y[2]=n[2]-o[2],b[0]=y[2]*Math.sin(d)+y[0]*Math.cos(d),b[1]=y[1],b[2]=y[2]*Math.cos(d)-y[0]*Math.sin(d),c[0]=b[0]+o[0],c[1]=b[1]+o[1],c[2]=b[2]+o[2],c},m.bz=function(c,n,o){var d=Math.sin(o),y=Math.cos(o),b=n[0],T=n[1],E=n[2],k=n[3],N=n[8],L=n[9],V=n[10],W=n[11];return n!==c&&(c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c[0]=b*y-N*d,c[1]=T*y-L*d,c[2]=E*y-V*d,c[3]=k*y-W*d,c[8]=b*d+N*y,c[9]=T*d+L*y,c[10]=E*d+V*y,c[11]=k*d+W*y,c},m.c=te,m.c0=class extends Oh{},m.c1=dp,m.c2=class extends r{},m.c3=Um,m.c4=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},m.c5=Vn,m.c6=function(c,n,o){var d=n[0],y=n[1],b=n[2],T=o[3]*d+o[7]*y+o[11]*b+o[15];return c[0]=(o[0]*d+o[4]*y+o[8]*b+o[12])/(T=T||1),c[1]=(o[1]*d+o[5]*y+o[9]*b+o[13])/T,c[2]=(o[2]*d+o[6]*y+o[10]*b+o[14])/T,c},m.c7=class extends Ya{},m.c8=class extends D{},m.c9=function(c,n){return c[0]===n[0]&&c[1]===n[1]&&c[2]===n[2]&&c[3]===n[3]&&c[4]===n[4]&&c[5]===n[5]&&c[6]===n[6]&&c[7]===n[7]&&c[8]===n[8]&&c[9]===n[9]&&c[10]===n[10]&&c[11]===n[11]&&c[12]===n[12]&&c[13]===n[13]&&c[14]===n[14]&&c[15]===n[15]},m.cA=function(c,n){ie.REGISTERED_PROTOCOLS[c]=n},m.cB=function(c){delete ie.REGISTERED_PROTOCOLS[c]},m.cC=function(c,n){const o={};for(let y=0;y<c.length;y++){const b=n&&n[c[y].id]||fu(c[y]);n&&(n[c[y].id]=b);let T=o[b];T||(T=o[b]=[]),T.push(c[y])}const d=[];for(const y in o)d.push(o[y]);return d},m.cD=Dt,m.cE=xv,m.cF=mg,m.cG=_n,m.cH=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=ht/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const n=c.bucket.layers[0],o=n.layout,d=n._unevaluatedLayout._values,y={layoutIconSize:d["icon-size"].possiblyEvaluate(new nn(c.bucket.zoom+1),c.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new nn(c.bucket.zoom+1),c.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new nn(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:N,maxZoom:L}=c.bucket.textSizeData;y.compositeTextSizes=[d["text-size"].possiblyEvaluate(new nn(N),c.canonical),d["text-size"].possiblyEvaluate(new nn(L),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:N,maxZoom:L}=c.bucket.iconSizeData;y.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new nn(N),c.canonical),d["icon-size"].possiblyEvaluate(new nn(L),c.canonical)]}const b=o.get("text-line-height")*yi,T=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",E=o.get("text-keep-upright"),k=o.get("text-size");for(const N of c.bucket.features){const L=o.get("text-font").evaluate(N,{},c.canonical).join(","),V=k.evaluate(N,{},c.canonical),W=y.layoutTextSize.evaluate(N,{},c.canonical),K=y.layoutIconSize.evaluate(N,{},c.canonical),ee={horizontal:{},vertical:void 0},le=N.text;let de,ye=[0,0];if(le){const je=le.toString(),Ye=o.get("text-letter-spacing").evaluate(N,{},c.canonical)*yi,it=ds(je)?Ye:0,gt=o.get("text-anchor").evaluate(N,{},c.canonical),Et=Mv(n,N,c.canonical);if(!Et){const kt=o.get("text-radial-offset").evaluate(N,{},c.canonical);ye=kt?Av(gt,[kt*yi,vg]):o.get("text-offset").evaluate(N,{},c.canonical).map(It=>It*yi)}let Mt=T?"center":o.get("text-justify").evaluate(N,{},c.canonical);const jt=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(N,{},c.canonical)*yi:1/0,$t=()=>{c.bucket.allowVerticalPlacement&&Pc(je)&&(ee.vertical=vp(le,c.glyphMap,c.glyphPositions,c.imagePositions,L,jt,b,gt,"left",it,ye,m.ao.vertical,!0,W,V))};if(!T&&Et){const kt=new Set;if(Mt==="auto")for(let dt=0;dt<Et.values.length;dt+=2)kt.add(Dp(Et.values[dt]));else kt.add(Mt);let It=!1;for(const dt of kt)if(!ee.horizontal[dt])if(It)ee.horizontal[dt]=ee.horizontal[0];else{const tr=vp(le,c.glyphMap,c.glyphPositions,c.imagePositions,L,jt,b,"center",dt,it,ye,m.ao.horizontal,!1,W,V);tr&&(ee.horizontal[dt]=tr,It=tr.positionedLines.length===1)}$t()}else{Mt==="auto"&&(Mt=Dp(gt));const kt=vp(le,c.glyphMap,c.glyphPositions,c.imagePositions,L,jt,b,gt,Mt,it,ye,m.ao.horizontal,!1,W,V);kt&&(ee.horizontal[Mt]=kt),$t(),Pc(je)&&T&&E&&(ee.vertical=vp(le,c.glyphMap,c.glyphPositions,c.imagePositions,L,jt,b,gt,Mt,it,ye,m.ao.vertical,!1,W,V))}}let Be=!1;if(N.icon&&N.icon.name){const je=c.imageMap[N.icon.name];je&&(de=lg(c.imagePositions[N.icon.name],o.get("icon-offset").evaluate(N,{},c.canonical),o.get("icon-anchor").evaluate(N,{},c.canonical)),Be=!!je.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=Be:c.bucket.sdfIcons!==Be&&Qt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(je.pixelRatio!==c.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Ae=_g(ee.horizontal)||ee.vertical;c.bucket.iconsInText=!!Ae&&Ae.iconsInText,(Ae||de)&&td(c.bucket,N,ee,de,c.imageMap,y,W,K,ye,Be,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},m.cI=lp,m.cJ=Gl,m.cK=Kd,m.cL=cp,m.cM=Qd,m.cN=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},m.cO=function(c,n,o,d,y){return l(this,void 0,void 0,function*(){if(re())try{return yield Ii(c,n,o,d,y)}catch{}return function(b,T,E,k,N){const L=b.width,V=b.height;Di&&Yi||(Di=new OffscreenCanvas(L,V),Yi=Di.getContext("2d",{willReadFrequently:!0})),Di.width=L,Di.height=V,Yi.drawImage(b,0,0,L,V);const W=Yi.getImageData(T,E,k,N);return Yi.clearRect(0,0,L,V),W.data}(c,n,o,d,y)})},m.cP=ys,m.cQ=C,m.cR=Ul,m.cS=Or,m.cT=jl,m.cU=function(c,n){const o=new Map;if(c!=null)if(c.type==="Feature")o.set(Jh(c,n),c);else for(const d of c.features)o.set(Jh(d,n),d);return o},m.cV=function(c,n){if(c==null)return!0;if(c.type==="Feature")return Jh(c,n)!=null;if(c.type==="FeatureCollection"){const o=new Set;for(const d of c.features){const y=Jh(d,n);if(y==null||o.has(y))return!1;o.add(y)}return!0}return!1},m.cW=function(c,n,o){var d,y,b,T;if(n.removeAll&&c.clear(),n.remove)for(const E of n.remove)c.delete(E);if(n.add)for(const E of n.add){const k=Jh(E,o);k!=null&&c.set(k,E)}if(n.update)for(const E of n.update){let k=c.get(E.id);if(k==null)continue;const N=!E.removeAllProperties&&(((d=E.removeProperties)===null||d===void 0?void 0:d.length)>0||((y=E.addOrUpdateProperties)===null||y===void 0?void 0:y.length)>0);if((E.newGeometry||E.removeAllProperties||N)&&(k=Object.assign({},k),c.set(E.id,k),N&&(k.properties=Object.assign({},k.properties))),E.newGeometry&&(k.geometry=E.newGeometry),E.removeAllProperties)k.properties={};else if(((b=E.removeProperties)===null||b===void 0?void 0:b.length)>0)for(const L of E.removeProperties)Object.prototype.hasOwnProperty.call(k.properties,L)&&delete k.properties[L];if(((T=E.addOrUpdateProperties)===null||T===void 0?void 0:T.length)>0)for(const{key:L,value:V}of E.addOrUpdateProperties)k.properties[L]=V}},m.cX=fs,m.ca=function(c,n){var o=c[0],d=c[1],y=c[2],b=c[3],T=c[4],E=c[5],k=c[6],N=c[7],L=c[8],V=c[9],W=c[10],K=c[11],ee=c[12],le=c[13],de=c[14],ye=c[15],Be=n[0],Ae=n[1],je=n[2],Ye=n[3],it=n[4],gt=n[5],Et=n[6],Mt=n[7],jt=n[8],$t=n[9],kt=n[10],It=n[11],dt=n[12],tr=n[13],sr=n[14],Gt=n[15];return Math.abs(o-Be)<=se*Math.max(1,Math.abs(o),Math.abs(Be))&&Math.abs(d-Ae)<=se*Math.max(1,Math.abs(d),Math.abs(Ae))&&Math.abs(y-je)<=se*Math.max(1,Math.abs(y),Math.abs(je))&&Math.abs(b-Ye)<=se*Math.max(1,Math.abs(b),Math.abs(Ye))&&Math.abs(T-it)<=se*Math.max(1,Math.abs(T),Math.abs(it))&&Math.abs(E-gt)<=se*Math.max(1,Math.abs(E),Math.abs(gt))&&Math.abs(k-Et)<=se*Math.max(1,Math.abs(k),Math.abs(Et))&&Math.abs(N-Mt)<=se*Math.max(1,Math.abs(N),Math.abs(Mt))&&Math.abs(L-jt)<=se*Math.max(1,Math.abs(L),Math.abs(jt))&&Math.abs(V-$t)<=se*Math.max(1,Math.abs(V),Math.abs($t))&&Math.abs(W-kt)<=se*Math.max(1,Math.abs(W),Math.abs(kt))&&Math.abs(K-It)<=se*Math.max(1,Math.abs(K),Math.abs(It))&&Math.abs(ee-dt)<=se*Math.max(1,Math.abs(ee),Math.abs(dt))&&Math.abs(le-tr)<=se*Math.max(1,Math.abs(le),Math.abs(tr))&&Math.abs(de-sr)<=se*Math.max(1,Math.abs(de),Math.abs(sr))&&Math.abs(ye-Gt)<=se*Math.max(1,Math.abs(ye),Math.abs(Gt))},m.cb=function(c,n){return c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15],c},m.cc=c=>c.type==="symbol",m.cd=c=>c.type==="circle",m.ce=c=>c.type==="heatmap",m.cf=c=>c.type==="line",m.cg=c=>c.type==="fill",m.ch=c=>c.type==="fill-extrusion",m.ci=c=>c.type==="hillshade",m.cj=c=>c.type==="color-relief",m.ck=c=>c.type==="background",m.cl=c=>c.type==="custom",m.cm=Pt,m.cn=function(c,n,o){const d=Ge(n.x-o.x,n.y-o.y),y=Ge(c.x-o.x,c.y-o.y);var b,T;return zi(Math.atan2(d[0]*y[1]-d[1]*y[0],(b=d)[0]*(T=y)[0]+b[1]*T[1]))},m.co=Vt,m.cp=function(c,n){return ci[n]&&(c instanceof MouseEvent||c instanceof WheelEvent)},m.cq=function(c,n){return Jn[n]&&"touches"in c},m.cr=function(c){return Jn[c]||ci[c]},m.cs=function(c,n,o){var d=n[0],y=n[1];return c[0]=o[0]*d+o[4]*y+o[12],c[1]=o[1]*d+o[5]*y+o[13],c},m.ct=function(c,n){const{x:o,y:d}=Kh.fromLngLat(n);return!(c<0||c>25||d<0||d>=1||o<0||o>=1)},m.cu=function(c,n){return c[0]=n[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=n[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=n[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},m.cv=class extends $s{},m.cw=Fx,m.cy=function(c){return c.message===ke},m.cz=Ee,m.d=Le,m.e=ar,m.f=c=>l(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(n)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),m.g=fe,m.h=c=>new Promise((n,o)=>{const d=new Image;d.onload=()=>{n(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=Ba})},d.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const y=new Blob([new Uint8Array(c)],{type:"image/png"});d.src=c.byteLength?URL.createObjectURL(y):Ba}),m.i=tn,m.j=(c,n)=>He(ar(c,{type:"json"}),n),m.k=Bt,m.l=mt,m.m=He,m.n=(c,n)=>He(ar(c,{type:"arrayBuffer"}),n),m.o=function(c){return new Qd(c).readFields(cv,[])},m.p=og,m.q=zc,m.r=Pi,m.s=Mo,m.t=an,m.u=wr,m.v=Ue,m.w=Qt,m.x=Dd,m.y=zd,m.z=_a}),f("worker",["./shared"],function(m){class l{constructor(te,ie){this.keyCache={},te&&this.replace(te,ie)}replace(te,ie){this._layerConfigs={},this._layers={},this.update(te,[],ie)}update(te,ie,fe){for(const Ee of te){this._layerConfigs[Ee.id]=Ee;const ze=this._layers[Ee.id]=m.bJ(Ee,fe);ze._featureFilter=m.aa(ze.filter,fe),this.keyCache[Ee.id]&&delete this.keyCache[Ee.id]}for(const Ee of ie)delete this.keyCache[Ee],delete this._layerConfigs[Ee],delete this._layers[Ee];this.familiesBySource={};const Se=m.cC(Object.values(this._layerConfigs),this.keyCache);for(const Ee of Se){const ze=Ee.map(Bt=>this._layers[Bt.id]),He=ze[0];if(He.visibility==="none")continue;const Le=He.source||"";let ct=this.familiesBySource[Le];ct||(ct=this.familiesBySource[Le]={});const St=He.sourceLayer||"_geojsonTileLayer";let mt=ct[St];mt||(mt=ct[St]=[]),mt.push(ze)}}}class P{constructor(te){const ie={},fe=[];for(const He in te){const Le=te[He],ct=ie[He]={};for(const St in Le){const mt=Le[+St];if(!mt||mt.bitmap.width===0||mt.bitmap.height===0)continue;const Bt={x:0,y:0,w:mt.bitmap.width+2,h:mt.bitmap.height+2};fe.push(Bt),ct[St]={rect:Bt,metrics:mt.metrics}}}const{w:Se,h:Ee}=m.p(fe),ze=new m.q({width:Se||1,height:Ee||1});for(const He in te){const Le=te[He];for(const ct in Le){const St=Le[+ct];if(!St||St.bitmap.width===0||St.bitmap.height===0)continue;const mt=ie[He][ct].rect;m.q.copy(St.bitmap,ze,{x:0,y:0},{x:mt.x+1,y:mt.y+1},St.bitmap)}}this.image=ze,this.positions=ie}}m.cD("GlyphAtlas",P);class C{constructor(te){this.tileID=new m.Z(te.tileID.overscaledZ,te.tileID.wrap,te.tileID.canonical.z,te.tileID.canonical.x,te.tileID.canonical.y),this.uid=te.uid,this.zoom=te.zoom,this.pixelRatio=te.pixelRatio,this.tileSize=te.tileSize,this.source=te.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=te.showCollisionBoxes,this.collectResourceTiming=!!te.collectResourceTiming,this.returnDependencies=!!te.returnDependencies,this.promoteId=te.promoteId,this.inFlightDependencies=[]}parse(te,ie,fe,Se,Ee){return m._(this,void 0,void 0,function*(){this.status="parsing",this.data=te,this.collisionBoxArray=new m.a8;const ze=new m.cE(Object.keys(te.layers).sort()),He=new m.cF(this.tileID,this.promoteId);He.bucketLayerIDs=[];const Le={},ct={featureIndex:He,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:fe,subdivisionGranularity:Ee},St=ie.familiesBySource[this.source];for(const Ur in St){const wt=te.layers[Ur];if(!wt)continue;wt.version===1&&m.w(`Vector tile source "${this.source}" layer "${Ur}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Po=ze.encode(Ur),ua=[];for(let Mi=0;Mi<wt.length;Mi++){const Yn=wt.feature(Mi),Ct=He.getId(Yn,Ur);ua.push({feature:Yn,id:Ct,index:Mi,sourceLayerIndex:Po})}for(const Mi of St[Ur]){const Yn=Mi[0];Yn.source!==this.source&&m.w(`layer.source = ${Yn.source} does not equal this.source = ${this.source}`),Yn.minzoom&&this.zoom<Math.floor(Yn.minzoom)||Yn.maxzoom&&this.zoom>=Yn.maxzoom||Yn.visibility!=="none"&&(z(Mi,this.zoom,fe),(Le[Yn.id]=Yn.createBucket({index:He.bucketLayerIDs.length,layers:Mi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Po,sourceID:this.source})).populate(ua,ct,this.tileID.canonical),He.bucketLayerIDs.push(Mi.map(Ct=>Ct.id)))}}const mt=m.bO(ct.glyphDependencies,Ur=>Object.keys(Ur).map(Number));this.inFlightDependencies.forEach(Ur=>Ur==null?void 0:Ur.abort()),this.inFlightDependencies=[];let Bt=Promise.resolve({});if(Object.keys(mt).length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),Bt=Se.sendAsync({type:"GG",data:{stacks:mt,source:this.source,tileID:this.tileID,type:"glyphs"}},Ur)}const Zt=Object.keys(ct.iconDependencies);let Ue=Promise.resolve({});if(Zt.length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),Ue=Se.sendAsync({type:"GI",data:{icons:Zt,source:this.source,tileID:this.tileID,type:"icons"}},Ur)}const jr=Object.keys(ct.patternDependencies);let qr=Promise.resolve({});if(jr.length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),qr=Se.sendAsync({type:"GI",data:{icons:jr,source:this.source,tileID:this.tileID,type:"patterns"}},Ur)}const Ft=ct.dashDependencies;let Er=Promise.resolve({});if(Object.keys(Ft).length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),Er=Se.sendAsync({type:"GDA",data:{dashes:Ft}},Ur)}const[ei,ui,hn,Zr]=yield Promise.all([Bt,Ue,qr,Er]),Ar=new P(ei),Mn=new m.cG(ui,hn);for(const Ur in Le){const wt=Le[Ur];wt instanceof m.a9?(z(wt.layers,this.zoom,fe),m.cH({bucket:wt,glyphMap:ei,glyphPositions:Ar.positions,imageMap:ui,imagePositions:Mn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:ct.subdivisionGranularity})):wt.hasDependencies&&(wt instanceof m.cI||wt instanceof m.cJ||wt instanceof m.cK)&&(z(wt.layers,this.zoom,fe),wt.addFeatures(ct,this.tileID.canonical,Mn.patternPositions,Zr))}return this.status="done",{buckets:Object.values(Le).filter(Ur=>!Ur.isEmpty()),featureIndex:He,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ar.image,imageAtlas:Mn,dashPositions:Zr,glyphMap:this.returnDependencies?ei:null,iconMap:this.returnDependencies?ui:null,glyphPositions:this.returnDependencies?Ar.positions:null}})}}function z(ke,te,ie){const fe=new m.F(te);for(const Se of ke)Se.recalculate(fe,ie)}class O{constructor(te,ie,fe){this.actor=te,this.layerIndex=ie,this.availableImages=fe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(te,ie){return m._(this,void 0,void 0,function*(){const fe=yield m.n(te.request,ie);try{return{vectorTile:new m.cL(new m.cM(fe.data)),rawData:fe.data,cacheControl:fe.cacheControl,expires:fe.expires}}catch(Se){const Ee=new Uint8Array(fe.data);let ze=`Unable to parse the tile at ${te.request.url}, `;throw ze+=Ee[0]===31&&Ee[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Se.message}`,new Error(ze)}})}loadTile(te){return m._(this,void 0,void 0,function*(){const ie=te.uid,fe=!!(te&&te.request&&te.request.collectResourceTiming)&&new m.cN(te.request),Se=new C(te);this.loading[ie]=Se;const Ee=new AbortController;Se.abort=Ee;try{const ze=yield this.loadVectorTile(te,Ee);if(delete this.loading[ie],!ze)return null;const He=ze.rawData,Le={};ze.expires&&(Le.expires=ze.expires),ze.cacheControl&&(Le.cacheControl=ze.cacheControl);const ct={};if(fe){const mt=fe.finish();mt&&(ct.resourceTiming=JSON.parse(JSON.stringify(mt)))}Se.vectorTile=ze.vectorTile;const St=Se.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.actor,te.subdivisionGranularity);this.loaded[ie]=Se,this.fetching[ie]={rawTileData:He,cacheControl:Le,resourceTiming:ct};try{const mt=yield St;return m.e({rawTileData:He.slice(0)},mt,Le,ct)}finally{delete this.fetching[ie]}}catch(ze){throw delete this.loading[ie],Se.status="done",this.loaded[ie]=Se,ze}})}reloadTile(te){return m._(this,void 0,void 0,function*(){const ie=te.uid;if(!this.loaded||!this.loaded[ie])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const fe=this.loaded[ie];if(fe.showCollisionBoxes=te.showCollisionBoxes,fe.status==="parsing"){const Se=yield fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,te.subdivisionGranularity);let Ee;if(this.fetching[ie]){const{rawTileData:ze,cacheControl:He,resourceTiming:Le}=this.fetching[ie];delete this.fetching[ie],Ee=m.e({rawTileData:ze.slice(0)},Se,He,Le)}else Ee=Se;return Ee}if(fe.status==="done"&&fe.vectorTile)return fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,te.subdivisionGranularity)})}abortTile(te){return m._(this,void 0,void 0,function*(){const ie=this.loading,fe=te.uid;ie&&ie[fe]&&ie[fe].abort&&(ie[fe].abort.abort(),delete ie[fe])})}removeTile(te){return m._(this,void 0,void 0,function*(){this.loaded&&this.loaded[te.uid]&&delete this.loaded[te.uid]})}}class B{constructor(){this.loaded={}}loadTile(te){return m._(this,void 0,void 0,function*(){const{uid:ie,encoding:fe,rawImageData:Se,redFactor:Ee,greenFactor:ze,blueFactor:He,baseShift:Le}=te,ct=Se.width+2,St=Se.height+2,mt=m.b(Se)?new m.R({width:ct,height:St},yield m.cO(Se,-1,-1,ct,St)):Se,Bt=new m.cP(ie,mt,fe,Ee,ze,He,Le);return this.loaded=this.loaded||{},this.loaded[ie]=Bt,Bt})}removeTile(te){const ie=this.loaded,fe=te.uid;ie&&ie[fe]&&delete ie[fe]}}var F,X,Z=function(){if(X)return F;function ke(ie,fe){if(ie.length!==0){te(ie[0],fe);for(var Se=1;Se<ie.length;Se++)te(ie[Se],!fe)}}function te(ie,fe){for(var Se=0,Ee=0,ze=0,He=ie.length,Le=He-1;ze<He;Le=ze++){var ct=(ie[ze][0]-ie[Le][0])*(ie[Le][1]+ie[ze][1]),St=Se+ct;Ee+=Math.abs(Se)>=Math.abs(ct)?Se-St+ct:ct-St+Se,Se=St}Se+Ee>=0!=!!fe&&ie.reverse()}return X=1,F=function ie(fe,Se){var Ee,ze=fe&&fe.type;if(ze==="FeatureCollection")for(Ee=0;Ee<fe.features.length;Ee++)ie(fe.features[Ee],Se);else if(ze==="GeometryCollection")for(Ee=0;Ee<fe.geometries.length;Ee++)ie(fe.geometries[Ee],Se);else if(ze==="Feature")ie(fe.geometry,Se);else if(ze==="Polygon")ke(fe.coordinates,Se);else if(ze==="MultiPolygon")for(Ee=0;Ee<fe.coordinates.length;Ee++)ke(fe.coordinates[Ee],Se);return fe}}(),U=m.cQ(Z);class re extends m.cS{constructor(te,ie){super(new m.cM,0,ie,[],[]),this.feature=te,this.type=te.type,this.properties=te.tags?te.tags:{},"id"in te&&(typeof te.id=="string"?this.id=parseInt(te.id,10):typeof te.id!="number"||isNaN(te.id)||(this.id=te.id))}loadGeometry(){const te=[],ie=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const fe of ie){const Se=[];for(const Ee of fe)Se.push(new m.P(Ee[0],Ee[1]));te.push(Se)}return te}}class se extends m.cR{constructor(te,ie){super(new m.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ie?ie.version:1,this.extent=ie?ie.extent:4096,this.length=te.length,this.features=te}feature(te){return new re(this.features[te],this.extent)}}function ne(ke,te){te.writeVarintField(15,ke.version||1),te.writeStringField(1,ke.name||""),te.writeVarintField(5,ke.extent||4096);const ie={keys:[],values:[],keycache:{},valuecache:{}};for(let Ee=0;Ee<ke.length;Ee++)ie.feature=ke.feature(Ee),te.writeMessage(2,ue,ie);const fe=ie.keys;for(const Ee of fe)te.writeStringField(3,Ee);const Se=ie.values;for(const Ee of Se)te.writeMessage(4,Ie,Ee)}function ue(ke,te){if(!ke.feature)return;const ie=ke.feature;ie.id!==void 0&&te.writeVarintField(1,ie.id),te.writeMessage(2,J,ke),te.writeVarintField(3,ie.type),te.writeMessage(4,ve,ie)}function J(ke,te){var ie;for(const fe in(ie=ke.feature)==null?void 0:ie.properties){let Se=ke.feature.properties[fe],Ee=ke.keycache[fe];if(Se===null)continue;Ee===void 0&&(ke.keys.push(fe),Ee=ke.keys.length-1,ke.keycache[fe]=Ee),te.writeVarint(Ee),typeof Se!="string"&&typeof Se!="boolean"&&typeof Se!="number"&&(Se=JSON.stringify(Se));const ze=typeof Se+":"+Se;let He=ke.valuecache[ze];He===void 0&&(ke.values.push(Se),He=ke.values.length-1,ke.valuecache[ze]=He),te.writeVarint(He)}}function ae(ke,te){return(te<<3)+(7&ke)}function he(ke){return ke<<1^ke>>31}function ve(ke,te){const ie=ke.loadGeometry(),fe=ke.type;let Se=0,Ee=0;for(const ze of ie){let He=1;fe===1&&(He=ze.length),te.writeVarint(ae(1,He));const Le=fe===3?ze.length-1:ze.length;for(let ct=0;ct<Le;ct++){ct===1&&fe!==1&&te.writeVarint(ae(2,Le-1));const St=ze[ct].x-Se,mt=ze[ct].y-Ee;te.writeVarint(he(St)),te.writeVarint(he(mt)),Se+=St,Ee+=mt}ke.type===3&&te.writeVarint(ae(7,1))}}function Ie(ke,te){const ie=typeof ke;ie==="string"?te.writeStringField(1,ke):ie==="boolean"?te.writeBooleanField(7,ke):ie==="number"&&(ke%1!=0?te.writeDoubleField(3,ke):ke<0?te.writeSVarintField(6,ke):te.writeVarintField(5,ke))}const at={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},De=Math.fround||(Fe=new Float32Array(1),ke=>(Fe[0]=+ke,Fe[0]));var Fe;class tt{constructor(te){this.options=Object.assign(Object.create(at),te),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(te){const{log:ie,minZoom:fe,maxZoom:Se}=this.options;ie&&console.time("total time");const Ee=`prepare ${te.length} points`;ie&&console.time(Ee),this.points=te;const ze=[];for(let Le=0;Le<te.length;Le++){const ct=te[Le];if(!ct.geometry)continue;const[St,mt]=ct.geometry.coordinates,Bt=De(Pe(St)),Zt=De(Ve(mt));ze.push(Bt,Zt,1/0,Le,-1,1),this.options.reduce&&ze.push(0)}let He=this.trees[Se+1]=this._createTree(ze);ie&&console.timeEnd(Ee);for(let Le=Se;Le>=fe;Le--){const ct=+Date.now();He=this.trees[Le]=this._createTree(this._cluster(He,Le)),ie&&console.log("z%d: %d clusters in %dms",Le,He.numItems,+Date.now()-ct)}return ie&&console.timeEnd("total time"),this}getClusters(te,ie){let fe=((te[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,te[1]));let Ee=te[2]===180?180:((te[2]+180)%360+360)%360-180;const ze=Math.max(-90,Math.min(90,te[3]));if(te[2]-te[0]>=360)fe=-180,Ee=180;else if(fe>Ee){const mt=this.getClusters([fe,Se,180,ze],ie),Bt=this.getClusters([-180,Se,Ee,ze],ie);return mt.concat(Bt)}const He=this.trees[this._limitZoom(ie)],Le=He.range(Pe(fe),Ve(ze),Pe(Ee),Ve(Se)),ct=He.data,St=[];for(const mt of Le){const Bt=this.stride*mt;St.push(ct[Bt+5]>1?ut(ct,Bt,this.clusterProps):this.points[ct[Bt+3]])}return St}getChildren(te){const ie=this._getOriginId(te),fe=this._getOriginZoom(te),Se="No cluster with the specified id.",Ee=this.trees[fe];if(!Ee)throw new Error(Se);const ze=Ee.data;if(ie*this.stride>=ze.length)throw new Error(Se);const He=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),Le=Ee.within(ze[ie*this.stride],ze[ie*this.stride+1],He),ct=[];for(const St of Le){const mt=St*this.stride;ze[mt+4]===te&&ct.push(ze[mt+5]>1?ut(ze,mt,this.clusterProps):this.points[ze[mt+3]])}if(ct.length===0)throw new Error(Se);return ct}getLeaves(te,ie,fe){const Se=[];return this._appendLeaves(Se,te,ie=ie||10,fe=fe||0,0),Se}getTile(te,ie,fe){const Se=this.trees[this._limitZoom(te)],Ee=Math.pow(2,te),{extent:ze,radius:He}=this.options,Le=He/ze,ct=(fe-Le)/Ee,St=(fe+1+Le)/Ee,mt={features:[]};return this._addTileFeatures(Se.range((ie-Le)/Ee,ct,(ie+1+Le)/Ee,St),Se.data,ie,fe,Ee,mt),ie===0&&this._addTileFeatures(Se.range(1-Le/Ee,ct,1,St),Se.data,Ee,fe,Ee,mt),ie===Ee-1&&this._addTileFeatures(Se.range(0,ct,Le/Ee,St),Se.data,-1,fe,Ee,mt),mt.features.length?mt:null}getClusterExpansionZoom(te){let ie=this._getOriginZoom(te)-1;for(;ie<=this.options.maxZoom;){const fe=this.getChildren(te);if(ie++,fe.length!==1)break;te=fe[0].properties.cluster_id}return ie}_appendLeaves(te,ie,fe,Se,Ee){const ze=this.getChildren(ie);for(const He of ze){const Le=He.properties;if(Le&&Le.cluster?Ee+Le.point_count<=Se?Ee+=Le.point_count:Ee=this._appendLeaves(te,Le.cluster_id,fe,Se,Ee):Ee<Se?Ee++:te.push(He),te.length===fe)break}return Ee}_createTree(te){const ie=new m.aI(te.length/this.stride|0,this.options.nodeSize,Float32Array);for(let fe=0;fe<te.length;fe+=this.stride)ie.add(te[fe],te[fe+1]);return ie.finish(),ie.data=te,ie}_addTileFeatures(te,ie,fe,Se,Ee,ze){for(const He of te){const Le=He*this.stride,ct=ie[Le+5]>1;let St,mt,Bt;if(ct)St=rt(ie,Le,this.clusterProps),mt=ie[Le],Bt=ie[Le+1];else{const jr=this.points[ie[Le+3]];St=jr.properties;const[qr,Ft]=jr.geometry.coordinates;mt=Pe(qr),Bt=Ve(Ft)}const Zt={type:1,geometry:[[Math.round(this.options.extent*(mt*Ee-fe)),Math.round(this.options.extent*(Bt*Ee-Se))]],tags:St};let Ue;Ue=ct||this.options.generateId?ie[Le+3]:this.points[ie[Le+3]].id,Ue!==void 0&&(Zt.id=Ue),ze.features.push(Zt)}}_limitZoom(te){return Math.max(this.options.minZoom,Math.min(Math.floor(+te),this.options.maxZoom+1))}_cluster(te,ie){const{radius:fe,extent:Se,reduce:Ee,minPoints:ze}=this.options,He=fe/(Se*Math.pow(2,ie)),Le=te.data,ct=[],St=this.stride;for(let mt=0;mt<Le.length;mt+=St){if(Le[mt+2]<=ie)continue;Le[mt+2]=ie;const Bt=Le[mt],Zt=Le[mt+1],Ue=te.within(Le[mt],Le[mt+1],He),jr=Le[mt+5];let qr=jr;for(const Ft of Ue){const Er=Ft*St;Le[Er+2]>ie&&(qr+=Le[Er+5])}if(qr>jr&&qr>=ze){let Ft,Er=Bt*jr,ei=Zt*jr,ui=-1;const hn=(mt/St<<5)+(ie+1)+this.points.length;for(const Zr of Ue){const Ar=Zr*St;if(Le[Ar+2]<=ie)continue;Le[Ar+2]=ie;const Mn=Le[Ar+5];Er+=Le[Ar]*Mn,ei+=Le[Ar+1]*Mn,Le[Ar+4]=hn,Ee&&(Ft||(Ft=this._map(Le,mt,!0),ui=this.clusterProps.length,this.clusterProps.push(Ft)),Ee(Ft,this._map(Le,Ar)))}Le[mt+4]=hn,ct.push(Er/qr,ei/qr,1/0,hn,-1,qr),Ee&&ct.push(ui)}else{for(let Ft=0;Ft<St;Ft++)ct.push(Le[mt+Ft]);if(qr>1)for(const Ft of Ue){const Er=Ft*St;if(!(Le[Er+2]<=ie)){Le[Er+2]=ie;for(let ei=0;ei<St;ei++)ct.push(Le[Er+ei])}}}}return ct}_getOriginId(te){return te-this.points.length>>5}_getOriginZoom(te){return(te-this.points.length)%32}_map(te,ie,fe){if(te[ie+5]>1){const ze=this.clusterProps[te[ie+6]];return fe?Object.assign({},ze):ze}const Se=this.points[te[ie+3]].properties,Ee=this.options.map(Se);return fe&&Ee===Se?Object.assign({},Ee):Ee}}function ut(ke,te,ie){return{type:"Feature",id:ke[te+3],properties:rt(ke,te,ie),geometry:{type:"Point",coordinates:[(fe=ke[te],360*(fe-.5)),Ge(ke[te+1])]}};var fe}function rt(ke,te,ie){const fe=ke[te+5],Se=fe>=1e4?`${Math.round(fe/1e3)}k`:fe>=1e3?Math.round(fe/100)/10+"k":fe,Ee=ke[te+6],ze=Ee===-1?{}:Object.assign({},ie[Ee]);return Object.assign(ze,{cluster:!0,cluster_id:ke[te+3],point_count:fe,point_count_abbreviated:Se})}function Pe(ke){return ke/360+.5}function Ve(ke){const te=Math.sin(ke*Math.PI/180),ie=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return ie<0?0:ie>1?1:ie}function Ge(ke){const te=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(te))/Math.PI-90}function ht(ke,te,ie,fe){let Se=fe;const Ee=te+(ie-te>>1);let ze,He=ie-te;const Le=ke[te],ct=ke[te+1],St=ke[ie],mt=ke[ie+1];for(let Bt=te+3;Bt<ie;Bt+=3){const Zt=xe(ke[Bt],ke[Bt+1],Le,ct,St,mt);if(Zt>Se)ze=Bt,Se=Zt;else if(Zt===Se){const Ue=Math.abs(Bt-Ee);Ue<He&&(ze=Bt,He=Ue)}}Se>fe&&(ze-te>3&&ht(ke,te,ze,fe),ke[ze+2]=Se,ie-ze>3&&ht(ke,ze,ie,fe))}function xe(ke,te,ie,fe,Se,Ee){let ze=Se-ie,He=Ee-fe;if(ze!==0||He!==0){const Le=((ke-ie)*ze+(te-fe)*He)/(ze*ze+He*He);Le>1?(ie=Se,fe=Ee):Le>0&&(ie+=ze*Le,fe+=He*Le)}return ze=ke-ie,He=te-fe,ze*ze+He*He}function Xe(ke,te,ie,fe){const Se={id:ke??null,type:te,geometry:ie,tags:fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(te==="Point"||te==="MultiPoint"||te==="LineString")ot(Se,ie);else if(te==="Polygon")ot(Se,ie[0]);else if(te==="MultiLineString")for(const Ee of ie)ot(Se,Ee);else if(te==="MultiPolygon")for(const Ee of ie)ot(Se,Ee[0]);return Se}function ot(ke,te){for(let ie=0;ie<te.length;ie+=3)ke.minX=Math.min(ke.minX,te[ie]),ke.minY=Math.min(ke.minY,te[ie+1]),ke.maxX=Math.max(ke.maxX,te[ie]),ke.maxY=Math.max(ke.maxY,te[ie+1])}function st(ke,te,ie,fe){if(!te.geometry)return;const Se=te.geometry.coordinates;if(Se&&Se.length===0)return;const Ee=te.geometry.type,ze=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2);let He=[],Le=te.id;if(ie.promoteId?Le=te.properties[ie.promoteId]:ie.generateId&&(Le=fe||0),Ee==="Point")Pt(Se,He);else if(Ee==="MultiPoint")for(const ct of Se)Pt(ct,He);else if(Ee==="LineString")Vt(Se,He,ze,!1);else if(Ee==="MultiLineString"){if(ie.lineMetrics){for(const ct of Se)He=[],Vt(ct,He,ze,!1),ke.push(Xe(Le,"LineString",He,te.properties));return}Nt(Se,He,ze,!1)}else if(Ee==="Polygon")Nt(Se,He,ze,!0);else{if(Ee!=="MultiPolygon"){if(Ee==="GeometryCollection"){for(const ct of te.geometry.geometries)st(ke,{id:Le,geometry:ct,properties:te.properties},ie,fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const ct of Se){const St=[];Nt(ct,St,ze,!0),He.push(St)}}ke.push(Xe(Le,Ee,He,te.properties))}function Pt(ke,te){te.push(yr(ke[0]),ar(ke[1]),0)}function Vt(ke,te,ie,fe){let Se,Ee,ze=0;for(let Le=0;Le<ke.length;Le++){const ct=yr(ke[Le][0]),St=ar(ke[Le][1]);te.push(ct,St,0),Le>0&&(ze+=fe?(Se*St-ct*Ee)/2:Math.sqrt(Math.pow(ct-Se,2)+Math.pow(St-Ee,2))),Se=ct,Ee=St}const He=te.length-3;te[2]=1,ht(te,0,He,ie),te[He+2]=1,te.size=Math.abs(ze),te.start=0,te.end=te.size}function Nt(ke,te,ie,fe){for(let Se=0;Se<ke.length;Se++){const Ee=[];Vt(ke[Se],Ee,ie,fe),te.push(Ee)}}function yr(ke){return ke/360+.5}function ar(ke){const te=Math.sin(ke*Math.PI/180),ie=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return ie<0?0:ie>1?1:ie}function Ot(ke,te,ie,fe,Se,Ee,ze,He){if(fe/=te,Ee>=(ie/=te)&&ze<fe)return ke;if(ze<ie||Ee>=fe)return null;const Le=[];for(const ct of ke){const St=ct.geometry;let mt=ct.type;const Bt=Se===0?ct.minX:ct.minY,Zt=Se===0?ct.maxX:ct.maxY;if(Bt>=ie&&Zt<fe){Le.push(ct);continue}if(Zt<ie||Bt>=fe)continue;let Ue=[];if(mt==="Point"||mt==="MultiPoint")er(St,Ue,ie,fe,Se);else if(mt==="LineString")or(St,Ue,ie,fe,Se,!1,He.lineMetrics);else if(mt==="MultiLineString")fr(St,Ue,ie,fe,Se,!1);else if(mt==="Polygon")fr(St,Ue,ie,fe,Se,!0);else if(mt==="MultiPolygon")for(const jr of St){const qr=[];fr(jr,qr,ie,fe,Se,!0),qr.length&&Ue.push(qr)}if(Ue.length){if(He.lineMetrics&&mt==="LineString"){for(const jr of Ue)Le.push(Xe(ct.id,mt,jr,ct.tags));continue}mt!=="LineString"&&mt!=="MultiLineString"||(Ue.length===1?(mt="LineString",Ue=Ue[0]):mt="MultiLineString"),mt!=="Point"&&mt!=="MultiPoint"||(mt=Ue.length===3?"Point":"MultiPoint"),Le.push(Xe(ct.id,mt,Ue,ct.tags))}}return Le.length?Le:null}function er(ke,te,ie,fe,Se){for(let Ee=0;Ee<ke.length;Ee+=3){const ze=ke[Ee+Se];ze>=ie&&ze<=fe&&Qt(te,ke[Ee],ke[Ee+1],ke[Ee+2])}}function or(ke,te,ie,fe,Se,Ee,ze){let He=_t(ke);const Le=Se===0?Yr:tn;let ct,St,mt=ke.start;for(let qr=0;qr<ke.length-3;qr+=3){const Ft=ke[qr],Er=ke[qr+1],ei=ke[qr+2],ui=ke[qr+3],hn=ke[qr+4],Zr=Se===0?Ft:Er,Ar=Se===0?ui:hn;let Mn=!1;ze&&(ct=Math.sqrt(Math.pow(Ft-ui,2)+Math.pow(Er-hn,2))),Zr<ie?Ar>ie&&(St=Le(He,Ft,Er,ui,hn,ie),ze&&(He.start=mt+ct*St)):Zr>fe?Ar<fe&&(St=Le(He,Ft,Er,ui,hn,fe),ze&&(He.start=mt+ct*St)):Qt(He,Ft,Er,ei),Ar<ie&&Zr>=ie&&(St=Le(He,Ft,Er,ui,hn,ie),Mn=!0),Ar>fe&&Zr<=fe&&(St=Le(He,Ft,Er,ui,hn,fe),Mn=!0),!Ee&&Mn&&(ze&&(He.end=mt+ct*St),te.push(He),He=_t(ke)),ze&&(mt+=ct)}let Bt=ke.length-3;const Zt=ke[Bt],Ue=ke[Bt+1],jr=Se===0?Zt:Ue;jr>=ie&&jr<=fe&&Qt(He,Zt,Ue,ke[Bt+2]),Bt=He.length-3,Ee&&Bt>=3&&(He[Bt]!==He[0]||He[Bt+1]!==He[1])&&Qt(He,He[0],He[1],He[2]),He.length&&te.push(He)}function _t(ke){const te=[];return te.size=ke.size,te.start=ke.start,te.end=ke.end,te}function fr(ke,te,ie,fe,Se,Ee){for(const ze of ke)or(ze,te,ie,fe,Se,Ee,!1)}function Qt(ke,te,ie,fe){ke.push(te,ie,fe)}function Yr(ke,te,ie,fe,Se,Ee){const ze=(Ee-te)/(fe-te);return Qt(ke,Ee,ie+(Se-ie)*ze,1),ze}function tn(ke,te,ie,fe,Se,Ee){const ze=(Ee-ie)/(Se-ie);return Qt(ke,te+(fe-te)*ze,Ee,1),ze}function Kr(ke,te){const ie=[];for(let fe=0;fe<ke.length;fe++){const Se=ke[fe],Ee=Se.type;let ze;if(Ee==="Point"||Ee==="MultiPoint"||Ee==="LineString")ze=ki(Se.geometry,te);else if(Ee==="MultiLineString"||Ee==="Polygon"){ze=[];for(const He of Se.geometry)ze.push(ki(He,te))}else if(Ee==="MultiPolygon"){ze=[];for(const He of Se.geometry){const Le=[];for(const ct of He)Le.push(ki(ct,te));ze.push(Le)}}ie.push(Xe(Se.id,Ee,ze,Se.tags))}return ie}function ki(ke,te){const ie=[];ie.size=ke.size,ke.start!==void 0&&(ie.start=ke.start,ie.end=ke.end);for(let fe=0;fe<ke.length;fe+=3)ie.push(ke[fe]+te,ke[fe+1],ke[fe+2]);return ie}function Wn(ke,te){if(ke.transformed)return ke;const ie=1<<ke.z,fe=ke.x,Se=ke.y;for(const Ee of ke.features){const ze=Ee.geometry,He=Ee.type;if(Ee.geometry=[],He===1)for(let Le=0;Le<ze.length;Le+=2)Ee.geometry.push(Ba(ze[Le],ze[Le+1],te,ie,fe,Se));else for(let Le=0;Le<ze.length;Le++){const ct=[];for(let St=0;St<ze[Le].length;St+=2)ct.push(Ba(ze[Le][St],ze[Le][St+1],te,ie,fe,Se));Ee.geometry.push(ct)}}return ke.transformed=!0,ke}function Ba(ke,te,ie,fe,Se,Ee){return[Math.round(ie*(ke*fe-Se)),Math.round(ie*(te*fe-Ee))]}function Ii(ke,te,ie,fe,Se){const Ee=te===Se.maxZoom?0:Se.tolerance/((1<<te)*Se.extent),ze={features:[],numPoints:0,numSimplified:0,numFeatures:ke.length,source:null,x:ie,y:fe,z:te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const He of ke)Di(ze,He,Ee,Se);return ze}function Di(ke,te,ie,fe){const Se=te.geometry,Ee=te.type,ze=[];if(ke.minX=Math.min(ke.minX,te.minX),ke.minY=Math.min(ke.minY,te.minY),ke.maxX=Math.max(ke.maxX,te.maxX),ke.maxY=Math.max(ke.maxY,te.maxY),Ee==="Point"||Ee==="MultiPoint")for(let He=0;He<Se.length;He+=3)ze.push(Se[He],Se[He+1]),ke.numPoints++,ke.numSimplified++;else if(Ee==="LineString")Yi(ze,Se,ke,ie,!1,!1);else if(Ee==="MultiLineString"||Ee==="Polygon")for(let He=0;He<Se.length;He++)Yi(ze,Se[He],ke,ie,Ee==="Polygon",He===0);else if(Ee==="MultiPolygon")for(let He=0;He<Se.length;He++){const Le=Se[He];for(let ct=0;ct<Le.length;ct++)Yi(ze,Le[ct],ke,ie,!0,ct===0)}if(ze.length){let He=te.tags||null;if(Ee==="LineString"&&fe.lineMetrics){He={};for(const ct in te.tags)He[ct]=te.tags[ct];He.mapbox_clip_start=Se.start/Se.size,He.mapbox_clip_end=Se.end/Se.size}const Le={geometry:ze,type:Ee==="Polygon"||Ee==="MultiPolygon"?3:Ee==="LineString"||Ee==="MultiLineString"?2:1,tags:He};te.id!==null&&(Le.id=te.id),ke.features.push(Le)}}function Yi(ke,te,ie,fe,Se,Ee){const ze=fe*fe;if(fe>0&&te.size<(Se?ze:fe))return void(ie.numPoints+=te.length/3);const He=[];for(let Le=0;Le<te.length;Le+=3)(fe===0||te[Le+2]>ze)&&(ie.numSimplified++,He.push(te[Le],te[Le+1])),ie.numPoints++;Se&&function(Le,ct){let St=0;for(let mt=0,Bt=Le.length,Zt=Bt-2;mt<Bt;Zt=mt,mt+=2)St+=(Le[mt]-Le[Zt])*(Le[mt+1]+Le[Zt+1]);if(St>0===ct)for(let mt=0,Bt=Le.length;mt<Bt/2;mt+=2){const Zt=Le[mt],Ue=Le[mt+1];Le[mt]=Le[Bt-2-mt],Le[mt+1]=Le[Bt-1-mt],Le[Bt-2-mt]=Zt,Le[Bt-1-mt]=Ue}}(He,Ee),ke.push(He)}const Mo={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ts{constructor(te,ie){const fe=(ie=this.options=function(Ee,ze){for(const He in ze)Ee[He]=ze[He];return Ee}(Object.create(Mo),ie)).debug;if(fe&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");let Se=function(Ee,ze){const He=[];if(Ee.type==="FeatureCollection")for(let Le=0;Le<Ee.features.length;Le++)st(He,Ee.features[Le],ze,Le);else st(He,Ee.type==="Feature"?Ee:{geometry:Ee},ze);return He}(te,ie);this.tiles={},this.tileCoords=[],fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Se=function(Ee,ze){const He=ze.buffer/ze.extent;let Le=Ee;const ct=Ot(Ee,1,-1-He,He,0,-1,2,ze),St=Ot(Ee,1,1-He,2+He,0,-1,2,ze);return(ct||St)&&(Le=Ot(Ee,1,-He,1+He,0,-1,2,ze)||[],ct&&(Le=Kr(ct,1).concat(Le)),St&&(Le=Le.concat(Kr(St,-1)))),Le}(Se,ie),Se.length&&this.splitTile(Se,0,0,0),fe&&(Se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(te,ie,fe,Se,Ee,ze,He){const Le=[te,ie,fe,Se],ct=this.options,St=ct.debug;for(;Le.length;){Se=Le.pop(),fe=Le.pop(),ie=Le.pop(),te=Le.pop();const mt=1<<ie,Bt=zi(ie,fe,Se);let Zt=this.tiles[Bt];if(!Zt&&(St>1&&console.time("creation"),Zt=this.tiles[Bt]=Ii(te,ie,fe,Se,ct),this.tileCoords.push({z:ie,x:fe,y:Se}),St)){St>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,fe,Se,Zt.numFeatures,Zt.numPoints,Zt.numSimplified),console.timeEnd("creation"));const Mn=`z${ie}`;this.stats[Mn]=(this.stats[Mn]||0)+1,this.total++}if(Zt.source=te,Ee==null){if(ie===ct.indexMaxZoom||Zt.numPoints<=ct.indexMaxPoints)continue}else{if(ie===ct.maxZoom||ie===Ee)continue;if(Ee!=null){const Mn=Ee-ie;if(fe!==ze>>Mn||Se!==He>>Mn)continue}}if(Zt.source=null,te.length===0)continue;St>1&&console.time("clipping");const Ue=.5*ct.buffer/ct.extent,jr=.5-Ue,qr=.5+Ue,Ft=1+Ue;let Er=null,ei=null,ui=null,hn=null,Zr=Ot(te,mt,fe-Ue,fe+qr,0,Zt.minX,Zt.maxX,ct),Ar=Ot(te,mt,fe+jr,fe+Ft,0,Zt.minX,Zt.maxX,ct);te=null,Zr&&(Er=Ot(Zr,mt,Se-Ue,Se+qr,1,Zt.minY,Zt.maxY,ct),ei=Ot(Zr,mt,Se+jr,Se+Ft,1,Zt.minY,Zt.maxY,ct),Zr=null),Ar&&(ui=Ot(Ar,mt,Se-Ue,Se+qr,1,Zt.minY,Zt.maxY,ct),hn=Ot(Ar,mt,Se+jr,Se+Ft,1,Zt.minY,Zt.maxY,ct),Ar=null),St>1&&console.timeEnd("clipping"),Le.push(Er||[],ie+1,2*fe,2*Se),Le.push(ei||[],ie+1,2*fe,2*Se+1),Le.push(ui||[],ie+1,2*fe+1,2*Se),Le.push(hn||[],ie+1,2*fe+1,2*Se+1)}}getTile(te,ie,fe){te=+te,ie=+ie,fe=+fe;const Se=this.options,{extent:Ee,debug:ze}=Se;if(te<0||te>24)return null;const He=1<<te,Le=zi(te,ie=ie+He&He-1,fe);if(this.tiles[Le])return Wn(this.tiles[Le],Ee);ze>1&&console.log("drilling down to z%d-%d-%d",te,ie,fe);let ct,St=te,mt=ie,Bt=fe;for(;!ct&&St>0;)St--,mt>>=1,Bt>>=1,ct=this.tiles[zi(St,mt,Bt)];return ct&&ct.source?(ze>1&&(console.log("found parent tile z%d-%d-%d",St,mt,Bt),console.time("drilling down")),this.splitTile(ct.source,St,mt,Bt,te,ie,fe),ze>1&&console.timeEnd("drilling down"),this.tiles[Le]?Wn(this.tiles[Le],Ee):null):null}}function zi(ke,te,ie){return 32*((1<<ke)*ie+te)+ke}class Jn extends O{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(te,ie){return m._(this,void 0,void 0,function*(){const fe=te.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Se=this._geoJSONIndex.getTile(fe.z,fe.x,fe.y);if(!Se)return null;const Ee=new se(Se.features,{version:2,extent:m.$});let ze=function(He){const Le=new m.cM;return function(ct,St){for(const mt in ct.layers)St.writeMessage(3,ne,ct.layers[mt])}(He,Le),Le.finish()}(Ee);return ze.byteOffset===0&&ze.byteLength===ze.buffer.byteLength||(ze=new Uint8Array(ze)),{vectorTile:Ee,rawData:ze.buffer}})}loadData(te){return m._(this,void 0,void 0,function*(){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.abort();const fe=!!(te&&te.request&&te.request.collectResourceTiming)&&new m.cN(te.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(te,this._pendingRequest);const Se=yield this._pendingData;this._geoJSONIndex=te.cluster?new tt(function({superclusterOptions:ze,clusterProperties:He}){if(!He||!ze)return ze;const Le={},ct={},St={accumulated:null,zoom:0},mt={properties:null},Bt=Object.keys(He);for(const Zt of Bt){const[Ue,jr]=He[Zt],qr=m.cT(jr),Ft=m.cT(typeof Ue=="string"?[Ue,["accumulated"],["get",Zt]]:Ue);Le[Zt]=qr.value,ct[Zt]=Ft.value}return ze.map=Zt=>{mt.properties=Zt;const Ue={};for(const jr of Bt)Ue[jr]=Le[jr].evaluate(St,mt);return Ue},ze.reduce=(Zt,Ue)=>{mt.properties=Ue;for(const jr of Bt)St.accumulated=Zt[jr],Zt[jr]=ct[jr].evaluate(St,mt)},ze}(te)).load(Se.features):function(ze,He){return new Ts(ze,He)}(Se,te.geojsonVtOptions),this.loaded={};const Ee={data:Se};if(fe){const ze=fe.finish();ze&&(Ee.resourceTiming={},Ee.resourceTiming[te.source]=JSON.parse(JSON.stringify(ze)))}return Ee}catch(Se){if(delete this._pendingRequest,m.cy(Se))return{abandoned:!0};throw Se}})}getData(){return m._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(te){const ie=this.loaded;return ie&&ie[te.uid]?super.reloadTile(te):this.loadTile(te)}loadAndProcessGeoJSON(te,ie){return m._(this,void 0,void 0,function*(){let fe=yield this.loadGeoJSON(te,ie);if(delete this._pendingRequest,typeof fe!="object")throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`);if(U(fe,!0),te.filter){const Se=m.cT(te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Se.result==="error")throw new Error(Se.value.map(ze=>`${ze.key}: ${ze.message}`).join(", "));fe={type:"FeatureCollection",features:fe.features.filter(ze=>Se.value.evaluate({zoom:0},ze))}}return fe})}loadGeoJSON(te,ie){return m._(this,void 0,void 0,function*(){const{promoteId:fe}=te;if(te.request){const Se=yield m.j(te.request,ie);return this._dataUpdateable=m.cV(Se.data,fe)?m.cU(Se.data,fe):void 0,Se.data}if(typeof te.data=="string")try{const Se=JSON.parse(te.data);return this._dataUpdateable=m.cV(Se,fe)?m.cU(Se,fe):void 0,Se}catch{throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`)}if(!te.dataDiff)throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${te.source}`);return m.cW(this._dataUpdateable,te.dataDiff,fe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(te){return m._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(te){return this._geoJSONIndex.getClusterExpansionZoom(te.clusterId)}getClusterChildren(te){return this._geoJSONIndex.getChildren(te.clusterId)}getClusterLeaves(te){return this._geoJSONIndex.getLeaves(te.clusterId,te.limit,te.offset)}}class ci{constructor(te){this.self=te,this.actor=new m.J(te),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ie,fe)=>{if(this.externalWorkerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.externalWorkerSourceTypes[ie]=fe},this.self.addProtocol=m.cA,this.self.removeProtocol=m.cB,this.self.registerRTLTextPlugin=ie=>{m.cX.setMethods(ie)},this.actor.registerMessageHandler("LDT",(ie,fe)=>this._getDEMWorkerSource(ie,fe.source).loadTile(fe)),this.actor.registerMessageHandler("RDT",(ie,fe)=>m._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ie,fe.source).removeTile(fe)})),this.actor.registerMessageHandler("GCEZ",(ie,fe)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,fe.type,fe.source).getClusterExpansionZoom(fe)})),this.actor.registerMessageHandler("GCC",(ie,fe)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,fe.type,fe.source).getClusterChildren(fe)})),this.actor.registerMessageHandler("GCL",(ie,fe)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,fe.type,fe.source).getClusterLeaves(fe)})),this.actor.registerMessageHandler("LD",(ie,fe)=>this._getWorkerSource(ie,fe.type,fe.source).loadData(fe)),this.actor.registerMessageHandler("GD",(ie,fe)=>this._getWorkerSource(ie,fe.type,fe.source).getData()),this.actor.registerMessageHandler("LT",(ie,fe)=>this._getWorkerSource(ie,fe.type,fe.source).loadTile(fe)),this.actor.registerMessageHandler("RT",(ie,fe)=>this._getWorkerSource(ie,fe.type,fe.source).reloadTile(fe)),this.actor.registerMessageHandler("AT",(ie,fe)=>this._getWorkerSource(ie,fe.type,fe.source).abortTile(fe)),this.actor.registerMessageHandler("RMT",(ie,fe)=>this._getWorkerSource(ie,fe.type,fe.source).removeTile(fe)),this.actor.registerMessageHandler("RS",(ie,fe)=>m._(this,void 0,void 0,function*(){if(!this.workerSources[ie]||!this.workerSources[ie][fe.type]||!this.workerSources[ie][fe.type][fe.source])return;const Se=this.workerSources[ie][fe.type][fe.source];delete this.workerSources[ie][fe.type][fe.source],Se.removeSource!==void 0&&Se.removeSource(fe)})),this.actor.registerMessageHandler("RM",ie=>m._(this,void 0,void 0,function*(){delete this.layerIndexes[ie],delete this.availableImages[ie],delete this.workerSources[ie],delete this.demWorkerSources[ie],this.globalStates.delete(ie)})),this.actor.registerMessageHandler("SR",(ie,fe)=>m._(this,void 0,void 0,function*(){this.referrer=fe})),this.actor.registerMessageHandler("SRPS",(ie,fe)=>this._syncRTLPluginState(ie,fe)),this.actor.registerMessageHandler("IS",(ie,fe)=>m._(this,void 0,void 0,function*(){this.self.importScripts(fe)})),this.actor.registerMessageHandler("SI",(ie,fe)=>this._setImages(ie,fe)),this.actor.registerMessageHandler("UL",(ie,fe)=>m._(this,void 0,void 0,function*(){this._getLayerIndex(ie).update(fe.layers,fe.removedIds,this._getGlobalState(ie))})),this.actor.registerMessageHandler("UGS",(ie,fe)=>m._(this,void 0,void 0,function*(){const Se=this._getGlobalState(ie);for(const Ee in fe)Se[Ee]=fe[Ee]})),this.actor.registerMessageHandler("SL",(ie,fe)=>m._(this,void 0,void 0,function*(){this._getLayerIndex(ie).replace(fe,this._getGlobalState(ie))}))}_getGlobalState(te){let ie=this.globalStates.get(te);return ie||(ie={},this.globalStates.set(te,ie)),ie}_setImages(te,ie){return m._(this,void 0,void 0,function*(){this.availableImages[te]=ie;for(const fe in this.workerSources[te]){const Se=this.workerSources[te][fe];for(const Ee in Se)Se[Ee].availableImages=ie}})}_syncRTLPluginState(te,ie){return m._(this,void 0,void 0,function*(){return yield m.cX.syncState(ie,this.self.importScripts)})}_getAvailableImages(te){let ie=this.availableImages[te];return ie||(ie=[]),ie}_getLayerIndex(te){let ie=this.layerIndexes[te];return ie||(ie=this.layerIndexes[te]=new l),ie}_getWorkerSource(te,ie,fe){if(this.workerSources[te]||(this.workerSources[te]={}),this.workerSources[te][ie]||(this.workerSources[te][ie]={}),!this.workerSources[te][ie][fe]){const Se={sendAsync:(Ee,ze)=>(Ee.targetMapId=te,this.actor.sendAsync(Ee,ze))};switch(ie){case"vector":this.workerSources[te][ie][fe]=new O(Se,this._getLayerIndex(te),this._getAvailableImages(te));break;case"geojson":this.workerSources[te][ie][fe]=new Jn(Se,this._getLayerIndex(te),this._getAvailableImages(te));break;default:this.workerSources[te][ie][fe]=new this.externalWorkerSourceTypes[ie](Se,this._getLayerIndex(te),this._getAvailableImages(te))}}return this.workerSources[te][ie][fe]}_getDEMWorkerSource(te,ie){return this.demWorkerSources[te]||(this.demWorkerSources[te]={}),this.demWorkerSources[te][ie]||(this.demWorkerSources[te][ie]=new B),this.demWorkerSources[te][ie]}}return m.i(self)&&(self.worker=new ci(self)),ci}),f("index",["exports","./shared"],function(m,l){var P="5.9.0";function C(){var x=new l.A(4);return l.A!=Float32Array&&(x[1]=0,x[2]=0),x[0]=1,x[3]=1,x}let z,O;const B={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(x,r,u){const p=requestAnimationFrame(w=>{_(),r(w)}),{unsubscribe:_}=l.s(x.signal,"abort",()=>{_(),cancelAnimationFrame(p),u(l.c())},!1)},frameAsync(x){return new Promise((r,u)=>{this.frame(x,r,u)})},getImageData(x,r=0){return this.getImageCanvasContext(x).getImageData(-r,-r,x.width+2*r,x.height+2*r)},getImageCanvasContext(x){const r=window.document.createElement("canvas"),u=r.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return r.width=x.width,r.height=x.height,u.drawImage(x,0,0,x.width,x.height),u},resolveURL:x=>(z||(z=document.createElement("a")),z.href=x,z.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(O==null&&(O=matchMedia("(prefers-reduced-motion: reduce)")),O.matches)}};class F{static testProp(r){if(!F.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in F.docStyle)return r[u];return r[0]}static create(r,u,p){const _=window.document.createElement(r);return u!==void 0&&(_.className=u),p&&p.appendChild(_),_}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){F.docStyle&&F.selectProp&&(F.userSelect=F.docStyle[F.selectProp],F.docStyle[F.selectProp]="none")}static enableDrag(){F.docStyle&&F.selectProp&&(F.docStyle[F.selectProp]=F.userSelect)}static setTransform(r,u){r.style[F.transformProp]=u}static addEventListener(r,u,p,_={}){r.addEventListener(u,p,"passive"in _?_:_.capture)}static removeEventListener(r,u,p,_={}){r.removeEventListener(u,p,"passive"in _?_:_.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",F.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",F.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",F.suppressClickInternal,!0)},0)}static getScale(r){const u=r.getBoundingClientRect();return{x:u.width/r.offsetWidth||1,y:u.height/r.offsetHeight||1,boundingClientRect:u}}static getPoint(r,u,p){const _=u.boundingClientRect;return new l.P((p.clientX-_.left)/u.x-r.clientLeft,(p.clientY-_.top)/u.y-r.clientTop)}static mousePos(r,u){const p=F.getScale(r);return F.getPoint(r,p,u)}static touchPos(r,u){const p=[],_=F.getScale(r);for(let w=0;w<u.length;w++)p.push(F.getPoint(r,_,u[w]));return p}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const u=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),p=u.querySelectorAll("script");for(const _ of p)_.remove();return F.clean(u),u.innerHTML}static isPossiblyDangerous(r,u){const p=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!p.includes("javascript:")&&!p.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const u=r.children;for(const p of u)F.removeAttributes(p),F.clean(p)}static removeAttributes(r){for(const{name:u,value:p}of r.attributes)F.isPossiblyDangerous(u,p)&&r.removeAttribute(u)}}F.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,F.selectProp=F.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),F.transformProp=F.testProp(["transform","WebkitTransform"]);const X={supported:!1,testSupport:function(x){!re&&U&&(se?ne(x):Z=x)}};let Z,U,re=!1,se=!1;function ne(x){const r=x.createTexture();x.bindTexture(x.TEXTURE_2D,r);try{if(x.texImage2D(x.TEXTURE_2D,0,x.RGBA,x.RGBA,x.UNSIGNED_BYTE,U),x.isContextLost())return;X.supported=!0}catch{}x.deleteTexture(r),re=!0}var ue;typeof document<"u"&&(U=document.createElement("img"),U.onload=()=>{Z&&ne(Z),Z=null,se=!0},U.onerror=()=>{re=!0,Z=null},U.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(x){let r,u,p,_;x.resetRequestQueue=()=>{r=[],u=0,p=0,_={}},x.addThrottleControl=D=>{const $=p++;return _[$]=D,$},x.removeThrottleControl=D=>{delete _[D],M()},x.getImage=(D,$,q=!0)=>new Promise((H,G)=>{X.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*"),l.e(D,{type:"image"}),r.push({abortController:$,requestParameters:D,supportImageRefresh:q,state:"queued",onError:Q=>{G(Q)},onSuccess:Q=>{H(Q)}}),M()});const w=D=>l._(this,void 0,void 0,function*(){D.state="running";const{requestParameters:$,supportImageRefresh:q,onError:H,onSuccess:G,abortController:Q}=D,oe=q===!1&&!l.i(self)&&!l.g($.url)&&(!$.headers||Object.keys($.headers).reduce((ge,_e)=>ge&&_e==="accept",!0));u++;const me=oe?I($,Q):l.m($,Q);try{const ge=yield me;delete D.abortController,D.state="completed",ge.data instanceof HTMLImageElement||l.b(ge.data)?G(ge):ge.data&&G({data:yield(pe=ge.data,typeof createImageBitmap=="function"?l.f(pe):l.h(pe)),cacheControl:ge.cacheControl,expires:ge.expires})}catch(ge){delete D.abortController,H(ge)}finally{u--,M()}var pe}),M=()=>{const D=(()=>{for(const $ of Object.keys(_))if(_[$]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let $=u;$<D&&r.length>0;$++){const q=r.shift();q.abortController.signal.aborted?$--:w(q)}},I=(D,$)=>new Promise((q,H)=>{const G=new Image,Q=D.url,oe=D.credentials;oe&&oe==="include"?G.crossOrigin="use-credentials":(oe&&oe==="same-origin"||!l.d(Q))&&(G.crossOrigin="anonymous"),$.signal.addEventListener("abort",()=>{G.src="",H(l.c())}),G.fetchPriority="high",G.onload=()=>{G.onerror=G.onload=null,q({data:G})},G.onerror=()=>{G.onerror=G.onload=null,$.signal.aborted||H(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},G.src=Q})}(ue||(ue={})),ue.resetRequestQueue();class J{constructor(r){this._transformRequestFn=r??null}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function ae(x){const r=[];if(typeof x=="string")r.push({id:"default",url:x});else if(x&&x.length>0){const u=[];for(const{id:p,url:_}of x){const w=`${p}${_}`;u.indexOf(w)===-1&&(u.push(w),r.push({id:p,url:_}))}}return r}function he(x,r,u){try{const p=new URL(x);return p.pathname+=`${r}${u}`,p.toString()}catch{throw new Error(`Invalid sprite URL "${x}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ve(x){const{userImage:r}=x;return!!(r&&r.render&&r.render())&&(x.data.replace(new Uint8Array(r.data.buffer)),!0)}class Ie extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,promiseResolve:p}of this.requestors)p(this._getImagesForIds(u));this.requestors=[]}}getImage(r){const u=this.images[r];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new l.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let p=!0;const _=u.data||u.spriteData;return this._validateStretch(u.stretchX,_&&_.width)||(this.fire(new l.k(new Error(`Image "${r}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,_&&_.height)||(this.fire(new l.k(new Error(`Image "${r}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new l.k(new Error(`Image "${r}" has invalid "content" value`))),p=!1),p}_validateStretch(r,u){if(!r)return!0;let p=0;for(const _ of r){if(_[0]<p||_[1]<_[0]||u<_[1])return!1;p=_[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;const p=u.spriteData,_=p&&p.width||u.data.width,w=p&&p.height||u.data.height;return!(r[0]<0||_<r[0]||r[1]<0||w<r[1]||r[2]<0||_<r[2]||r[3]<0||w<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,p=!0){const _=this.getImage(r);if(p&&(_.data.width!==u.data.width||_.data.height!==u.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=_.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((u,p)=>{let _=!0;if(!this.isLoaded())for(const w of r)this.images[w]||(_=!1);this.isLoaded()||_?u(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:u})})}_getImagesForIds(r){const u={};for(const p of r){let _=this.getImage(p);_||(this.fire(new l.l("styleimagemissing",{id:p})),_=this.getImage(p)),_?u[p]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:l.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],p=this.getImage(r);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const _={w:p.data.width+2,h:p.data.height+2,x:0,y:0},w=new l.I(_,p);this.patterns[r]={bin:_,position:w}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.T(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const w in this.patterns)r.push(this.patterns[w].bin);const{w:u,h:p}=l.p(r),_=this.atlasImage;_.resize({width:u||1,height:p||1});for(const w in this.patterns){const{bin:M}=this.patterns[w],I=M.x+1,D=M.y+1,$=this.getImage(w).data,q=$.width,H=$.height;l.R.copy($,_,{x:0,y:0},{x:I,y:D},{width:q,height:H}),l.R.copy($,_,{x:0,y:H-1},{x:I,y:D-1},{width:q,height:1}),l.R.copy($,_,{x:0,y:0},{x:I,y:D+H},{width:q,height:1}),l.R.copy($,_,{x:q-1,y:0},{x:I-1,y:D},{width:1,height:H}),l.R.copy($,_,{x:0,y:0},{x:I+q,y:D},{width:1,height:H})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||l.w(`Image with ID: "${u}" was not found`),ve(p)&&this.updateImage(u,p)}}}const at=1e20;function De(x,r,u,p,_,w,M,I,D){for(let $=r;$<r+p;$++)Fe(x,u*w+$,w,_,M,I,D);for(let $=u;$<u+_;$++)Fe(x,$*w+r,1,p,M,I,D)}function Fe(x,r,u,p,_,w,M){w[0]=0,M[0]=-1e20,M[1]=at,_[0]=x[r];for(let I=1,D=0,$=0;I<p;I++){_[I]=x[r+I*u];const q=I*I;do{const H=w[D];$=(_[I]-_[H]+q-H*H)/(I-H)/2}while($<=M[D]&&--D>-1);D++,w[D]=I,M[D]=$,M[D+1]=at}for(let I=0,D=0;I<p;I++){for(;M[D+1]<I;)D++;const $=w[D],q=I-$;x[r+I*u]=_[$]+q*q}}class tt{constructor(r,u,p){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={},this.lang=p}setURL(r){this.url=r}getGlyphs(r){return l._(this,void 0,void 0,function*(){const u=[];for(const w in r)for(const M of r[w])u.push(this._getAndCacheGlyphsPromise(w,M));const p=yield Promise.all(u),_={};for(const{stack:w,id:M,glyph:I}of p)_[w]||(_[w]={}),_[w][M]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return _})}_getAndCacheGlyphsPromise(r,u){return l._(this,void 0,void 0,function*(){let p=this.entries[r];p||(p=this.entries[r]={glyphs:{},requests:{},ranges:{}});let _=p.glyphs[u];if(_!==void 0)return{stack:r,id:u,glyph:_};if(_=this._tinySDF(p,r,u),_)return p.glyphs[u]=_,{stack:r,id:u,glyph:_};const w=Math.floor(u/256);if(256*w>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[w])return{stack:r,id:u,glyph:_};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[w]){const I=tt.loadGlyphRange(r,w,this.url,this.requestManager);p.requests[w]=I}const M=yield p.requests[w];for(const I in M)this._doesCharSupportLocalGlyph(+I)||(p.glyphs[+I]=M[+I]);return p.ranges[w]=!0,{stack:r,id:u,glyph:M[u]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||l.u["CJK Unified Ideographs"](r)||l.u["Hangul Syllables"](r)||l.u.Hiragana(r)||l.u.Katakana(r)||l.u["CJK Symbols and Punctuation"](r)||l.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,u,p){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(p))return;let w=r.tinySDF;if(!w){let I="400";/bold/i.test(u)?I="900":/medium/i.test(u)?I="500":/light/i.test(u)&&(I="200"),w=r.tinySDF=new tt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:_,fontWeight:I})}const M=w.draw(String.fromCharCode(p));return{id:p,bitmap:new l.q({width:M.width||60,height:M.height||60},M.data),metrics:{width:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:M.glyphAdvance/2||24,isDoubleResolution:!0}}}}tt.loadGlyphRange=function(x,r,u,p){return l._(this,void 0,void 0,function*(){const _=256*r,w=_+255,M=p.transformRequest(u.replace("{fontstack}",x).replace("{range}",`${_}-${w}`),"Glyphs"),I=yield l.n(M,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${r}, ${_}-${w}`);const D={};for(const $ of l.o(I.data))D[$.id]=$;return D})},tt.TinySDF=class{constructor({fontSize:x=24,buffer:r=3,radius:u=8,cutoff:p=.25,fontFamily:_="sans-serif",fontWeight:w="normal",fontStyle:M="normal",lang:I=null}={}){this.buffer=r,this.cutoff=p,this.radius=u,this.lang=I;const D=this.size=x+4*r,$=this._createCanvas(D),q=this.ctx=$.getContext("2d",{willReadFrequently:!0});q.font=`${M} ${w} ${x}px ${_}`,q.textBaseline="alphabetic",q.textAlign="left",q.fillStyle="black",this.gridOuter=new Float64Array(D*D),this.gridInner=new Float64Array(D*D),this.f=new Float64Array(D),this.z=new Float64Array(D+1),this.v=new Uint16Array(D)}_createCanvas(x){const r=document.createElement("canvas");return r.width=r.height=x,r}draw(x){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:_,actualBoundingBoxRight:w}=this.ctx.measureText(x),M=Math.ceil(u),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-_))),D=Math.min(this.size-this.buffer,M+Math.ceil(p)),$=I+2*this.buffer,q=D+2*this.buffer,H=Math.max($*q,0),G=new Uint8ClampedArray(H),Q={data:G,width:$,height:q,glyphWidth:I,glyphHeight:D,glyphTop:M,glyphLeft:0,glyphAdvance:r};if(I===0||D===0)return Q;const{ctx:oe,buffer:me,gridInner:pe,gridOuter:ge}=this;this.lang&&(oe.lang=this.lang),oe.clearRect(me,me,I,D),oe.fillText(x,me,me+M);const _e=oe.getImageData(me,me,I,D);ge.fill(at,0,H),pe.fill(0,0,H);for(let Te=0;Te<D;Te++)for(let be=0;be<I;be++){const Ce=_e.data[4*(Te*I+be)+3]/255;if(Ce===0)continue;const Oe=(Te+me)*$+be+me;if(Ce===1)ge[Oe]=0,pe[Oe]=at;else{const we=.5-Ce;ge[Oe]=we>0?we*we:0,pe[Oe]=we<0?we*we:0}}De(ge,0,0,$,q,$,this.f,this.v,this.z),De(pe,me,me,I,D,$,this.f,this.v,this.z);for(let Te=0;Te<H;Te++){const be=Math.sqrt(ge[Te])-Math.sqrt(pe[Te]);G[Te]=Math.round(255-255*(be/this.radius+this.cutoff))}return Q}};class ut{constructor(){this.specification=l.v.light.position}possiblyEvaluate(r,u){return l.B(r.expression.evaluate(u))}interpolate(r,u,p){return{x:l.C.number(r.x,u.x,p),y:l.C.number(r.y,u.y,p),z:l.C.number(r.z,u.z,p)}}}let rt;class Pe extends l.E{constructor(r){super(),rt=rt||new l.r({anchor:new l.D(l.v.light.anchor),position:new ut,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.t(rt,void 0),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(l.x,r,u))for(const p in r){const _=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),_):this._transitionable.setValue(p,_)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,p){return(!p||p.validate!==!1)&&l.y(this,r.call(l.z,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}const Ve=new l.r({"sky-color":new l.D(l.v.sky["sky-color"]),"horizon-color":new l.D(l.v.sky["horizon-color"]),"fog-color":new l.D(l.v.sky["fog-color"]),"fog-ground-blend":new l.D(l.v.sky["fog-ground-blend"]),"horizon-fog-blend":new l.D(l.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new l.D(l.v.sky["sky-horizon-blend"]),"atmosphere-blend":new l.D(l.v.sky["atmosphere-blend"])});class Ge extends l.E{constructor(r){super(),this._transitionable=new l.t(Ve,void 0),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.F(0))}setSky(r,u={}){if(!this._validate(l.G,r,u)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in r){const _=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),_):this._transitionable.setValue(p,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,p={}){return(p==null?void 0:p.validate)!==!1&&l.y(this,r.call(l.z,l.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class ht{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const p=r.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(r,u)),this.dashEntry[p]}getDashRanges(r,u,p){const _=[];let w=r.length%2==1?-r[r.length-1]*p:0,M=r[0]*p,I=!0;_.push({left:w,right:M,isDash:I,zeroLength:r[0]===0});let D=r[0];for(let $=1;$<r.length;$++){I=!I;const q=r[$];w=D*p,D+=q,M=D*p,_.push({left:w,right:M,isDash:I,zeroLength:q===0})}return _}addRoundDash(r,u,p){const _=u/2;for(let w=-p;w<=p;w++){const M=this.width*(this.nextRow+p+w);let I=0,D=r[I];for(let $=0;$<this.width;$++){$/D.right>1&&(D=r[++I]);const q=Math.abs($-D.left),H=Math.abs($-D.right),G=Math.min(q,H);let Q;const oe=w/p*(_+1);if(D.isDash){const me=_-Math.abs(oe);Q=Math.sqrt(G*G+me*me)}else Q=_-Math.sqrt(G*G+oe*oe);this.data[M+$]=Math.max(0,Math.min(255,Q+128))}}}addRegularDash(r){for(let I=r.length-1;I>=0;--I){const D=r[I],$=r[I+1];D.zeroLength?r.splice(I,1):$&&$.isDash===D.isDash&&($.left=D.left,r.splice(I,1))}const u=r[0],p=r[r.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const _=this.width*this.nextRow;let w=0,M=r[w];for(let I=0;I<this.width;I++){I/M.right>1&&(M=r[++w]);const D=Math.abs(I-M.left),$=Math.abs(I-M.right),q=Math.min(D,$);this.data[_+I]=Math.max(0,Math.min(255,(M.isDash?q:-q)+128))}}addDash(r,u){const p=u?7:0,_=2*p+1;if(this.nextRow+_>this.height)return l.w("LineAtlas out of space"),null;let w=0;for(let I=0;I<r.length;I++)w+=r[I];if(w!==0){const I=this.width/w,D=this.getDashRanges(r,this.width,I);u?this.addRoundDash(D,I,p):this.addRegularDash(D)}const M={y:this.nextRow+p,height:2*p,width:w};return this.nextRow+=_,this.dirty=!0,M}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const xe="maplibre_preloaded_worker_pool";class Xe{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Xe.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[xe]}numActive(){return Object.keys(this.active).length}}const ot=Math.floor(B.hardwareConcurrency/2);let st,Pt;function Vt(){return st||(st=new Xe),st}Xe.workerCount=l.H(globalThis)?Math.max(Math.min(ot,3),1):1;class Nt{constructor(r,u){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=u;const p=this.workerPool.acquire(u);for(let _=0;_<p.length;_++){const w=new l.J(p[_],u);w.name=`Worker ${_}`,this.actors.push(w)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u){const p=[];for(const _ of this.actors)p.push(_.sendAsync({type:r,data:u}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,u){for(const p of this.actors)p.registerMessageHandler(r,u)}}function yr(){return Pt||(Pt=new Nt(Vt(),l.K),Pt.registerMessageHandler("GR",(x,r,u)=>l.m(r,u))),Pt}function ar(x,r){const u=l.L();return l.M(u,u,[1,1,0]),l.N(u,u,[.5*x.width,.5*x.height,1]),x.calculatePosMatrix?l.O(u,u,x.calculatePosMatrix(r.toUnwrapped())):u}function Ot(x,r,u,p,_,w,M){var I;const D=function(G,Q,oe){if(G)for(const me of G){const pe=Q[me];if(pe&&pe.source===oe&&pe.type==="fill-extrusion")return!0}else for(const me in Q){const pe=Q[me];if(pe.source===oe&&pe.type==="fill-extrusion")return!0}return!1}((I=_==null?void 0:_.layers)!==null&&I!==void 0?I:null,r,x.id),$=w.maxPitchScaleFactor(),q=x.tilesIn(p,$,D);q.sort(er);const H=[];for(const G of q)H.push({wrappedTileID:G.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(r,u,x._state,G.queryGeometry,G.cameraQueryGeometry,G.scale,_,w,$,ar(x.transform,G.tileID),M?(Q,oe)=>M(G.tileID,Q,oe):void 0)});return function(G,Q){for(const oe in G)for(const me of G[oe])or(me,Q);return G}(function(G){const Q={},oe={};for(const me of G){const pe=me.queryResults,ge=me.wrappedTileID,_e=oe[ge]=oe[ge]||{};for(const Te in pe){const be=pe[Te],Ce=_e[Te]=_e[Te]||{},Oe=Q[Te]=Q[Te]||[];for(const we of be)Ce[we.featureIndex]||(Ce[we.featureIndex]=!0,Oe.push(we))}}return Q}(H),x)}function er(x,r){const u=x.tileID,p=r.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}function or(x,r){const u=x.feature,p=r.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=p}function _t(x,r,u){return l._(this,void 0,void 0,function*(){let p=x;if(x.url?p=(yield l.j(r.transformRequest(x.url,"Source"),u)).data:yield B.frameAsync(u),!p)return null;const _=l.Q(l.e(p,x),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(_.vectorLayerIds=p.vector_layers.map(w=>w.id)),_})}class fr{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof l.S?new l.S(r.lng,r.lat):l.S.convert(r),this}setSouthWest(r){return this._sw=r instanceof l.S?new l.S(r.lng,r.lat):l.S.convert(r),this}extend(r){const u=this._sw,p=this._ne;let _,w;if(r instanceof l.S)_=r,w=r;else{if(!(r instanceof fr))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(fr.convert(r)):this.extend(l.S.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(l.S.convert(r)):this;if(_=r._sw,w=r._ne,!_||!w)return this}return u||p?(u.lng=Math.min(_.lng,u.lng),u.lat=Math.min(_.lat,u.lat),p.lng=Math.max(w.lng,p.lng),p.lat=Math.max(w.lat,p.lat)):(this._sw=new l.S(_.lng,_.lat),this._ne=new l.S(w.lng,w.lat)),this}getCenter(){return new l.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.S(this.getWest(),this.getNorth())}getSouthEast(){return new l.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:u,lat:p}=l.S.convert(r);let _=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&_}static convert(r){return r instanceof fr?r:r&&new fr(r)}static fromLngLat(r,u=0){const p=360*u/40075017,_=p/Math.cos(Math.PI/180*r.lat);return new fr(new l.S(r.lng-_,r.lat-p),new l.S(r.lng+_,r.lat+p))}adjustAntiMeridian(){const r=new l.S(this._sw.lng,this._sw.lat),u=new l.S(this._ne.lng,this._ne.lat);return new fr(r,r.lng>u.lng?new l.S(u.lng+360,u.lat):u)}}class Qt{constructor(r,u,p){this.bounds=fr.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),p=Math.floor(l.V(this.bounds.getWest())*u),_=Math.floor(l.U(this.bounds.getNorth())*u),w=Math.ceil(l.V(this.bounds.getEast())*u),M=Math.ceil(l.U(this.bounds.getSouth())*u);return r.x>=p&&r.x<w&&r.y>=_&&r.y<M}}class Yr extends l.E{constructor(r,u,p,_){if(super(),this.id=r,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.Q(u,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield _t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(l.e(this,r),r.bounds&&(this.tileBounds=new Qt(r.bounds,this.minzoom,this.maxzoom)),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this._loaded=!0,this.fire(new l.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(r){return l._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(u,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};p.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((w,M)=>{r.reloadPromise={resolve:w,reject:M}})}else r.actor=this.dispatcher.getActor(),_="LT";r.abortController=new AbortController;try{const w=yield r.actor.sendAsync({type:_,data:p},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,w)}catch(w){if(delete r.abortController,r.aborted)return;if(w&&w.status!==404)throw w;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,u){if(u&&u.resourceTiming&&(r.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&r.setExpiryData(u),r.loadVectorData(u,this.map.painter),r.reloadPromise){const p=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(p.resolve).catch(p.reject)}}abortTile(r){return l._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return l._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class tn extends l.E{constructor(r,u,p,_){super(),this.id=r,this.dispatcher=p,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},u),l.e(this,l.Q(u,["url","scheme","tileSize"]))}load(){return l._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield _t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(l.e(this,u),u.bounds&&(this.tileBounds=new Qt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(u){this._tileJSONRequest=null,this._loaded=!0,this.fire(new l.k(u))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return l.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return l._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const p=yield ue.getImage(this.map._requestManager.transformRequest(u,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&r.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const _=this.map.painter.context,w=_.gl,M=p.data;r.texture=this.map.painter.getTileTexture(M.width),r.texture?r.texture.update(M,{useMipmap:!0}):(r.texture=new l.T(_,M,w.RGBA,{useMipmap:!0}),r.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(p){if(delete r.abortController,r.aborted)r.state="unloaded";else if(p)throw r.state="errored",p}})}abortTile(r){return l._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return l._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class Kr extends tn{constructor(r,u,p,_){super(r,u,p,_),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(r){return l._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(u,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const _=yield ue.getImage(p,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(_&&_.data){const w=_.data;this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&r.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const M=l.b(w)&&l.W()?w:yield this.readImageNow(w),I={type:this.type,uid:r.uid,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const D=yield r.actor.sendAsync({type:"LDT",data:I});r.dem=D,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(_){if(delete r.abortController,r.aborted)r.state="unloaded";else if(_)throw r.state="errored",_}})}readImageNow(r){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.X()){const u=r.width+2,p=r.height+2;try{return new l.R({width:u,height:p},yield l.Y(r,-1,-1,u,p))}catch{}}return B.getImageData(r,1)})}_getNeighboringTiles(r){const u=r.canonical,p=Math.pow(2,u.z),_=(u.x-1+p)%p,w=u.x===0?r.wrap-1:r.wrap,M=(u.x+1+p)%p,I=u.x+1===p?r.wrap+1:r.wrap,D={};return D[new l.Z(r.overscaledZ,w,u.z,_,u.y).key]={backfilled:!1},D[new l.Z(r.overscaledZ,I,u.z,M,u.y).key]={backfilled:!1},u.y>0&&(D[new l.Z(r.overscaledZ,w,u.z,_,u.y-1).key]={backfilled:!1},D[new l.Z(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},D[new l.Z(r.overscaledZ,I,u.z,M,u.y-1).key]={backfilled:!1}),u.y+1<p&&(D[new l.Z(r.overscaledZ,w,u.z,_,u.y+1).key]={backfilled:!1},D[new l.Z(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},D[new l.Z(r.overscaledZ,I,u.z,M,u.y+1).key]={backfilled:!1}),D}unloadTile(r){return l._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class ki extends l.E{constructor(r,u,p,_){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:u.data},this.actor=p.getActor(),this.setEventedParent(_),this._data=u.data,this._options=l.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&l.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=l.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(u.buffer!==void 0?u.buffer:128),tolerance:this._pixelsToTileUnits(u.tolerance!==void 0?u.tolerance:.375),extent:l.$,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(u.clusterMaxZoom),minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.$,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(l.$/this.tileSize)}_getClusterMaxZoom(r){const u=r?Math.round(r):this.maxzoom-1;return Number.isInteger(r)||r===void 0||l.w(`Integer expected for option 'clusterMaxZoom': provided value "${r}" rounded to "${u}"`),u}load(){return l._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._pendingWorkerUpdate={data:r},this._updateWorkerData(),this}updateData(r){return this._pendingWorkerUpdate.diff=l.a0(this._pendingWorkerUpdate.diff,r),this._updateWorkerData(),this}getData(){return l._(this,void 0,void 0,function*(){const r=l.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(u=>u.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return l._(this,void 0,void 0,function*(){const r=new fr,u=yield this.getData();let p;switch(u.type){case"FeatureCollection":p=u.features.map(_=>this.getCoordinatesFromGeometry(_.geometry)).flat(1/0);break;case"Feature":p=this.getCoordinatesFromGeometry(u.geometry);break;default:p=this.getCoordinatesFromGeometry(u)}if(p.length==0)return r;for(let _=0;_<p.length-1;_+=2)r.extend([p[_],p[_+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(r.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,u,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:u,offset:p}})}_updateWorkerData(){return l._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:r,diff:u}=this._pendingWorkerUpdate;if(!r&&!u)return void l.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const p=l.e({type:this.type},this.workerOptions);r?(typeof r=="string"?(p.request=this.map._requestManager.transformRequest(B.resolveURL(r),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(r),this._pendingWorkerUpdate.data=void 0):u&&(p.dataDiff=u,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new l.l("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:p});if(this._isUpdatingWorker=!1,this._removed||_.abandoned)return void this.fire(new l.l("dataabort",{dataType:"source"}));this._data=_.data;let w=null;_.resourceTiming&&_.resourceTiming[this.id]&&(w=_.resourceTiming[this.id].slice(0));const M={dataType:"source"};this._collectResourceTiming&&w&&w.length>0&&l.e(M,{resourceTiming:w}),this.fire(new l.l("data",Object.assign(Object.assign({},M),{sourceDataType:"metadata"}))),this.fire(new l.l("data",Object.assign(Object.assign({},M),{sourceDataType:"content"})))}catch(_){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new l.l("dataabort",{dataType:"source"}));this.fire(new l.k(_))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(r){return l._(this,void 0,void 0,function*(){const u=r.actor?"RT":"LT";r.actor=this.actor;const p={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const _=yield this.actor.sendAsync({type:u,data:p},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(_,this.map.painter,u==="RT")})}abortTile(r){return l._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return l._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Wn extends l.E{constructor(r,u,p,_){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=u}load(r){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield ue.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,r&&(this.coordinates=r),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new l.k(u))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const u=r.map(l.a1.fromLngLat);var p;return this.tileID=function(_){const w=l.a2.fromPoints(_),M=w.width(),I=w.height(),D=Math.max(M,I),$=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),q=Math.pow(2,$);return new l.a4($,Math.floor((w.minX+w.maxX)/2*q),Math.floor((w.minY+w.maxY)/2*q))}(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map(_=>this.tileID.getTilePoint(_)._round()),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new l.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,u=r.gl;this.texture||(this.texture=new l.T(r,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const _ in this.tiles){const w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,p=!0)}p&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return l._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){const{minX:u,minY:p,maxX:_,maxY:w}=l.a2.fromPoints(r),M={};for(let I=0;I<=l.a3;I++){const D=Math.pow(2,I),$=Math.floor(u*D),q=Math.floor(p*D),H=Math.floor(_*D),G=Math.floor(w*D);M[I]={minTileX:$,minTileY:q,maxTileX:H,maxTileY:G}}return M}}class Ba extends Wn{constructor(r,u,p,_){super(r,u,p,_),this.roundZoom=!0,this.type="video",this.options=u}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const u of r.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield l.a5(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new l.k(u))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new l.k(new l.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,u=r.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new l.T(r,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const _ in this.tiles){const w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,p=!0)}p&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ii extends Wn{constructor(r,u,p,_){super(r,u,p,_),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(w=>!Array.isArray(w)||w.length!==2||w.some(M=>typeof M!="number"))||this.fire(new l.k(new l.a6(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.k(new l.a6(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.k(new l.a6(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.k(new l.a6(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.k(new l.a6(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return l._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,p=u.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.T(u,this.canvas,p.RGBA,{premultiply:!0});let _=!1;for(const w in this.tiles){const M=this.tiles[w];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,_=!0)}_&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Di={},Yi=x=>{switch(x){case"geojson":return ki;case"image":return Wn;case"raster":return tn;case"raster-dem":return Kr;case"vector":return Yr;case"video":return Ba;case"canvas":return Ii}return Di[x]},Mo="RTLPluginLoaded";class Ts extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=yr()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(u=>{throw this.status="error",u})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return l._(this,arguments,void 0,function*(u,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=B.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return l._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.l(Mo))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let zi=null;function Jn(){return zi||(zi=new Ts),zi}var ci,ke;(function(x){x[x.Base=0]="Base",x[x.Parent=1]="Parent"})(ci||(ci={})),function(x){x[x.Departing=0]="Departing",x[x.Incoming=1]="Incoming"}(ke||(ke={}));class te{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=r,this.uid=l.a7(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(r){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(r||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:r,fadingDirection:u,fadingParentID:p,fadeEndTime:_}){this.resetFadeLogic(),this.fadingRole=r,this.fadingDirection=u,this.fadingParentID=p,this.fadeEndTime=_}setSelfFadeLogic(r){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=r}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=B.now(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(_,w){const M={};if(!w)return M;for(const I of _){const D=I.layerIds.map($=>w.getLayer($)).filter(Boolean);if(D.length!==0){I.layers=D,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map($=>D.filter(q=>q.id===$)[0]));for(const $ of D)M[$.id]=I}}return M}(r.buckets,u==null?void 0:u.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof l.a9){if(this.hasSymbolBuckets=!0,!p)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof l.a9&&w.hasRTLText){this.hasRTLText=!0,Jn().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const w=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(_).queryRadius(w))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),this.dashPositions=r.dashPositions}else this.collisionBoxArray=new l.a8}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const p in this.buckets){const _=this.buckets[p];_.uploadPending()&&_.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new l.T(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new l.T(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,p,_,w,M,I,D,$,q,H){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:w,scale:M,tileSize:this.tileSize,pixelPosMatrix:q,transform:D,params:I,queryPadding:this.queryPadding*$,getElevation:H},r,u,p):{}}querySourceFeatures(r,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const _=p.loadVTLayers(),w=u&&u.sourceLayer?u.sourceLayer:"",M=_._geojsonTileLayer||_[w];if(!M)return;const I=l.aa(u==null?void 0:u.filter,u==null?void 0:u.globalState),{z:D,x:$,y:q}=this.tileID.canonical,H={z:D,x:$,y:q};for(let G=0;G<M.length;G++){const Q=M.feature(G);if(I.needGeometry){const pe=l.ab(Q,!0);if(!I.filter(new l.F(this.tileID.overscaledZ),pe,this.tileID.canonical))continue}else if(!I.filter(new l.F(this.tileID.overscaledZ),Q))continue;const oe=p.getId(Q,w),me=new l.ac(Q,D,$,q,oe);me.tile=H,r.push(me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const p=l.ad(r.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const p=Date.now();let _=!1;if(this.expirationTime>p)_=!1;else if(u)if(this.expirationTime<u)_=!0;else{const w=this.expirationTime-u;w?this.expirationTime=p+Math.max(w,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!u.style.hasLayer(_))continue;const w=this.buckets[_],M=w.layers[0].sourceLayer||"_geojsonTileLayer",I=p[M],D=r[M];if(!I||!D||Object.keys(D).length===0)continue;w.update(D,I,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const $=u&&u.style&&u.style.getLayer(_);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(w)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<B.now()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(r){this.symbolFadeHoldUntil=B.now()+r}setDependencies(r,u){const p={};for(const _ of u)p[_]=!0;this.dependencies[r]=p}hasDependency(r,u){for(const p of r){const _=this.dependencies[p];if(_){for(const w of u)if(_[w])return!0}}return!1}}class ie{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,p){const _=r.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const w={value:u,timeout:void 0};if(p!==void 0&&(w.timeout=setTimeout(()=>{this.remove(r,w)},p)),this.data[_].push(w),this.order.push(_),this.order.length>this.max){const M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const p=r.wrapped().key,_=u===void 0?0:this.data[p].indexOf(u),w=this.data[p][_];return this.data[p].splice(_,1),w.timeout&&clearTimeout(w.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(w.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const p in this.data)for(const _ of this.data[p])r(_.value)||u.push(_);for(const p of u)this.remove(p.value.tileID,p)}}class fe{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,p){const _=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][_]=this.stateChanges[r][_]||{},l.e(this.stateChanges[r][_],p),this.deletedStates[r]===null){this.deletedStates[r]={};for(const w in this.state[r])w!==_&&(this.deletedStates[r][w]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][_]===null){this.deletedStates[r][_]={};for(const w in this.state[r][_])p[w]||(this.deletedStates[r][_][w]=null)}else for(const w in p)this.deletedStates[r]&&this.deletedStates[r][_]&&this.deletedStates[r][_][w]===null&&delete this.deletedStates[r][_][w]}removeFeatureState(r,u,p){if(this.deletedStates[r]===null)return;const _=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},p&&u!==void 0)this.deletedStates[r][_]!==null&&(this.deletedStates[r][_]=this.deletedStates[r][_]||{},this.deletedStates[r][_][p]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][_])for(p in this.deletedStates[r][_]={},this.stateChanges[r][_])this.deletedStates[r][_][p]=null;else this.deletedStates[r][_]=null;else this.deletedStates[r]=null}getState(r,u){const p=String(u),_=l.e({},(this.state[r]||{})[p],(this.stateChanges[r]||{})[p]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const w=this.deletedStates[r][u];if(w===null)return{};for(const M in w)delete _[M]}return _}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const p={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const w={};for(const M in this.stateChanges[_])this.state[_][M]||(this.state[_][M]={}),l.e(this.state[_][M],this.stateChanges[_][M]),w[M]=this.state[_][M];p[_]=w}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const w={};if(this.deletedStates[_]===null)for(const M in this.state[_])w[M]={},this.state[_][M]={};else for(const M in this.deletedStates[_]){if(this.deletedStates[_][M]===null)this.state[_][M]={};else for(const I of Object.keys(this.deletedStates[_][M]))delete this.state[_][M][I];w[M]=this.state[_][M]}p[_]=p[_]||{},l.e(p[_],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const _ in r)r[_].setFeatureState(p,u)}}const Se=89.25;function Ee(x,r){const u=l.ah(r.lat,-l.ai,l.ai);return new l.P(l.V(r.lng)*x,l.U(u)*x)}function ze(x,r){return new l.a1(r.x/x,r.y/x).toLngLat()}function He(x){return x.cameraToCenterDistance*Math.min(.85*Math.tan(l.ae(90-x.pitch)),Math.tan(l.ae(Se-x.pitch)))}function Le(x,r){const u=x.canonical,p=r/l.af(u.z),_=u.x+Math.pow(2,u.z)*x.wrap,w=l.ag(new Float64Array(16));return l.M(w,w,[_*p,u.y*p,0]),l.N(w,w,[p/l.$,p/l.$,1]),w}function ct(x,r,u,p,_){const w=l.a1.fromLngLat(x,r),M=_*l.aj(1,x.lat),I=M*Math.cos(l.ae(u)),D=Math.sqrt(M*M-I*I),$=D*Math.sin(l.ae(-p)),q=D*Math.cos(l.ae(-p));return new l.a1(w.x+$,w.y+q,w.z+I)}function St(x,r,u){const p=r.intersectsFrustum(x);if(!u||p===0)return p;const _=r.intersectsPlane(u);return _===0?0:p===2&&_===2?2:1}function mt(x,r,u){let p=0;const _=(u-r)/10;for(let w=0;w<10;w++)p+=_*Math.pow(Math.cos(r+(w+.5)/10*(u-r)),x);return p}function Bt(x,r){return function(u,p,_,w,M){const I=2*((x-1)/l.ak(Math.cos(l.ae(Se-M))/Math.cos(l.ae(Se)))-1),D=Math.acos(_/w),$=2*mt(I-1,0,l.ae(M/2)),q=Math.min(l.ae(Se),D+l.ae(M/2)),H=mt(I-1,Math.min(q,D-l.ae(M/2)),q),G=Math.atan(p/_),Q=Math.hypot(p,_);let oe=u;return oe+=l.ak(w/Q/Math.max(.5,Math.cos(l.ae(M/2)))),oe+=I*l.ak(Math.cos(G))/2,oe-=l.ak(Math.max(1,H/$/r))/2,oe}}const Zt=Bt(9.314,3);function Ue(x,r){const u=(r.roundZoom?Math.round:Math.floor)(x.zoom+l.ak(x.tileSize/r.tileSize));return Math.max(0,u)}function jr(x,r){const u=x.getCameraFrustum(),p=x.getClippingPlane(),_=x.screenPointToMercatorCoordinate(x.getCameraPoint()),w=l.a1.fromLngLat(x.center,x.elevation);_.z=w.z+Math.cos(x.pitchInRadians)*x.cameraToCenterDistance/x.worldSize;const M=x.getCoveringTilesDetailsProvider(),I=M.allowVariableZoom(x,r),D=Ue(x,r),$=r.minzoom||0,q=r.maxzoom!==void 0?r.maxzoom:x.maxZoom,H=Math.min(Math.max(0,D),q),G=Math.pow(2,H),Q=[G*_.x,G*_.y,0],oe=[G*w.x,G*w.y,0],me=Math.hypot(w.x-_.x,w.y-_.y),pe=Math.abs(w.z-_.z),ge=Math.hypot(me,pe),_e=Ce=>({zoom:0,x:0,y:0,wrap:Ce,fullyVisible:!1}),Te=[],be=[];if(x.renderWorldCopies&&M.allowWorldCopies())for(let Ce=1;Ce<=3;Ce++)Te.push(_e(-Ce)),Te.push(_e(Ce));for(Te.push(_e(0));Te.length>0;){const Ce=Te.pop(),Oe=Ce.x,we=Ce.y;let Ne=Ce.fullyVisible;const nt={x:Oe,y:we,z:Ce.zoom},We=M.getTileBoundingVolume(nt,Ce.wrap,x.elevation,r);if(!Ne){const At=St(u,We,p);if(At===0)continue;Ne=At===2}const Ke=M.distanceToTile2d(_.x,_.y,nt,We);let Qe=D;I&&(Qe=(r.calculateTileZoom||Zt)(x.zoom+l.ak(x.tileSize/r.tileSize),Ke,pe,ge,x.fov)),Qe=(r.roundZoom?Math.round:Math.floor)(Qe),Qe=Math.max(0,Qe);const Tt=Math.min(Qe,q);if(Ce.wrap=M.getWrap(w,nt,Ce.wrap),Ce.zoom>=Tt){if(Ce.zoom<$)continue;const At=H-Ce.zoom,yt=Q[0]-.5-(Oe<<At),Lt=Q[1]-.5-(we<<At),lr=r.reparseOverscaled?Math.max(Ce.zoom,Qe):Ce.zoom;be.push({tileID:new l.Z(Ce.zoom===q?lr:Ce.zoom,Ce.wrap,Ce.zoom,Oe,we),distanceSq:l.al([oe[0]-.5-Oe,oe[1]-.5-we]),tileDistanceToCamera:Math.sqrt(yt*yt+Lt*Lt)})}else for(let At=0;At<4;At++)Te.push({zoom:Ce.zoom+1,x:(Oe<<1)+At%2,y:(we<<1)+(At>>1),wrap:Ce.wrap,fullyVisible:Ne})}return be.sort((Ce,Oe)=>Ce.distanceSq-Oe.distanceSq).map(Ce=>Ce.tileID)}const qr=l.a2.fromPoints([new l.P(0,0),new l.P(l.$,l.$)]);class Ft extends l.E{constructor(r,u,p){super(),this.id=r,this.dispatcher=p,this.on("data",_=>this._dataHandler(_)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((_,w,M,I)=>{const D=new(Yi(w.type))(_,w,M,I);if(D.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${D.id}`);return D})(r,u,p,this),this._tiles={},this._cache=new ie(0,_=>this._unloadTile(_)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new fe,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u,p){return l._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,u,p)}catch(_){r.state="errored",_.status!==404?this._source.fire(new l.k(_,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new l.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(r),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Er).map(r=>r.key)}getRenderableIds(r){const u=[];for(const p in this._tiles)this._isIdRenderable(p,r)&&u.push(this._tiles[p]);return r?u.sort((p,_)=>{const w=p.tileID,M=_.tileID,I=new l.P(w.canonical.x,w.canonical.y)._rotate(-this.transform.bearingInRadians),D=new l.P(M.canonical.x,M.canonical.y)._rotate(-this.transform.bearingInRadians);return w.overscaledZ-M.overscaledZ||D.y-I.y||D.x-I.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(Er).map(p=>p.key)}hasRenderableParent(r){const u=r.overscaledZ-1;if(u>=this._source.minzoom){const p=this._getLoadedTile(r.scaledTo(u));if(p)return this._isIdRenderable(p.tileID.key)}return!1}_isIdRenderable(r,u=!1){var p;return(p=this._tiles[r])===null||p===void 0?void 0:p.isRenderable(u)}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)r?this._reloadTile(u,"expired"):this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(r,u){return l._(this,void 0,void 0,function*(){const p=this._tiles[r];p&&(p.state!=="loading"&&(p.state=u),yield this._loadTile(p,r,u))})}_tileLoaded(r,u,p){r.timeAdded=B.now(),p==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let _=0;_<u.length;_++){const w=u[_];if(r.neighboringTiles&&r.neighboringTiles[w]){const M=this.getTileByID(w);p(r,M),p(M,r)}}function p(_,w){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let M=w.tileID.canonical.x-_.tileID.canonical.x;const I=w.tileID.canonical.y-_.tileID.canonical.y,D=Math.pow(2,_.tileID.canonical.z),$=w.tileID.key;M===0&&I===0||Math.abs(I)>1||(Math.abs(M)>1&&(Math.abs(M+D)===1?M+=D:Math.abs(M-D)===1&&(M-=D)),w.dem&&_.dem&&(_.dem.backfillBorder(w.dem,M,I),_.neighboringTiles&&_.neighboringTiles[$]&&(_.neighboringTiles[$].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u){const p=Object.values(r),_=this._getLoadedDescendents(p),w={};for(const M of p){const I=_[M.key];if(!(I!=null&&I.length)){w[M.key]=M;continue}const D=M.overscaledZ+Ft.maxUnderzooming,$=I.filter(G=>G.tileID.overscaledZ<=D);if(!$.length){w[M.key]=M;continue}const q=Math.min(...$.map(G=>G.tileID.overscaledZ)),H=$.filter(G=>G.tileID.overscaledZ===q).map(G=>G.tileID);for(const G of H)u[G.key]=G;this._areDescendentsComplete(H,q,M.overscaledZ)||(w[M.key]=M)}return w}_getLoadedDescendents(r){var u;const p={};for(const _ in this._tiles){const w=this._tiles[_];if(w.hasData())for(const M of r)w.tileID.isChildOf(M)&&(p[u=M.key]||(p[u]=[])).push(w)}return p}_areDescendentsComplete(r,u,p){return r.length===1&&r[0].isOverscaled()?r[0].overscaledZ===u:Math.pow(4,u-p)===r.length}_getLoadedTile(r){const u=this._tiles[r.key];return u!=null&&u.hasData()?u:null}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,p=Math.ceil(r.height/this._source.tileSize)+1,_=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(w)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const p={};for(const _ in this._tiles){const w=this._tiles[_];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+u),p[w.tileID.key]=w}this._tiles=p;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}update(r,u){if(!this._sourceLoaded||this._paused)return;let p;this.transform=r,this.terrain=u,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?p=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(D=>new l.Z(D.canonical.z,D.wrap,D.canonical.z,D.canonical.x,D.canonical.y)):(p=jr(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter(D=>this._source.hasTile(D)))):p=[],this.usedForTerrain&&(p=this._addTerrainIdealTiles(p));const _=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,_&&this.fire(new l.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const w=Ue(r,this._source),M=this._updateRetainedTiles(p,w),I=ei(this._source.type);I&&this._rasterFadeDuration>0&&!u&&this._updateFadingTiles(p,M),I?this._cleanUpRasterTiles(M):this._cleanUpVectorTiles(M)}_cleanUpRasterTiles(r){for(const u in this._tiles)r[u]||this._removeTile(u)}_cleanUpVectorTiles(r){for(const u in this._tiles){const p=this._tiles[u];r[u]?p.clearSymbolFadeHold():p.hasSymbolBuckets?p.holdingForSymbolFade()?p.symbolFadeFinished()&&this._removeTile(u):p.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(u)}}_addTerrainIdealTiles(r){const u=[];for(const p of r)if(p.canonical.z>this._source.minzoom){const _=p.scaledTo(p.canonical.z-1);u.push(_);const w=p.scaledTo(Math.max(this._source.minzoom,Math.min(p.canonical.z,5)));u.push(w)}return r.concat(u)}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForSymbolFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){var p;const _={},w={},M=Math.max(u-Ft.maxOverzooming,this._source.minzoom);let I={};for(const D of r){const $=this._addTile(D);_[D.key]=D,$.hasData()||(I[D.key]=D)}I=this._retainLoadedChildren(I,_);for(const D in I){const $=I[D];let q=this._tiles[D],H=q==null?void 0:q.wasRequested();for(let G=$.overscaledZ-1;G>=M;--G){const Q=$.scaledTo(G);if(w[Q.key])break;if(w[Q.key]=!0,q=this.getTile(Q),!q&&H&&(q=this._addTile(Q)),q){const oe=q.hasData();if((oe||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||H)&&(_[Q.key]=Q),H=q.wasRequested(),oe)break}}}return _}_updateFadingTiles(r,u){const p=B.now(),_=l.am(r);for(const w of r){const M=this._tiles[w.key];M.fadingDirection!==ke.Departing&&M.fadeOpacity!==0||M.resetFadeLogic(),this._updateFadingAncestor(M,u,p)||this._updateFadingDescendents(M,u,p)||this._updateFadingEdge(M,_,p)||M.resetFadeLogic()}}_updateFadingAncestor(r,u,p){if(!r.hasData())return!1;const{tileID:_,fadingRole:w,fadingDirection:M,fadingParentID:I}=r;if(w===ci.Base&&M===ke.Incoming&&I)return u[I.key]=I,!0;const D=Math.max(_.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let $=_.overscaledZ-1;$>=D;$--){const q=_.scaledTo($),H=this._getLoadedTile(q);if(H)return r.setCrossFadeLogic({fadingRole:ci.Base,fadingDirection:ke.Incoming,fadingParentID:H.tileID,fadeEndTime:p+this._rasterFadeDuration}),H.setCrossFadeLogic({fadingRole:ci.Parent,fadingDirection:ke.Departing,fadeEndTime:p+this._rasterFadeDuration}),u[q.key]=q,!0}return!1}_updateFadingDescendents(r,u,p){if(!r.hasData())return!1;const _=r.tileID.children(this._source.maxzoom);let w=this._updateFadingChildren(r,_,u,p);if(w)return!0;for(const M of _){const I=M.children(this._source.maxzoom);this._updateFadingChildren(r,I,u,p)&&(w=!0)}return w}_updateFadingChildren(r,u,p,_){if(u[0].overscaledZ>=this._source.maxzoom)return!1;let w=!1;for(const M of u){const I=this._getLoadedTile(M);if(!I)continue;const{fadingRole:D,fadingDirection:$,fadingParentID:q}=I;D===ci.Base&&$===ke.Departing&&q||(I.setCrossFadeLogic({fadingRole:ci.Base,fadingDirection:ke.Departing,fadingParentID:r.tileID,fadeEndTime:_+this._rasterFadeDuration}),r.setCrossFadeLogic({fadingRole:ci.Parent,fadingDirection:ke.Incoming,fadeEndTime:_+this._rasterFadeDuration})),p[M.key]=M,w=!0}return w}_updateFadingEdge(r,u,p){const _=r.tileID;return!!r.selfFading||!r.hasData()&&!!u.has(_)&&(r.setSelfFadeLogic(p+this._rasterFadeDuration),!0)}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(u.resetFadeLogic(),this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const p=u;return u||(u=new te(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,r.key,u.state)),u.uses++,this._tiles[r.key]=u,p||this._source.fire(new l.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const p=u.getExpiryTimeout();p&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},p))}refreshTiles(r){for(const u in this._tiles)(this._isIdRenderable(u)||this._tiles[u].state=="errored")&&r.some(p=>p.equals(this._tiles[u].tileID.canonical))&&this._reloadTile(u,"expired")}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(r){r.dataType==="source"&&(r.sourceDataType!=="metadata"?r.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,p){const _=[],w=this.transform;if(!w)return _;const M=w.getCoveringTilesDetailsProvider().allowWorldCopies(),I=p?w.getCameraQueryGeometry(r):r,D=Q=>w.screenPointToMercatorCoordinate(Q,this.terrain),$=this.transformBbox(r,D,!M),q=this.transformBbox(I,D,!M),H=this.getIds(),G=l.a2.fromPoints(q);for(let Q=0;Q<H.length;Q++){const oe=this._tiles[H[Q]];if(oe.holdingForSymbolFade())continue;const me=M?[oe.tileID]:[oe.tileID.unwrapTo(-1),oe.tileID.unwrapTo(0)],pe=Math.pow(2,w.zoom-oe.tileID.overscaledZ),ge=u*oe.queryPadding*l.$/oe.tileSize/pe;for(const _e of me){const Te=G.map(be=>_e.getTilePoint(new l.a1(be.x,be.y)));if(Te.expandBy(ge),Te.intersects(qr)){const be=$.map(Oe=>_e.getTilePoint(Oe)),Ce=q.map(Oe=>_e.getTilePoint(Oe));_.push({tile:oe,tileID:M?_e:_e.unwrapTo(0),queryGeometry:be,cameraQueryGeometry:Ce,scale:pe})}}}return _}transformBbox(r,u,p){let _=r.map(u);if(p){const w=l.a2.fromPoints(r);w.shrinkBy(.001*Math.min(w.width(),w.height()));const M=w.map(u);l.a2.fromPoints(_).covers(M)||(_=_.map(I=>I.x>.5?new l.a1(I.x-1,I.y,I.z):I))}return _}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(p=>this._tiles[p].tileID);return this.transform&&this.transform.populateCache(u),u}hasTransition(){if(this._source.hasTransition())return!0;if(ei(this._source.type)&&this._rasterFadeDuration>0){const r=B.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setRasterFadeDuration(r){this._rasterFadeDuration=r}setFeatureState(r,u,p){this._state.updateState(r=r||"_geojsonTileLayer",u,p)}removeFeatureState(r,u,p){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,p)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,p){const _=this._tiles[r];_&&_.setDependencies(u,p)}reloadTilesForDependencies(r,u){for(const p in this._tiles)this._tiles[p].hasDependency(r,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(r,u))}}function Er(x,r){const u=Math.abs(2*x.wrap)-+(x.wrap<0),p=Math.abs(2*r.wrap)-+(r.wrap<0);return x.overscaledZ-r.overscaledZ||p-u||r.canonical.y-x.canonical.y||r.canonical.x-x.canonical.x}function ei(x){return x==="raster"||x==="image"||x==="video"}Ft.maxOverzooming=10,Ft.maxUnderzooming=3;class ui{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.ah(r,0,1);let u=1,p=this._distances[u];const _=r*this.paddedLength+this.padding;for(;p<_&&u<this._distances.length;)p=this._distances[++u];const w=u-1,M=this._distances[w],I=p-M,D=I>0?(_-M)/I:0;return this.points[w].mult(1-D).add(this.points[u].mult(D))}}function hn(x,r){let u=!0;return x==="always"||x!=="never"&&r!=="never"||(u=!1),u}class Zr{constructor(r,u,p){const _=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(r/p),this.yCellCount=Math.ceil(u/p);for(let M=0;M<this.xCellCount*this.yCellCount;M++)_.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,p,_,w){this._forEachCell(u,p,_,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(w)}insertCircle(r,u,p,_){this._forEachCell(u-_,p-_,u+_,p+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(p),this.circles.push(_)}_insertBoxCell(r,u,p,_,w,M){this.boxCells[w].push(M)}_insertCircleCell(r,u,p,_,w,M){this.circleCells[w].push(M)}_query(r,u,p,_,w,M,I){if(p<0||r>this.width||_<0||u>this.height)return[];const D=[];if(r<=0&&u<=0&&this.width<=p&&this.height<=_){if(w)return[{key:null,x1:r,y1:u,x2:p,y2:_}];for(let $=0;$<this.boxKeys.length;$++)D.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const q=this.circles[3*$],H=this.circles[3*$+1],G=this.circles[3*$+2];D.push({key:this.circleKeys[$],x1:q-G,y1:H-G,x2:q+G,y2:H+G})}}else this._forEachCell(r,u,p,_,this._queryCell,D,{hitTest:w,overlapMode:M,seenUids:{box:{},circle:{}}},I);return D}query(r,u,p,_){return this._query(r,u,p,_,!1,null)}hitTest(r,u,p,_,w,M){return this._query(r,u,p,_,!0,w,M).length>0}hitTestCircle(r,u,p,_,w){const M=r-p,I=r+p,D=u-p,$=u+p;if(I<0||M>this.width||$<0||D>this.height)return!1;const q=[];return this._forEachCell(M,D,I,$,this._queryCellCircle,q,{hitTest:!0,overlapMode:_,circle:{x:r,y:u,radius:p},seenUids:{box:{},circle:{}}},w),q.length>0}_queryCell(r,u,p,_,w,M,I,D){const{seenUids:$,hitTest:q,overlapMode:H}=I,G=this.boxCells[w];if(G!==null){const oe=this.bboxes;for(const me of G)if(!$.box[me]){$.box[me]=!0;const pe=4*me,ge=this.boxKeys[me];if(r<=oe[pe+2]&&u<=oe[pe+3]&&p>=oe[pe+0]&&_>=oe[pe+1]&&(!D||D(ge))&&(!q||!hn(H,ge.overlapMode))&&(M.push({key:ge,x1:oe[pe],y1:oe[pe+1],x2:oe[pe+2],y2:oe[pe+3]}),q))return!0}}const Q=this.circleCells[w];if(Q!==null){const oe=this.circles;for(const me of Q)if(!$.circle[me]){$.circle[me]=!0;const pe=3*me,ge=this.circleKeys[me];if(this._circleAndRectCollide(oe[pe],oe[pe+1],oe[pe+2],r,u,p,_)&&(!D||D(ge))&&(!q||!hn(H,ge.overlapMode))){const _e=oe[pe],Te=oe[pe+1],be=oe[pe+2];if(M.push({key:ge,x1:_e-be,y1:Te-be,x2:_e+be,y2:Te+be}),q)return!0}}}return!1}_queryCellCircle(r,u,p,_,w,M,I,D){const{circle:$,seenUids:q,overlapMode:H}=I,G=this.boxCells[w];if(G!==null){const oe=this.bboxes;for(const me of G)if(!q.box[me]){q.box[me]=!0;const pe=4*me,ge=this.boxKeys[me];if(this._circleAndRectCollide($.x,$.y,$.radius,oe[pe+0],oe[pe+1],oe[pe+2],oe[pe+3])&&(!D||D(ge))&&!hn(H,ge.overlapMode))return M.push(!0),!0}}const Q=this.circleCells[w];if(Q!==null){const oe=this.circles;for(const me of Q)if(!q.circle[me]){q.circle[me]=!0;const pe=3*me,ge=this.circleKeys[me];if(this._circlesCollide(oe[pe],oe[pe+1],oe[pe+2],$.x,$.y,$.radius)&&(!D||D(ge))&&!hn(H,ge.overlapMode))return M.push(!0),!0}}}_forEachCell(r,u,p,_,w,M,I,D){const $=this._convertToXCellCoord(r),q=this._convertToYCellCoord(u),H=this._convertToXCellCoord(p),G=this._convertToYCellCoord(_);for(let Q=$;Q<=H;Q++)for(let oe=q;oe<=G;oe++)if(w.call(this,r,u,p,_,this.xCellCount*oe+Q,M,I,D))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,p,_,w,M){const I=_-r,D=w-u,$=p+M;return $*$>I*I+D*D}_circleAndRectCollide(r,u,p,_,w,M,I){const D=(M-_)/2,$=Math.abs(r-(_+D));if($>D+p)return!1;const q=(I-w)/2,H=Math.abs(u-(w+q));if(H>q+p)return!1;if($<=D||H<=q)return!0;const G=$-D,Q=H-q;return G*G+Q*Q<=p*p}}function Ar(x,r,u){const p=l.L();if(!x){const{vecSouth:H,vecEast:G}=Ur(r),Q=C();Q[0]=G[0],Q[1]=G[1],Q[2]=H[0],Q[3]=H[1],_=Q,(q=(M=(w=Q)[0])*($=w[3])-(D=w[2])*(I=w[1]))&&(_[0]=$*(q=1/q),_[1]=-I*q,_[2]=-D*q,_[3]=M*q),p[0]=Q[0],p[1]=Q[1],p[4]=Q[2],p[5]=Q[3]}var _,w,M,I,D,$,q;return l.N(p,p,[1/u,1/u,1]),p}function Mn(x,r,u,p){if(x){const _=l.L();if(!r){const{vecSouth:w,vecEast:M}=Ur(u);_[0]=M[0],_[1]=M[1],_[4]=w[0],_[5]=w[1]}return l.N(_,_,[p,p,1]),_}return u.pixelsToClipSpaceMatrix}function Ur(x){const r=Math.cos(x.rollInRadians),u=Math.sin(x.rollInRadians),p=Math.cos(x.pitchInRadians),_=Math.cos(x.bearingInRadians),w=Math.sin(x.bearingInRadians),M=l.ar();M[0]=-_*p*u-w*r,M[1]=-w*p*u+_*r;const I=l.as(M);I<1e-9?l.at(M):l.au(M,M,1/I);const D=l.ar();D[0]=_*p*r-w*u,D[1]=w*p*r+_*u;const $=l.as(D);return $<1e-9?l.at(D):l.au(D,D,1/$),{vecEast:D,vecSouth:M}}function wt(x,r,u,p){let _;p?(_=[x,r,p(x,r),1],l.aw(_,_,u)):(_=[x,r,0,1],ul(_,_,u));const w=_[3];return{point:new l.P(_[0]/w,_[1]/w),signedDistanceFromCamera:w,isOccluded:!1}}function Po(x,r){return .5+x/r*.5}function ua(x,r){return x.x>=-r[0]&&x.x<=r[0]&&x.y>=-r[1]&&x.y<=r[1]}function Mi(x,r,u,p,_,w,M,I,D,$,q,H,G){const Q=u?x.textSizeData:x.iconSizeData,oe=l.an(Q,r.transform.zoom),me=[256/r.width*2+1,256/r.height*2+1],pe=u?x.text.dynamicLayoutVertexArray:x.icon.dynamicLayoutVertexArray;pe.clear();const ge=x.lineVertexArray,_e=u?x.text.placedSymbolArray:x.icon.placedSymbolArray,Te=r.transform.width/r.transform.height;let be=!1;for(let Ce=0;Ce<_e.length;Ce++){const Oe=_e.get(Ce);if(Oe.hidden||Oe.writingMode===l.ao.vertical&&!be){Co(Oe.numGlyphs,pe);continue}be=!1;const we=new l.P(Oe.anchorX,Oe.anchorY),Ne={getElevation:G,pitchedLabelPlaneMatrix:p,lineVertexArray:ge,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:we,unwrappedTileID:D,width:$,height:q,translation:H},nt=vr(Oe.anchorX,Oe.anchorY,Ne);if(!ua(nt.point,me)){Co(Oe.numGlyphs,pe);continue}const We=Po(r.transform.cameraToCenterDistance,nt.signedDistanceFromCamera),Ke=l.ap(Q,oe,Oe),Qe=w?Ke*r.transform.getPitchedTextCorrection(Oe.anchorX,Oe.anchorY,D)/We:Ke*We,Tt=mr({projectionContext:Ne,pitchedLabelPlaneMatrixInverse:_,symbol:Oe,fontSize:Qe,flip:!1,keepUpright:M,glyphOffsetArray:x.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:Te,rotateToLine:I});be=Tt.useVertical,(Tt.notEnoughRoom||be||Tt.needsFlipping&&mr({projectionContext:Ne,pitchedLabelPlaneMatrixInverse:_,symbol:Oe,fontSize:Qe,flip:!0,keepUpright:M,glyphOffsetArray:x.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:Te,rotateToLine:I}).notEnoughRoom)&&Co(Oe.numGlyphs,pe)}u?x.text.dynamicLayoutVertexBuffer.updateData(pe):x.icon.dynamicLayoutVertexBuffer.updateData(pe)}function Yn(x,r,u,p,_,w,M,I){const D=w.glyphStartIndex+w.numGlyphs,$=w.lineStartIndex,q=w.lineStartIndex+w.lineLength,H=r.getoffsetX(w.glyphStartIndex),G=r.getoffsetX(D-1),Q=cl(x*H,u,p,_,w.segment,$,q,I,M);if(!Q)return null;const oe=cl(x*G,u,p,_,w.segment,$,q,I,M);return oe?I.projectionCache.anyProjectionOccluded?null:{first:Q,last:oe}:null}function Ct(x,r,u,p){return x===l.ao.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*p?{useVertical:!0}:(x===l.ao.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function mr(x){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:u,symbol:p,fontSize:_,flip:w,keepUpright:M,glyphOffsetArray:I,dynamicLayoutVertexArray:D,aspectRatio:$,rotateToLine:q}=x,H=_/24,G=p.lineOffsetX*H,Q=p.lineOffsetY*H;let oe;if(p.numGlyphs>1){const me=p.glyphStartIndex+p.numGlyphs,pe=p.lineStartIndex,ge=p.lineStartIndex+p.lineLength,_e=Yn(H,I,G,Q,w,p,q,r);if(!_e)return{notEnoughRoom:!0};const Te=so(_e.first.point.x,_e.first.point.y,r,u),be=so(_e.last.point.x,_e.last.point.y,r,u);if(M&&!w){const Ce=Ct(p.writingMode,Te,be,$);if(Ce)return Ce}oe=[_e.first];for(let Ce=p.glyphStartIndex+1;Ce<me-1;Ce++){const Oe=cl(H*I.getoffsetX(Ce),G,Q,w,p.segment,pe,ge,r,q);if(!Oe)return{notEnoughRoom:!0};oe.push(Oe)}oe.push(_e.last)}else{if(M&&!w){const pe=dn(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,ge=p.lineStartIndex+p.segment+1,_e=new l.P(r.lineVertexArray.getx(ge),r.lineVertexArray.gety(ge)),Te=dn(_e.x,_e.y,r),be=Te.signedDistanceFromCamera>0?Te.point:pr(r.tileAnchorPoint,_e,pe,1,r),Ce=so(pe.x,pe.y,r,u),Oe=so(be.x,be.y,r,u),we=Ct(p.writingMode,Ce,Oe,$);if(we)return we}const me=cl(H*I.getoffsetX(p.glyphStartIndex),G,Q,w,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,r,q);if(!me||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};oe=[me]}for(const me of oe)l.av(D,me.point,me.angle);return{}}function pr(x,r,u,p,_){const w=x.add(x.sub(r)._unit()),M=dn(w.x,w.y,_).point,I=u.sub(M);return u.add(I._mult(p/I.mag()))}function vi(x,r,u){const p=r.projectionCache;if(p.projections[x])return p.projections[x];const _=new l.P(r.lineVertexArray.getx(x),r.lineVertexArray.gety(x)),w=dn(_.x,_.y,r);if(w.signedDistanceFromCamera>0)return p.projections[x]=w.point,p.anyProjectionOccluded=p.anyProjectionOccluded||w.isOccluded,w.point;const M=x-u.direction;return pr(u.distanceFromAnchor===0?r.tileAnchorPoint:new l.P(r.lineVertexArray.getx(M),r.lineVertexArray.gety(M)),_,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,r)}function dn(x,r,u){const p=x+u.translation[0],_=r+u.translation[1];let w;return u.pitchWithMap?(w=wt(p,_,u.pitchedLabelPlaneMatrix,u.getElevation),w.isOccluded=!1):(w=u.transform.projectTileCoordinates(p,_,u.unwrappedTileID,u.getElevation),w.point.x=(.5*w.point.x+.5)*u.width,w.point.y=(.5*-w.point.y+.5)*u.height),w}function so(x,r,u,p){if(u.pitchWithMap){const _=[x,r,0,1];return l.aw(_,_,p),u.transform.projectTileCoordinates(_[0]/_[3],_[1]/_[3],u.unwrappedTileID,u.getElevation).point}return{x:x/u.width*2-1,y:1-r/u.height*2}}function vr(x,r,u){return u.transform.projectTileCoordinates(x,r,u.unwrappedTileID,u.getElevation)}function Fa(x,r,u){return x._unit()._perp()._mult(r*u)}function Eo(x,r,u,p,_,w,M,I,D){if(I.projectionCache.offsets[x])return I.projectionCache.offsets[x];const $=u.add(r);if(x+D.direction<p||x+D.direction>=_)return I.projectionCache.offsets[x]=$,$;const q=vi(x+D.direction,I,D),H=Fa(q.sub(u),M,D.direction),G=u.add(H),Q=q.add(H);return I.projectionCache.offsets[x]=l.ax(w,$,G,Q)||$,I.projectionCache.offsets[x]}function cl(x,r,u,p,_,w,M,I,D){const $=p?x-r:x+r;let q=$>0?1:-1,H=0;p&&(q*=-1,H=Math.PI),q<0&&(H+=Math.PI);let G,Q=q>0?w+_:w+_+1;I.projectionCache.cachedAnchorPoint?G=I.projectionCache.cachedAnchorPoint:(G=dn(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=G);let oe,me,pe=G,ge=G,_e=0,Te=0;const be=Math.abs($),Ce=[];let Oe;for(;_e+Te<=be;){if(Q+=q,Q<w||Q>=M)return null;_e+=Te,ge=pe,me=oe;const nt={absOffsetX:be,direction:q,distanceFromAnchor:_e,previousVertex:ge};if(pe=vi(Q,I,nt),u===0)Ce.push(ge),Oe=pe.sub(ge);else{let We;const Ke=pe.sub(ge);We=Ke.mag()===0?Fa(vi(Q+q,I,nt).sub(pe),u,q):Fa(Ke,u,q),me||(me=ge.add(We)),oe=Eo(Q,We,pe,w,M,me,u,I,nt),Ce.push(me),Oe=oe.sub(me)}Te=Oe.mag()}const we=Oe._mult((be-_e)/Te)._add(me||ge),Ne=H+Math.atan2(pe.y-ge.y,pe.x-ge.x);return Ce.push(we),{point:we,angle:D?Ne:0,path:Ce}}const cc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Co(x,r){for(let u=0;u<x;u++){const p=r.length;r.resize(p+4),r.float32.set(cc,3*p)}}function ul(x,r,u){const p=r[0],_=r[1];return x[0]=u[0]*p+u[4]*_+u[12],x[1]=u[1]*p+u[5]*_+u[13],x[3]=u[3]*p+u[7]*_+u[15],x}const Pn=100;class Ni{constructor(r,u=new Zr(r.width+200,r.height+200,25),p=new Zr(r.width+200,r.height+200,25)){this.transform=r,this.grid=u,this.ignoredGrid=p,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Pn,this.screenBottomBoundary=r.height+Pn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,p,_,w,M,I,D,$,q,H,G){const Q=this.projectAndGetPerspectiveRatio(r.anchorPointX+D[0],r.anchorPointY+D[1],w,q,G),oe=p*Q.perspectiveRatio;let me;if(M||I)me=this._projectCollisionBox(r,oe,_,w,M,I,D,Q,q,H,G);else{const Oe=Q.x+(H?H.x*oe:0),we=Q.y+(H?H.y*oe:0);me={allPointsOccluded:!1,box:[Oe+r.x1*oe,we+r.y1*oe,Oe+r.x2*oe,we+r.y2*oe]}}const[pe,ge,_e,Te]=me.box,be=M?me.allPointsOccluded:Q.isOccluded;let Ce=be;return Ce||(Ce=Q.perspectiveRatio<this.perspectiveRatioCutoff),Ce||(Ce=!this.isInsideGrid(pe,ge,_e,Te)),Ce||u!=="always"&&this.grid.hitTest(pe,ge,_e,Te,u,$)?{box:[pe,ge,_e,Te],placeable:!1,offscreen:!1,occluded:be}:{box:[pe,ge,_e,Te],placeable:!0,offscreen:this.isOffscreen(pe,ge,_e,Te),occluded:be}}placeCollisionCircles(r,u,p,_,w,M,I,D,$,q,H,G,Q,oe){const me=[],pe=new l.P(u.anchorX,u.anchorY),ge=this.getPerspectiveRatio(pe.x,pe.y,M,oe),_e=($?w*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,M)/ge:w*ge)/l.aB,Te={getElevation:oe,pitchedLabelPlaneMatrix:I,lineVertexArray:p,pitchWithMap:$,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:pe,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:Q},be=Yn(_e,_,u.lineOffsetX*_e,u.lineOffsetY*_e,!1,u,!1,Te);let Ce=!1,Oe=!1,we=!0;if(be){const Ne=.5*H*ge+G,nt=new l.P(-100,-100),We=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Ke=new ui,Qe=be.first,Tt=be.last;let At=[];for(let lr=Qe.path.length-1;lr>=1;lr--)At.push(Qe.path[lr]);for(let lr=1;lr<Tt.path.length;lr++)At.push(Tt.path[lr]);const yt=2.5*Ne;if($){const lr=this.projectPathToScreenSpace(At,Te);At=lr.some(Hr=>Hr.signedDistanceFromCamera<=0)?[]:lr.map(Hr=>Hr.point)}let Lt=[];if(At.length>0){const lr=At[0].clone(),Hr=At[0].clone();for(let Xr=1;Xr<At.length;Xr++)lr.x=Math.min(lr.x,At[Xr].x),lr.y=Math.min(lr.y,At[Xr].y),Hr.x=Math.max(Hr.x,At[Xr].x),Hr.y=Math.max(Hr.y,At[Xr].y);Lt=lr.x>=nt.x&&Hr.x<=We.x&&lr.y>=nt.y&&Hr.y<=We.y?[At]:Hr.x<nt.x||lr.x>We.x||Hr.y<nt.y||lr.y>We.y?[]:l.ay([At],nt.x,nt.y,We.x,We.y)}for(const lr of Lt){Ke.reset(lr,.25*Ne);let Hr=0;Hr=Ke.length<=.5*Ne?1:Math.ceil(Ke.paddedLength/yt)+1;for(let Xr=0;Xr<Hr;Xr++){const ln=Xr/Math.max(Hr-1,1),jn=Ke.lerp(ln),cn=jn.x+Pn,Tr=jn.y+Pn;me.push(cn,Tr,Ne,0);const fn=cn-Ne,ai=Tr-Ne,$n=cn+Ne,qn=Tr+Ne;if(we=we&&this.isOffscreen(fn,ai,$n,qn),Oe=Oe||this.isInsideGrid(fn,ai,$n,qn),r!=="always"&&this.grid.hitTestCircle(cn,Tr,Ne,r,q)&&(Ce=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Ce}}}}return{circles:!D&&Ce||!Oe||ge<this.perspectiveRatioCutoff?[]:me,offscreen:we,collisionDetected:Ce}}projectPathToScreenSpace(r,u){const p=function(_,w){const M=l.L();return l.aq(M,w.pitchedLabelPlaneMatrix),_.map(I=>{const D=wt(I.x,I.y,M,w.getElevation),$=w.transform.projectTileCoordinates(D.point.x,D.point.y,w.unwrappedTileID,w.getElevation);return $.point.x=(.5*$.point.x+.5)*w.width,$.point.y=(.5*-$.point.y+.5)*w.height,$})}(r,u);return function(_){let w=0,M=0,I=0,D=0;for(let $=0;$<_.length;$++)_[$].isOccluded?(I=$+1,D=0):(D++,D>M&&(M=D,w=I));return _.slice(w,w+M)}(p)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[],p=new l.a2;for(const H of r){const G=new l.P(H.x+Pn,H.y+Pn);p.extend(G),u.push(G)}const{minX:_,minY:w,maxX:M,maxY:I}=p,D=this.grid.query(_,w,M,I).concat(this.ignoredGrid.query(_,w,M,I)),$={},q={};for(const H of D){const G=H.key;if($[G.bucketInstanceId]===void 0&&($[G.bucketInstanceId]={}),$[G.bucketInstanceId][G.featureIndex])continue;const Q=[new l.P(H.x1,H.y1),new l.P(H.x2,H.y1),new l.P(H.x2,H.y2),new l.P(H.x1,H.y2)];l.az(u,Q)&&($[G.bucketInstanceId][G.featureIndex]=!0,q[G.bucketInstanceId]===void 0&&(q[G.bucketInstanceId]=[]),q[G.bucketInstanceId].push(G.featureIndex))}return q}insertCollisionBox(r,u,p,_,w,M){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:w,collisionGroupID:M,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,p,_,w,M){const I=p?this.ignoredGrid:this.grid,D={bucketInstanceId:_,featureIndex:w,collisionGroupID:M,overlapMode:u};for(let $=0;$<r.length;$+=4)I.insertCircle(D,r[$],r[$+1],r[$+2])}projectAndGetPerspectiveRatio(r,u,p,_,w){if(w){let M;_?(M=[r,u,_(r,u),1],l.aw(M,M,w)):(M=[r,u,0,1],ul(M,M,w));const I=M[3];return{x:(M[0]/I+1)/2*this.transform.width+Pn,y:(-M[1]/I+1)/2*this.transform.height+Pn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}{const M=this.transform.projectTileCoordinates(r,u,p,_);return{x:(M.point.x+1)/2*this.transform.width+Pn,y:(1-M.point.y)/2*this.transform.height+Pn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5,isOccluded:M.isOccluded,signedDistanceFromCamera:M.signedDistanceFromCamera}}}getPerspectiveRatio(r,u,p,_){const w=this.transform.projectTileCoordinates(r,u,p,_);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(r,u,p,_){return p<Pn||r>=this.screenRightBoundary||_<Pn||u>this.screenBottomBoundary}isInsideGrid(r,u,p,_){return p>=0&&r<this.gridRightBoundary&&_>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=l.ag([]);return l.M(r,r,[-100,-100,0]),r}_projectCollisionBox(r,u,p,_,w,M,I,D,$,q,H){let G=1,Q=0,oe=0,me=1;const pe=r.anchorPointX+I[0],ge=r.anchorPointY+I[1];if(M&&!w){const At=this.projectAndGetPerspectiveRatio(pe+1,ge,_,$,H),yt=At.x-D.x,Lt=Math.atan((At.y-D.y)/yt)+(yt<0?Math.PI:0),lr=Math.sin(Lt),Hr=Math.cos(Lt);G=Hr,Q=lr,oe=-lr,me=Hr}else if(!M&&w){const At=Ur(this.transform);G=At.vecEast[0],Q=At.vecEast[1],oe=At.vecSouth[0],me=At.vecSouth[1]}let _e=D.x,Te=D.y,be=u;w&&(_e=pe,Te=ge,be=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),be*=this.transform.getPitchedTextCorrection(pe,ge,_),q||(be*=l.ah(.5+D.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),q&&(_e+=G*q.x*be+oe*q.y*be,Te+=Q*q.x*be+me*q.y*be);const Ce=r.x1*be,Oe=r.x2*be,we=(Ce+Oe)/2,Ne=r.y1*be,nt=r.y2*be,We=(Ne+nt)/2,Ke=[{offsetX:Ce,offsetY:Ne},{offsetX:we,offsetY:Ne},{offsetX:Oe,offsetY:Ne},{offsetX:Oe,offsetY:We},{offsetX:Oe,offsetY:nt},{offsetX:we,offsetY:nt},{offsetX:Ce,offsetY:nt},{offsetX:Ce,offsetY:We}];let Qe=[];for(const{offsetX:At,offsetY:yt}of Ke)Qe.push(new l.P(_e+G*At+oe*yt,Te+Q*At+me*yt));let Tt=!1;if(w){const At=Qe.map(yt=>this.projectAndGetPerspectiveRatio(yt.x,yt.y,_,$,H));Tt=At.some(yt=>!yt.isOccluded),Qe=At.map(yt=>new l.P(yt.x,yt.y))}else Tt=!0;return{box:l.aA(Qe),allPointsOccluded:!Tt}}}class Vr{constructor(r,u,p,_){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):_&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class hl{constructor(r,u,p,_,w){this.text=new Vr(r?r.text:null,u,p,w),this.icon=new Vr(r?r.icon:null,u,_,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class dl{constructor(r,u,p){this.text=r,this.icon=u,this.skipFade=p}}class As{constructor(r,u,p,_,w){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=_,this.tileID=w}}class rs{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[r]}}function lo(x,r,u,p,_){const{horizontalAlign:w,verticalAlign:M}=l.aH(x);return new l.P(-(w-.5)*r+p[0]*_,-(M-.5)*u+p[1]*_)}class Nf{constructor(r,u,p,_,w){this.transform=r.clone(),this.terrain=u,this.collisionIndex=new Ni(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new rs(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const u=this.terrain;return u?(p,_)=>u.getElevation(r,p,_):null}getBucketParts(r,u,p,_){const w=p.getBucket(u),M=p.latestFeatureIndex;if(!w||!M||u.id!==w.layerIds[0])return;const I=p.collisionBoxArray,D=w.layers[0].layout,$=w.layers[0].paint,q=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),H=p.tileSize/l.$,G=p.tileID.toUnwrapped(),Q=D.get("text-rotation-alignment")==="map",oe=l.aC(p,1,this.transform.zoom),me=l.aD(this.collisionIndex.transform,p,$.get("text-translate"),$.get("text-translate-anchor")),pe=l.aD(this.collisionIndex.transform,p,$.get("icon-translate"),$.get("icon-translate-anchor")),ge=Ar(Q,this.transform,oe);this.retainedQueryData[w.bucketInstanceId]=new As(w.bucketInstanceId,M,w.sourceLayerIndex,w.index,p.tileID);const _e={bucket:w,layout:D,translationText:me,translationIcon:pe,unwrappedTileID:G,pitchedLabelPlaneMatrix:ge,scale:q,textPixelRatio:H,holdingForFade:p.holdingForSymbolFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:l.an(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(_)for(const Te of w.sortKeyRanges){const{sortKey:be,symbolInstanceStart:Ce,symbolInstanceEnd:Oe}=Te;r.push({sortKey:be,symbolInstanceStart:Ce,symbolInstanceEnd:Oe,parameters:_e})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:_e})}attemptAnchorPlacement(r,u,p,_,w,M,I,D,$,q,H,G,Q,oe,me,pe,ge,_e,Te,be){const Ce=l.aE[r.textAnchor],Oe=[r.textOffset0,r.textOffset1],we=lo(Ce,p,_,Oe,w),Ne=this.collisionIndex.placeCollisionBox(u,G,D,$,q,I,M,pe,H.predicate,Te,we,be);if((!_e||this.collisionIndex.placeCollisionBox(_e,G,D,$,q,I,M,ge,H.predicate,Te,we,be).placeable)&&Ne.placeable){let nt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(nt=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),Q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Q.crossTileID]={textOffset:Oe,width:p,height:_,anchor:Ce,textBoxScale:w,prevAnchor:nt},this.markUsedJustification(oe,Ce,Q,me),oe.allowVerticalPlacement&&(this.markUsedOrientation(oe,me,Q),this.placedOrientations[Q.crossTileID]=me),{shift:we,placedGlyphBoxes:Ne}}}placeLayerBucketPart(r,u,p){const{bucket:_,layout:w,translationText:M,translationIcon:I,unwrappedTileID:D,pitchedLabelPlaneMatrix:$,textPixelRatio:q,holdingForFade:H,collisionBoxArray:G,partiallyEvaluatedTextSize:Q,collisionGroup:oe}=r.parameters,me=w.get("text-optional"),pe=w.get("icon-optional"),ge=l.aF(w,"text-overlap","text-allow-overlap"),_e=ge==="always",Te=l.aF(w,"icon-overlap","icon-allow-overlap"),be=Te==="always",Ce=w.get("text-rotation-alignment")==="map",Oe=w.get("text-pitch-alignment")==="map",we=w.get("icon-text-fit")!=="none",Ne=w.get("symbol-z-order")==="viewport-y",nt=_e&&(be||!_.hasIconData()||pe),We=be&&(_e||!_.hasTextData()||me);!_.collisionArrays&&G&&_.deserializeCollisionBoxes(G);const Ke=this.retainedQueryData[_.bucketInstanceId].tileID,Qe=this._getTerrainElevationFunc(Ke),Tt=this.transform.getFastPathSimpleProjectionMatrix(Ke),At=(yt,Lt,lr)=>{var Hr,Xr;if(u[yt.crossTileID])return;if(H)return void(this.placements[yt.crossTileID]=new dl(!1,!1,!1));let ln=!1,jn=!1,cn=!0,Tr=null,fn={box:null,placeable:!1,offscreen:null,occluded:!1},ai={placeable:!1},$n=null,qn=null,wi=null,ms=0,Ka=0,Gs=0;Lt.textFeatureIndex?ms=Lt.textFeatureIndex:yt.useRuntimeCollisionCircles&&(ms=yt.featureIndex),Lt.verticalTextFeatureIndex&&(Ka=Lt.verticalTextFeatureIndex);const Qa=Lt.textBox;if(Qa){const Ui=zn=>{let on=l.ao.horizontal;if(_.allowVerticalPlacement&&!zn&&this.prevPlacement){const Un=this.prevPlacement.placedOrientations[yt.crossTileID];Un&&(this.placedOrientations[yt.crossTileID]=Un,on=Un,this.markUsedOrientation(_,on,yt))}return on},_o=(zn,on)=>{if(_.allowVerticalPlacement&&yt.numVerticalGlyphVertices>0&&Lt.verticalTextBox){for(const Un of _.writingModes)if(Un===l.ao.vertical?(fn=on(),ai=fn):fn=zn(),fn&&fn.placeable)break}else fn=zn()},xo=yt.textAnchorOffsetStartIndex,Si=yt.textAnchorOffsetEndIndex;if(Si===xo){const zn=(on,Un)=>{const Tn=this.collisionIndex.placeCollisionBox(on,ge,q,Ke,D,Oe,Ce,M,oe.predicate,Qe,void 0,Tt);return Tn&&Tn.placeable&&(this.markUsedOrientation(_,Un,yt),this.placedOrientations[yt.crossTileID]=Un),Tn};_o(()=>zn(Qa,l.ao.horizontal),()=>{const on=Lt.verticalTextBox;return _.allowVerticalPlacement&&yt.numVerticalGlyphVertices>0&&on?zn(on,l.ao.vertical):{box:null,offscreen:null}}),Ui(fn&&fn.placeable)}else{let zn=l.aE[(Xr=(Hr=this.prevPlacement)===null||Hr===void 0?void 0:Hr.variableOffsets[yt.crossTileID])===null||Xr===void 0?void 0:Xr.anchor];const on=(Tn,kh,Ja)=>{const ta=Tn.x2-Tn.x1,pn=Tn.y2-Tn.y1,xa=yt.textBoxScale,Go=we&&Te==="never"?kh:null;let Zo=null,Ih=ge==="never"?1:2,Dh="never";zn&&Ih++;for(let ba=0;ba<Ih;ba++){for(let kc=xo;kc<Si;kc++){const zh=_.textAnchorOffsets.get(kc);if(zn&&zh.textAnchor!==zn)continue;const Ic=this.attemptAnchorPlacement(zh,Tn,ta,pn,xa,Ce,Oe,q,Ke,D,oe,Dh,yt,_,Ja,M,I,Go,Qe);if(Ic&&(Zo=Ic.placedGlyphBoxes,Zo&&Zo.placeable))return ln=!0,Tr=Ic.shift,Zo}zn?zn=null:Dh=ge}return p&&!Zo&&(Zo={box:this.collisionIndex.placeCollisionBox(Qa,"always",q,Ke,D,Oe,Ce,M,oe.predicate,Qe,void 0,Tt).box,offscreen:!1,placeable:!1,occluded:!1}),Zo};_o(()=>on(Qa,Lt.iconBox,l.ao.horizontal),()=>{const Tn=Lt.verticalTextBox;return _.allowVerticalPlacement&&(!fn||!fn.placeable)&&yt.numVerticalGlyphVertices>0&&Tn?on(Tn,Lt.verticalIconBox,l.ao.vertical):{box:null,occluded:!0,offscreen:null}}),fn&&(ln=fn.placeable,cn=fn.offscreen);const Un=Ui(fn&&fn.placeable);if(!ln&&this.prevPlacement){const Tn=this.prevPlacement.variableOffsets[yt.crossTileID];Tn&&(this.variableOffsets[yt.crossTileID]=Tn,this.markUsedJustification(_,Tn.anchor,yt,Un))}}}if($n=fn,ln=$n&&$n.placeable,cn=$n&&$n.offscreen,yt.useRuntimeCollisionCircles&&yt.centerJustifiedTextSymbolIndex>=0){const Ui=_.text.placedSymbolArray.get(yt.centerJustifiedTextSymbolIndex),_o=l.ap(_.textSizeData,Q,Ui),xo=w.get("text-padding");qn=this.collisionIndex.placeCollisionCircles(ge,Ui,_.lineVertexArray,_.glyphOffsetArray,_o,D,$,p,Oe,oe.predicate,yt.collisionCircleDiameter,xo,M,Qe),qn.circles.length&&qn.collisionDetected&&!p&&l.w("Collisions detected, but collision boxes are not shown"),ln=_e||qn.circles.length>0&&!qn.collisionDetected,cn=cn&&qn.offscreen}if(Lt.iconFeatureIndex&&(Gs=Lt.iconFeatureIndex),Lt.iconBox){const Ui=_o=>this.collisionIndex.placeCollisionBox(_o,Te,q,Ke,D,Oe,Ce,I,oe.predicate,Qe,we&&Tr?Tr:void 0,Tt);ai&&ai.placeable&&Lt.verticalIconBox?(wi=Ui(Lt.verticalIconBox),jn=wi.placeable):(wi=Ui(Lt.iconBox),jn=wi.placeable),cn=cn&&wi.offscreen}const Zs=me||yt.numHorizontalGlyphVertices===0&&yt.numVerticalGlyphVertices===0,gs=pe||yt.numIconVertices===0;Zs||gs?gs?Zs||(jn=jn&&ln):ln=jn&&ln:jn=ln=jn&&ln;const Da=jn&&wi.placeable;if(ln&&$n.placeable&&this.collisionIndex.insertCollisionBox($n.box,ge,w.get("text-ignore-placement"),_.bucketInstanceId,ai&&ai.placeable&&Ka?Ka:ms,oe.ID),Da&&this.collisionIndex.insertCollisionBox(wi.box,Te,w.get("icon-ignore-placement"),_.bucketInstanceId,Gs,oe.ID),qn&&ln&&this.collisionIndex.insertCollisionCircles(qn.circles,ge,w.get("text-ignore-placement"),_.bucketInstanceId,ms,oe.ID),p&&this.storeCollisionData(_.bucketInstanceId,lr,Lt,$n,wi,qn),yt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[yt.crossTileID]=new dl((ln||nt)&&!($n!=null&&$n.occluded),(jn||We)&&!(wi!=null&&wi.occluded),cn||_.justReloaded),u[yt.crossTileID]=!0};if(Ne){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const yt=_.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Lt=yt.length-1;Lt>=0;--Lt){const lr=yt[Lt];At(_.symbolInstances.get(lr),_.collisionArrays[lr],lr)}}else for(let yt=r.symbolInstanceStart;yt<r.symbolInstanceEnd;yt++)At(_.symbolInstances.get(yt),_.collisionArrays[yt],yt);_.justReloaded=!1}storeCollisionData(r,u,p,_,w,M){if(p.textBox||p.iconBox){let I,D;this.collisionBoxArrays.has(r)?I=this.collisionBoxArrays.get(r):(I=new Map,this.collisionBoxArrays.set(r,I)),I.has(u)?D=I.get(u):(D={text:null,icon:null},I.set(u,D)),p.textBox&&(D.text=_.box),p.iconBox&&(D.icon=w.box)}if(M){let I=this.collisionCircleArrays[r];I===void 0&&(I=this.collisionCircleArrays[r]=[]);for(let D=0;D<M.circles.length;D+=4)I.push(M.circles[D+0]-Pn),I.push(M.circles[D+1]-Pn),I.push(M.circles[D+2]),I.push(M.collisionDetected?1:0)}}markUsedJustification(r,u,p,_){let w;w=_===l.ao.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[l.aG(u)];const M=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const I of M)I>=0&&(r.text.placedSymbolArray.get(I).crossTileID=w>=0&&I!==w?0:p.crossTileID)}markUsedOrientation(r,u,p){const _=u===l.ao.horizontal||u===l.ao.horizontalOnly?u:0,w=u===l.ao.vertical?u:0,M=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const I of M)r.text.placedSymbolArray.get(I).placedOrientation=_;p.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const _=u?u.symbolFadeChange(r):1,w=u?u.opacities:{},M=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(const D in this.placements){const $=this.placements[D],q=w[D];q?(this.opacities[D]=new hl(q,_,$.text,$.icon),p=p||$.text!==q.text.placed||$.icon!==q.icon.placed):(this.opacities[D]=new hl(null,_,$.text,$.icon,$.skipFade),p=p||$.text||$.icon)}for(const D in w){const $=w[D];if(!this.opacities[D]){const q=new hl($,_,!1,!1);q.isHidden()||(this.opacities[D]=q,p=p||$.text.placed||$.icon.placed)}}for(const D in M)this.variableOffsets[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.variableOffsets[D]=M[D]);for(const D in I)this.placedOrientations[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.placedOrientations[D]=I[D]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const p={};for(const _ of u){const w=_.getBucket(r);w&&_.latestFeatureIndex&&r.id===w.layerIds[0]&&this.updateBucketOpacities(w,_.tileID,p,_.collisionBoxArray)}}updateBucketOpacities(r,u,p,_){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const w=r.layers[0],M=w.layout,I=new hl(null,0,!1,!1,!0),D=M.get("text-allow-overlap"),$=M.get("icon-allow-overlap"),q=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),H=M.get("text-rotation-alignment")==="map",G=M.get("text-pitch-alignment")==="map",Q=M.get("icon-text-fit")!=="none",oe=new hl(null,0,D&&($||!r.hasIconData()||M.get("icon-optional")),$&&(D||!r.hasTextData()||M.get("text-optional")),!0);!r.collisionArrays&&_&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(_);const me=(ge,_e,Te)=>{for(let be=0;be<_e/4;be++)ge.opacityVertexArray.emplaceBack(Te);ge.hasVisibleVertices=ge.hasVisibleVertices||Te!==ns},pe=this.collisionBoxArrays.get(r.bucketInstanceId);for(let ge=0;ge<r.symbolInstances.length;ge++){const _e=r.symbolInstances.get(ge),{numHorizontalGlyphVertices:Te,numVerticalGlyphVertices:be,crossTileID:Ce}=_e;let Oe=this.opacities[Ce];p[Ce]?Oe=I:Oe||(Oe=oe,this.opacities[Ce]=Oe),p[Ce]=!0;const we=_e.numIconVertices>0,Ne=this.placedOrientations[_e.crossTileID],nt=Ne===l.ao.vertical,We=Ne===l.ao.horizontal||Ne===l.ao.horizontalOnly;if(Te>0||be>0){const Qe=ha(Oe.text);me(r.text,Te,nt?ns:Qe),me(r.text,be,We?ns:Qe);const Tt=Oe.text.isHidden();[_e.rightJustifiedTextSymbolIndex,_e.centerJustifiedTextSymbolIndex,_e.leftJustifiedTextSymbolIndex].forEach(Lt=>{Lt>=0&&(r.text.placedSymbolArray.get(Lt).hidden=Tt||nt?1:0)}),_e.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(_e.verticalPlacedTextSymbolIndex).hidden=Tt||We?1:0);const At=this.variableOffsets[_e.crossTileID];At&&this.markUsedJustification(r,At.anchor,_e,Ne);const yt=this.placedOrientations[_e.crossTileID];yt&&(this.markUsedJustification(r,"left",_e,yt),this.markUsedOrientation(r,yt,_e))}if(we){const Qe=ha(Oe.icon),Tt=!(Q&&_e.verticalPlacedIconSymbolIndex&&nt);_e.placedIconSymbolIndex>=0&&(me(r.icon,_e.numIconVertices,Tt?Qe:ns),r.icon.placedSymbolArray.get(_e.placedIconSymbolIndex).hidden=Oe.icon.isHidden()),_e.verticalPlacedIconSymbolIndex>=0&&(me(r.icon,_e.numVerticalIconVertices,Tt?ns:Qe),r.icon.placedSymbolArray.get(_e.verticalPlacedIconSymbolIndex).hidden=Oe.icon.isHidden())}const Ke=pe&&pe.has(ge)?pe.get(ge):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Qe=r.collisionArrays[ge];if(Qe){let Tt=new l.P(0,0);if(Qe.textBox||Qe.verticalTextBox){let At=!0;if(q){const yt=this.variableOffsets[Ce];yt?(Tt=lo(yt.anchor,yt.width,yt.height,yt.textOffset,yt.textBoxScale),H&&Tt._rotate(G?-this.transform.bearingInRadians:this.transform.bearingInRadians)):At=!1}if(Qe.textBox||Qe.verticalTextBox){let yt;Qe.textBox&&(yt=nt),Qe.verticalTextBox&&(yt=We),eh(r.textCollisionBox.collisionVertexArray,Oe.text.placed,!At||yt,Ke.text,Tt.x,Tt.y)}}if(Qe.iconBox||Qe.verticalIconBox){const At=!!(!We&&Qe.verticalIconBox);let yt;Qe.iconBox&&(yt=At),Qe.verticalIconBox&&(yt=!At),eh(r.iconCollisionBox.collisionVertexArray,Oe.icon.placed,yt,Ke.icon,Q?Tt.x:0,Q?Tt.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>r}setStale(){this.stale=!0}}function eh(x,r,u,p,_,w){p&&p.length!==0||(p=[0,0,0,0]);const M=p[0]-Pn,I=p[1]-Pn,D=p[2]-Pn,$=p[3]-Pn;x.emplaceBack(r?1:0,u?1:0,_||0,w||0,M,I),x.emplaceBack(r?1:0,u?1:0,_||0,w||0,D,I),x.emplaceBack(r?1:0,u?1:0,_||0,w||0,D,$),x.emplaceBack(r?1:0,u?1:0,_||0,w||0,M,$)}const Pa=Math.pow(2,25),fl=Math.pow(2,24),Rf=Math.pow(2,17),th=Math.pow(2,16),Lf=Math.pow(2,9),rh=Math.pow(2,8),Bf=Math.pow(2,1);function ha(x){if(x.opacity===0&&!x.placed)return 0;if(x.opacity===1&&x.placed)return 4294967295;const r=x.placed?1:0,u=Math.floor(127*x.opacity);return u*Pa+r*fl+u*Rf+r*th+u*Lf+r*rh+u*Bf+r}const ns=0;class nh{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,p,_,w){const M=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(M,_,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((I,D)=>I.sortKey-D.sortKey));this._currentPartIndex<M.length;)if(u.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,w())return!0;return!1}}class ih{constructor(r,u,p,_,w,M,I,D){this.placement=new Nf(r,u,M,I,D),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(r,u,p){const _=B.now(),w=()=>!this._forceFullPlacement&&B.now()-_>2;for(;this._currentPlacementIndex>=0;){const M=u[r[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=I)&&(!M.maxzoom||M.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new nh(M)),this._inProgressLayer.continuePlacement(p[M.source],this.placement,this._showCollisionBoxes,M,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const $a=512/l.$/2;class ah{constructor(r,u,p){this.tileID=r,this.bucketInstanceId=p,this._symbolsByKey={};const _=new Map;for(let w=0;w<u.length;w++){const M=u.get(w),I=M.key,D=_.get(I);D?D.push(M):_.set(I,[M])}for(const[w,M]of _){const I={positions:M.map(D=>({x:Math.floor(D.anchorX*$a),y:Math.floor(D.anchorY*$a)})),crossTileIDs:M.map(D=>D.crossTileID)};if(I.positions.length>128){const D=new l.aI(I.positions.length,16,Uint16Array);for(const{x:$,y:q}of I.positions)D.add($,q);D.finish(),delete I.positions,I.index=D}this._symbolsByKey[w]=I}}getScaledCoordinates(r,u){const{x:p,y:_,z:w}=this.tileID.canonical,{x:M,y:I,z:D}=u.canonical,$=$a/Math.pow(2,D-w),q=(I*l.$+r.anchorY)*$,H=_*l.$*$a;return{x:Math.floor((M*l.$+r.anchorX)*$-p*l.$*$a),y:Math.floor(q-H)}}findMatches(r,u,p){const _=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let w=0;w<r.length;w++){const M=r.get(w);if(M.crossTileID)continue;const I=this._symbolsByKey[M.key];if(!I)continue;const D=this.getScaledCoordinates(M,u);if(I.index){const $=I.index.range(D.x-_,D.y-_,D.x+_,D.y+_).sort();for(const q of $){const H=I.crossTileIDs[q];if(!p[H]){p[H]=!0,M.crossTileID=H;break}}}else if(I.positions)for(let $=0;$<I.positions.length;$++){const q=I.positions[$],H=I.crossTileIDs[$];if(Math.abs(q.x-D.x)<=_&&Math.abs(q.y-D.y)<=_&&!p[H]){p[H]=!0,M.crossTileID=H;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Ff{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class jo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const p in this.indexes){const _=this.indexes[p],w={};for(const M in _){const I=_[M];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),w[I.tileID.key]=I}this.indexes[p]=w}this.lng=r}addBucket(r,u,p){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let w=0;w<u.symbolInstances.length;w++)u.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const _=this.usedCrossTileIDs[r.overscaledZ];for(const w in this.indexes){const M=this.indexes[w];if(Number(w)>r.overscaledZ)for(const I in M){const D=M[I];D.tileID.isChildOf(r)&&D.findMatches(u.symbolInstances,r,_)}else{const I=M[r.scaledTo(Number(w)).key];I&&I.findMatches(u.symbolInstances,r,_)}}for(let w=0;w<u.symbolInstances.length;w++){const M=u.symbolInstances.get(w);M.crossTileID||(M.crossTileID=p.generate(),_[M.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new ah(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const p of u.getCrossTileIDsLists())for(const _ of p)delete this.usedCrossTileIDs[r][_]}removeStaleBuckets(r){let u=!1;for(const p in this.indexes){const _=this.indexes[p];for(const w in _)r[_[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,_[w]),delete _[w],u=!0)}return u}}class Qc{constructor(){this.layerIndexes={},this.crossTileIDs=new Ff,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,p){let _=this.layerIndexes[r.id];_===void 0&&(_=this.layerIndexes[r.id]=new jo);let w=!1;const M={};_.handleWrapJump(p);for(const I of u){const D=I.getBucket(r);D&&r.id===D.layerIds[0]&&(D.bucketInstanceId||(D.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(I.tileID,D,this.crossTileIDs)&&(w=!0),M[D.bucketInstanceId]=!0)}return _.removeStaleBuckets(M)&&(w=!0),w}pruneUnusedLayers(r){const u={};r.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}var oh="void main() {fragColor=vec4(1.0);}";const Ri={prelude:Mr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Mr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Mr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Mr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Mr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Mr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Mr(oh,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Mr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Mr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Mr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Mr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Mr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Mr(oh,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Mr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Mr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Mr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Mr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Mr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Mr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Mr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Mr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Mr(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Mr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Mr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Mr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Mr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Mr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Mr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Mr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Mr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Mr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Mr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Mr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Mr(x,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=r.match(/in ([\w]+) ([\w]+)/g),_=x.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=w?w.concat(_):_,I={};return{fragmentSource:x=x.replace(u,(D,$,q,H,G)=>(I[G]=!0,$==="define"?`
#ifndef HAS_UNIFORM_u_${G}
in ${q} ${H} ${G};
#else
uniform ${q} ${H} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${q} ${H} ${G} = u_${G};
#endif
`)),vertexSource:r=r.replace(u,(D,$,q,H,G)=>{const Q=H==="float"?"vec2":"vec4",oe=G.match(/color/)?"color":Q;return I[G]?$==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
in ${q} ${Q} a_${G};
out ${q} ${H} ${G};
#else
uniform ${q} ${H} u_${G};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${q} ${H} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${oe}(a_${G}, u_${G}_t);
#else
    ${q} ${H} ${G} = u_${G};
#endif
`:$==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
in ${q} ${Q} a_${G};
#else
uniform ${q} ${H} u_${G};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${q} ${H} ${G} = a_${G};
#else
    ${q} ${H} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${q} ${H} ${G} = unpack_mix_${oe}(a_${G}, u_${G}_t);
#else
    ${q} ${H} ${G} = u_${G};
#endif
`}),staticAttributes:p,staticUniforms:M}}class uc{constructor(r,u,p){this.vertexBuffer=r,this.indexBuffer=u,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ki=l.aJ([{name:"a_pos",type:"Int16",components:2}]);const Oo="#define PROJECTION_MERCATOR",xr="mercator";class pl{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return xr}get shaderDefine(){return Oo}get shaderPreludeCode(){return Ri.projectionMercator}get vertexShaderPreludeCode(){return Ri.projectionMercator.vertexSource}get subdivisionGranularity(){return l.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,u,p,_,w){if(this._cachedMesh)return this._cachedMesh;const M=new l.aL;M.emplaceBack(0,0),M.emplaceBack(l.$,0),M.emplaceBack(0,l.$),M.emplaceBack(l.$,l.$);const I=r.createVertexBuffer(M,Ki.members),D=l.aM.simpleSegment(0,0,4,2),$=new l.aN;$.emplaceBack(1,0,2),$.emplaceBack(1,2,3);const q=r.createIndexBuffer($);return this._cachedMesh=new uc(I,q,D),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class ko{constructor(r=0,u=0,p=0,_=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=p,this.right=_}interpolate(r,u,p){return u.top!=null&&r.top!=null&&(this.top=l.C.number(r.top,u.top,p)),u.bottom!=null&&r.bottom!=null&&(this.bottom=l.C.number(r.bottom,u.bottom,p)),u.left!=null&&r.left!=null&&(this.left=l.C.number(r.left,u.left,p)),u.right!=null&&r.right!=null&&(this.right=l.C.number(r.right,u.right,p)),this}getCenter(r,u){const p=l.ah((this.left+r-this.right)/2,0,r),_=l.ah((this.top+u-this.bottom)/2,0,u);return new l.P(p,_)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new ko(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function co(x,r){if(!x.renderWorldCopies||x.lngRange)return;const u=r.lng-x.center.lng;r.lng+=u>180?-360:u<-180?360:0}function Qi(x){return Math.max(0,Math.floor(x))}class hi{constructor(r,u,p,_,w,M){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=M===void 0||!!M,this._minZoom=u||0,this._maxZoom=p||22,this._minPitch=_??0,this._maxPitch=w??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new l.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Qi(this._zoom),this._scale=l.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new ko,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,u,p){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=Qi(this._zoom),this._scale=l.af(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new ko(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!p&&r.autoCalculateNearFarZ,u&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const u=l.aO(r,-180,180)*Math.PI/180;var p,_,w,M,I,D,$,q,H;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=C(),p=this._rotationMatrix,w=-this._bearingInRadians,M=(_=this._rotationMatrix)[0],I=_[1],D=_[2],$=_[3],q=Math.sin(w),H=Math.cos(w),p[0]=M*H+D*q,p[1]=I*H+$*q,p[2]=M*-q+D*H,p[3]=I*-q+$*H)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const u=l.ah(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const u=r/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return l.aP(this._fovInRadians)}setFov(r){r=l.ah(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=l.ae(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const u=this.getConstrained(this._center,r).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=l.af(u),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,u){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,p){this._unmodified=!1,this._edgeInsets.interpolate(r,u,p),this._constrain(),this._calcMatrices()}resize(r,u,p=!0){this._width=r,this._height=u,p&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new fr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-l.ai,l.ai])}getConstrained(r,u){return this._callbacks.getConstrained(r,u)}getCameraQueryGeometry(r,u){if(u.length===1)return[u[0],r];{const{minX:p,minY:_,maxX:w,maxY:M}=l.a2.fromPoints(u).extend(r);return[new l.P(p,_),new l.P(w,_),new l.P(w,M),new l.P(p,M),new l.P(p,_)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:u,zoom:p}=this.getConstrained(this.center,this.zoom);this.setCenter(u),this.setZoom(p),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=l.ag(new Float64Array(16));l.N(r,r,[this._width/2,-this._height/2,1]),l.M(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=l.ag(new Float64Array(16)),l.N(r,r,[1,-1,1]),l.M(r,r,[-1,-1,0]),l.N(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,u,p,_){const w=p!==void 0?p:this.bearing,M=_=_!==void 0?_:this.pitch,I=l.a1.fromLngLat(r,u),D=-Math.cos(l.ae(M)),$=Math.sin(l.ae(M)),q=$*Math.sin(l.ae(w)),H=-$*Math.cos(l.ae(w));let G=this.elevation;const Q=u-G;let oe;D*Q>=0||Math.abs(D)<.1?(oe=1e4,G=u+oe*D):oe=-Q/D;let me,pe,ge=l.aQ(1,I.y),_e=0;do{if(_e+=1,_e>10)break;pe=oe/ge,me=new l.a1(I.x+q*pe,I.y+H*pe),ge=1/me.meterInMercatorCoordinateUnits()}while(Math.abs(oe-pe*ge)>1e-12);return{center:me.toLngLat(),elevation:G,zoom:l.ak(this.height/2/Math.tan(this.fovInRadians/2)/pe/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const u=l.aj(1,this.center.lat)*this.worldSize,p=this.cameraToCenterDistance/u,_=l.a1.fromLngLat(this.center,this.elevation),w=ct(this.center,this.elevation,this.pitch,this.bearing,p);this._elevation=r;const M=this.calculateCenterFromCameraLngLatAlt(w.toLngLat(),l.aQ(w.z,_.y),this.bearing,this.pitch);this._elevation=M.elevation,this._center=M.center,this.setZoom(M.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=l.aj(1,this.center.lat)*this.worldSize;return ct(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const u=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/u,r.canonical.y/u,1/u/l.$,1/u/l.$]}}class di{constructor(r,u){this.min=r,this.max=u,this.center=l.aR([],l.aS([],this.min,this.max),.5)}quadrant(r){const u=[r%2==0,r<2],p=l.aT(this.min),_=l.aT(this.max);for(let w=0;w<u.length;w++)p[w]=u[w]?this.min[w]:this.center[w],_[w]=u[w]?this.center[w]:this.max[w];return _[2]=this.max[2],new di(p,_)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let u=!0;for(let p=0;p<r.planes.length;p++){const _=this.intersectsPlane(r.planes[p]);if(_===0)return 0;_===1&&(u=!1)}return u?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let u=r[3],p=r[3];for(let _=0;_<3;_++)r[_]>0?(u+=r[_]*this.min[_],p+=r[_]*this.max[_]):(p+=r[_]*this.min[_],u+=r[_]*this.max[_]);return u>=0?2:p<0?0:1}}class Kn{distanceToTile2d(r,u,p,_){const w=_.distanceX([r,u]),M=_.distanceY([r,u]);return Math.hypot(w,M)}getWrap(r,u,p){return p}getTileBoundingVolume(r,u,p,_){var w,M;let I=0,D=0;if(_!=null&&_.terrain){const q=new l.Z(r.z,u,r.z,r.x,r.y),H=_.terrain.getMinMaxElevation(q);I=(w=H.minElevation)!==null&&w!==void 0?w:Math.min(0,p),D=(M=H.maxElevation)!==null&&M!==void 0?M:Math.max(0,p)}const $=1<<r.z;return new di([u+r.x/$,r.y/$,I],[u+(r.x+1)/$,(r.y+1)/$,D])}allowVariableZoom(r,u){const p=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,_=l.ah(78.5-p/2,0,60);return!!u.terrain||r.pitch>_}allowWorldCopies(){return!0}prepareNextFrame(){}}class Br{constructor(r,u,p){this.points=r,this.planes=u,this.aabb=p}static fromInvProjectionMatrix(r,u=1,p=0,_,w){const M=w?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],I=Math.pow(2,p),D=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(G=>function(Q,oe,me,pe){const ge=l.aw([],Q,oe),_e=1/ge[3]/me*pe;return l.aY(ge,ge,[_e,_e,1/ge[3],_e])}(G,r,u,I));_&&function(G,Q,oe,me){const pe=me?4:0,ge=me?0:4;let _e=0;const Te=[],be=[];for(let we=0;we<4;we++){const Ne=l.aU([],G[we+ge],G[we+pe]),nt=l.aZ(Ne);l.aR(Ne,Ne,1/nt),Te.push(nt),be.push(Ne)}for(let we=0;we<4;we++){const Ne=l.a_(G[we+pe],be[we],oe);_e=Ne!==null&&Ne>=0?Math.max(_e,Ne):Math.max(_e,Te[we])}const Ce=function(we,Ne){const nt=l.aU([],we[Ne[0]],we[Ne[1]]),We=l.aU([],we[Ne[2]],we[Ne[1]]),Ke=[0,0,0,0];return l.aV(Ke,l.aW([],nt,We)),Ke[3]=-l.aX(Ke,we[Ne[0]]),Ke}(G,Q),Oe=function(we,Ne){const nt=l.a$(we),We=l.b0([],we,1/nt),Ke=l.aU([],Ne,l.aR([],We,l.aX(Ne,We))),Qe=l.a$(Ke);if(Qe>0){const Tt=Math.sqrt(1-We[3]*We[3]),At=l.aR([],We,-We[3]),yt=l.aS([],At,l.aR([],Ke,Tt/Qe));return l.b1(Ne,yt)}return null}(oe,Ce);if(Oe!==null){const we=Oe/l.aX(be[0],Ce);_e=Math.min(_e,we)}for(let we=0;we<4;we++){const Ne=Math.min(_e,Te[we]);G[we+ge]=[G[we+pe][0]+be[we][0]*Ne,G[we+pe][1]+be[we][1]*Ne,G[we+pe][2]+be[we][2]*Ne,1]}}(D,M[0],_,w);const $=M.map(G=>{const Q=l.aU([],D[G[0]],D[G[1]]),oe=l.aU([],D[G[2]],D[G[1]]),me=l.aV([],l.aW([],Q,oe)),pe=-l.aX(me,D[G[1]]);return me.concat(pe)}),q=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],H=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const G of D)for(let Q=0;Q<3;Q++)q[Q]=Math.min(q[Q],G[Q]),H[Q]=Math.max(H[Q],G[Q]);return new Br(D,$,new di(q,H))}}class Ms{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,u,p){return this._helper.interpolatePadding(r,u,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,u,p=!0){this._helper.resize(r,u,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,u){this._helper.overrideNearFarZ(r,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,u){}constructor(r,u,p,_,w){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new hi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(M,I)=>this.getConstrained(M,I)},r,u,p,_,w),this._coveringTilesDetailsProvider=new Kn}clone(){const r=new Ms;return r.apply(this),r}apply(r,u,p){this._helper.apply(r,u,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const u=[new l.b2(0,r)];if(this._helper._renderWorldCopies){const p=this.screenPointToMercatorCoordinate(new l.P(0,0)),_=this.screenPointToMercatorCoordinate(new l.P(this._helper._width,0)),w=this.screenPointToMercatorCoordinate(new l.P(this._helper._width,this._helper._height)),M=this.screenPointToMercatorCoordinate(new l.P(0,this._helper._height)),I=Math.floor(Math.min(p.x,_.x,w.x,M.x)),D=Math.floor(Math.max(p.x,_.x,w.x,M.x)),$=1;for(let q=I-$;q<=D+$;q++)q!==0&&u.push(new l.b2(q,r))}return u}getCameraFrustum(){return Br.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const u=this.screenPointToLocation(this.centerPoint,r),p=r?r.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(r,u){const p=l.aj(this.elevation,this.center.lat),_=this.screenPointToMercatorCoordinateAtZ(u,p),w=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),M=l.a1.fromLngLat(r),I=new l.a1(M.x-(_.x-w.x),M.y-(_.y-w.y));this.setCenter(I==null?void 0:I.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,u){return u?this.coordinatePoint(l.a1.fromLngLat(r),u.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(l.a1.fromLngLat(r))}screenPointToLocation(r,u){var p;return(p=this.screenPointToMercatorCoordinate(r,u))===null||p===void 0?void 0:p.toLngLat()}screenPointToMercatorCoordinate(r,u){if(u){const p=u.pointCoordinate(r);if(p!=null)return p}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,u){const p=u||0,_=[r.x,r.y,0,1],w=[r.x,r.y,1,1];l.aw(_,_,this._pixelMatrixInverse),l.aw(w,w,this._pixelMatrixInverse);const M=_[3],I=w[3],D=_[1]/M,$=w[1]/I,q=_[2]/M,H=w[2]/I,G=q===H?0:(p-q)/(H-q);return new l.a1(l.C.number(_[0]/M,w[0]/I,G)/this.worldSize,l.C.number(D,$,G)/this.worldSize,p)}coordinatePoint(r,u=0,p=this._pixelMatrix){const _=[r.x*this.worldSize,r.y*this.worldSize,u,1];return l.aw(_,_,p),new l.P(_[0]/_[3],_[1]/_[3])}getBounds(){const r=Math.max(0,this._helper._height/2-He(this));return new fr().extend(this.screenPointToLocation(new l.P(0,r))).extend(this.screenPointToLocation(new l.P(this._helper._width,r))).extend(this.screenPointToLocation(new l.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new l.P(0,this._helper._height)))}isPointOnMapSurface(r,u){return u?u.pointCoordinate(r)!=null:r.y>this.height/2-He(this)}calculatePosMatrix(r,u=!1,p){var _;const w=(_=r.key)!==null&&_!==void 0?_:l.b3(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),M=u?this._alignedPosMatrixCache:this._posMatrixCache;if(M.has(w)){const $=M.get(w);return p?$.f32:$.f64}const I=Le(r,this.worldSize);l.O(I,u?this._alignedProjMatrix:this._viewProjMatrix,I);const D={f64:I,f32:new Float32Array(I)};return M.set(w,D),p?D.f32:D.f64}calculateFogMatrix(r){const u=r.key,p=this._fogMatrixCacheF32;if(p.has(u))return p.get(u);const _=Le(r,this.worldSize);return l.O(_,this._fogMatrix,_),p.set(u,new Float32Array(_)),p.get(u)}getConstrained(r,u){u=l.ah(+u,this.minZoom,this.maxZoom);const p={center:new l.S(r.lng,r.lat),zoom:u};let _=this._helper._lngRange;!this._helper._renderWorldCopies&&_===null&&(_=[-179.9999999999,179.9999999999]);const w=this.tileSize*l.af(p.zoom);let M=0,I=w,D=0,$=w,q=0,H=0;const{x:G,y:Q}=this.size;if(this._helper._latRange){const Te=this._helper._latRange;M=l.U(Te[1])*w,I=l.U(Te[0])*w,I-M<Q&&(q=Q/(I-M))}_&&(D=l.aO(l.V(_[0])*w,0,w),$=l.aO(l.V(_[1])*w,0,w),$<D&&($+=w),$-D<G&&(H=G/($-D)));const{x:oe,y:me}=Ee(w,r);let pe,ge;const _e=Math.max(H||0,q||0);if(_e){const Te=new l.P(H?($+D)/2:oe,q?(I+M)/2:me);return p.center=ze(w,Te).wrap(),p.zoom+=l.ak(_e),p}if(this._helper._latRange){const Te=Q/2;me-Te<M&&(ge=M+Te),me+Te>I&&(ge=I-Te)}if(_){const Te=(D+$)/2;let be=oe;this._helper._renderWorldCopies&&(be=l.aO(oe,Te-w/2,Te+w/2));const Ce=G/2;be-Ce<D&&(pe=D+Ce),be+Ce>$&&(pe=$-Ce)}if(pe!==void 0||ge!==void 0){const Te=new l.P(pe??oe,ge??me);p.center=ze(w,Te).wrap()}return p}calculateCenterFromCameraLngLatAlt(r,u,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(r,u,p,_)}_calculateNearFarZIfNeeded(r,u,p){if(!this._helper.autoCalculateNearFarZ)return;const _=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),w=r-_*this._helper._pixelPerMeter/Math.cos(u),M=_<0?w:r,I=Math.PI/2+this.pitchInRadians,D=l.ae(this.fov)*(Math.abs(Math.cos(l.ae(this.roll)))*this.height+Math.abs(Math.sin(l.ae(this.roll)))*this.width)/this.height*(.5+p.y/this.height),$=Math.sin(D)*M/Math.sin(l.ah(Math.PI-I-D,.01,Math.PI-.01)),q=He(this),H=Math.atan(q/this._helper.cameraToCenterDistance),G=l.ae(.75),Q=H>G?2*H*(.5+p.y/(2*q)):G,oe=Math.sin(Q)*M/Math.sin(l.ah(Math.PI-I-Q,.01,Math.PI-.01)),me=Math.min($,oe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*me+M),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,u=Ee(this.worldSize,this.center),p=u.x,_=u.y;this._helper._pixelPerMeter=l.aj(1,this.center.lat)*this.worldSize;const w=l.ae(Math.min(this.pitch,Se)),M=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(w));let I;this._calculateNearFarZIfNeeded(M,w,r),I=new Float64Array(16),l.b4(I,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),l.aq(this._invProjMatrix,I),I[8]=2*-r.x/this._helper._width,I[9]=2*r.y/this._helper._height,this._projectionMatrix=l.b5(I),l.N(I,I,[1,-1,1]),l.M(I,I,[0,0,-this._helper.cameraToCenterDistance]),l.b6(I,I,-this.rollInRadians),l.b7(I,I,this.pitchInRadians),l.b6(I,I,-this.bearingInRadians),l.M(I,I,[-p,-_,0]),this._mercatorMatrix=l.N([],I,[this.worldSize,this.worldSize,this.worldSize]),l.N(I,I,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=l.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I),l.M(I,I,[0,0,-this.elevation]),this._viewProjMatrix=I,this._invViewProjMatrix=l.aq([],I);const D=[0,0,-1,1];l.aw(D,D,this._invViewProjMatrix),this._cameraPosition=[D[0]/D[3],D[1]/D[3],D[2]/D[3]],this._fogMatrix=new Float64Array(16),l.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,M,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,l.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),l.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),l.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),l.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),l.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),l.M(this._fogMatrix,this._fogMatrix,[-p,-_,0]),l.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),l.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=l.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I);const $=this._helper._width%2/2,q=this._helper._height%2/2,H=Math.cos(this.bearingInRadians),G=Math.sin(-this.bearingInRadians),Q=p-Math.round(p)+H*$+G*q,oe=_-Math.round(_)+H*q+G*$,me=new Float64Array(I);if(l.M(me,me,[Q>.5?Q-1:Q,oe>.5?oe-1:oe,0]),this._alignedProjMatrix=me,I=l.aq(new Float64Array(16),this._pixelMatrix),!I)throw new Error("failed to invert matrix");this._pixelMatrixInverse=I,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new l.P(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.aw(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=l.aj(1,this.center.lat)*this.worldSize;return ct(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,u){const p=l.a1.fromLngLat(r),_=[p.x*this.worldSize,p.y*this.worldSize,u,1];return l.aw(_,_,this._viewProjMatrix),_[2]/_[3]}getProjectionData(r){const{overscaledTileID:u,aligned:p,applyTerrainMatrix:_}=r,w=this._helper.getMercatorTileCoordinates(u),M=u?this.calculatePosMatrix(u,p,!0):null;let I;return I=u&&u.terrainRttPosMatrix32f&&_?u.terrainRttPosMatrix32f:M||l.b8(),{mainMatrix:I,tileMercatorCoords:w,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:I}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,u,p){return 1}transformLightDirection(r){return l.aT(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,u,p,_){const w=this.calculatePosMatrix(p);let M;_?(M=[r,u,_(r,u),1],l.aw(M,M,w)):(M=[r,u,0,1],ul(M,M,w));const I=M[3];return{point:new l.P(M[0]/I,M[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}populateCache(r){for(const u of r)this.calculatePosMatrix(u)}getMatrixForModel(r,u){const p=l.a1.fromLngLat(r,u),_=p.meterInMercatorCoordinateUnits(),w=l.b9();return l.M(w,w,[p.x,p.y,p.z]),l.b6(w,w,Math.PI),l.b7(w,w,Math.PI/2),l.N(w,w,[-_,_,_]),w}getProjectionDataForCustomLayer(r=!0){const u=new l.Z(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:r}),_=Le(u,this.worldSize);l.O(_,this._viewProjMatrix,_),p.tileMercatorCoords=[0,0,1,1];const w=[l.$,l.$,this.worldSize/this._helper.pixelsPerMeter],M=l.ba();return l.N(M,_,w),p.fallbackMatrix=M,p.mainMatrix=M,p}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function fi(){l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ti(x){if(x.useSlerp)if(x.k<1){const r=l.bb(x.startEulerAngles.roll,x.startEulerAngles.pitch,x.startEulerAngles.bearing),u=l.bb(x.endEulerAngles.roll,x.endEulerAngles.pitch,x.endEulerAngles.bearing),p=new Float64Array(4);l.bc(p,r,u,x.k);const _=l.bd(p);x.tr.setRoll(_.roll),x.tr.setPitch(_.pitch),x.tr.setBearing(_.bearing)}else x.tr.setRoll(x.endEulerAngles.roll),x.tr.setPitch(x.endEulerAngles.pitch),x.tr.setBearing(x.endEulerAngles.bearing);else x.tr.setRoll(l.C.number(x.startEulerAngles.roll,x.endEulerAngles.roll,x.k)),x.tr.setPitch(l.C.number(x.startEulerAngles.pitch,x.endEulerAngles.pitch,x.k)),x.tr.setBearing(l.C.number(x.startEulerAngles.bearing,x.endEulerAngles.bearing,x.k))}function Li(x,r,u,p,_){const w=_.padding,M=Ee(_.worldSize,u.getNorthWest()),I=Ee(_.worldSize,u.getNorthEast()),D=Ee(_.worldSize,u.getSouthEast()),$=Ee(_.worldSize,u.getSouthWest()),q=l.ae(-p),H=M.rotate(q),G=I.rotate(q),Q=D.rotate(q),oe=$.rotate(q),me=new l.P(Math.max(H.x,G.x,oe.x,Q.x),Math.max(H.y,G.y,oe.y,Q.y)),pe=new l.P(Math.min(H.x,G.x,oe.x,Q.x),Math.min(H.y,G.y,oe.y,Q.y)),ge=me.sub(pe),_e=(_.width-(w.left+w.right+r.left+r.right))/ge.x,Te=(_.height-(w.top+w.bottom+r.top+r.bottom))/ge.y;if(Te<0||_e<0)return void fi();const be=Math.min(l.ak(_.scale*Math.min(_e,Te)),x.maxZoom),Ce=l.P.convert(x.offset),Oe=new l.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(l.ae(p)),we=Ce.add(Oe).mult(_.scale/l.af(be));return{center:ze(_.worldSize,M.add(D).div(2).sub(we)),zoom:be,bearing:p}}class Ps{get useGlobeControls(){return!1}handlePanInertia(r,u){const p=r.mag(),_=Math.abs(He(u));return{easingOffset:r.mult(Math.min(.75*_/p,1)),easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(r,u){r.bearingDelta&&u.setBearing(u.bearing+r.bearingDelta),r.pitchDelta&&u.setPitch(u.pitch+r.pitchDelta),r.rollDelta&&u.setRoll(u.roll+r.rollDelta),r.zoomDelta&&u.setZoom(u.zoom+r.zoomDelta)}handleMapControlsPan(r,u,p){r.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(p,r.around)}cameraForBoxAndBearing(r,u,p,_,w){return Li(r,u,p,_,w)}handleJumpToCenterZoom(r,u){r.zoom!==(u.zoom!==void 0?+u.zoom:r.zoom)&&r.setZoom(+u.zoom),u.center!==void 0&&r.setCenter(l.S.convert(u.center))}handleEaseTo(r,u){const p=r.zoom,_=r.padding,w={roll:r.roll,pitch:r.pitch,bearing:r.bearing},M={roll:u.roll===void 0?r.roll:u.roll,pitch:u.pitch===void 0?r.pitch:u.pitch,bearing:u.bearing===void 0?r.bearing:u.bearing},I=u.zoom!==void 0,D=!r.isPaddingEqual(u.padding);let $=!1;const q=I?+u.zoom:r.zoom;let H=r.centerPoint.add(u.offsetAsPoint);const G=r.screenPointToLocation(H),{center:Q,zoom:oe}=r.getConstrained(l.S.convert(u.center||G),q??p);co(r,Q);const me=Ee(r.worldSize,G),pe=Ee(r.worldSize,Q).sub(me),ge=l.af(oe-p);return $=oe!==p,{easeFunc:_e=>{if($&&r.setZoom(l.C.number(p,oe,_e)),l.be(w,M)||ti({startEulerAngles:w,endEulerAngles:M,tr:r,k:_e,useSlerp:w.roll!=M.roll}),D&&(r.interpolatePadding(_,u.padding,_e),H=r.centerPoint.add(u.offsetAsPoint)),u.around)r.setLocationAtPoint(u.around,u.aroundPoint);else{const Te=l.af(r.zoom-p),be=oe>p?Math.min(2,ge):Math.max(.5,ge),Ce=Math.pow(be,1-_e),Oe=ze(r.worldSize,me.add(pe.mult(_e*Ce)).mult(Te));r.setLocationAtPoint(r.renderWorldCopies?Oe.wrap():Oe,H)}},isZooming:$,elevationCenter:Q}}handleFlyTo(r,u){const p=u.zoom!==void 0,_=r.zoom,w=r.getConstrained(l.S.convert(u.center||u.locationAtOffset),p?+u.zoom:_),M=w.center,I=w.zoom;co(r,M);const D=Ee(r.worldSize,u.locationAtOffset),$=Ee(r.worldSize,M).sub(D),q=$.mag(),H=l.af(I-_);let G;if(u.minZoom!==void 0){const Q=Math.min(+u.minZoom,_,I),oe=r.getConstrained(M,Q).zoom;G=l.af(oe-_)}return{easeFunc:(Q,oe,me,pe)=>{r.setZoom(Q===1?I:_+l.ak(oe));const ge=Q===1?M:ze(r.worldSize,D.add($.mult(me)).mult(oe));r.setLocationAtPoint(r.renderWorldCopies?ge.wrap():ge,pe)},scaleOfZoom:H,targetCenter:M,scaleOfMinZoom:G,pixelPathLength:q}}}class rn{constructor(r,u,p){this.blendFunction=r,this.blendColor=u,this.mask=p}}rn.Replace=[1,0],rn.disabled=new rn(rn.Replace,l.bf.transparent,[!1,!1,!1,!1]),rn.unblended=new rn(rn.Replace,l.bf.transparent,[!0,!0,!0,!0]),rn.alphaBlended=new rn([1,771],l.bf.transparent,[!0,!0,!0,!0]);const yn=2305;class br{constructor(r,u,p){this.enable=r,this.mode=u,this.frontFace=p}}br.disabled=new br(!1,1029,yn),br.backCCW=new br(!0,1029,yn),br.frontCCW=new br(!0,1028,yn);class ur{constructor(r,u,p){this.func=r,this.mask=u,this.range=p}}ur.ReadOnly=!1,ur.ReadWrite=!0,ur.disabled=new ur(519,ur.ReadOnly,[0,1]);const pi=7680;class hr{constructor(r,u,p,_,w,M){this.test=r,this.ref=u,this.mask=p,this.fail=_,this.depthFail=w,this.pass=M}}hr.disabled=new hr({func:519,mask:0},0,0,pi,pi,pi);const ml=new WeakMap;function ri(x){var r;if(ml.has(x))return ml.get(x);{const u=(r=x.getParameter(x.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return ml.set(x,u),u}}class gd{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const u=r.context,p=u.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;const _=new l.aL;_.emplaceBack(-1,-1),_.emplaceBack(2,-1),_.emplaceBack(-1,2);const w=new l.aN;w.emplaceBack(0,1,2),this._fullscreenTriangle=new uc(u.createVertexBuffer(_,Ki.members),u.createIndexBuffer(w),l.aM.simpleSegment(0,0,_.length,w.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(p.TEXTURE1);const M=p.createTexture();p.bindTexture(p.TEXTURE_2D,M),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(M),ri(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,u){const p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,u),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,u=r.gl;r.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,u){const p=this._cachedRenderContext.context,_=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:l.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,_.TRIANGLES,ur.disabled,hr.disabled,rn.unblended,br.disabled,((w,M)=>({u_input:w,u_output_expected:M}))(r,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ri(_)){_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.readBuffer(_.COLOR_ATTACHMENT0),_.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),_.bindBuffer(_.PIXEL_PACK_BUFFER,null);const w=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);_.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:w}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ri(r)){const u=r.clientWaitSync(this._readbackQueue.sync,0,0);if(u===r.WAIT_FAILED)return l.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=gd._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let u=0;return u+=r[0]/256,u+=r[1]/65536,u+=r[2]/16777216,r[3]<127&&(u=-u),u/128}}const gl=l.$/128;function yl(x,r){const u=x.granularity!==void 0?Math.max(x.granularity,1):1,p=u+(x.generateBorders?2:0),_=u+(x.extendToNorthPole||x.generateBorders?1:0)+(x.extendToSouthPole||x.generateBorders?1:0),w=p+1,M=_+1,I=x.generateBorders?-1:0,D=x.generateBorders||x.extendToNorthPole?-1:0,$=u+(x.generateBorders?1:0),q=u+(x.generateBorders||x.extendToSouthPole?1:0),H=w*M,G=p*_*6,Q=w*M>65536;if(Q&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const oe=Q||r==="32bit",me=new Int16Array(2*H);let pe=0;for(let Te=D;Te<=q;Te++)for(let be=I;be<=$;be++){let Ce=be/u*l.$;be===-1&&(Ce=-gl),be===u+1&&(Ce=l.$+gl);let Oe=Te/u*l.$;Te===-1&&(Oe=x.extendToNorthPole?l.bh:-gl),Te===u+1&&(Oe=x.extendToSouthPole?l.bi:l.$+gl),me[pe++]=Ce,me[pe++]=Oe}const ge=oe?new Uint32Array(G):new Uint16Array(G);let _e=0;for(let Te=0;Te<_;Te++)for(let be=0;be<p;be++){const Ce=be+1+Te*w,Oe=be+(Te+1)*w,we=be+1+(Te+1)*w;ge[_e++]=be+Te*w,ge[_e++]=Oe,ge[_e++]=Ce,ge[_e++]=Ce,ge[_e++]=Oe,ge[_e++]=we}return{vertices:me.buffer.slice(0),indices:ge.buffer.slice(0),uses32bitIndices:oe}}const Io=new l.aK({fill:new l.bj(128,2),line:new l.bj(512,0),tile:new l.bj(128,32),stencil:new l.bj(128,1),circle:3});class Es{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ri.projectionGlobe}get vertexShaderPreludeCode(){return Ri.projectionMercator.vertexSource}get subdivisionGranularity(){return Io}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new gd(r));const u=l.U(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,_=this._errorMeasurement.updateErrorLoop(u,p),w=B.now();_!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=_,this._errorMeasurementLastChangeTime=w);const M=Math.min(Math.max((w-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=l.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,l.bl(M))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,u,p,_,w){const M=(w==="stencil"?Io.stencil:Io.tile).getGranularityForZoomLevel(u.z);return this._getMesh(r,{granularity:M,generateBorders:p,extendToNorthPole:u.y===0&&_,extendToSouthPole:u.y===(1<<u.z)-1&&_})}_getMesh(r,u){const p=this._getMeshKey(u);if(p in this._tileMeshCache)return this._tileMeshCache[p];const _=function(w,M){const I=yl(M,"16bit"),D=l.aL.deserialize({arrayBuffer:I.vertices,length:I.vertices.byteLength/2/2}),$=l.aN.deserialize({arrayBuffer:I.indices,length:I.indices.byteLength/2/3});return new uc(w.createVertexBuffer(D,Ki.members),w.createIndexBuffer($),l.aM.simpleSegment(0,0,D.length,$.length))}(r,u);return this._tileMeshCache[p]=_,_}recalculate(r){}hasTransition(){const r=B.now();let u=!1;return u=u||(r-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const sh=new l.r({type:new l.D(l.v.projection.type)});class lh extends l.E{constructor(r){super(),this._transitionable=new l.t(sh,void 0),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.F(0)),this._mercatorProjection=new pl,this._verticalPerspectiveProjection=new Es}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof l.bm){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,u,p,_,w){return this.currentProjection.getMeshFromTileID(r,u,p,_,w)}setProjection(r){this._transitionable.setValue("type",(r==null?void 0:r.type)||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Jc(x){const r=vl(x.worldSize,x.center.lat);return 2*Math.PI*r}function Do(x,r,u,p,_){const w=1/(1<<_),M=r/l.$*w+p*w,I=l.bo((x/l.$*w+u*w)*Math.PI*2+Math.PI,2*Math.PI),D=2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI,$=Math.cos(D),q=new Float64Array(3);return q[0]=Math.sin(I)*$,q[1]=Math.sin(D),q[2]=Math.cos(I)*$,q}function ni(x){return function(r,u){const p=Math.cos(u),_=new Float64Array(3);return _[0]=Math.sin(r)*p,_[1]=Math.sin(u),_[2]=Math.cos(r)*p,_}(x.lng*Math.PI/180,x.lat*Math.PI/180)}function vl(x,r){return x/(2*Math.PI)/Math.cos(r*Math.PI/180)}function eu(x){const r=Math.asin(x[1])/Math.PI*180,u=Math.sqrt(x[0]*x[0]+x[2]*x[2]);if(u>1e-6){const p=x[0]/u,_=Math.acos(x[2]/u),w=(p>0?_:-_)/Math.PI*180;return new l.S(l.aO(w,-180,180),r)}return new l.S(0,r)}function Cs(x){return Math.cos(x*Math.PI/180)}function _i(x,r){const u=Cs(x),p=Cs(r);return l.ak(p/u)}function ch(x,r){const u=x.rotate(r.bearingInRadians),p=r.zoom+_i(r.center.lat,0),_=l.bk(1/Cs(r.center.lat),1/Cs(Math.min(Math.abs(r.center.lat),60)),l.bn(p,7,3,0,1)),w=360/Jc({worldSize:r.worldSize,center:{lat:r.center.lat}});return new l.S(r.center.lng-u.x*w*_,l.ah(r.center.lat+u.y*w,-l.ai,l.ai))}function tu(x){const r=.5*x,u=Math.sin(r),p=Math.cos(r);return Math.log(u+p)-Math.log(p-u)}function $f(x,r,u,p){const _=x.lat+u*p;if(Math.abs(u)>1){const w=(Math.sign(x.lat+u)!==Math.sign(x.lat)?-Math.abs(x.lat):Math.abs(x.lat))*Math.PI/180,M=Math.abs(x.lat+u)*Math.PI/180,I=tu(w+p*(M-w)),D=tu(w),$=tu(M);return new l.S(x.lng+r*((I-D)/($-D)),_)}return new l.S(x.lng+r*p,_)}class Cm{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=r}swapBuffers(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(r,u,p,_){const w=`${r.z}_${r.x}_${r.y}_${_!=null&&_.terrain?"t":""}`,M=this._cache.get(w);if(M)return M;const I=this._cachePrevious.get(w);if(I)return this._cache.set(w,I),I;const D=this._boundingVolumeFactory(r,u,p,_);return this._cache.set(w,D),this._hadAnyChanges=!0,D}}class mi{constructor(r,u,p,_){this.min=p,this.max=_,this.points=r,this.planes=u}static fromAabb(r,u){const p=[];for(let _=0;_<8;_++)p.push([1&~_?r[0]:u[0],(_>>1&1)==1?u[1]:r[1],(_>>2&1)==1?u[2]:r[2]]);return new mi(p,[[-1,0,0,u[0]],[1,0,0,-r[0]],[0,-1,0,u[1]],[0,1,0,-r[1]],[0,0,-1,u[2]],[0,0,1,-r[2]]],r,u)}static fromCenterSizeAngles(r,u,p){const _=l.br([],p[0],p[1],p[2]),w=l.bs([],[u[0],0,0],_),M=l.bs([],[0,u[1],0],_),I=l.bs([],[0,0,u[2]],_),D=[...r],$=[...r];for(let H=0;H<8;H++)for(let G=0;G<3;G++){const Q=r[G]+w[G]*(1&~H?-1:1)+M[G]*((H>>1&1)==1?1:-1)+I[G]*((H>>2&1)==1?1:-1);D[G]=Math.min(D[G],Q),$[G]=Math.max($[G],Q)}const q=[];for(let H=0;H<8;H++){const G=[...r];l.aS(G,G,l.aR([],w,1&~H?-1:1)),l.aS(G,G,l.aR([],M,(H>>1&1)==1?1:-1)),l.aS(G,G,l.aR([],I,(H>>2&1)==1?1:-1)),q.push(G)}return new mi(q,[[...w,-l.aX(w,q[0])],[...M,-l.aX(M,q[0])],[...I,-l.aX(I,q[0])],[-w[0],-w[1],-w[2],-l.aX(w,q[7])],[-M[0],-M[1],-M[2],-l.aX(M,q[7])],[-I[0],-I[1],-I[2],-l.aX(I,q[7])]],D,$)}intersectsFrustum(r){let u=!0;const p=this.points.length,_=this.planes.length,w=r.planes.length,M=r.points.length;for(let I=0;I<w;I++){const D=r.planes[I];let $=0;for(let q=0;q<p;q++){const H=this.points[q];D[0]*H[0]+D[1]*H[1]+D[2]*H[2]+D[3]>=0&&$++}if($===0)return 0;$<p&&(u=!1)}if(u)return 2;for(let I=0;I<_;I++){const D=this.planes[I];let $=0;for(let q=0;q<M;q++){const H=r.points[q];D[0]*H[0]+D[1]*H[1]+D[2]*H[2]+D[3]>=0&&$++}if($===0)return 0}return 1}intersectsPlane(r){const u=this.points.length;let p=0;for(let _=0;_<u;_++){const w=this.points[_];r[0]*w[0]+r[1]*w[1]+r[2]*w[2]+r[3]>=0&&p++}return p===u?2:p===0?0:1}}function hc(x,r,u){const p=x-r;return p<0?-p:Math.max(0,p-u)}function da(x,r,u,p,_){const w=x-u;let M;return M=w<0?Math.min(-w,1+w-_):w>1?Math.min(Math.max(w-_,0),1-w):0,Math.max(M,hc(r,p,_))}class uh{constructor(){this._boundingVolumeCache=new Cm(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(r,u,p,_){const w=1<<p.z,M=1/w,I=p.x/w,D=p.y/w;let $=2;return $=Math.min($,da(r,u,I,D,M)),$=Math.min($,da(r,u,I+.5,-D-M,M)),$=Math.min($,da(r,u,I+.5,2-D-M,M)),$}getWrap(r,u,p){const _=1<<u.z,w=1/_,M=u.x/_,I=hc(r.x,M,w),D=hc(r.x,M-1,w),$=hc(r.x,M+1,w),q=Math.min(I,D,$);return q===$?1:q===D?-1:0}allowVariableZoom(r,u){return Ue(r,u)>4}allowWorldCopies(){return!1}getTileBoundingVolume(r,u,p,_){return this._boundingVolumeCache.getTileBoundingVolume(r,u,p,_)}_computeTileBoundingVolume(r,u,p,_){var w,M;let I=0,D=0;if(_!=null&&_.terrain){const $=new l.Z(r.z,u,r.z,r.x,r.y),q=_.terrain.getMinMaxElevation($);I=(w=q.minElevation)!==null&&w!==void 0?w:Math.min(0,p),D=(M=q.maxElevation)!==null&&M!==void 0?M:Math.max(0,p)}if(I/=l.bu,D/=l.bu,I+=1,D+=1,r.z<=0)return mi.fromAabb([-D,-D,-D],[D,D,D]);if(r.z===1)return mi.fromAabb([r.x===0?-D:0,r.y===0?0:-D,-D],[r.x===0?0:D,r.y===0?D:0,D]);{const $=[Do(0,0,r.x,r.y,r.z),Do(l.$,0,r.x,r.y,r.z),Do(l.$,l.$,r.x,r.y,r.z),Do(0,l.$,r.x,r.y,r.z)],q=[];for(const Ke of $)q.push(l.aR([],Ke,D));if(D!==I)for(const Ke of $)q.push(l.aR([],Ke,I));r.y===0&&q.push([0,1,0]),r.y===(1<<r.z)-1&&q.push([0,-1,0]);const H=[1,1,1],G=[-1,-1,-1];for(const Ke of q)for(let Qe=0;Qe<3;Qe++)H[Qe]=Math.min(H[Qe],Ke[Qe]),G[Qe]=Math.max(G[Qe],Ke[Qe]);const Q=Do(l.$/2,l.$/2,r.x,r.y,r.z),oe=l.aW([],[0,1,0],Q);l.aV(oe,oe);const me=l.aW([],Q,oe);l.aV(me,me);const pe=l.aW([],$[2],$[1]);l.aV(pe,pe);const ge=l.aW([],$[0],$[3]);l.aV(ge,ge),q.push(l.aR([],Q,D)),r.y>=(1<<r.z)/2&&q.push(l.aR([],Do(l.$/2,0,r.x,r.y,r.z),D)),r.y<(1<<r.z)/2&&q.push(l.aR([],Do(l.$/2,l.$,r.x,r.y,r.z),D));const _e=yd(Q,q),Te=yd(me,q),be=[-Q[0],-Q[1],-Q[2],_e.max],Ce=[Q[0],Q[1],Q[2],-_e.min],Oe=[-me[0],-me[1],-me[2],Te.max],we=[me[0],me[1],me[2],-Te.min],Ne=[...pe,0],nt=[...ge,0],We=[];return r.y===0?We.push(l.bt(nt,Ne,be),l.bt(nt,Ne,Ce)):We.push(l.bt(Oe,Ne,be),l.bt(Oe,Ne,Ce),l.bt(Oe,nt,be),l.bt(Oe,nt,Ce)),r.y===(1<<r.z)-1?We.push(l.bt(nt,Ne,be),l.bt(nt,Ne,Ce)):We.push(l.bt(we,Ne,be),l.bt(we,Ne,Ce),l.bt(we,nt,be),l.bt(we,nt,Ce)),new mi(We,[be,Ce,Oe,we,Ne,nt],H,G)}}}function yd(x,r){let u=1/0,p=-1/0;for(const _ of r){const w=l.aX(x,_);u=Math.min(u,w),p=Math.max(p,w)}return{min:u,max:p}}class ru{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,u,p){return this._helper.interpolatePadding(r,u,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,u){this._helper.resize(r,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,u){this._helper.overrideNearFarZ(r,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=l.bv(),this._projectionMatrix=l.b9(),this._globeViewProjMatrix32f=l.b8(),this._globeViewProjMatrixNoCorrection=l.b9(),this._globeViewProjMatrixNoCorrectionInverted=l.b9(),this._globeProjMatrixInverted=l.b9(),this._cameraPosition=l.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new hi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,u)=>this.getConstrained(r,u)}),this._coveringTilesDetailsProvider=new uh}clone(){const r=new ru;return r.apply(this),r}apply(r,u){this._globeLatitudeErrorCorrectionRadians=u||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=l.bp();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:u,applyGlobeMatrix:p}=r,_=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:_,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const u=this.pitchInRadians,p=this.cameraToCenterDistance/r,_=Math.sin(u)*p,w=Math.cos(u)*p+1,M=1/Math.sqrt(_*_+w*w)*1;let I=-_,D=w;const $=Math.sqrt(I*I+D*D);I/=$,D/=$;const q=[0,I,D];l.bw(q,q,[0,0,0],-this.bearingInRadians),l.bx(q,q,[0,0,0],-1*this.center.lat*Math.PI/180),l.by(q,q,[0,0,0],this.center.lng*Math.PI/180);const H=1/l.aZ(q);return l.aR(q,q,H),[...q,-M*H]}isLocationOccluded(r){return!this.isSurfacePointVisible(ni(r))}transformLightDirection(r){const u=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,_=Math.cos(p),w=[Math.sin(u)*_,Math.sin(p),Math.cos(u)*_],M=[w[2],0,-w[0]],I=[0,0,0];l.aW(I,M,w),l.aV(M,M),l.aV(I,I);const D=[0,0,0];return l.aV(D,[M[0]*r[0]+I[0]*r[1]+w[0]*r[2],M[1]*r[0]+I[1]*r[1]+w[1]*r[2],M[2]*r[0]+I[2]*r[1]+w[2]*r[2]]),D}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,u,p){const _=function(I,D,$){const q=1/(1<<$.z);return new l.a1(I/l.$*q+$.x*q,D/l.$*q+$.y*q)}(r,u,p.canonical),w=(M=_.y,[l.bo(_.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI]);var M;return this.getCircleRadiusCorrection()/Math.cos(w[1])}projectTileCoordinates(r,u,p,_){const w=p.canonical,M=Do(r,u,w.x,w.y,w.z),I=1+(_?_(r,u):0)/l.bu,D=[M[0]*I,M[1]*I,M[2]*I,1];l.aw(D,D,this._globeViewProjMatrixNoCorrection);const $=this._cachedClippingPlane,q=$[0]*M[0]+$[1]*M[1]+$[2]*M[2]+$[3]<0;return{point:new l.P(D[0]/D[3],D[1]/D[3]),signedDistanceFromCamera:D[3],isOccluded:q}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=vl(this.worldSize,this.center.lat),u=l.ba(),p=l.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),l.b4(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const _=this.centerOffset;u[8]=2*-_.x/this._helper._width,u[9]=2*_.y/this._helper._height,this._projectionMatrix=l.b5(u),this._globeProjMatrixInverted=l.ba(),l.aq(this._globeProjMatrixInverted,u),l.M(u,u,[0,0,-this.cameraToCenterDistance]),l.b6(u,u,this.rollInRadians),l.b7(u,u,-this.pitchInRadians),l.b6(u,u,this.bearingInRadians),l.M(u,u,[0,0,-r]);const w=l.bp();w[0]=r,w[1]=r,w[2]=r,l.b7(p,u,this.center.lat*Math.PI/180),l.bz(p,p,-this.center.lng*Math.PI/180),l.N(p,p,w),this._globeViewProjMatrixNoCorrection=p,l.b7(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),l.bz(u,u,-this.center.lng*Math.PI/180),l.N(u,u,w),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=l.ba(),l.aq(this._globeViewProjMatrixNoCorrectionInverted,p);const M=l.bp();this._cameraPosition=l.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/r,l.bw(this._cameraPosition,this._cameraPosition,M,-this.rollInRadians),l.bx(this._cameraPosition,this._cameraPosition,M,this.pitchInRadians),l.bw(this._cameraPosition,this._cameraPosition,M,-this.bearingInRadians),l.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),l.bx(this._cameraPosition,this._cameraPosition,M,-this.center.lat*Math.PI/180),l.by(this._cameraPosition,this._cameraPosition,M,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const I=l.b5(this._globeViewProjMatrixNoCorrectionInverted);l.N(I,I,[1,1,-1]),this._cachedFrustum=Br.fromInvProjectionMatrix(I,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(r){l.w("calculateFogMatrix is not supported on globe projection.");const u=l.ba();return l.ag(u),u}getVisibleUnwrappedCoordinates(r){return[new l.b2(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&l.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,u){if(!this._globeViewProjMatrixNoCorrection)return 1;const p=ni(r);l.aR(p,p,1+u/l.bu);const _=l.bv();return l.aw(_,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),_[2]/_[3]}populateCache(r){}getBounds(){const r=.5*this.width,u=.5*this.height,p=[new l.P(0,0),new l.P(r,0),new l.P(this.width,0),new l.P(this.width,u),new l.P(this.width,this.height),new l.P(r,this.height),new l.P(0,this.height),new l.P(0,u)],_=[];for(const H of p)_.push(this.unprojectScreenPoint(H));let w=0,M=0,I=0,D=0;const $=this.center;for(const H of _){const G=l.bA($.lng,H.lng),Q=l.bA($.lat,H.lat);G<M&&(M=G),G>w&&(w=G),Q<D&&(D=Q),Q>I&&(I=Q)}const q=[$.lng+M,$.lat+D,$.lng+w,$.lat+I];return this.isSurfacePointOnScreen([0,1,0])&&(q[3]=90,q[0]=-180,q[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(q[1]=-90,q[0]=-180,q[2]=180),new fr(q)}getConstrained(r,u){const p=l.ah(r.lat,-l.ai,l.ai),_=l.ah(+u,this.minZoom+_i(0,p),this.maxZoom);return{center:new l.S(r.lng,p),zoom:_}}calculateCenterFromCameraLngLatAlt(r,u,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(r,u,p,_)}setLocationAtPoint(r,u){const p=ni(this.unprojectScreenPoint(u)),_=ni(r),w=l.bp();l.bB(w);const M=l.bp();l.by(M,p,w,-this.center.lng*Math.PI/180),l.bx(M,M,w,this.center.lat*Math.PI/180);const I=_[0]*_[0]+_[2]*_[2],D=M[0]*M[0];if(I<D)return;const $=Math.sqrt(I-D),q=-$,H=l.bC(_[0],_[2],M[0],$),G=l.bC(_[0],_[2],M[0],q),Q=l.bp();l.by(Q,_,w,-H);const oe=l.bC(Q[1],Q[2],M[1],M[2]),me=l.bp();l.by(me,_,w,-G);const pe=l.bC(me[1],me[2],M[1],M[2]),ge=.5*Math.PI,_e=oe>=-ge&&oe<=ge,Te=pe>=-ge&&pe<=ge;let be,Ce;if(_e&&Te){const nt=this.center.lng*Math.PI/180,We=this.center.lat*Math.PI/180;l.bD(H,nt)+l.bD(oe,We)<l.bD(G,nt)+l.bD(pe,We)?(be=H,Ce=oe):(be=G,Ce=pe)}else if(_e)be=H,Ce=oe;else{if(!Te)return;be=G,Ce=pe}const Oe=be/Math.PI*180,we=Ce/Math.PI*180,Ne=this.center.lat;this.setCenter(new l.S(Oe,l.ah(we,-90,90))),this.setZoom(this.zoom+_i(Ne,this.center.lat))}locationToScreenPoint(r,u){const p=ni(r);if(u){const _=u.getElevationForLngLatZoom(r,this._helper._tileZoom);l.aR(p,p,1+_/l.bu)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(r){const u=l.bv();return l.aw(u,[...r,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new l.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,u){if(u){const p=u.pointCoordinate(r);if(p)return p}return l.a1.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,u){var p;return(p=this.screenPointToMercatorCoordinate(r,u))===null||p===void 0?void 0:p.toLngLat()}isPointOnMapSurface(r,u){const p=this._cameraPosition,_=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(p,_)}getRayDirectionFromPixel(r){const u=l.bv();u[0]=r.x/this.width*2-1,u[1]=-1*(r.y/this.height*2-1),u[2]=1,u[3]=1,l.aw(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];const p=l.bp();p[0]=u[0]-this._cameraPosition[0],p[1]=u[1]-this._cameraPosition[1],p[2]=u[2]-this._cameraPosition[2];const _=l.bp();return l.aV(_,p),_}isSurfacePointVisible(r){const u=this._cachedClippingPlane;return u[0]*r[0]+u[1]*r[1]+u[2]*r[2]+u[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const u=l.bv();return l.aw(u,[...r,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(r,u){const p=l.aX(r,u),_=l.bp(),w=l.bp();l.aR(w,u,p),l.aU(_,r,w);const M=1-l.aX(_,_);if(M<0)return null;const I=l.aX(r,r)-1,D=-p+(p<0?1:-1)*Math.sqrt(M),$=I/D,q=D;return{tMin:Math.min($,q),tMax:Math.max($,q)}}unprojectScreenPoint(r){const u=this._cameraPosition,p=this.getRayDirectionFromPixel(r),_=this.rayPlanetIntersection(u,p);if(_){const q=l.bp();l.aS(q,u,[p[0]*_.tMin,p[1]*_.tMin,p[2]*_.tMin]);const H=l.bp();return l.aV(H,q),eu(H)}const w=this._cachedClippingPlane,M=w[0]*p[0]+w[1]*p[1]+w[2]*p[2],I=-l.b1(w,u)/M,D=l.bp();if(I>0)l.aS(D,u,[p[0]*I,p[1]*I,p[2]*I]);else{const q=l.bp();l.aS(q,u,[2*p[0],2*p[1],2*p[2]]);const H=l.b1(this._cachedClippingPlane,q);l.aU(D,q,[this._cachedClippingPlane[0]*H,this._cachedClippingPlane[1]*H,this._cachedClippingPlane[2]*H])}const $=function(q){const H=l.bp();return H[0]=q[0]*-q[3],H[1]=q[1]*-q[3],H[2]=q[2]*-q[3],{center:H,radius:Math.sqrt(1-q[3]*q[3])}}(w);return eu(function(q,H,G){const Q=l.bp();l.aU(Q,G,q);const oe=l.bp();return l.bq(oe,q,Q,H/l.a$(Q)),oe}($.center,$.radius,D))}getMatrixForModel(r,u){const p=l.S.convert(r),_=1/l.bu,w=l.b9();return l.bz(w,w,p.lng/180*Math.PI),l.b7(w,w,-p.lat/180*Math.PI),l.M(w,w,[0,0,1+u/l.bu]),l.b7(w,w,.5*Math.PI),l.N(w,w,[_,_,_]),w}getProjectionDataForCustomLayer(r=!0){const u=this.getProjectionData({overscaledTileID:new l.Z(0,0,0,0,0),applyGlobeMatrix:r});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(r){}}class zo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,u,p){return this._helper.interpolatePadding(r,u,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,u,p=!0){this._helper.resize(r,u,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,u){this._helper.overrideNearFarZ(r,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,u){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new hi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,u)=>this.getConstrained(r,u)}),this._globeness=1,this._mercatorTransform=new Ms,this._verticalPerspectiveTransform=new ru}clone(){const r=new zo;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const u=this._mercatorTransform.getProjectionData(r),p=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:u.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return l.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return l.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,u,p){const _=this._mercatorTransform.getPitchedTextCorrection(r,u,p),w=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,u,p);return l.bk(_,w,this._globeness)}projectTileCoordinates(r,u,p,_){return this.currentTransform.projectTileCoordinates(r,u,p,_)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,u){return this.currentTransform.lngLatToCameraDepth(r,u)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,u){return this.currentTransform.getConstrained(r,u)}calculateCenterFromCameraLngLatAlt(r,u,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(r,u,p,_)}setLocationAtPoint(r,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,u),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,u),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,u){return this.currentTransform.locationToScreenPoint(r,u)}screenPointToMercatorCoordinate(r,u){return this.currentTransform.screenPointToMercatorCoordinate(r,u)}screenPointToLocation(r,u){return this.currentTransform.screenPointToLocation(r,u)}isPointOnMapSurface(r,u){return this.currentTransform.isPointOnMapSurface(r,u)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,u){return this.currentTransform.getMatrixForModel(r,u)}getProjectionDataForCustomLayer(r=!0){const u=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return u;const p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return p.fallbackMatrix=u.mainMatrix,p}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class uo{get useGlobeControls(){return!0}handlePanInertia(r,u){const p=ch(r,u);return Math.abs(p.lng-u.center.lng)>180&&(p.lng=u.center.lng+179.5*Math.sign(p.lng-u.center.lng)),{easingCenter:p,easingOffset:new l.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,u){const p=r.around,_=u.screenPointToLocation(p);r.bearingDelta&&u.setBearing(u.bearing+r.bearingDelta),r.pitchDelta&&u.setPitch(u.pitch+r.pitchDelta),r.rollDelta&&u.setRoll(u.roll+r.rollDelta);const w=u.zoom;r.zoomDelta&&u.setZoom(u.zoom+r.zoomDelta);const M=u.zoom-w;if(M===0)return;const I=l.bA(u.center.lng,_.lng),D=I/(Math.abs(I/180)+1),$=l.bA(u.center.lat,_.lat),q=u.getRayDirectionFromPixel(p),H=u.cameraPosition,G=-1*l.aX(H,q),Q=l.bp();l.aS(Q,H,[q[0]*G,q[1]*G,q[2]*G]);const oe=l.aZ(Q)-1,me=Math.exp(.5*-Math.max(oe-.3,0)),pe=vl(u.worldSize,u.center.lat)/Math.min(u.width,u.height),ge=l.bn(pe,.9,.5,1,.25),_e=(1-l.af(-M))*Math.min(me,ge),Te=u.center.lat,be=u.zoom,Ce=new l.S(u.center.lng+D*_e,l.ah(u.center.lat+$*_e,-l.ai,l.ai));u.setLocationAtPoint(_,p);const Oe=u.center,we=l.bn(Math.abs(I),45,85,0,1),Ne=l.bn(pe,.75,.35,0,1),nt=Math.pow(Math.max(we,Ne),.25),We=l.bA(Oe.lng,Ce.lng),Ke=l.bA(Oe.lat,Ce.lat);u.setCenter(new l.S(Oe.lng+We*nt,Oe.lat+Ke*nt).wrap()),u.setZoom(be+_i(Te,u.center.lat))}handleMapControlsPan(r,u,p){if(!r.panDelta)return;const _=u.center.lat,w=u.zoom;u.setCenter(ch(r.panDelta,u).wrap()),u.setZoom(w+_i(_,u.center.lat))}cameraForBoxAndBearing(r,u,p,_,w){const M=Li(r,u,p,_,w),I=u.left/w.width*2-1,D=(w.width-u.right)/w.width*2-1,$=u.top/w.height*-2+1,q=(w.height-u.bottom)/w.height*-2+1,H=l.bA(p.getWest(),p.getEast())<0,G=H?p.getEast():p.getWest(),Q=H?p.getWest():p.getEast(),oe=Math.max(p.getNorth(),p.getSouth()),me=Math.min(p.getNorth(),p.getSouth()),pe=G+.5*l.bA(G,Q),ge=oe+.5*l.bA(oe,me),_e=w.clone();_e.setCenter(M.center),_e.setBearing(M.bearing),_e.setPitch(0),_e.setRoll(0),_e.setZoom(M.zoom);const Te=_e.modelViewProjectionMatrix,be=[ni(p.getNorthWest()),ni(p.getNorthEast()),ni(p.getSouthWest()),ni(p.getSouthEast()),ni(new l.S(Q,ge)),ni(new l.S(G,ge)),ni(new l.S(pe,oe)),ni(new l.S(pe,me))],Ce=ni(M.center);let Oe=Number.POSITIVE_INFINITY;for(const we of be)I<0&&(Oe=uo.getLesserNonNegativeNonNull(Oe,uo.solveVectorScale(we,Ce,Te,"x",I))),D>0&&(Oe=uo.getLesserNonNegativeNonNull(Oe,uo.solveVectorScale(we,Ce,Te,"x",D))),$>0&&(Oe=uo.getLesserNonNegativeNonNull(Oe,uo.solveVectorScale(we,Ce,Te,"y",$))),q<0&&(Oe=uo.getLesserNonNegativeNonNull(Oe,uo.solveVectorScale(we,Ce,Te,"y",q)));if(Number.isFinite(Oe)&&Oe!==0)return M.zoom=_e.zoom+l.ak(Oe),M;fi()}handleJumpToCenterZoom(r,u){const p=r.center.lat,_=r.getConstrained(u.center?l.S.convert(u.center):r.center,r.zoom).center;r.setCenter(_.wrap());const w=u.zoom!==void 0?+u.zoom:r.zoom+_i(p,_.lat);r.zoom!==w&&r.setZoom(w)}handleEaseTo(r,u){const p=r.zoom,_=r.center,w=r.padding,M={roll:r.roll,pitch:r.pitch,bearing:r.bearing},I={roll:u.roll===void 0?r.roll:u.roll,pitch:u.pitch===void 0?r.pitch:u.pitch,bearing:u.bearing===void 0?r.bearing:u.bearing},D=u.zoom!==void 0,$=!r.isPaddingEqual(u.padding);let q=!1;const H=u.center?l.S.convert(u.center):_,G=r.getConstrained(H,p).center;co(r,G);const Q=r.clone();Q.setCenter(G),Q.setZoom(D?+u.zoom:p+_i(_.lat,H.lat)),Q.setBearing(u.bearing);const oe=new l.P(l.ah(r.centerPoint.x+u.offsetAsPoint.x,0,r.width),l.ah(r.centerPoint.y+u.offsetAsPoint.y,0,r.height));Q.setLocationAtPoint(G,oe);const me=(u.offset&&u.offsetAsPoint.mag())>0?Q.center:G,pe=D?+u.zoom:p+_i(_.lat,me.lat),ge=p+_i(_.lat,0),_e=pe+_i(me.lat,0),Te=l.bA(_.lng,me.lng),be=l.bA(_.lat,me.lat),Ce=l.af(_e-ge);return q=pe!==p,{easeFunc:Oe=>{if(l.be(M,I)||ti({startEulerAngles:M,endEulerAngles:I,tr:r,k:Oe,useSlerp:M.roll!=I.roll}),$&&r.interpolatePadding(w,u.padding,Oe),u.around)l.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(u.around,u.aroundPoint);else{const we=_e>ge?Math.min(2,Ce):Math.max(.5,Ce),Ne=Math.pow(we,1-Oe),nt=$f(_,Te,be,Oe*Ne);r.setCenter(nt.wrap())}if(q){const we=l.C.number(ge,_e,Oe)+_i(0,r.center.lat);r.setZoom(we)}},isZooming:q,elevationCenter:me}}handleFlyTo(r,u){const p=u.zoom!==void 0,_=r.center,w=r.zoom,M=r.padding,I=!r.isPaddingEqual(u.padding),D=r.getConstrained(l.S.convert(u.center||u.locationAtOffset),w).center,$=p?+u.zoom:r.zoom+_i(r.center.lat,D.lat),q=r.clone();q.setCenter(D),q.setZoom($),q.setBearing(u.bearing);const H=new l.P(l.ah(r.centerPoint.x+u.offsetAsPoint.x,0,r.width),l.ah(r.centerPoint.y+u.offsetAsPoint.y,0,r.height));q.setLocationAtPoint(D,H);const G=q.center;co(r,G);const Q=function(be,Ce,Oe){const we=ni(Ce),Ne=ni(Oe),nt=l.aX(we,Ne),We=Math.acos(nt),Ke=Jc(be);return We/(2*Math.PI)*Ke}(r,_,G),oe=w+_i(_.lat,0),me=$+_i(G.lat,0),pe=l.af(me-oe);let ge;if(typeof u.minZoom=="number"){const be=+u.minZoom+_i(G.lat,0),Ce=Math.min(be,oe,me)+_i(0,G.lat),Oe=r.getConstrained(G,Ce).zoom+_i(G.lat,0);ge=l.af(Oe-oe)}const _e=l.bA(_.lng,G.lng),Te=l.bA(_.lat,G.lat);return{easeFunc:(be,Ce,Oe,we)=>{const Ne=$f(_,_e,Te,Oe);I&&r.interpolatePadding(M,u.padding,be);const nt=be===1?G:Ne;r.setCenter(nt.wrap());const We=oe+l.ak(Ce);r.setZoom(be===1?$:We+_i(0,nt.lat))},scaleOfZoom:pe,targetCenter:G,scaleOfMinZoom:ge,pixelPathLength:Q}}static solveVectorScale(r,u,p,_,w){const M=_==="x"?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],I=[p[3],p[7],p[11],p[15]],D=r[0]*M[0]+r[1]*M[1]+r[2]*M[2],$=r[0]*I[0]+r[1]*I[1]+r[2]*I[2],q=u[0]*M[0]+u[1]*M[1]+u[2]*M[2],H=u[0]*I[0]+u[1]*I[1]+u[2]*I[2];return q+w*$===D+w*H||I[3]*(D-q)+M[3]*(H-$)+D*H==q*$?null:(q+M[3]-w*H-w*I[3])/(q-D-w*H+w*$)}static getLesserNonNegativeNonNull(r,u){return u!==null&&u>=0&&u<r?u:r}}class qf{constructor(r){this._globe=r,this._mercatorCameraHelper=new Ps,this._verticalPerspectiveCameraHelper=new uo}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,u){return this.currentHelper.handlePanInertia(r,u)}handleMapControlsRollPitchBearingZoom(r,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,u)}handleMapControlsPan(r,u,p){this.currentHelper.handleMapControlsPan(r,u,p)}cameraForBoxAndBearing(r,u,p,_,w){return this.currentHelper.cameraForBoxAndBearing(r,u,p,_,w)}handleJumpToCenterZoom(r,u){this.currentHelper.handleJumpToCenterZoom(r,u)}handleEaseTo(r,u){return this.currentHelper.handleEaseTo(r,u)}handleFlyTo(r,u){return this.currentHelper.handleFlyTo(r,u)}}const hh=(x,r)=>l.y(x,r&&r.filter(u=>u.identifier!=="source.canvas")),jm=l.bE();class vd extends l.E{constructor(r,u={}){var p,_;super(),this._rtlPluginLoaded=()=>{for(const M in this.sourceCaches){const I=this.sourceCaches[M].getSource().type;I!=="vector"&&I!=="geojson"||this.sourceCaches[M].reload()}},this.map=r,this.dispatcher=new Nt(Vt(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(M,I)=>this.getGlyphs(M,I)),this.dispatcher.registerMessageHandler("GI",(M,I)=>this.getImages(M,I)),this.dispatcher.registerMessageHandler("GDA",(M,I)=>this.getDashes(M,I)),this.imageManager=new Ie,this.imageManager.setEventedParent(this);const w=((p=r._container)===null||p===void 0?void 0:p.lang)||typeof document<"u"&&((_=document.documentElement)===null||_===void 0?void 0:_.lang)||void 0;this.glyphManager=new tt(r._requestManager,u.localIdeographFontFamily,w),this.lineAtlas=new ht(256,512),this.crossTileSymbolIndex=new Qc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",l.bG()),Jn().on(Mo,this._rtlPluginLoaded),this.on("data",M=>{if(M.dataType!=="source"||M.sourceDataType!=="metadata")return;const I=this.sourceCaches[M.sourceId];if(!I)return;const D=I.getSource();if(D&&D.vectorLayerIds)for(const $ in this._layers){const q=this._layers[$];q.source===D.id&&this._validateLayer(q)}})}setGlobalStateProperty(r,u){var p,_,w;this._checkLoaded();const M=u===null?(w=(_=(p=this.stylesheet.state)===null||p===void 0?void 0:p[r])===null||_===void 0?void 0:_.default)!==null&&w!==void 0?w:null:u;if(l.bH(M,this._globalState[r]))return this;this._globalState[r]=M,this._applyGlobalStateChanges([r])}getGlobalState(){return this._globalState}setGlobalState(r){this._checkLoaded();const u=[];for(const p in r)!l.bH(this._globalState[p],r[p].default)&&(u.push(p),this._globalState[p]=r[p].default);this._applyGlobalStateChanges(u)}_applyGlobalStateChanges(r){if(r.length===0)return;const u=new Set,p={};for(const _ of r){p[_]=this._globalState[_];for(const w in this._layers){const M=this._layers[w],I=M.getLayoutAffectingGlobalStateRefs(),D=M.getPaintAffectingGlobalStateRefs();if(I.has(_)&&u.add(M.source),D.has(_))for(const{name:$,value:q}of D.get(_))this._updatePaintProperty(M,$,q)}}this.dispatcher.broadcast("UGS",p);for(const _ in this.sourceCaches)u.has(_)&&(this._reloadSource(_),this._changed=!0)}loadURL(r,u={},p){this.fire(new l.l("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const _=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const w=this._loadStyleRequest;l.j(_,this._loadStyleRequest).then(M=>{this._loadStyleRequest=null,this._load(M.data,u,p)}).catch(M=>{this._loadStyleRequest=null,M&&!w.signal.aborted&&this.fire(new l.k(M))})}loadJSON(r,u={},p){this.fire(new l.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,B.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(r,u,p)}).catch(()=>{})}loadEmpty(){this.fire(new l.l("dataloading",{dataType:"style"})),this._load(jm,{validate:!1})}_load(r,u,p){var _,w;let M=u.transformStyle?u.transformStyle(p,r):r;if(!u.validate||!hh(this,l.z(M))){M=Object.assign({},M),this._loaded=!0,this.stylesheet=M;for(const I in M.sources)this.addSource(I,M.sources[I],{validate:!1});M.sprite?this._loadSprite(M.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(M.glyphs),this._createLayers(),this.light=new Pe(this.stylesheet.light),this._setProjectionInternal(((_=this.stylesheet.projection)===null||_===void 0?void 0:_.type)||"mercator"),this.sky=new Ge(this.stylesheet.sky),this.map.setTerrain((w=this.stylesheet.terrain)!==null&&w!==void 0?w:null),this.fire(new l.l("data",{dataType:"style"})),this.fire(new l.l("style.load"))}}_createLayers(){var r,u,p;const _=l.bI(this.stylesheet.layers);this.setGlobalState((r=this.stylesheet.state)!==null&&r!==void 0?r:null),this.dispatcher.broadcast("SL",_),this._order=_.map(w=>w.id),this._layers={},this._serializedLayers=null;for(const w of _){const M=l.bJ(w,this._globalState);if(M.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=M,l.bK(M)&&this.sourceCaches[M.source]){const I=(p=(u=w.paint)===null||u===void 0?void 0:u["raster-fade-duration"])!==null&&p!==void 0?p:M.paint.get("raster-fade-duration");this.sourceCaches[M.source].setRasterFadeDuration(I)}}}_loadSprite(r,u=!1,p=void 0){let _;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(w,M,I,D){return l._(this,void 0,void 0,function*(){const $=ae(w),q=I>1?"@2x":"",H={},G={};for(const{id:Q,url:oe}of $){const me=M.transformRequest(he(oe,q,".json"),"SpriteJSON");H[Q]=l.j(me,D);const pe=M.transformRequest(he(oe,q,".png"),"SpriteImage");G[Q]=ue.getImage(pe,D)}return yield Promise.all([...Object.values(H),...Object.values(G)]),function(Q,oe){return l._(this,void 0,void 0,function*(){const me={};for(const pe in Q){me[pe]={};const ge=B.getImageCanvasContext((yield oe[pe]).data),_e=(yield Q[pe]).data;for(const Te in _e){const{width:be,height:Ce,x:Oe,y:we,sdf:Ne,pixelRatio:nt,stretchX:We,stretchY:Ke,content:Qe,textFitWidth:Tt,textFitHeight:At}=_e[Te];me[pe][Te]={data:null,pixelRatio:nt,sdf:Ne,stretchX:We,stretchY:Ke,content:Qe,textFitWidth:Tt,textFitHeight:At,spriteData:{width:be,height:Ce,x:Oe,y:we,context:ge}}}}return me})}(H,G)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(w=>{if(this._spriteRequest=null,w)for(const M in w){this._spritesImagesIds[M]=[];const I=this._spritesImagesIds[M]?this._spritesImagesIds[M].filter(D=>!(D in w)):[];for(const D of I)this.imageManager.removeImage(D),this._changedImages[D]=!0;for(const D in w[M]){const $=M==="default"?D:`${M}:${D}`;this._spritesImagesIds[M].push($),$ in this.imageManager.images?this.imageManager.updateImage($,w[M][D],!1):this.imageManager.addImage($,w[M][D]),u&&(this._changedImages[$]=!0)}}}).catch(w=>{this._spriteRequest=null,_=w,this.fire(new l.k(_))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"})),p&&p(_)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const p=r.sourceLayer;if(!p)return;const _=u.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(p)===-1)&&this.fire(new l.k(new Error(`Source layer "${p}" does not exist on source "${_.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,u=!1){const p=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u?l.bL(p):p);const _=[];for(const w of r)if(p[w]){const M=u?l.bL(p[w]):p[w];_.push(M)}return _}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const _=this._layers[p];_.type!=="custom"&&(r[p]=_.serialize())}return r}hasTransitions(){var r,u,p;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((u=this.sky)===null||u===void 0)&&u.hasTransition()||!((p=this.projection)===null||p===void 0)&&p.hasTransition())return!0;for(const _ in this.sourceCaches)if(this.sourceCaches[_].hasTransition())return!0;for(const _ in this._layers)if(this._layers[_].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(u){const _=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(_.length||w.length)&&this._updateWorkerLayers(_,w);for(const M in this._updatedSources){const I=this._updatedSources[M];if(I==="reload")this._reloadSource(M);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const p={};for(const _ in this.sourceCaches){const w=this.sourceCaches[_];p[_]=w.used,w.used=!1}for(const _ of this._order){const w=this._layers[_];w.recalculate(r,this._availableImages),!w.isHidden(r.zoom)&&w.source&&(this.sourceCaches[w.source].used=!0)}for(const _ in p){const w=this.sourceCaches[_];!!p[_]!=!!w.used&&w.fire(new l.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,u&&this.fire(new l.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){var p;this._checkLoaded();const _=this.serialize();if(r=u.transformStyle?u.transformStyle(_,r):r,((p=u.validate)===null||p===void 0||p)&&hh(this,l.z(r)))return!1;(r=l.bL(r)).layers=l.bI(r.layers);const w=l.bM(_,r),M=this._getOperationsToPerform(w);if(M.unimplemented.length>0)throw new Error(`Unimplemented: ${M.unimplemented.join(", ")}.`);if(M.operations.length===0)return!1;for(const I of M.operations)I();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const u=[],p=[];for(const _ of r)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push(()=>this.addLayer.apply(this,_.args));break;case"removeLayer":u.push(()=>this.removeLayer.apply(this,_.args));break;case"setPaintProperty":u.push(()=>this.setPaintProperty.apply(this,_.args));break;case"setLayoutProperty":u.push(()=>this.setLayoutProperty.apply(this,_.args));break;case"setFilter":u.push(()=>this.setFilter.apply(this,_.args));break;case"addSource":u.push(()=>this.addSource.apply(this,_.args));break;case"removeSource":u.push(()=>this.removeSource.apply(this,_.args));break;case"setLayerZoomRange":u.push(()=>this.setLayerZoomRange.apply(this,_.args));break;case"setLight":u.push(()=>this.setLight.apply(this,_.args));break;case"setGeoJSONSourceData":u.push(()=>this.setGeoJSONSourceData.apply(this,_.args));break;case"setGlyphs":u.push(()=>this.setGlyphs.apply(this,_.args));break;case"setSprite":u.push(()=>this.setSprite.apply(this,_.args));break;case"setTerrain":u.push(()=>this.map.setTerrain.apply(this,_.args));break;case"setSky":u.push(()=>this.setSky.apply(this,_.args));break;case"setProjection":this.setProjection.apply(this,_.args);break;case"setGlobalState":u.push(()=>this.setGlobalState.apply(this,_.args));break;case"setTransition":u.push(()=>{});break;default:p.push(_.command)}return{operations:u,unimplemented:p}}addImage(r,u){if(this.getImage(r))return this.fire(new l.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,p={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.z.source,`sources.${r}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const _=this.sourceCaches[r]=new Ft(r,u,this.dispatcher);_.style=this,_.setEventedParent(this,()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:r})),_.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===r)return this.fire(new l.k(new Error(`Source "${r}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new l.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const p=this.sourceCaches[r].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,p={}){this._checkLoaded();const _=r.id;if(this.getLayer(_))return void this.fire(new l.k(new Error(`Layer "${_}" already exists on this map.`)));let w;if(r.type==="custom"){if(hh(this,l.bN(r)))return;w=l.bJ(r,this._globalState)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(_,r.source),r=l.bL(r),r=l.e(r,{source:_})),this._validate(l.z.layer,`layers.${_}`,r,{arrayIndex:-1},p))return;w=l.bJ(r,this._globalState),this._validateLayer(w),w.setEventedParent(this,{layer:{id:_}})}const M=u?this._order.indexOf(u):this._order.length;if(u&&M===-1)this.fire(new l.k(new Error(`Cannot add layer "${_}" before non-existing layer "${u}".`)));else{if(this._order.splice(M,0,_),this._layerOrderChanged=!0,this._layers[_]=w,this._removedLayers[_]&&w.source&&w.type!=="custom"){const I=this._removedLayers[_];delete this._removedLayers[_],I.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const p=this._order.indexOf(r);this._order.splice(p,1);const _=u?this._order.indexOf(u):this._order.length;u&&_===-1?this.fire(new l.k(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(_,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new l.k(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const p=this._order.indexOf(r);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,p){this._checkLoaded();const _=this.getLayer(r);_?_.minzoom===u&&_.maxzoom===p||(u!=null&&(_.minzoom=u),p!=null&&(_.maxzoom=p),this._updateLayer(_)):this.fire(new l.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,p={}){this._checkLoaded();const _=this.getLayer(r);if(_){if(!l.bH(_.filter,u))return u==null?(_.setFilter(void 0),void this._updateLayer(_)):void(this._validate(l.z.filter,`layers.${_.id}.filter`,u,null,p)||(_.setFilter(l.bL(u)),this._updateLayer(_)))}else this.fire(new l.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.bL(this.getLayer(r).filter)}setLayoutProperty(r,u,p,_={}){this._checkLoaded();const w=this.getLayer(r);w?l.bH(w.getLayoutProperty(u),p)||(w.setLayoutProperty(u,p,_),this._updateLayer(w)):this.fire(new l.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const p=this.getLayer(r);if(p)return p.getLayoutProperty(u);this.fire(new l.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,p,_={}){this._checkLoaded();const w=this.getLayer(r);w?l.bH(w.getPaintProperty(u),p)||this._updatePaintProperty(w,u,p,_):this.fire(new l.k(new Error(`Cannot style non-existing layer "${r}".`)))}_updatePaintProperty(r,u,p,_={}){r.setPaintProperty(u,p,_)&&this._updateLayer(r),l.bK(r)&&u==="raster-fade-duration"&&this.sourceCaches[r.source].setRasterFadeDuration(p),this._changed=!0,this._updatedPaintProps[r.id]=!0,this._serializedLayers=null}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const p=r.source,_=r.sourceLayer,w=this.sourceCaches[p];if(w===void 0)return void this.fire(new l.k(new Error(`The source '${p}' does not exist in the map's style.`)));const M=w.getSource().type;M==="geojson"&&_?this.fire(new l.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||_?(r.id===void 0&&this.fire(new l.k(new Error("The feature id parameter must be provided."))),w.setFeatureState(_,r.id,u)):this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const p=r.source,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new l.k(new Error(`The source '${p}' does not exist in the map's style.`)));const w=_.getSource().type,M=w==="vector"?r.sourceLayer:void 0;w!=="vector"||M?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.k(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(M,r.id,u):this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,p=r.sourceLayer,_=this.sourceCaches[u];if(_!==void 0)return _.getSource().type!=="vector"||p?(r.id===void 0&&this.fire(new l.k(new Error("The feature id parameter must be provided."))),_.getFeatureState(p,r.id)):void this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=l.bO(this.sourceCaches,w=>w.serialize()),u=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,_=this.stylesheet;return l.bP({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,projection:_.projection,sources:r,layers:u,terrain:p},w=>w!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=M=>this._layers[M].type==="fill-extrusion",p={},_=[];for(let M=this._order.length-1;M>=0;M--){const I=this._order[M];if(u(I)){p[I]=M;for(const D of r){const $=D[I];if($)for(const q of $)_.push(q)}}}_.sort((M,I)=>I.intersectionZ-M.intersectionZ);const w=[];for(let M=this._order.length-1;M>=0;M--){const I=this._order[M];if(u(I))for(let D=_.length-1;D>=0;D--){const $=_[D].feature;if(p[$.layer.id]<M)break;w.push($),_.pop()}else for(const D of r){const $=D[I];if($)for(const q of $)w.push(q.feature)}}return w}queryRenderedFeatures(r,u,p){u&&u.filter&&this._validate(l.z.filter,"queryRenderedFeatures.filter",u.filter,null,u);const _={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new l.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const $ of u.layers){const q=this._layers[$];if(!q)return this.fire(new l.k(new Error(`The layer '${$}' does not exist in the map's style and cannot be queried for features.`))),[];_[q.source]=!0}}const w=[];u.availableImages=this._availableImages;const M=this._serializedAllLayers(),I=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,D=Object.assign(Object.assign({},u),{layers:I,globalState:this._globalState});for(const $ in this.sourceCaches)u.layers&&!_[$]||w.push(Ot(this.sourceCaches[$],this._layers,M,r,D,p,this.map.terrain?(q,H,G)=>this.map.terrain.getElevation(q,H,G):void 0));return this.placement&&w.push(function($,q,H,G,Q,oe,me){const pe={},ge=oe.queryRenderedSymbols(G),_e=[];for(const Te of Object.keys(ge).map(Number))_e.push(me[Te]);_e.sort(er);for(const Te of _e){const be=Te.featureIndex.lookupSymbolFeatures(ge[Te.bucketInstanceId],q,Te.bucketIndex,Te.sourceLayerIndex,{filterSpec:Q.filter,globalState:Q.globalState},Q.layers,Q.availableImages,$);for(const Ce in be){const Oe=pe[Ce]=pe[Ce]||[],we=be[Ce];we.sort((Ne,nt)=>{const We=Te.featureSortOrder;if(We){const Ke=We.indexOf(Ne.featureIndex);return We.indexOf(nt.featureIndex)-Ke}return nt.featureIndex-Ne.featureIndex});for(const Ne of we)Oe.push(Ne)}}return function(Te,be,Ce){for(const Oe in Te)for(const we of Te[Oe])or(we,Ce[be[Oe].source]);return Te}(pe,$,H)}(this._layers,M,this.sourceCaches,r,D,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(r,u){u!=null&&u.filter&&this._validate(l.z.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[r];return p?function(_,w){const M=_.getRenderableIds().map($=>_.getTileByID($)),I=[],D={};for(let $=0;$<M.length;$++){const q=M[$],H=q.tileID.canonical.key;D[H]||(D[H]=!0,q.querySourceFeatures(I,w))}return I}(p,u?Object.assign(Object.assign({},u),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const p=this.light.getLight();let _=!1;for(const M in r)if(!l.bH(r[M],p[M])){_=!0;break}if(!_)return;const w={now:B.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(w)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,u={}){this._checkLoaded();const p=this.getSky();let _=!1;if(!r&&!p)return;if(r&&!p)_=!0;else if(!r&&p)_=!0;else for(const M in r)if(!l.bH(r[M],p[M])){_=!0;break}if(!_)return;const w={now:B.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,u),this.sky.updateTransitions(w)}_setProjectionInternal(r){const u=function(p){if(Array.isArray(p)){const _=new lh({type:p});return{projection:_,transform:new zo,cameraHelper:new qf(_)}}switch(p){case"mercator":return{projection:new pl,transform:new Ms,cameraHelper:new Ps};case"globe":{const _=new lh({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:_,transform:new zo,cameraHelper:new qf(_)}}case"vertical-perspective":return{projection:new Es,transform:new ru,cameraHelper:new uo};default:return l.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new pl,transform:new Ms,cameraHelper:new Ps}}}(r);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(const p in this.sourceCaches)this.sourceCaches[p].reload()}_validate(r,u,p,_,w={}){return(!w||w.validate!==!1)&&hh(this,r.call(l.z,l.e({key:u,style:this.serialize(),value:p,styleSpec:l.v},_)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Jn().off(Mo,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,p,_,w=!1){let M=!1,I=!1;const D={};for(const $ of this._order){const q=this._layers[$];if(q.type!=="symbol")continue;if(!D[q.source]){const G=this.sourceCaches[q.source];D[q.source]=G.getRenderableIds(!0).map(Q=>G.getTileByID(Q)).sort((Q,oe)=>oe.tileID.overscaledZ-Q.tileID.overscaledZ||(Q.tileID.isLessThan(oe.tileID)?-1:1))}const H=this.crossTileSymbolIndex.addLayer(q,D[q.source],r.center.lng);M=M||H}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(B.now(),r.zoom))&&(this.pauseablePlacement=new ih(r,this.map.terrain,this._order,w,u,p,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,D),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(B.now()),I=!0),M&&this.pauseablePlacement.placement.setStale()),I||M)for(const $ of this._order){const q=this._layers[$];q.type==="symbol"&&this.placement.updateLayerOpacities(q,D[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(B.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u){return l._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const _=this.sourceCaches[u.source];return _&&_.setDependencies(u.tileID.key,u.type,u.icons),p})}getGlyphs(r,u){return l._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(u.stacks),_=this.sourceCaches[u.source];return _&&_.setDependencies(u.tileID.key,u.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(l.z.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}getDashes(r,u){return l._(this,void 0,void 0,function*(){const p={};for(const[_,w]of Object.entries(u.dashes))p[_]=this.lineAtlas.getDash(w.dasharray,w.round);return p})}addSprite(r,u,p={},_){this._checkLoaded();const w=[{id:r,url:u}],M=[...ae(this.stylesheet.sprite),...w];this._validate(l.z.sprite,"sprite",M,null,p)||(this.stylesheet.sprite=M,this._loadSprite(w,!0,_))}removeSprite(r){this._checkLoaded();const u=ae(this.stylesheet.sprite);if(u.find(p=>p.id===r)){if(this._spritesImagesIds[r])for(const p of this._spritesImagesIds[r])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}else this.fire(new l.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return ae(this.stylesheet.sprite)}setSprite(r,u={},p){this._checkLoaded(),r&&this._validate(l.z.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,p):(this._unloadSprite(),p&&p(null)))}}var Om=l.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class dh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,p,_,w,M,I,D,$){this.context=r;let q=this.boundPaintVertexBuffers.length!==_.length;for(let H=0;!q&&H<_.length;H++)this.boundPaintVertexBuffers[H]!==_[H]&&(q=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||q||this.boundIndexBuffer!==w||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==D||this.boundDynamicVertexBuffer3!==$?this.freshBind(u,p,_,w,M,I,D,$):(r.bindVertexArray.set(this.vao),I&&I.bind(),w&&w.dynamicDraw&&w.bind(),D&&D.bind(),$&&$.bind())}freshBind(r,u,p,_,w,M,I,D){const $=r.numAttributes,q=this.context,H=q.gl;this.vao&&this.destroy(),this.vao=q.createVertexArray(),q.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=_,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=D,u.enableAttributes(H,r);for(const G of p)G.enableAttributes(H,r);M&&M.enableAttributes(H,r),I&&I.enableAttributes(H,r),D&&D.enableAttributes(H,r),u.bind(),u.setVertexAttribPointers(H,r,w);for(const G of p)G.bind(),G.setVertexAttribPointers(H,r,w);M&&(M.bind(),M.setVertexAttribPointers(H,r,w)),_&&_.bind(),I&&(I.bind(),I.setVertexAttribPointers(H,r,w)),D&&(D.bind(),D.setVertexAttribPointers(H,r,w)),q.currentNumAttributes=$}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const _d=(x,r,u,p,_)=>({u_texture:0,u_ele_delta:x,u_fog_matrix:r,u_fog_color:u?u.properties.get("fog-color"):l.bf.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?0:u?u.calculateFogBlendOpacity(p):0,u_horizon_color:u?u.properties.get("horizon-color"):l.bf.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:_?1:0}),fh={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function js(x){const r=[];for(let u=0;u<x.length;u++){if(x[u]===null)continue;const p=x[u].split(" ");r.push(p.pop())}return r}class _l{constructor(r,u,p,_,w,M,I,D,$=[]){const q=r.gl;this.program=q.createProgram();const H=js(u.staticAttributes),G=p?p.getBinderAttributes():[],Q=H.concat(G),oe=Ri.prelude.staticUniforms?js(Ri.prelude.staticUniforms):[],me=I.staticUniforms?js(I.staticUniforms):[],pe=u.staticUniforms?js(u.staticUniforms):[],ge=p?p.getBinderUniforms():[],_e=oe.concat(me).concat(pe).concat(ge),Te=[];for(const We of _e)Te.indexOf(We)<0&&Te.push(We);const be=p?p.defines():[];ri(q)&&be.unshift("#version 300 es"),w&&be.push("#define OVERDRAW_INSPECTOR;"),M&&be.push("#define TERRAIN3D;"),D&&be.push(D),$&&be.push(...$);let Ce=be.concat(Ri.prelude.fragmentSource,I.fragmentSource,u.fragmentSource).join(`
`),Oe=be.concat(Ri.prelude.vertexSource,I.vertexSource,u.vertexSource).join(`
`);ri(q)||(Ce=function(We){return We.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Ce),Oe=function(We){return We.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Oe));const we=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(we,Ce),q.compileShader(we),!q.getShaderParameter(we,q.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${q.getShaderInfoLog(we)}`);q.attachShader(this.program,we);const Ne=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(Ne,Oe),q.compileShader(Ne),!q.getShaderParameter(Ne,q.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${q.getShaderInfoLog(Ne)}`);q.attachShader(this.program,Ne),this.attributes={};const nt={};this.numAttributes=Q.length;for(let We=0;We<this.numAttributes;We++)Q[We]&&(q.bindAttribLocation(this.program,We,Q[We]),this.attributes[Q[We]]=We);if(q.linkProgram(this.program),!q.getProgramParameter(this.program,q.LINK_STATUS))throw new Error(`Program failed to link: ${q.getProgramInfoLog(this.program)}`);q.deleteShader(Ne),q.deleteShader(we);for(let We=0;We<Te.length;We++){const Ke=Te[We];if(Ke&&!nt[Ke]){const Qe=q.getUniformLocation(this.program,Ke);Qe&&(nt[Ke]=Qe)}}this.fixedUniforms=_(r,nt),this.terrainUniforms=((We,Ke)=>({u_depth:new l.bQ(We,Ke.u_depth),u_terrain:new l.bQ(We,Ke.u_terrain),u_terrain_dim:new l.bg(We,Ke.u_terrain_dim),u_terrain_matrix:new l.bS(We,Ke.u_terrain_matrix),u_terrain_unpack:new l.bT(We,Ke.u_terrain_unpack),u_terrain_exaggeration:new l.bg(We,Ke.u_terrain_exaggeration)}))(r,nt),this.projectionUniforms=((We,Ke)=>({u_projection_matrix:new l.bS(We,Ke.u_projection_matrix),u_projection_tile_mercator_coords:new l.bT(We,Ke.u_projection_tile_mercator_coords),u_projection_clipping_plane:new l.bT(We,Ke.u_projection_clipping_plane),u_projection_transition:new l.bg(We,Ke.u_projection_transition),u_projection_fallback_matrix:new l.bS(We,Ke.u_projection_fallback_matrix)}))(r,nt),this.binderUniforms=p?p.getUniforms(r,nt):[]}draw(r,u,p,_,w,M,I,D,$,q,H,G,Q,oe,me,pe,ge,_e,Te){const be=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(p),r.setStencilMode(_),r.setColorMode(w),r.setCullFace(M),D){r.activeTexture.set(be.TEXTURE2),be.bindTexture(be.TEXTURE_2D,D.depthTexture),r.activeTexture.set(be.TEXTURE3),be.bindTexture(be.TEXTURE_2D,D.texture);for(const Oe in this.terrainUniforms)this.terrainUniforms[Oe].set(D[Oe])}if($)for(const Oe in $)this.projectionUniforms[fh[Oe]].set($[Oe]);if(I)for(const Oe in this.fixedUniforms)this.fixedUniforms[Oe].set(I[Oe]);pe&&pe.setUniforms(r,this.binderUniforms,oe,{zoom:me});let Ce=0;switch(u){case be.LINES:Ce=2;break;case be.TRIANGLES:Ce=3;break;case be.LINE_STRIP:Ce=1}for(const Oe of Q.get()){const we=Oe.vaos||(Oe.vaos={});(we[q]||(we[q]=new dh)).bind(r,this,H,pe?pe.getPaintVertexBuffers():[],G,Oe.vertexOffset,ge,_e,Te),be.drawElements(u,Oe.primitiveLength*Ce,be.UNSIGNED_SHORT,Oe.primitiveOffset*Ce*2)}}}function ho(x,r,u){const p=1/l.aC(u,1,r.transform.tileZoom),_=Math.pow(2,u.tileID.overscaledZ),w=u.tileSize*Math.pow(2,r.transform.tileZoom)/_,M=w*(u.tileID.canonical.x+u.tileID.wrap*_),I=w*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,x.fromScale,x.toScale],u_fade:x.t,u_pixel_coord_upper:[M>>16,I>>16],u_pixel_coord_lower:[65535&M,65535&I]}}const xd=(x,r,u,p)=>{const _=x.style.light,w=_.properties.get("position"),M=[w.x,w.y,w.z],I=l.bW();_.properties.get("anchor")==="viewport"&&l.bX(I,x.transform.bearingInRadians),l.bY(M,M,I);const D=x.transform.transformLightDirection(M),$=_.properties.get("color");return{u_lightpos:M,u_lightpos_globe:D,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[$.r,$.g,$.b],u_vertical_gradient:+r,u_opacity:u,u_fill_translate:p}},ph=(x,r,u,p,_,w,M)=>l.e(xd(x,r,u,p),ho(w,x,M),{u_height_factor:-Math.pow(2,_.overscaledZ)/M.tileSize/8}),xl=(x,r,u,p)=>l.e(ho(r,x,u),{u_fill_translate:p}),dc=(x,r)=>({u_world:x,u_fill_translate:r}),Uf=(x,r,u,p,_)=>l.e(xl(x,r,u,_),{u_world:p}),is=(x,r,u,p,_)=>{const w=x.transform;let M,I,D=0;if(u.paint.get("circle-pitch-alignment")==="map"){const $=l.aC(r,1,w.zoom);M=!0,I=[$,$],D=$/(l.$*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*_}else M=!1,I=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+M,u_device_pixel_ratio:x.pixelRatio,u_extrude_scale:I,u_globe_extrude_scale:D,u_translate:p}},km=x=>({u_pixel_extrude_scale:[1/x.width,1/x.height]}),fc=x=>({u_viewport_size:[x.width,x.height]}),Vf=(x,r=1)=>({u_color:x,u_overlay:0,u_overlay_scale:r}),mh=(x,r,u,p)=>{const _=l.aC(x,1,r)/(l.$*Math.pow(2,x.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:l.aC(x,1,r),u_intensity:u,u_globe_extrude_scale:_}},bd=(x,r,u,p)=>{const _=l.L();l.bZ(_,0,x.width,x.height,0,0,1);const w=x.context.gl;return{u_matrix:_,u_world:[w.drawingBufferWidth,w.drawingBufferHeight],u_image:u,u_color_ramp:p,u_opacity:r.paint.get("heatmap-opacity")}},pc=(x,r,u)=>{const p=u.paint.get("hillshade-accent-color");let _;switch(u.paint.get("hillshade-method")){case"basic":_=4;break;case"combined":_=1;break;case"igor":_=2;break;case"multidirectional":_=3;break;default:_=0}const w=u.getIlluminationProperties();for(let M=0;M<w.directionRadians.length;M++)u.paint.get("hillshade-illumination-anchor")==="viewport"&&(w.directionRadians[M]+=x.transform.bearingInRadians);return{u_image:0,u_latrange:Gf(0,r.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:w.altitudeRadians,u_azimuths:w.directionRadians,u_accent:p,u_method:_,u_highlights:w.highlightColor,u_shadows:w.shadowColor}},bl=(x,r)=>{const u=r.stride,p=l.L();return l.bZ(p,0,l.$,-l.$,0,0,1),l.M(p,p,[0,-l.$,0]),{u_matrix:p,u_image:1,u_dimension:[u,u],u_zoom:x.overscaledZ,u_unpack:r.getUnpackVector()}};function Gf(x,r){const u=Math.pow(2,r.canonical.z),p=r.canonical.y;return[new l.a1(0,p/u).toLngLat().lat,new l.a1(0,(p+1)/u).toLngLat().lat]}const nu=(x,r,u=0)=>({u_image:0,u_unpack:r.getUnpackVector(),u_dimension:[r.stride,r.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:u,u_opacity:x.paint.get("color-relief-opacity")}),mc=(x,r,u,p)=>{const _=x.transform;return{u_translation:Td(x,r,u),u_ratio:p/l.aC(r,1,_.zoom),u_device_pixel_ratio:x.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},wd=(x,r,u,p,_)=>l.e(mc(x,r,u,p),{u_image:0,u_image_height:_}),as=(x,r,u,p,_)=>{const w=x.transform,M=Os(r,w);return{u_translation:Td(x,r,u),u_texsize:r.imageAtlasTexture.size,u_ratio:p/l.aC(r,1,w.zoom),u_device_pixel_ratio:x.pixelRatio,u_image:0,u_scale:[M,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},gh=(x,r,u,p,_)=>{const w=Os(r,x.transform);return l.e(mc(x,r,u,p),{u_tileratio:w,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image:0,u_mix:_.t,u_lineatlas_width:x.lineAtlas.width,u_lineatlas_height:x.lineAtlas.height})},Sd=(x,r,u,p,_,w)=>{const M=Os(r,x.transform);return l.e(mc(x,r,u,p),{u_image:0,u_image_height:w,u_tileratio:M,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image_dash:1,u_mix:_.t,u_lineatlas_width:x.lineAtlas.width,u_lineatlas_height:x.lineAtlas.height})};function Os(x,r){return 1/l.aC(x,1,r.tileZoom)}function Td(x,r,u){return l.aD(x.transform,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const yh=(x,r,u,p,_)=>{return{u_tl_parent:x,u_scale_parent:r,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(M=p.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(w=p.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:Im(p.paint.get("raster-hue-rotate")),u_coords_top:[_[0].x,_[0].y,_[1].x,_[1].y],u_coords_bottom:[_[3].x,_[3].y,_[2].x,_[2].y]};var w,M};function Im(x){x*=Math.PI/180;const r=Math.sin(x),u=Math.cos(x);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const Zf=(x,r,u,p,_,w,M,I,D,$,q,H,G)=>{const Q=M.transform;return{u_is_size_zoom_constant:+(x==="constant"||x==="source"),u_is_size_feature_constant:+(x==="constant"||x==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Q.cameraToCenterDistance,u_pitch:Q.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:Q.width/Q.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_label_plane_matrix:I,u_coord_matrix:D,u_is_text:+q,u_pitch_with_map:+p,u_is_along_line:_,u_is_variable_anchor:w,u_texsize:H,u_texture:0,u_translation:$,u_pitched_scale:G}},Ad=(x,r,u,p,_,w,M,I,D,$,q,H,G,Q)=>{const oe=M.transform;return l.e(Zf(x,r,u,p,_,w,M,I,D,$,q,H,Q),{u_gamma_scale:p?Math.cos(oe.pitch*Math.PI/180)*oe.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},Hf=(x,r,u,p,_,w,M,I,D,$,q,H,G)=>l.e(Ad(x,r,u,p,_,w,M,I,D,$,!0,q,0,G),{u_texsize_icon:H,u_texture_icon:1}),fa=(x,r)=>({u_opacity:x,u_color:r}),wl=(x,r,u,p,_)=>l.e(function(w,M,I,D){const $=I.imageManager.getPattern(w.from.toString()),q=I.imageManager.getPattern(w.to.toString()),{width:H,height:G}=I.imageManager.getPixelSize(),Q=Math.pow(2,D.tileID.overscaledZ),oe=D.tileSize*Math.pow(2,I.transform.tileZoom)/Q,me=oe*(D.tileID.canonical.x+D.tileID.wrap*Q),pe=oe*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:$.tl,u_pattern_br_a:$.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[H,G],u_mix:M.t,u_pattern_size_a:$.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/l.aC(D,1,I.transform.tileZoom),u_pixel_coord_upper:[me>>16,pe>>16],u_pixel_coord_lower:[65535&me,65535&pe]}}(u,_,r,p),{u_opacity:x}),vh=(x,r)=>{},iu={fillExtrusion:(x,r)=>({u_lightpos:new l.bU(x,r.u_lightpos),u_lightpos_globe:new l.bU(x,r.u_lightpos_globe),u_lightintensity:new l.bg(x,r.u_lightintensity),u_lightcolor:new l.bU(x,r.u_lightcolor),u_vertical_gradient:new l.bg(x,r.u_vertical_gradient),u_opacity:new l.bg(x,r.u_opacity),u_fill_translate:new l.bV(x,r.u_fill_translate)}),fillExtrusionPattern:(x,r)=>({u_lightpos:new l.bU(x,r.u_lightpos),u_lightpos_globe:new l.bU(x,r.u_lightpos_globe),u_lightintensity:new l.bg(x,r.u_lightintensity),u_lightcolor:new l.bU(x,r.u_lightcolor),u_vertical_gradient:new l.bg(x,r.u_vertical_gradient),u_height_factor:new l.bg(x,r.u_height_factor),u_opacity:new l.bg(x,r.u_opacity),u_fill_translate:new l.bV(x,r.u_fill_translate),u_image:new l.bQ(x,r.u_image),u_texsize:new l.bV(x,r.u_texsize),u_pixel_coord_upper:new l.bV(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bV(x,r.u_pixel_coord_lower),u_scale:new l.bU(x,r.u_scale),u_fade:new l.bg(x,r.u_fade)}),fill:(x,r)=>({u_fill_translate:new l.bV(x,r.u_fill_translate)}),fillPattern:(x,r)=>({u_image:new l.bQ(x,r.u_image),u_texsize:new l.bV(x,r.u_texsize),u_pixel_coord_upper:new l.bV(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bV(x,r.u_pixel_coord_lower),u_scale:new l.bU(x,r.u_scale),u_fade:new l.bg(x,r.u_fade),u_fill_translate:new l.bV(x,r.u_fill_translate)}),fillOutline:(x,r)=>({u_world:new l.bV(x,r.u_world),u_fill_translate:new l.bV(x,r.u_fill_translate)}),fillOutlinePattern:(x,r)=>({u_world:new l.bV(x,r.u_world),u_image:new l.bQ(x,r.u_image),u_texsize:new l.bV(x,r.u_texsize),u_pixel_coord_upper:new l.bV(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bV(x,r.u_pixel_coord_lower),u_scale:new l.bU(x,r.u_scale),u_fade:new l.bg(x,r.u_fade),u_fill_translate:new l.bV(x,r.u_fill_translate)}),circle:(x,r)=>({u_camera_to_center_distance:new l.bg(x,r.u_camera_to_center_distance),u_scale_with_map:new l.bQ(x,r.u_scale_with_map),u_pitch_with_map:new l.bQ(x,r.u_pitch_with_map),u_extrude_scale:new l.bV(x,r.u_extrude_scale),u_device_pixel_ratio:new l.bg(x,r.u_device_pixel_ratio),u_globe_extrude_scale:new l.bg(x,r.u_globe_extrude_scale),u_translate:new l.bV(x,r.u_translate)}),collisionBox:(x,r)=>({u_pixel_extrude_scale:new l.bV(x,r.u_pixel_extrude_scale)}),collisionCircle:(x,r)=>({u_viewport_size:new l.bV(x,r.u_viewport_size)}),debug:(x,r)=>({u_color:new l.bR(x,r.u_color),u_overlay:new l.bQ(x,r.u_overlay),u_overlay_scale:new l.bg(x,r.u_overlay_scale)}),depth:vh,clippingMask:vh,heatmap:(x,r)=>({u_extrude_scale:new l.bg(x,r.u_extrude_scale),u_intensity:new l.bg(x,r.u_intensity),u_globe_extrude_scale:new l.bg(x,r.u_globe_extrude_scale)}),heatmapTexture:(x,r)=>({u_matrix:new l.bS(x,r.u_matrix),u_world:new l.bV(x,r.u_world),u_image:new l.bQ(x,r.u_image),u_color_ramp:new l.bQ(x,r.u_color_ramp),u_opacity:new l.bg(x,r.u_opacity)}),hillshade:(x,r)=>({u_image:new l.bQ(x,r.u_image),u_latrange:new l.bV(x,r.u_latrange),u_exaggeration:new l.bg(x,r.u_exaggeration),u_altitudes:new l.b$(x,r.u_altitudes),u_azimuths:new l.b$(x,r.u_azimuths),u_accent:new l.bR(x,r.u_accent),u_method:new l.bQ(x,r.u_method),u_shadows:new l.b_(x,r.u_shadows),u_highlights:new l.b_(x,r.u_highlights)}),hillshadePrepare:(x,r)=>({u_matrix:new l.bS(x,r.u_matrix),u_image:new l.bQ(x,r.u_image),u_dimension:new l.bV(x,r.u_dimension),u_zoom:new l.bg(x,r.u_zoom),u_unpack:new l.bT(x,r.u_unpack)}),colorRelief:(x,r)=>({u_image:new l.bQ(x,r.u_image),u_unpack:new l.bT(x,r.u_unpack),u_dimension:new l.bV(x,r.u_dimension),u_elevation_stops:new l.bQ(x,r.u_elevation_stops),u_color_stops:new l.bQ(x,r.u_color_stops),u_color_ramp_size:new l.bQ(x,r.u_color_ramp_size),u_opacity:new l.bg(x,r.u_opacity)}),line:(x,r)=>({u_translation:new l.bV(x,r.u_translation),u_ratio:new l.bg(x,r.u_ratio),u_device_pixel_ratio:new l.bg(x,r.u_device_pixel_ratio),u_units_to_pixels:new l.bV(x,r.u_units_to_pixels)}),lineGradient:(x,r)=>({u_translation:new l.bV(x,r.u_translation),u_ratio:new l.bg(x,r.u_ratio),u_device_pixel_ratio:new l.bg(x,r.u_device_pixel_ratio),u_units_to_pixels:new l.bV(x,r.u_units_to_pixels),u_image:new l.bQ(x,r.u_image),u_image_height:new l.bg(x,r.u_image_height)}),linePattern:(x,r)=>({u_translation:new l.bV(x,r.u_translation),u_texsize:new l.bV(x,r.u_texsize),u_ratio:new l.bg(x,r.u_ratio),u_device_pixel_ratio:new l.bg(x,r.u_device_pixel_ratio),u_image:new l.bQ(x,r.u_image),u_units_to_pixels:new l.bV(x,r.u_units_to_pixels),u_scale:new l.bU(x,r.u_scale),u_fade:new l.bg(x,r.u_fade)}),lineSDF:(x,r)=>({u_translation:new l.bV(x,r.u_translation),u_ratio:new l.bg(x,r.u_ratio),u_device_pixel_ratio:new l.bg(x,r.u_device_pixel_ratio),u_units_to_pixels:new l.bV(x,r.u_units_to_pixels),u_image:new l.bQ(x,r.u_image),u_mix:new l.bg(x,r.u_mix),u_tileratio:new l.bg(x,r.u_tileratio),u_crossfade_from:new l.bg(x,r.u_crossfade_from),u_crossfade_to:new l.bg(x,r.u_crossfade_to),u_lineatlas_width:new l.bg(x,r.u_lineatlas_width),u_lineatlas_height:new l.bg(x,r.u_lineatlas_height)}),lineGradientSDF:(x,r)=>({u_translation:new l.bV(x,r.u_translation),u_ratio:new l.bg(x,r.u_ratio),u_device_pixel_ratio:new l.bg(x,r.u_device_pixel_ratio),u_units_to_pixels:new l.bV(x,r.u_units_to_pixels),u_image:new l.bQ(x,r.u_image),u_image_height:new l.bg(x,r.u_image_height),u_tileratio:new l.bg(x,r.u_tileratio),u_crossfade_from:new l.bg(x,r.u_crossfade_from),u_crossfade_to:new l.bg(x,r.u_crossfade_to),u_image_dash:new l.bQ(x,r.u_image_dash),u_mix:new l.bg(x,r.u_mix),u_lineatlas_width:new l.bg(x,r.u_lineatlas_width),u_lineatlas_height:new l.bg(x,r.u_lineatlas_height)}),raster:(x,r)=>({u_tl_parent:new l.bV(x,r.u_tl_parent),u_scale_parent:new l.bg(x,r.u_scale_parent),u_buffer_scale:new l.bg(x,r.u_buffer_scale),u_fade_t:new l.bg(x,r.u_fade_t),u_opacity:new l.bg(x,r.u_opacity),u_image0:new l.bQ(x,r.u_image0),u_image1:new l.bQ(x,r.u_image1),u_brightness_low:new l.bg(x,r.u_brightness_low),u_brightness_high:new l.bg(x,r.u_brightness_high),u_saturation_factor:new l.bg(x,r.u_saturation_factor),u_contrast_factor:new l.bg(x,r.u_contrast_factor),u_spin_weights:new l.bU(x,r.u_spin_weights),u_coords_top:new l.bT(x,r.u_coords_top),u_coords_bottom:new l.bT(x,r.u_coords_bottom)}),symbolIcon:(x,r)=>({u_is_size_zoom_constant:new l.bQ(x,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bQ(x,r.u_is_size_feature_constant),u_size_t:new l.bg(x,r.u_size_t),u_size:new l.bg(x,r.u_size),u_camera_to_center_distance:new l.bg(x,r.u_camera_to_center_distance),u_pitch:new l.bg(x,r.u_pitch),u_rotate_symbol:new l.bQ(x,r.u_rotate_symbol),u_aspect_ratio:new l.bg(x,r.u_aspect_ratio),u_fade_change:new l.bg(x,r.u_fade_change),u_label_plane_matrix:new l.bS(x,r.u_label_plane_matrix),u_coord_matrix:new l.bS(x,r.u_coord_matrix),u_is_text:new l.bQ(x,r.u_is_text),u_pitch_with_map:new l.bQ(x,r.u_pitch_with_map),u_is_along_line:new l.bQ(x,r.u_is_along_line),u_is_variable_anchor:new l.bQ(x,r.u_is_variable_anchor),u_texsize:new l.bV(x,r.u_texsize),u_texture:new l.bQ(x,r.u_texture),u_translation:new l.bV(x,r.u_translation),u_pitched_scale:new l.bg(x,r.u_pitched_scale)}),symbolSDF:(x,r)=>({u_is_size_zoom_constant:new l.bQ(x,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bQ(x,r.u_is_size_feature_constant),u_size_t:new l.bg(x,r.u_size_t),u_size:new l.bg(x,r.u_size),u_camera_to_center_distance:new l.bg(x,r.u_camera_to_center_distance),u_pitch:new l.bg(x,r.u_pitch),u_rotate_symbol:new l.bQ(x,r.u_rotate_symbol),u_aspect_ratio:new l.bg(x,r.u_aspect_ratio),u_fade_change:new l.bg(x,r.u_fade_change),u_label_plane_matrix:new l.bS(x,r.u_label_plane_matrix),u_coord_matrix:new l.bS(x,r.u_coord_matrix),u_is_text:new l.bQ(x,r.u_is_text),u_pitch_with_map:new l.bQ(x,r.u_pitch_with_map),u_is_along_line:new l.bQ(x,r.u_is_along_line),u_is_variable_anchor:new l.bQ(x,r.u_is_variable_anchor),u_texsize:new l.bV(x,r.u_texsize),u_texture:new l.bQ(x,r.u_texture),u_gamma_scale:new l.bg(x,r.u_gamma_scale),u_device_pixel_ratio:new l.bg(x,r.u_device_pixel_ratio),u_is_halo:new l.bQ(x,r.u_is_halo),u_translation:new l.bV(x,r.u_translation),u_pitched_scale:new l.bg(x,r.u_pitched_scale)}),symbolTextAndIcon:(x,r)=>({u_is_size_zoom_constant:new l.bQ(x,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bQ(x,r.u_is_size_feature_constant),u_size_t:new l.bg(x,r.u_size_t),u_size:new l.bg(x,r.u_size),u_camera_to_center_distance:new l.bg(x,r.u_camera_to_center_distance),u_pitch:new l.bg(x,r.u_pitch),u_rotate_symbol:new l.bQ(x,r.u_rotate_symbol),u_aspect_ratio:new l.bg(x,r.u_aspect_ratio),u_fade_change:new l.bg(x,r.u_fade_change),u_label_plane_matrix:new l.bS(x,r.u_label_plane_matrix),u_coord_matrix:new l.bS(x,r.u_coord_matrix),u_is_text:new l.bQ(x,r.u_is_text),u_pitch_with_map:new l.bQ(x,r.u_pitch_with_map),u_is_along_line:new l.bQ(x,r.u_is_along_line),u_is_variable_anchor:new l.bQ(x,r.u_is_variable_anchor),u_texsize:new l.bV(x,r.u_texsize),u_texsize_icon:new l.bV(x,r.u_texsize_icon),u_texture:new l.bQ(x,r.u_texture),u_texture_icon:new l.bQ(x,r.u_texture_icon),u_gamma_scale:new l.bg(x,r.u_gamma_scale),u_device_pixel_ratio:new l.bg(x,r.u_device_pixel_ratio),u_is_halo:new l.bQ(x,r.u_is_halo),u_translation:new l.bV(x,r.u_translation),u_pitched_scale:new l.bg(x,r.u_pitched_scale)}),background:(x,r)=>({u_opacity:new l.bg(x,r.u_opacity),u_color:new l.bR(x,r.u_color)}),backgroundPattern:(x,r)=>({u_opacity:new l.bg(x,r.u_opacity),u_image:new l.bQ(x,r.u_image),u_pattern_tl_a:new l.bV(x,r.u_pattern_tl_a),u_pattern_br_a:new l.bV(x,r.u_pattern_br_a),u_pattern_tl_b:new l.bV(x,r.u_pattern_tl_b),u_pattern_br_b:new l.bV(x,r.u_pattern_br_b),u_texsize:new l.bV(x,r.u_texsize),u_mix:new l.bg(x,r.u_mix),u_pattern_size_a:new l.bV(x,r.u_pattern_size_a),u_pattern_size_b:new l.bV(x,r.u_pattern_size_b),u_scale_a:new l.bg(x,r.u_scale_a),u_scale_b:new l.bg(x,r.u_scale_b),u_pixel_coord_upper:new l.bV(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bV(x,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.bg(x,r.u_tile_units_to_pixels)}),terrain:(x,r)=>({u_texture:new l.bQ(x,r.u_texture),u_ele_delta:new l.bg(x,r.u_ele_delta),u_fog_matrix:new l.bS(x,r.u_fog_matrix),u_fog_color:new l.bR(x,r.u_fog_color),u_fog_ground_blend:new l.bg(x,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new l.bg(x,r.u_fog_ground_blend_opacity),u_horizon_color:new l.bR(x,r.u_horizon_color),u_horizon_fog_blend:new l.bg(x,r.u_horizon_fog_blend),u_is_globe_mode:new l.bg(x,r.u_is_globe_mode)}),terrainDepth:(x,r)=>({u_ele_delta:new l.bg(x,r.u_ele_delta)}),terrainCoords:(x,r)=>({u_texture:new l.bQ(x,r.u_texture),u_terrain_coords_id:new l.bg(x,r.u_terrain_coords_id),u_ele_delta:new l.bg(x,r.u_ele_delta)}),projectionErrorMeasurement:(x,r)=>({u_input:new l.bg(x,r.u_input),u_output_expected:new l.bg(x,r.u_output_expected)}),atmosphere:(x,r)=>({u_sun_pos:new l.bU(x,r.u_sun_pos),u_atmosphere_blend:new l.bg(x,r.u_atmosphere_blend),u_globe_position:new l.bU(x,r.u_globe_position),u_globe_radius:new l.bg(x,r.u_globe_radius),u_inv_proj_matrix:new l.bS(x,r.u_inv_proj_matrix)}),sky:(x,r)=>({u_sky_color:new l.bR(x,r.u_sky_color),u_horizon_color:new l.bR(x,r.u_horizon_color),u_horizon:new l.bV(x,r.u_horizon),u_horizon_normal:new l.bV(x,r.u_horizon_normal),u_sky_horizon_blend:new l.bg(x,r.u_sky_horizon_blend),u_sky_blend:new l.bg(x,r.u_sky_blend)})};class No{constructor(r,u,p){this.context=r;const _=r.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const _h={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class au{constructor(r,u,p,_){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=_,this.context=r;const w=r.gl;this.buffer=w.createBuffer(),r.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let p=0;p<this.attributes.length;p++){const _=u.attributes[this.attributes[p].name];_!==void 0&&r.enableVertexAttribArray(_)}}setVertexAttribPointers(r,u,p){for(let _=0;_<this.attributes.length;_++){const w=this.attributes[_],M=u.attributes[w.name];M!==void 0&&r.vertexAttribPointer(M,w.components,r[_h[w.type]],!1,this.itemSize,w.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Fr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Sl extends Fr{getDefault(){return l.bf.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ou extends Fr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class fo extends Fr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class su extends Fr{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Xf extends Fr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Tl extends Fr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class gc extends Fr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Md extends Fr{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Pd extends Fr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class Al extends Fr{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ed extends Fr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class lu extends Fr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class cu extends Fr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class xh extends Fr{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Cd extends Fr{getDefault(){return l.bf.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ml extends Fr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class yc extends Fr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class Pl extends Fr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class pa extends Fr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class qa extends Fr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class jd extends Fr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class ma extends Fr{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class xi extends Fr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class os extends Fr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class vc extends Fr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class ks extends Fr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class El extends Fr{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class bh extends Fr{getDefault(){return null}set(r){var u;if(r===this.current&&!this.dirty)return;const p=this.gl;ri(p)?p.bindVertexArray(r):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class po extends Fr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Cl extends Fr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class uu extends Fr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Ro extends Fr{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class Pr extends Ro{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Bi extends Ro{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Od extends Ro{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const mo="Framebuffer is not complete";class _c{constructor(r,u,p,_,w){this.context=r,this.width=u,this.height=p;const M=r.gl,I=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new Pr(r,I),_)this.depthAttachment=w?new Od(r,I):new Bi(r,I);else if(w)throw new Error("Stencil cannot be set without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error(mo)}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&r.deleteRenderbuffer(p)}r.deleteFramebuffer(this.framebuffer)}}class wh{constructor(r){var u,p;if(this.gl=r,this.clearColor=new Sl(this),this.clearDepth=new ou(this),this.clearStencil=new fo(this),this.colorMask=new su(this),this.depthMask=new Xf(this),this.stencilMask=new Tl(this),this.stencilFunc=new gc(this),this.stencilOp=new Md(this),this.stencilTest=new Pd(this),this.depthRange=new Al(this),this.depthTest=new Ed(this),this.depthFunc=new lu(this),this.blend=new cu(this),this.blendFunc=new xh(this),this.blendColor=new Cd(this),this.blendEquation=new Ml(this),this.cullFace=new yc(this),this.cullFaceSide=new Pl(this),this.frontFace=new pa(this),this.program=new qa(this),this.activeTexture=new jd(this),this.viewport=new ma(this),this.bindFramebuffer=new xi(this),this.bindRenderbuffer=new os(this),this.bindTexture=new vc(this),this.bindVertexBuffer=new ks(this),this.bindElementBuffer=new El(this),this.bindVertexArray=new bh(this),this.pixelStoreUnpack=new po(this),this.pixelStoreUnpackPremultiplyAlpha=new Cl(this),this.pixelStoreUnpackFlipY=new uu(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),ri(r)){this.HALF_FLOAT=r.HALF_FLOAT;const _=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=r.RGBA16F)!==null&&u!==void 0?u:_==null?void 0:_.RGBA16F_EXT,this.RGB16F=(p=r.RGB16F)!==null&&p!==void 0?p:_==null?void 0:_.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const _=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=_==null?void 0:_.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new No(this,r,u)}createVertexBuffer(r,u,p){return new au(this,r,u,p)}createRenderbuffer(r,u,p){const _=this.gl,w=_.createRenderbuffer();return this.bindRenderbuffer.set(w),_.renderbufferStorage(_.RENDERBUFFER,r,u,p),this.bindRenderbuffer.set(null),w}createFramebuffer(r,u,p,_){return new _c(this,r,u,p,_)}clear({color:r,depth:u,stencil:p}){const _=this.gl;let w=0;r&&(w|=_.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(w|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(w|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),_.clear(w)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){l.bH(r.blendFunction,rn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return ri(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var u;return ri(this.gl)?this.gl.deleteVertexArray(r):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let Lo;function hu(x,r,u,p,_){const w=x.context,M=x.transform,I=w.gl,D=x.useProgram("collisionBox"),$=[];let q=0,H=0;for(let ge=0;ge<p.length;ge++){const _e=p[ge],Te=r.getTile(_e).getBucket(u);if(!Te)continue;const be=_?Te.textCollisionBox:Te.iconCollisionBox,Ce=Te.collisionCircleArray;Ce.length>0&&($.push({circleArray:Ce,circleOffset:H,coord:_e}),q+=Ce.length/4,H=q),be&&D.draw(w,I.LINES,ur.disabled,hr.disabled,x.colorModeForRenderPass(),br.disabled,km(x.transform),x.style.map.terrain&&x.style.map.terrain.getTerrainData(_e),M.getProjectionData({overscaledTileID:_e,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,null,x.transform.zoom,null,null,be.collisionVertexBuffer)}if(!_||!$.length)return;const G=x.useProgram("collisionCircle"),Q=new l.c0;Q.resize(4*q),Q._trim();let oe=0;for(const ge of $)for(let _e=0;_e<ge.circleArray.length/4;_e++){const Te=4*_e,be=ge.circleArray[Te+0],Ce=ge.circleArray[Te+1],Oe=ge.circleArray[Te+2],we=ge.circleArray[Te+3];Q.emplace(oe++,be,Ce,Oe,we,0),Q.emplace(oe++,be,Ce,Oe,we,1),Q.emplace(oe++,be,Ce,Oe,we,2),Q.emplace(oe++,be,Ce,Oe,we,3)}(!Lo||Lo.length<2*q)&&(Lo=function(ge){const _e=2*ge,Te=new l.c2;Te.resize(_e),Te._trim();for(let be=0;be<_e;be++){const Ce=6*be;Te.uint16[Ce+0]=4*be+0,Te.uint16[Ce+1]=4*be+1,Te.uint16[Ce+2]=4*be+2,Te.uint16[Ce+3]=4*be+2,Te.uint16[Ce+4]=4*be+3,Te.uint16[Ce+5]=4*be+0}return Te}(q));const me=w.createIndexBuffer(Lo,!0),pe=w.createVertexBuffer(Q,l.c1.members,!0);for(const ge of $){const _e=fc(x.transform);G.draw(w,I.TRIANGLES,ur.disabled,hr.disabled,x.colorModeForRenderPass(),br.disabled,_e,x.style.map.terrain&&x.style.map.terrain.getTerrainData(ge.coord),null,u.id,pe,me,l.aM.simpleSegment(0,2*ge.circleOffset,ge.circleArray.length,ge.circleArray.length/2),null,x.transform.zoom,null,null,null)}pe.destroy(),me.destroy()}const kd=l.ag(new Float32Array(16));function Is(x,r,u,p,_,w){const{horizontalAlign:M,verticalAlign:I}=l.aH(x);return new l.P((-(M-.5)*r/_+p[0])*w,(-(I-.5)*u/_+p[1])*w)}function ss(x,r,u,p,_,w){const M=r.tileAnchorPoint.add(new l.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let I=p.mult(w);u||(I=I.rotate(-_));const D=M.add(I);return wt(D.x,D.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(u){const I=dn(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(x),D=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return x.add(p.rotate(D))}return x.add(p)}function jl(x,r,u,p,_,w,M,I,D,$,q,H){const G=x.text.placedSymbolArray,Q=x.text.dynamicLayoutVertexArray,oe=x.icon.dynamicLayoutVertexArray,me={};Q.clear();for(let pe=0;pe<G.length;pe++){const ge=G.get(pe),_e=ge.hidden||!ge.crossTileID||x.allowVerticalPlacement&&!ge.placedOrientation?null:p[ge.crossTileID];if(_e){const Te=new l.P(ge.anchorX,ge.anchorY),be={getElevation:H,width:_.width,height:_.height,pitchedLabelPlaneMatrix:w,pitchWithMap:u,transform:_,tileAnchorPoint:Te,translation:$,unwrappedTileID:q},Ce=u?vr(Te.x,Te.y,be):dn(Te.x,Te.y,be),Oe=Po(_.cameraToCenterDistance,Ce.signedDistanceFromCamera);let we=l.ap(x.textSizeData,I,ge)*Oe/l.aB;u&&(we*=x.tilePixelRatio/M);const{width:Ne,height:nt,anchor:We,textOffset:Ke,textBoxScale:Qe}=_e,Tt=Is(We,Ne,nt,Ke,Qe,we),At=_.getPitchedTextCorrection(Te.x+$[0],Te.y+$[1],q),yt=ss(Ce.point,be,r,Tt,-_.bearingInRadians,At),Lt=x.allowVerticalPlacement&&ge.placedOrientation===l.ao.vertical?Math.PI/2:0;for(let lr=0;lr<ge.numGlyphs;lr++)l.av(Q,yt,Lt);D&&ge.associatedIconIndex>=0&&(me[ge.associatedIconIndex]={shiftedAnchor:yt,angle:Lt})}else Co(ge.numGlyphs,Q)}if(D){oe.clear();const pe=x.icon.placedSymbolArray;for(let ge=0;ge<pe.length;ge++){const _e=pe.get(ge);if(_e.hidden)Co(_e.numGlyphs,oe);else{const Te=me[ge];if(Te)for(let be=0;be<_e.numGlyphs;be++)l.av(oe,Te.shiftedAnchor,Te.angle);else Co(_e.numGlyphs,oe)}}x.icon.dynamicLayoutVertexBuffer.updateData(oe)}x.text.dynamicLayoutVertexBuffer.updateData(Q)}function Ol(x,r,u){return u.iconsInText&&r?"symbolTextAndIcon":x?"symbolSDF":"symbolIcon"}function Ji(x,r,u,p,_,w,M,I,D,$,q,H,G){const Q=x.context,oe=Q.gl,me=x.transform,pe=I==="map",ge=D==="map",_e=I!=="viewport"&&u.layout.get("symbol-placement")!=="point",Te=pe&&!ge&&!_e,be=!u.layout.get("symbol-sort-key").isConstant();let Ce=!1;const Oe=x.getDepthModeForSublayer(0,ur.ReadOnly),we=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ne=[],nt=me.getCircleRadiusCorrection();for(const We of p){const Ke=r.getTile(We),Qe=Ke.getBucket(u);if(!Qe)continue;const Tt=_?Qe.text:Qe.icon;if(!Tt||!Tt.segments.get().length||!Tt.hasVisibleVertices)continue;const At=Tt.programConfigurations.get(u.id),yt=_||Qe.sdfIcons,Lt=_?Qe.textSizeData:Qe.iconSizeData,lr=ge||me.pitch!==0,Hr=x.useProgram(Ol(yt,_,Qe),At),Xr=l.an(Lt,me.zoom),ln=x.style.map.terrain&&x.style.map.terrain.getTerrainData(We);let jn,cn,Tr,fn,ai=[0,0],$n=null;if(_)cn=Ke.glyphAtlasTexture,Tr=oe.LINEAR,jn=Ke.glyphAtlasTexture.size,Qe.iconsInText&&(ai=Ke.imageAtlasTexture.size,$n=Ke.imageAtlasTexture,fn=lr||x.options.rotating||x.options.zooming||Lt.kind==="composite"||Lt.kind==="camera"?oe.LINEAR:oe.NEAREST);else{const zn=u.layout.get("icon-size").constantOr(0)!==1||Qe.iconsNeedLinear;cn=Ke.imageAtlasTexture,Tr=yt||x.options.rotating||x.options.zooming||zn||lr?oe.LINEAR:oe.NEAREST,jn=Ke.imageAtlasTexture.size}const qn=l.aC(Ke,1,x.transform.zoom),wi=Ar(pe,x.transform,qn),ms=l.L();l.aq(ms,wi);const Ka=Mn(ge,pe,x.transform,qn),Gs=l.aD(me,Ke,w,M),Qa=me.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),Zs=we&&Qe.hasTextData(),gs=u.layout.get("icon-text-fit")!=="none"&&Zs&&Qe.hasIconData();if(_e){const zn=x.style.map.terrain?(Un,Tn)=>x.style.map.terrain.getElevation(We,Un,Tn):null,on=u.layout.get("text-rotation-alignment")==="map";Mi(Qe,x,_,wi,ms,ge,$,on,We.toUnwrapped(),me.width,me.height,Gs,zn)}const Da=_&&we||gs,Ui=_e||Da?kd:ge?wi:x.transform.clipSpaceToPixelsMatrix,_o=yt&&u.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let xo;xo=yt?Qe.iconsInText?Hf(Lt.kind,Xr,Te,ge,_e,Da,x,Ui,Ka,Gs,jn,ai,nt):Ad(Lt.kind,Xr,Te,ge,_e,Da,x,Ui,Ka,Gs,_,jn,0,nt):Zf(Lt.kind,Xr,Te,ge,_e,Da,x,Ui,Ka,Gs,_,jn,nt);const Si={program:Hr,buffers:Tt,uniformValues:xo,projectionData:Qa,atlasTexture:cn,atlasTextureIcon:$n,atlasInterpolation:Tr,atlasInterpolationIcon:fn,isSDF:yt,hasHalo:_o};if(be&&Qe.canOverlap){Ce=!0;const zn=Tt.segments.get();for(const on of zn)Ne.push({segments:new l.aM([on]),sortKey:on.sortKey,state:Si,terrainData:ln})}else Ne.push({segments:Tt.segments,sortKey:0,state:Si,terrainData:ln})}Ce&&Ne.sort((We,Ke)=>We.sortKey-Ke.sortKey);for(const We of Ne){const Ke=We.state;if(Q.activeTexture.set(oe.TEXTURE0),Ke.atlasTexture.bind(Ke.atlasInterpolation,oe.CLAMP_TO_EDGE),Ke.atlasTextureIcon&&(Q.activeTexture.set(oe.TEXTURE1),Ke.atlasTextureIcon&&Ke.atlasTextureIcon.bind(Ke.atlasInterpolationIcon,oe.CLAMP_TO_EDGE)),Ke.isSDF){const Qe=Ke.uniformValues;Ke.hasHalo&&(Qe.u_is_halo=1,ga(Ke.buffers,We.segments,u,x,Ke.program,Oe,q,H,Qe,Ke.projectionData,We.terrainData)),Qe.u_is_halo=0}ga(Ke.buffers,We.segments,u,x,Ke.program,Oe,q,H,Ke.uniformValues,Ke.projectionData,We.terrainData)}}function ga(x,r,u,p,_,w,M,I,D,$,q){const H=p.context;_.draw(H,H.gl.TRIANGLES,w,M,I,br.backCCW,D,q,$,u.id,x.layoutVertexBuffer,x.indexBuffer,r,u.paint,p.transform.zoom,x.programConfigurations.get(u.id),x.dynamicLayoutVertexBuffer,x.opacityVertexBuffer)}function Bo(x,r,u,p,_){const w=x.context,M=w.gl,I=hr.disabled,D=new rn([M.ONE,M.ONE],l.bf.transparent,[!0,!0,!0,!0]),$=r.getBucket(u);if(!$)return;const q=p.key;let H=u.heatmapFbos.get(q);H||(H=Ea(w,r.tileSize,r.tileSize),u.heatmapFbos.set(q,H)),w.bindFramebuffer.set(H.framebuffer),w.viewport.set([0,0,r.tileSize,r.tileSize]),w.clear({color:l.bf.transparent});const G=$.programConfigurations.get(u.id),Q=x.useProgram("heatmap",G,!_),oe=x.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),me=x.style.map.terrain.getTerrainData(p);Q.draw(w,M.TRIANGLES,ur.disabled,I,D,br.disabled,mh(r,x.transform.zoom,u.paint.get("heatmap-intensity"),1),me,oe,u.id,$.layoutVertexBuffer,$.indexBuffer,$.segments,u.paint,x.transform.zoom,G)}function Ua(x,r,u,p,_){const w=x.context,M=w.gl,I=x.transform;w.setColorMode(x.colorModeForRenderPass());const D=Ca(w,r),$=u.key,q=r.heatmapFbos.get($);if(!q)return;w.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,q.colorAttachment.get()),w.activeTexture.set(M.TEXTURE1),D.bind(M.LINEAR,M.CLAMP_TO_EDGE);const H=I.getProjectionData({overscaledTileID:u,applyTerrainMatrix:_,applyGlobeMatrix:!p});x.useProgram("heatmapTexture").draw(w,M.TRIANGLES,ur.disabled,hr.disabled,x.colorModeForRenderPass(),br.disabled,bd(x,r,0,1),null,H,r.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments,r.paint,I.zoom),q.destroy(),r.heatmapFbos.delete($)}function Ea(x,r,u){var p,_;const w=x.gl,M=w.createTexture();w.bindTexture(w.TEXTURE_2D,M),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR);const I=(p=x.HALF_FLOAT)!==null&&p!==void 0?p:w.UNSIGNED_BYTE,D=(_=x.RGBA16F)!==null&&_!==void 0?_:w.RGBA;w.texImage2D(w.TEXTURE_2D,0,D,r,u,0,w.RGBA,I,null);const $=x.createFramebuffer(r,u,!1,!1);return $.colorAttachment.set(M),$}function Ca(x,r){return r.colorRampTexture||(r.colorRampTexture=new l.T(x,r.colorRamp,x.gl.RGBA)),r.colorRampTexture}function du(x,r,u,p,_,w,M,I){let D=256;if(_.stepInterpolant){const $=r.getSource().maxzoom,q=M.canonical.z===$?Math.ceil(1<<x.transform.maxZoom-M.canonical.z):1;D=l.ah(l.c4(w.maxLineLength/l.$*1024*q),256,u.maxTextureSize)}return I.gradient=l.c5({expression:_.gradientExpression(),evaluationKey:"lineProgress",resolution:D,image:I.gradient||void 0,clips:w.lineClipsArray}),I.texture?I.texture.update(I.gradient):I.texture=new l.T(u,I.gradient,p.RGBA),I.version=_.gradientVersion,I.texture}function Id(x,r,u,p,_){x.activeTexture.set(r.TEXTURE0),u.imageAtlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE),p.updatePaintBuffers(_)}function kl(x,r,u,p,_,w){(_||x.lineAtlas.dirty)&&(r.activeTexture.set(u.TEXTURE0),x.lineAtlas.bind(r)),p.updatePaintBuffers(w)}function ea(x,r,u,p,_,w,M){const I=w.gradients[_.id];let D=I.texture;_.gradientVersion!==I.version&&(D=du(x,r,u,p,_,w,M,I)),u.activeTexture.set(p.TEXTURE0),D.bind(_.stepInterpolant?p.NEAREST:p.LINEAR,p.CLAMP_TO_EDGE)}function Dn(x,r,u,p,_,w,M,I,D){const $=w.gradients[_.id];let q=$.texture;_.gradientVersion!==$.version&&(q=du(x,r,u,p,_,w,M,$)),u.activeTexture.set(p.TEXTURE0),q.bind(_.stepInterpolant?p.NEAREST:p.LINEAR,p.CLAMP_TO_EDGE),u.activeTexture.set(p.TEXTURE1),x.lineAtlas.bind(u),I.updatePaintBuffers(D)}function zr(x,r,u,p,_){if(!u||!p||!p.imageAtlas)return;const w=p.imageAtlas.patternPositions;let M=w[u.to.toString()],I=w[u.from.toString()];if(!M&&I&&(M=I),!I&&M&&(I=M),!M||!I){const D=_.getPaintProperty(r);M=w[D],I=w[D]}M&&I&&x.setConstantPatternPositions(M,I)}function Fo(x,r,u,p,_,w,M,I){const D=x.context.gl,$="fill-pattern",q=u.paint.get($),H=q&&q.constantOr(1),G=u.getCrossfadeParameters();let Q,oe,me,pe,ge;const _e=x.transform,Te=u.paint.get("fill-translate"),be=u.paint.get("fill-translate-anchor");M?(oe=H&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Q=D.LINES):(oe=H?"fillPattern":"fill",Q=D.TRIANGLES);const Ce=q.constantOr(null);for(const Oe of p){const we=r.getTile(Oe);if(H&&!we.patternsLoaded())continue;const Ne=we.getBucket(u);if(!Ne)continue;const nt=Ne.programConfigurations.get(u.id),We=x.useProgram(oe,nt),Ke=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Oe);H&&(x.context.activeTexture.set(D.TEXTURE0),we.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),nt.updatePaintBuffers(G)),zr(nt,$,Ce,we,u);const Qe=_e.getProjectionData({overscaledTileID:Oe,applyGlobeMatrix:!I,applyTerrainMatrix:!0}),Tt=l.aD(_e,we,Te,be);if(M){pe=Ne.indexBuffer2,ge=Ne.segments2;const yt=[D.drawingBufferWidth,D.drawingBufferHeight];me=oe==="fillOutlinePattern"&&H?Uf(x,G,we,yt,Tt):dc(yt,Tt)}else pe=Ne.indexBuffer,ge=Ne.segments,me=H?xl(x,G,we,Tt):{u_fill_translate:Tt};const At=x.stencilModeForClipping(Oe);We.draw(x.context,Q,_,At,w,br.backCCW,me,Ke,Qe,u.id,Ne.layoutVertexBuffer,pe,ge,u.paint,x.transform.zoom,nt)}}function ja(x,r,u,p,_,w,M,I){const D=x.context,$=D.gl,q="fill-extrusion-pattern",H=u.paint.get(q),G=H.constantOr(1),Q=u.getCrossfadeParameters(),oe=u.paint.get("fill-extrusion-opacity"),me=H.constantOr(null),pe=x.transform;for(const ge of p){const _e=r.getTile(ge),Te=_e.getBucket(u);if(!Te)continue;const be=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ge),Ce=Te.programConfigurations.get(u.id),Oe=x.useProgram(G?"fillExtrusionPattern":"fillExtrusion",Ce);G&&(x.context.activeTexture.set($.TEXTURE0),_e.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),Ce.updatePaintBuffers(Q));const we=pe.getProjectionData({overscaledTileID:ge,applyGlobeMatrix:!I,applyTerrainMatrix:!0});zr(Ce,q,me,_e,u);const Ne=l.aD(pe,_e,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),nt=u.paint.get("fill-extrusion-vertical-gradient"),We=G?ph(x,nt,oe,Ne,ge,Q,_e):xd(x,nt,oe,Ne);Oe.draw(D,D.gl.TRIANGLES,_,w,M,br.backCCW,We,be,we,u.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,u.paint,x.transform.zoom,Ce,x.style.map.terrain&&Te.centroidVertexBuffer)}}function xc(x,r,u,p,_,w,M,I,D){var $;const q=x.style.projection,H=x.context,G=x.transform,Q=H.gl,oe=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],me=x.useProgram("hillshade",null,!1,oe),pe=!x.options.moving;for(const ge of p){const _e=r.getTile(ge),Te=_e.fbo;if(!Te)continue;const be=q.getMeshFromTileID(H,ge.canonical,I,!0,"raster"),Ce=($=x.style.map.terrain)===null||$===void 0?void 0:$.getTerrainData(ge);H.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,Te.colorAttachment.get());const Oe=G.getProjectionData({overscaledTileID:ge,aligned:pe,applyGlobeMatrix:!D,applyTerrainMatrix:!0});me.draw(H,Q.TRIANGLES,w,_[ge.overscaledZ],M,br.backCCW,pc(x,_e,u),Ce,Oe,u.id,be.vertexBuffer,be.indexBuffer,be.segments)}}function Va(x,r,u,p,_,w,M,I,D){var $;const q=x.style.projection,H=x.context,G=x.transform,Q=H.gl,oe=x.useProgram("colorRelief"),me=!x.options.moving;let pe=!0,ge=0;for(const _e of p){const Te=r.getTile(_e),be=Te.dem;if(pe){const We=Q.getParameter(Q.MAX_TEXTURE_SIZE),{elevationTexture:Ke,colorTexture:Qe}=u.getColorRampTextures(H,We,be.getUnpackVector());H.activeTexture.set(Q.TEXTURE1),Ke.bind(Q.NEAREST,Q.CLAMP_TO_EDGE),H.activeTexture.set(Q.TEXTURE4),Qe.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),pe=!1,ge=Ke.size[0]}if(!be||!be.data)continue;const Ce=be.stride,Oe=be.getPixels();if(H.activeTexture.set(Q.TEXTURE0),H.pixelStoreUnpackPremultiplyAlpha.set(!1),Te.demTexture=Te.demTexture||x.getTileTexture(Ce),Te.demTexture){const We=Te.demTexture;We.update(Oe,{premultiply:!1}),We.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)}else Te.demTexture=new l.T(H,Oe,Q.RGBA,{premultiply:!1}),Te.demTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE);const we=q.getMeshFromTileID(H,_e.canonical,I,!0,"raster"),Ne=($=x.style.map.terrain)===null||$===void 0?void 0:$.getTerrainData(_e),nt=G.getProjectionData({overscaledTileID:_e,aligned:me,applyGlobeMatrix:!D,applyTerrainMatrix:!0});oe.draw(H,Q.TRIANGLES,w,_[_e.overscaledZ],M,br.backCCW,nu(u,Te.dem,ge),Ne,nt,u.id,we.vertexBuffer,we.indexBuffer,we.segments)}}const bc=[new l.P(0,0),new l.P(l.$,0),new l.P(l.$,l.$),new l.P(0,l.$)];function fu(x,r,u,p,_,w,M,I,D=!1,$=!1){const q=p[p.length-1].overscaledZ,H=x.context,G=H.gl,Q=x.useProgram("raster"),oe=x.transform,me=x.style.projection,pe=x.colorModeForRenderPass(),ge=!x.options.moving,_e=u.paint.get("raster-opacity"),Te=u.paint.get("raster-resampling"),be=u.paint.get("raster-fade-duration"),Ce=!!x.style.map.terrain;for(const Oe of p){const we=x.getDepthModeForSublayer(Oe.overscaledZ-q,_e===1?ur.ReadWrite:ur.ReadOnly,G.LESS),Ne=r.getTile(Oe),nt=Te==="nearest"?G.NEAREST:G.LINEAR;H.activeTexture.set(G.TEXTURE0),Ne.texture.bind(nt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),H.activeTexture.set(G.TEXTURE1);const{parentTile:We,parentScaleBy:Ke,parentTopLeft:Qe,fadeValues:Tt}=wc(Ne,r,be,Ce);Ne.fadeOpacity=Tt.tileOpacity,We?(We.fadeOpacity=Tt.parentTileOpacity,We.texture.bind(nt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST)):Ne.texture.bind(nt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),Ne.texture.useMipmap&&H.extTextureFilterAnisotropic&&x.transform.pitch>20&&G.texParameterf(G.TEXTURE_2D,H.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,H.extTextureFilterAnisotropicMax);const At=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Oe),yt=oe.getProjectionData({overscaledTileID:Oe,aligned:ge,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),Lt=yh(Qe,Ke,Tt.fadeMix,u,I),lr=me.getMeshFromTileID(H,Oe.canonical,w,M,"raster");Q.draw(H,G.TRIANGLES,we,_?_[Oe.overscaledZ]:hr.disabled,pe,D?br.frontCCW:br.backCCW,Lt,At,yt,u.id,lr.vertexBuffer,lr.indexBuffer,lr.segments)}}function wc(x,r,u,p){const _={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(u===0||p)return _;if(x.fadingParentID){const w=r._getLoadedTile(x.fadingParentID);if(!w)return _;const M=Math.pow(2,w.tileID.overscaledZ-x.tileID.overscaledZ),I=[x.tileID.canonical.x*M%1,x.tileID.canonical.y*M%1],D=function($,q,H){const G=B.now(),Q=(G-q.timeAdded)/H,oe=$.fadingDirection===ke.Incoming,me=l.ah((G-$.timeAdded)/H,0,1),pe=l.ah(1-Q,0,1),ge=oe?me:pe;return{tileOpacity:ge,parentTileOpacity:oe?pe:me,fadeMix:{opacity:1,mix:1-ge}}}(x,w,u);return{parentTile:w,parentScaleBy:M,parentTopLeft:I,fadeValues:D}}if(x.selfFading){const w=function(M,I){const D=B.now(),$=l.ah((D-M.timeAdded)/I,0,1);return{tileOpacity:$,fadeMix:{opacity:$,mix:0}}}(x,u);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:w}}return _}const vn=new l.bf(1,0,0,1),Ds=new l.bf(0,1,0,1),Fi=new l.bf(0,0,1,1),pu=new l.bf(1,0,1,1),$o=new l.bf(0,1,1,1);function go(x,r,u,p){va(x,0,r+u/2,x.transform.width,u,p)}function ya(x,r,u,p){va(x,r-u/2,0,u,x.transform.height,p)}function va(x,r,u,p,_,w){const M=x.context,I=M.gl;I.enable(I.SCISSOR_TEST),I.scissor(r*x.pixelRatio,u*x.pixelRatio,p*x.pixelRatio,_*x.pixelRatio),M.clear({color:w}),I.disable(I.SCISSOR_TEST)}function Il(x,r,u){const p=x.context,_=p.gl,w=x.useProgram("debug"),M=ur.disabled,I=hr.disabled,D=x.colorModeForRenderPass(),$="$debug",q=x.style.map.terrain&&x.style.map.terrain.getTerrainData(u);p.activeTexture.set(_.TEXTURE0);const H=r.getTileByID(u.key).latestRawTileData,G=Math.floor((H&&H.byteLength||0)/1024),Q=r.getTile(u).tileSize,oe=512/Math.min(Q,512)*(u.overscaledZ/x.transform.zoom)*.5;let me=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(me+=` => ${u.overscaledZ}`),function(ge,_e){ge.initDebugOverlayCanvas();const Te=ge.debugOverlayCanvas,be=ge.context.gl,Ce=ge.debugOverlayCanvas.getContext("2d");Ce.clearRect(0,0,Te.width,Te.height),Ce.shadowColor="white",Ce.shadowBlur=2,Ce.lineWidth=1.5,Ce.strokeStyle="white",Ce.textBaseline="top",Ce.font="bold 36px Open Sans, sans-serif",Ce.fillText(_e,5,5),Ce.strokeText(_e,5,5),ge.debugOverlayTexture.update(Te),ge.debugOverlayTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE)}(x,`${me} ${G}kB`);const pe=x.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(p,_.TRIANGLES,M,I,rn.alphaBlended,br.disabled,Vf(l.bf.transparent,oe),null,pe,$,x.debugBuffer,x.quadTriangleIndexBuffer,x.debugSegments),w.draw(p,_.LINE_STRIP,M,I,D,br.disabled,Vf(l.bf.red),q,pe,$,x.debugBuffer,x.tileBorderIndexBuffer,x.debugSegments)}function Sc(x,r,u,p){const{isRenderingGlobe:_}=p,w=x.context,M=w.gl,I=x.transform,D=x.colorModeForRenderPass(),$=x.getDepthModeFor3D(),q=x.useProgram("terrain");w.bindFramebuffer.set(null),w.viewport.set([0,0,x.width,x.height]);for(const H of u){const G=r.getTerrainMesh(H.tileID),Q=x.renderToTexture.getTexture(H),oe=r.getTerrainData(H.tileID);w.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,Q.texture);const me=r.getMeshFrameDelta(I.zoom),pe=I.calculateFogMatrix(H.tileID.toUnwrapped()),ge=_d(me,pe,x.style.sky,I.pitch,_),_e=I.getProjectionData({overscaledTileID:H.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});q.draw(w,M.TRIANGLES,$,hr.disabled,D,br.backCCW,ge,oe,_e,"terrain",G.vertexBuffer,G.indexBuffer,G.segments)}}function Dl(x,r){if(!r.mesh){const u=new l.aL;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);const p=new l.aN;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),r.mesh=new uc(x.createVertexBuffer(u,Ki.members),x.createIndexBuffer(p),l.aM.simpleSegment(0,0,u.length,p.length))}return r.mesh}class mu{constructor(r,u){this.context=new wh(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ft.maxUnderzooming+Ft.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qc}resize(r,u,p){if(this.width=Math.floor(r*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const r=this.context,u=new l.aL;u.emplaceBack(0,0),u.emplaceBack(l.$,0),u.emplaceBack(0,l.$),u.emplaceBack(l.$,l.$),this.tileExtentBuffer=r.createVertexBuffer(u,Ki.members),this.tileExtentSegments=l.aM.simpleSegment(0,0,4,2);const p=new l.aL;p.emplaceBack(0,0),p.emplaceBack(l.$,0),p.emplaceBack(0,l.$),p.emplaceBack(l.$,l.$),this.debugBuffer=r.createVertexBuffer(p,Ki.members),this.debugSegments=l.aM.simpleSegment(0,0,4,5);const _=new l.c7;_.emplaceBack(0,0,0,0),_.emplaceBack(l.$,0,l.$,0),_.emplaceBack(0,l.$,0,l.$),_.emplaceBack(l.$,l.$,l.$,l.$),this.rasterBoundsBuffer=r.createVertexBuffer(_,Om.members),this.rasterBoundsSegments=l.aM.simpleSegment(0,0,4,2);const w=new l.aL;w.emplaceBack(0,0),w.emplaceBack(l.$,0),w.emplaceBack(0,l.$),w.emplaceBack(l.$,l.$),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(w,Ki.members),this.rasterBoundsSegmentsPosOnly=l.aM.simpleSegment(0,0,4,5);const M=new l.aL;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(M,Ki.members),this.viewportSegments=l.aM.simpleSegment(0,0,4,2);const I=new l.c8;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(I);const D=new l.aN;D.emplaceBack(1,0,2),D.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(D);const $=this.context.gl;this.stencilClearMode=new hr({func:$.ALWAYS,mask:0},0,255,$.ZERO,$.ZERO,$.ZERO),this.tileExtentMesh=new uc(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=l.L();l.bZ(p,0,this.width,this.height,0,0,1),l.N(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]);const _={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(r,u.TRIANGLES,ur.disabled,this.stencilClearMode,rn.disabled,br.disabled,null,null,_,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u,p){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source,this.nextStencilID+u.length>256&&this.clearStencil();const _=this.context;_.setColorMode(rn.disabled),_.setDepthMode(ur.disabled);const w={};for(const M of u)w[M.key]=this.nextStencilID++;this._renderTileMasks(w,u,p,!0),this._renderTileMasks(w,u,p,!1),this._tileClippingMaskIDs=w}_renderTileMasks(r,u,p,_){const w=this.context,M=w.gl,I=this.style.projection,D=this.transform,$=this.useProgram("clippingMask");for(const q of u){const H=r[q.key],G=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),Q=I.getMeshFromTileID(this.context,q.canonical,_,!0,"stencil"),oe=D.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!p,applyTerrainMatrix:!0});$.draw(w,M.TRIANGLES,ur.disabled,new hr({func:M.ALWAYS,mask:0},H,255,M.KEEP,M.KEEP,M.REPLACE),rn.disabled,p?br.disabled:br.backCCW,null,G,oe,"$clipping",Q.vertexBuffer,Q.indexBuffer,Q.segments)}}_renderTilesDepthBuffer(){const r=this.context,u=r.gl,p=this.style.projection,_=this.transform,w=this.useProgram("depth"),M=this.getDepthModeFor3D(),I=jr(_,{tileSize:_.tileSize});for(const D of I){const $=this.style.map.terrain&&this.style.map.terrain.getTerrainData(D),q=p.getMeshFromTileID(this.context,D.canonical,!0,!0,"raster"),H=_.getProjectionData({overscaledTileID:D,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(r,u.TRIANGLES,M,hr.disabled,rn.disabled,br.backCCW,null,$,H,"$clipping",q.vertexBuffer,q.indexBuffer,q.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new hr({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new hr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const u=this.context.gl,p=r.sort((M,I)=>I.overscaledZ-M.overscaledZ),_=p[p.length-1].overscaledZ,w=p[0].overscaledZ-_+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const M={};for(let I=0;I<w;I++)M[I+_]=new hr({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=w,[M,p]}return[{[_]:hr.disabled},p]}stencilConfigForOverlapTwoPass(r){const u=this.context.gl,p=r.sort((M,I)=>I.overscaledZ-M.overscaledZ),_=p[p.length-1].overscaledZ,w=p[0].overscaledZ-_+1;if(this.clearStencil(),w>1){const M={},I={};for(let D=0;D<w;D++)M[D+_]=new hr({func:u.GREATER,mask:255},w+1+D,255,u.KEEP,u.KEEP,u.REPLACE),I[D+_]=new hr({func:u.GREATER,mask:255},1+D,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*w+1,[M,I,p]}return this.nextStencilID=3,[{[_]:new hr({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[_]:new hr({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},p]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new rn([r.CONSTANT_COLOR,r.ONE],new l.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?rn.unblended:rn.alphaBlended}getDepthModeForSublayer(r,u,p){if(!this.opaquePassEnabledForLayer())return ur.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new ur(p||this.context.gl.LEQUAL,u,[_,_])}getDepthModeFor3D(){return new ur(this.context.gl.LEQUAL,ur.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){var p,_;this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(B.now()),this.imageManager.beginFrame();const w=this.style._order,M=this.style.sourceCaches,I={},D={},$={},q={isRenderingToTexture:!1,isRenderingGlobe:((p=r.projection)===null||p===void 0?void 0:p.transitionState)>0};for(const G in M){const Q=M[G];Q.used&&Q.prepare(this.context),I[G]=Q.getVisibleCoordinates(!1),D[G]=I[G].slice().reverse(),$[G]=Q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let G=0;G<w.length;G++)if(this.style._layers[w[G]].is3D()){this.opaquePassCutoff=G;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const G of w){const Q=this.style._layers[G];if(!Q.hasOffscreenPass()||Q.isHidden(this.transform.zoom))continue;const oe=D[Q.source];(Q.type==="custom"||oe.length)&&this.renderLayer(this,M[Q.source],Q,oe,q)}if((_=this.style.projection)===null||_===void 0||_.updateGPUdependent({context:this.context,useProgram:G=>this.useProgram(G)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.bf.black:l.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(G,Q){const oe=G.context,me=oe.gl,pe=((Oe,we,Ne)=>{const nt=Math.cos(we.rollInRadians),We=Math.sin(we.rollInRadians),Ke=He(we),Qe=we.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Oe.properties.get("sky-color"),u_horizon_color:Oe.properties.get("horizon-color"),u_horizon:[(we.width/2-Ke*We)*Ne,(we.height/2+Ke*nt)*Ne],u_horizon_normal:[-We,nt],u_sky_horizon_blend:Oe.properties.get("sky-horizon-blend")*we.height/2*Ne,u_sky_blend:Qe}})(Q,G.style.map.transform,G.pixelRatio),ge=new ur(me.LEQUAL,ur.ReadWrite,[0,1]),_e=hr.disabled,Te=G.colorModeForRenderPass(),be=G.useProgram("sky"),Ce=Dl(oe,Q);be.draw(oe,me.TRIANGLES,ge,_e,Te,br.disabled,pe,null,void 0,"sky",Ce.vertexBuffer,Ce.indexBuffer,Ce.segments)}(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const G=this.style._layers[w[this.currentLayer]],Q=M[G.source],oe=I[G.source];this._renderTileClippingMasks(G,oe,!1),this.renderLayer(this,Q,G,oe,q)}this.renderPass="translucent";let H=!1;for(this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const G=this.style._layers[w[this.currentLayer]],Q=M[G.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(G,q))continue;this.opaquePassEnabledForLayer()||H||(H=!0,q.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const oe=(G.type==="symbol"?$:D)[G.source];this._renderTileClippingMasks(G,I[G.source],!!this.renderToTexture),this.renderLayer(this,Q,G,oe,q)}if(q.isRenderingGlobe&&function(G,Q,oe){const me=G.context,pe=me.gl,ge=G.useProgram("atmosphere"),_e=new ur(pe.LEQUAL,ur.ReadOnly,[0,1]),Te=G.transform,be=function(Qe,Tt){const At=Qe.properties.get("position"),yt=[-At.x,-At.y,-At.z],Lt=l.ag(new Float64Array(16));return Qe.properties.get("anchor")==="map"&&(l.b6(Lt,Lt,Tt.rollInRadians),l.b7(Lt,Lt,-Tt.pitchInRadians),l.b6(Lt,Lt,Tt.bearingInRadians),l.b7(Lt,Lt,Tt.center.lat*Math.PI/180),l.bz(Lt,Lt,-Tt.center.lng*Math.PI/180)),l.c6(yt,yt,Lt),yt}(oe,G.transform),Ce=Te.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Oe=Q.properties.get("atmosphere-blend")*Ce.projectionTransition;if(Oe===0)return;const we=vl(Te.worldSize,Te.center.lat),Ne=Te.inverseProjectionMatrix,nt=new Float64Array(4);nt[3]=1,l.aw(nt,nt,Te.modelViewProjectionMatrix),nt[0]/=nt[3],nt[1]/=nt[3],nt[2]/=nt[3],nt[3]=1,l.aw(nt,nt,Ne),nt[0]/=nt[3],nt[1]/=nt[3],nt[2]/=nt[3],nt[3]=1;const We=((Qe,Tt,At,yt,Lt)=>({u_sun_pos:Qe,u_atmosphere_blend:Tt,u_globe_position:At,u_globe_radius:yt,u_inv_proj_matrix:Lt}))(be,Oe,[nt[0],nt[1],nt[2]],we,Ne),Ke=Dl(me,Q);ge.draw(me,pe.TRIANGLES,_e,hr.disabled,rn.alphaBlended,br.disabled,We,null,null,"atmosphere",Ke.vertexBuffer,Ke.indexBuffer,Ke.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const G=function(Q,oe){let me=null;const pe=Object.values(Q._layers).flatMap(be=>be.source&&!be.isHidden(oe)?[Q.sourceCaches[be.source]]:[]),ge=pe.filter(be=>be.getSource().type==="vector"),_e=pe.filter(be=>be.getSource().type!=="vector"),Te=be=>{(!me||me.getSource().maxzoom<be.getSource().maxzoom)&&(me=be)};return ge.forEach(be=>Te(be)),me||_e.forEach(be=>Te(be)),me}(this.style,this.transform.zoom);G&&function(Q,oe,me){for(let pe=0;pe<me.length;pe++)Il(Q,oe,me[pe])}(this,G,G.getVisibleCoordinates())}this.options.showPadding&&function(G){const Q=G.transform.padding;go(G,G.transform.height-(Q.top||0),3,vn),go(G,Q.bottom||0,3,Ds),ya(G,Q.left||0,3,Fi),ya(G,G.transform.width-(Q.right||0),3,pu);const oe=G.transform.centerPoint;(function(me,pe,ge,_e){va(me,pe-1,ge-10,2,20,_e),va(me,pe-10,ge-1,20,2,_e)})(G,oe.x,G.transform.height-oe.y,$o)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=r?!l.c9(u,p):!l.ca(u,p)),_||(_=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),_&&(l.cb(u,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(w,M){const I=w.context,D=I.gl,$=w.transform,q=rn.unblended,H=new ur(D.LEQUAL,ur.ReadWrite,[0,1]),G=M.sourceCache.getRenderableTiles(),Q=w.useProgram("terrainDepth");I.bindFramebuffer.set(M.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),I.clear({color:l.bf.transparent,depth:1});for(const oe of G){const me=M.getTerrainMesh(oe.tileID),pe=M.getTerrainData(oe.tileID),ge=$.getProjectionData({overscaledTileID:oe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),_e={u_ele_delta:M.getMeshFrameDelta($.zoom)};Q.draw(I,D.TRIANGLES,H,hr.disabled,q,br.backCCW,_e,pe,ge,"terrain",me.vertexBuffer,me.indexBuffer,me.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain),function(w,M){const I=w.context,D=I.gl,$=w.transform,q=rn.unblended,H=new ur(D.LEQUAL,ur.ReadWrite,[0,1]),G=M.getCoordsTexture(),Q=M.sourceCache.getRenderableTiles(),oe=w.useProgram("terrainCoords");I.bindFramebuffer.set(M.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),I.clear({color:l.bf.transparent,depth:1}),M.coordsIndex=[];for(const me of Q){const pe=M.getTerrainMesh(me.tileID),ge=M.getTerrainData(me.tileID);I.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,G.texture);const _e={u_terrain_coords_id:(255-M.coordsIndex.length)/255,u_texture:0,u_ele_delta:M.getMeshFrameDelta($.zoom)},Te=$.getProjectionData({overscaledTileID:me.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});oe.draw(I,D.TRIANGLES,H,hr.disabled,q,br.backCCW,_e,ge,Te,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),M.coordsIndex.push(me.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain))}renderLayer(r,u,p,_,w){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(_||[]).length)&&(this.id=p.id,l.cc(p)?function(M,I,D,$,q,H){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:G}=H,Q=hr.disabled,oe=M.colorModeForRenderPass();(D._unevaluatedLayout.hasValue("text-variable-anchor")||D._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(me,pe,ge,_e,Te,be,Ce,Oe,we){const Ne=pe.transform,nt=pe.style.map.terrain,We=Te==="map",Ke=be==="map";for(const Qe of me){const Tt=_e.getTile(Qe),At=Tt.getBucket(ge);if(!At||!At.text||!At.text.segments.get().length)continue;const yt=l.an(At.textSizeData,Ne.zoom),Lt=l.aC(Tt,1,pe.transform.zoom),lr=Ar(We,pe.transform,Lt),Hr=ge.layout.get("icon-text-fit")!=="none"&&At.hasIconData();if(yt){const Xr=Math.pow(2,Ne.zoom-Tt.tileID.overscaledZ),ln=nt?(jn,cn)=>nt.getElevation(Qe,jn,cn):null;jl(At,We,Ke,we,Ne,lr,Xr,yt,Hr,l.aD(Ne,Tt,Ce,Oe),Qe.toUnwrapped(),ln)}}}($,M,D,I,D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),q),D.paint.get("icon-opacity").constantOr(1)!==0&&Ji(M,I,D,$,!1,D.paint.get("icon-translate"),D.paint.get("icon-translate-anchor"),D.layout.get("icon-rotation-alignment"),D.layout.get("icon-pitch-alignment"),D.layout.get("icon-keep-upright"),Q,oe,G),D.paint.get("text-opacity").constantOr(1)!==0&&Ji(M,I,D,$,!0,D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),D.layout.get("text-keep-upright"),Q,oe,G),I.map.showCollisionBoxes&&(hu(M,I,D,$,!0),hu(M,I,D,$,!1))}(r,u,p,_,this.style.placement.variableOffsets,w):l.cd(p)?function(M,I,D,$,q){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:H}=q,G=D.paint.get("circle-opacity"),Q=D.paint.get("circle-stroke-width"),oe=D.paint.get("circle-stroke-opacity"),me=!D.layout.get("circle-sort-key").isConstant();if(G.constantOr(1)===0&&(Q.constantOr(1)===0||oe.constantOr(1)===0))return;const pe=M.context,ge=pe.gl,_e=M.transform,Te=M.getDepthModeForSublayer(0,ur.ReadOnly),be=hr.disabled,Ce=M.colorModeForRenderPass(),Oe=[],we=_e.getCircleRadiusCorrection();for(let Ne=0;Ne<$.length;Ne++){const nt=$[Ne],We=I.getTile(nt),Ke=We.getBucket(D);if(!Ke)continue;const Qe=D.paint.get("circle-translate"),Tt=D.paint.get("circle-translate-anchor"),At=l.aD(_e,We,Qe,Tt),yt=Ke.programConfigurations.get(D.id),Lt=M.useProgram("circle",yt),lr=Ke.layoutVertexBuffer,Hr=Ke.indexBuffer,Xr=M.style.map.terrain&&M.style.map.terrain.getTerrainData(nt),ln={programConfiguration:yt,program:Lt,layoutVertexBuffer:lr,indexBuffer:Hr,uniformValues:is(M,We,D,At,we),terrainData:Xr,projectionData:_e.getProjectionData({overscaledTileID:nt,applyGlobeMatrix:!H,applyTerrainMatrix:!0})};if(me){const jn=Ke.segments.get();for(const cn of jn)Oe.push({segments:new l.aM([cn]),sortKey:cn.sortKey,state:ln})}else Oe.push({segments:Ke.segments,sortKey:0,state:ln})}me&&Oe.sort((Ne,nt)=>Ne.sortKey-nt.sortKey);for(const Ne of Oe){const{programConfiguration:nt,program:We,layoutVertexBuffer:Ke,indexBuffer:Qe,uniformValues:Tt,terrainData:At,projectionData:yt}=Ne.state;We.draw(pe,ge.TRIANGLES,Te,be,Ce,br.backCCW,Tt,At,yt,D.id,Ke,Qe,Ne.segments,D.paint,M.transform.zoom,nt)}}(r,u,p,_,w):l.ce(p)?function(M,I,D,$,q){if(D.paint.get("heatmap-opacity")===0)return;const H=M.context,{isRenderingToTexture:G,isRenderingGlobe:Q}=q;if(M.style.map.terrain){for(const oe of $){const me=I.getTile(oe);I.hasRenderableParent(oe)||(M.renderPass==="offscreen"?Bo(M,me,D,oe,Q):M.renderPass==="translucent"&&Ua(M,D,oe,G,Q))}H.viewport.set([0,0,M.width,M.height])}else M.renderPass==="offscreen"?function(oe,me,pe,ge){const _e=oe.context,Te=_e.gl,be=oe.transform,Ce=hr.disabled,Oe=new rn([Te.ONE,Te.ONE],l.bf.transparent,[!0,!0,!0,!0]);(function(we,Ne,nt){const We=we.gl;we.activeTexture.set(We.TEXTURE1),we.viewport.set([0,0,Ne.width/4,Ne.height/4]);let Ke=nt.heatmapFbos.get(l.c3);Ke?(We.bindTexture(We.TEXTURE_2D,Ke.colorAttachment.get()),we.bindFramebuffer.set(Ke.framebuffer)):(Ke=Ea(we,Ne.width/4,Ne.height/4),nt.heatmapFbos.set(l.c3,Ke))})(_e,oe,pe),_e.clear({color:l.bf.transparent});for(let we=0;we<ge.length;we++){const Ne=ge[we];if(me.hasRenderableParent(Ne))continue;const nt=me.getTile(Ne),We=nt.getBucket(pe);if(!We)continue;const Ke=We.programConfigurations.get(pe.id),Qe=oe.useProgram("heatmap",Ke),Tt=be.getProjectionData({overscaledTileID:Ne,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),At=be.getCircleRadiusCorrection();Qe.draw(_e,Te.TRIANGLES,ur.disabled,Ce,Oe,br.backCCW,mh(nt,be.zoom,pe.paint.get("heatmap-intensity"),At),null,Tt,pe.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,pe.paint,be.zoom,Ke)}_e.viewport.set([0,0,oe.width,oe.height])}(M,I,D,$):M.renderPass==="translucent"&&function(oe,me){const pe=oe.context,ge=pe.gl;pe.setColorMode(oe.colorModeForRenderPass());const _e=me.heatmapFbos.get(l.c3);_e&&(pe.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,_e.colorAttachment.get()),pe.activeTexture.set(ge.TEXTURE1),Ca(pe,me).bind(ge.LINEAR,ge.CLAMP_TO_EDGE),oe.useProgram("heatmapTexture").draw(pe,ge.TRIANGLES,ur.disabled,hr.disabled,oe.colorModeForRenderPass(),br.disabled,bd(oe,me,0,1),null,null,me.id,oe.viewportBuffer,oe.quadTriangleIndexBuffer,oe.viewportSegments,me.paint,oe.transform.zoom))}(M,D)}(r,u,p,_,w):l.cf(p)?function(M,I,D,$,q){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:H}=q,G=D.paint.get("line-opacity"),Q=D.paint.get("line-width");if(G.constantOr(1)===0||Q.constantOr(1)===0)return;const oe=M.getDepthModeForSublayer(0,ur.ReadOnly),me=M.colorModeForRenderPass(),pe=D.paint.get("line-dasharray"),ge=pe.constantOr(1),_e=D.paint.get("line-pattern"),Te=_e.constantOr(1),be=D.paint.get("line-gradient"),Ce=D.getCrossfadeParameters();let Oe;Oe=Te?"linePattern":ge&&be?"lineGradientSDF":ge?"lineSDF":be?"lineGradient":"line";const we=M.context,Ne=we.gl,nt=M.transform;let We=!0;for(const Ke of $){const Qe=I.getTile(Ke);if(Te&&!Qe.patternsLoaded())continue;const Tt=Qe.getBucket(D);if(!Tt)continue;const At=Tt.programConfigurations.get(D.id),yt=M.context.program.get(),Lt=M.useProgram(Oe,At),lr=We||Lt.program!==yt,Hr=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Ke),Xr=_e.constantOr(null),ln=pe&&pe.constantOr(null);if(Xr&&Qe.imageAtlas){const ai=Qe.imageAtlas,$n=ai.patternPositions[Xr.to.toString()],qn=ai.patternPositions[Xr.from.toString()];$n&&qn&&At.setConstantPatternPositions($n,qn)}else if(ln){const ai=D.layout.get("line-cap")==="round",$n=M.lineAtlas.getDash(ln.to,ai),qn=M.lineAtlas.getDash(ln.from,ai);At.setConstantDashPositions($n,qn)}const jn=nt.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),cn=nt.getPixelScale();let Tr;Te?(Tr=as(M,Qe,D,cn,Ce),Id(we,Ne,Qe,At,Ce)):ge&&be?(Tr=Sd(M,Qe,D,cn,Ce,Tt.lineClipsArray.length),Dn(M,I,we,Ne,D,Tt,Ke,At,Ce)):ge?(Tr=gh(M,Qe,D,cn,Ce),kl(M,we,Ne,At,lr,Ce)):be?(Tr=wd(M,Qe,D,cn,Tt.lineClipsArray.length),ea(M,I,we,Ne,D,Tt,Ke)):Tr=mc(M,Qe,D,cn);const fn=M.stencilModeForClipping(Ke);Lt.draw(we,Ne.TRIANGLES,oe,fn,me,br.disabled,Tr,Hr,jn,D.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,D.paint,M.transform.zoom,At,Tt.layoutVertexBuffer2),We=!1}}(r,u,p,_,w):l.cg(p)?function(M,I,D,$,q){const H=D.paint.get("fill-color"),G=D.paint.get("fill-opacity");if(G.constantOr(1)===0)return;const{isRenderingToTexture:Q}=q,oe=M.colorModeForRenderPass(),me=D.paint.get("fill-pattern"),pe=M.opaquePassEnabledForLayer()&&!me.constantOr(1)&&H.constantOr(l.bf.transparent).a===1&&G.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===pe){const ge=M.getDepthModeForSublayer(1,M.renderPass==="opaque"?ur.ReadWrite:ur.ReadOnly);Fo(M,I,D,$,ge,oe,!1,Q)}if(M.renderPass==="translucent"&&D.paint.get("fill-antialias")){const ge=M.getDepthModeForSublayer(D.getPaintProperty("fill-outline-color")?2:0,ur.ReadOnly);Fo(M,I,D,$,ge,oe,!0,Q)}}(r,u,p,_,w):l.ch(p)?function(M,I,D,$,q){const H=D.paint.get("fill-extrusion-opacity");if(H===0)return;const{isRenderingToTexture:G}=q;if(M.renderPass==="translucent"){const Q=new ur(M.context.gl.LEQUAL,ur.ReadWrite,M.depthRangeFor3D);if(H!==1||D.paint.get("fill-extrusion-pattern").constantOr(1))ja(M,I,D,$,Q,hr.disabled,rn.disabled,G),ja(M,I,D,$,Q,M.stencilModeFor3D(),M.colorModeForRenderPass(),G);else{const oe=M.colorModeForRenderPass();ja(M,I,D,$,Q,hr.disabled,oe,G)}}}(r,u,p,_,w):l.ci(p)?function(M,I,D,$,q){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;const{isRenderingToTexture:H}=q,G=M.context,Q=M.style.projection.useSubdivision,oe=M.getDepthModeForSublayer(0,ur.ReadOnly),me=M.colorModeForRenderPass();if(M.renderPass==="offscreen")(function(pe,ge,_e,Te,be,Ce,Oe){const we=pe.context,Ne=we.gl;for(const nt of _e){const We=ge.getTile(nt),Ke=We.dem;if(!Ke||!Ke.data||!We.needsHillshadePrepare)continue;const Qe=Ke.dim,Tt=Ke.stride,At=Ke.getPixels();if(we.activeTexture.set(Ne.TEXTURE1),we.pixelStoreUnpackPremultiplyAlpha.set(!1),We.demTexture=We.demTexture||pe.getTileTexture(Tt),We.demTexture){const Lt=We.demTexture;Lt.update(At,{premultiply:!1}),Lt.bind(Ne.NEAREST,Ne.CLAMP_TO_EDGE)}else We.demTexture=new l.T(we,At,Ne.RGBA,{premultiply:!1}),We.demTexture.bind(Ne.NEAREST,Ne.CLAMP_TO_EDGE);we.activeTexture.set(Ne.TEXTURE0);let yt=We.fbo;if(!yt){const Lt=new l.T(we,{width:Qe,height:Qe,data:null},Ne.RGBA);Lt.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),yt=We.fbo=we.createFramebuffer(Qe,Qe,!0,!1),yt.colorAttachment.set(Lt.texture)}we.bindFramebuffer.set(yt.framebuffer),we.viewport.set([0,0,Qe,Qe]),pe.useProgram("hillshadePrepare").draw(we,Ne.TRIANGLES,be,Ce,Oe,br.disabled,bl(We.tileID,Ke),null,null,Te.id,pe.rasterBoundsBuffer,pe.quadTriangleIndexBuffer,pe.rasterBoundsSegments),We.needsHillshadePrepare=!1}})(M,I,$,D,oe,hr.disabled,me),G.viewport.set([0,0,M.width,M.height]);else if(M.renderPass==="translucent")if(Q){const[pe,ge,_e]=M.stencilConfigForOverlapTwoPass($);xc(M,I,D,_e,pe,oe,me,!1,H),xc(M,I,D,_e,ge,oe,me,!0,H)}else{const[pe,ge]=M.getStencilConfigForOverlapAndUpdateStencilID($);xc(M,I,D,ge,pe,oe,me,!1,H)}}(r,u,p,_,w):l.cj(p)?function(M,I,D,$,q){if(M.renderPass!=="translucent"||!$.length)return;const{isRenderingToTexture:H}=q,G=M.style.projection.useSubdivision,Q=M.getDepthModeForSublayer(0,ur.ReadOnly),oe=M.colorModeForRenderPass();if(G){const[me,pe,ge]=M.stencilConfigForOverlapTwoPass($);Va(M,I,D,ge,me,Q,oe,!1,H),Va(M,I,D,ge,pe,Q,oe,!0,H)}else{const[me,pe]=M.getStencilConfigForOverlapAndUpdateStencilID($);Va(M,I,D,pe,me,Q,oe,!1,H)}}(r,u,p,_,w):l.bK(p)?function(M,I,D,$,q){if(M.renderPass!=="translucent"||D.paint.get("raster-opacity")===0||!$.length)return;const{isRenderingToTexture:H}=q,G=I.getSource(),Q=M.style.projection.useSubdivision;if(G instanceof Wn)fu(M,I,D,$,null,!1,!1,G.tileCoords,G.flippedWindingOrder,H);else if(Q){const[oe,me,pe]=M.stencilConfigForOverlapTwoPass($);fu(M,I,D,pe,oe,!1,!0,bc,!1,H),fu(M,I,D,pe,me,!0,!0,bc,!1,H)}else{const[oe,me]=M.getStencilConfigForOverlapAndUpdateStencilID($);fu(M,I,D,me,oe,!1,!0,bc,!1,H)}}(r,u,p,_,w):l.ck(p)?function(M,I,D,$,q){const H=D.paint.get("background-color"),G=D.paint.get("background-opacity");if(G===0)return;const{isRenderingToTexture:Q}=q,oe=M.context,me=oe.gl,pe=M.style.projection,ge=M.transform,_e=ge.tileSize,Te=D.paint.get("background-pattern");if(M.isPatternMissing(Te))return;const be=!Te&&H.a===1&&G===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==be)return;const Ce=hr.disabled,Oe=M.getDepthModeForSublayer(0,be==="opaque"?ur.ReadWrite:ur.ReadOnly),we=M.colorModeForRenderPass(),Ne=M.useProgram(Te?"backgroundPattern":"background"),nt=$||jr(ge,{tileSize:_e,terrain:M.style.map.terrain});Te&&(oe.activeTexture.set(me.TEXTURE0),M.imageManager.bind(M.context));const We=D.getCrossfadeParameters();for(const Ke of nt){const Qe=ge.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!Q,applyTerrainMatrix:!0}),Tt=Te?wl(G,M,Te,{tileID:Ke,tileSize:_e},We):fa(G,H),At=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Ke),yt=pe.getMeshFromTileID(oe,Ke.canonical,!1,!0,"raster");Ne.draw(oe,me.TRIANGLES,Oe,Ce,we,br.backCCW,Tt,At,Qe,D.id,yt.vertexBuffer,yt.indexBuffer,yt.segments)}}(r,0,p,_,w):l.cl(p)&&function(M,I,D,$){const{isRenderingGlobe:q}=$,H=M.context,G=D.implementation,Q=M.style.projection,oe=M.transform,me=oe.getProjectionDataForCustomLayer(q),pe={farZ:oe.farZ,nearZ:oe.nearZ,fov:oe.fov*Math.PI/180,modelViewProjectionMatrix:oe.modelViewProjectionMatrix,projectionMatrix:oe.projectionMatrix,shaderData:{variantName:Q.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Q.shaderPreludeCode.vertexSource}`,define:Q.shaderDefine},defaultProjectionData:me},ge=G.renderingMode?G.renderingMode:"2d";if(M.renderPass==="offscreen"){const _e=G.prerender;_e&&(M.setCustomLayerDefaults(),H.setColorMode(M.colorModeForRenderPass()),_e.call(G,H.gl,pe),H.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),H.setColorMode(M.colorModeForRenderPass()),H.setStencilMode(hr.disabled);const _e=ge==="3d"?M.getDepthModeFor3D():M.getDepthModeForSublayer(0,ur.ReadOnly);H.setDepthMode(_e),G.render(H.gl,pe),H.setDirty(),M.setBaseState(),H.bindFramebuffer.set(null)}}(r,0,p,w))}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),p=this.imageManager.getPattern(r.to.toString());return!u||!p}useProgram(r,u,p=!1,_=[]){this.cache=this.cache||{};const w=!!this.style.map.terrain,M=this.style.projection,I=p?Ri.projectionMercator:M.shaderPreludeCode,D=p?Oo:M.shaderDefine,$=r+(u?u.cacheKey:"")+`/${p?xr:M.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(w?"/terrain":"")+(_?`/${_.join("/")}`:"");return this.cache[$]||(this.cache[$]=new _l(this.context,Ri[r],u,iu[r],this._showOverdrawInspector,w,I,D,_)),this.cache[$]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:u}=this.context.gl;return this.width!==r||this.height!==u}}function ls(x,r){let u,p=!1,_=null,w=null;const M=()=>{_=null,p&&(x.apply(w,u),_=setTimeout(M,r),p=!1)};return(...I)=>(p=!0,w=this,u=I,_||M(),_)}class bi{constructor(r){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(p=_)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(!this._isValidHash(u))return!1;const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const p=u.join("/");let _=p;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${p}`);let w=window.location.hash.replace(_,"");w.startsWith("#&")?w=w.slice(0,1)+w.slice(2):w==="#"&&(w="");let M=window.location.href.replace(/(#.+)?$/,w);M=M.replace("&&","&"),window.history.replaceState(window.history.state,null,M)},this._updateHash=ls(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,_=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,_),M=Math.round(u.lng*w)/w,I=Math.round(u.lat*w)/w,D=this._map.getBearing(),$=this._map.getPitch();let q="";if(q+=r?`/${M}/${I}/${p}`:`${p}/${I}/${M}`,(D||$)&&(q+="/"+Math.round(10*D)/10),$&&(q+=`/${Math.round($)}`),this._hashName){const H=this._hashName;let G=!1;const Q=window.location.hash.slice(1).split("&").map(oe=>{const me=oe.split("=")[0];return me===H?(G=!0,`${me}=${q}`):oe}).filter(oe=>oe);return G||Q.push(`${H}=${q}`),`#${Q.join("&")}`}return`#${q}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new l.S(+r[2],+r[1])}catch{return!1}const u=+r[0],p=+(r[3]||0),_=+(r[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&p>=-180&&p<=180&&_>=this._map.getMinPitch()&&_<=this._map.getMaxPitch()}}const cs={linearity:.3,easing:l.cm(0,0,.3,1)},zs=l.e({deceleration:2500,maxSpeed:1400},cs),Wf=l.e({deceleration:20,maxSpeed:1400},cs),Yf=l.e({deceleration:1e3,maxSpeed:360},cs),Kf=l.e({deceleration:1e3,maxSpeed:90},cs),ii=l.e({deceleration:1e3,maxSpeed:360},cs);class Sh{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:B.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=B.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,roll:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)u.zoom+=w.zoomDelta||0,u.bearing+=w.bearingDelta||0,u.pitch+=w.pitchDelta||0,u.roll+=w.rollDelta||0,w.panDelta&&u.pan._add(w.panDelta),w.around&&(u.around=w.around),w.pinchAround&&(u.pinchAround=w.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(u.pan.mag()){const w=Uo(u.pan.mag(),p,l.e({},zs,r||{})),M=u.pan.mult(w.amount/u.pan.mag()),I=this._map.cameraHelper.handlePanInertia(M,this._map.transform);_.center=I.easingCenter,_.offset=I.easingOffset,qo(_,w)}if(u.zoom){const w=Uo(u.zoom,p,Wf);_.zoom=this._map.transform.zoom+w.amount,qo(_,w)}if(u.bearing){const w=Uo(u.bearing,p,Yf);_.bearing=this._map.transform.bearing+l.ah(w.amount,-179,179),qo(_,w)}if(u.pitch){const w=Uo(u.pitch,p,Kf);_.pitch=this._map.transform.pitch+w.amount,qo(_,w)}if(u.roll){const w=Uo(u.roll,p,ii);_.roll=this._map.transform.roll+l.ah(w.amount,-179,179),qo(_,w)}if(_.zoom||_.bearing){const w=u.pinchAround===void 0?u.around:u.pinchAround;_.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),l.e(_,{noMoveStart:!0})}}function qo(x,r){(!x.duration||x.duration<r.duration)&&(x.duration=r.duration,x.easing=r.easing)}function Uo(x,r,u){const{maxSpeed:p,linearity:_,deceleration:w}=u,M=l.ah(x*_/(r/1e3),-p,p),I=Math.abs(M)/(w*_);return{easing:u.easing,duration:1e3*I,amount:M*(I/2)}}class $i extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,p,_={}){p=p instanceof MouseEvent?p:new MouseEvent(r,p);const w=F.mousePos(u.getCanvas(),p),M=u.unproject(w);super(r,l.e({point:w,lngLat:M,originalEvent:p},_)),this._defaultPrevented=!1,this.target=u}}class Oa extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,p){const _=r==="touchend"?p.changedTouches:p.touches,w=F.touchPos(u.getCanvasContainer(),_),M=w.map(D=>u.unproject(D)),I=w.reduce((D,$,q,H)=>D.add($.div(H.length)),new l.P(0,0));super(r,{points:w,point:I,lngLats:M,lngLat:u.unproject(I),originalEvent:p}),this._defaultPrevented=!1}}class Ns extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,p){super(r,{originalEvent:p}),this._defaultPrevented=!1}}class Ga{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Ns(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new $i(r.type,this._map,r))}mouseup(r){this._map.fire(new $i(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new $i(r.type,this._map,r))}dblclick(r){return this._firePreventable(new $i(r.type,this._map,r))}mouseover(r){this._map.fire(new $i(r.type,this._map,r))}mouseout(r){this._map.fire(new $i(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Oa(r.type,this._map,r))}touchmove(r){this._map.fire(new Oa(r.type,this._map,r))}touchend(r){this._map.fire(new Oa(r.type,this._map,r))}touchcancel(r){this._map.fire(new Oa(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Za{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new $i(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $i("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new $i(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Tc{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(l.P.convert(r),this._map.terrain)}}class ka{constructor(r,u){this._map=r,this._tr=new Tc(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(F.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=p,this._box||(this._box=F.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const w=Math.min(_.x,p.x),M=Math.max(_.x,p.x),I=Math.min(_.y,p.y),D=Math.max(_.y,p.y);F.setTransform(this._box,`translate(${w}px,${I}px)`),this._box.style.width=M-w+"px",this._box.style.height=D-I+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const p=this._startPos,_=u;if(this.reset(),F.suppressClick(),p.x!==_.x||p.y!==_.y)return this._map.fire(new l.l("boxzoomend",{originalEvent:r})),{cameraAnimation:w=>w.fitScreenCoordinates(p,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(F.remove(this._box),this._box=null),F.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new l.l(r,{originalEvent:u}))}}function _a(x,r){if(x.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${x.length}, points ${r.length}`);const u={};for(let p=0;p<x.length;p++)u[x[p].identifier]=r[p];return u}class Dd{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),p.length===this.numTouches&&(this.centroid=function(_){const w=new l.P(0,0);for(const M of _)w._add(M);return w.div(_.length)}(u),this.touches=_a(p,u)))}touchmove(r,u,p){if(this.aborted||!this.centroid)return;const _=_a(p,u);for(const w in this.touches){const M=_[w];(!M||M.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(r,u,p){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Ac{constructor(r){this.singleTap=new Dd(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,p){this.singleTap.touchstart(r,u,p)}touchmove(r,u,p){this.singleTap.touchmove(r,u,p)}touchend(r,u,p){const _=this.singleTap.touchend(r,u,p);if(_){const w=r.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(_)<30;if(w&&M||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class Qf{constructor(r){this._tr=new Tc(r),this._zoomIn=new Ac({numTouches:1,numTaps:2}),this._zoomOut=new Ac({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,p){this._zoomIn.touchstart(r,u,p),this._zoomOut.touchstart(r,u,p)}touchmove(r,u,p){this._zoomIn.touchmove(r,u,p),this._zoomOut.touchmove(r,u,p)}touchend(r,u,p){const _=this._zoomIn.touchend(r,u,p),w=this._zoomOut.touchend(r,u,p),M=this._tr;return _?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:M.zoom+1,around:M.unproject(_)},{originalEvent:r})}):w?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:M.zoom-1,around:M.unproject(w)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class us{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const _=Array.isArray(u)?u[0]:u;return!this._moved&&_.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(p,_))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&F.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const zd=0,Rs=2,yo={[zd]:1,[Rs]:2};class Dt{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const u=F.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,p){const _=yo[p];return u.buttons===void 0||(u.buttons&_)!==_}(r,this._eventButton)}isValidEndEvent(r){return F.mouseButton(r)===this._eventButton}}class gu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class Th{constructor(r=new Dt({checkCorrectEvent:()=>!0}),u=new gu){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(r,u,p){return r instanceof MouseEvent?u(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?p(r):void 0}startMove(r){this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.startMove(u),u=>this.oneFingerTouchMoveStateManager.startMove(u))}endMove(r){this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.endMove(u),u=>this.oneFingerTouchMoveStateManager.endMove(u))}isValidStartEvent(r){return this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.isValidStartEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u))}isValidMoveEvent(r){return this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.isValidMoveEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u))}isValidEndEvent(r){return this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.isValidEndEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u))}}const hs=x=>{x.mousedown=x.dragStart,x.mousemoveWindow=x.dragMove,x.mouseup=x.dragEnd,x.contextmenu=r=>{r.preventDefault()}};class Mc{constructor(r,u){this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,u,p){return this._calculateTransform(r,u,p)}touchmove(r,u,p){if(this._active){if(!this._shouldBePrevented(p.length))return r.preventDefault(),this._calculateTransform(r,u,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,u,p){this._calculateTransform(r,u,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,p){p.length>0&&(this._active=!0);const _=_a(p,u),w=new l.P(0,0),M=new l.P(0,0);let I=0;for(const $ in _){const q=_[$],H=this._touches[$];H&&(w._add(q),M._add(q.sub(H)),I++,_[$]=q)}if(this._touches=_,this._shouldBePrevented(I)||!M.mag())return;const D=M.div(I);return this._sum._add(D),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(I),panDelta:D}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ls{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,p){if(!this._firstTwoTouches)return;r.preventDefault();const[_,w]=this._firstTwoTouches,M=Ia(p,u,_),I=Ia(p,u,w);if(!M||!I)return;const D=this._aroundCenter?null:M.add(I).div(2);return this._move([M,I],D,r)}touchend(r,u,p){if(!this._firstTwoTouches)return;const[_,w]=this._firstTwoTouches,M=Ia(p,u,_),I=Ia(p,u,w);M&&I||(this._active&&F.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ia(x,r,u){for(let p=0;p<x.length;p++)if(x[p].identifier===u)return r[p]}function wr(x,r){return Math.log(x/r)/Math.LN2}class Pc extends Ls{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const p=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(wr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wr(this._distance,p),pinchAround:u}}}function ds(x,r){return 180*x.angleWith(r)/Math.PI}class vo extends Ls{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u,p){const _=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ds(this._vector,_),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,p=ds(r,this._startVector);return Math.abs(p)<u}}function zl(x){return Math.abs(x.y)>Math.abs(x.x)}class Ah extends Ls{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,p){super.touchstart(r,u,p),this._currentTouchCount=p.length}_start(r){this._lastPoints=r,zl(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=r[0].sub(this._lastPoints[0]),w=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,w,p.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(_.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,p){if(this._valid!==void 0)return this._valid;const _=r.mag()>=2,w=u.mag()>=2;if(!_&&!w)return;if(!_||!w)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const M=r.y>0==u.y>0;return zl(r)&&zl(u)&&M}}const Mh={panStep:100,bearingStep:15,pitchStep:10};class Bs{constructor(r){this._tr=new Tc(r);const u=Mh;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,p=0,_=0,w=0,M=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?p=-1:(r.preventDefault(),w=-1);break;case 39:r.shiftKey?p=1:(r.preventDefault(),w=1);break;case 38:r.shiftKey?_=1:(r.preventDefault(),M=-1);break;case 40:r.shiftKey?_=-1:(r.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(p=0,_=0),{cameraAnimation:I=>{const D=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Ec,zoom:u?Math.round(D.zoom)+u*(r.shiftKey?2:1):D.zoom,bearing:D.bearing+p*this._bearingStep,pitch:D.pitch+_*this._pitchStep,offset:[-w*this._panStep,-M*this._panStep],center:D.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ec(x){return x*(2-x)}const Nd=4.000244140625,Rd=1/450;class Nl{constructor(r,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=r,this._tr=new Tc(r),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Rd}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const p=B.now(),_=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%Nd==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(_*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=F.mousePos(this._map.getCanvas(),r),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(l.S.convert(p.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const I=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=I),typeof this._targetZoom=="number"&&(this._targetZoom+=I)}if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>Nd?this._wheelZoomRate:this._defaultZoomRate;let D=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&D!==0&&(D=1/D);const $=typeof this._targetZoom!="number"?r.scale:l.af(this._targetZoom);this._targetZoom=r.getConstrained(r.getCameraLngLat(),l.ak($*D)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,p=this._startZoom,_=this._easing;let w,M=!1;if(this._type==="wheel"&&p&&_){const I=B.now()-this._lastWheelEventTime,D=Math.min((I+5)/200,1),$=_(D);w=l.C.number(p,u,$),D<1?this._frameId||(this._frameId=!0):M=!0}else w=u,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=w,{noInertia:!0,needsRenderFrame:!M,zoomDelta:w-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=l.co;if(this._prevEase){const p=this._prevEase,_=(B.now()-p.start)/p.duration,w=p.easing(_+.01)-p.easing(_),M=.27/Math.sqrt(w*w+1e-4)*.01,I=Math.sqrt(.0729-M*M);u=l.cm(M,I,.25,1)}return this._prevEase={start:B.now(),duration:r,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class yu{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class fs{constructor(r){this._tr=new Tc(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nn{constructor(){this._tap=new Ac({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,u,p){if(!this._swipePoint)if(this._tapTime){const _=u[0],w=r.timeStamp-this._tapTime<500,M=this._tapPoint.dist(_)<30;w&&M?p.length>0&&(this._swipePoint=_,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(r,u,p)}touchmove(r,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const _=u[0],w=_.y-this._swipePoint.y;return this._swipePoint=_,r.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(r,u,p)}touchend(r,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const _=this._tap.touchend(r,u,p);_&&(this._tapTime=r.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ph{constructor(r,u,p){this._el=r,this._mousePan=u,this._touchPan=p}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ha{constructor(r,u,p,_){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=u,this._mousePitch=p,this._mouseRoll=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Sr{constructor(r,u,p,_){this._el=r,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class an{constructor(r,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=F.create("div","maplibregl-cooperative-gesture-screen",r);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=u,this._container.appendChild(_);const w=document.createElement("div");w.className="maplibregl-mobile-message",w.textContent=p,this._container.appendChild(w),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(F.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,u){this._enabled&&(this._map.fire(new l.l("cooperativegestureprevented",{gestureType:r,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const En=x=>x.zoom||x.drag||x.roll||x.pitch||x.rotate;class vu extends l.l{}function Fs(x){return x.panDelta&&x.panDelta.mag()||x.zoomDelta||x.bearingDelta||x.pitchDelta||x.rollDelta}class qi{constructor(r,u){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,w)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const M=_.type==="renderFrame"?void 0:_,I={needsRenderFrame:!1},D={},$={};for(const{handlerName:G,handler:Q,allowed:oe}of this._handlers){if(!Q.isEnabled())continue;let me;if(this._blockedByActive($,oe,G))Q.reset();else if(Q[w||_.type]){if(l.cp(_,w||_.type)){const pe=F.mousePos(this._map.getCanvas(),_);me=Q[w||_.type](_,pe)}else if(l.cq(_,w||_.type)){const pe=this._getMapTouches(_.touches),ge=F.touchPos(this._map.getCanvas(),pe);me=Q[w||_.type](_,ge,pe)}else l.cr(w||_.type)||(me=Q[w||_.type](_));this.mergeHandlerResult(I,D,me,G,M),me&&me.needsRenderFrame&&this._triggerRenderFrame()}(me||Q.isActive())&&($[G]=Q)}const q={};for(const G in this._previousActiveHandlers)$[G]||(q[G]=M);this._previousActiveHandlers=$,(Object.keys(q).length||Fs(I))&&(this._changes.push([I,D,q]),this._triggerRenderFrame()),(Object.keys($).length||Fs(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:H}=I;H&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],H(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Sh(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,w,M]of this._listeners)F.addEventListener(_,w,_===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[r,u,p]of this._listeners)F.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(r){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Ga(u,r));const _=u.boxZoom=new ka(u,r);this._add("boxZoom",_),r.interactive&&r.boxZoom&&_.enable();const w=u.cooperativeGestures=new an(u,r.cooperativeGestures);this._add("cooperativeGestures",w),r.cooperativeGestures&&w.enable();const M=new Qf(u),I=new fs(u);u.doubleClickZoom=new yu(I,M),this._add("tapZoom",M),this._add("clickZoom",I),r.interactive&&r.doubleClickZoom&&u.doubleClickZoom.enable();const D=new nn;this._add("tapDragZoom",D);const $=u.touchPitch=new Ah(u);this._add("touchPitch",$),r.interactive&&r.touchPitch&&u.touchPitch.enable(r.touchPitch);const q=()=>u.project(u.getCenter()),H=function({enable:be,clickTolerance:Ce,aroundCenter:Oe=!0,minPixelCenterThreshold:we=100,rotateDegreesPerPixelMoved:Ne=.8},nt){const We=new Dt({checkCorrectEvent:Ke=>F.mouseButton(Ke)===0&&Ke.ctrlKey||F.mouseButton(Ke)===2&&!Ke.ctrlKey});return new us({clickTolerance:Ce,move:(Ke,Qe)=>{const Tt=nt();if(Oe&&Math.abs(Tt.y-Ke.y)>we)return{bearingDelta:l.cn(new l.P(Ke.x,Qe.y),Qe,Tt)};let At=(Qe.x-Ke.x)*Ne;return Oe&&Qe.y<Tt.y&&(At=-At),{bearingDelta:At}},moveStateManager:We,enable:be,assignEvents:hs})}(r,q),G=function({enable:be,clickTolerance:Ce,pitchDegreesPerPixelMoved:Oe=-.5}){const we=new Dt({checkCorrectEvent:Ne=>F.mouseButton(Ne)===0&&Ne.ctrlKey||F.mouseButton(Ne)===2});return new us({clickTolerance:Ce,move:(Ne,nt)=>({pitchDelta:(nt.y-Ne.y)*Oe}),moveStateManager:we,enable:be,assignEvents:hs})}(r),Q=function({enable:be,clickTolerance:Ce,rollDegreesPerPixelMoved:Oe=.3},we){const Ne=new Dt({checkCorrectEvent:nt=>F.mouseButton(nt)===2&&nt.ctrlKey});return new us({clickTolerance:Ce,move:(nt,We)=>{const Ke=we();let Qe=(We.x-nt.x)*Oe;return We.y<Ke.y&&(Qe=-Qe),{rollDelta:Qe}},moveStateManager:Ne,enable:be,assignEvents:hs})}(r,q);u.dragRotate=new Ha(r,H,G,Q),this._add("mouseRotate",H,["mousePitch"]),this._add("mousePitch",G,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Q,["mousePitch"]),r.interactive&&r.dragRotate&&u.dragRotate.enable();const oe=function({enable:be,clickTolerance:Ce}){const Oe=new Dt({checkCorrectEvent:we=>F.mouseButton(we)===0&&!we.ctrlKey});return new us({clickTolerance:Ce,move:(we,Ne)=>({around:Ne,panDelta:Ne.sub(we)}),activateOnStart:!0,moveStateManager:Oe,enable:be,assignEvents:hs})}(r),me=new Mc(r,u);u.dragPan=new Ph(p,oe,me),this._add("mousePan",oe),this._add("touchPan",me,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&u.dragPan.enable(r.dragPan);const pe=new vo,ge=new Pc;u.touchZoomRotate=new Sr(p,ge,pe,D),this._add("touchRotate",pe,["touchPan","touchZoom"]),this._add("touchZoom",ge,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&u.touchZoomRotate.enable(r.touchZoomRotate);const _e=u.scrollZoom=new Nl(u,()=>this._triggerRenderFrame());this._add("scrollZoom",_e,["mousePan"]),r.interactive&&r.scrollZoom&&u.scrollZoom.enable(r.scrollZoom);const Te=u.keyboard=new Bs(u);this._add("keyboard",Te),r.interactive&&r.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Za(u))}_add(r,u,p){this._handlers.push({handlerName:r,handler:u,allowed:p}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!En(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,p){for(const _ in r)if(_!==p&&(!u||u.indexOf(_)<0))return!0;return!1}_getMapTouches(r){const u=[];for(const p of r)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(r,u,p,_,w){if(!p)return;l.e(r,p);const M={handlerName:_,originalEvent:p.originalEvent||w};p.zoomDelta!==void 0&&(u.zoom=M),p.panDelta!==void 0&&(u.drag=M),p.rollDelta!==void 0&&(u.roll=M),p.pitchDelta!==void 0&&(u.pitch=M),p.bearingDelta!==void 0&&(u.rotate=M)}_applyChanges(){const r={},u={},p={};for(const[_,w,M]of this._changes)_.panDelta&&(r.panDelta=(r.panDelta||new l.P(0,0))._add(_.panDelta)),_.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+_.pitchDelta),_.rollDelta&&(r.rollDelta=(r.rollDelta||0)+_.rollDelta),_.around!==void 0&&(r.around=_.around),_.pinchAround!==void 0&&(r.pinchAround=_.pinchAround),_.noInertia&&(r.noInertia=_.noInertia),l.e(u,w),l.e(p,M);this._updateMapTransform(r,u,p),this._changes=[]}_updateMapTransform(r,u,p){const _=this._map,w=_._getTransformForUpdate(),M=_.terrain;if(!(Fs(r)||M&&this._terrainMovement))return this._fireEvents(u,p,!0);_._stop(!0);let{panDelta:I,zoomDelta:D,bearingDelta:$,pitchDelta:q,rollDelta:H,around:G,pinchAround:Q}=r;Q!==void 0&&(G=Q),G=G||_.transform.centerPoint,M&&!w.isPointOnMapSurface(G)&&(G=w.centerPoint);const oe={panDelta:I,zoomDelta:D,rollDelta:H,pitchDelta:q,bearingDelta:$,around:G};this._map.cameraHelper.useGlobeControls&&!w.isPointOnMapSurface(G)&&(G=w.centerPoint);const me=G.distSqr(w.centerPoint)<.01?w.center:w.screenPointToLocation(I?G.sub(I):G);this._handleMapControls({terrain:M,tr:w,deltasForHelper:oe,preZoomAroundLoc:me,combinedEventsInProgress:u,panDelta:I}),_._applyUpdatedTransform(w),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,p,!0)}_handleMapControls({terrain:r,tr:u,deltasForHelper:p,preZoomAroundLoc:_,combinedEventsInProgress:w,panDelta:M}){const I=this._map.cameraHelper;if(I.handleMapControlsRollPitchBearingZoom(p,u),r)return I.useGlobeControls?(this._terrainMovement||!w.drag&&!w.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void I.handleMapControlsPan(p,u,_)):this._terrainMovement||!w.drag&&!w.zoom?void(w.drag&&this._terrainMovement&&M?u.setCenter(u.screenPointToLocation(u.centerPoint.sub(M))):I.handleMapControlsPan(p,u,_)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void I.handleMapControlsPan(p,u,_));I.handleMapControlsPan(p,u,_)}_fireEvents(r,u,p){const _=En(this._eventsInProgress),w=En(r),M={};for(const H in r){const{originalEvent:G}=r[H];this._eventsInProgress[H]||(M[`${H}start`]=G),this._eventsInProgress[H]=r[H]}!_&&w&&this._fireEvent("movestart",w.originalEvent);for(const H in M)this._fireEvent(H,M[H]);w&&this._fireEvent("move",w.originalEvent);for(const H in r){const{originalEvent:G}=r[H];this._fireEvent(H,G)}const I={};let D;for(const H in this._eventsInProgress){const{handlerName:G,originalEvent:Q}=this._eventsInProgress[H];this._handlersById[G].isActive()||(delete this._eventsInProgress[H],D=u[G]||Q,I[`${H}end`]=D)}for(const H in I)this._fireEvent(H,I[H]);const $=En(this._eventsInProgress),q=(_||w)&&!$;if(q&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const H=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&H.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(H)}if(p&&q){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),G=Q=>Q!==0&&-this._bearingSnap<Q&&Q<this._bearingSnap;!H||!H.essential&&B.prefersReducedMotion?(this._map.fire(new l.l("moveend",{originalEvent:D})),G(this._map.getBearing())&&this._map.resetNorth()):(G(H.bearing||this._map.getBearing())&&(H.bearing=0),H.freezeElevation=!0,this._map.easeTo(H,{originalEvent:D})),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new l.l(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new vu("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Rl extends l.E{constructor(r,u,p){super(),this._renderFrameCallback=()=>{const _=Math.min((B.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=p.bearingSnap,this.cameraHelper=u,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,u){r.apply(this.transform),this.transform=r,this.cameraHelper=u}getCenter(){return new l.S(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,u){return this.jumpTo({elevation:r},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,u,p){return r=l.P.convert(r).mult(-1),this.panTo(this.transform.center,l.e({offset:r},u),p)}panTo(r,u,p){return this.easeTo(l.e({center:r},u),p)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,p){return this.easeTo(l.e({zoom:r},u),p)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,u){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new l.l("movestart",u)).fire(new l.l("move",u)).fire(new l.l("moveend",u))),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,p){return this.easeTo(l.e({bearing:r},u),p)}resetNorth(r,u){return this.rotateTo(0,l.e({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(l.e({bearing:0,pitch:0,roll:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}getRoll(){return this.transform.roll}setRoll(r,u){return this.jumpTo({roll:r},u),this}cameraForBounds(r,u){r=fr.convert(r).adjustAntiMeridian();const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),p,u)}_cameraForBoxAndBearing(r,u,p,_){const w={top:0,bottom:0,right:0,left:0};if(typeof(_=l.e({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const $=_.padding;_.padding={top:$,bottom:$,right:$,left:$}}const M=l.e(w,_.padding);_.padding=M;const I=this.transform,D=new fr(r,u);return this.cameraHelper.cameraForBoxAndBearing(_,M,D,p,I)}fitBounds(r,u,p){return this._fitInternal(this.cameraForBounds(r,u),u,p)}fitScreenCoordinates(r,u,p,_,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(l.P.convert(r)),this.transform.screenPointToLocation(l.P.convert(u)),p,_),_,w)}_fitInternal(r,u,p){return r?(delete(u=l.e(r,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(r,u){this.stop();const p=this._getTransformForUpdate();let _=!1,w=!1,M=!1;const I=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,r);const D=p.zoom!==I;return"elevation"in r&&p.elevation!==+r.elevation&&p.setElevation(+r.elevation),"bearing"in r&&p.bearing!==+r.bearing&&(_=!0,p.setBearing(+r.bearing)),"pitch"in r&&p.pitch!==+r.pitch&&(w=!0,p.setPitch(+r.pitch)),"roll"in r&&p.roll!==+r.roll&&(M=!0,p.setRoll(+r.roll)),r.padding==null||p.isPaddingEqual(r.padding)||p.setPadding(r.padding),this._applyUpdatedTransform(p),this.fire(new l.l("movestart",u)).fire(new l.l("move",u)),D&&this.fire(new l.l("zoomstart",u)).fire(new l.l("zoom",u)).fire(new l.l("zoomend",u)),_&&this.fire(new l.l("rotatestart",u)).fire(new l.l("rotate",u)).fire(new l.l("rotateend",u)),w&&this.fire(new l.l("pitchstart",u)).fire(new l.l("pitch",u)).fire(new l.l("pitchend",u)),M&&this.fire(new l.l("rollstart",u)).fire(new l.l("roll",u)).fire(new l.l("rollend",u)),this.fire(new l.l("moveend",u))}calculateCameraOptionsFromTo(r,u,p,_=0){const w=l.a1.fromLngLat(r,u),M=l.a1.fromLngLat(p,_),I=M.x-w.x,D=M.y-w.y,$=M.z-w.z,q=Math.hypot(I,D,$);if(q===0)throw new Error("Can't calculate camera options with same From and To");const H=Math.hypot(I,D),G=l.ak(this.transform.cameraToCenterDistance/q/this.transform.tileSize),Q=180*Math.atan2(I,-D)/Math.PI;let oe=180*Math.acos(H/q)/Math.PI;return oe=$<0?90-oe:90+oe,{center:M.toLngLat(),elevation:_,zoom:G,pitch:oe,bearing:Q}}calculateCameraOptionsFromCameraLngLatAltRotation(r,u,p,_,w){const M=this.transform.calculateCenterFromCameraLngLatAlt(r,u,p,_);return{center:M.center,elevation:M.elevation,zoom:M.zoom,bearing:p,pitch:_,roll:w}}easeTo(r,u){this._stop(!1,r.easeId),((r=l.e({offset:[0,0],duration:500,easing:l.co},r)).animate===!1||!r.essential&&B.prefersReducedMotion)&&(r.duration=0);const p=this._getTransformForUpdate(),_=this.getBearing(),w=p.pitch,M=p.roll,I="bearing"in r?this._normalizeBearing(r.bearing,_):_,D="pitch"in r?+r.pitch:w,$="roll"in r?this._normalizeBearing(r.roll,M):M,q="padding"in r?r.padding:p.padding,H=l.P.convert(r.offset);let G,Q;r.around&&(G=l.S.convert(r.around),Q=p.locationToScreenPoint(G));const oe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},me=this.cameraHelper.handleEaseTo(p,{bearing:I,pitch:D,roll:$,padding:q,around:G,aroundPoint:Q,offsetAsPoint:H,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||_!==I,this._pitching=this._pitching||D!==w,this._rolling=this._rolling||$!==M,this._padding=!p.isPaddingEqual(q),this._zooming=this._zooming||me.isZooming,this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,oe),this.terrain&&this._prepareElevation(me.elevationCenter),this._ease(pe=>{me.easeFunc(pe),this.terrain&&!r.freezeElevation&&this._updateElevation(pe),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},pe=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(u,pe)},r),this}_prepareEase(r,u,p={}){this._moving=!0,u||p.moving||this.fire(new l.l("movestart",r)),this._zooming&&!p.zooming&&this.fire(new l.l("zoomstart",r)),this._rotating&&!p.rotating&&this.fire(new l.l("rotatestart",r)),this._pitching&&!p.pitching&&this.fire(new l.l("pitchstart",r)),this._rolling&&!p.rolling&&this.fire(new l.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(p-(u-(p*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.setElevation(l.C.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const u=r.getCameraLngLat(),p=r.getCameraAltitude(),_=this.terrain?this.terrain.getElevationForLngLatZoom(u,r.zoom):0;if(p<_){const w=this.calculateCameraOptionsFromTo(u,_,r.center,r.elevation);return{pitch:w.pitch,zoom:w.zoom}}return{}}_applyUpdatedTransform(r){const u=[];if(u.push(_=>this._elevateCameraIfInsideTerrain(_)),this.transformCameraUpdate&&u.push(_=>this.transformCameraUpdate(_)),!u.length)return;const p=r.clone();for(const _ of u){const w=p.clone(),{center:M,zoom:I,roll:D,pitch:$,bearing:q,elevation:H}=_(w);M&&w.setCenter(M),H!==void 0&&w.setElevation(H),I!==void 0&&w.setZoom(I),D!==void 0&&w.setRoll(D),$!==void 0&&w.setPitch($),q!==void 0&&w.setBearing(q),p.apply(w)}this.transform.apply(p)}_fireMoveEvents(r){this.fire(new l.l("move",r)),this._zooming&&this.fire(new l.l("zoom",r)),this._rotating&&this.fire(new l.l("rotate",r)),this._pitching&&this.fire(new l.l("pitch",r)),this._rolling&&this.fire(new l.l("roll",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,_=this._rotating,w=this._pitching,M=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new l.l("zoomend",r)),_&&this.fire(new l.l("rotateend",r)),w&&this.fire(new l.l("pitchend",r)),M&&this.fire(new l.l("rollend",r)),this.fire(new l.l("moveend",r))}flyTo(r,u){if(!r.essential&&B.prefersReducedMotion){const Qe=l.Q(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Qe,u)}this.stop(),r=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.co},r);const p=this._getTransformForUpdate(),_=p.bearing,w=p.pitch,M=p.roll,I=p.padding,D="bearing"in r?this._normalizeBearing(r.bearing,_):_,$="pitch"in r?+r.pitch:w,q="roll"in r?this._normalizeBearing(r.roll,M):M,H="padding"in r?r.padding:p.padding,G=l.P.convert(r.offset);let Q=p.centerPoint.add(G);const oe=p.screenPointToLocation(Q),me=this.cameraHelper.handleFlyTo(p,{bearing:D,pitch:$,roll:q,padding:H,locationAtOffset:oe,offsetAsPoint:G,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let pe=r.curve;const ge=Math.max(p.width,p.height),_e=ge/me.scaleOfZoom,Te=me.pixelPathLength;typeof me.scaleOfMinZoom=="number"&&(pe=Math.sqrt(ge/me.scaleOfMinZoom/Te*2));const be=pe*pe;function Ce(Qe){const Tt=(_e*_e-ge*ge+(Qe?-1:1)*be*be*Te*Te)/(2*(Qe?_e:ge)*be*Te);return Math.log(Math.sqrt(Tt*Tt+1)-Tt)}function Oe(Qe){return(Math.exp(Qe)-Math.exp(-Qe))/2}function we(Qe){return(Math.exp(Qe)+Math.exp(-Qe))/2}const Ne=Ce(!1);let nt=function(Qe){return we(Ne)/we(Ne+pe*Qe)},We=function(Qe){return ge*((we(Ne)*(Oe(Tt=Ne+pe*Qe)/we(Tt))-Oe(Ne))/be)/Te;var Tt},Ke=(Ce(!0)-Ne)/pe;if(Math.abs(Te)<2e-6||!isFinite(Ke)){if(Math.abs(ge-_e)<1e-6)return this.easeTo(r,u);const Qe=_e<ge?-1:1;Ke=Math.abs(Math.log(_e/ge))/pe,We=()=>0,nt=Tt=>Math.exp(Qe*pe*Tt)}return r.duration="duration"in r?+r.duration:1e3*Ke/("screenSpeed"in r?+r.screenSpeed/pe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=_!==D,this._pitching=$!==w,this._rolling=q!==M,this._padding=!p.isPaddingEqual(H),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(me.targetCenter),this._ease(Qe=>{const Tt=Qe*Ke,At=1/nt(Tt),yt=We(Tt);this._rotating&&p.setBearing(l.C.number(_,D,Qe)),this._pitching&&p.setPitch(l.C.number(w,$,Qe)),this._rolling&&p.setRoll(l.C.number(M,q,Qe)),this._padding&&(p.interpolatePadding(I,H,Qe),Q=p.centerPoint.add(G)),me.easeFunc(Qe,At,yt,Q),this.terrain&&!r.freezeElevation&&this._updateElevation(Qe),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,u)}return r||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(r,u,p){p.animate===!1||p.duration===0?(r(1),u()):(this._easeStart=B.now(),this._easeOptions=p,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,u){r=l.aO(r,-180,180);const p=Math.abs(r-u);return Math.abs(r-360-u)<p&&(r-=360),Math.abs(r+360-u)<p&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(l.S.convert(r),this.transform.tileZoom):null}}const Rt={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ht{constructor(r=Rt){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=F.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=F.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const p=this._map._getUIString(`AttributionControl.${u}`);r.title=p,r.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(_=>typeof _!="string"?"":_)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const u=this._map.style.sourceCaches;for(const _ in u){const w=u[_];if(w.used||w.usedForTerrain){const M=w.getSource();M.attribution&&r.indexOf(M.attribution)<0&&r.push(M.attribution)}}r=r.filter(_=>String(_).trim()),r.sort((_,w)=>_.length-w.length),r=r.filter((_,w)=>{for(let M=w+1;M<r.length;M++)if(r[M].indexOf(_)>=0)return!1;return!0});const p=r.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,r.length?(this._innerContainer.innerHTML=F.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Cc{constructor(r={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=F.create("div","maplibregl-ctrl");const u=F.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){F.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Fn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const _ of p)if(_.id===r)return void(_.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var jc=l.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Pi extends l.E{constructor(r){super(),this._lastTilesetChange=B.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];const p={};for(const _ of jr(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))p[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.terrainRttPosMatrix32f=new Float64Array(16),l.bZ(_.terrainRttPosMatrix32f,0,l.$,l.$,0,0,1),this._tiles[_.key]=new te(_,this.tileSize),this._lastTilesetChange=B.now());for(const _ in this._tiles)p[_]||delete this._tiles[_]}freeRtt(r){for(const u in this._tiles){const p=this._tiles[u];(!r||p.tileID.equals(r)||p.tileID.isChildOf(r)||r.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,u){return u?this._getTerrainCoordsForTileRanges(r,u):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const u={};for(const p of this._renderableTilesKeys){const _=this._tiles[p].tileID,w=r.clone(),M=l.ba();if(_.canonical.equals(r.canonical))l.bZ(M,0,l.$,l.$,0,0,1);else if(_.canonical.isChildOf(r.canonical)){const I=_.canonical.z-r.canonical.z,D=_.canonical.x-(_.canonical.x>>I<<I),$=_.canonical.y-(_.canonical.y>>I<<I),q=l.$>>I;l.bZ(M,0,q,q,0,0,1),l.M(M,M,[-D*q,-$*q,0])}else{if(!r.canonical.isChildOf(_.canonical))continue;{const I=r.canonical.z-_.canonical.z,D=r.canonical.x-(r.canonical.x>>I<<I),$=r.canonical.y-(r.canonical.y>>I<<I),q=l.$>>I;l.bZ(M,0,l.$,l.$,0,0,1),l.M(M,M,[D*q,$*q,0]),l.N(M,M,[1/2**I,1/2**I,0])}}w.terrainRttPosMatrix32f=new Float32Array(M),u[p]=w}return u}_getTerrainCoordsForTileRanges(r,u){const p={};for(const _ of this._renderableTilesKeys){const w=this._tiles[_].tileID;if(!this._isWithinTileRanges(w,u))continue;const M=r.clone(),I=l.ba();if(w.canonical.z===r.canonical.z){const D=r.canonical.x-w.canonical.x,$=r.canonical.y-w.canonical.y;l.bZ(I,0,l.$,l.$,0,0,1),l.M(I,I,[D*l.$,$*l.$,0])}else if(w.canonical.z>r.canonical.z){const D=w.canonical.z-r.canonical.z,$=w.canonical.x-(w.canonical.x>>D<<D),q=w.canonical.y-(w.canonical.y>>D<<D),H=r.canonical.x-(w.canonical.x>>D),G=r.canonical.y-(w.canonical.y>>D),Q=l.$>>D;l.bZ(I,0,Q,Q,0,0,1),l.M(I,I,[-$*Q+H*l.$,-q*Q+G*l.$,0])}else{const D=r.canonical.z-w.canonical.z,$=r.canonical.x-(r.canonical.x>>D<<D),q=r.canonical.y-(r.canonical.y>>D<<D),H=(r.canonical.x>>D)-w.canonical.x,G=(r.canonical.y>>D)-w.canonical.y,Q=l.$<<D;l.bZ(I,0,Q,Q,0,0,1),l.M(I,I,[$*l.$+H*Q,q*l.$+G*Q,0])}M.terrainRttPosMatrix32f=new Float32Array(I),p[_]=M}return p}getSourceTile(r,u){const p=this.sourceCache._source;let _=r.overscaledZ-this.deltaZoom;if(_>p.maxzoom&&(_=p.maxzoom),_<p.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(_).key);let w=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!w||!w.dem)&&u)for(;_>=p.minzoom&&(!w||!w.dem);)w=this.sourceCache.getTileByID(r.scaledTo(_--).key);return w}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,u){return u[r.canonical.z]&&r.canonical.x>=u[r.canonical.z].minTileX&&r.canonical.x<=u[r.canonical.z].maxTileX&&r.canonical.y>=u[r.canonical.z].minTileY&&r.canonical.y<=u[r.canonical.z].maxTileY}}class Ld{constructor(r,u,p){this._meshCache={},this.painter=r,this.sourceCache=new Pi(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,p,_=l.$){var w;if(!(u>=0&&u<_&&p>=0&&p<_))return 0;const M=this.getTerrainData(r),I=(w=M.tile)===null||w===void 0?void 0:w.dem;if(!I)return 0;const D=l.cs([],[u/_*l.$,p/_*l.$],M.u_terrain_matrix),$=[D[0]*I.dim,D[1]*I.dim],q=Math.floor($[0]),H=Math.floor($[1]),G=$[0]-q,Q=$[1]-H;return I.get(q,H)*(1-G)*(1-Q)+I.get(q+1,H)*G*(1-Q)+I.get(q,H+1)*(1-G)*Q+I.get(q+1,H+1)*G*Q}getElevationForLngLatZoom(r,u){if(!l.ct(u,r.wrap()))return 0;const{tileID:p,mercatorX:_,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(r,u);return this.getElevation(p,_%l.$,w%l.$,l.$)}getElevation(r,u,p,_=l.$){return this.getDEMElevation(r,u,p,_)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const _=this.painter.context,w=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new l.T(_,w,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new l.T(_,new l.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ag([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const _=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new l.T(_,u.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),u.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+r.key;if(p&&!this._demMatrixCache[p]){const _=this.sourceCache.sourceCache._source.maxzoom;let w=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=_?w=r.canonical.z-_:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const M=r.canonical.x-(r.canonical.x>>w<<w),I=r.canonical.y-(r.canonical.y>>w<<w),D=l.cu(new Float64Array(16),[1/(l.$<<w),1/(l.$<<w),0]);l.M(D,D,[M*l.$,I*l.$,0]),this._demMatrixCache[r.key]={matrix:D,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){const u=this.painter,p=u.width/devicePixelRatio,_=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new l.T(u.context,{width:p,height:_,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new l.T(u.context,{width:p,height:_,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,_,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,_))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,M=0;w<this._coordsTextureSize;w++)for(let I=0;I<this._coordsTextureSize;I++,M+=4)u[M+0]=255&I,u[M+1]=255&w,u[M+2]=I>>8<<4|w>>8,u[M+3]=0;const p=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),_=new l.T(r,p,r.gl.RGBA,{premultiply:!1});return _.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),p=this.painter.context,_=p.gl,w=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),M=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(w,I-M-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const D=u[0]+(u[2]>>4<<8),$=u[1]+((15&u[2])<<8),q=this.coordsIndex[255-u[3]],H=q&&this.sourceCache.getTileByID(q);if(!H)return null;const G=this._coordsTextureSize,Q=(1<<H.tileID.canonical.z)*G;return new l.a1((H.tileID.canonical.x*G+D)/Q+H.tileID.wrap,(H.tileID.canonical.y*G+$)/Q,this.getElevation(H.tileID,D,$,G))}depthAtPoint(r){const u=new Uint8Array(4),p=this.painter.context,_=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(r){var u;const p=((u=this.painter.style.projection)===null||u===void 0?void 0:u.transitionState)>0,_=p&&r.canonical.y===0,w=p&&r.canonical.y===(1<<r.canonical.z)-1,M=`m_${_?"n":""}_${w?"s":""}`;if(this._meshCache[M])return this._meshCache[M];const I=this.painter.context,D=new l.cv,$=new l.aN,q=this.meshSize,H=l.$/q,G=q*q;for(let we=0;we<=q;we++)for(let Ne=0;Ne<=q;Ne++)D.emplaceBack(Ne*H,we*H,0);for(let we=0;we<G;we+=q+1)for(let Ne=0;Ne<q;Ne++)$.emplaceBack(Ne+we,q+Ne+we+1,q+Ne+we+2),$.emplaceBack(Ne+we,q+Ne+we+2,Ne+we+1);const Q=D.length,oe=Q+(q+1),me=(q+1)*q,pe=_?l.bh:0,ge=_?0:1,_e=w?l.bi:l.$,Te=w?0:1;for(let we=0;we<=q;we++)D.emplaceBack(we*H,pe,ge);for(let we=0;we<=q;we++)D.emplaceBack(we*H,_e,Te);for(let we=0;we<q;we++)$.emplaceBack(me+we,oe+we,oe+we+1),$.emplaceBack(me+we,oe+we+1,me+we+1),$.emplaceBack(0+we,Q+we+1,Q+we),$.emplaceBack(0+we,0+we+1,Q+we+1);const be=D.length,Ce=be+2*(q+1);for(const we of[0,1])for(let Ne=0;Ne<=q;Ne++)for(const nt of[0,1])D.emplaceBack(we*l.$,Ne*H,nt);for(let we=0;we<2*q;we+=2)$.emplaceBack(be+we,be+we+1,be+we+3),$.emplaceBack(be+we,be+we+3,be+we+2),$.emplaceBack(Ce+we,Ce+we+3,Ce+we+1),$.emplaceBack(Ce+we,Ce+we+2,Ce+we+3);const Oe=new uc(I.createVertexBuffer(D,jc.members),I.createIndexBuffer($),l.aM.simpleSegment(0,0,D.length,$.length));return this._meshCache[M]=Oe,Oe}getMeshFrameDelta(r){return 2*Math.PI*l.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,u){var p;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(r,u);return(p=this.getMinMaxElevation(_).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(r,u){const p=l.a1.fromLngLat(r.wrap()),_=(1<<u)*l.$,w=p.x*_,M=p.y*_,I=Math.floor(w/l.$),D=Math.floor(M/l.$);return{tileID:new l.Z(u,0,u,I,D),mercatorX:w,mercatorY:M}}}class Xa{constructor(r,u,p){this._context=r,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new l.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:r,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Ll={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Bd{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new Xa(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(p=>!r._layers[p].isHidden(u)),this._coordsAscending={};for(const p in r.sourceCaches){this._coordsAscending[p]={};const _=r.sourceCaches[p].getVisibleCoordinates(),w=r.sourceCaches[p].getSource(),M=w instanceof Wn?w.terrainTileRanges:null;for(const I of _){const D=this.terrain.sourceCache.getTerrainCoords(I,M);for(const $ in D)this._coordsAscending[p][$]||(this._coordsAscending[p][$]=[]),this._coordsAscending[p][$].push(D[$])}}this._coordsAscendingStr={};for(const p of r._order){const _=r._layers[p],w=_.source;if(Ll[_.type]&&!this._coordsAscendingStr[w]){this._coordsAscendingStr[w]={};for(const M in this._coordsAscending[w])this._coordsAscendingStr[w][M]=this._coordsAscending[w][M].map(I=>I.key).sort().join()}}for(const p of this._renderableTiles)for(const _ in this._coordsAscendingStr){const w=this._coordsAscendingStr[_][p.tileID.key];w&&w!==p.rttCoords[_]&&(p.rtt=[])}}renderLayer(r,u){if(r.isHidden(this.painter.transform.zoom))return!1;const p=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),_=r.type,w=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Ll[_]&&(this._prevType&&Ll[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(r.id),!M))return!0;if(Ll[this._prevType]||Ll[_]&&M){this._prevType=_;const I=this._stacks.length-1,D=this._stacks[I]||[];for(const $ of this._renderableTiles){if(this.pool.isFull()&&(Sc(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push($),$.rtt[I]){const H=this.pool.getObjectForId($.rtt[I].id);if(H.stamp===$.rtt[I].stamp){this.pool.useObject(H);continue}}const q=this.pool.getOrCreateFreeObject();this.pool.useObject(q),this.pool.stampObject(q),$.rtt[I]={id:q.id,stamp:q.stamp},w.context.bindFramebuffer.set(q.fbo.framebuffer),w.context.clear({color:l.bf.transparent,stencil:0}),w.currentStencilSource=void 0;for(let H=0;H<D.length;H++){const G=w.style._layers[D[H]],Q=G.source?this._coordsAscending[G.source][$.tileID.key]:[$.tileID];w.context.viewport.set([0,0,q.fbo.width,q.fbo.height]),w._renderTileClippingMasks(G,Q,!0),w.renderLayer(w,w.style.sourceCaches[G.source],G,Q,p),G.source&&($.rttCoords[G.source]=this._coordsAscendingStr[G.source][$.tileID.key])}}return Sc(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),Ll[_]}return!1}}const Fd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},$d=P,gi={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Rt,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},_r={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Cn{constructor(r,u,p=!1){this.mousedown=w=>{this.startMove(w,F.mousePos(this.element,w)),F.addEventListener(window,"mousemove",this.mousemove),F.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.move(w,F.mousePos(this.element,w))},this.mouseup=w=>{this._rotatePitchHandler.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=F.touchPos(this.element,w.targetTouches)[0],this.startMove(w,this._startPos),F.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=F.touchPos(this.element,w.targetTouches)[0],this.move(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;const _=new Th;this._rotatePitchHandler=new us({clickTolerance:3,move:(w,M)=>{const I=u.getBoundingClientRect(),D=new l.P((I.bottom-I.top)/2,(I.right-I.left)/2);return{bearingDelta:l.cn(new l.P(w.x,M.y),M,D),pitchDelta:p?-.5*(M.y-w.y):void 0}},moveStateManager:_,enable:!0,assignEvents:()=>{}}),this.map=r,F.addEventListener(u,"mousedown",this.mousedown),F.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),F.addEventListener(u,"touchcancel",this.reset)}startMove(r,u){this._rotatePitchHandler.dragStart(r,u),F.disableDrag()}move(r,u){const p=this.map,{bearingDelta:_,pitchDelta:w}=this._rotatePitchHandler.dragMove(r,u)||{};_&&p.setBearing(p.getBearing()+_),w&&p.setPitch(p.getPitch()+w)}off(){const r=this.element;F.removeEventListener(r,"mousedown",this.mousedown),F.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend),F.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){F.enableDrag(),F.removeEventListener(window,"mousemove",this.mousemove),F.removeEventListener(window,"mouseup",this.mouseup),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend)}}let Wa;function ps(x,r,u,p=!1){if(p||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return x==null?void 0:x.wrap();const _=new l.S(x.lng,x.lat);if(x=new l.S(x.lng,x.lat),r){const w=new l.S(x.lng-360,x.lat),M=new l.S(x.lng+360,x.lat),I=u.locationToScreenPoint(x).distSqr(r);u.locationToScreenPoint(w).distSqr(r)<I?x=w:u.locationToScreenPoint(M).distSqr(r)<I&&(x=M)}for(;Math.abs(x.lng-u.center.lng)>180;){const w=u.locationToScreenPoint(x);if(w.x>=0&&w.y>=0&&w.x<=u.width&&w.y<=u.height)break;x.lng>u.center.lng?x.lng-=360:x.lng+=360}return x.lng!==_.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(x))?x:_}const $s={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ya(x,r,u){const p=x.classList;for(const _ in $s)p.remove(`maplibregl-${u}-anchor-${_}`);p.add(`maplibregl-${u}-anchor-${r}`)}class qs extends l.E{constructor(r){if(super(),this._onKeyPress=u=>{const p=u.code,_=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,_=this._element;this._popup&&(p===_||_.contains(p))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=ps(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),F.setTransform(this._element,`${$s[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${_}`),B.frameAsync(new AbortController).then(()=>{this._updateOpacity(u&&u.type==="moveend")}).catch(()=>{})},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.l("dragstart"))),this.fire(new l.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=l.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=F.create("div");const u=F.createNS("http://www.w3.org/2000/svg","svg"),p=41,_=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${_}px`),u.setAttributeNS(null,"viewBox",`0 0 ${_} ${p}`);const w=F.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");const M=F.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");const I=F.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const D=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ge of D){const _e=F.createNS("http://www.w3.org/2000/svg","ellipse");_e.setAttributeNS(null,"opacity","0.04"),_e.setAttributeNS(null,"cx","10.5"),_e.setAttributeNS(null,"cy","5.80029008"),_e.setAttributeNS(null,"rx",ge.rx),_e.setAttributeNS(null,"ry",ge.ry),I.appendChild(_e)}const $=F.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);const q=F.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(q);const H=F.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"opacity","0.25"),H.setAttributeNS(null,"fill","#000000");const G=F.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),H.appendChild(G);const Q=F.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Q.setAttributeNS(null,"fill","#FFFFFF");const oe=F.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const me=F.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#000000"),me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962");const pe=F.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#FFFFFF"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962"),oe.appendChild(me),oe.appendChild(pe),M.appendChild(I),M.appendChild($),M.appendChild(H),M.appendChild(Q),M.appendChild(oe),u.appendChild(M),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(u),this._offset=l.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Ya(this._element,this._anchor,"marker"),r&&r.className)for(const u of r.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),F.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.S.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const _=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var u,p;const _=(u=this._map)===null||u===void 0?void 0:u.terrain,w=this._map.transform.isLocationOccluded(this._lngLat);if(!_||w){const Q=w?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Q&&(this._element.style.opacity=Q))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const M=this._map,I=M.terrain.depthAtPoint(this._pos),D=M.terrain.getElevationForLngLatZoom(this._lngLat,M.transform.tileZoom);if(M.transform.lngLatToCameraDepth(this._lngLat,D)-I<.006)return void(this._element.style.opacity=this._opacity);const $=-this._offset.y/M.transform.pixelsPerMeter,q=Math.sin(M.getPitch()*Math.PI/180)*$,H=M.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),G=M.transform.lngLatToCameraDepth(this._lngLat,D+q)-H>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&G&&this._popup.remove(),this._element.style.opacity=G?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=l.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,u){return(this._opacity===void 0||r===void 0&&u===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const _u={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Vo=0,Us=!1;const Eh={maxWidth:100,unit:"metric"};function xu(x,r,u){const p=u&&u.maxWidth||100,_=x._container.clientHeight/2,w=x._container.clientWidth/2,M=x.unproject([w-p/2,_]),I=x.unproject([w+p/2,_]),D=Math.round(x.project(I).x-x.project(M).x),$=Math.min(p,D,x._container.clientWidth),q=M.distanceTo(I);if(u&&u.unit==="imperial"){const H=3.2808*q;H>5280?Vs(r,$,H/5280,x._getUIString("ScaleControl.Miles")):Vs(r,$,H,x._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Vs(r,$,q/1852,x._getUIString("ScaleControl.NauticalMiles")):q>=1e3?Vs(r,$,q/1e3,x._getUIString("ScaleControl.Kilometers")):Vs(r,$,q,x._getUIString("ScaleControl.Meters"))}function Vs(x,r,u,p){const _=function(w){const M=Math.pow(10,`${Math.floor(w)}`.length-1);let I=w/M;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(D){const $=Math.pow(10,Math.ceil(-Math.log(D)/Math.LN10));return Math.round(D*$)/$}(I),M*I}(u);x.style.width=r*(_/u)+"px",x.innerHTML=`${_}&nbsp;${p}`}const Ch={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},jh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Oc(x){if(x){if(typeof x=="number"){const r=Math.round(Math.abs(x)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,x),"top-left":new l.P(r,r),"top-right":new l.P(-r,r),bottom:new l.P(0,-x),"bottom-left":new l.P(r,-r),"bottom-right":new l.P(-r,-r),left:new l.P(x,0),right:new l.P(-x,0)}}if(x instanceof l.P||Array.isArray(x)){const r=l.P.convert(x);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.P.convert(x.center||[0,0]),top:l.P.convert(x.top||[0,0]),"top-left":l.P.convert(x["top-left"]||[0,0]),"top-right":l.P.convert(x["top-right"]||[0,0]),bottom:l.P.convert(x.bottom||[0,0]),"bottom-left":l.P.convert(x["bottom-left"]||[0,0]),"bottom-right":l.P.convert(x["bottom-right"]||[0,0]),left:l.P.convert(x.left||[0,0]),right:l.P.convert(x.right||[0,0])}}return Oc(new l.P(0,0))}const Oh=P;m.AJAXError=l.cz,m.Event=l.l,m.Evented=l.E,m.LngLat=l.S,m.MercatorCoordinate=l.a1,m.Point=l.P,m.addProtocol=l.cA,m.config=l.a,m.removeProtocol=l.cB,m.AttributionControl=Ht,m.BoxZoomHandler=ka,m.CanvasSource=Ii,m.CooperativeGesturesHandler=an,m.DoubleClickZoomHandler=yu,m.DragPanHandler=Ph,m.DragRotateHandler=Ha,m.EdgeInsets=ko,m.FullscreenControl=class extends l.E{constructor(x={}){super(),this._onFullscreenChange=()=>{var r;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=u==null?void 0:u.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,x&&x.container&&(x.container instanceof HTMLElement?this._container=x.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(x){return this._map=x,this._container||(this._container=this._map.getContainer()),this._controlContainer=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){F.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const x=this._fullscreenButton=F.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);F.create("span","maplibregl-ctrl-icon",x).setAttribute("aria-hidden","true"),x.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const x=this._getTitle();this._fullscreenButton.setAttribute("aria-label",x),this._fullscreenButton.title=x}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},m.GeoJSONSource=ki,m.GeolocateControl=class extends l.E{constructor(x){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new l.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const u=new l.S(r.coords.longitude,r.coords.latitude),p=r.coords.accuracy,_=this._map.getBearing(),w=l.e({bearing:_},this.options.fitBoundsOptions),M=fr.fromLngLat(u,p);this._map.fitBounds(M,w,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const u=new l.S(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=r.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Us)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=F.create("button","maplibregl-ctrl-geolocate",this._container),F.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new qs({element:this._dotElement}),this._circleElement=F.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new qs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{const p=(u==null?void 0:u[0])instanceof ResizeObserverEntry;u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.l("trackuserlocationend")),this.fire(new l.l("userlocationlostfocus")))})}},this.options=l.e({},_u,x)}onAdd(x){return this._map=x,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return l._(this,arguments,void 0,function*(r=!1){if(Wa!==void 0&&!r)return Wa;if(window.navigator.permissions===void 0)return Wa=!!window.navigator.geolocation,Wa;try{Wa=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Wa=!!window.navigator.geolocation}return Wa})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),F.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Vo=0,Us=!1}_isOutOfMapMaxBounds(x){const r=this._map.getMaxBounds(),u=x.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const x=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&x))return;const r=this._map.project(x),u=this._map.unproject([r.x+100,r.y]),p=x.distanceTo(u)/100,_=2*this._accuracy/p;this._circleElement.style.width=`${_.toFixed(2)}px`,this._circleElement.style.height=`${_.toFixed(2)}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Vo--,Us=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.l("trackuserlocationstart")),this.fire(new l.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let x;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Vo++,Vo>1?(x={maximumAge:6e5,timeout:0},Us=!0):(x=this.options.positionOptions,Us=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,x)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},m.GlobeControl=class{constructor(){this._toggleProjection=()=>{var x;const r=(x=this._map.getProjection())===null||x===void 0?void 0:x.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var x;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((x=this._map.getProjection())===null||x===void 0?void 0:x.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(x){return this._map=x,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=F.create("button","maplibregl-ctrl-globe",this._container),F.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},m.Hash=bi,m.ImageSource=Wn,m.KeyboardHandler=Bs,m.LngLatBounds=fr,m.LogoControl=Cc,m.Map=class extends Rl{constructor(x){var r,u;l.cw.mark(l.cx.create);const p=Object.assign(Object.assign(Object.assign({},gi),x),{canvasContextAttributes:Object.assign(Object.assign({},gi.canvasContextAttributes),x.canvasContextAttributes)});if(p.minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const _=new Ms,w=new Ps;if(p.minZoom!==void 0&&_.setMinZoom(p.minZoom),p.maxZoom!==void 0&&_.setMaxZoom(p.maxZoom),p.minPitch!==void 0&&_.setMinPitch(p.minPitch),p.maxPitch!==void 0&&_.setMaxPitch(p.maxPitch),p.renderWorldCopies!==void 0&&_.setRenderWorldCopies(p.renderWorldCopies),super(_,w,{bearingSnap:p.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Fn,this._controls=[],this._mapId=l.a7(),this._contextLost=I=>{I.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.l("webglcontextlost",{originalEvent:I}))},this._contextRestored=I=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.l("webglcontextrestored",{originalEvent:I}))},this._onMapScroll=I=>{if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=p.trackResize===!0,this._bearingSnap=p.bearingSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=p.refreshExpiredTiles===!0,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions===!0,this._collectResourceTiming=p.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Fd),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this.transformCameraUpdate=p.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=p.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ue.addThrottleControl(()=>this.isMoving()),this._requestManager=new J(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let I=!1;const D=ls($=>{this._trackResize&&!this._removed&&(this.resize($),this.redraw())},50);this._resizeObserver=new ResizeObserver($=>{I?D($):I=!0}),this._resizeObserver.observe(this._container)}this.handlers=new qi(this,p),this._hash=p.hash&&new bi(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.e({},p.fitBoundsOptions,{duration:0}))));const M=typeof p.style=="string"||((u=(r=p.style)===null||r===void 0?void 0:r.projection)===null||u===void 0?void 0:u.type)!=="globe";this.resize(null,M),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new Ht(typeof p.attributionControl=="boolean"?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new Cc,p.logoPosition),this.on("style.load",()=>{if(M||this._resizeTransform(),this.transform.unmodified){const I=l.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(I)}}),this.on("data",I=>{this._update(I.dataType==="style"),this.fire(new l.l(`${I.dataType}data`,I))}),this.on("dataloading",I=>{this.fire(new l.l(`${I.dataType}dataloading`,I))}),this.on("dataabort",I=>{this.fire(new l.l("sourcedataabort",I))})}_getMapId(){return this._mapId}setGlobalStateProperty(x,r){return this.style.setGlobalStateProperty(x,r),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(x,r){if(r===void 0&&(r=x.getDefaultPosition?x.getDefaultPosition():"top-right"),!x||!x.onAdd)return this.fire(new l.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=x.onAdd(this);this._controls.push(x);const p=this._controlPositions[r];return r.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(x){if(!x||!x.onRemove)return this.fire(new l.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(x);return r>-1&&this._controls.splice(r,1),x.onRemove(this),this}hasControl(x){return this._controls.indexOf(x)>-1}coveringTiles(x){return jr(this.transform,x)}calculateCameraOptionsFromTo(x,r,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(x,r,u,p)}resize(x,r=!0){const[u,p]=this._containerDimensions(),_=this._getClampedPixelRatio(u,p);if(this._resizeCanvas(u,p,_),this.painter.resize(u,p,_),this.painter.overLimit()){const M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];const I=this._getClampedPixelRatio(u,p);this._resizeCanvas(u,p,I),this.painter.resize(u,p,I)}this._resizeTransform(r);const w=!this._moving;return w&&(this.stop(),this.fire(new l.l("movestart",x)).fire(new l.l("move",x))),this.fire(new l.l("resize",x)),w&&this.fire(new l.l("moveend",x)),this}_resizeTransform(x=!0){var r;const[u,p]=this._containerDimensions();this.transform.resize(u,p,x),(r=this._requestedCameraState)===null||r===void 0||r.resize(u,p,x)}_getClampedPixelRatio(x,r){const{0:u,1:p}=this._maxCanvasSize,_=this.getPixelRatio(),w=x*_,M=r*_;return Math.min(w>u?u/w:1,M>p?p/M:1)*_}getPixelRatio(){var x;return(x=this._overridePixelRatio)!==null&&x!==void 0?x:devicePixelRatio}setPixelRatio(x){this._overridePixelRatio=x,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(x){return this.transform.setMaxBounds(fr.convert(x)),this._update()}setMinZoom(x){if((x=x??-2)>=-2&&x<=this.transform.maxZoom)return this.transform.setMinZoom(x),this._update(),this.getZoom()<x&&this.setZoom(x),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(x){if((x=x??22)>=this.transform.minZoom)return this.transform.setMaxZoom(x),this._update(),this.getZoom()>x&&this.setZoom(x),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(x){if((x=x??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(x>=0&&x<=this.transform.maxPitch)return this.transform.setMinPitch(x),this._update(),this.getPitch()<x&&this.setPitch(x),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(x){if((x=x??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(x>=this.transform.minPitch)return this.transform.setMaxPitch(x),this._update(),this.getPitch()>x&&this.setPitch(x),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(x){return this.transform.setRenderWorldCopies(x),this._update()}project(x){return this.transform.locationToScreenPoint(l.S.convert(x),this.style&&this.terrain)}unproject(x){return this.transform.screenPointToLocation(l.P.convert(x),this.terrain)}isMoving(){var x;return this._moving||((x=this.handlers)===null||x===void 0?void 0:x.isMoving())}isZooming(){var x;return this._zooming||((x=this.handlers)===null||x===void 0?void 0:x.isZooming())}isRotating(){var x;return this._rotating||((x=this.handlers)===null||x===void 0?void 0:x.isRotating())}_createDelegatedListener(x,r,u){if(x==="mouseenter"||x==="mouseover"){let p=!1;return{layers:r,listener:u,delegates:{mousemove:w=>{const M=r.filter(D=>this.getLayer(D)),I=M.length!==0?this.queryRenderedFeatures(w.point,{layers:M}):[];I.length?p||(p=!0,u.call(this,new $i(x,this,w.originalEvent,{features:I}))):p=!1},mouseout:()=>{p=!1}}}}if(x==="mouseleave"||x==="mouseout"){let p=!1;return{layers:r,listener:u,delegates:{mousemove:M=>{const I=r.filter(D=>this.getLayer(D));(I.length!==0?this.queryRenderedFeatures(M.point,{layers:I}):[]).length?p=!0:p&&(p=!1,u.call(this,new $i(x,this,M.originalEvent)))},mouseout:M=>{p&&(p=!1,u.call(this,new $i(x,this,M.originalEvent)))}}}}{const p=_=>{const w=r.filter(I=>this.getLayer(I)),M=w.length!==0?this.queryRenderedFeatures(_.point,{layers:w}):[];M.length&&(_.features=M,u.call(this,_),delete _.features)};return{layers:r,listener:u,delegates:{[x]:p}}}}_saveDelegatedListener(x,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[x]=this._delegatedListeners[x]||[],this._delegatedListeners[x].push(r)}_removeDelegatedListener(x,r,u){if(!this._delegatedListeners||!this._delegatedListeners[x])return;const p=this._delegatedListeners[x];for(let _=0;_<p.length;_++){const w=p[_];if(w.listener===u&&w.layers.length===r.length&&w.layers.every(M=>r.includes(M))){for(const M in w.delegates)this.off(M,w.delegates[M]);return void p.splice(_,1)}}}on(x,r,u){if(u===void 0)return super.on(x,r);const p=typeof r=="string"?[r]:r,_=this._createDelegatedListener(x,p,u);this._saveDelegatedListener(x,_);for(const w in _.delegates)this.on(w,_.delegates[w]);return{unsubscribe:()=>{this._removeDelegatedListener(x,p,u)}}}once(x,r,u){if(u===void 0)return super.once(x,r);const p=typeof r=="string"?[r]:r,_=this._createDelegatedListener(x,p,u);for(const w in _.delegates){const M=_.delegates[w];_.delegates[w]=(...I)=>{this._removeDelegatedListener(x,p,u),M(...I)}}this._saveDelegatedListener(x,_);for(const w in _.delegates)this.once(w,_.delegates[w]);return this}off(x,r,u){return u===void 0?super.off(x,r):(this._removeDelegatedListener(x,typeof r=="string"?[r]:r,u),this)}queryRenderedFeatures(x,r){if(!this.style)return[];let u;const p=x instanceof l.P||Array.isArray(x),_=p?x:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(p?{}:x)||{},_ instanceof l.P||typeof _[0]=="number")u=[l.P.convert(_)];else{const w=l.P.convert(_[0]),M=l.P.convert(_[1]);u=[w,new l.P(M.x,w.y),M,new l.P(w.x,M.y),w]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(x,r){return this.style.querySourceFeatures(x,r)}setStyle(x,r){return(r=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&x?(this._diffStyle(x,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(x,r))}setTransformRequest(x){return this._requestManager.setTransformRequest(x),this}_getUIString(x){const r=this._locale[x];if(r==null)throw new Error(`Missing UI string '${x}'`);return r}_updateStyle(x,r){var u,p;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(x,r));const _=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!x)),x?(this.style=new vd(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof x=="string"?this.style.loadURL(x,r,_):this.style.loadJSON(x,r,_),this):((p=(u=this.style)===null||u===void 0?void 0:u.projection)===null||p===void 0||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new vd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(x,r){if(typeof x=="string"){const u=this._requestManager.transformRequest(x,"Style");l.j(u,new AbortController).then(p=>{this._updateDiff(p.data,r)}).catch(p=>{p&&this.fire(new l.k(p))})}else typeof x=="object"&&this._updateDiff(x,r)}_updateDiff(x,r){try{this.style.setState(x,r)&&this._update(!0)}catch(u){l.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(x,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(x,r){return this._lazyInitEmptyStyle(),this.style.addSource(x,r),this._update(!0)}isSourceLoaded(x){const r=this.style&&this.style.sourceCaches[x];if(r!==void 0)return r.loaded();this.fire(new l.k(new Error(`There is no source with ID '${x}'`)))}setTerrain(x){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),x){const r=this.style.sourceCaches[x.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${x.source}`);this.terrain===null&&r.reload();for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===x.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),p.type==="color-relief"&&p.source===x.source&&l.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ld(this.painter,r,x),this.painter.renderToTexture=new Bd(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var p;u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==x.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((p=u.source)===null||p===void 0?void 0:p.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new l.l("terrain",{terrain:x})),this}getTerrain(){var x,r;return(r=(x=this.terrain)===null||x===void 0?void 0:x.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const x=this.style&&this.style.sourceCaches;for(const r in x){const u=x[r]._tiles;for(const p in u){const _=u[p];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}removeSource(x){return this.style.removeSource(x),this._update(!0)}getSource(x){return this.style.getSource(x)}setSourceTileLodParams(x,r,u){if(u){const p=this.getSource(u);if(!p)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);p.calculateTileZoom=Bt(Math.max(1,x),Math.max(1,r))}else for(const p in this.style.sourceCaches)this.style.sourceCaches[p].getSource().calculateTileZoom=Bt(Math.max(1,x),Math.max(1,r));return this._update(!0),this}refreshTiles(x,r){const u=this.style.sourceCaches[x];if(!u)throw new Error(`There is no source cache with ID "${x}", cannot refresh tile`);r===void 0?u.reload(!0):u.refreshTiles(r.map(p=>new l.a4(p.z,p.x,p.y)))}addImage(x,r,u={}){const{pixelRatio:p=1,sdf:_=!1,stretchX:w,stretchY:M,content:I,textFitWidth:D,textFitHeight:$}=u;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||l.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new l.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:q,height:H,data:G}=r,Q=r;return this.style.addImage(x,{data:new l.R({width:q,height:H},new Uint8Array(G)),pixelRatio:p,stretchX:w,stretchY:M,content:I,textFitWidth:D,textFitHeight:$,sdf:_,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,x),this}}{const{width:q,height:H,data:G}=B.getImageData(r);this.style.addImage(x,{data:new l.R({width:q,height:H},G),pixelRatio:p,stretchX:w,stretchY:M,content:I,textFitWidth:D,textFitHeight:$,sdf:_,version:0})}}updateImage(x,r){const u=this.style.getImage(x);if(!u)return this.fire(new l.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=r instanceof HTMLImageElement||l.b(r)?B.getImageData(r):r,{width:_,height:w,data:M}=p;if(_===void 0||w===void 0)return this.fire(new l.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==u.data.width||w!==u.data.height)return this.fire(new l.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(r instanceof HTMLImageElement||l.b(r));return u.data.replace(M,I),this.style.updateImage(x,u),this}getImage(x){return this.style.getImage(x)}hasImage(x){return x?!!this.style.getImage(x):(this.fire(new l.k(new Error("Missing required image id"))),!1)}removeImage(x){this.style.removeImage(x)}loadImage(x){return ue.getImage(this._requestManager.transformRequest(x,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(x,r){return this._lazyInitEmptyStyle(),this.style.addLayer(x,r),this._update(!0)}moveLayer(x,r){return this.style.moveLayer(x,r),this._update(!0)}removeLayer(x){return this.style.removeLayer(x),this._update(!0)}getLayer(x){return this.style.getLayer(x)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(x,r,u){return this.style.setLayerZoomRange(x,r,u),this._update(!0)}setFilter(x,r,u={}){return this.style.setFilter(x,r,u),this._update(!0)}getFilter(x){return this.style.getFilter(x)}setPaintProperty(x,r,u,p={}){return this.style.setPaintProperty(x,r,u,p),this._update(!0)}getPaintProperty(x,r){return this.style.getPaintProperty(x,r)}setLayoutProperty(x,r,u,p={}){return this.style.setLayoutProperty(x,r,u,p),this._update(!0)}getLayoutProperty(x,r){return this.style.getLayoutProperty(x,r)}setGlyphs(x,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(x,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(x,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(x,r,u,p=>{p||this._update(!0)}),this}removeSprite(x){return this._lazyInitEmptyStyle(),this.style.removeSprite(x),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(x,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(x,r,u=>{u||this._update(!0)}),this}setLight(x,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(x,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(x,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(x,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(x,r){return this.style.setFeatureState(x,r),this._update()}removeFeatureState(x,r){return this.style.removeFeatureState(x,r),this._update()}getFeatureState(x){return this.style.getFeatureState(x)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let x=0,r=0;return this._container&&(x=this._container.clientWidth||400,r=this._container.clientHeight||300),[x,r]}_setupContainer(){const x=this._container;x.classList.add("maplibregl-map");const r=this._canvasContainer=F.create("div","maplibregl-canvas-container",x);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=F.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const _=this._controlContainer=F.create("div","maplibregl-control-container",x),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{w[M]=F.create("div",`maplibregl-ctrl-${M} `,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(x,r,u){this._canvas.width=Math.floor(u*x),this._canvas.height=Math.floor(u*r),this._canvas.style.width=`${x}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const x=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{r={requestedAttributes:x},p&&(r.statusMessage=p.statusMessage,r.type=p.type)},{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,x):this._canvas.getContext("webgl2",x)||this._canvas.getContext("webgl",x),!u){const p="Failed to initialize WebGL";throw r?(r.message=p,new Error(JSON.stringify(r))):new Error(p)}this.painter=new mu(u,this.transform),X.testSupport(u)}migrateProjection(x,r){super.migrateProjection(x,r),this.painter.transform=x,this.fire(new l.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(x){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||x,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(x){return this._update(),this._renderTaskQueue.add(x)}_cancelRenderFrame(x){this._renderTaskQueue.remove(x)}_render(x){var r,u,p,_,w;const M=this._idleTriggered?this._fadeDuration:0,I=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(x),this._removed)return;let D=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const H=this.transform.zoom,G=B.now();this.style.zoomHistory.update(H,G);const Q=new l.F(H,{now:G,fadeDuration:M,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),oe=Q.crossFadingFactor();oe===1&&oe===this._crossFadingFactor||(D=!0,this._crossFadingFactor=oe),this.style.update(Q)}const $=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0!==I;(p=this.style.projection)===null||p===void 0||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((_=this.style.projection)===null||_===void 0?void 0:_.transitionState,(w=this.style.projection)===null||w===void 0?void 0:w.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||$)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,M,this._crossSourceCollisions,$),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,showPadding:this.showPadding}),this.fire(new l.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.cw.mark(l.cx.load),this.fire(new l.l("load"))),this.style&&(this.style.hasTransitions()||D)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const q=this._sourcesDirty||this._styleDirty||this._placementDirty;return q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.l("idle")),!this._loaded||this._fullyLoaded||q||(this._fullyLoaded=!0,l.cw.mark(l.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var x;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ue.removeThrottleControl(this._imageQueueHandle),(x=this._resizeObserver)===null||x===void 0||x.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),F.remove(this._canvasContainer),F.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),l.cw.clearMetrics(),this._removed=!0,this.fire(new l.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,B.frame(this._frameRequest,x=>{l.cw.frame(x),this._frameRequest=null;try{this._render(x)}catch(r){if(!l.cy(r)&&!function(u){return u.message===mo}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(x){this._showTileBoundaries!==x&&(this._showTileBoundaries=x,this._update())}get showPadding(){return!!this._showPadding}set showPadding(x){this._showPadding!==x&&(this._showPadding=x,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(x){this._showCollisionBoxes!==x&&(this._showCollisionBoxes=x,x?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(x){this._showOverdrawInspector!==x&&(this._showOverdrawInspector=x,this._update())}get repaint(){return!!this._repaint}set repaint(x){this._repaint!==x&&(this._repaint=x,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(x){this._vertices=x,this._update()}get version(){return $d}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(x){return this._lazyInitEmptyStyle(),this.style.setProjection(x),this._update(!0)}},m.MapMouseEvent=$i,m.MapTouchEvent=Oa,m.MapWheelEvent=Ns,m.Marker=qs,m.NavigationControl=class{constructor(x){this._updateZoomButtons=()=>{const r=this._map.getZoom(),u=r===this._map.getMaxZoom(),p=r===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);r.title=p,r.setAttribute("aria-label",p)},this.options=l.e({},_r,x),this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),F.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),F.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=F.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(x){return this._map=x,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Cn(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){F.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(x,r){const u=F.create("button",x,this._container);return u.type="button",u.addEventListener("click",r),u}},m.Popup=class extends l.E{constructor(x){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&F.remove(this._content),this._container&&(F.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=F.create("div","maplibregl-popup",this._map.getContainer()),this._tip=F.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ps(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const u=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor;const _=Oc(this.options.offset);if(!p){const M=this._container.offsetWidth,I=this._container.offsetHeight;let D;D=u.y+_.bottom.y<I?["top"]:u.y>this._map.transform.height-I?["bottom"]:[],u.x<M/2?D.push("left"):u.x>this._map.transform.width-M/2&&D.push("right"),p=D.length===0?"bottom":D.join("-")}let w=u.add(_[p]);this.options.subpixelPositioning||(w=w.round()),F.setTransform(this._container,`${$s[p]} translate(${w.x}px,${w.y}px)`),Ya(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Ch),x)}addTo(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(x){return this._lngLat=l.S.convert(x),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(x){return this.setDOMContent(document.createTextNode(x))}setHTML(x){const r=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=x;p=u.firstChild,p;)r.appendChild(p);return this.setDOMContent(r)}getMaxWidth(){var x;return(x=this._container)===null||x===void 0?void 0:x.style.maxWidth}setMaxWidth(x){return this.options.maxWidth=x,this._update(),this}setDOMContent(x){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=F.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(x),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(x){return this._container&&this._container.classList.add(x),this}removeClassName(x){return this._container&&this._container.classList.remove(x),this}setOffset(x){return this.options.offset=x,this._update(),this}toggleClassName(x){if(this._container)return this._container.classList.toggle(x)}setSubpixelPositioning(x){this.options.subpixelPositioning=x}_createCloseButton(){this.options.closeButton&&(this._closeButton=F.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const x=this._container.querySelector(jh);x&&x.focus()}},m.RasterDEMTileSource=Kr,m.RasterTileSource=tn,m.ScaleControl=class{constructor(x){this._onMove=()=>{xu(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,xu(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Eh),x)}getDefaultPosition(){return"bottom-left"}onAdd(x){return this._map=x,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-scale",x.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){F.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},m.ScrollZoomHandler=Nl,m.Style=vd,m.TerrainControl=class{constructor(x){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=x}onAdd(x){return this._map=x,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=F.create("button","maplibregl-ctrl-terrain",this._container),F.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){F.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},m.TwoFingersTouchPitchHandler=Ah,m.TwoFingersTouchRotateHandler=vo,m.TwoFingersTouchZoomHandler=Pc,m.TwoFingersTouchZoomRotateHandler=Sr,m.VectorTileSource=Yr,m.VideoSource=Ba,m.addSourceType=(x,r)=>l._(void 0,void 0,void 0,function*(){if(Yi(x))throw new Error(`A source type called "${x}" already exists.`);((u,p)=>{Di[u]=p})(x,r)}),m.clearPrewarmedResources=function(){const x=st;x&&(x.isPreloaded()&&x.numActive()===1?(x.release(xe),st=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},m.createTileMesh=yl,m.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},m.getRTLTextPluginStatus=function(){return Jn().getRTLTextPluginStatus()},m.getVersion=function(){return Oh},m.getWorkerCount=function(){return Xe.workerCount},m.getWorkerUrl=function(){return l.a.WORKER_URL},m.importScriptInWorkers=function(x){return yr().broadcast("IS",x)},m.prewarm=function(){Vt().acquire(xe)},m.setMaxParallelImageRequests=function(x){l.a.MAX_PARALLEL_IMAGE_REQUESTS=x},m.setRTLTextPlugin=function(x,r){return Jn().setRTLTextPlugin(x,r)},m.setWorkerCount=function(x){Xe.workerCount=x},m.setWorkerUrl=function(x){l.a.WORKER_URL=x}});var v=i;return v})}(Gv)),Gv.exports}eW();function tW({onLoginSuccess:e}){const[t,i]=ft.useState(!0),[a,f]=ft.useState({email:"",password:"",name:"",confirmPassword:""}),[v,m]=ft.useState(""),[l,P]=ft.useState(!1),C=O=>{f({...a,[O.target.name]:O.target.value}),m("")},z=async O=>{O.preventDefault(),m(""),P(!0);try{if(!a.email||!a.password){m("يرجى إدخال البريد الإلكتروني وكلمة المرور"),P(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)){m("البريد الإلكتروني غير صحيح"),P(!1);return}if(!t){if(!a.name){m("يرجى إدخال الاسم الكامل"),P(!1);return}if(a.password.length<6){m("كلمة المرور يجب أن تكون 6 أحرف على الأقل"),P(!1);return}if(a.password!==a.confirmPassword){m("كلمة المرور غير متطابقة"),P(!1);return}}await new Promise(X=>setTimeout(X,1e3));const F={email:a.email,name:a.name||a.email.split("@")[0],loginTime:new Date().toISOString(),isAdmin:a.email==="ali.alshehro.ar@gmail.com"};localStorage.setItem("muthammen_user",JSON.stringify(F)),e&&e(F)}catch{m("حدث خطأ، يرجى المحاولة مرة أخرى")}finally{P(!1)}};return A.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 px-4",children:A.jsxs("div",{className:"w-full max-w-md",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[A.jsx("div",{className:"p-3 rounded-xl primary-gradient",children:A.jsx(Of,{className:"w-10 h-10 text-white"})}),A.jsxs("div",{className:"text-right",children:[A.jsx("h1",{className:"text-3xl font-black text-foreground",children:"مُثمّن"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"تقييم عقاري ذكي بالذكاء الاصطناعي"})]})]}),A.jsx("h2",{className:"text-2xl font-bold mb-2",children:t?"تسجيل الدخول":"إنشاء حساب جديد"}),A.jsx("p",{className:"text-muted-foreground",children:t?"مرحباً بعودتك! سجل دخولك للمتابعة":"انضم إلى منصة مُثمّن الآن"})]}),A.jsxs(nr,{className:"p-6",children:[A.jsxs("form",{onSubmit:z,className:"space-y-4",children:[!t&&A.jsxs("div",{className:"space-y-2",children:[A.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[A.jsx(S3,{className:"w-4 h-4"}),"الاسم الكامل"]}),A.jsx("input",{type:"text",name:"name",value:a.name,onChange:C,className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"أدخل اسمك الكامل",disabled:l})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[A.jsx(fk,{className:"w-4 h-4"}),"البريد الإلكتروني"]}),A.jsx("input",{type:"email",name:"email",value:a.email,onChange:C,className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"example@email.com",disabled:l})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[A.jsx(QT,{className:"w-4 h-4"}),"كلمة المرور"]}),A.jsx("input",{type:"password",name:"password",value:a.password,onChange:C,className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"••••••••",disabled:l})]}),!t&&A.jsxs("div",{className:"space-y-2",children:[A.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[A.jsx(QT,{className:"w-4 h-4"}),"تأكيد كلمة المرور"]}),A.jsx("input",{type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:C,className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"••••••••",disabled:l})]}),v&&A.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[A.jsx(ld,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),A.jsx("p",{className:"text-sm text-red-800",children:v})]}),A.jsx(Sn,{type:"submit",className:"w-full gap-2",size:"lg",disabled:l,children:l?A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري المعالجة..."]}):A.jsxs(A.Fragment,{children:[t?A.jsx(dk,{className:"w-5 h-5"}):A.jsx(b3,{className:"w-5 h-5"}),t?"تسجيل الدخول":"إنشاء حساب"]})})]}),A.jsx("div",{className:"mt-6 text-center",children:A.jsxs("p",{className:"text-sm text-muted-foreground",children:[t?"ليس لديك حساب؟":"لديك حساب بالفعل؟"," ",A.jsx("button",{type:"button",onClick:()=>{i(!t),m(""),f({email:"",password:"",name:"",confirmPassword:""})},className:"text-primary font-semibold hover:underline",disabled:l,children:t?"إنشاء حساب جديد":"تسجيل الدخول"})]})})]}),A.jsx("div",{className:"mt-6 text-center",children:A.jsx("p",{className:"text-xs text-muted-foreground",children:"بالتسجيل، أنت توافق على شروط الخدمة وسياسة الخصوصية"})})]})})}function rW({onLogout:e,navigateTo:t}){const[i,a]=ft.useState(null),[f,v]=ft.useState({totalEvaluations:0,totalUsers:0,avgPropertyValue:0,activeSubscriptions:0,referralCount:0,recentActivity:[]});ft.useEffect(()=>{const C=JSON.parse(localStorage.getItem("muthammen_user")||"{}");a(C),m()},[]);const m=()=>{const C=JSON.parse(localStorage.getItem("evaluation_history")||"[]"),z=C.length,O=C.length>0?Math.round(C.reduce((X,Z)=>X+(Z.estimatedValue||0),0)/C.length):0;localStorage.getItem("referral_code");const B=parseInt(localStorage.getItem("referral_count")||"0"),F=C.slice(-5).reverse().map(X=>({type:"evaluation",date:X.timestamp||new Date().toISOString(),value:X.estimatedValue,city:X.city,district:X.district}));v({totalEvaluations:z,totalUsers:1,avgPropertyValue:O,activeSubscriptions:0,referralCount:B,recentActivity:F})},l=C=>new Intl.NumberFormat("ar-SA").format(C),P=C=>{const z=new Date(C);return new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(z)};return i?A.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[A.jsx("header",{className:"border-b border-border/50 bg-white/80 backdrop-blur-sm sticky top-0 z-50",children:A.jsx("div",{className:"container mx-auto px-4 py-4",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 rounded-xl primary-gradient",children:A.jsx(Of,{className:"w-8 h-8 text-white"})}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-2xl font-black text-foreground",children:"لوحة التحكم"}),A.jsxs("p",{className:"text-xs text-muted-foreground",children:["مرحباً، ",i.name]})]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsxs(Sn,{variant:"outline",size:"sm",onClick:()=>t("home"),className:"gap-2",children:[A.jsx(Hg,{className:"w-4 h-4"}),"الرئيسية"]}),A.jsxs(Sn,{variant:"outline",size:"sm",onClick:e,className:"gap-2",children:[A.jsx(GR,{className:"w-4 h-4"}),"تسجيل الخروج"]})]})]})})}),A.jsxs("main",{className:"container mx-auto px-4 py-8",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[A.jsxs(nr,{className:"p-6",children:[A.jsxs("div",{className:"flex items-start justify-between mb-4",children:[A.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:A.jsx(YT,{className:"w-6 h-6 text-blue-600"})}),A.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"+12%"})]}),A.jsx("h3",{className:"text-sm text-muted-foreground mb-1",children:"إجمالي التقييمات"}),A.jsx("p",{className:"text-3xl font-bold",children:l(f.totalEvaluations)})]}),A.jsxs(nr,{className:"p-6",children:[A.jsxs("div",{className:"flex items-start justify-between mb-4",children:[A.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:A.jsx(wR,{className:"w-6 h-6 text-green-600"})}),A.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"+8%"})]}),A.jsx("h3",{className:"text-sm text-muted-foreground mb-1",children:"متوسط قيمة العقار"}),A.jsx("p",{className:"text-3xl font-bold",children:l(f.avgPropertyValue)}),A.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"ريال سعودي"})]}),A.jsxs(nr,{className:"p-6",children:[A.jsxs("div",{className:"flex items-start justify-between mb-4",children:[A.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:A.jsx(bf,{className:"w-6 h-6 text-purple-600"})}),A.jsxs("span",{className:"text-xs text-green-600 font-semibold",children:["+",f.referralCount]})]}),A.jsx("h3",{className:"text-sm text-muted-foreground mb-1",children:"الإحالات الناجحة"}),A.jsx("p",{className:"text-3xl font-bold",children:l(f.referralCount)})]}),A.jsxs(nr,{className:"p-6",children:[A.jsxs("div",{className:"flex items-start justify-between mb-4",children:[A.jsx("div",{className:"p-3 rounded-xl bg-orange-100",children:A.jsx(hk,{className:"w-6 h-6 text-orange-600"})}),A.jsx("span",{className:"text-xs text-muted-foreground",children:"قريباً"})]}),A.jsx("h3",{className:"text-sm text-muted-foreground mb-1",children:"الاشتراكات النشطة"}),A.jsx("p",{className:"text-3xl font-bold",children:l(f.activeSubscriptions)})]})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[A.jsxs(nr,{className:"lg:col-span-2 p-6",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:"نظرة عامة على التقييمات"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"آخر 30 يوم"})]}),A.jsxs(Sn,{variant:"outline",size:"sm",className:"gap-2",children:[A.jsx(TR,{className:"w-4 h-4"}),"تصدير"]})]}),A.jsx("div",{className:"h-64 flex items-end justify-between gap-2",children:[65,45,80,55,70,90,75,60,85,95,70,80].map((C,z)=>A.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[A.jsx("div",{className:"w-full bg-gradient-to-t from-blue-600 to-blue-400 rounded-t-lg transition-all hover:opacity-80 cursor-pointer",style:{height:`${C}%`},title:`${C}%`}),A.jsx("span",{className:"text-xs text-muted-foreground",children:z+1})]},z))})]}),A.jsxs(nr,{className:"p-6",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsx("h3",{className:"text-lg font-bold",children:"النشاط الأخير"}),A.jsx(Sn,{variant:"ghost",size:"sm",children:A.jsx(i3,{className:"w-4 h-4"})})]}),A.jsx("div",{className:"space-y-4",children:f.recentActivity.length>0?f.recentActivity.map((C,z)=>A.jsxs("div",{className:"flex items-start gap-3 pb-4 border-b border-border last:border-0",children:[A.jsx("div",{className:"p-2 rounded-lg bg-blue-100 flex-shrink-0",children:A.jsx(WT,{className:"w-4 h-4 text-blue-600"})}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("p",{className:"text-sm font-medium mb-1",children:"تقييم عقار جديد"}),A.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[C.city," - ",C.district]}),A.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[l(C.value)," ريال"]})]})]},z)):A.jsxs("div",{className:"text-center py-8",children:[A.jsx(WT,{className:"w-12 h-12 text-muted-foreground/30 mx-auto mb-2"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"لا يوجد نشاط حتى الآن"})]})})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[A.jsxs(nr,{className:"p-6",children:[A.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[A.jsx(Vv,{className:"w-5 h-5"}),"الوصول السريع"]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs(Sn,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>t("home"),children:[A.jsx(YT,{className:"w-4 h-4"}),"تقييم عقار جديد"]}),A.jsxs(Sn,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>t("map"),children:[A.jsx($g,{className:"w-4 h-4"}),"الخريطة التفاعلية"]}),A.jsxs(Sn,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>t("market"),children:[A.jsx(Zc,{className:"w-4 h-4"}),"دراسة السوق"]}),A.jsxs(Sn,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>t("referrals"),children:[A.jsx(bf,{className:"w-4 h-4"}),"برنامج الإحالات"]})]})]}),A.jsxs(nr,{className:"p-6",children:[A.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[A.jsx(_3,{className:"w-5 h-5"}),"معلومات الحساب"]}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border",children:[A.jsx("span",{className:"text-sm text-muted-foreground",children:"البريد الإلكتروني"}),A.jsx("span",{className:"text-sm font-medium truncate max-w-[180px]",children:i.email})]}),A.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border",children:[A.jsx("span",{className:"text-sm text-muted-foreground",children:"نوع الحساب"}),A.jsx("span",{className:"text-sm font-medium",children:i.isAdmin?"مدير":"مستخدم"})]}),A.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border",children:[A.jsx("span",{className:"text-sm text-muted-foreground",children:"تاريخ التسجيل"}),A.jsx("span",{className:"text-sm font-medium",children:P(i.loginTime)})]}),A.jsxs("div",{className:"flex items-center justify-between py-2",children:[A.jsx("span",{className:"text-sm text-muted-foreground",children:"الحالة"}),A.jsxs("span",{className:"text-sm font-medium text-green-600 flex items-center gap-1",children:[A.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full"}),"نشط"]})]})]})]}),A.jsxs(nr,{className:"p-6",children:[A.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[A.jsx(YN,{className:"w-5 h-5"}),"الإشعارات"]}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[A.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"مرحباً بك في مُثمّن!"}),A.jsx("p",{className:"text-xs text-blue-700",children:"ابدأ بتقييم عقارك الأول الآن"})]}),A.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[A.jsx("p",{className:"text-sm font-medium text-purple-900 mb-1",children:"خريطة تفاعلية قريباً"}),A.jsx("p",{className:"text-xs text-purple-700",children:"استكشف الأسعار في جميع الأحياء"})]}),A.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[A.jsx("p",{className:"text-sm font-medium text-green-900 mb-1",children:"برنامج الإحالات"}),A.jsx("p",{className:"text-xs text-green-700",children:"احصل على مكافآت عند دعوة الأصدقاء"})]})]})]})]}),i.isAdmin&&A.jsx(nr,{className:"p-6 mt-6 bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-200",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"p-3 rounded-xl bg-purple-600",children:A.jsx(Vv,{className:"w-6 h-6 text-white"})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-2",children:"صلاحيات المدير"}),A.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"لديك صلاحيات كاملة للوصول إلى جميع البيانات والإحصائيات في المنصة."}),A.jsxs("div",{className:"flex flex-wrap gap-2",children:[A.jsxs(Sn,{size:"sm",variant:"outline",className:"gap-2",children:[A.jsx(bf,{className:"w-4 h-4"}),"إدارة المستخدمين"]}),A.jsxs(Sn,{size:"sm",variant:"outline",className:"gap-2",children:[A.jsx(Zc,{className:"w-4 h-4"}),"التقارير المتقدمة"]}),A.jsxs(Sn,{size:"sm",variant:"outline",className:"gap-2",children:[A.jsx(Vv,{className:"w-4 h-4"}),"الإعدادات العامة"]})]})]})]})})]})]}):A.jsx("div",{className:"min-h-screen flex items-center justify-center",children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),A.jsx("p",{className:"text-muted-foreground",children:"جاري التحميل..."})]})})}const nW={riyadh_olaya:{city:"الرياض",district:"العليا",coords:[46.6753,24.7136],services:{schools:12,parks:8,mosques:15,supermarkets:22,hospitals:4,restaurants:45,cafes:38},density_score:92},riyadh_malqa:{city:"الرياض",district:"الملقا",coords:[46.6234,24.7743],services:{schools:18,parks:12,mosques:20,supermarkets:28,hospitals:3,restaurants:35,cafes:25},density_score:88},riyadh_narjis:{city:"الرياض",district:"النرجس",coords:[46.7234,24.8143],services:{schools:15,parks:10,mosques:18,supermarkets:20,hospitals:2,restaurants:28,cafes:22},density_score:85},jeddah_rawdah:{city:"جدة",district:"الروضة",coords:[39.1653,21.5811],services:{schools:14,parks:9,mosques:17,supermarkets:25,hospitals:3,restaurants:40,cafes:32},density_score:90},jeddah_salamah:{city:"جدة",district:"السلامة",coords:[39.1953,21.6211],services:{schools:16,parks:11,mosques:19,supermarkets:23,hospitals:4,restaurants:38,cafes:30},density_score:87},dammam_faisaliyah:{city:"الدمام",district:"الفيصلية",coords:[50.1088,26.4207],services:{schools:10,parks:7,mosques:14,supermarkets:18,hospitals:2,restaurants:25,cafes:20},density_score:82}},U_={districts:nW},iW={riyadh_olaya:{main_roads_count:4,avg_distance_to_main_road_m:350,highway_exits_within_5km:3,avg_street_width_m:18,accessibility_score:95},riyadh_malqa:{main_roads_count:5,avg_distance_to_main_road_m:280,highway_exits_within_5km:4,avg_street_width_m:20,accessibility_score:92},riyadh_narjis:{main_roads_count:3,avg_distance_to_main_road_m:420,highway_exits_within_5km:2,avg_street_width_m:16,accessibility_score:88},jeddah_rawdah:{main_roads_count:4,avg_distance_to_main_road_m:300,highway_exits_within_5km:3,avg_street_width_m:19,accessibility_score:93},jeddah_salamah:{main_roads_count:5,avg_distance_to_main_road_m:250,highway_exits_within_5km:4,avg_street_width_m:21,accessibility_score:94},dammam_faisaliyah:{main_roads_count:3,avg_distance_to_main_road_m:400,highway_exits_within_5km:2,avg_street_width_m:17,accessibility_score:85}},aW={districts:iW},oW={riyadh_olaya:{parks_count:8,total_green_area_m2:125e3,green_coverage_percent:12,avg_distance_to_park_m:420,greenery_score:88},riyadh_malqa:{parks_count:12,total_green_area_m2:185e3,green_coverage_percent:15,avg_distance_to_park_m:350,greenery_score:92},riyadh_narjis:{parks_count:10,total_green_area_m2:16e4,green_coverage_percent:14,avg_distance_to_park_m:380,greenery_score:90},jeddah_rawdah:{parks_count:9,total_green_area_m2:14e4,green_coverage_percent:13,avg_distance_to_park_m:400,greenery_score:89},jeddah_salamah:{parks_count:11,total_green_area_m2:17e4,green_coverage_percent:14,avg_distance_to_park_m:360,greenery_score:91},dammam_faisaliyah:{parks_count:7,total_green_area_m2:11e4,green_coverage_percent:11,avg_distance_to_park_m:450,greenery_score:85}},sW={districts:oW},lW={riyadh_olaya:{schools_count:12,private_schools:8,public_schools:4,universities_nearby:2,avg_distance_to_school_m:650,education_score:90},riyadh_malqa:{schools_count:18,private_schools:12,public_schools:6,universities_nearby:1,avg_distance_to_school_m:550,education_score:94},riyadh_narjis:{schools_count:15,private_schools:10,public_schools:5,universities_nearby:1,avg_distance_to_school_m:600,education_score:92},jeddah_rawdah:{schools_count:14,private_schools:9,public_schools:5,universities_nearby:2,avg_distance_to_school_m:620,education_score:91},jeddah_salamah:{schools_count:16,private_schools:11,public_schools:5,universities_nearby:1,avg_distance_to_school_m:580,education_score:93},dammam_faisaliyah:{schools_count:10,private_schools:6,public_schools:4,universities_nearby:1,avg_distance_to_school_m:700,education_score:87}},cW={districts:lW},uW={riyadh_olaya:{fiber_coverage_percent:95,street_lighting_score:92,cleanliness_score:90,noise_level:45,safety_score:93,municipal_services_score:91},riyadh_malqa:{fiber_coverage_percent:92,street_lighting_score:90,cleanliness_score:88,noise_level:40,safety_score:91,municipal_services_score:89},riyadh_narjis:{fiber_coverage_percent:90,street_lighting_score:89,cleanliness_score:87,noise_level:38,safety_score:90,municipal_services_score:88},jeddah_rawdah:{fiber_coverage_percent:93,street_lighting_score:91,cleanliness_score:89,noise_level:42,safety_score:92,municipal_services_score:90},jeddah_salamah:{fiber_coverage_percent:94,street_lighting_score:92,cleanliness_score:90,noise_level:41,safety_score:93,municipal_services_score:91},dammam_faisaliyah:{fiber_coverage_percent:88,street_lighting_score:86,cleanliness_score:85,noise_level:50,safety_score:88,municipal_services_score:86}},hW={districts:uW},dW={riyadh_olaya:{p25:5200,p50:6800,p75:8500,p90:10200,percentile_rank:90,wealth_indicator:"مرتفع جداً"},riyadh_malqa:{p25:4800,p50:6200,p75:7800,p90:9400,percentile_rank:85,wealth_indicator:"مرتفع"},riyadh_narjis:{p25:4500,p50:5800,p75:7200,p90:8600,percentile_rank:80,wealth_indicator:"مرتفع"},jeddah_rawdah:{p25:4600,p50:6e3,p75:7500,p90:9e3,percentile_rank:83,wealth_indicator:"مرتفع"},jeddah_salamah:{p25:4900,p50:6400,p75:8e3,p90:9600,percentile_rank:87,wealth_indicator:"مرتفع جداً"},dammam_faisaliyah:{p25:3800,p50:4900,p75:6100,p90:7300,percentile_rank:70,wealth_indicator:"متوسط-مرتفع"}},fW={districts:dW},Up={services:.25,accessibility:.2,greenery:.15,education:.15,pricePercentile:.2,noise:.05};function pW(e){if(!e||e.length!==2)return null;const[t,i]=e;let a=null,f=1/0;return Object.keys(U_.districts).forEach(v=>{const m=U_.districts[v],[l,P]=m.coords,C=l-t,z=P-i,O=Math.sqrt(C*C+z*z);O<f&&(f=O,a=v)}),a}function mW(e,t){if(!e||!t)return null;for(const[i,a]of Object.entries(U_.districts))if(a.district===e&&a.city===t)return i;return null}function gW(e){const t=U_.districts[e];return t&&t.density_score||50}function yW(e){const t=aW.districts[e];return t&&t.accessibility_score||50}function vW(e){const t=sW.districts[e];return t&&t.greenery_score||50}function _W(e){const t=cW.districts[e];return t&&t.education_score||50}function xW(e){const t=fW.districts[e];return t&&t.percentile_rank||50}function bW(e){const t=hW.districts[e];return t?100-(t.noise_level||50):50}function wW({coords:e,district:t,city:i}){let a=null;if(t&&i&&(a=mW(t,i)),!a&&e&&(a=pW(e)),!a)return{score:70,level:"متوسط",factors:{services:70,accessibility:70,greenery:70,education:70,pricePercentile:70,noise:70},districtFound:!1,message:"لم يتم العثور على بيانات الحي - استخدام قيمة افتراضية"};const f={services:gW(a),accessibility:yW(a),greenery:vW(a),education:_W(a),pricePercentile:xW(a),noise:bW(a)},v=f.services*Up.services+f.accessibility*Up.accessibility+f.greenery*Up.greenery+f.education*Up.education+f.pricePercentile*Up.pricePercentile+f.noise*Up.noise,m=Math.max(0,Math.min(100,Math.round(v)));let l="متوسط";return m>=85?l="مرتفع جداً":m>=75?l="مرتفع":m>=60?l="متوسط-مرتفع":m>=45?l="متوسط":l="منخفض",{score:m,level:l,factors:f,districtFound:!0,districtKey:a,message:`تم حساب جودة الحي تلقائياً بناءً على ${Object.keys(f).length} عوامل`}}function SW(e,t){const i=(e-50)/50*6,a=t*(i/100),f=t+a;return{adjustmentPercent:i.toFixed(2),adjustmentAmount:Math.round(a),adjustedPrice:Math.round(f),explanation:`تعديل جودة الحي: ${i>0?"+":""}${i.toFixed(1)}%`}}function TW(e){if(!e.districtFound)return"تحليل جودة الحي (تلقائي): متوسط — بيانات محدودة متاحة للحي";const{level:t,factors:i}=e,a=Object.entries(i).sort((m,l)=>l[1]-m[1]).slice(0,3),f={services:"كثافة الخدمات",accessibility:"سهولة النفاذ",greenery:"المساحات الخضراء",education:"المؤسسات التعليمية",pricePercentile:"موقع الحي السعري",noise:"الهدوء"},v=a.map(([m])=>f[m]||m).join("، ");return`تحليل جودة الحي (تلقائي): ${t} — استنادًا إلى ${v}`}const UO={الرياض:3500,جدة:3200,مكة:3e3,المدينة:2800,الدمام:2700,الخبر:2900,الظهران:3100,الطائف:2400,تبوك:2200,بريدة:2100,"خميس مشيط":2e3,حائل:1900,نجران:1800,جازان:1700,ينبع:2300,الأحساء:2e3,القطيف:2500,أبها:2200,عرعر:1600,سكاكا:1500,أخرى:2e3},AW={فيلا:1.15,شقة:.95,دور:1.05,عمارة:1.25,أرض:.7,دوبلكس:1.1,استوديو:.85,بنتهاوس:1.4,"تاون هاوس":1.08},MW={جديد:1.1,"1-5":1,"6-10":.95,"11-15":.88,"16-20":.8,"21-30":.7,"أكثر من 30":.6},PW={"راقي جداً":1.35,راقي:1.2,"متوسط إلى راقي":1.1,متوسط:1,شعبي:.85,قديم:.75},EW={شمالية:1.08,جنوبية:1.05,شرقية:1.03,غربية:1.02,"شمالية شرقية":1.1,"شمالية غربية":1.09,"جنوبية شرقية":1.07,"جنوبية غربية":1.06,"ثلاث واجهات":1.18,"أربع واجهات":1.25},CW={"< 10م":.95,"10-15م":1,"16-20م":1.08,"21-30م":1.15,"> 30م":1.22},jW={"سوبر لوكس":1.25,لوكس:1.15,ممتاز:1.08,"جيد جداً":1.03,جيد:1,متوسط:.95,بسيط:.88,"على العظم":.75},Ww={مسبح:8e4,مصعد:6e4,مولد_كهرباء:35e3,نظام_أمني:25e3,نظام_إطفاء:2e4,خزان_ماء:15e3,سخان_مركزي:3e4,تكييف_مركزي:5e4,غرفة_خادمة:4e4,غرفة_سائق:35e3,مجلس_رجال:45e3,صالة_رياضية:7e4,ملحق_خارجي:55e3,مطبخ_خارجي:25e3,موقف_مظلل:2e4},VO={مسجد:1.02,مدرسة:1.03,مستشفى:1.04,مركز_تجاري:1.05,حديقة:1.03,محطة_وقود:1.01,مواصلات_عامة:1.02,جامعة:1.03},OW={بحر:1.2,جبل:1.12,حديقة:1.1,"شارع رئيسي":1.05,"شارع فرعي":1,"مبنى مقابل":.97};async function GO(e){if(!e.area||!e.city)return{estimatedValue:0,confidence:0,error:"يرجى إدخال المساحة والمدينة على الأقل"};const t=parseFloat(e.area),i=UO[e.city]||UO.أخرى;let a=t*i,f=2;const v=100,m={baseCalculation:`${t} م² × ${i} ريال/م² = ${a.toLocaleString("ar-SA")} ريال`,appliedFactors:[]};if(e.propertyType){const U=AW[e.propertyType]||1;a*=U,m.appliedFactors.push({factor:"نوع العقار",value:e.propertyType,multiplier:U,impact:`${((U-1)*100).toFixed(1)}%`}),f++}if(e.age){const U=MW[e.age]||1;a*=U,m.appliedFactors.push({factor:"عمر العقار",value:e.age,multiplier:U,impact:`${((U-1)*100).toFixed(1)}%`}),f++}if(e.neighborhood){const U=PW[e.neighborhood]||1;a*=U,m.appliedFactors.push({factor:"مستوى الحي",value:e.neighborhood,multiplier:U,impact:`${((U-1)*100).toFixed(1)}%`}),f++}if(e.facade){const U=EW[e.facade]||1;a*=U,m.appliedFactors.push({factor:"الواجهة",value:e.facade,multiplier:U,impact:`${((U-1)*100).toFixed(1)}%`}),f++}if(e.streetWidth){const U=CW[e.streetWidth]||1;a*=U,m.appliedFactors.push({factor:"عرض الشارع",value:e.streetWidth,multiplier:U,impact:`${((U-1)*100).toFixed(1)}%`}),f++}if(e.finishing){const U=jW[e.finishing]||1;a*=U,m.appliedFactors.push({factor:"التشطيب",value:e.finishing,multiplier:U,impact:`${((U-1)*100).toFixed(1)}%`}),f++}if(e.view){const U=OW[e.view]||1;a*=U,m.appliedFactors.push({factor:"الإطلالة",value:e.view,multiplier:U,impact:`${((U-1)*100).toFixed(1)}%`}),f++}if(e.bedrooms){const U=parseInt(e.bedrooms);if(U>3){const re=U-3,se=1+re*.02;a*=se,m.appliedFactors.push({factor:"عدد الغرف",value:`${U} غرفة`,multiplier:se,impact:`+${re*2}%`})}f++}if(e.bathrooms){const U=parseInt(e.bathrooms);if(U>2){const re=U-2,se=1+re*.015;a*=se,m.appliedFactors.push({factor:"دورات المياه",value:`${U} دورة`,multiplier:se,impact:`+${re*1.5}%`})}f++}let l=0;const P=[];Object.keys(Ww).forEach(U=>{e[U]===!0&&(l+=Ww[U],P.push({name:U.replace(/_/g," "),value:Ww[U]}),f++)}),l>0&&(a+=l,m.appliedFactors.push({factor:"المرافق الإضافية",value:P.map(U=>U.name).join("، "),addition:l,impact:`+${l.toLocaleString("ar-SA")} ريال`}));let C=1;const z=[];if(Object.keys(VO).forEach(U=>{e[`قرب_${U}`]===!0&&(C*=VO[U],z.push(U.replace(/_/g," ")),f++)}),z.length>0&&(a*=C,m.appliedFactors.push({factor:"القرب من الخدمات",value:z.join("، "),multiplier:C,impact:`${((C-1)*100).toFixed(1)}%`})),e.parking){const U=parseInt(e.parking);if(U>0){const re=1+U*.01;a*=re,m.appliedFactors.push({factor:"مواقف السيارات",value:`${U} موقف`,multiplier:re,impact:`+${U}%`}),f++}}if(e.floor&&e.propertyType==="شقة"){const U=parseInt(e.floor);if(U>0){const re=1+U*.005;a*=re,m.appliedFactors.push({factor:"رقم الطابق",value:`الطابق ${U}`,multiplier:re,impact:`+${(U*.5).toFixed(1)}%`}),f++}}if(e.landArea&&["فيلا","عمارة","أرض"].includes(e.propertyType)){const U=parseFloat(e.landArea),re=parseFloat(e.area);if(U>re){const se=U-re,ne=se*(i*.5);a+=ne,m.appliedFactors.push({factor:"الأرض الفاضية",value:`${se} م²`,addition:ne,impact:`+${ne.toLocaleString("ar-SA")} ريال`})}f++}let B=f/v*70;e.propertyType&&(B+=5),e.age&&(B+=5),e.neighborhood&&(B+=5),e.finishing&&(B+=5),e.bedrooms&&e.bathrooms&&(B+=5),e.facade&&(B+=3),e.streetWidth&&(B+=2),B=Math.min(Math.round(B),95);let F=null,X=null,Z=!1;try{try{const re=await(await fetch("/api/agent/score-nqs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({city:e.city,district:e.district,coords:e.coords||null,extras:{propertyType:e.propertyType,area:e.area}})})).json();if(re.ok&&re.source==="agent")F={score:re.nqs,level:re.level,districtFound:re.districtFound,source:"agent",notes:re.notes},Z=!0,console.log("✅ استخدام نتيجة الوكيل:",F);else if(re.fallback)throw console.log("⚠️ الوكيل غير متاح، استخدام الحساب المحلي"),new Error("Agent fallback requested")}catch(U){console.log("⚠️ فشل الوكيل، استخدام الحساب المحلي:",U.message),F=wW({coords:e.coords||null,district:e.district||null,city:e.city}),Z=!1}F&&F.score&&(X=SW(F.score,a),a=X.adjustedPrice,m.appliedFactors.push({factor:Z?"جودة الحي (ذكاء اصطناعي)":"جودة الحي (تلقائي)",value:F.level,score:F.score,multiplier:1+parseFloat(X.adjustmentPercent)/100,impact:`${X.adjustmentPercent>0?"+":""}${X.adjustmentPercent}%`}))}catch(U){console.warn("تعذر حساب NQS:",U),Z=!1}return kW({timestamp:new Date().toISOString(),formData:e,estimatedValue:a,confidence:B,filledFieldsCount:f}),{estimatedValue:Math.round(a),confidence:B,filledFieldsCount:f,totalPossibleFields:v,adjustments:m,priceRange:{min:Math.round(a*.9),max:Math.round(a*1.1)},recommendations:IW(e,B),nqs:F?{score:F.score,level:F.level,explanation:TW(F),districtFound:F.districtFound,source:F.source||"local"}:null,usedAgent:Z}}function kW(e){try{const t=JSON.parse(localStorage.getItem("evaluationHistory")||"[]");t.push(e),t.length>100&&t.shift(),localStorage.setItem("evaluationHistory",JSON.stringify(t))}catch(t){console.warn("تعذر حفظ التقييم في السجل:",t)}}function IW(e,t){const i=[];return t<50&&i.push("لتحسين دقة التقييم، يُنصح بإدخال المزيد من التفاصيل"),e.propertyType||i.push("إضافة نوع العقار سيحسن الدقة بشكل كبير"),e.age||i.push("تحديد عمر العقار مهم للحصول على تقييم دقيق"),e.neighborhood||i.push("مستوى الحي له تأثير كبير على القيمة"),e.finishing||i.push("جودة التشطيب تؤثر بشكل ملحوظ على السعر"),(!e.bedrooms||!e.bathrooms)&&i.push("عدد الغرف ودورات المياه من العوامل المهمة"),t>=70&&i.push("مستوى الثقة جيد! يمكنك الاعتماد على هذا التقييم"),i}const wS={apiKey:"",apiEndpoint:"https://api.openai.com/v1/chat/completions",model:"gpt-4o",temperature:.3,maxTokens:2e3,enabled:!1};function DW(){try{const e=localStorage.getItem("evaluationHistory");return e?JSON.parse(e):[]}catch(e){return console.warn("تعذر قراءة سجل التقييمات:",e),[]}}function zW(){try{return localStorage.removeItem("evaluationHistory"),!0}catch(e){return console.error("تعذر مسح السجل:",e),!1}}function NW(){const e=DW();if(e.length===0)return{totalEvaluations:0,gptEvaluations:0,localEvaluations:0,averageConfidence:0};const t=e.filter(f=>f.source==="gpt").length,i=e.length-t,a=e.reduce((f,v)=>{var l;const m=((l=v.evaluation)==null?void 0:l.confidence)||v.confidence||0;return f+m},0);return{totalEvaluations:e.length,gptEvaluations:t,localEvaluations:i,averageConfidence:Math.round(a/e.length)}}function RW(){ft.useEffect(()=>{try{const t=new URLSearchParams(window.location.search).get("ref");if(t&&t.length>=6&&t.length<=8){if(!/^[A-Z0-9]+$/.test(t)){console.warn("رمز إحالة غير صالح:",t);return}localStorage.setItem("muth_ref",t),localStorage.setItem("muth_ref_timestamp",Date.now().toString());const i=60*60*24*14;document.cookie=`muth_ref=${t};path=/;max-age=${i};SameSite=Lax`;let a=localStorage.getItem("muth_vid");a||(a=LW(),localStorage.setItem("muth_vid",a)),BW({type:"click",ref:t,visitorId:a,timestamp:Date.now(),url:window.location.href}),FW(t,a).catch(f=>{console.log("تتبع الإحالة (محلي فقط):",f.message)}),console.log("✅ تم حفظ رمز الإحالة:",t)}}catch(e){console.error("خطأ في معالجة رمز الإحالة:",e)}},[])}function LW(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"vid_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}function BW(e){try{const t=JSON.parse(localStorage.getItem("muth_ref_events")||"[]");t.push(e),t.length>100&&t.splice(0,t.length-100),localStorage.setItem("muth_ref_events",JSON.stringify(t))}catch(t){console.error("خطأ في تسجيل حدث الإحالة:",t)}}async function FW(e,t){return new URLSearchParams({ref:e,vid:t,ts:Date.now().toString()}),new Promise((i,a)=>{i({ok:!0,stub:!0})})}function $W(){RW();const[e,t]=ft.useState("home"),[i,a]=ft.useState(null),[f,v]=ft.useState(!1),[m,l]=ft.useState(null),[P,C]=ft.useState(wS.enabled),[z,O]=ft.useState(!1),[B,F]=ft.useState(!1),[X,Z]=ft.useState(null);ft.useEffect(()=>{const he=localStorage.getItem("muthammen_user");he&&(F(!0),Z(JSON.parse(he)))},[]);const U=async he=>{v(!0),l(null),a(null);try{let ve;P&&wS.enabled||(ve=await GO(he)),a(ve)}catch(ve){if(console.error("خطأ في التقييم:",ve),l(ve.message||"حدث خطأ أثناء التقييم. يرجى المحاولة مرة أخرى."),P)try{const Ie=await GO(he);a(Ie),l("تم استخدام المحرك المحلي بدلاً من GPT")}catch(Ie){console.error("فشل المحرك المحلي أيضاً:",Ie)}}finally{v(!1)}},re=()=>{a(null),l(null),window.scrollTo({top:0,behavior:"smooth"})},se=()=>{confirm("هل أنت متأكد من حذف سجل التقييمات؟")&&(zW(),alert("تم مسح السجل بنجاح"))},ne=NW(),ue=he=>{t(he),a(null),l(null),window.scrollTo({top:0,behavior:"smooth"})},J=he=>{F(!0),Z(he),t("dashboard")},ae=()=>{localStorage.removeItem("muthammen_user"),F(!1),Z(null),t("home")};return e==="login"?A.jsx(tW,{onLoginSuccess:J}):e==="dashboard"?B?A.jsx(rW,{onLogout:ae,navigateTo:ue}):(t("login"),null):e==="subscriptions"?A.jsxs(A.Fragment,{children:[A.jsx(zg,{currentPage:e,navigateTo:ue,isLoggedIn:B}),A.jsx(C3,{}),A.jsx(Ng,{})]}):e==="referrals"?A.jsxs(A.Fragment,{children:[A.jsx(zg,{currentPage:e,navigateTo:ue,isLoggedIn:B}),A.jsx(L3,{}),A.jsx(Ng,{})]}):e==="market"?A.jsxs(A.Fragment,{children:[A.jsx(zg,{currentPage:e,navigateTo:ue,isLoggedIn:B}),A.jsx(QX,{}),A.jsx(Ng,{})]}):e==="map"?A.jsxs(A.Fragment,{children:[A.jsx(zg,{currentPage:e,navigateTo:ue,isLoggedIn:B}),A.jsxs("div",{className:"container mx-auto px-4 py-12",children:[A.jsxs("div",{className:"text-center mb-12",children:[A.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-yellow-100 text-yellow-800 text-sm font-semibold mb-4",children:[A.jsx(Zv,{className:"w-4 h-4"}),A.jsx("span",{children:"قريبًا"})]}),A.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-4",children:"خريطة الوعي العقاري الأولى في المملكة 🇺🇦"}),A.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"استكشف الأسعار، الاتجاهات، والفرص في كل حي بتفاصيل غير مسبوقة"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[A.jsxs(nr,{className:"p-6",children:[A.jsx("div",{className:"p-3 rounded-xl bg-blue-100 w-fit mb-4",children:A.jsx(Zv,{className:"w-6 h-6 text-blue-600"})}),A.jsx("h3",{className:"font-bold text-lg mb-2",children:"خريطة تفاعلية للرياض"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"عرض جميع الأحياء مع معلومات تفصيلية عن الأسعار والمرافق"})]}),A.jsxs(nr,{className:"p-6",children:[A.jsx("div",{className:"p-3 rounded-xl bg-green-100 w-fit mb-4",children:A.jsx(sc,{className:"w-6 h-6 text-green-600"})}),A.jsx("h3",{className:"font-bold text-lg mb-2",children:"اتجاهات الأسعار"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"تتبع تغيرات الأسعار عبر الزمن واكتشف الفرص الاستثمارية"})]}),A.jsxs(nr,{className:"p-6",children:[A.jsx("div",{className:"p-3 rounded-xl bg-purple-100 w-fit mb-4",children:A.jsx(Zc,{className:"w-6 h-6 text-purple-600"})}),A.jsx("h3",{className:"font-bold text-lg mb-2",children:"إحصائيات تفصيلية"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"متوسط الأسعار، عدد العقارات، ومعدل النمو لكل حي"})]}),A.jsxs(nr,{className:"p-6",children:[A.jsx("div",{className:"p-3 rounded-xl bg-orange-100 w-fit mb-4",children:A.jsx(ld,{className:"w-6 h-6 text-orange-600"})}),A.jsx("h3",{className:"font-bold text-lg mb-2",children:"فلترة متقدمة"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"فلتر حسب نوع العقار، النطاق السعري، والمنطقة"})]}),A.jsxs(nr,{className:"p-6",children:[A.jsx("div",{className:"p-3 rounded-xl bg-pink-100 w-fit mb-4",children:A.jsx(Uu,{className:"w-6 h-6 text-pink-600"})}),A.jsx("h3",{className:"font-bold text-lg mb-2",children:"مقارنة الأحياء"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"قارن بين الأحياء لاتخاذ قرار مستنير"})]}),A.jsxs(nr,{className:"p-6",children:[A.jsx("div",{className:"p-3 rounded-xl bg-cyan-100 w-fit mb-4",children:A.jsx(gf,{className:"w-6 h-6 text-cyan-600"})}),A.jsx("h3",{className:"font-bold text-lg mb-2",children:"توصيات ذكية"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"اقتراحات مخصصة بناءً على احتياجاتك وميزانيتك"})]})]}),A.jsxs(nr,{className:"p-8 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:[A.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"لماذا خريطة مُثمّن؟"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold mb-2",children:"📍 فهم أعمق للسوق"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"الخريطة تعطيك نظرة شاملة على السوق العقاري في الرياض، مما يساعدك على فهم الاتجاهات والفرص."})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold mb-2",children:"📊 قرارات مستنيرة"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"باستخدام بيانات دقيقة وتحليلات متقدمة، يمكنك اتخاذ قرارات شراء أو استثمار أفضل."})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold mb-2",children:"⏱️ توفير الوقت"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"بدلاً من البحث في مواقع متعددة، احصل على جميع المعلومات في مكان واحد."})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold mb-2",children:"🔍 شفافية كاملة"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"بيانات حقيقية ومحدثة باستمرار لضمان أعلى مستوى من الدقة."})]})]}),A.jsx("div",{className:"text-center",children:A.jsxs(Sn,{size:"lg",className:"gap-2",onClick:()=>ue("home"),children:[A.jsx(Hc,{className:"w-5 h-5"}),"ابدأ بالتقييم الآن"]})})]})]}),A.jsx(Ng,{})]}):A.jsxs("div",{className:"app-container min-h-screen",children:[A.jsx(zg,{currentPage:e,navigateTo:ue,showSettings:z,setShowSettings:O,isLoggedIn:B}),z&&A.jsx("div",{className:"border-b border-border/50 bg-white",children:A.jsx("div",{className:"container mx-auto px-4 py-4",children:A.jsx(qW,{useGPT:P,setUseGPT:C,stats:ne,onClearHistory:se})})}),A.jsxs("main",{className:"container mx-auto px-4 py-8",children:[!i&&A.jsxs("div",{className:"text-center mb-12 space-y-4",children:[A.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-semibold mb-4",children:[A.jsx(Hc,{className:"w-4 h-4"}),A.jsx("span",{children:"كل عقار له قصة… ومثمّن يقرأها لك"})]}),A.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-balance",children:["اكتشف القيمة الحقيقية",A.jsx("br",{}),"لعقارك في دقائق"]}),A.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto text-balance",children:"ذكاء يفهم السوق — قبل ما يتحرك السوق"}),A.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg max-w-2xl mx-auto",children:A.jsxs("p",{className:"text-sm text-green-900",children:[A.jsx("strong",{children:"🇸🇦 النسخة التجريبية الوطنية"})," للمشاركة في هاكاثون روشن 2025 — مفتوحة مجانًا للعرض العام"]})}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-4xl mx-auto mt-8",children:[A.jsxs(nr,{className:"p-6 hover-lift",children:[A.jsx("div",{className:"p-3 rounded-xl bg-blue-100 w-fit mx-auto mb-3",children:A.jsx(gf,{className:"w-6 h-6 text-blue-600"})}),A.jsx("h3",{className:"font-bold mb-2",children:"ذكاء اصطناعي متقدم"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"كل تقييم جديد يجعل مثمّن أذكى من الأمس"})]}),A.jsxs(nr,{className:"p-6 hover-lift",children:[A.jsx("div",{className:"p-3 rounded-xl bg-green-100 w-fit mx-auto mb-3",children:A.jsx(mk,{className:"w-6 h-6 text-green-600"})}),A.jsx("h3",{className:"font-bold mb-2",children:"نتائج فورية"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"احصل على تقييم شامل في أقل من دقيقة"})]}),A.jsxs(nr,{className:"p-6 hover-lift",children:[A.jsx("div",{className:"p-3 rounded-xl bg-purple-100 w-fit mx-auto mb-3",children:A.jsx(sc,{className:"w-6 h-6 text-purple-600"})}),A.jsx("h3",{className:"font-bold mb-2",children:"دقة عالية"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"تحليل متعدد الطبقات لأكثر من 100 متغير"})]})]})]}),m&&A.jsx(nr,{className:"mb-6 p-4 border-2 border-amber-200 bg-amber-50",children:A.jsxs("div",{className:"flex items-start gap-3",children:[A.jsx(ld,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-amber-900 mb-1",children:"تنبيه"}),A.jsx("p",{className:"text-sm text-amber-800",children:m})]})]})}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[A.jsx("div",{className:i?"lg:sticky lg:top-24 lg:self-start":"",children:A.jsxs(nr,{className:"p-6 card-gradient",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(Uu,{className:"w-5 h-5 text-primary"}),A.jsx("h3",{className:"text-xl font-bold",children:"بيانات العقار"})]}),i&&A.jsxs(Sn,{variant:"outline",size:"sm",onClick:re,className:"gap-2",children:[A.jsx(o3,{className:"w-4 h-4"}),"تقييم جديد"]})]}),A.jsx(M3,{onSubmit:U,isLoading:f})]})}),i&&A.jsxs("div",{children:[A.jsx(P3,{result:i}),A.jsx(nr,{className:"mt-6 p-6 bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-200",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx(YR,{className:"w-6 h-6 text-purple-600 flex-shrink-0 mt-1"}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold mb-2",children:"🧠 الذكاء العقاري يتطور باستمرار"}),A.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"شاركنا تجربتك وساهم في تحسين دقة التقييم الوطني 🇸🇦"}),A.jsx(Sn,{variant:"outline",size:"sm",disabled:!0,children:"قيّم التجربة (قريباً)"})]})]})}),A.jsx(nr,{className:"mt-6 p-6 bg-gradient-to-br from-blue-50 to-cyan-50 border-2 border-blue-200",children:A.jsxs("div",{className:"text-center",children:[A.jsx("h3",{className:"font-bold text-lg mb-2",children:"🔓 تحليل الحي الكامل، وأفضل مناطق السكن، والتكتلات السعريّة"}),A.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"قريبًا في خطة Smart Plan"}),A.jsx(Sn,{variant:"default",onClick:()=>ue("subscriptions"),children:"اكتشف الباقات"})]})})]})]}),!i&&A.jsxs(A.Fragment,{children:[A.jsxs(nr,{className:"mt-12 p-8 bg-gradient-to-br from-primary/5 to-purple-50 border-2 border-primary/20",children:[A.jsx("h3",{className:"text-2xl font-bold mb-4 text-center",children:"كيف يعمل مُثمّن؟"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mt-6",children:[A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"1"}),A.jsx("h4",{className:"font-semibold mb-2",children:"أدخل البيانات"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"ابدأ بالمعلومات الأساسية وأضف التفاصيل"})]}),A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"2"}),A.jsx("h4",{className:"font-semibold mb-2",children:"التحليل الذكي"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"المحرك يحلل جميع العوامل المؤثرة"})]}),A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"3"}),A.jsx("h4",{className:"font-semibold mb-2",children:"التقييم الدقيق"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"احصل على السعر ونطاق التقييم"})]}),A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"4"}),A.jsx("h4",{className:"font-semibold mb-2",children:"التوصيات"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"نصائح لتحسين قيمة العقار"})]})]})]}),A.jsxs(nr,{className:"mt-8 p-8 bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-200 text-center",children:[A.jsx("h3",{className:"text-3xl font-black mb-3",children:"قريبًا: خريطة الوعي العقاري الأولى في المملكة 🇸🇦"}),A.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"استكشف الأسعار، الاتجاهات، والفرص في كل حي بتفاصيل غير مسبوقة"}),A.jsxs(Sn,{size:"lg",onClick:()=>ue("referrals"),className:"gap-2",children:[A.jsx(bf,{className:"w-5 h-5"}),"افتحها بدعمك المبكر"]})]})]})]}),A.jsx(Ng,{})]})}function zg({currentPage:e,navigateTo:t,showSettings:i,setShowSettings:a,isLoggedIn:f}){const v=[{id:"home",label:"التقييم",icon:Hg},{id:"map",label:"الخريطة",icon:Zv},{id:"market",label:"دراسة السوق",icon:Zc},{id:"subscriptions",label:"الباقات",icon:hk},{id:"referrals",label:"الإحالات",icon:bf}];return f?v.push({id:"dashboard",label:"لوحة التحكم",icon:RR}):v.push({id:"login",label:"تسجيل الدخول",icon:dk}),A.jsx("header",{className:"border-b border-border/50 bg-white/80 backdrop-blur-sm sticky top-0 z-50",children:A.jsxs("div",{className:"container mx-auto px-4 py-4",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t("home"),children:[A.jsx("div",{className:"p-2 rounded-xl primary-gradient",children:A.jsx(Of,{className:"w-8 h-8 text-white"})}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-2xl font-black text-foreground",children:"مُثمّن"}),A.jsx("p",{className:"text-xs text-muted-foreground",children:"تقييم عقاري ذكي بالذكاء الاصطناعي"})]})]}),A.jsx("nav",{className:"hidden md:flex items-center gap-2",children:v.map(m=>{const l=m.icon;return A.jsxs(Sn,{variant:e===m.id?"default":"ghost",size:"sm",onClick:()=>t(m.id),className:"gap-2",children:[A.jsx(l,{className:"w-4 h-4"}),m.label]},m.id)})}),e==="home"&&a&&A.jsxs(Sn,{variant:"outline",size:"sm",onClick:()=>a(!i),className:"gap-2",children:[A.jsx(Vv,{className:"w-4 h-4"}),"الإعدادات"]})]}),A.jsx("nav",{className:"md:hidden flex items-center gap-2 mt-4 overflow-x-auto",children:v.map(m=>{const l=m.icon;return A.jsxs(Sn,{variant:e===m.id?"default":"outline",size:"sm",onClick:()=>t(m.id),className:"gap-2 flex-shrink-0",children:[A.jsx(l,{className:"w-4 h-4"}),m.label]},m.id)})})]})})}function qW({useGPT:e,setUseGPT:t,stats:i,onClearHistory:a}){return A.jsxs(nr,{className:"p-4 space-y-4 animate-slide-in",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(gf,{className:"w-5 h-5 text-primary"}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold",children:"محرك التقييم"}),A.jsx("p",{className:"text-xs text-muted-foreground",children:"المحرك المحلي فقط"})]})]}),wS.enabled]}),A.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[A.jsx("p",{className:"text-sm text-blue-900 mb-2",children:A.jsx("strong",{children:"لتفعيل الذكاء الاصطناعي المتقدم:"})}),A.jsxs("ol",{className:"text-xs text-blue-800 space-y-1 mr-4",children:[A.jsxs("li",{children:["1. افتح ملف ",A.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"src/lib/apiConfig.js"})]}),A.jsxs("li",{children:["2. ضع API Key الخاص بك في ",A.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"API_CONFIG.apiKey"})]}),A.jsx("li",{children:"3. احفظ الملف وأعد تشغيل التطبيق"})]})]}),A.jsxs("div",{className:"pt-3 border-t border-border",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("h3",{className:"font-semibold text-sm",children:"إحصائيات الاستخدام"}),A.jsx(Sn,{variant:"ghost",size:"sm",onClick:a,className:"text-xs",children:"مسح السجل"})]}),A.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[A.jsxs("div",{className:"p-2 bg-muted rounded-lg",children:[A.jsx("p",{className:"text-xs text-muted-foreground",children:"إجمالي التقييمات"}),A.jsx("p",{className:"text-lg font-bold",children:i.totalEvaluations})]}),A.jsxs("div",{className:"p-2 bg-muted rounded-lg",children:[A.jsx("p",{className:"text-xs text-muted-foreground",children:"تقييمات GPT"}),A.jsx("p",{className:"text-lg font-bold text-primary",children:i.gptEvaluations})]}),A.jsxs("div",{className:"p-2 bg-muted rounded-lg",children:[A.jsx("p",{className:"text-xs text-muted-foreground",children:"متوسط الثقة"}),A.jsxs("p",{className:"text-lg font-bold text-green-600",children:[i.averageConfidence,"%"]})]})]})]})]})}function Ng(){return A.jsx("footer",{className:"border-t border-border/50 bg-white/80 backdrop-blur-sm mt-16",children:A.jsxs("div",{className:"container mx-auto px-4 py-8",children:[A.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[A.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[A.jsx(Of,{className:"w-4 h-4"}),A.jsx("span",{children:"© جميع الحقوق محفوظة 2025 لمنصّة مثمّن الذكاء العقاري السعودي"})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:A.jsx(kR,{className:"w-5 h-5"})}),A.jsx("a",{href:"mailto:info@mothammen.sa",className:"text-muted-foreground hover:text-primary transition-colors",children:A.jsx(fk,{className:"w-5 h-5"})})]})]}),A.jsx("div",{className:"mt-4 text-center text-xs text-muted-foreground",children:A.jsx("p",{children:"💡 هذا التطبيق يستخدم الذكاء الاصطناعي لتقديم تقييمات تقديرية. للحصول على تقييم رسمي معتمد، يُنصح بالتواصل مع مقيّم عقاري مرخّص."})})]})})}Vz.createRoot(document.getElementById("root")).render(A.jsx(ft.StrictMode,{children:A.jsx($W,{})}));
