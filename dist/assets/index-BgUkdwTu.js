function CD(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const d in a)if(d!=="default"&&!(d in e)){const y=Object.getOwnPropertyDescriptor(a,d);y&&Object.defineProperty(e,d,y.get?y:{enumerable:!0,get:()=>a[d]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))a(d);new MutationObserver(d=>{for(const y of d)if(y.type==="childList")for(const m of y.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function i(d){const y={};return d.integrity&&(y.integrity=d.integrity),d.referrerPolicy&&(y.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?y.credentials="include":d.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function a(d){if(d.ep)return;d.ep=!0;const y=i(d);fetch(d.href,y)}})();var Dv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var r0={exports:{}},Cg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tA;function OD(){if(tA)return Cg;tA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(a,d,y){var m=null;if(y!==void 0&&(m=""+y),d.key!==void 0&&(m=""+d.key),"key"in d){y={};for(var l in d)l!=="key"&&(y[l]=d[l])}else y=d;return d=y.ref,{$$typeof:e,type:a,key:m,ref:d!==void 0?d:null,props:y}}return Cg.Fragment=t,Cg.jsx=i,Cg.jsxs=i,Cg}var rA;function ID(){return rA||(rA=1,r0.exports=OD()),r0.exports}var x=ID(),n0={exports:{}},Rr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nA;function kD(){if(nA)return Rr;nA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),m=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),C=Symbol.iterator;function L(xe){return xe===null||typeof xe!="object"?null:(xe=C&&xe[C]||xe["@@iterator"],typeof xe=="function"?xe:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,G={};function q(xe,We,lt){this.props=xe,this.context=We,this.refs=G,this.updater=lt||F}q.prototype.isReactComponent={},q.prototype.setState=function(xe,We){if(typeof xe!="object"&&typeof xe!="function"&&xe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,xe,We,"setState")},q.prototype.forceUpdate=function(xe){this.updater.enqueueForceUpdate(this,xe,"forceUpdate")};function re(){}re.prototype=q.prototype;function ie(xe,We,lt){this.props=xe,this.context=We,this.refs=G,this.updater=lt||F}var ne=ie.prototype=new re;ne.constructor=ie,H(ne,q.prototype),ne.isPureReactComponent=!0;var ce=Array.isArray,J={H:null,A:null,T:null,S:null,V:null},ee=Object.prototype.hasOwnProperty;function he(xe,We,lt,ct,jt,Gt){return lt=Gt.ref,{$$typeof:e,type:xe,key:We,ref:lt!==void 0?lt:null,props:Gt}}function ge(xe,We){return he(xe.type,We,void 0,void 0,void 0,xe.props)}function Oe(xe){return typeof xe=="object"&&xe!==null&&xe.$$typeof===e}function at(xe){var We={"=":"=0",":":"=2"};return"$"+xe.replace(/[=:]/g,function(lt){return We[lt]})}var ke=/\/+/g;function qe(xe,We){return typeof xe=="object"&&xe!==null&&xe.key!=null?at(""+xe.key):We.toString(36)}function et(){}function st(xe){switch(xe.status){case"fulfilled":return xe.value;case"rejected":throw xe.reason;default:switch(typeof xe.status=="string"?xe.then(et,et):(xe.status="pending",xe.then(function(We){xe.status==="pending"&&(xe.status="fulfilled",xe.value=We)},function(We){xe.status==="pending"&&(xe.status="rejected",xe.reason=We)})),xe.status){case"fulfilled":return xe.value;case"rejected":throw xe.reason}}throw xe}function rt(xe,We,lt,ct,jt){var Gt=typeof xe;(Gt==="undefined"||Gt==="boolean")&&(xe=null);var zt=!1;if(xe===null)zt=!0;else switch(Gt){case"bigint":case"string":case"number":zt=!0;break;case"object":switch(xe.$$typeof){case e:case t:zt=!0;break;case N:return zt=xe._init,rt(zt(xe._payload),We,lt,ct,jt)}}if(zt)return jt=jt(xe),zt=ct===""?"."+qe(xe,0):ct,ce(jt)?(lt="",zt!=null&&(lt=zt.replace(ke,"$&/")+"/"),rt(jt,We,lt,"",function(Ot){return Ot})):jt!=null&&(Oe(jt)&&(jt=ge(jt,lt+(jt.key==null||xe&&xe.key===jt.key?"":(""+jt.key).replace(ke,"$&/")+"/")+zt)),We.push(jt)),1;zt=0;var yr=ct===""?".":ct+":";if(ce(xe))for(var ar=0;ar<xe.length;ar++)ct=xe[ar],Gt=yr+qe(ct,ar),zt+=rt(ct,We,lt,Gt,jt);else if(ar=L(xe),typeof ar=="function")for(xe=ar.call(xe),ar=0;!(ct=xe.next()).done;)ct=ct.value,Gt=yr+qe(ct,ar++),zt+=rt(ct,We,lt,Gt,jt);else if(Gt==="object"){if(typeof xe.then=="function")return rt(st(xe),We,lt,ct,jt);throw We=String(xe),Error("Objects are not valid as a React child (found: "+(We==="[object Object]"?"object with keys {"+Object.keys(xe).join(", ")+"}":We)+"). If you meant to render a collection of children, use an array instead.")}return zt}function Te(xe,We,lt){if(xe==null)return xe;var ct=[],jt=0;return rt(xe,ct,"","",function(Gt){return We.call(lt,Gt,jt++)}),ct}function Ge(xe){if(xe._status===-1){var We=xe._result;We=We(),We.then(function(lt){(xe._status===0||xe._status===-1)&&(xe._status=1,xe._result=lt)},function(lt){(xe._status===0||xe._status===-1)&&(xe._status=2,xe._result=lt)}),xe._status===-1&&(xe._status=0,xe._result=We)}if(xe._status===1)return xe._result.default;throw xe._result}var Ze=typeof reportError=="function"?reportError:function(xe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var We=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof xe=="object"&&xe!==null&&typeof xe.message=="string"?String(xe.message):String(xe),error:xe});if(!window.dispatchEvent(We))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",xe);return}console.error(xe)};function dt(){}return Rr.Children={map:Te,forEach:function(xe,We,lt){Te(xe,function(){We.apply(this,arguments)},lt)},count:function(xe){var We=0;return Te(xe,function(){We++}),We},toArray:function(xe){return Te(xe,function(We){return We})||[]},only:function(xe){if(!Oe(xe))throw Error("React.Children.only expected to receive a single React element child.");return xe}},Rr.Component=q,Rr.Fragment=i,Rr.Profiler=d,Rr.PureComponent=ie,Rr.StrictMode=a,Rr.Suspense=M,Rr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,Rr.__COMPILER_RUNTIME={__proto__:null,c:function(xe){return J.H.useMemoCache(xe)}},Rr.cache=function(xe){return function(){return xe.apply(null,arguments)}},Rr.cloneElement=function(xe,We,lt){if(xe==null)throw Error("The argument must be a React element, but you passed "+xe+".");var ct=H({},xe.props),jt=xe.key,Gt=void 0;if(We!=null)for(zt in We.ref!==void 0&&(Gt=void 0),We.key!==void 0&&(jt=""+We.key),We)!ee.call(We,zt)||zt==="key"||zt==="__self"||zt==="__source"||zt==="ref"&&We.ref===void 0||(ct[zt]=We[zt]);var zt=arguments.length-2;if(zt===1)ct.children=lt;else if(1<zt){for(var yr=Array(zt),ar=0;ar<zt;ar++)yr[ar]=arguments[ar+2];ct.children=yr}return he(xe.type,jt,void 0,void 0,Gt,ct)},Rr.createContext=function(xe){return xe={$$typeof:m,_currentValue:xe,_currentValue2:xe,_threadCount:0,Provider:null,Consumer:null},xe.Provider=xe,xe.Consumer={$$typeof:y,_context:xe},xe},Rr.createElement=function(xe,We,lt){var ct,jt={},Gt=null;if(We!=null)for(ct in We.key!==void 0&&(Gt=""+We.key),We)ee.call(We,ct)&&ct!=="key"&&ct!=="__self"&&ct!=="__source"&&(jt[ct]=We[ct]);var zt=arguments.length-2;if(zt===1)jt.children=lt;else if(1<zt){for(var yr=Array(zt),ar=0;ar<zt;ar++)yr[ar]=arguments[ar+2];jt.children=yr}if(xe&&xe.defaultProps)for(ct in zt=xe.defaultProps,zt)jt[ct]===void 0&&(jt[ct]=zt[ct]);return he(xe,Gt,void 0,void 0,null,jt)},Rr.createRef=function(){return{current:null}},Rr.forwardRef=function(xe){return{$$typeof:l,render:xe}},Rr.isValidElement=Oe,Rr.lazy=function(xe){return{$$typeof:N,_payload:{_status:-1,_result:xe},_init:Ge}},Rr.memo=function(xe,We){return{$$typeof:E,type:xe,compare:We===void 0?null:We}},Rr.startTransition=function(xe){var We=J.T,lt={};J.T=lt;try{var ct=xe(),jt=J.S;jt!==null&&jt(lt,ct),typeof ct=="object"&&ct!==null&&typeof ct.then=="function"&&ct.then(dt,Ze)}catch(Gt){Ze(Gt)}finally{J.T=We}},Rr.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},Rr.use=function(xe){return J.H.use(xe)},Rr.useActionState=function(xe,We,lt){return J.H.useActionState(xe,We,lt)},Rr.useCallback=function(xe,We){return J.H.useCallback(xe,We)},Rr.useContext=function(xe){return J.H.useContext(xe)},Rr.useDebugValue=function(){},Rr.useDeferredValue=function(xe,We){return J.H.useDeferredValue(xe,We)},Rr.useEffect=function(xe,We,lt){var ct=J.H;if(typeof lt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ct.useEffect(xe,We)},Rr.useId=function(){return J.H.useId()},Rr.useImperativeHandle=function(xe,We,lt){return J.H.useImperativeHandle(xe,We,lt)},Rr.useInsertionEffect=function(xe,We){return J.H.useInsertionEffect(xe,We)},Rr.useLayoutEffect=function(xe,We){return J.H.useLayoutEffect(xe,We)},Rr.useMemo=function(xe,We){return J.H.useMemo(xe,We)},Rr.useOptimistic=function(xe,We){return J.H.useOptimistic(xe,We)},Rr.useReducer=function(xe,We,lt){return J.H.useReducer(xe,We,lt)},Rr.useRef=function(xe){return J.H.useRef(xe)},Rr.useState=function(xe){return J.H.useState(xe)},Rr.useSyncExternalStore=function(xe,We,lt){return J.H.useSyncExternalStore(xe,We,lt)},Rr.useTransition=function(){return J.H.useTransition()},Rr.version="19.1.0",Rr}var iA;function US(){return iA||(iA=1,n0.exports=kD()),n0.exports}var Fe=US();const $e=Bn(Fe),yI=CD({__proto__:null,default:$e},[Fe]);var i0={exports:{}},Og={},a0={exports:{}},o0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aA;function ND(){return aA||(aA=1,function(e){function t(Te,Ge){var Ze=Te.length;Te.push(Ge);e:for(;0<Ze;){var dt=Ze-1>>>1,xe=Te[dt];if(0<d(xe,Ge))Te[dt]=Ge,Te[Ze]=xe,Ze=dt;else break e}}function i(Te){return Te.length===0?null:Te[0]}function a(Te){if(Te.length===0)return null;var Ge=Te[0],Ze=Te.pop();if(Ze!==Ge){Te[0]=Ze;e:for(var dt=0,xe=Te.length,We=xe>>>1;dt<We;){var lt=2*(dt+1)-1,ct=Te[lt],jt=lt+1,Gt=Te[jt];if(0>d(ct,Ze))jt<xe&&0>d(Gt,ct)?(Te[dt]=Gt,Te[jt]=Ze,dt=jt):(Te[dt]=ct,Te[lt]=Ze,dt=lt);else if(jt<xe&&0>d(Gt,Ze))Te[dt]=Gt,Te[jt]=Ze,dt=jt;else break e}}return Ge}function d(Te,Ge){var Ze=Te.sortIndex-Ge.sortIndex;return Ze!==0?Ze:Te.id-Ge.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var y=performance;e.unstable_now=function(){return y.now()}}else{var m=Date,l=m.now();e.unstable_now=function(){return m.now()-l}}var M=[],E=[],N=1,C=null,L=3,F=!1,H=!1,G=!1,q=!1,re=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function ce(Te){for(var Ge=i(E);Ge!==null;){if(Ge.callback===null)a(E);else if(Ge.startTime<=Te)a(E),Ge.sortIndex=Ge.expirationTime,t(M,Ge);else break;Ge=i(E)}}function J(Te){if(G=!1,ce(Te),!H)if(i(M)!==null)H=!0,ee||(ee=!0,qe());else{var Ge=i(E);Ge!==null&&rt(J,Ge.startTime-Te)}}var ee=!1,he=-1,ge=5,Oe=-1;function at(){return q?!0:!(e.unstable_now()-Oe<ge)}function ke(){if(q=!1,ee){var Te=e.unstable_now();Oe=Te;var Ge=!0;try{e:{H=!1,G&&(G=!1,ie(he),he=-1),F=!0;var Ze=L;try{t:{for(ce(Te),C=i(M);C!==null&&!(C.expirationTime>Te&&at());){var dt=C.callback;if(typeof dt=="function"){C.callback=null,L=C.priorityLevel;var xe=dt(C.expirationTime<=Te);if(Te=e.unstable_now(),typeof xe=="function"){C.callback=xe,ce(Te),Ge=!0;break t}C===i(M)&&a(M),ce(Te)}else a(M);C=i(M)}if(C!==null)Ge=!0;else{var We=i(E);We!==null&&rt(J,We.startTime-Te),Ge=!1}}break e}finally{C=null,L=Ze,F=!1}Ge=void 0}}finally{Ge?qe():ee=!1}}}var qe;if(typeof ne=="function")qe=function(){ne(ke)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,st=et.port2;et.port1.onmessage=ke,qe=function(){st.postMessage(null)}}else qe=function(){re(ke,0)};function rt(Te,Ge){he=re(function(){Te(e.unstable_now())},Ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Te){Te.callback=null},e.unstable_forceFrameRate=function(Te){0>Te||125<Te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<Te?Math.floor(1e3/Te):5},e.unstable_getCurrentPriorityLevel=function(){return L},e.unstable_next=function(Te){switch(L){case 1:case 2:case 3:var Ge=3;break;default:Ge=L}var Ze=L;L=Ge;try{return Te()}finally{L=Ze}},e.unstable_requestPaint=function(){q=!0},e.unstable_runWithPriority=function(Te,Ge){switch(Te){case 1:case 2:case 3:case 4:case 5:break;default:Te=3}var Ze=L;L=Te;try{return Ge()}finally{L=Ze}},e.unstable_scheduleCallback=function(Te,Ge,Ze){var dt=e.unstable_now();switch(typeof Ze=="object"&&Ze!==null?(Ze=Ze.delay,Ze=typeof Ze=="number"&&0<Ze?dt+Ze:dt):Ze=dt,Te){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=Ze+xe,Te={id:N++,callback:Ge,priorityLevel:Te,startTime:Ze,expirationTime:xe,sortIndex:-1},Ze>dt?(Te.sortIndex=Ze,t(E,Te),i(M)===null&&Te===i(E)&&(G?(ie(he),he=-1):G=!0,rt(J,Ze-dt))):(Te.sortIndex=xe,t(M,Te),H||F||(H=!0,ee||(ee=!0,qe()))),Te},e.unstable_shouldYield=at,e.unstable_wrapCallback=function(Te){var Ge=L;return function(){var Ze=L;L=Ge;try{return Te.apply(this,arguments)}finally{L=Ze}}}}(o0)),o0}var oA;function RD(){return oA||(oA=1,a0.exports=ND()),a0.exports}var s0={exports:{}},io={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA;function DD(){if(sA)return io;sA=1;var e=US();function t(M){var E="https://react.dev/errors/"+M;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)E+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+M+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},d=Symbol.for("react.portal");function y(M,E,N){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:C==null?null:""+C,children:M,containerInfo:E,implementation:N}}var m=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(M,E){if(M==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return io.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,io.createPortal=function(M,E){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(t(299));return y(M,E,null,N)},io.flushSync=function(M){var E=m.T,N=a.p;try{if(m.T=null,a.p=2,M)return M()}finally{m.T=E,a.p=N,a.d.f()}},io.preconnect=function(M,E){typeof M=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,a.d.C(M,E))},io.prefetchDNS=function(M){typeof M=="string"&&a.d.D(M)},io.preinit=function(M,E){if(typeof M=="string"&&E&&typeof E.as=="string"){var N=E.as,C=l(N,E.crossOrigin),L=typeof E.integrity=="string"?E.integrity:void 0,F=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;N==="style"?a.d.S(M,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:C,integrity:L,fetchPriority:F}):N==="script"&&a.d.X(M,{crossOrigin:C,integrity:L,fetchPriority:F,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},io.preinitModule=function(M,E){if(typeof M=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var N=l(E.as,E.crossOrigin);a.d.M(M,{crossOrigin:N,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&a.d.M(M)},io.preload=function(M,E){if(typeof M=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var N=E.as,C=l(N,E.crossOrigin);a.d.L(M,N,{crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},io.preloadModule=function(M,E){if(typeof M=="string")if(E){var N=l(E.as,E.crossOrigin);a.d.m(M,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:N,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else a.d.m(M)},io.requestFormReset=function(M){a.d.r(M)},io.unstable_batchedUpdates=function(M,E){return M(E)},io.useFormState=function(M,E,N){return m.H.useFormState(M,E,N)},io.useFormStatus=function(){return m.H.useHostTransitionStatus()},io.version="19.1.0",io}var lA;function vI(){if(lA)return s0.exports;lA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),s0.exports=DD(),s0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA;function zD(){if(cA)return Og;cA=1;var e=RD(),t=US(),i=vI();function a(s){var h="https://react.dev/errors/"+s;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+s+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function y(s){var h=s,g=s;if(s.alternate)for(;h.return;)h=h.return;else{s=h;do h=s,(h.flags&4098)!==0&&(g=h.return),s=h.return;while(s)}return h.tag===3?g:null}function m(s){if(s.tag===13){var h=s.memoizedState;if(h===null&&(s=s.alternate,s!==null&&(h=s.memoizedState)),h!==null)return h.dehydrated}return null}function l(s){if(y(s)!==s)throw Error(a(188))}function M(s){var h=s.alternate;if(!h){if(h=y(s),h===null)throw Error(a(188));return h!==s?null:s}for(var g=s,T=h;;){var O=g.return;if(O===null)break;var z=O.alternate;if(z===null){if(T=O.return,T!==null){g=T;continue}break}if(O.child===z.child){for(z=O.child;z;){if(z===g)return l(O),s;if(z===T)return l(O),h;z=z.sibling}throw Error(a(188))}if(g.return!==T.return)g=O,T=z;else{for(var Y=!1,ue=O.child;ue;){if(ue===g){Y=!0,g=O,T=z;break}if(ue===T){Y=!0,T=O,g=z;break}ue=ue.sibling}if(!Y){for(ue=z.child;ue;){if(ue===g){Y=!0,g=z,T=O;break}if(ue===T){Y=!0,T=z,g=O;break}ue=ue.sibling}if(!Y)throw Error(a(189))}}if(g.alternate!==T)throw Error(a(190))}if(g.tag!==3)throw Error(a(188));return g.stateNode.current===g?s:h}function E(s){var h=s.tag;if(h===5||h===26||h===27||h===6)return s;for(s=s.child;s!==null;){if(h=E(s),h!==null)return h;s=s.sibling}return null}var N=Object.assign,C=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),ie=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),Oe=Symbol.for("react.activity"),at=Symbol.for("react.memo_cache_sentinel"),ke=Symbol.iterator;function qe(s){return s===null||typeof s!="object"?null:(s=ke&&s[ke]||s["@@iterator"],typeof s=="function"?s:null)}var et=Symbol.for("react.client.reference");function st(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===et?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case H:return"Fragment";case q:return"Profiler";case G:return"StrictMode";case J:return"Suspense";case ee:return"SuspenseList";case Oe:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case F:return"Portal";case ne:return(s.displayName||"Context")+".Provider";case ie:return(s._context.displayName||"Context")+".Consumer";case ce:var h=s.render;return s=s.displayName,s||(s=h.displayName||h.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case he:return h=s.displayName||null,h!==null?h:st(s.type)||"Memo";case ge:h=s._payload,s=s._init;try{return st(s(h))}catch{}}return null}var rt=Array.isArray,Te=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ze={pending:!1,data:null,method:null,action:null},dt=[],xe=-1;function We(s){return{current:s}}function lt(s){0>xe||(s.current=dt[xe],dt[xe]=null,xe--)}function ct(s,h){xe++,dt[xe]=s.current,s.current=h}var jt=We(null),Gt=We(null),zt=We(null),yr=We(null);function ar(s,h){switch(ct(zt,h),ct(Gt,s),ct(jt,null),h.nodeType){case 9:case 11:s=(s=h.documentElement)&&(s=s.namespaceURI)?Sg(s):0;break;default:if(s=h.tagName,h=h.namespaceURI)h=Sg(h),s=nd(h,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}lt(jt),ct(jt,s)}function Ot(){lt(jt),lt(Gt),lt(zt)}function rr(s){s.memoizedState!==null&&ct(yr,s);var h=jt.current,g=nd(h,s.type);h!==g&&(ct(Gt,s),ct(jt,g))}function or(s){Gt.current===s&&(lt(jt),lt(Gt)),yr.current===s&&(lt(yr),w._currentValue=Ze)}var _t=Object.prototype.hasOwnProperty,fr=e.unstable_scheduleCallback,Jt=e.unstable_cancelCallback,Kr=e.unstable_shouldYield,rn=e.unstable_requestPaint,Qr=e.unstable_now,Ii=e.unstable_getCurrentPriorityLevel,Wn=e.unstable_ImmediatePriority,Fa=e.unstable_UserBlockingPriority,ki=e.unstable_NormalPriority,Ni=e.unstable_LowPriority,Yi=e.unstable_IdlePriority,Eo=e.log,Ps=e.unstable_setDisableYieldValue,Ri=null,Jn=null;function ci(s){if(typeof Eo=="function"&&Ps(s),Jn&&typeof Jn.setStrictMode=="function")try{Jn.setStrictMode(Ri,s)}catch{}}var Ne=Math.clz32?Math.clz32:fe,ae=Math.log,oe=Math.LN2;function fe(s){return s>>>=0,s===0?32:31-(ae(s)/oe|0)|0}var Se=256,Pe=4194304;function Re(s){var h=s&42;if(h!==0)return h;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Xe(s,h,g){var T=s.pendingLanes;if(T===0)return 0;var O=0,z=s.suspendedLanes,Y=s.pingedLanes;s=s.warmLanes;var ue=T&134217727;return ue!==0?(T=ue&~z,T!==0?O=Re(T):(Y&=ue,Y!==0?O=Re(Y):g||(g=ue&~s,g!==0&&(O=Re(g))))):(ue=T&~z,ue!==0?O=Re(ue):Y!==0?O=Re(Y):g||(g=T&~s,g!==0&&(O=Re(g)))),O===0?0:h!==0&&h!==O&&(h&z)===0&&(z=O&-O,g=h&-h,z>=g||z===32&&(g&4194048)!==0)?h:O}function Le(s,h){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&h)===0}function ht(s,h){switch(s){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function St(){var s=Se;return Se<<=1,(Se&4194048)===0&&(Se=256),s}function mt(){var s=Pe;return Pe<<=1,(Pe&62914560)===0&&(Pe=4194304),s}function $t(s){for(var h=[],g=0;31>g;g++)h.push(s);return h}function Ht(s,h){s.pendingLanes|=h,h!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ve(s,h,g,T,O,z){var Y=s.pendingLanes;s.pendingLanes=g,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=g,s.entangledLanes&=g,s.errorRecoveryDisabledLanes&=g,s.shellSuspendCounter=0;var ue=s.entanglements,je=s.expirationTimes,Ue=s.hiddenUpdates;for(g=Y&~g;0<g;){var pt=31-Ne(g),bt=1<<pt;ue[pt]=0,je[pt]=-1;var nt=Ue[pt];if(nt!==null)for(Ue[pt]=null,pt=0;pt<nt.length;pt++){var ut=nt[pt];ut!==null&&(ut.lane&=-536870913)}g&=~bt}T!==0&&Or(s,T,0),z!==0&&O===0&&s.tag!==0&&(s.suspendedLanes|=z&~(Y&~h))}function Or(s,h,g){s.pendingLanes|=h,s.suspendedLanes&=~h;var T=31-Ne(h);s.entangledLanes|=h,s.entanglements[T]=s.entanglements[T]|1073741824|g&4194090}function qr(s,h){var g=s.entangledLanes|=h;for(s=s.entanglements;g;){var T=31-Ne(g),O=1<<T;O&h|s[T]&h&&(s[T]|=h),g&=~O}}function qt(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Er(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ei(){var s=Ge.p;return s!==0?s:(s=window.event,s===void 0?32:Ce(s.type))}function ui(s,h){var g=Ge.p;try{return Ge.p=s,h()}finally{Ge.p=g}}var dn=Math.random().toString(36).slice(2),Hr="__reactFiber$"+dn,Ar="__reactProps$"+dn,Mn="__reactContainer$"+dn,Ur="__reactEvents$"+dn,wt="__reactListeners$"+dn,Co="__reactHandles$"+dn,ua="__reactResources$"+dn,Mi="__reactMarker$"+dn;function Yn(s){delete s[Hr],delete s[Ar],delete s[Ur],delete s[wt],delete s[Co]}function Et(s){var h=s[Hr];if(h)return h;for(var g=s.parentNode;g;){if(h=g[Mn]||g[Hr]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(s=Ag(s);s!==null;){if(g=s[Hr])return g;s=Ag(s)}return h}s=g,g=s.parentNode}return null}function mr(s){if(s=s[Hr]||s[Mn]){var h=s.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return s}return null}function pr(s){var h=s.tag;if(h===5||h===26||h===27||h===6)return s.stateNode;throw Error(a(33))}function vi(s){var h=s[ua];return h||(h=s[ua]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function fn(s){s[Mi]=!0}var uo=new Set,vr={};function $a(s,h){Oo(s,h),Oo(s+"Capture",h)}function Oo(s,h){for(vr[s]=h,s=0;s<h.length;s++)uo.add(h[s])}var pl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mc={},Io={};function ml(s){return _t.call(Io,s)?!0:_t.call(mc,s)?!1:pl.test(s)?Io[s]=!0:(mc[s]=!0,!1)}function jn(s,h,g){if(ml(h))if(g===null)s.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":s.removeAttribute(h);return;case"boolean":var T=h.toLowerCase().slice(0,5);if(T!=="data-"&&T!=="aria-"){s.removeAttribute(h);return}}s.setAttribute(h,""+g)}}function Di(s,h,g){if(g===null)s.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttribute(h,""+g)}}function Vr(s,h,g,T){if(T===null)s.removeAttribute(g);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(g);return}s.setAttributeNS(h,g,""+T)}}var gl,yl;function Es(s){if(gl===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);gl=h&&h[1]||"",yl=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gl+s+yl}var as=!1;function ho(s,h){if(!s||as)return"";as=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var T={DetermineComponentFrameRoot:function(){try{if(h){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(ut){var nt=ut}Reflect.construct(s,[],bt)}else{try{bt.call()}catch(ut){nt=ut}s.call(bt.prototype)}}else{try{throw Error()}catch(ut){nt=ut}(bt=s())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(ut){if(ut&&nt&&typeof ut.stack=="string")return[ut.stack,nt.stack]}return[null,null]}};T.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var O=Object.getOwnPropertyDescriptor(T.DetermineComponentFrameRoot,"name");O&&O.configurable&&Object.defineProperty(T.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=T.DetermineComponentFrameRoot(),Y=z[0],ue=z[1];if(Y&&ue){var je=Y.split(`
`),Ue=ue.split(`
`);for(O=T=0;T<je.length&&!je[T].includes("DetermineComponentFrameRoot");)T++;for(;O<Ue.length&&!Ue[O].includes("DetermineComponentFrameRoot");)O++;if(T===je.length||O===Ue.length)for(T=je.length-1,O=Ue.length-1;1<=T&&0<=O&&je[T]!==Ue[O];)O--;for(;1<=T&&0<=O;T--,O--)if(je[T]!==Ue[O]){if(T!==1||O!==1)do if(T--,O--,0>O||je[T]!==Ue[O]){var pt=`
`+je[T].replace(" at new "," at ");return s.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",s.displayName)),pt}while(1<=T&&0<=O);break}}}finally{as=!1,Error.prepareStackTrace=g}return(g=s?s.displayName||s.name:"")?Es(g):""}function qf(s){switch(s.tag){case 26:case 27:case 5:return Es(s.type);case 16:return Es("Lazy");case 13:return Es("Suspense");case 19:return Es("SuspenseList");case 0:case 15:return ho(s.type,!1);case 11:return ho(s.type.render,!1);case 1:return ho(s.type,!0);case 31:return Es("Activity");default:return""}}function oh(s){try{var h="";do h+=qf(s),s=s.return;while(s);return h}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function ja(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function vl(s){var h=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Uf(s){var h=vl(s)?"checked":"value",g=Object.getOwnPropertyDescriptor(s.constructor.prototype,h),T=""+s[h];if(!s.hasOwnProperty(h)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var O=g.get,z=g.set;return Object.defineProperty(s,h,{configurable:!0,get:function(){return O.call(this)},set:function(Y){T=""+Y,z.call(this,Y)}}),Object.defineProperty(s,h,{enumerable:g.enumerable}),{getValue:function(){return T},setValue:function(Y){T=""+Y},stopTracking:function(){s._valueTracker=null,delete s[h]}}}}function sh(s){s._valueTracker||(s._valueTracker=Uf(s))}function Vf(s){if(!s)return!1;var h=s._valueTracker;if(!h)return!0;var g=h.getValue(),T="";return s&&(T=vl(s)?s.checked?"true":"false":s.value),s=T,s!==g?(h.setValue(s),!0):!1}function lh(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Gf=/[\n"\\]/g;function ha(s){return s.replace(Gf,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function os(s,h,g,T,O,z,Y,ue){s.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?s.type=Y:s.removeAttribute("type"),h!=null?Y==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+ja(h)):s.value!==""+ja(h)&&(s.value=""+ja(h)):Y!=="submit"&&Y!=="reset"||s.removeAttribute("value"),h!=null?uh(s,Y,ja(h)):g!=null?uh(s,Y,ja(g)):T!=null&&s.removeAttribute("value"),O==null&&z!=null&&(s.defaultChecked=!!z),O!=null&&(s.checked=O&&typeof O!="function"&&typeof O!="symbol"),ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?s.name=""+ja(ue):s.removeAttribute("name")}function ch(s,h,g,T,O,z,Y,ue){if(z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(s.type=z),h!=null||g!=null){if(!(z!=="submit"&&z!=="reset"||h!=null))return;g=g!=null?""+ja(g):"",h=h!=null?""+ja(h):g,ue||h===s.value||(s.value=h),s.defaultValue=h}T=T??O,T=typeof T!="function"&&typeof T!="symbol"&&!!T,s.checked=ue?s.checked:!!T,s.defaultChecked=!!T,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(s.name=Y)}function uh(s,h,g){h==="number"&&lh(s.ownerDocument)===s||s.defaultValue===""+g||(s.defaultValue=""+g)}function qa(s,h,g,T){if(s=s.options,h){h={};for(var O=0;O<g.length;O++)h["$"+g[O]]=!0;for(g=0;g<s.length;g++)O=h.hasOwnProperty("$"+s[g].value),s[g].selected!==O&&(s[g].selected=O),O&&T&&(s[g].defaultSelected=!0)}else{for(g=""+ja(g),h=null,O=0;O<s.length;O++){if(s[O].value===g){s[O].selected=!0,T&&(s[O].defaultSelected=!0);return}h!==null||s[O].disabled||(h=s[O])}h!==null&&(h.selected=!0)}}function hh(s,h,g){if(h!=null&&(h=""+ja(h),h!==s.value&&(s.value=h),g==null)){s.defaultValue!==h&&(s.defaultValue=h);return}s.defaultValue=g!=null?""+ja(g):""}function Zf(s,h,g,T){if(h==null){if(T!=null){if(g!=null)throw Error(a(92));if(rt(T)){if(1<T.length)throw Error(a(93));T=T[0]}g=T}g==null&&(g=""),h=g}g=ja(h),s.defaultValue=g,T=s.textContent,T===g&&T!==""&&T!==null&&(s.value=T)}function ko(s,h){if(h){var g=s.firstChild;if(g&&g===s.lastChild&&g.nodeType===3){g.nodeValue=h;return}}s.textContent=h}var nu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dh(s,h,g){var T=h.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?T?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="":T?s.setProperty(h,g):typeof g!="number"||g===0||nu.has(h)?h==="float"?s.cssFloat=g:s[h]=(""+g).trim():s[h]=g+"px"}function zi(s,h,g){if(h!=null&&typeof h!="object")throw Error(a(62));if(s=s.style,g!=null){for(var T in g)!g.hasOwnProperty(T)||h!=null&&h.hasOwnProperty(T)||(T.indexOf("--")===0?s.setProperty(T,""):T==="float"?s.cssFloat="":s[T]="");for(var O in h)T=h[O],h.hasOwnProperty(O)&&g[O]!==T&&dh(s,O,T)}else for(var z in h)h.hasOwnProperty(z)&&dh(s,z,h[z])}function jr(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ki=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function No(s){return Ki.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var xr=null;function _l(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ro=null,fo=null;function Qi(s){var h=mr(s);if(h&&(s=h.stateNode)){var g=s[Ar]||null;e:switch(s=h.stateNode,h.type){case"input":if(os(s,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),h=g.name,g.type==="radio"&&h!=null){for(g=s;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+ha(""+h)+'"][type="radio"]'),h=0;h<g.length;h++){var T=g[h];if(T!==s&&T.form===s.form){var O=T[Ar]||null;if(!O)throw Error(a(90));os(T,O.value,O.defaultValue,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name)}}for(h=0;h<g.length;h++)T=g[h],T.form===s.form&&Vf(T)}break e;case"textarea":hh(s,g.value,g.defaultValue);break e;case"select":h=g.value,h!=null&&qa(s,!!g.multiple,h,!1)}}}var hi=!1;function di(s,h,g){if(hi)return s(h,g);hi=!0;try{var T=s(h);return T}finally{if(hi=!1,(Ro!==null||fo!==null)&&(vp(),Ro&&(h=Ro,s=fo,fo=Ro=null,Qi(h),s)))for(h=0;h<s.length;h++)Qi(s[h])}}function Kn(s,h){var g=s.stateNode;if(g===null)return null;var T=g[Ar]||null;if(T===null)return null;g=T[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(s=s.type,T=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!T;break e;default:s=!1}if(s)return null;if(g&&typeof g!="function")throw Error(a(231,h,typeof g));return g}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cs=!1;if(Fr)try{var fi={};Object.defineProperty(fi,"passive",{get:function(){Cs=!0}}),window.addEventListener("test",fi,fi),window.removeEventListener("test",fi,fi)}catch{Cs=!1}var ti=null,Li=null,Os=null;function nn(){if(Os)return Os;var s,h=Li,g=h.length,T,O="value"in ti?ti.value:ti.textContent,z=O.length;for(s=0;s<g&&h[s]===O[s];s++);var Y=g-s;for(T=1;T<=Y&&h[g-T]===O[z-T];T++);return Os=O.slice(s,1<T?1-T:void 0)}function vn(s){var h=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&h===13&&(s=13)):s=h,s===10&&(s=13),32<=s||s===13?s:0}function br(){return!0}function ur(){return!1}function pi(s){function h(g,T,O,z,Y){this._reactName=g,this._targetInst=O,this.type=T,this.nativeEvent=z,this.target=Y,this.currentTarget=null;for(var ue in s)s.hasOwnProperty(ue)&&(g=s[ue],this[ue]=g?g(z):z[ue]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?br:ur,this.isPropagationStopped=ur,this}return N(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),h}var hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=pi(hr),ri=N({},hr,{view:0,detail:0}),wd=pi(ri),bl,wl,Do,Is=N({},ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:da,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Do&&(Do&&s.type==="mousemove"?(bl=s.screenX-Do.screenX,wl=s.screenY-Do.screenY):wl=bl=0,Do=s),bl)},movementY:function(s){return"movementY"in s?s.movementY:wl}}),fh=pi(Is),ph=N({},Is,{dataTransfer:0}),iu=pi(ph),zo=N({},ri,{relatedTarget:0}),ni=pi(zo),Sl=N({},hr,{animationName:0,elapsedTime:0,pseudoElement:0}),au=pi(Sl),ks=N({},hr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),_i=pi(ks),mh=N({},hr,{data:0}),ou=pi(mh),Hf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yc(s){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(s):(s=mi[s])?!!h[s]:!1}function da(){return yc}var gh=N({},ri,{key:function(s){if(s.key){var h=Hf[s.key]||s.key;if(h!=="Unidentified")return h}return s.type==="keypress"?(s=vn(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Lm[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:da,charCode:function(s){return s.type==="keypress"?vn(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?vn(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Sd=pi(gh),su=N({},Is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lo=pi(su),po=N({},ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:da}),Xf=pi(po),yh=N({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bm=pi(yh),Td=N({},Is,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Fm=pi(Td),vh=N({},hr,{newState:0,oldState:0}),Ad=pi(vh),_h=[9,13,27,32],Ns=Fr&&"CompositionEvent"in window,Tl=null;Fr&&"documentMode"in document&&(Tl=document.documentMode);var mo=Fr&&"TextEvent"in window&&!Tl,Md=Fr&&(!Ns||Tl&&8<Tl&&11>=Tl),xh=" ",Al=!1;function vc(s,h){switch(s){case"keyup":return _h.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wf(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ss=!1;function $m(s,h){switch(s){case"compositionend":return Wf(h);case"keypress":return h.which!==32?null:(Al=!0,xh);case"textInput":return s=h.data,s===xh&&Al?null:s;default:return null}}function _c(s,h){if(ss)return s==="compositionend"||!Ns&&vc(s,h)?(s=nn(),Os=Li=ti=null,ss=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Md&&h.locale!=="ko"?null:h.data;default:return null}}var Yf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bh(s){var h=s&&s.nodeName&&s.nodeName.toLowerCase();return h==="input"?!!Yf[s.type]:h==="textarea"}function jd(s,h,g,T){Ro?fo?fo.push(T):fo=[T]:Ro=T,h=Ru(h,"onChange"),0<h.length&&(g=new xl("onChange","change",null,g,T),s.push({event:g,listeners:h}))}var xc=null,Ml=null;function Kf(s){wv(s,0)}function lu(s){var h=pr(s);if(Vf(h))return s}function bc(s,h){if(s==="change")return h}var Pd=!1;if(Fr){var ls;if(Fr){var wh="oninput"in document;if(!wh){var Ed=document.createElement("div");Ed.setAttribute("oninput","return;"),wh=typeof Ed.oninput=="function"}ls=wh}else ls=!1;Pd=ls&&(!document.documentMode||9<document.documentMode)}function Rs(){xc&&(xc.detachEvent("onpropertychange",Cd),Ml=xc=null)}function Cd(s){if(s.propertyName==="value"&&lu(Ml)){var h=[];jd(h,Ml,s,_l(s)),di(Kf,h)}}function Sh(s,h,g){s==="focusin"?(Rs(),xc=h,Ml=g,xc.attachEvent("onpropertychange",Cd)):s==="focusout"&&Rs()}function qm(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return lu(Ml)}function Qf(s,h){if(s==="click")return lu(h)}function Od(s,h){if(s==="input"||s==="change")return lu(h)}function Jf(s,h){return s===h&&(s!==0||1/s===1/h)||s!==s&&h!==h}var fa=typeof Object.is=="function"?Object.is:Jf;function jl(s,h){if(fa(s,h))return!0;if(typeof s!="object"||s===null||typeof h!="object"||h===null)return!1;var g=Object.keys(s),T=Object.keys(h);if(g.length!==T.length)return!1;for(T=0;T<g.length;T++){var O=g[T];if(!_t.call(h,O)||!fa(s[O],h[O]))return!1}return!0}function Th(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function cu(s,h){var g=Th(s);s=0;for(var T;g;){if(g.nodeType===3){if(T=s+g.textContent.length,s<=h&&T>=h)return{node:g,offset:h-s};s=T}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Th(g)}}function Bo(s,h){return s&&h?s===h?!0:s&&s.nodeType===3?!1:h&&h.nodeType===3?Bo(s,h.parentNode):"contains"in s?s.contains(h):s.compareDocumentPosition?!!(s.compareDocumentPosition(h)&16):!1:!1}function Ah(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var h=lh(s.document);h instanceof s.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)s=h.contentWindow;else break;h=lh(s.document)}return h}function uu(s){var h=s&&s.nodeName&&s.nodeName.toLowerCase();return h&&(h==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||h==="textarea"||s.contentEditable==="true")}var $r=Fr&&"documentMode"in document&&11>=document.documentMode,Pl=null,hu=null,go=null,du=!1;function ep(s,h,g){var T=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;du||Pl==null||Pl!==lh(T)||(T=Pl,"selectionStart"in T&&uu(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),go&&jl(go,T)||(go=T,T=Ru(hu,"onSelect"),0<T.length&&(h=new xl("onSelect","select",null,h,g),s.push({event:h,listeners:T}),h.target=Pl)))}function El(s,h){var g={};return g[s.toLowerCase()]=h.toLowerCase(),g["Webkit"+s]="webkit"+h,g["Moz"+s]="moz"+h,g}var wc={animationend:El("Animation","AnimationEnd"),animationiteration:El("Animation","AnimationIteration"),animationstart:El("Animation","AnimationStart"),transitionrun:El("Transition","TransitionRun"),transitionstart:El("Transition","TransitionStart"),transitioncancel:El("Transition","TransitionCancel"),transitionend:El("Transition","TransitionEnd")},Id={},kd={};Fr&&(kd=document.createElement("div").style,"AnimationEvent"in window||(delete wc.animationend.animation,delete wc.animationiteration.animation,delete wc.animationstart.animation),"TransitionEvent"in window||delete wc.transitionend.transition);function Cl(s){if(Id[s])return Id[s];if(!wc[s])return s;var h=wc[s],g;for(g in h)if(h.hasOwnProperty(g)&&g in kd)return Id[s]=h[g];return s}var Nd=Cl("animationend"),fu=Cl("animationiteration"),pu=Cl("animationstart"),Mh=Cl("transitionrun"),Rd=Cl("transitionstart"),Ol=Cl("transitioncancel"),Sc=Cl("transitionend"),Il=new Map,pa="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pa.push("scrollEnd");function Ua(s,h){Il.set(s,h),$a(h,[s])}var Dd=new WeakMap;function ma(s,h){if(typeof s=="object"&&s!==null){var g=Dd.get(s);return g!==void 0?g:(h={value:s,source:h,stack:oh(h)},Dd.set(s,h),h)}return{value:s,source:h,stack:oh(h)}}var xi=[],cs=0,Tc=0;function Ds(){for(var s=cs,h=Tc=cs=0;h<s;){var g=xi[h];xi[h++]=null;var T=xi[h];xi[h++]=null;var O=xi[h];xi[h++]=null;var z=xi[h];if(xi[h++]=null,T!==null&&O!==null){var Y=T.pending;Y===null?O.next=O:(O.next=Y.next,Y.next=O),T.pending=O}z!==0&&Nl(g,O,z)}}function kl(s,h,g,T){xi[cs++]=s,xi[cs++]=h,xi[cs++]=g,xi[cs++]=T,Tc|=T,s.lanes|=T,s=s.alternate,s!==null&&(s.lanes|=T)}function jh(s,h,g,T){return kl(s,h,g,T),mu(s)}function yo(s,h){return kl(s,null,null,h),mu(s)}function Nl(s,h,g){s.lanes|=g;var T=s.alternate;T!==null&&(T.lanes|=g);for(var O=!1,z=s.return;z!==null;)z.childLanes|=g,T=z.alternate,T!==null&&(T.childLanes|=g),z.tag===22&&(s=z.stateNode,s===null||s._visibility&1||(O=!0)),s=z,z=z.return;return s.tag===3?(z=s.stateNode,O&&h!==null&&(O=31-Ne(g),s=z.hiddenUpdates,T=s[O],T===null?s[O]=[h]:T.push(h),h.lane=g|536870912),z):null}function mu(s){if(50<Kh)throw Kh=0,dg=null,Error(a(185));for(var h=s.return;h!==null;)s=h,h=s.return;return s.tag===3?s.stateNode:null}var Fo={};function Pr(s,h,g,T){this.tag=s,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(s,h,g,T){return new Pr(s,h,g,T)}function zd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function vo(s,h){var g=s.alternate;return g===null?(g=Bi(s.tag,h,s.key,s.mode),g.elementType=s.elementType,g.type=s.type,g.stateNode=s.stateNode,g.alternate=s,s.alternate=g):(g.pendingProps=h,g.type=s.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=s.flags&65011712,g.childLanes=s.childLanes,g.lanes=s.lanes,g.child=s.child,g.memoizedProps=s.memoizedProps,g.memoizedState=s.memoizedState,g.updateQueue=s.updateQueue,h=s.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=s.sibling,g.index=s.index,g.ref=s.ref,g.refCleanup=s.refCleanup,g}function Ac(s,h){s.flags&=65011714;var g=s.alternate;return g===null?(s.childLanes=0,s.lanes=h,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=g.childLanes,s.lanes=g.lanes,s.child=g.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=g.memoizedProps,s.memoizedState=g.memoizedState,s.updateQueue=g.updateQueue,s.type=g.type,h=g.dependencies,s.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),s}function Ph(s,h,g,T,O,z){var Y=0;if(T=s,typeof s=="function")zd(s)&&(Y=1);else if(typeof s=="string")Y=mf(s,g,jt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case Oe:return s=Bi(31,g,h,O),s.elementType=Oe,s.lanes=z,s;case H:return $o(g.children,O,z,h);case G:Y=8,O|=24;break;case q:return s=Bi(12,g,h,O|2),s.elementType=q,s.lanes=z,s;case J:return s=Bi(13,g,h,O),s.elementType=J,s.lanes=z,s;case ee:return s=Bi(19,g,h,O),s.elementType=ee,s.lanes=z,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case re:case ne:Y=10;break e;case ie:Y=9;break e;case ce:Y=11;break e;case he:Y=14;break e;case ge:Y=16,T=null;break e}Y=29,g=Error(a(130,s===null?"null":typeof s,"")),T=null}return h=Bi(Y,g,h,O),h.elementType=s,h.type=T,h.lanes=z,h}function $o(s,h,g,T){return s=Bi(7,s,T,h),s.lanes=g,s}function gu(s,h,g){return s=Bi(6,s,null,h),s.lanes=g,s}function Ld(s,h,g){return h=Bi(4,s.children!==null?s.children:[],s.key,h),h.lanes=g,h.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},h}var zs=[],us=0,Rl=null,Dl=0,Ji=[],ga=0,qo=null,Va=1,Pa="";function Ea(s,h){zs[us++]=Dl,zs[us++]=Rl,Rl=s,Dl=h}function yu(s,h,g){Ji[ga++]=Va,Ji[ga++]=Pa,Ji[ga++]=qo,qo=s;var T=Va;s=Pa;var O=32-Ne(T)-1;T&=~(1<<O),g+=1;var z=32-Ne(h)+O;if(30<z){var Y=O-O%5;z=(T&(1<<Y)-1).toString(32),T>>=Y,O-=Y,Va=1<<32-Ne(h)+O|g<<O|T,Pa=z+s}else Va=1<<z|g<<O|T,Pa=s}function Bd(s){s.return!==null&&(Ea(s,1),yu(s,1,0))}function zl(s){for(;s===Rl;)Rl=zs[--us],zs[us]=null,Dl=zs[--us],zs[us]=null;for(;s===qo;)qo=Ji[--ga],Ji[ga]=null,Pa=Ji[--ga],Ji[ga]=null,Va=Ji[--ga],Ji[ga]=null}var ea=null,Nn=null,Dr=!1,Uo=null,Ca=!1,Mc=Error(a(519));function Ga(s){var h=Error(a(418,""));throw Fi(ma(h,s)),Mc}function jc(s){var h=s.stateNode,g=s.type,T=s.memoizedProps;switch(h[Hr]=s,h[Ar]=T,g){case"dialog":kr("cancel",h),kr("close",h);break;case"iframe":case"object":case"embed":kr("load",h);break;case"video":case"audio":for(g=0;g<Xc.length;g++)kr(Xc[g],h);break;case"source":kr("error",h);break;case"img":case"image":case"link":kr("error",h),kr("load",h);break;case"details":kr("toggle",h);break;case"input":kr("invalid",h),ch(h,T.value,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name,!0),sh(h);break;case"select":kr("invalid",h);break;case"textarea":kr("invalid",h),Zf(h,T.value,T.defaultValue,T.children),sh(h)}g=T.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||h.textContent===""+g||T.suppressHydrationWarning===!0||Av(h.textContent,g)?(T.popover!=null&&(kr("beforetoggle",h),kr("toggle",h)),T.onScroll!=null&&kr("scroll",h),T.onScrollEnd!=null&&kr("scrollend",h),T.onClick!=null&&(h.onclick=td),h=!0):h=!1,h||Ga(s)}function vu(s){for(ea=s.return;ea;)switch(ea.tag){case 5:case 13:Ca=!1;return;case 27:case 3:Ca=!0;return;default:ea=ea.return}}function Pc(s){if(s!==ea)return!1;if(!Dr)return vu(s),Dr=!0,!1;var h=s.tag,g;if((g=h!==3&&h!==27)&&((g=h===5)&&(g=s.type,g=!(g!=="form"&&g!=="button")||Rp(s.type,s.memoizedProps)),g=!g),g&&Nn&&Ga(s),vu(s),h===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(317));e:{for(s=s.nextSibling,h=0;s;){if(s.nodeType===8)if(g=s.data,g==="/$"){if(h===0){Nn=rs(s.nextSibling);break e}h--}else g!=="$"&&g!=="$!"&&g!=="$?"||h++;s=s.nextSibling}Nn=null}}else h===27?(h=Nn,ec(s.type)?(s=zp,zp=null,Nn=s):Nn=h):Nn=ea?rs(s.stateNode.nextSibling):null;return!0}function _n(){Nn=ea=null,Dr=!1}function Ls(){var s=Uo;return s!==null&&(to===null?to=s:to.push.apply(to,s),Uo=null),s}function Fi(s){Uo===null?Uo=[s]:Uo.push(s)}var _u=We(null),Vo=null,_o=null;function ya(s,h,g){ct(_u,h._currentValue),h._currentValue=g}function va(s){s._currentValue=_u.current,lt(_u)}function Ll(s,h,g){for(;s!==null;){var T=s.alternate;if((s.childLanes&h)!==h?(s.childLanes|=h,T!==null&&(T.childLanes|=h)):T!==null&&(T.childLanes&h)!==h&&(T.childLanes|=h),s===g)break;s=s.return}}function Ec(s,h,g,T){var O=s.child;for(O!==null&&(O.return=s);O!==null;){var z=O.dependencies;if(z!==null){var Y=O.child;z=z.firstContext;e:for(;z!==null;){var ue=z;z=O;for(var je=0;je<h.length;je++)if(ue.context===h[je]){z.lanes|=g,ue=z.alternate,ue!==null&&(ue.lanes|=g),Ll(z.return,g,s),T||(Y=null);break e}z=ue.next}}else if(O.tag===18){if(Y=O.return,Y===null)throw Error(a(341));Y.lanes|=g,z=Y.alternate,z!==null&&(z.lanes|=g),Ll(Y,g,s),Y=null}else Y=O.child;if(Y!==null)Y.return=O;else for(Y=O;Y!==null;){if(Y===s){Y=null;break}if(O=Y.sibling,O!==null){O.return=Y.return,Y=O;break}Y=Y.return}O=Y}}function Bl(s,h,g,T){s=null;for(var O=h,z=!1;O!==null;){if(!z){if((O.flags&524288)!==0)z=!0;else if((O.flags&262144)!==0)break}if(O.tag===10){var Y=O.alternate;if(Y===null)throw Error(a(387));if(Y=Y.memoizedProps,Y!==null){var ue=O.type;fa(O.pendingProps.value,Y.value)||(s!==null?s.push(ue):s=[ue])}}else if(O===yr.current){if(Y=O.alternate,Y===null)throw Error(a(387));Y.memoizedState.memoizedState!==O.memoizedState.memoizedState&&(s!==null?s.push(w):s=[w])}O=O.return}s!==null&&Ec(h,s,g,T),h.flags|=262144}function xu(s){for(s=s.firstContext;s!==null;){if(!fa(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function hs(s){Vo=s,_o=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function bi(s){return Bs(Vo,s)}function ds(s,h){return Vo===null&&hs(s),Bs(s,h)}function Bs(s,h){var g=h._currentValue;if(h={context:h,memoizedValue:g,next:null},_o===null){if(s===null)throw Error(a(308));_o=h,s.dependencies={lanes:0,firstContext:h},s.flags|=524288}else _o=_o.next=h;return g}var tp=typeof AbortController<"u"?AbortController:function(){var s=[],h=this.signal={aborted:!1,addEventListener:function(g,T){s.push(T)}};this.abort=function(){h.aborted=!0,s.forEach(function(g){return g()})}},rp=e.unstable_scheduleCallback,np=e.unstable_NormalPriority,ii={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Eh(){return{controller:new tp,data:new Map,refCount:0}}function Go(s){s.refCount--,s.refCount===0&&rp(np,function(){s.controller.abort()})}var Zo=null,$i=0,Oa=0,Fs=null;function Za(s,h){if(Zo===null){var g=Zo=[];$i=0,Oa=yg(),Fs={status:"pending",value:void 0,then:function(T){g.push(T)}}}return $i++,h.then(Ha,Ha),h}function Ha(){if(--$i===0&&Zo!==null){Fs!==null&&(Fs.status="fulfilled");var s=Zo;Zo=null,Oa=0,Fs=null;for(var h=0;h<s.length;h++)(0,s[h])()}}function Cc(s,h){var g=[],T={status:"pending",value:null,reason:null,then:function(O){g.push(O)}};return s.then(function(){T.status="fulfilled",T.value=h;for(var O=0;O<g.length;O++)(0,g[O])(h)},function(O){for(T.status="rejected",T.reason=O,O=0;O<g.length;O++)(0,g[O])(void 0)}),T}var Ia=Te.S;Te.S=function(s,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&Za(s,h),Ia!==null&&Ia(s,h)};var _a=We(null);function Fd(){var s=_a.current;return s!==null?s:On.pooledCache}function Oc(s,h){h===null?ct(_a,_a.current):ct(_a,h.pool)}function ip(){var s=Fd();return s===null?null:{parent:ii._currentValue,pool:s}}var fs=Error(a(460)),$d=Error(a(474)),$s=Error(a(542)),xo={then:function(){}};function Nt(s){return s=s.status,s==="fulfilled"||s==="rejected"}function bu(){}function Ch(s,h,g){switch(g=s[g],g===void 0?s.push(h):g!==h&&(h.then(bu,bu),h=g),h.status){case"fulfilled":return h.value;case"rejected":throw s=h.reason,qs(s),s;default:if(typeof h.status=="string")h.then(bu,bu);else{if(s=On,s!==null&&100<s.shellSuspendCounter)throw Error(a(482));s=h,s.status="pending",s.then(function(T){if(h.status==="pending"){var O=h;O.status="fulfilled",O.value=T}},function(T){if(h.status==="pending"){var O=h;O.status="rejected",O.reason=T}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw s=h.reason,qs(s),s}throw ps=h,fs}}var ps=null;function Ic(){if(ps===null)throw Error(a(459));var s=ps;return ps=null,s}function qs(s){if(s===fs||s===$s)throw Error(a(483))}var ka=!1;function wr(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kc(s,h){s=s.updateQueue,h.updateQueue===s&&(h.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ms(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function bo(s,h,g){var T=s.updateQueue;if(T===null)return null;if(T=T.shared,(gn&2)!==0){var O=T.pending;return O===null?h.next=h:(h.next=O.next,O.next=h),T.pending=h,h=mu(s),Nl(s,null,g),h}return kl(s,T,h,g),mu(s)}function Fl(s,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194048)!==0)){var T=h.lanes;T&=s.pendingLanes,g|=T,h.lanes=g,qr(s,g)}}function Oh(s,h){var g=s.updateQueue,T=s.alternate;if(T!==null&&(T=T.updateQueue,g===T)){var O=null,z=null;if(g=g.firstBaseUpdate,g!==null){do{var Y={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};z===null?O=z=Y:z=z.next=Y,g=g.next}while(g!==null);z===null?O=z=h:z=z.next=h}else O=z=h;g={baseState:T.baseState,firstBaseUpdate:O,lastBaseUpdate:z,shared:T.shared,callbacks:T.callbacks},s.updateQueue=g;return}s=g.lastBaseUpdate,s===null?g.firstBaseUpdate=h:s.next=h,g.lastBaseUpdate=h}var Ih=!1;function Us(){if(Ih){var s=Fs;if(s!==null)throw s}}function Nc(s,h,g,T){Ih=!1;var O=s.updateQueue;ka=!1;var z=O.firstBaseUpdate,Y=O.lastBaseUpdate,ue=O.shared.pending;if(ue!==null){O.shared.pending=null;var je=ue,Ue=je.next;je.next=null,Y===null?z=Ue:Y.next=Ue,Y=je;var pt=s.alternate;pt!==null&&(pt=pt.updateQueue,ue=pt.lastBaseUpdate,ue!==Y&&(ue===null?pt.firstBaseUpdate=Ue:ue.next=Ue,pt.lastBaseUpdate=je))}if(z!==null){var bt=O.baseState;Y=0,pt=Ue=je=null,ue=z;do{var nt=ue.lane&-536870913,ut=nt!==ue.lane;if(ut?(Ir&nt)===nt:(T&nt)===nt){nt!==0&&nt===Oa&&(Ih=!0),pt!==null&&(pt=pt.next={lane:0,tag:ue.tag,payload:ue.payload,callback:null,next:null});e:{var cr=s,ir=ue;nt=h;var Jr=g;switch(ir.tag){case 1:if(cr=ir.payload,typeof cr=="function"){bt=cr.call(Jr,bt,nt);break e}bt=cr;break e;case 3:cr.flags=cr.flags&-65537|128;case 0:if(cr=ir.payload,nt=typeof cr=="function"?cr.call(Jr,bt,nt):cr,nt==null)break e;bt=N({},bt,nt);break e;case 2:ka=!0}}nt=ue.callback,nt!==null&&(s.flags|=64,ut&&(s.flags|=8192),ut=O.callbacks,ut===null?O.callbacks=[nt]:ut.push(nt))}else ut={lane:nt,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},pt===null?(Ue=pt=ut,je=bt):pt=pt.next=ut,Y|=nt;if(ue=ue.next,ue===null){if(ue=O.shared.pending,ue===null)break;ut=ue,ue=ut.next,ut.next=null,O.lastBaseUpdate=ut,O.shared.pending=null}}while(!0);pt===null&&(je=bt),O.baseState=je,O.firstBaseUpdate=Ue,O.lastBaseUpdate=pt,z===null&&(O.shared.lanes=0),Jo|=Y,s.lanes=Y,s.memoizedState=bt}}function qd(s,h){if(typeof s!="function")throw Error(a(191,s));s.call(h)}function Ud(s,h){var g=s.callbacks;if(g!==null)for(s.callbacks=null,s=0;s<g.length;s++)qd(g[s],h)}var $l=We(null),wu=We(0);function gs(s,h){s=Wl,ct(wu,s),ct($l,h),Wl=s|h.baseLanes}function an(){ct(wu,Wl),ct($l,$l.current)}function kh(){Wl=wu.current,lt($l),lt(wu)}var Xa=0,Sr=null,on=null,Pn=null,Su=!1,Vs=!1,qi=!1,ql=0,Lt=0,Xt=null,Rc=0;function Fn(){throw Error(a(321))}function Dc(s,h){if(h===null)return!1;for(var g=0;g<h.length&&g<s.length;g++)if(!fa(s[g],h[g]))return!1;return!0}function ji(s,h,g,T,O,z){return Xa=z,Sr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Te.H=s===null||s.memoizedState===null?vs:Qa,qi=!1,z=g(T,O),qi=!1,Vs&&(z=Wa(h,g,T,O)),Vd(s),z}function Vd(s){Te.H=wi;var h=on!==null&&on.next!==null;if(Xa=0,Pn=on=Sr=null,Su=!1,Lt=0,Xt=null,h)throw Error(a(300));s===null||Pi||(s=s.dependencies,s!==null&&xu(s)&&(Pi=!0))}function Wa(s,h,g,T){Sr=s;var O=0;do{if(Vs&&(Xt=null),Lt=0,Vs=!1,25<=O)throw Error(a(301));if(O+=1,Pn=on=null,s.updateQueue!=null){var z=s.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}Te.H=Ws,z=h(g,T)}while(Vs);return z}function Ul(){var s=Te.H,h=s.useState()[0];return h=typeof h.then=="function"?Ya(h):h,s=s.useState()[0],(on!==null?on.memoizedState:null)!==s&&(Sr.flags|=1024),h}function Gd(){var s=ql!==0;return ql=0,s}function Zd(s,h,g){h.updateQueue=s.updateQueue,h.flags&=-2053,s.lanes&=~g}function Hd(s){if(Su){for(s=s.memoizedState;s!==null;){var h=s.queue;h!==null&&(h.pending=null),s=s.next}Su=!1}Xa=0,Pn=on=Sr=null,Vs=!1,Lt=ql=0,Xt=null}function gi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Sr.memoizedState=Pn=s:Pn=Pn.next=s,Pn}function _r(){if(on===null){var s=Sr.alternate;s=s!==null?s.memoizedState:null}else s=on.next;var h=Pn===null?Sr.memoizedState:Pn.next;if(h!==null)Pn=h,on=s;else{if(s===null)throw Sr.alternate===null?Error(a(467)):Error(a(310));on=s,s={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},Pn===null?Sr.memoizedState=Pn=s:Pn=Pn.next=s}return Pn}function En(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ya(s){var h=Lt;return Lt+=1,Xt===null&&(Xt=[]),s=Ch(Xt,s,h),h=Sr,(Pn===null?h.memoizedState:Pn.next)===null&&(h=h.alternate,Te.H=h===null||h.memoizedState===null?vs:Qa),s}function ys(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ya(s);if(s.$$typeof===ne)return bi(s)}throw Error(a(438,String(s)))}function Gs(s){var h=null,g=Sr.updateQueue;if(g!==null&&(h=g.memoCache),h==null){var T=Sr.alternate;T!==null&&(T=T.updateQueue,T!==null&&(T=T.memoCache,T!=null&&(h={data:T.data.map(function(O){return O.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),g===null&&(g=En(),Sr.updateQueue=g),g.memoCache=h,g=h.data[h.index],g===void 0)for(g=h.data[h.index]=Array(s),T=0;T<s;T++)g[T]=at;return h.index++,g}function Ka(s,h){return typeof h=="function"?h(s):h}function Zs(s){var h=_r();return Tu(h,on,s)}function Tu(s,h,g){var T=s.queue;if(T===null)throw Error(a(311));T.lastRenderedReducer=g;var O=s.baseQueue,z=T.pending;if(z!==null){if(O!==null){var Y=O.next;O.next=z.next,z.next=Y}h.baseQueue=O=z,T.pending=null}if(z=s.baseState,O===null)s.memoizedState=z;else{h=O.next;var ue=Y=null,je=null,Ue=h,pt=!1;do{var bt=Ue.lane&-536870913;if(bt!==Ue.lane?(Ir&bt)===bt:(Xa&bt)===bt){var nt=Ue.revertLane;if(nt===0)je!==null&&(je=je.next={lane:0,revertLane:0,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),bt===Oa&&(pt=!0);else if((Xa&nt)===nt){Ue=Ue.next,nt===Oa&&(pt=!0);continue}else bt={lane:0,revertLane:Ue.revertLane,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},je===null?(ue=je=bt,Y=z):je=je.next=bt,Sr.lanes|=nt,Jo|=nt;bt=Ue.action,qi&&g(z,bt),z=Ue.hasEagerState?Ue.eagerState:g(z,bt)}else nt={lane:bt,revertLane:Ue.revertLane,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},je===null?(ue=je=nt,Y=z):je=je.next=nt,Sr.lanes|=bt,Jo|=bt;Ue=Ue.next}while(Ue!==null&&Ue!==h);if(je===null?Y=z:je.next=ue,!fa(z,s.memoizedState)&&(Pi=!0,pt&&(g=Fs,g!==null)))throw g;s.memoizedState=z,s.baseState=Y,s.baseQueue=je,T.lastRenderedState=z}return O===null&&(T.lanes=0),[s.memoizedState,T.dispatch]}function Ho(s){var h=_r(),g=h.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=s;var T=g.dispatch,O=g.pending,z=h.memoizedState;if(O!==null){g.pending=null;var Y=O=O.next;do z=s(z,Y.action),Y=Y.next;while(Y!==O);fa(z,h.memoizedState)||(Pi=!0),h.memoizedState=z,h.baseQueue===null&&(h.baseState=z),g.lastRenderedState=z}return[z,T]}function Hs(s,h,g){var T=Sr,O=_r(),z=Dr;if(z){if(g===void 0)throw Error(a(407));g=g()}else g=h();var Y=!fa((on||O).memoizedState,g);Y&&(O.memoizedState=g,Pi=!0),O=O.queue;var ue=Xs.bind(null,T,O,s);if(pe(2048,8,ue,[s]),O.getSnapshot!==h||Y||Pn!==null&&Pn.memoizedState.tag&1){if(T.flags|=2048,Z(9,Q(),Au.bind(null,T,O,g,h),null),On===null)throw Error(a(349));z||(Xa&124)!==0||Nh(T,h,g)}return g}function Nh(s,h,g){s.flags|=16384,s={getSnapshot:h,value:g},h=Sr.updateQueue,h===null?(h=En(),Sr.updateQueue=h,h.stores=[s]):(g=h.stores,g===null?h.stores=[s]:g.push(s))}function Au(s,h,g,T){h.value=g,h.getSnapshot=T,Rh(h)&&Dh(s)}function Xs(s,h,g){return g(function(){Rh(h)&&Dh(s)})}function Rh(s){var h=s.getSnapshot;s=s.value;try{var g=h();return!fa(s,g)}catch{return!0}}function Dh(s){var h=yo(s,2);h!==null&&ro(h,s,2)}function zc(s){var h=gi();if(typeof s=="function"){var g=s;if(s=g(),qi){ci(!0);try{g()}finally{ci(!1)}}}return h.memoizedState=h.baseState=s,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:s},h}function zh(s,h,g,T){return s.baseState=g,Tu(s,on,typeof T=="function"?T:Ka)}function b(s,h,g,T,O){if(ai(s))throw Error(a(485));if(s=h.action,s!==null){var z={payload:O,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){z.listeners.push(Y)}};Te.T!==null?g(!0):z.isTransition=!1,T(z),g=h.pending,g===null?(z.next=h.pending=z,r(h,z)):(z.next=g.next,h.pending=g.next=z)}}function r(s,h){var g=h.action,T=h.payload,O=s.state;if(h.isTransition){var z=Te.T,Y={};Te.T=Y;try{var ue=g(O,T),je=Te.S;je!==null&&je(Y,ue),u(s,h,ue)}catch(Ue){_(s,h,Ue)}finally{Te.T=z}}else try{z=g(O,T),u(s,h,z)}catch(Ue){_(s,h,Ue)}}function u(s,h,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(T){p(s,h,T)},function(T){return _(s,h,T)}):p(s,h,g)}function p(s,h,g){h.status="fulfilled",h.value=g,S(h),s.state=g,h=s.pending,h!==null&&(g=h.next,g===h?s.pending=null:(g=g.next,h.next=g,r(s,g)))}function _(s,h,g){var T=s.pending;if(s.pending=null,T!==null){T=T.next;do h.status="rejected",h.reason=g,S(h),h=h.next;while(h!==T)}s.action=null}function S(s){s=s.listeners;for(var h=0;h<s.length;h++)(0,s[h])()}function j(s,h){return h}function k(s,h){if(Dr){var g=On.formState;if(g!==null){e:{var T=Sr;if(Dr){if(Nn){t:{for(var O=Nn,z=Ca;O.nodeType!==8;){if(!z){O=null;break t}if(O=rs(O.nextSibling),O===null){O=null;break t}}z=O.data,O=z==="F!"||z==="F"?O:null}if(O){Nn=rs(O.nextSibling),T=O.data==="F!";break e}}Ga(T)}T=!1}T&&(h=g[0])}}return g=gi(),g.memoizedState=g.baseState=h,T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:j,lastRenderedState:h},g.queue=T,g=un.bind(null,Sr,T),T.dispatch=g,T=zc(!1),z=pn.bind(null,Sr,!1,T.queue),T=gi(),O={state:h,dispatch:null,action:s,pending:null},T.queue=O,g=b.bind(null,Sr,O,z,g),O.dispatch=g,T.memoizedState=s,[h,g,!1]}function R(s){var h=_r();return $(h,on,s)}function $(s,h,g){if(h=Tu(s,h,j)[0],s=Zs(Ka)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var T=Ya(h)}catch(Y){throw Y===fs?$s:Y}else T=h;h=_r();var O=h.queue,z=O.dispatch;return g!==h.memoizedState&&(Sr.flags|=2048,Z(9,Q(),U.bind(null,O,g),null)),[T,z,s]}function U(s,h){s.action=h}function X(s){var h=_r(),g=on;if(g!==null)return $(h,g,s);_r(),h=h.memoizedState,g=_r();var T=g.queue.dispatch;return g.memoizedState=s,[h,T,!1]}function Z(s,h,g,T){return s={tag:s,create:g,deps:T,inst:h,next:null},h=Sr.updateQueue,h===null&&(h=En(),Sr.updateQueue=h),g=h.lastEffect,g===null?h.lastEffect=s.next=s:(T=g.next,g.next=s,s.next=T,h.lastEffect=s),s}function Q(){return{destroy:void 0,resource:void 0}}function se(){return _r().memoizedState}function me(s,h,g,T){var O=gi();T=T===void 0?null:T,Sr.flags|=s,O.memoizedState=Z(1|h,Q(),g,T)}function pe(s,h,g,T){var O=_r();T=T===void 0?null:T;var z=O.memoizedState.inst;on!==null&&T!==null&&Dc(T,on.memoizedState.deps)?O.memoizedState=Z(h,z,g,T):(Sr.flags|=s,O.memoizedState=Z(1|h,z,g,T))}function ye(s,h){me(8390656,8,s,h)}function _e(s,h){pe(2048,8,s,h)}function Ae(s,h){return pe(4,2,s,h)}function be(s,h){return pe(4,4,s,h)}function Ee(s,h){if(typeof h=="function"){s=s();var g=h(s);return function(){typeof g=="function"?g():h(null)}}if(h!=null)return s=s(),h.current=s,function(){h.current=null}}function Ie(s,h,g){g=g!=null?g.concat([s]):null,pe(4,4,Ee.bind(null,h,s),g)}function we(){}function De(s,h){var g=_r();h=h===void 0?null:h;var T=g.memoizedState;return h!==null&&Dc(h,T[1])?T[0]:(g.memoizedState=[s,h],s)}function it(s,h){var g=_r();h=h===void 0?null:h;var T=g.memoizedState;if(h!==null&&Dc(h,T[1]))return T[0];if(T=s(),qi){ci(!0);try{s()}finally{ci(!1)}}return g.memoizedState=[T,h],T}function Ye(s,h,g){return g===void 0||(Xa&1073741824)!==0?s.memoizedState=h:(s.memoizedState=g,s=sv(),Sr.lanes|=s,Jo|=s,g)}function Qe(s,h,g,T){return fa(g,h)?g:$l.current!==null?(s=Ye(s,g,T),fa(s,h)||(Pi=!0),s):(Xa&42)===0?(Pi=!0,s.memoizedState=g):(s=sv(),Sr.lanes|=s,Jo|=s,h)}function Je(s,h,g,T,O){var z=Ge.p;Ge.p=z!==0&&8>z?z:8;var Y=Te.T,ue={};Te.T=ue,pn(s,!1,h,g);try{var je=O(),Ue=Te.S;if(Ue!==null&&Ue(ue,je),je!==null&&typeof je=="object"&&typeof je.then=="function"){var pt=Cc(je,T);Tr(s,h,pt,Ta(s))}else Tr(s,h,T,Ta(s))}catch(bt){Tr(s,h,{then:function(){},status:"rejected",reason:bt},Ta())}finally{Ge.p=z,Te.T=Y}}function Tt(){}function At(s,h,g,T){if(s.tag!==5)throw Error(a(476));var O=yt(s).queue;Je(s,O,h,Ze,g===null?Tt:function(){return Bt(s),g(T)})}function yt(s){var h=s.memoizedState;if(h!==null)return h;h={memoizedState:Ze,baseState:Ze,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:Ze},next:null};var g={};return h.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:g},next:null},s.memoizedState=h,s=s.alternate,s!==null&&(s.memoizedState=h),h}function Bt(s){var h=yt(s).next.queue;Tr(s,h,{},Ta())}function lr(){return bi(w)}function Xr(){return _r().memoizedState}function Wr(){return _r().memoizedState}function cn(s){for(var h=s.return;h!==null;){switch(h.tag){case 24:case 3:var g=Ta();s=ms(g);var T=bo(h,s,g);T!==null&&(ro(T,h,g),Fl(T,h,g)),h={cache:Eh()},s.payload=h;return}h=h.return}}function Cn(s,h,g){var T=Ta();g={lane:T,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},ai(s)?$n(h,g):(g=jh(s,h,g,T),g!==null&&(ro(g,s,T),qn(g,h,T)))}function un(s,h,g){var T=Ta();Tr(s,h,g,T)}function Tr(s,h,g,T){var O={lane:T,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(ai(s))$n(h,O);else{var z=s.alternate;if(s.lanes===0&&(z===null||z.lanes===0)&&(z=h.lastRenderedReducer,z!==null))try{var Y=h.lastRenderedState,ue=z(Y,g);if(O.hasEagerState=!0,O.eagerState=ue,fa(ue,Y))return kl(s,h,O,0),On===null&&Ds(),!1}catch{}finally{}if(g=jh(s,h,O,T),g!==null)return ro(g,s,T),qn(g,h,T),!0}return!1}function pn(s,h,g,T){if(T={lane:2,revertLane:yg(),action:T,hasEagerState:!1,eagerState:null,next:null},ai(s)){if(h)throw Error(a(479))}else h=jh(s,g,T,2),h!==null&&ro(h,s,2)}function ai(s){var h=s.alternate;return s===Sr||h!==null&&h===Sr}function $n(s,h){Vs=Su=!0;var g=s.pending;g===null?h.next=h:(h.next=g.next,g.next=h),s.pending=h}function qn(s,h,g){if((g&4194048)!==0){var T=h.lanes;T&=s.pendingLanes,g|=T,h.lanes=g,qr(s,g)}}var wi={readContext:bi,use:ys,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useLayoutEffect:Fn,useInsertionEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useSyncExternalStore:Fn,useId:Fn,useHostTransitionStatus:Fn,useFormState:Fn,useActionState:Fn,useOptimistic:Fn,useMemoCache:Fn,useCacheRefresh:Fn},vs={readContext:bi,use:ys,useCallback:function(s,h){return gi().memoizedState=[s,h===void 0?null:h],s},useContext:bi,useEffect:ye,useImperativeHandle:function(s,h,g){g=g!=null?g.concat([s]):null,me(4194308,4,Ee.bind(null,h,s),g)},useLayoutEffect:function(s,h){return me(4194308,4,s,h)},useInsertionEffect:function(s,h){me(4,2,s,h)},useMemo:function(s,h){var g=gi();h=h===void 0?null:h;var T=s();if(qi){ci(!0);try{s()}finally{ci(!1)}}return g.memoizedState=[T,h],T},useReducer:function(s,h,g){var T=gi();if(g!==void 0){var O=g(h);if(qi){ci(!0);try{g(h)}finally{ci(!1)}}}else O=h;return T.memoizedState=T.baseState=O,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:O},T.queue=s,s=s.dispatch=Cn.bind(null,Sr,s),[T.memoizedState,s]},useRef:function(s){var h=gi();return s={current:s},h.memoizedState=s},useState:function(s){s=zc(s);var h=s.queue,g=un.bind(null,Sr,h);return h.dispatch=g,[s.memoizedState,g]},useDebugValue:we,useDeferredValue:function(s,h){var g=gi();return Ye(g,s,h)},useTransition:function(){var s=zc(!1);return s=Je.bind(null,Sr,s.queue,!0,!1),gi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,h,g){var T=Sr,O=gi();if(Dr){if(g===void 0)throw Error(a(407));g=g()}else{if(g=h(),On===null)throw Error(a(349));(Ir&124)!==0||Nh(T,h,g)}O.memoizedState=g;var z={value:g,getSnapshot:h};return O.queue=z,ye(Xs.bind(null,T,z,s),[s]),T.flags|=2048,Z(9,Q(),Au.bind(null,T,z,g,h),null),g},useId:function(){var s=gi(),h=On.identifierPrefix;if(Dr){var g=Pa,T=Va;g=(T&~(1<<32-Ne(T)-1)).toString(32)+g,h="«"+h+"R"+g,g=ql++,0<g&&(h+="H"+g.toString(32)),h+="»"}else g=Rc++,h="«"+h+"r"+g.toString(32)+"»";return s.memoizedState=h},useHostTransitionStatus:lr,useFormState:k,useActionState:k,useOptimistic:function(s){var h=gi();h.memoizedState=h.baseState=s;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=g,h=pn.bind(null,Sr,!0,g),g.dispatch=h,[s,h]},useMemoCache:Gs,useCacheRefresh:function(){return gi().memoizedState=cn.bind(null,Sr)}},Qa={readContext:bi,use:ys,useCallback:De,useContext:bi,useEffect:_e,useImperativeHandle:Ie,useInsertionEffect:Ae,useLayoutEffect:be,useMemo:it,useReducer:Zs,useRef:se,useState:function(){return Zs(Ka)},useDebugValue:we,useDeferredValue:function(s,h){var g=_r();return Qe(g,on.memoizedState,s,h)},useTransition:function(){var s=Zs(Ka)[0],h=_r().memoizedState;return[typeof s=="boolean"?s:Ya(s),h]},useSyncExternalStore:Hs,useId:Xr,useHostTransitionStatus:lr,useFormState:R,useActionState:R,useOptimistic:function(s,h){var g=_r();return zh(g,on,s,h)},useMemoCache:Gs,useCacheRefresh:Wr},Ws={readContext:bi,use:ys,useCallback:De,useContext:bi,useEffect:_e,useImperativeHandle:Ie,useInsertionEffect:Ae,useLayoutEffect:be,useMemo:it,useReducer:Ho,useRef:se,useState:function(){return Ho(Ka)},useDebugValue:we,useDeferredValue:function(s,h){var g=_r();return on===null?Ye(g,s,h):Qe(g,on.memoizedState,s,h)},useTransition:function(){var s=Ho(Ka)[0],h=_r().memoizedState;return[typeof s=="boolean"?s:Ya(s),h]},useSyncExternalStore:Hs,useId:Xr,useHostTransitionStatus:lr,useFormState:X,useActionState:X,useOptimistic:function(s,h){var g=_r();return on!==null?zh(g,on,s,h):(g.baseState=s,[s,g.queue.dispatch])},useMemoCache:Gs,useCacheRefresh:Wr},Ja=null,Ys=0;function _s(s){var h=Ys;return Ys+=1,Ja===null&&(Ja=[]),Ch(Ja,s,h)}function Na(s,h){h=h.props.ref,s.ref=h!==void 0?h:null}function Ui(s,h){throw h.$$typeof===C?Error(a(525)):(s=Object.prototype.toString.call(h),Error(a(31,s==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":s)))}function wo(s){var h=s._init;return h(s._payload)}function So(s){function h(He,ze){if(s){var tt=He.deletions;tt===null?(He.deletions=[ze],He.flags|=16):tt.push(ze)}}function g(He,ze){if(!s)return null;for(;ze!==null;)h(He,ze),ze=ze.sibling;return null}function T(He){for(var ze=new Map;He!==null;)He.key!==null?ze.set(He.key,He):ze.set(He.index,He),He=He.sibling;return ze}function O(He,ze){return He=vo(He,ze),He.index=0,He.sibling=null,He}function z(He,ze,tt){return He.index=tt,s?(tt=He.alternate,tt!==null?(tt=tt.index,tt<ze?(He.flags|=67108866,ze):tt):(He.flags|=67108866,ze)):(He.flags|=1048576,ze)}function Y(He){return s&&He.alternate===null&&(He.flags|=67108866),He}function ue(He,ze,tt,xt){return ze===null||ze.tag!==6?(ze=gu(tt,He.mode,xt),ze.return=He,ze):(ze=O(ze,tt),ze.return=He,ze)}function je(He,ze,tt,xt){var Wt=tt.type;return Wt===H?pt(He,ze,tt.props.children,xt,tt.key):ze!==null&&(ze.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===ge&&wo(Wt)===ze.type)?(ze=O(ze,tt.props),Na(ze,tt),ze.return=He,ze):(ze=Ph(tt.type,tt.key,tt.props,null,He.mode,xt),Na(ze,tt),ze.return=He,ze)}function Ue(He,ze,tt,xt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==tt.containerInfo||ze.stateNode.implementation!==tt.implementation?(ze=Ld(tt,He.mode,xt),ze.return=He,ze):(ze=O(ze,tt.children||[]),ze.return=He,ze)}function pt(He,ze,tt,xt,Wt){return ze===null||ze.tag!==7?(ze=$o(tt,He.mode,xt,Wt),ze.return=He,ze):(ze=O(ze,tt),ze.return=He,ze)}function bt(He,ze,tt){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return ze=gu(""+ze,He.mode,tt),ze.return=He,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case L:return tt=Ph(ze.type,ze.key,ze.props,null,He.mode,tt),Na(tt,ze),tt.return=He,tt;case F:return ze=Ld(ze,He.mode,tt),ze.return=He,ze;case ge:var xt=ze._init;return ze=xt(ze._payload),bt(He,ze,tt)}if(rt(ze)||qe(ze))return ze=$o(ze,He.mode,tt,null),ze.return=He,ze;if(typeof ze.then=="function")return bt(He,_s(ze),tt);if(ze.$$typeof===ne)return bt(He,ds(He,ze),tt);Ui(He,ze)}return null}function nt(He,ze,tt,xt){var Wt=ze!==null?ze.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return Wt!==null?null:ue(He,ze,""+tt,xt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case L:return tt.key===Wt?je(He,ze,tt,xt):null;case F:return tt.key===Wt?Ue(He,ze,tt,xt):null;case ge:return Wt=tt._init,tt=Wt(tt._payload),nt(He,ze,tt,xt)}if(rt(tt)||qe(tt))return Wt!==null?null:pt(He,ze,tt,xt,null);if(typeof tt.then=="function")return nt(He,ze,_s(tt),xt);if(tt.$$typeof===ne)return nt(He,ze,ds(He,tt),xt);Ui(He,tt)}return null}function ut(He,ze,tt,xt,Wt){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return He=He.get(tt)||null,ue(ze,He,""+xt,Wt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case L:return He=He.get(xt.key===null?tt:xt.key)||null,je(ze,He,xt,Wt);case F:return He=He.get(xt.key===null?tt:xt.key)||null,Ue(ze,He,xt,Wt);case ge:var Nr=xt._init;return xt=Nr(xt._payload),ut(He,ze,tt,xt,Wt)}if(rt(xt)||qe(xt))return He=He.get(tt)||null,pt(ze,He,xt,Wt,null);if(typeof xt.then=="function")return ut(He,ze,tt,_s(xt),Wt);if(xt.$$typeof===ne)return ut(He,ze,tt,ds(ze,xt),Wt);Ui(ze,xt)}return null}function cr(He,ze,tt,xt){for(var Wt=null,Nr=null,er=ze,dr=ze=0,In=null;er!==null&&dr<tt.length;dr++){er.index>dr?(In=er,er=null):In=er.sibling;var en=nt(He,er,tt[dr],xt);if(en===null){er===null&&(er=In);break}s&&er&&en.alternate===null&&h(He,er),ze=z(en,ze,dr),Nr===null?Wt=en:Nr.sibling=en,Nr=en,er=In}if(dr===tt.length)return g(He,er),Dr&&Ea(He,dr),Wt;if(er===null){for(;dr<tt.length;dr++)er=bt(He,tt[dr],xt),er!==null&&(ze=z(er,ze,dr),Nr===null?Wt=er:Nr.sibling=er,Nr=er);return Dr&&Ea(He,dr),Wt}for(er=T(er);dr<tt.length;dr++)In=ut(er,He,dr,tt[dr],xt),In!==null&&(s&&In.alternate!==null&&er.delete(In.key===null?dr:In.key),ze=z(In,ze,dr),Nr===null?Wt=In:Nr.sibling=In,Nr=In);return s&&er.forEach(function(rc){return h(He,rc)}),Dr&&Ea(He,dr),Wt}function ir(He,ze,tt,xt){if(tt==null)throw Error(a(151));for(var Wt=null,Nr=null,er=ze,dr=ze=0,In=null,en=tt.next();er!==null&&!en.done;dr++,en=tt.next()){er.index>dr?(In=er,er=null):In=er.sibling;var rc=nt(He,er,en.value,xt);if(rc===null){er===null&&(er=In);break}s&&er&&rc.alternate===null&&h(He,er),ze=z(rc,ze,dr),Nr===null?Wt=rc:Nr.sibling=rc,Nr=rc,er=In}if(en.done)return g(He,er),Dr&&Ea(He,dr),Wt;if(er===null){for(;!en.done;dr++,en=tt.next())en=bt(He,en.value,xt),en!==null&&(ze=z(en,ze,dr),Nr===null?Wt=en:Nr.sibling=en,Nr=en);return Dr&&Ea(He,dr),Wt}for(er=T(er);!en.done;dr++,en=tt.next())en=ut(er,He,dr,en.value,xt),en!==null&&(s&&en.alternate!==null&&er.delete(en.key===null?dr:en.key),ze=z(en,ze,dr),Nr===null?Wt=en:Nr.sibling=en,Nr=en);return s&&er.forEach(function(t0){return h(He,t0)}),Dr&&Ea(He,dr),Wt}function Jr(He,ze,tt,xt){if(typeof tt=="object"&&tt!==null&&tt.type===H&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case L:e:{for(var Wt=tt.key;ze!==null;){if(ze.key===Wt){if(Wt=tt.type,Wt===H){if(ze.tag===7){g(He,ze.sibling),xt=O(ze,tt.props.children),xt.return=He,He=xt;break e}}else if(ze.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===ge&&wo(Wt)===ze.type){g(He,ze.sibling),xt=O(ze,tt.props),Na(xt,tt),xt.return=He,He=xt;break e}g(He,ze);break}else h(He,ze);ze=ze.sibling}tt.type===H?(xt=$o(tt.props.children,He.mode,xt,tt.key),xt.return=He,He=xt):(xt=Ph(tt.type,tt.key,tt.props,null,He.mode,xt),Na(xt,tt),xt.return=He,He=xt)}return Y(He);case F:e:{for(Wt=tt.key;ze!==null;){if(ze.key===Wt)if(ze.tag===4&&ze.stateNode.containerInfo===tt.containerInfo&&ze.stateNode.implementation===tt.implementation){g(He,ze.sibling),xt=O(ze,tt.children||[]),xt.return=He,He=xt;break e}else{g(He,ze);break}else h(He,ze);ze=ze.sibling}xt=Ld(tt,He.mode,xt),xt.return=He,He=xt}return Y(He);case ge:return Wt=tt._init,tt=Wt(tt._payload),Jr(He,ze,tt,xt)}if(rt(tt))return cr(He,ze,tt,xt);if(qe(tt)){if(Wt=qe(tt),typeof Wt!="function")throw Error(a(150));return tt=Wt.call(tt),ir(He,ze,tt,xt)}if(typeof tt.then=="function")return Jr(He,ze,_s(tt),xt);if(tt.$$typeof===ne)return Jr(He,ze,ds(He,tt),xt);Ui(He,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,ze!==null&&ze.tag===6?(g(He,ze.sibling),xt=O(ze,tt),xt.return=He,He=xt):(g(He,ze),xt=gu(tt,He.mode,xt),xt.return=He,He=xt),Y(He)):g(He,ze)}return function(He,ze,tt,xt){try{Ys=0;var Wt=Jr(He,ze,tt,xt);return Ja=null,Wt}catch(er){if(er===fs||er===$s)throw er;var Nr=Bi(29,er,null,He.mode);return Nr.lanes=xt,Nr.return=He,Nr}finally{}}}var Si=So(!0),Rn=So(!1),sn=We(null),Un=null;function Tn(s){var h=s.alternate;ct(mn,mn.current&1),ct(sn,s),Un===null&&(h===null||$l.current!==null||h.memoizedState!==null)&&(Un=s)}function Lh(s){if(s.tag===22){if(ct(mn,mn.current),ct(sn,s),Un===null){var h=s.alternate;h!==null&&h.memoizedState!==null&&(Un=s)}}else eo()}function eo(){ct(mn,mn.current),ct(sn,sn.current)}function ta(s){lt(sn),Un===s&&(Un=null),lt(mn)}var mn=We(0);function xa(s){for(var h=s;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||il(g)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break;for(;h.sibling===null;){if(h.return===null||h.return===s)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function Xo(s,h,g,T){h=s.memoizedState,g=g(T,h),g=g==null?h:N({},h,g),s.memoizedState=g,s.lanes===0&&(s.updateQueue.baseState=g)}var Wo={enqueueSetState:function(s,h,g){s=s._reactInternals;var T=Ta(),O=ms(T);O.payload=h,g!=null&&(O.callback=g),h=bo(s,O,T),h!==null&&(ro(h,s,T),Fl(h,s,T))},enqueueReplaceState:function(s,h,g){s=s._reactInternals;var T=Ta(),O=ms(T);O.tag=1,O.payload=h,g!=null&&(O.callback=g),h=bo(s,O,T),h!==null&&(ro(h,s,T),Fl(h,s,T))},enqueueForceUpdate:function(s,h){s=s._reactInternals;var g=Ta(),T=ms(g);T.tag=2,h!=null&&(T.callback=h),h=bo(s,T,g),h!==null&&(ro(h,s,g),Fl(h,s,g))}};function Bh(s,h,g,T,O,z,Y){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(T,z,Y):h.prototype&&h.prototype.isPureReactComponent?!jl(g,T)||!jl(O,z):!0}function Fh(s,h,g,T){s=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,T),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,T),h.state!==s&&Wo.enqueueReplaceState(h,h.state,null)}function ba(s,h){var g=h;if("ref"in h){g={};for(var T in h)T!=="ref"&&(g[T]=h[T])}if(s=s.defaultProps){g===h&&(g=N({},g));for(var O in s)g[O]===void 0&&(g[O]=s[O])}return g}var Lc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function $h(s){Lc(s)}function Bc(s){console.error(s)}function Um(s){Lc(s)}function Ks(s,h){try{var g=s.onUncaughtError;g(h.value,{componentStack:h.stack})}catch(T){setTimeout(function(){throw T})}}function Fc(s,h,g){try{var T=s.onCaughtError;T(g.value,{componentStack:g.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(O){setTimeout(function(){throw O})}}function ap(s,h,g){return g=ms(g),g.tag=3,g.payload={element:null},g.callback=function(){Ks(s,h)},g}function Yy(s){return s=ms(s),s.tag=3,s}function op(s,h,g,T){var O=g.type.getDerivedStateFromError;if(typeof O=="function"){var z=T.value;s.payload=function(){return O(z)},s.callback=function(){Fc(h,g,T)}}var Y=g.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(s.callback=function(){Fc(h,g,T),typeof O!="function"&&(Gc===null?Gc=new Set([this]):Gc.add(this));var ue=T.stack;this.componentDidCatch(T.value,{componentStack:ue!==null?ue:""})})}function Ky(s,h,g,T,O){if(g.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){if(h=g.alternate,h!==null&&Bl(h,g,O,!0),g=sn.current,g!==null){switch(g.tag){case 13:return Un===null?xp():g.alternate===null&&Zn===0&&(Zn=3),g.flags&=-257,g.flags|=65536,g.lanes=O,T===xo?g.flags|=16384:(h=g.updateQueue,h===null?g.updateQueue=new Set([T]):h.add(T),rl(s,T,O)),!1;case 22:return g.flags|=65536,T===xo?g.flags|=16384:(h=g.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([T])},g.updateQueue=h):(g=h.retryQueue,g===null?h.retryQueue=new Set([T]):g.add(T)),rl(s,T,O)),!1}throw Error(a(435,g.tag))}return rl(s,T,O),xp(),!1}if(Dr)return h=sn.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=O,T!==Mc&&(s=Error(a(422),{cause:T}),Fi(ma(s,g)))):(T!==Mc&&(h=Error(a(423),{cause:T}),Fi(ma(h,g))),s=s.current.alternate,s.flags|=65536,O&=-O,s.lanes|=O,T=ma(T,g),O=ap(s.stateNode,T,O),Oh(s,O),Zn!==4&&(Zn=2)),!1;var z=Error(a(520),{cause:T});if(z=ma(z,g),Wh===null?Wh=[z]:Wh.push(z),Zn!==4&&(Zn=2),h===null)return!0;T=ma(T,g),g=h;do{switch(g.tag){case 3:return g.flags|=65536,s=O&-O,g.lanes|=s,s=ap(g.stateNode,T,s),Oh(g,s),!1;case 1:if(h=g.type,z=g.stateNode,(g.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Gc===null||!Gc.has(z))))return g.flags|=65536,O&=-O,g.lanes|=O,O=Yy(O),op(O,s,g,T),Oh(g,O),!1}g=g.return}while(g!==null);return!1}var Xd=Error(a(461)),Pi=!1;function ra(s,h,g,T){h.child=s===null?Rn(h,null,g,T):Si(h,s.child,g,T)}function sp(s,h,g,T,O){g=g.render;var z=h.ref;if("ref"in T){var Y={};for(var ue in T)ue!=="ref"&&(Y[ue]=T[ue])}else Y=T;return hs(h),T=ji(s,h,g,Y,z,O),ue=Gd(),s!==null&&!Pi?(Zd(s,h,O),Qs(s,h,O)):(Dr&&ue&&Bd(h),h.flags|=1,ra(s,h,T,O),h.child)}function Qy(s,h,g,T,O){if(s===null){var z=g.type;return typeof z=="function"&&!zd(z)&&z.defaultProps===void 0&&g.compare===null?(h.tag=15,h.type=z,lp(s,h,z,T,O)):(s=Ph(g.type,null,T,h,h.mode,O),s.ref=h.ref,s.return=h,h.child=s)}if(z=s.child,!hp(s,O)){var Y=z.memoizedProps;if(g=g.compare,g=g!==null?g:jl,g(Y,T)&&s.ref===h.ref)return Qs(s,h,O)}return h.flags|=1,s=vo(z,T),s.ref=h.ref,s.return=h,h.child=s}function lp(s,h,g,T,O){if(s!==null){var z=s.memoizedProps;if(jl(z,T)&&s.ref===h.ref)if(Pi=!1,h.pendingProps=T=z,hp(s,O))(s.flags&131072)!==0&&(Pi=!0);else return h.lanes=s.lanes,Qs(s,h,O)}return Zm(s,h,g,T,O)}function Vm(s,h,g){var T=h.pendingProps,O=T.children,z=s!==null?s.memoizedState:null;if(T.mode==="hidden"){if((h.flags&128)!==0){if(T=z!==null?z.baseLanes|g:g,s!==null){for(O=h.child=s.child,z=0;O!==null;)z=z|O.lanes|O.childLanes,O=O.sibling;h.childLanes=z&~T}else h.childLanes=0,h.child=null;return Gm(s,h,T,g)}if((g&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},s!==null&&Oc(h,z!==null?z.cachePool:null),z!==null?gs(h,z):an(),Lh(h);else return h.lanes=h.childLanes=536870912,Gm(s,h,z!==null?z.baseLanes|g:g,g)}else z!==null?(Oc(h,z.cachePool),gs(h,z),eo(),h.memoizedState=null):(s!==null&&Oc(h,null),an(),eo());return ra(s,h,O,g),h.child}function Gm(s,h,g,T){var O=Fd();return O=O===null?null:{parent:ii._currentValue,pool:O},h.memoizedState={baseLanes:g,cachePool:O},s!==null&&Oc(h,null),an(),Lh(h),s!==null&&Bl(s,h,T,!0),null}function Vl(s,h){var g=h.ref;if(g===null)s!==null&&s.ref!==null&&(h.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(a(284));(s===null||s.ref!==g)&&(h.flags|=4194816)}}function Zm(s,h,g,T,O){return hs(h),g=ji(s,h,g,T,void 0,O),T=Gd(),s!==null&&!Pi?(Zd(s,h,O),Qs(s,h,O)):(Dr&&T&&Bd(h),h.flags|=1,ra(s,h,g,O),h.child)}function Mu(s,h,g,T,O,z){return hs(h),h.updateQueue=null,g=Wa(h,T,g,O),Vd(s),T=Gd(),s!==null&&!Pi?(Zd(s,h,z),Qs(s,h,z)):(Dr&&T&&Bd(h),h.flags|=1,ra(s,h,g,z),h.child)}function Wd(s,h,g,T,O){if(hs(h),h.stateNode===null){var z=Fo,Y=g.contextType;typeof Y=="object"&&Y!==null&&(z=bi(Y)),z=new g(T,z),h.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=Wo,h.stateNode=z,z._reactInternals=h,z=h.stateNode,z.props=T,z.state=h.memoizedState,z.refs={},wr(h),Y=g.contextType,z.context=typeof Y=="object"&&Y!==null?bi(Y):Fo,z.state=h.memoizedState,Y=g.getDerivedStateFromProps,typeof Y=="function"&&(Xo(h,g,Y,T),z.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(Y=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),Y!==z.state&&Wo.enqueueReplaceState(z,z.state,null),Nc(h,T,z,O),Us(),z.state=h.memoizedState),typeof z.componentDidMount=="function"&&(h.flags|=4194308),T=!0}else if(s===null){z=h.stateNode;var ue=h.memoizedProps,je=ba(g,ue);z.props=je;var Ue=z.context,pt=g.contextType;Y=Fo,typeof pt=="object"&&pt!==null&&(Y=bi(pt));var bt=g.getDerivedStateFromProps;pt=typeof bt=="function"||typeof z.getSnapshotBeforeUpdate=="function",ue=h.pendingProps!==ue,pt||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(ue||Ue!==Y)&&Fh(h,z,T,Y),ka=!1;var nt=h.memoizedState;z.state=nt,Nc(h,T,z,O),Us(),Ue=h.memoizedState,ue||nt!==Ue||ka?(typeof bt=="function"&&(Xo(h,g,bt,T),Ue=h.memoizedState),(je=ka||Bh(h,g,je,T,nt,Ue,Y))?(pt||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(h.flags|=4194308)):(typeof z.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=T,h.memoizedState=Ue),z.props=T,z.state=Ue,z.context=Y,T=je):(typeof z.componentDidMount=="function"&&(h.flags|=4194308),T=!1)}else{z=h.stateNode,kc(s,h),Y=h.memoizedProps,pt=ba(g,Y),z.props=pt,bt=h.pendingProps,nt=z.context,Ue=g.contextType,je=Fo,typeof Ue=="object"&&Ue!==null&&(je=bi(Ue)),ue=g.getDerivedStateFromProps,(Ue=typeof ue=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Y!==bt||nt!==je)&&Fh(h,z,T,je),ka=!1,nt=h.memoizedState,z.state=nt,Nc(h,T,z,O),Us();var ut=h.memoizedState;Y!==bt||nt!==ut||ka||s!==null&&s.dependencies!==null&&xu(s.dependencies)?(typeof ue=="function"&&(Xo(h,g,ue,T),ut=h.memoizedState),(pt=ka||Bh(h,g,pt,T,nt,ut,je)||s!==null&&s.dependencies!==null&&xu(s.dependencies))?(Ue||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(T,ut,je),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(T,ut,je)),typeof z.componentDidUpdate=="function"&&(h.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof z.componentDidUpdate!="function"||Y===s.memoizedProps&&nt===s.memoizedState||(h.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Y===s.memoizedProps&&nt===s.memoizedState||(h.flags|=1024),h.memoizedProps=T,h.memoizedState=ut),z.props=T,z.state=ut,z.context=je,T=pt):(typeof z.componentDidUpdate!="function"||Y===s.memoizedProps&&nt===s.memoizedState||(h.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Y===s.memoizedProps&&nt===s.memoizedState||(h.flags|=1024),T=!1)}return z=T,Vl(s,h),T=(h.flags&128)!==0,z||T?(z=h.stateNode,g=T&&typeof g.getDerivedStateFromError!="function"?null:z.render(),h.flags|=1,s!==null&&T?(h.child=Si(h,s.child,null,O),h.child=Si(h,null,g,O)):ra(s,h,g,O),h.memoizedState=z.state,s=h.child):s=Qs(s,h,O),s}function Yd(s,h,g,T){return _n(),h.flags|=256,ra(s,h,g,T),h.child}var Hm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xm(s){return{baseLanes:s,cachePool:ip()}}function Wm(s,h,g){return s=s!==null?s.childLanes&~g:0,h&&(s|=es),s}function Jy(s,h,g){var T=h.pendingProps,O=!1,z=(h.flags&128)!==0,Y;if((Y=z)||(Y=s!==null&&s.memoizedState===null?!1:(mn.current&2)!==0),Y&&(O=!0,h.flags&=-129),Y=(h.flags&32)!==0,h.flags&=-33,s===null){if(Dr){if(O?Tn(h):eo(),Dr){var ue=Nn,je;if(je=ue){e:{for(je=ue,ue=Ca;je.nodeType!==8;){if(!ue){ue=null;break e}if(je=rs(je.nextSibling),je===null){ue=null;break e}}ue=je}ue!==null?(h.memoizedState={dehydrated:ue,treeContext:qo!==null?{id:Va,overflow:Pa}:null,retryLane:536870912,hydrationErrors:null},je=Bi(18,null,null,0),je.stateNode=ue,je.return=h,h.child=je,ea=h,Nn=null,je=!0):je=!1}je||Ga(h)}if(ue=h.memoizedState,ue!==null&&(ue=ue.dehydrated,ue!==null))return il(ue)?h.lanes=32:h.lanes=536870912,null;ta(h)}return ue=T.children,T=T.fallback,O?(eo(),O=h.mode,ue=qh({mode:"hidden",children:ue},O),T=$o(T,O,g,null),ue.return=h,T.return=h,ue.sibling=T,h.child=ue,O=h.child,O.memoizedState=Xm(g),O.childLanes=Wm(s,Y,g),h.memoizedState=Hm,T):(Tn(h),cp(h,ue))}if(je=s.memoizedState,je!==null&&(ue=je.dehydrated,ue!==null)){if(z)h.flags&256?(Tn(h),h.flags&=-257,h=up(s,h,g)):h.memoizedState!==null?(eo(),h.child=s.child,h.flags|=128,h=null):(eo(),O=T.fallback,ue=h.mode,T=qh({mode:"visible",children:T.children},ue),O=$o(O,ue,g,null),O.flags|=2,T.return=h,O.return=h,T.sibling=O,h.child=T,Si(h,s.child,null,g),T=h.child,T.memoizedState=Xm(g),T.childLanes=Wm(s,Y,g),h.memoizedState=Hm,h=O);else if(Tn(h),il(ue)){if(Y=ue.nextSibling&&ue.nextSibling.dataset,Y)var Ue=Y.dgst;Y=Ue,T=Error(a(419)),T.stack="",T.digest=Y,Fi({value:T,source:null,stack:null}),h=up(s,h,g)}else if(Pi||Bl(s,h,g,!1),Y=(g&s.childLanes)!==0,Pi||Y){if(Y=On,Y!==null&&(T=g&-g,T=(T&42)!==0?1:qt(T),T=(T&(Y.suspendedLanes|g))!==0?0:T,T!==0&&T!==je.retryLane))throw je.retryLane=T,yo(s,T),ro(Y,s,T),Xd;ue.data==="$?"||xp(),h=up(s,h,g)}else ue.data==="$?"?(h.flags|=192,h.child=s.child,h=null):(s=je.treeContext,Nn=rs(ue.nextSibling),ea=h,Dr=!0,Uo=null,Ca=!1,s!==null&&(Ji[ga++]=Va,Ji[ga++]=Pa,Ji[ga++]=qo,Va=s.id,Pa=s.overflow,qo=h),h=cp(h,T.children),h.flags|=4096);return h}return O?(eo(),O=T.fallback,ue=h.mode,je=s.child,Ue=je.sibling,T=vo(je,{mode:"hidden",children:T.children}),T.subtreeFlags=je.subtreeFlags&65011712,Ue!==null?O=vo(Ue,O):(O=$o(O,ue,g,null),O.flags|=2),O.return=h,T.return=h,T.sibling=O,h.child=T,T=O,O=h.child,ue=s.child.memoizedState,ue===null?ue=Xm(g):(je=ue.cachePool,je!==null?(Ue=ii._currentValue,je=je.parent!==Ue?{parent:Ue,pool:Ue}:je):je=ip(),ue={baseLanes:ue.baseLanes|g,cachePool:je}),O.memoizedState=ue,O.childLanes=Wm(s,Y,g),h.memoizedState=Hm,T):(Tn(h),g=s.child,s=g.sibling,g=vo(g,{mode:"visible",children:T.children}),g.return=h,g.sibling=null,s!==null&&(Y=h.deletions,Y===null?(h.deletions=[s],h.flags|=16):Y.push(s)),h.child=g,h.memoizedState=null,g)}function cp(s,h){return h=qh({mode:"visible",children:h},s.mode),h.return=s,s.child=h}function qh(s,h){return s=Bi(22,s,null,h),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function up(s,h,g){return Si(h,s.child,null,g),s=cp(h,h.pendingProps.children),s.flags|=2,h.memoizedState=null,s}function Ym(s,h,g){s.lanes|=h;var T=s.alternate;T!==null&&(T.lanes|=h),Ll(s.return,h,g)}function Km(s,h,g,T,O){var z=s.memoizedState;z===null?s.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:T,tail:g,tailMode:O}:(z.isBackwards=h,z.rendering=null,z.renderingStartTime=0,z.last=T,z.tail=g,z.tailMode=O)}function ev(s,h,g){var T=h.pendingProps,O=T.revealOrder,z=T.tail;if(ra(s,h,T.children,g),T=mn.current,(T&2)!==0)T=T&1|2,h.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=h.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ym(s,g,h);else if(s.tag===19)Ym(s,g,h);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===h)break e;for(;s.sibling===null;){if(s.return===null||s.return===h)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}T&=1}switch(ct(mn,T),O){case"forwards":for(g=h.child,O=null;g!==null;)s=g.alternate,s!==null&&xa(s)===null&&(O=g),g=g.sibling;g=O,g===null?(O=h.child,h.child=null):(O=g.sibling,g.sibling=null),Km(h,!1,O,g,z);break;case"backwards":for(g=null,O=h.child,h.child=null;O!==null;){if(s=O.alternate,s!==null&&xa(s)===null){h.child=O;break}s=O.sibling,O.sibling=g,g=O,O=s}Km(h,!0,g,null,z);break;case"together":Km(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Qs(s,h,g){if(s!==null&&(h.dependencies=s.dependencies),Jo|=h.lanes,(g&h.childLanes)===0)if(s!==null){if(Bl(s,h,g,!1),(g&h.childLanes)===0)return null}else return null;if(s!==null&&h.child!==s.child)throw Error(a(153));if(h.child!==null){for(s=h.child,g=vo(s,s.pendingProps),h.child=g,g.return=h;s.sibling!==null;)s=s.sibling,g=g.sibling=vo(s,s.pendingProps),g.return=h;g.sibling=null}return h.child}function hp(s,h){return(s.lanes&h)!==0?!0:(s=s.dependencies,!!(s!==null&&xu(s)))}function Dx(s,h,g){switch(h.tag){case 3:ar(h,h.stateNode.containerInfo),ya(h,ii,s.memoizedState.cache),_n();break;case 27:case 5:rr(h);break;case 4:ar(h,h.stateNode.containerInfo);break;case 10:ya(h,h.type,h.memoizedProps.value);break;case 13:var T=h.memoizedState;if(T!==null)return T.dehydrated!==null?(Tn(h),h.flags|=128,null):(g&h.child.childLanes)!==0?Jy(s,h,g):(Tn(h),s=Qs(s,h,g),s!==null?s.sibling:null);Tn(h);break;case 19:var O=(s.flags&128)!==0;if(T=(g&h.childLanes)!==0,T||(Bl(s,h,g,!1),T=(g&h.childLanes)!==0),O){if(T)return ev(s,h,g);h.flags|=128}if(O=h.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),ct(mn,mn.current),T)break;return null;case 22:case 23:return h.lanes=0,Vm(s,h,g);case 24:ya(h,ii,s.memoizedState.cache)}return Qs(s,h,g)}function dp(s,h,g){if(s!==null)if(s.memoizedProps!==h.pendingProps)Pi=!0;else{if(!hp(s,g)&&(h.flags&128)===0)return Pi=!1,Dx(s,h,g);Pi=(s.flags&131072)!==0}else Pi=!1,Dr&&(h.flags&1048576)!==0&&yu(h,Dl,h.index);switch(h.lanes=0,h.tag){case 16:e:{s=h.pendingProps;var T=h.elementType,O=T._init;if(T=O(T._payload),h.type=T,typeof T=="function")zd(T)?(s=ba(T,s),h.tag=1,h=Wd(null,h,T,s,g)):(h.tag=0,h=Zm(null,h,T,s,g));else{if(T!=null){if(O=T.$$typeof,O===ce){h.tag=11,h=sp(null,h,T,s,g);break e}else if(O===he){h.tag=14,h=Qy(null,h,T,s,g);break e}}throw h=st(T)||T,Error(a(306,h,""))}}return h;case 0:return Zm(s,h,h.type,h.pendingProps,g);case 1:return T=h.type,O=ba(T,h.pendingProps),Wd(s,h,T,O,g);case 3:e:{if(ar(h,h.stateNode.containerInfo),s===null)throw Error(a(387));T=h.pendingProps;var z=h.memoizedState;O=z.element,kc(s,h),Nc(h,T,null,g);var Y=h.memoizedState;if(T=Y.cache,ya(h,ii,T),T!==z.cache&&Ec(h,[ii],g,!0),Us(),T=Y.element,z.isDehydrated)if(z={element:T,isDehydrated:!1,cache:Y.cache},h.updateQueue.baseState=z,h.memoizedState=z,h.flags&256){h=Yd(s,h,T,g);break e}else if(T!==O){O=ma(Error(a(424)),h),Fi(O),h=Yd(s,h,T,g);break e}else{switch(s=h.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Nn=rs(s.firstChild),ea=h,Dr=!0,Uo=null,Ca=!0,g=Rn(h,null,T,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(_n(),T===O){h=Qs(s,h,g);break e}ra(s,h,T,g)}h=h.child}return h;case 26:return Vl(s,h),s===null?(g=Fp(h.type,null,h.pendingProps,null))?h.memoizedState=g:Dr||(g=h.type,s=h.pendingProps,T=rd(zt.current).createElement(g),T[Hr]=h,T[Ar]=s,Zi(T,g,s),fn(T),h.stateNode=T):h.memoizedState=Fp(h.type,s.memoizedProps,h.pendingProps,s.memoizedState),null;case 27:return rr(h),s===null&&Dr&&(T=h.stateNode=Ov(h.type,h.pendingProps,zt.current),ea=h,Ca=!0,O=Nn,ec(h.type)?(zp=O,Nn=rs(T.firstChild)):Nn=O),ra(s,h,h.pendingProps.children,g),Vl(s,h),s===null&&(h.flags|=4194304),h.child;case 5:return s===null&&Dr&&((O=T=Nn)&&(T=Yx(T,h.type,h.pendingProps,Ca),T!==null?(h.stateNode=T,ea=h,Nn=rs(T.firstChild),Ca=!1,O=!0):O=!1),O||Ga(h)),rr(h),O=h.type,z=h.pendingProps,Y=s!==null?s.memoizedProps:null,T=z.children,Rp(O,z)?T=null:Y!==null&&Rp(O,Y)&&(h.flags|=32),h.memoizedState!==null&&(O=ji(s,h,Ul,null,null,g),w._currentValue=O),Vl(s,h),ra(s,h,T,g),h.child;case 6:return s===null&&Dr&&((s=g=Nn)&&(g=Ev(g,h.pendingProps,Ca),g!==null?(h.stateNode=g,ea=h,Nn=null,s=!0):s=!1),s||Ga(h)),null;case 13:return Jy(s,h,g);case 4:return ar(h,h.stateNode.containerInfo),T=h.pendingProps,s===null?h.child=Si(h,null,T,g):ra(s,h,T,g),h.child;case 11:return sp(s,h,h.type,h.pendingProps,g);case 7:return ra(s,h,h.pendingProps,g),h.child;case 8:return ra(s,h,h.pendingProps.children,g),h.child;case 12:return ra(s,h,h.pendingProps.children,g),h.child;case 10:return T=h.pendingProps,ya(h,h.type,T.value),ra(s,h,T.children,g),h.child;case 9:return O=h.type._context,T=h.pendingProps.children,hs(h),O=bi(O),T=T(O),h.flags|=1,ra(s,h,T,g),h.child;case 14:return Qy(s,h,h.type,h.pendingProps,g);case 15:return lp(s,h,h.type,h.pendingProps,g);case 19:return ev(s,h,g);case 31:return T=h.pendingProps,g=h.mode,T={mode:T.mode,children:T.children},s===null?(g=qh(T,g),g.ref=h.ref,h.child=g,g.return=h,h=g):(g=vo(s.child,T),g.ref=h.ref,h.child=g,g.return=h,h=g),h;case 22:return Vm(s,h,g);case 24:return hs(h),T=bi(ii),s===null?(O=Fd(),O===null&&(O=On,z=Eh(),O.pooledCache=z,z.refCount++,z!==null&&(O.pooledCacheLanes|=g),O=z),h.memoizedState={parent:T,cache:O},wr(h),ya(h,ii,O)):((s.lanes&g)!==0&&(kc(s,h),Nc(h,null,null,g),Us()),O=s.memoizedState,z=h.memoizedState,O.parent!==T?(O={parent:T,cache:T},h.memoizedState=O,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=O),ya(h,ii,T)):(T=z.cache,ya(h,ii,T),T!==O.cache&&Ec(h,[ii],g,!0))),ra(s,h,h.pendingProps.children,g),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function Js(s){s.flags|=4}function fp(s,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Up(h)){if(h=sn.current,h!==null&&((Ir&4194048)===Ir?Un!==null:(Ir&62914560)!==Ir&&(Ir&536870912)===0||h!==Un))throw ps=xo,$d;s.flags|=8192}}function $c(s,h){h!==null&&(s.flags|=4),s.flags&16384&&(h=s.tag!==22?mt():536870912,s.lanes|=h,Eu|=h)}function Ei(s,h){if(!Dr)switch(s.tailMode){case"hidden":h=s.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?s.tail=null:g.sibling=null;break;case"collapsed":g=s.tail;for(var T=null;g!==null;)g.alternate!==null&&(T=g),g=g.sibling;T===null?h||s.tail===null?s.tail=null:s.tail.sibling=null:T.sibling=null}}function Vn(s){var h=s.alternate!==null&&s.alternate.child===s.child,g=0,T=0;if(h)for(var O=s.child;O!==null;)g|=O.lanes|O.childLanes,T|=O.subtreeFlags&65011712,T|=O.flags&65011712,O.return=s,O=O.sibling;else for(O=s.child;O!==null;)g|=O.lanes|O.childLanes,T|=O.subtreeFlags,T|=O.flags,O.return=s,O=O.sibling;return s.subtreeFlags|=T,s.childLanes=g,h}function Qm(s,h,g){var T=h.pendingProps;switch(zl(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(h),null;case 1:return Vn(h),null;case 3:return g=h.stateNode,T=null,s!==null&&(T=s.memoizedState.cache),h.memoizedState.cache!==T&&(h.flags|=2048),va(ii),Ot(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(Pc(h)?Js(h):s===null||s.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Ls())),Vn(h),null;case 26:return g=h.memoizedState,s===null?(Js(h),g!==null?(Vn(h),fp(h,g)):(Vn(h),h.flags&=-16777217)):g?g!==s.memoizedState?(Js(h),Vn(h),fp(h,g)):(Vn(h),h.flags&=-16777217):(s.memoizedProps!==T&&Js(h),Vn(h),h.flags&=-16777217),null;case 27:or(h),g=zt.current;var O=h.type;if(s!==null&&h.stateNode!=null)s.memoizedProps!==T&&Js(h);else{if(!T){if(h.stateNode===null)throw Error(a(166));return Vn(h),null}s=jt.current,Pc(h)?jc(h):(s=Ov(O,T,g),h.stateNode=s,Js(h))}return Vn(h),null;case 5:if(or(h),g=h.type,s!==null&&h.stateNode!=null)s.memoizedProps!==T&&Js(h);else{if(!T){if(h.stateNode===null)throw Error(a(166));return Vn(h),null}if(s=jt.current,Pc(h))jc(h);else{switch(O=rd(zt.current),s){case 1:s=O.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:s=O.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":s=O.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":s=O.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":s=O.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof T.is=="string"?O.createElement("select",{is:T.is}):O.createElement("select"),T.multiple?s.multiple=!0:T.size&&(s.size=T.size);break;default:s=typeof T.is=="string"?O.createElement(g,{is:T.is}):O.createElement(g)}}s[Hr]=h,s[Ar]=T;e:for(O=h.child;O!==null;){if(O.tag===5||O.tag===6)s.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===h)break e;for(;O.sibling===null;){if(O.return===null||O.return===h)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}h.stateNode=s;e:switch(Zi(s,g,T),g){case"button":case"input":case"select":case"textarea":s=!!T.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Js(h)}}return Vn(h),h.flags&=-16777217,null;case 6:if(s&&h.stateNode!=null)s.memoizedProps!==T&&Js(h);else{if(typeof T!="string"&&h.stateNode===null)throw Error(a(166));if(s=zt.current,Pc(h)){if(s=h.stateNode,g=h.memoizedProps,T=null,O=ea,O!==null)switch(O.tag){case 27:case 5:T=O.memoizedProps}s[Hr]=h,s=!!(s.nodeValue===g||T!==null&&T.suppressHydrationWarning===!0||Av(s.nodeValue,g)),s||Ga(h)}else s=rd(s).createTextNode(T),s[Hr]=h,h.stateNode=s}return Vn(h),null;case 13:if(T=h.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(O=Pc(h),T!==null&&T.dehydrated!==null){if(s===null){if(!O)throw Error(a(318));if(O=h.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(a(317));O[Hr]=h}else _n(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Vn(h),O=!1}else O=Ls(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=O),O=!0;if(!O)return h.flags&256?(ta(h),h):(ta(h),null)}if(ta(h),(h.flags&128)!==0)return h.lanes=g,h;if(g=T!==null,s=s!==null&&s.memoizedState!==null,g){T=h.child,O=null,T.alternate!==null&&T.alternate.memoizedState!==null&&T.alternate.memoizedState.cachePool!==null&&(O=T.alternate.memoizedState.cachePool.pool);var z=null;T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(z=T.memoizedState.cachePool.pool),z!==O&&(T.flags|=2048)}return g!==s&&g&&(h.child.flags|=8192),$c(h,h.updateQueue),Vn(h),null;case 4:return Ot(),s===null&&Op(h.stateNode.containerInfo),Vn(h),null;case 10:return va(h.type),Vn(h),null;case 19:if(lt(mn),O=h.memoizedState,O===null)return Vn(h),null;if(T=(h.flags&128)!==0,z=O.rendering,z===null)if(T)Ei(O,!1);else{if(Zn!==0||s!==null&&(s.flags&128)!==0)for(s=h.child;s!==null;){if(z=xa(s),z!==null){for(h.flags|=128,Ei(O,!1),s=z.updateQueue,h.updateQueue=s,$c(h,s),h.subtreeFlags=0,s=g,g=h.child;g!==null;)Ac(g,s),g=g.sibling;return ct(mn,mn.current&1|2),h.child}s=s.sibling}O.tail!==null&&Qr()>rf&&(h.flags|=128,T=!0,Ei(O,!1),h.lanes=4194304)}else{if(!T)if(s=xa(z),s!==null){if(h.flags|=128,T=!0,s=s.updateQueue,h.updateQueue=s,$c(h,s),Ei(O,!0),O.tail===null&&O.tailMode==="hidden"&&!z.alternate&&!Dr)return Vn(h),null}else 2*Qr()-O.renderingStartTime>rf&&g!==536870912&&(h.flags|=128,T=!0,Ei(O,!1),h.lanes=4194304);O.isBackwards?(z.sibling=h.child,h.child=z):(s=O.last,s!==null?s.sibling=z:h.child=z,O.last=z)}return O.tail!==null?(h=O.tail,O.rendering=h,O.tail=h.sibling,O.renderingStartTime=Qr(),h.sibling=null,s=mn.current,ct(mn,T?s&1|2:s&1),h):(Vn(h),null);case 22:case 23:return ta(h),kh(),T=h.memoizedState!==null,s!==null?s.memoizedState!==null!==T&&(h.flags|=8192):T&&(h.flags|=8192),T?(g&536870912)!==0&&(h.flags&128)===0&&(Vn(h),h.subtreeFlags&6&&(h.flags|=8192)):Vn(h),g=h.updateQueue,g!==null&&$c(h,g.retryQueue),g=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),T=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(T=h.memoizedState.cachePool.pool),T!==g&&(h.flags|=2048),s!==null&&lt(_a),null;case 24:return g=null,s!==null&&(g=s.memoizedState.cache),h.memoizedState.cache!==g&&(h.flags|=2048),va(ii),Vn(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function zx(s,h){switch(zl(h),h.tag){case 1:return s=h.flags,s&65536?(h.flags=s&-65537|128,h):null;case 3:return va(ii),Ot(),s=h.flags,(s&65536)!==0&&(s&128)===0?(h.flags=s&-65537|128,h):null;case 26:case 27:case 5:return or(h),null;case 13:if(ta(h),s=h.memoizedState,s!==null&&s.dehydrated!==null){if(h.alternate===null)throw Error(a(340));_n()}return s=h.flags,s&65536?(h.flags=s&-65537|128,h):null;case 19:return lt(mn),null;case 4:return Ot(),null;case 10:return va(h.type),null;case 22:case 23:return ta(h),kh(),s!==null&&lt(_a),s=h.flags,s&65536?(h.flags=s&-65537|128,h):null;case 24:return va(ii),null;case 25:return null;default:return null}}function Jm(s,h){switch(zl(h),h.tag){case 3:va(ii),Ot();break;case 26:case 27:case 5:or(h);break;case 4:Ot();break;case 13:ta(h);break;case 19:lt(mn);break;case 10:va(h.type);break;case 22:case 23:ta(h),kh(),s!==null&&lt(_a);break;case 24:va(ii)}}function Kd(s,h){try{var g=h.updateQueue,T=g!==null?g.lastEffect:null;if(T!==null){var O=T.next;g=O;do{if((g.tag&s)===s){T=void 0;var z=g.create,Y=g.inst;T=z(),Y.destroy=T}g=g.next}while(g!==O)}}catch(ue){xn(h,h.return,ue)}}function qc(s,h,g){try{var T=h.updateQueue,O=T!==null?T.lastEffect:null;if(O!==null){var z=O.next;T=z;do{if((T.tag&s)===s){var Y=T.inst,ue=Y.destroy;if(ue!==void 0){Y.destroy=void 0,O=h;var je=g,Ue=ue;try{Ue()}catch(pt){xn(O,je,pt)}}}T=T.next}while(T!==z)}}catch(pt){xn(h,h.return,pt)}}function eg(s){var h=s.updateQueue;if(h!==null){var g=s.stateNode;try{Ud(h,g)}catch(T){xn(s,s.return,T)}}}function tv(s,h,g){g.props=ba(s.type,s.memoizedProps),g.state=s.memoizedState;try{g.componentWillUnmount()}catch(T){xn(s,h,T)}}function ju(s,h){try{var g=s.ref;if(g!==null){switch(s.tag){case 26:case 27:case 5:var T=s.stateNode;break;case 30:T=s.stateNode;break;default:T=s.stateNode}typeof g=="function"?s.refCleanup=g(T):g.current=T}}catch(O){xn(s,h,O)}}function xs(s,h){var g=s.ref,T=s.refCleanup;if(g!==null)if(typeof T=="function")try{T()}catch(O){xn(s,h,O)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(O){xn(s,h,O)}else g.current=null}function tg(s){var h=s.type,g=s.memoizedProps,T=s.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":g.autoFocus&&T.focus();break e;case"img":g.src?T.src=g.src:g.srcSet&&(T.srcset=g.srcSet)}}catch(O){xn(s,s.return,O)}}function rg(s,h,g){try{var T=s.stateNode;Mv(T,s.type,g,h),T[Ar]=h}catch(O){xn(s,s.return,O)}}function rv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ec(s.type)||s.tag===4}function ng(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||rv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ec(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Uh(s,h,g){var T=s.tag;if(T===5||T===6)s=s.stateNode,h?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(s,h):(h=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,h.appendChild(s),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=td));else if(T!==4&&(T===27&&ec(s.type)&&(g=s.stateNode,h=null),s=s.child,s!==null))for(Uh(s,h,g),s=s.sibling;s!==null;)Uh(s,h,g),s=s.sibling}function Vh(s,h,g){var T=s.tag;if(T===5||T===6)s=s.stateNode,h?g.insertBefore(s,h):g.appendChild(s);else if(T!==4&&(T===27&&ec(s.type)&&(g=s.stateNode),s=s.child,s!==null))for(Vh(s,h,g),s=s.sibling;s!==null;)Vh(s,h,g),s=s.sibling}function ig(s){var h=s.stateNode,g=s.memoizedProps;try{for(var T=s.type,O=h.attributes;O.length;)h.removeAttributeNode(O[0]);Zi(h,T,g),h[Hr]=s,h[Ar]=g}catch(z){xn(s,s.return,z)}}var Ra=!1,Dn=!1,ag=!1,nv=typeof WeakSet=="function"?WeakSet:Set,Vi=null;function Lx(s,h){if(s=s.containerInfo,kp=K,s=Ah(s),uu(s)){if("selectionStart"in s)var g={start:s.selectionStart,end:s.selectionEnd};else e:{g=(g=s.ownerDocument)&&g.defaultView||window;var T=g.getSelection&&g.getSelection();if(T&&T.rangeCount!==0){g=T.anchorNode;var O=T.anchorOffset,z=T.focusNode;T=T.focusOffset;try{g.nodeType,z.nodeType}catch{g=null;break e}var Y=0,ue=-1,je=-1,Ue=0,pt=0,bt=s,nt=null;t:for(;;){for(var ut;bt!==g||O!==0&&bt.nodeType!==3||(ue=Y+O),bt!==z||T!==0&&bt.nodeType!==3||(je=Y+T),bt.nodeType===3&&(Y+=bt.nodeValue.length),(ut=bt.firstChild)!==null;)nt=bt,bt=ut;for(;;){if(bt===s)break t;if(nt===g&&++Ue===O&&(ue=Y),nt===z&&++pt===T&&(je=Y),(ut=bt.nextSibling)!==null)break;bt=nt,nt=bt.parentNode}bt=ut}g=ue===-1||je===-1?null:{start:ue,end:je}}else g=null}g=g||{start:0,end:0}}else g=null;for(Np={focusedElem:s,selectionRange:g},K=!1,Vi=h;Vi!==null;)if(h=Vi,s=h.child,(h.subtreeFlags&1024)!==0&&s!==null)s.return=h,Vi=s;else for(;Vi!==null;){switch(h=Vi,z=h.alternate,s=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&z!==null){s=void 0,g=h,O=z.memoizedProps,z=z.memoizedState,T=g.stateNode;try{var cr=ba(g.type,O,g.elementType===g.type);s=T.getSnapshotBeforeUpdate(cr,z),T.__reactInternalSnapshotBeforeUpdate=s}catch(ir){xn(g,g.return,ir)}}break;case 3:if((s&1024)!==0){if(s=h.stateNode.containerInfo,g=s.nodeType,g===9)Dp(s);else if(g===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Dp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(a(163))}if(s=h.sibling,s!==null){s.return=h.return,Vi=s;break}Vi=h.return}}function iv(s,h,g){var T=g.flags;switch(g.tag){case 0:case 11:case 15:Zl(s,g),T&4&&Kd(5,g);break;case 1:if(Zl(s,g),T&4)if(s=g.stateNode,h===null)try{s.componentDidMount()}catch(Y){xn(g,g.return,Y)}else{var O=ba(g.type,h.memoizedProps);h=h.memoizedState;try{s.componentDidUpdate(O,h,s.__reactInternalSnapshotBeforeUpdate)}catch(Y){xn(g,g.return,Y)}}T&64&&eg(g),T&512&&ju(g,g.return);break;case 3:if(Zl(s,g),T&64&&(s=g.updateQueue,s!==null)){if(h=null,g.child!==null)switch(g.child.tag){case 27:case 5:h=g.child.stateNode;break;case 1:h=g.child.stateNode}try{Ud(s,h)}catch(Y){xn(g,g.return,Y)}}break;case 27:h===null&&T&4&&ig(g);case 26:case 5:Zl(s,g),h===null&&T&4&&tg(g),T&512&&ju(g,g.return);break;case 12:Zl(s,g);break;case 13:Zl(s,g),T&4&&Gh(s,g),T&64&&(s=g.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(g=Tp.bind(null,g),Cv(s,g))));break;case 22:if(T=g.memoizedState!==null||Ra,!T){h=h!==null&&h.memoizedState!==null||Dn,O=Ra;var z=Dn;Ra=T,(Dn=h)&&!z?Ko(s,g,(g.subtreeFlags&8772)!==0):Zl(s,g),Ra=O,Dn=z}break;case 30:break;default:Zl(s,g)}}function av(s){var h=s.alternate;h!==null&&(s.alternate=null,av(h)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(h=s.stateNode,h!==null&&Yn(h)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Gn=null,wa=!1;function Gl(s,h,g){for(g=g.child;g!==null;)og(s,h,g),g=g.sibling}function og(s,h,g){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(Ri,g)}catch{}switch(g.tag){case 26:Dn||xs(g,h),Gl(s,h,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Dn||xs(g,h);var T=Gn,O=wa;ec(g.type)&&(Gn=g.stateNode,wa=!1),Gl(s,h,g),uf(g.stateNode),Gn=T,wa=O;break;case 5:Dn||xs(g,h);case 6:if(T=Gn,O=wa,Gn=null,Gl(s,h,g),Gn=T,wa=O,Gn!==null)if(wa)try{(Gn.nodeType===9?Gn.body:Gn.nodeName==="HTML"?Gn.ownerDocument.body:Gn).removeChild(g.stateNode)}catch(z){xn(g,h,z)}else try{Gn.removeChild(g.stateNode)}catch(z){xn(g,h,z)}break;case 18:Gn!==null&&(wa?(s=Gn,Tg(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,g.stateNode),ia(s)):Tg(Gn,g.stateNode));break;case 4:T=Gn,O=wa,Gn=g.stateNode.containerInfo,wa=!0,Gl(s,h,g),Gn=T,wa=O;break;case 0:case 11:case 14:case 15:Dn||qc(2,g,h),Dn||qc(4,g,h),Gl(s,h,g);break;case 1:Dn||(xs(g,h),T=g.stateNode,typeof T.componentWillUnmount=="function"&&tv(g,h,T)),Gl(s,h,g);break;case 21:Gl(s,h,g);break;case 22:Dn=(T=Dn)||g.memoizedState!==null,Gl(s,h,g),Dn=T;break;default:Gl(s,h,g)}}function Gh(s,h){if(h.memoizedState===null&&(s=h.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ia(s)}catch(g){xn(h,h.return,g)}}function Bx(s){switch(s.tag){case 13:case 19:var h=s.stateNode;return h===null&&(h=s.stateNode=new nv),h;case 22:return s=s.stateNode,h=s._retryCache,h===null&&(h=s._retryCache=new nv),h;default:throw Error(a(435,s.tag))}}function zn(s,h){var g=Bx(s);h.forEach(function(T){var O=Ap.bind(null,s,T);g.has(T)||(g.add(T),T.then(O,O))})}function Gi(s,h){var g=h.deletions;if(g!==null)for(var T=0;T<g.length;T++){var O=g[T],z=s,Y=h,ue=Y;e:for(;ue!==null;){switch(ue.tag){case 27:if(ec(ue.type)){Gn=ue.stateNode,wa=!1;break e}break;case 5:Gn=ue.stateNode,wa=!1;break e;case 3:case 4:Gn=ue.stateNode.containerInfo,wa=!0;break e}ue=ue.return}if(Gn===null)throw Error(a(160));og(z,Y,O),Gn=null,wa=!1,z=O.alternate,z!==null&&(z.return=null),O.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)Qd(h,s),h=h.sibling}var Yo=null;function Qd(s,h){var g=s.alternate,T=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Gi(h,s),Sa(s),T&4&&(qc(3,s,s.return),Kd(3,s),qc(5,s,s.return));break;case 1:Gi(h,s),Sa(s),T&512&&(Dn||g===null||xs(g,g.return)),T&64&&Ra&&(s=s.updateQueue,s!==null&&(T=s.callbacks,T!==null&&(g=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=g===null?T:g.concat(T))));break;case 26:var O=Yo;if(Gi(h,s),Sa(s),T&512&&(Dn||g===null||xs(g,g.return)),T&4){var z=g!==null?g.memoizedState:null;if(T=s.memoizedState,g===null)if(T===null)if(s.stateNode===null){e:{T=s.type,g=s.memoizedProps,O=O.ownerDocument||O;t:switch(T){case"title":z=O.getElementsByTagName("title")[0],(!z||z[Mi]||z[Hr]||z.namespaceURI==="http://www.w3.org/2000/svg"||z.hasAttribute("itemprop"))&&(z=O.createElement(T),O.head.insertBefore(z,O.querySelector("head > title"))),Zi(z,T,g),z[Hr]=s,fn(z),T=z;break e;case"link":var Y=qp("link","href",O).get(T+(g.href||""));if(Y){for(var ue=0;ue<Y.length;ue++)if(z=Y[ue],z.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&z.getAttribute("rel")===(g.rel==null?null:g.rel)&&z.getAttribute("title")===(g.title==null?null:g.title)&&z.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){Y.splice(ue,1);break t}}z=O.createElement(T),Zi(z,T,g),O.head.appendChild(z);break;case"meta":if(Y=qp("meta","content",O).get(T+(g.content||""))){for(ue=0;ue<Y.length;ue++)if(z=Y[ue],z.getAttribute("content")===(g.content==null?null:""+g.content)&&z.getAttribute("name")===(g.name==null?null:g.name)&&z.getAttribute("property")===(g.property==null?null:g.property)&&z.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&z.getAttribute("charset")===(g.charSet==null?null:g.charSet)){Y.splice(ue,1);break t}}z=O.createElement(T),Zi(z,T,g),O.head.appendChild(z);break;default:throw Error(a(468,T))}z[Hr]=s,fn(z),T=z}s.stateNode=T}else pf(O,s.type,s.stateNode);else s.stateNode=$p(O,T,s.memoizedProps);else z!==T?(z===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):z.count--,T===null?pf(O,s.type,s.stateNode):$p(O,T,s.memoizedProps)):T===null&&s.stateNode!==null&&rg(s,s.memoizedProps,g.memoizedProps)}break;case 27:Gi(h,s),Sa(s),T&512&&(Dn||g===null||xs(g,g.return)),g!==null&&T&4&&rg(s,s.memoizedProps,g.memoizedProps);break;case 5:if(Gi(h,s),Sa(s),T&512&&(Dn||g===null||xs(g,g.return)),s.flags&32){O=s.stateNode;try{ko(O,"")}catch(ut){xn(s,s.return,ut)}}T&4&&s.stateNode!=null&&(O=s.memoizedProps,rg(s,O,g!==null?g.memoizedProps:O)),T&1024&&(ag=!0);break;case 6:if(Gi(h,s),Sa(s),T&4){if(s.stateNode===null)throw Error(a(162));T=s.memoizedProps,g=s.stateNode;try{g.nodeValue=T}catch(ut){xn(s,s.return,ut)}}break;case 3:if(ff=null,O=Yo,Yo=Lu(h.containerInfo),Gi(h,s),Yo=O,Sa(s),T&4&&g!==null&&g.memoizedState.isDehydrated)try{ia(h.containerInfo)}catch(ut){xn(s,s.return,ut)}ag&&(ag=!1,Zh(s));break;case 4:T=Yo,Yo=Lu(s.stateNode.containerInfo),Gi(h,s),Sa(s),Yo=T;break;case 12:Gi(h,s),Sa(s);break;case 13:Gi(h,s),Sa(s),s.child.flags&8192&&s.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(Cu=Qr()),T&4&&(T=s.updateQueue,T!==null&&(s.updateQueue=null,zn(s,T)));break;case 22:O=s.memoizedState!==null;var je=g!==null&&g.memoizedState!==null,Ue=Ra,pt=Dn;if(Ra=Ue||O,Dn=pt||je,Gi(h,s),Dn=pt,Ra=Ue,Sa(s),T&8192)e:for(h=s.stateNode,h._visibility=O?h._visibility&-2:h._visibility|1,O&&(g===null||je||Ra||Dn||Uc(s)),g=null,h=s;;){if(h.tag===5||h.tag===26){if(g===null){je=g=h;try{if(z=je.stateNode,O)Y=z.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{ue=je.stateNode;var bt=je.memoizedProps.style,nt=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;ue.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch(ut){xn(je,je.return,ut)}}}else if(h.tag===6){if(g===null){je=h;try{je.stateNode.nodeValue=O?"":je.memoizedProps}catch(ut){xn(je,je.return,ut)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===s)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;g===h&&(g=null),h=h.return}g===h&&(g=null),h.sibling.return=h.return,h=h.sibling}T&4&&(T=s.updateQueue,T!==null&&(g=T.retryQueue,g!==null&&(T.retryQueue=null,zn(s,g))));break;case 19:Gi(h,s),Sa(s),T&4&&(T=s.updateQueue,T!==null&&(s.updateQueue=null,zn(s,T)));break;case 30:break;case 21:break;default:Gi(h,s),Sa(s)}}function Sa(s){var h=s.flags;if(h&2){try{for(var g,T=s.return;T!==null;){if(rv(T)){g=T;break}T=T.return}if(g==null)throw Error(a(160));switch(g.tag){case 27:var O=g.stateNode,z=ng(s);Vh(s,z,O);break;case 5:var Y=g.stateNode;g.flags&32&&(ko(Y,""),g.flags&=-33);var ue=ng(s);Vh(s,ue,Y);break;case 3:case 4:var je=g.stateNode.containerInfo,Ue=ng(s);Uh(s,Ue,je);break;default:throw Error(a(161))}}catch(pt){xn(s,s.return,pt)}s.flags&=-3}h&4096&&(s.flags&=-4097)}function Zh(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var h=s;Zh(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),s=s.sibling}}function Zl(s,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)iv(s,h.alternate,h),h=h.sibling}function Uc(s){for(s=s.child;s!==null;){var h=s;switch(h.tag){case 0:case 11:case 14:case 15:qc(4,h,h.return),Uc(h);break;case 1:xs(h,h.return);var g=h.stateNode;typeof g.componentWillUnmount=="function"&&tv(h,h.return,g),Uc(h);break;case 27:uf(h.stateNode);case 26:case 5:xs(h,h.return),Uc(h);break;case 22:h.memoizedState===null&&Uc(h);break;case 30:Uc(h);break;default:Uc(h)}s=s.sibling}}function Ko(s,h,g){for(g=g&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var T=h.alternate,O=s,z=h,Y=z.flags;switch(z.tag){case 0:case 11:case 15:Ko(O,z,g),Kd(4,z);break;case 1:if(Ko(O,z,g),T=z,O=T.stateNode,typeof O.componentDidMount=="function")try{O.componentDidMount()}catch(Ue){xn(T,T.return,Ue)}if(T=z,O=T.updateQueue,O!==null){var ue=T.stateNode;try{var je=O.shared.hiddenCallbacks;if(je!==null)for(O.shared.hiddenCallbacks=null,O=0;O<je.length;O++)qd(je[O],ue)}catch(Ue){xn(T,T.return,Ue)}}g&&Y&64&&eg(z),ju(z,z.return);break;case 27:ig(z);case 26:case 5:Ko(O,z,g),g&&T===null&&Y&4&&tg(z),ju(z,z.return);break;case 12:Ko(O,z,g);break;case 13:Ko(O,z,g),g&&Y&4&&Gh(O,z);break;case 22:z.memoizedState===null&&Ko(O,z,g),ju(z,z.return);break;case 30:break;default:Ko(O,z,g)}h=h.sibling}}function Jd(s,h){var g=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),s=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(s=h.memoizedState.cachePool.pool),s!==g&&(s!=null&&s.refCount++,g!=null&&Go(g))}function Vc(s,h){s=null,h.alternate!==null&&(s=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==s&&(h.refCount++,s!=null&&Go(s))}function To(s,h,g,T){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Pu(s,h,g,T),h=h.sibling}function Pu(s,h,g,T){var O=h.flags;switch(h.tag){case 0:case 11:case 15:To(s,h,g,T),O&2048&&Kd(9,h);break;case 1:To(s,h,g,T);break;case 3:To(s,h,g,T),O&2048&&(s=null,h.alternate!==null&&(s=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==s&&(h.refCount++,s!=null&&Go(s)));break;case 12:if(O&2048){To(s,h,g,T),s=h.stateNode;try{var z=h.memoizedProps,Y=z.id,ue=z.onPostCommit;typeof ue=="function"&&ue(Y,h.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(je){xn(h,h.return,je)}}else To(s,h,g,T);break;case 13:To(s,h,g,T);break;case 23:break;case 22:z=h.stateNode,Y=h.alternate,h.memoizedState!==null?z._visibility&2?To(s,h,g,T):ef(s,h):z._visibility&2?To(s,h,g,T):(z._visibility|=2,el(s,h,g,T,(h.subtreeFlags&10256)!==0)),O&2048&&Jd(Y,h);break;case 24:To(s,h,g,T),O&2048&&Vc(h.alternate,h);break;default:To(s,h,g,T)}}function el(s,h,g,T,O){for(O=O&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var z=s,Y=h,ue=g,je=T,Ue=Y.flags;switch(Y.tag){case 0:case 11:case 15:el(z,Y,ue,je,O),Kd(8,Y);break;case 23:break;case 22:var pt=Y.stateNode;Y.memoizedState!==null?pt._visibility&2?el(z,Y,ue,je,O):ef(z,Y):(pt._visibility|=2,el(z,Y,ue,je,O)),O&&Ue&2048&&Jd(Y.alternate,Y);break;case 24:el(z,Y,ue,je,O),O&&Ue&2048&&Vc(Y.alternate,Y);break;default:el(z,Y,ue,je,O)}h=h.sibling}}function ef(s,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var g=s,T=h,O=T.flags;switch(T.tag){case 22:ef(g,T),O&2048&&Jd(T.alternate,T);break;case 24:ef(g,T),O&2048&&Vc(T.alternate,T);break;default:ef(g,T)}h=h.sibling}}var Hh=8192;function Qo(s){if(s.subtreeFlags&Hh)for(s=s.child;s!==null;)ov(s),s=s.sibling}function ov(s){switch(s.tag){case 26:Qo(s),s.flags&Hh&&s.memoizedState!==null&&e0(Yo,s.memoizedState,s.memoizedProps);break;case 5:Qo(s);break;case 3:case 4:var h=Yo;Yo=Lu(s.stateNode.containerInfo),Qo(s),Yo=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=Hh,Hh=16777216,Qo(s),Hh=h):Qo(s));break;default:Qo(s)}}function sg(s){var h=s.alternate;if(h!==null&&(s=h.child,s!==null)){h.child=null;do h=s.sibling,s.sibling=null,s=h;while(s!==null)}}function Hl(s){var h=s.deletions;if((s.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var T=h[g];Vi=T,lg(T,s)}sg(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)pp(s),s=s.sibling}function pp(s){switch(s.tag){case 0:case 11:case 15:Hl(s),s.flags&2048&&qc(9,s,s.return);break;case 3:Hl(s);break;case 12:Hl(s);break;case 22:var h=s.stateNode;s.memoizedState!==null&&h._visibility&2&&(s.return===null||s.return.tag!==13)?(h._visibility&=-3,tf(s)):Hl(s);break;default:Hl(s)}}function tf(s){var h=s.deletions;if((s.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var T=h[g];Vi=T,lg(T,s)}sg(s)}for(s=s.child;s!==null;){switch(h=s,h.tag){case 0:case 11:case 15:qc(8,h,h.return),tf(h);break;case 22:g=h.stateNode,g._visibility&2&&(g._visibility&=-3,tf(h));break;default:tf(h)}s=s.sibling}}function lg(s,h){for(;Vi!==null;){var g=Vi;switch(g.tag){case 0:case 11:case 15:qc(8,g,h);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var T=g.memoizedState.cachePool.pool;T!=null&&T.refCount++}break;case 24:Go(g.memoizedState.cache)}if(T=g.child,T!==null)T.return=g,Vi=T;else e:for(g=s;Vi!==null;){T=Vi;var O=T.sibling,z=T.return;if(av(T),T===g){Vi=null;break e}if(O!==null){O.return=z,Vi=O;break e}Vi=z}}}var Fx={getCacheForType:function(s){var h=bi(ii),g=h.data.get(s);return g===void 0&&(g=s(),h.data.set(s,g)),g}},$x=typeof WeakMap=="function"?WeakMap:Map,gn=0,On=null,zr=null,Ir=0,yn=0,Ao=null,Xl=!1,Xh=!1,mp=!1,Wl=0,Zn=0,Jo=0,Yl=0,cg=0,es=0,Eu=0,Wh=null,to=null,ug=!1,Cu=0,rf=1/0,gp=null,Gc=null,na=0,Zc=null,Yh=null,Ou=0,nf=0,yp=null,hg=null,Kh=0,dg=null;function Ta(){if((gn&2)!==0&&Ir!==0)return Ir&-Ir;if(Te.T!==null){var s=Oa;return s!==0?s:yg()}return ei()}function sv(){es===0&&(es=(Ir&536870912)===0||Dr?St():536870912);var s=sn.current;return s!==null&&(s.flags|=32),es}function ro(s,h,g){(s===On&&(yn===2||yn===9)||s.cancelPendingCommit!==null)&&(tl(s,0),Kl(s,Ir,es,!1)),Ht(s,g),((gn&2)===0||s!==On)&&(s===On&&((gn&2)===0&&(Yl|=g),Zn===4&&Kl(s,Ir,es,!1)),ts(s))}function lv(s,h,g){if((gn&6)!==0)throw Error(a(327));var T=!g&&(h&124)===0&&(h&s.expiredLanes)===0||Le(s,h),O=T?uv(s,h):af(s,h,!0),z=T;do{if(O===0){Xh&&!T&&Kl(s,h,0,!1);break}else{if(g=s.current.alternate,z&&!qx(g)){O=af(s,h,!1),z=!1;continue}if(O===2){if(z=h,s.errorRecoveryDisabledLanes&z)var Y=0;else Y=s.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){h=Y;e:{var ue=s;O=Wh;var je=ue.current.memoizedState.isDehydrated;if(je&&(tl(ue,Y).flags|=256),Y=af(ue,Y,!1),Y!==2){if(mp&&!je){ue.errorRecoveryDisabledLanes|=z,Yl|=z,O=4;break e}z=to,to=O,z!==null&&(to===null?to=z:to.push.apply(to,z))}O=Y}if(z=!1,O!==2)continue}}if(O===1){tl(s,0),Kl(s,h,0,!0);break}e:{switch(T=s,z=O,z){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:Kl(T,h,es,!Xl);break e;case 2:to=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(O=Cu+300-Qr(),10<O)){if(Kl(T,h,es,!Xl),Xe(T,0,!0)!==0)break e;T.timeoutHandle=no(cv.bind(null,T,g,to,gp,ug,h,es,Yl,Eu,Xl,z,2,-0,0),O);break e}cv(T,g,to,gp,ug,h,es,Yl,Eu,Xl,z,0,-0,0)}}break}while(!0);ts(s)}function cv(s,h,g,T,O,z,Y,ue,je,Ue,pt,bt,nt,ut){if(s.timeoutHandle=-1,bt=h.subtreeFlags,(bt&8192||(bt&16785408)===16785408)&&(qu={stylesheets:null,count:0,unsuspend:Eg},ov(h),bt=c(),bt!==null)){s.cancelPendingCommit=bt(pv.bind(null,s,h,z,g,T,O,Y,ue,je,pt,1,nt,ut)),Kl(s,z,Y,!Ue);return}pv(s,h,z,g,T,O,Y,ue,je)}function qx(s){for(var h=s;;){var g=h.tag;if((g===0||g===11||g===15)&&h.flags&16384&&(g=h.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var T=0;T<g.length;T++){var O=g[T],z=O.getSnapshot;O=O.value;try{if(!fa(z(),O))return!1}catch{return!1}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===s)break;for(;h.sibling===null;){if(h.return===null||h.return===s)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Kl(s,h,g,T){h&=~cg,h&=~Yl,s.suspendedLanes|=h,s.pingedLanes&=~h,T&&(s.warmLanes|=h),T=s.expirationTimes;for(var O=h;0<O;){var z=31-Ne(O),Y=1<<z;T[z]=-1,O&=~Y}g!==0&&Or(s,g,h)}function vp(){return(gn&6)===0?(Nu(0),!1):!0}function fg(){if(zr!==null){if(yn===0)var s=zr.return;else s=zr,_o=Vo=null,Hd(s),Ja=null,Ys=0,s=zr;for(;s!==null;)Jm(s.alternate,s),s=s.return;zr=null}}function tl(s,h){var g=s.timeoutHandle;g!==-1&&(s.timeoutHandle=-1,id(g)),g=s.cancelPendingCommit,g!==null&&(s.cancelPendingCommit=null,g()),fg(),On=s,zr=g=vo(s.current,null),Ir=h,yn=0,Ao=null,Xl=!1,Xh=Le(s,h),mp=!1,Eu=es=cg=Yl=Jo=Zn=0,to=Wh=null,ug=!1,(h&8)!==0&&(h|=h&32);var T=s.entangledLanes;if(T!==0)for(s=s.entanglements,T&=h;0<T;){var O=31-Ne(T),z=1<<O;h|=s[O],T&=~z}return Wl=h,Ds(),g}function yi(s,h){Sr=null,Te.H=wi,h===fs||h===$s?(h=Ic(),yn=3):h===$d?(h=Ic(),yn=4):yn=h===Xd?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Ao=h,zr===null&&(Zn=1,Ks(s,ma(h,s.current)))}function _p(){var s=Te.H;return Te.H=wi,s===null?wi:s}function pg(){var s=Te.A;return Te.A=Fx,s}function xp(){Zn=4,Xl||(Ir&4194048)!==Ir&&sn.current!==null||(Xh=!0),(Jo&134217727)===0&&(Yl&134217727)===0||On===null||Kl(On,Ir,es,!1)}function af(s,h,g){var T=gn;gn|=2;var O=_p(),z=pg();(On!==s||Ir!==h)&&(gp=null,tl(s,h)),h=!1;var Y=Zn;e:do try{if(yn!==0&&zr!==null){var ue=zr,je=Ao;switch(yn){case 8:fg(),Y=6;break e;case 3:case 2:case 9:case 6:sn.current===null&&(h=!0);var Ue=yn;if(yn=0,Ao=null,Jh(s,ue,je,Ue),g&&Xh){Y=0;break e}break;default:Ue=yn,yn=0,Ao=null,Jh(s,ue,je,Ue)}}Qh(),Y=Zn;break}catch(pt){yi(s,pt)}while(!0);return h&&s.shellSuspendCounter++,_o=Vo=null,gn=T,Te.H=O,Te.A=z,zr===null&&(On=null,Ir=0,Ds()),Y}function Qh(){for(;zr!==null;)hv(zr)}function uv(s,h){var g=gn;gn|=2;var T=_p(),O=pg();On!==s||Ir!==h?(gp=null,rf=Qr()+500,tl(s,h)):Xh=Le(s,h);e:do try{if(yn!==0&&zr!==null){h=zr;var z=Ao;t:switch(yn){case 1:yn=0,Ao=null,Jh(s,h,z,1);break;case 2:case 9:if(Nt(z)){yn=0,Ao=null,dv(h);break}h=function(){yn!==2&&yn!==9||On!==s||(yn=7),ts(s)},z.then(h,h);break e;case 3:yn=7;break e;case 4:yn=5;break e;case 7:Nt(z)?(yn=0,Ao=null,dv(h)):(yn=0,Ao=null,Jh(s,h,z,7));break;case 5:var Y=null;switch(zr.tag){case 26:Y=zr.memoizedState;case 5:case 27:var ue=zr;if(!Y||Up(Y)){yn=0,Ao=null;var je=ue.sibling;if(je!==null)zr=je;else{var Ue=ue.return;Ue!==null?(zr=Ue,bp(Ue)):zr=null}break t}}yn=0,Ao=null,Jh(s,h,z,5);break;case 6:yn=0,Ao=null,Jh(s,h,z,6);break;case 8:fg(),Zn=6;break e;default:throw Error(a(462))}}Ux();break}catch(pt){yi(s,pt)}while(!0);return _o=Vo=null,Te.H=T,Te.A=O,gn=g,zr!==null?0:(On=null,Ir=0,Ds(),Zn)}function Ux(){for(;zr!==null&&!Kr();)hv(zr)}function hv(s){var h=dp(s.alternate,s,Wl);s.memoizedProps=s.pendingProps,h===null?bp(s):zr=h}function dv(s){var h=s,g=h.alternate;switch(h.tag){case 15:case 0:h=Mu(g,h,h.pendingProps,h.type,void 0,Ir);break;case 11:h=Mu(g,h,h.pendingProps,h.type.render,h.ref,Ir);break;case 5:Hd(h);default:Jm(g,h),h=zr=Ac(h,Wl),h=dp(g,h,Wl)}s.memoizedProps=s.pendingProps,h===null?bp(s):zr=h}function Jh(s,h,g,T){_o=Vo=null,Hd(h),Ja=null,Ys=0;var O=h.return;try{if(Ky(s,O,h,g,Ir)){Zn=1,Ks(s,ma(g,s.current)),zr=null;return}}catch(z){if(O!==null)throw zr=O,z;Zn=1,Ks(s,ma(g,s.current)),zr=null;return}h.flags&32768?(Dr||T===1?s=!0:Xh||(Ir&536870912)!==0?s=!1:(Xl=s=!0,(T===2||T===9||T===3||T===6)&&(T=sn.current,T!==null&&T.tag===13&&(T.flags|=16384))),fv(h,s)):bp(h)}function bp(s){var h=s;do{if((h.flags&32768)!==0){fv(h,Xl);return}s=h.return;var g=Qm(h.alternate,h,Wl);if(g!==null){zr=g;return}if(h=h.sibling,h!==null){zr=h;return}zr=h=s}while(h!==null);Zn===0&&(Zn=5)}function fv(s,h){do{var g=zx(s.alternate,s);if(g!==null){g.flags&=32767,zr=g;return}if(g=s.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!h&&(s=s.sibling,s!==null)){zr=s;return}zr=s=g}while(s!==null);Zn=6,zr=null}function pv(s,h,g,T,O,z,Y,ue,je){s.cancelPendingCommit=null;do wp();while(na!==0);if((gn&6)!==0)throw Error(a(327));if(h!==null){if(h===s.current)throw Error(a(177));if(z=h.lanes|h.childLanes,z|=Tc,Ve(s,g,z,Y,ue,je),s===On&&(zr=On=null,Ir=0),Yh=h,Zc=s,Ou=g,nf=z,yp=O,hg=T,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Vx(ki,function(){return mg(),null})):(s.callbackNode=null,s.callbackPriority=0),T=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||T){T=Te.T,Te.T=null,O=Ge.p,Ge.p=2,Y=gn,gn|=4;try{Lx(s,h,g)}finally{gn=Y,Ge.p=O,Te.T=T}}na=1,mv(),gv(),yv()}}function mv(){if(na===1){na=0;var s=Zc,h=Yh,g=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||g){g=Te.T,Te.T=null;var T=Ge.p;Ge.p=2;var O=gn;gn|=4;try{Qd(h,s);var z=Np,Y=Ah(s.containerInfo),ue=z.focusedElem,je=z.selectionRange;if(Y!==ue&&ue&&ue.ownerDocument&&Bo(ue.ownerDocument.documentElement,ue)){if(je!==null&&uu(ue)){var Ue=je.start,pt=je.end;if(pt===void 0&&(pt=Ue),"selectionStart"in ue)ue.selectionStart=Ue,ue.selectionEnd=Math.min(pt,ue.value.length);else{var bt=ue.ownerDocument||document,nt=bt&&bt.defaultView||window;if(nt.getSelection){var ut=nt.getSelection(),cr=ue.textContent.length,ir=Math.min(je.start,cr),Jr=je.end===void 0?ir:Math.min(je.end,cr);!ut.extend&&ir>Jr&&(Y=Jr,Jr=ir,ir=Y);var He=cu(ue,ir),ze=cu(ue,Jr);if(He&&ze&&(ut.rangeCount!==1||ut.anchorNode!==He.node||ut.anchorOffset!==He.offset||ut.focusNode!==ze.node||ut.focusOffset!==ze.offset)){var tt=bt.createRange();tt.setStart(He.node,He.offset),ut.removeAllRanges(),ir>Jr?(ut.addRange(tt),ut.extend(ze.node,ze.offset)):(tt.setEnd(ze.node,ze.offset),ut.addRange(tt))}}}}for(bt=[],ut=ue;ut=ut.parentNode;)ut.nodeType===1&&bt.push({element:ut,left:ut.scrollLeft,top:ut.scrollTop});for(typeof ue.focus=="function"&&ue.focus(),ue=0;ue<bt.length;ue++){var xt=bt[ue];xt.element.scrollLeft=xt.left,xt.element.scrollTop=xt.top}}K=!!kp,Np=kp=null}finally{gn=O,Ge.p=T,Te.T=g}}s.current=h,na=2}}function gv(){if(na===2){na=0;var s=Zc,h=Yh,g=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||g){g=Te.T,Te.T=null;var T=Ge.p;Ge.p=2;var O=gn;gn|=4;try{iv(s,h.alternate,h)}finally{gn=O,Ge.p=T,Te.T=g}}na=3}}function yv(){if(na===4||na===3){na=0,rn();var s=Zc,h=Yh,g=Ou,T=hg;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?na=5:(na=0,Yh=Zc=null,vv(s,s.pendingLanes));var O=s.pendingLanes;if(O===0&&(Gc=null),Er(g),h=h.stateNode,Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(Ri,h,void 0,(h.current.flags&128)===128)}catch{}if(T!==null){h=Te.T,O=Ge.p,Ge.p=2,Te.T=null;try{for(var z=s.onRecoverableError,Y=0;Y<T.length;Y++){var ue=T[Y];z(ue.value,{componentStack:ue.stack})}}finally{Te.T=h,Ge.p=O}}(Ou&3)!==0&&wp(),ts(s),O=s.pendingLanes,(g&4194090)!==0&&(O&42)!==0?s===dg?Kh++:(Kh=0,dg=s):Kh=0,Nu(0)}}function vv(s,h){(s.pooledCacheLanes&=h)===0&&(h=s.pooledCache,h!=null&&(s.pooledCache=null,Go(h)))}function wp(s){return mv(),gv(),yv(),mg()}function mg(){if(na!==5)return!1;var s=Zc,h=nf;nf=0;var g=Er(Ou),T=Te.T,O=Ge.p;try{Ge.p=32>g?32:g,Te.T=null,g=yp,yp=null;var z=Zc,Y=Ou;if(na=0,Yh=Zc=null,Ou=0,(gn&6)!==0)throw Error(a(331));var ue=gn;if(gn|=4,pp(z.current),Pu(z,z.current,Y,g),gn=ue,Nu(0,!1),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(Ri,z)}catch{}return!0}finally{Ge.p=O,Te.T=T,vv(s,h)}}function Sp(s,h,g){h=ma(g,h),h=ap(s.stateNode,h,2),s=bo(s,h,2),s!==null&&(Ht(s,2),ts(s))}function xn(s,h,g){if(s.tag===3)Sp(s,s,g);else for(;h!==null;){if(h.tag===3){Sp(h,s,g);break}else if(h.tag===1){var T=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(Gc===null||!Gc.has(T))){s=ma(g,s),g=Yy(2),T=bo(h,g,2),T!==null&&(op(g,T,h,s),Ht(T,2),ts(T));break}}h=h.return}}function rl(s,h,g){var T=s.pingCache;if(T===null){T=s.pingCache=new $x;var O=new Set;T.set(h,O)}else O=T.get(h),O===void 0&&(O=new Set,T.set(h,O));O.has(g)||(mp=!0,O.add(g),s=of.bind(null,s,h,g),h.then(s,s))}function of(s,h,g){var T=s.pingCache;T!==null&&T.delete(h),s.pingedLanes|=s.suspendedLanes&g,s.warmLanes&=~g,On===s&&(Ir&g)===g&&(Zn===4||Zn===3&&(Ir&62914560)===Ir&&300>Qr()-Cu?(gn&2)===0&&tl(s,0):cg|=g,Eu===Ir&&(Eu=0)),ts(s)}function Iu(s,h){h===0&&(h=mt()),s=yo(s,h),s!==null&&(Ht(s,h),ts(s))}function Tp(s){var h=s.memoizedState,g=0;h!==null&&(g=h.retryLane),Iu(s,g)}function Ap(s,h){var g=0;switch(s.tag){case 13:var T=s.stateNode,O=s.memoizedState;O!==null&&(g=O.retryLane);break;case 19:T=s.stateNode;break;case 22:T=s.stateNode._retryCache;break;default:throw Error(a(314))}T!==null&&T.delete(h),Iu(s,g)}function Vx(s,h){return fr(s,h)}var Mp=null,ku=null,jp=!1,Pp=!1,Ep=!1,Hc=0;function ts(s){s!==ku&&s.next===null&&(ku===null?Mp=ku=s:ku=ku.next=s),Pp=!0,jp||(jp=!0,Zx())}function Nu(s,h){if(!Ep&&Pp){Ep=!0;do for(var g=!1,T=Mp;T!==null;){if(s!==0){var O=T.pendingLanes;if(O===0)var z=0;else{var Y=T.suspendedLanes,ue=T.pingedLanes;z=(1<<31-Ne(42|s)+1)-1,z&=O&~(Y&~ue),z=z&201326741?z&201326741|1:z?z|2:0}z!==0&&(g=!0,bv(T,z))}else z=Ir,z=Xe(T,T===On?z:0,T.cancelPendingCommit!==null||T.timeoutHandle!==-1),(z&3)===0||Le(T,z)||(g=!0,bv(T,z));T=T.next}while(g);Ep=!1}}function Gx(){gg()}function gg(){Pp=jp=!1;var s=0;Hc!==0&&(jv()&&(s=Hc),Hc=0);for(var h=Qr(),g=null,T=Mp;T!==null;){var O=T.next,z=_v(T,h);z===0?(T.next=null,g===null?Mp=O:g.next=O,O===null&&(ku=g)):(g=T,(s!==0||(z&3)!==0)&&(Pp=!0)),T=O}Nu(s)}function _v(s,h){for(var g=s.suspendedLanes,T=s.pingedLanes,O=s.expirationTimes,z=s.pendingLanes&-62914561;0<z;){var Y=31-Ne(z),ue=1<<Y,je=O[Y];je===-1?((ue&g)===0||(ue&T)!==0)&&(O[Y]=ht(ue,h)):je<=h&&(s.expiredLanes|=ue),z&=~ue}if(h=On,g=Ir,g=Xe(s,s===h?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),T=s.callbackNode,g===0||s===h&&(yn===2||yn===9)||s.cancelPendingCommit!==null)return T!==null&&T!==null&&Jt(T),s.callbackNode=null,s.callbackPriority=0;if((g&3)===0||Le(s,g)){if(h=g&-g,h===s.callbackPriority)return h;switch(T!==null&&Jt(T),Er(g)){case 2:case 8:g=Fa;break;case 32:g=ki;break;case 268435456:g=Yi;break;default:g=ki}return T=xv.bind(null,s),g=fr(g,T),s.callbackPriority=h,s.callbackNode=g,h}return T!==null&&T!==null&&Jt(T),s.callbackPriority=2,s.callbackNode=null,2}function xv(s,h){if(na!==0&&na!==5)return s.callbackNode=null,s.callbackPriority=0,null;var g=s.callbackNode;if(wp()&&s.callbackNode!==g)return null;var T=Ir;return T=Xe(s,s===On?T:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),T===0?null:(lv(s,T,h),_v(s,Qr()),s.callbackNode!=null&&s.callbackNode===g?xv.bind(null,s):null)}function bv(s,h){if(wp())return null;lv(s,h,!0)}function Zx(){zu(function(){(gn&6)!==0?fr(Wn,Gx):gg()})}function yg(){return Hc===0&&(Hc=St()),Hc}function vg(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:No(""+s)}function _g(s,h){var g=h.ownerDocument.createElement("input");return g.name=h.name,g.value=h.value,s.id&&g.setAttribute("form",s.id),h.parentNode.insertBefore(g,h),s=new FormData(s),g.parentNode.removeChild(g),s}function Ql(s,h,g,T,O){if(h==="submit"&&g&&g.stateNode===O){var z=vg((O[Ar]||null).action),Y=T.submitter;Y&&(h=(h=Y[Ar]||null)?vg(h.formAction):Y.getAttribute("formAction"),h!==null&&(z=h,Y=null));var ue=new xl("action","action",null,T,O);s.push({event:ue,listeners:[{instance:null,listener:function(){if(T.defaultPrevented){if(Hc!==0){var je=Y?_g(O,Y):new FormData(O);At(g,{pending:!0,data:je,method:O.method,action:z},null,je)}}else typeof z=="function"&&(ue.preventDefault(),je=Y?_g(O,Y):new FormData(O),At(g,{pending:!0,data:je,method:O.method,action:z},z,je))},currentTarget:O}]})}}for(var nl=0;nl<pa.length;nl++){var Cp=pa[nl],xg=Cp.toLowerCase(),Hx=Cp[0].toUpperCase()+Cp.slice(1);Ua(xg,"on"+Hx)}Ua(Nd,"onAnimationEnd"),Ua(fu,"onAnimationIteration"),Ua(pu,"onAnimationStart"),Ua("dblclick","onDoubleClick"),Ua("focusin","onFocus"),Ua("focusout","onBlur"),Ua(Mh,"onTransitionRun"),Ua(Rd,"onTransitionStart"),Ua(Ol,"onTransitionCancel"),Ua(Sc,"onTransitionEnd"),Oo("onMouseEnter",["mouseout","mouseover"]),Oo("onMouseLeave",["mouseout","mouseover"]),Oo("onPointerEnter",["pointerout","pointerover"]),Oo("onPointerLeave",["pointerout","pointerover"]),$a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$a("onBeforeInput",["compositionend","keypress","textInput","paste"]),$a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xc));function wv(s,h){h=(h&4)!==0;for(var g=0;g<s.length;g++){var T=s[g],O=T.event;T=T.listeners;e:{var z=void 0;if(h)for(var Y=T.length-1;0<=Y;Y--){var ue=T[Y],je=ue.instance,Ue=ue.currentTarget;if(ue=ue.listener,je!==z&&O.isPropagationStopped())break e;z=ue,O.currentTarget=Ue;try{z(O)}catch(pt){Lc(pt)}O.currentTarget=null,z=je}else for(Y=0;Y<T.length;Y++){if(ue=T[Y],je=ue.instance,Ue=ue.currentTarget,ue=ue.listener,je!==z&&O.isPropagationStopped())break e;z=ue,O.currentTarget=Ue;try{z(O)}catch(pt){Lc(pt)}O.currentTarget=null,z=je}}}}function kr(s,h){var g=h[Ur];g===void 0&&(g=h[Ur]=new Set);var T=s+"__bubble";g.has(T)||(wg(h,s,2,!1),g.add(T))}function sf(s,h,g){var T=0;h&&(T|=4),wg(g,s,T,h)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function Op(s){if(!s[Jl]){s[Jl]=!0,uo.forEach(function(g){g!=="selectionchange"&&(bg.has(g)||sf(g,!1,s),sf(g,!0,s))});var h=s.nodeType===9?s:s.ownerDocument;h===null||h[Jl]||(h[Jl]=!0,sf("selectionchange",!1,h))}}function wg(s,h,g,T){switch(Ce(h)){case 2:var O=te;break;case 8:O=le;break;default:O=de}g=O.bind(null,h,g,s),O=void 0,!Cs||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(O=!0),T?O!==void 0?s.addEventListener(h,g,{capture:!0,passive:O}):s.addEventListener(h,g,!0):O!==void 0?s.addEventListener(h,g,{passive:O}):s.addEventListener(h,g,!1)}function lf(s,h,g,T,O){var z=T;if((h&1)===0&&(h&2)===0&&T!==null)e:for(;;){if(T===null)return;var Y=T.tag;if(Y===3||Y===4){var ue=T.stateNode.containerInfo;if(ue===O)break;if(Y===4)for(Y=T.return;Y!==null;){var je=Y.tag;if((je===3||je===4)&&Y.stateNode.containerInfo===O)return;Y=Y.return}for(;ue!==null;){if(Y=Et(ue),Y===null)return;if(je=Y.tag,je===5||je===6||je===26||je===27){T=z=Y;continue e}ue=ue.parentNode}}T=T.return}di(function(){var Ue=z,pt=_l(g),bt=[];e:{var nt=Il.get(s);if(nt!==void 0){var ut=xl,cr=s;switch(s){case"keypress":if(vn(g)===0)break e;case"keydown":case"keyup":ut=Sd;break;case"focusin":cr="focus",ut=ni;break;case"focusout":cr="blur",ut=ni;break;case"beforeblur":case"afterblur":ut=ni;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ut=fh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ut=iu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ut=Xf;break;case Nd:case fu:case pu:ut=au;break;case Sc:ut=Bm;break;case"scroll":case"scrollend":ut=wd;break;case"wheel":ut=Fm;break;case"copy":case"cut":case"paste":ut=_i;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ut=Lo;break;case"toggle":case"beforetoggle":ut=Ad}var ir=(h&4)!==0,Jr=!ir&&(s==="scroll"||s==="scrollend"),He=ir?nt!==null?nt+"Capture":null:nt;ir=[];for(var ze=Ue,tt;ze!==null;){var xt=ze;if(tt=xt.stateNode,xt=xt.tag,xt!==5&&xt!==26&&xt!==27||tt===null||He===null||(xt=Kn(ze,He),xt!=null&&ir.push(ed(ze,xt,tt))),Jr)break;ze=ze.return}0<ir.length&&(nt=new ut(nt,cr,null,g,pt),bt.push({event:nt,listeners:ir}))}}if((h&7)===0){e:{if(nt=s==="mouseover"||s==="pointerover",ut=s==="mouseout"||s==="pointerout",nt&&g!==xr&&(cr=g.relatedTarget||g.fromElement)&&(Et(cr)||cr[Mn]))break e;if((ut||nt)&&(nt=pt.window===pt?pt:(nt=pt.ownerDocument)?nt.defaultView||nt.parentWindow:window,ut?(cr=g.relatedTarget||g.toElement,ut=Ue,cr=cr?Et(cr):null,cr!==null&&(Jr=y(cr),ir=cr.tag,cr!==Jr||ir!==5&&ir!==27&&ir!==6)&&(cr=null)):(ut=null,cr=Ue),ut!==cr)){if(ir=fh,xt="onMouseLeave",He="onMouseEnter",ze="mouse",(s==="pointerout"||s==="pointerover")&&(ir=Lo,xt="onPointerLeave",He="onPointerEnter",ze="pointer"),Jr=ut==null?nt:pr(ut),tt=cr==null?nt:pr(cr),nt=new ir(xt,ze+"leave",ut,g,pt),nt.target=Jr,nt.relatedTarget=tt,xt=null,Et(pt)===Ue&&(ir=new ir(He,ze+"enter",cr,g,pt),ir.target=tt,ir.relatedTarget=Jr,xt=ir),Jr=xt,ut&&cr)t:{for(ir=ut,He=cr,ze=0,tt=ir;tt;tt=Du(tt))ze++;for(tt=0,xt=He;xt;xt=Du(xt))tt++;for(;0<ze-tt;)ir=Du(ir),ze--;for(;0<tt-ze;)He=Du(He),tt--;for(;ze--;){if(ir===He||He!==null&&ir===He.alternate)break t;ir=Du(ir),He=Du(He)}ir=null}else ir=null;ut!==null&&Sv(bt,nt,ut,ir,!1),cr!==null&&Jr!==null&&Sv(bt,Jr,cr,ir,!0)}}e:{if(nt=Ue?pr(Ue):window,ut=nt.nodeName&&nt.nodeName.toLowerCase(),ut==="select"||ut==="input"&&nt.type==="file")var Wt=bc;else if(bh(nt))if(Pd)Wt=Od;else{Wt=qm;var Nr=Sh}else ut=nt.nodeName,!ut||ut.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?Ue&&jr(Ue.elementType)&&(Wt=bc):Wt=Qf;if(Wt&&(Wt=Wt(s,Ue))){jd(bt,Wt,g,pt);break e}Nr&&Nr(s,nt,Ue),s==="focusout"&&Ue&&nt.type==="number"&&Ue.memoizedProps.value!=null&&uh(nt,"number",nt.value)}switch(Nr=Ue?pr(Ue):window,s){case"focusin":(bh(Nr)||Nr.contentEditable==="true")&&(Pl=Nr,hu=Ue,go=null);break;case"focusout":go=hu=Pl=null;break;case"mousedown":du=!0;break;case"contextmenu":case"mouseup":case"dragend":du=!1,ep(bt,g,pt);break;case"selectionchange":if($r)break;case"keydown":case"keyup":ep(bt,g,pt)}var er;if(Ns)e:{switch(s){case"compositionstart":var dr="onCompositionStart";break e;case"compositionend":dr="onCompositionEnd";break e;case"compositionupdate":dr="onCompositionUpdate";break e}dr=void 0}else ss?vc(s,g)&&(dr="onCompositionEnd"):s==="keydown"&&g.keyCode===229&&(dr="onCompositionStart");dr&&(Md&&g.locale!=="ko"&&(ss||dr!=="onCompositionStart"?dr==="onCompositionEnd"&&ss&&(er=nn()):(ti=pt,Li="value"in ti?ti.value:ti.textContent,ss=!0)),Nr=Ru(Ue,dr),0<Nr.length&&(dr=new ou(dr,s,null,g,pt),bt.push({event:dr,listeners:Nr}),er?dr.data=er:(er=Wf(g),er!==null&&(dr.data=er)))),(er=mo?$m(s,g):_c(s,g))&&(dr=Ru(Ue,"onBeforeInput"),0<dr.length&&(Nr=new ou("onBeforeInput","beforeinput",null,g,pt),bt.push({event:Nr,listeners:dr}),Nr.data=er)),Ql(bt,s,Ue,g,pt)}wv(bt,h)})}function ed(s,h,g){return{instance:s,listener:h,currentTarget:g}}function Ru(s,h){for(var g=h+"Capture",T=[];s!==null;){var O=s,z=O.stateNode;if(O=O.tag,O!==5&&O!==26&&O!==27||z===null||(O=Kn(s,g),O!=null&&T.unshift(ed(s,O,z)),O=Kn(s,h),O!=null&&T.push(ed(s,O,z))),s.tag===3)return T;s=s.return}return[]}function Du(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Sv(s,h,g,T,O){for(var z=h._reactName,Y=[];g!==null&&g!==T;){var ue=g,je=ue.alternate,Ue=ue.stateNode;if(ue=ue.tag,je!==null&&je===T)break;ue!==5&&ue!==26&&ue!==27||Ue===null||(je=Ue,O?(Ue=Kn(g,z),Ue!=null&&Y.unshift(ed(g,Ue,je))):O||(Ue=Kn(g,z),Ue!=null&&Y.push(ed(g,Ue,je)))),g=g.return}Y.length!==0&&s.push({event:h,listeners:Y})}var Xx=/\r\n?/g,Wx=/\u0000|\uFFFD/g;function Tv(s){return(typeof s=="string"?s:""+s).replace(Xx,`
`).replace(Wx,"")}function Av(s,h){return h=Tv(h),Tv(s)===h}function td(){}function Gr(s,h,g,T,O,z){switch(g){case"children":typeof T=="string"?h==="body"||h==="textarea"&&T===""||ko(s,T):(typeof T=="number"||typeof T=="bigint")&&h!=="body"&&ko(s,""+T);break;case"className":Di(s,"class",T);break;case"tabIndex":Di(s,"tabindex",T);break;case"dir":case"role":case"viewBox":case"width":case"height":Di(s,g,T);break;case"style":zi(s,T,z);break;case"data":if(h!=="object"){Di(s,"data",T);break}case"src":case"href":if(T===""&&(h!=="a"||g!=="href")){s.removeAttribute(g);break}if(T==null||typeof T=="function"||typeof T=="symbol"||typeof T=="boolean"){s.removeAttribute(g);break}T=No(""+T),s.setAttribute(g,T);break;case"action":case"formAction":if(typeof T=="function"){s.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof z=="function"&&(g==="formAction"?(h!=="input"&&Gr(s,h,"name",O.name,O,null),Gr(s,h,"formEncType",O.formEncType,O,null),Gr(s,h,"formMethod",O.formMethod,O,null),Gr(s,h,"formTarget",O.formTarget,O,null)):(Gr(s,h,"encType",O.encType,O,null),Gr(s,h,"method",O.method,O,null),Gr(s,h,"target",O.target,O,null)));if(T==null||typeof T=="symbol"||typeof T=="boolean"){s.removeAttribute(g);break}T=No(""+T),s.setAttribute(g,T);break;case"onClick":T!=null&&(s.onclick=td);break;case"onScroll":T!=null&&kr("scroll",s);break;case"onScrollEnd":T!=null&&kr("scrollend",s);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(a(61));if(g=T.__html,g!=null){if(O.children!=null)throw Error(a(60));s.innerHTML=g}}break;case"multiple":s.multiple=T&&typeof T!="function"&&typeof T!="symbol";break;case"muted":s.muted=T&&typeof T!="function"&&typeof T!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(T==null||typeof T=="function"||typeof T=="boolean"||typeof T=="symbol"){s.removeAttribute("xlink:href");break}g=No(""+T),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":T!=null&&typeof T!="function"&&typeof T!="symbol"?s.setAttribute(g,""+T):s.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":T&&typeof T!="function"&&typeof T!="symbol"?s.setAttribute(g,""):s.removeAttribute(g);break;case"capture":case"download":T===!0?s.setAttribute(g,""):T!==!1&&T!=null&&typeof T!="function"&&typeof T!="symbol"?s.setAttribute(g,T):s.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":T!=null&&typeof T!="function"&&typeof T!="symbol"&&!isNaN(T)&&1<=T?s.setAttribute(g,T):s.removeAttribute(g);break;case"rowSpan":case"start":T==null||typeof T=="function"||typeof T=="symbol"||isNaN(T)?s.removeAttribute(g):s.setAttribute(g,T);break;case"popover":kr("beforetoggle",s),kr("toggle",s),jn(s,"popover",T);break;case"xlinkActuate":Vr(s,"http://www.w3.org/1999/xlink","xlink:actuate",T);break;case"xlinkArcrole":Vr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",T);break;case"xlinkRole":Vr(s,"http://www.w3.org/1999/xlink","xlink:role",T);break;case"xlinkShow":Vr(s,"http://www.w3.org/1999/xlink","xlink:show",T);break;case"xlinkTitle":Vr(s,"http://www.w3.org/1999/xlink","xlink:title",T);break;case"xlinkType":Vr(s,"http://www.w3.org/1999/xlink","xlink:type",T);break;case"xmlBase":Vr(s,"http://www.w3.org/XML/1998/namespace","xml:base",T);break;case"xmlLang":Vr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",T);break;case"xmlSpace":Vr(s,"http://www.w3.org/XML/1998/namespace","xml:space",T);break;case"is":jn(s,"is",T);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=gc.get(g)||g,jn(s,g,T))}}function Ip(s,h,g,T,O,z){switch(g){case"style":zi(s,T,z);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(a(61));if(g=T.__html,g!=null){if(O.children!=null)throw Error(a(60));s.innerHTML=g}}break;case"children":typeof T=="string"?ko(s,T):(typeof T=="number"||typeof T=="bigint")&&ko(s,""+T);break;case"onScroll":T!=null&&kr("scroll",s);break;case"onScrollEnd":T!=null&&kr("scrollend",s);break;case"onClick":T!=null&&(s.onclick=td);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vr.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(O=g.endsWith("Capture"),h=g.slice(2,O?g.length-7:void 0),z=s[Ar]||null,z=z!=null?z[g]:null,typeof z=="function"&&s.removeEventListener(h,z,O),typeof T=="function")){typeof z!="function"&&z!==null&&(g in s?s[g]=null:s.hasAttribute(g)&&s.removeAttribute(g)),s.addEventListener(h,T,O);break e}g in s?s[g]=T:T===!0?s.setAttribute(g,""):jn(s,g,T)}}}function Zi(s,h,g){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kr("error",s),kr("load",s);var T=!1,O=!1,z;for(z in g)if(g.hasOwnProperty(z)){var Y=g[z];if(Y!=null)switch(z){case"src":T=!0;break;case"srcSet":O=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Gr(s,h,z,Y,g,null)}}O&&Gr(s,h,"srcSet",g.srcSet,g,null),T&&Gr(s,h,"src",g.src,g,null);return;case"input":kr("invalid",s);var ue=z=Y=O=null,je=null,Ue=null;for(T in g)if(g.hasOwnProperty(T)){var pt=g[T];if(pt!=null)switch(T){case"name":O=pt;break;case"type":Y=pt;break;case"checked":je=pt;break;case"defaultChecked":Ue=pt;break;case"value":z=pt;break;case"defaultValue":ue=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(a(137,h));break;default:Gr(s,h,T,pt,g,null)}}ch(s,z,ue,je,Ue,Y,O,!1),sh(s);return;case"select":kr("invalid",s),T=Y=z=null;for(O in g)if(g.hasOwnProperty(O)&&(ue=g[O],ue!=null))switch(O){case"value":z=ue;break;case"defaultValue":Y=ue;break;case"multiple":T=ue;default:Gr(s,h,O,ue,g,null)}h=z,g=Y,s.multiple=!!T,h!=null?qa(s,!!T,h,!1):g!=null&&qa(s,!!T,g,!0);return;case"textarea":kr("invalid",s),z=O=T=null;for(Y in g)if(g.hasOwnProperty(Y)&&(ue=g[Y],ue!=null))switch(Y){case"value":T=ue;break;case"defaultValue":O=ue;break;case"children":z=ue;break;case"dangerouslySetInnerHTML":if(ue!=null)throw Error(a(91));break;default:Gr(s,h,Y,ue,g,null)}Zf(s,T,O,z),sh(s);return;case"option":for(je in g)if(g.hasOwnProperty(je)&&(T=g[je],T!=null))switch(je){case"selected":s.selected=T&&typeof T!="function"&&typeof T!="symbol";break;default:Gr(s,h,je,T,g,null)}return;case"dialog":kr("beforetoggle",s),kr("toggle",s),kr("cancel",s),kr("close",s);break;case"iframe":case"object":kr("load",s);break;case"video":case"audio":for(T=0;T<Xc.length;T++)kr(Xc[T],s);break;case"image":kr("error",s),kr("load",s);break;case"details":kr("toggle",s);break;case"embed":case"source":case"link":kr("error",s),kr("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ue in g)if(g.hasOwnProperty(Ue)&&(T=g[Ue],T!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Gr(s,h,Ue,T,g,null)}return;default:if(jr(h)){for(pt in g)g.hasOwnProperty(pt)&&(T=g[pt],T!==void 0&&Ip(s,h,pt,T,g,void 0));return}}for(ue in g)g.hasOwnProperty(ue)&&(T=g[ue],T!=null&&Gr(s,h,ue,T,g,null))}function Mv(s,h,g,T){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var O=null,z=null,Y=null,ue=null,je=null,Ue=null,pt=null;for(ut in g){var bt=g[ut];if(g.hasOwnProperty(ut)&&bt!=null)switch(ut){case"checked":break;case"value":break;case"defaultValue":je=bt;default:T.hasOwnProperty(ut)||Gr(s,h,ut,null,T,bt)}}for(var nt in T){var ut=T[nt];if(bt=g[nt],T.hasOwnProperty(nt)&&(ut!=null||bt!=null))switch(nt){case"type":z=ut;break;case"name":O=ut;break;case"checked":Ue=ut;break;case"defaultChecked":pt=ut;break;case"value":Y=ut;break;case"defaultValue":ue=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(a(137,h));break;default:ut!==bt&&Gr(s,h,nt,ut,T,bt)}}os(s,Y,ue,je,Ue,pt,z,O);return;case"select":ut=Y=ue=nt=null;for(z in g)if(je=g[z],g.hasOwnProperty(z)&&je!=null)switch(z){case"value":break;case"multiple":ut=je;default:T.hasOwnProperty(z)||Gr(s,h,z,null,T,je)}for(O in T)if(z=T[O],je=g[O],T.hasOwnProperty(O)&&(z!=null||je!=null))switch(O){case"value":nt=z;break;case"defaultValue":ue=z;break;case"multiple":Y=z;default:z!==je&&Gr(s,h,O,z,T,je)}h=ue,g=Y,T=ut,nt!=null?qa(s,!!g,nt,!1):!!T!=!!g&&(h!=null?qa(s,!!g,h,!0):qa(s,!!g,g?[]:"",!1));return;case"textarea":ut=nt=null;for(ue in g)if(O=g[ue],g.hasOwnProperty(ue)&&O!=null&&!T.hasOwnProperty(ue))switch(ue){case"value":break;case"children":break;default:Gr(s,h,ue,null,T,O)}for(Y in T)if(O=T[Y],z=g[Y],T.hasOwnProperty(Y)&&(O!=null||z!=null))switch(Y){case"value":nt=O;break;case"defaultValue":ut=O;break;case"children":break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(a(91));break;default:O!==z&&Gr(s,h,Y,O,T,z)}hh(s,nt,ut);return;case"option":for(var cr in g)if(nt=g[cr],g.hasOwnProperty(cr)&&nt!=null&&!T.hasOwnProperty(cr))switch(cr){case"selected":s.selected=!1;break;default:Gr(s,h,cr,null,T,nt)}for(je in T)if(nt=T[je],ut=g[je],T.hasOwnProperty(je)&&nt!==ut&&(nt!=null||ut!=null))switch(je){case"selected":s.selected=nt&&typeof nt!="function"&&typeof nt!="symbol";break;default:Gr(s,h,je,nt,T,ut)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ir in g)nt=g[ir],g.hasOwnProperty(ir)&&nt!=null&&!T.hasOwnProperty(ir)&&Gr(s,h,ir,null,T,nt);for(Ue in T)if(nt=T[Ue],ut=g[Ue],T.hasOwnProperty(Ue)&&nt!==ut&&(nt!=null||ut!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(a(137,h));break;default:Gr(s,h,Ue,nt,T,ut)}return;default:if(jr(h)){for(var Jr in g)nt=g[Jr],g.hasOwnProperty(Jr)&&nt!==void 0&&!T.hasOwnProperty(Jr)&&Ip(s,h,Jr,void 0,T,nt);for(pt in T)nt=T[pt],ut=g[pt],!T.hasOwnProperty(pt)||nt===ut||nt===void 0&&ut===void 0||Ip(s,h,pt,nt,T,ut);return}}for(var He in g)nt=g[He],g.hasOwnProperty(He)&&nt!=null&&!T.hasOwnProperty(He)&&Gr(s,h,He,null,T,nt);for(bt in T)nt=T[bt],ut=g[bt],!T.hasOwnProperty(bt)||nt===ut||nt==null&&ut==null||Gr(s,h,bt,nt,T,ut)}var kp=null,Np=null;function rd(s){return s.nodeType===9?s:s.ownerDocument}function Sg(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nd(s,h){if(s===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&h==="foreignObject"?0:s}function Rp(s,h){return s==="textarea"||s==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var cf=null;function jv(){var s=window.event;return s&&s.type==="popstate"?s===cf?!1:(cf=s,!0):(cf=null,!1)}var no=typeof setTimeout=="function"?setTimeout:void 0,id=typeof clearTimeout=="function"?clearTimeout:void 0,ad=typeof Promise=="function"?Promise:void 0,zu=typeof queueMicrotask=="function"?queueMicrotask:typeof ad<"u"?function(s){return ad.resolve(null).then(s).catch(Pv)}:no;function Pv(s){setTimeout(function(){throw s})}function ec(s){return s==="head"}function Tg(s,h){var g=h,T=0,O=0;do{var z=g.nextSibling;if(s.removeChild(g),z&&z.nodeType===8)if(g=z.data,g==="/$"){if(0<T&&8>T){g=T;var Y=s.ownerDocument;if(g&1&&uf(Y.documentElement),g&2&&uf(Y.body),g&4)for(g=Y.head,uf(g),Y=g.firstChild;Y;){var ue=Y.nextSibling,je=Y.nodeName;Y[Mi]||je==="SCRIPT"||je==="STYLE"||je==="LINK"&&Y.rel.toLowerCase()==="stylesheet"||g.removeChild(Y),Y=ue}}if(O===0){s.removeChild(z),ia(h);return}O--}else g==="$"||g==="$?"||g==="$!"?O++:T=g.charCodeAt(0)-48;else T=0;g=z}while(g);ia(h)}function Dp(s){var h=s.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var g=h;switch(h=h.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":Dp(g),Yn(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}s.removeChild(g)}}function Yx(s,h,g,T){for(;s.nodeType===1;){var O=g;if(s.nodeName.toLowerCase()!==h.toLowerCase()){if(!T&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(T){if(!s[Mi])switch(h){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(z=s.getAttribute("rel"),z==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(z!==O.rel||s.getAttribute("href")!==(O.href==null||O.href===""?null:O.href)||s.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin)||s.getAttribute("title")!==(O.title==null?null:O.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(z=s.getAttribute("src"),(z!==(O.src==null?null:O.src)||s.getAttribute("type")!==(O.type==null?null:O.type)||s.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin))&&z&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(h==="input"&&s.type==="hidden"){var z=O.name==null?null:""+O.name;if(O.type==="hidden"&&s.getAttribute("name")===z)return s}else return s;if(s=rs(s.nextSibling),s===null)break}return null}function Ev(s,h,g){if(h==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!g||(s=rs(s.nextSibling),s===null))return null;return s}function il(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function Cv(s,h){var g=s.ownerDocument;if(s.data!=="$?"||g.readyState==="complete")h();else{var T=function(){h(),g.removeEventListener("DOMContentLoaded",T)};g.addEventListener("DOMContentLoaded",T),s._reactRetry=T}}function rs(s){for(;s!=null;s=s.nextSibling){var h=s.nodeType;if(h===1||h===3)break;if(h===8){if(h=s.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return s}var zp=null;function Ag(s){s=s.previousSibling;for(var h=0;s;){if(s.nodeType===8){var g=s.data;if(g==="$"||g==="$!"||g==="$?"){if(h===0)return s;h--}else g==="/$"&&h++}s=s.previousSibling}return null}function Ov(s,h,g){switch(h=rd(g),s){case"html":if(s=h.documentElement,!s)throw Error(a(452));return s;case"head":if(s=h.head,!s)throw Error(a(453));return s;case"body":if(s=h.body,!s)throw Error(a(454));return s;default:throw Error(a(451))}}function uf(s){for(var h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Yn(s)}var Mo=new Map,Mg=new Set;function Lu(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var al=Ge.d;Ge.d={f:Lp,r:Bp,D:Kx,C:Qx,L:od,m:Hi,X:kv,S:jg,M:Nv};function Lp(){var s=al.f(),h=vp();return s||h}function Bp(s){var h=mr(s);h!==null&&h.tag===5&&h.type==="form"?Bt(h):al.r(s)}var tc=typeof document>"u"?null:document;function Iv(s,h,g){var T=tc;if(T&&typeof h=="string"&&h){var O=ha(h);O='link[rel="'+s+'"][href="'+O+'"]',typeof g=="string"&&(O+='[crossorigin="'+g+'"]'),Mg.has(O)||(Mg.add(O),s={rel:s,crossOrigin:g,href:h},T.querySelector(O)===null&&(h=T.createElement("link"),Zi(h,"link",s),fn(h),T.head.appendChild(h)))}}function Kx(s){al.D(s),Iv("dns-prefetch",s,null)}function Qx(s,h){al.C(s,h),Iv("preconnect",s,h)}function od(s,h,g){al.L(s,h,g);var T=tc;if(T&&s&&h){var O='link[rel="preload"][as="'+ha(h)+'"]';h==="image"&&g&&g.imageSrcSet?(O+='[imagesrcset="'+ha(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(O+='[imagesizes="'+ha(g.imageSizes)+'"]')):O+='[href="'+ha(s)+'"]';var z=O;switch(h){case"style":z=sd(s);break;case"script":z=Bu(s)}Mo.has(z)||(s=N({rel:"preload",href:h==="image"&&g&&g.imageSrcSet?void 0:s,as:h},g),Mo.set(z,s),T.querySelector(O)!==null||h==="style"&&T.querySelector(ld(z))||h==="script"&&T.querySelector(Fu(z))||(h=T.createElement("link"),Zi(h,"link",s),fn(h),T.head.appendChild(h)))}}function Hi(s,h){al.m(s,h);var g=tc;if(g&&s){var T=h&&typeof h.as=="string"?h.as:"script",O='link[rel="modulepreload"][as="'+ha(T)+'"][href="'+ha(s)+'"]',z=O;switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":z=Bu(s)}if(!Mo.has(z)&&(s=N({rel:"modulepreload",href:s},h),Mo.set(z,s),g.querySelector(O)===null)){switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Fu(z)))return}T=g.createElement("link"),Zi(T,"link",s),fn(T),g.head.appendChild(T)}}}function jg(s,h,g){al.S(s,h,g);var T=tc;if(T&&s){var O=vi(T).hoistableStyles,z=sd(s);h=h||"default";var Y=O.get(z);if(!Y){var ue={loading:0,preload:null};if(Y=T.querySelector(ld(z)))ue.loading=5;else{s=N({rel:"stylesheet",href:s,"data-precedence":h},g),(g=Mo.get(z))&&$u(s,g);var je=Y=T.createElement("link");fn(je),Zi(je,"link",s),je._p=new Promise(function(Ue,pt){je.onload=Ue,je.onerror=pt}),je.addEventListener("load",function(){ue.loading|=1}),je.addEventListener("error",function(){ue.loading|=2}),ue.loading|=4,hf(Y,h,T)}Y={type:"stylesheet",instance:Y,count:1,state:ue},O.set(z,Y)}}}function kv(s,h){al.X(s,h);var g=tc;if(g&&s){var T=vi(g).hoistableScripts,O=Bu(s),z=T.get(O);z||(z=g.querySelector(Fu(O)),z||(s=N({src:s,async:!0},h),(h=Mo.get(O))&&df(s,h),z=g.createElement("script"),fn(z),Zi(z,"link",s),g.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},T.set(O,z))}}function Nv(s,h){al.M(s,h);var g=tc;if(g&&s){var T=vi(g).hoistableScripts,O=Bu(s),z=T.get(O);z||(z=g.querySelector(Fu(O)),z||(s=N({src:s,async:!0,type:"module"},h),(h=Mo.get(O))&&df(s,h),z=g.createElement("script"),fn(z),Zi(z,"link",s),g.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},T.set(O,z))}}function Fp(s,h,g,T){var O=(O=zt.current)?Lu(O):null;if(!O)throw Error(a(446));switch(s){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(h=sd(g.href),g=vi(O).hoistableStyles,T=g.get(h),T||(T={type:"style",instance:null,count:0,state:null},g.set(h,T)),T):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){s=sd(g.href);var z=vi(O).hoistableStyles,Y=z.get(s);if(Y||(O=O.ownerDocument||O,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},z.set(s,Y),(z=O.querySelector(ld(s)))&&!z._p&&(Y.instance=z,Y.state.loading=5),Mo.has(s)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Mo.set(s,g),z||Jx(O,s,g,Y.state))),h&&T===null)throw Error(a(528,""));return Y}if(h&&T!==null)throw Error(a(529,""));return null;case"script":return h=g.async,g=g.src,typeof g=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Bu(g),g=vi(O).hoistableScripts,T=g.get(h),T||(T={type:"script",instance:null,count:0,state:null},g.set(h,T)),T):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,s))}}function sd(s){return'href="'+ha(s)+'"'}function ld(s){return'link[rel="stylesheet"]['+s+"]"}function Pg(s){return N({},s,{"data-precedence":s.precedence,precedence:null})}function Jx(s,h,g,T){s.querySelector('link[rel="preload"][as="style"]['+h+"]")?T.loading=1:(h=s.createElement("link"),T.preload=h,h.addEventListener("load",function(){return T.loading|=1}),h.addEventListener("error",function(){return T.loading|=2}),Zi(h,"link",g),fn(h),s.head.appendChild(h))}function Bu(s){return'[src="'+ha(s)+'"]'}function Fu(s){return"script[async]"+s}function $p(s,h,g){if(h.count++,h.instance===null)switch(h.type){case"style":var T=s.querySelector('style[data-href~="'+ha(g.href)+'"]');if(T)return h.instance=T,fn(T),T;var O=N({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return T=(s.ownerDocument||s).createElement("style"),fn(T),Zi(T,"style",O),hf(T,g.precedence,s),h.instance=T;case"stylesheet":O=sd(g.href);var z=s.querySelector(ld(O));if(z)return h.state.loading|=4,h.instance=z,fn(z),z;T=Pg(g),(O=Mo.get(O))&&$u(T,O),z=(s.ownerDocument||s).createElement("link"),fn(z);var Y=z;return Y._p=new Promise(function(ue,je){Y.onload=ue,Y.onerror=je}),Zi(z,"link",T),h.state.loading|=4,hf(z,g.precedence,s),h.instance=z;case"script":return z=Bu(g.src),(O=s.querySelector(Fu(z)))?(h.instance=O,fn(O),O):(T=g,(O=Mo.get(z))&&(T=N({},g),df(T,O)),s=s.ownerDocument||s,O=s.createElement("script"),fn(O),Zi(O,"link",T),s.head.appendChild(O),h.instance=O);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(T=h.instance,h.state.loading|=4,hf(T,g.precedence,s));return h.instance}function hf(s,h,g){for(var T=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),O=T.length?T[T.length-1]:null,z=O,Y=0;Y<T.length;Y++){var ue=T[Y];if(ue.dataset.precedence===h)z=ue;else if(z!==O)break}z?z.parentNode.insertBefore(s,z.nextSibling):(h=g.nodeType===9?g.head:g,h.insertBefore(s,h.firstChild))}function $u(s,h){s.crossOrigin==null&&(s.crossOrigin=h.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=h.referrerPolicy),s.title==null&&(s.title=h.title)}function df(s,h){s.crossOrigin==null&&(s.crossOrigin=h.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=h.referrerPolicy),s.integrity==null&&(s.integrity=h.integrity)}var ff=null;function qp(s,h,g){if(ff===null){var T=new Map,O=ff=new Map;O.set(g,T)}else O=ff,T=O.get(g),T||(T=new Map,O.set(g,T));if(T.has(s))return T;for(T.set(s,null),g=g.getElementsByTagName(s),O=0;O<g.length;O++){var z=g[O];if(!(z[Mi]||z[Hr]||s==="link"&&z.getAttribute("rel")==="stylesheet")&&z.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=z.getAttribute(h)||"";Y=s+Y;var ue=T.get(Y);ue?ue.push(z):T.set(Y,[z])}}return T}function pf(s,h,g){s=s.ownerDocument||s,s.head.insertBefore(g,h==="title"?s.querySelector("head > title"):null)}function mf(s,h,g){if(g===1||h.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return s=h.disabled,typeof h.precedence=="string"&&s==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function Up(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var qu=null;function Eg(){}function e0(s,h,g){if(qu===null)throw Error(a(475));var T=qu;if(h.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var O=sd(g.href),z=s.querySelector(ld(O));if(z){s=z._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(T.count++,T=n.bind(T),s.then(T,T)),h.state.loading|=4,h.instance=z,fn(z);return}z=s.ownerDocument||s,g=Pg(g),(O=Mo.get(O))&&$u(g,O),z=z.createElement("link"),fn(z);var Y=z;Y._p=new Promise(function(ue,je){Y.onload=ue,Y.onerror=je}),Zi(z,"link",g),h.instance=z}T.stylesheets===null&&(T.stylesheets=new Map),T.stylesheets.set(h,s),(s=h.state.preload)&&(h.state.loading&3)===0&&(T.count++,h=n.bind(T),s.addEventListener("load",h),s.addEventListener("error",h))}}function c(){if(qu===null)throw Error(a(475));var s=qu;return s.stylesheets&&s.count===0&&f(s,s.stylesheets),0<s.count?function(h){var g=setTimeout(function(){if(s.stylesheets&&f(s,s.stylesheets),s.unsuspend){var T=s.unsuspend;s.unsuspend=null,T()}},6e4);return s.unsuspend=h,function(){s.unsuspend=null,clearTimeout(g)}}:null}function n(){if(this.count--,this.count===0){if(this.stylesheets)f(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var o=null;function f(s,h){s.stylesheets=null,s.unsuspend!==null&&(s.count++,o=new Map,h.forEach(v,s),o=null,n.call(s))}function v(s,h){if(!(h.state.loading&4)){var g=o.get(s);if(g)var T=g.get(null);else{g=new Map,o.set(s,g);for(var O=s.querySelectorAll("link[data-precedence],style[data-precedence]"),z=0;z<O.length;z++){var Y=O[z];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(g.set(Y.dataset.precedence,Y),T=Y)}T&&g.set(null,T)}O=h.instance,Y=O.getAttribute("data-precedence"),z=g.get(Y)||T,z===T&&g.set(null,O),g.set(Y,O),this.count++,T=n.bind(this),O.addEventListener("load",T),O.addEventListener("error",T),z?z.parentNode.insertBefore(O,z.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(O,s.firstChild)),h.state.loading|=4}}var w={$$typeof:ne,Provider:null,Consumer:null,_currentValue:Ze,_currentValue2:Ze,_threadCount:0};function A(s,h,g,T,O,z,Y,ue){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$t(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$t(0),this.hiddenUpdates=$t(null),this.identifierPrefix=T,this.onUncaughtError=O,this.onCaughtError=z,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function P(s,h,g,T,O,z,Y,ue,je,Ue,pt,bt){return s=new A(s,h,g,Y,ue,je,Ue,bt),h=1,z===!0&&(h|=24),z=Bi(3,null,null,h),s.current=z,z.stateNode=s,h=Eh(),h.refCount++,s.pooledCache=h,h.refCount++,z.memoizedState={element:T,isDehydrated:g,cache:h},wr(z),s}function I(s){return s?(s=Fo,s):Fo}function D(s,h,g,T,O,z){O=I(O),T.context===null?T.context=O:T.pendingContext=O,T=ms(h),T.payload={element:g},z=z===void 0?null:z,z!==null&&(T.callback=z),g=bo(s,T,h),g!==null&&(ro(g,s,h),Fl(g,s,h))}function B(s,h){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var g=s.retryLane;s.retryLane=g!==0&&g<h?g:h}}function V(s,h){B(s,h),(s=s.alternate)&&B(s,h)}function W(s){if(s.tag===13){var h=yo(s,67108864);h!==null&&ro(h,s,67108864),V(s,67108864)}}var K=!0;function te(s,h,g,T){var O=Te.T;Te.T=null;var z=Ge.p;try{Ge.p=2,de(s,h,g,T)}finally{Ge.p=z,Te.T=O}}function le(s,h,g,T){var O=Te.T;Te.T=null;var z=Ge.p;try{Ge.p=8,de(s,h,g,T)}finally{Ge.p=z,Te.T=O}}function de(s,h,g,T){if(K){var O=ve(T);if(O===null)lf(s,h,T,Be,g),kt(s,T);else if(nr(O,s,h,g,T))T.stopPropagation();else if(kt(s,T),h&4&&-1<It.indexOf(s)){for(;O!==null;){var z=mr(O);if(z!==null)switch(z.tag){case 3:if(z=z.stateNode,z.current.memoizedState.isDehydrated){var Y=Re(z.pendingLanes);if(Y!==0){var ue=z;for(ue.pendingLanes|=2,ue.entangledLanes|=2;Y;){var je=1<<31-Ne(Y);ue.entanglements[1]|=je,Y&=~je}ts(z),(gn&6)===0&&(rf=Qr()+500,Nu(0))}}break;case 13:ue=yo(z,2),ue!==null&&ro(ue,z,2),vp(),V(z,2)}if(z=ve(T),z===null&&lf(s,h,T,Be,g),z===O)break;O=z}O!==null&&T.stopPropagation()}else lf(s,h,T,null,g)}}function ve(s){return s=_l(s),Me(s)}var Be=null;function Me(s){if(Be=null,s=Et(s),s!==null){var h=y(s);if(h===null)s=null;else{var g=h.tag;if(g===13){if(s=m(h),s!==null)return s;s=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;s=null}else h!==s&&(s=null)}}return Be=s,null}function Ce(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ii()){case Wn:return 2;case Fa:return 8;case ki:case Ni:return 32;case Yi:return 268435456;default:return 32}default:return 32}}var Ke=!1,ot=null,gt=null,Pt=null,Mt=new Map,Ct=new Map,Ut=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kt(s,h){switch(s){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":gt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Mt.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ct.delete(h.pointerId)}}function ft(s,h,g,T,O,z){return s===null||s.nativeEvent!==z?(s={blockedOn:h,domEventName:g,eventSystemFlags:T,nativeEvent:z,targetContainers:[O]},h!==null&&(h=mr(h),h!==null&&W(h)),s):(s.eventSystemFlags|=T,h=s.targetContainers,O!==null&&h.indexOf(O)===-1&&h.push(O),s)}function nr(s,h,g,T,O){switch(h){case"focusin":return ot=ft(ot,s,h,g,T,O),!0;case"dragenter":return gt=ft(gt,s,h,g,T,O),!0;case"mouseover":return Pt=ft(Pt,s,h,g,T,O),!0;case"pointerover":var z=O.pointerId;return Mt.set(z,ft(Mt.get(z)||null,s,h,g,T,O)),!0;case"gotpointercapture":return z=O.pointerId,Ct.set(z,ft(Ct.get(z)||null,s,h,g,T,O)),!0}return!1}function sr(s){var h=Et(s.target);if(h!==null){var g=y(h);if(g!==null){if(h=g.tag,h===13){if(h=m(g),h!==null){s.blockedOn=h,ui(s.priority,function(){if(g.tag===13){var T=Ta();T=qt(T);var O=yo(g,T);O!==null&&ro(O,g,T),V(g,T)}});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){s.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Zt(s){if(s.blockedOn!==null)return!1;for(var h=s.targetContainers;0<h.length;){var g=ve(s.nativeEvent);if(g===null){g=s.nativeEvent;var T=new g.constructor(g.type,g);xr=T,g.target.dispatchEvent(T),xr=null}else return h=mr(g),h!==null&&W(h),s.blockedOn=g,!1;h.shift()}return!0}function Vt(s,h,g){Zt(s)&&g.delete(h)}function Cr(){Ke=!1,ot!==null&&Zt(ot)&&(ot=null),gt!==null&&Zt(gt)&&(gt=null),Pt!==null&&Zt(Pt)&&(Pt=null),Mt.forEach(Vt),Ct.forEach(Vt)}function bn(s,h){s.blockedOn===h&&(s.blockedOn=null,Ke||(Ke=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Cr)))}var Hn=null;function Ci(s){Hn!==s&&(Hn=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Hn===s&&(Hn=null);for(var h=0;h<s.length;h+=3){var g=s[h],T=s[h+1],O=s[h+2];if(typeof T!="function"){if(Me(T||g)===null)continue;break}var z=mr(g);z!==null&&(s.splice(h,3),h-=3,At(z,{pending:!0,data:O,method:g.method,action:T},T,O))}}))}function ia(s){function h(je){return bn(je,s)}ot!==null&&bn(ot,s),gt!==null&&bn(gt,s),Pt!==null&&bn(Pt,s),Mt.forEach(h),Ct.forEach(h);for(var g=0;g<Ut.length;g++){var T=Ut[g];T.blockedOn===s&&(T.blockedOn=null)}for(;0<Ut.length&&(g=Ut[0],g.blockedOn===null);)sr(g),g.blockedOn===null&&Ut.shift();if(g=(s.ownerDocument||s).$$reactFormReplay,g!=null)for(T=0;T<g.length;T+=3){var O=g[T],z=g[T+1],Y=O[Ar]||null;if(typeof z=="function")Y||Ci(g);else if(Y){var ue=null;if(z&&z.hasAttribute("formAction")){if(O=z,Y=z[Ar]||null)ue=Y.formAction;else if(Me(O)!==null)continue}else ue=Y.action;typeof ue=="function"?g[T+1]=ue:(g.splice(T,3),T-=3),Ci(g)}}}function aa(s){this._internalRoot=s}oi.prototype.render=aa.prototype.render=function(s){var h=this._internalRoot;if(h===null)throw Error(a(409));var g=h.current,T=Ta();D(g,T,s,h,null,null)},oi.prototype.unmount=aa.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var h=s.containerInfo;D(s.current,2,null,s,null,null),vp(),h[Mn]=null}};function oi(s){this._internalRoot=s}oi.prototype.unstable_scheduleHydration=function(s){if(s){var h=ei();s={blockedOn:null,target:s,priority:h};for(var g=0;g<Ut.length&&h!==0&&h<Ut[g].priority;g++);Ut.splice(g,0,s),g===0&&sr(s)}};var An=t.version;if(An!=="19.1.0")throw Error(a(527,An,"19.1.0"));Ge.findDOMNode=function(s){var h=s._reactInternals;if(h===void 0)throw typeof s.render=="function"?Error(a(188)):(s=Object.keys(s).join(","),Error(a(268,s)));return s=M(h),s=s!==null?E(s):null,s=s===null?null:s.stateNode,s};var Ti={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Te,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var si=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!si.isDisabled&&si.supportsFiber)try{Ri=si.inject(Ti),Jn=si}catch{}}return Og.createRoot=function(s,h){if(!d(s))throw Error(a(299));var g=!1,T="",O=$h,z=Bc,Y=Um,ue=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(T=h.identifierPrefix),h.onUncaughtError!==void 0&&(O=h.onUncaughtError),h.onCaughtError!==void 0&&(z=h.onCaughtError),h.onRecoverableError!==void 0&&(Y=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(ue=h.unstable_transitionCallbacks)),h=P(s,1,!1,null,null,g,T,O,z,Y,ue,null),s[Mn]=h.current,Op(s),new aa(h)},Og.hydrateRoot=function(s,h,g){if(!d(s))throw Error(a(299));var T=!1,O="",z=$h,Y=Bc,ue=Um,je=null,Ue=null;return g!=null&&(g.unstable_strictMode===!0&&(T=!0),g.identifierPrefix!==void 0&&(O=g.identifierPrefix),g.onUncaughtError!==void 0&&(z=g.onUncaughtError),g.onCaughtError!==void 0&&(Y=g.onCaughtError),g.onRecoverableError!==void 0&&(ue=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(je=g.unstable_transitionCallbacks),g.formState!==void 0&&(Ue=g.formState)),h=P(s,1,!0,h,g??null,T,O,z,Y,ue,je,Ue),h.context=I(null),g=h.current,T=Ta(),T=qt(T),O=ms(T),O.callback=null,bo(g,O,T),g=T,h.current.lanes=g,Ht(h,g),ts(h),s[Mn]=h.current,Op(s),new oi(h)},Og.version="19.1.0",Og}var uA;function LD(){if(uA)return i0.exports;uA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),i0.exports=zD(),i0.exports}var BD=LD();function hA(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function FD(...e){return t=>{let i=!1;const a=e.map(d=>{const y=hA(d,t);return!i&&typeof y=="function"&&(i=!0),y});if(i)return()=>{for(let d=0;d<a.length;d++){const y=a[d];typeof y=="function"?y():hA(e[d],null)}}}}function ey(...e){return Fe.useCallback(FD(...e),e)}function i_(e){const t=$D(e),i=Fe.forwardRef((a,d)=>{const{children:y,...m}=a,l=Fe.Children.toArray(y),M=l.find(UD);if(M){const E=M.props.children,N=l.map(C=>C===M?Fe.Children.count(E)>1?Fe.Children.only(null):Fe.isValidElement(E)?E.props.children:null:C);return x.jsx(t,{...m,ref:d,children:Fe.isValidElement(E)?Fe.cloneElement(E,void 0,N):null})}return x.jsx(t,{...m,ref:d,children:y})});return i.displayName=`${e}.Slot`,i}var _I=i_("Slot");function $D(e){const t=Fe.forwardRef((i,a)=>{const{children:d,...y}=i,m=Fe.isValidElement(d)?GD(d):void 0,l=ey(m,a);if(Fe.isValidElement(d)){const M=VD(y,d.props);return d.type!==Fe.Fragment&&(M.ref=l),Fe.cloneElement(d,M)}return Fe.Children.count(d)>1?Fe.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var qD=Symbol("radix.slottable");function UD(e){return Fe.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===qD}function VD(e,t){const i={...t};for(const a in t){const d=e[a],y=t[a];/^on[A-Z]/.test(a)?d&&y?i[a]=(...l)=>{const M=y(...l);return d(...l),M}:d&&(i[a]=d):a==="style"?i[a]={...d,...y}:a==="className"&&(i[a]=[d,y].filter(Boolean).join(" "))}return{...e,...i}}function GD(e){var a,d;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=(d=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:d.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}function xI(e){var t,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var d=e.length;for(t=0;t<d;t++)e[t]&&(i=xI(e[t]))&&(a&&(a+=" "),a+=i)}else for(i in e)e[i]&&(a&&(a+=" "),a+=i);return a}function ln(){for(var e,t,i=0,a="",d=arguments.length;i<d;i++)(e=arguments[i])&&(t=xI(e))&&(a&&(a+=" "),a+=t);return a}const dA=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,fA=ln,VS=(e,t)=>i=>{var a;if((t==null?void 0:t.variants)==null)return fA(e,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:d,defaultVariants:y}=t,m=Object.keys(d).map(E=>{const N=i==null?void 0:i[E],C=y==null?void 0:y[E];if(N===null)return null;const L=dA(N)||dA(C);return d[E][L]}),l=i&&Object.entries(i).reduce((E,N)=>{let[C,L]=N;return L===void 0||(E[C]=L),E},{}),M=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((E,N)=>{let{class:C,className:L,...F}=N;return Object.entries(F).every(H=>{let[G,q]=H;return Array.isArray(q)?q.includes({...y,...l}[G]):{...y,...l}[G]===q})?[...E,C,L]:E},[]);return fA(e,m,M,i==null?void 0:i.class,i==null?void 0:i.className)},GS="-",ZD=e=>{const t=XD(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:m=>{const l=m.split(GS);return l[0]===""&&l.length!==1&&l.shift(),bI(l,t)||HD(m)},getConflictingClassGroupIds:(m,l)=>{const M=i[m]||[];return l&&a[m]?[...M,...a[m]]:M}}},bI=(e,t)=>{var m;if(e.length===0)return t.classGroupId;const i=e[0],a=t.nextPart.get(i),d=a?bI(e.slice(1),a):void 0;if(d)return d;if(t.validators.length===0)return;const y=e.join(GS);return(m=t.validators.find(({validator:l})=>l(y)))==null?void 0:m.classGroupId},pA=/^\[(.+)\]$/,HD=e=>{if(pA.test(e)){const t=pA.exec(e)[1],i=t==null?void 0:t.substring(0,t.indexOf(":"));if(i)return"arbitrary.."+i}},XD=e=>{const{theme:t,classGroups:i}=e,a={nextPart:new Map,validators:[]};for(const d in i)f2(i[d],a,d,t);return a},f2=(e,t,i,a)=>{e.forEach(d=>{if(typeof d=="string"){const y=d===""?t:mA(t,d);y.classGroupId=i;return}if(typeof d=="function"){if(WD(d)){f2(d(a),t,i,a);return}t.validators.push({validator:d,classGroupId:i});return}Object.entries(d).forEach(([y,m])=>{f2(m,mA(t,y),i,a)})})},mA=(e,t)=>{let i=e;return t.split(GS).forEach(a=>{i.nextPart.has(a)||i.nextPart.set(a,{nextPart:new Map,validators:[]}),i=i.nextPart.get(a)}),i},WD=e=>e.isThemeGetter,YD=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,i=new Map,a=new Map;const d=(y,m)=>{i.set(y,m),t++,t>e&&(t=0,a=i,i=new Map)};return{get(y){let m=i.get(y);if(m!==void 0)return m;if((m=a.get(y))!==void 0)return d(y,m),m},set(y,m){i.has(y)?i.set(y,m):d(y,m)}}},p2="!",m2=":",KD=m2.length,QD=e=>{const{prefix:t,experimentalParseClassName:i}=e;let a=d=>{const y=[];let m=0,l=0,M=0,E;for(let H=0;H<d.length;H++){let G=d[H];if(m===0&&l===0){if(G===m2){y.push(d.slice(M,H)),M=H+KD;continue}if(G==="/"){E=H;continue}}G==="["?m++:G==="]"?m--:G==="("?l++:G===")"&&l--}const N=y.length===0?d:d.substring(M),C=JD(N),L=C!==N,F=E&&E>M?E-M:void 0;return{modifiers:y,hasImportantModifier:L,baseClassName:C,maybePostfixModifierPosition:F}};if(t){const d=t+m2,y=a;a=m=>m.startsWith(d)?y(m.substring(d.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:m,maybePostfixModifierPosition:void 0}}if(i){const d=a;a=y=>i({className:y,parseClassName:d})}return a},JD=e=>e.endsWith(p2)?e.substring(0,e.length-1):e.startsWith(p2)?e.substring(1):e,ez=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const d=[];let y=[];return a.forEach(m=>{m[0]==="["||t[m]?(d.push(...y.sort(),m),y=[]):y.push(m)}),d.push(...y.sort()),d}},tz=e=>({cache:YD(e.cacheSize),parseClassName:QD(e),sortModifiers:ez(e),...ZD(e)}),rz=/\s+/,nz=(e,t)=>{const{parseClassName:i,getClassGroupId:a,getConflictingClassGroupIds:d,sortModifiers:y}=t,m=[],l=e.trim().split(rz);let M="";for(let E=l.length-1;E>=0;E-=1){const N=l[E],{isExternal:C,modifiers:L,hasImportantModifier:F,baseClassName:H,maybePostfixModifierPosition:G}=i(N);if(C){M=N+(M.length>0?" "+M:M);continue}let q=!!G,re=a(q?H.substring(0,G):H);if(!re){if(!q){M=N+(M.length>0?" "+M:M);continue}if(re=a(H),!re){M=N+(M.length>0?" "+M:M);continue}q=!1}const ie=y(L).join(":"),ne=F?ie+p2:ie,ce=ne+re;if(m.includes(ce))continue;m.push(ce);const J=d(re,q);for(let ee=0;ee<J.length;++ee){const he=J[ee];m.push(ne+he)}M=N+(M.length>0?" "+M:M)}return M};function iz(){let e=0,t,i,a="";for(;e<arguments.length;)(t=arguments[e++])&&(i=wI(t))&&(a&&(a+=" "),a+=i);return a}const wI=e=>{if(typeof e=="string")return e;let t,i="";for(let a=0;a<e.length;a++)e[a]&&(t=wI(e[a]))&&(i&&(i+=" "),i+=t);return i};function az(e,...t){let i,a,d,y=m;function m(M){const E=t.reduce((N,C)=>C(N),e());return i=tz(E),a=i.cache.get,d=i.cache.set,y=l,l(M)}function l(M){const E=a(M);if(E)return E;const N=nz(M,i);return d(M,N),N}return function(){return y(iz.apply(null,arguments))}}const oa=e=>{const t=i=>i[e]||[];return t.isThemeGetter=!0,t},SI=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,TI=/^\((?:(\w[\w-]*):)?(.+)\)$/i,oz=/^\d+\/\d+$/,sz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,cz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,uz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vp=e=>oz.test(e),Lr=e=>!!e&&!Number.isNaN(Number(e)),cd=e=>!!e&&Number.isInteger(Number(e)),l0=e=>e.endsWith("%")&&Lr(e.slice(0,-1)),Uu=e=>sz.test(e),dz=()=>!0,fz=e=>lz.test(e)&&!cz.test(e),AI=()=>!1,pz=e=>uz.test(e),mz=e=>hz.test(e),gz=e=>!Kt(e)&&!Qt(e),yz=e=>Pm(e,PI,AI),Kt=e=>SI.test(e),vf=e=>Pm(e,EI,fz),c0=e=>Pm(e,wz,Lr),gA=e=>Pm(e,MI,AI),vz=e=>Pm(e,jI,mz),zv=e=>Pm(e,CI,pz),Qt=e=>TI.test(e),Ig=e=>Em(e,EI),_z=e=>Em(e,Sz),yA=e=>Em(e,MI),xz=e=>Em(e,PI),bz=e=>Em(e,jI),Lv=e=>Em(e,CI,!0),Pm=(e,t,i)=>{const a=SI.exec(e);return a?a[1]?t(a[1]):i(a[2]):!1},Em=(e,t,i=!1)=>{const a=TI.exec(e);return a?a[1]?t(a[1]):i:!1},MI=e=>e==="position"||e==="percentage",jI=e=>e==="image"||e==="url",PI=e=>e==="length"||e==="size"||e==="bg-size",EI=e=>e==="length",wz=e=>e==="number",Sz=e=>e==="family-name",CI=e=>e==="shadow",Tz=()=>{const e=oa("color"),t=oa("font"),i=oa("text"),a=oa("font-weight"),d=oa("tracking"),y=oa("leading"),m=oa("breakpoint"),l=oa("container"),M=oa("spacing"),E=oa("radius"),N=oa("shadow"),C=oa("inset-shadow"),L=oa("text-shadow"),F=oa("drop-shadow"),H=oa("blur"),G=oa("perspective"),q=oa("aspect"),re=oa("ease"),ie=oa("animate"),ne=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ce=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],J=()=>[...ce(),Qt,Kt],ee=()=>["auto","hidden","clip","visible","scroll"],he=()=>["auto","contain","none"],ge=()=>[Qt,Kt,M],Oe=()=>[Vp,"full","auto",...ge()],at=()=>[cd,"none","subgrid",Qt,Kt],ke=()=>["auto",{span:["full",cd,Qt,Kt]},cd,Qt,Kt],qe=()=>[cd,"auto",Qt,Kt],et=()=>["auto","min","max","fr",Qt,Kt],st=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],rt=()=>["start","end","center","stretch","center-safe","end-safe"],Te=()=>["auto",...ge()],Ge=()=>[Vp,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...ge()],Ze=()=>[e,Qt,Kt],dt=()=>[...ce(),yA,gA,{position:[Qt,Kt]}],xe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],We=()=>["auto","cover","contain",xz,yz,{size:[Qt,Kt]}],lt=()=>[l0,Ig,vf],ct=()=>["","none","full",E,Qt,Kt],jt=()=>["",Lr,Ig,vf],Gt=()=>["solid","dashed","dotted","double"],zt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],yr=()=>[Lr,l0,yA,gA],ar=()=>["","none",H,Qt,Kt],Ot=()=>["none",Lr,Qt,Kt],rr=()=>["none",Lr,Qt,Kt],or=()=>[Lr,Qt,Kt],_t=()=>[Vp,"full",...ge()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Uu],breakpoint:[Uu],color:[dz],container:[Uu],"drop-shadow":[Uu],ease:["in","out","in-out"],font:[gz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Uu],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Uu],shadow:[Uu],spacing:["px",Lr],text:[Uu],"text-shadow":[Uu],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Vp,Kt,Qt,q]}],container:["container"],columns:[{columns:[Lr,Kt,Qt,l]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:J()}],overflow:[{overflow:ee()}],"overflow-x":[{"overflow-x":ee()}],"overflow-y":[{"overflow-y":ee()}],overscroll:[{overscroll:he()}],"overscroll-x":[{"overscroll-x":he()}],"overscroll-y":[{"overscroll-y":he()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Oe()}],"inset-x":[{"inset-x":Oe()}],"inset-y":[{"inset-y":Oe()}],start:[{start:Oe()}],end:[{end:Oe()}],top:[{top:Oe()}],right:[{right:Oe()}],bottom:[{bottom:Oe()}],left:[{left:Oe()}],visibility:["visible","invisible","collapse"],z:[{z:[cd,"auto",Qt,Kt]}],basis:[{basis:[Vp,"full","auto",l,...ge()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Lr,Vp,"auto","initial","none",Kt]}],grow:[{grow:["",Lr,Qt,Kt]}],shrink:[{shrink:["",Lr,Qt,Kt]}],order:[{order:[cd,"first","last","none",Qt,Kt]}],"grid-cols":[{"grid-cols":at()}],"col-start-end":[{col:ke()}],"col-start":[{"col-start":qe()}],"col-end":[{"col-end":qe()}],"grid-rows":[{"grid-rows":at()}],"row-start-end":[{row:ke()}],"row-start":[{"row-start":qe()}],"row-end":[{"row-end":qe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":et()}],"auto-rows":[{"auto-rows":et()}],gap:[{gap:ge()}],"gap-x":[{"gap-x":ge()}],"gap-y":[{"gap-y":ge()}],"justify-content":[{justify:[...st(),"normal"]}],"justify-items":[{"justify-items":[...rt(),"normal"]}],"justify-self":[{"justify-self":["auto",...rt()]}],"align-content":[{content:["normal",...st()]}],"align-items":[{items:[...rt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...rt(),{baseline:["","last"]}]}],"place-content":[{"place-content":st()}],"place-items":[{"place-items":[...rt(),"baseline"]}],"place-self":[{"place-self":["auto",...rt()]}],p:[{p:ge()}],px:[{px:ge()}],py:[{py:ge()}],ps:[{ps:ge()}],pe:[{pe:ge()}],pt:[{pt:ge()}],pr:[{pr:ge()}],pb:[{pb:ge()}],pl:[{pl:ge()}],m:[{m:Te()}],mx:[{mx:Te()}],my:[{my:Te()}],ms:[{ms:Te()}],me:[{me:Te()}],mt:[{mt:Te()}],mr:[{mr:Te()}],mb:[{mb:Te()}],ml:[{ml:Te()}],"space-x":[{"space-x":ge()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":ge()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ge()}],w:[{w:[l,"screen",...Ge()]}],"min-w":[{"min-w":[l,"screen","none",...Ge()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[m]},...Ge()]}],h:[{h:["screen","lh",...Ge()]}],"min-h":[{"min-h":["screen","lh","none",...Ge()]}],"max-h":[{"max-h":["screen","lh",...Ge()]}],"font-size":[{text:["base",i,Ig,vf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Qt,c0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",l0,Kt]}],"font-family":[{font:[_z,Kt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[d,Qt,Kt]}],"line-clamp":[{"line-clamp":[Lr,"none",Qt,c0]}],leading:[{leading:[y,...ge()]}],"list-image":[{"list-image":["none",Qt,Kt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Qt,Kt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Ze()}],"text-color":[{text:Ze()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Gt(),"wavy"]}],"text-decoration-thickness":[{decoration:[Lr,"from-font","auto",Qt,vf]}],"text-decoration-color":[{decoration:Ze()}],"underline-offset":[{"underline-offset":[Lr,"auto",Qt,Kt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ge()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qt,Kt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qt,Kt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:dt()}],"bg-repeat":[{bg:xe()}],"bg-size":[{bg:We()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},cd,Qt,Kt],radial:["",Qt,Kt],conic:[cd,Qt,Kt]},bz,vz]}],"bg-color":[{bg:Ze()}],"gradient-from-pos":[{from:lt()}],"gradient-via-pos":[{via:lt()}],"gradient-to-pos":[{to:lt()}],"gradient-from":[{from:Ze()}],"gradient-via":[{via:Ze()}],"gradient-to":[{to:Ze()}],rounded:[{rounded:ct()}],"rounded-s":[{"rounded-s":ct()}],"rounded-e":[{"rounded-e":ct()}],"rounded-t":[{"rounded-t":ct()}],"rounded-r":[{"rounded-r":ct()}],"rounded-b":[{"rounded-b":ct()}],"rounded-l":[{"rounded-l":ct()}],"rounded-ss":[{"rounded-ss":ct()}],"rounded-se":[{"rounded-se":ct()}],"rounded-ee":[{"rounded-ee":ct()}],"rounded-es":[{"rounded-es":ct()}],"rounded-tl":[{"rounded-tl":ct()}],"rounded-tr":[{"rounded-tr":ct()}],"rounded-br":[{"rounded-br":ct()}],"rounded-bl":[{"rounded-bl":ct()}],"border-w":[{border:jt()}],"border-w-x":[{"border-x":jt()}],"border-w-y":[{"border-y":jt()}],"border-w-s":[{"border-s":jt()}],"border-w-e":[{"border-e":jt()}],"border-w-t":[{"border-t":jt()}],"border-w-r":[{"border-r":jt()}],"border-w-b":[{"border-b":jt()}],"border-w-l":[{"border-l":jt()}],"divide-x":[{"divide-x":jt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":jt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Gt(),"hidden","none"]}],"divide-style":[{divide:[...Gt(),"hidden","none"]}],"border-color":[{border:Ze()}],"border-color-x":[{"border-x":Ze()}],"border-color-y":[{"border-y":Ze()}],"border-color-s":[{"border-s":Ze()}],"border-color-e":[{"border-e":Ze()}],"border-color-t":[{"border-t":Ze()}],"border-color-r":[{"border-r":Ze()}],"border-color-b":[{"border-b":Ze()}],"border-color-l":[{"border-l":Ze()}],"divide-color":[{divide:Ze()}],"outline-style":[{outline:[...Gt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Lr,Qt,Kt]}],"outline-w":[{outline:["",Lr,Ig,vf]}],"outline-color":[{outline:Ze()}],shadow:[{shadow:["","none",N,Lv,zv]}],"shadow-color":[{shadow:Ze()}],"inset-shadow":[{"inset-shadow":["none",C,Lv,zv]}],"inset-shadow-color":[{"inset-shadow":Ze()}],"ring-w":[{ring:jt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Ze()}],"ring-offset-w":[{"ring-offset":[Lr,vf]}],"ring-offset-color":[{"ring-offset":Ze()}],"inset-ring-w":[{"inset-ring":jt()}],"inset-ring-color":[{"inset-ring":Ze()}],"text-shadow":[{"text-shadow":["none",L,Lv,zv]}],"text-shadow-color":[{"text-shadow":Ze()}],opacity:[{opacity:[Lr,Qt,Kt]}],"mix-blend":[{"mix-blend":[...zt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":zt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Lr]}],"mask-image-linear-from-pos":[{"mask-linear-from":yr()}],"mask-image-linear-to-pos":[{"mask-linear-to":yr()}],"mask-image-linear-from-color":[{"mask-linear-from":Ze()}],"mask-image-linear-to-color":[{"mask-linear-to":Ze()}],"mask-image-t-from-pos":[{"mask-t-from":yr()}],"mask-image-t-to-pos":[{"mask-t-to":yr()}],"mask-image-t-from-color":[{"mask-t-from":Ze()}],"mask-image-t-to-color":[{"mask-t-to":Ze()}],"mask-image-r-from-pos":[{"mask-r-from":yr()}],"mask-image-r-to-pos":[{"mask-r-to":yr()}],"mask-image-r-from-color":[{"mask-r-from":Ze()}],"mask-image-r-to-color":[{"mask-r-to":Ze()}],"mask-image-b-from-pos":[{"mask-b-from":yr()}],"mask-image-b-to-pos":[{"mask-b-to":yr()}],"mask-image-b-from-color":[{"mask-b-from":Ze()}],"mask-image-b-to-color":[{"mask-b-to":Ze()}],"mask-image-l-from-pos":[{"mask-l-from":yr()}],"mask-image-l-to-pos":[{"mask-l-to":yr()}],"mask-image-l-from-color":[{"mask-l-from":Ze()}],"mask-image-l-to-color":[{"mask-l-to":Ze()}],"mask-image-x-from-pos":[{"mask-x-from":yr()}],"mask-image-x-to-pos":[{"mask-x-to":yr()}],"mask-image-x-from-color":[{"mask-x-from":Ze()}],"mask-image-x-to-color":[{"mask-x-to":Ze()}],"mask-image-y-from-pos":[{"mask-y-from":yr()}],"mask-image-y-to-pos":[{"mask-y-to":yr()}],"mask-image-y-from-color":[{"mask-y-from":Ze()}],"mask-image-y-to-color":[{"mask-y-to":Ze()}],"mask-image-radial":[{"mask-radial":[Qt,Kt]}],"mask-image-radial-from-pos":[{"mask-radial-from":yr()}],"mask-image-radial-to-pos":[{"mask-radial-to":yr()}],"mask-image-radial-from-color":[{"mask-radial-from":Ze()}],"mask-image-radial-to-color":[{"mask-radial-to":Ze()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ce()}],"mask-image-conic-pos":[{"mask-conic":[Lr]}],"mask-image-conic-from-pos":[{"mask-conic-from":yr()}],"mask-image-conic-to-pos":[{"mask-conic-to":yr()}],"mask-image-conic-from-color":[{"mask-conic-from":Ze()}],"mask-image-conic-to-color":[{"mask-conic-to":Ze()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:dt()}],"mask-repeat":[{mask:xe()}],"mask-size":[{mask:We()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Qt,Kt]}],filter:[{filter:["","none",Qt,Kt]}],blur:[{blur:ar()}],brightness:[{brightness:[Lr,Qt,Kt]}],contrast:[{contrast:[Lr,Qt,Kt]}],"drop-shadow":[{"drop-shadow":["","none",F,Lv,zv]}],"drop-shadow-color":[{"drop-shadow":Ze()}],grayscale:[{grayscale:["",Lr,Qt,Kt]}],"hue-rotate":[{"hue-rotate":[Lr,Qt,Kt]}],invert:[{invert:["",Lr,Qt,Kt]}],saturate:[{saturate:[Lr,Qt,Kt]}],sepia:[{sepia:["",Lr,Qt,Kt]}],"backdrop-filter":[{"backdrop-filter":["","none",Qt,Kt]}],"backdrop-blur":[{"backdrop-blur":ar()}],"backdrop-brightness":[{"backdrop-brightness":[Lr,Qt,Kt]}],"backdrop-contrast":[{"backdrop-contrast":[Lr,Qt,Kt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Lr,Qt,Kt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Lr,Qt,Kt]}],"backdrop-invert":[{"backdrop-invert":["",Lr,Qt,Kt]}],"backdrop-opacity":[{"backdrop-opacity":[Lr,Qt,Kt]}],"backdrop-saturate":[{"backdrop-saturate":[Lr,Qt,Kt]}],"backdrop-sepia":[{"backdrop-sepia":["",Lr,Qt,Kt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":ge()}],"border-spacing-x":[{"border-spacing-x":ge()}],"border-spacing-y":[{"border-spacing-y":ge()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Qt,Kt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Lr,"initial",Qt,Kt]}],ease:[{ease:["linear","initial",re,Qt,Kt]}],delay:[{delay:[Lr,Qt,Kt]}],animate:[{animate:["none",ie,Qt,Kt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[G,Qt,Kt]}],"perspective-origin":[{"perspective-origin":J()}],rotate:[{rotate:Ot()}],"rotate-x":[{"rotate-x":Ot()}],"rotate-y":[{"rotate-y":Ot()}],"rotate-z":[{"rotate-z":Ot()}],scale:[{scale:rr()}],"scale-x":[{"scale-x":rr()}],"scale-y":[{"scale-y":rr()}],"scale-z":[{"scale-z":rr()}],"scale-3d":["scale-3d"],skew:[{skew:or()}],"skew-x":[{"skew-x":or()}],"skew-y":[{"skew-y":or()}],transform:[{transform:[Qt,Kt,"","none","gpu","cpu"]}],"transform-origin":[{origin:J()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:_t()}],"translate-x":[{"translate-x":_t()}],"translate-y":[{"translate-y":_t()}],"translate-z":[{"translate-z":_t()}],"translate-none":["translate-none"],accent:[{accent:Ze()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Ze()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qt,Kt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ge()}],"scroll-mx":[{"scroll-mx":ge()}],"scroll-my":[{"scroll-my":ge()}],"scroll-ms":[{"scroll-ms":ge()}],"scroll-me":[{"scroll-me":ge()}],"scroll-mt":[{"scroll-mt":ge()}],"scroll-mr":[{"scroll-mr":ge()}],"scroll-mb":[{"scroll-mb":ge()}],"scroll-ml":[{"scroll-ml":ge()}],"scroll-p":[{"scroll-p":ge()}],"scroll-px":[{"scroll-px":ge()}],"scroll-py":[{"scroll-py":ge()}],"scroll-ps":[{"scroll-ps":ge()}],"scroll-pe":[{"scroll-pe":ge()}],"scroll-pt":[{"scroll-pt":ge()}],"scroll-pr":[{"scroll-pr":ge()}],"scroll-pb":[{"scroll-pb":ge()}],"scroll-pl":[{"scroll-pl":ge()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qt,Kt]}],fill:[{fill:["none",...Ze()]}],"stroke-w":[{stroke:[Lr,Ig,vf,c0]}],stroke:[{stroke:["none",...Ze()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Az=az(Tz);function Ba(...e){return Az(ln(e))}const Mz=VS("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Zr({className:e,variant:t,size:i,asChild:a=!1,...d}){const y=a?_I:"button";return x.jsx(y,{"data-slot":"button",className:Ba(Mz({variant:t,size:i,className:e})),...d})}function Ft({className:e,...t}){return x.jsx("div",{"data-slot":"card",className:Ba("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function Mr({className:e,type:t,...i}){return x.jsx("input",{type:t,"data-slot":"input",className:Ba("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}vI();var jz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Df=jz.reduce((e,t)=>{const i=i_(`Primitive.${t}`),a=Fe.forwardRef((d,y)=>{const{asChild:m,...l}=d,M=m?i:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(M,{...l,ref:y})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),Pz="Label",OI=Fe.forwardRef((e,t)=>x.jsx(Df.label,{...e,ref:t,onMouseDown:i=>{var d;i.target.closest("button, input, select, textarea")||((d=e.onMouseDown)==null||d.call(e,i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));OI.displayName=Pz;var Ez=OI;function Rt({className:e,...t}){return x.jsx(Ez,{"data-slot":"label",className:Ba("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Oz=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,a)=>a?a.toUpperCase():i.toLowerCase()),vA=e=>{const t=Oz(e);return t.charAt(0).toUpperCase()+t.slice(1)},II=(...e)=>e.filter((t,i,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===i).join(" ").trim(),Iz=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=Fe.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:d="",children:y,iconNode:m,...l},M)=>Fe.createElement("svg",{ref:M,...kz,width:t,height:t,stroke:e,strokeWidth:a?Number(i)*24/Number(t):i,className:II("lucide",d),...!y&&!Iz(l)&&{"aria-hidden":"true"},...l},[...m.map(([E,N])=>Fe.createElement(E,N)),...Array.isArray(y)?y:[y]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=(e,t)=>{const i=Fe.forwardRef(({className:a,...d},y)=>Fe.createElement(Nz,{ref:y,iconNode:t,className:II(`lucide-${Cz(vA(e))}`,`lucide-${e}`,a),...d}));return i.displayName=vA(e),i};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rz=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],g2=tr("activity",Rz);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],kI=tr("award",Dz);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],Lz=tr("bath",zz);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],Fz=tr("bed",Bz);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],qz=tr("bell",$z);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Vz=tr("book-open",Uz);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],dd=tr("brain",Gz);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zz=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],zf=tr("building-2",Zz);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],NI=tr("calendar",Hz);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],Wz=tr("car",Xz);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yz=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],dc=tr("chart-column",Yz);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],RI=tr("check",Kz);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],kg=tr("chevron-down",Qz);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jz=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ng=tr("chevron-up",Jz);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qc=tr("circle-alert",e3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],cl=tr("circle-check",t3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],DI=tr("clock",r3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],i3=tr("compass",n3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],zI=tr("copy",a3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],LI=tr("credit-card",o3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ZS=tr("crown",s3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],c3=tr("database",l3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],h3=tr("dollar-sign",u3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],y2=tr("download",d3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],p3=tr("external-link",f3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],g3=tr("eye",m3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_A=tr("file-text",y3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Mf=tr("gift",v3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],x3=tr("github",_3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ty=tr("house",b3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],S3=tr("info",w3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],A3=tr("layout-dashboard",T3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],j3=tr("lightbulb",M3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],E3=tr("loader-circle",P3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],xA=tr("lock",C3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],BI=tr("log-in",O3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],k3=tr("log-out",I3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],FI=tr("mail",N3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Xg=tr("map-pin",R3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],im=tr("map",D3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],L3=tr("message-square",z3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M5 12h14",key:"1ays0h"}]],F3=tr("minus",B3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],q3=tr("paintbrush",$3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],V3=tr("qr-code",U3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Z3=tr("refresh-ccw",G3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],X3=tr("rotate-ccw",H3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Y3=tr("route",W3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Q3=tr("ruler",K3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],e5=tr("search",J3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],e_=tr("settings",t5);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],n5=tr("share-2",r5);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],fc=tr("sparkles",i5);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],$I=tr("target",a5);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],v2=tr("trending-down",o5);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Ms=tr("trending-up",s5);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],qI=tr("trophy",l5);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],u5=tr("user-check",c5);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],d5=tr("user-plus",h5);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],p5=tr("user",f5);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Xu=tr("users",m5);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],UI=tr("zap",g5);function y5({onSubmit:e,isLoading:t}){const[i,a]=Fe.useState({}),[d,y]=Fe.useState({basic:!0,details:!1,amenities:!1,location:!1,advanced:!1}),m=C=>{y(L=>({...L,[C]:!L[C]}))},l=(C,L)=>{a(F=>({...F,[C]:L}))},M=C=>{a(L=>({...L,[C]:!L[C]}))},E=C=>{C.preventDefault(),e(i)},N=Object.keys(i).filter(C=>{const L=i[C];return L!=null&&L!==""}).length;return x.jsxs("form",{onSubmit:E,className:"space-y-6",children:[x.jsxs(Ft,{className:"p-4 card-gradient",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(fc,{className:"w-5 h-5 text-primary"}),x.jsx("span",{className:"font-semibold",children:"مستوى اكتمال البيانات"})]}),x.jsxs("span",{className:"text-sm text-muted-foreground",children:[N," / 100 حقل"]})]}),x.jsx("div",{className:"w-full h-2 bg-muted rounded-full overflow-hidden",children:x.jsx("div",{className:"progress-bar h-full rounded-full",style:{width:`${Math.min(N/100*100,100)}%`}})}),x.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"كلما أضفت المزيد من التفاصيل، زادت دقة التقييم"})]}),x.jsxs(Ft,{className:"overflow-hidden",children:[x.jsxs("button",{type:"button",onClick:()=>m("basic"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:x.jsx(zf,{className:"w-5 h-5 text-primary"})}),x.jsxs("div",{className:"text-right",children:[x.jsx("h3",{className:"font-bold text-lg",children:"البيانات الأساسية"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"المعلومات المطلوبة للتقييم"})]})]}),d.basic?x.jsx(Ng,{}):x.jsx(kg,{})]}),d.basic&&x.jsxs("div",{className:"p-6 pt-0 grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsxs(Rt,{htmlFor:"area",className:"flex items-center gap-2",children:[x.jsx(Q3,{className:"w-4 h-4"}),"المساحة (م²) *"]}),x.jsx(Mr,{id:"area",type:"number",placeholder:"مثال: 300",value:i.area||"",onChange:C=>l("area",C.target.value),required:!0,className:"text-lg"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs(Rt,{htmlFor:"city",className:"flex items-center gap-2",children:[x.jsx(Xg,{className:"w-4 h-4"}),"المدينة *"]}),x.jsxs("select",{id:"city",value:i.city||"",onChange:C=>l("city",C.target.value),required:!0,className:"w-full px-3 py-2 rounded-md border border-input bg-background text-lg",children:[x.jsx("option",{value:"",children:"اختر المدينة"}),x.jsx("option",{value:"الرياض",children:"الرياض"}),x.jsx("option",{value:"جدة",children:"جدة"}),x.jsx("option",{value:"مكة",children:"مكة المكرمة"}),x.jsx("option",{value:"المدينة",children:"المدينة المنورة"}),x.jsx("option",{value:"الدمام",children:"الدمام"}),x.jsx("option",{value:"الخبر",children:"الخبر"}),x.jsx("option",{value:"الظهران",children:"الظهران"}),x.jsx("option",{value:"الطائف",children:"الطائف"}),x.jsx("option",{value:"تبوك",children:"تبوك"}),x.jsx("option",{value:"بريدة",children:"بريدة"}),x.jsx("option",{value:"خميس مشيط",children:"خميس مشيط"}),x.jsx("option",{value:"حائل",children:"حائل"}),x.jsx("option",{value:"نجران",children:"نجران"}),x.jsx("option",{value:"جازان",children:"جازان"}),x.jsx("option",{value:"ينبع",children:"ينبع"}),x.jsx("option",{value:"الأحساء",children:"الأحساء"}),x.jsx("option",{value:"القطيف",children:"القطيف"}),x.jsx("option",{value:"أبها",children:"أبها"}),x.jsx("option",{value:"عرعر",children:"عرعر"}),x.jsx("option",{value:"سكاكا",children:"سكاكا"}),x.jsx("option",{value:"أخرى",children:"أخرى"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs(Rt,{htmlFor:"district",className:"flex items-center gap-2",children:[x.jsx(Xg,{className:"w-4 h-4"}),"الحي *"]}),x.jsx(Mr,{id:"district",type:"text",value:i.district||"",onChange:C=>l("district",C.target.value),placeholder:"مثال: الياسمين",required:!0,className:"text-lg"}),!i.district&&x.jsx("p",{className:"text-xs text-red-500",children:"الحي مطلوب"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs(Rt,{htmlFor:"propertyType",className:"flex items-center gap-2",children:[x.jsx(ty,{className:"w-4 h-4"}),"نوع العقار"]}),x.jsxs("select",{id:"propertyType",value:i.propertyType||"",onChange:C=>l("propertyType",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر النوع"}),x.jsx("option",{value:"فيلا",children:"فيلا"}),x.jsx("option",{value:"شقة",children:"شقة"}),x.jsx("option",{value:"دور",children:"دور"}),x.jsx("option",{value:"عمارة",children:"عمارة"}),x.jsx("option",{value:"أرض",children:"أرض"}),x.jsx("option",{value:"دوبلكس",children:"دوبلكس"}),x.jsx("option",{value:"استوديو",children:"استوديو"}),x.jsx("option",{value:"بنتهاوس",children:"بنتهاوس"}),x.jsx("option",{value:"تاون هاوس",children:"تاون هاوس"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs(Rt,{htmlFor:"age",className:"flex items-center gap-2",children:[x.jsx(NI,{className:"w-4 h-4"}),"عمر العقار"]}),x.jsxs("select",{id:"age",value:i.age||"",onChange:C=>l("age",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر العمر"}),x.jsx("option",{value:"جديد",children:"جديد (قيد الإنشاء أو أقل من سنة)"}),x.jsx("option",{value:"1-5",children:"1-5 سنوات"}),x.jsx("option",{value:"6-10",children:"6-10 سنوات"}),x.jsx("option",{value:"11-15",children:"11-15 سنة"}),x.jsx("option",{value:"16-20",children:"16-20 سنة"}),x.jsx("option",{value:"21-30",children:"21-30 سنة"}),x.jsx("option",{value:"أكثر من 30",children:"أكثر من 30 سنة"})]})]})]})]}),x.jsxs(Ft,{className:"overflow-hidden",children:[x.jsxs("button",{type:"button",onClick:()=>m("details"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:x.jsx(ty,{className:"w-5 h-5 text-primary"})}),x.jsxs("div",{className:"text-right",children:[x.jsx("h3",{className:"font-bold text-lg",children:"تفاصيل العقار"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"الغرف والمرافق الأساسية"})]})]}),d.details?x.jsx(Ng,{}):x.jsx(kg,{})]}),d.details&&x.jsxs("div",{className:"p-6 pt-0 grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsxs(Rt,{htmlFor:"bedrooms",className:"flex items-center gap-2",children:[x.jsx(Fz,{className:"w-4 h-4"}),"عدد الغرف"]}),x.jsx(Mr,{id:"bedrooms",type:"number",placeholder:"مثال: 4",value:i.bedrooms||"",onChange:C=>l("bedrooms",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs(Rt,{htmlFor:"bathrooms",className:"flex items-center gap-2",children:[x.jsx(Lz,{className:"w-4 h-4"}),"دورات المياه"]}),x.jsx(Mr,{id:"bathrooms",type:"number",placeholder:"مثال: 3",value:i.bathrooms||"",onChange:C=>l("bathrooms",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs(Rt,{htmlFor:"parking",className:"flex items-center gap-2",children:[x.jsx(Wz,{className:"w-4 h-4"}),"مواقف السيارات"]}),x.jsx(Mr,{id:"parking",type:"number",placeholder:"مثال: 2",value:i.parking||"",onChange:C=>l("parking",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"maidRooms",children:"غرف خدم"}),x.jsx(Mr,{id:"maidRooms",type:"number",placeholder:"العدد",value:i.maidRooms||"",onChange:C=>l("maidRooms",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"guestRooms",children:"غرف ضيوف"}),x.jsx(Mr,{id:"guestRooms",type:"number",placeholder:"العدد",value:i.guestRooms||"",onChange:C=>l("guestRooms",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"majlis",children:"مجالس"}),x.jsx(Mr,{id:"majlis",type:"number",placeholder:"العدد",value:i.majlis||"",onChange:C=>l("majlis",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"kitchens",children:"عدد المطابخ"}),x.jsx(Mr,{id:"kitchens",type:"number",placeholder:"مثال: 1",value:i.kitchens||"",onChange:C=>l("kitchens",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"storage",children:"مخازن"}),x.jsx(Mr,{id:"storage",type:"number",placeholder:"العدد",value:i.storage||"",onChange:C=>l("storage",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"balconies",children:"شرفات"}),x.jsx(Mr,{id:"balconies",type:"number",placeholder:"العدد",value:i.balconies||"",onChange:C=>l("balconies",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs(Rt,{htmlFor:"finishing",className:"flex items-center gap-2",children:[x.jsx(q3,{className:"w-4 h-4"}),"التشطيب"]}),x.jsxs("select",{id:"finishing",value:i.finishing||"",onChange:C=>l("finishing",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر التشطيب"}),x.jsx("option",{value:"سوبر لوكس",children:"سوبر لوكس"}),x.jsx("option",{value:"لوكس",children:"لوكس"}),x.jsx("option",{value:"ممتاز",children:"ممتاز"}),x.jsx("option",{value:"جيد جداً",children:"جيد جداً"}),x.jsx("option",{value:"جيد",children:"جيد"}),x.jsx("option",{value:"متوسط",children:"متوسط"}),x.jsx("option",{value:"بسيط",children:"بسيط"}),x.jsx("option",{value:"على العظم",children:"على العظم"})]})]})]})]}),x.jsxs(Ft,{className:"overflow-hidden",children:[x.jsxs("button",{type:"button",onClick:()=>m("amenities"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:x.jsx(cl,{className:"w-5 h-5 text-primary"})}),x.jsxs("div",{className:"text-right",children:[x.jsx("h3",{className:"font-bold text-lg",children:"المرافق الإضافية"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"الميزات والخدمات المتوفرة"})]})]}),d.amenities?x.jsx(Ng,{}):x.jsx(kg,{})]}),d.amenities&&x.jsx("div",{className:"p-6 pt-0 grid grid-cols-2 md:grid-cols-3 gap-3",children:[{id:"مسبح",label:"مسبح"},{id:"مصعد",label:"مصعد"},{id:"مولد_كهرباء",label:"مولد كهرباء"},{id:"نظام_أمني",label:"نظام أمني"},{id:"نظام_إطفاء",label:"نظام إطفاء"},{id:"خزان_ماء",label:"خزان ماء"},{id:"سخان_مركزي",label:"سخان مركزي"},{id:"تكييف_مركزي",label:"تكييف مركزي"},{id:"غرفة_خادمة",label:"غرفة خادمة"},{id:"غرفة_سائق",label:"غرفة سائق"},{id:"مجلس_رجال",label:"مجلس رجال"},{id:"صالة_رياضية",label:"صالة رياضية"},{id:"ملحق_خارجي",label:"ملحق خارجي"},{id:"مطبخ_خارجي",label:"مطبخ خارجي"},{id:"موقف_مظلل",label:"موقف مظلل"},{id:"حديقة",label:"حديقة"},{id:"شلال",label:"شلال"},{id:"نافورة",label:"نافورة"},{id:"ملعب_أطفال",label:"ملعب أطفال"},{id:"غرفة_بخار",label:"غرفة بخار"},{id:"جاكوزي",label:"جاكوزي"},{id:"مدفأة",label:"مدفأة"},{id:"مخزن_تحت_الدرج",label:"مخزن تحت الدرج"},{id:"غرفة_غسيل",label:"غرفة غسيل"},{id:"مدخل_خاص",label:"مدخل خاص"}].map(C=>x.jsxs("label",{className:"flex items-center gap-2 p-3 rounded-lg border border-input hover:bg-accent/50 cursor-pointer transition-colors",children:[x.jsx("input",{type:"checkbox",checked:i[C.id]||!1,onChange:()=>M(C.id),className:"w-4 h-4 rounded border-gray-300"}),x.jsx("span",{className:"text-sm",children:C.label})]},C.id))})]}),x.jsxs(Ft,{className:"overflow-hidden",children:[x.jsxs("button",{type:"button",onClick:()=>m("location"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:x.jsx(Xg,{className:"w-5 h-5 text-primary"})}),x.jsxs("div",{className:"text-right",children:[x.jsx("h3",{className:"font-bold text-lg",children:"الموقع والمحيط"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"القرب من الخدمات والمرافق"})]})]}),d.location?x.jsx(Ng,{}):x.jsx(kg,{})]}),d.location&&x.jsxs("div",{className:"p-6 pt-0 space-y-4",children:[x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{id:"قرب_مسجد",label:"مسجد قريب"},{id:"قرب_مدرسة",label:"مدرسة قريبة"},{id:"قرب_مستشفى",label:"مستشفى قريب"},{id:"قرب_مركز_تجاري",label:"مركز تجاري"},{id:"قرب_حديقة",label:"حديقة قريبة"},{id:"قرب_محطة_وقود",label:"محطة وقود"},{id:"قرب_مواصلات_عامة",label:"مواصلات عامة"},{id:"قرب_جامعة",label:"جامعة قريبة"},{id:"قرب_سوبرماركت",label:"سوبرماركت"},{id:"قرب_مطاعم",label:"مطاعم قريبة"},{id:"قرب_صيدلية",label:"صيدلية"},{id:"قرب_بنك",label:"بنك"},{id:"قرب_صراف_آلي",label:"صراف آلي"},{id:"قرب_مكتب_بريد",label:"مكتب بريد"},{id:"قرب_مركز_شرطة",label:"مركز شرطة"},{id:"قرب_دفاع_مدني",label:"دفاع مدني"},{id:"قرب_نادي_رياضي",label:"نادي رياضي"},{id:"قرب_مسبح_عام",label:"مسبح عام"},{id:"قرب_ملاعب",label:"ملاعب رياضية"},{id:"قرب_مكتبة",label:"مكتبة عامة"},{id:"قرب_مسرح",label:"مسرح/سينما"}].map(C=>x.jsxs("label",{className:"flex items-center gap-2 p-3 rounded-lg border border-input hover:bg-accent/50 cursor-pointer transition-colors",children:[x.jsx("input",{type:"checkbox",checked:i[C.id]||!1,onChange:()=>M(C.id),className:"w-4 h-4 rounded border-gray-300"}),x.jsx("span",{className:"text-sm",children:C.label})]},C.id))}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsxs(Rt,{htmlFor:"facade",className:"flex items-center gap-2",children:[x.jsx(i3,{className:"w-4 h-4"}),"اتجاه الواجهة"]}),x.jsxs("select",{id:"facade",value:i.facade||"",onChange:C=>l("facade",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر الاتجاه"}),x.jsx("option",{value:"شمالية",children:"شمالية"}),x.jsx("option",{value:"جنوبية",children:"جنوبية"}),x.jsx("option",{value:"شرقية",children:"شرقية"}),x.jsx("option",{value:"غربية",children:"غربية"}),x.jsx("option",{value:"شمالية شرقية",children:"شمالية شرقية"}),x.jsx("option",{value:"شمالية غربية",children:"شمالية غربية"}),x.jsx("option",{value:"جنوبية شرقية",children:"جنوبية شرقية"}),x.jsx("option",{value:"جنوبية غربية",children:"جنوبية غربية"}),x.jsx("option",{value:"ثلاث واجهات",children:"ثلاث واجهات"}),x.jsx("option",{value:"أربع واجهات",children:"أربع واجهات"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs(Rt,{htmlFor:"streetWidth",className:"flex items-center gap-2",children:[x.jsx(Y3,{className:"w-4 h-4"}),"عرض الشارع"]}),x.jsxs("select",{id:"streetWidth",value:i.streetWidth||"",onChange:C=>l("streetWidth",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر العرض"}),x.jsx("option",{value:"< 10م",children:"أقل من 10 متر"}),x.jsx("option",{value:"10-15م",children:"10-15 متر"}),x.jsx("option",{value:"16-20م",children:"16-20 متر"}),x.jsx("option",{value:"21-30م",children:"21-30 متر"}),x.jsx("option",{value:"> 30م",children:"أكثر من 30 متر"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs(Rt,{htmlFor:"view",className:"flex items-center gap-2",children:[x.jsx(g3,{className:"w-4 h-4"}),"الإطلالة"]}),x.jsxs("select",{id:"view",value:i.view||"",onChange:C=>l("view",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر الإطلالة"}),x.jsx("option",{value:"بحر",children:"بحر"}),x.jsx("option",{value:"جبل",children:"جبل"}),x.jsx("option",{value:"حديقة",children:"حديقة"}),x.jsx("option",{value:"شارع رئيسي",children:"شارع رئيسي"}),x.jsx("option",{value:"شارع فرعي",children:"شارع فرعي"}),x.jsx("option",{value:"مبنى مقابل",children:"مبنى مقابل"})]})]})]})]})]}),x.jsxs(Ft,{className:"overflow-hidden",children:[x.jsxs("button",{type:"button",onClick:()=>m("advanced"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:x.jsx(Ms,{className:"w-5 h-5 text-primary"})}),x.jsxs("div",{className:"text-right",children:[x.jsx("h3",{className:"font-bold text-lg",children:"تفاصيل متقدمة"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"معلومات إضافية لدقة أعلى"})]})]}),d.advanced?x.jsx(Ng,{}):x.jsx(kg,{})]}),d.advanced&&x.jsxs("div",{className:"p-6 pt-0 space-y-6",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"أبعاد الأرض والمساحات"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"landArea",children:"مساحة الأرض (م²)"}),x.jsx(Mr,{id:"landArea",type:"number",placeholder:"للفلل والعمائر",value:i.landArea||"",onChange:C=>l("landArea",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"frontWidth",children:"عرض الواجهة (م)"}),x.jsx(Mr,{id:"frontWidth",type:"number",placeholder:"مثال: 15",value:i.frontWidth||"",onChange:C=>l("frontWidth",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"depth",children:"العمق (م)"}),x.jsx(Mr,{id:"depth",type:"number",placeholder:"مثال: 20",value:i.depth||"",onChange:C=>l("depth",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"yardArea",children:"مساحة الحوش (م²)"}),x.jsx(Mr,{id:"yardArea",type:"number",placeholder:"إن وجد",value:i.yardArea||"",onChange:C=>l("yardArea",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"gardenArea",children:"مساحة الحديقة (م²)"}),x.jsx(Mr,{id:"gardenArea",type:"number",placeholder:"إن وجدت",value:i.gardenArea||"",onChange:C=>l("gardenArea",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"roofArea",children:"مساحة السطح (م²)"}),x.jsx(Mr,{id:"roofArea",type:"number",placeholder:"إن كان مفتوح",value:i.roofArea||"",onChange:C=>l("roofArea",C.target.value)})]})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"تفاصيل البناء والطوابق"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"floor",children:"رقم الطابق"}),x.jsx(Mr,{id:"floor",type:"number",placeholder:"للشقق",value:i.floor||"",onChange:C=>l("floor",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"totalFloors",children:"إجمالي الطوابق"}),x.jsx(Mr,{id:"totalFloors",type:"number",placeholder:"في المبنى",value:i.totalFloors||"",onChange:C=>l("totalFloors",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"floorHeight",children:"ارتفاع السقف (م)"}),x.jsx(Mr,{id:"floorHeight",type:"number",step:"0.1",placeholder:"مثال: 3.2",value:i.floorHeight||"",onChange:C=>l("floorHeight",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"buildingAge",children:"عمر البناء (سنة)"}),x.jsx(Mr,{id:"buildingAge",type:"number",placeholder:"بالسنوات",value:i.buildingAge||"",onChange:C=>l("buildingAge",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"lastRenovation",children:"آخر تجديد (سنة)"}),x.jsx(Mr,{id:"lastRenovation",type:"number",placeholder:"مثال: 2023",value:i.lastRenovation||"",onChange:C=>l("lastRenovation",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"structureType",children:"نوع الهيكل"}),x.jsxs("select",{id:"structureType",value:i.structureType||"",onChange:C=>l("structureType",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر النوع"}),x.jsx("option",{value:"خرساني",children:"خرساني"}),x.jsx("option",{value:"حديد",children:"حديد"}),x.jsx("option",{value:"طوب",children:"طوب"}),x.jsx("option",{value:"مختلط",children:"مختلط"})]})]})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"مواد التشطيب والجودة"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"flooringType",children:"نوع الأرضيات"}),x.jsxs("select",{id:"flooringType",value:i.flooringType||"",onChange:C=>l("flooringType",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر النوع"}),x.jsx("option",{value:"سيراميك",children:"سيراميك"}),x.jsx("option",{value:"بورسلان",children:"بورسلان"}),x.jsx("option",{value:"رخام",children:"رخام"}),x.jsx("option",{value:"باركيه",children:"باركيه"}),x.jsx("option",{value:"موكيت",children:"موكيت"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"wallFinish",children:"تشطيب الجدران"}),x.jsxs("select",{id:"wallFinish",value:i.wallFinish||"",onChange:C=>l("wallFinish",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر النوع"}),x.jsx("option",{value:"دهان",children:"دهان"}),x.jsx("option",{value:"ورق جدران",children:"ورق جدران"}),x.jsx("option",{value:"حجر",children:"حجر"}),x.jsx("option",{value:"جبس",children:"جبس"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"kitchenQuality",children:"جودة المطبخ"}),x.jsxs("select",{id:"kitchenQuality",value:i.kitchenQuality||"",onChange:C=>l("kitchenQuality",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر الجودة"}),x.jsx("option",{value:"فاخر",children:"فاخر"}),x.jsx("option",{value:"جيد",children:"جيد"}),x.jsx("option",{value:"عادي",children:"عادي"}),x.jsx("option",{value:"بسيط",children:"بسيط"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"bathroomQuality",children:"جودة الحمامات"}),x.jsxs("select",{id:"bathroomQuality",value:i.bathroomQuality||"",onChange:C=>l("bathroomQuality",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر الجودة"}),x.jsx("option",{value:"فاخر",children:"فاخر"}),x.jsx("option",{value:"جيد",children:"جيد"}),x.jsx("option",{value:"عادي",children:"عادي"}),x.jsx("option",{value:"بسيط",children:"بسيط"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"windowType",children:"نوع النوافذ"}),x.jsxs("select",{id:"windowType",value:i.windowType||"",onChange:C=>l("windowType",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر النوع"}),x.jsx("option",{value:"UPVC",children:"UPVC"}),x.jsx("option",{value:"ألمنيوم",children:"ألمنيوم"}),x.jsx("option",{value:"خشب",children:"خشب"}),x.jsx("option",{value:"حديد",children:"حديد"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"doorType",children:"نوع الأبواب"}),x.jsxs("select",{id:"doorType",value:i.doorType||"",onChange:C=>l("doorType",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر النوع"}),x.jsx("option",{value:"خشب صلب",children:"خشب صلب"}),x.jsx("option",{value:"خشب مضغوط",children:"خشب مضغوط"}),x.jsx("option",{value:"معدن",children:"معدن"}),x.jsx("option",{value:"UPVC",children:"UPVC"})]})]})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"الأنظمة والتجهيزات"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"acType",children:"نوع التكييف"}),x.jsxs("select",{id:"acType",value:i.acType||"",onChange:C=>l("acType",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر النوع"}),x.jsx("option",{value:"مركزي",children:"مركزي"}),x.jsx("option",{value:"سبليت",children:"سبليت"}),x.jsx("option",{value:"شباك",children:"شباك"}),x.jsx("option",{value:"مخفي",children:"مخفي"}),x.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"heatingType",children:"نظام التدفئة"}),x.jsxs("select",{id:"heatingType",value:i.heatingType||"",onChange:C=>l("heatingType",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر النوع"}),x.jsx("option",{value:"مركزي",children:"مركزي"}),x.jsx("option",{value:"دفايات",children:"دفايات"}),x.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"waterHeater",children:"سخان المياه"}),x.jsxs("select",{id:"waterHeater",value:i.waterHeater||"",onChange:C=>l("waterHeater",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر النوع"}),x.jsx("option",{value:"مركزي",children:"مركزي"}),x.jsx("option",{value:"كهربائي",children:"كهربائي"}),x.jsx("option",{value:"غاز",children:"غاز"}),x.jsx("option",{value:"شمسي",children:"شمسي"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"waterTank",children:"خزان المياه (لتر)"}),x.jsx(Mr,{id:"waterTank",type:"number",placeholder:"السعة",value:i.waterTank||"",onChange:C=>l("waterTank",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"generator",children:"مولد كهربائي"}),x.jsxs("select",{id:"generator",value:i.generator||"",onChange:C=>l("generator",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"يوجد؟"}),x.jsx("option",{value:"نعم",children:"نعم"}),x.jsx("option",{value:"لا",children:"لا"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"solarPanels",children:"ألواح شمسية"}),x.jsxs("select",{id:"solarPanels",value:i.solarPanels||"",onChange:C=>l("solarPanels",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"يوجد؟"}),x.jsx("option",{value:"نعم",children:"نعم"}),x.jsx("option",{value:"لا",children:"لا"})]})]})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"العزل والحماية"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"thermalInsulation",children:"عزل حراري"}),x.jsxs("select",{id:"thermalInsulation",value:i.thermalInsulation||"",onChange:C=>l("thermalInsulation",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"يوجد؟"}),x.jsx("option",{value:"ممتاز",children:"ممتاز"}),x.jsx("option",{value:"جيد",children:"جيد"}),x.jsx("option",{value:"عادي",children:"عادي"}),x.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"waterproofing",children:"عزل مائي"}),x.jsxs("select",{id:"waterproofing",value:i.waterproofing||"",onChange:C=>l("waterproofing",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"يوجد؟"}),x.jsx("option",{value:"ممتاز",children:"ممتاز"}),x.jsx("option",{value:"جيد",children:"جيد"}),x.jsx("option",{value:"عادي",children:"عادي"}),x.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"soundproofing",children:"عزل صوتي"}),x.jsxs("select",{id:"soundproofing",value:i.soundproofing||"",onChange:C=>l("soundproofing",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"يوجد؟"}),x.jsx("option",{value:"ممتاز",children:"ممتاز"}),x.jsx("option",{value:"جيد",children:"جيد"}),x.jsx("option",{value:"عادي",children:"عادي"}),x.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"fireAlarm",children:"نظام إنذار حريق"}),x.jsxs("select",{id:"fireAlarm",value:i.fireAlarm||"",onChange:C=>l("fireAlarm",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"يوجد؟"}),x.jsx("option",{value:"نعم",children:"نعم"}),x.jsx("option",{value:"لا",children:"لا"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"fireExtinguisher",children:"طفايات حريق"}),x.jsx(Mr,{id:"fireExtinguisher",type:"number",placeholder:"العدد",value:i.fireExtinguisher||"",onChange:C=>l("fireExtinguisher",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"emergencyExit",children:"مخرج طوارئ"}),x.jsxs("select",{id:"emergencyExit",value:i.emergencyExit||"",onChange:C=>l("emergencyExit",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"يوجد؟"}),x.jsx("option",{value:"نعم",children:"نعم"}),x.jsx("option",{value:"لا",children:"لا"})]})]})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"الاتصالات والتقنية"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"internetSpeed",children:"سرعة الإنترنت (Mbps)"}),x.jsx(Mr,{id:"internetSpeed",type:"number",placeholder:"مثال: 100",value:i.internetSpeed||"",onChange:C=>l("internetSpeed",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"fiberOptic",children:"ألياف ضوئية"}),x.jsxs("select",{id:"fiberOptic",value:i.fiberOptic||"",onChange:C=>l("fiberOptic",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"متوفر؟"}),x.jsx("option",{value:"نعم",children:"نعم"}),x.jsx("option",{value:"لا",children:"لا"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"smartHome",children:"منزل ذكي"}),x.jsxs("select",{id:"smartHome",value:i.smartHome||"",onChange:C=>l("smartHome",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"يوجد؟"}),x.jsx("option",{value:"كامل",children:"كامل"}),x.jsx("option",{value:"جزئي",children:"جزئي"}),x.jsx("option",{value:"لا",children:"لا"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"satelliteDish",children:"طبق استقبال"}),x.jsxs("select",{id:"satelliteDish",value:i.satelliteDish||"",onChange:C=>l("satelliteDish",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"يوجد؟"}),x.jsx("option",{value:"نعم",children:"نعم"}),x.jsx("option",{value:"لا",children:"لا"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"intercom",children:"انتركم"}),x.jsxs("select",{id:"intercom",value:i.intercom||"",onChange:C=>l("intercom",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"يوجد؟"}),x.jsx("option",{value:"فيديو",children:"فيديو"}),x.jsx("option",{value:"صوتي",children:"صوتي"}),x.jsx("option",{value:"لا",children:"لا"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"cctv",children:"كاميرات مراقبة"}),x.jsx(Mr,{id:"cctv",type:"number",placeholder:"العدد",value:i.cctv||"",onChange:C=>l("cctv",C.target.value)})]})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"المسافات من الخدمات (كم)"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"distanceSchool",children:"أقرب مدرسة"}),x.jsx(Mr,{id:"distanceSchool",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceSchool||"",onChange:C=>l("distanceSchool",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"distanceHospital",children:"أقرب مستشفى"}),x.jsx(Mr,{id:"distanceHospital",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceHospital||"",onChange:C=>l("distanceHospital",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"distanceMosque",children:"أقرب مسجد"}),x.jsx(Mr,{id:"distanceMosque",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceMosque||"",onChange:C=>l("distanceMosque",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"distanceMall",children:"أقرب مول"}),x.jsx(Mr,{id:"distanceMall",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceMall||"",onChange:C=>l("distanceMall",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"distanceSupermarket",children:"أقرب سوبرماركت"}),x.jsx(Mr,{id:"distanceSupermarket",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceSupermarket||"",onChange:C=>l("distanceSupermarket",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"distanceHighway",children:"أقرب طريق سريع"}),x.jsx(Mr,{id:"distanceHighway",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceHighway||"",onChange:C=>l("distanceHighway",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"distanceAirport",children:"المطار"}),x.jsx(Mr,{id:"distanceAirport",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceAirport||"",onChange:C=>l("distanceAirport",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"distanceMetro",children:"محطة مترو/قطار"}),x.jsx(Mr,{id:"distanceMetro",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceMetro||"",onChange:C=>l("distanceMetro",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"distancePark",children:"أقرب حديقة"}),x.jsx(Mr,{id:"distancePark",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distancePark||"",onChange:C=>l("distancePark",C.target.value)})]})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"البيئة المحيطة"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"noiseLevel",children:"مستوى الضوضاء"}),x.jsxs("select",{id:"noiseLevel",value:i.noiseLevel||"",onChange:C=>l("noiseLevel",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر المستوى"}),x.jsx("option",{value:"هادئ جداً",children:"هادئ جداً"}),x.jsx("option",{value:"هادئ",children:"هادئ"}),x.jsx("option",{value:"متوسط",children:"متوسط"}),x.jsx("option",{value:"مزعج",children:"مزعج"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"trafficLevel",children:"كثافة المرور"}),x.jsxs("select",{id:"trafficLevel",value:i.trafficLevel||"",onChange:C=>l("trafficLevel",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر الكثافة"}),x.jsx("option",{value:"منخفضة",children:"منخفضة"}),x.jsx("option",{value:"متوسطة",children:"متوسطة"}),x.jsx("option",{value:"عالية",children:"عالية"}),x.jsx("option",{value:"مزدحم جداً",children:"مزدحم جداً"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"airQuality",children:"جودة الهواء"}),x.jsxs("select",{id:"airQuality",value:i.airQuality||"",onChange:C=>l("airQuality",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر الجودة"}),x.jsx("option",{value:"ممتازة",children:"ممتازة"}),x.jsx("option",{value:"جيدة",children:"جيدة"}),x.jsx("option",{value:"متوسطة",children:"متوسطة"}),x.jsx("option",{value:"سيئة",children:"سيئة"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"sunExposure",children:"التعرض للشمس"}),x.jsxs("select",{id:"sunExposure",value:i.sunExposure||"",onChange:C=>l("sunExposure",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر المستوى"}),x.jsx("option",{value:"كامل",children:"كامل"}),x.jsx("option",{value:"جزئي",children:"جزئي"}),x.jsx("option",{value:"محدود",children:"محدود"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"flooding",children:"احتمال الفيضان"}),x.jsxs("select",{id:"flooding",value:i.flooding||"",onChange:C=>l("flooding",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر المستوى"}),x.jsx("option",{value:"معدوم",children:"معدوم"}),x.jsx("option",{value:"منخفض",children:"منخفض"}),x.jsx("option",{value:"متوسط",children:"متوسط"}),x.jsx("option",{value:"عالي",children:"عالي"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"neighborhoodSafety",children:"أمان الحي"}),x.jsxs("select",{id:"neighborhoodSafety",value:i.neighborhoodSafety||"",onChange:C=>l("neighborhoodSafety",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر المستوى"}),x.jsx("option",{value:"ممتاز",children:"ممتاز"}),x.jsx("option",{value:"جيد",children:"جيد"}),x.jsx("option",{value:"متوسط",children:"متوسط"}),x.jsx("option",{value:"ضعيف",children:"ضعيف"})]})]})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"معلومات قانونية ومالية"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"ownership",children:"نوع الملكية"}),x.jsxs("select",{id:"ownership",value:i.ownership||"",onChange:C=>l("ownership",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"اختر النوع"}),x.jsx("option",{value:"ملك",children:"ملك"}),x.jsx("option",{value:"إيجار",children:"إيجار"}),x.jsx("option",{value:"وقف",children:"وقف"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"deed",children:"صك إلكتروني"}),x.jsxs("select",{id:"deed",value:i.deed||"",onChange:C=>l("deed",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"يوجد؟"}),x.jsx("option",{value:"نعم",children:"نعم"}),x.jsx("option",{value:"لا",children:"لا"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"mortgage",children:"رهن عقاري"}),x.jsxs("select",{id:"mortgage",value:i.mortgage||"",onChange:C=>l("mortgage",C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[x.jsx("option",{value:"",children:"يوجد؟"}),x.jsx("option",{value:"نعم",children:"نعم"}),x.jsx("option",{value:"لا",children:"لا"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"annualTax",children:"الضريبة السنوية (ريال)"}),x.jsx(Mr,{id:"annualTax",type:"number",placeholder:"إن وجدت",value:i.annualTax||"",onChange:C=>l("annualTax",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"maintenanceFee",children:"رسوم الصيانة (ريال/شهر)"}),x.jsx(Mr,{id:"maintenanceFee",type:"number",placeholder:"إن وجدت",value:i.maintenanceFee||"",onChange:C=>l("maintenanceFee",C.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(Rt,{htmlFor:"utilities",children:"فواتير الخدمات (ريال/شهر)"}),x.jsx(Mr,{id:"utilities",type:"number",placeholder:"متوسط",value:i.utilities||"",onChange:C=>l("utilities",C.target.value)})]})]})]})]})]}),x.jsx(Zr,{type:"submit",disabled:t||!i.area||!i.city||!i.district,className:"w-full h-14 text-lg font-bold primary-gradient hover:opacity-90 transition-opacity",children:t?x.jsxs(x.Fragment,{children:[x.jsx(E3,{className:"w-5 h-5 ml-2 animate-spin"}),"جاري التقييم..."]}):x.jsxs(x.Fragment,{children:[x.jsx(fc,{className:"w-5 h-5 ml-2"}),"احسب القيمة التقديرية"]})}),(!i.area||!i.city)&&x.jsxs("div",{className:"flex items-start gap-2 p-4 rounded-lg bg-amber-50 border border-amber-200",children:[x.jsx(Qc,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),x.jsxs("p",{className:"text-sm text-amber-800",children:["يرجى إدخال ",x.jsx("strong",{children:"المساحة"})," و",x.jsx("strong",{children:"المدينة"})," على الأقل للحصول على تقييم أولي"]})]})]})}function v5({result:e}){var y,m;if(!e)return null;const t=l=>new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),i=l=>l>=70?"text-green-600 bg-green-50 border-green-200":l>=50?"text-amber-600 bg-amber-50 border-amber-200":"text-red-600 bg-red-50 border-red-200",a=l=>l>=70?x.jsx(cl,{className:"w-5 h-5"}):l>=50?x.jsx(Qc,{className:"w-5 h-5"}):x.jsx(Qc,{className:"w-5 h-5"}),d=l=>l==="صاعد"?x.jsx(Ms,{className:"w-5 h-5 text-green-600"}):l==="نازل"?x.jsx(v2,{className:"w-5 h-5 text-red-600"}):x.jsx(F3,{className:"w-5 h-5 text-gray-600"});return x.jsxs("div",{className:"space-y-6 animate-slide-in",children:[x.jsxs(Ft,{className:"p-8 result-badge text-white overflow-hidden relative",children:[x.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:x.jsx("div",{className:"absolute top-4 right-4",children:x.jsx(fc,{className:"w-32 h-32"})})}),x.jsxs("div",{className:"relative z-10",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx($I,{className:"w-6 h-6"}),x.jsx("h2",{className:"text-xl font-bold",children:"القيمة التقديرية للعقار"})]}),x.jsxs("div",{className:"mt-4",children:[x.jsx("div",{className:"text-5xl font-black mb-2",children:t(e.estimatedValue)}),x.jsxs("p",{className:"text-white/80 text-sm",children:["النطاق المتوقع: ",t(((y=e.priceRange)==null?void 0:y.min)||e.estimatedValue*.9)," - ",t(((m=e.priceRange)==null?void 0:m.max)||e.estimatedValue*1.1)]})]}),e.source==="gpt"&&x.jsxs("div",{className:"mt-4 flex items-center gap-2 text-white/90 bg-white/10 rounded-lg px-3 py-2 w-fit",children:[x.jsx(dd,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm font-semibold",children:"تم التقييم بواسطة الذكاء الاصطناعي المتقدم"})]})]})]}),!e.usedAgent&&x.jsxs(Ft,{className:`p-6 border-2 ${i(e.confidence)}`,children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[a(e.confidence),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold text-lg",children:"مستوى الثقة في التقييم"}),x.jsxs("p",{className:"text-sm opacity-80",children:["بناءً على ",e.filledFieldsCount||"عدة"," معلومة مُدخلة"]})]})]}),x.jsxs("div",{className:"text-4xl font-black",children:[e.confidence,"%"]})]}),x.jsx("div",{className:"mt-4 w-full h-3 bg-white/50 rounded-full overflow-hidden",children:x.jsx("div",{className:"h-full rounded-full transition-all duration-1000 ease-out",style:{width:`${e.confidence}%`,background:e.confidence>=70?"linear-gradient(90deg, #22c55e, #16a34a)":e.confidence>=50?"linear-gradient(90deg, #f59e0b, #d97706)":"linear-gradient(90deg, #ef4444, #dc2626)"}})})]}),e.usedAgent&&e.nqs&&x.jsx(Ft,{className:"p-6 border-2 border-primary/30 bg-primary/5",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(dd,{className:"w-6 h-6 text-primary"}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold text-lg",children:"تم التقييم بواسطة الذكاء الاصطناعي"}),x.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.nqs.notes||"تم حساب القيمة بدقة عالية باستخدام نموذج ذكاء اصطناعي متقدم"})]})]})}),e.analysis&&x.jsxs(Ft,{className:"p-6",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(dc,{className:"w-5 h-5 text-primary"}),x.jsx("h3",{className:"font-bold text-lg",children:"تحليل العوامل المؤثرة"})]}),e.analysis.baseCalculation&&x.jsxs("div",{className:"mb-4 p-4 bg-muted rounded-lg",children:[x.jsx("p",{className:"text-sm font-semibold mb-1",children:"الحساب الأساسي:"}),x.jsx("p",{className:"text-sm",children:e.analysis.baseCalculation})]}),e.analysis.keyFactors&&e.analysis.keyFactors.length>0&&x.jsx("div",{className:"space-y-3",children:e.analysis.keyFactors.map((l,M)=>x.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[x.jsxs("div",{className:"flex items-start justify-between mb-2",children:[x.jsx("h4",{className:"font-semibold",children:l.factor}),x.jsx("span",{className:"text-sm font-bold text-primary",children:l.impact})]}),l.reasoning&&x.jsx("p",{className:"text-sm text-muted-foreground",children:l.reasoning})]},M))}),e.analysis.marketComparison&&x.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[x.jsx("p",{className:"text-sm font-semibold mb-1 text-blue-900",children:"مقارنة السوق:"}),x.jsx("p",{className:"text-sm text-blue-800",children:e.analysis.marketComparison})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.analysis.strengths&&e.analysis.strengths.length>0&&x.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[x.jsxs("h4",{className:"font-semibold text-green-900 mb-2 flex items-center gap-2",children:[x.jsx(cl,{className:"w-4 h-4"}),"نقاط القوة"]}),x.jsx("ul",{className:"space-y-1",children:e.analysis.strengths.map((l,M)=>x.jsxs("li",{className:"text-sm text-green-800",children:["• ",l]},M))})]}),e.analysis.weaknesses&&e.analysis.weaknesses.length>0&&x.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[x.jsxs("h4",{className:"font-semibold text-amber-900 mb-2 flex items-center gap-2",children:[x.jsx(Qc,{className:"w-4 h-4"}),"نقاط الضعف"]}),x.jsx("ul",{className:"space-y-1",children:e.analysis.weaknesses.map((l,M)=>x.jsxs("li",{className:"text-sm text-amber-800",children:["• ",l]},M))})]})]})]}),e.adjustments&&!e.analysis&&x.jsxs(Ft,{className:"p-6",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(dc,{className:"w-5 h-5 text-primary"}),x.jsx("h3",{className:"font-bold text-lg",children:"تفاصيل الحساب"})]}),e.adjustments.baseCalculation&&x.jsxs("div",{className:"mb-4 p-4 bg-muted rounded-lg",children:[x.jsx("p",{className:"text-sm font-semibold mb-1",children:"الحساب الأساسي:"}),x.jsx("p",{className:"text-sm",children:e.adjustments.baseCalculation})]}),e.adjustments.appliedFactors&&e.adjustments.appliedFactors.length>0&&x.jsxs("div",{className:"space-y-2",children:[x.jsx("p",{className:"text-sm font-semibold mb-2",children:"العوامل المطبقة:"}),e.adjustments.appliedFactors.map((l,M)=>x.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[x.jsxs("div",{children:[x.jsxs("span",{className:"font-semibold text-sm",children:[l.factor,":"]}),x.jsx("span",{className:"text-sm text-muted-foreground mr-2",children:l.value})]}),x.jsx("span",{className:"text-sm font-bold text-primary",children:l.impact})]},M))]})]}),e.marketInsights&&x.jsxs(Ft,{className:"p-6",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(Ms,{className:"w-5 h-5 text-primary"}),x.jsx("h3",{className:"font-bold text-lg",children:"رؤى السوق"})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{className:"p-4 border border-border rounded-lg text-center",children:[x.jsx("div",{className:"flex items-center justify-center mb-2",children:d(e.marketInsights.trend)}),x.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"اتجاه السوق"}),x.jsx("p",{className:"font-bold",children:e.marketInsights.trend})]}),x.jsxs("div",{className:"p-4 border border-border rounded-lg text-center",children:[x.jsx("div",{className:"flex items-center justify-center mb-2",children:x.jsx(dc,{className:"w-5 h-5 text-blue-600"})}),x.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"مستوى الطلب"}),x.jsx("p",{className:"font-bold",children:e.marketInsights.demandLevel})]}),x.jsxs("div",{className:"p-4 border border-border rounded-lg text-center",children:[x.jsx("div",{className:"flex items-center justify-center mb-2",children:x.jsx(DI,{className:"w-5 h-5 text-green-600"})}),x.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"أفضل وقت للبيع"}),x.jsx("p",{className:"font-bold",children:e.marketInsights.bestTimeToSell})]})]})]}),e.investmentScore&&x.jsx(Ft,{className:"p-6 border-2 border-primary/20",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(kI,{className:"w-6 h-6 text-primary"}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold text-lg",children:"تقييم الاستثمار"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"من 10"})]})]}),x.jsx("div",{className:"text-5xl font-black text-primary",children:e.investmentScore})]})}),e.recommendations&&e.recommendations.length>0&&x.jsxs(Ft,{className:"p-6 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(j3,{className:"w-5 h-5 text-blue-600"}),x.jsx("h3",{className:"font-bold text-lg text-blue-900",children:"توصيات لتحسين التقييم"})]}),x.jsx("ul",{className:"space-y-3",children:e.recommendations.map((l,M)=>x.jsxs("li",{className:"flex items-start gap-3 p-3 bg-white/70 rounded-lg",children:[x.jsx(cl,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),x.jsx("span",{className:"text-sm text-blue-900",children:l})]},M))})]}),e.reasoning&&x.jsxs(Ft,{className:"p-6 bg-muted/50",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(dd,{className:"w-5 h-5 text-primary"}),x.jsx("h3",{className:"font-bold text-lg",children:"التحليل الشامل"})]}),x.jsx("p",{className:"text-sm leading-relaxed",children:e.reasoning})]}),e.nqs&&e.nqs.districtFound&&x.jsxs(Ft,{className:"p-4 bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx(dd,{className:"w-5 h-5 text-indigo-600"}),x.jsx("h4",{className:"font-semibold text-indigo-900",children:"تحليل جودة الحي (تلقائي)"})]}),x.jsx("p",{className:"text-sm text-indigo-800",children:e.nqs.explanation}),x.jsx("p",{className:"text-xs text-indigo-600 mt-2",children:"ℹ️ تم حساب جودة الحي تلقائياً بناءً على كثافة الخدمات، سهولة النفاذ، المساحات الخضراء، والمؤسسات التعليمية"})]}),x.jsxs("div",{className:"text-center text-sm text-muted-foreground space-y-1",children:[x.jsx("p",{children:"💡 هذا التقييم تقديري ويعتمد على البيانات المُدخلة والسوق الحالي"}),x.jsx("p",{children:"📊 للحصول على تقييم أكثر دقة، يُنصح بإضافة المزيد من التفاصيل"}),e.source==="gpt"&&x.jsxs("p",{className:"font-semibold text-primary",children:["🤖 تم التقييم باستخدام نموذج ",e.model]})]})]})}const _5=VS("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ry({className:e,variant:t,asChild:i=!1,...a}){const d=i?_I:"span";return x.jsx(d,{"data-slot":"badge",className:Ba(_5({variant:t}),e),...a})}function x5(){const e=[{id:"basic",name:"Basic",nameAr:"الباقة الأساسية",price:"مجاني",status:"active",statusText:"✅ فعّالة",icon:fc,color:"from-blue-500 to-blue-600",features:["تقييم عقاري أساسي","تحليل السوق العام","نتائج فورية","دعم فني أساسي"]},{id:"smart",name:"Smart",nameAr:"الباقة الذكية",price:"٤٩ ريال",priceNote:"شهرياً",status:"coming",statusText:"🔒 قريباً",icon:UI,color:"from-purple-500 to-purple-600",badge:"الأكثر شعبية",features:["كل مزايا Basic","تحليل الحي الكامل","أفضل مناطق السكن","التكتلات السعرية","تقارير مفصّلة","أولوية في الدعم"]},{id:"pro",name:"Pro",nameAr:"الباقة الاحترافية",price:"١٤٩ ريال",priceNote:"شهرياً",status:"coming",statusText:"🔒 قريباً",icon:ZS,color:"from-amber-500 to-amber-600",features:["كل مزايا Smart","خريطة الوعي العقاري","تحليلات متقدمة بالذكاء الاصطناعي","مقارنات غير محدودة","API للتكامل","استشارات شهرية","دعم فني مخصص"]},{id:"api",name:"API",nameAr:"باقة الأعمال",price:"B2B",priceNote:"حسب الاستخدام",status:"coming",statusText:"🔒 قريباً",icon:zf,color:"from-green-500 to-green-600",features:["وصول كامل لـ API","تكامل مع أنظمتك","حدود استخدام مرتفعة","بيانات تاريخية","دعم فني مخصص 24/7","SLA مضمون","تدريب للفريق"]}],t=i=>i==="active"?{text:"مفعّلة",variant:"default",disabled:!0}:{text:"قريباً",variant:"outline",disabled:!0};return x.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted/30 py-12 px-4",children:x.jsxs("div",{className:"container mx-auto max-w-7xl",children:[x.jsxs("div",{className:"text-center mb-12 space-y-4",children:[x.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-semibold mb-4",children:[x.jsx(fc,{className:"w-4 h-4"}),x.jsx("span",{children:"اختر الباقة المناسبة لك"})]}),x.jsx("h1",{className:"text-4xl md:text-5xl font-black text-balance",children:"باقات مُثمّن"}),x.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto text-balance",children:"ابدأ مجاناً واستكشف قوة الذكاء الاصطناعي في التقييم العقاري"})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:e.map(i=>{const a=i.icon,d=t(i.status),y=i.status==="active";return x.jsxs(Ft,{className:`relative p-6 hover-lift ${y?"border-2 border-primary shadow-lg":""}`,children:[i.badge&&x.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:x.jsx(ry,{className:"bg-gradient-to-r from-amber-500 to-amber-600 text-white",children:i.badge})}),x.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${i.color} w-fit mb-4`,children:x.jsx(a,{className:"w-6 h-6 text-white"})}),x.jsx("h3",{className:"text-xl font-bold mb-1",children:i.nameAr}),x.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:i.name}),x.jsx("div",{className:"mb-4",children:x.jsxs("div",{className:"flex items-baseline gap-2",children:[x.jsx("span",{className:"text-3xl font-black",children:i.price}),i.priceNote&&x.jsx("span",{className:"text-sm text-muted-foreground",children:i.priceNote})]})}),x.jsx("div",{className:"mb-6",children:x.jsx(ry,{variant:y?"default":"secondary",children:i.statusText})}),x.jsx(Zr,{className:"w-full mb-6",variant:d.variant,disabled:d.disabled,children:d.text}),x.jsx("div",{className:"space-y-3",children:i.features.map((m,l)=>x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx(RI,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${y?"text-primary":"text-muted-foreground"}`}),x.jsx("span",{className:"text-sm",children:m})]},l))})]},i.id)})}),x.jsx(Ft,{className:"p-6 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:x.jsxs("div",{className:"flex items-start gap-4",children:[x.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:x.jsx(fc,{className:"w-6 h-6 text-blue-600"})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"font-bold text-lg mb-2",children:"النسخة الحالية للتجربة العامة"}),x.jsx("p",{className:"text-muted-foreground mb-4",children:"جميع المزايا المتقدمة ستُتاح في التحديث القادم. نحن نعمل على تطوير تجربة استثنائية لك."}),x.jsxs("div",{className:"flex flex-wrap gap-3",children:[x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[x.jsx(im,{className:"w-4 h-4 text-blue-600"}),x.jsx("span",{children:"خريطة الوعي العقاري"})]}),x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[x.jsx(dc,{className:"w-4 h-4 text-purple-600"}),x.jsx("span",{children:"تحليلات متقدمة"})]}),x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[x.jsx(Ms,{className:"w-4 h-4 text-green-600"}),x.jsx("span",{children:"توقعات السوق"})]}),x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[x.jsx(Xu,{className:"w-4 h-4 text-amber-600"}),x.jsx("span",{children:"مقارنات الأحياء"})]})]})]})]})}),x.jsxs("div",{className:"mt-12 text-center",children:[x.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"هل لديك احتياجات خاصة؟"}),x.jsx(Zr,{variant:"outline",size:"lg",children:"تواصل معنا"})]})]})})}const _2="ABCDEFGHJKMNPQRSTUVWXYZ23456789",b5=7;function bA(e=b5){let t="";for(let i=0;i<e;i++){const a=Math.floor(Math.random()*_2.length);t+=_2[a]}return t}function w5(e){return!e||typeof e!="string"||e.length<6||e.length>8?!1:new RegExp(`^[${_2}]+$`).test(e)}function VI(e,t=null){return`${t||window.location.origin}/?ref=${e}`}async function S5(e){const t=VI(e);return`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(t)}`}function T5(e,t){if(!w5(t))throw new Error("رمز إحالة غير صالح");const i=JSON.parse(localStorage.getItem("muth_user_codes")||"{}");i[e]={code:t,createdAt:Date.now()},localStorage.setItem("muth_user_codes",JSON.stringify(i))}function A5(e){var i;return((i=JSON.parse(localStorage.getItem("muth_user_codes")||"{}")[e])==null?void 0:i.code)||null}function M5(e){let t=A5(e);if(!t){t=bA();const i=Object.values(JSON.parse(localStorage.getItem("muth_user_codes")||"{}")).map(d=>d.code);let a=0;for(;i.includes(t)&&a<10;)t=bA(),a++;T5(e,t)}return t}function j5(e){const i=JSON.parse(localStorage.getItem("muth_ref_usages")||"[]").filter(y=>y.code===e);return{clicks:JSON.parse(localStorage.getItem("muth_ref_events")||"[]").filter(y=>y.ref===e).filter(y=>y.type==="click").length,signups:i.length,qualified:i.filter(y=>y.verified).length,lastUsed:i.length>0?Math.max(...i.map(y=>y.timestamp)):null}}function P5(e){const t=[];return e>=1&&t.push({id:"early_access",name:"Early Access",nameAr:"وصول مبكر",description:"شارة Early Access + ظهور في لوحة الداعمين الأوائل",icon:"🌟",unlocked:!0}),e>=3&&t.push({id:"neighborhood_analysis",name:"Neighborhood Analysis",nameAr:"تحليل الحي المختصر",description:"تفعيل تحليل الحي المختصر مبكراً",icon:"🏘️",unlocked:!0}),e>=10&&t.push({id:"founder_tester",name:"Founder Tester",nameAr:"مختبر مؤسس",description:"وصول مبكّر للخريطة التفاعلية + شارة Founder Tester",icon:"👑",unlocked:!0}),e<3&&t.push({id:"neighborhood_analysis",name:"Neighborhood Analysis",nameAr:"تحليل الحي المختصر",description:`يحتاج ${3-e} إحالات إضافية`,icon:"🔒",unlocked:!1,required:3}),e<10&&t.push({id:"founder_tester",name:"Founder Tester",nameAr:"مختبر مؤسس",description:`يحتاج ${10-e} إحالات إضافية`,icon:"🔒",unlocked:!1,required:10}),t}function E5(){const[e]=Fe.useState("demo_user"),[t,i]=Fe.useState(""),[a,d]=Fe.useState(""),[y,m]=Fe.useState(""),[l,M]=Fe.useState({clicks:0,signups:0,qualified:0}),[E,N]=Fe.useState([]),[C,L]=Fe.useState(!1),[F,H]=Fe.useState(!1),[G,q]=Fe.useState(!1);Fe.useEffect(()=>{const ce=M5(e);i(ce);const J=VI(ce);d(J);const ee=j5(ce);M(ee);const he=P5(ee.qualified);N(he),S5(ce).then(ge=>m(ge))},[e]);const re=()=>{navigator.clipboard.writeText(t),L(!0),setTimeout(()=>L(!1),2e3)},ie=()=>{navigator.clipboard.writeText(a),H(!0),setTimeout(()=>H(!1),2e3)},ne=async()=>{if(navigator.share)try{await navigator.share({title:"مُثمّن - تقييم عقاري ذكي",text:"جرّب مُثمّن للتقييم العقاري بالذكاء الاصطناعي",url:a})}catch(ce){console.log("خطأ في المشاركة:",ce)}else ie()};return x.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted/30 py-12 px-4",children:x.jsxs("div",{className:"container mx-auto max-w-5xl",children:[x.jsxs("div",{className:"text-center mb-12 space-y-4",children:[x.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-semibold mb-4",children:[x.jsx(Mf,{className:"w-4 h-4"}),x.jsx("span",{children:"برنامج الإحالات"})]}),x.jsx("h1",{className:"text-4xl md:text-5xl font-black text-balance",children:"إحالاتي"}),x.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto text-balance",children:"انشر كودك وخَلّ مثمّن يكبر بعقلك"})]}),x.jsxs(Ft,{className:"p-8 mb-8 card-gradient",children:[x.jsxs("div",{className:"text-center mb-6",children:[x.jsx("h2",{className:"text-2xl font-bold mb-2",children:"رمز الإحالة الخاص بك"}),x.jsx("p",{className:"text-muted-foreground",children:"كل إحالة ترفع ذكاء المنصّة وتحجز لك مزايا خاصّة"})]}),x.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[x.jsx("div",{className:"px-8 py-4 bg-gradient-to-r from-primary/10 to-purple-100 rounded-xl border-2 border-primary/20",children:x.jsx("span",{className:"text-4xl font-black tracking-wider",children:t})}),x.jsx(Zr,{size:"lg",onClick:re,className:"gap-2",children:C?x.jsxs(x.Fragment,{children:[x.jsx(cl,{className:"w-5 h-5"}),"تم النسخ"]}):x.jsxs(x.Fragment,{children:[x.jsx(zI,{className:"w-5 h-5"}),"نسخ"]})})]}),x.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 mb-6",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx(p3,{className:"w-4 h-4 text-muted-foreground"}),x.jsx("span",{className:"text-sm font-semibold",children:"رابط الإحالة"})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"text",value:a,readOnly:!0,className:"flex-1 bg-white px-4 py-2 rounded-lg text-sm border",dir:"ltr"}),x.jsx(Zr,{variant:"outline",size:"sm",onClick:ie,children:F?"تم النسخ":"نسخ"})]})]}),x.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[x.jsxs(Zr,{variant:"outline",onClick:ne,className:"gap-2",children:[x.jsx(n5,{className:"w-4 h-4"}),"مشاركة"]}),x.jsxs(Zr,{variant:"outline",onClick:()=>q(!G),className:"gap-2",children:[x.jsx(V3,{className:"w-4 h-4"}),G?"إخفاء QR":"إظهار QR"]})]}),G&&y&&x.jsxs("div",{className:"mt-6 text-center animate-slide-in",children:[x.jsx("img",{src:y,alt:"QR Code",className:"w-48 h-48 mx-auto rounded-lg border-2 border-border"}),x.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"امسح الكود للوصول السريع"})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[x.jsx(Ft,{className:"p-6 hover-lift",children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:x.jsx(Xu,{className:"w-6 h-6 text-blue-600"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"النقرات"}),x.jsx("p",{className:"text-3xl font-black",children:l.clicks})]})]})}),x.jsx(Ft,{className:"p-6 hover-lift",children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:x.jsx(Ms,{className:"w-6 h-6 text-green-600"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"التسجيلات"}),x.jsx("p",{className:"text-3xl font-black",children:l.signups})]})]})}),x.jsx(Ft,{className:"p-6 hover-lift",children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:x.jsx(cl,{className:"w-6 h-6 text-purple-600"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"المؤهلة"}),x.jsx("p",{className:"text-3xl font-black",children:l.qualified})]})]})})]}),x.jsxs(Ft,{className:"p-8",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[x.jsx(Mf,{className:"w-6 h-6 text-primary"}),x.jsx("h2",{className:"text-2xl font-bold",children:"جوائزك"})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.map(ce=>x.jsx("div",{className:`p-4 rounded-lg border-2 ${ce.unlocked?"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200":"bg-muted/30 border-border"}`,children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"text-3xl",children:ce.icon}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx("h3",{className:"font-bold",children:ce.nameAr}),ce.unlocked&&x.jsx(ry,{className:"bg-green-600",children:"مفعّلة"})]}),x.jsx("p",{className:"text-sm text-muted-foreground",children:ce.description})]})]})},ce.id))}),l.qualified<10&&x.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:x.jsxs("p",{className:"text-sm text-blue-900",children:["💡 ",x.jsx("strong",{children:"قريبًا:"})," خريطة الوعي العقاري الأولى في المملكة 🇸🇦",x.jsx("br",{}),"افتحها بدعمك المبكر - ",10-l.qualified," إحالات إضافية فقط!"]})})]}),x.jsx(Ft,{className:"mt-8 p-6 bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-200",children:x.jsxs("div",{className:"flex items-start gap-4",children:[x.jsx(fc,{className:"w-6 h-6 text-purple-600 flex-shrink-0 mt-1"}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold mb-2",children:"كيف تعمل الإحالات؟"}),x.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[x.jsx("li",{children:"• شارك رمزك أو رابطك مع أصدقائك"}),x.jsx("li",{children:"• عند تسجيلهم، تُحسب إحالة جديدة لك"}),x.jsx("li",{children:'• بعد تأكيد البريد الإلكتروني، تصبح الإحالة "مؤهلة"'}),x.jsx("li",{children:"• كل 1، 3، 10 إحالات مؤهلة تفتح مكافأة جديدة"}),x.jsx("li",{children:"• الحد الأقصى: 50 إحالة شهرياً في النسخة التجريبية"})]})]})]})})]})})}function HS(e){const t=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];return String(e).replace(/\d/g,i=>t[i])}function jf(e,t=!0){if(e==null)return"-";const i=new Intl.NumberFormat("ar-SA").format(e);return t?HS(i):i}function fd(e,t=1,i=!0){if(e==null)return"-";const a=(e*100).toFixed(t);return`${i?HS(a):a}٪`}function x2(e,t=!0){return`${jf(e,t)} ر.س/م²`}function b2(e,t=!0){return`${jf(e,t)} ر.س/م²/شهر`}function C5(e){const t=new Date(e);return new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"long",day:"numeric"}).format(t)}function GI(e,t=!0){return`${t?HS(e):e} يوم`}function w2(e,t=!0){return fd(e,0,t)}function O5(e,t,i=!0){return`${jf(e,i)} - ${jf(t,i)} ر.س/م²`}function wA(e,t=!0){return e>=1e6?`${jf((e/1e6).toFixed(1),t)} مليون`:e>=1e3?`${jf((e/1e3).toFixed(1),t)} ألف`:jf(e,t)}function Vg(e,t="change"){return t==="change"?e>0?"text-green-600":e<0?"text-red-600":"text-muted-foreground":t==="confidence"?e>=.8?"text-green-600":e>=.6?"text-amber-600":"text-red-600":"text-foreground"}function I5({data:e}){const t=[{id:"sale",title:"سعر البيع",value:x2(e.national.sale_price_per_m2),change:e.national.sale_yoy,icon:zf,color:"blue"},{id:"rent",title:"سعر الإيجار",value:b2(e.national.rent_price_per_m2_month),change:e.national.rent_yoy,icon:ty,color:"green"},{id:"sale_growth",title:"نمو البيع السنوي",value:fd(e.national.sale_yoy),change:e.national.sale_yoy,icon:e.national.sale_yoy>0?Ms:v2,color:e.national.sale_yoy>0?"green":"red"},{id:"rent_growth",title:"نمو الإيجار السنوي",value:fd(e.national.rent_yoy),change:e.national.rent_yoy,icon:e.national.rent_yoy>0?Ms:v2,color:e.national.rent_yoy>0?"green":"amber"},{id:"days_to_sell",title:"متوسط زمن البيع",value:GI(e.national.avg_days_to_sell),icon:DI,color:"purple"},{id:"confidence",title:"مستوى الثقة الوطني",value:w2(e.national.national_confidence),icon:$I,color:"amber"}],i=a=>{const d={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",red:"bg-red-100 text-red-600",amber:"bg-amber-100 text-amber-600",purple:"bg-purple-100 text-purple-600"};return d[a]||d.blue};return x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(a=>{const d=a.icon,y=i(a.color);return x.jsxs(Ft,{className:"p-6 hover-lift",children:[x.jsxs("div",{className:"flex items-start justify-between mb-4",children:[x.jsx("div",{className:`p-3 rounded-xl ${y}`,children:x.jsx(d,{className:"w-6 h-6"})}),a.change!==void 0&&x.jsxs("div",{className:`text-sm font-semibold ${Vg(a.change,"change")}`,children:[a.change>0?"↗":a.change<0?"↘":"→"," ",fd(Math.abs(a.change))]})]}),x.jsx("h3",{className:"text-sm text-muted-foreground mb-2",children:a.title}),x.jsx("p",{className:"text-2xl font-black",children:a.value})]},a.id)})})}function k5({cities:e}){const[t,i]=Fe.useState(null);return x.jsxs("div",{children:[x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>x.jsxs(Ft,{className:"p-6 hover-lift cursor-pointer",onClick:()=>i(a),children:[x.jsxs("div",{className:"flex items-start justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Xg,{className:"w-5 h-5 text-primary"}),x.jsx("h3",{className:"text-xl font-bold",children:a.name})]}),x.jsx(ry,{variant:"secondary",children:w2(a.confidence)})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"سعر البيع"}),x.jsxs("div",{className:"flex items-baseline gap-2",children:[x.jsx("p",{className:"text-lg font-bold",children:x2(a.sale_price_per_m2)}),x.jsx("span",{className:`text-sm ${Vg(a.sale_yoy,"change")}`,children:fd(a.sale_yoy)})]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"سعر الإيجار"}),x.jsxs("div",{className:"flex items-baseline gap-2",children:[x.jsx("p",{className:"text-lg font-bold",children:b2(a.rent_price_per_m2_month)}),x.jsx("span",{className:`text-sm ${Vg(a.rent_yoy,"change")}`,children:fd(a.rent_yoy)})]})]}),x.jsx("div",{className:"pt-3 border-t border-border",children:x.jsxs("div",{className:"flex items-center justify-between text-sm",children:[x.jsx("span",{className:"text-muted-foreground",children:"المعاملات"}),x.jsx("span",{className:"font-semibold",children:wA(a.transactions)})]})})]}),x.jsxs(Zr,{variant:"ghost",size:"sm",className:"w-full mt-4 gap-2",children:[x.jsx(S3,{className:"w-4 h-4"}),"عرض التفاصيل"]})]},a.id))}),t&&x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>i(null),children:x.jsxs(Ft,{className:"max-w-2xl w-full p-8 animate-slide-in",onClick:a=>a.stopPropagation(),children:[x.jsxs("div",{className:"flex items-start justify-between mb-6",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-3xl font-black mb-2",children:t.name}),x.jsx("p",{className:"text-muted-foreground",children:t.note})]}),x.jsx(Zr,{variant:"ghost",size:"sm",onClick:()=>i(null),children:"✕"})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[x.jsxs("div",{children:[x.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[x.jsx(Ms,{className:"w-4 h-4 text-blue-600"}),"أسعار البيع"]}),x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted-foreground",children:"المتوسط"}),x.jsx("span",{className:"font-semibold",children:x2(t.sale_price_per_m2)})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted-foreground",children:"النطاق (P25-P75)"}),x.jsx("span",{className:"font-semibold text-xs",children:O5(t.sale_p25,t.sale_p75)})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted-foreground",children:"النمو السنوي"}),x.jsx("span",{className:`font-semibold ${Vg(t.sale_yoy,"change")}`,children:fd(t.sale_yoy)})]})]})]}),x.jsxs("div",{children:[x.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[x.jsx(Ms,{className:"w-4 h-4 text-green-600"}),"أسعار الإيجار"]}),x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted-foreground",children:"المتوسط"}),x.jsx("span",{className:"font-semibold",children:b2(t.rent_price_per_m2_month)})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted-foreground",children:"النطاق (P25-P75)"}),x.jsxs("span",{className:"font-semibold text-xs",children:[SA(t.rent_p25)," - ",SA(t.rent_p75)," ر.س"]})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted-foreground",children:"النمو السنوي"}),x.jsx("span",{className:`font-semibold ${Vg(t.rent_yoy,"change")}`,children:fd(t.rent_yoy)})]})]})]})]}),x.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-6 border-t border-border",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"متوسط زمن البيع"}),x.jsx("p",{className:"text-lg font-bold",children:GI(t.avg_days_to_sell)})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"عدد المعاملات"}),x.jsx("p",{className:"text-lg font-bold",children:wA(t.transactions)})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"مستوى الثقة"}),x.jsx("p",{className:"text-lg font-bold",children:w2(t.confidence)})]})]})]})})]})}function SA(e){return new Intl.NumberFormat("ar-SA").format(e)}var u0,TA;function is(){if(TA)return u0;TA=1;var e=Array.isArray;return u0=e,u0}var h0,AA;function ZI(){if(AA)return h0;AA=1;var e=typeof Dv=="object"&&Dv&&Dv.Object===Object&&Dv;return h0=e,h0}var d0,MA;function ru(){if(MA)return d0;MA=1;var e=ZI(),t=typeof self=="object"&&self&&self.Object===Object&&self,i=e||t||Function("return this")();return d0=i,d0}var f0,jA;function By(){if(jA)return f0;jA=1;var e=ru(),t=e.Symbol;return f0=t,f0}var p0,PA;function N5(){if(PA)return p0;PA=1;var e=By(),t=Object.prototype,i=t.hasOwnProperty,a=t.toString,d=e?e.toStringTag:void 0;function y(m){var l=i.call(m,d),M=m[d];try{m[d]=void 0;var E=!0}catch{}var N=a.call(m);return E&&(l?m[d]=M:delete m[d]),N}return p0=y,p0}var m0,EA;function R5(){if(EA)return m0;EA=1;var e=Object.prototype,t=e.toString;function i(a){return t.call(a)}return m0=i,m0}var g0,CA;function nh(){if(CA)return g0;CA=1;var e=By(),t=N5(),i=R5(),a="[object Null]",d="[object Undefined]",y=e?e.toStringTag:void 0;function m(l){return l==null?l===void 0?d:a:y&&y in Object(l)?t(l):i(l)}return g0=m,g0}var y0,OA;function ih(){if(OA)return y0;OA=1;function e(t){return t!=null&&typeof t=="object"}return y0=e,y0}var v0,IA;function Cm(){if(IA)return v0;IA=1;var e=nh(),t=ih(),i="[object Symbol]";function a(d){return typeof d=="symbol"||t(d)&&e(d)==i}return v0=a,v0}var _0,kA;function XS(){if(kA)return _0;kA=1;var e=is(),t=Cm(),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function d(y,m){if(e(y))return!1;var l=typeof y;return l=="number"||l=="symbol"||l=="boolean"||y==null||t(y)?!0:a.test(y)||!i.test(y)||m!=null&&y in Object(m)}return _0=d,_0}var x0,NA;function yd(){if(NA)return x0;NA=1;function e(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}return x0=e,x0}var b0,RA;function WS(){if(RA)return b0;RA=1;var e=nh(),t=yd(),i="[object AsyncFunction]",a="[object Function]",d="[object GeneratorFunction]",y="[object Proxy]";function m(l){if(!t(l))return!1;var M=e(l);return M==a||M==d||M==i||M==y}return b0=m,b0}var w0,DA;function D5(){if(DA)return w0;DA=1;var e=ru(),t=e["__core-js_shared__"];return w0=t,w0}var S0,zA;function z5(){if(zA)return S0;zA=1;var e=D5(),t=function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function i(a){return!!t&&t in a}return S0=i,S0}var T0,LA;function HI(){if(LA)return T0;LA=1;var e=Function.prototype,t=e.toString;function i(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return T0=i,T0}var A0,BA;function L5(){if(BA)return A0;BA=1;var e=WS(),t=z5(),i=yd(),a=HI(),d=/[\\^$.*+?()[\]{}|]/g,y=/^\[object .+?Constructor\]$/,m=Function.prototype,l=Object.prototype,M=m.toString,E=l.hasOwnProperty,N=RegExp("^"+M.call(E).replace(d,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function C(L){if(!i(L)||t(L))return!1;var F=e(L)?N:y;return F.test(a(L))}return A0=C,A0}var M0,FA;function B5(){if(FA)return M0;FA=1;function e(t,i){return t==null?void 0:t[i]}return M0=e,M0}var j0,$A;function Lf(){if($A)return j0;$A=1;var e=L5(),t=B5();function i(a,d){var y=t(a,d);return e(y)?y:void 0}return j0=i,j0}var P0,qA;function nx(){if(qA)return P0;qA=1;var e=Lf(),t=e(Object,"create");return P0=t,P0}var E0,UA;function F5(){if(UA)return E0;UA=1;var e=nx();function t(){this.__data__=e?e(null):{},this.size=0}return E0=t,E0}var C0,VA;function $5(){if(VA)return C0;VA=1;function e(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}return C0=e,C0}var O0,GA;function q5(){if(GA)return O0;GA=1;var e=nx(),t="__lodash_hash_undefined__",i=Object.prototype,a=i.hasOwnProperty;function d(y){var m=this.__data__;if(e){var l=m[y];return l===t?void 0:l}return a.call(m,y)?m[y]:void 0}return O0=d,O0}var I0,ZA;function U5(){if(ZA)return I0;ZA=1;var e=nx(),t=Object.prototype,i=t.hasOwnProperty;function a(d){var y=this.__data__;return e?y[d]!==void 0:i.call(y,d)}return I0=a,I0}var k0,HA;function V5(){if(HA)return k0;HA=1;var e=nx(),t="__lodash_hash_undefined__";function i(a,d){var y=this.__data__;return this.size+=this.has(a)?0:1,y[a]=e&&d===void 0?t:d,this}return k0=i,k0}var N0,XA;function G5(){if(XA)return N0;XA=1;var e=F5(),t=$5(),i=q5(),a=U5(),d=V5();function y(m){var l=-1,M=m==null?0:m.length;for(this.clear();++l<M;){var E=m[l];this.set(E[0],E[1])}}return y.prototype.clear=e,y.prototype.delete=t,y.prototype.get=i,y.prototype.has=a,y.prototype.set=d,N0=y,N0}var R0,WA;function Z5(){if(WA)return R0;WA=1;function e(){this.__data__=[],this.size=0}return R0=e,R0}var D0,YA;function YS(){if(YA)return D0;YA=1;function e(t,i){return t===i||t!==t&&i!==i}return D0=e,D0}var z0,KA;function ix(){if(KA)return z0;KA=1;var e=YS();function t(i,a){for(var d=i.length;d--;)if(e(i[d][0],a))return d;return-1}return z0=t,z0}var L0,QA;function H5(){if(QA)return L0;QA=1;var e=ix(),t=Array.prototype,i=t.splice;function a(d){var y=this.__data__,m=e(y,d);if(m<0)return!1;var l=y.length-1;return m==l?y.pop():i.call(y,m,1),--this.size,!0}return L0=a,L0}var B0,JA;function X5(){if(JA)return B0;JA=1;var e=ix();function t(i){var a=this.__data__,d=e(a,i);return d<0?void 0:a[d][1]}return B0=t,B0}var F0,eM;function W5(){if(eM)return F0;eM=1;var e=ix();function t(i){return e(this.__data__,i)>-1}return F0=t,F0}var $0,tM;function Y5(){if(tM)return $0;tM=1;var e=ix();function t(i,a){var d=this.__data__,y=e(d,i);return y<0?(++this.size,d.push([i,a])):d[y][1]=a,this}return $0=t,$0}var q0,rM;function ax(){if(rM)return q0;rM=1;var e=Z5(),t=H5(),i=X5(),a=W5(),d=Y5();function y(m){var l=-1,M=m==null?0:m.length;for(this.clear();++l<M;){var E=m[l];this.set(E[0],E[1])}}return y.prototype.clear=e,y.prototype.delete=t,y.prototype.get=i,y.prototype.has=a,y.prototype.set=d,q0=y,q0}var U0,nM;function KS(){if(nM)return U0;nM=1;var e=Lf(),t=ru(),i=e(t,"Map");return U0=i,U0}var V0,iM;function K5(){if(iM)return V0;iM=1;var e=G5(),t=ax(),i=KS();function a(){this.size=0,this.__data__={hash:new e,map:new(i||t),string:new e}}return V0=a,V0}var G0,aM;function Q5(){if(aM)return G0;aM=1;function e(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}return G0=e,G0}var Z0,oM;function ox(){if(oM)return Z0;oM=1;var e=Q5();function t(i,a){var d=i.__data__;return e(a)?d[typeof a=="string"?"string":"hash"]:d.map}return Z0=t,Z0}var H0,sM;function J5(){if(sM)return H0;sM=1;var e=ox();function t(i){var a=e(this,i).delete(i);return this.size-=a?1:0,a}return H0=t,H0}var X0,lM;function e4(){if(lM)return X0;lM=1;var e=ox();function t(i){return e(this,i).get(i)}return X0=t,X0}var W0,cM;function t4(){if(cM)return W0;cM=1;var e=ox();function t(i){return e(this,i).has(i)}return W0=t,W0}var Y0,uM;function r4(){if(uM)return Y0;uM=1;var e=ox();function t(i,a){var d=e(this,i),y=d.size;return d.set(i,a),this.size+=d.size==y?0:1,this}return Y0=t,Y0}var K0,hM;function QS(){if(hM)return K0;hM=1;var e=K5(),t=J5(),i=e4(),a=t4(),d=r4();function y(m){var l=-1,M=m==null?0:m.length;for(this.clear();++l<M;){var E=m[l];this.set(E[0],E[1])}}return y.prototype.clear=e,y.prototype.delete=t,y.prototype.get=i,y.prototype.has=a,y.prototype.set=d,K0=y,K0}var Q0,dM;function XI(){if(dM)return Q0;dM=1;var e=QS(),t="Expected a function";function i(a,d){if(typeof a!="function"||d!=null&&typeof d!="function")throw new TypeError(t);var y=function(){var m=arguments,l=d?d.apply(this,m):m[0],M=y.cache;if(M.has(l))return M.get(l);var E=a.apply(this,m);return y.cache=M.set(l,E)||M,E};return y.cache=new(i.Cache||e),y}return i.Cache=e,Q0=i,Q0}var J0,fM;function n4(){if(fM)return J0;fM=1;var e=XI(),t=500;function i(a){var d=e(a,function(m){return y.size===t&&y.clear(),m}),y=d.cache;return d}return J0=i,J0}var eb,pM;function i4(){if(pM)return eb;pM=1;var e=n4(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=e(function(d){var y=[];return d.charCodeAt(0)===46&&y.push(""),d.replace(t,function(m,l,M,E){y.push(M?E.replace(i,"$1"):l||m)}),y});return eb=a,eb}var tb,mM;function JS(){if(mM)return tb;mM=1;function e(t,i){for(var a=-1,d=t==null?0:t.length,y=Array(d);++a<d;)y[a]=i(t[a],a,t);return y}return tb=e,tb}var rb,gM;function a4(){if(gM)return rb;gM=1;var e=By(),t=JS(),i=is(),a=Cm(),d=e?e.prototype:void 0,y=d?d.toString:void 0;function m(l){if(typeof l=="string")return l;if(i(l))return t(l,m)+"";if(a(l))return y?y.call(l):"";var M=l+"";return M=="0"&&1/l==-1/0?"-0":M}return rb=m,rb}var nb,yM;function WI(){if(yM)return nb;yM=1;var e=a4();function t(i){return i==null?"":e(i)}return nb=t,nb}var ib,vM;function YI(){if(vM)return ib;vM=1;var e=is(),t=XS(),i=i4(),a=WI();function d(y,m){return e(y)?y:t(y,m)?[y]:i(a(y))}return ib=d,ib}var ab,_M;function sx(){if(_M)return ab;_M=1;var e=Cm();function t(i){if(typeof i=="string"||e(i))return i;var a=i+"";return a=="0"&&1/i==-1/0?"-0":a}return ab=t,ab}var ob,xM;function eT(){if(xM)return ob;xM=1;var e=YI(),t=sx();function i(a,d){d=e(d,a);for(var y=0,m=d.length;a!=null&&y<m;)a=a[t(d[y++])];return y&&y==m?a:void 0}return ob=i,ob}var sb,bM;function KI(){if(bM)return sb;bM=1;var e=eT();function t(i,a,d){var y=i==null?void 0:e(i,a);return y===void 0?d:y}return sb=t,sb}var o4=KI();const ul=Bn(o4);var lb,wM;function s4(){if(wM)return lb;wM=1;function e(t){return t==null}return lb=e,lb}var l4=s4();const Yr=Bn(l4);var cb,SM;function c4(){if(SM)return cb;SM=1;var e=nh(),t=is(),i=ih(),a="[object String]";function d(y){return typeof y=="string"||!t(y)&&i(y)&&e(y)==a}return cb=d,cb}var u4=c4();const Of=Bn(u4);var h4=WS();const Br=Bn(h4);var d4=yd();const Om=Bn(d4);var ub={exports:{}},wn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TM;function f4(){if(TM)return wn;TM=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),m=Symbol.for("react.context"),l=Symbol.for("react.server_context"),M=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),H;H=Symbol.for("react.module.reference");function G(q){if(typeof q=="object"&&q!==null){var re=q.$$typeof;switch(re){case e:switch(q=q.type,q){case i:case d:case a:case E:case N:return q;default:switch(q=q&&q.$$typeof,q){case l:case m:case M:case L:case C:case y:return q;default:return re}}case t:return re}}}return wn.ContextConsumer=m,wn.ContextProvider=y,wn.Element=e,wn.ForwardRef=M,wn.Fragment=i,wn.Lazy=L,wn.Memo=C,wn.Portal=t,wn.Profiler=d,wn.StrictMode=a,wn.Suspense=E,wn.SuspenseList=N,wn.isAsyncMode=function(){return!1},wn.isConcurrentMode=function(){return!1},wn.isContextConsumer=function(q){return G(q)===m},wn.isContextProvider=function(q){return G(q)===y},wn.isElement=function(q){return typeof q=="object"&&q!==null&&q.$$typeof===e},wn.isForwardRef=function(q){return G(q)===M},wn.isFragment=function(q){return G(q)===i},wn.isLazy=function(q){return G(q)===L},wn.isMemo=function(q){return G(q)===C},wn.isPortal=function(q){return G(q)===t},wn.isProfiler=function(q){return G(q)===d},wn.isStrictMode=function(q){return G(q)===a},wn.isSuspense=function(q){return G(q)===E},wn.isSuspenseList=function(q){return G(q)===N},wn.isValidElementType=function(q){return typeof q=="string"||typeof q=="function"||q===i||q===d||q===a||q===E||q===N||q===F||typeof q=="object"&&q!==null&&(q.$$typeof===L||q.$$typeof===C||q.$$typeof===y||q.$$typeof===m||q.$$typeof===M||q.$$typeof===H||q.getModuleId!==void 0)},wn.typeOf=G,wn}var AM;function p4(){return AM||(AM=1,ub.exports=f4()),ub.exports}var m4=p4(),hb,MM;function QI(){if(MM)return hb;MM=1;var e=nh(),t=ih(),i="[object Number]";function a(d){return typeof d=="number"||t(d)&&e(d)==i}return hb=a,hb}var db,jM;function g4(){if(jM)return db;jM=1;var e=QI();function t(i){return e(i)&&i!=+i}return db=t,db}var y4=g4();const Fy=Bn(y4);var v4=QI();const _4=Bn(v4);var hc=function(t){return t===0?0:t>0?1:-1},wf=function(t){return Of(t)&&t.indexOf("%")===t.length-1},Dt=function(t){return _4(t)&&!Fy(t)},la=function(t){return Dt(t)||Of(t)},x4=0,$y=function(t){var i=++x4;return"".concat(t||"").concat(i)},If=function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Dt(t)&&!Of(t))return a;var y;if(wf(t)){var m=t.indexOf("%");y=i*parseFloat(t.slice(0,m))/100}else y=+t;return Fy(y)&&(y=a),d&&y>i&&(y=i),y},hd=function(t){if(!t)return null;var i=Object.keys(t);return i&&i.length?t[i[0]]:null},b4=function(t){if(!Array.isArray(t))return!1;for(var i=t.length,a={},d=0;d<i;d++)if(!a[t[d]])a[t[d]]=!0;else return!0;return!1},cc=function(t,i){return Dt(t)&&Dt(i)?function(a){return t+a*(i-t)}:function(){return i}};function a_(e,t,i){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):ul(a,t))===i})}var w4=function(t,i){return Dt(t)&&Dt(i)?t-i:Of(t)&&Of(i)?t.localeCompare(i):t instanceof Date&&i instanceof Date?t.getTime()-i.getTime():String(t).localeCompare(String(i))};function tm(e,t){for(var i in e)if({}.hasOwnProperty.call(e,i)&&(!{}.hasOwnProperty.call(t,i)||e[i]!==t[i]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function S2(e){"@babel/helpers - typeof";return S2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S2(e)}var S4=["viewBox","children"],T4=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],PM=["points","pathLength"],fb={svg:S4,polygon:PM,polyline:PM},tT=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],o_=function(t,i){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(Fe.isValidElement(t)&&(a=t.props),!Om(a))return null;var d={};return Object.keys(a).forEach(function(y){tT.includes(y)&&(d[y]=i||function(m){return a[y](a,m)})}),d},A4=function(t,i,a){return function(d){return t(i,a,d),null}},s_=function(t,i,a){if(!Om(t)||S2(t)!=="object")return null;var d=null;return Object.keys(t).forEach(function(y){var m=t[y];tT.includes(y)&&typeof m=="function"&&(d||(d={}),d[y]=A4(m,i,a))}),d},M4=["children"],j4=["children"];function EM(e,t){if(e==null)return{};var i=P4(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function P4(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function T2(e){"@babel/helpers - typeof";return T2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T2(e)}var CM={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Wu=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},OM=null,pb=null,rT=function e(t){if(t===OM&&Array.isArray(pb))return pb;var i=[];return Fe.Children.forEach(t,function(a){Yr(a)||(m4.isFragment(a)?i=i.concat(e(a.props.children)):i.push(a))}),pb=i,OM=t,i};function hl(e,t){var i=[],a=[];return Array.isArray(t)?a=t.map(function(d){return Wu(d)}):a=[Wu(t)],rT(e).forEach(function(d){var y=ul(d,"type.displayName")||ul(d,"type.name");a.indexOf(y)!==-1&&i.push(d)}),i}function Ts(e,t){var i=hl(e,t);return i&&i[0]}var IM=function(t){if(!t||!t.props)return!1;var i=t.props,a=i.width,d=i.height;return!(!Dt(a)||a<=0||!Dt(d)||d<=0)},E4=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],C4=function(t){return t&&t.type&&Of(t.type)&&E4.indexOf(t.type)>=0},O4=function(t){return t&&T2(t)==="object"&&"clipDot"in t},I4=function(t,i,a,d){var y,m=(y=fb==null?void 0:fb[d])!==null&&y!==void 0?y:[];return i.startsWith("data-")||!Br(t)&&(d&&m.includes(i)||T4.includes(i))||a&&tT.includes(i)},tn=function(t,i,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var d=t;if(Fe.isValidElement(t)&&(d=t.props),!Om(d))return null;var y={};return Object.keys(d).forEach(function(m){var l;I4((l=d)===null||l===void 0?void 0:l[m],m,i,a)&&(y[m]=d[m])}),y},A2=function e(t,i){if(t===i)return!0;var a=Fe.Children.count(t);if(a!==Fe.Children.count(i))return!1;if(a===0)return!0;if(a===1)return kM(Array.isArray(t)?t[0]:t,Array.isArray(i)?i[0]:i);for(var d=0;d<a;d++){var y=t[d],m=i[d];if(Array.isArray(y)||Array.isArray(m)){if(!e(y,m))return!1}else if(!kM(y,m))return!1}return!0},kM=function(t,i){if(Yr(t)&&Yr(i))return!0;if(!Yr(t)&&!Yr(i)){var a=t.props||{},d=a.children,y=EM(a,M4),m=i.props||{},l=m.children,M=EM(m,j4);return d&&l?tm(y,M)&&A2(d,l):!d&&!l?tm(y,M):!1}return!1},NM=function(t,i){var a=[],d={};return rT(t).forEach(function(y,m){if(C4(y))a.push(y);else if(y){var l=Wu(y.type),M=i[l]||{},E=M.handler,N=M.once;if(E&&(!N||!d[l])){var C=E(y,l,m);a.push(C),d[l]=!0}}}),a},k4=function(t){var i=t&&t.type;return i&&CM[i]?CM[i]:null},N4=function(t,i){return rT(i).indexOf(t)},R4=["children","width","height","viewBox","className","style","title","desc"];function M2(){return M2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},M2.apply(this,arguments)}function D4(e,t){if(e==null)return{};var i=z4(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function z4(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function j2(e){var t=e.children,i=e.width,a=e.height,d=e.viewBox,y=e.className,m=e.style,l=e.title,M=e.desc,E=D4(e,R4),N=d||{width:i,height:a,x:0,y:0},C=ln("recharts-surface",y);return $e.createElement("svg",M2({},tn(E,!0,"svg"),{className:C,width:i,height:a,style:m,viewBox:"".concat(N.x," ").concat(N.y," ").concat(N.width," ").concat(N.height)}),$e.createElement("title",null,l),$e.createElement("desc",null,M),t)}var L4=["children","className"];function P2(){return P2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},P2.apply(this,arguments)}function B4(e,t){if(e==null)return{};var i=F4(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function F4(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var Oi=$e.forwardRef(function(e,t){var i=e.children,a=e.className,d=B4(e,L4),y=ln("recharts-layer",a);return $e.createElement("g",P2({className:y},tn(d,!0),{ref:t}),i)}),Yu=function(t,i){for(var a=arguments.length,d=new Array(a>2?a-2:0),y=2;y<a;y++)d[y-2]=arguments[y]},mb,RM;function $4(){if(RM)return mb;RM=1;function e(t,i,a){var d=-1,y=t.length;i<0&&(i=-i>y?0:y+i),a=a>y?y:a,a<0&&(a+=y),y=i>a?0:a-i>>>0,i>>>=0;for(var m=Array(y);++d<y;)m[d]=t[d+i];return m}return mb=e,mb}var gb,DM;function q4(){if(DM)return gb;DM=1;var e=$4();function t(i,a,d){var y=i.length;return d=d===void 0?y:d,!a&&d>=y?i:e(i,a,d)}return gb=t,gb}var yb,zM;function JI(){if(zM)return yb;zM=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",d=t+i+a,y="\\ufe0e\\ufe0f",m="\\u200d",l=RegExp("["+m+e+d+y+"]");function M(E){return l.test(E)}return yb=M,yb}var vb,LM;function U4(){if(LM)return vb;LM=1;function e(t){return t.split("")}return vb=e,vb}var _b,BM;function V4(){if(BM)return _b;BM=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",d=t+i+a,y="\\ufe0e\\ufe0f",m="["+e+"]",l="["+d+"]",M="\\ud83c[\\udffb-\\udfff]",E="(?:"+l+"|"+M+")",N="[^"+e+"]",C="(?:\\ud83c[\\udde6-\\uddff]){2}",L="[\\ud800-\\udbff][\\udc00-\\udfff]",F="\\u200d",H=E+"?",G="["+y+"]?",q="(?:"+F+"(?:"+[N,C,L].join("|")+")"+G+H+")*",re=G+H+q,ie="(?:"+[N+l+"?",l,C,L,m].join("|")+")",ne=RegExp(M+"(?="+M+")|"+ie+re,"g");function ce(J){return J.match(ne)||[]}return _b=ce,_b}var xb,FM;function G4(){if(FM)return xb;FM=1;var e=U4(),t=JI(),i=V4();function a(d){return t(d)?i(d):e(d)}return xb=a,xb}var bb,$M;function Z4(){if($M)return bb;$M=1;var e=q4(),t=JI(),i=G4(),a=WI();function d(y){return function(m){m=a(m);var l=t(m)?i(m):void 0,M=l?l[0]:m.charAt(0),E=l?e(l,1).join(""):m.slice(1);return M[y]()+E}}return bb=d,bb}var wb,qM;function H4(){if(qM)return wb;qM=1;var e=Z4(),t=e("toUpperCase");return wb=t,wb}var X4=H4();const lx=Bn(X4);function Xn(e){return function(){return e}}const ek=Math.cos,l_=Math.sin,pc=Math.sqrt,c_=Math.PI,cx=2*c_,E2=Math.PI,C2=2*E2,xf=1e-6,W4=C2-xf;function tk(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function Y4(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tk;const i=10**t;return function(a){this._+=a[0];for(let d=1,y=a.length;d<y;++d)this._+=Math.round(arguments[d]*i)/i+a[d]}}class K4{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tk:Y4(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,a,d){this._append`Q${+t},${+i},${this._x1=+a},${this._y1=+d}`}bezierCurveTo(t,i,a,d,y,m){this._append`C${+t},${+i},${+a},${+d},${this._x1=+y},${this._y1=+m}`}arcTo(t,i,a,d,y){if(t=+t,i=+i,a=+a,d=+d,y=+y,y<0)throw new Error(`negative radius: ${y}`);let m=this._x1,l=this._y1,M=a-t,E=d-i,N=m-t,C=l-i,L=N*N+C*C;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(L>xf)if(!(Math.abs(C*M-E*N)>xf)||!y)this._append`L${this._x1=t},${this._y1=i}`;else{let F=a-m,H=d-l,G=M*M+E*E,q=F*F+H*H,re=Math.sqrt(G),ie=Math.sqrt(L),ne=y*Math.tan((E2-Math.acos((G+L-q)/(2*re*ie)))/2),ce=ne/ie,J=ne/re;Math.abs(ce-1)>xf&&this._append`L${t+ce*N},${i+ce*C}`,this._append`A${y},${y},0,0,${+(C*F>N*H)},${this._x1=t+J*M},${this._y1=i+J*E}`}}arc(t,i,a,d,y,m){if(t=+t,i=+i,a=+a,m=!!m,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(d),M=a*Math.sin(d),E=t+l,N=i+M,C=1^m,L=m?d-y:y-d;this._x1===null?this._append`M${E},${N}`:(Math.abs(this._x1-E)>xf||Math.abs(this._y1-N)>xf)&&this._append`L${E},${N}`,a&&(L<0&&(L=L%C2+C2),L>W4?this._append`A${a},${a},0,1,${C},${t-l},${i-M}A${a},${a},0,1,${C},${this._x1=E},${this._y1=N}`:L>xf&&this._append`A${a},${a},0,${+(L>=E2)},${C},${this._x1=t+a*Math.cos(y)},${this._y1=i+a*Math.sin(y)}`)}rect(t,i,a,d){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${a=+a}v${+d}h${-a}Z`}toString(){return this._}}function nT(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const a=Math.floor(i);if(!(a>=0))throw new RangeError(`invalid digits: ${i}`);t=a}return e},()=>new K4(t)}function iT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rk(e){this._context=e}rk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ux(e){return new rk(e)}function nk(e){return e[0]}function ik(e){return e[1]}function ak(e,t){var i=Xn(!0),a=null,d=ux,y=null,m=nT(l);e=typeof e=="function"?e:e===void 0?nk:Xn(e),t=typeof t=="function"?t:t===void 0?ik:Xn(t);function l(M){var E,N=(M=iT(M)).length,C,L=!1,F;for(a==null&&(y=d(F=m())),E=0;E<=N;++E)!(E<N&&i(C=M[E],E,M))===L&&((L=!L)?y.lineStart():y.lineEnd()),L&&y.point(+e(C,E,M),+t(C,E,M));if(F)return y=null,F+""||null}return l.x=function(M){return arguments.length?(e=typeof M=="function"?M:Xn(+M),l):e},l.y=function(M){return arguments.length?(t=typeof M=="function"?M:Xn(+M),l):t},l.defined=function(M){return arguments.length?(i=typeof M=="function"?M:Xn(!!M),l):i},l.curve=function(M){return arguments.length?(d=M,a!=null&&(y=d(a)),l):d},l.context=function(M){return arguments.length?(M==null?a=y=null:y=d(a=M),l):a},l}function Bv(e,t,i){var a=null,d=Xn(!0),y=null,m=ux,l=null,M=nT(E);e=typeof e=="function"?e:e===void 0?nk:Xn(+e),t=typeof t=="function"?t:Xn(t===void 0?0:+t),i=typeof i=="function"?i:i===void 0?ik:Xn(+i);function E(C){var L,F,H,G=(C=iT(C)).length,q,re=!1,ie,ne=new Array(G),ce=new Array(G);for(y==null&&(l=m(ie=M())),L=0;L<=G;++L){if(!(L<G&&d(q=C[L],L,C))===re)if(re=!re)F=L,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),H=L-1;H>=F;--H)l.point(ne[H],ce[H]);l.lineEnd(),l.areaEnd()}re&&(ne[L]=+e(q,L,C),ce[L]=+t(q,L,C),l.point(a?+a(q,L,C):ne[L],i?+i(q,L,C):ce[L]))}if(ie)return l=null,ie+""||null}function N(){return ak().defined(d).curve(m).context(y)}return E.x=function(C){return arguments.length?(e=typeof C=="function"?C:Xn(+C),a=null,E):e},E.x0=function(C){return arguments.length?(e=typeof C=="function"?C:Xn(+C),E):e},E.x1=function(C){return arguments.length?(a=C==null?null:typeof C=="function"?C:Xn(+C),E):a},E.y=function(C){return arguments.length?(t=typeof C=="function"?C:Xn(+C),i=null,E):t},E.y0=function(C){return arguments.length?(t=typeof C=="function"?C:Xn(+C),E):t},E.y1=function(C){return arguments.length?(i=C==null?null:typeof C=="function"?C:Xn(+C),E):i},E.lineX0=E.lineY0=function(){return N().x(e).y(t)},E.lineY1=function(){return N().x(e).y(i)},E.lineX1=function(){return N().x(a).y(t)},E.defined=function(C){return arguments.length?(d=typeof C=="function"?C:Xn(!!C),E):d},E.curve=function(C){return arguments.length?(m=C,y!=null&&(l=m(y)),E):m},E.context=function(C){return arguments.length?(C==null?y=l=null:l=m(y=C),E):y},E}class ok{constructor(t,i){this._context=t,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,i){switch(t=+t,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,i,t,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,t,this._y0,t,i);break}}this._x0=t,this._y0=i}}function Q4(e){return new ok(e,!0)}function J4(e){return new ok(e,!1)}const aT={draw(e,t){const i=pc(t/c_);e.moveTo(i,0),e.arc(0,0,i,0,cx)}},eL={draw(e,t){const i=pc(t/5)/2;e.moveTo(-3*i,-i),e.lineTo(-i,-i),e.lineTo(-i,-3*i),e.lineTo(i,-3*i),e.lineTo(i,-i),e.lineTo(3*i,-i),e.lineTo(3*i,i),e.lineTo(i,i),e.lineTo(i,3*i),e.lineTo(-i,3*i),e.lineTo(-i,i),e.lineTo(-3*i,i),e.closePath()}},sk=pc(1/3),tL=sk*2,rL={draw(e,t){const i=pc(t/tL),a=i*sk;e.moveTo(0,-i),e.lineTo(a,0),e.lineTo(0,i),e.lineTo(-a,0),e.closePath()}},nL={draw(e,t){const i=pc(t),a=-i/2;e.rect(a,a,i,i)}},iL=.8908130915292852,lk=l_(c_/10)/l_(7*c_/10),aL=l_(cx/10)*lk,oL=-ek(cx/10)*lk,sL={draw(e,t){const i=pc(t*iL),a=aL*i,d=oL*i;e.moveTo(0,-i),e.lineTo(a,d);for(let y=1;y<5;++y){const m=cx*y/5,l=ek(m),M=l_(m);e.lineTo(M*i,-l*i),e.lineTo(l*a-M*d,M*a+l*d)}e.closePath()}},Sb=pc(3),lL={draw(e,t){const i=-pc(t/(Sb*3));e.moveTo(0,i*2),e.lineTo(-Sb*i,-i),e.lineTo(Sb*i,-i),e.closePath()}},ol=-.5,sl=pc(3)/2,O2=1/pc(12),cL=(O2/2+1)*3,uL={draw(e,t){const i=pc(t/cL),a=i/2,d=i*O2,y=a,m=i*O2+i,l=-y,M=m;e.moveTo(a,d),e.lineTo(y,m),e.lineTo(l,M),e.lineTo(ol*a-sl*d,sl*a+ol*d),e.lineTo(ol*y-sl*m,sl*y+ol*m),e.lineTo(ol*l-sl*M,sl*l+ol*M),e.lineTo(ol*a+sl*d,ol*d-sl*a),e.lineTo(ol*y+sl*m,ol*m-sl*y),e.lineTo(ol*l+sl*M,ol*M-sl*l),e.closePath()}};function hL(e,t){let i=null,a=nT(d);e=typeof e=="function"?e:Xn(e||aT),t=typeof t=="function"?t:Xn(t===void 0?64:+t);function d(){let y;if(i||(i=y=a()),e.apply(this,arguments).draw(i,+t.apply(this,arguments)),y)return i=null,y+""||null}return d.type=function(y){return arguments.length?(e=typeof y=="function"?y:Xn(y),d):e},d.size=function(y){return arguments.length?(t=typeof y=="function"?y:Xn(+y),d):t},d.context=function(y){return arguments.length?(i=y??null,d):i},d}function u_(){}function h_(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function ck(e){this._context=e}ck.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:h_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:h_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dL(e){return new ck(e)}function uk(e){this._context=e}uk.prototype={areaStart:u_,areaEnd:u_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:h_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fL(e){return new uk(e)}function hk(e){this._context=e}hk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,a):this._context.moveTo(i,a);break;case 3:this._point=4;default:h_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pL(e){return new hk(e)}function dk(e){this._context=e}dk.prototype={areaStart:u_,areaEnd:u_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function mL(e){return new dk(e)}function UM(e){return e<0?-1:1}function VM(e,t,i){var a=e._x1-e._x0,d=t-e._x1,y=(e._y1-e._y0)/(a||d<0&&-0),m=(i-e._y1)/(d||a<0&&-0),l=(y*d+m*a)/(a+d);return(UM(y)+UM(m))*Math.min(Math.abs(y),Math.abs(m),.5*Math.abs(l))||0}function GM(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function Tb(e,t,i){var a=e._x0,d=e._y0,y=e._x1,m=e._y1,l=(y-a)/3;e._context.bezierCurveTo(a+l,d+l*t,y-l,m-l*i,y,m)}function d_(e){this._context=e}d_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Tb(this,this._t0,GM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var i=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Tb(this,GM(this,i=VM(this,e,t)),i);break;default:Tb(this,this._t0,i=VM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}};function fk(e){this._context=new pk(e)}(fk.prototype=Object.create(d_.prototype)).point=function(e,t){d_.prototype.point.call(this,t,e)};function pk(e){this._context=e}pk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,i,a,d,y){this._context.bezierCurveTo(t,e,a,i,y,d)}};function gL(e){return new d_(e)}function yL(e){return new fk(e)}function mk(e){this._context=e}mk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,i=e.length;if(i)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),i===2)this._context.lineTo(e[1],t[1]);else for(var a=ZM(e),d=ZM(t),y=0,m=1;m<i;++y,++m)this._context.bezierCurveTo(a[0][y],d[0][y],a[1][y],d[1][y],e[m],t[m]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function ZM(e){var t,i=e.length-1,a,d=new Array(i),y=new Array(i),m=new Array(i);for(d[0]=0,y[0]=2,m[0]=e[0]+2*e[1],t=1;t<i-1;++t)d[t]=1,y[t]=4,m[t]=4*e[t]+2*e[t+1];for(d[i-1]=2,y[i-1]=7,m[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)a=d[t]/y[t-1],y[t]-=a,m[t]-=a*m[t-1];for(d[i-1]=m[i-1]/y[i-1],t=i-2;t>=0;--t)d[t]=(m[t]-d[t+1])/y[t];for(y[i-1]=(e[i]+d[i-1])/2,t=0;t<i-1;++t)y[t]=2*e[t+1]-d[t+1];return[d,y]}function vL(e){return new mk(e)}function hx(e,t){this._context=e,this._t=t}hx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}break}}this._x=e,this._y=t}};function _L(e){return new hx(e,.5)}function xL(e){return new hx(e,0)}function bL(e){return new hx(e,1)}function am(e,t){if((m=e.length)>1)for(var i=1,a,d,y=e[t[0]],m,l=y.length;i<m;++i)for(d=y,y=e[t[i]],a=0;a<l;++a)y[a][1]+=y[a][0]=isNaN(d[a][1])?d[a][0]:d[a][1]}function I2(e){for(var t=e.length,i=new Array(t);--t>=0;)i[t]=t;return i}function wL(e,t){return e[t]}function SL(e){const t=[];return t.key=e,t}function TL(){var e=Xn([]),t=I2,i=am,a=wL;function d(y){var m=Array.from(e.apply(this,arguments),SL),l,M=m.length,E=-1,N;for(const C of y)for(l=0,++E;l<M;++l)(m[l][E]=[0,+a(C,m[l].key,E,y)]).data=C;for(l=0,N=iT(t(m));l<M;++l)m[N[l]].index=l;return i(m,N),m}return d.keys=function(y){return arguments.length?(e=typeof y=="function"?y:Xn(Array.from(y)),d):e},d.value=function(y){return arguments.length?(a=typeof y=="function"?y:Xn(+y),d):a},d.order=function(y){return arguments.length?(t=y==null?I2:typeof y=="function"?y:Xn(Array.from(y)),d):t},d.offset=function(y){return arguments.length?(i=y??am,d):i},d}function AL(e,t){if((a=e.length)>0){for(var i,a,d=0,y=e[0].length,m;d<y;++d){for(m=i=0;i<a;++i)m+=e[i][d][1]||0;if(m)for(i=0;i<a;++i)e[i][d][1]/=m}am(e,t)}}function ML(e,t){if((d=e.length)>0){for(var i=0,a=e[t[0]],d,y=a.length;i<y;++i){for(var m=0,l=0;m<d;++m)l+=e[m][i][1]||0;a[i][1]+=a[i][0]=-l/2}am(e,t)}}function jL(e,t){if(!(!((m=e.length)>0)||!((y=(d=e[t[0]]).length)>0))){for(var i=0,a=1,d,y,m;a<y;++a){for(var l=0,M=0,E=0;l<m;++l){for(var N=e[t[l]],C=N[a][1]||0,L=N[a-1][1]||0,F=(C-L)/2,H=0;H<l;++H){var G=e[t[H]],q=G[a][1]||0,re=G[a-1][1]||0;F+=q-re}M+=C,E+=F*C}d[a-1][1]+=d[a-1][0]=i,M&&(i-=E/M)}d[a-1][1]+=d[a-1][0]=i,am(e,t)}}function ny(e){"@babel/helpers - typeof";return ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ny(e)}var PL=["type","size","sizeType"];function k2(){return k2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},k2.apply(this,arguments)}function HM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function XM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?HM(Object(i),!0).forEach(function(a){EL(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):HM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function EL(e,t,i){return t=CL(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function CL(e){var t=OL(e,"string");return ny(t)=="symbol"?t:t+""}function OL(e,t){if(ny(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(ny(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IL(e,t){if(e==null)return{};var i=kL(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function kL(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var gk={symbolCircle:aT,symbolCross:eL,symbolDiamond:rL,symbolSquare:nL,symbolStar:sL,symbolTriangle:lL,symbolWye:uL},NL=Math.PI/180,RL=function(t){var i="symbol".concat(lx(t));return gk[i]||aT},DL=function(t,i,a){if(i==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var d=18*NL;return 1.25*t*t*(Math.tan(d)-Math.tan(d*2)*Math.pow(Math.tan(d),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},zL=function(t,i){gk["symbol".concat(lx(t))]=i},oT=function(t){var i=t.type,a=i===void 0?"circle":i,d=t.size,y=d===void 0?64:d,m=t.sizeType,l=m===void 0?"area":m,M=IL(t,PL),E=XM(XM({},M),{},{type:a,size:y,sizeType:l}),N=function(){var q=RL(a),re=hL().type(q).size(DL(y,l,a));return re()},C=E.className,L=E.cx,F=E.cy,H=tn(E,!0);return L===+L&&F===+F&&y===+y?$e.createElement("path",k2({},H,{className:ln("recharts-symbols",C),transform:"translate(".concat(L,", ").concat(F,")"),d:N()})):null};oT.registerSymbol=zL;function om(e){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},om(e)}function N2(){return N2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},N2.apply(this,arguments)}function WM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function LL(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?WM(Object(i),!0).forEach(function(a){iy(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):WM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function BL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FL(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,vk(a.key),a)}}function $L(e,t,i){return t&&FL(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qL(e,t,i){return t=f_(t),UL(e,yk()?Reflect.construct(t,i||[],f_(e).constructor):t.apply(e,i))}function UL(e,t){if(t&&(om(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VL(e)}function VL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yk=function(){return!!e})()}function f_(e){return f_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},f_(e)}function GL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R2(e,t)}function R2(e,t){return R2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},R2(e,t)}function iy(e,t,i){return t=vk(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function vk(e){var t=ZL(e,"string");return om(t)=="symbol"?t:t+""}function ZL(e,t){if(om(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(om(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ac=32,sT=function(e){function t(){return BL(this,t),qL(this,t,arguments)}return GL(t,e),$L(t,[{key:"renderIcon",value:function(a){var d=this.props.inactiveColor,y=ac/2,m=ac/6,l=ac/3,M=a.inactive?d:a.color;if(a.type==="plainline")return $e.createElement("line",{strokeWidth:4,fill:"none",stroke:M,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:y,x2:ac,y2:y,className:"recharts-legend-icon"});if(a.type==="line")return $e.createElement("path",{strokeWidth:4,fill:"none",stroke:M,d:"M0,".concat(y,"h").concat(l,`
            A`).concat(m,",").concat(m,",0,1,1,").concat(2*l,",").concat(y,`
            H`).concat(ac,"M").concat(2*l,",").concat(y,`
            A`).concat(m,",").concat(m,",0,1,1,").concat(l,",").concat(y),className:"recharts-legend-icon"});if(a.type==="rect")return $e.createElement("path",{stroke:"none",fill:M,d:"M0,".concat(ac/8,"h").concat(ac,"v").concat(ac*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if($e.isValidElement(a.legendIcon)){var E=LL({},a);return delete E.legendIcon,$e.cloneElement(a.legendIcon,E)}return $e.createElement(oT,{fill:M,cx:y,cy:y,size:ac,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,d=this.props,y=d.payload,m=d.iconSize,l=d.layout,M=d.formatter,E=d.inactiveColor,N={x:0,y:0,width:ac,height:ac},C={display:l==="horizontal"?"inline-block":"block",marginRight:10},L={display:"inline-block",verticalAlign:"middle",marginRight:4};return y.map(function(F,H){var G=F.formatter||M,q=ln(iy(iy({"recharts-legend-item":!0},"legend-item-".concat(H),!0),"inactive",F.inactive));if(F.type==="none")return null;var re=Br(F.value)?null:F.value;Yu(!Br(F.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var ie=F.inactive?E:F.color;return $e.createElement("li",N2({className:q,style:C,key:"legend-item-".concat(H)},s_(a.props,F,H)),$e.createElement(j2,{width:m,height:m,viewBox:N,style:L},a.renderIcon(F)),$e.createElement("span",{className:"recharts-legend-item-text",style:{color:ie}},G?G(re,F,H):re))})}},{key:"render",value:function(){var a=this.props,d=a.payload,y=a.layout,m=a.align;if(!d||!d.length)return null;var l={padding:0,margin:0,textAlign:y==="horizontal"?m:"left"};return $e.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(Fe.PureComponent);iy(sT,"displayName","Legend");iy(sT,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Ab,YM;function HL(){if(YM)return Ab;YM=1;var e=ax();function t(){this.__data__=new e,this.size=0}return Ab=t,Ab}var Mb,KM;function XL(){if(KM)return Mb;KM=1;function e(t){var i=this.__data__,a=i.delete(t);return this.size=i.size,a}return Mb=e,Mb}var jb,QM;function WL(){if(QM)return jb;QM=1;function e(t){return this.__data__.get(t)}return jb=e,jb}var Pb,JM;function YL(){if(JM)return Pb;JM=1;function e(t){return this.__data__.has(t)}return Pb=e,Pb}var Eb,ej;function KL(){if(ej)return Eb;ej=1;var e=ax(),t=KS(),i=QS(),a=200;function d(y,m){var l=this.__data__;if(l instanceof e){var M=l.__data__;if(!t||M.length<a-1)return M.push([y,m]),this.size=++l.size,this;l=this.__data__=new i(M)}return l.set(y,m),this.size=l.size,this}return Eb=d,Eb}var Cb,tj;function _k(){if(tj)return Cb;tj=1;var e=ax(),t=HL(),i=XL(),a=WL(),d=YL(),y=KL();function m(l){var M=this.__data__=new e(l);this.size=M.size}return m.prototype.clear=t,m.prototype.delete=i,m.prototype.get=a,m.prototype.has=d,m.prototype.set=y,Cb=m,Cb}var Ob,rj;function QL(){if(rj)return Ob;rj=1;var e="__lodash_hash_undefined__";function t(i){return this.__data__.set(i,e),this}return Ob=t,Ob}var Ib,nj;function JL(){if(nj)return Ib;nj=1;function e(t){return this.__data__.has(t)}return Ib=e,Ib}var kb,ij;function xk(){if(ij)return kb;ij=1;var e=QS(),t=QL(),i=JL();function a(d){var y=-1,m=d==null?0:d.length;for(this.__data__=new e;++y<m;)this.add(d[y])}return a.prototype.add=a.prototype.push=t,a.prototype.has=i,kb=a,kb}var Nb,aj;function bk(){if(aj)return Nb;aj=1;function e(t,i){for(var a=-1,d=t==null?0:t.length;++a<d;)if(i(t[a],a,t))return!0;return!1}return Nb=e,Nb}var Rb,oj;function wk(){if(oj)return Rb;oj=1;function e(t,i){return t.has(i)}return Rb=e,Rb}var Db,sj;function Sk(){if(sj)return Db;sj=1;var e=xk(),t=bk(),i=wk(),a=1,d=2;function y(m,l,M,E,N,C){var L=M&a,F=m.length,H=l.length;if(F!=H&&!(L&&H>F))return!1;var G=C.get(m),q=C.get(l);if(G&&q)return G==l&&q==m;var re=-1,ie=!0,ne=M&d?new e:void 0;for(C.set(m,l),C.set(l,m);++re<F;){var ce=m[re],J=l[re];if(E)var ee=L?E(J,ce,re,l,m,C):E(ce,J,re,m,l,C);if(ee!==void 0){if(ee)continue;ie=!1;break}if(ne){if(!t(l,function(he,ge){if(!i(ne,ge)&&(ce===he||N(ce,he,M,E,C)))return ne.push(ge)})){ie=!1;break}}else if(!(ce===J||N(ce,J,M,E,C))){ie=!1;break}}return C.delete(m),C.delete(l),ie}return Db=y,Db}var zb,lj;function e6(){if(lj)return zb;lj=1;var e=ru(),t=e.Uint8Array;return zb=t,zb}var Lb,cj;function t6(){if(cj)return Lb;cj=1;function e(t){var i=-1,a=Array(t.size);return t.forEach(function(d,y){a[++i]=[y,d]}),a}return Lb=e,Lb}var Bb,uj;function lT(){if(uj)return Bb;uj=1;function e(t){var i=-1,a=Array(t.size);return t.forEach(function(d){a[++i]=d}),a}return Bb=e,Bb}var Fb,hj;function r6(){if(hj)return Fb;hj=1;var e=By(),t=e6(),i=YS(),a=Sk(),d=t6(),y=lT(),m=1,l=2,M="[object Boolean]",E="[object Date]",N="[object Error]",C="[object Map]",L="[object Number]",F="[object RegExp]",H="[object Set]",G="[object String]",q="[object Symbol]",re="[object ArrayBuffer]",ie="[object DataView]",ne=e?e.prototype:void 0,ce=ne?ne.valueOf:void 0;function J(ee,he,ge,Oe,at,ke,qe){switch(ge){case ie:if(ee.byteLength!=he.byteLength||ee.byteOffset!=he.byteOffset)return!1;ee=ee.buffer,he=he.buffer;case re:return!(ee.byteLength!=he.byteLength||!ke(new t(ee),new t(he)));case M:case E:case L:return i(+ee,+he);case N:return ee.name==he.name&&ee.message==he.message;case F:case G:return ee==he+"";case C:var et=d;case H:var st=Oe&m;if(et||(et=y),ee.size!=he.size&&!st)return!1;var rt=qe.get(ee);if(rt)return rt==he;Oe|=l,qe.set(ee,he);var Te=a(et(ee),et(he),Oe,at,ke,qe);return qe.delete(ee),Te;case q:if(ce)return ce.call(ee)==ce.call(he)}return!1}return Fb=J,Fb}var $b,dj;function Tk(){if(dj)return $b;dj=1;function e(t,i){for(var a=-1,d=i.length,y=t.length;++a<d;)t[y+a]=i[a];return t}return $b=e,$b}var qb,fj;function n6(){if(fj)return qb;fj=1;var e=Tk(),t=is();function i(a,d,y){var m=d(a);return t(a)?m:e(m,y(a))}return qb=i,qb}var Ub,pj;function i6(){if(pj)return Ub;pj=1;function e(t,i){for(var a=-1,d=t==null?0:t.length,y=0,m=[];++a<d;){var l=t[a];i(l,a,t)&&(m[y++]=l)}return m}return Ub=e,Ub}var Vb,mj;function a6(){if(mj)return Vb;mj=1;function e(){return[]}return Vb=e,Vb}var Gb,gj;function o6(){if(gj)return Gb;gj=1;var e=i6(),t=a6(),i=Object.prototype,a=i.propertyIsEnumerable,d=Object.getOwnPropertySymbols,y=d?function(m){return m==null?[]:(m=Object(m),e(d(m),function(l){return a.call(m,l)}))}:t;return Gb=y,Gb}var Zb,yj;function s6(){if(yj)return Zb;yj=1;function e(t,i){for(var a=-1,d=Array(t);++a<t;)d[a]=i(a);return d}return Zb=e,Zb}var Hb,vj;function l6(){if(vj)return Hb;vj=1;var e=nh(),t=ih(),i="[object Arguments]";function a(d){return t(d)&&e(d)==i}return Hb=a,Hb}var Xb,_j;function cT(){if(_j)return Xb;_j=1;var e=l6(),t=ih(),i=Object.prototype,a=i.hasOwnProperty,d=i.propertyIsEnumerable,y=e(function(){return arguments}())?e:function(m){return t(m)&&a.call(m,"callee")&&!d.call(m,"callee")};return Xb=y,Xb}var Gg={exports:{}},Wb,xj;function c6(){if(xj)return Wb;xj=1;function e(){return!1}return Wb=e,Wb}Gg.exports;var bj;function Ak(){return bj||(bj=1,function(e,t){var i=ru(),a=c6(),d=t&&!t.nodeType&&t,y=d&&!0&&e&&!e.nodeType&&e,m=y&&y.exports===d,l=m?i.Buffer:void 0,M=l?l.isBuffer:void 0,E=M||a;e.exports=E}(Gg,Gg.exports)),Gg.exports}var Yb,wj;function uT(){if(wj)return Yb;wj=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function i(a,d){var y=typeof a;return d=d??e,!!d&&(y=="number"||y!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<d}return Yb=i,Yb}var Kb,Sj;function hT(){if(Sj)return Kb;Sj=1;var e=9007199254740991;function t(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=e}return Kb=t,Kb}var Qb,Tj;function u6(){if(Tj)return Qb;Tj=1;var e=nh(),t=hT(),i=ih(),a="[object Arguments]",d="[object Array]",y="[object Boolean]",m="[object Date]",l="[object Error]",M="[object Function]",E="[object Map]",N="[object Number]",C="[object Object]",L="[object RegExp]",F="[object Set]",H="[object String]",G="[object WeakMap]",q="[object ArrayBuffer]",re="[object DataView]",ie="[object Float32Array]",ne="[object Float64Array]",ce="[object Int8Array]",J="[object Int16Array]",ee="[object Int32Array]",he="[object Uint8Array]",ge="[object Uint8ClampedArray]",Oe="[object Uint16Array]",at="[object Uint32Array]",ke={};ke[ie]=ke[ne]=ke[ce]=ke[J]=ke[ee]=ke[he]=ke[ge]=ke[Oe]=ke[at]=!0,ke[a]=ke[d]=ke[q]=ke[y]=ke[re]=ke[m]=ke[l]=ke[M]=ke[E]=ke[N]=ke[C]=ke[L]=ke[F]=ke[H]=ke[G]=!1;function qe(et){return i(et)&&t(et.length)&&!!ke[e(et)]}return Qb=qe,Qb}var Jb,Aj;function Mk(){if(Aj)return Jb;Aj=1;function e(t){return function(i){return t(i)}}return Jb=e,Jb}var Zg={exports:{}};Zg.exports;var Mj;function h6(){return Mj||(Mj=1,function(e,t){var i=ZI(),a=t&&!t.nodeType&&t,d=a&&!0&&e&&!e.nodeType&&e,y=d&&d.exports===a,m=y&&i.process,l=function(){try{var M=d&&d.require&&d.require("util").types;return M||m&&m.binding&&m.binding("util")}catch{}}();e.exports=l}(Zg,Zg.exports)),Zg.exports}var e1,jj;function jk(){if(jj)return e1;jj=1;var e=u6(),t=Mk(),i=h6(),a=i&&i.isTypedArray,d=a?t(a):e;return e1=d,e1}var t1,Pj;function d6(){if(Pj)return t1;Pj=1;var e=s6(),t=cT(),i=is(),a=Ak(),d=uT(),y=jk(),m=Object.prototype,l=m.hasOwnProperty;function M(E,N){var C=i(E),L=!C&&t(E),F=!C&&!L&&a(E),H=!C&&!L&&!F&&y(E),G=C||L||F||H,q=G?e(E.length,String):[],re=q.length;for(var ie in E)(N||l.call(E,ie))&&!(G&&(ie=="length"||F&&(ie=="offset"||ie=="parent")||H&&(ie=="buffer"||ie=="byteLength"||ie=="byteOffset")||d(ie,re)))&&q.push(ie);return q}return t1=M,t1}var r1,Ej;function f6(){if(Ej)return r1;Ej=1;var e=Object.prototype;function t(i){var a=i&&i.constructor,d=typeof a=="function"&&a.prototype||e;return i===d}return r1=t,r1}var n1,Cj;function Pk(){if(Cj)return n1;Cj=1;function e(t,i){return function(a){return t(i(a))}}return n1=e,n1}var i1,Oj;function p6(){if(Oj)return i1;Oj=1;var e=Pk(),t=e(Object.keys,Object);return i1=t,i1}var a1,Ij;function m6(){if(Ij)return a1;Ij=1;var e=f6(),t=p6(),i=Object.prototype,a=i.hasOwnProperty;function d(y){if(!e(y))return t(y);var m=[];for(var l in Object(y))a.call(y,l)&&l!="constructor"&&m.push(l);return m}return a1=d,a1}var o1,kj;function qy(){if(kj)return o1;kj=1;var e=WS(),t=hT();function i(a){return a!=null&&t(a.length)&&!e(a)}return o1=i,o1}var s1,Nj;function dx(){if(Nj)return s1;Nj=1;var e=d6(),t=m6(),i=qy();function a(d){return i(d)?e(d):t(d)}return s1=a,s1}var l1,Rj;function g6(){if(Rj)return l1;Rj=1;var e=n6(),t=o6(),i=dx();function a(d){return e(d,i,t)}return l1=a,l1}var c1,Dj;function y6(){if(Dj)return c1;Dj=1;var e=g6(),t=1,i=Object.prototype,a=i.hasOwnProperty;function d(y,m,l,M,E,N){var C=l&t,L=e(y),F=L.length,H=e(m),G=H.length;if(F!=G&&!C)return!1;for(var q=F;q--;){var re=L[q];if(!(C?re in m:a.call(m,re)))return!1}var ie=N.get(y),ne=N.get(m);if(ie&&ne)return ie==m&&ne==y;var ce=!0;N.set(y,m),N.set(m,y);for(var J=C;++q<F;){re=L[q];var ee=y[re],he=m[re];if(M)var ge=C?M(he,ee,re,m,y,N):M(ee,he,re,y,m,N);if(!(ge===void 0?ee===he||E(ee,he,l,M,N):ge)){ce=!1;break}J||(J=re=="constructor")}if(ce&&!J){var Oe=y.constructor,at=m.constructor;Oe!=at&&"constructor"in y&&"constructor"in m&&!(typeof Oe=="function"&&Oe instanceof Oe&&typeof at=="function"&&at instanceof at)&&(ce=!1)}return N.delete(y),N.delete(m),ce}return c1=d,c1}var u1,zj;function v6(){if(zj)return u1;zj=1;var e=Lf(),t=ru(),i=e(t,"DataView");return u1=i,u1}var h1,Lj;function _6(){if(Lj)return h1;Lj=1;var e=Lf(),t=ru(),i=e(t,"Promise");return h1=i,h1}var d1,Bj;function Ek(){if(Bj)return d1;Bj=1;var e=Lf(),t=ru(),i=e(t,"Set");return d1=i,d1}var f1,Fj;function x6(){if(Fj)return f1;Fj=1;var e=Lf(),t=ru(),i=e(t,"WeakMap");return f1=i,f1}var p1,$j;function b6(){if($j)return p1;$j=1;var e=v6(),t=KS(),i=_6(),a=Ek(),d=x6(),y=nh(),m=HI(),l="[object Map]",M="[object Object]",E="[object Promise]",N="[object Set]",C="[object WeakMap]",L="[object DataView]",F=m(e),H=m(t),G=m(i),q=m(a),re=m(d),ie=y;return(e&&ie(new e(new ArrayBuffer(1)))!=L||t&&ie(new t)!=l||i&&ie(i.resolve())!=E||a&&ie(new a)!=N||d&&ie(new d)!=C)&&(ie=function(ne){var ce=y(ne),J=ce==M?ne.constructor:void 0,ee=J?m(J):"";if(ee)switch(ee){case F:return L;case H:return l;case G:return E;case q:return N;case re:return C}return ce}),p1=ie,p1}var m1,qj;function w6(){if(qj)return m1;qj=1;var e=_k(),t=Sk(),i=r6(),a=y6(),d=b6(),y=is(),m=Ak(),l=jk(),M=1,E="[object Arguments]",N="[object Array]",C="[object Object]",L=Object.prototype,F=L.hasOwnProperty;function H(G,q,re,ie,ne,ce){var J=y(G),ee=y(q),he=J?N:d(G),ge=ee?N:d(q);he=he==E?C:he,ge=ge==E?C:ge;var Oe=he==C,at=ge==C,ke=he==ge;if(ke&&m(G)){if(!m(q))return!1;J=!0,Oe=!1}if(ke&&!Oe)return ce||(ce=new e),J||l(G)?t(G,q,re,ie,ne,ce):i(G,q,he,re,ie,ne,ce);if(!(re&M)){var qe=Oe&&F.call(G,"__wrapped__"),et=at&&F.call(q,"__wrapped__");if(qe||et){var st=qe?G.value():G,rt=et?q.value():q;return ce||(ce=new e),ne(st,rt,re,ie,ce)}}return ke?(ce||(ce=new e),a(G,q,re,ie,ne,ce)):!1}return m1=H,m1}var g1,Uj;function dT(){if(Uj)return g1;Uj=1;var e=w6(),t=ih();function i(a,d,y,m,l){return a===d?!0:a==null||d==null||!t(a)&&!t(d)?a!==a&&d!==d:e(a,d,y,m,i,l)}return g1=i,g1}var y1,Vj;function S6(){if(Vj)return y1;Vj=1;var e=_k(),t=dT(),i=1,a=2;function d(y,m,l,M){var E=l.length,N=E,C=!M;if(y==null)return!N;for(y=Object(y);E--;){var L=l[E];if(C&&L[2]?L[1]!==y[L[0]]:!(L[0]in y))return!1}for(;++E<N;){L=l[E];var F=L[0],H=y[F],G=L[1];if(C&&L[2]){if(H===void 0&&!(F in y))return!1}else{var q=new e;if(M)var re=M(H,G,F,y,m,q);if(!(re===void 0?t(G,H,i|a,M,q):re))return!1}}return!0}return y1=d,y1}var v1,Gj;function Ck(){if(Gj)return v1;Gj=1;var e=yd();function t(i){return i===i&&!e(i)}return v1=t,v1}var _1,Zj;function T6(){if(Zj)return _1;Zj=1;var e=Ck(),t=dx();function i(a){for(var d=t(a),y=d.length;y--;){var m=d[y],l=a[m];d[y]=[m,l,e(l)]}return d}return _1=i,_1}var x1,Hj;function Ok(){if(Hj)return x1;Hj=1;function e(t,i){return function(a){return a==null?!1:a[t]===i&&(i!==void 0||t in Object(a))}}return x1=e,x1}var b1,Xj;function A6(){if(Xj)return b1;Xj=1;var e=S6(),t=T6(),i=Ok();function a(d){var y=t(d);return y.length==1&&y[0][2]?i(y[0][0],y[0][1]):function(m){return m===d||e(m,d,y)}}return b1=a,b1}var w1,Wj;function M6(){if(Wj)return w1;Wj=1;function e(t,i){return t!=null&&i in Object(t)}return w1=e,w1}var S1,Yj;function j6(){if(Yj)return S1;Yj=1;var e=YI(),t=cT(),i=is(),a=uT(),d=hT(),y=sx();function m(l,M,E){M=e(M,l);for(var N=-1,C=M.length,L=!1;++N<C;){var F=y(M[N]);if(!(L=l!=null&&E(l,F)))break;l=l[F]}return L||++N!=C?L:(C=l==null?0:l.length,!!C&&d(C)&&a(F,C)&&(i(l)||t(l)))}return S1=m,S1}var T1,Kj;function P6(){if(Kj)return T1;Kj=1;var e=M6(),t=j6();function i(a,d){return a!=null&&t(a,d,e)}return T1=i,T1}var A1,Qj;function E6(){if(Qj)return A1;Qj=1;var e=dT(),t=KI(),i=P6(),a=XS(),d=Ck(),y=Ok(),m=sx(),l=1,M=2;function E(N,C){return a(N)&&d(C)?y(m(N),C):function(L){var F=t(L,N);return F===void 0&&F===C?i(L,N):e(C,F,l|M)}}return A1=E,A1}var M1,Jj;function Im(){if(Jj)return M1;Jj=1;function e(t){return t}return M1=e,M1}var j1,eP;function C6(){if(eP)return j1;eP=1;function e(t){return function(i){return i==null?void 0:i[t]}}return j1=e,j1}var P1,tP;function O6(){if(tP)return P1;tP=1;var e=eT();function t(i){return function(a){return e(a,i)}}return P1=t,P1}var E1,rP;function I6(){if(rP)return E1;rP=1;var e=C6(),t=O6(),i=XS(),a=sx();function d(y){return i(y)?e(a(y)):t(y)}return E1=d,E1}var C1,nP;function vd(){if(nP)return C1;nP=1;var e=A6(),t=E6(),i=Im(),a=is(),d=I6();function y(m){return typeof m=="function"?m:m==null?i:typeof m=="object"?a(m)?t(m[0],m[1]):e(m):d(m)}return C1=y,C1}var O1,iP;function Ik(){if(iP)return O1;iP=1;function e(t,i,a,d){for(var y=t.length,m=a+(d?1:-1);d?m--:++m<y;)if(i(t[m],m,t))return m;return-1}return O1=e,O1}var I1,aP;function k6(){if(aP)return I1;aP=1;function e(t){return t!==t}return I1=e,I1}var k1,oP;function N6(){if(oP)return k1;oP=1;function e(t,i,a){for(var d=a-1,y=t.length;++d<y;)if(t[d]===i)return d;return-1}return k1=e,k1}var N1,sP;function R6(){if(sP)return N1;sP=1;var e=Ik(),t=k6(),i=N6();function a(d,y,m){return y===y?i(d,y,m):e(d,t,m)}return N1=a,N1}var R1,lP;function D6(){if(lP)return R1;lP=1;var e=R6();function t(i,a){var d=i==null?0:i.length;return!!d&&e(i,a,0)>-1}return R1=t,R1}var D1,cP;function z6(){if(cP)return D1;cP=1;function e(t,i,a){for(var d=-1,y=t==null?0:t.length;++d<y;)if(a(i,t[d]))return!0;return!1}return D1=e,D1}var z1,uP;function L6(){if(uP)return z1;uP=1;function e(){}return z1=e,z1}var L1,hP;function B6(){if(hP)return L1;hP=1;var e=Ek(),t=L6(),i=lT(),a=1/0,d=e&&1/i(new e([,-0]))[1]==a?function(y){return new e(y)}:t;return L1=d,L1}var B1,dP;function F6(){if(dP)return B1;dP=1;var e=xk(),t=D6(),i=z6(),a=wk(),d=B6(),y=lT(),m=200;function l(M,E,N){var C=-1,L=t,F=M.length,H=!0,G=[],q=G;if(N)H=!1,L=i;else if(F>=m){var re=E?null:d(M);if(re)return y(re);H=!1,L=a,q=new e}else q=E?[]:G;e:for(;++C<F;){var ie=M[C],ne=E?E(ie):ie;if(ie=N||ie!==0?ie:0,H&&ne===ne){for(var ce=q.length;ce--;)if(q[ce]===ne)continue e;E&&q.push(ne),G.push(ie)}else L(q,ne,N)||(q!==G&&q.push(ne),G.push(ie))}return G}return B1=l,B1}var F1,fP;function $6(){if(fP)return F1;fP=1;var e=vd(),t=F6();function i(a,d){return a&&a.length?t(a,e(d,2)):[]}return F1=i,F1}var q6=$6();const pP=Bn(q6);function kk(e,t,i){return t===!0?pP(e,i):Br(t)?pP(e,t):e}function sm(e){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sm(e)}var U6=["ref"];function mP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Vu(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?mP(Object(i),!0).forEach(function(a){fx(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function V6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gP(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Rk(a.key),a)}}function G6(e,t,i){return t&&gP(e.prototype,t),i&&gP(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z6(e,t,i){return t=p_(t),H6(e,Nk()?Reflect.construct(t,i||[],p_(e).constructor):t.apply(e,i))}function H6(e,t){if(t&&(sm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X6(e)}function X6(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nk=function(){return!!e})()}function p_(e){return p_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},p_(e)}function W6(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D2(e,t)}function D2(e,t){return D2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},D2(e,t)}function fx(e,t,i){return t=Rk(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Rk(e){var t=Y6(e,"string");return sm(t)=="symbol"?t:t+""}function Y6(e,t){if(sm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(sm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function K6(e,t){if(e==null)return{};var i=Q6(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Q6(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function J6(e){return e.value}function eB(e,t){if($e.isValidElement(e))return $e.cloneElement(e,t);if(typeof e=="function")return $e.createElement(e,t);t.ref;var i=K6(t,U6);return $e.createElement(sT,i)}var yP=1,Pf=function(e){function t(){var i;V6(this,t);for(var a=arguments.length,d=new Array(a),y=0;y<a;y++)d[y]=arguments[y];return i=Z6(this,t,[].concat(d)),fx(i,"lastBoundingBox",{width:-1,height:-1}),i}return W6(t,e),G6(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,d=this.getBBox();d?(Math.abs(d.width-this.lastBoundingBox.width)>yP||Math.abs(d.height-this.lastBoundingBox.height)>yP)&&(this.lastBoundingBox.width=d.width,this.lastBoundingBox.height=d.height,a&&a(d)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Vu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var d=this.props,y=d.layout,m=d.align,l=d.verticalAlign,M=d.margin,E=d.chartWidth,N=d.chartHeight,C,L;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(m==="center"&&y==="vertical"){var F=this.getBBoxSnapshot();C={left:((E||0)-F.width)/2}}else C=m==="right"?{right:M&&M.right||0}:{left:M&&M.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var H=this.getBBoxSnapshot();L={top:((N||0)-H.height)/2}}else L=l==="bottom"?{bottom:M&&M.bottom||0}:{top:M&&M.top||0};return Vu(Vu({},C),L)}},{key:"render",value:function(){var a=this,d=this.props,y=d.content,m=d.width,l=d.height,M=d.wrapperStyle,E=d.payloadUniqBy,N=d.payload,C=Vu(Vu({position:"absolute",width:m||"auto",height:l||"auto"},this.getDefaultPosition(M)),M);return $e.createElement("div",{className:"recharts-legend-wrapper",style:C,ref:function(F){a.wrapperNode=F}},eB(y,Vu(Vu({},this.props),{},{payload:kk(N,E,J6)})))}}],[{key:"getWithHeight",value:function(a,d){var y=Vu(Vu({},this.defaultProps),a.props),m=y.layout;return m==="vertical"&&Dt(a.props.height)?{height:a.props.height}:m==="horizontal"?{width:a.props.width||d}:null}}])}(Fe.PureComponent);fx(Pf,"displayName","Legend");fx(Pf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var $1,vP;function tB(){if(vP)return $1;vP=1;var e=By(),t=cT(),i=is(),a=e?e.isConcatSpreadable:void 0;function d(y){return i(y)||t(y)||!!(a&&y&&y[a])}return $1=d,$1}var q1,_P;function Dk(){if(_P)return q1;_P=1;var e=Tk(),t=tB();function i(a,d,y,m,l){var M=-1,E=a.length;for(y||(y=t),l||(l=[]);++M<E;){var N=a[M];d>0&&y(N)?d>1?i(N,d-1,y,m,l):e(l,N):m||(l[l.length]=N)}return l}return q1=i,q1}var U1,xP;function rB(){if(xP)return U1;xP=1;function e(t){return function(i,a,d){for(var y=-1,m=Object(i),l=d(i),M=l.length;M--;){var E=l[t?M:++y];if(a(m[E],E,m)===!1)break}return i}}return U1=e,U1}var V1,bP;function nB(){if(bP)return V1;bP=1;var e=rB(),t=e();return V1=t,V1}var G1,wP;function zk(){if(wP)return G1;wP=1;var e=nB(),t=dx();function i(a,d){return a&&e(a,d,t)}return G1=i,G1}var Z1,SP;function iB(){if(SP)return Z1;SP=1;var e=qy();function t(i,a){return function(d,y){if(d==null)return d;if(!e(d))return i(d,y);for(var m=d.length,l=a?m:-1,M=Object(d);(a?l--:++l<m)&&y(M[l],l,M)!==!1;);return d}}return Z1=t,Z1}var H1,TP;function fT(){if(TP)return H1;TP=1;var e=zk(),t=iB(),i=t(e);return H1=i,H1}var X1,AP;function Lk(){if(AP)return X1;AP=1;var e=fT(),t=qy();function i(a,d){var y=-1,m=t(a)?Array(a.length):[];return e(a,function(l,M,E){m[++y]=d(l,M,E)}),m}return X1=i,X1}var W1,MP;function aB(){if(MP)return W1;MP=1;function e(t,i){var a=t.length;for(t.sort(i);a--;)t[a]=t[a].value;return t}return W1=e,W1}var Y1,jP;function oB(){if(jP)return Y1;jP=1;var e=Cm();function t(i,a){if(i!==a){var d=i!==void 0,y=i===null,m=i===i,l=e(i),M=a!==void 0,E=a===null,N=a===a,C=e(a);if(!E&&!C&&!l&&i>a||l&&M&&N&&!E&&!C||y&&M&&N||!d&&N||!m)return 1;if(!y&&!l&&!C&&i<a||C&&d&&m&&!y&&!l||E&&d&&m||!M&&m||!N)return-1}return 0}return Y1=t,Y1}var K1,PP;function sB(){if(PP)return K1;PP=1;var e=oB();function t(i,a,d){for(var y=-1,m=i.criteria,l=a.criteria,M=m.length,E=d.length;++y<M;){var N=e(m[y],l[y]);if(N){if(y>=E)return N;var C=d[y];return N*(C=="desc"?-1:1)}}return i.index-a.index}return K1=t,K1}var Q1,EP;function lB(){if(EP)return Q1;EP=1;var e=JS(),t=eT(),i=vd(),a=Lk(),d=aB(),y=Mk(),m=sB(),l=Im(),M=is();function E(N,C,L){C.length?C=e(C,function(G){return M(G)?function(q){return t(q,G.length===1?G[0]:G)}:G}):C=[l];var F=-1;C=e(C,y(i));var H=a(N,function(G,q,re){var ie=e(C,function(ne){return ne(G)});return{criteria:ie,index:++F,value:G}});return d(H,function(G,q){return m(G,q,L)})}return Q1=E,Q1}var J1,CP;function cB(){if(CP)return J1;CP=1;function e(t,i,a){switch(a.length){case 0:return t.call(i);case 1:return t.call(i,a[0]);case 2:return t.call(i,a[0],a[1]);case 3:return t.call(i,a[0],a[1],a[2])}return t.apply(i,a)}return J1=e,J1}var ew,OP;function uB(){if(OP)return ew;OP=1;var e=cB(),t=Math.max;function i(a,d,y){return d=t(d===void 0?a.length-1:d,0),function(){for(var m=arguments,l=-1,M=t(m.length-d,0),E=Array(M);++l<M;)E[l]=m[d+l];l=-1;for(var N=Array(d+1);++l<d;)N[l]=m[l];return N[d]=y(E),e(a,this,N)}}return ew=i,ew}var tw,IP;function hB(){if(IP)return tw;IP=1;function e(t){return function(){return t}}return tw=e,tw}var rw,kP;function Bk(){if(kP)return rw;kP=1;var e=Lf(),t=function(){try{var i=e(Object,"defineProperty");return i({},"",{}),i}catch{}}();return rw=t,rw}var nw,NP;function dB(){if(NP)return nw;NP=1;var e=hB(),t=Bk(),i=Im(),a=t?function(d,y){return t(d,"toString",{configurable:!0,enumerable:!1,value:e(y),writable:!0})}:i;return nw=a,nw}var iw,RP;function fB(){if(RP)return iw;RP=1;var e=800,t=16,i=Date.now;function a(d){var y=0,m=0;return function(){var l=i(),M=t-(l-m);if(m=l,M>0){if(++y>=e)return arguments[0]}else y=0;return d.apply(void 0,arguments)}}return iw=a,iw}var aw,DP;function pB(){if(DP)return aw;DP=1;var e=dB(),t=fB(),i=t(e);return aw=i,aw}var ow,zP;function mB(){if(zP)return ow;zP=1;var e=Im(),t=uB(),i=pB();function a(d,y){return i(t(d,y,e),d+"")}return ow=a,ow}var sw,LP;function px(){if(LP)return sw;LP=1;var e=YS(),t=qy(),i=uT(),a=yd();function d(y,m,l){if(!a(l))return!1;var M=typeof m;return(M=="number"?t(l)&&i(m,l.length):M=="string"&&m in l)?e(l[m],y):!1}return sw=d,sw}var lw,BP;function gB(){if(BP)return lw;BP=1;var e=Dk(),t=lB(),i=mB(),a=px(),d=i(function(y,m){if(y==null)return[];var l=m.length;return l>1&&a(y,m[0],m[1])?m=[]:l>2&&a(m[0],m[1],m[2])&&(m=[m[0]]),t(y,e(m,1),[])});return lw=d,lw}var yB=gB();const pT=Bn(yB);function ay(e){"@babel/helpers - typeof";return ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ay(e)}function z2(){return z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},z2.apply(this,arguments)}function vB(e,t){return wB(e)||bB(e,t)||xB(e,t)||_B()}function _B(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xB(e,t){if(e){if(typeof e=="string")return FP(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return FP(e,t)}}function FP(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function bB(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,d,y,m,l=[],M=!0,E=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(l.push(a.value),l.length!==t);M=!0);}catch(N){E=!0,d=N}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(E)throw d}}return l}}function wB(e){if(Array.isArray(e))return e}function $P(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function cw(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(i),!0).forEach(function(a){SB(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$P(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function SB(e,t,i){return t=TB(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function TB(e){var t=AB(e,"string");return ay(t)=="symbol"?t:t+""}function AB(e,t){if(ay(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(ay(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MB(e){return Array.isArray(e)&&la(e[0])&&la(e[1])?e.join(" ~ "):e}var jB=function(t){var i=t.separator,a=i===void 0?" : ":i,d=t.contentStyle,y=d===void 0?{}:d,m=t.itemStyle,l=m===void 0?{}:m,M=t.labelStyle,E=M===void 0?{}:M,N=t.payload,C=t.formatter,L=t.itemSorter,F=t.wrapperClassName,H=t.labelClassName,G=t.label,q=t.labelFormatter,re=t.accessibilityLayer,ie=re===void 0?!1:re,ne=function(){if(N&&N.length){var qe={padding:0,margin:0},et=(L?pT(N,L):N).map(function(st,rt){if(st.type==="none")return null;var Te=cw({display:"block",paddingTop:4,paddingBottom:4,color:st.color||"#000"},l),Ge=st.formatter||C||MB,Ze=st.value,dt=st.name,xe=Ze,We=dt;if(Ge&&xe!=null&&We!=null){var lt=Ge(Ze,dt,st,rt,N);if(Array.isArray(lt)){var ct=vB(lt,2);xe=ct[0],We=ct[1]}else xe=lt}return $e.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(rt),style:Te},la(We)?$e.createElement("span",{className:"recharts-tooltip-item-name"},We):null,la(We)?$e.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,$e.createElement("span",{className:"recharts-tooltip-item-value"},xe),$e.createElement("span",{className:"recharts-tooltip-item-unit"},st.unit||""))});return $e.createElement("ul",{className:"recharts-tooltip-item-list",style:qe},et)}return null},ce=cw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},y),J=cw({margin:0},E),ee=!Yr(G),he=ee?G:"",ge=ln("recharts-default-tooltip",F),Oe=ln("recharts-tooltip-label",H);ee&&q&&N!==void 0&&N!==null&&(he=q(G,N));var at=ie?{role:"status","aria-live":"assertive"}:{};return $e.createElement("div",z2({className:ge,style:ce},at),$e.createElement("p",{className:Oe,style:J},$e.isValidElement(he)?he:"".concat(he)),ne())};function oy(e){"@babel/helpers - typeof";return oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oy(e)}function Fv(e,t,i){return t=PB(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function PB(e){var t=EB(e,"string");return oy(t)=="symbol"?t:t+""}function EB(e,t){if(oy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(oy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rg="recharts-tooltip-wrapper",CB={visibility:"hidden"};function OB(e){var t=e.coordinate,i=e.translateX,a=e.translateY;return ln(Rg,Fv(Fv(Fv(Fv({},"".concat(Rg,"-right"),Dt(i)&&t&&Dt(t.x)&&i>=t.x),"".concat(Rg,"-left"),Dt(i)&&t&&Dt(t.x)&&i<t.x),"".concat(Rg,"-bottom"),Dt(a)&&t&&Dt(t.y)&&a>=t.y),"".concat(Rg,"-top"),Dt(a)&&t&&Dt(t.y)&&a<t.y))}function qP(e){var t=e.allowEscapeViewBox,i=e.coordinate,a=e.key,d=e.offsetTopLeft,y=e.position,m=e.reverseDirection,l=e.tooltipDimension,M=e.viewBox,E=e.viewBoxDimension;if(y&&Dt(y[a]))return y[a];var N=i[a]-l-d,C=i[a]+d;if(t[a])return m[a]?N:C;if(m[a]){var L=N,F=M[a];return L<F?Math.max(C,M[a]):Math.max(N,M[a])}var H=C+l,G=M[a]+E;return H>G?Math.max(N,M[a]):Math.max(C,M[a])}function IB(e){var t=e.translateX,i=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(i,"px, 0)"):"translate(".concat(t,"px, ").concat(i,"px)")}}function kB(e){var t=e.allowEscapeViewBox,i=e.coordinate,a=e.offsetTopLeft,d=e.position,y=e.reverseDirection,m=e.tooltipBox,l=e.useTranslate3d,M=e.viewBox,E,N,C;return m.height>0&&m.width>0&&i?(N=qP({allowEscapeViewBox:t,coordinate:i,key:"x",offsetTopLeft:a,position:d,reverseDirection:y,tooltipDimension:m.width,viewBox:M,viewBoxDimension:M.width}),C=qP({allowEscapeViewBox:t,coordinate:i,key:"y",offsetTopLeft:a,position:d,reverseDirection:y,tooltipDimension:m.height,viewBox:M,viewBoxDimension:M.height}),E=IB({translateX:N,translateY:C,useTranslate3d:l})):E=CB,{cssProperties:E,cssClasses:OB({translateX:N,translateY:C,coordinate:i})}}function lm(e){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lm(e)}function UP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function VP(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(i),!0).forEach(function(a){B2(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):UP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function NB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RB(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$k(a.key),a)}}function DB(e,t,i){return t&&RB(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zB(e,t,i){return t=m_(t),LB(e,Fk()?Reflect.construct(t,i||[],m_(e).constructor):t.apply(e,i))}function LB(e,t){if(t&&(lm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BB(e)}function BB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fk=function(){return!!e})()}function m_(e){return m_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},m_(e)}function FB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L2(e,t)}function L2(e,t){return L2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},L2(e,t)}function B2(e,t,i){return t=$k(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function $k(e){var t=$B(e,"string");return lm(t)=="symbol"?t:t+""}function $B(e,t){if(lm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(lm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var GP=1,qB=function(e){function t(){var i;NB(this,t);for(var a=arguments.length,d=new Array(a),y=0;y<a;y++)d[y]=arguments[y];return i=zB(this,t,[].concat(d)),B2(i,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),B2(i,"handleKeyDown",function(m){if(m.key==="Escape"){var l,M,E,N;i.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(M=i.props.coordinate)===null||M===void 0?void 0:M.x)!==null&&l!==void 0?l:0,y:(E=(N=i.props.coordinate)===null||N===void 0?void 0:N.y)!==null&&E!==void 0?E:0}})}}),i}return FB(t,e),DB(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>GP||Math.abs(a.height-this.state.lastBoundingBox.height)>GP)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,d;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((d=this.props.coordinate)===null||d===void 0?void 0:d.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,d=this.props,y=d.active,m=d.allowEscapeViewBox,l=d.animationDuration,M=d.animationEasing,E=d.children,N=d.coordinate,C=d.hasPayload,L=d.isAnimationActive,F=d.offset,H=d.position,G=d.reverseDirection,q=d.useTranslate3d,re=d.viewBox,ie=d.wrapperStyle,ne=kB({allowEscapeViewBox:m,coordinate:N,offsetTopLeft:F,position:H,reverseDirection:G,tooltipBox:this.state.lastBoundingBox,useTranslate3d:q,viewBox:re}),ce=ne.cssClasses,J=ne.cssProperties,ee=VP(VP({transition:L&&y?"transform ".concat(l,"ms ").concat(M):void 0},J),{},{pointerEvents:"none",visibility:!this.state.dismissed&&y&&C?"visible":"hidden",position:"absolute",top:0,left:0},ie);return $e.createElement("div",{tabIndex:-1,className:ce,style:ee,ref:function(ge){a.wrapperNode=ge}},E)}}])}(Fe.PureComponent),UB=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},km={isSsr:UB()};function cm(e){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cm(e)}function ZP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function HP(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ZP(Object(i),!0).forEach(function(a){mT(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ZP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function VB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GB(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Uk(a.key),a)}}function ZB(e,t,i){return t&&GB(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function HB(e,t,i){return t=g_(t),XB(e,qk()?Reflect.construct(t,i||[],g_(e).constructor):t.apply(e,i))}function XB(e,t){if(t&&(cm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WB(e)}function WB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qk=function(){return!!e})()}function g_(e){return g_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},g_(e)}function YB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F2(e,t)}function F2(e,t){return F2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},F2(e,t)}function mT(e,t,i){return t=Uk(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Uk(e){var t=KB(e,"string");return cm(t)=="symbol"?t:t+""}function KB(e,t){if(cm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(cm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function QB(e){return e.dataKey}function JB(e,t){return $e.isValidElement(e)?$e.cloneElement(e,t):typeof e=="function"?$e.createElement(e,t):$e.createElement(jB,t)}var Yc=function(e){function t(){return VB(this,t),HB(this,t,arguments)}return YB(t,e),ZB(t,[{key:"render",value:function(){var a=this,d=this.props,y=d.active,m=d.allowEscapeViewBox,l=d.animationDuration,M=d.animationEasing,E=d.content,N=d.coordinate,C=d.filterNull,L=d.isAnimationActive,F=d.offset,H=d.payload,G=d.payloadUniqBy,q=d.position,re=d.reverseDirection,ie=d.useTranslate3d,ne=d.viewBox,ce=d.wrapperStyle,J=H??[];C&&J.length&&(J=kk(H.filter(function(he){return he.value!=null&&(he.hide!==!0||a.props.includeHidden)}),G,QB));var ee=J.length>0;return $e.createElement(qB,{allowEscapeViewBox:m,animationDuration:l,animationEasing:M,isAnimationActive:L,active:y,coordinate:N,hasPayload:ee,offset:F,position:q,reverseDirection:re,useTranslate3d:ie,viewBox:ne,wrapperStyle:ce},JB(E,HP(HP({},this.props),{},{payload:J})))}}])}(Fe.PureComponent);mT(Yc,"displayName","Tooltip");mT(Yc,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!km.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var uw,XP;function eF(){if(XP)return uw;XP=1;var e=ru(),t=function(){return e.Date.now()};return uw=t,uw}var hw,WP;function tF(){if(WP)return hw;WP=1;var e=/\s/;function t(i){for(var a=i.length;a--&&e.test(i.charAt(a)););return a}return hw=t,hw}var dw,YP;function rF(){if(YP)return dw;YP=1;var e=tF(),t=/^\s+/;function i(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return dw=i,dw}var fw,KP;function Vk(){if(KP)return fw;KP=1;var e=rF(),t=yd(),i=Cm(),a=NaN,d=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,m=/^0o[0-7]+$/i,l=parseInt;function M(E){if(typeof E=="number")return E;if(i(E))return a;if(t(E)){var N=typeof E.valueOf=="function"?E.valueOf():E;E=t(N)?N+"":N}if(typeof E!="string")return E===0?E:+E;E=e(E);var C=y.test(E);return C||m.test(E)?l(E.slice(2),C?2:8):d.test(E)?a:+E}return fw=M,fw}var pw,QP;function nF(){if(QP)return pw;QP=1;var e=yd(),t=eF(),i=Vk(),a="Expected a function",d=Math.max,y=Math.min;function m(l,M,E){var N,C,L,F,H,G,q=0,re=!1,ie=!1,ne=!0;if(typeof l!="function")throw new TypeError(a);M=i(M)||0,e(E)&&(re=!!E.leading,ie="maxWait"in E,L=ie?d(i(E.maxWait)||0,M):L,ne="trailing"in E?!!E.trailing:ne);function ce(et){var st=N,rt=C;return N=C=void 0,q=et,F=l.apply(rt,st),F}function J(et){return q=et,H=setTimeout(ge,M),re?ce(et):F}function ee(et){var st=et-G,rt=et-q,Te=M-st;return ie?y(Te,L-rt):Te}function he(et){var st=et-G,rt=et-q;return G===void 0||st>=M||st<0||ie&&rt>=L}function ge(){var et=t();if(he(et))return Oe(et);H=setTimeout(ge,ee(et))}function Oe(et){return H=void 0,ne&&N?ce(et):(N=C=void 0,F)}function at(){H!==void 0&&clearTimeout(H),q=0,N=G=C=H=void 0}function ke(){return H===void 0?F:Oe(t())}function qe(){var et=t(),st=he(et);if(N=arguments,C=this,G=et,st){if(H===void 0)return J(G);if(ie)return clearTimeout(H),H=setTimeout(ge,M),ce(G)}return H===void 0&&(H=setTimeout(ge,M)),F}return qe.cancel=at,qe.flush=ke,qe}return pw=m,pw}var mw,JP;function iF(){if(JP)return mw;JP=1;var e=nF(),t=yd(),i="Expected a function";function a(d,y,m){var l=!0,M=!0;if(typeof d!="function")throw new TypeError(i);return t(m)&&(l="leading"in m?!!m.leading:l,M="trailing"in m?!!m.trailing:M),e(d,y,{leading:l,maxWait:y,trailing:M})}return mw=a,mw}var aF=iF();const Gk=Bn(aF);function sy(e){"@babel/helpers - typeof";return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sy(e)}function eE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function $v(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?eE(Object(i),!0).forEach(function(a){oF(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):eE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function oF(e,t,i){return t=sF(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function sF(e){var t=lF(e,"string");return sy(t)=="symbol"?t:t+""}function lF(e,t){if(sy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(sy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cF(e,t){return fF(e)||dF(e,t)||hF(e,t)||uF()}function uF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hF(e,t){if(e){if(typeof e=="string")return tE(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return tE(e,t)}}function tE(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function dF(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,d,y,m,l=[],M=!0,E=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(l.push(a.value),l.length!==t);M=!0);}catch(N){E=!0,d=N}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(E)throw d}}return l}}function fF(e){if(Array.isArray(e))return e}var pF=Fe.forwardRef(function(e,t){var i=e.aspect,a=e.initialDimension,d=a===void 0?{width:-1,height:-1}:a,y=e.width,m=y===void 0?"100%":y,l=e.height,M=l===void 0?"100%":l,E=e.minWidth,N=E===void 0?0:E,C=e.minHeight,L=e.maxHeight,F=e.children,H=e.debounce,G=H===void 0?0:H,q=e.id,re=e.className,ie=e.onResize,ne=e.style,ce=ne===void 0?{}:ne,J=Fe.useRef(null),ee=Fe.useRef();ee.current=ie,Fe.useImperativeHandle(t,function(){return Object.defineProperty(J.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),J.current},configurable:!0})});var he=Fe.useState({containerWidth:d.width,containerHeight:d.height}),ge=cF(he,2),Oe=ge[0],at=ge[1],ke=Fe.useCallback(function(et,st){at(function(rt){var Te=Math.round(et),Ge=Math.round(st);return rt.containerWidth===Te&&rt.containerHeight===Ge?rt:{containerWidth:Te,containerHeight:Ge}})},[]);Fe.useEffect(function(){var et=function(dt){var xe,We=dt[0].contentRect,lt=We.width,ct=We.height;ke(lt,ct),(xe=ee.current)===null||xe===void 0||xe.call(ee,lt,ct)};G>0&&(et=Gk(et,G,{trailing:!0,leading:!1}));var st=new ResizeObserver(et),rt=J.current.getBoundingClientRect(),Te=rt.width,Ge=rt.height;return ke(Te,Ge),st.observe(J.current),function(){st.disconnect()}},[ke,G]);var qe=Fe.useMemo(function(){var et=Oe.containerWidth,st=Oe.containerHeight;if(et<0||st<0)return null;Yu(wf(m)||wf(M),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,m,M),Yu(!i||i>0,"The aspect(%s) must be greater than zero.",i);var rt=wf(m)?et:m,Te=wf(M)?st:M;i&&i>0&&(rt?Te=rt/i:Te&&(rt=Te*i),L&&Te>L&&(Te=L)),Yu(rt>0||Te>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,rt,Te,m,M,N,C,i);var Ge=!Array.isArray(F)&&Wu(F.type).endsWith("Chart");return $e.Children.map(F,function(Ze){return $e.isValidElement(Ze)?Fe.cloneElement(Ze,$v({width:rt,height:Te},Ge?{style:$v({height:"100%",width:"100%",maxHeight:Te,maxWidth:rt},Ze.props.style)}:{})):Ze})},[i,F,M,L,C,N,Oe,m]);return $e.createElement("div",{id:q?"".concat(q):void 0,className:ln("recharts-responsive-container",re),style:$v($v({},ce),{},{width:m,height:M,minWidth:N,minHeight:C,maxHeight:L}),ref:J},qe)}),Zk=function(t){return null};Zk.displayName="Cell";function ly(e){"@babel/helpers - typeof";return ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ly(e)}function rE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function $2(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?rE(Object(i),!0).forEach(function(a){mF(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function mF(e,t,i){return t=gF(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function gF(e){var t=yF(e,"string");return ly(t)=="symbol"?t:t+""}function yF(e,t){if(ly(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(ly(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gp={widthCache:{},cacheCount:0},vF=2e3,_F={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},nE="recharts_measurement_span";function xF(e){var t=$2({},e);return Object.keys(t).forEach(function(i){t[i]||delete t[i]}),t}var Wg=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||km.isSsr)return{width:0,height:0};var a=xF(i),d=JSON.stringify({text:t,copyStyle:a});if(Gp.widthCache[d])return Gp.widthCache[d];try{var y=document.getElementById(nE);y||(y=document.createElement("span"),y.setAttribute("id",nE),y.setAttribute("aria-hidden","true"),document.body.appendChild(y));var m=$2($2({},_F),a);Object.assign(y.style,m),y.textContent="".concat(t);var l=y.getBoundingClientRect(),M={width:l.width,height:l.height};return Gp.widthCache[d]=M,++Gp.cacheCount>vF&&(Gp.cacheCount=0,Gp.widthCache={}),M}catch{return{width:0,height:0}}},bF=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function cy(e){"@babel/helpers - typeof";return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cy(e)}function y_(e,t){return AF(e)||TF(e,t)||SF(e,t)||wF()}function wF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SF(e,t){if(e){if(typeof e=="string")return iE(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return iE(e,t)}}function iE(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function TF(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,d,y,m,l=[],M=!0,E=!1;try{if(y=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;M=!1}else for(;!(M=(a=y.call(i)).done)&&(l.push(a.value),l.length!==t);M=!0);}catch(N){E=!0,d=N}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(E)throw d}}return l}}function AF(e){if(Array.isArray(e))return e}function MF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aE(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,PF(a.key),a)}}function jF(e,t,i){return t&&aE(e.prototype,t),i&&aE(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function PF(e){var t=EF(e,"string");return cy(t)=="symbol"?t:t+""}function EF(e,t){if(cy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(cy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var oE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CF=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,OF=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Hk={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},IF=Object.keys(Hk),Qp="NaN";function kF(e,t){return e*Hk[t]}var qv=function(){function e(t,i){MF(this,e),this.num=t,this.unit=i,this.num=t,this.unit=i,Number.isNaN(t)&&(this.unit=""),i!==""&&!CF.test(i)&&(this.num=NaN,this.unit=""),IF.includes(i)&&(this.num=kF(t,i),this.unit="px")}return jF(e,[{key:"add",value:function(i){return this.unit!==i.unit?new e(NaN,""):new e(this.num+i.num,this.unit)}},{key:"subtract",value:function(i){return this.unit!==i.unit?new e(NaN,""):new e(this.num-i.num,this.unit)}},{key:"multiply",value:function(i){return this.unit!==""&&i.unit!==""&&this.unit!==i.unit?new e(NaN,""):new e(this.num*i.num,this.unit||i.unit)}},{key:"divide",value:function(i){return this.unit!==""&&i.unit!==""&&this.unit!==i.unit?new e(NaN,""):new e(this.num/i.num,this.unit||i.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(i){var a,d=(a=OF.exec(i))!==null&&a!==void 0?a:[],y=y_(d,3),m=y[1],l=y[2];return new e(parseFloat(m),l??"")}}])}();function Xk(e){if(e.includes(Qp))return Qp;for(var t=e;t.includes("*")||t.includes("/");){var i,a=(i=oE.exec(t))!==null&&i!==void 0?i:[],d=y_(a,4),y=d[1],m=d[2],l=d[3],M=qv.parse(y??""),E=qv.parse(l??""),N=m==="*"?M.multiply(E):M.divide(E);if(N.isNaN())return Qp;t=t.replace(oE,N.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var C,L=(C=sE.exec(t))!==null&&C!==void 0?C:[],F=y_(L,4),H=F[1],G=F[2],q=F[3],re=qv.parse(H??""),ie=qv.parse(q??""),ne=G==="+"?re.add(ie):re.subtract(ie);if(ne.isNaN())return Qp;t=t.replace(sE,ne.toString())}return t}var lE=/\(([^()]*)\)/;function NF(e){for(var t=e;t.includes("(");){var i=lE.exec(t),a=y_(i,2),d=a[1];t=t.replace(lE,Xk(d))}return t}function RF(e){var t=e.replace(/\s+/g,"");return t=NF(t),t=Xk(t),t}function DF(e){try{return RF(e)}catch{return Qp}}function gw(e){var t=DF(e.slice(5,-1));return t===Qp?"":t}var zF=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],LF=["dx","dy","angle","className","breakAll"];function q2(){return q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},q2.apply(this,arguments)}function cE(e,t){if(e==null)return{};var i=BF(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function BF(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function uE(e,t){return UF(e)||qF(e,t)||$F(e,t)||FF()}function FF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $F(e,t){if(e){if(typeof e=="string")return hE(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return hE(e,t)}}function hE(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function qF(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,d,y,m,l=[],M=!0,E=!1;try{if(y=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;M=!1}else for(;!(M=(a=y.call(i)).done)&&(l.push(a.value),l.length!==t);M=!0);}catch(N){E=!0,d=N}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(E)throw d}}return l}}function UF(e){if(Array.isArray(e))return e}var Wk=/[ \f\n\r\t\v\u2028\u2029]+/,Yk=function(t){var i=t.children,a=t.breakAll,d=t.style;try{var y=[];Yr(i)||(a?y=i.toString().split(""):y=i.toString().split(Wk));var m=y.map(function(M){return{word:M,width:Wg(M,d).width}}),l=a?0:Wg(" ",d).width;return{wordsWithComputedWidth:m,spaceWidth:l}}catch{return null}},VF=function(t,i,a,d,y){var m=t.maxLines,l=t.children,M=t.style,E=t.breakAll,N=Dt(m),C=l,L=function(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return rt.reduce(function(Te,Ge){var Ze=Ge.word,dt=Ge.width,xe=Te[Te.length-1];if(xe&&(d==null||y||xe.width+dt+a<Number(d)))xe.words.push(Ze),xe.width+=dt+a;else{var We={words:[Ze],width:dt};Te.push(We)}return Te},[])},F=L(i),H=function(rt){return rt.reduce(function(Te,Ge){return Te.width>Ge.width?Te:Ge})};if(!N)return F;for(var G="…",q=function(rt){var Te=C.slice(0,rt),Ge=Yk({breakAll:E,style:M,children:Te+G}).wordsWithComputedWidth,Ze=L(Ge),dt=Ze.length>m||H(Ze).width>Number(d);return[dt,Ze]},re=0,ie=C.length-1,ne=0,ce;re<=ie&&ne<=C.length-1;){var J=Math.floor((re+ie)/2),ee=J-1,he=q(ee),ge=uE(he,2),Oe=ge[0],at=ge[1],ke=q(J),qe=uE(ke,1),et=qe[0];if(!Oe&&!et&&(re=J+1),Oe&&et&&(ie=J-1),!Oe&&et){ce=at;break}ne++}return ce||F},dE=function(t){var i=Yr(t)?[]:t.toString().split(Wk);return[{words:i}]},GF=function(t){var i=t.width,a=t.scaleToFit,d=t.children,y=t.style,m=t.breakAll,l=t.maxLines;if((i||a)&&!km.isSsr){var M,E,N=Yk({breakAll:m,children:d,style:y});if(N){var C=N.wordsWithComputedWidth,L=N.spaceWidth;M=C,E=L}else return dE(d);return VF({breakAll:m,children:d,maxLines:l,style:y},M,E,i,a)}return dE(d)},fE="#808080",v_=function(t){var i=t.x,a=i===void 0?0:i,d=t.y,y=d===void 0?0:d,m=t.lineHeight,l=m===void 0?"1em":m,M=t.capHeight,E=M===void 0?"0.71em":M,N=t.scaleToFit,C=N===void 0?!1:N,L=t.textAnchor,F=L===void 0?"start":L,H=t.verticalAnchor,G=H===void 0?"end":H,q=t.fill,re=q===void 0?fE:q,ie=cE(t,zF),ne=Fe.useMemo(function(){return GF({breakAll:ie.breakAll,children:ie.children,maxLines:ie.maxLines,scaleToFit:C,style:ie.style,width:ie.width})},[ie.breakAll,ie.children,ie.maxLines,C,ie.style,ie.width]),ce=ie.dx,J=ie.dy,ee=ie.angle,he=ie.className,ge=ie.breakAll,Oe=cE(ie,LF);if(!la(a)||!la(y))return null;var at=a+(Dt(ce)?ce:0),ke=y+(Dt(J)?J:0),qe;switch(G){case"start":qe=gw("calc(".concat(E,")"));break;case"middle":qe=gw("calc(".concat((ne.length-1)/2," * -").concat(l," + (").concat(E," / 2))"));break;default:qe=gw("calc(".concat(ne.length-1," * -").concat(l,")"));break}var et=[];if(C){var st=ne[0].width,rt=ie.width;et.push("scale(".concat((Dt(rt)?rt/st:1)/st,")"))}return ee&&et.push("rotate(".concat(ee,", ").concat(at,", ").concat(ke,")")),et.length&&(Oe.transform=et.join(" ")),$e.createElement("text",q2({},tn(Oe,!0),{x:at,y:ke,className:ln("recharts-text",he),textAnchor:F,fill:re.includes("url")?fE:re}),ne.map(function(Te,Ge){var Ze=Te.words.join(ge?"":" ");return $e.createElement("tspan",{x:at,dy:Ge===0?qe:l,key:"".concat(Ze,"-").concat(Ge)},Ze)}))};function md(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ZF(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gT(e){let t,i,a;e.length!==2?(t=md,i=(l,M)=>md(e(l),M),a=(l,M)=>e(l)-M):(t=e===md||e===ZF?e:HF,i=e,a=e);function d(l,M,E=0,N=l.length){if(E<N){if(t(M,M)!==0)return N;do{const C=E+N>>>1;i(l[C],M)<0?E=C+1:N=C}while(E<N)}return E}function y(l,M,E=0,N=l.length){if(E<N){if(t(M,M)!==0)return N;do{const C=E+N>>>1;i(l[C],M)<=0?E=C+1:N=C}while(E<N)}return E}function m(l,M,E=0,N=l.length){const C=d(l,M,E,N-1);return C>E&&a(l[C-1],M)>-a(l[C],M)?C-1:C}return{left:d,center:m,right:y}}function HF(){return 0}function Kk(e){return e===null?NaN:+e}function*XF(e,t){for(let i of e)i!=null&&(i=+i)>=i&&(yield i)}const WF=gT(md),Uy=WF.right;gT(Kk).center;class pE extends Map{constructor(t,i=QF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const[a,d]of t)this.set(a,d)}get(t){return super.get(mE(this,t))}has(t){return super.has(mE(this,t))}set(t,i){return super.set(YF(this,t),i)}delete(t){return super.delete(KF(this,t))}}function mE({_intern:e,_key:t},i){const a=t(i);return e.has(a)?e.get(a):i}function YF({_intern:e,_key:t},i){const a=t(i);return e.has(a)?e.get(a):(e.set(a,i),i)}function KF({_intern:e,_key:t},i){const a=t(i);return e.has(a)&&(i=e.get(a),e.delete(a)),i}function QF(e){return e!==null&&typeof e=="object"?e.valueOf():e}function JF(e=md){if(e===md)return Qk;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,i)=>{const a=e(t,i);return a||a===0?a:(e(i,i)===0)-(e(t,t)===0)}}function Qk(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const e8=Math.sqrt(50),t8=Math.sqrt(10),r8=Math.sqrt(2);function __(e,t,i){const a=(t-e)/Math.max(0,i),d=Math.floor(Math.log10(a)),y=a/Math.pow(10,d),m=y>=e8?10:y>=t8?5:y>=r8?2:1;let l,M,E;return d<0?(E=Math.pow(10,-d)/m,l=Math.round(e*E),M=Math.round(t*E),l/E<e&&++l,M/E>t&&--M,E=-E):(E=Math.pow(10,d)*m,l=Math.round(e/E),M=Math.round(t/E),l*E<e&&++l,M*E>t&&--M),M<l&&.5<=i&&i<2?__(e,t,i*2):[l,M,E]}function U2(e,t,i){if(t=+t,e=+e,i=+i,!(i>0))return[];if(e===t)return[e];const a=t<e,[d,y,m]=a?__(t,e,i):__(e,t,i);if(!(y>=d))return[];const l=y-d+1,M=new Array(l);if(a)if(m<0)for(let E=0;E<l;++E)M[E]=(y-E)/-m;else for(let E=0;E<l;++E)M[E]=(y-E)*m;else if(m<0)for(let E=0;E<l;++E)M[E]=(d+E)/-m;else for(let E=0;E<l;++E)M[E]=(d+E)*m;return M}function V2(e,t,i){return t=+t,e=+e,i=+i,__(e,t,i)[2]}function G2(e,t,i){t=+t,e=+e,i=+i;const a=t<e,d=a?V2(t,e,i):V2(e,t,i);return(a?-1:1)*(d<0?1/-d:d)}function gE(e,t){let i;for(const a of e)a!=null&&(i<a||i===void 0&&a>=a)&&(i=a);return i}function yE(e,t){let i;for(const a of e)a!=null&&(i>a||i===void 0&&a>=a)&&(i=a);return i}function Jk(e,t,i=0,a=1/0,d){if(t=Math.floor(t),i=Math.floor(Math.max(0,i)),a=Math.floor(Math.min(e.length-1,a)),!(i<=t&&t<=a))return e;for(d=d===void 0?Qk:JF(d);a>i;){if(a-i>600){const M=a-i+1,E=t-i+1,N=Math.log(M),C=.5*Math.exp(2*N/3),L=.5*Math.sqrt(N*C*(M-C)/M)*(E-M/2<0?-1:1),F=Math.max(i,Math.floor(t-E*C/M+L)),H=Math.min(a,Math.floor(t+(M-E)*C/M+L));Jk(e,t,F,H,d)}const y=e[t];let m=i,l=a;for(Dg(e,i,t),d(e[a],y)>0&&Dg(e,i,a);m<l;){for(Dg(e,m,l),++m,--l;d(e[m],y)<0;)++m;for(;d(e[l],y)>0;)--l}d(e[i],y)===0?Dg(e,i,l):(++l,Dg(e,l,a)),l<=t&&(i=l+1),t<=l&&(a=l-1)}return e}function Dg(e,t,i){const a=e[t];e[t]=e[i],e[i]=a}function n8(e,t,i){if(e=Float64Array.from(XF(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return yE(e);if(t>=1)return gE(e);var a,d=(a-1)*t,y=Math.floor(d),m=gE(Jk(e,y).subarray(0,y+1)),l=yE(e.subarray(y+1));return m+(l-m)*(d-y)}}function i8(e,t,i=Kk){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+i(e[0],0,e);if(t>=1)return+i(e[a-1],a-1,e);var a,d=(a-1)*t,y=Math.floor(d),m=+i(e[y],y,e),l=+i(e[y+1],y+1,e);return m+(l-m)*(d-y)}}function a8(e,t,i){e=+e,t=+t,i=(d=arguments.length)<2?(t=e,e=0,1):d<3?1:+i;for(var a=-1,d=Math.max(0,Math.ceil((t-e)/i))|0,y=new Array(d);++a<d;)y[a]=e+a*i;return y}function fl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ah(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Z2=Symbol("implicit");function yT(){var e=new pE,t=[],i=[],a=Z2;function d(y){let m=e.get(y);if(m===void 0){if(a!==Z2)return a;e.set(y,m=t.push(y)-1)}return i[m%i.length]}return d.domain=function(y){if(!arguments.length)return t.slice();t=[],e=new pE;for(const m of y)e.has(m)||e.set(m,t.push(m)-1);return d},d.range=function(y){return arguments.length?(i=Array.from(y),d):i.slice()},d.unknown=function(y){return arguments.length?(a=y,d):a},d.copy=function(){return yT(t,i).unknown(a)},fl.apply(d,arguments),d}function uy(){var e=yT().unknown(void 0),t=e.domain,i=e.range,a=0,d=1,y,m,l=!1,M=0,E=0,N=.5;delete e.unknown;function C(){var L=t().length,F=d<a,H=F?d:a,G=F?a:d;y=(G-H)/Math.max(1,L-M+E*2),l&&(y=Math.floor(y)),H+=(G-H-y*(L-M))*N,m=y*(1-M),l&&(H=Math.round(H),m=Math.round(m));var q=a8(L).map(function(re){return H+y*re});return i(F?q.reverse():q)}return e.domain=function(L){return arguments.length?(t(L),C()):t()},e.range=function(L){return arguments.length?([a,d]=L,a=+a,d=+d,C()):[a,d]},e.rangeRound=function(L){return[a,d]=L,a=+a,d=+d,l=!0,C()},e.bandwidth=function(){return m},e.step=function(){return y},e.round=function(L){return arguments.length?(l=!!L,C()):l},e.padding=function(L){return arguments.length?(M=Math.min(1,E=+L),C()):M},e.paddingInner=function(L){return arguments.length?(M=Math.min(1,L),C()):M},e.paddingOuter=function(L){return arguments.length?(E=+L,C()):E},e.align=function(L){return arguments.length?(N=Math.max(0,Math.min(1,L)),C()):N},e.copy=function(){return uy(t(),[a,d]).round(l).paddingInner(M).paddingOuter(E).align(N)},fl.apply(C(),arguments)}function eN(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return eN(t())},e}function Yg(){return eN(uy.apply(null,arguments).paddingInner(1))}function vT(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function tN(e,t){var i=Object.create(e.prototype);for(var a in t)i[a]=t[a];return i}function Vy(){}var hy=.7,x_=1/hy,rm="\\s*([+-]?\\d+)\\s*",dy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o8=/^#([0-9a-f]{3,8})$/,s8=new RegExp(`^rgb\\(${rm},${rm},${rm}\\)$`),l8=new RegExp(`^rgb\\(${Jc},${Jc},${Jc}\\)$`),c8=new RegExp(`^rgba\\(${rm},${rm},${rm},${dy}\\)$`),u8=new RegExp(`^rgba\\(${Jc},${Jc},${Jc},${dy}\\)$`),h8=new RegExp(`^hsl\\(${dy},${Jc},${Jc}\\)$`),d8=new RegExp(`^hsla\\(${dy},${Jc},${Jc},${dy}\\)$`),vE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vT(Vy,fy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_E,formatHex:_E,formatHex8:f8,formatHsl:p8,formatRgb:xE,toString:xE});function _E(){return this.rgb().formatHex()}function f8(){return this.rgb().formatHex8()}function p8(){return rN(this).formatHsl()}function xE(){return this.rgb().formatRgb()}function fy(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=o8.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?bE(t):i===3?new ns(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?Uv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?Uv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=s8.exec(e))?new ns(t[1],t[2],t[3],1):(t=l8.exec(e))?new ns(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=c8.exec(e))?Uv(t[1],t[2],t[3],t[4]):(t=u8.exec(e))?Uv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=h8.exec(e))?TE(t[1],t[2]/100,t[3]/100,1):(t=d8.exec(e))?TE(t[1],t[2]/100,t[3]/100,t[4]):vE.hasOwnProperty(e)?bE(vE[e]):e==="transparent"?new ns(NaN,NaN,NaN,0):null}function bE(e){return new ns(e>>16&255,e>>8&255,e&255,1)}function Uv(e,t,i,a){return a<=0&&(e=t=i=NaN),new ns(e,t,i,a)}function m8(e){return e instanceof Vy||(e=fy(e)),e?(e=e.rgb(),new ns(e.r,e.g,e.b,e.opacity)):new ns}function H2(e,t,i,a){return arguments.length===1?m8(e):new ns(e,t,i,a??1)}function ns(e,t,i,a){this.r=+e,this.g=+t,this.b=+i,this.opacity=+a}vT(ns,H2,tN(Vy,{brighter(e){return e=e==null?x_:Math.pow(x_,e),new ns(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?hy:Math.pow(hy,e),new ns(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ns(Ef(this.r),Ef(this.g),Ef(this.b),b_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wE,formatHex:wE,formatHex8:g8,formatRgb:SE,toString:SE}));function wE(){return`#${Sf(this.r)}${Sf(this.g)}${Sf(this.b)}`}function g8(){return`#${Sf(this.r)}${Sf(this.g)}${Sf(this.b)}${Sf((isNaN(this.opacity)?1:this.opacity)*255)}`}function SE(){const e=b_(this.opacity);return`${e===1?"rgb(":"rgba("}${Ef(this.r)}, ${Ef(this.g)}, ${Ef(this.b)}${e===1?")":`, ${e})`}`}function b_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ef(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sf(e){return e=Ef(e),(e<16?"0":"")+e.toString(16)}function TE(e,t,i,a){return a<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new uc(e,t,i,a)}function rN(e){if(e instanceof uc)return new uc(e.h,e.s,e.l,e.opacity);if(e instanceof Vy||(e=fy(e)),!e)return new uc;if(e instanceof uc)return e;e=e.rgb();var t=e.r/255,i=e.g/255,a=e.b/255,d=Math.min(t,i,a),y=Math.max(t,i,a),m=NaN,l=y-d,M=(y+d)/2;return l?(t===y?m=(i-a)/l+(i<a)*6:i===y?m=(a-t)/l+2:m=(t-i)/l+4,l/=M<.5?y+d:2-y-d,m*=60):l=M>0&&M<1?0:m,new uc(m,l,M,e.opacity)}function y8(e,t,i,a){return arguments.length===1?rN(e):new uc(e,t,i,a??1)}function uc(e,t,i,a){this.h=+e,this.s=+t,this.l=+i,this.opacity=+a}vT(uc,y8,tN(Vy,{brighter(e){return e=e==null?x_:Math.pow(x_,e),new uc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?hy:Math.pow(hy,e),new uc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*t,d=2*i-a;return new ns(yw(e>=240?e-240:e+120,d,a),yw(e,d,a),yw(e<120?e+240:e-120,d,a),this.opacity)},clamp(){return new uc(AE(this.h),Vv(this.s),Vv(this.l),b_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=b_(this.opacity);return`${e===1?"hsl(":"hsla("}${AE(this.h)}, ${Vv(this.s)*100}%, ${Vv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function AE(e){return e=(e||0)%360,e<0?e+360:e}function Vv(e){return Math.max(0,Math.min(1,e||0))}function yw(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const _T=e=>()=>e;function v8(e,t){return function(i){return e+i*t}}function _8(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(a){return Math.pow(e+a*t,i)}}function x8(e){return(e=+e)==1?nN:function(t,i){return i-t?_8(t,i,e):_T(isNaN(t)?i:t)}}function nN(e,t){var i=t-e;return i?v8(e,i):_T(isNaN(e)?t:e)}const ME=function e(t){var i=x8(t);function a(d,y){var m=i((d=H2(d)).r,(y=H2(y)).r),l=i(d.g,y.g),M=i(d.b,y.b),E=nN(d.opacity,y.opacity);return function(N){return d.r=m(N),d.g=l(N),d.b=M(N),d.opacity=E(N),d+""}}return a.gamma=e,a}(1);function b8(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,a=t.slice(),d;return function(y){for(d=0;d<i;++d)a[d]=e[d]*(1-y)+t[d]*y;return a}}function w8(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function S8(e,t){var i=t?t.length:0,a=e?Math.min(i,e.length):0,d=new Array(a),y=new Array(i),m;for(m=0;m<a;++m)d[m]=Nm(e[m],t[m]);for(;m<i;++m)y[m]=t[m];return function(l){for(m=0;m<a;++m)y[m]=d[m](l);return y}}function T8(e,t){var i=new Date;return e=+e,t=+t,function(a){return i.setTime(e*(1-a)+t*a),i}}function w_(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function A8(e,t){var i={},a={},d;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(d in t)d in e?i[d]=Nm(e[d],t[d]):a[d]=t[d];return function(y){for(d in i)a[d]=i[d](y);return a}}var X2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vw=new RegExp(X2.source,"g");function M8(e){return function(){return e}}function j8(e){return function(t){return e(t)+""}}function P8(e,t){var i=X2.lastIndex=vw.lastIndex=0,a,d,y,m=-1,l=[],M=[];for(e=e+"",t=t+"";(a=X2.exec(e))&&(d=vw.exec(t));)(y=d.index)>i&&(y=t.slice(i,y),l[m]?l[m]+=y:l[++m]=y),(a=a[0])===(d=d[0])?l[m]?l[m]+=d:l[++m]=d:(l[++m]=null,M.push({i:m,x:w_(a,d)})),i=vw.lastIndex;return i<t.length&&(y=t.slice(i),l[m]?l[m]+=y:l[++m]=y),l.length<2?M[0]?j8(M[0].x):M8(t):(t=M.length,function(E){for(var N=0,C;N<t;++N)l[(C=M[N]).i]=C.x(E);return l.join("")})}function Nm(e,t){var i=typeof t,a;return t==null||i==="boolean"?_T(t):(i==="number"?w_:i==="string"?(a=fy(t))?(t=a,ME):P8:t instanceof fy?ME:t instanceof Date?T8:w8(t)?b8:Array.isArray(t)?S8:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?A8:w_)(e,t)}function xT(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}function E8(e,t){t===void 0&&(t=e,e=Nm);for(var i=0,a=t.length-1,d=t[0],y=new Array(a<0?0:a);i<a;)y[i]=e(d,d=t[++i]);return function(m){var l=Math.max(0,Math.min(a-1,Math.floor(m*=a)));return y[l](m-l)}}function C8(e){return function(){return e}}function S_(e){return+e}var jE=[0,1];function Po(e){return e}function W2(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:C8(isNaN(t)?NaN:.5)}function O8(e,t){var i;return e>t&&(i=e,e=t,t=i),function(a){return Math.max(e,Math.min(t,a))}}function I8(e,t,i){var a=e[0],d=e[1],y=t[0],m=t[1];return d<a?(a=W2(d,a),y=i(m,y)):(a=W2(a,d),y=i(y,m)),function(l){return y(a(l))}}function k8(e,t,i){var a=Math.min(e.length,t.length)-1,d=new Array(a),y=new Array(a),m=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++m<a;)d[m]=W2(e[m],e[m+1]),y[m]=i(t[m],t[m+1]);return function(l){var M=Uy(e,l,1,a)-1;return y[M](d[M](l))}}function Gy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function mx(){var e=jE,t=jE,i=Nm,a,d,y,m=Po,l,M,E;function N(){var L=Math.min(e.length,t.length);return m!==Po&&(m=O8(e[0],e[L-1])),l=L>2?k8:I8,M=E=null,C}function C(L){return L==null||isNaN(L=+L)?y:(M||(M=l(e.map(a),t,i)))(a(m(L)))}return C.invert=function(L){return m(d((E||(E=l(t,e.map(a),w_)))(L)))},C.domain=function(L){return arguments.length?(e=Array.from(L,S_),N()):e.slice()},C.range=function(L){return arguments.length?(t=Array.from(L),N()):t.slice()},C.rangeRound=function(L){return t=Array.from(L),i=xT,N()},C.clamp=function(L){return arguments.length?(m=L?!0:Po,N()):m!==Po},C.interpolate=function(L){return arguments.length?(i=L,N()):i},C.unknown=function(L){return arguments.length?(y=L,C):y},function(L,F){return a=L,d=F,N()}}function bT(){return mx()(Po,Po)}function N8(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function T_(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,a=e.slice(0,i);return[a.length>1?a[0]+a.slice(2):a,+e.slice(i+1)]}function um(e){return e=T_(Math.abs(e)),e?e[1]:NaN}function R8(e,t){return function(i,a){for(var d=i.length,y=[],m=0,l=e[0],M=0;d>0&&l>0&&(M+l+1>a&&(l=Math.max(1,a-M)),y.push(i.substring(d-=l,d+l)),!((M+=l+1)>a));)l=e[m=(m+1)%e.length];return y.reverse().join(t)}}function D8(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var z8=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function py(e){if(!(t=z8.exec(e)))throw new Error("invalid format: "+e);var t;return new wT({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}py.prototype=wT.prototype;function wT(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}wT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function L8(e){e:for(var t=e.length,i=1,a=-1,d;i<t;++i)switch(e[i]){case".":a=d=i;break;case"0":a===0&&(a=i),d=i;break;default:if(!+e[i])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(d+1):e}var iN;function B8(e,t){var i=T_(e,t);if(!i)return e+"";var a=i[0],d=i[1],y=d-(iN=Math.max(-8,Math.min(8,Math.floor(d/3)))*3)+1,m=a.length;return y===m?a:y>m?a+new Array(y-m+1).join("0"):y>0?a.slice(0,y)+"."+a.slice(y):"0."+new Array(1-y).join("0")+T_(e,Math.max(0,t+y-1))[0]}function PE(e,t){var i=T_(e,t);if(!i)return e+"";var a=i[0],d=i[1];return d<0?"0."+new Array(-d).join("0")+a:a.length>d+1?a.slice(0,d+1)+"."+a.slice(d+1):a+new Array(d-a.length+2).join("0")}const EE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:N8,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>PE(e*100,t),r:PE,s:B8,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function CE(e){return e}var OE=Array.prototype.map,IE=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function F8(e){var t=e.grouping===void 0||e.thousands===void 0?CE:R8(OE.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",d=e.decimal===void 0?".":e.decimal+"",y=e.numerals===void 0?CE:D8(OE.call(e.numerals,String)),m=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",M=e.nan===void 0?"NaN":e.nan+"";function E(C){C=py(C);var L=C.fill,F=C.align,H=C.sign,G=C.symbol,q=C.zero,re=C.width,ie=C.comma,ne=C.precision,ce=C.trim,J=C.type;J==="n"?(ie=!0,J="g"):EE[J]||(ne===void 0&&(ne=12),ce=!0,J="g"),(q||L==="0"&&F==="=")&&(q=!0,L="0",F="=");var ee=G==="$"?i:G==="#"&&/[boxX]/.test(J)?"0"+J.toLowerCase():"",he=G==="$"?a:/[%p]/.test(J)?m:"",ge=EE[J],Oe=/[defgprs%]/.test(J);ne=ne===void 0?6:/[gprs]/.test(J)?Math.max(1,Math.min(21,ne)):Math.max(0,Math.min(20,ne));function at(ke){var qe=ee,et=he,st,rt,Te;if(J==="c")et=ge(ke)+et,ke="";else{ke=+ke;var Ge=ke<0||1/ke<0;if(ke=isNaN(ke)?M:ge(Math.abs(ke),ne),ce&&(ke=L8(ke)),Ge&&+ke==0&&H!=="+"&&(Ge=!1),qe=(Ge?H==="("?H:l:H==="-"||H==="("?"":H)+qe,et=(J==="s"?IE[8+iN/3]:"")+et+(Ge&&H==="("?")":""),Oe){for(st=-1,rt=ke.length;++st<rt;)if(Te=ke.charCodeAt(st),48>Te||Te>57){et=(Te===46?d+ke.slice(st+1):ke.slice(st))+et,ke=ke.slice(0,st);break}}}ie&&!q&&(ke=t(ke,1/0));var Ze=qe.length+ke.length+et.length,dt=Ze<re?new Array(re-Ze+1).join(L):"";switch(ie&&q&&(ke=t(dt+ke,dt.length?re-et.length:1/0),dt=""),F){case"<":ke=qe+ke+et+dt;break;case"=":ke=qe+dt+ke+et;break;case"^":ke=dt.slice(0,Ze=dt.length>>1)+qe+ke+et+dt.slice(Ze);break;default:ke=dt+qe+ke+et;break}return y(ke)}return at.toString=function(){return C+""},at}function N(C,L){var F=E((C=py(C),C.type="f",C)),H=Math.max(-8,Math.min(8,Math.floor(um(L)/3)))*3,G=Math.pow(10,-H),q=IE[8+H/3];return function(re){return F(G*re)+q}}return{format:E,formatPrefix:N}}var Gv,ST,aN;$8({thousands:",",grouping:[3],currency:["$",""]});function $8(e){return Gv=F8(e),ST=Gv.format,aN=Gv.formatPrefix,Gv}function q8(e){return Math.max(0,-um(Math.abs(e)))}function U8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(um(t)/3)))*3-um(Math.abs(e)))}function V8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,um(t)-um(e))+1}function oN(e,t,i,a){var d=G2(e,t,i),y;switch(a=py(a??",f"),a.type){case"s":{var m=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(y=U8(d,m))&&(a.precision=y),aN(a,m)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(y=V8(d,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=y-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(y=q8(d))&&(a.precision=y-(a.type==="%")*2);break}}return ST(a)}function _d(e){var t=e.domain;return e.ticks=function(i){var a=t();return U2(a[0],a[a.length-1],i??10)},e.tickFormat=function(i,a){var d=t();return oN(d[0],d[d.length-1],i??10,a)},e.nice=function(i){i==null&&(i=10);var a=t(),d=0,y=a.length-1,m=a[d],l=a[y],M,E,N=10;for(l<m&&(E=m,m=l,l=E,E=d,d=y,y=E);N-- >0;){if(E=V2(m,l,i),E===M)return a[d]=m,a[y]=l,t(a);if(E>0)m=Math.floor(m/E)*E,l=Math.ceil(l/E)*E;else if(E<0)m=Math.ceil(m*E)/E,l=Math.floor(l*E)/E;else break;M=E}return e},e}function A_(){var e=bT();return e.copy=function(){return Gy(e,A_())},fl.apply(e,arguments),_d(e)}function sN(e){var t;function i(a){return a==null||isNaN(a=+a)?t:a}return i.invert=i,i.domain=i.range=function(a){return arguments.length?(e=Array.from(a,S_),i):e.slice()},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return sN(e).unknown(t)},e=arguments.length?Array.from(e,S_):[0,1],_d(i)}function lN(e,t){e=e.slice();var i=0,a=e.length-1,d=e[i],y=e[a],m;return y<d&&(m=i,i=a,a=m,m=d,d=y,y=m),e[i]=t.floor(d),e[a]=t.ceil(y),e}function kE(e){return Math.log(e)}function NE(e){return Math.exp(e)}function G8(e){return-Math.log(-e)}function Z8(e){return-Math.exp(-e)}function H8(e){return isFinite(e)?+("1e"+e):e<0?0:e}function X8(e){return e===10?H8:e===Math.E?Math.exp:t=>Math.pow(e,t)}function W8(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function RE(e){return(t,i)=>-e(-t,i)}function TT(e){const t=e(kE,NE),i=t.domain;let a=10,d,y;function m(){return d=W8(a),y=X8(a),i()[0]<0?(d=RE(d),y=RE(y),e(G8,Z8)):e(kE,NE),t}return t.base=function(l){return arguments.length?(a=+l,m()):a},t.domain=function(l){return arguments.length?(i(l),m()):i()},t.ticks=l=>{const M=i();let E=M[0],N=M[M.length-1];const C=N<E;C&&([E,N]=[N,E]);let L=d(E),F=d(N),H,G;const q=l==null?10:+l;let re=[];if(!(a%1)&&F-L<q){if(L=Math.floor(L),F=Math.ceil(F),E>0){for(;L<=F;++L)for(H=1;H<a;++H)if(G=L<0?H/y(-L):H*y(L),!(G<E)){if(G>N)break;re.push(G)}}else for(;L<=F;++L)for(H=a-1;H>=1;--H)if(G=L>0?H/y(-L):H*y(L),!(G<E)){if(G>N)break;re.push(G)}re.length*2<q&&(re=U2(E,N,q))}else re=U2(L,F,Math.min(F-L,q)).map(y);return C?re.reverse():re},t.tickFormat=(l,M)=>{if(l==null&&(l=10),M==null&&(M=a===10?"s":","),typeof M!="function"&&(!(a%1)&&(M=py(M)).precision==null&&(M.trim=!0),M=ST(M)),l===1/0)return M;const E=Math.max(1,a*l/t.ticks().length);return N=>{let C=N/y(Math.round(d(N)));return C*a<a-.5&&(C*=a),C<=E?M(N):""}},t.nice=()=>i(lN(i(),{floor:l=>y(Math.floor(d(l))),ceil:l=>y(Math.ceil(d(l)))})),t}function cN(){const e=TT(mx()).domain([1,10]);return e.copy=()=>Gy(e,cN()).base(e.base()),fl.apply(e,arguments),e}function DE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function zE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function AT(e){var t=1,i=e(DE(t),zE(t));return i.constant=function(a){return arguments.length?e(DE(t=+a),zE(t)):t},_d(i)}function uN(){var e=AT(mx());return e.copy=function(){return Gy(e,uN()).constant(e.constant())},fl.apply(e,arguments)}function LE(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Y8(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function K8(e){return e<0?-e*e:e*e}function MT(e){var t=e(Po,Po),i=1;function a(){return i===1?e(Po,Po):i===.5?e(Y8,K8):e(LE(i),LE(1/i))}return t.exponent=function(d){return arguments.length?(i=+d,a()):i},_d(t)}function jT(){var e=MT(mx());return e.copy=function(){return Gy(e,jT()).exponent(e.exponent())},fl.apply(e,arguments),e}function Q8(){return jT.apply(null,arguments).exponent(.5)}function BE(e){return Math.sign(e)*e*e}function J8(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function hN(){var e=bT(),t=[0,1],i=!1,a;function d(y){var m=J8(e(y));return isNaN(m)?a:i?Math.round(m):m}return d.invert=function(y){return e.invert(BE(y))},d.domain=function(y){return arguments.length?(e.domain(y),d):e.domain()},d.range=function(y){return arguments.length?(e.range((t=Array.from(y,S_)).map(BE)),d):t.slice()},d.rangeRound=function(y){return d.range(y).round(!0)},d.round=function(y){return arguments.length?(i=!!y,d):i},d.clamp=function(y){return arguments.length?(e.clamp(y),d):e.clamp()},d.unknown=function(y){return arguments.length?(a=y,d):a},d.copy=function(){return hN(e.domain(),t).round(i).clamp(e.clamp()).unknown(a)},fl.apply(d,arguments),_d(d)}function dN(){var e=[],t=[],i=[],a;function d(){var m=0,l=Math.max(1,t.length);for(i=new Array(l-1);++m<l;)i[m-1]=i8(e,m/l);return y}function y(m){return m==null||isNaN(m=+m)?a:t[Uy(i,m)]}return y.invertExtent=function(m){var l=t.indexOf(m);return l<0?[NaN,NaN]:[l>0?i[l-1]:e[0],l<i.length?i[l]:e[e.length-1]]},y.domain=function(m){if(!arguments.length)return e.slice();e=[];for(let l of m)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(md),d()},y.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},y.unknown=function(m){return arguments.length?(a=m,y):a},y.quantiles=function(){return i.slice()},y.copy=function(){return dN().domain(e).range(t).unknown(a)},fl.apply(y,arguments)}function fN(){var e=0,t=1,i=1,a=[.5],d=[0,1],y;function m(M){return M!=null&&M<=M?d[Uy(a,M,0,i)]:y}function l(){var M=-1;for(a=new Array(i);++M<i;)a[M]=((M+1)*t-(M-i)*e)/(i+1);return m}return m.domain=function(M){return arguments.length?([e,t]=M,e=+e,t=+t,l()):[e,t]},m.range=function(M){return arguments.length?(i=(d=Array.from(M)).length-1,l()):d.slice()},m.invertExtent=function(M){var E=d.indexOf(M);return E<0?[NaN,NaN]:E<1?[e,a[0]]:E>=i?[a[i-1],t]:[a[E-1],a[E]]},m.unknown=function(M){return arguments.length&&(y=M),m},m.thresholds=function(){return a.slice()},m.copy=function(){return fN().domain([e,t]).range(d).unknown(y)},fl.apply(_d(m),arguments)}function pN(){var e=[.5],t=[0,1],i,a=1;function d(y){return y!=null&&y<=y?t[Uy(e,y,0,a)]:i}return d.domain=function(y){return arguments.length?(e=Array.from(y),a=Math.min(e.length,t.length-1),d):e.slice()},d.range=function(y){return arguments.length?(t=Array.from(y),a=Math.min(e.length,t.length-1),d):t.slice()},d.invertExtent=function(y){var m=t.indexOf(y);return[e[m-1],e[m]]},d.unknown=function(y){return arguments.length?(i=y,d):i},d.copy=function(){return pN().domain(e).range(t).unknown(i)},fl.apply(d,arguments)}const _w=new Date,xw=new Date;function ca(e,t,i,a){function d(y){return e(y=arguments.length===0?new Date:new Date(+y)),y}return d.floor=y=>(e(y=new Date(+y)),y),d.ceil=y=>(e(y=new Date(y-1)),t(y,1),e(y),y),d.round=y=>{const m=d(y),l=d.ceil(y);return y-m<l-y?m:l},d.offset=(y,m)=>(t(y=new Date(+y),m==null?1:Math.floor(m)),y),d.range=(y,m,l)=>{const M=[];if(y=d.ceil(y),l=l==null?1:Math.floor(l),!(y<m)||!(l>0))return M;let E;do M.push(E=new Date(+y)),t(y,l),e(y);while(E<y&&y<m);return M},d.filter=y=>ca(m=>{if(m>=m)for(;e(m),!y(m);)m.setTime(m-1)},(m,l)=>{if(m>=m)if(l<0)for(;++l<=0;)for(;t(m,-1),!y(m););else for(;--l>=0;)for(;t(m,1),!y(m););}),i&&(d.count=(y,m)=>(_w.setTime(+y),xw.setTime(+m),e(_w),e(xw),Math.floor(i(_w,xw))),d.every=y=>(y=Math.floor(y),!isFinite(y)||!(y>0)?null:y>1?d.filter(a?m=>a(m)%y===0:m=>d.count(0,m)%y===0):d)),d}const M_=ca(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);M_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ca(t=>{t.setTime(Math.floor(t/e)*e)},(t,i)=>{t.setTime(+t+i*e)},(t,i)=>(i-t)/e):M_);M_.range;const Gu=1e3,ll=Gu*60,Zu=ll*60,Ju=Zu*24,PT=Ju*7,FE=Ju*30,bw=Ju*365,Tf=ca(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Gu)},(e,t)=>(t-e)/Gu,e=>e.getUTCSeconds());Tf.range;const ET=ca(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Gu)},(e,t)=>{e.setTime(+e+t*ll)},(e,t)=>(t-e)/ll,e=>e.getMinutes());ET.range;const CT=ca(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ll)},(e,t)=>(t-e)/ll,e=>e.getUTCMinutes());CT.range;const OT=ca(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Gu-e.getMinutes()*ll)},(e,t)=>{e.setTime(+e+t*Zu)},(e,t)=>(t-e)/Zu,e=>e.getHours());OT.range;const IT=ca(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Zu)},(e,t)=>(t-e)/Zu,e=>e.getUTCHours());IT.range;const Zy=ca(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ll)/Ju,e=>e.getDate()-1);Zy.range;const gx=ca(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ju,e=>e.getUTCDate()-1);gx.range;const mN=ca(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ju,e=>Math.floor(e/Ju));mN.range;function Bf(e){return ca(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,i)=>{t.setDate(t.getDate()+i*7)},(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*ll)/PT)}const yx=Bf(0),j_=Bf(1),e$=Bf(2),t$=Bf(3),hm=Bf(4),r$=Bf(5),n$=Bf(6);yx.range;j_.range;e$.range;t$.range;hm.range;r$.range;n$.range;function Ff(e){return ca(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i*7)},(t,i)=>(i-t)/PT)}const vx=Ff(0),P_=Ff(1),i$=Ff(2),a$=Ff(3),dm=Ff(4),o$=Ff(5),s$=Ff(6);vx.range;P_.range;i$.range;a$.range;dm.range;o$.range;s$.range;const kT=ca(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());kT.range;const NT=ca(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());NT.range;const eh=ca(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());eh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ca(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,i)=>{t.setFullYear(t.getFullYear()+i*e)});eh.range;const th=ca(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());th.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ca(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i*e)});th.range;function gN(e,t,i,a,d,y){const m=[[Tf,1,Gu],[Tf,5,5*Gu],[Tf,15,15*Gu],[Tf,30,30*Gu],[y,1,ll],[y,5,5*ll],[y,15,15*ll],[y,30,30*ll],[d,1,Zu],[d,3,3*Zu],[d,6,6*Zu],[d,12,12*Zu],[a,1,Ju],[a,2,2*Ju],[i,1,PT],[t,1,FE],[t,3,3*FE],[e,1,bw]];function l(E,N,C){const L=N<E;L&&([E,N]=[N,E]);const F=C&&typeof C.range=="function"?C:M(E,N,C),H=F?F.range(E,+N+1):[];return L?H.reverse():H}function M(E,N,C){const L=Math.abs(N-E)/C,F=gT(([,,q])=>q).right(m,L);if(F===m.length)return e.every(G2(E/bw,N/bw,C));if(F===0)return M_.every(Math.max(G2(E,N,C),1));const[H,G]=m[L/m[F-1][2]<m[F][2]/L?F-1:F];return H.every(G)}return[l,M]}const[l$,c$]=gN(th,NT,vx,mN,IT,CT),[u$,h$]=gN(eh,kT,yx,Zy,OT,ET);function ww(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Sw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function zg(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}function d$(e){var t=e.dateTime,i=e.date,a=e.time,d=e.periods,y=e.days,m=e.shortDays,l=e.months,M=e.shortMonths,E=Lg(d),N=Bg(d),C=Lg(y),L=Bg(y),F=Lg(m),H=Bg(m),G=Lg(l),q=Bg(l),re=Lg(M),ie=Bg(M),ne={a:Ge,A:Ze,b:dt,B:xe,c:null,d:ZE,e:ZE,f:R$,g:G$,G:H$,H:I$,I:k$,j:N$,L:yN,m:D$,M:z$,p:We,q:lt,Q:WE,s:YE,S:L$,u:B$,U:F$,V:$$,w:q$,W:U$,x:null,X:null,y:V$,Y:Z$,Z:X$,"%":XE},ce={a:ct,A:jt,b:Gt,B:zt,c:null,d:HE,e:HE,f:Q$,g:lq,G:uq,H:W$,I:Y$,j:K$,L:_N,m:J$,M:eq,p:yr,q:ar,Q:WE,s:YE,S:tq,u:rq,U:nq,V:iq,w:aq,W:oq,x:null,X:null,y:sq,Y:cq,Z:hq,"%":XE},J={a:at,A:ke,b:qe,B:et,c:st,d:VE,e:VE,f:P$,g:UE,G:qE,H:GE,I:GE,j:T$,L:j$,m:S$,M:A$,p:Oe,q:w$,Q:C$,s:O$,S:M$,u:y$,U:v$,V:_$,w:g$,W:x$,x:rt,X:Te,y:UE,Y:qE,Z:b$,"%":E$};ne.x=ee(i,ne),ne.X=ee(a,ne),ne.c=ee(t,ne),ce.x=ee(i,ce),ce.X=ee(a,ce),ce.c=ee(t,ce);function ee(Ot,rr){return function(or){var _t=[],fr=-1,Jt=0,Kr=Ot.length,rn,Qr,Ii;for(or instanceof Date||(or=new Date(+or));++fr<Kr;)Ot.charCodeAt(fr)===37&&(_t.push(Ot.slice(Jt,fr)),(Qr=$E[rn=Ot.charAt(++fr)])!=null?rn=Ot.charAt(++fr):Qr=rn==="e"?" ":"0",(Ii=rr[rn])&&(rn=Ii(or,Qr)),_t.push(rn),Jt=fr+1);return _t.push(Ot.slice(Jt,fr)),_t.join("")}}function he(Ot,rr){return function(or){var _t=zg(1900,void 0,1),fr=ge(_t,Ot,or+="",0),Jt,Kr;if(fr!=or.length)return null;if("Q"in _t)return new Date(_t.Q);if("s"in _t)return new Date(_t.s*1e3+("L"in _t?_t.L:0));if(rr&&!("Z"in _t)&&(_t.Z=0),"p"in _t&&(_t.H=_t.H%12+_t.p*12),_t.m===void 0&&(_t.m="q"in _t?_t.q:0),"V"in _t){if(_t.V<1||_t.V>53)return null;"w"in _t||(_t.w=1),"Z"in _t?(Jt=Sw(zg(_t.y,0,1)),Kr=Jt.getUTCDay(),Jt=Kr>4||Kr===0?P_.ceil(Jt):P_(Jt),Jt=gx.offset(Jt,(_t.V-1)*7),_t.y=Jt.getUTCFullYear(),_t.m=Jt.getUTCMonth(),_t.d=Jt.getUTCDate()+(_t.w+6)%7):(Jt=ww(zg(_t.y,0,1)),Kr=Jt.getDay(),Jt=Kr>4||Kr===0?j_.ceil(Jt):j_(Jt),Jt=Zy.offset(Jt,(_t.V-1)*7),_t.y=Jt.getFullYear(),_t.m=Jt.getMonth(),_t.d=Jt.getDate()+(_t.w+6)%7)}else("W"in _t||"U"in _t)&&("w"in _t||(_t.w="u"in _t?_t.u%7:"W"in _t?1:0),Kr="Z"in _t?Sw(zg(_t.y,0,1)).getUTCDay():ww(zg(_t.y,0,1)).getDay(),_t.m=0,_t.d="W"in _t?(_t.w+6)%7+_t.W*7-(Kr+5)%7:_t.w+_t.U*7-(Kr+6)%7);return"Z"in _t?(_t.H+=_t.Z/100|0,_t.M+=_t.Z%100,Sw(_t)):ww(_t)}}function ge(Ot,rr,or,_t){for(var fr=0,Jt=rr.length,Kr=or.length,rn,Qr;fr<Jt;){if(_t>=Kr)return-1;if(rn=rr.charCodeAt(fr++),rn===37){if(rn=rr.charAt(fr++),Qr=J[rn in $E?rr.charAt(fr++):rn],!Qr||(_t=Qr(Ot,or,_t))<0)return-1}else if(rn!=or.charCodeAt(_t++))return-1}return _t}function Oe(Ot,rr,or){var _t=E.exec(rr.slice(or));return _t?(Ot.p=N.get(_t[0].toLowerCase()),or+_t[0].length):-1}function at(Ot,rr,or){var _t=F.exec(rr.slice(or));return _t?(Ot.w=H.get(_t[0].toLowerCase()),or+_t[0].length):-1}function ke(Ot,rr,or){var _t=C.exec(rr.slice(or));return _t?(Ot.w=L.get(_t[0].toLowerCase()),or+_t[0].length):-1}function qe(Ot,rr,or){var _t=re.exec(rr.slice(or));return _t?(Ot.m=ie.get(_t[0].toLowerCase()),or+_t[0].length):-1}function et(Ot,rr,or){var _t=G.exec(rr.slice(or));return _t?(Ot.m=q.get(_t[0].toLowerCase()),or+_t[0].length):-1}function st(Ot,rr,or){return ge(Ot,t,rr,or)}function rt(Ot,rr,or){return ge(Ot,i,rr,or)}function Te(Ot,rr,or){return ge(Ot,a,rr,or)}function Ge(Ot){return m[Ot.getDay()]}function Ze(Ot){return y[Ot.getDay()]}function dt(Ot){return M[Ot.getMonth()]}function xe(Ot){return l[Ot.getMonth()]}function We(Ot){return d[+(Ot.getHours()>=12)]}function lt(Ot){return 1+~~(Ot.getMonth()/3)}function ct(Ot){return m[Ot.getUTCDay()]}function jt(Ot){return y[Ot.getUTCDay()]}function Gt(Ot){return M[Ot.getUTCMonth()]}function zt(Ot){return l[Ot.getUTCMonth()]}function yr(Ot){return d[+(Ot.getUTCHours()>=12)]}function ar(Ot){return 1+~~(Ot.getUTCMonth()/3)}return{format:function(Ot){var rr=ee(Ot+="",ne);return rr.toString=function(){return Ot},rr},parse:function(Ot){var rr=he(Ot+="",!1);return rr.toString=function(){return Ot},rr},utcFormat:function(Ot){var rr=ee(Ot+="",ce);return rr.toString=function(){return Ot},rr},utcParse:function(Ot){var rr=he(Ot+="",!0);return rr.toString=function(){return Ot},rr}}}var $E={"-":"",_:" ",0:"0"},Ma=/^\s*\d+/,f$=/^%/,p$=/[\\^$*+?|[\]().{}]/g;function hn(e,t,i){var a=e<0?"-":"",d=(a?-e:e)+"",y=d.length;return a+(y<i?new Array(i-y+1).join(t)+d:d)}function m$(e){return e.replace(p$,"\\$&")}function Lg(e){return new RegExp("^(?:"+e.map(m$).join("|")+")","i")}function Bg(e){return new Map(e.map((t,i)=>[t.toLowerCase(),i]))}function g$(e,t,i){var a=Ma.exec(t.slice(i,i+1));return a?(e.w=+a[0],i+a[0].length):-1}function y$(e,t,i){var a=Ma.exec(t.slice(i,i+1));return a?(e.u=+a[0],i+a[0].length):-1}function v$(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.U=+a[0],i+a[0].length):-1}function _$(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.V=+a[0],i+a[0].length):-1}function x$(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.W=+a[0],i+a[0].length):-1}function qE(e,t,i){var a=Ma.exec(t.slice(i,i+4));return a?(e.y=+a[0],i+a[0].length):-1}function UE(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),i+a[0].length):-1}function b$(e,t,i){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),i+a[0].length):-1}function w$(e,t,i){var a=Ma.exec(t.slice(i,i+1));return a?(e.q=a[0]*3-3,i+a[0].length):-1}function S$(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.m=a[0]-1,i+a[0].length):-1}function VE(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.d=+a[0],i+a[0].length):-1}function T$(e,t,i){var a=Ma.exec(t.slice(i,i+3));return a?(e.m=0,e.d=+a[0],i+a[0].length):-1}function GE(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.H=+a[0],i+a[0].length):-1}function A$(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.M=+a[0],i+a[0].length):-1}function M$(e,t,i){var a=Ma.exec(t.slice(i,i+2));return a?(e.S=+a[0],i+a[0].length):-1}function j$(e,t,i){var a=Ma.exec(t.slice(i,i+3));return a?(e.L=+a[0],i+a[0].length):-1}function P$(e,t,i){var a=Ma.exec(t.slice(i,i+6));return a?(e.L=Math.floor(a[0]/1e3),i+a[0].length):-1}function E$(e,t,i){var a=f$.exec(t.slice(i,i+1));return a?i+a[0].length:-1}function C$(e,t,i){var a=Ma.exec(t.slice(i));return a?(e.Q=+a[0],i+a[0].length):-1}function O$(e,t,i){var a=Ma.exec(t.slice(i));return a?(e.s=+a[0],i+a[0].length):-1}function ZE(e,t){return hn(e.getDate(),t,2)}function I$(e,t){return hn(e.getHours(),t,2)}function k$(e,t){return hn(e.getHours()%12||12,t,2)}function N$(e,t){return hn(1+Zy.count(eh(e),e),t,3)}function yN(e,t){return hn(e.getMilliseconds(),t,3)}function R$(e,t){return yN(e,t)+"000"}function D$(e,t){return hn(e.getMonth()+1,t,2)}function z$(e,t){return hn(e.getMinutes(),t,2)}function L$(e,t){return hn(e.getSeconds(),t,2)}function B$(e){var t=e.getDay();return t===0?7:t}function F$(e,t){return hn(yx.count(eh(e)-1,e),t,2)}function vN(e){var t=e.getDay();return t>=4||t===0?hm(e):hm.ceil(e)}function $$(e,t){return e=vN(e),hn(hm.count(eh(e),e)+(eh(e).getDay()===4),t,2)}function q$(e){return e.getDay()}function U$(e,t){return hn(j_.count(eh(e)-1,e),t,2)}function V$(e,t){return hn(e.getFullYear()%100,t,2)}function G$(e,t){return e=vN(e),hn(e.getFullYear()%100,t,2)}function Z$(e,t){return hn(e.getFullYear()%1e4,t,4)}function H$(e,t){var i=e.getDay();return e=i>=4||i===0?hm(e):hm.ceil(e),hn(e.getFullYear()%1e4,t,4)}function X$(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+hn(t/60|0,"0",2)+hn(t%60,"0",2)}function HE(e,t){return hn(e.getUTCDate(),t,2)}function W$(e,t){return hn(e.getUTCHours(),t,2)}function Y$(e,t){return hn(e.getUTCHours()%12||12,t,2)}function K$(e,t){return hn(1+gx.count(th(e),e),t,3)}function _N(e,t){return hn(e.getUTCMilliseconds(),t,3)}function Q$(e,t){return _N(e,t)+"000"}function J$(e,t){return hn(e.getUTCMonth()+1,t,2)}function eq(e,t){return hn(e.getUTCMinutes(),t,2)}function tq(e,t){return hn(e.getUTCSeconds(),t,2)}function rq(e){var t=e.getUTCDay();return t===0?7:t}function nq(e,t){return hn(vx.count(th(e)-1,e),t,2)}function xN(e){var t=e.getUTCDay();return t>=4||t===0?dm(e):dm.ceil(e)}function iq(e,t){return e=xN(e),hn(dm.count(th(e),e)+(th(e).getUTCDay()===4),t,2)}function aq(e){return e.getUTCDay()}function oq(e,t){return hn(P_.count(th(e)-1,e),t,2)}function sq(e,t){return hn(e.getUTCFullYear()%100,t,2)}function lq(e,t){return e=xN(e),hn(e.getUTCFullYear()%100,t,2)}function cq(e,t){return hn(e.getUTCFullYear()%1e4,t,4)}function uq(e,t){var i=e.getUTCDay();return e=i>=4||i===0?dm(e):dm.ceil(e),hn(e.getUTCFullYear()%1e4,t,4)}function hq(){return"+0000"}function XE(){return"%"}function WE(e){return+e}function YE(e){return Math.floor(+e/1e3)}var Zp,bN,wN;dq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dq(e){return Zp=d$(e),bN=Zp.format,Zp.parse,wN=Zp.utcFormat,Zp.utcParse,Zp}function fq(e){return new Date(e)}function pq(e){return e instanceof Date?+e:+new Date(+e)}function RT(e,t,i,a,d,y,m,l,M,E){var N=bT(),C=N.invert,L=N.domain,F=E(".%L"),H=E(":%S"),G=E("%I:%M"),q=E("%I %p"),re=E("%a %d"),ie=E("%b %d"),ne=E("%B"),ce=E("%Y");function J(ee){return(M(ee)<ee?F:l(ee)<ee?H:m(ee)<ee?G:y(ee)<ee?q:a(ee)<ee?d(ee)<ee?re:ie:i(ee)<ee?ne:ce)(ee)}return N.invert=function(ee){return new Date(C(ee))},N.domain=function(ee){return arguments.length?L(Array.from(ee,pq)):L().map(fq)},N.ticks=function(ee){var he=L();return e(he[0],he[he.length-1],ee??10)},N.tickFormat=function(ee,he){return he==null?J:E(he)},N.nice=function(ee){var he=L();return(!ee||typeof ee.range!="function")&&(ee=t(he[0],he[he.length-1],ee??10)),ee?L(lN(he,ee)):N},N.copy=function(){return Gy(N,RT(e,t,i,a,d,y,m,l,M,E))},N}function mq(){return fl.apply(RT(u$,h$,eh,kT,yx,Zy,OT,ET,Tf,bN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function gq(){return fl.apply(RT(l$,c$,th,NT,vx,gx,IT,CT,Tf,wN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function _x(){var e=0,t=1,i,a,d,y,m=Po,l=!1,M;function E(C){return C==null||isNaN(C=+C)?M:m(d===0?.5:(C=(y(C)-i)*d,l?Math.max(0,Math.min(1,C)):C))}E.domain=function(C){return arguments.length?([e,t]=C,i=y(e=+e),a=y(t=+t),d=i===a?0:1/(a-i),E):[e,t]},E.clamp=function(C){return arguments.length?(l=!!C,E):l},E.interpolator=function(C){return arguments.length?(m=C,E):m};function N(C){return function(L){var F,H;return arguments.length?([F,H]=L,m=C(F,H),E):[m(0),m(1)]}}return E.range=N(Nm),E.rangeRound=N(xT),E.unknown=function(C){return arguments.length?(M=C,E):M},function(C){return y=C,i=C(e),a=C(t),d=i===a?0:1/(a-i),E}}function xd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function SN(){var e=_d(_x()(Po));return e.copy=function(){return xd(e,SN())},ah.apply(e,arguments)}function TN(){var e=TT(_x()).domain([1,10]);return e.copy=function(){return xd(e,TN()).base(e.base())},ah.apply(e,arguments)}function AN(){var e=AT(_x());return e.copy=function(){return xd(e,AN()).constant(e.constant())},ah.apply(e,arguments)}function DT(){var e=MT(_x());return e.copy=function(){return xd(e,DT()).exponent(e.exponent())},ah.apply(e,arguments)}function yq(){return DT.apply(null,arguments).exponent(.5)}function MN(){var e=[],t=Po;function i(a){if(a!=null&&!isNaN(a=+a))return t((Uy(e,a,1)-1)/(e.length-1))}return i.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let d of a)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(md),i},i.interpolator=function(a){return arguments.length?(t=a,i):t},i.range=function(){return e.map((a,d)=>t(d/(e.length-1)))},i.quantiles=function(a){return Array.from({length:a+1},(d,y)=>n8(e,y/a))},i.copy=function(){return MN(t).domain(e)},ah.apply(i,arguments)}function xx(){var e=0,t=.5,i=1,a=1,d,y,m,l,M,E=Po,N,C=!1,L;function F(G){return isNaN(G=+G)?L:(G=.5+((G=+N(G))-y)*(a*G<a*y?l:M),E(C?Math.max(0,Math.min(1,G)):G))}F.domain=function(G){return arguments.length?([e,t,i]=G,d=N(e=+e),y=N(t=+t),m=N(i=+i),l=d===y?0:.5/(y-d),M=y===m?0:.5/(m-y),a=y<d?-1:1,F):[e,t,i]},F.clamp=function(G){return arguments.length?(C=!!G,F):C},F.interpolator=function(G){return arguments.length?(E=G,F):E};function H(G){return function(q){var re,ie,ne;return arguments.length?([re,ie,ne]=q,E=E8(G,[re,ie,ne]),F):[E(0),E(.5),E(1)]}}return F.range=H(Nm),F.rangeRound=H(xT),F.unknown=function(G){return arguments.length?(L=G,F):L},function(G){return N=G,d=G(e),y=G(t),m=G(i),l=d===y?0:.5/(y-d),M=y===m?0:.5/(m-y),a=y<d?-1:1,F}}function jN(){var e=_d(xx()(Po));return e.copy=function(){return xd(e,jN())},ah.apply(e,arguments)}function PN(){var e=TT(xx()).domain([.1,1,10]);return e.copy=function(){return xd(e,PN()).base(e.base())},ah.apply(e,arguments)}function EN(){var e=AT(xx());return e.copy=function(){return xd(e,EN()).constant(e.constant())},ah.apply(e,arguments)}function zT(){var e=MT(xx());return e.copy=function(){return xd(e,zT()).exponent(e.exponent())},ah.apply(e,arguments)}function vq(){return zT.apply(null,arguments).exponent(.5)}const KE=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:uy,scaleDiverging:jN,scaleDivergingLog:PN,scaleDivergingPow:zT,scaleDivergingSqrt:vq,scaleDivergingSymlog:EN,scaleIdentity:sN,scaleImplicit:Z2,scaleLinear:A_,scaleLog:cN,scaleOrdinal:yT,scalePoint:Yg,scalePow:jT,scaleQuantile:dN,scaleQuantize:fN,scaleRadial:hN,scaleSequential:SN,scaleSequentialLog:TN,scaleSequentialPow:DT,scaleSequentialQuantile:MN,scaleSequentialSqrt:yq,scaleSequentialSymlog:AN,scaleSqrt:Q8,scaleSymlog:uN,scaleThreshold:pN,scaleTime:mq,scaleUtc:gq,tickFormat:oN},Symbol.toStringTag,{value:"Module"}));var Tw,QE;function CN(){if(QE)return Tw;QE=1;var e=Cm();function t(i,a,d){for(var y=-1,m=i.length;++y<m;){var l=i[y],M=a(l);if(M!=null&&(E===void 0?M===M&&!e(M):d(M,E)))var E=M,N=l}return N}return Tw=t,Tw}var Aw,JE;function _q(){if(JE)return Aw;JE=1;function e(t,i){return t>i}return Aw=e,Aw}var Mw,eC;function xq(){if(eC)return Mw;eC=1;var e=CN(),t=_q(),i=Im();function a(d){return d&&d.length?e(d,i,t):void 0}return Mw=a,Mw}var bq=xq();const bx=Bn(bq);var jw,tC;function wq(){if(tC)return jw;tC=1;function e(t,i){return t<i}return jw=e,jw}var Pw,rC;function Sq(){if(rC)return Pw;rC=1;var e=CN(),t=wq(),i=Im();function a(d){return d&&d.length?e(d,i,t):void 0}return Pw=a,Pw}var Tq=Sq();const wx=Bn(Tq);var Ew,nC;function Aq(){if(nC)return Ew;nC=1;var e=JS(),t=vd(),i=Lk(),a=is();function d(y,m){var l=a(y)?e:i;return l(y,t(m,3))}return Ew=d,Ew}var Cw,iC;function Mq(){if(iC)return Cw;iC=1;var e=Dk(),t=Aq();function i(a,d){return e(t(a,d),1)}return Cw=i,Cw}var jq=Mq();const Pq=Bn(jq);var Ow,aC;function Eq(){if(aC)return Ow;aC=1;var e=dT();function t(i,a){return e(i,a)}return Ow=t,Ow}var Cq=Eq();const Sx=Bn(Cq);var Rm=1e9,Oq={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},BT,li=!0,dl="[DecimalError] ",Cf=dl+"Invalid argument: ",LT=dl+"Exponent out of range: ",Dm=Math.floor,bf=Math.pow,Iq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,As,Aa=1e7,Qn=7,ON=9007199254740991,E_=Dm(ON/Qn),Yt={};Yt.absoluteValue=Yt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Yt.comparedTo=Yt.cmp=function(e){var t,i,a,d,y=this;if(e=new y.constructor(e),y.s!==e.s)return y.s||-e.s;if(y.e!==e.e)return y.e>e.e^y.s<0?1:-1;for(a=y.d.length,d=e.d.length,t=0,i=a<d?a:d;t<i;++t)if(y.d[t]!==e.d[t])return y.d[t]>e.d[t]^y.s<0?1:-1;return a===d?0:a>d^y.s<0?1:-1};Yt.decimalPlaces=Yt.dp=function(){var e=this,t=e.d.length-1,i=(t-e.e)*Qn;if(t=e.d[t],t)for(;t%10==0;t/=10)i--;return i<0?0:i};Yt.dividedBy=Yt.div=function(e){return Ku(this,new this.constructor(e))};Yt.dividedToIntegerBy=Yt.idiv=function(e){var t=this,i=t.constructor;return Ln(Ku(t,new i(e),0,1),i.precision)};Yt.equals=Yt.eq=function(e){return!this.cmp(e)};Yt.exponent=function(){return Wi(this)};Yt.greaterThan=Yt.gt=function(e){return this.cmp(e)>0};Yt.greaterThanOrEqualTo=Yt.gte=function(e){return this.cmp(e)>=0};Yt.isInteger=Yt.isint=function(){return this.e>this.d.length-2};Yt.isNegative=Yt.isneg=function(){return this.s<0};Yt.isPositive=Yt.ispos=function(){return this.s>0};Yt.isZero=function(){return this.s===0};Yt.lessThan=Yt.lt=function(e){return this.cmp(e)<0};Yt.lessThanOrEqualTo=Yt.lte=function(e){return this.cmp(e)<1};Yt.logarithm=Yt.log=function(e){var t,i=this,a=i.constructor,d=a.precision,y=d+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(As))throw Error(dl+"NaN");if(i.s<1)throw Error(dl+(i.s?"NaN":"-Infinity"));return i.eq(As)?new a(0):(li=!1,t=Ku(my(i,y),my(e,y),y),li=!0,Ln(t,d))};Yt.minus=Yt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?NN(t,e):IN(t,(e.s=-e.s,e))};Yt.modulo=Yt.mod=function(e){var t,i=this,a=i.constructor,d=a.precision;if(e=new a(e),!e.s)throw Error(dl+"NaN");return i.s?(li=!1,t=Ku(i,e,0,1).times(e),li=!0,i.minus(t)):Ln(new a(i),d)};Yt.naturalExponential=Yt.exp=function(){return kN(this)};Yt.naturalLogarithm=Yt.ln=function(){return my(this)};Yt.negated=Yt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Yt.plus=Yt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?IN(t,e):NN(t,(e.s=-e.s,e))};Yt.precision=Yt.sd=function(e){var t,i,a,d=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Cf+e);if(t=Wi(d)+1,a=d.d.length-1,i=a*Qn+1,a=d.d[a],a){for(;a%10==0;a/=10)i--;for(a=d.d[0];a>=10;a/=10)i++}return e&&t>i?t:i};Yt.squareRoot=Yt.sqrt=function(){var e,t,i,a,d,y,m,l=this,M=l.constructor;if(l.s<1){if(!l.s)return new M(0);throw Error(dl+"NaN")}for(e=Wi(l),li=!1,d=Math.sqrt(+l),d==0||d==1/0?(t=Kc(l.d),(t.length+e)%2==0&&(t+="0"),d=Math.sqrt(t),e=Dm((e+1)/2)-(e<0||e%2),d==1/0?t="5e"+e:(t=d.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new M(t)):a=new M(d.toString()),i=M.precision,d=m=i+3;;)if(y=a,a=y.plus(Ku(l,y,m+2)).times(.5),Kc(y.d).slice(0,m)===(t=Kc(a.d)).slice(0,m)){if(t=t.slice(m-3,m+1),d==m&&t=="4999"){if(Ln(y,i+1,0),y.times(y).eq(l)){a=y;break}}else if(t!="9999")break;m+=4}return li=!0,Ln(a,i)};Yt.times=Yt.mul=function(e){var t,i,a,d,y,m,l,M,E,N=this,C=N.constructor,L=N.d,F=(e=new C(e)).d;if(!N.s||!e.s)return new C(0);for(e.s*=N.s,i=N.e+e.e,M=L.length,E=F.length,M<E&&(y=L,L=F,F=y,m=M,M=E,E=m),y=[],m=M+E,a=m;a--;)y.push(0);for(a=E;--a>=0;){for(t=0,d=M+a;d>a;)l=y[d]+F[a]*L[d-a-1]+t,y[d--]=l%Aa|0,t=l/Aa|0;y[d]=(y[d]+t)%Aa|0}for(;!y[--m];)y.pop();return t?++i:y.shift(),e.d=y,e.e=i,li?Ln(e,C.precision):e};Yt.toDecimalPlaces=Yt.todp=function(e,t){var i=this,a=i.constructor;return i=new a(i),e===void 0?i:(tu(e,0,Rm),t===void 0?t=a.rounding:tu(t,0,8),Ln(i,e+Wi(i)+1,t))};Yt.toExponential=function(e,t){var i,a=this,d=a.constructor;return e===void 0?i=kf(a,!0):(tu(e,0,Rm),t===void 0?t=d.rounding:tu(t,0,8),a=Ln(new d(a),e+1,t),i=kf(a,!0,e+1)),i};Yt.toFixed=function(e,t){var i,a,d=this,y=d.constructor;return e===void 0?kf(d):(tu(e,0,Rm),t===void 0?t=y.rounding:tu(t,0,8),a=Ln(new y(d),e+Wi(d)+1,t),i=kf(a.abs(),!1,e+Wi(a)+1),d.isneg()&&!d.isZero()?"-"+i:i)};Yt.toInteger=Yt.toint=function(){var e=this,t=e.constructor;return Ln(new t(e),Wi(e)+1,t.rounding)};Yt.toNumber=function(){return+this};Yt.toPower=Yt.pow=function(e){var t,i,a,d,y,m,l=this,M=l.constructor,E=12,N=+(e=new M(e));if(!e.s)return new M(As);if(l=new M(l),!l.s){if(e.s<1)throw Error(dl+"Infinity");return l}if(l.eq(As))return l;if(a=M.precision,e.eq(As))return Ln(l,a);if(t=e.e,i=e.d.length-1,m=t>=i,y=l.s,m){if((i=N<0?-N:N)<=ON){for(d=new M(As),t=Math.ceil(a/Qn+4),li=!1;i%2&&(d=d.times(l),sC(d.d,t)),i=Dm(i/2),i!==0;)l=l.times(l),sC(l.d,t);return li=!0,e.s<0?new M(As).div(d):Ln(d,a)}}else if(y<0)throw Error(dl+"NaN");return y=y<0&&e.d[Math.max(t,i)]&1?-1:1,l.s=1,li=!1,d=e.times(my(l,a+E)),li=!0,d=kN(d),d.s=y,d};Yt.toPrecision=function(e,t){var i,a,d=this,y=d.constructor;return e===void 0?(i=Wi(d),a=kf(d,i<=y.toExpNeg||i>=y.toExpPos)):(tu(e,1,Rm),t===void 0?t=y.rounding:tu(t,0,8),d=Ln(new y(d),e,t),i=Wi(d),a=kf(d,e<=i||i<=y.toExpNeg,e)),a};Yt.toSignificantDigits=Yt.tosd=function(e,t){var i=this,a=i.constructor;return e===void 0?(e=a.precision,t=a.rounding):(tu(e,1,Rm),t===void 0?t=a.rounding:tu(t,0,8)),Ln(new a(i),e,t)};Yt.toString=Yt.valueOf=Yt.val=Yt.toJSON=Yt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Wi(e),i=e.constructor;return kf(e,t<=i.toExpNeg||t>=i.toExpPos)};function IN(e,t){var i,a,d,y,m,l,M,E,N=e.constructor,C=N.precision;if(!e.s||!t.s)return t.s||(t=new N(e)),li?Ln(t,C):t;if(M=e.d,E=t.d,m=e.e,d=t.e,M=M.slice(),y=m-d,y){for(y<0?(a=M,y=-y,l=E.length):(a=E,d=m,l=M.length),m=Math.ceil(C/Qn),l=m>l?m+1:l+1,y>l&&(y=l,a.length=1),a.reverse();y--;)a.push(0);a.reverse()}for(l=M.length,y=E.length,l-y<0&&(y=l,a=E,E=M,M=a),i=0;y;)i=(M[--y]=M[y]+E[y]+i)/Aa|0,M[y]%=Aa;for(i&&(M.unshift(i),++d),l=M.length;M[--l]==0;)M.pop();return t.d=M,t.e=d,li?Ln(t,C):t}function tu(e,t,i){if(e!==~~e||e<t||e>i)throw Error(Cf+e)}function Kc(e){var t,i,a,d=e.length-1,y="",m=e[0];if(d>0){for(y+=m,t=1;t<d;t++)a=e[t]+"",i=Qn-a.length,i&&(y+=ud(i)),y+=a;m=e[t],a=m+"",i=Qn-a.length,i&&(y+=ud(i))}else if(m===0)return"0";for(;m%10===0;)m/=10;return y+m}var Ku=function(){function e(a,d){var y,m=0,l=a.length;for(a=a.slice();l--;)y=a[l]*d+m,a[l]=y%Aa|0,m=y/Aa|0;return m&&a.unshift(m),a}function t(a,d,y,m){var l,M;if(y!=m)M=y>m?1:-1;else for(l=M=0;l<y;l++)if(a[l]!=d[l]){M=a[l]>d[l]?1:-1;break}return M}function i(a,d,y){for(var m=0;y--;)a[y]-=m,m=a[y]<d[y]?1:0,a[y]=m*Aa+a[y]-d[y];for(;!a[0]&&a.length>1;)a.shift()}return function(a,d,y,m){var l,M,E,N,C,L,F,H,G,q,re,ie,ne,ce,J,ee,he,ge,Oe=a.constructor,at=a.s==d.s?1:-1,ke=a.d,qe=d.d;if(!a.s)return new Oe(a);if(!d.s)throw Error(dl+"Division by zero");for(M=a.e-d.e,he=qe.length,J=ke.length,F=new Oe(at),H=F.d=[],E=0;qe[E]==(ke[E]||0);)++E;if(qe[E]>(ke[E]||0)&&--M,y==null?ie=y=Oe.precision:m?ie=y+(Wi(a)-Wi(d))+1:ie=y,ie<0)return new Oe(0);if(ie=ie/Qn+2|0,E=0,he==1)for(N=0,qe=qe[0],ie++;(E<J||N)&&ie--;E++)ne=N*Aa+(ke[E]||0),H[E]=ne/qe|0,N=ne%qe|0;else{for(N=Aa/(qe[0]+1)|0,N>1&&(qe=e(qe,N),ke=e(ke,N),he=qe.length,J=ke.length),ce=he,G=ke.slice(0,he),q=G.length;q<he;)G[q++]=0;ge=qe.slice(),ge.unshift(0),ee=qe[0],qe[1]>=Aa/2&&++ee;do N=0,l=t(qe,G,he,q),l<0?(re=G[0],he!=q&&(re=re*Aa+(G[1]||0)),N=re/ee|0,N>1?(N>=Aa&&(N=Aa-1),C=e(qe,N),L=C.length,q=G.length,l=t(C,G,L,q),l==1&&(N--,i(C,he<L?ge:qe,L))):(N==0&&(l=N=1),C=qe.slice()),L=C.length,L<q&&C.unshift(0),i(G,C,q),l==-1&&(q=G.length,l=t(qe,G,he,q),l<1&&(N++,i(G,he<q?ge:qe,q))),q=G.length):l===0&&(N++,G=[0]),H[E++]=N,l&&G[0]?G[q++]=ke[ce]||0:(G=[ke[ce]],q=1);while((ce++<J||G[0]!==void 0)&&ie--)}return H[0]||H.shift(),F.e=M,Ln(F,m?y+Wi(F)+1:y)}}();function kN(e,t){var i,a,d,y,m,l,M=0,E=0,N=e.constructor,C=N.precision;if(Wi(e)>16)throw Error(LT+Wi(e));if(!e.s)return new N(As);for(li=!1,l=C,m=new N(.03125);e.abs().gte(.1);)e=e.times(m),E+=5;for(a=Math.log(bf(2,E))/Math.LN10*2+5|0,l+=a,i=d=y=new N(As),N.precision=l;;){if(d=Ln(d.times(e),l),i=i.times(++M),m=y.plus(Ku(d,i,l)),Kc(m.d).slice(0,l)===Kc(y.d).slice(0,l)){for(;E--;)y=Ln(y.times(y),l);return N.precision=C,t==null?(li=!0,Ln(y,C)):y}y=m}}function Wi(e){for(var t=e.e*Qn,i=e.d[0];i>=10;i/=10)t++;return t}function Iw(e,t,i){if(t>e.LN10.sd())throw li=!0,i&&(e.precision=i),Error(dl+"LN10 precision limit exceeded");return Ln(new e(e.LN10),t)}function ud(e){for(var t="";e--;)t+="0";return t}function my(e,t){var i,a,d,y,m,l,M,E,N,C=1,L=10,F=e,H=F.d,G=F.constructor,q=G.precision;if(F.s<1)throw Error(dl+(F.s?"NaN":"-Infinity"));if(F.eq(As))return new G(0);if(t==null?(li=!1,E=q):E=t,F.eq(10))return t==null&&(li=!0),Iw(G,E);if(E+=L,G.precision=E,i=Kc(H),a=i.charAt(0),y=Wi(F),Math.abs(y)<15e14){for(;a<7&&a!=1||a==1&&i.charAt(1)>3;)F=F.times(e),i=Kc(F.d),a=i.charAt(0),C++;y=Wi(F),a>1?(F=new G("0."+i),y++):F=new G(a+"."+i.slice(1))}else return M=Iw(G,E+2,q).times(y+""),F=my(new G(a+"."+i.slice(1)),E-L).plus(M),G.precision=q,t==null?(li=!0,Ln(F,q)):F;for(l=m=F=Ku(F.minus(As),F.plus(As),E),N=Ln(F.times(F),E),d=3;;){if(m=Ln(m.times(N),E),M=l.plus(Ku(m,new G(d),E)),Kc(M.d).slice(0,E)===Kc(l.d).slice(0,E))return l=l.times(2),y!==0&&(l=l.plus(Iw(G,E+2,q).times(y+""))),l=Ku(l,new G(C),E),G.precision=q,t==null?(li=!0,Ln(l,q)):l;l=M,d+=2}}function oC(e,t){var i,a,d;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(i<0&&(i=a),i+=+t.slice(a+1),t=t.substring(0,a)):i<0&&(i=t.length),a=0;t.charCodeAt(a)===48;)++a;for(d=t.length;t.charCodeAt(d-1)===48;)--d;if(t=t.slice(a,d),t){if(d-=a,i=i-a-1,e.e=Dm(i/Qn),e.d=[],a=(i+1)%Qn,i<0&&(a+=Qn),a<d){for(a&&e.d.push(+t.slice(0,a)),d-=Qn;a<d;)e.d.push(+t.slice(a,a+=Qn));t=t.slice(a),a=Qn-t.length}else a-=d;for(;a--;)t+="0";if(e.d.push(+t),li&&(e.e>E_||e.e<-E_))throw Error(LT+i)}else e.s=0,e.e=0,e.d=[0];return e}function Ln(e,t,i){var a,d,y,m,l,M,E,N,C=e.d;for(m=1,y=C[0];y>=10;y/=10)m++;if(a=t-m,a<0)a+=Qn,d=t,E=C[N=0];else{if(N=Math.ceil((a+1)/Qn),y=C.length,N>=y)return e;for(E=y=C[N],m=1;y>=10;y/=10)m++;a%=Qn,d=a-Qn+m}if(i!==void 0&&(y=bf(10,m-d-1),l=E/y%10|0,M=t<0||C[N+1]!==void 0||E%y,M=i<4?(l||M)&&(i==0||i==(e.s<0?3:2)):l>5||l==5&&(i==4||M||i==6&&(a>0?d>0?E/bf(10,m-d):0:C[N-1])%10&1||i==(e.s<0?8:7))),t<1||!C[0])return M?(y=Wi(e),C.length=1,t=t-y-1,C[0]=bf(10,(Qn-t%Qn)%Qn),e.e=Dm(-t/Qn)||0):(C.length=1,C[0]=e.e=e.s=0),e;if(a==0?(C.length=N,y=1,N--):(C.length=N+1,y=bf(10,Qn-a),C[N]=d>0?(E/bf(10,m-d)%bf(10,d)|0)*y:0),M)for(;;)if(N==0){(C[0]+=y)==Aa&&(C[0]=1,++e.e);break}else{if(C[N]+=y,C[N]!=Aa)break;C[N--]=0,y=1}for(a=C.length;C[--a]===0;)C.pop();if(li&&(e.e>E_||e.e<-E_))throw Error(LT+Wi(e));return e}function NN(e,t){var i,a,d,y,m,l,M,E,N,C,L=e.constructor,F=L.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new L(e),li?Ln(t,F):t;if(M=e.d,C=t.d,a=t.e,E=e.e,M=M.slice(),m=E-a,m){for(N=m<0,N?(i=M,m=-m,l=C.length):(i=C,a=E,l=M.length),d=Math.max(Math.ceil(F/Qn),l)+2,m>d&&(m=d,i.length=1),i.reverse(),d=m;d--;)i.push(0);i.reverse()}else{for(d=M.length,l=C.length,N=d<l,N&&(l=d),d=0;d<l;d++)if(M[d]!=C[d]){N=M[d]<C[d];break}m=0}for(N&&(i=M,M=C,C=i,t.s=-t.s),l=M.length,d=C.length-l;d>0;--d)M[l++]=0;for(d=C.length;d>m;){if(M[--d]<C[d]){for(y=d;y&&M[--y]===0;)M[y]=Aa-1;--M[y],M[d]+=Aa}M[d]-=C[d]}for(;M[--l]===0;)M.pop();for(;M[0]===0;M.shift())--a;return M[0]?(t.d=M,t.e=a,li?Ln(t,F):t):new L(0)}function kf(e,t,i){var a,d=Wi(e),y=Kc(e.d),m=y.length;return t?(i&&(a=i-m)>0?y=y.charAt(0)+"."+y.slice(1)+ud(a):m>1&&(y=y.charAt(0)+"."+y.slice(1)),y=y+(d<0?"e":"e+")+d):d<0?(y="0."+ud(-d-1)+y,i&&(a=i-m)>0&&(y+=ud(a))):d>=m?(y+=ud(d+1-m),i&&(a=i-d-1)>0&&(y=y+"."+ud(a))):((a=d+1)<m&&(y=y.slice(0,a)+"."+y.slice(a)),i&&(a=i-m)>0&&(d+1===m&&(y+="."),y+=ud(a))),e.s<0?"-"+y:y}function sC(e,t){if(e.length>t)return e.length=t,!0}function RN(e){var t,i,a;function d(y){var m=this;if(!(m instanceof d))return new d(y);if(m.constructor=d,y instanceof d){m.s=y.s,m.e=y.e,m.d=(y=y.d)?y.slice():y;return}if(typeof y=="number"){if(y*0!==0)throw Error(Cf+y);if(y>0)m.s=1;else if(y<0)y=-y,m.s=-1;else{m.s=0,m.e=0,m.d=[0];return}if(y===~~y&&y<1e7){m.e=0,m.d=[y];return}return oC(m,y.toString())}else if(typeof y!="string")throw Error(Cf+y);if(y.charCodeAt(0)===45?(y=y.slice(1),m.s=-1):m.s=1,Iq.test(y))oC(m,y);else throw Error(Cf+y)}if(d.prototype=Yt,d.ROUND_UP=0,d.ROUND_DOWN=1,d.ROUND_CEIL=2,d.ROUND_FLOOR=3,d.ROUND_HALF_UP=4,d.ROUND_HALF_DOWN=5,d.ROUND_HALF_EVEN=6,d.ROUND_HALF_CEIL=7,d.ROUND_HALF_FLOOR=8,d.clone=RN,d.config=d.set=kq,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(i=a[t++])||(e[i]=this[i]);return d.config(e),d}function kq(e){if(!e||typeof e!="object")throw Error(dl+"Object expected");var t,i,a,d=["precision",1,Rm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<d.length;t+=3)if((a=e[i=d[t]])!==void 0)if(Dm(a)===a&&a>=d[t+1]&&a<=d[t+2])this[i]=a;else throw Error(Cf+i+": "+a);if((a=e[i="LN10"])!==void 0)if(a==Math.LN10)this[i]=new this(a);else throw Error(Cf+i+": "+a);return this}var BT=RN(Oq);As=new BT(1);const kn=BT;function Nq(e){return Lq(e)||zq(e)||Dq(e)||Rq()}function Rq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dq(e,t){if(e){if(typeof e=="string")return Y2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Y2(e,t)}}function zq(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Lq(e){if(Array.isArray(e))return Y2(e)}function Y2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var Bq=function(t){return t},DN={},zN=function(t){return t===DN},lC=function(t){return function i(){return arguments.length===0||arguments.length===1&&zN(arguments.length<=0?void 0:arguments[0])?i:t.apply(void 0,arguments)}},Fq=function e(t,i){return t===1?i:lC(function(){for(var a=arguments.length,d=new Array(a),y=0;y<a;y++)d[y]=arguments[y];var m=d.filter(function(l){return l!==DN}).length;return m>=t?i.apply(void 0,d):e(t-m,lC(function(){for(var l=arguments.length,M=new Array(l),E=0;E<l;E++)M[E]=arguments[E];var N=d.map(function(C){return zN(C)?M.shift():C});return i.apply(void 0,Nq(N).concat(M))}))})},Tx=function(t){return Fq(t.length,t)},K2=function(t,i){for(var a=[],d=t;d<i;++d)a[d-t]=d;return a},$q=Tx(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(i){return t[i]}).map(e)}),qq=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];if(!i.length)return Bq;var d=i.reverse(),y=d[0],m=d.slice(1);return function(){return m.reduce(function(l,M){return M(l)},y.apply(void 0,arguments))}},Q2=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},LN=function(t){var i=null,a=null;return function(){for(var d=arguments.length,y=new Array(d),m=0;m<d;m++)y[m]=arguments[m];return i&&y.every(function(l,M){return l===i[M]})||(i=y,a=t.apply(void 0,y)),a}};function Uq(e){var t;return e===0?t=1:t=Math.floor(new kn(e).abs().log(10).toNumber())+1,t}function Vq(e,t,i){for(var a=new kn(e),d=0,y=[];a.lt(t)&&d<1e5;)y.push(a.toNumber()),a=a.add(i),d++;return y}var Gq=Tx(function(e,t,i){var a=+e,d=+t;return a+i*(d-a)}),Zq=Tx(function(e,t,i){var a=t-+e;return a=a||1/0,(i-e)/a}),Hq=Tx(function(e,t,i){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(i-e)/a))});const Ax={rangeStep:Vq,getDigitCount:Uq,interpolateNumber:Gq,uninterpolateNumber:Zq,uninterpolateTruncation:Hq};function J2(e){return Yq(e)||Wq(e)||BN(e)||Xq()}function Xq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wq(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Yq(e){if(Array.isArray(e))return eS(e)}function gy(e,t){return Jq(e)||Qq(e,t)||BN(e,t)||Kq()}function Kq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BN(e,t){if(e){if(typeof e=="string")return eS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return eS(e,t)}}function eS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Qq(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var i=[],a=!0,d=!1,y=void 0;try{for(var m=e[Symbol.iterator](),l;!(a=(l=m.next()).done)&&(i.push(l.value),!(t&&i.length===t));a=!0);}catch(M){d=!0,y=M}finally{try{!a&&m.return!=null&&m.return()}finally{if(d)throw y}}return i}}function Jq(e){if(Array.isArray(e))return e}function FN(e){var t=gy(e,2),i=t[0],a=t[1],d=i,y=a;return i>a&&(d=a,y=i),[d,y]}function $N(e,t,i){if(e.lte(0))return new kn(0);var a=Ax.getDigitCount(e.toNumber()),d=new kn(10).pow(a),y=e.div(d),m=a!==1?.05:.1,l=new kn(Math.ceil(y.div(m).toNumber())).add(i).mul(m),M=l.mul(d);return t?M:new kn(Math.ceil(M))}function eU(e,t,i){var a=1,d=new kn(e);if(!d.isint()&&i){var y=Math.abs(e);y<1?(a=new kn(10).pow(Ax.getDigitCount(e)-1),d=new kn(Math.floor(d.div(a).toNumber())).mul(a)):y>1&&(d=new kn(Math.floor(e)))}else e===0?d=new kn(Math.floor((t-1)/2)):i||(d=new kn(Math.floor(e)));var m=Math.floor((t-1)/2),l=qq($q(function(M){return d.add(new kn(M-m).mul(a)).toNumber()}),K2);return l(0,t)}function qN(e,t,i,a){var d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(i-1)))return{step:new kn(0),tickMin:new kn(0),tickMax:new kn(0)};var y=$N(new kn(t).sub(e).div(i-1),a,d),m;e<=0&&t>=0?m=new kn(0):(m=new kn(e).add(t).div(2),m=m.sub(new kn(m).mod(y)));var l=Math.ceil(m.sub(e).div(y).toNumber()),M=Math.ceil(new kn(t).sub(m).div(y).toNumber()),E=l+M+1;return E>i?qN(e,t,i,a,d+1):(E<i&&(M=t>0?M+(i-E):M,l=t>0?l:l+(i-E)),{step:y,tickMin:m.sub(new kn(l).mul(y)),tickMax:m.add(new kn(M).mul(y))})}function tU(e){var t=gy(e,2),i=t[0],a=t[1],d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,m=Math.max(d,2),l=FN([i,a]),M=gy(l,2),E=M[0],N=M[1];if(E===-1/0||N===1/0){var C=N===1/0?[E].concat(J2(K2(0,d-1).map(function(){return 1/0}))):[].concat(J2(K2(0,d-1).map(function(){return-1/0})),[N]);return i>a?Q2(C):C}if(E===N)return eU(E,d,y);var L=qN(E,N,m,y),F=L.step,H=L.tickMin,G=L.tickMax,q=Ax.rangeStep(H,G.add(new kn(.1).mul(F)),F);return i>a?Q2(q):q}function rU(e,t){var i=gy(e,2),a=i[0],d=i[1],y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,m=FN([a,d]),l=gy(m,2),M=l[0],E=l[1];if(M===-1/0||E===1/0)return[a,d];if(M===E)return[M];var N=Math.max(t,2),C=$N(new kn(E).sub(M).div(N-1),y,0),L=[].concat(J2(Ax.rangeStep(new kn(M),new kn(E).sub(new kn(.99).mul(C)),C)),[E]);return a>d?Q2(L):L}var nU=LN(tU),iU=LN(rU),aU="Invariant failed";function Nf(e,t){throw new Error(aU)}var oU=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function fm(e){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fm(e)}function C_(){return C_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},C_.apply(this,arguments)}function sU(e,t){return hU(e)||uU(e,t)||cU(e,t)||lU()}function lU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cU(e,t){if(e){if(typeof e=="string")return cC(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return cC(e,t)}}function cC(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function uU(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,d,y,m,l=[],M=!0,E=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(l.push(a.value),l.length!==t);M=!0);}catch(N){E=!0,d=N}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(E)throw d}}return l}}function hU(e){if(Array.isArray(e))return e}function dU(e,t){if(e==null)return{};var i=fU(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function fU(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function pU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mU(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,GN(a.key),a)}}function gU(e,t,i){return t&&mU(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yU(e,t,i){return t=O_(t),vU(e,UN()?Reflect.construct(t,i||[],O_(e).constructor):t.apply(e,i))}function vU(e,t){if(t&&(fm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _U(e)}function _U(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UN=function(){return!!e})()}function O_(e){return O_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},O_(e)}function xU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tS(e,t)}function tS(e,t){return tS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},tS(e,t)}function VN(e,t,i){return t=GN(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function GN(e){var t=bU(e,"string");return fm(t)=="symbol"?t:t+""}function bU(e,t){if(fm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(fm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Hy=function(e){function t(){return pU(this,t),yU(this,t,arguments)}return xU(t,e),gU(t,[{key:"render",value:function(){var a=this.props,d=a.offset,y=a.layout,m=a.width,l=a.dataKey,M=a.data,E=a.dataPointFormatter,N=a.xAxis,C=a.yAxis,L=dU(a,oU),F=tn(L,!1);this.props.direction==="x"&&N.type!=="number"&&Nf();var H=M.map(function(G){var q=E(G,l),re=q.x,ie=q.y,ne=q.value,ce=q.errorVal;if(!ce)return null;var J=[],ee,he;if(Array.isArray(ce)){var ge=sU(ce,2);ee=ge[0],he=ge[1]}else ee=he=ce;if(y==="vertical"){var Oe=N.scale,at=ie+d,ke=at+m,qe=at-m,et=Oe(ne-ee),st=Oe(ne+he);J.push({x1:st,y1:ke,x2:st,y2:qe}),J.push({x1:et,y1:at,x2:st,y2:at}),J.push({x1:et,y1:ke,x2:et,y2:qe})}else if(y==="horizontal"){var rt=C.scale,Te=re+d,Ge=Te-m,Ze=Te+m,dt=rt(ne-ee),xe=rt(ne+he);J.push({x1:Ge,y1:xe,x2:Ze,y2:xe}),J.push({x1:Te,y1:dt,x2:Te,y2:xe}),J.push({x1:Ge,y1:dt,x2:Ze,y2:dt})}return $e.createElement(Oi,C_({className:"recharts-errorBar",key:"bar-".concat(J.map(function(We){return"".concat(We.x1,"-").concat(We.x2,"-").concat(We.y1,"-").concat(We.y2)}))},F),J.map(function(We){return $e.createElement("line",C_({},We,{key:"line-".concat(We.x1,"-").concat(We.x2,"-").concat(We.y1,"-").concat(We.y2)}))}))});return $e.createElement(Oi,{className:"recharts-errorBars"},H)}}])}($e.Component);VN(Hy,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});VN(Hy,"displayName","ErrorBar");function yy(e){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yy(e)}function uC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function _f(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?uC(Object(i),!0).forEach(function(a){wU(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):uC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function wU(e,t,i){return t=SU(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function SU(e){var t=TU(e,"string");return yy(t)=="symbol"?t:t+""}function TU(e,t){if(yy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(yy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZN=function(t){var i=t.children,a=t.formattedGraphicalItems,d=t.legendWidth,y=t.legendContent,m=Ts(i,Pf);if(!m)return null;var l=Pf.defaultProps,M=l!==void 0?_f(_f({},l),m.props):{},E;return m.props&&m.props.payload?E=m.props&&m.props.payload:y==="children"?E=(a||[]).reduce(function(N,C){var L=C.item,F=C.props,H=F.sectors||F.data||[];return N.concat(H.map(function(G){return{type:m.props.iconType||L.props.legendType,value:G.name,color:G.fill,payload:G}}))},[]):E=(a||[]).map(function(N){var C=N.item,L=C.type.defaultProps,F=L!==void 0?_f(_f({},L),C.props):{},H=F.dataKey,G=F.name,q=F.legendType,re=F.hide;return{inactive:re,dataKey:H,type:M.iconType||q||"square",color:FT(C),value:G||H,payload:F}}),_f(_f(_f({},M),Pf.getWithHeight(m,d)),{},{payload:E,item:m})};function vy(e){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vy(e)}function hC(e){return PU(e)||jU(e)||MU(e)||AU()}function AU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MU(e,t){if(e){if(typeof e=="string")return rS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rS(e,t)}}function jU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PU(e){if(Array.isArray(e))return rS(e)}function rS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function dC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Ai(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(i),!0).forEach(function(a){nm(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):dC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function nm(e,t,i){return t=EU(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function EU(e){var t=CU(e,"string");return vy(t)=="symbol"?t:t+""}function CU(e,t){if(vy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(vy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function js(e,t,i){return Yr(e)||Yr(t)?i:la(t)?ul(e,t,i):Br(t)?t(e):i}function Kg(e,t,i,a){var d=Pq(e,function(l){return js(l,t)});if(i==="number"){var y=d.filter(function(l){return Dt(l)||parseFloat(l)});return y.length?[wx(y),bx(y)]:[1/0,-1/0]}var m=a?d.filter(function(l){return!Yr(l)}):d;return m.map(function(l){return la(l)||l instanceof Date?l:""})}var OU=function(t){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],d=arguments.length>2?arguments[2]:void 0,y=arguments.length>3?arguments[3]:void 0,m=-1,l=(i=a==null?void 0:a.length)!==null&&i!==void 0?i:0;if(l<=1)return 0;if(y&&y.axisType==="angleAxis"&&Math.abs(Math.abs(y.range[1]-y.range[0])-360)<=1e-6)for(var M=y.range,E=0;E<l;E++){var N=E>0?d[E-1].coordinate:d[l-1].coordinate,C=d[E].coordinate,L=E>=l-1?d[0].coordinate:d[E+1].coordinate,F=void 0;if(hc(C-N)!==hc(L-C)){var H=[];if(hc(L-C)===hc(M[1]-M[0])){F=L;var G=C+M[1]-M[0];H[0]=Math.min(G,(G+N)/2),H[1]=Math.max(G,(G+N)/2)}else{F=N;var q=L+M[1]-M[0];H[0]=Math.min(C,(q+C)/2),H[1]=Math.max(C,(q+C)/2)}var re=[Math.min(C,(F+C)/2),Math.max(C,(F+C)/2)];if(t>re[0]&&t<=re[1]||t>=H[0]&&t<=H[1]){m=d[E].index;break}}else{var ie=Math.min(N,L),ne=Math.max(N,L);if(t>(ie+C)/2&&t<=(ne+C)/2){m=d[E].index;break}}}else for(var ce=0;ce<l;ce++)if(ce===0&&t<=(a[ce].coordinate+a[ce+1].coordinate)/2||ce>0&&ce<l-1&&t>(a[ce].coordinate+a[ce-1].coordinate)/2&&t<=(a[ce].coordinate+a[ce+1].coordinate)/2||ce===l-1&&t>(a[ce].coordinate+a[ce-1].coordinate)/2){m=a[ce].index;break}return m},FT=function(t){var i,a=t,d=a.type.displayName,y=(i=t.type)!==null&&i!==void 0&&i.defaultProps?Ai(Ai({},t.type.defaultProps),t.props):t.props,m=y.stroke,l=y.fill,M;switch(d){case"Line":M=m;break;case"Area":case"Radar":M=m&&m!=="none"?m:l;break;default:M=l;break}return M},IU=function(t){var i=t.barSize,a=t.totalSize,d=t.stackGroups,y=d===void 0?{}:d;if(!y)return{};for(var m={},l=Object.keys(y),M=0,E=l.length;M<E;M++)for(var N=y[l[M]].stackGroups,C=Object.keys(N),L=0,F=C.length;L<F;L++){var H=N[C[L]],G=H.items,q=H.cateAxisId,re=G.filter(function(he){return Wu(he.type).indexOf("Bar")>=0});if(re&&re.length){var ie=re[0].type.defaultProps,ne=ie!==void 0?Ai(Ai({},ie),re[0].props):re[0].props,ce=ne.barSize,J=ne[q];m[J]||(m[J]=[]);var ee=Yr(ce)?i:ce;m[J].push({item:re[0],stackList:re.slice(1),barSize:Yr(ee)?void 0:If(ee,a,0)})}}return m},kU=function(t){var i=t.barGap,a=t.barCategoryGap,d=t.bandSize,y=t.sizeList,m=y===void 0?[]:y,l=t.maxBarSize,M=m.length;if(M<1)return null;var E=If(i,d,0,!0),N,C=[];if(m[0].barSize===+m[0].barSize){var L=!1,F=d/M,H=m.reduce(function(ce,J){return ce+J.barSize||0},0);H+=(M-1)*E,H>=d&&(H-=(M-1)*E,E=0),H>=d&&F>0&&(L=!0,F*=.9,H=M*F);var G=(d-H)/2>>0,q={offset:G-E,size:0};N=m.reduce(function(ce,J){var ee={item:J.item,position:{offset:q.offset+q.size+E,size:L?F:J.barSize}},he=[].concat(hC(ce),[ee]);return q=he[he.length-1].position,J.stackList&&J.stackList.length&&J.stackList.forEach(function(ge){he.push({item:ge,position:q})}),he},C)}else{var re=If(a,d,0,!0);d-2*re-(M-1)*E<=0&&(E=0);var ie=(d-2*re-(M-1)*E)/M;ie>1&&(ie>>=0);var ne=l===+l?Math.min(ie,l):ie;N=m.reduce(function(ce,J,ee){var he=[].concat(hC(ce),[{item:J.item,position:{offset:re+(ie+E)*ee+(ie-ne)/2,size:ne}}]);return J.stackList&&J.stackList.length&&J.stackList.forEach(function(ge){he.push({item:ge,position:he[he.length-1].position})}),he},C)}return N},NU=function(t,i,a,d){var y=a.children,m=a.width,l=a.margin,M=m-(l.left||0)-(l.right||0),E=ZN({children:y,legendWidth:M});if(E){var N=d||{},C=N.width,L=N.height,F=E.align,H=E.verticalAlign,G=E.layout;if((G==="vertical"||G==="horizontal"&&H==="middle")&&F!=="center"&&Dt(t[F]))return Ai(Ai({},t),{},nm({},F,t[F]+(C||0)));if((G==="horizontal"||G==="vertical"&&F==="center")&&H!=="middle"&&Dt(t[H]))return Ai(Ai({},t),{},nm({},H,t[H]+(L||0)))}return t},RU=function(t,i,a){return Yr(i)?!0:t==="horizontal"?i==="yAxis":t==="vertical"||a==="x"?i==="xAxis":a==="y"?i==="yAxis":!0},HN=function(t,i,a,d,y){var m=i.props.children,l=hl(m,Hy).filter(function(E){return RU(d,y,E.props.direction)});if(l&&l.length){var M=l.map(function(E){return E.props.dataKey});return t.reduce(function(E,N){var C=js(N,a);if(Yr(C))return E;var L=Array.isArray(C)?[wx(C),bx(C)]:[C,C],F=M.reduce(function(H,G){var q=js(N,G,0),re=L[0]-Math.abs(Array.isArray(q)?q[0]:q),ie=L[1]+Math.abs(Array.isArray(q)?q[1]:q);return[Math.min(re,H[0]),Math.max(ie,H[1])]},[1/0,-1/0]);return[Math.min(F[0],E[0]),Math.max(F[1],E[1])]},[1/0,-1/0])}return null},DU=function(t,i,a,d,y){var m=i.map(function(l){return HN(t,l,a,y,d)}).filter(function(l){return!Yr(l)});return m&&m.length?m.reduce(function(l,M){return[Math.min(l[0],M[0]),Math.max(l[1],M[1])]},[1/0,-1/0]):null},XN=function(t,i,a,d,y){var m=i.map(function(M){var E=M.props.dataKey;return a==="number"&&E&&HN(t,M,E,d)||Kg(t,E,a,y)});if(a==="number")return m.reduce(function(M,E){return[Math.min(M[0],E[0]),Math.max(M[1],E[1])]},[1/0,-1/0]);var l={};return m.reduce(function(M,E){for(var N=0,C=E.length;N<C;N++)l[E[N]]||(l[E[N]]=!0,M.push(E[N]));return M},[])},WN=function(t,i){return t==="horizontal"&&i==="xAxis"||t==="vertical"&&i==="yAxis"||t==="centric"&&i==="angleAxis"||t==="radial"&&i==="radiusAxis"},YN=function(t,i,a,d){if(d)return t.map(function(M){return M.coordinate});var y,m,l=t.map(function(M){return M.coordinate===i&&(y=!0),M.coordinate===a&&(m=!0),M.coordinate});return y||l.push(i),m||l.push(a),l},Hu=function(t,i,a){if(!t)return null;var d=t.scale,y=t.duplicateDomain,m=t.type,l=t.range,M=t.realScaleType==="scaleBand"?d.bandwidth()/2:2,E=(i||a)&&m==="category"&&d.bandwidth?d.bandwidth()/M:0;if(E=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?hc(l[0]-l[1])*2*E:E,i&&(t.ticks||t.niceTicks)){var N=(t.ticks||t.niceTicks).map(function(C){var L=y?y.indexOf(C):C;return{coordinate:d(L)+E,value:C,offset:E}});return N.filter(function(C){return!Fy(C.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(C,L){return{coordinate:d(C)+E,value:C,index:L,offset:E}}):d.ticks&&!a?d.ticks(t.tickCount).map(function(C){return{coordinate:d(C)+E,value:C,offset:E}}):d.domain().map(function(C,L){return{coordinate:d(C)+E,value:y?y[C]:C,index:L,offset:E}})},kw=new WeakMap,Zv=function(t,i){if(typeof i!="function")return t;kw.has(t)||kw.set(t,new WeakMap);var a=kw.get(t);if(a.has(i))return a.get(i);var d=function(){t.apply(void 0,arguments),i.apply(void 0,arguments)};return a.set(i,d),d},zU=function(t,i,a){var d=t.scale,y=t.type,m=t.layout,l=t.axisType;if(d==="auto")return m==="radial"&&l==="radiusAxis"?{scale:uy(),realScaleType:"band"}:m==="radial"&&l==="angleAxis"?{scale:A_(),realScaleType:"linear"}:y==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!a)?{scale:Yg(),realScaleType:"point"}:y==="category"?{scale:uy(),realScaleType:"band"}:{scale:A_(),realScaleType:"linear"};if(Of(d)){var M="scale".concat(lx(d));return{scale:(KE[M]||Yg)(),realScaleType:KE[M]?M:"point"}}return Br(d)?{scale:d}:{scale:Yg(),realScaleType:"point"}},fC=1e-4,LU=function(t){var i=t.domain();if(!(!i||i.length<=2)){var a=i.length,d=t.range(),y=Math.min(d[0],d[1])-fC,m=Math.max(d[0],d[1])+fC,l=t(i[0]),M=t(i[a-1]);(l<y||l>m||M<y||M>m)&&t.domain([i[0],i[a-1]])}},BU=function(t,i){if(!t)return null;for(var a=0,d=t.length;a<d;a++)if(t[a].item===i)return t[a].position;return null},FU=function(t,i){if(!i||i.length!==2||!Dt(i[0])||!Dt(i[1]))return t;var a=Math.min(i[0],i[1]),d=Math.max(i[0],i[1]),y=[t[0],t[1]];return(!Dt(t[0])||t[0]<a)&&(y[0]=a),(!Dt(t[1])||t[1]>d)&&(y[1]=d),y[0]>d&&(y[0]=d),y[1]<a&&(y[1]=a),y},$U=function(t){var i=t.length;if(!(i<=0))for(var a=0,d=t[0].length;a<d;++a)for(var y=0,m=0,l=0;l<i;++l){var M=Fy(t[l][a][1])?t[l][a][0]:t[l][a][1];M>=0?(t[l][a][0]=y,t[l][a][1]=y+M,y=t[l][a][1]):(t[l][a][0]=m,t[l][a][1]=m+M,m=t[l][a][1])}},qU=function(t){var i=t.length;if(!(i<=0))for(var a=0,d=t[0].length;a<d;++a)for(var y=0,m=0;m<i;++m){var l=Fy(t[m][a][1])?t[m][a][0]:t[m][a][1];l>=0?(t[m][a][0]=y,t[m][a][1]=y+l,y=t[m][a][1]):(t[m][a][0]=0,t[m][a][1]=0)}},UU={sign:$U,expand:AL,none:am,silhouette:ML,wiggle:jL,positive:qU},VU=function(t,i,a){var d=i.map(function(l){return l.props.dataKey}),y=UU[a],m=TL().keys(d).value(function(l,M){return+js(l,M,0)}).order(I2).offset(y);return m(t)},GU=function(t,i,a,d,y,m){if(!t)return null;var l=m?i.reverse():i,M={},E=l.reduce(function(C,L){var F,H=(F=L.type)!==null&&F!==void 0&&F.defaultProps?Ai(Ai({},L.type.defaultProps),L.props):L.props,G=H.stackId,q=H.hide;if(q)return C;var re=H[a],ie=C[re]||{hasStack:!1,stackGroups:{}};if(la(G)){var ne=ie.stackGroups[G]||{numericAxisId:a,cateAxisId:d,items:[]};ne.items.push(L),ie.hasStack=!0,ie.stackGroups[G]=ne}else ie.stackGroups[$y("_stackId_")]={numericAxisId:a,cateAxisId:d,items:[L]};return Ai(Ai({},C),{},nm({},re,ie))},M),N={};return Object.keys(E).reduce(function(C,L){var F=E[L];if(F.hasStack){var H={};F.stackGroups=Object.keys(F.stackGroups).reduce(function(G,q){var re=F.stackGroups[q];return Ai(Ai({},G),{},nm({},q,{numericAxisId:a,cateAxisId:d,items:re.items,stackedData:VU(t,re.items,y)}))},H)}return Ai(Ai({},C),{},nm({},L,F))},N)},ZU=function(t,i){var a=i.realScaleType,d=i.type,y=i.tickCount,m=i.originalDomain,l=i.allowDecimals,M=a||i.scale;if(M!=="auto"&&M!=="linear")return null;if(y&&d==="number"&&m&&(m[0]==="auto"||m[1]==="auto")){var E=t.domain();if(!E.length)return null;var N=nU(E,y,l);return t.domain([wx(N),bx(N)]),{niceTicks:N}}if(y&&d==="number"){var C=t.domain(),L=iU(C,y,l);return{niceTicks:L}}return null};function pC(e){var t=e.axis,i=e.ticks,a=e.bandSize,d=e.entry,y=e.index,m=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Yr(d[t.dataKey])){var l=a_(i,"value",d[t.dataKey]);if(l)return l.coordinate+a/2}return i[y]?i[y].coordinate+a/2:null}var M=js(d,Yr(m)?t.dataKey:m);return Yr(M)?null:t.scale(M)}var mC=function(t){var i=t.axis,a=t.ticks,d=t.offset,y=t.bandSize,m=t.entry,l=t.index;if(i.type==="category")return a[l]?a[l].coordinate+d:null;var M=js(m,i.dataKey,i.domain[l]);return Yr(M)?null:i.scale(M)-y/2+d},HU=function(t){var i=t.numericAxis,a=i.scale.domain();if(i.type==="number"){var d=Math.min(a[0],a[1]),y=Math.max(a[0],a[1]);return d<=0&&y>=0?0:y<0?y:d}return a[0]},XU=function(t,i){var a,d=(a=t.type)!==null&&a!==void 0&&a.defaultProps?Ai(Ai({},t.type.defaultProps),t.props):t.props,y=d.stackId;if(la(y)){var m=i[y];if(m){var l=m.items.indexOf(t);return l>=0?m.stackedData[l]:null}}return null},WU=function(t){return t.reduce(function(i,a){return[wx(a.concat([i[0]]).filter(Dt)),bx(a.concat([i[1]]).filter(Dt))]},[1/0,-1/0])},KN=function(t,i,a){return Object.keys(t).reduce(function(d,y){var m=t[y],l=m.stackedData,M=l.reduce(function(E,N){var C=WU(N.slice(i,a+1));return[Math.min(E[0],C[0]),Math.max(E[1],C[1])]},[1/0,-1/0]);return[Math.min(M[0],d[0]),Math.max(M[1],d[1])]},[1/0,-1/0]).map(function(d){return d===1/0||d===-1/0?0:d})},gC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,yC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nS=function(t,i,a){if(Br(t))return t(i,a);if(!Array.isArray(t))return i;var d=[];if(Dt(t[0]))d[0]=a?t[0]:Math.min(t[0],i[0]);else if(gC.test(t[0])){var y=+gC.exec(t[0])[1];d[0]=i[0]-y}else Br(t[0])?d[0]=t[0](i[0]):d[0]=i[0];if(Dt(t[1]))d[1]=a?t[1]:Math.max(t[1],i[1]);else if(yC.test(t[1])){var m=+yC.exec(t[1])[1];d[1]=i[1]+m}else Br(t[1])?d[1]=t[1](i[1]):d[1]=i[1];return d},I_=function(t,i,a){if(t&&t.scale&&t.scale.bandwidth){var d=t.scale.bandwidth();if(!a||d>0)return d}if(t&&i&&i.length>=2){for(var y=pT(i,function(C){return C.coordinate}),m=1/0,l=1,M=y.length;l<M;l++){var E=y[l],N=y[l-1];m=Math.min((E.coordinate||0)-(N.coordinate||0),m)}return m===1/0?0:m}return a?void 0:0},vC=function(t,i,a){return!t||!t.length||Sx(t,ul(a,"type.defaultProps.domain"))?i:t},QN=function(t,i){var a=t.type.defaultProps?Ai(Ai({},t.type.defaultProps),t.props):t.props,d=a.dataKey,y=a.name,m=a.unit,l=a.formatter,M=a.tooltipType,E=a.chartType,N=a.hide;return Ai(Ai({},tn(t,!1)),{},{dataKey:d,unit:m,formatter:l,name:y||d,color:FT(t),value:js(i,d),type:M,payload:i,chartType:E,hide:N})};function _y(e){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_y(e)}function _C(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function xC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?_C(Object(i),!0).forEach(function(a){YU(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_C(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function YU(e,t,i){return t=KU(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function KU(e){var t=QU(e,"string");return _y(t)=="symbol"?t:t+""}function QU(e,t){if(_y(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(_y(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k_=Math.PI/180,JU=function(t){return t*180/Math.PI},La=function(t,i,a,d){return{x:t+Math.cos(-k_*d)*a,y:i+Math.sin(-k_*d)*a}},eV=function(t,i){var a=t.x,d=t.y,y=i.x,m=i.y;return Math.sqrt(Math.pow(a-y,2)+Math.pow(d-m,2))},tV=function(t,i){var a=t.x,d=t.y,y=i.cx,m=i.cy,l=eV({x:a,y:d},{x:y,y:m});if(l<=0)return{radius:l};var M=(a-y)/l,E=Math.acos(M);return d>m&&(E=2*Math.PI-E),{radius:l,angle:JU(E),angleInRadian:E}},rV=function(t){var i=t.startAngle,a=t.endAngle,d=Math.floor(i/360),y=Math.floor(a/360),m=Math.min(d,y);return{startAngle:i-m*360,endAngle:a-m*360}},nV=function(t,i){var a=i.startAngle,d=i.endAngle,y=Math.floor(a/360),m=Math.floor(d/360),l=Math.min(y,m);return t+l*360},bC=function(t,i){var a=t.x,d=t.y,y=tV({x:a,y:d},i),m=y.radius,l=y.angle,M=i.innerRadius,E=i.outerRadius;if(m<M||m>E)return!1;if(m===0)return!0;var N=rV(i),C=N.startAngle,L=N.endAngle,F=l,H;if(C<=L){for(;F>L;)F-=360;for(;F<C;)F+=360;H=F>=C&&F<=L}else{for(;F>C;)F-=360;for(;F<L;)F+=360;H=F>=L&&F<=C}return H?xC(xC({},i),{},{radius:m,angle:nV(F,i)}):null};function xy(e){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xy(e)}var iV=["offset"];function aV(e){return cV(e)||lV(e)||sV(e)||oV()}function oV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sV(e,t){if(e){if(typeof e=="string")return iS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return iS(e,t)}}function lV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cV(e){if(Array.isArray(e))return iS(e)}function iS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function uV(e,t){if(e==null)return{};var i=hV(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function hV(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function wC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function sa(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?wC(Object(i),!0).forEach(function(a){dV(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):wC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function dV(e,t,i){return t=fV(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function fV(e){var t=pV(e,"string");return xy(t)=="symbol"?t:t+""}function pV(e,t){if(xy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(xy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function by(){return by=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},by.apply(this,arguments)}var mV=function(t){var i=t.value,a=t.formatter,d=Yr(t.children)?i:t.children;return Br(a)?a(d):d},gV=function(t,i){var a=hc(i-t),d=Math.min(Math.abs(i-t),360);return a*d},yV=function(t,i,a){var d=t.position,y=t.viewBox,m=t.offset,l=t.className,M=y,E=M.cx,N=M.cy,C=M.innerRadius,L=M.outerRadius,F=M.startAngle,H=M.endAngle,G=M.clockWise,q=(C+L)/2,re=gV(F,H),ie=re>=0?1:-1,ne,ce;d==="insideStart"?(ne=F+ie*m,ce=G):d==="insideEnd"?(ne=H-ie*m,ce=!G):d==="end"&&(ne=H+ie*m,ce=G),ce=re<=0?ce:!ce;var J=La(E,N,q,ne),ee=La(E,N,q,ne+(ce?1:-1)*359),he="M".concat(J.x,",").concat(J.y,`
    A`).concat(q,",").concat(q,",0,1,").concat(ce?0:1,`,
    `).concat(ee.x,",").concat(ee.y),ge=Yr(t.id)?$y("recharts-radial-line-"):t.id;return $e.createElement("text",by({},a,{dominantBaseline:"central",className:ln("recharts-radial-bar-label",l)}),$e.createElement("defs",null,$e.createElement("path",{id:ge,d:he})),$e.createElement("textPath",{xlinkHref:"#".concat(ge)},i))},vV=function(t){var i=t.viewBox,a=t.offset,d=t.position,y=i,m=y.cx,l=y.cy,M=y.innerRadius,E=y.outerRadius,N=y.startAngle,C=y.endAngle,L=(N+C)/2;if(d==="outside"){var F=La(m,l,E+a,L),H=F.x,G=F.y;return{x:H,y:G,textAnchor:H>=m?"start":"end",verticalAnchor:"middle"}}if(d==="center")return{x:m,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(d==="centerTop")return{x:m,y:l,textAnchor:"middle",verticalAnchor:"start"};if(d==="centerBottom")return{x:m,y:l,textAnchor:"middle",verticalAnchor:"end"};var q=(M+E)/2,re=La(m,l,q,L),ie=re.x,ne=re.y;return{x:ie,y:ne,textAnchor:"middle",verticalAnchor:"middle"}},_V=function(t){var i=t.viewBox,a=t.parentViewBox,d=t.offset,y=t.position,m=i,l=m.x,M=m.y,E=m.width,N=m.height,C=N>=0?1:-1,L=C*d,F=C>0?"end":"start",H=C>0?"start":"end",G=E>=0?1:-1,q=G*d,re=G>0?"end":"start",ie=G>0?"start":"end";if(y==="top"){var ne={x:l+E/2,y:M-C*d,textAnchor:"middle",verticalAnchor:F};return sa(sa({},ne),a?{height:Math.max(M-a.y,0),width:E}:{})}if(y==="bottom"){var ce={x:l+E/2,y:M+N+L,textAnchor:"middle",verticalAnchor:H};return sa(sa({},ce),a?{height:Math.max(a.y+a.height-(M+N),0),width:E}:{})}if(y==="left"){var J={x:l-q,y:M+N/2,textAnchor:re,verticalAnchor:"middle"};return sa(sa({},J),a?{width:Math.max(J.x-a.x,0),height:N}:{})}if(y==="right"){var ee={x:l+E+q,y:M+N/2,textAnchor:ie,verticalAnchor:"middle"};return sa(sa({},ee),a?{width:Math.max(a.x+a.width-ee.x,0),height:N}:{})}var he=a?{width:E,height:N}:{};return y==="insideLeft"?sa({x:l+q,y:M+N/2,textAnchor:ie,verticalAnchor:"middle"},he):y==="insideRight"?sa({x:l+E-q,y:M+N/2,textAnchor:re,verticalAnchor:"middle"},he):y==="insideTop"?sa({x:l+E/2,y:M+L,textAnchor:"middle",verticalAnchor:H},he):y==="insideBottom"?sa({x:l+E/2,y:M+N-L,textAnchor:"middle",verticalAnchor:F},he):y==="insideTopLeft"?sa({x:l+q,y:M+L,textAnchor:ie,verticalAnchor:H},he):y==="insideTopRight"?sa({x:l+E-q,y:M+L,textAnchor:re,verticalAnchor:H},he):y==="insideBottomLeft"?sa({x:l+q,y:M+N-L,textAnchor:ie,verticalAnchor:F},he):y==="insideBottomRight"?sa({x:l+E-q,y:M+N-L,textAnchor:re,verticalAnchor:F},he):Om(y)&&(Dt(y.x)||wf(y.x))&&(Dt(y.y)||wf(y.y))?sa({x:l+If(y.x,E),y:M+If(y.y,N),textAnchor:"end",verticalAnchor:"end"},he):sa({x:l+E/2,y:M+N/2,textAnchor:"middle",verticalAnchor:"middle"},he)},xV=function(t){return"cx"in t&&Dt(t.cx)};function lo(e){var t=e.offset,i=t===void 0?5:t,a=uV(e,iV),d=sa({offset:i},a),y=d.viewBox,m=d.position,l=d.value,M=d.children,E=d.content,N=d.className,C=N===void 0?"":N,L=d.textBreakAll;if(!y||Yr(l)&&Yr(M)&&!Fe.isValidElement(E)&&!Br(E))return null;if(Fe.isValidElement(E))return Fe.cloneElement(E,d);var F;if(Br(E)){if(F=Fe.createElement(E,d),Fe.isValidElement(F))return F}else F=mV(d);var H=xV(y),G=tn(d,!0);if(H&&(m==="insideStart"||m==="insideEnd"||m==="end"))return yV(d,F,G);var q=H?vV(d):_V(d);return $e.createElement(v_,by({className:ln("recharts-label",C)},G,q,{breakAll:L}),F)}lo.displayName="Label";var JN=function(t){var i=t.cx,a=t.cy,d=t.angle,y=t.startAngle,m=t.endAngle,l=t.r,M=t.radius,E=t.innerRadius,N=t.outerRadius,C=t.x,L=t.y,F=t.top,H=t.left,G=t.width,q=t.height,re=t.clockWise,ie=t.labelViewBox;if(ie)return ie;if(Dt(G)&&Dt(q)){if(Dt(C)&&Dt(L))return{x:C,y:L,width:G,height:q};if(Dt(F)&&Dt(H))return{x:F,y:H,width:G,height:q}}return Dt(C)&&Dt(L)?{x:C,y:L,width:0,height:0}:Dt(i)&&Dt(a)?{cx:i,cy:a,startAngle:y||d||0,endAngle:m||d||0,innerRadius:E||0,outerRadius:N||M||l||0,clockWise:re}:t.viewBox?t.viewBox:{}},bV=function(t,i){return t?t===!0?$e.createElement(lo,{key:"label-implicit",viewBox:i}):la(t)?$e.createElement(lo,{key:"label-implicit",viewBox:i,value:t}):Fe.isValidElement(t)?t.type===lo?Fe.cloneElement(t,{key:"label-implicit",viewBox:i}):$e.createElement(lo,{key:"label-implicit",content:t,viewBox:i}):Br(t)?$e.createElement(lo,{key:"label-implicit",content:t,viewBox:i}):Om(t)?$e.createElement(lo,by({viewBox:i},t,{key:"label-implicit"})):null:null},wV=function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var d=t.children,y=JN(t),m=hl(d,lo).map(function(M,E){return Fe.cloneElement(M,{viewBox:i||y,key:"label-".concat(E)})});if(!a)return m;var l=bV(t.label,i||y);return[l].concat(aV(m))};lo.parseViewBox=JN;lo.renderCallByParent=wV;var Nw,SC;function SV(){if(SC)return Nw;SC=1;function e(t){var i=t==null?0:t.length;return i?t[i-1]:void 0}return Nw=e,Nw}var TV=SV();const AV=Bn(TV);function wy(e){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wy(e)}var MV=["valueAccessor"],jV=["data","dataKey","clockWise","id","textBreakAll"];function PV(e){return IV(e)||OV(e)||CV(e)||EV()}function EV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CV(e,t){if(e){if(typeof e=="string")return aS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return aS(e,t)}}function OV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function IV(e){if(Array.isArray(e))return aS(e)}function aS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function N_(){return N_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},N_.apply(this,arguments)}function TC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function AC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?TC(Object(i),!0).forEach(function(a){kV(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):TC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function kV(e,t,i){return t=NV(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function NV(e){var t=RV(e,"string");return wy(t)=="symbol"?t:t+""}function RV(e,t){if(wy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(wy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MC(e,t){if(e==null)return{};var i=DV(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function DV(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var zV=function(t){return Array.isArray(t.value)?AV(t.value):t.value};function gd(e){var t=e.valueAccessor,i=t===void 0?zV:t,a=MC(e,MV),d=a.data,y=a.dataKey,m=a.clockWise,l=a.id,M=a.textBreakAll,E=MC(a,jV);return!d||!d.length?null:$e.createElement(Oi,{className:"recharts-label-list"},d.map(function(N,C){var L=Yr(y)?i(N,C):js(N&&N.payload,y),F=Yr(l)?{}:{id:"".concat(l,"-").concat(C)};return $e.createElement(lo,N_({},tn(N,!0),E,F,{parentViewBox:N.parentViewBox,value:L,textBreakAll:M,viewBox:lo.parseViewBox(Yr(m)?N:AC(AC({},N),{},{clockWise:m})),key:"label-".concat(C),index:C}))}))}gd.displayName="LabelList";function LV(e,t){return e?e===!0?$e.createElement(gd,{key:"labelList-implicit",data:t}):$e.isValidElement(e)||Br(e)?$e.createElement(gd,{key:"labelList-implicit",data:t,content:e}):Om(e)?$e.createElement(gd,N_({data:t},e,{key:"labelList-implicit"})):null:null}function BV(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&i&&!e.label)return null;var a=e.children,d=hl(a,gd).map(function(m,l){return Fe.cloneElement(m,{data:t,key:"labelList-".concat(l)})});if(!i)return d;var y=LV(e.label,t);return[y].concat(PV(d))}gd.renderCallByParent=BV;function Sy(e){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sy(e)}function oS(){return oS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},oS.apply(this,arguments)}function jC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function PC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?jC(Object(i),!0).forEach(function(a){FV(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):jC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function FV(e,t,i){return t=$V(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function $V(e){var t=qV(e,"string");return Sy(t)=="symbol"?t:t+""}function qV(e,t){if(Sy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Sy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UV=function(t,i){var a=hc(i-t),d=Math.min(Math.abs(i-t),359.999);return a*d},Hv=function(t){var i=t.cx,a=t.cy,d=t.radius,y=t.angle,m=t.sign,l=t.isExternal,M=t.cornerRadius,E=t.cornerIsExternal,N=M*(l?1:-1)+d,C=Math.asin(M/N)/k_,L=E?y:y+m*C,F=La(i,a,N,L),H=La(i,a,d,L),G=E?y-m*C:y,q=La(i,a,N*Math.cos(C*k_),G);return{center:F,circleTangency:H,lineTangency:q,theta:C}},eR=function(t){var i=t.cx,a=t.cy,d=t.innerRadius,y=t.outerRadius,m=t.startAngle,l=t.endAngle,M=UV(m,l),E=m+M,N=La(i,a,y,m),C=La(i,a,y,E),L="M ".concat(N.x,",").concat(N.y,`
    A `).concat(y,",").concat(y,`,0,
    `).concat(+(Math.abs(M)>180),",").concat(+(m>E),`,
    `).concat(C.x,",").concat(C.y,`
  `);if(d>0){var F=La(i,a,d,m),H=La(i,a,d,E);L+="L ".concat(H.x,",").concat(H.y,`
            A `).concat(d,",").concat(d,`,0,
            `).concat(+(Math.abs(M)>180),",").concat(+(m<=E),`,
            `).concat(F.x,",").concat(F.y," Z")}else L+="L ".concat(i,",").concat(a," Z");return L},VV=function(t){var i=t.cx,a=t.cy,d=t.innerRadius,y=t.outerRadius,m=t.cornerRadius,l=t.forceCornerRadius,M=t.cornerIsExternal,E=t.startAngle,N=t.endAngle,C=hc(N-E),L=Hv({cx:i,cy:a,radius:y,angle:E,sign:C,cornerRadius:m,cornerIsExternal:M}),F=L.circleTangency,H=L.lineTangency,G=L.theta,q=Hv({cx:i,cy:a,radius:y,angle:N,sign:-C,cornerRadius:m,cornerIsExternal:M}),re=q.circleTangency,ie=q.lineTangency,ne=q.theta,ce=M?Math.abs(E-N):Math.abs(E-N)-G-ne;if(ce<0)return l?"M ".concat(H.x,",").concat(H.y,`
        a`).concat(m,",").concat(m,",0,0,1,").concat(m*2,`,0
        a`).concat(m,",").concat(m,",0,0,1,").concat(-m*2,`,0
      `):eR({cx:i,cy:a,innerRadius:d,outerRadius:y,startAngle:E,endAngle:N});var J="M ".concat(H.x,",").concat(H.y,`
    A`).concat(m,",").concat(m,",0,0,").concat(+(C<0),",").concat(F.x,",").concat(F.y,`
    A`).concat(y,",").concat(y,",0,").concat(+(ce>180),",").concat(+(C<0),",").concat(re.x,",").concat(re.y,`
    A`).concat(m,",").concat(m,",0,0,").concat(+(C<0),",").concat(ie.x,",").concat(ie.y,`
  `);if(d>0){var ee=Hv({cx:i,cy:a,radius:d,angle:E,sign:C,isExternal:!0,cornerRadius:m,cornerIsExternal:M}),he=ee.circleTangency,ge=ee.lineTangency,Oe=ee.theta,at=Hv({cx:i,cy:a,radius:d,angle:N,sign:-C,isExternal:!0,cornerRadius:m,cornerIsExternal:M}),ke=at.circleTangency,qe=at.lineTangency,et=at.theta,st=M?Math.abs(E-N):Math.abs(E-N)-Oe-et;if(st<0&&m===0)return"".concat(J,"L").concat(i,",").concat(a,"Z");J+="L".concat(qe.x,",").concat(qe.y,`
      A`).concat(m,",").concat(m,",0,0,").concat(+(C<0),",").concat(ke.x,",").concat(ke.y,`
      A`).concat(d,",").concat(d,",0,").concat(+(st>180),",").concat(+(C>0),",").concat(he.x,",").concat(he.y,`
      A`).concat(m,",").concat(m,",0,0,").concat(+(C<0),",").concat(ge.x,",").concat(ge.y,"Z")}else J+="L".concat(i,",").concat(a,"Z");return J},GV={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},tR=function(t){var i=PC(PC({},GV),t),a=i.cx,d=i.cy,y=i.innerRadius,m=i.outerRadius,l=i.cornerRadius,M=i.forceCornerRadius,E=i.cornerIsExternal,N=i.startAngle,C=i.endAngle,L=i.className;if(m<y||N===C)return null;var F=ln("recharts-sector",L),H=m-y,G=If(l,H,0,!0),q;return G>0&&Math.abs(N-C)<360?q=VV({cx:a,cy:d,innerRadius:y,outerRadius:m,cornerRadius:Math.min(G,H/2),forceCornerRadius:M,cornerIsExternal:E,startAngle:N,endAngle:C}):q=eR({cx:a,cy:d,innerRadius:y,outerRadius:m,startAngle:N,endAngle:C}),$e.createElement("path",oS({},tn(i,!0),{className:F,d:q,role:"img"}))};function Ty(e){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ty(e)}function sS(){return sS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},sS.apply(this,arguments)}function EC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function CC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(i),!0).forEach(function(a){ZV(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):EC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function ZV(e,t,i){return t=HV(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function HV(e){var t=XV(e,"string");return Ty(t)=="symbol"?t:t+""}function XV(e,t){if(Ty(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Ty(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OC={curveBasisClosed:fL,curveBasisOpen:pL,curveBasis:dL,curveBumpX:Q4,curveBumpY:J4,curveLinearClosed:mL,curveLinear:ux,curveMonotoneX:gL,curveMonotoneY:yL,curveNatural:vL,curveStep:_L,curveStepAfter:bL,curveStepBefore:xL},Xv=function(t){return t.x===+t.x&&t.y===+t.y},Fg=function(t){return t.x},$g=function(t){return t.y},WV=function(t,i){if(Br(t))return t;var a="curve".concat(lx(t));return(a==="curveMonotone"||a==="curveBump")&&i?OC["".concat(a).concat(i==="vertical"?"Y":"X")]:OC[a]||ux},YV=function(t){var i=t.type,a=i===void 0?"linear":i,d=t.points,y=d===void 0?[]:d,m=t.baseLine,l=t.layout,M=t.connectNulls,E=M===void 0?!1:M,N=WV(a,l),C=E?y.filter(function(G){return Xv(G)}):y,L;if(Array.isArray(m)){var F=E?m.filter(function(G){return Xv(G)}):m,H=C.map(function(G,q){return CC(CC({},G),{},{base:F[q]})});return l==="vertical"?L=Bv().y($g).x1(Fg).x0(function(G){return G.base.x}):L=Bv().x(Fg).y1($g).y0(function(G){return G.base.y}),L.defined(Xv).curve(N),L(H)}return l==="vertical"&&Dt(m)?L=Bv().y($g).x1(Fg).x0(m):Dt(m)?L=Bv().x(Fg).y1($g).y0(m):L=ak().x(Fg).y($g),L.defined(Xv).curve(N),L(C)},lS=function(t){var i=t.className,a=t.points,d=t.path,y=t.pathRef;if((!a||!a.length)&&!d)return null;var m=a&&a.length?YV(t):d;return $e.createElement("path",sS({},tn(t,!1),o_(t),{className:ln("recharts-curve",i),d:m,ref:y}))},Rw={exports:{}},Dw,IC;function KV(){if(IC)return Dw;IC=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Dw=e,Dw}var zw,kC;function QV(){if(kC)return zw;kC=1;var e=KV();function t(){}function i(){}return i.resetWarningCache=t,zw=function(){function a(m,l,M,E,N,C){if(C!==e){var L=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw L.name="Invariant Violation",L}}a.isRequired=a;function d(){return a}var y={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:d,element:a,elementType:a,instanceOf:d,node:a,objectOf:d,oneOf:d,oneOfType:d,shape:d,exact:d,checkPropTypes:i,resetWarningCache:t};return y.PropTypes=y,y},zw}var NC;function JV(){return NC||(NC=1,Rw.exports=QV()()),Rw.exports}var e7=JV();const Sn=Bn(e7);var t7=Object.getOwnPropertyNames,r7=Object.getOwnPropertySymbols,n7=Object.prototype.hasOwnProperty;function RC(e,t){return function(a,d,y){return e(a,d,y)&&t(a,d,y)}}function Wv(e){return function(i,a,d){if(!i||!a||typeof i!="object"||typeof a!="object")return e(i,a,d);var y=d.cache,m=y.get(i),l=y.get(a);if(m&&l)return m===a&&l===i;y.set(i,a),y.set(a,i);var M=e(i,a,d);return y.delete(i),y.delete(a),M}}function DC(e){return t7(e).concat(r7(e))}var i7=Object.hasOwn||function(e,t){return n7.call(e,t)};function $f(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var a7="__v",o7="__o",s7="_owner",zC=Object.getOwnPropertyDescriptor,LC=Object.keys;function l7(e,t,i){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!i.equals(e[a],t[a],a,a,e,t,i))return!1;return!0}function c7(e,t){return $f(e.getTime(),t.getTime())}function u7(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function h7(e,t){return e===t}function BC(e,t,i){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var d=new Array(a),y=e.entries(),m,l,M=0;(m=y.next())&&!m.done;){for(var E=t.entries(),N=!1,C=0;(l=E.next())&&!l.done;){if(d[C]){C++;continue}var L=m.value,F=l.value;if(i.equals(L[0],F[0],M,C,e,t,i)&&i.equals(L[1],F[1],L[0],F[0],e,t,i)){N=d[C]=!0;break}C++}if(!N)return!1;M++}return!0}var d7=$f;function f7(e,t,i){var a=LC(e),d=a.length;if(LC(t).length!==d)return!1;for(;d-- >0;)if(!rR(e,t,i,a[d]))return!1;return!0}function qg(e,t,i){var a=DC(e),d=a.length;if(DC(t).length!==d)return!1;for(var y,m,l;d-- >0;)if(y=a[d],!rR(e,t,i,y)||(m=zC(e,y),l=zC(t,y),(m||l)&&(!m||!l||m.configurable!==l.configurable||m.enumerable!==l.enumerable||m.writable!==l.writable)))return!1;return!0}function p7(e,t){return $f(e.valueOf(),t.valueOf())}function m7(e,t){return e.source===t.source&&e.flags===t.flags}function FC(e,t,i){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var d=new Array(a),y=e.values(),m,l;(m=y.next())&&!m.done;){for(var M=t.values(),E=!1,N=0;(l=M.next())&&!l.done;){if(!d[N]&&i.equals(m.value,l.value,m.value,l.value,e,t,i)){E=d[N]=!0;break}N++}if(!E)return!1}return!0}function g7(e,t){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(e[i]!==t[i])return!1;return!0}function y7(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function rR(e,t,i,a){return(a===s7||a===o7||a===a7)&&(e.$$typeof||t.$$typeof)?!0:i7(t,a)&&i.equals(e[a],t[a],a,a,e,t,i)}var v7="[object Arguments]",_7="[object Boolean]",x7="[object Date]",b7="[object Error]",w7="[object Map]",S7="[object Number]",T7="[object Object]",A7="[object RegExp]",M7="[object Set]",j7="[object String]",P7="[object URL]",E7=Array.isArray,$C=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,qC=Object.assign,C7=Object.prototype.toString.call.bind(Object.prototype.toString);function O7(e){var t=e.areArraysEqual,i=e.areDatesEqual,a=e.areErrorsEqual,d=e.areFunctionsEqual,y=e.areMapsEqual,m=e.areNumbersEqual,l=e.areObjectsEqual,M=e.arePrimitiveWrappersEqual,E=e.areRegExpsEqual,N=e.areSetsEqual,C=e.areTypedArraysEqual,L=e.areUrlsEqual;return function(H,G,q){if(H===G)return!0;if(H==null||G==null)return!1;var re=typeof H;if(re!==typeof G)return!1;if(re!=="object")return re==="number"?m(H,G,q):re==="function"?d(H,G,q):!1;var ie=H.constructor;if(ie!==G.constructor)return!1;if(ie===Object)return l(H,G,q);if(E7(H))return t(H,G,q);if($C!=null&&$C(H))return C(H,G,q);if(ie===Date)return i(H,G,q);if(ie===RegExp)return E(H,G,q);if(ie===Map)return y(H,G,q);if(ie===Set)return N(H,G,q);var ne=C7(H);return ne===x7?i(H,G,q):ne===A7?E(H,G,q):ne===w7?y(H,G,q):ne===M7?N(H,G,q):ne===T7?typeof H.then!="function"&&typeof G.then!="function"&&l(H,G,q):ne===P7?L(H,G,q):ne===b7?a(H,G,q):ne===v7?l(H,G,q):ne===_7||ne===S7||ne===j7?M(H,G,q):!1}}function I7(e){var t=e.circular,i=e.createCustomConfig,a=e.strict,d={areArraysEqual:a?qg:l7,areDatesEqual:c7,areErrorsEqual:u7,areFunctionsEqual:h7,areMapsEqual:a?RC(BC,qg):BC,areNumbersEqual:d7,areObjectsEqual:a?qg:f7,arePrimitiveWrappersEqual:p7,areRegExpsEqual:m7,areSetsEqual:a?RC(FC,qg):FC,areTypedArraysEqual:a?qg:g7,areUrlsEqual:y7};if(i&&(d=qC({},d,i(d))),t){var y=Wv(d.areArraysEqual),m=Wv(d.areMapsEqual),l=Wv(d.areObjectsEqual),M=Wv(d.areSetsEqual);d=qC({},d,{areArraysEqual:y,areMapsEqual:m,areObjectsEqual:l,areSetsEqual:M})}return d}function k7(e){return function(t,i,a,d,y,m,l){return e(t,i,l)}}function N7(e){var t=e.circular,i=e.comparator,a=e.createState,d=e.equals,y=e.strict;if(a)return function(M,E){var N=a(),C=N.cache,L=C===void 0?t?new WeakMap:void 0:C,F=N.meta;return i(M,E,{cache:L,equals:d,meta:F,strict:y})};if(t)return function(M,E){return i(M,E,{cache:new WeakMap,equals:d,meta:void 0,strict:y})};var m={cache:void 0,equals:d,meta:void 0,strict:y};return function(M,E){return i(M,E,m)}}var R7=bd();bd({strict:!0});bd({circular:!0});bd({circular:!0,strict:!0});bd({createInternalComparator:function(){return $f}});bd({strict:!0,createInternalComparator:function(){return $f}});bd({circular:!0,createInternalComparator:function(){return $f}});bd({circular:!0,createInternalComparator:function(){return $f},strict:!0});function bd(e){e===void 0&&(e={});var t=e.circular,i=t===void 0?!1:t,a=e.createInternalComparator,d=e.createState,y=e.strict,m=y===void 0?!1:y,l=I7(e),M=O7(l),E=a?a(M):k7(M);return N7({circular:i,comparator:M,createState:d,equals:E,strict:m})}function D7(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function UC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=-1,a=function d(y){i<0&&(i=y),y-i>t?(e(y),i=-1):D7(d)};requestAnimationFrame(a)}function cS(e){"@babel/helpers - typeof";return cS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cS(e)}function z7(e){return $7(e)||F7(e)||B7(e)||L7()}function L7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B7(e,t){if(e){if(typeof e=="string")return VC(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return VC(e,t)}}function VC(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function F7(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $7(e){if(Array.isArray(e))return e}function q7(){var e={},t=function(){return null},i=!1,a=function d(y){if(!i){if(Array.isArray(y)){if(!y.length)return;var m=y,l=z7(m),M=l[0],E=l.slice(1);if(typeof M=="number"){UC(d.bind(null,E),M);return}d(M),UC(d.bind(null,E));return}cS(y)==="object"&&(e=y,t(e)),typeof y=="function"&&y()}};return{stop:function(){i=!0},start:function(y){i=!1,a(y)},subscribe:function(y){return t=y,function(){t=function(){return null}}}}}function Ay(e){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ay(e)}function GC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function ZC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?GC(Object(i),!0).forEach(function(a){nR(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):GC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function nR(e,t,i){return t=U7(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function U7(e){var t=V7(e,"string");return Ay(t)==="symbol"?t:String(t)}function V7(e,t){if(Ay(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Ay(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G7=function(t,i){return[Object.keys(t),Object.keys(i)].reduce(function(a,d){return a.filter(function(y){return d.includes(y)})})},Z7=function(t){return t},H7=function(t){return t.replace(/([A-Z])/g,function(i){return"-".concat(i.toLowerCase())})},Qg=function(t,i){return Object.keys(i).reduce(function(a,d){return ZC(ZC({},a),{},nR({},d,t(d,i[d])))},{})},HC=function(t,i,a){return t.map(function(d){return"".concat(H7(d)," ").concat(i,"ms ").concat(a)}).join(",")};function X7(e,t){return K7(e)||Y7(e,t)||iR(e,t)||W7()}function W7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y7(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,d,y,m,l=[],M=!0,E=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(l.push(a.value),l.length!==t);M=!0);}catch(N){E=!0,d=N}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(E)throw d}}return l}}function K7(e){if(Array.isArray(e))return e}function Q7(e){return t9(e)||e9(e)||iR(e)||J7()}function J7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iR(e,t){if(e){if(typeof e=="string")return uS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return uS(e,t)}}function e9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function t9(e){if(Array.isArray(e))return uS(e)}function uS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var R_=1e-4,aR=function(t,i){return[0,3*t,3*i-6*t,3*t-3*i+1]},oR=function(t,i){return t.map(function(a,d){return a*Math.pow(i,d)}).reduce(function(a,d){return a+d})},XC=function(t,i){return function(a){var d=aR(t,i);return oR(d,a)}},r9=function(t,i){return function(a){var d=aR(t,i),y=[].concat(Q7(d.map(function(m,l){return m*l}).slice(1)),[0]);return oR(y,a)}},WC=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var d=i[0],y=i[1],m=i[2],l=i[3];if(i.length===1)switch(i[0]){case"linear":d=0,y=0,m=1,l=1;break;case"ease":d=.25,y=.1,m=.25,l=1;break;case"ease-in":d=.42,y=0,m=1,l=1;break;case"ease-out":d=.42,y=0,m=.58,l=1;break;case"ease-in-out":d=0,y=0,m=.58,l=1;break;default:{var M=i[0].split("(");if(M[0]==="cubic-bezier"&&M[1].split(")")[0].split(",").length===4){var E=M[1].split(")")[0].split(",").map(function(q){return parseFloat(q)}),N=X7(E,4);d=N[0],y=N[1],m=N[2],l=N[3]}}}var C=XC(d,m),L=XC(y,l),F=r9(d,m),H=function(re){return re>1?1:re<0?0:re},G=function(re){for(var ie=re>1?1:re,ne=ie,ce=0;ce<8;++ce){var J=C(ne)-ie,ee=F(ne);if(Math.abs(J-ie)<R_||ee<R_)return L(ne);ne=H(ne-J/ee)}return L(ne)};return G.isStepper=!1,G},n9=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.stiff,a=i===void 0?100:i,d=t.damping,y=d===void 0?8:d,m=t.dt,l=m===void 0?17:m,M=function(N,C,L){var F=-(N-C)*a,H=L*y,G=L+(F-H)*l/1e3,q=L*l/1e3+N;return Math.abs(q-C)<R_&&Math.abs(G)<R_?[C,0]:[q,G]};return M.isStepper=!0,M.dt=l,M},i9=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var d=i[0];if(typeof d=="string")switch(d){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return WC(d);case"spring":return n9();default:if(d.split("(")[0]==="cubic-bezier")return WC(d)}return typeof d=="function"?d:null};function My(e){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},My(e)}function YC(e){return s9(e)||o9(e)||sR(e)||a9()}function a9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function s9(e){if(Array.isArray(e))return dS(e)}function KC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function za(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?KC(Object(i),!0).forEach(function(a){hS(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):KC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function hS(e,t,i){return t=l9(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l9(e){var t=c9(e,"string");return My(t)==="symbol"?t:String(t)}function c9(e,t){if(My(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(My(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u9(e,t){return f9(e)||d9(e,t)||sR(e,t)||h9()}function h9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sR(e,t){if(e){if(typeof e=="string")return dS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return dS(e,t)}}function dS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function d9(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,d,y,m,l=[],M=!0,E=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(l.push(a.value),l.length!==t);M=!0);}catch(N){E=!0,d=N}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(E)throw d}}return l}}function f9(e){if(Array.isArray(e))return e}var D_=function(t,i,a){return t+(i-t)*a},fS=function(t){var i=t.from,a=t.to;return i!==a},p9=function e(t,i,a){var d=Qg(function(y,m){if(fS(m)){var l=t(m.from,m.to,m.velocity),M=u9(l,2),E=M[0],N=M[1];return za(za({},m),{},{from:E,velocity:N})}return m},i);return a<1?Qg(function(y,m){return fS(m)?za(za({},m),{},{velocity:D_(m.velocity,d[y].velocity,a),from:D_(m.from,d[y].from,a)}):m},i):e(t,d,a-1)};const m9=function(e,t,i,a,d){var y=G7(e,t),m=y.reduce(function(q,re){return za(za({},q),{},hS({},re,[e[re],t[re]]))},{}),l=y.reduce(function(q,re){return za(za({},q),{},hS({},re,{from:e[re],velocity:0,to:t[re]}))},{}),M=-1,E,N,C=function(){return null},L=function(){return Qg(function(re,ie){return ie.from},l)},F=function(){return!Object.values(l).filter(fS).length},H=function(re){E||(E=re);var ie=re-E,ne=ie/i.dt;l=p9(i,l,ne),d(za(za(za({},e),t),L())),E=re,F()||(M=requestAnimationFrame(C))},G=function(re){N||(N=re);var ie=(re-N)/a,ne=Qg(function(J,ee){return D_.apply(void 0,YC(ee).concat([i(ie)]))},m);if(d(za(za(za({},e),t),ne)),ie<1)M=requestAnimationFrame(C);else{var ce=Qg(function(J,ee){return D_.apply(void 0,YC(ee).concat([i(1)]))},m);d(za(za(za({},e),t),ce))}};return C=i.isStepper?H:G,function(){return requestAnimationFrame(C),function(){cancelAnimationFrame(M)}}};function pm(e){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pm(e)}var g9=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function y9(e,t){if(e==null)return{};var i=v9(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function v9(e,t){if(e==null)return{};var i={},a=Object.keys(e),d,y;for(y=0;y<a.length;y++)d=a[y],!(t.indexOf(d)>=0)&&(i[d]=e[d]);return i}function Lw(e){return w9(e)||b9(e)||x9(e)||_9()}function _9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x9(e,t){if(e){if(typeof e=="string")return pS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return pS(e,t)}}function b9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function w9(e){if(Array.isArray(e))return pS(e)}function pS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function QC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function oc(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?QC(Object(i),!0).forEach(function(a){Hg(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):QC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Hg(e,t,i){return t=lR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function S9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T9(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,lR(a.key),a)}}function A9(e,t,i){return t&&T9(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lR(e){var t=M9(e,"string");return pm(t)==="symbol"?t:String(t)}function M9(e,t){if(pm(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(pm(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mS(e,t)}function mS(e,t){return mS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},mS(e,t)}function P9(e){var t=E9();return function(){var a=z_(e),d;if(t){var y=z_(this).constructor;d=Reflect.construct(a,arguments,y)}else d=a.apply(this,arguments);return gS(this,d)}}function gS(e,t){if(t&&(pm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yS(e)}function yS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function z_(e){return z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},z_(e)}var rh=function(e){j9(i,e);var t=P9(i);function i(a,d){var y;S9(this,i),y=t.call(this,a,d);var m=y.props,l=m.isActive,M=m.attributeName,E=m.from,N=m.to,C=m.steps,L=m.children,F=m.duration;if(y.handleStyleChange=y.handleStyleChange.bind(yS(y)),y.changeStyle=y.changeStyle.bind(yS(y)),!l||F<=0)return y.state={style:{}},typeof L=="function"&&(y.state={style:N}),gS(y);if(C&&C.length)y.state={style:C[0].style};else if(E){if(typeof L=="function")return y.state={style:E},gS(y);y.state={style:M?Hg({},M,E):E}}else y.state={style:{}};return y}return A9(i,[{key:"componentDidMount",value:function(){var d=this.props,y=d.isActive,m=d.canBegin;this.mounted=!0,!(!y||!m)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(d){var y=this.props,m=y.isActive,l=y.canBegin,M=y.attributeName,E=y.shouldReAnimate,N=y.to,C=y.from,L=this.state.style;if(l){if(!m){var F={style:M?Hg({},M,N):N};this.state&&L&&(M&&L[M]!==N||!M&&L!==N)&&this.setState(F);return}if(!(R7(d.to,N)&&d.canBegin&&d.isActive)){var H=!d.canBegin||!d.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var G=H||E?C:d.to;if(this.state&&L){var q={style:M?Hg({},M,G):G};(M&&L[M]!==G||!M&&L!==G)&&this.setState(q)}this.runAnimation(oc(oc({},this.props),{},{from:G,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var d=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),d&&d()}},{key:"handleStyleChange",value:function(d){this.changeStyle(d)}},{key:"changeStyle",value:function(d){this.mounted&&this.setState({style:d})}},{key:"runJSAnimation",value:function(d){var y=this,m=d.from,l=d.to,M=d.duration,E=d.easing,N=d.begin,C=d.onAnimationEnd,L=d.onAnimationStart,F=m9(m,l,i9(E),M,this.changeStyle),H=function(){y.stopJSAnimation=F()};this.manager.start([L,N,H,M,C])}},{key:"runStepAnimation",value:function(d){var y=this,m=d.steps,l=d.begin,M=d.onAnimationStart,E=m[0],N=E.style,C=E.duration,L=C===void 0?0:C,F=function(G,q,re){if(re===0)return G;var ie=q.duration,ne=q.easing,ce=ne===void 0?"ease":ne,J=q.style,ee=q.properties,he=q.onAnimationEnd,ge=re>0?m[re-1]:q,Oe=ee||Object.keys(J);if(typeof ce=="function"||ce==="spring")return[].concat(Lw(G),[y.runJSAnimation.bind(y,{from:ge.style,to:J,duration:ie,easing:ce}),ie]);var at=HC(Oe,ie,ce),ke=oc(oc(oc({},ge.style),J),{},{transition:at});return[].concat(Lw(G),[ke,ie,he]).filter(Z7)};return this.manager.start([M].concat(Lw(m.reduce(F,[N,Math.max(L,l)])),[d.onAnimationEnd]))}},{key:"runAnimation",value:function(d){this.manager||(this.manager=q7());var y=d.begin,m=d.duration,l=d.attributeName,M=d.to,E=d.easing,N=d.onAnimationStart,C=d.onAnimationEnd,L=d.steps,F=d.children,H=this.manager;if(this.unSubscribe=H.subscribe(this.handleStyleChange),typeof E=="function"||typeof F=="function"||E==="spring"){this.runJSAnimation(d);return}if(L.length>1){this.runStepAnimation(d);return}var G=l?Hg({},l,M):M,q=HC(Object.keys(G),m,E);H.start([N,y,oc(oc({},G),{},{transition:q}),m,C])}},{key:"render",value:function(){var d=this.props,y=d.children;d.begin;var m=d.duration;d.attributeName,d.easing;var l=d.isActive;d.steps,d.from,d.to,d.canBegin,d.onAnimationEnd,d.shouldReAnimate,d.onAnimationReStart;var M=y9(d,g9),E=Fe.Children.count(y),N=this.state.style;if(typeof y=="function")return y(N);if(!l||E===0||m<=0)return y;var C=function(F){var H=F.props,G=H.style,q=G===void 0?{}:G,re=H.className,ie=Fe.cloneElement(F,oc(oc({},M),{},{style:oc(oc({},q),N),className:re}));return ie};return E===1?C(Fe.Children.only(y)):$e.createElement("div",null,Fe.Children.map(y,function(L){return C(L)}))}}]),i}(Fe.PureComponent);rh.displayName="Animate";rh.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};rh.propTypes={from:Sn.oneOfType([Sn.object,Sn.string]),to:Sn.oneOfType([Sn.object,Sn.string]),attributeName:Sn.string,duration:Sn.number,begin:Sn.number,easing:Sn.oneOfType([Sn.string,Sn.func]),steps:Sn.arrayOf(Sn.shape({duration:Sn.number.isRequired,style:Sn.object.isRequired,easing:Sn.oneOfType([Sn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Sn.func]),properties:Sn.arrayOf("string"),onAnimationEnd:Sn.func})),children:Sn.oneOfType([Sn.node,Sn.func]),isActive:Sn.bool,canBegin:Sn.bool,onAnimationEnd:Sn.func,shouldReAnimate:Sn.bool,onAnimationStart:Sn.func,onAnimationReStart:Sn.func};function jy(e){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jy(e)}function L_(){return L_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},L_.apply(this,arguments)}function C9(e,t){return N9(e)||k9(e,t)||I9(e,t)||O9()}function O9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I9(e,t){if(e){if(typeof e=="string")return JC(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return JC(e,t)}}function JC(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function k9(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,d,y,m,l=[],M=!0,E=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(l.push(a.value),l.length!==t);M=!0);}catch(N){E=!0,d=N}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(E)throw d}}return l}}function N9(e){if(Array.isArray(e))return e}function eO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function tO(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?eO(Object(i),!0).forEach(function(a){R9(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):eO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function R9(e,t,i){return t=D9(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function D9(e){var t=z9(e,"string");return jy(t)=="symbol"?t:t+""}function z9(e,t){if(jy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(jy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rO=function(t,i,a,d,y){var m=Math.min(Math.abs(a)/2,Math.abs(d)/2),l=d>=0?1:-1,M=a>=0?1:-1,E=d>=0&&a>=0||d<0&&a<0?1:0,N;if(m>0&&y instanceof Array){for(var C=[0,0,0,0],L=0,F=4;L<F;L++)C[L]=y[L]>m?m:y[L];N="M".concat(t,",").concat(i+l*C[0]),C[0]>0&&(N+="A ".concat(C[0],",").concat(C[0],",0,0,").concat(E,",").concat(t+M*C[0],",").concat(i)),N+="L ".concat(t+a-M*C[1],",").concat(i),C[1]>0&&(N+="A ".concat(C[1],",").concat(C[1],",0,0,").concat(E,`,
        `).concat(t+a,",").concat(i+l*C[1])),N+="L ".concat(t+a,",").concat(i+d-l*C[2]),C[2]>0&&(N+="A ".concat(C[2],",").concat(C[2],",0,0,").concat(E,`,
        `).concat(t+a-M*C[2],",").concat(i+d)),N+="L ".concat(t+M*C[3],",").concat(i+d),C[3]>0&&(N+="A ".concat(C[3],",").concat(C[3],",0,0,").concat(E,`,
        `).concat(t,",").concat(i+d-l*C[3])),N+="Z"}else if(m>0&&y===+y&&y>0){var H=Math.min(m,y);N="M ".concat(t,",").concat(i+l*H,`
            A `).concat(H,",").concat(H,",0,0,").concat(E,",").concat(t+M*H,",").concat(i,`
            L `).concat(t+a-M*H,",").concat(i,`
            A `).concat(H,",").concat(H,",0,0,").concat(E,",").concat(t+a,",").concat(i+l*H,`
            L `).concat(t+a,",").concat(i+d-l*H,`
            A `).concat(H,",").concat(H,",0,0,").concat(E,",").concat(t+a-M*H,",").concat(i+d,`
            L `).concat(t+M*H,",").concat(i+d,`
            A `).concat(H,",").concat(H,",0,0,").concat(E,",").concat(t,",").concat(i+d-l*H," Z")}else N="M ".concat(t,",").concat(i," h ").concat(a," v ").concat(d," h ").concat(-a," Z");return N},L9=function(t,i){if(!t||!i)return!1;var a=t.x,d=t.y,y=i.x,m=i.y,l=i.width,M=i.height;if(Math.abs(l)>0&&Math.abs(M)>0){var E=Math.min(y,y+l),N=Math.max(y,y+l),C=Math.min(m,m+M),L=Math.max(m,m+M);return a>=E&&a<=N&&d>=C&&d<=L}return!1},B9={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$T=function(t){var i=tO(tO({},B9),t),a=Fe.useRef(),d=Fe.useState(-1),y=C9(d,2),m=y[0],l=y[1];Fe.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var ce=a.current.getTotalLength();ce&&l(ce)}catch{}},[]);var M=i.x,E=i.y,N=i.width,C=i.height,L=i.radius,F=i.className,H=i.animationEasing,G=i.animationDuration,q=i.animationBegin,re=i.isAnimationActive,ie=i.isUpdateAnimationActive;if(M!==+M||E!==+E||N!==+N||C!==+C||N===0||C===0)return null;var ne=ln("recharts-rectangle",F);return ie?$e.createElement(rh,{canBegin:m>0,from:{width:N,height:C,x:M,y:E},to:{width:N,height:C,x:M,y:E},duration:G,animationEasing:H,isActive:ie},function(ce){var J=ce.width,ee=ce.height,he=ce.x,ge=ce.y;return $e.createElement(rh,{canBegin:m>0,from:"0px ".concat(m===-1?1:m,"px"),to:"".concat(m,"px 0px"),attributeName:"strokeDasharray",begin:q,duration:G,isActive:re,easing:H},$e.createElement("path",L_({},tn(i,!0),{className:ne,d:rO(he,ge,J,ee,L),ref:a})))}):$e.createElement("path",L_({},tn(i,!0),{className:ne,d:rO(M,E,N,C,L)}))};function vS(){return vS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},vS.apply(this,arguments)}var qT=function(t){var i=t.cx,a=t.cy,d=t.r,y=t.className,m=ln("recharts-dot",y);return i===+i&&a===+a&&d===+d?$e.createElement("circle",vS({},tn(t,!1),o_(t),{className:m,cx:i,cy:a,r:d})):null};function Py(e){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Py(e)}var F9=["x","y","top","left","width","height","className"];function _S(){return _S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},_S.apply(this,arguments)}function nO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function $9(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?nO(Object(i),!0).forEach(function(a){q9(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):nO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function q9(e,t,i){return t=U9(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function U9(e){var t=V9(e,"string");return Py(t)=="symbol"?t:t+""}function V9(e,t){if(Py(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Py(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G9(e,t){if(e==null)return{};var i=Z9(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Z9(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var H9=function(t,i,a,d,y,m){return"M".concat(t,",").concat(y,"v").concat(d,"M").concat(m,",").concat(i,"h").concat(a)},X9=function(t){var i=t.x,a=i===void 0?0:i,d=t.y,y=d===void 0?0:d,m=t.top,l=m===void 0?0:m,M=t.left,E=M===void 0?0:M,N=t.width,C=N===void 0?0:N,L=t.height,F=L===void 0?0:L,H=t.className,G=G9(t,F9),q=$9({x:a,y,top:l,left:E,width:C,height:F},G);return!Dt(a)||!Dt(y)||!Dt(C)||!Dt(F)||!Dt(l)||!Dt(E)?null:$e.createElement("path",_S({},tn(q,!0),{className:ln("recharts-cross",H),d:H9(a,y,C,F,l,E)}))},Bw,iO;function W9(){if(iO)return Bw;iO=1;var e=Pk(),t=e(Object.getPrototypeOf,Object);return Bw=t,Bw}var Fw,aO;function Y9(){if(aO)return Fw;aO=1;var e=nh(),t=W9(),i=ih(),a="[object Object]",d=Function.prototype,y=Object.prototype,m=d.toString,l=y.hasOwnProperty,M=m.call(Object);function E(N){if(!i(N)||e(N)!=a)return!1;var C=t(N);if(C===null)return!0;var L=l.call(C,"constructor")&&C.constructor;return typeof L=="function"&&L instanceof L&&m.call(L)==M}return Fw=E,Fw}var K9=Y9();const Q9=Bn(K9);var $w,oO;function J9(){if(oO)return $w;oO=1;var e=nh(),t=ih(),i="[object Boolean]";function a(d){return d===!0||d===!1||t(d)&&e(d)==i}return $w=a,$w}var eG=J9();const tG=Bn(eG);function Ey(e){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ey(e)}function B_(){return B_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},B_.apply(this,arguments)}function rG(e,t){return oG(e)||aG(e,t)||iG(e,t)||nG()}function nG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iG(e,t){if(e){if(typeof e=="string")return sO(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return sO(e,t)}}function sO(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function aG(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,d,y,m,l=[],M=!0,E=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(l.push(a.value),l.length!==t);M=!0);}catch(N){E=!0,d=N}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(E)throw d}}return l}}function oG(e){if(Array.isArray(e))return e}function lO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function cO(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?lO(Object(i),!0).forEach(function(a){sG(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):lO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function sG(e,t,i){return t=lG(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function lG(e){var t=cG(e,"string");return Ey(t)=="symbol"?t:t+""}function cG(e,t){if(Ey(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Ey(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uO=function(t,i,a,d,y){var m=a-d,l;return l="M ".concat(t,",").concat(i),l+="L ".concat(t+a,",").concat(i),l+="L ".concat(t+a-m/2,",").concat(i+y),l+="L ".concat(t+a-m/2-d,",").concat(i+y),l+="L ".concat(t,",").concat(i," Z"),l},uG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hG=function(t){var i=cO(cO({},uG),t),a=Fe.useRef(),d=Fe.useState(-1),y=rG(d,2),m=y[0],l=y[1];Fe.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var ne=a.current.getTotalLength();ne&&l(ne)}catch{}},[]);var M=i.x,E=i.y,N=i.upperWidth,C=i.lowerWidth,L=i.height,F=i.className,H=i.animationEasing,G=i.animationDuration,q=i.animationBegin,re=i.isUpdateAnimationActive;if(M!==+M||E!==+E||N!==+N||C!==+C||L!==+L||N===0&&C===0||L===0)return null;var ie=ln("recharts-trapezoid",F);return re?$e.createElement(rh,{canBegin:m>0,from:{upperWidth:0,lowerWidth:0,height:L,x:M,y:E},to:{upperWidth:N,lowerWidth:C,height:L,x:M,y:E},duration:G,animationEasing:H,isActive:re},function(ne){var ce=ne.upperWidth,J=ne.lowerWidth,ee=ne.height,he=ne.x,ge=ne.y;return $e.createElement(rh,{canBegin:m>0,from:"0px ".concat(m===-1?1:m,"px"),to:"".concat(m,"px 0px"),attributeName:"strokeDasharray",begin:q,duration:G,easing:H},$e.createElement("path",B_({},tn(i,!0),{className:ie,d:uO(he,ge,ce,J,ee),ref:a})))}):$e.createElement("g",null,$e.createElement("path",B_({},tn(i,!0),{className:ie,d:uO(M,E,N,C,L)})))},dG=["option","shapeType","propTransformer","activeClassName","isActive"];function Cy(e){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cy(e)}function fG(e,t){if(e==null)return{};var i=pG(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function pG(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function hO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function F_(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?hO(Object(i),!0).forEach(function(a){mG(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):hO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function mG(e,t,i){return t=gG(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function gG(e){var t=yG(e,"string");return Cy(t)=="symbol"?t:t+""}function yG(e,t){if(Cy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Cy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vG(e,t){return F_(F_({},t),e)}function _G(e,t){return e==="symbols"}function dO(e){var t=e.shapeType,i=e.elementProps;switch(t){case"rectangle":return $e.createElement($T,i);case"trapezoid":return $e.createElement(hG,i);case"sector":return $e.createElement(tR,i);case"symbols":if(_G(t))return $e.createElement(oT,i);break;default:return null}}function xG(e){return Fe.isValidElement(e)?e.props:e}function bG(e){var t=e.option,i=e.shapeType,a=e.propTransformer,d=a===void 0?vG:a,y=e.activeClassName,m=y===void 0?"recharts-active-shape":y,l=e.isActive,M=fG(e,dG),E;if(Fe.isValidElement(t))E=Fe.cloneElement(t,F_(F_({},M),xG(t)));else if(Br(t))E=t(M);else if(Q9(t)&&!tG(t)){var N=d(t,M);E=$e.createElement(dO,{shapeType:i,elementProps:N})}else{var C=M;E=$e.createElement(dO,{shapeType:i,elementProps:C})}return l?$e.createElement(Oi,{className:m},E):E}function Mx(e,t){return t!=null&&"trapezoids"in e.props}function jx(e,t){return t!=null&&"sectors"in e.props}function Oy(e,t){return t!=null&&"points"in e.props}function wG(e,t){var i,a,d=e.x===(t==null||(i=t.labelViewBox)===null||i===void 0?void 0:i.x)||e.x===t.x,y=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return d&&y}function SG(e,t){var i=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return i&&a}function TG(e,t){var i=e.x===t.x,a=e.y===t.y,d=e.z===t.z;return i&&a&&d}function AG(e,t){var i;return Mx(e,t)?i=wG:jx(e,t)?i=SG:Oy(e,t)&&(i=TG),i}function MG(e,t){var i;return Mx(e,t)?i="trapezoids":jx(e,t)?i="sectors":Oy(e,t)&&(i="points"),i}function jG(e,t){if(Mx(e,t)){var i;return(i=t.tooltipPayload)===null||i===void 0||(i=i[0])===null||i===void 0||(i=i.payload)===null||i===void 0?void 0:i.payload}if(jx(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Oy(e,t)?t.payload:{}}function PG(e){var t=e.activeTooltipItem,i=e.graphicalItem,a=e.itemData,d=MG(i,t),y=jG(i,t),m=a.filter(function(M,E){var N=Sx(y,M),C=i.props[d].filter(function(H){var G=AG(i,t);return G(H,t)}),L=i.props[d].indexOf(C[C.length-1]),F=E===L;return N&&F}),l=a.indexOf(m[m.length-1]);return l}var qw,fO;function EG(){if(fO)return qw;fO=1;var e=Math.ceil,t=Math.max;function i(a,d,y,m){for(var l=-1,M=t(e((d-a)/(y||1)),0),E=Array(M);M--;)E[m?M:++l]=a,a+=y;return E}return qw=i,qw}var Uw,pO;function cR(){if(pO)return Uw;pO=1;var e=Vk(),t=1/0,i=17976931348623157e292;function a(d){if(!d)return d===0?d:0;if(d=e(d),d===t||d===-1/0){var y=d<0?-1:1;return y*i}return d===d?d:0}return Uw=a,Uw}var Vw,mO;function CG(){if(mO)return Vw;mO=1;var e=EG(),t=px(),i=cR();function a(d){return function(y,m,l){return l&&typeof l!="number"&&t(y,m,l)&&(m=l=void 0),y=i(y),m===void 0?(m=y,y=0):m=i(m),l=l===void 0?y<m?1:-1:i(l),e(y,m,l,d)}}return Vw=a,Vw}var Gw,gO;function OG(){if(gO)return Gw;gO=1;var e=CG(),t=e();return Gw=t,Gw}var IG=OG();const $_=Bn(IG);function Iy(e){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iy(e)}function yO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function vO(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(i),!0).forEach(function(a){uR(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):yO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function uR(e,t,i){return t=kG(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function kG(e){var t=NG(e,"string");return Iy(t)=="symbol"?t:t+""}function NG(e,t){if(Iy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Iy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RG=["Webkit","Moz","O","ms"],DG=function(t,i){var a=t.replace(/(\w)/,function(y){return y.toUpperCase()}),d=RG.reduce(function(y,m){return vO(vO({},y),{},uR({},m+a,i))},{});return d[t]=i,d};function mm(e){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mm(e)}function q_(){return q_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},q_.apply(this,arguments)}function _O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Zw(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?_O(Object(i),!0).forEach(function(a){Ss(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_O(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function zG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xO(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,dR(a.key),a)}}function LG(e,t,i){return t&&xO(e.prototype,t),i&&xO(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function BG(e,t,i){return t=U_(t),FG(e,hR()?Reflect.construct(t,i||[],U_(e).constructor):t.apply(e,i))}function FG(e,t){if(t&&(mm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $G(e)}function $G(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hR=function(){return!!e})()}function U_(e){return U_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},U_(e)}function qG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xS(e,t)}function xS(e,t){return xS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},xS(e,t)}function Ss(e,t,i){return t=dR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function dR(e){var t=UG(e,"string");return mm(t)=="symbol"?t:t+""}function UG(e,t){if(mm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(mm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VG=function(t){var i=t.data,a=t.startIndex,d=t.endIndex,y=t.x,m=t.width,l=t.travellerWidth;if(!i||!i.length)return{};var M=i.length,E=Yg().domain($_(0,M)).range([y,y+m-l]),N=E.domain().map(function(C){return E(C)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:E(a),endX:E(d),scale:E,scaleValues:N}},bO=function(t){return t.changedTouches&&!!t.changedTouches.length},gm=function(e){function t(i){var a;return zG(this,t),a=BG(this,t,[i]),Ss(a,"handleDrag",function(d){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(d):a.state.isSlideMoving&&a.handleSlideDrag(d)}),Ss(a,"handleTouchMove",function(d){d.changedTouches!=null&&d.changedTouches.length>0&&a.handleDrag(d.changedTouches[0])}),Ss(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var d=a.props,y=d.endIndex,m=d.onDragEnd,l=d.startIndex;m==null||m({endIndex:y,startIndex:l})}),a.detachDragEndListener()}),Ss(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),Ss(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),Ss(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),Ss(a,"handleSlideDragStart",function(d){var y=bO(d)?d.changedTouches[0]:d;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:y.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return qG(t,e),LG(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var d=a.startX,y=a.endX,m=this.state.scaleValues,l=this.props,M=l.gap,E=l.data,N=E.length-1,C=Math.min(d,y),L=Math.max(d,y),F=t.getIndexInRange(m,C),H=t.getIndexInRange(m,L);return{startIndex:F-F%M,endIndex:H===N?N:H-H%M}}},{key:"getTextOfTick",value:function(a){var d=this.props,y=d.data,m=d.tickFormatter,l=d.dataKey,M=js(y[a],l,a);return Br(m)?m(M,a):M}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var d=this.state,y=d.slideMoveStartX,m=d.startX,l=d.endX,M=this.props,E=M.x,N=M.width,C=M.travellerWidth,L=M.startIndex,F=M.endIndex,H=M.onChange,G=a.pageX-y;G>0?G=Math.min(G,E+N-C-l,E+N-C-m):G<0&&(G=Math.max(G,E-m,E-l));var q=this.getIndex({startX:m+G,endX:l+G});(q.startIndex!==L||q.endIndex!==F)&&H&&H(q),this.setState({startX:m+G,endX:l+G,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,d){var y=bO(d)?d.changedTouches[0]:d;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:y.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var d=this.state,y=d.brushMoveStartX,m=d.movingTravellerId,l=d.endX,M=d.startX,E=this.state[m],N=this.props,C=N.x,L=N.width,F=N.travellerWidth,H=N.onChange,G=N.gap,q=N.data,re={startX:this.state.startX,endX:this.state.endX},ie=a.pageX-y;ie>0?ie=Math.min(ie,C+L-F-E):ie<0&&(ie=Math.max(ie,C-E)),re[m]=E+ie;var ne=this.getIndex(re),ce=ne.startIndex,J=ne.endIndex,ee=function(){var ge=q.length-1;return m==="startX"&&(l>M?ce%G===0:J%G===0)||l<M&&J===ge||m==="endX"&&(l>M?J%G===0:ce%G===0)||l>M&&J===ge};this.setState(Ss(Ss({},m,E+ie),"brushMoveStartX",a.pageX),function(){H&&ee()&&H(ne)})}},{key:"handleTravellerMoveKeyboard",value:function(a,d){var y=this,m=this.state,l=m.scaleValues,M=m.startX,E=m.endX,N=this.state[d],C=l.indexOf(N);if(C!==-1){var L=C+a;if(!(L===-1||L>=l.length)){var F=l[L];d==="startX"&&F>=E||d==="endX"&&F<=M||this.setState(Ss({},d,F),function(){y.props.onChange(y.getIndex({startX:y.state.startX,endX:y.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,d=a.x,y=a.y,m=a.width,l=a.height,M=a.fill,E=a.stroke;return $e.createElement("rect",{stroke:E,fill:M,x:d,y,width:m,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,d=a.x,y=a.y,m=a.width,l=a.height,M=a.data,E=a.children,N=a.padding,C=Fe.Children.only(E);return C?$e.cloneElement(C,{x:d,y,width:m,height:l,margin:N,compact:!0,data:M}):null}},{key:"renderTravellerLayer",value:function(a,d){var y,m,l=this,M=this.props,E=M.y,N=M.travellerWidth,C=M.height,L=M.traveller,F=M.ariaLabel,H=M.data,G=M.startIndex,q=M.endIndex,re=Math.max(a,this.props.x),ie=Zw(Zw({},tn(this.props,!1)),{},{x:re,y:E,width:N,height:C}),ne=F||"Min value: ".concat((y=H[G])===null||y===void 0?void 0:y.name,", Max value: ").concat((m=H[q])===null||m===void 0?void 0:m.name);return $e.createElement(Oi,{tabIndex:0,role:"slider","aria-label":ne,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[d],onTouchStart:this.travellerDragStartHandlers[d],onKeyDown:function(J){["ArrowLeft","ArrowRight"].includes(J.key)&&(J.preventDefault(),J.stopPropagation(),l.handleTravellerMoveKeyboard(J.key==="ArrowRight"?1:-1,d))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(L,ie))}},{key:"renderSlide",value:function(a,d){var y=this.props,m=y.y,l=y.height,M=y.stroke,E=y.travellerWidth,N=Math.min(a,d)+E,C=Math.max(Math.abs(d-a)-E,0);return $e.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:M,fillOpacity:.2,x:N,y:m,width:C,height:l})}},{key:"renderText",value:function(){var a=this.props,d=a.startIndex,y=a.endIndex,m=a.y,l=a.height,M=a.travellerWidth,E=a.stroke,N=this.state,C=N.startX,L=N.endX,F=5,H={pointerEvents:"none",fill:E};return $e.createElement(Oi,{className:"recharts-brush-texts"},$e.createElement(v_,q_({textAnchor:"end",verticalAnchor:"middle",x:Math.min(C,L)-F,y:m+l/2},H),this.getTextOfTick(d)),$e.createElement(v_,q_({textAnchor:"start",verticalAnchor:"middle",x:Math.max(C,L)+M+F,y:m+l/2},H),this.getTextOfTick(y)))}},{key:"render",value:function(){var a=this.props,d=a.data,y=a.className,m=a.children,l=a.x,M=a.y,E=a.width,N=a.height,C=a.alwaysShowText,L=this.state,F=L.startX,H=L.endX,G=L.isTextActive,q=L.isSlideMoving,re=L.isTravellerMoving,ie=L.isTravellerFocused;if(!d||!d.length||!Dt(l)||!Dt(M)||!Dt(E)||!Dt(N)||E<=0||N<=0)return null;var ne=ln("recharts-brush",y),ce=$e.Children.count(m)===1,J=DG("userSelect","none");return $e.createElement(Oi,{className:ne,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:J},this.renderBackground(),ce&&this.renderPanorama(),this.renderSlide(F,H),this.renderTravellerLayer(F,"startX"),this.renderTravellerLayer(H,"endX"),(G||q||re||ie||C)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var d=a.x,y=a.y,m=a.width,l=a.height,M=a.stroke,E=Math.floor(y+l/2)-1;return $e.createElement($e.Fragment,null,$e.createElement("rect",{x:d,y,width:m,height:l,fill:M,stroke:"none"}),$e.createElement("line",{x1:d+1,y1:E,x2:d+m-1,y2:E,fill:"none",stroke:"#fff"}),$e.createElement("line",{x1:d+1,y1:E+2,x2:d+m-1,y2:E+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,d){var y;return $e.isValidElement(a)?y=$e.cloneElement(a,d):Br(a)?y=a(d):y=t.renderDefaultTraveller(d),y}},{key:"getDerivedStateFromProps",value:function(a,d){var y=a.data,m=a.width,l=a.x,M=a.travellerWidth,E=a.updateId,N=a.startIndex,C=a.endIndex;if(y!==d.prevData||E!==d.prevUpdateId)return Zw({prevData:y,prevTravellerWidth:M,prevUpdateId:E,prevX:l,prevWidth:m},y&&y.length?VG({data:y,width:m,x:l,travellerWidth:M,startIndex:N,endIndex:C}):{scale:null,scaleValues:null});if(d.scale&&(m!==d.prevWidth||l!==d.prevX||M!==d.prevTravellerWidth)){d.scale.range([l,l+m-M]);var L=d.scale.domain().map(function(F){return d.scale(F)});return{prevData:y,prevTravellerWidth:M,prevUpdateId:E,prevX:l,prevWidth:m,startX:d.scale(a.startIndex),endX:d.scale(a.endIndex),scaleValues:L}}return null}},{key:"getIndexInRange",value:function(a,d){for(var y=a.length,m=0,l=y-1;l-m>1;){var M=Math.floor((m+l)/2);a[M]>d?l=M:m=M}return d>=a[l]?l:m}}])}(Fe.PureComponent);Ss(gm,"displayName","Brush");Ss(gm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Hw,wO;function GG(){if(wO)return Hw;wO=1;var e=fT();function t(i,a){var d;return e(i,function(y,m,l){return d=a(y,m,l),!d}),!!d}return Hw=t,Hw}var Xw,SO;function ZG(){if(SO)return Xw;SO=1;var e=bk(),t=vd(),i=GG(),a=is(),d=px();function y(m,l,M){var E=a(m)?e:i;return M&&d(m,l,M)&&(l=void 0),E(m,t(l,3))}return Xw=y,Xw}var HG=ZG();const XG=Bn(HG);var eu=function(t,i){var a=t.alwaysShow,d=t.ifOverflow;return a&&(d="extendDomain"),d===i},Ww,TO;function WG(){if(TO)return Ww;TO=1;var e=Bk();function t(i,a,d){a=="__proto__"&&e?e(i,a,{configurable:!0,enumerable:!0,value:d,writable:!0}):i[a]=d}return Ww=t,Ww}var Yw,AO;function YG(){if(AO)return Yw;AO=1;var e=WG(),t=zk(),i=vd();function a(d,y){var m={};return y=i(y,3),t(d,function(l,M,E){e(m,M,y(l,M,E))}),m}return Yw=a,Yw}var KG=YG();const QG=Bn(KG);var Kw,MO;function JG(){if(MO)return Kw;MO=1;function e(t,i){for(var a=-1,d=t==null?0:t.length;++a<d;)if(!i(t[a],a,t))return!1;return!0}return Kw=e,Kw}var Qw,jO;function eZ(){if(jO)return Qw;jO=1;var e=fT();function t(i,a){var d=!0;return e(i,function(y,m,l){return d=!!a(y,m,l),d}),d}return Qw=t,Qw}var Jw,PO;function tZ(){if(PO)return Jw;PO=1;var e=JG(),t=eZ(),i=vd(),a=is(),d=px();function y(m,l,M){var E=a(m)?e:t;return M&&d(m,l,M)&&(l=void 0),E(m,i(l,3))}return Jw=y,Jw}var rZ=tZ();const fR=Bn(rZ);var nZ=["x","y"];function ky(e){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ky(e)}function bS(){return bS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},bS.apply(this,arguments)}function EO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Ug(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?EO(Object(i),!0).forEach(function(a){iZ(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):EO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function iZ(e,t,i){return t=aZ(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function aZ(e){var t=oZ(e,"string");return ky(t)=="symbol"?t:t+""}function oZ(e,t){if(ky(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(ky(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sZ(e,t){if(e==null)return{};var i=lZ(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function lZ(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function cZ(e,t){var i=e.x,a=e.y,d=sZ(e,nZ),y="".concat(i),m=parseInt(y,10),l="".concat(a),M=parseInt(l,10),E="".concat(t.height||d.height),N=parseInt(E,10),C="".concat(t.width||d.width),L=parseInt(C,10);return Ug(Ug(Ug(Ug(Ug({},t),d),m?{x:m}:{}),M?{y:M}:{}),{},{height:N,width:L,name:t.name,radius:t.radius})}function CO(e){return $e.createElement(bG,bS({shapeType:"rectangle",propTransformer:cZ,activeClassName:"recharts-active-bar"},e))}var uZ=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,d){if(typeof t=="number")return t;var y=typeof a=="number";return y?t(a,d):(y||Nf(),i)}},hZ=["value","background"],pR;function ym(e){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ym(e)}function dZ(e,t){if(e==null)return{};var i=fZ(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function fZ(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function V_(){return V_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},V_.apply(this,arguments)}function OO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Xi(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?OO(Object(i),!0).forEach(function(a){pd(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):OO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function pZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IO(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,gR(a.key),a)}}function mZ(e,t,i){return t&&IO(e.prototype,t),i&&IO(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function gZ(e,t,i){return t=G_(t),yZ(e,mR()?Reflect.construct(t,i||[],G_(e).constructor):t.apply(e,i))}function yZ(e,t){if(t&&(ym(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vZ(e)}function vZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mR=function(){return!!e})()}function G_(e){return G_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},G_(e)}function _Z(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wS(e,t)}function wS(e,t){return wS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},wS(e,t)}function pd(e,t,i){return t=gR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function gR(e){var t=xZ(e,"string");return ym(t)=="symbol"?t:t+""}function xZ(e,t){if(ym(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(ym(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xy=function(e){function t(){var i;pZ(this,t);for(var a=arguments.length,d=new Array(a),y=0;y<a;y++)d[y]=arguments[y];return i=gZ(this,t,[].concat(d)),pd(i,"state",{isAnimationFinished:!1}),pd(i,"id",$y("recharts-bar-")),pd(i,"handleAnimationEnd",function(){var m=i.props.onAnimationEnd;i.setState({isAnimationFinished:!0}),m&&m()}),pd(i,"handleAnimationStart",function(){var m=i.props.onAnimationStart;i.setState({isAnimationFinished:!1}),m&&m()}),i}return _Z(t,e),mZ(t,[{key:"renderRectanglesStatically",value:function(a){var d=this,y=this.props,m=y.shape,l=y.dataKey,M=y.activeIndex,E=y.activeBar,N=tn(this.props,!1);return a&&a.map(function(C,L){var F=L===M,H=F?E:m,G=Xi(Xi(Xi({},N),C),{},{isActive:F,option:H,index:L,dataKey:l,onAnimationStart:d.handleAnimationStart,onAnimationEnd:d.handleAnimationEnd});return $e.createElement(Oi,V_({className:"recharts-bar-rectangle"},s_(d.props,C,L),{key:"rectangle-".concat(C==null?void 0:C.x,"-").concat(C==null?void 0:C.y,"-").concat(C==null?void 0:C.value,"-").concat(L)}),$e.createElement(CO,G))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,d=this.props,y=d.data,m=d.layout,l=d.isAnimationActive,M=d.animationBegin,E=d.animationDuration,N=d.animationEasing,C=d.animationId,L=this.state.prevData;return $e.createElement(rh,{begin:M,duration:E,isActive:l,easing:N,from:{t:0},to:{t:1},key:"bar-".concat(C),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(F){var H=F.t,G=y.map(function(q,re){var ie=L&&L[re];if(ie){var ne=cc(ie.x,q.x),ce=cc(ie.y,q.y),J=cc(ie.width,q.width),ee=cc(ie.height,q.height);return Xi(Xi({},q),{},{x:ne(H),y:ce(H),width:J(H),height:ee(H)})}if(m==="horizontal"){var he=cc(0,q.height),ge=he(H);return Xi(Xi({},q),{},{y:q.y+q.height-ge,height:ge})}var Oe=cc(0,q.width),at=Oe(H);return Xi(Xi({},q),{},{width:at})});return $e.createElement(Oi,null,a.renderRectanglesStatically(G))})}},{key:"renderRectangles",value:function(){var a=this.props,d=a.data,y=a.isAnimationActive,m=this.state.prevData;return y&&d&&d.length&&(!m||!Sx(m,d))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(d)}},{key:"renderBackground",value:function(){var a=this,d=this.props,y=d.data,m=d.dataKey,l=d.activeIndex,M=tn(this.props.background,!1);return y.map(function(E,N){E.value;var C=E.background,L=dZ(E,hZ);if(!C)return null;var F=Xi(Xi(Xi(Xi(Xi({},L),{},{fill:"#eee"},C),M),s_(a.props,E,N)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:m,index:N,className:"recharts-bar-background-rectangle"});return $e.createElement(CO,V_({key:"background-bar-".concat(N),option:a.props.background,isActive:N===l},F))})}},{key:"renderErrorBar",value:function(a,d){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var y=this.props,m=y.data,l=y.xAxis,M=y.yAxis,E=y.layout,N=y.children,C=hl(N,Hy);if(!C)return null;var L=E==="vertical"?m[0].height/2:m[0].width/2,F=function(q,re){var ie=Array.isArray(q.value)?q.value[1]:q.value;return{x:q.x,y:q.y,value:ie,errorVal:js(q,re)}},H={clipPath:a?"url(#clipPath-".concat(d,")"):null};return $e.createElement(Oi,H,C.map(function(G){return $e.cloneElement(G,{key:"error-bar-".concat(d,"-").concat(G.props.dataKey),data:m,xAxis:l,yAxis:M,layout:E,offset:L,dataPointFormatter:F})}))}},{key:"render",value:function(){var a=this.props,d=a.hide,y=a.data,m=a.className,l=a.xAxis,M=a.yAxis,E=a.left,N=a.top,C=a.width,L=a.height,F=a.isAnimationActive,H=a.background,G=a.id;if(d||!y||!y.length)return null;var q=this.state.isAnimationFinished,re=ln("recharts-bar",m),ie=l&&l.allowDataOverflow,ne=M&&M.allowDataOverflow,ce=ie||ne,J=Yr(G)?this.id:G;return $e.createElement(Oi,{className:re},ie||ne?$e.createElement("defs",null,$e.createElement("clipPath",{id:"clipPath-".concat(J)},$e.createElement("rect",{x:ie?E:E-C/2,y:ne?N:N-L/2,width:ie?C:C*2,height:ne?L:L*2}))):null,$e.createElement(Oi,{className:"recharts-bar-rectangles",clipPath:ce?"url(#clipPath-".concat(J,")"):null},H?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(ce,J),(!F||q)&&gd.renderCallByParent(this.props,y))}}],[{key:"getDerivedStateFromProps",value:function(a,d){return a.animationId!==d.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:d.curData}:a.data!==d.curData?{curData:a.data}:null}}])}(Fe.PureComponent);pR=Xy;pd(Xy,"displayName","Bar");pd(Xy,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!km.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});pd(Xy,"getComposedData",function(e){var t=e.props,i=e.item,a=e.barPosition,d=e.bandSize,y=e.xAxis,m=e.yAxis,l=e.xAxisTicks,M=e.yAxisTicks,E=e.stackedData,N=e.dataStartIndex,C=e.displayedData,L=e.offset,F=BU(a,i);if(!F)return null;var H=t.layout,G=i.type.defaultProps,q=G!==void 0?Xi(Xi({},G),i.props):i.props,re=q.dataKey,ie=q.children,ne=q.minPointSize,ce=H==="horizontal"?m:y,J=E?ce.scale.domain():null,ee=HU({numericAxis:ce}),he=hl(ie,Zk),ge=C.map(function(Oe,at){var ke,qe,et,st,rt,Te;E?ke=FU(E[N+at],J):(ke=js(Oe,re),Array.isArray(ke)||(ke=[ee,ke]));var Ge=uZ(ne,pR.defaultProps.minPointSize)(ke[1],at);if(H==="horizontal"){var Ze,dt=[m.scale(ke[0]),m.scale(ke[1])],xe=dt[0],We=dt[1];qe=mC({axis:y,ticks:l,bandSize:d,offset:F.offset,entry:Oe,index:at}),et=(Ze=We??xe)!==null&&Ze!==void 0?Ze:void 0,st=F.size;var lt=xe-We;if(rt=Number.isNaN(lt)?0:lt,Te={x:qe,y:m.y,width:st,height:m.height},Math.abs(Ge)>0&&Math.abs(rt)<Math.abs(Ge)){var ct=hc(rt||Ge)*(Math.abs(Ge)-Math.abs(rt));et-=ct,rt+=ct}}else{var jt=[y.scale(ke[0]),y.scale(ke[1])],Gt=jt[0],zt=jt[1];if(qe=Gt,et=mC({axis:m,ticks:M,bandSize:d,offset:F.offset,entry:Oe,index:at}),st=zt-Gt,rt=F.size,Te={x:y.x,y:et,width:y.width,height:rt},Math.abs(Ge)>0&&Math.abs(st)<Math.abs(Ge)){var yr=hc(st||Ge)*(Math.abs(Ge)-Math.abs(st));st+=yr}}return Xi(Xi(Xi({},Oe),{},{x:qe,y:et,width:st,height:rt,value:E?ke:ke[1],payload:Oe,background:Te},he&&he[at]&&he[at].props),{},{tooltipPayload:[QN(i,Oe)],tooltipPosition:{x:qe+st/2,y:et+rt/2}})});return Xi({data:ge,layout:H},L)});function Ny(e){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ny(e)}function bZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kO(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,yR(a.key),a)}}function wZ(e,t,i){return t&&kO(e.prototype,t),i&&kO(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function NO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function sc(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?NO(Object(i),!0).forEach(function(a){Px(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):NO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Px(e,t,i){return t=yR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yR(e){var t=SZ(e,"string");return Ny(t)=="symbol"?t:t+""}function SZ(e,t){if(Ny(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Ny(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TZ=function(t,i,a,d,y){var m=t.width,l=t.height,M=t.layout,E=t.children,N=Object.keys(i),C={left:a.left,leftMirror:a.left,right:m-a.right,rightMirror:m-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},L=!!Ts(E,Xy);return N.reduce(function(F,H){var G=i[H],q=G.orientation,re=G.domain,ie=G.padding,ne=ie===void 0?{}:ie,ce=G.mirror,J=G.reversed,ee="".concat(q).concat(ce?"Mirror":""),he,ge,Oe,at,ke;if(G.type==="number"&&(G.padding==="gap"||G.padding==="no-gap")){var qe=re[1]-re[0],et=1/0,st=G.categoricalDomain.sort(w4);if(st.forEach(function(jt,Gt){Gt>0&&(et=Math.min((jt||0)-(st[Gt-1]||0),et))}),Number.isFinite(et)){var rt=et/qe,Te=G.layout==="vertical"?a.height:a.width;if(G.padding==="gap"&&(he=rt*Te/2),G.padding==="no-gap"){var Ge=If(t.barCategoryGap,rt*Te),Ze=rt*Te/2;he=Ze-Ge-(Ze-Ge)/Te*Ge}}}d==="xAxis"?ge=[a.left+(ne.left||0)+(he||0),a.left+a.width-(ne.right||0)-(he||0)]:d==="yAxis"?ge=M==="horizontal"?[a.top+a.height-(ne.bottom||0),a.top+(ne.top||0)]:[a.top+(ne.top||0)+(he||0),a.top+a.height-(ne.bottom||0)-(he||0)]:ge=G.range,J&&(ge=[ge[1],ge[0]]);var dt=zU(G,y,L),xe=dt.scale,We=dt.realScaleType;xe.domain(re).range(ge),LU(xe);var lt=ZU(xe,sc(sc({},G),{},{realScaleType:We}));d==="xAxis"?(ke=q==="top"&&!ce||q==="bottom"&&ce,Oe=a.left,at=C[ee]-ke*G.height):d==="yAxis"&&(ke=q==="left"&&!ce||q==="right"&&ce,Oe=C[ee]-ke*G.width,at=a.top);var ct=sc(sc(sc({},G),lt),{},{realScaleType:We,x:Oe,y:at,scale:xe,width:d==="xAxis"?a.width:G.width,height:d==="yAxis"?a.height:G.height});return ct.bandSize=I_(ct,lt),!G.hide&&d==="xAxis"?C[ee]+=(ke?-1:1)*ct.height:G.hide||(C[ee]+=(ke?-1:1)*ct.width),sc(sc({},F),{},Px({},H,ct))},{})},vR=function(t,i){var a=t.x,d=t.y,y=i.x,m=i.y;return{x:Math.min(a,y),y:Math.min(d,m),width:Math.abs(y-a),height:Math.abs(m-d)}},AZ=function(t){var i=t.x1,a=t.y1,d=t.x2,y=t.y2;return vR({x:i,y:a},{x:d,y})},_R=function(){function e(t){bZ(this,e),this.scale=t}return wZ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=a.bandAware,y=a.position;if(i!==void 0){if(y)switch(y){case"start":return this.scale(i);case"middle":{var m=this.bandwidth?this.bandwidth()/2:0;return this.scale(i)+m}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(i)+l}default:return this.scale(i)}if(d){var M=this.bandwidth?this.bandwidth()/2:0;return this.scale(i)+M}return this.scale(i)}}},{key:"isInRange",value:function(i){var a=this.range(),d=a[0],y=a[a.length-1];return d<=y?i>=d&&i<=y:i>=y&&i<=d}}],[{key:"create",value:function(i){return new e(i)}}])}();Px(_R,"EPS",1e-4);var UT=function(t){var i=Object.keys(t).reduce(function(a,d){return sc(sc({},a),{},Px({},d,_R.create(t[d])))},{});return sc(sc({},i),{},{apply:function(d){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=y.bandAware,l=y.position;return QG(d,function(M,E){return i[E].apply(M,{bandAware:m,position:l})})},isInRange:function(d){return fR(d,function(y,m){return i[m].isInRange(y)})}})};function MZ(e){return(e%180+180)%180}var jZ=function(t){var i=t.width,a=t.height,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=MZ(d),m=y*Math.PI/180,l=Math.atan(a/i),M=m>l&&m<Math.PI-l?a/Math.sin(m):i/Math.cos(m);return Math.abs(M)},e2,RO;function PZ(){if(RO)return e2;RO=1;var e=vd(),t=qy(),i=dx();function a(d){return function(y,m,l){var M=Object(y);if(!t(y)){var E=e(m,3);y=i(y),m=function(C){return E(M[C],C,M)}}var N=d(y,m,l);return N>-1?M[E?y[N]:N]:void 0}}return e2=a,e2}var t2,DO;function EZ(){if(DO)return t2;DO=1;var e=cR();function t(i){var a=e(i),d=a%1;return a===a?d?a-d:a:0}return t2=t,t2}var r2,zO;function CZ(){if(zO)return r2;zO=1;var e=Ik(),t=vd(),i=EZ(),a=Math.max;function d(y,m,l){var M=y==null?0:y.length;if(!M)return-1;var E=l==null?0:i(l);return E<0&&(E=a(M+E,0)),e(y,t(m,3),E)}return r2=d,r2}var n2,LO;function OZ(){if(LO)return n2;LO=1;var e=PZ(),t=CZ(),i=e(t);return n2=i,n2}var IZ=OZ();const kZ=Bn(IZ);var NZ=XI();const RZ=Bn(NZ);var DZ=RZ(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),VT=Fe.createContext(void 0),GT=Fe.createContext(void 0),xR=Fe.createContext(void 0),bR=Fe.createContext({}),wR=Fe.createContext(void 0),SR=Fe.createContext(0),TR=Fe.createContext(0),BO=function(t){var i=t.state,a=i.xAxisMap,d=i.yAxisMap,y=i.offset,m=t.clipPathId,l=t.children,M=t.width,E=t.height,N=DZ(y);return $e.createElement(VT.Provider,{value:a},$e.createElement(GT.Provider,{value:d},$e.createElement(bR.Provider,{value:y},$e.createElement(xR.Provider,{value:N},$e.createElement(wR.Provider,{value:m},$e.createElement(SR.Provider,{value:E},$e.createElement(TR.Provider,{value:M},l)))))))},zZ=function(){return Fe.useContext(wR)},AR=function(t){var i=Fe.useContext(VT);i==null&&Nf();var a=i[t];return a==null&&Nf(),a},LZ=function(){var t=Fe.useContext(VT);return hd(t)},BZ=function(){var t=Fe.useContext(GT),i=kZ(t,function(a){return fR(a.domain,Number.isFinite)});return i||hd(t)},MR=function(t){var i=Fe.useContext(GT);i==null&&Nf();var a=i[t];return a==null&&Nf(),a},FZ=function(){var t=Fe.useContext(xR);return t},$Z=function(){return Fe.useContext(bR)},ZT=function(){return Fe.useContext(TR)},HT=function(){return Fe.useContext(SR)};function vm(e){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vm(e)}function qZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UZ(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,PR(a.key),a)}}function VZ(e,t,i){return t&&UZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function GZ(e,t,i){return t=Z_(t),ZZ(e,jR()?Reflect.construct(t,i||[],Z_(e).constructor):t.apply(e,i))}function ZZ(e,t){if(t&&(vm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HZ(e)}function HZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jR=function(){return!!e})()}function Z_(e){return Z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Z_(e)}function XZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SS(e,t)}function SS(e,t){return SS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},SS(e,t)}function FO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function $O(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?FO(Object(i),!0).forEach(function(a){XT(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):FO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function XT(e,t,i){return t=PR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function PR(e){var t=WZ(e,"string");return vm(t)=="symbol"?t:t+""}function WZ(e,t){if(vm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(vm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function YZ(e,t){return eH(e)||JZ(e,t)||QZ(e,t)||KZ()}function KZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QZ(e,t){if(e){if(typeof e=="string")return qO(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return qO(e,t)}}function qO(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function JZ(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,d,y,m,l=[],M=!0,E=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(l.push(a.value),l.length!==t);M=!0);}catch(N){E=!0,d=N}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(E)throw d}}return l}}function eH(e){if(Array.isArray(e))return e}function TS(){return TS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},TS.apply(this,arguments)}var tH=function(t,i){var a;return $e.isValidElement(t)?a=$e.cloneElement(t,i):Br(t)?a=t(i):a=$e.createElement("line",TS({},i,{className:"recharts-reference-line-line"})),a},rH=function(t,i,a,d,y,m,l,M,E){var N=y.x,C=y.y,L=y.width,F=y.height;if(a){var H=E.y,G=t.y.apply(H,{position:m});if(eu(E,"discard")&&!t.y.isInRange(G))return null;var q=[{x:N+L,y:G},{x:N,y:G}];return M==="left"?q.reverse():q}if(i){var re=E.x,ie=t.x.apply(re,{position:m});if(eu(E,"discard")&&!t.x.isInRange(ie))return null;var ne=[{x:ie,y:C+F},{x:ie,y:C}];return l==="top"?ne.reverse():ne}if(d){var ce=E.segment,J=ce.map(function(ee){return t.apply(ee,{position:m})});return eu(E,"discard")&&XG(J,function(ee){return!t.isInRange(ee)})?null:J}return null};function nH(e){var t=e.x,i=e.y,a=e.segment,d=e.xAxisId,y=e.yAxisId,m=e.shape,l=e.className,M=e.alwaysShow,E=zZ(),N=AR(d),C=MR(y),L=FZ();if(!E||!L)return null;Yu(M===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var F=UT({x:N.scale,y:C.scale}),H=la(t),G=la(i),q=a&&a.length===2,re=rH(F,H,G,q,L,e.position,N.orientation,C.orientation,e);if(!re)return null;var ie=YZ(re,2),ne=ie[0],ce=ne.x,J=ne.y,ee=ie[1],he=ee.x,ge=ee.y,Oe=eu(e,"hidden")?"url(#".concat(E,")"):void 0,at=$O($O({clipPath:Oe},tn(e,!0)),{},{x1:ce,y1:J,x2:he,y2:ge});return $e.createElement(Oi,{className:ln("recharts-reference-line",l)},tH(m,at),lo.renderCallByParent(e,AZ({x1:ce,y1:J,x2:he,y2:ge})))}var WT=function(e){function t(){return qZ(this,t),GZ(this,t,arguments)}return XZ(t,e),VZ(t,[{key:"render",value:function(){return $e.createElement(nH,this.props)}}])}($e.Component);XT(WT,"displayName","ReferenceLine");XT(WT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function AS(){return AS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},AS.apply(this,arguments)}function _m(e){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_m(e)}function UO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function VO(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?UO(Object(i),!0).forEach(function(a){Ex(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):UO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function iH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aH(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,CR(a.key),a)}}function oH(e,t,i){return t&&aH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sH(e,t,i){return t=H_(t),lH(e,ER()?Reflect.construct(t,i||[],H_(e).constructor):t.apply(e,i))}function lH(e,t){if(t&&(_m(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cH(e)}function cH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ER(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ER=function(){return!!e})()}function H_(e){return H_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},H_(e)}function uH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MS(e,t)}function MS(e,t){return MS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},MS(e,t)}function Ex(e,t,i){return t=CR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function CR(e){var t=hH(e,"string");return _m(t)=="symbol"?t:t+""}function hH(e,t){if(_m(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(_m(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dH=function(t){var i=t.x,a=t.y,d=t.xAxis,y=t.yAxis,m=UT({x:d.scale,y:y.scale}),l=m.apply({x:i,y:a},{bandAware:!0});return eu(t,"discard")&&!m.isInRange(l)?null:l},Cx=function(e){function t(){return iH(this,t),sH(this,t,arguments)}return uH(t,e),oH(t,[{key:"render",value:function(){var a=this.props,d=a.x,y=a.y,m=a.r,l=a.alwaysShow,M=a.clipPathId,E=la(d),N=la(y);if(Yu(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!E||!N)return null;var C=dH(this.props);if(!C)return null;var L=C.x,F=C.y,H=this.props,G=H.shape,q=H.className,re=eu(this.props,"hidden")?"url(#".concat(M,")"):void 0,ie=VO(VO({clipPath:re},tn(this.props,!0)),{},{cx:L,cy:F});return $e.createElement(Oi,{className:ln("recharts-reference-dot",q)},t.renderDot(G,ie),lo.renderCallByParent(this.props,{x:L-m,y:F-m,width:2*m,height:2*m}))}}])}($e.Component);Ex(Cx,"displayName","ReferenceDot");Ex(Cx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Ex(Cx,"renderDot",function(e,t){var i;return $e.isValidElement(e)?i=$e.cloneElement(e,t):Br(e)?i=e(t):i=$e.createElement(qT,AS({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),i});function jS(){return jS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},jS.apply(this,arguments)}function xm(e){"@babel/helpers - typeof";return xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xm(e)}function GO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function ZO(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?GO(Object(i),!0).forEach(function(a){Ox(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):GO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function fH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pH(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,IR(a.key),a)}}function mH(e,t,i){return t&&pH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gH(e,t,i){return t=X_(t),yH(e,OR()?Reflect.construct(t,i||[],X_(e).constructor):t.apply(e,i))}function yH(e,t){if(t&&(xm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vH(e)}function vH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OR=function(){return!!e})()}function X_(e){return X_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},X_(e)}function _H(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PS(e,t)}function PS(e,t){return PS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},PS(e,t)}function Ox(e,t,i){return t=IR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function IR(e){var t=xH(e,"string");return xm(t)=="symbol"?t:t+""}function xH(e,t){if(xm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(xm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bH=function(t,i,a,d,y){var m=y.x1,l=y.x2,M=y.y1,E=y.y2,N=y.xAxis,C=y.yAxis;if(!N||!C)return null;var L=UT({x:N.scale,y:C.scale}),F={x:t?L.x.apply(m,{position:"start"}):L.x.rangeMin,y:a?L.y.apply(M,{position:"start"}):L.y.rangeMin},H={x:i?L.x.apply(l,{position:"end"}):L.x.rangeMax,y:d?L.y.apply(E,{position:"end"}):L.y.rangeMax};return eu(y,"discard")&&(!L.isInRange(F)||!L.isInRange(H))?null:vR(F,H)},Ix=function(e){function t(){return fH(this,t),gH(this,t,arguments)}return _H(t,e),mH(t,[{key:"render",value:function(){var a=this.props,d=a.x1,y=a.x2,m=a.y1,l=a.y2,M=a.className,E=a.alwaysShow,N=a.clipPathId;Yu(E===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var C=la(d),L=la(y),F=la(m),H=la(l),G=this.props.shape;if(!C&&!L&&!F&&!H&&!G)return null;var q=bH(C,L,F,H,this.props);if(!q&&!G)return null;var re=eu(this.props,"hidden")?"url(#".concat(N,")"):void 0;return $e.createElement(Oi,{className:ln("recharts-reference-area",M)},t.renderRect(G,ZO(ZO({clipPath:re},tn(this.props,!0)),q)),lo.renderCallByParent(this.props,q))}}])}($e.Component);Ox(Ix,"displayName","ReferenceArea");Ox(Ix,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Ox(Ix,"renderRect",function(e,t){var i;return $e.isValidElement(e)?i=$e.cloneElement(e,t):Br(e)?i=e(t):i=$e.createElement($T,jS({},t,{className:"recharts-reference-area-rect"})),i});function kR(e,t,i){if(t<1)return[];if(t===1&&i===void 0)return e;for(var a=[],d=0;d<e.length;d+=t)a.push(e[d]);return a}function wH(e,t,i){var a={width:e.width+t.width,height:e.height+t.height};return jZ(a,i)}function SH(e,t,i){var a=i==="width",d=e.x,y=e.y,m=e.width,l=e.height;return t===1?{start:a?d:y,end:a?d+m:y+l}:{start:a?d+m:y+l,end:a?d:y}}function W_(e,t,i,a,d){if(e*t<e*a||e*t>e*d)return!1;var y=i();return e*(t-e*y/2-a)>=0&&e*(t+e*y/2-d)<=0}function TH(e,t){return kR(e,t+1)}function AH(e,t,i,a,d){for(var y=(a||[]).slice(),m=t.start,l=t.end,M=0,E=1,N=m,C=function(){var H=a==null?void 0:a[M];if(H===void 0)return{v:kR(a,E)};var G=M,q,re=function(){return q===void 0&&(q=i(H,G)),q},ie=H.coordinate,ne=M===0||W_(e,ie,re,N,l);ne||(M=0,N=m,E+=1),ne&&(N=ie+e*(re()/2+d),M+=E)},L;E<=y.length;)if(L=C(),L)return L.v;return[]}function Ry(e){"@babel/helpers - typeof";return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ry(e)}function HO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function so(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?HO(Object(i),!0).forEach(function(a){MH(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):HO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function MH(e,t,i){return t=jH(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function jH(e){var t=PH(e,"string");return Ry(t)=="symbol"?t:t+""}function PH(e,t){if(Ry(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Ry(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EH(e,t,i,a,d){for(var y=(a||[]).slice(),m=y.length,l=t.start,M=t.end,E=function(L){var F=y[L],H,G=function(){return H===void 0&&(H=i(F,L)),H};if(L===m-1){var q=e*(F.coordinate+e*G()/2-M);y[L]=F=so(so({},F),{},{tickCoord:q>0?F.coordinate-q*e:F.coordinate})}else y[L]=F=so(so({},F),{},{tickCoord:F.coordinate});var re=W_(e,F.tickCoord,G,l,M);re&&(M=F.tickCoord-e*(G()/2+d),y[L]=so(so({},F),{},{isShow:!0}))},N=m-1;N>=0;N--)E(N);return y}function CH(e,t,i,a,d,y){var m=(a||[]).slice(),l=m.length,M=t.start,E=t.end;if(y){var N=a[l-1],C=i(N,l-1),L=e*(N.coordinate+e*C/2-E);m[l-1]=N=so(so({},N),{},{tickCoord:L>0?N.coordinate-L*e:N.coordinate});var F=W_(e,N.tickCoord,function(){return C},M,E);F&&(E=N.tickCoord-e*(C/2+d),m[l-1]=so(so({},N),{},{isShow:!0}))}for(var H=y?l-1:l,G=function(ie){var ne=m[ie],ce,J=function(){return ce===void 0&&(ce=i(ne,ie)),ce};if(ie===0){var ee=e*(ne.coordinate-e*J()/2-M);m[ie]=ne=so(so({},ne),{},{tickCoord:ee<0?ne.coordinate-ee*e:ne.coordinate})}else m[ie]=ne=so(so({},ne),{},{tickCoord:ne.coordinate});var he=W_(e,ne.tickCoord,J,M,E);he&&(M=ne.tickCoord+e*(J()/2+d),m[ie]=so(so({},ne),{},{isShow:!0}))},q=0;q<H;q++)G(q);return m}function YT(e,t,i){var a=e.tick,d=e.ticks,y=e.viewBox,m=e.minTickGap,l=e.orientation,M=e.interval,E=e.tickFormatter,N=e.unit,C=e.angle;if(!d||!d.length||!a)return[];if(Dt(M)||km.isSsr)return TH(d,typeof M=="number"&&Dt(M)?M:0);var L=[],F=l==="top"||l==="bottom"?"width":"height",H=N&&F==="width"?Wg(N,{fontSize:t,letterSpacing:i}):{width:0,height:0},G=function(ne,ce){var J=Br(E)?E(ne.value,ce):ne.value;return F==="width"?wH(Wg(J,{fontSize:t,letterSpacing:i}),H,C):Wg(J,{fontSize:t,letterSpacing:i})[F]},q=d.length>=2?hc(d[1].coordinate-d[0].coordinate):1,re=SH(y,q,F);return M==="equidistantPreserveStart"?AH(q,re,G,d,m):(M==="preserveStart"||M==="preserveStartEnd"?L=CH(q,re,G,d,m,M==="preserveStartEnd"):L=EH(q,re,G,d,m),L.filter(function(ie){return ie.isShow}))}var OH=["viewBox"],IH=["viewBox"],kH=["ticks"];function bm(e){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bm(e)}function Jp(){return Jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Jp.apply(this,arguments)}function XO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function jo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?XO(Object(i),!0).forEach(function(a){KT(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):XO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function i2(e,t){if(e==null)return{};var i=NH(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function NH(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function RH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WO(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,RR(a.key),a)}}function DH(e,t,i){return t&&WO(e.prototype,t),i&&WO(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function zH(e,t,i){return t=Y_(t),LH(e,NR()?Reflect.construct(t,i||[],Y_(e).constructor):t.apply(e,i))}function LH(e,t){if(t&&(bm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BH(e)}function BH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NR=function(){return!!e})()}function Y_(e){return Y_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Y_(e)}function FH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ES(e,t)}function ES(e,t){return ES=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},ES(e,t)}function KT(e,t,i){return t=RR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function RR(e){var t=$H(e,"string");return bm(t)=="symbol"?t:t+""}function $H(e,t){if(bm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(bm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zm=function(e){function t(i){var a;return RH(this,t),a=zH(this,t,[i]),a.state={fontSize:"",letterSpacing:""},a}return FH(t,e),DH(t,[{key:"shouldComponentUpdate",value:function(a,d){var y=a.viewBox,m=i2(a,OH),l=this.props,M=l.viewBox,E=i2(l,IH);return!tm(y,M)||!tm(m,E)||!tm(d,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var d=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];d&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var d=this.props,y=d.x,m=d.y,l=d.width,M=d.height,E=d.orientation,N=d.tickSize,C=d.mirror,L=d.tickMargin,F,H,G,q,re,ie,ne=C?-1:1,ce=a.tickSize||N,J=Dt(a.tickCoord)?a.tickCoord:a.coordinate;switch(E){case"top":F=H=a.coordinate,q=m+ +!C*M,G=q-ne*ce,ie=G-ne*L,re=J;break;case"left":G=q=a.coordinate,H=y+ +!C*l,F=H-ne*ce,re=F-ne*L,ie=J;break;case"right":G=q=a.coordinate,H=y+ +C*l,F=H+ne*ce,re=F+ne*L,ie=J;break;default:F=H=a.coordinate,q=m+ +C*M,G=q+ne*ce,ie=G+ne*L,re=J;break}return{line:{x1:F,y1:G,x2:H,y2:q},tick:{x:re,y:ie}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,d=a.orientation,y=a.mirror,m;switch(d){case"left":m=y?"start":"end";break;case"right":m=y?"end":"start";break;default:m="middle";break}return m}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,d=a.orientation,y=a.mirror,m="end";switch(d){case"left":case"right":m="middle";break;case"top":m=y?"start":"end";break;default:m=y?"end":"start";break}return m}},{key:"renderAxisLine",value:function(){var a=this.props,d=a.x,y=a.y,m=a.width,l=a.height,M=a.orientation,E=a.mirror,N=a.axisLine,C=jo(jo(jo({},tn(this.props,!1)),tn(N,!1)),{},{fill:"none"});if(M==="top"||M==="bottom"){var L=+(M==="top"&&!E||M==="bottom"&&E);C=jo(jo({},C),{},{x1:d,y1:y+L*l,x2:d+m,y2:y+L*l})}else{var F=+(M==="left"&&!E||M==="right"&&E);C=jo(jo({},C),{},{x1:d+F*m,y1:y,x2:d+F*m,y2:y+l})}return $e.createElement("line",Jp({},C,{className:ln("recharts-cartesian-axis-line",ul(N,"className"))}))}},{key:"renderTicks",value:function(a,d,y){var m=this,l=this.props,M=l.tickLine,E=l.stroke,N=l.tick,C=l.tickFormatter,L=l.unit,F=YT(jo(jo({},this.props),{},{ticks:a}),d,y),H=this.getTickTextAnchor(),G=this.getTickVerticalAnchor(),q=tn(this.props,!1),re=tn(N,!1),ie=jo(jo({},q),{},{fill:"none"},tn(M,!1)),ne=F.map(function(ce,J){var ee=m.getTickLineCoord(ce),he=ee.line,ge=ee.tick,Oe=jo(jo(jo(jo({textAnchor:H,verticalAnchor:G},q),{},{stroke:"none",fill:E},re),ge),{},{index:J,payload:ce,visibleTicksCount:F.length,tickFormatter:C});return $e.createElement(Oi,Jp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ce.value,"-").concat(ce.coordinate,"-").concat(ce.tickCoord)},s_(m.props,ce,J)),M&&$e.createElement("line",Jp({},ie,he,{className:ln("recharts-cartesian-axis-tick-line",ul(M,"className"))})),N&&t.renderTickItem(N,Oe,"".concat(Br(C)?C(ce.value,J):ce.value).concat(L||"")))});return $e.createElement("g",{className:"recharts-cartesian-axis-ticks"},ne)}},{key:"render",value:function(){var a=this,d=this.props,y=d.axisLine,m=d.width,l=d.height,M=d.ticksGenerator,E=d.className,N=d.hide;if(N)return null;var C=this.props,L=C.ticks,F=i2(C,kH),H=L;return Br(M)&&(H=L&&L.length>0?M(this.props):M(F)),m<=0||l<=0||!H||!H.length?null:$e.createElement(Oi,{className:ln("recharts-cartesian-axis",E),ref:function(q){a.layerReference=q}},y&&this.renderAxisLine(),this.renderTicks(H,this.state.fontSize,this.state.letterSpacing),lo.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,d,y){var m;return $e.isValidElement(a)?m=$e.cloneElement(a,d):Br(a)?m=a(d):m=$e.createElement(v_,Jp({},d,{className:"recharts-cartesian-axis-tick-value"}),y),m}}])}(Fe.Component);KT(zm,"displayName","CartesianAxis");KT(zm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var qH=["x1","y1","x2","y2","key"],UH=["offset"];function Rf(e){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rf(e)}function YO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function co(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?YO(Object(i),!0).forEach(function(a){VH(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):YO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function VH(e,t,i){return t=GH(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function GH(e){var t=ZH(e,"string");return Rf(t)=="symbol"?t:t+""}function ZH(e,t){if(Rf(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Rf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Af(){return Af=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Af.apply(this,arguments)}function KO(e,t){if(e==null)return{};var i=HH(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function HH(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var XH=function(t){var i=t.fill;if(!i||i==="none")return null;var a=t.fillOpacity,d=t.x,y=t.y,m=t.width,l=t.height,M=t.ry;return $e.createElement("rect",{x:d,y,ry:M,width:m,height:l,stroke:"none",fill:i,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function DR(e,t){var i;if($e.isValidElement(e))i=$e.cloneElement(e,t);else if(Br(e))i=e(t);else{var a=t.x1,d=t.y1,y=t.x2,m=t.y2,l=t.key,M=KO(t,qH),E=tn(M,!1);E.offset;var N=KO(E,UH);i=$e.createElement("line",Af({},N,{x1:a,y1:d,x2:y,y2:m,fill:"none",key:l}))}return i}function WH(e){var t=e.x,i=e.width,a=e.horizontal,d=a===void 0?!0:a,y=e.horizontalPoints;if(!d||!y||!y.length)return null;var m=y.map(function(l,M){var E=co(co({},e),{},{x1:t,y1:l,x2:t+i,y2:l,key:"line-".concat(M),index:M});return DR(d,E)});return $e.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function YH(e){var t=e.y,i=e.height,a=e.vertical,d=a===void 0?!0:a,y=e.verticalPoints;if(!d||!y||!y.length)return null;var m=y.map(function(l,M){var E=co(co({},e),{},{x1:l,y1:t,x2:l,y2:t+i,key:"line-".concat(M),index:M});return DR(d,E)});return $e.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function KH(e){var t=e.horizontalFill,i=e.fillOpacity,a=e.x,d=e.y,y=e.width,m=e.height,l=e.horizontalPoints,M=e.horizontal,E=M===void 0?!0:M;if(!E||!t||!t.length)return null;var N=l.map(function(L){return Math.round(L+d-d)}).sort(function(L,F){return L-F});d!==N[0]&&N.unshift(0);var C=N.map(function(L,F){var H=!N[F+1],G=H?d+m-L:N[F+1]-L;if(G<=0)return null;var q=F%t.length;return $e.createElement("rect",{key:"react-".concat(F),y:L,x:a,height:G,width:y,stroke:"none",fill:t[q],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return $e.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},C)}function QH(e){var t=e.vertical,i=t===void 0?!0:t,a=e.verticalFill,d=e.fillOpacity,y=e.x,m=e.y,l=e.width,M=e.height,E=e.verticalPoints;if(!i||!a||!a.length)return null;var N=E.map(function(L){return Math.round(L+y-y)}).sort(function(L,F){return L-F});y!==N[0]&&N.unshift(0);var C=N.map(function(L,F){var H=!N[F+1],G=H?y+l-L:N[F+1]-L;if(G<=0)return null;var q=F%a.length;return $e.createElement("rect",{key:"react-".concat(F),x:L,y:m,width:G,height:M,stroke:"none",fill:a[q],fillOpacity:d,className:"recharts-cartesian-grid-bg"})});return $e.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},C)}var JH=function(t,i){var a=t.xAxis,d=t.width,y=t.height,m=t.offset;return YN(YT(co(co(co({},zm.defaultProps),a),{},{ticks:Hu(a,!0),viewBox:{x:0,y:0,width:d,height:y}})),m.left,m.left+m.width,i)},eX=function(t,i){var a=t.yAxis,d=t.width,y=t.height,m=t.offset;return YN(YT(co(co(co({},zm.defaultProps),a),{},{ticks:Hu(a,!0),viewBox:{x:0,y:0,width:d,height:y}})),m.top,m.top+m.height,i)},Hp={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function zR(e){var t,i,a,d,y,m,l=ZT(),M=HT(),E=$Z(),N=co(co({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Hp.stroke,fill:(i=e.fill)!==null&&i!==void 0?i:Hp.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:Hp.horizontal,horizontalFill:(d=e.horizontalFill)!==null&&d!==void 0?d:Hp.horizontalFill,vertical:(y=e.vertical)!==null&&y!==void 0?y:Hp.vertical,verticalFill:(m=e.verticalFill)!==null&&m!==void 0?m:Hp.verticalFill,x:Dt(e.x)?e.x:E.left,y:Dt(e.y)?e.y:E.top,width:Dt(e.width)?e.width:E.width,height:Dt(e.height)?e.height:E.height}),C=N.x,L=N.y,F=N.width,H=N.height,G=N.syncWithTicks,q=N.horizontalValues,re=N.verticalValues,ie=LZ(),ne=BZ();if(!Dt(F)||F<=0||!Dt(H)||H<=0||!Dt(C)||C!==+C||!Dt(L)||L!==+L)return null;var ce=N.verticalCoordinatesGenerator||JH,J=N.horizontalCoordinatesGenerator||eX,ee=N.horizontalPoints,he=N.verticalPoints;if((!ee||!ee.length)&&Br(J)){var ge=q&&q.length,Oe=J({yAxis:ne?co(co({},ne),{},{ticks:ge?q:ne.ticks}):void 0,width:l,height:M,offset:E},ge?!0:G);Yu(Array.isArray(Oe),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Rf(Oe),"]")),Array.isArray(Oe)&&(ee=Oe)}if((!he||!he.length)&&Br(ce)){var at=re&&re.length,ke=ce({xAxis:ie?co(co({},ie),{},{ticks:at?re:ie.ticks}):void 0,width:l,height:M,offset:E},at?!0:G);Yu(Array.isArray(ke),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Rf(ke),"]")),Array.isArray(ke)&&(he=ke)}return $e.createElement("g",{className:"recharts-cartesian-grid"},$e.createElement(XH,{fill:N.fill,fillOpacity:N.fillOpacity,x:N.x,y:N.y,width:N.width,height:N.height,ry:N.ry}),$e.createElement(WH,Af({},N,{offset:E,horizontalPoints:ee,xAxis:ie,yAxis:ne})),$e.createElement(YH,Af({},N,{offset:E,verticalPoints:he,xAxis:ie,yAxis:ne})),$e.createElement(KH,Af({},N,{horizontalPoints:ee})),$e.createElement(QH,Af({},N,{verticalPoints:he})))}zR.displayName="CartesianGrid";var tX=["type","layout","connectNulls","ref"],rX=["key"];function wm(e){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wm(e)}function QO(e,t){if(e==null)return{};var i=nX(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function nX(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function Jg(){return Jg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Jg.apply(this,arguments)}function JO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function ws(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?JO(Object(i),!0).forEach(function(a){lc(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):JO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Xp(e){return sX(e)||oX(e)||aX(e)||iX()}function iX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aX(e,t){if(e){if(typeof e=="string")return CS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return CS(e,t)}}function oX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sX(e){if(Array.isArray(e))return CS(e)}function CS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function lX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eI(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,BR(a.key),a)}}function cX(e,t,i){return t&&eI(e.prototype,t),i&&eI(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function uX(e,t,i){return t=K_(t),hX(e,LR()?Reflect.construct(t,i||[],K_(e).constructor):t.apply(e,i))}function hX(e,t){if(t&&(wm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dX(e)}function dX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LR=function(){return!!e})()}function K_(e){return K_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},K_(e)}function fX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OS(e,t)}function OS(e,t){return OS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},OS(e,t)}function lc(e,t,i){return t=BR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function BR(e){var t=pX(e,"string");return wm(t)=="symbol"?t:t+""}function pX(e,t){if(wm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(wm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sm=function(e){function t(){var i;lX(this,t);for(var a=arguments.length,d=new Array(a),y=0;y<a;y++)d[y]=arguments[y];return i=uX(this,t,[].concat(d)),lc(i,"state",{isAnimationFinished:!0,totalLength:0}),lc(i,"generateSimpleStrokeDasharray",function(m,l){return"".concat(l,"px ").concat(m-l,"px")}),lc(i,"getStrokeDasharray",function(m,l,M){var E=M.reduce(function(re,ie){return re+ie});if(!E)return i.generateSimpleStrokeDasharray(l,m);for(var N=Math.floor(m/E),C=m%E,L=l-m,F=[],H=0,G=0;H<M.length;G+=M[H],++H)if(G+M[H]>C){F=[].concat(Xp(M.slice(0,H)),[C-G]);break}var q=F.length%2===0?[0,L]:[L];return[].concat(Xp(t.repeat(M,N)),Xp(F),q).map(function(re){return"".concat(re,"px")}).join(", ")}),lc(i,"id",$y("recharts-line-")),lc(i,"pathRef",function(m){i.mainCurve=m}),lc(i,"handleAnimationEnd",function(){i.setState({isAnimationFinished:!0}),i.props.onAnimationEnd&&i.props.onAnimationEnd()}),lc(i,"handleAnimationStart",function(){i.setState({isAnimationFinished:!1}),i.props.onAnimationStart&&i.props.onAnimationStart()}),i}return fX(t,e),cX(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,d){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var y=this.props,m=y.points,l=y.xAxis,M=y.yAxis,E=y.layout,N=y.children,C=hl(N,Hy);if(!C)return null;var L=function(G,q){return{x:G.x,y:G.y,value:G.value,errorVal:js(G.payload,q)}},F={clipPath:a?"url(#clipPath-".concat(d,")"):null};return $e.createElement(Oi,F,C.map(function(H){return $e.cloneElement(H,{key:"bar-".concat(H.props.dataKey),data:m,xAxis:l,yAxis:M,layout:E,dataPointFormatter:L})}))}},{key:"renderDots",value:function(a,d,y){var m=this.props.isAnimationActive;if(m&&!this.state.isAnimationFinished)return null;var l=this.props,M=l.dot,E=l.points,N=l.dataKey,C=tn(this.props,!1),L=tn(M,!0),F=E.map(function(G,q){var re=ws(ws(ws({key:"dot-".concat(q),r:3},C),L),{},{index:q,cx:G.x,cy:G.y,value:G.value,dataKey:N,payload:G.payload,points:E});return t.renderDotItem(M,re)}),H={clipPath:a?"url(#clipPath-".concat(d?"":"dots-").concat(y,")"):null};return $e.createElement(Oi,Jg({className:"recharts-line-dots",key:"dots"},H),F)}},{key:"renderCurveStatically",value:function(a,d,y,m){var l=this.props,M=l.type,E=l.layout,N=l.connectNulls;l.ref;var C=QO(l,tX),L=ws(ws(ws({},tn(C,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(y,")"):null,points:a},m),{},{type:M,layout:E,connectNulls:N});return $e.createElement(lS,Jg({},L,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,d){var y=this,m=this.props,l=m.points,M=m.strokeDasharray,E=m.isAnimationActive,N=m.animationBegin,C=m.animationDuration,L=m.animationEasing,F=m.animationId,H=m.animateNewValues,G=m.width,q=m.height,re=this.state,ie=re.prevPoints,ne=re.totalLength;return $e.createElement(rh,{begin:N,duration:C,isActive:E,easing:L,from:{t:0},to:{t:1},key:"line-".concat(F),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(ce){var J=ce.t;if(ie){var ee=ie.length/l.length,he=l.map(function(qe,et){var st=Math.floor(et*ee);if(ie[st]){var rt=ie[st],Te=cc(rt.x,qe.x),Ge=cc(rt.y,qe.y);return ws(ws({},qe),{},{x:Te(J),y:Ge(J)})}if(H){var Ze=cc(G*2,qe.x),dt=cc(q/2,qe.y);return ws(ws({},qe),{},{x:Ze(J),y:dt(J)})}return ws(ws({},qe),{},{x:qe.x,y:qe.y})});return y.renderCurveStatically(he,a,d)}var ge=cc(0,ne),Oe=ge(J),at;if(M){var ke="".concat(M).split(/[,\s]+/gim).map(function(qe){return parseFloat(qe)});at=y.getStrokeDasharray(Oe,ne,ke)}else at=y.generateSimpleStrokeDasharray(ne,Oe);return y.renderCurveStatically(l,a,d,{strokeDasharray:at})})}},{key:"renderCurve",value:function(a,d){var y=this.props,m=y.points,l=y.isAnimationActive,M=this.state,E=M.prevPoints,N=M.totalLength;return l&&m&&m.length&&(!E&&N>0||!Sx(E,m))?this.renderCurveWithAnimation(a,d):this.renderCurveStatically(m,a,d)}},{key:"render",value:function(){var a,d=this.props,y=d.hide,m=d.dot,l=d.points,M=d.className,E=d.xAxis,N=d.yAxis,C=d.top,L=d.left,F=d.width,H=d.height,G=d.isAnimationActive,q=d.id;if(y||!l||!l.length)return null;var re=this.state.isAnimationFinished,ie=l.length===1,ne=ln("recharts-line",M),ce=E&&E.allowDataOverflow,J=N&&N.allowDataOverflow,ee=ce||J,he=Yr(q)?this.id:q,ge=(a=tn(m,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},Oe=ge.r,at=Oe===void 0?3:Oe,ke=ge.strokeWidth,qe=ke===void 0?2:ke,et=O4(m)?m:{},st=et.clipDot,rt=st===void 0?!0:st,Te=at*2+qe;return $e.createElement(Oi,{className:ne},ce||J?$e.createElement("defs",null,$e.createElement("clipPath",{id:"clipPath-".concat(he)},$e.createElement("rect",{x:ce?L:L-F/2,y:J?C:C-H/2,width:ce?F:F*2,height:J?H:H*2})),!rt&&$e.createElement("clipPath",{id:"clipPath-dots-".concat(he)},$e.createElement("rect",{x:L-Te/2,y:C-Te/2,width:F+Te,height:H+Te}))):null,!ie&&this.renderCurve(ee,he),this.renderErrorBar(ee,he),(ie||m)&&this.renderDots(ee,rt,he),(!G||re)&&gd.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,d){return a.animationId!==d.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:d.curPoints}:a.points!==d.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,d){for(var y=a.length%2!==0?[].concat(Xp(a),[0]):a,m=[],l=0;l<d;++l)m=[].concat(Xp(m),Xp(y));return m}},{key:"renderDotItem",value:function(a,d){var y;if($e.isValidElement(a))y=$e.cloneElement(a,d);else if(Br(a))y=a(d);else{var m=d.key,l=QO(d,rX),M=ln("recharts-line-dot",typeof a!="boolean"?a.className:"");y=$e.createElement(qT,Jg({key:m},l,{className:M}))}return y}}])}(Fe.PureComponent);lc(Sm,"displayName","Line");lc(Sm,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!km.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});lc(Sm,"getComposedData",function(e){var t=e.props,i=e.xAxis,a=e.yAxis,d=e.xAxisTicks,y=e.yAxisTicks,m=e.dataKey,l=e.bandSize,M=e.displayedData,E=e.offset,N=t.layout,C=M.map(function(L,F){var H=js(L,m);return N==="horizontal"?{x:pC({axis:i,ticks:d,bandSize:l,entry:L,index:F}),y:Yr(H)?null:a.scale(H),value:H,payload:L}:{x:Yr(H)?null:i.scale(H),y:pC({axis:a,ticks:y,bandSize:l,entry:L,index:F}),value:H,payload:L}});return ws({points:C,layout:N},E)});function Tm(e){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tm(e)}function mX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gX(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,qR(a.key),a)}}function yX(e,t,i){return t&&gX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vX(e,t,i){return t=Q_(t),_X(e,FR()?Reflect.construct(t,i||[],Q_(e).constructor):t.apply(e,i))}function _X(e,t){if(t&&(Tm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xX(e)}function xX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FR=function(){return!!e})()}function Q_(e){return Q_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Q_(e)}function bX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IS(e,t)}function IS(e,t){return IS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},IS(e,t)}function $R(e,t,i){return t=qR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function qR(e){var t=wX(e,"string");return Tm(t)=="symbol"?t:t+""}function wX(e,t){if(Tm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Tm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function kS(){return kS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},kS.apply(this,arguments)}function SX(e){var t=e.xAxisId,i=ZT(),a=HT(),d=AR(t);return d==null?null:$e.createElement(zm,kS({},d,{className:ln("recharts-".concat(d.axisType," ").concat(d.axisType),d.className),viewBox:{x:0,y:0,width:i,height:a},ticksGenerator:function(m){return Hu(m,!0)}}))}var kx=function(e){function t(){return mX(this,t),vX(this,t,arguments)}return bX(t,e),yX(t,[{key:"render",value:function(){return $e.createElement(SX,this.props)}}])}($e.Component);$R(kx,"displayName","XAxis");$R(kx,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Am(e){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Am(e)}function TX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AX(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,GR(a.key),a)}}function MX(e,t,i){return t&&AX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jX(e,t,i){return t=J_(t),PX(e,UR()?Reflect.construct(t,i||[],J_(e).constructor):t.apply(e,i))}function PX(e,t){if(t&&(Am(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EX(e)}function EX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UR=function(){return!!e})()}function J_(e){return J_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},J_(e)}function CX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NS(e,t)}function NS(e,t){return NS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},NS(e,t)}function VR(e,t,i){return t=GR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function GR(e){var t=OX(e,"string");return Am(t)=="symbol"?t:t+""}function OX(e,t){if(Am(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Am(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function RS(){return RS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},RS.apply(this,arguments)}var IX=function(t){var i=t.yAxisId,a=ZT(),d=HT(),y=MR(i);return y==null?null:$e.createElement(zm,RS({},y,{className:ln("recharts-".concat(y.axisType," ").concat(y.axisType),y.className),viewBox:{x:0,y:0,width:a,height:d},ticksGenerator:function(l){return Hu(l,!0)}}))},Dy=function(e){function t(){return TX(this,t),jX(this,t,arguments)}return CX(t,e),MX(t,[{key:"render",value:function(){return $e.createElement(IX,this.props)}}])}($e.Component);VR(Dy,"displayName","YAxis");VR(Dy,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function tI(e){return DX(e)||RX(e)||NX(e)||kX()}function kX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NX(e,t){if(e){if(typeof e=="string")return DS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return DS(e,t)}}function RX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DX(e){if(Array.isArray(e))return DS(e)}function DS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var zS=function(t,i,a,d,y){var m=hl(t,WT),l=hl(t,Cx),M=[].concat(tI(m),tI(l)),E=hl(t,Ix),N="".concat(d,"Id"),C=d[0],L=i;if(M.length&&(L=M.reduce(function(G,q){if(q.props[N]===a&&eu(q.props,"extendDomain")&&Dt(q.props[C])){var re=q.props[C];return[Math.min(G[0],re),Math.max(G[1],re)]}return G},L)),E.length){var F="".concat(C,"1"),H="".concat(C,"2");L=E.reduce(function(G,q){if(q.props[N]===a&&eu(q.props,"extendDomain")&&Dt(q.props[F])&&Dt(q.props[H])){var re=q.props[F],ie=q.props[H];return[Math.min(G[0],re,ie),Math.max(G[1],re,ie)]}return G},L)}return y&&y.length&&(L=y.reduce(function(G,q){return Dt(q)?[Math.min(G[0],q),Math.max(G[1],q)]:G},L)),L},a2={exports:{}},rI;function zX(){return rI||(rI=1,function(e){var t=Object.prototype.hasOwnProperty,i="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(i=!1));function d(M,E,N){this.fn=M,this.context=E,this.once=N||!1}function y(M,E,N,C,L){if(typeof N!="function")throw new TypeError("The listener must be a function");var F=new d(N,C||M,L),H=i?i+E:E;return M._events[H]?M._events[H].fn?M._events[H]=[M._events[H],F]:M._events[H].push(F):(M._events[H]=F,M._eventsCount++),M}function m(M,E){--M._eventsCount===0?M._events=new a:delete M._events[E]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var E=[],N,C;if(this._eventsCount===0)return E;for(C in N=this._events)t.call(N,C)&&E.push(i?C.slice(1):C);return Object.getOwnPropertySymbols?E.concat(Object.getOwnPropertySymbols(N)):E},l.prototype.listeners=function(E){var N=i?i+E:E,C=this._events[N];if(!C)return[];if(C.fn)return[C.fn];for(var L=0,F=C.length,H=new Array(F);L<F;L++)H[L]=C[L].fn;return H},l.prototype.listenerCount=function(E){var N=i?i+E:E,C=this._events[N];return C?C.fn?1:C.length:0},l.prototype.emit=function(E,N,C,L,F,H){var G=i?i+E:E;if(!this._events[G])return!1;var q=this._events[G],re=arguments.length,ie,ne;if(q.fn){switch(q.once&&this.removeListener(E,q.fn,void 0,!0),re){case 1:return q.fn.call(q.context),!0;case 2:return q.fn.call(q.context,N),!0;case 3:return q.fn.call(q.context,N,C),!0;case 4:return q.fn.call(q.context,N,C,L),!0;case 5:return q.fn.call(q.context,N,C,L,F),!0;case 6:return q.fn.call(q.context,N,C,L,F,H),!0}for(ne=1,ie=new Array(re-1);ne<re;ne++)ie[ne-1]=arguments[ne];q.fn.apply(q.context,ie)}else{var ce=q.length,J;for(ne=0;ne<ce;ne++)switch(q[ne].once&&this.removeListener(E,q[ne].fn,void 0,!0),re){case 1:q[ne].fn.call(q[ne].context);break;case 2:q[ne].fn.call(q[ne].context,N);break;case 3:q[ne].fn.call(q[ne].context,N,C);break;case 4:q[ne].fn.call(q[ne].context,N,C,L);break;default:if(!ie)for(J=1,ie=new Array(re-1);J<re;J++)ie[J-1]=arguments[J];q[ne].fn.apply(q[ne].context,ie)}}return!0},l.prototype.on=function(E,N,C){return y(this,E,N,C,!1)},l.prototype.once=function(E,N,C){return y(this,E,N,C,!0)},l.prototype.removeListener=function(E,N,C,L){var F=i?i+E:E;if(!this._events[F])return this;if(!N)return m(this,F),this;var H=this._events[F];if(H.fn)H.fn===N&&(!L||H.once)&&(!C||H.context===C)&&m(this,F);else{for(var G=0,q=[],re=H.length;G<re;G++)(H[G].fn!==N||L&&!H[G].once||C&&H[G].context!==C)&&q.push(H[G]);q.length?this._events[F]=q.length===1?q[0]:q:m(this,F)}return this},l.prototype.removeAllListeners=function(E){var N;return E?(N=i?i+E:E,this._events[N]&&m(this,N)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l}(a2)),a2.exports}var LX=zX();const BX=Bn(LX);var o2=new BX,s2="recharts.syncMouseEvents";function zy(e){"@babel/helpers - typeof";return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zy(e)}function FX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $X(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ZR(a.key),a)}}function qX(e,t,i){return t&&$X(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function l2(e,t,i){return t=ZR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ZR(e){var t=UX(e,"string");return zy(t)=="symbol"?t:t+""}function UX(e,t){if(zy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(zy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VX=function(){function e(){FX(this,e),l2(this,"activeIndex",0),l2(this,"coordinateList",[]),l2(this,"layout","horizontal")}return qX(e,[{key:"setDetails",value:function(i){var a,d=i.coordinateList,y=d===void 0?null:d,m=i.container,l=m===void 0?null:m,M=i.layout,E=M===void 0?null:M,N=i.offset,C=N===void 0?null:N,L=i.mouseHandlerCallback,F=L===void 0?null:L;this.coordinateList=(a=y??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=E??this.layout,this.offset=C??this.offset,this.mouseHandlerCallback=F??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(i){if(this.coordinateList.length!==0)switch(i.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(i){this.activeIndex=i}},{key:"spoofMouse",value:function(){var i,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var d=this.container.getBoundingClientRect(),y=d.x,m=d.y,l=d.height,M=this.coordinateList[this.activeIndex].coordinate,E=((i=window)===null||i===void 0?void 0:i.scrollX)||0,N=((a=window)===null||a===void 0?void 0:a.scrollY)||0,C=y+M+E,L=m+this.offset.top+l/2+N;this.mouseHandlerCallback({pageX:C,pageY:L})}}}])}();function GX(e,t,i){if(i==="number"&&t===!0&&Array.isArray(e)){var a=e==null?void 0:e[0],d=e==null?void 0:e[1];if(a&&d&&Dt(a)&&Dt(d))return!0}return!1}function ZX(e,t,i,a){var d=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-d:i.left+.5,y:e==="horizontal"?i.top+.5:t.y-d,width:e==="horizontal"?a:i.width-1,height:e==="horizontal"?i.height-1:a}}function HR(e){var t=e.cx,i=e.cy,a=e.radius,d=e.startAngle,y=e.endAngle,m=La(t,i,a,d),l=La(t,i,a,y);return{points:[m,l],cx:t,cy:i,radius:a,startAngle:d,endAngle:y}}function HX(e,t,i){var a,d,y,m;if(e==="horizontal")a=t.x,y=a,d=i.top,m=i.top+i.height;else if(e==="vertical")d=t.y,m=d,a=i.left,y=i.left+i.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,M=t.cy,E=t.innerRadius,N=t.outerRadius,C=t.angle,L=La(l,M,E,C),F=La(l,M,N,C);a=L.x,d=L.y,y=F.x,m=F.y}else return HR(t);return[{x:a,y:d},{x:y,y:m}]}function Ly(e){"@babel/helpers - typeof";return Ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ly(e)}function nI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Yv(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?nI(Object(i),!0).forEach(function(a){XX(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):nI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function XX(e,t,i){return t=WX(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function WX(e){var t=YX(e,"string");return Ly(t)=="symbol"?t:t+""}function YX(e,t){if(Ly(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Ly(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KX(e){var t,i,a=e.element,d=e.tooltipEventType,y=e.isActive,m=e.activeCoordinate,l=e.activePayload,M=e.offset,E=e.activeTooltipIndex,N=e.tooltipAxisBandSize,C=e.layout,L=e.chartName,F=(t=a.props.cursor)!==null&&t!==void 0?t:(i=a.type.defaultProps)===null||i===void 0?void 0:i.cursor;if(!a||!F||!y||!m||L!=="ScatterChart"&&d!=="axis")return null;var H,G=lS;if(L==="ScatterChart")H=m,G=X9;else if(L==="BarChart")H=ZX(C,m,M,N),G=$T;else if(C==="radial"){var q=HR(m),re=q.cx,ie=q.cy,ne=q.radius,ce=q.startAngle,J=q.endAngle;H={cx:re,cy:ie,startAngle:ce,endAngle:J,innerRadius:ne,outerRadius:ne},G=tR}else H={points:HX(C,m,M)},G=lS;var ee=Yv(Yv(Yv(Yv({stroke:"#ccc",pointerEvents:"none"},M),H),tn(F,!1)),{},{payload:l,payloadIndex:E,className:ln("recharts-tooltip-cursor",F.className)});return Fe.isValidElement(F)?Fe.cloneElement(F,ee):Fe.createElement(G,ee)}var QX=["item"],JX=["children","className","width","height","style","compact","title","desc"];function Mm(e){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mm(e)}function em(){return em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},em.apply(this,arguments)}function iI(e,t){return rW(e)||tW(e,t)||WR(e,t)||eW()}function eW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tW(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,d,y,m,l=[],M=!0,E=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(l.push(a.value),l.length!==t);M=!0);}catch(N){E=!0,d=N}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(E)throw d}}return l}}function rW(e){if(Array.isArray(e))return e}function aI(e,t){if(e==null)return{};var i=nW(e,t),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(d=0;d<y.length;d++)a=y[d],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function nW(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function iW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aW(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,YR(a.key),a)}}function oW(e,t,i){return t&&aW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sW(e,t,i){return t=ex(t),lW(e,XR()?Reflect.construct(t,i||[],ex(e).constructor):t.apply(e,i))}function lW(e,t){if(t&&(Mm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cW(e)}function cW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XR=function(){return!!e})()}function ex(e){return ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},ex(e)}function uW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LS(e,t)}function LS(e,t){return LS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},LS(e,t)}function jm(e){return fW(e)||dW(e)||WR(e)||hW()}function hW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WR(e,t){if(e){if(typeof e=="string")return BS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return BS(e,t)}}function dW(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fW(e){if(Array.isArray(e))return BS(e)}function BS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function oI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function vt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?oI(Object(i),!0).forEach(function(a){gr(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):oI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function gr(e,t,i){return t=YR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function YR(e){var t=pW(e,"string");return Mm(t)=="symbol"?t:t+""}function pW(e,t){if(Mm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Mm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mW={xAxis:["bottom","top"],yAxis:["left","right"]},gW={width:"100%",height:"100%"},KR={x:0,y:0};function Kv(e){return e}var yW=function(t,i){return i==="horizontal"?t.x:i==="vertical"?t.y:i==="centric"?t.angle:t.radius},vW=function(t,i,a,d){var y=i.find(function(N){return N&&N.index===a});if(y){if(t==="horizontal")return{x:y.coordinate,y:d.y};if(t==="vertical")return{x:d.x,y:y.coordinate};if(t==="centric"){var m=y.coordinate,l=d.radius;return vt(vt(vt({},d),La(d.cx,d.cy,l,m)),{},{angle:m,radius:l})}var M=y.coordinate,E=d.angle;return vt(vt(vt({},d),La(d.cx,d.cy,M,E)),{},{angle:E,radius:M})}return KR},Nx=function(t,i){var a=i.graphicalItems,d=i.dataStartIndex,y=i.dataEndIndex,m=(a??[]).reduce(function(l,M){var E=M.props.data;return E&&E.length?[].concat(jm(l),jm(E)):l},[]);return m.length>0?m:t&&t.length&&Dt(d)&&Dt(y)?t.slice(d,y+1):[]};function QR(e){return e==="number"?[0,"auto"]:void 0}var FS=function(t,i,a,d){var y=t.graphicalItems,m=t.tooltipAxis,l=Nx(i,t);return a<0||!y||!y.length||a>=l.length?null:y.reduce(function(M,E){var N,C=(N=E.props.data)!==null&&N!==void 0?N:i;C&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(C=C.slice(t.dataStartIndex,t.dataEndIndex+1));var L;if(m.dataKey&&!m.allowDuplicatedCategory){var F=C===void 0?l:C;L=a_(F,m.dataKey,d)}else L=C&&C[a]||l[a];return L?[].concat(jm(M),[QN(E,L)]):M},[])},sI=function(t,i,a,d){var y=d||{x:t.chartX,y:t.chartY},m=yW(y,a),l=t.orderedTooltipTicks,M=t.tooltipAxis,E=t.tooltipTicks,N=OU(m,l,E,M);if(N>=0&&E){var C=E[N]&&E[N].value,L=FS(t,i,N,C),F=vW(a,l,N,y);return{activeTooltipIndex:N,activeLabel:C,activePayload:L,activeCoordinate:F}}return null},_W=function(t,i){var a=i.axes,d=i.graphicalItems,y=i.axisType,m=i.axisIdKey,l=i.stackGroups,M=i.dataStartIndex,E=i.dataEndIndex,N=t.layout,C=t.children,L=t.stackOffset,F=WN(N,y);return a.reduce(function(H,G){var q,re=G.type.defaultProps!==void 0?vt(vt({},G.type.defaultProps),G.props):G.props,ie=re.type,ne=re.dataKey,ce=re.allowDataOverflow,J=re.allowDuplicatedCategory,ee=re.scale,he=re.ticks,ge=re.includeHidden,Oe=re[m];if(H[Oe])return H;var at=Nx(t.data,{graphicalItems:d.filter(function(lt){var ct,jt=m in lt.props?lt.props[m]:(ct=lt.type.defaultProps)===null||ct===void 0?void 0:ct[m];return jt===Oe}),dataStartIndex:M,dataEndIndex:E}),ke=at.length,qe,et,st;GX(re.domain,ce,ie)&&(qe=nS(re.domain,null,ce),F&&(ie==="number"||ee!=="auto")&&(st=Kg(at,ne,"category")));var rt=QR(ie);if(!qe||qe.length===0){var Te,Ge=(Te=re.domain)!==null&&Te!==void 0?Te:rt;if(ne){if(qe=Kg(at,ne,ie),ie==="category"&&F){var Ze=b4(qe);J&&Ze?(et=qe,qe=$_(0,ke)):J||(qe=vC(Ge,qe,G).reduce(function(lt,ct){return lt.indexOf(ct)>=0?lt:[].concat(jm(lt),[ct])},[]))}else if(ie==="category")J?qe=qe.filter(function(lt){return lt!==""&&!Yr(lt)}):qe=vC(Ge,qe,G).reduce(function(lt,ct){return lt.indexOf(ct)>=0||ct===""||Yr(ct)?lt:[].concat(jm(lt),[ct])},[]);else if(ie==="number"){var dt=DU(at,d.filter(function(lt){var ct,jt,Gt=m in lt.props?lt.props[m]:(ct=lt.type.defaultProps)===null||ct===void 0?void 0:ct[m],zt="hide"in lt.props?lt.props.hide:(jt=lt.type.defaultProps)===null||jt===void 0?void 0:jt.hide;return Gt===Oe&&(ge||!zt)}),ne,y,N);dt&&(qe=dt)}F&&(ie==="number"||ee!=="auto")&&(st=Kg(at,ne,"category"))}else F?qe=$_(0,ke):l&&l[Oe]&&l[Oe].hasStack&&ie==="number"?qe=L==="expand"?[0,1]:KN(l[Oe].stackGroups,M,E):qe=XN(at,d.filter(function(lt){var ct=m in lt.props?lt.props[m]:lt.type.defaultProps[m],jt="hide"in lt.props?lt.props.hide:lt.type.defaultProps.hide;return ct===Oe&&(ge||!jt)}),ie,N,!0);if(ie==="number")qe=zS(C,qe,Oe,y,he),Ge&&(qe=nS(Ge,qe,ce));else if(ie==="category"&&Ge){var xe=Ge,We=qe.every(function(lt){return xe.indexOf(lt)>=0});We&&(qe=xe)}}return vt(vt({},H),{},gr({},Oe,vt(vt({},re),{},{axisType:y,domain:qe,categoricalDomain:st,duplicateDomain:et,originalDomain:(q=re.domain)!==null&&q!==void 0?q:rt,isCategorical:F,layout:N})))},{})},xW=function(t,i){var a=i.graphicalItems,d=i.Axis,y=i.axisType,m=i.axisIdKey,l=i.stackGroups,M=i.dataStartIndex,E=i.dataEndIndex,N=t.layout,C=t.children,L=Nx(t.data,{graphicalItems:a,dataStartIndex:M,dataEndIndex:E}),F=L.length,H=WN(N,y),G=-1;return a.reduce(function(q,re){var ie=re.type.defaultProps!==void 0?vt(vt({},re.type.defaultProps),re.props):re.props,ne=ie[m],ce=QR("number");if(!q[ne]){G++;var J;return H?J=$_(0,F):l&&l[ne]&&l[ne].hasStack?(J=KN(l[ne].stackGroups,M,E),J=zS(C,J,ne,y)):(J=nS(ce,XN(L,a.filter(function(ee){var he,ge,Oe=m in ee.props?ee.props[m]:(he=ee.type.defaultProps)===null||he===void 0?void 0:he[m],at="hide"in ee.props?ee.props.hide:(ge=ee.type.defaultProps)===null||ge===void 0?void 0:ge.hide;return Oe===ne&&!at}),"number",N),d.defaultProps.allowDataOverflow),J=zS(C,J,ne,y)),vt(vt({},q),{},gr({},ne,vt(vt({axisType:y},d.defaultProps),{},{hide:!0,orientation:ul(mW,"".concat(y,".").concat(G%2),null),domain:J,originalDomain:ce,isCategorical:H,layout:N})))}return q},{})},bW=function(t,i){var a=i.axisType,d=a===void 0?"xAxis":a,y=i.AxisComp,m=i.graphicalItems,l=i.stackGroups,M=i.dataStartIndex,E=i.dataEndIndex,N=t.children,C="".concat(d,"Id"),L=hl(N,y),F={};return L&&L.length?F=_W(t,{axes:L,graphicalItems:m,axisType:d,axisIdKey:C,stackGroups:l,dataStartIndex:M,dataEndIndex:E}):m&&m.length&&(F=xW(t,{Axis:y,graphicalItems:m,axisType:d,axisIdKey:C,stackGroups:l,dataStartIndex:M,dataEndIndex:E})),F},wW=function(t){var i=hd(t),a=Hu(i,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:pT(a,function(d){return d.coordinate}),tooltipAxis:i,tooltipAxisBandSize:I_(i,a)}},lI=function(t){var i=t.children,a=t.defaultShowTooltip,d=Ts(i,gm),y=0,m=0;return t.data&&t.data.length!==0&&(m=t.data.length-1),d&&d.props&&(d.props.startIndex>=0&&(y=d.props.startIndex),d.props.endIndex>=0&&(m=d.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:y,dataEndIndex:m,activeTooltipIndex:-1,isTooltipActive:!!a}},SW=function(t){return!t||!t.length?!1:t.some(function(i){var a=Wu(i&&i.type);return a&&a.indexOf("Bar")>=0})},cI=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},TW=function(t,i){var a=t.props,d=t.graphicalItems,y=t.xAxisMap,m=y===void 0?{}:y,l=t.yAxisMap,M=l===void 0?{}:l,E=a.width,N=a.height,C=a.children,L=a.margin||{},F=Ts(C,gm),H=Ts(C,Pf),G=Object.keys(M).reduce(function(J,ee){var he=M[ee],ge=he.orientation;return!he.mirror&&!he.hide?vt(vt({},J),{},gr({},ge,J[ge]+he.width)):J},{left:L.left||0,right:L.right||0}),q=Object.keys(m).reduce(function(J,ee){var he=m[ee],ge=he.orientation;return!he.mirror&&!he.hide?vt(vt({},J),{},gr({},ge,ul(J,"".concat(ge))+he.height)):J},{top:L.top||0,bottom:L.bottom||0}),re=vt(vt({},q),G),ie=re.bottom;F&&(re.bottom+=F.props.height||gm.defaultProps.height),H&&i&&(re=NU(re,d,a,i));var ne=E-re.left-re.right,ce=N-re.top-re.bottom;return vt(vt({brushBottom:ie},re),{},{width:Math.max(ne,0),height:Math.max(ce,0)})},AW=function(t,i){if(i==="xAxis")return t[i].width;if(i==="yAxis")return t[i].height},MW=function(t){var i=t.chartName,a=t.GraphicalChild,d=t.defaultTooltipEventType,y=d===void 0?"axis":d,m=t.validateTooltipEventTypes,l=m===void 0?["axis"]:m,M=t.axisComponents,E=t.legendContent,N=t.formatAxisMap,C=t.defaultProps,L=function(re,ie){var ne=ie.graphicalItems,ce=ie.stackGroups,J=ie.offset,ee=ie.updateId,he=ie.dataStartIndex,ge=ie.dataEndIndex,Oe=re.barSize,at=re.layout,ke=re.barGap,qe=re.barCategoryGap,et=re.maxBarSize,st=cI(at),rt=st.numericAxisName,Te=st.cateAxisName,Ge=SW(ne),Ze=[];return ne.forEach(function(dt,xe){var We=Nx(re.data,{graphicalItems:[dt],dataStartIndex:he,dataEndIndex:ge}),lt=dt.type.defaultProps!==void 0?vt(vt({},dt.type.defaultProps),dt.props):dt.props,ct=lt.dataKey,jt=lt.maxBarSize,Gt=lt["".concat(rt,"Id")],zt=lt["".concat(Te,"Id")],yr={},ar=M.reduce(function(ki,Ni){var Yi=ie["".concat(Ni.axisType,"Map")],Eo=lt["".concat(Ni.axisType,"Id")];Yi&&Yi[Eo]||Ni.axisType==="zAxis"||Nf();var Ps=Yi[Eo];return vt(vt({},ki),{},gr(gr({},Ni.axisType,Ps),"".concat(Ni.axisType,"Ticks"),Hu(Ps)))},yr),Ot=ar[Te],rr=ar["".concat(Te,"Ticks")],or=ce&&ce[Gt]&&ce[Gt].hasStack&&XU(dt,ce[Gt].stackGroups),_t=Wu(dt.type).indexOf("Bar")>=0,fr=I_(Ot,rr),Jt=[],Kr=Ge&&IU({barSize:Oe,stackGroups:ce,totalSize:AW(ar,Te)});if(_t){var rn,Qr,Ii=Yr(jt)?et:jt,Wn=(rn=(Qr=I_(Ot,rr,!0))!==null&&Qr!==void 0?Qr:Ii)!==null&&rn!==void 0?rn:0;Jt=kU({barGap:ke,barCategoryGap:qe,bandSize:Wn!==fr?Wn:fr,sizeList:Kr[zt],maxBarSize:Ii}),Wn!==fr&&(Jt=Jt.map(function(ki){return vt(vt({},ki),{},{position:vt(vt({},ki.position),{},{offset:ki.position.offset-Wn/2})})}))}var Fa=dt&&dt.type&&dt.type.getComposedData;Fa&&Ze.push({props:vt(vt({},Fa(vt(vt({},ar),{},{displayedData:We,props:re,dataKey:ct,item:dt,bandSize:fr,barPosition:Jt,offset:J,stackedData:or,layout:at,dataStartIndex:he,dataEndIndex:ge}))),{},gr(gr(gr({key:dt.key||"item-".concat(xe)},rt,ar[rt]),Te,ar[Te]),"animationId",ee)),childIndex:N4(dt,re.children),item:dt})}),Ze},F=function(re,ie){var ne=re.props,ce=re.dataStartIndex,J=re.dataEndIndex,ee=re.updateId;if(!IM({props:ne}))return null;var he=ne.children,ge=ne.layout,Oe=ne.stackOffset,at=ne.data,ke=ne.reverseStackOrder,qe=cI(ge),et=qe.numericAxisName,st=qe.cateAxisName,rt=hl(he,a),Te=GU(at,rt,"".concat(et,"Id"),"".concat(st,"Id"),Oe,ke),Ge=M.reduce(function(lt,ct){var jt="".concat(ct.axisType,"Map");return vt(vt({},lt),{},gr({},jt,bW(ne,vt(vt({},ct),{},{graphicalItems:rt,stackGroups:ct.axisType===et&&Te,dataStartIndex:ce,dataEndIndex:J}))))},{}),Ze=TW(vt(vt({},Ge),{},{props:ne,graphicalItems:rt}),ie==null?void 0:ie.legendBBox);Object.keys(Ge).forEach(function(lt){Ge[lt]=N(ne,Ge[lt],Ze,lt.replace("Map",""),i)});var dt=Ge["".concat(st,"Map")],xe=wW(dt),We=L(ne,vt(vt({},Ge),{},{dataStartIndex:ce,dataEndIndex:J,updateId:ee,graphicalItems:rt,stackGroups:Te,offset:Ze}));return vt(vt({formattedGraphicalItems:We,graphicalItems:rt,offset:Ze,stackGroups:Te},xe),Ge)},H=function(q){function re(ie){var ne,ce,J;return iW(this,re),J=sW(this,re,[ie]),gr(J,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),gr(J,"accessibilityManager",new VX),gr(J,"handleLegendBBoxUpdate",function(ee){if(ee){var he=J.state,ge=he.dataStartIndex,Oe=he.dataEndIndex,at=he.updateId;J.setState(vt({legendBBox:ee},F({props:J.props,dataStartIndex:ge,dataEndIndex:Oe,updateId:at},vt(vt({},J.state),{},{legendBBox:ee}))))}}),gr(J,"handleReceiveSyncEvent",function(ee,he,ge){if(J.props.syncId===ee){if(ge===J.eventEmitterSymbol&&typeof J.props.syncMethod!="function")return;J.applySyncEvent(he)}}),gr(J,"handleBrushChange",function(ee){var he=ee.startIndex,ge=ee.endIndex;if(he!==J.state.dataStartIndex||ge!==J.state.dataEndIndex){var Oe=J.state.updateId;J.setState(function(){return vt({dataStartIndex:he,dataEndIndex:ge},F({props:J.props,dataStartIndex:he,dataEndIndex:ge,updateId:Oe},J.state))}),J.triggerSyncEvent({dataStartIndex:he,dataEndIndex:ge})}}),gr(J,"handleMouseEnter",function(ee){var he=J.getMouseInfo(ee);if(he){var ge=vt(vt({},he),{},{isTooltipActive:!0});J.setState(ge),J.triggerSyncEvent(ge);var Oe=J.props.onMouseEnter;Br(Oe)&&Oe(ge,ee)}}),gr(J,"triggeredAfterMouseMove",function(ee){var he=J.getMouseInfo(ee),ge=he?vt(vt({},he),{},{isTooltipActive:!0}):{isTooltipActive:!1};J.setState(ge),J.triggerSyncEvent(ge);var Oe=J.props.onMouseMove;Br(Oe)&&Oe(ge,ee)}),gr(J,"handleItemMouseEnter",function(ee){J.setState(function(){return{isTooltipActive:!0,activeItem:ee,activePayload:ee.tooltipPayload,activeCoordinate:ee.tooltipPosition||{x:ee.cx,y:ee.cy}}})}),gr(J,"handleItemMouseLeave",function(){J.setState(function(){return{isTooltipActive:!1}})}),gr(J,"handleMouseMove",function(ee){ee.persist(),J.throttleTriggeredAfterMouseMove(ee)}),gr(J,"handleMouseLeave",function(ee){J.throttleTriggeredAfterMouseMove.cancel();var he={isTooltipActive:!1};J.setState(he),J.triggerSyncEvent(he);var ge=J.props.onMouseLeave;Br(ge)&&ge(he,ee)}),gr(J,"handleOuterEvent",function(ee){var he=k4(ee),ge=ul(J.props,"".concat(he));if(he&&Br(ge)){var Oe,at;/.*touch.*/i.test(he)?at=J.getMouseInfo(ee.changedTouches[0]):at=J.getMouseInfo(ee),ge((Oe=at)!==null&&Oe!==void 0?Oe:{},ee)}}),gr(J,"handleClick",function(ee){var he=J.getMouseInfo(ee);if(he){var ge=vt(vt({},he),{},{isTooltipActive:!0});J.setState(ge),J.triggerSyncEvent(ge);var Oe=J.props.onClick;Br(Oe)&&Oe(ge,ee)}}),gr(J,"handleMouseDown",function(ee){var he=J.props.onMouseDown;if(Br(he)){var ge=J.getMouseInfo(ee);he(ge,ee)}}),gr(J,"handleMouseUp",function(ee){var he=J.props.onMouseUp;if(Br(he)){var ge=J.getMouseInfo(ee);he(ge,ee)}}),gr(J,"handleTouchMove",function(ee){ee.changedTouches!=null&&ee.changedTouches.length>0&&J.throttleTriggeredAfterMouseMove(ee.changedTouches[0])}),gr(J,"handleTouchStart",function(ee){ee.changedTouches!=null&&ee.changedTouches.length>0&&J.handleMouseDown(ee.changedTouches[0])}),gr(J,"handleTouchEnd",function(ee){ee.changedTouches!=null&&ee.changedTouches.length>0&&J.handleMouseUp(ee.changedTouches[0])}),gr(J,"handleDoubleClick",function(ee){var he=J.props.onDoubleClick;if(Br(he)){var ge=J.getMouseInfo(ee);he(ge,ee)}}),gr(J,"handleContextMenu",function(ee){var he=J.props.onContextMenu;if(Br(he)){var ge=J.getMouseInfo(ee);he(ge,ee)}}),gr(J,"triggerSyncEvent",function(ee){J.props.syncId!==void 0&&o2.emit(s2,J.props.syncId,ee,J.eventEmitterSymbol)}),gr(J,"applySyncEvent",function(ee){var he=J.props,ge=he.layout,Oe=he.syncMethod,at=J.state.updateId,ke=ee.dataStartIndex,qe=ee.dataEndIndex;if(ee.dataStartIndex!==void 0||ee.dataEndIndex!==void 0)J.setState(vt({dataStartIndex:ke,dataEndIndex:qe},F({props:J.props,dataStartIndex:ke,dataEndIndex:qe,updateId:at},J.state)));else if(ee.activeTooltipIndex!==void 0){var et=ee.chartX,st=ee.chartY,rt=ee.activeTooltipIndex,Te=J.state,Ge=Te.offset,Ze=Te.tooltipTicks;if(!Ge)return;if(typeof Oe=="function")rt=Oe(Ze,ee);else if(Oe==="value"){rt=-1;for(var dt=0;dt<Ze.length;dt++)if(Ze[dt].value===ee.activeLabel){rt=dt;break}}var xe=vt(vt({},Ge),{},{x:Ge.left,y:Ge.top}),We=Math.min(et,xe.x+xe.width),lt=Math.min(st,xe.y+xe.height),ct=Ze[rt]&&Ze[rt].value,jt=FS(J.state,J.props.data,rt),Gt=Ze[rt]?{x:ge==="horizontal"?Ze[rt].coordinate:We,y:ge==="horizontal"?lt:Ze[rt].coordinate}:KR;J.setState(vt(vt({},ee),{},{activeLabel:ct,activeCoordinate:Gt,activePayload:jt,activeTooltipIndex:rt}))}else J.setState(ee)}),gr(J,"renderCursor",function(ee){var he,ge=J.state,Oe=ge.isTooltipActive,at=ge.activeCoordinate,ke=ge.activePayload,qe=ge.offset,et=ge.activeTooltipIndex,st=ge.tooltipAxisBandSize,rt=J.getTooltipEventType(),Te=(he=ee.props.active)!==null&&he!==void 0?he:Oe,Ge=J.props.layout,Ze=ee.key||"_recharts-cursor";return $e.createElement(KX,{key:Ze,activeCoordinate:at,activePayload:ke,activeTooltipIndex:et,chartName:i,element:ee,isActive:Te,layout:Ge,offset:qe,tooltipAxisBandSize:st,tooltipEventType:rt})}),gr(J,"renderPolarAxis",function(ee,he,ge){var Oe=ul(ee,"type.axisType"),at=ul(J.state,"".concat(Oe,"Map")),ke=ee.type.defaultProps,qe=ke!==void 0?vt(vt({},ke),ee.props):ee.props,et=at&&at[qe["".concat(Oe,"Id")]];return Fe.cloneElement(ee,vt(vt({},et),{},{className:ln(Oe,et.className),key:ee.key||"".concat(he,"-").concat(ge),ticks:Hu(et,!0)}))}),gr(J,"renderPolarGrid",function(ee){var he=ee.props,ge=he.radialLines,Oe=he.polarAngles,at=he.polarRadius,ke=J.state,qe=ke.radiusAxisMap,et=ke.angleAxisMap,st=hd(qe),rt=hd(et),Te=rt.cx,Ge=rt.cy,Ze=rt.innerRadius,dt=rt.outerRadius;return Fe.cloneElement(ee,{polarAngles:Array.isArray(Oe)?Oe:Hu(rt,!0).map(function(xe){return xe.coordinate}),polarRadius:Array.isArray(at)?at:Hu(st,!0).map(function(xe){return xe.coordinate}),cx:Te,cy:Ge,innerRadius:Ze,outerRadius:dt,key:ee.key||"polar-grid",radialLines:ge})}),gr(J,"renderLegend",function(){var ee=J.state.formattedGraphicalItems,he=J.props,ge=he.children,Oe=he.width,at=he.height,ke=J.props.margin||{},qe=Oe-(ke.left||0)-(ke.right||0),et=ZN({children:ge,formattedGraphicalItems:ee,legendWidth:qe,legendContent:E});if(!et)return null;var st=et.item,rt=aI(et,QX);return Fe.cloneElement(st,vt(vt({},rt),{},{chartWidth:Oe,chartHeight:at,margin:ke,onBBoxUpdate:J.handleLegendBBoxUpdate}))}),gr(J,"renderTooltip",function(){var ee,he=J.props,ge=he.children,Oe=he.accessibilityLayer,at=Ts(ge,Yc);if(!at)return null;var ke=J.state,qe=ke.isTooltipActive,et=ke.activeCoordinate,st=ke.activePayload,rt=ke.activeLabel,Te=ke.offset,Ge=(ee=at.props.active)!==null&&ee!==void 0?ee:qe;return Fe.cloneElement(at,{viewBox:vt(vt({},Te),{},{x:Te.left,y:Te.top}),active:Ge,label:rt,payload:Ge?st:[],coordinate:et,accessibilityLayer:Oe})}),gr(J,"renderBrush",function(ee){var he=J.props,ge=he.margin,Oe=he.data,at=J.state,ke=at.offset,qe=at.dataStartIndex,et=at.dataEndIndex,st=at.updateId;return Fe.cloneElement(ee,{key:ee.key||"_recharts-brush",onChange:Zv(J.handleBrushChange,ee.props.onChange),data:Oe,x:Dt(ee.props.x)?ee.props.x:ke.left,y:Dt(ee.props.y)?ee.props.y:ke.top+ke.height+ke.brushBottom-(ge.bottom||0),width:Dt(ee.props.width)?ee.props.width:ke.width,startIndex:qe,endIndex:et,updateId:"brush-".concat(st)})}),gr(J,"renderReferenceElement",function(ee,he,ge){if(!ee)return null;var Oe=J,at=Oe.clipPathId,ke=J.state,qe=ke.xAxisMap,et=ke.yAxisMap,st=ke.offset,rt=ee.type.defaultProps||{},Te=ee.props,Ge=Te.xAxisId,Ze=Ge===void 0?rt.xAxisId:Ge,dt=Te.yAxisId,xe=dt===void 0?rt.yAxisId:dt;return Fe.cloneElement(ee,{key:ee.key||"".concat(he,"-").concat(ge),xAxis:qe[Ze],yAxis:et[xe],viewBox:{x:st.left,y:st.top,width:st.width,height:st.height},clipPathId:at})}),gr(J,"renderActivePoints",function(ee){var he=ee.item,ge=ee.activePoint,Oe=ee.basePoint,at=ee.childIndex,ke=ee.isRange,qe=[],et=he.props.key,st=he.item.type.defaultProps!==void 0?vt(vt({},he.item.type.defaultProps),he.item.props):he.item.props,rt=st.activeDot,Te=st.dataKey,Ge=vt(vt({index:at,dataKey:Te,cx:ge.x,cy:ge.y,r:4,fill:FT(he.item),strokeWidth:2,stroke:"#fff",payload:ge.payload,value:ge.value},tn(rt,!1)),o_(rt));return qe.push(re.renderActiveDot(rt,Ge,"".concat(et,"-activePoint-").concat(at))),Oe?qe.push(re.renderActiveDot(rt,vt(vt({},Ge),{},{cx:Oe.x,cy:Oe.y}),"".concat(et,"-basePoint-").concat(at))):ke&&qe.push(null),qe}),gr(J,"renderGraphicChild",function(ee,he,ge){var Oe=J.filterFormatItem(ee,he,ge);if(!Oe)return null;var at=J.getTooltipEventType(),ke=J.state,qe=ke.isTooltipActive,et=ke.tooltipAxis,st=ke.activeTooltipIndex,rt=ke.activeLabel,Te=J.props.children,Ge=Ts(Te,Yc),Ze=Oe.props,dt=Ze.points,xe=Ze.isRange,We=Ze.baseLine,lt=Oe.item.type.defaultProps!==void 0?vt(vt({},Oe.item.type.defaultProps),Oe.item.props):Oe.item.props,ct=lt.activeDot,jt=lt.hide,Gt=lt.activeBar,zt=lt.activeShape,yr=!!(!jt&&qe&&Ge&&(ct||Gt||zt)),ar={};at!=="axis"&&Ge&&Ge.props.trigger==="click"?ar={onClick:Zv(J.handleItemMouseEnter,ee.props.onClick)}:at!=="axis"&&(ar={onMouseLeave:Zv(J.handleItemMouseLeave,ee.props.onMouseLeave),onMouseEnter:Zv(J.handleItemMouseEnter,ee.props.onMouseEnter)});var Ot=Fe.cloneElement(ee,vt(vt({},Oe.props),ar));function rr(Ni){return typeof et.dataKey=="function"?et.dataKey(Ni.payload):null}if(yr)if(st>=0){var or,_t;if(et.dataKey&&!et.allowDuplicatedCategory){var fr=typeof et.dataKey=="function"?rr:"payload.".concat(et.dataKey.toString());or=a_(dt,fr,rt),_t=xe&&We&&a_(We,fr,rt)}else or=dt==null?void 0:dt[st],_t=xe&&We&&We[st];if(zt||Gt){var Jt=ee.props.activeIndex!==void 0?ee.props.activeIndex:st;return[Fe.cloneElement(ee,vt(vt(vt({},Oe.props),ar),{},{activeIndex:Jt})),null,null]}if(!Yr(or))return[Ot].concat(jm(J.renderActivePoints({item:Oe,activePoint:or,basePoint:_t,childIndex:st,isRange:xe})))}else{var Kr,rn=(Kr=J.getItemByXY(J.state.activeCoordinate))!==null&&Kr!==void 0?Kr:{graphicalItem:Ot},Qr=rn.graphicalItem,Ii=Qr.item,Wn=Ii===void 0?ee:Ii,Fa=Qr.childIndex,ki=vt(vt(vt({},Oe.props),ar),{},{activeIndex:Fa});return[Fe.cloneElement(Wn,ki),null,null]}return xe?[Ot,null,null]:[Ot,null]}),gr(J,"renderCustomized",function(ee,he,ge){return Fe.cloneElement(ee,vt(vt({key:"recharts-customized-".concat(ge)},J.props),J.state))}),gr(J,"renderMap",{CartesianGrid:{handler:Kv,once:!0},ReferenceArea:{handler:J.renderReferenceElement},ReferenceLine:{handler:Kv},ReferenceDot:{handler:J.renderReferenceElement},XAxis:{handler:Kv},YAxis:{handler:Kv},Brush:{handler:J.renderBrush,once:!0},Bar:{handler:J.renderGraphicChild},Line:{handler:J.renderGraphicChild},Area:{handler:J.renderGraphicChild},Radar:{handler:J.renderGraphicChild},RadialBar:{handler:J.renderGraphicChild},Scatter:{handler:J.renderGraphicChild},Pie:{handler:J.renderGraphicChild},Funnel:{handler:J.renderGraphicChild},Tooltip:{handler:J.renderCursor,once:!0},PolarGrid:{handler:J.renderPolarGrid,once:!0},PolarAngleAxis:{handler:J.renderPolarAxis},PolarRadiusAxis:{handler:J.renderPolarAxis},Customized:{handler:J.renderCustomized}}),J.clipPathId="".concat((ne=ie.id)!==null&&ne!==void 0?ne:$y("recharts"),"-clip"),J.throttleTriggeredAfterMouseMove=Gk(J.triggeredAfterMouseMove,(ce=ie.throttleDelay)!==null&&ce!==void 0?ce:1e3/60),J.state={},J}return uW(re,q),oW(re,[{key:"componentDidMount",value:function(){var ne,ce;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(ne=this.props.margin.left)!==null&&ne!==void 0?ne:0,top:(ce=this.props.margin.top)!==null&&ce!==void 0?ce:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var ne=this.props,ce=ne.children,J=ne.data,ee=ne.height,he=ne.layout,ge=Ts(ce,Yc);if(ge){var Oe=ge.props.defaultIndex;if(!(typeof Oe!="number"||Oe<0||Oe>this.state.tooltipTicks.length-1)){var at=this.state.tooltipTicks[Oe]&&this.state.tooltipTicks[Oe].value,ke=FS(this.state,J,Oe,at),qe=this.state.tooltipTicks[Oe].coordinate,et=(this.state.offset.top+ee)/2,st=he==="horizontal",rt=st?{x:qe,y:et}:{y:qe,x:et},Te=this.state.formattedGraphicalItems.find(function(Ze){var dt=Ze.item;return dt.type.name==="Scatter"});Te&&(rt=vt(vt({},rt),Te.props.points[Oe].tooltipPosition),ke=Te.props.points[Oe].tooltipPayload);var Ge={activeTooltipIndex:Oe,isTooltipActive:!0,activeLabel:at,activePayload:ke,activeCoordinate:rt};this.setState(Ge),this.renderCursor(ge),this.accessibilityManager.setIndex(Oe)}}}},{key:"getSnapshotBeforeUpdate",value:function(ne,ce){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==ce.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==ne.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==ne.margin){var J,ee;this.accessibilityManager.setDetails({offset:{left:(J=this.props.margin.left)!==null&&J!==void 0?J:0,top:(ee=this.props.margin.top)!==null&&ee!==void 0?ee:0}})}return null}},{key:"componentDidUpdate",value:function(ne){A2([Ts(ne.children,Yc)],[Ts(this.props.children,Yc)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var ne=Ts(this.props.children,Yc);if(ne&&typeof ne.props.shared=="boolean"){var ce=ne.props.shared?"axis":"item";return l.indexOf(ce)>=0?ce:y}return y}},{key:"getMouseInfo",value:function(ne){if(!this.container)return null;var ce=this.container,J=ce.getBoundingClientRect(),ee=bF(J),he={chartX:Math.round(ne.pageX-ee.left),chartY:Math.round(ne.pageY-ee.top)},ge=J.width/ce.offsetWidth||1,Oe=this.inRange(he.chartX,he.chartY,ge);if(!Oe)return null;var at=this.state,ke=at.xAxisMap,qe=at.yAxisMap,et=this.getTooltipEventType(),st=sI(this.state,this.props.data,this.props.layout,Oe);if(et!=="axis"&&ke&&qe){var rt=hd(ke).scale,Te=hd(qe).scale,Ge=rt&&rt.invert?rt.invert(he.chartX):null,Ze=Te&&Te.invert?Te.invert(he.chartY):null;return vt(vt({},he),{},{xValue:Ge,yValue:Ze},st)}return st?vt(vt({},he),st):null}},{key:"inRange",value:function(ne,ce){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ee=this.props.layout,he=ne/J,ge=ce/J;if(ee==="horizontal"||ee==="vertical"){var Oe=this.state.offset,at=he>=Oe.left&&he<=Oe.left+Oe.width&&ge>=Oe.top&&ge<=Oe.top+Oe.height;return at?{x:he,y:ge}:null}var ke=this.state,qe=ke.angleAxisMap,et=ke.radiusAxisMap;if(qe&&et){var st=hd(qe);return bC({x:he,y:ge},st)}return null}},{key:"parseEventsOfWrapper",value:function(){var ne=this.props.children,ce=this.getTooltipEventType(),J=Ts(ne,Yc),ee={};J&&ce==="axis"&&(J.props.trigger==="click"?ee={onClick:this.handleClick}:ee={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var he=o_(this.props,this.handleOuterEvent);return vt(vt({},he),ee)}},{key:"addListener",value:function(){o2.on(s2,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){o2.removeListener(s2,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(ne,ce,J){for(var ee=this.state.formattedGraphicalItems,he=0,ge=ee.length;he<ge;he++){var Oe=ee[he];if(Oe.item===ne||Oe.props.key===ne.key||ce===Wu(Oe.item.type)&&J===Oe.childIndex)return Oe}return null}},{key:"renderClipPath",value:function(){var ne=this.clipPathId,ce=this.state.offset,J=ce.left,ee=ce.top,he=ce.height,ge=ce.width;return $e.createElement("defs",null,$e.createElement("clipPath",{id:ne},$e.createElement("rect",{x:J,y:ee,height:he,width:ge})))}},{key:"getXScales",value:function(){var ne=this.state.xAxisMap;return ne?Object.entries(ne).reduce(function(ce,J){var ee=iI(J,2),he=ee[0],ge=ee[1];return vt(vt({},ce),{},gr({},he,ge.scale))},{}):null}},{key:"getYScales",value:function(){var ne=this.state.yAxisMap;return ne?Object.entries(ne).reduce(function(ce,J){var ee=iI(J,2),he=ee[0],ge=ee[1];return vt(vt({},ce),{},gr({},he,ge.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(ne){var ce;return(ce=this.state.xAxisMap)===null||ce===void 0||(ce=ce[ne])===null||ce===void 0?void 0:ce.scale}},{key:"getYScaleByAxisId",value:function(ne){var ce;return(ce=this.state.yAxisMap)===null||ce===void 0||(ce=ce[ne])===null||ce===void 0?void 0:ce.scale}},{key:"getItemByXY",value:function(ne){var ce=this.state,J=ce.formattedGraphicalItems,ee=ce.activeItem;if(J&&J.length)for(var he=0,ge=J.length;he<ge;he++){var Oe=J[he],at=Oe.props,ke=Oe.item,qe=ke.type.defaultProps!==void 0?vt(vt({},ke.type.defaultProps),ke.props):ke.props,et=Wu(ke.type);if(et==="Bar"){var st=(at.data||[]).find(function(Ze){return L9(ne,Ze)});if(st)return{graphicalItem:Oe,payload:st}}else if(et==="RadialBar"){var rt=(at.data||[]).find(function(Ze){return bC(ne,Ze)});if(rt)return{graphicalItem:Oe,payload:rt}}else if(Mx(Oe,ee)||jx(Oe,ee)||Oy(Oe,ee)){var Te=PG({graphicalItem:Oe,activeTooltipItem:ee,itemData:qe.data}),Ge=qe.activeIndex===void 0?Te:qe.activeIndex;return{graphicalItem:vt(vt({},Oe),{},{childIndex:Ge}),payload:Oy(Oe,ee)?qe.data[Te]:Oe.props.data[Te]}}}return null}},{key:"render",value:function(){var ne=this;if(!IM(this))return null;var ce=this.props,J=ce.children,ee=ce.className,he=ce.width,ge=ce.height,Oe=ce.style,at=ce.compact,ke=ce.title,qe=ce.desc,et=aI(ce,JX),st=tn(et,!1);if(at)return $e.createElement(BO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$e.createElement(j2,em({},st,{width:he,height:ge,title:ke,desc:qe}),this.renderClipPath(),NM(J,this.renderMap)));if(this.props.accessibilityLayer){var rt,Te;st.tabIndex=(rt=this.props.tabIndex)!==null&&rt!==void 0?rt:0,st.role=(Te=this.props.role)!==null&&Te!==void 0?Te:"application",st.onKeyDown=function(Ze){ne.accessibilityManager.keyboardEvent(Ze)},st.onFocus=function(){ne.accessibilityManager.focus()}}var Ge=this.parseEventsOfWrapper();return $e.createElement(BO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$e.createElement("div",em({className:ln("recharts-wrapper",ee),style:vt({position:"relative",cursor:"default",width:he,height:ge},Oe)},Ge,{ref:function(dt){ne.container=dt}}),$e.createElement(j2,em({},st,{width:he,height:ge,title:ke,desc:qe,style:gW}),this.renderClipPath(),NM(J,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(Fe.Component);gr(H,"displayName",i),gr(H,"defaultProps",vt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},C)),gr(H,"getDerivedStateFromProps",function(q,re){var ie=q.dataKey,ne=q.data,ce=q.children,J=q.width,ee=q.height,he=q.layout,ge=q.stackOffset,Oe=q.margin,at=re.dataStartIndex,ke=re.dataEndIndex;if(re.updateId===void 0){var qe=lI(q);return vt(vt(vt({},qe),{},{updateId:0},F(vt(vt({props:q},qe),{},{updateId:0}),re)),{},{prevDataKey:ie,prevData:ne,prevWidth:J,prevHeight:ee,prevLayout:he,prevStackOffset:ge,prevMargin:Oe,prevChildren:ce})}if(ie!==re.prevDataKey||ne!==re.prevData||J!==re.prevWidth||ee!==re.prevHeight||he!==re.prevLayout||ge!==re.prevStackOffset||!tm(Oe,re.prevMargin)){var et=lI(q),st={chartX:re.chartX,chartY:re.chartY,isTooltipActive:re.isTooltipActive},rt=vt(vt({},sI(re,ne,he)),{},{updateId:re.updateId+1}),Te=vt(vt(vt({},et),st),rt);return vt(vt(vt({},Te),F(vt({props:q},Te),re)),{},{prevDataKey:ie,prevData:ne,prevWidth:J,prevHeight:ee,prevLayout:he,prevStackOffset:ge,prevMargin:Oe,prevChildren:ce})}if(!A2(ce,re.prevChildren)){var Ge,Ze,dt,xe,We=Ts(ce,gm),lt=We&&(Ge=(Ze=We.props)===null||Ze===void 0?void 0:Ze.startIndex)!==null&&Ge!==void 0?Ge:at,ct=We&&(dt=(xe=We.props)===null||xe===void 0?void 0:xe.endIndex)!==null&&dt!==void 0?dt:ke,jt=lt!==at||ct!==ke,Gt=!Yr(ne),zt=Gt&&!jt?re.updateId:re.updateId+1;return vt(vt({updateId:zt},F(vt(vt({props:q},re),{},{updateId:zt,dataStartIndex:lt,dataEndIndex:ct}),re)),{},{prevChildren:ce,dataStartIndex:lt,dataEndIndex:ct})}return null}),gr(H,"renderActiveDot",function(q,re,ie){var ne;return Fe.isValidElement(q)?ne=Fe.cloneElement(q,re):Br(q)?ne=q(re):ne=$e.createElement(qT,re),$e.createElement(Oi,{className:"recharts-active-dot",key:ie},ne)});var G=Fe.forwardRef(function(re,ie){return $e.createElement(H,em({},re,{ref:ie}))});return G.displayName=H.displayName,G},jW=MW({chartName:"LineChart",GraphicalChild:Sm,axisComponents:[{axisType:"xAxis",AxisComp:kx},{axisType:"yAxis",AxisComp:Dy}],formatAxisMap:TZ});function PW({data:e}){const t=e.map(a=>({month:a.month_ar,"البيع (ر.س/م²)":a.sale_price_per_m2,"الإيجار (ر.س/م²/شهر)":a.rent_price_per_m2_month})),i=({active:a,payload:d,label:y})=>a&&d&&d.length?x.jsxs(Ft,{className:"p-3 shadow-lg",children:[x.jsx("p",{className:"font-semibold mb-2",children:y}),d.map((m,l)=>x.jsxs("p",{style:{color:m.color},className:"text-sm",children:[m.name,": ",new Intl.NumberFormat("ar-SA").format(m.value)]},l))]}):null;return x.jsxs(Ft,{className:"p-6",children:[x.jsxs("div",{className:"mb-6",children:[x.jsx("h2",{className:"text-2xl font-bold mb-2",children:"اتجاهات الأسعار"}),x.jsx("p",{className:"text-muted-foreground",children:"تطور أسعار البيع والإيجار خلال آخر 12 شهر"})]}),x.jsx("div",{className:"w-full h-80",children:x.jsx(pF,{width:"100%",height:"100%",children:x.jsxs(jW,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[x.jsx(zR,{strokeDasharray:"3 3",stroke:"oklch(0.90 0.01 220)"}),x.jsx(kx,{dataKey:"month",tick:{fill:"oklch(0.50 0.01 240)",fontSize:12},angle:-45,textAnchor:"end",height:80}),x.jsx(Dy,{yAxisId:"left",tick:{fill:"oklch(0.50 0.01 240)",fontSize:12},label:{value:"سعر البيع (ر.س/م²)",angle:-90,position:"insideLeft"}}),x.jsx(Dy,{yAxisId:"right",orientation:"right",tick:{fill:"oklch(0.50 0.01 240)",fontSize:12},label:{value:"سعر الإيجار (ر.س/م²/شهر)",angle:90,position:"insideRight"}}),x.jsx(Yc,{content:x.jsx(i,{})}),x.jsx(Pf,{wrapperStyle:{paddingTop:"20px"},iconType:"line"}),x.jsx(Sm,{yAxisId:"left",type:"monotone",dataKey:"البيع (ر.س/م²)",stroke:"oklch(0.45 0.15 240)",strokeWidth:3,dot:{fill:"oklch(0.45 0.15 240)",r:4},activeDot:{r:6}}),x.jsx(Sm,{yAxisId:"right",type:"monotone",dataKey:"الإيجار (ر.س/م²/شهر)",stroke:"oklch(0.60 0.15 180)",strokeWidth:3,dot:{fill:"oklch(0.60 0.15 180)",r:4},activeDot:{r:6}})]})})}),x.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4 text-sm",children:[x.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600"}),x.jsx("span",{className:"font-semibold",children:"البيع"})]}),x.jsx("p",{className:"text-xs text-muted-foreground",children:"نمو مستمر بنسبة 6٪ سنوياً"})]}),x.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx("div",{className:"w-3 h-3 rounded-full bg-green-600"}),x.jsx("span",{className:"font-semibold",children:"الإيجار"})]}),x.jsx("p",{className:"text-xs text-muted-foreground",children:"استقرار نسبي مع نمو 4٪ سنوياً"})]})]})]})}function EW({data:e}){return x.jsx(Ft,{className:"p-6 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:x.jsxs("div",{className:"flex items-start gap-4",children:[x.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:x.jsx(c3,{className:"w-6 h-6 text-blue-600"})}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[x.jsx("h3",{className:"font-bold text-lg",children:"حالة البيانات"}),x.jsx(ry,{className:"bg-blue-600",children:"نسخة تجريبية"})]}),x.jsxs("div",{className:"space-y-2 mb-4",children:[x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[x.jsx(NI,{className:"w-4 h-4 text-blue-600"}),x.jsx("span",{className:"text-muted-foreground",children:"آخر تحديث:"}),x.jsx("span",{className:"font-semibold",children:C5(e.updated_at)})]}),x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[x.jsx(Qc,{className:"w-4 h-4 text-amber-600"}),x.jsx("span",{className:"text-muted-foreground",children:"الفترة:"}),x.jsx("span",{className:"font-semibold",children:e.period})]})]}),x.jsxs("div",{className:"p-4 bg-white/80 rounded-lg border border-blue-200",children:[x.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:[x.jsx("strong",{className:"text-foreground",children:"ملاحظة:"})," ",e.note]}),x.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"البيانات الحالية محلية ومُعدّة للعرض التوضيحي. في النسخة النهائية، سيتم تحديث البيانات تلقائياً من مصادر رسمية معتمدة."})]})]})]})})}function CW(){const e=[{title:"جمع البيانات",description:"تجميع بيانات المعاملات العقارية من مصادر رسمية ومعتمدة"},{title:"التنظيف والتحقق",description:"تنقية البيانات واستبعاد القيم الشاذة والمعاملات غير النمطية"},{title:"التحليل الإحصائي",description:"حساب المتوسطات والنطاقات (P25, P50, P75) لكل منطقة"},{title:"حساب الاتجاهات",description:"تحليل التغيرات السنوية والشهرية وتحديد الاتجاهات"},{title:"تقييم الثقة",description:"حساب مستوى الثقة بناءً على حجم العينة وتناسق البيانات"},{title:"التحديث المستمر",description:"تحديث دوري للبيانات والمؤشرات (شهرياً في النسخة النهائية)"}];return x.jsxs(Ft,{className:"p-8",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[x.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:x.jsx(Vz,{className:"w-6 h-6 text-purple-600"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold",children:"المنهجية"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"كيف نحسب مؤشرات السوق"})]})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map((t,i)=>x.jsxs("div",{className:"flex gap-4",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-bold text-sm",children:i+1})}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold mb-1",children:t.title}),x.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]},i))}),x.jsx("div",{className:"mt-8 p-4 bg-muted/50 rounded-lg",children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx(cl,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold mb-2",children:"معايير الجودة"}),x.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[x.jsx("li",{children:"• استبعاد المعاملات غير النمطية (أقل من 1% أو أكثر من 99%)"}),x.jsx("li",{children:"• الحد الأدنى للعينة: 100 معاملة لكل منطقة"}),x.jsx("li",{children:"• مستوى الثقة يعكس حجم العينة وتناسق البيانات"}),x.jsx("li",{children:"• التحديث الدوري يضمن دقة المؤشرات"})]})]})]})})]})}const OW="2025Q4",IW="2025-10-13",kW="بيانات تجريبية محلية - سيتم تحديثها من مصادر رسمية لاحقاً",NW={sale_price_per_m2:4350,rent_price_per_m2_month:75,sale_yoy:.06,rent_yoy:.04,avg_days_to_sell:52,national_confidence:.82,total_transactions:245e3,transaction_volume_billion:187.5},RW={sale_trend:"صاعد",rent_trend:"مستقر",demand_level:"مرتفع",supply_level:"متوازن"},DW=["نمو مستمر في أسعار البيع بنسبة 6% سنوياً","استقرار نسبي في أسعار الإيجارات","زيادة الطلب على الوحدات السكنية في المدن الرئيسية","تحسن ملحوظ في سرعة البيع مقارنة بالربع السابق"],zW={period:OW,updated_at:IW,note:kW,national:NW,trends:RW,insights:DW},LW=[{id:"riyadh",name:"الرياض",name_en:"Riyadh",sale_price_per_m2:4500,rent_price_per_m2_month:80,sale_p25:3200,sale_p50:4500,sale_p75:6200,rent_p25:60,rent_p50:80,rent_p75:110,sale_yoy:.08,rent_yoy:.05,avg_days_to_sell:48,confidence:.88,transactions:85e3,note:"العاصمة - نمو قوي ومستمر"},{id:"jeddah",name:"جدة",name_en:"Jeddah",sale_price_per_m2:4200,rent_price_per_m2_month:75,sale_p25:3e3,sale_p50:4200,sale_p75:5800,rent_p25:55,rent_p50:75,rent_p75:100,sale_yoy:.07,rent_yoy:.04,avg_days_to_sell:50,confidence:.85,transactions:62e3,note:"المدينة الساحلية - طلب مرتفع"},{id:"dammam",name:"الدمام",name_en:"Dammam",sale_price_per_m2:3800,rent_price_per_m2_month:65,sale_p25:2800,sale_p50:3800,sale_p75:5e3,rent_p25:50,rent_p50:65,rent_p75:85,sale_yoy:.05,rent_yoy:.03,avg_days_to_sell:55,confidence:.8,transactions:38e3,note:"المنطقة الشرقية - استقرار نسبي"},{id:"mecca",name:"مكة المكرمة",name_en:"Makkah",sale_price_per_m2:5200,rent_price_per_m2_month:90,sale_p25:3800,sale_p50:5200,sale_p75:7500,rent_p25:70,rent_p50:90,rent_p75:130,sale_yoy:.09,rent_yoy:.06,avg_days_to_sell:45,confidence:.82,transactions:32e3,note:"المدينة المقدسة - طلب استثنائي"},{id:"medina",name:"المدينة المنورة",name_en:"Madinah",sale_price_per_m2:4800,rent_price_per_m2_month:85,sale_p25:3500,sale_p50:4800,sale_p75:6800,rent_p25:65,rent_p50:85,rent_p75:115,sale_yoy:.08,rent_yoy:.05,avg_days_to_sell:47,confidence:.83,transactions:28e3,note:"المدينة المنورة - نمو مستدام"}],BW=[{month:"2024-11",month_ar:"نوفمبر ٢٠٢٤",sale_price_per_m2:4100,rent_price_per_m2_month:72},{month:"2024-12",month_ar:"ديسمبر ٢٠٢٤",sale_price_per_m2:4150,rent_price_per_m2_month:73},{month:"2025-01",month_ar:"يناير ٢٠٢٥",sale_price_per_m2:4180,rent_price_per_m2_month:73},{month:"2025-02",month_ar:"فبراير ٢٠٢٥",sale_price_per_m2:4200,rent_price_per_m2_month:74},{month:"2025-03",month_ar:"مارس ٢٠٢٥",sale_price_per_m2:4220,rent_price_per_m2_month:74},{month:"2025-04",month_ar:"أبريل ٢٠٢٥",sale_price_per_m2:4250,rent_price_per_m2_month:74},{month:"2025-05",month_ar:"مايو ٢٠٢٥",sale_price_per_m2:4270,rent_price_per_m2_month:75},{month:"2025-06",month_ar:"يونيو ٢٠٢٥",sale_price_per_m2:4290,rent_price_per_m2_month:75},{month:"2025-07",month_ar:"يوليو ٢٠٢٥",sale_price_per_m2:4310,rent_price_per_m2_month:75},{month:"2025-08",month_ar:"أغسطس ٢٠٢٥",sale_price_per_m2:4330,rent_price_per_m2_month:76},{month:"2025-09",month_ar:"سبتمبر ٢٠٢٥",sale_price_per_m2:4340,rent_price_per_m2_month:76},{month:"2025-10",month_ar:"أكتوبر ٢٠٢٥",sale_price_per_m2:4350,rent_price_per_m2_month:75}];function FW(){return zW}function $W(){return LW}function qW(){return BW}function UW(){const e=FW(),t=$W(),i=qW();return x.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted/30 py-12 px-4",children:x.jsxs("div",{className:"container mx-auto max-w-7xl",children:[x.jsxs("div",{className:"text-center mb-12 space-y-4",children:[x.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-semibold mb-4",children:[x.jsx(dc,{className:"w-4 h-4"}),x.jsx("span",{children:"دراسة السوق العقاري السعودي"})]}),x.jsx("h1",{className:"text-4xl md:text-5xl font-black text-balance",children:"السوق العقاري السعودي"}),x.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto text-balance",children:"تحليل شامل ومؤشرات دقيقة لسوق العقارات في المملكة"})]}),x.jsx("div",{className:"mb-8",children:x.jsx(EW,{data:e})}),x.jsxs("div",{className:"mb-12",children:[x.jsx("h2",{className:"text-2xl font-bold mb-6",children:"المؤشرات الرئيسية"}),x.jsx(I5,{data:e})]}),x.jsx("div",{className:"mb-12",children:x.jsx(PW,{data:i})}),x.jsxs("div",{className:"mb-12",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsx("h2",{className:"text-2xl font-bold",children:"المدن الرئيسية"}),x.jsx("div",{className:"text-sm text-muted-foreground",children:"اضغط على أي مدينة لعرض التفاصيل"})]}),x.jsx(k5,{cities:t})]}),x.jsxs("div",{className:"mb-12 grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"p-6 rounded-xl bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(fc,{className:"w-5 h-5 text-green-600"}),x.jsx("h3",{className:"font-bold text-lg",children:"رؤى السوق"})]}),x.jsx("ul",{className:"space-y-2 text-sm",children:e.insights.map((a,d)=>x.jsxs("li",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"text-green-600 font-bold",children:"•"}),x.jsx("span",{children:a})]},d))})]}),x.jsxs("div",{className:"p-6 rounded-xl bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(dc,{className:"w-5 h-5 text-blue-600"}),x.jsx("h3",{className:"font-bold text-lg",children:"الاتجاهات"})]}),x.jsxs("div",{className:"space-y-3 text-sm",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-muted-foreground",children:"اتجاه البيع"}),x.jsx("span",{className:"font-semibold px-3 py-1 bg-green-100 text-green-700 rounded-full",children:e.trends.sale_trend})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-muted-foreground",children:"اتجاه الإيجار"}),x.jsx("span",{className:"font-semibold px-3 py-1 bg-blue-100 text-blue-700 rounded-full",children:e.trends.rent_trend})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-muted-foreground",children:"مستوى الطلب"}),x.jsx("span",{className:"font-semibold px-3 py-1 bg-amber-100 text-amber-700 rounded-full",children:e.trends.demand_level})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-muted-foreground",children:"مستوى العرض"}),x.jsx("span",{className:"font-semibold px-3 py-1 bg-purple-100 text-purple-700 rounded-full",children:e.trends.supply_level})]})]})]})]}),x.jsx("div",{className:"mb-12",children:x.jsx(CW,{})}),x.jsxs("div",{className:"p-8 rounded-xl bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 text-center",children:[x.jsx("h3",{className:"text-2xl font-bold mb-3",children:"قريباً في خطة Smart Plan"}),x.jsx("p",{className:"text-muted-foreground mb-4",children:"🔓 تحليل الحي الكامل، وأفضل مناطق السكن، والتكتلات السعريّة"}),x.jsxs("div",{className:"flex flex-wrap justify-center gap-3 text-sm",children:[x.jsx("span",{className:"px-4 py-2 bg-white rounded-full font-semibold",children:"خريطة تفاعلية"}),x.jsx("span",{className:"px-4 py-2 bg-white rounded-full font-semibold",children:"مقارنات الأحياء"}),x.jsx("span",{className:"px-4 py-2 bg-white rounded-full font-semibold",children:"توقعات الأسعار"}),x.jsx("span",{className:"px-4 py-2 bg-white rounded-full font-semibold",children:"تقارير مفصّلة"})]})]})]})})}var t_={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.9.0/LICENSE.txt
 */var VW=t_.exports,uI;function GW(){return uI||(uI=1,function(e,t){(function(i,a){e.exports=a()})(VW,function(){var i={},a={};function d(m,l,M){if(a[m]=M,m==="index"){var E="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",N={};return a.shared(N),a.index(i,N),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([E],{type:"text/javascript"}))),i}}d("shared",["exports"],function(m){function l(c,n,o,f){return new(o||(o=Promise))(function(v,w){function A(D){try{I(f.next(D))}catch(B){w(B)}}function P(D){try{I(f.throw(D))}catch(B){w(B)}}function I(D){var B;D.done?v(D.value):(B=D.value,B instanceof o?B:new o(function(V){V(B)})).then(A,P)}I((f=f.apply(c,n||[])).next())})}function M(c,n){this.x=c,this.y=n}function E(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var N,C;typeof SuppressedError=="function"&&SuppressedError,M.prototype={clone(){return new M(this.x,this.y)},add(c){return this.clone()._add(c)},sub(c){return this.clone()._sub(c)},multByPoint(c){return this.clone()._multByPoint(c)},divByPoint(c){return this.clone()._divByPoint(c)},mult(c){return this.clone()._mult(c)},div(c){return this.clone()._div(c)},rotate(c){return this.clone()._rotate(c)},rotateAround(c,n){return this.clone()._rotateAround(c,n)},matMult(c){return this.clone()._matMult(c)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(c){return this.x===c.x&&this.y===c.y},dist(c){return Math.sqrt(this.distSqr(c))},distSqr(c){const n=c.x-this.x,o=c.y-this.y;return n*n+o*o},angle(){return Math.atan2(this.y,this.x)},angleTo(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith(c){return this.angleWithSep(c.x,c.y)},angleWithSep(c,n){return Math.atan2(this.x*n-this.y*c,this.x*c+this.y*n)},_matMult(c){const n=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=n,this},_add(c){return this.x+=c.x,this.y+=c.y,this},_sub(c){return this.x-=c.x,this.y-=c.y,this},_mult(c){return this.x*=c,this.y*=c,this},_div(c){return this.x/=c,this.y/=c,this},_multByPoint(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint(c){return this.x/=c.x,this.y/=c.y,this},_unit(){return this._div(this.mag()),this},_perp(){const c=this.y;return this.y=this.x,this.x=-c,this},_rotate(c){const n=Math.cos(c),o=Math.sin(c),f=o*this.x+n*this.y;return this.x=n*this.x-o*this.y,this.y=f,this},_rotateAround(c,n){const o=Math.cos(c),f=Math.sin(c),v=n.y+f*(this.x-n.x)+o*(this.y-n.y);return this.x=n.x+o*(this.x-n.x)-f*(this.y-n.y),this.y=v,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:M},M.convert=function(c){if(c instanceof M)return c;if(Array.isArray(c))return new M(+c[0],+c[1]);if(c.x!==void 0&&c.y!==void 0)return new M(+c.x,+c.y);throw new Error("Expected [x, y] or {x, y} point format")};var L=function(){if(C)return N;function c(n,o,f,v){this.cx=3*n,this.bx=3*(f-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(v-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=o,this.p2x=f,this.p2y=v}return C=1,N=c,c.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,o){if(o===void 0&&(o=1e-6),n<0)return 0;if(n>1)return 1;for(var f=n,v=0;v<8;v++){var w=this.sampleCurveX(f)-n;if(Math.abs(w)<o)return f;var A=this.sampleCurveDerivativeX(f);if(Math.abs(A)<1e-6)break;f-=w/A}var P=0,I=1;for(f=n,v=0;v<20&&(w=this.sampleCurveX(f),!(Math.abs(w-n)<o));v++)n>w?P=f:I=f,f=.5*(I-P)+P;return f},solve:function(n,o){return this.sampleCurveY(this.solveCurveX(n,o))}},N}(),F=E(L);let H,G;function q(){return H==null&&(H=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),H}function re(){if(G==null&&(G=!1,q())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let f=0;f<5*5;f++){const v=4*f;n.fillStyle=`rgb(${v},${v+1},${v+2})`,n.fillRect(f%5,Math.floor(f/5),1,1)}const o=n.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&o[f]!==f){G=!0;break}}}return G||!1}var ie=1e-6,ne=typeof Float32Array<"u"?Float32Array:Array;function ce(){var c=new ne(9);return ne!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function J(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function ee(){var c=new ne(3);return ne!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function he(c){var n=c[0],o=c[1],f=c[2];return Math.sqrt(n*n+o*o+f*f)}function ge(c,n,o){var f=new ne(3);return f[0]=c,f[1]=n,f[2]=o,f}function Oe(c,n,o){return c[0]=n[0]+o[0],c[1]=n[1]+o[1],c[2]=n[2]+o[2],c}function at(c,n,o){return c[0]=n[0]*o,c[1]=n[1]*o,c[2]=n[2]*o,c}function ke(c,n,o){var f=n[0],v=n[1],w=n[2],A=o[0],P=o[1],I=o[2];return c[0]=v*I-w*P,c[1]=w*A-f*I,c[2]=f*P-v*A,c}var qe,et=he;function st(c,n,o){var f=n[0],v=n[1],w=n[2],A=n[3];return c[0]=o[0]*f+o[4]*v+o[8]*w+o[12]*A,c[1]=o[1]*f+o[5]*v+o[9]*w+o[13]*A,c[2]=o[2]*f+o[6]*v+o[10]*w+o[14]*A,c[3]=o[3]*f+o[7]*v+o[11]*w+o[15]*A,c}function rt(){var c=new ne(4);return ne!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function Te(c,n,o,f){var v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",w=Math.PI/360;n*=w,f*=w,o*=w;var A=Math.sin(n),P=Math.cos(n),I=Math.sin(o),D=Math.cos(o),B=Math.sin(f),V=Math.cos(f);switch(v){case"xyz":c[0]=A*D*V+P*I*B,c[1]=P*I*V-A*D*B,c[2]=P*D*B+A*I*V,c[3]=P*D*V-A*I*B;break;case"xzy":c[0]=A*D*V-P*I*B,c[1]=P*I*V-A*D*B,c[2]=P*D*B+A*I*V,c[3]=P*D*V+A*I*B;break;case"yxz":c[0]=A*D*V+P*I*B,c[1]=P*I*V-A*D*B,c[2]=P*D*B-A*I*V,c[3]=P*D*V+A*I*B;break;case"yzx":c[0]=A*D*V+P*I*B,c[1]=P*I*V+A*D*B,c[2]=P*D*B-A*I*V,c[3]=P*D*V-A*I*B;break;case"zxy":c[0]=A*D*V-P*I*B,c[1]=P*I*V+A*D*B,c[2]=P*D*B+A*I*V,c[3]=P*D*V-A*I*B;break;case"zyx":c[0]=A*D*V-P*I*B,c[1]=P*I*V+A*D*B,c[2]=P*D*B-A*I*V,c[3]=P*D*V+A*I*B;break;default:throw new Error("Unknown angle order "+v)}return c}function Ge(){var c=new ne(2);return ne!=Float32Array&&(c[0]=0,c[1]=0),c}function Ze(c,n){var o=new ne(2);return o[0]=c,o[1]=n,o}ee(),qe=new ne(4),ne!=Float32Array&&(qe[0]=0,qe[1]=0,qe[2]=0,qe[3]=0),ee(),ge(1,0,0),ge(0,1,0),rt(),rt(),ce(),Ge();const dt=8192;function xe(c,n,o){return n*(dt/(c.tileSize*Math.pow(2,o-c.tileID.overscaledZ)))}function We(c,n){return(c%n+n)%n}function lt(c,n,o){return c*(1-o)+n*o}function ct(c){if(c<=0)return 0;if(c>=1)return 1;const n=c*c,o=n*c;return 4*(c<.5?o:3*(c-n)+o-.75)}function jt(c,n,o,f){const v=new F(c,n,o,f);return w=>v.solve(w)}const Gt=jt(.25,.1,.25,1);function zt(c,n,o){return Math.min(o,Math.max(n,c))}function yr(c,n,o){const f=o-n,v=((c-n)%f+f)%f+n;return v===n?o:v}function ar(c,...n){for(const o of n)for(const f in o)c[f]=o[f];return c}let Ot=1;function rr(c,n,o){const f={};for(const v in c)f[v]=n.call(this,c[v],v,c);return f}function or(c,n,o){const f={};for(const v in c)n.call(this,c[v],v,c)&&(f[v]=c[v]);return f}function _t(c){return Array.isArray(c)?c.map(_t):typeof c=="object"&&c?rr(c,_t):c}const fr={};function Jt(c){fr[c]||(typeof console<"u"&&console.warn(c),fr[c]=!0)}function Kr(c,n,o){return(o.y-c.y)*(n.x-c.x)>(n.y-c.y)*(o.x-c.x)}function rn(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let Qr=null;function Ii(c){if(Qr==null){const n=c.navigator?c.navigator.userAgent:null;Qr=!!c.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Qr}function Wn(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Fa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ki(c,n,o,f,v){return l(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const w=new VideoFrame(c,{timestamp:0});try{const A=w==null?void 0:w.format;if(!A||!A.startsWith("BGR")&&!A.startsWith("RGB"))throw new Error(`Unrecognized format ${A}`);const P=A.startsWith("BGR"),I=new Uint8ClampedArray(f*v*4);if(yield w.copyTo(I,function(D,B,V,W,K){const te=4*Math.max(-B,0),le=(Math.max(0,V)-V)*W*4+te,de=4*W,ve=Math.max(0,B),Be=Math.max(0,V);return{rect:{x:ve,y:Be,width:Math.min(D.width,B+W)-ve,height:Math.min(D.height,V+K)-Be},layout:[{offset:le,stride:de}]}}(c,n,o,f,v)),P)for(let D=0;D<I.length;D+=4){const B=I[D];I[D]=I[D+2],I[D+2]=B}return I}finally{w.close()}})}let Ni,Yi;function Eo(c,n,o,f){return c.addEventListener(n,o,f),{unsubscribe:()=>{c.removeEventListener(n,o,f)}}}function Ps(c){return c*Math.PI/180}function Ri(c){return c/Math.PI*180}const Jn={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},ci={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Ne="AbortError";function ae(){return new Error(Ne)}const oe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function fe(c){return oe.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const Se="global-dispatcher";class Pe extends Error{constructor(n,o,f,v){super(`AJAXError: ${o} (${n}): ${f}`),this.status=n,this.statusText=o,this.url=f,this.body=v}}const Re=()=>rn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Xe=function(c,n){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const f=fe(c.url);if(f)return f(c,n);if(rn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:Se},n)}if(!(/^file:/.test(o=c.url)||/^file:/.test(Re())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(f,v){return l(this,void 0,void 0,function*(){const w=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:Re(),signal:v.signal});let A,P;f.type!=="json"||w.headers.has("Accept")||w.headers.set("Accept","application/json");try{A=yield fetch(w)}catch(D){throw new Pe(0,D.message,f.url,new Blob)}if(!A.ok){const D=yield A.blob();throw new Pe(A.status,A.statusText,f.url,D)}P=f.type==="arrayBuffer"||f.type==="image"?A.arrayBuffer():f.type==="json"?A.json():A.text();const I=yield P;if(v.signal.aborted)throw ae();return{data:I,cacheControl:A.headers.get("Cache-Control"),expires:A.headers.get("Expires")}})}(c,n);if(rn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:Se},n)}var o;return function(f,v){return new Promise((w,A)=>{var P;const I=new XMLHttpRequest;I.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(I.responseType="arraybuffer");for(const D in f.headers)I.setRequestHeader(D,f.headers[D]);f.type==="json"&&(I.responseType="text",!((P=f.headers)===null||P===void 0)&&P.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=f.credentials==="include",I.onerror=()=>{A(new Error(I.statusText))},I.onload=()=>{if(!v.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let D=I.response;if(f.type==="json")try{D=JSON.parse(I.response)}catch(B){return void A(B)}w({data:D,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const D=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});A(new Pe(I.status,I.statusText,f.url,D))}},v.signal.addEventListener("abort",()=>{I.abort(),A(ae())}),I.send(f.body)})}(c,n)};function Le(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const n=new URL(c),o=window.location;return n.protocol===o.protocol&&n.host===o.host}function ht(c,n,o){o[c]&&o[c].indexOf(n)!==-1||(o[c]=o[c]||[],o[c].push(n))}function St(c,n,o){if(o&&o[c]){const f=o[c].indexOf(n);f!==-1&&o[c].splice(f,1)}}class mt{constructor(n,o={}){ar(this,o),this.type=n}}class $t extends mt{constructor(n,o={}){super("error",ar({error:n},o))}}class Ht{on(n,o){return this._listeners=this._listeners||{},ht(n,o,this._listeners),{unsubscribe:()=>{this.off(n,o)}}}off(n,o){return St(n,o,this._listeners),St(n,o,this._oneTimeListeners),this}once(n,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},ht(n,o,this._oneTimeListeners),this):new Promise(f=>this.once(n,f))}fire(n,o){typeof n=="string"&&(n=new mt(n,o||{}));const f=n.type;if(this.listens(f)){n.target=this;const v=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const P of v)P.call(this,n);const w=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const P of w)St(f,P,this._oneTimeListeners),P.call(this,n);const A=this._eventedParent;A&&(ar(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),A.fire(n))}else n instanceof $t&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,o){return this._eventedParent=n,this._eventedParentData=o,this}}var Ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Or=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function qr(c,n){const o={};for(const f in c)f!=="ref"&&(o[f]=c[f]);return Or.forEach(f=>{f in n&&(o[f]=n[f])}),o}function qt(c,n){if(Array.isArray(c)){if(!Array.isArray(n)||c.length!==n.length)return!1;for(let o=0;o<c.length;o++)if(!qt(c[o],n[o]))return!1;return!0}if(typeof c=="object"&&c!==null&&n!==null){if(typeof n!="object"||Object.keys(c).length!==Object.keys(n).length)return!1;for(const o in c)if(!qt(c[o],n[o]))return!1;return!0}return c===n}function Er(c,n){c.push(n)}function ei(c,n,o){Er(o,{command:"addSource",args:[c,n[c]]})}function ui(c,n,o){Er(n,{command:"removeSource",args:[c]}),o[c]=!0}function dn(c,n,o,f){ui(c,o,f),ei(c,n,o)}function Hr(c,n,o){let f;for(f in c[o])if(Object.prototype.hasOwnProperty.call(c[o],f)&&f!=="data"&&!qt(c[o][f],n[o][f]))return!1;for(f in n[o])if(Object.prototype.hasOwnProperty.call(n[o],f)&&f!=="data"&&!qt(c[o][f],n[o][f]))return!1;return!0}function Ar(c,n,o,f,v,w){c=c||{},n=n||{};for(const A in c)Object.prototype.hasOwnProperty.call(c,A)&&(qt(c[A],n[A])||o.push({command:w,args:[f,A,n[A],v]}));for(const A in n)Object.prototype.hasOwnProperty.call(n,A)&&!Object.prototype.hasOwnProperty.call(c,A)&&(qt(c[A],n[A])||o.push({command:w,args:[f,A,n[A],v]}))}function Mn(c){return c.id}function Ur(c,n){return c[n.id]=n,c}class wt{constructor(n,o,f,v){this.message=(n?`${n}: `:"")+f,v&&(this.identifier=v),o!=null&&o.__line__&&(this.line=o.__line__)}}function Co(c,...n){for(const o of n)for(const f in o)c[f]=o[f];return c}class ua extends Error{constructor(n,o){super(o),this.message=o,this.key=n}}class Mi{constructor(n,o=[]){this.parent=n,this.bindings={};for(const[f,v]of o)this.bindings[f]=v}concat(n){return new Mi(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Yn={kind:"null"},Et={kind:"number"},mr={kind:"string"},pr={kind:"boolean"},vi={kind:"color"},fn={kind:"projectionDefinition"},uo={kind:"object"},vr={kind:"value"},$a={kind:"collator"},Oo={kind:"formatted"},pl={kind:"padding"},mc={kind:"colorArray"},Io={kind:"numberArray"},ml={kind:"resolvedImage"},jn={kind:"variableAnchorOffsetCollection"};function Di(c,n){return{kind:"array",itemType:c,N:n}}function Vr(c){if(c.kind==="array"){const n=Vr(c.itemType);return typeof c.N=="number"?`array<${n}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${n}>`}return c.kind}const gl=[Yn,Et,mr,pr,vi,fn,Oo,uo,Di(vr),pl,Io,mc,ml,jn];function yl(c,n){if(n.kind==="error")return null;if(c.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!yl(c.itemType,n.itemType))&&(typeof c.N!="number"||c.N===n.N))return null}else{if(c.kind===n.kind)return null;if(c.kind==="value"){for(const o of gl)if(!yl(o,n))return null}}return`Expected ${Vr(c)} but found ${Vr(n)} instead.`}function Es(c,n){return n.some(o=>o.kind===c.kind)}function as(c,n){return n.some(o=>o==="null"?c===null:o==="array"?Array.isArray(c):o==="object"?c&&!Array.isArray(c)&&typeof c=="object":o===typeof c)}function ho(c,n){return c.kind==="array"&&n.kind==="array"?c.itemType.kind===n.itemType.kind&&typeof c.N=="number":c.kind===n.kind}const qf=.96422,oh=.82521,ja=4/29,vl=6/29,Uf=3*vl*vl,sh=vl*vl*vl,Vf=Math.PI/180,lh=180/Math.PI;function Gf(c){return(c%=360)<0&&(c+=360),c}function ha([c,n,o,f]){let v,w;const A=ch((.2225045*(c=os(c))+.7168786*(n=os(n))+.0606169*(o=os(o)))/1);c===n&&n===o?v=w=A:(v=ch((.4360747*c+.3850649*n+.1430804*o)/qf),w=ch((.0139322*c+.0971045*n+.7141733*o)/oh));const P=116*A-16;return[P<0?0:P,500*(v-A),200*(A-w),f]}function os(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function ch(c){return c>sh?Math.pow(c,1/3):c/Uf+ja}function uh([c,n,o,f]){let v=(c+16)/116,w=isNaN(n)?v:v+n/500,A=isNaN(o)?v:v-o/200;return v=1*hh(v),w=qf*hh(w),A=oh*hh(A),[qa(3.1338561*w-1.6168667*v-.4906146*A),qa(-.9787684*w+1.9161415*v+.033454*A),qa(.0719453*w-.2289914*v+1.4052427*A),f]}function qa(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function hh(c){return c>vl?c*c*c:Uf*(c-ja)}const Zf=Object.hasOwn||function(c,n){return Object.prototype.hasOwnProperty.call(c,n)};function ko(c,n){return Zf(c,n)?c[n]:void 0}function nu(c){return parseInt(c.padEnd(2,c),16)/255}function dh(c,n){return zi(n?c/100:c,0,1)}function zi(c,n,o){return Math.min(Math.max(n,c),o)}function jr(c){return!c.some(Number.isNaN)}const gc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ki(c,n,o){return c+o*(n-c)}function No(c,n,o){return c.map((f,v)=>Ki(f,n[v],o))}class xr{constructor(n,o,f,v=1,w=!0){this.r=n,this.g=o,this.b=f,this.a=v,w||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[n,o,f,v]))}static parse(n){if(n instanceof xr)return n;if(typeof n!="string")return;const o=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=ko(gc,f);if(v){const[A,P,I]=v;return[A/255,P/255,I/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const A=f.length<6?1:2;let P=1;return[nu(f.slice(P,P+=A)),nu(f.slice(P,P+=A)),nu(f.slice(P,P+=A)),nu(f.slice(P,P+A)||"ff")]}if(f.startsWith("rgb")){const A=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(A){const[P,I,D,B,V,W,K,te,le,de,ve,Be]=A,Me=[B||" ",K||" ",de].join("");if(Me==="  "||Me==="  /"||Me===",,"||Me===",,,"){const Ce=[D,W,le].join(""),Ke=Ce==="%%%"?100:Ce===""?255:0;if(Ke){const ot=[zi(+I/Ke,0,1),zi(+V/Ke,0,1),zi(+te/Ke,0,1),ve?dh(+ve,Be):1];if(jr(ot))return ot}}return}}const w=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[A,P,I,D,B,V,W,K,te]=w,le=[I||" ",B||" ",W].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const de=[+P,zi(+D,0,100),zi(+V,0,100),K?dh(+K,te):1];if(jr(de))return function([ve,Be,Me,Ce]){function Ke(ot){const gt=(ot+ve/30)%12,Pt=Be*Math.min(Me,1-Me);return Me-Pt*Math.max(-1,Math.min(gt-3,9-gt,1))}return ve=Gf(ve),Be/=100,Me/=100,[Ke(0),Ke(8),Ke(4),Ce]}(de)}}}(n);return o?new xr(...o,!1):void 0}get rgb(){const{r:n,g:o,b:f,a:v}=this,w=v||1/0;return this.overwriteGetter("rgb",[n/w,o/w,f/w,v])}get hcl(){return this.overwriteGetter("hcl",function(n){const[o,f,v,w]=ha(n),A=Math.sqrt(f*f+v*v);return[Math.round(1e4*A)?Gf(Math.atan2(v,f)*lh):NaN,A,o,w]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ha(this.rgb))}overwriteGetter(n,o){return Object.defineProperty(this,n,{value:o}),o}toString(){const[n,o,f,v]=this.rgb;return`rgba(${[n,o,f].map(w=>Math.round(255*w)).join(",")},${v})`}static interpolate(n,o,f,v="rgb"){switch(v){case"rgb":{const[w,A,P,I]=No(n.rgb,o.rgb,f);return new xr(w,A,P,I,!1)}case"hcl":{const[w,A,P,I]=n.hcl,[D,B,V,W]=o.hcl;let K,te;if(isNaN(w)||isNaN(D))isNaN(w)?isNaN(D)?K=NaN:(K=D,P!==1&&P!==0||(te=B)):(K=w,V!==1&&V!==0||(te=A));else{let Me=D-w;D>w&&Me>180?Me-=360:D<w&&w-D>180&&(Me+=360),K=w+f*Me}const[le,de,ve,Be]=function([Me,Ce,Ke,ot]){return Me=isNaN(Me)?0:Me*Vf,uh([Ke,Math.cos(Me)*Ce,Math.sin(Me)*Ce,ot])}([K,te??Ki(A,B,f),Ki(P,V,f),Ki(I,W,f)]);return new xr(le,de,ve,Be,!1)}case"lab":{const[w,A,P,I]=uh(No(n.lab,o.lab,f));return new xr(w,A,P,I,!1)}}}}xr.black=new xr(0,0,0,1),xr.white=new xr(1,1,1,1),xr.transparent=new xr(0,0,0,0),xr.red=new xr(1,0,0,1);class _l{constructor(n,o,f){this.sensitivity=n?o?"variant":"case":o?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,o){return this.collator.compare(n,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Ro=["bottom","center","top"];class fo{constructor(n,o,f,v,w,A){this.text=n,this.image=o,this.scale=f,this.fontStack=v,this.textColor=w,this.verticalAlign=A}}class Qi{constructor(n){this.sections=n}static fromString(n){return new Qi([new fo(n,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Qi?n:Qi.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class hi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof hi)return n;if(typeof n=="number")return new hi([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const o of n)if(typeof o!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new hi(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,f){return new hi(No(n.values,o.values,f))}}class di{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof di)return n;if(typeof n=="number")return new di([n]);if(Array.isArray(n)){for(const o of n)if(typeof o!="number")return;return new di(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,f){return new di(No(n.values,o.values,f))}}class Kn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Kn)return n;if(typeof n=="string"){const f=xr.parse(n);return f?new Kn([f]):void 0}if(!Array.isArray(n))return;const o=[];for(const f of n){if(typeof f!="string")return;const v=xr.parse(f);if(!v)return;o.push(v)}return new Kn(o)}toString(){return JSON.stringify(this.values)}static interpolate(n,o,f,v="rgb"){const w=[];if(n.values.length!=o.values.length)throw new Error(`colorArray: Arrays have mismatched length (${n.values.length} vs. ${o.values.length}), cannot interpolate.`);for(let A=0;A<n.values.length;A++)w.push(xr.interpolate(n.values[A],o.values[A],f,v));return new Kn(w)}}class Fr extends Error{constructor(n){super(n),this.name="RuntimeError"}toJSON(){return this.message}}const Cs=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class fi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof fi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let o=0;o<n.length;o+=2){const f=n[o],v=n[o+1];if(typeof f!="string"||!Cs.has(f)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new fi(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,f){const v=n.values,w=o.values;if(v.length!==w.length)throw new Fr(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${o.toString()}`);const A=[];for(let P=0;P<v.length;P+=2){if(v[P]!==w[P])throw new Fr(`Cannot interpolate values containing mismatched anchors. from[${P}]: ${v[P]}, to[${P}]: ${w[P]}`);A.push(v[P]);const[I,D]=v[P+1],[B,V]=w[P+1];A.push([Ki(I,B,f),Ki(D,V,f)])}return new fi(A)}}class ti{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ti({name:n,available:!1}):null}}class Li{constructor(n,o,f){this.from=n,this.to=o,this.transition=f}static interpolate(n,o,f){return new Li(n,o,f)}static parse(n){return n instanceof Li?n:Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"?new Li(n[0],n[1],n[2]):typeof n=="object"&&typeof n.from=="string"&&typeof n.to=="string"&&typeof n.transition=="number"?new Li(n.from,n.to,n.transition):typeof n=="string"?new Li(n,n,1):void 0}}function Os(c,n,o,f){return typeof c=="number"&&c>=0&&c<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof o=="number"&&o>=0&&o<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[c,n,o,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[c,n,o,f]:[c,n,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function nn(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Li||c instanceof xr||c instanceof _l||c instanceof Qi||c instanceof hi||c instanceof di||c instanceof Kn||c instanceof fi||c instanceof ti)return!0;if(Array.isArray(c)){for(const n of c)if(!nn(n))return!1;return!0}if(typeof c=="object"){for(const n in c)if(!nn(c[n]))return!1;return!0}return!1}function vn(c){if(c===null)return Yn;if(typeof c=="string")return mr;if(typeof c=="boolean")return pr;if(typeof c=="number")return Et;if(c instanceof xr)return vi;if(c instanceof Li)return fn;if(c instanceof _l)return $a;if(c instanceof Qi)return Oo;if(c instanceof hi)return pl;if(c instanceof di)return Io;if(c instanceof Kn)return mc;if(c instanceof fi)return jn;if(c instanceof ti)return ml;if(Array.isArray(c)){const n=c.length;let o;for(const f of c){const v=vn(f);if(o){if(o===v)continue;o=vr;break}o=v}return Di(o||vr,n)}return uo}function br(c){const n=typeof c;return c===null?"":n==="string"||n==="number"||n==="boolean"?String(c):c instanceof xr||c instanceof Li||c instanceof Qi||c instanceof hi||c instanceof di||c instanceof Kn||c instanceof fi||c instanceof ti?c.toString():JSON.stringify(c)}class ur{constructor(n,o){this.type=n,this.value=o}static parse(n,o){if(n.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!nn(n[1]))return o.error("invalid value");const f=n[1];let v=vn(f);const w=o.expectedType;return v.kind!=="array"||v.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(v=w),new ur(v,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const pi={string:mr,number:Et,boolean:pr,object:uo};class hr{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let f,v=1;const w=n[0];if(w==="array"){let P,I;if(n.length>2){const D=n[1];if(typeof D!="string"||!(D in pi)||D==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);P=pi[D],v++}else P=vr;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return o.error('The length argument to "array" must be a positive integer literal',2);I=n[2],v++}f=Di(P,I)}else{if(!pi[w])throw new Error(`Types doesn't contain name = ${w}`);f=pi[w]}const A=[];for(;v<n.length;v++){const P=o.parse(n[v],v,vr);if(!P)return null;A.push(P)}return new hr(f,A)}evaluate(n){for(let o=0;o<this.args.length;o++){const f=this.args[o].evaluate(n);if(!yl(this.type,vn(f)))return f;if(o===this.args.length-1)throw new Fr(`Expected value to be of type ${Vr(this.type)}, but found ${Vr(vn(f))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const xl={"to-boolean":pr,"to-color":vi,"to-number":Et,"to-string":mr};class ri{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const f=n[0];if(!xl[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&n.length!==2)return o.error("Expected one argument.");const v=xl[f],w=[];for(let A=1;A<n.length;A++){const P=o.parse(n[A],A,vr);if(!P)return null;w.push(P)}return new ri(v,w)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let o,f;for(const v of this.args){if(o=v.evaluate(n),f=null,o instanceof xr)return o;if(typeof o=="string"){const w=n.parseColor(o);if(w)return w}else if(Array.isArray(o)&&(f=o.length<3||o.length>4?`Invalid rgba value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Os(o[0],o[1],o[2],o[3]),!f))return new xr(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Fr(f||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const f of this.args){o=f.evaluate(n);const v=hi.parse(o);if(v)return v}throw new Fr(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"numberArray":{let o;for(const f of this.args){o=f.evaluate(n);const v=di.parse(o);if(v)return v}throw new Fr(`Could not parse numberArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"colorArray":{let o;for(const f of this.args){o=f.evaluate(n);const v=Kn.parse(o);if(v)return v}throw new Fr(`Could not parse colorArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const f of this.args){o=f.evaluate(n);const v=fi.parse(o);if(v)return v}throw new Fr(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const f of this.args){if(o=f.evaluate(n),o===null)return 0;const v=Number(o);if(!isNaN(v))return v}throw new Fr(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return Qi.fromString(br(this.args[0].evaluate(n)));case"resolvedImage":return ti.fromString(br(this.args[0].evaluate(n)));case"projectionDefinition":return this.args[0].evaluate(n);default:return br(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const wd=["Unknown","Point","LineString","Polygon"];class bl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?wd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let o=this._parseColorCache.get(n);return o||(o=xr.parse(n),this._parseColorCache.set(n,o)),o}}class wl{constructor(n,o,f=[],v,w=new Mi,A=[]){this.registry=n,this.path=f,this.key=f.map(P=>`[${P}]`).join(""),this.scope=w,this.errors=A,this.expectedType=v,this._isConstant=o}parse(n,o,f,v,w={}){return o?this.concat(o,f,v)._parse(n,w):this._parse(n,w)}_parse(n,o){function f(v,w,A){return A==="assert"?new hr(w,[v]):A==="coerce"?new ri(w,[v]):v}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=n[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[v];if(w){let A=w.parse(n,this);if(!A)return null;if(this.expectedType){const P=this.expectedType,I=A.type;if(P.kind!=="string"&&P.kind!=="number"&&P.kind!=="boolean"&&P.kind!=="object"&&P.kind!=="array"||I.kind!=="value"){if(P.kind==="projectionDefinition"&&["string","array"].includes(I.kind)||["color","formatted","resolvedImage"].includes(P.kind)&&["value","string"].includes(I.kind)||["padding","numberArray"].includes(P.kind)&&["value","number","array"].includes(I.kind)||P.kind==="colorArray"&&["value","string","array"].includes(I.kind)||P.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(I.kind))A=f(A,P,o.typeAnnotation||"coerce");else if(this.checkSubtype(P,I))return null}else A=f(A,P,o.typeAnnotation||"assert")}if(!(A instanceof ur)&&A.type.kind!=="resolvedImage"&&this._isConstant(A)){const P=new bl;try{A=new ur(A.type,A.evaluate(P))}catch(I){return this.error(I.message),null}}return A}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,o,f){const v=typeof n=="number"?this.path.concat(n):this.path,w=f?this.scope.concat(f):this.scope;return new wl(this.registry,this._isConstant,v,o||null,w,this.errors)}error(n,...o){const f=`${this.key}${o.map(v=>`[${v}]`).join("")}`;this.errors.push(new ua(f,n))}checkSubtype(n,o){const f=yl(n,o);return f&&this.error(f),f}}class Do{constructor(n,o){this.type=o.type,this.bindings=[].concat(n),this.result=o}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const o of this.bindings)n(o[1]);n(this.result)}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const f=[];for(let w=1;w<n.length-1;w+=2){const A=n[w];if(typeof A!="string")return o.error(`Expected string, but found ${typeof A} instead.`,w);if(/[^a-zA-Z0-9_]/.test(A))return o.error("Variable names must contain only alphanumeric characters or '_'.",w);const P=o.parse(n[w+1],w+1);if(!P)return null;f.push([A,P])}const v=o.parse(n[n.length-1],n.length-1,o.expectedType,f);return v?new Do(f,v):null}outputDefined(){return this.result.outputDefined()}}class Is{constructor(n,o){this.type=o.type,this.name=n,this.boundExpression=o}static parse(n,o){if(n.length!==2||typeof n[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const f=n[1];return o.scope.has(f)?new Is(f,o.scope.get(f)):o.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class fh{constructor(n,o,f){this.type=n,this.index=o,this.input=f}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=o.parse(n[1],1,Et),v=o.parse(n[2],2,Di(o.expectedType||vr));return f&&v?new fh(v.type.itemType,f,v):null}evaluate(n){const o=this.index.evaluate(n),f=this.input.evaluate(n);if(o<0)throw new Fr(`Array index out of bounds: ${o} < 0.`);if(o>=f.length)throw new Fr(`Array index out of bounds: ${o} > ${f.length-1}.`);if(o!==Math.floor(o))throw new Fr(`Array index must be an integer, but found ${o} instead.`);return f[o]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class ph{constructor(n,o){this.type=pr,this.needle=n,this.haystack=o}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=o.parse(n[1],1,vr),v=o.parse(n[2],2,vr);return f&&v?Es(f.type,[pr,mr,Et,Yn,vr])?new ph(f,v):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vr(f.type)} instead`):null}evaluate(n){const o=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!f)return!1;if(!as(o,["boolean","string","number","null"]))throw new Fr(`Expected first argument to be of type boolean, string, number or null, but found ${Vr(vn(o))} instead.`);if(!as(f,["string","array"]))throw new Fr(`Expected second argument to be of type array or string, but found ${Vr(vn(f))} instead.`);return f.indexOf(o)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class iu{constructor(n,o,f){this.type=Et,this.needle=n,this.haystack=o,this.fromIndex=f}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const f=o.parse(n[1],1,vr),v=o.parse(n[2],2,vr);if(!f||!v)return null;if(!Es(f.type,[pr,mr,Et,Yn,vr]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vr(f.type)} instead`);if(n.length===4){const w=o.parse(n[3],3,Et);return w?new iu(f,v,w):null}return new iu(f,v)}evaluate(n){const o=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!as(o,["boolean","string","number","null"]))throw new Fr(`Expected first argument to be of type boolean, string, number or null, but found ${Vr(vn(o))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(n)),as(f,["string"])){const w=f.indexOf(o,v);return w===-1?-1:[...f.slice(0,w)].length}if(as(f,["array"]))return f.indexOf(o,v);throw new Fr(`Expected second argument to be of type array or string, but found ${Vr(vn(f))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class zo{constructor(n,o,f,v,w,A){this.inputType=n,this.type=o,this.input=f,this.cases=v,this.outputs=w,this.otherwise=A}static parse(n,o){if(n.length<5)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return o.error("Expected an even number of arguments.");let f,v;o.expectedType&&o.expectedType.kind!=="value"&&(v=o.expectedType);const w={},A=[];for(let D=2;D<n.length-1;D+=2){let B=n[D];const V=n[D+1];Array.isArray(B)||(B=[B]);const W=o.concat(D);if(B.length===0)return W.error("Expected at least one branch label.");for(const te of B){if(typeof te!="number"&&typeof te!="string")return W.error("Branch labels must be numbers or strings.");if(typeof te=="number"&&Math.abs(te)>Number.MAX_SAFE_INTEGER)return W.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof te=="number"&&Math.floor(te)!==te)return W.error("Numeric branch labels must be integer values.");if(f){if(W.checkSubtype(f,vn(te)))return null}else f=vn(te);if(w[String(te)]!==void 0)return W.error("Branch labels must be unique.");w[String(te)]=A.length}const K=o.parse(V,D,v);if(!K)return null;v=v||K.type,A.push(K)}const P=o.parse(n[1],1,vr);if(!P)return null;const I=o.parse(n[n.length-1],n.length-1,v);return I?P.type.kind!=="value"&&o.concat(1).checkSubtype(f,P.type)?null:new zo(f,v,P,w,A,I):null}evaluate(n){const o=this.input.evaluate(n);return(vn(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class ni{constructor(n,o,f){this.type=n,this.branches=o,this.otherwise=f}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return o.error("Expected an odd number of arguments.");let f;o.expectedType&&o.expectedType.kind!=="value"&&(f=o.expectedType);const v=[];for(let A=1;A<n.length-1;A+=2){const P=o.parse(n[A],A,pr);if(!P)return null;const I=o.parse(n[A+1],A+1,f);if(!I)return null;v.push([P,I]),f=f||I.type}const w=o.parse(n[n.length-1],n.length-1,f);if(!w)return null;if(!f)throw new Error("Can't infer output type");return new ni(f,v,w)}evaluate(n){for(const[o,f]of this.branches)if(o.evaluate(n))return f.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[o,f]of this.branches)n(o),n(f);n(this.otherwise)}outputDefined(){return this.branches.every(([n,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class Sl{constructor(n,o,f,v){this.type=n,this.input=o,this.beginIndex=f,this.endIndex=v}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const f=o.parse(n[1],1,vr),v=o.parse(n[2],2,Et);if(!f||!v)return null;if(!Es(f.type,[Di(vr),mr,vr]))return o.error(`Expected first argument to be of type array or string, but found ${Vr(f.type)} instead`);if(n.length===4){const w=o.parse(n[3],3,Et);return w?new Sl(f.type,f,v,w):null}return new Sl(f.type,f,v)}evaluate(n){const o=this.input.evaluate(n),f=this.beginIndex.evaluate(n);let v;if(this.endIndex&&(v=this.endIndex.evaluate(n)),as(o,["string"]))return[...o].slice(f,v).join("");if(as(o,["array"]))return o.slice(f,v);throw new Fr(`Expected first argument to be of type array or string, but found ${Vr(vn(o))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function au(c,n){const o=c.length-1;let f,v,w=0,A=o,P=0;for(;w<=A;)if(P=Math.floor((w+A)/2),f=c[P],v=c[P+1],f<=n){if(P===o||n<v)return P;w=P+1}else{if(!(f>n))throw new Fr("Input is not a number.");A=P-1}return 0}class ks{constructor(n,o,f){this.type=n,this.input=o,this.labels=[],this.outputs=[];for(const[v,w]of f)this.labels.push(v),this.outputs.push(w)}static parse(n,o){if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");const f=o.parse(n[1],1,Et);if(!f)return null;const v=[];let w=null;o.expectedType&&o.expectedType.kind!=="value"&&(w=o.expectedType);for(let A=1;A<n.length;A+=2){const P=A===1?-1/0:n[A],I=n[A+1],D=A,B=A+1;if(typeof P!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(v.length&&v[v.length-1][0]>=P)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const V=o.parse(I,B,w);if(!V)return null;w=w||V.type,v.push([P,V])}return new ks(w,f,v)}evaluate(n){const o=this.labels,f=this.outputs;if(o.length===1)return f[0].evaluate(n);const v=this.input.evaluate(n);if(v<=o[0])return f[0].evaluate(n);const w=o.length;return v>=o[w-1]?f[w-1].evaluate(n):f[au(o,v)].evaluate(n)}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function _i(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var mh,ou,Hf=function(){if(ou)return mh;function c(n,o,f,v){this.cx=3*n,this.bx=3*(f-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(v-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=o,this.p2x=f,this.p2y=v}return ou=1,mh=c,c.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,o){if(o===void 0&&(o=1e-6),n<0)return 0;if(n>1)return 1;for(var f=n,v=0;v<8;v++){var w=this.sampleCurveX(f)-n;if(Math.abs(w)<o)return f;var A=this.sampleCurveDerivativeX(f);if(Math.abs(A)<1e-6)break;f-=w/A}var P=0,I=1;for(f=n,v=0;v<20&&(w=this.sampleCurveX(f),!(Math.abs(w-n)<o));v++)n>w?P=f:I=f,f=.5*(I-P)+P;return f},solve:function(n,o){return this.sampleCurveY(this.solveCurveX(n,o))}},mh}(),Lm=_i(Hf);class mi{constructor(n,o,f,v,w){this.type=n,this.operator=o,this.interpolation=f,this.input=v,this.labels=[],this.outputs=[];for(const[A,P]of w)this.labels.push(A),this.outputs.push(P)}static interpolationFactor(n,o,f,v){let w=0;if(n.name==="exponential")w=yc(o,n.base,f,v);else if(n.name==="linear")w=yc(o,1,f,v);else if(n.name==="cubic-bezier"){const A=n.controlPoints;w=new Lm(A[0],A[1],A[2],A[3]).solve(yc(o,1,f,v))}return w}static parse(n,o){let[f,v,w,...A]=n;if(!Array.isArray(v)||v.length===0)return o.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const D=v[1];if(typeof D!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:D}}else{if(v[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const D=v.slice(1);if(D.length!==4||D.some(B=>typeof B!="number"||B<0||B>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:D}}}if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(w=o.parse(w,2,Et),!w)return null;const P=[];let I=null;f!=="interpolate-hcl"&&f!=="interpolate-lab"||o.expectedType==mc?o.expectedType&&o.expectedType.kind!=="value"&&(I=o.expectedType):I=vi;for(let D=0;D<A.length;D+=2){const B=A[D],V=A[D+1],W=D+3,K=D+4;if(typeof B!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(P.length&&P[P.length-1][0]>=B)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);const te=o.parse(V,K,I);if(!te)return null;I=I||te.type,P.push([B,te])}return ho(I,Et)||ho(I,fn)||ho(I,vi)||ho(I,pl)||ho(I,Io)||ho(I,mc)||ho(I,jn)||ho(I,Di(Et))?new mi(I,f,v,w,P):o.error(`Type ${Vr(I)} is not interpolatable.`)}evaluate(n){const o=this.labels,f=this.outputs;if(o.length===1)return f[0].evaluate(n);const v=this.input.evaluate(n);if(v<=o[0])return f[0].evaluate(n);const w=o.length;if(v>=o[w-1])return f[w-1].evaluate(n);const A=au(o,v),P=mi.interpolationFactor(this.interpolation,v,o[A],o[A+1]),I=f[A].evaluate(n),D=f[A+1].evaluate(n);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ki(I,D,P);case"color":return xr.interpolate(I,D,P);case"padding":return hi.interpolate(I,D,P);case"colorArray":return Kn.interpolate(I,D,P);case"numberArray":return di.interpolate(I,D,P);case"variableAnchorOffsetCollection":return fi.interpolate(I,D,P);case"array":return No(I,D,P);case"projectionDefinition":return Li.interpolate(I,D,P)}case"interpolate-hcl":switch(this.type.kind){case"color":return xr.interpolate(I,D,P,"hcl");case"colorArray":return Kn.interpolate(I,D,P,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return xr.interpolate(I,D,P,"lab");case"colorArray":return Kn.interpolate(I,D,P,"lab")}}}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function yc(c,n,o,f){const v=f-o,w=c-o;return v===0?0:n===1?w/v:(Math.pow(n,w)-1)/(Math.pow(n,v)-1)}const da={color:xr.interpolate,number:Ki,padding:hi.interpolate,numberArray:di.interpolate,colorArray:Kn.interpolate,variableAnchorOffsetCollection:fi.interpolate,array:No};class gh{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let f=null;const v=o.expectedType;v&&v.kind!=="value"&&(f=v);const w=[];for(const P of n.slice(1)){const I=o.parse(P,1+w.length,f,void 0,{typeAnnotation:"omit"});if(!I)return null;f=f||I.type,w.push(I)}if(!f)throw new Error("No output type");const A=v&&w.some(P=>yl(v,P.type));return new gh(A?vr:f,w)}evaluate(n){let o,f=null,v=0;for(const w of this.args)if(v++,f=w.evaluate(n),f&&f instanceof ti&&!f.available&&(o||(o=f.name),f=null,v===this.args.length&&(f=o)),f!==null)break;return f}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function Sd(c,n){return c==="=="||c==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function su(c,n,o,f){return f.compare(n,o)===0}function Lo(c,n,o){const f=c!=="=="&&c!=="!=";return class JR{constructor(w,A,P){this.type=pr,this.lhs=w,this.rhs=A,this.collator=P,this.hasUntypedArgument=w.type.kind==="value"||A.type.kind==="value"}static parse(w,A){if(w.length!==3&&w.length!==4)return A.error("Expected two or three arguments.");const P=w[0];let I=A.parse(w[1],1,vr);if(!I)return null;if(!Sd(P,I.type))return A.concat(1).error(`"${P}" comparisons are not supported for type '${Vr(I.type)}'.`);let D=A.parse(w[2],2,vr);if(!D)return null;if(!Sd(P,D.type))return A.concat(2).error(`"${P}" comparisons are not supported for type '${Vr(D.type)}'.`);if(I.type.kind!==D.type.kind&&I.type.kind!=="value"&&D.type.kind!=="value")return A.error(`Cannot compare types '${Vr(I.type)}' and '${Vr(D.type)}'.`);f&&(I.type.kind==="value"&&D.type.kind!=="value"?I=new hr(D.type,[I]):I.type.kind!=="value"&&D.type.kind==="value"&&(D=new hr(I.type,[D])));let B=null;if(w.length===4){if(I.type.kind!=="string"&&D.type.kind!=="string"&&I.type.kind!=="value"&&D.type.kind!=="value")return A.error("Cannot use collator to compare non-string types.");if(B=A.parse(w[3],3,$a),!B)return null}return new JR(I,D,B)}evaluate(w){const A=this.lhs.evaluate(w),P=this.rhs.evaluate(w);if(f&&this.hasUntypedArgument){const I=vn(A),D=vn(P);if(I.kind!==D.kind||I.kind!=="string"&&I.kind!=="number")throw new Fr(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${I.kind}, ${D.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const I=vn(A),D=vn(P);if(I.kind!=="string"||D.kind!=="string")return n(w,A,P)}return this.collator?o(w,A,P,this.collator.evaluate(w)):n(w,A,P)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const po=Lo("==",function(c,n,o){return n===o},su),Xf=Lo("!=",function(c,n,o){return n!==o},function(c,n,o,f){return!su(0,n,o,f)}),yh=Lo("<",function(c,n,o){return n<o},function(c,n,o,f){return f.compare(n,o)<0}),Bm=Lo(">",function(c,n,o){return n>o},function(c,n,o,f){return f.compare(n,o)>0}),Td=Lo("<=",function(c,n,o){return n<=o},function(c,n,o,f){return f.compare(n,o)<=0}),Fm=Lo(">=",function(c,n,o){return n>=o},function(c,n,o,f){return f.compare(n,o)>=0});class vh{constructor(n,o,f){this.type=$a,this.locale=f,this.caseSensitive=n,this.diacriticSensitive=o}static parse(n,o){if(n.length!==2)return o.error("Expected one argument.");const f=n[1];if(typeof f!="object"||Array.isArray(f))return o.error("Collator options argument must be an object.");const v=o.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,pr);if(!v)return null;const w=o.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,pr);if(!w)return null;let A=null;return f.locale&&(A=o.parse(f.locale,1,mr),!A)?null:new vh(v,w,A)}evaluate(n){return new _l(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class Ad{constructor(n,o,f,v,w){this.type=mr,this.number=n,this.locale=o,this.currency=f,this.minFractionDigits=v,this.maxFractionDigits=w}static parse(n,o){if(n.length!==3)return o.error("Expected two arguments.");const f=o.parse(n[1],1,Et);if(!f)return null;const v=n[2];if(typeof v!="object"||Array.isArray(v))return o.error("NumberFormat options argument must be an object.");let w=null;if(v.locale&&(w=o.parse(v.locale,1,mr),!w))return null;let A=null;if(v.currency&&(A=o.parse(v.currency,1,mr),!A))return null;let P=null;if(v["min-fraction-digits"]&&(P=o.parse(v["min-fraction-digits"],1,Et),!P))return null;let I=null;return v["max-fraction-digits"]&&(I=o.parse(v["max-fraction-digits"],1,Et),!I)?null:new Ad(f,w,A,P,I)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class _h{constructor(n){this.type=Oo,this.sections=n}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const f=n[1];if(!Array.isArray(f)&&typeof f=="object")return o.error("First argument must be an image or text section.");const v=[];let w=!1;for(let A=1;A<=n.length-1;++A){const P=n[A];if(w&&typeof P=="object"&&!Array.isArray(P)){w=!1;let I=null;if(P["font-scale"]&&(I=o.parse(P["font-scale"],1,Et),!I))return null;let D=null;if(P["text-font"]&&(D=o.parse(P["text-font"],1,Di(mr)),!D))return null;let B=null;if(P["text-color"]&&(B=o.parse(P["text-color"],1,vi),!B))return null;let V=null;if(P["vertical-align"]){if(typeof P["vertical-align"]=="string"&&!Ro.includes(P["vertical-align"]))return o.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${P["vertical-align"]}' instead.`);if(V=o.parse(P["vertical-align"],1,mr),!V)return null}const W=v[v.length-1];W.scale=I,W.font=D,W.textColor=B,W.verticalAlign=V}else{const I=o.parse(n[A],1,vr);if(!I)return null;const D=I.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,v.push({content:I,scale:null,font:null,textColor:null,verticalAlign:null})}}return new _h(v)}evaluate(n){return new Qi(this.sections.map(o=>{const f=o.content.evaluate(n);return vn(f)===ml?new fo("",f,null,null,null,o.verticalAlign?o.verticalAlign.evaluate(n):null):new fo(br(f),null,o.scale?o.scale.evaluate(n):null,o.font?o.font.evaluate(n).join(","):null,o.textColor?o.textColor.evaluate(n):null,o.verticalAlign?o.verticalAlign.evaluate(n):null)}))}eachChild(n){for(const o of this.sections)n(o.content),o.scale&&n(o.scale),o.font&&n(o.font),o.textColor&&n(o.textColor),o.verticalAlign&&n(o.verticalAlign)}outputDefined(){return!1}}class Ns{constructor(n){this.type=ml,this.input=n}static parse(n,o){if(n.length!==2)return o.error("Expected two arguments.");const f=o.parse(n[1],1,mr);return f?new Ns(f):o.error("No image name provided.")}evaluate(n){const o=this.input.evaluate(n),f=ti.fromString(o);return f&&n.availableImages&&(f.available=n.availableImages.indexOf(o)>-1),f}eachChild(n){n(this.input)}outputDefined(){return!1}}class Tl{constructor(n){this.type=Et,this.input=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=o.parse(n[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Vr(f.type)} instead.`):new Tl(f):null}evaluate(n){const o=this.input.evaluate(n);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new Fr(`Expected value to be of type string or array, but found ${Vr(vn(o))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const mo=8192;function Md(c,n){const o=(180+c[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,v=Math.pow(2,n.z);return[Math.round(o*v*mo),Math.round(f*v*mo)]}function xh(c,n){const o=Math.pow(2,n.z);return[(v=(c[0]/mo+n.x)/o,360*v-180),(f=(c[1]/mo+n.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,v}function Al(c,n){c[0]=Math.min(c[0],n[0]),c[1]=Math.min(c[1],n[1]),c[2]=Math.max(c[2],n[0]),c[3]=Math.max(c[3],n[1])}function vc(c,n){return!(c[0]<=n[0]||c[2]>=n[2]||c[1]<=n[1]||c[3]>=n[3])}function Wf(c,n,o){const f=c[0]-n[0],v=c[1]-n[1],w=c[0]-o[0],A=c[1]-o[1];return f*A-w*v==0&&f*w<=0&&v*A<=0}function ss(c,n,o,f){return(v=[f[0]-o[0],f[1]-o[1]])[0]*(w=[n[0]-c[0],n[1]-c[1]])[1]-v[1]*w[0]!=0&&!(!xc(c,n,o,f)||!xc(o,f,c,n));var v,w}function $m(c,n,o){for(const f of o)for(let v=0;v<f.length-1;++v)if(ss(c,n,f[v],f[v+1]))return!0;return!1}function _c(c,n,o=!1){let f=!1;for(const P of n)for(let I=0;I<P.length-1;I++){if(Wf(c,P[I],P[I+1]))return o;(w=P[I])[1]>(v=c)[1]!=(A=P[I+1])[1]>v[1]&&v[0]<(A[0]-w[0])*(v[1]-w[1])/(A[1]-w[1])+w[0]&&(f=!f)}var v,w,A;return f}function Yf(c,n){for(const o of n)if(_c(c,o))return!0;return!1}function bh(c,n){for(const o of c)if(!_c(o,n))return!1;for(let o=0;o<c.length-1;++o)if($m(c[o],c[o+1],n))return!1;return!0}function jd(c,n){for(const o of n)if(bh(c,o))return!0;return!1}function xc(c,n,o,f){const v=f[0]-o[0],w=f[1]-o[1],A=(c[0]-o[0])*w-v*(c[1]-o[1]),P=(n[0]-o[0])*w-v*(n[1]-o[1]);return A>0&&P<0||A<0&&P>0}function Ml(c,n,o){const f=[];for(let v=0;v<c.length;v++){const w=[];for(let A=0;A<c[v].length;A++){const P=Md(c[v][A],o);Al(n,P),w.push(P)}f.push(w)}return f}function Kf(c,n,o){const f=[];for(let v=0;v<c.length;v++){const w=Ml(c[v],n,o);f.push(w)}return f}function lu(c,n,o,f){if(c[0]<o[0]||c[0]>o[2]){const v=.5*f;let w=c[0]-o[0]>v?-f:o[0]-c[0]>v?f:0;w===0&&(w=c[0]-o[2]>v?-f:o[2]-c[0]>v?f:0),c[0]+=w}Al(n,c)}function bc(c,n,o,f){const v=Math.pow(2,f.z)*mo,w=[f.x*mo,f.y*mo],A=[];for(const P of c)for(const I of P){const D=[I.x+w[0],I.y+w[1]];lu(D,n,o,v),A.push(D)}return A}function Pd(c,n,o,f){const v=Math.pow(2,f.z)*mo,w=[f.x*mo,f.y*mo],A=[];for(const I of c){const D=[];for(const B of I){const V=[B.x+w[0],B.y+w[1]];Al(n,V),D.push(V)}A.push(D)}if(n[2]-n[0]<=v/2){(P=n)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(const I of A)for(const D of I)lu(D,n,o,v)}var P;return A}class ls{constructor(n,o){this.type=pr,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(nn(n[1])){const f=n[1];if(f.type==="FeatureCollection"){const v=[];for(const w of f.features){const{type:A,coordinates:P}=w.geometry;A==="Polygon"&&v.push(P),A==="MultiPolygon"&&v.push(...P)}if(v.length)return new ls(f,{type:"MultiPolygon",coordinates:v})}else if(f.type==="Feature"){const v=f.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new ls(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new ls(f,f)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(o,f){const v=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],A=o.canonicalID();if(f.type==="Polygon"){const P=Ml(f.coordinates,w,A),I=bc(o.geometry(),v,w,A);if(!vc(v,w))return!1;for(const D of I)if(!_c(D,P))return!1}if(f.type==="MultiPolygon"){const P=Kf(f.coordinates,w,A),I=bc(o.geometry(),v,w,A);if(!vc(v,w))return!1;for(const D of I)if(!Yf(D,P))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(o,f){const v=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],A=o.canonicalID();if(f.type==="Polygon"){const P=Ml(f.coordinates,w,A),I=Pd(o.geometry(),v,w,A);if(!vc(v,w))return!1;for(const D of I)if(!bh(D,P))return!1}if(f.type==="MultiPolygon"){const P=Kf(f.coordinates,w,A),I=Pd(o.geometry(),v,w,A);if(!vc(v,w))return!1;for(const D of I)if(!jd(D,P))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let wh=class{constructor(c=[],n=(o,f)=>o<f?-1:o>f?1:0){if(this.data=c,this.length=this.data.length,this.compare=n,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:n,compare:o}=this,f=n[c];for(;c>0;){const v=c-1>>1,w=n[v];if(o(f,w)>=0)break;n[c]=w,c=v}n[c]=f}_down(c){const{data:n,compare:o}=this,f=this.length>>1,v=n[c];for(;c<f;){let w=1+(c<<1);const A=w+1;if(A<this.length&&o(n[A],n[w])<0&&(w=A),o(n[w],v)>=0)break;n[c]=n[w],c=w}n[c]=v}};function Ed(c,n,o=0,f=c.length-1,v=Cd){for(;f>o;){if(f-o>600){const I=f-o+1,D=n-o+1,B=Math.log(I),V=.5*Math.exp(2*B/3),W=.5*Math.sqrt(B*V*(I-V)/I)*(D-I/2<0?-1:1);Ed(c,n,Math.max(o,Math.floor(n-D*V/I+W)),Math.min(f,Math.floor(n+(I-D)*V/I+W)),v)}const w=c[n];let A=o,P=f;for(Rs(c,o,n),v(c[f],w)>0&&Rs(c,o,f);A<P;){for(Rs(c,A,P),A++,P--;v(c[A],w)<0;)A++;for(;v(c[P],w)>0;)P--}v(c[o],w)===0?Rs(c,o,P):(P++,Rs(c,P,f)),P<=n&&(o=P+1),n<=P&&(f=P-1)}}function Rs(c,n,o){const f=c[n];c[n]=c[o],c[o]=f}function Cd(c,n){return c<n?-1:c>n?1:0}function Sh(c,n){if(c.length<=1)return[c];const o=[];let f,v;for(const w of c){const A=Qf(w);A!==0&&(w.area=Math.abs(A),v===void 0&&(v=A<0),v===A<0?(f&&o.push(f),f=[w]):f.push(w))}if(f&&o.push(f),n>1)for(let w=0;w<o.length;w++)o[w].length<=n||(Ed(o[w],n,1,o[w].length-1,qm),o[w]=o[w].slice(0,n));return o}function qm(c,n){return n.area-c.area}function Qf(c){let n=0;for(let o,f,v=0,w=c.length,A=w-1;v<w;A=v++)o=c[v],f=c[A],n+=(f.x-o.x)*(o.y+f.y);return n}const Od=1/298.257223563,Jf=Od*(2-Od),fa=Math.PI/180;class jl{constructor(n){const o=6378.137*fa*1e3,f=Math.cos(n*fa),v=1/(1-Jf*(1-f*f)),w=Math.sqrt(v);this.kx=o*w*f,this.ky=o*w*v*(1-Jf)}distance(n,o){const f=this.wrap(n[0]-o[0])*this.kx,v=(n[1]-o[1])*this.ky;return Math.sqrt(f*f+v*v)}pointOnLine(n,o){let f,v,w,A,P=1/0;for(let I=0;I<n.length-1;I++){let D=n[I][0],B=n[I][1],V=this.wrap(n[I+1][0]-D)*this.kx,W=(n[I+1][1]-B)*this.ky,K=0;V===0&&W===0||(K=(this.wrap(o[0]-D)*this.kx*V+(o[1]-B)*this.ky*W)/(V*V+W*W),K>1?(D=n[I+1][0],B=n[I+1][1]):K>0&&(D+=V/this.kx*K,B+=W/this.ky*K)),V=this.wrap(o[0]-D)*this.kx,W=(o[1]-B)*this.ky;const te=V*V+W*W;te<P&&(P=te,f=D,v=B,w=I,A=K)}return{point:[f,v],index:w,t:Math.max(0,Math.min(1,A))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function Th(c,n){return n[0]-c[0]}function cu(c){return c[1]-c[0]+1}function Bo(c,n){return c[1]>=c[0]&&c[1]<n}function Ah(c,n){if(c[0]>c[1])return[null,null];const o=cu(c);if(n){if(o===2)return[c,null];const v=Math.floor(o/2);return[[c[0],c[0]+v],[c[0]+v,c[1]]]}if(o===1)return[c,null];const f=Math.floor(o/2)-1;return[[c[0],c[0]+f],[c[0]+f+1,c[1]]]}function uu(c,n){if(!Bo(n,c.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let f=n[0];f<=n[1];++f)Al(o,c[f]);return o}function $r(c){const n=[1/0,1/0,-1/0,-1/0];for(const o of c)for(const f of o)Al(n,f);return n}function Pl(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function hu(c,n,o){if(!Pl(c)||!Pl(n))return NaN;let f=0,v=0;return c[2]<n[0]&&(f=n[0]-c[2]),c[0]>n[2]&&(f=c[0]-n[2]),c[1]>n[3]&&(v=c[1]-n[3]),c[3]<n[1]&&(v=n[1]-c[3]),o.distance([0,0],[f,v])}function go(c,n,o){const f=o.pointOnLine(n,c);return o.distance(c,f.point)}function du(c,n,o,f,v){const w=Math.min(go(c,[o,f],v),go(n,[o,f],v)),A=Math.min(go(o,[c,n],v),go(f,[c,n],v));return Math.min(w,A)}function ep(c,n,o,f,v){if(!Bo(n,c.length)||!Bo(f,o.length))return 1/0;let w=1/0;for(let A=n[0];A<n[1];++A){const P=c[A],I=c[A+1];for(let D=f[0];D<f[1];++D){const B=o[D],V=o[D+1];if(ss(P,I,B,V))return 0;w=Math.min(w,du(P,I,B,V,v))}}return w}function El(c,n,o,f,v){if(!Bo(n,c.length)||!Bo(f,o.length))return NaN;let w=1/0;for(let A=n[0];A<=n[1];++A)for(let P=f[0];P<=f[1];++P)if(w=Math.min(w,v.distance(c[A],o[P])),w===0)return w;return w}function wc(c,n,o){if(_c(c,n,!0))return 0;let f=1/0;for(const v of n){const w=v[0],A=v[v.length-1];if(w!==A&&(f=Math.min(f,go(c,[A,w],o)),f===0))return f;const P=o.pointOnLine(v,c);if(f=Math.min(f,o.distance(c,P.point)),f===0)return f}return f}function Id(c,n,o,f){if(!Bo(n,c.length))return NaN;for(let w=n[0];w<=n[1];++w)if(_c(c[w],o,!0))return 0;let v=1/0;for(let w=n[0];w<n[1];++w){const A=c[w],P=c[w+1];for(const I of o)for(let D=0,B=I.length,V=B-1;D<B;V=D++){const W=I[V],K=I[D];if(ss(A,P,W,K))return 0;v=Math.min(v,du(A,P,W,K,f))}}return v}function kd(c,n){for(const o of c)for(const f of o)if(_c(f,n,!0))return!0;return!1}function Cl(c,n,o,f=1/0){const v=$r(c),w=$r(n);if(f!==1/0&&hu(v,w,o)>=f)return f;if(vc(v,w)){if(kd(c,n))return 0}else if(kd(n,c))return 0;let A=1/0;for(const P of c)for(let I=0,D=P.length,B=D-1;I<D;B=I++){const V=P[B],W=P[I];for(const K of n)for(let te=0,le=K.length,de=le-1;te<le;de=te++){const ve=K[de],Be=K[te];if(ss(V,W,ve,Be))return 0;A=Math.min(A,du(V,W,ve,Be,o))}}return A}function Nd(c,n,o,f,v,w){if(!w)return;const A=hu(uu(f,w),v,o);A<n&&c.push([A,w,[0,0]])}function fu(c,n,o,f,v,w,A){if(!w||!A)return;const P=hu(uu(f,w),uu(v,A),o);P<n&&c.push([P,w,A])}function pu(c,n,o,f,v=1/0){let w=Math.min(f.distance(c[0],o[0][0]),v);if(w===0)return w;const A=new wh([[0,[0,c.length-1],[0,0]]],Th),P=$r(o);for(;A.length>0;){const I=A.pop();if(I[0]>=w)continue;const D=I[1],B=n?50:100;if(cu(D)<=B){if(!Bo(D,c.length))return NaN;if(n){const V=Id(c,D,o,f);if(isNaN(V)||V===0)return V;w=Math.min(w,V)}else for(let V=D[0];V<=D[1];++V){const W=wc(c[V],o,f);if(w=Math.min(w,W),w===0)return 0}}else{const V=Ah(D,n);Nd(A,w,f,c,P,V[0]),Nd(A,w,f,c,P,V[1])}}return w}function Mh(c,n,o,f,v,w=1/0){let A=Math.min(w,v.distance(c[0],o[0]));if(A===0)return A;const P=new wh([[0,[0,c.length-1],[0,o.length-1]]],Th);for(;P.length>0;){const I=P.pop();if(I[0]>=A)continue;const D=I[1],B=I[2],V=n?50:100,W=f?50:100;if(cu(D)<=V&&cu(B)<=W){if(!Bo(D,c.length)&&Bo(B,o.length))return NaN;let K;if(n&&f)K=ep(c,D,o,B,v),A=Math.min(A,K);else if(n&&!f){const te=c.slice(D[0],D[1]+1);for(let le=B[0];le<=B[1];++le)if(K=go(o[le],te,v),A=Math.min(A,K),A===0)return A}else if(!n&&f){const te=o.slice(B[0],B[1]+1);for(let le=D[0];le<=D[1];++le)if(K=go(c[le],te,v),A=Math.min(A,K),A===0)return A}else K=El(c,D,o,B,v),A=Math.min(A,K)}else{const K=Ah(D,n),te=Ah(B,f);fu(P,A,v,c,o,K[0],te[0]),fu(P,A,v,c,o,K[0],te[1]),fu(P,A,v,c,o,K[1],te[0]),fu(P,A,v,c,o,K[1],te[1])}}return A}function Rd(c){return c.type==="MultiPolygon"?c.coordinates.map(n=>({type:"Polygon",coordinates:n})):c.type==="MultiLineString"?c.coordinates.map(n=>({type:"LineString",coordinates:n})):c.type==="MultiPoint"?c.coordinates.map(n=>({type:"Point",coordinates:n})):[c]}class Ol{constructor(n,o){this.type=Et,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(nn(n[1])){const f=n[1];if(f.type==="FeatureCollection")return new Ol(f,f.features.map(v=>Rd(v.geometry)).flat());if(f.type==="Feature")return new Ol(f,Rd(f.geometry));if("type"in f&&"coordinates"in f)return new Ol(f,Rd(f))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(o,f){const v=o.geometry(),w=v.flat().map(I=>xh([I.x,I.y],o.canonical));if(v.length===0)return NaN;const A=new jl(w[0][1]);let P=1/0;for(const I of f){switch(I.type){case"Point":P=Math.min(P,Mh(w,!1,[I.coordinates],!1,A,P));break;case"LineString":P=Math.min(P,Mh(w,!1,I.coordinates,!0,A,P));break;case"Polygon":P=Math.min(P,pu(w,!1,I.coordinates,A,P))}if(P===0)return P}return P}(n,this.geometries);if(n.geometryType()==="LineString")return function(o,f){const v=o.geometry(),w=v.flat().map(I=>xh([I.x,I.y],o.canonical));if(v.length===0)return NaN;const A=new jl(w[0][1]);let P=1/0;for(const I of f){switch(I.type){case"Point":P=Math.min(P,Mh(w,!0,[I.coordinates],!1,A,P));break;case"LineString":P=Math.min(P,Mh(w,!0,I.coordinates,!0,A,P));break;case"Polygon":P=Math.min(P,pu(w,!0,I.coordinates,A,P))}if(P===0)return P}return P}(n,this.geometries);if(n.geometryType()==="Polygon")return function(o,f){const v=o.geometry();if(v.length===0||v[0].length===0)return NaN;const w=Sh(v,0).map(I=>I.map(D=>D.map(B=>xh([B.x,B.y],o.canonical)))),A=new jl(w[0][0][0][1]);let P=1/0;for(const I of f)for(const D of w){switch(I.type){case"Point":P=Math.min(P,pu([I.coordinates],!1,D,A,P));break;case"LineString":P=Math.min(P,pu(I.coordinates,!0,D,A,P));break;case"Polygon":P=Math.min(P,Cl(D,I.coordinates,A,P))}if(P===0)return P}return P}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Sc{constructor(n){this.type=vr,this.key=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=n[1];return f==null?o.error("Global state property must be defined."):typeof f!="string"?o.error(`Global state property must be string, but found ${typeof n[1]} instead.`):new Sc(f)}evaluate(n){var o;const f=(o=n.globals)===null||o===void 0?void 0:o.globalState;return f&&Object.keys(f).length!==0?ko(f,this.key):null}eachChild(){}outputDefined(){return!1}}const Il={"==":po,"!=":Xf,">":Bm,"<":yh,">=":Fm,"<=":Td,array:hr,at:fh,boolean:hr,case:ni,coalesce:gh,collator:vh,format:_h,image:Ns,in:ph,"index-of":iu,interpolate:mi,"interpolate-hcl":mi,"interpolate-lab":mi,length:Tl,let:Do,literal:ur,match:zo,number:hr,"number-format":Ad,object:hr,slice:Sl,step:ks,string:hr,"to-boolean":ri,"to-color":ri,"to-number":ri,"to-string":ri,var:Is,within:ls,distance:Ol,"global-state":Sc};class pa{constructor(n,o,f,v){this.name=n,this.type=o,this._evaluate=f,this.args=v}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,o){const f=n[0],v=pa.definitions[f];if(!v)return o.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(v)?v[0]:v.type,A=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,P=A.filter(([D])=>!Array.isArray(D)||D.length===n.length-1);let I=null;for(const[D,B]of P){I=new wl(o.registry,cs,o.path,null,o.scope);const V=[];let W=!1;for(let K=1;K<n.length;K++){const te=n[K],le=Array.isArray(D)?D[K-1]:D.type,de=I.parse(te,1+V.length,le);if(!de){W=!0;break}V.push(de)}if(!W)if(Array.isArray(D)&&D.length!==V.length)I.error(`Expected ${D.length} arguments, but found ${V.length} instead.`);else{for(let K=0;K<V.length;K++){const te=Array.isArray(D)?D[K]:D.type,le=V[K];I.concat(K+1).checkSubtype(te,le.type)}if(I.errors.length===0)return new pa(f,w,B,V)}}if(P.length===1)o.errors.push(...I.errors);else{const D=(P.length?P:A).map(([V])=>{return W=V,Array.isArray(W)?`(${W.map(Vr).join(", ")})`:`(${Vr(W.type)}...)`;var W}).join(" | "),B=[];for(let V=1;V<n.length;V++){const W=o.parse(n[V],1+B.length);if(!W)return null;B.push(Vr(W.type))}o.error(`Expected arguments of type ${D}, but found (${B.join(", ")}) instead.`)}return null}static register(n,o){pa.definitions=o;for(const f in o)n[f]=pa}}function Ua(c,[n,o,f,v]){n=n.evaluate(c),o=o.evaluate(c),f=f.evaluate(c);const w=v?v.evaluate(c):1,A=Os(n,o,f,w);if(A)throw new Fr(A);return new xr(n/255,o/255,f/255,w,!1)}function Dd(c,n){return c in n}function ma(c,n){const o=n[c];return o===void 0?null:o}function xi(c){return{type:c}}function cs(c){if(c instanceof Is)return cs(c.boundExpression);if(c instanceof pa&&c.name==="error"||c instanceof vh||c instanceof ls||c instanceof Ol||c instanceof Sc)return!1;const n=c instanceof ri||c instanceof hr;let o=!0;return c.eachChild(f=>{o=n?o&&cs(f):o&&f instanceof ur}),!!o&&Tc(c)&&kl(c,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Tc(c){if(c instanceof pa&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof ls||c instanceof Ol)return!1;let n=!0;return c.eachChild(o=>{n&&!Tc(o)&&(n=!1)}),n}function Ds(c){if(c instanceof pa&&c.name==="feature-state")return!1;let n=!0;return c.eachChild(o=>{n&&!Ds(o)&&(n=!1)}),n}function kl(c,n){if(c instanceof pa&&n.indexOf(c.name)>=0)return!1;let o=!0;return c.eachChild(f=>{o&&!kl(f,n)&&(o=!1)}),o}function jh(c){return{result:"success",value:c}}function yo(c){return{result:"error",value:c}}function Nl(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function mu(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Fo(c){return!!c.expression&&c.expression.interpolated}function Pr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Bi(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)&&vn(c)===uo}function zd(c){return c}function vo(c,n){const o=c.stops&&typeof c.stops[0][0]=="object",f=o||!(o||c.property!==void 0),v=c.type||(Fo(n)?"exponential":"interval"),w=function(B){switch(B.type){case"color":return xr.parse;case"padding":return hi.parse;case"numberArray":return di.parse;case"colorArray":return Kn.parse;default:return null}}(n);if(w&&((c=Co({},c)).stops&&(c.stops=c.stops.map(B=>[B[0],w(B[1])])),c.default=w(c.default?c.default:n.default)),c.colorSpace&&(A=c.colorSpace)!=="rgb"&&A!=="hcl"&&A!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var A;const P=function(B){switch(B){case"exponential":return gu;case"interval":return $o;case"categorical":return Ph;case"identity":return Ld;default:throw new Error(`Unknown function type "${B}"`)}}(v);let I,D;if(v==="categorical"){I=Object.create(null);for(const B of c.stops)I[B[0]]=B[1];D=typeof c.stops[0][0]}if(o){const B={},V=[];for(let te=0;te<c.stops.length;te++){const le=c.stops[te],de=le[0].zoom;B[de]===void 0&&(B[de]={zoom:de,type:c.type,property:c.property,default:c.default,stops:[]},V.push(de)),B[de].stops.push([le[0].value,le[1]])}const W=[];for(const te of V)W.push([B[te].zoom,vo(B[te],n)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:mi.interpolationFactor.bind(void 0,K),zoomStops:W.map(te=>te[0]),evaluate:({zoom:te},le)=>gu({stops:W,base:c.base},n,te).evaluate(te,le)}}if(f){const B=v==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:B,interpolationFactor:mi.interpolationFactor.bind(void 0,B),zoomStops:c.stops.map(V=>V[0]),evaluate:({zoom:V})=>P(c,n,V,I,D)}}return{kind:"source",evaluate(B,V){const W=V&&V.properties?V.properties[c.property]:void 0;return W===void 0?Ac(c.default,n.default):P(c,n,W,I,D)}}}function Ac(c,n,o){return c!==void 0?c:n!==void 0?n:o!==void 0?o:void 0}function Ph(c,n,o,f,v){return Ac(typeof o===v?f[o]:void 0,c.default,n.default)}function $o(c,n,o){if(Pr(o)!=="number")return Ac(c.default,n.default);const f=c.stops.length;if(f===1||o<=c.stops[0][0])return c.stops[0][1];if(o>=c.stops[f-1][0])return c.stops[f-1][1];const v=au(c.stops.map(w=>w[0]),o);return c.stops[v][1]}function gu(c,n,o){const f=c.base!==void 0?c.base:1;if(Pr(o)!=="number")return Ac(c.default,n.default);const v=c.stops.length;if(v===1||o<=c.stops[0][0])return c.stops[0][1];if(o>=c.stops[v-1][0])return c.stops[v-1][1];const w=au(c.stops.map(B=>B[0]),o),A=function(B,V,W,K){const te=K-W,le=B-W;return te===0?0:V===1?le/te:(Math.pow(V,le)-1)/(Math.pow(V,te)-1)}(o,f,c.stops[w][0],c.stops[w+1][0]),P=c.stops[w][1],I=c.stops[w+1][1],D=da[n.type]||zd;return typeof P.evaluate=="function"?{evaluate(...B){const V=P.evaluate.apply(void 0,B),W=I.evaluate.apply(void 0,B);if(V!==void 0&&W!==void 0)return D(V,W,A,c.colorSpace)}}:D(P,I,A,c.colorSpace)}function Ld(c,n,o){switch(n.type){case"color":o=xr.parse(o);break;case"formatted":o=Qi.fromString(o.toString());break;case"resolvedImage":o=ti.fromString(o.toString());break;case"padding":o=hi.parse(o);break;case"colorArray":o=Kn.parse(o);break;case"numberArray":o=di.parse(o);break;default:Pr(o)===n.type||n.type==="enum"&&n.values[o]||(o=void 0)}return Ac(o,c.default,n.default)}pa.register(Il,{error:[{kind:"error"},[mr],(c,[n])=>{throw new Fr(n.evaluate(c))}],typeof:[mr,[vr],(c,[n])=>Vr(vn(n.evaluate(c)))],"to-rgba":[Di(Et,4),[vi],(c,[n])=>{const[o,f,v,w]=n.evaluate(c).rgb;return[255*o,255*f,255*v,w]}],rgb:[vi,[Et,Et,Et],Ua],rgba:[vi,[Et,Et,Et,Et],Ua],has:{type:pr,overloads:[[[mr],(c,[n])=>Dd(n.evaluate(c),c.properties())],[[mr,uo],(c,[n,o])=>Dd(n.evaluate(c),o.evaluate(c))]]},get:{type:vr,overloads:[[[mr],(c,[n])=>ma(n.evaluate(c),c.properties())],[[mr,uo],(c,[n,o])=>ma(n.evaluate(c),o.evaluate(c))]]},"feature-state":[vr,[mr],(c,[n])=>ma(n.evaluate(c),c.featureState||{})],properties:[uo,[],c=>c.properties()],"geometry-type":[mr,[],c=>c.geometryType()],id:[vr,[],c=>c.id()],zoom:[Et,[],c=>c.globals.zoom],"heatmap-density":[Et,[],c=>c.globals.heatmapDensity||0],elevation:[Et,[],c=>c.globals.elevation||0],"line-progress":[Et,[],c=>c.globals.lineProgress||0],accumulated:[vr,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Et,xi(Et),(c,n)=>{let o=0;for(const f of n)o+=f.evaluate(c);return o}],"*":[Et,xi(Et),(c,n)=>{let o=1;for(const f of n)o*=f.evaluate(c);return o}],"-":{type:Et,overloads:[[[Et,Et],(c,[n,o])=>n.evaluate(c)-o.evaluate(c)],[[Et],(c,[n])=>-n.evaluate(c)]]},"/":[Et,[Et,Et],(c,[n,o])=>n.evaluate(c)/o.evaluate(c)],"%":[Et,[Et,Et],(c,[n,o])=>n.evaluate(c)%o.evaluate(c)],ln2:[Et,[],()=>Math.LN2],pi:[Et,[],()=>Math.PI],e:[Et,[],()=>Math.E],"^":[Et,[Et,Et],(c,[n,o])=>Math.pow(n.evaluate(c),o.evaluate(c))],sqrt:[Et,[Et],(c,[n])=>Math.sqrt(n.evaluate(c))],log10:[Et,[Et],(c,[n])=>Math.log(n.evaluate(c))/Math.LN10],ln:[Et,[Et],(c,[n])=>Math.log(n.evaluate(c))],log2:[Et,[Et],(c,[n])=>Math.log(n.evaluate(c))/Math.LN2],sin:[Et,[Et],(c,[n])=>Math.sin(n.evaluate(c))],cos:[Et,[Et],(c,[n])=>Math.cos(n.evaluate(c))],tan:[Et,[Et],(c,[n])=>Math.tan(n.evaluate(c))],asin:[Et,[Et],(c,[n])=>Math.asin(n.evaluate(c))],acos:[Et,[Et],(c,[n])=>Math.acos(n.evaluate(c))],atan:[Et,[Et],(c,[n])=>Math.atan(n.evaluate(c))],min:[Et,xi(Et),(c,n)=>Math.min(...n.map(o=>o.evaluate(c)))],max:[Et,xi(Et),(c,n)=>Math.max(...n.map(o=>o.evaluate(c)))],abs:[Et,[Et],(c,[n])=>Math.abs(n.evaluate(c))],round:[Et,[Et],(c,[n])=>{const o=n.evaluate(c);return o<0?-Math.round(-o):Math.round(o)}],floor:[Et,[Et],(c,[n])=>Math.floor(n.evaluate(c))],ceil:[Et,[Et],(c,[n])=>Math.ceil(n.evaluate(c))],"filter-==":[pr,[mr,vr],(c,[n,o])=>c.properties()[n.value]===o.value],"filter-id-==":[pr,[vr],(c,[n])=>c.id()===n.value],"filter-type-==":[pr,[mr],(c,[n])=>c.geometryType()===n.value],"filter-<":[pr,[mr,vr],(c,[n,o])=>{const f=c.properties()[n.value],v=o.value;return typeof f==typeof v&&f<v}],"filter-id-<":[pr,[vr],(c,[n])=>{const o=c.id(),f=n.value;return typeof o==typeof f&&o<f}],"filter->":[pr,[mr,vr],(c,[n,o])=>{const f=c.properties()[n.value],v=o.value;return typeof f==typeof v&&f>v}],"filter-id->":[pr,[vr],(c,[n])=>{const o=c.id(),f=n.value;return typeof o==typeof f&&o>f}],"filter-<=":[pr,[mr,vr],(c,[n,o])=>{const f=c.properties()[n.value],v=o.value;return typeof f==typeof v&&f<=v}],"filter-id-<=":[pr,[vr],(c,[n])=>{const o=c.id(),f=n.value;return typeof o==typeof f&&o<=f}],"filter->=":[pr,[mr,vr],(c,[n,o])=>{const f=c.properties()[n.value],v=o.value;return typeof f==typeof v&&f>=v}],"filter-id->=":[pr,[vr],(c,[n])=>{const o=c.id(),f=n.value;return typeof o==typeof f&&o>=f}],"filter-has":[pr,[vr],(c,[n])=>n.value in c.properties()],"filter-has-id":[pr,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[pr,[Di(mr)],(c,[n])=>n.value.indexOf(c.geometryType())>=0],"filter-id-in":[pr,[Di(vr)],(c,[n])=>n.value.indexOf(c.id())>=0],"filter-in-small":[pr,[mr,Di(vr)],(c,[n,o])=>o.value.indexOf(c.properties()[n.value])>=0],"filter-in-large":[pr,[mr,Di(vr)],(c,[n,o])=>function(f,v,w,A){for(;w<=A;){const P=w+A>>1;if(v[P]===f)return!0;v[P]>f?A=P-1:w=P+1}return!1}(c.properties()[n.value],o.value,0,o.value.length-1)],all:{type:pr,overloads:[[[pr,pr],(c,[n,o])=>n.evaluate(c)&&o.evaluate(c)],[xi(pr),(c,n)=>{for(const o of n)if(!o.evaluate(c))return!1;return!0}]]},any:{type:pr,overloads:[[[pr,pr],(c,[n,o])=>n.evaluate(c)||o.evaluate(c)],[xi(pr),(c,n)=>{for(const o of n)if(o.evaluate(c))return!0;return!1}]]},"!":[pr,[pr],(c,[n])=>!n.evaluate(c)],"is-supported-script":[pr,[mr],(c,[n])=>{const o=c.globals&&c.globals.isSupportedScript;return!o||o(n.evaluate(c))}],upcase:[mr,[mr],(c,[n])=>n.evaluate(c).toUpperCase()],downcase:[mr,[mr],(c,[n])=>n.evaluate(c).toLowerCase()],concat:[mr,xi(vr),(c,n)=>n.map(o=>br(o.evaluate(c))).join("")],"resolved-locale":[mr,[$a],(c,[n])=>n.evaluate(c).resolvedLocale()]});class zs{constructor(n,o,f){this.expression=n,this._warningHistory={},this._evaluator=new bl,this._defaultValue=o?function(v){if(v.type==="color"&&Bi(v.default))return new xr(0,0,0,0);switch(v.type){case"color":return xr.parse(v.default)||null;case"padding":return hi.parse(v.default)||null;case"numberArray":return di.parse(v.default)||null;case"colorArray":return Kn.parse(v.default)||null;case"variableAnchorOffsetCollection":return fi.parse(v.default)||null;case"projectionDefinition":return Li.parse(v.default)||null;default:return v.default===void 0?null:v.default}}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null,this._globalState=f}evaluateWithoutErrorHandling(n,o,f,v,w,A){return this._globalState&&(n=Ea(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=o,this._evaluator.featureState=f,this._evaluator.canonical=v,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=A,this.expression.evaluate(this._evaluator)}evaluate(n,o,f,v,w,A){this._globalState&&(n=Ea(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=o||null,this._evaluator.featureState=f||null,this._evaluator.canonical=v,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=A||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new Fr(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console<"u"&&console.warn(P.message)),this._defaultValue}}}function us(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Il}function Rl(c,n,o){const f=new wl(Il,cs,[],n?function(w){const A={color:vi,string:mr,number:Et,enum:mr,boolean:pr,formatted:Oo,padding:pl,numberArray:Io,colorArray:mc,projectionDefinition:fn,resolvedImage:ml,variableAnchorOffsetCollection:jn};return w.type==="array"?Di(A[w.value]||vr,w.length):A[w.type]}(n):void 0),v=f.parse(c,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?jh(new zs(v,n,o)):yo(f.errors)}class Dl{constructor(n,o,f){this.kind=n,this._styleExpression=o,this.isStateDependent=n!=="constant"&&!Ds(o.expression),this.globalStateRefs=Pa(o.expression),this._globalState=f}evaluateWithoutErrorHandling(n,o,f,v,w,A){return this._globalState&&(n=Ea(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,o,f,v,w,A)}evaluate(n,o,f,v,w,A){return this._globalState&&(n=Ea(n,this._globalState)),this._styleExpression.evaluate(n,o,f,v,w,A)}}class Ji{constructor(n,o,f,v,w){this.kind=n,this.zoomStops=f,this._styleExpression=o,this.isStateDependent=n!=="camera"&&!Ds(o.expression),this.globalStateRefs=Pa(o.expression),this.interpolationType=v,this._globalState=w}evaluateWithoutErrorHandling(n,o,f,v,w,A){return this._globalState&&(n=Ea(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,o,f,v,w,A)}evaluate(n,o,f,v,w,A){return this._globalState&&(n=Ea(n,this._globalState)),this._styleExpression.evaluate(n,o,f,v,w,A)}interpolationFactor(n,o,f){return this.interpolationType?mi.interpolationFactor(this.interpolationType,n,o,f):0}}function ga(c,n,o){const f=Rl(c,n,o);if(f.result==="error")return f;const v=f.value.expression,w=Tc(v);if(!w&&!Nl(n))return yo([new ua("","data expressions not supported")]);const A=kl(v,["zoom"]);if(!A&&!mu(n))return yo([new ua("","zoom expressions not supported")]);const P=Va(v);return P||A?P instanceof ua?yo([P]):P instanceof mi&&!Fo(n)?yo([new ua("",'"interpolate" expressions cannot be used with this property')]):jh(P?new Ji(w?"camera":"composite",f.value,P.labels,P instanceof mi?P.interpolation:void 0,o):new Dl(w?"constant":"source",f.value,o)):yo([new ua("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class qo{constructor(n,o){this._parameters=n,this._specification=o,Co(this,vo(this._parameters,this._specification))}static deserialize(n){return new qo(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Va(c){let n=null;if(c instanceof Do)n=Va(c.result);else if(c instanceof gh){for(const o of c.args)if(n=Va(o),n)break}else(c instanceof ks||c instanceof mi)&&c.input instanceof pa&&c.input.name==="zoom"&&(n=c);return n instanceof ua||c.eachChild(o=>{const f=Va(o);f instanceof ua?n=f:!n&&f?n=new ua("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&f&&n!==f&&(n=new ua("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Pa(c,n=new Set){return c instanceof Sc&&n.add(c.key),c.eachChild(o=>{Pa(o,n)}),n}function Ea(c,n){const{zoom:o,heatmapDensity:f,elevation:v,lineProgress:w,isSupportedScript:A,accumulated:P}=c??{};return{zoom:o,heatmapDensity:f,elevation:v,lineProgress:w,isSupportedScript:A,accumulated:P,globalState:n}}function yu(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const n of c.slice(1))if(!yu(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Bd={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function zl(c,n){if(c==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};yu(c)||(c=Dr(c));const o=Rl(c,Bd,n);if(o.result==="error")throw new Error(o.value.map(f=>`${f.key}: ${f.message}`).join(", "));return{filter:(f,v,w)=>o.value.evaluate(f,v,{},w),needGeometry:Nn(c),getGlobalStateRefs:()=>Pa(o.value.expression)}}function ea(c,n){return c<n?-1:c>n?1:0}function Nn(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let n=1;n<c.length;n++)if(Nn(c[n]))return!0;return!1}function Dr(c){if(!c)return!0;const n=c[0];return c.length<=1?n!=="any":n==="=="?Uo(c[1],c[2],"=="):n==="!="?Ga(Uo(c[1],c[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Uo(c[1],c[2],n):n==="any"?(o=c.slice(1),["any"].concat(o.map(Dr))):n==="all"?["all"].concat(c.slice(1).map(Dr)):n==="none"?["all"].concat(c.slice(1).map(Dr).map(Ga)):n==="in"?Ca(c[1],c.slice(2)):n==="!in"?Ga(Ca(c[1],c.slice(2))):n==="has"?Mc(c[1]):n!=="!has"||Ga(Mc(c[1]));var o}function Uo(c,n,o){switch(c){case"$type":return[`filter-type-${o}`,n];case"$id":return[`filter-id-${o}`,n];default:return[`filter-${o}`,c,n]}}function Ca(c,n){if(n.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(o=>typeof o!=typeof n[0])?["filter-in-large",c,["literal",n.sort(ea)]]:["filter-in-small",c,["literal",n]]}}function Mc(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Ga(c){return["!",c]}function jc(c){const n=typeof c;if(n==="number"||n==="boolean"||n==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let v="[";for(const w of c)v+=`${jc(w)},`;return`${v}]`}const o=Object.keys(c).sort();let f="{";for(let v=0;v<o.length;v++)f+=`${JSON.stringify(o[v])}:${jc(c[o[v]])},`;return`${f}}`}function vu(c){let n="";for(const o of Or)n+=`/${jc(c[o])}`;return n}function Pc(c){const n=c.value;return n?[new wt(c.key,n,"constants have been deprecated as of v8")]:[]}function _n(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Ls(c){if(Array.isArray(c))return c.map(Ls);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const n={};for(const o in c)n[o]=Ls(c[o]);return n}return _n(c)}function Fi(c){const n=c.key,o=c.value,f=c.valueSpec||{},v=c.objectElementValidators||{},w=c.style,A=c.styleSpec,P=c.validateSpec;let I=[];const D=Pr(o);if(D!=="object")return[new wt(n,o,`object expected, ${D} found`)];for(const B in o){const V=B.split(".")[0],W=ko(f,V)||f["*"];let K;if(ko(v,V))K=v[V];else if(ko(f,V))K=P;else if(v["*"])K=v["*"];else{if(!f["*"]){I.push(new wt(n,o[B],`unknown property "${B}"`));continue}K=P}I=I.concat(K({key:(n&&`${n}.`)+B,value:o[B],valueSpec:W,style:w,styleSpec:A,object:o,objectKey:B,validateSpec:P},o))}for(const B in f)v[B]||f[B].required&&f[B].default===void 0&&o[B]===void 0&&I.push(new wt(n,o,`missing required property "${B}"`));return I}function _u(c){const n=c.value,o=c.valueSpec,f=c.style,v=c.styleSpec,w=c.key,A=c.arrayElementValidator||c.validateSpec;if(Pr(n)!=="array")return[new wt(w,n,`array expected, ${Pr(n)} found`)];if(o.length&&n.length!==o.length)return[new wt(w,n,`array length ${o.length} expected, length ${n.length} found`)];if(o["min-length"]&&n.length<o["min-length"])return[new wt(w,n,`array length at least ${o["min-length"]} expected, length ${n.length} found`)];let P={type:o.value,values:o.values};v.$version<7&&(P.function=o.function),Pr(o.value)==="object"&&(P=o.value);let I=[];for(let D=0;D<n.length;D++)I=I.concat(A({array:n,arrayIndex:D,value:n[D],valueSpec:P,validateSpec:c.validateSpec,style:f,styleSpec:v,key:`${w}[${D}]`}));return I}function Vo(c){const n=c.key,o=c.value,f=c.valueSpec;let v=Pr(o);return v==="number"&&o!=o&&(v="NaN"),v!=="number"?[new wt(n,o,`number expected, ${v} found`)]:"minimum"in f&&o<f.minimum?[new wt(n,o,`${o} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&o>f.maximum?[new wt(n,o,`${o} is greater than the maximum value ${f.maximum}`)]:[]}function _o(c){const n=c.valueSpec,o=_n(c.value.type);let f,v,w,A={};const P=o!=="categorical"&&c.value.property===void 0,I=!P,D=Pr(c.value.stops)==="array"&&Pr(c.value.stops[0])==="array"&&Pr(c.value.stops[0][0])==="object",B=Fi({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(K){if(o==="identity")return[new wt(K.key,K.value,'identity function may not have a "stops" property')];let te=[];const le=K.value;return te=te.concat(_u({key:K.key,value:le,valueSpec:K.valueSpec,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:V})),Pr(le)==="array"&&le.length===0&&te.push(new wt(K.key,le,"array must have at least one stop")),te},default:function(K){return K.validateSpec({key:K.key,value:K.value,valueSpec:n,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec})}}});return o==="identity"&&P&&B.push(new wt(c.key,c.value,'missing required property "property"')),o==="identity"||c.value.stops||B.push(new wt(c.key,c.value,'missing required property "stops"')),o==="exponential"&&c.valueSpec.expression&&!Fo(c.valueSpec)&&B.push(new wt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(I&&!Nl(c.valueSpec)?B.push(new wt(c.key,c.value,"property functions not supported")):P&&!mu(c.valueSpec)&&B.push(new wt(c.key,c.value,"zoom functions not supported"))),o!=="categorical"&&!D||c.value.property!==void 0||B.push(new wt(c.key,c.value,'"property" property is required')),B;function V(K){let te=[];const le=K.value,de=K.key;if(Pr(le)!=="array")return[new wt(de,le,`array expected, ${Pr(le)} found`)];if(le.length!==2)return[new wt(de,le,`array length 2 expected, length ${le.length} found`)];if(D){if(Pr(le[0])!=="object")return[new wt(de,le,`object expected, ${Pr(le[0])} found`)];if(le[0].zoom===void 0)return[new wt(de,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new wt(de,le,"object stop key must have value")];if(w&&w>_n(le[0].zoom))return[new wt(de,le[0].zoom,"stop zoom values must appear in ascending order")];_n(le[0].zoom)!==w&&(w=_n(le[0].zoom),v=void 0,A={}),te=te.concat(Fi({key:`${de}[0]`,value:le[0],valueSpec:{zoom:{}},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:Vo,value:W}}))}else te=te.concat(W({key:`${de}[0]`,value:le[0],validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec},le));return us(Ls(le[1]))?te.concat([new wt(`${de}[1]`,le[1],"expressions are not allowed in function stops.")]):te.concat(K.validateSpec({key:`${de}[1]`,value:le[1],valueSpec:n,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec}))}function W(K,te){const le=Pr(K.value),de=_n(K.value),ve=K.value!==null?K.value:te;if(f){if(le!==f)return[new wt(K.key,ve,`${le} stop domain type must match previous stop domain type ${f}`)]}else f=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new wt(K.key,ve,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&o!=="categorical"){let Be=`number expected, ${le} found`;return Nl(n)&&o===void 0&&(Be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new wt(K.key,ve,Be)]}return o!=="categorical"||le!=="number"||isFinite(de)&&Math.floor(de)===de?o!=="categorical"&&le==="number"&&v!==void 0&&de<v?[new wt(K.key,ve,"stop domain values must appear in ascending order")]:(v=de,o==="categorical"&&de in A?[new wt(K.key,ve,"stop domain values must be unique")]:(A[de]=!0,[])):[new wt(K.key,ve,`integer expected, found ${de}`)]}}function ya(c){const n=(c.expressionContext==="property"?ga:Rl)(Ls(c.value),c.valueSpec);if(n.result==="error")return n.value.map(f=>new wt(`${c.key}${f.key}`,c.value,f.message));const o=n.value.expression||n.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!o.outputDefined())return[new wt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Ds(o))return[new wt(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Ds(o))return[new wt(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!kl(o,["zoom","feature-state"]))return[new wt(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Tc(o))return[new wt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function va(c){const n=c.key,o=c.value,f=Pr(o);return f!=="string"?[new wt(n,o,`color expected, ${f} found`)]:xr.parse(String(o))?[]:[new wt(n,o,`color expected, "${o}" found`)]}function Ll(c){const n=c.key,o=c.value,f=c.valueSpec,v=[];return Array.isArray(f.values)?f.values.indexOf(_n(o))===-1&&v.push(new wt(n,o,`expected one of [${f.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(f.values).indexOf(_n(o))===-1&&v.push(new wt(n,o,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(o)} found`)),v}function Ec(c){return yu(Ls(c.value))?ya(Co({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Bl(c)}function Bl(c){const n=c.value,o=c.key;if(Pr(n)!=="array")return[new wt(o,n,`array expected, ${Pr(n)} found`)];const f=c.styleSpec;let v,w=[];if(n.length<1)return[new wt(o,n,"filter array must have at least 1 element")];switch(w=w.concat(Ll({key:`${o}[0]`,value:n[0],valueSpec:f.filter_operator,style:c.style,styleSpec:c.styleSpec})),_n(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&_n(n[1])==="$type"&&w.push(new wt(o,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&w.push(new wt(o,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(v=Pr(n[1]),v!=="string"&&w.push(new wt(`${o}[1]`,n[1],`string expected, ${v} found`)));for(let A=2;A<n.length;A++)v=Pr(n[A]),_n(n[1])==="$type"?w=w.concat(Ll({key:`${o}[${A}]`,value:n[A],valueSpec:f.geometry_type,style:c.style,styleSpec:c.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&w.push(new wt(`${o}[${A}]`,n[A],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let A=1;A<n.length;A++)w=w.concat(Bl({key:`${o}[${A}]`,value:n[A],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":v=Pr(n[1]),n.length!==2?w.push(new wt(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):v!=="string"&&w.push(new wt(`${o}[1]`,n[1],`string expected, ${v} found`))}return w}function xu(c,n){const o=c.key,f=c.validateSpec,v=c.style,w=c.styleSpec,A=c.value,P=c.objectKey,I=w[`${n}_${c.layerType}`];if(!I)return[];const D=P.match(/^(.*)-transition$/);if(n==="paint"&&D&&I[D[1]]&&I[D[1]].transition)return f({key:o,value:A,valueSpec:w.transition,style:v,styleSpec:w});const B=c.valueSpec||I[P];if(!B)return[new wt(o,A,`unknown property "${P}"`)];let V;if(Pr(A)==="string"&&Nl(B)&&!B.tokens&&(V=/^{([^}]+)}$/.exec(A)))return[new wt(o,A,`"${P}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];const W=[];return c.layerType==="symbol"&&(P==="text-field"&&v&&!v.glyphs&&W.push(new wt(o,A,'use of "text-field" requires a style "glyphs" property')),P==="text-font"&&Bi(Ls(A))&&_n(A.type)==="identity"&&W.push(new wt(o,A,'"text-font" does not support identity functions'))),W.concat(f({key:c.key,value:A,valueSpec:B,style:v,styleSpec:w,expressionContext:"property",propertyType:n,propertyKey:P}))}function hs(c){return xu(c,"paint")}function bi(c){return xu(c,"layout")}function ds(c){let n=[];const o=c.value,f=c.key,v=c.style,w=c.styleSpec;if(Pr(o)!=="object")return[new wt(f,o,`object expected, ${Pr(o)} found`)];o.type||o.ref||n.push(new wt(f,o,'either "type" or "ref" is required'));let A=_n(o.type);const P=_n(o.ref);if(o.id){const I=_n(o.id);for(let D=0;D<c.arrayIndex;D++){const B=v.layers[D];_n(B.id)===I&&n.push(new wt(f,o.id,`duplicate layer id "${o.id}", previously used at line ${B.id.__line__}`))}}if("ref"in o){let I;["type","source","source-layer","filter","layout"].forEach(D=>{D in o&&n.push(new wt(f,o[D],`"${D}" is prohibited for ref layers`))}),v.layers.forEach(D=>{_n(D.id)===P&&(I=D)}),I?I.ref?n.push(new wt(f,o.ref,"ref cannot reference another ref layer")):A=_n(I.type):n.push(new wt(f,o.ref,`ref layer "${P}" not found`))}else if(A!=="background")if(o.source){const I=v.sources&&v.sources[o.source],D=I&&_n(I.type);I?D==="vector"&&A==="raster"?n.push(new wt(f,o.source,`layer "${o.id}" requires a raster source`)):D!=="raster-dem"&&A==="hillshade"||D!=="raster-dem"&&A==="color-relief"?n.push(new wt(f,o.source,`layer "${o.id}" requires a raster-dem source`)):D==="raster"&&A!=="raster"?n.push(new wt(f,o.source,`layer "${o.id}" requires a vector source`)):D!=="vector"||o["source-layer"]?D==="raster-dem"&&A!=="hillshade"&&A!=="color-relief"?n.push(new wt(f,o.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):A!=="line"||!o.paint||!o.paint["line-gradient"]||D==="geojson"&&I.lineMetrics||n.push(new wt(f,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new wt(f,o,`layer "${o.id}" must specify a "source-layer"`)):n.push(new wt(f,o.source,`source "${o.source}" not found`))}else n.push(new wt(f,o,'missing required property "source"'));return n=n.concat(Fi({key:f,value:o,valueSpec:w.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${f}.type`,value:o.type,valueSpec:w.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:o,objectKey:"type"}),filter:Ec,layout:I=>Fi({layer:o,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":D=>bi(Co({layerType:A},D))}}),paint:I=>Fi({layer:o,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":D=>hs(Co({layerType:A},D))}})}})),n}function Bs(c){const n=c.value,o=c.key,f=Pr(n);return f!=="string"?[new wt(o,n,`string expected, ${f} found`)]:[]}const tp={promoteId:function({key:c,value:n}){if(Pr(n)==="string")return Bs({key:c,value:n});{const o=[];for(const f in n)o.push(...Bs({key:`${c}.${f}`,value:n[f]}));return o}}};function rp(c){const n=c.value,o=c.key,f=c.styleSpec,v=c.style,w=c.validateSpec;if(!n.type)return[new wt(o,n,'"type" is required')];const A=_n(n.type);let P;switch(A){case"vector":case"raster":return P=Fi({key:o,value:n,valueSpec:f[`source_${A.replace("-","_")}`],style:c.style,styleSpec:f,objectElementValidators:tp,validateSpec:w}),P;case"raster-dem":return P=function(I){var D;const B=(D=I.sourceName)!==null&&D!==void 0?D:"",V=I.value,W=I.styleSpec,K=W.source_raster_dem,te=I.style;let le=[];const de=Pr(V);if(V===void 0)return le;if(de!=="object")return le.push(new wt("source_raster_dem",V,`object expected, ${de} found`)),le;const ve=_n(V.encoding)==="custom",Be=["redFactor","greenFactor","blueFactor","baseShift"],Me=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const Ce in V)!ve&&Be.includes(Ce)?le.push(new wt(Ce,V[Ce],`In "${B}": "${Ce}" is only valid when "encoding" is set to "custom". ${Me} encoding found`)):K[Ce]?le=le.concat(I.validateSpec({key:Ce,value:V[Ce],valueSpec:K[Ce],validateSpec:I.validateSpec,style:te,styleSpec:W})):le.push(new wt(Ce,V[Ce],`unknown property "${Ce}"`));return le}({sourceName:o,value:n,style:c.style,styleSpec:f,validateSpec:w}),P;case"geojson":if(P=Fi({key:o,value:n,valueSpec:f.source_geojson,style:v,styleSpec:f,validateSpec:w,objectElementValidators:tp}),n.cluster)for(const I in n.clusterProperties){const[D,B]=n.clusterProperties[I],V=typeof D=="string"?[D,["accumulated"],["get",I]]:D;P.push(...ya({key:`${o}.${I}.map`,value:B,expressionContext:"cluster-map"})),P.push(...ya({key:`${o}.${I}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return P;case"video":return Fi({key:o,value:n,valueSpec:f.source_video,style:v,validateSpec:w,styleSpec:f});case"image":return Fi({key:o,value:n,valueSpec:f.source_image,style:v,validateSpec:w,styleSpec:f});case"canvas":return[new wt(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ll({key:`${o}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function np(c){const n=c.value,o=c.styleSpec,f=o.light,v=c.style;let w=[];const A=Pr(n);if(n===void 0)return w;if(A!=="object")return w=w.concat([new wt("light",n,`object expected, ${A} found`)]),w;for(const P in n){const I=P.match(/^(.*)-transition$/);w=w.concat(I&&f[I[1]]&&f[I[1]].transition?c.validateSpec({key:P,value:n[P],valueSpec:o.transition,validateSpec:c.validateSpec,style:v,styleSpec:o}):f[P]?c.validateSpec({key:P,value:n[P],valueSpec:f[P],validateSpec:c.validateSpec,style:v,styleSpec:o}):[new wt(P,n[P],`unknown property "${P}"`)])}return w}function ii(c){const n=c.value,o=c.styleSpec,f=o.sky,v=c.style,w=Pr(n);if(n===void 0)return[];if(w!=="object")return[new wt("sky",n,`object expected, ${w} found`)];let A=[];for(const P in n)A=A.concat(f[P]?c.validateSpec({key:P,value:n[P],valueSpec:f[P],style:v,styleSpec:o}):[new wt(P,n[P],`unknown property "${P}"`)]);return A}function Eh(c){const n=c.value,o=c.styleSpec,f=o.terrain,v=c.style;let w=[];const A=Pr(n);if(n===void 0)return w;if(A!=="object")return w=w.concat([new wt("terrain",n,`object expected, ${A} found`)]),w;for(const P in n)w=w.concat(f[P]?c.validateSpec({key:P,value:n[P],valueSpec:f[P],validateSpec:c.validateSpec,style:v,styleSpec:o}):[new wt(P,n[P],`unknown property "${P}"`)]);return w}function Go(c){let n=[];const o=c.value,f=c.key;if(Array.isArray(o)){const v=[],w=[];for(const A in o)o[A].id&&v.includes(o[A].id)&&n.push(new wt(f,o,`all the sprites' ids must be unique, but ${o[A].id} is duplicated`)),v.push(o[A].id),o[A].url&&w.includes(o[A].url)&&n.push(new wt(f,o,`all the sprites' URLs must be unique, but ${o[A].url} is duplicated`)),w.push(o[A].url),n=n.concat(Fi({key:`${f}[${A}]`,value:o[A],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return n}return Bs({key:f,value:o})}function Zo(c){return n=c.value,n&&n.constructor===Object?[]:[new wt(c.key,c.value,`object expected, ${Pr(c.value)} found`)];var n}const $i={"*":()=>[],array:_u,boolean:function(c){const n=c.value,o=c.key,f=Pr(n);return f!=="boolean"?[new wt(o,n,`boolean expected, ${f} found`)]:[]},number:Vo,color:va,constants:Pc,enum:Ll,filter:Ec,function:_o,layer:ds,object:Fi,source:rp,light:np,sky:ii,terrain:Eh,projection:function(c){const n=c.value,o=c.styleSpec,f=o.projection,v=c.style,w=Pr(n);if(n===void 0)return[];if(w!=="object")return[new wt("projection",n,`object expected, ${w} found`)];let A=[];for(const P in n)A=A.concat(f[P]?c.validateSpec({key:P,value:n[P],valueSpec:f[P],style:v,styleSpec:o}):[new wt(P,n[P],`unknown property "${P}"`)]);return A},projectionDefinition:function(c){const n=c.key;let o=c.value;o=o instanceof String?o.valueOf():o;const f=Pr(o);return f!=="array"||function(v){return Array.isArray(v)&&v.length===3&&typeof v[0]=="string"&&typeof v[1]=="string"&&typeof v[2]=="number"}(o)||function(v){return!!["interpolate","step","literal"].includes(v[0])}(o)?["array","string"].includes(f)?[]:[new wt(n,o,`projection expected, invalid type "${f}" found`)]:[new wt(n,o,`projection expected, invalid array ${JSON.stringify(o)} found`)]},string:Bs,formatted:function(c){return Bs(c).length===0?[]:ya(c)},resolvedImage:function(c){return Bs(c).length===0?[]:ya(c)},padding:function(c){const n=c.key,o=c.value;if(Pr(o)==="array"){if(o.length<1||o.length>4)return[new wt(n,o,`padding requires 1 to 4 values; ${o.length} values found`)];const f={type:"number"};let v=[];for(let w=0;w<o.length;w++)v=v.concat(c.validateSpec({key:`${n}[${w}]`,value:o[w],validateSpec:c.validateSpec,valueSpec:f}));return v}return Vo({key:n,value:o,valueSpec:{}})},numberArray:function(c){const n=c.key,o=c.value;if(Pr(o)==="array"){const f={type:"number"};if(o.length<1)return[new wt(n,o,"array length at least 1 expected, length 0 found")];let v=[];for(let w=0;w<o.length;w++)v=v.concat(c.validateSpec({key:`${n}[${w}]`,value:o[w],validateSpec:c.validateSpec,valueSpec:f}));return v}return Vo({key:n,value:o,valueSpec:{}})},colorArray:function(c){const n=c.key,o=c.value;if(Pr(o)==="array"){if(o.length<1)return[new wt(n,o,"array length at least 1 expected, length 0 found")];let f=[];for(let v=0;v<o.length;v++)f=f.concat(va({key:`${n}[${v}]`,value:o[v]}));return f}return va({key:n,value:o})},variableAnchorOffsetCollection:function(c){const n=c.key,o=c.value,f=Pr(o),v=c.styleSpec;if(f!=="array"||o.length<1||o.length%2!=0)return[new wt(n,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let w=[];for(let A=0;A<o.length;A+=2)w=w.concat(Ll({key:`${n}[${A}]`,value:o[A],valueSpec:v.layout_symbol["text-anchor"]})),w=w.concat(_u({key:`${n}[${A+1}]`,value:o[A+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:v}));return w},sprite:Go,state:Zo};function Oa(c){const n=c.value,o=c.valueSpec,f=c.styleSpec;return c.validateSpec=Oa,o.expression&&Bi(_n(n))?_o(c):o.expression&&us(Ls(n))?ya(c):o.type&&$i[o.type]?$i[o.type](c):Fi(Co({},c,{valueSpec:o.type?f[o.type]:o}))}function Fs(c){const n=c.value,o=c.key,f=Bs(c);return f.length||(n.indexOf("{fontstack}")===-1&&f.push(new wt(o,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&f.push(new wt(o,n,'"glyphs" url must include a "{range}" token'))),f}function Za(c,n=Ve){let o=[];return o=o.concat(Oa({key:"",value:c,valueSpec:n.$root,styleSpec:n,style:c,validateSpec:Oa,objectElementValidators:{glyphs:Fs,"*":()=>[]}})),c.constants&&(o=o.concat(Pc({key:"constants",value:c.constants}))),Cc(o)}function Ha(c){return function(n){return c(Object.assign({},n,{validateSpec:Oa}))}}function Cc(c){return[].concat(c).sort((n,o)=>n.line-o.line)}function Ia(c){return function(...n){return Cc(c.apply(this,n))}}Za.source=Ia(Ha(rp)),Za.sprite=Ia(Ha(Go)),Za.glyphs=Ia(Ha(Fs)),Za.light=Ia(Ha(np)),Za.sky=Ia(Ha(ii)),Za.terrain=Ia(Ha(Eh)),Za.state=Ia(Ha(Zo)),Za.layer=Ia(Ha(ds)),Za.filter=Ia(Ha(Ec)),Za.paintProperty=Ia(Ha(hs)),Za.layoutProperty=Ia(Ha(bi));const _a=Za,Fd=_a.light,Oc=_a.sky,ip=_a.paintProperty,fs=_a.layoutProperty;function $d(c,n){let o=!1;if(n&&n.length)for(const f of n)c.fire(new $t(new Error(f.message))),o=!0;return o}class $s{constructor(n,o,f){const v=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const A=new Int32Array(this.arrayBuffer);n=A[0],this.d=(o=A[1])+2*(f=A[2]);for(let I=0;I<this.d*this.d;I++){const D=A[3+I],B=A[3+I+1];v.push(D===B?null:A.subarray(D,B))}const P=A[3+v.length+1];this.keys=A.subarray(A[3+v.length],P),this.bboxes=A.subarray(P),this.insert=this._insertReadonly}else{this.d=o+2*f;for(let A=0;A<this.d*this.d;A++)v.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=n,this.padding=f,this.scale=o/n,this.uid=0;const w=f/o*n;this.min=-w,this.max=n+w}insert(n,o,f,v,w){this._forEachCell(o,f,v,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(o),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,o,f,v,w,A){this.cells[w].push(A)}query(n,o,f,v,w){const A=this.min,P=this.max;if(n<=A&&o<=A&&P<=f&&P<=v&&!w)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(n,o,f,v,this._queryCell,I,{},w),I}}_queryCell(n,o,f,v,w,A,P,I){const D=this.cells[w];if(D!==null){const B=this.keys,V=this.bboxes;for(let W=0;W<D.length;W++){const K=D[W];if(P[K]===void 0){const te=4*K;(I?I(V[te+0],V[te+1],V[te+2],V[te+3]):n<=V[te+2]&&o<=V[te+3]&&f>=V[te+0]&&v>=V[te+1])?(P[K]=!0,A.push(B[K])):P[K]=!1}}}}_forEachCell(n,o,f,v,w,A,P,I){const D=this._convertToCellCoord(n),B=this._convertToCellCoord(o),V=this._convertToCellCoord(f),W=this._convertToCellCoord(v);for(let K=D;K<=V;K++)for(let te=B;te<=W;te++){const le=this.d*te+K;if((!I||I(this._convertFromCellCoord(K),this._convertFromCellCoord(te),this._convertFromCellCoord(K+1),this._convertFromCellCoord(te+1)))&&w.call(this,n,o,f,v,le,A,P,I))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,o=3+this.cells.length+1+1;let f=0;for(let A=0;A<this.cells.length;A++)f+=this.cells[A].length;const v=new Int32Array(o+f+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let w=o;for(let A=0;A<n.length;A++){const P=n[A];v[3+A]=w,v.set(P,w),w+=P.length}return v[3+n.length]=w,v.set(this.keys,w),w+=this.keys.length,v[3+n.length+1]=w,v.set(this.bboxes,w),w+=this.bboxes.length,v.buffer}static serialize(n,o){const f=n.toArrayBuffer();return o&&o.push(f),{buffer:f}}static deserialize(n){return new $s(n.buffer)}}const xo={};function Nt(c,n,o={}){if(xo[c])throw new Error(`${c} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:c,writeable:!1}),xo[c]={klass:n,omit:o.omit||[],shallow:o.shallow||[]}}Nt("Object",Object),Nt("Set",Set),Nt("TransferableGridIndex",$s),Nt("Color",xr),Nt("Error",Error),Nt("AJAXError",Pe),Nt("ResolvedImage",ti),Nt("StylePropertyFunction",qo),Nt("StyleExpression",zs,{omit:["_evaluator"]}),Nt("ZoomDependentExpression",Ji),Nt("ZoomConstantExpression",Dl),Nt("CompoundExpression",pa,{omit:["_evaluate"]});for(const c in Il)Il[c]._classRegistryKey||Nt(`Expression_${c}`,Il[c]);function bu(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Ch(c){return c.$name||c.constructor._classRegistryKey}function ps(c){return!function(n){if(n===null||typeof n!="object")return!1;const o=Ch(n);return!(!o||o==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||bu(c)||Wn(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Ic(c,n){if(ps(c))return(bu(c)||Wn(c))&&n&&n.push(c),ArrayBuffer.isView(c)&&n&&n.push(c.buffer),c instanceof ImageData&&n&&n.push(c.data.buffer),c;if(Array.isArray(c)){const w=[];for(const A of c)w.push(Ic(A,n));return w}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);const o=Ch(c);if(!o)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!xo[o])throw new Error(`${o} is not registered.`);const{klass:f}=xo[o],v=f.serialize?f.serialize(c,n):{};if(f.serialize){if(n&&v===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in c){if(!c.hasOwnProperty(w)||xo[o].omit.indexOf(w)>=0)continue;const A=c[w];v[w]=xo[o].shallow.indexOf(w)>=0?A:Ic(A,n)}c instanceof Error&&(v.message=c.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(v.$name=o),v}function qs(c){if(ps(c))return c;if(Array.isArray(c))return c.map(qs);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);const n=Ch(c)||"Object";if(!xo[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:o}=xo[n];if(!o)throw new Error(`can't deserialize unregistered class ${n}`);if(o.deserialize)return o.deserialize(c);const f=Object.create(o.prototype);for(const v of Object.keys(c)){if(v==="$name")continue;const w=c[v];f[v]=xo[n].shallow.indexOf(v)>=0?w:qs(w)}return f}class ka{constructor(){this.first=!0}update(n,o){const f=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=o),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=f,!0))}}const wr={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Hangul Syllables":c=>c>=44032&&c<=55215,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function kc(c){for(const n of c)if(Us(n.charCodeAt(0)))return!0;return!1}function ms(c){for(const n of c)if(!Oh(n.charCodeAt(0)))return!1;return!0}function bo(c){const n=c.map(o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch{return null}}).filter(o=>o);return new RegExp(n.join("|"),"u")}const Fl=bo(["Arab","Dupl","Mong","Ougr","Syrc"]);function Oh(c){return!Fl.test(String.fromCodePoint(c))}const Ih=bo(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Us(c){return!(c!==746&&c!==747&&(c<4352||!(wr["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||wr["CJK Compatibility"](c)||wr["CJK Strokes"](c)||!(!wr["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||wr["Enclosed CJK Letters and Months"](c)||wr["Ideographic Description Characters"](c)||wr.Kanbun(c)||wr.Katakana(c)&&c!==12540||!(!wr["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!wr["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||wr["Vertical Forms"](c)||wr["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||Ih.test(String.fromCodePoint(c)))))}function Nc(c){return!(Us(c)||function(n){return!!(wr["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||wr["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||wr["Letterlike Symbols"](n)||wr["Number Forms"](n)||wr["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||wr["Control Pictures"](n)&&n!==9251||wr["Optical Character Recognition"](n)||wr["Enclosed Alphanumerics"](n)||wr["Geometric Shapes"](n)||wr["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||wr["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||wr["CJK Symbols and Punctuation"](n)||wr.Katakana(n)||wr["Private Use Area"](n)||wr["CJK Compatibility Forms"](n)||wr["Small Form Variants"](n)||wr["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(c))}const qd=bo(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ud(c){return qd.test(String.fromCodePoint(c))}function $l(c,n){return!(!n&&Ud(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||wr.Khmer(c))}function wu(c){for(const n of c)if(Ud(n.charCodeAt(0)))return!0;return!1}const gs=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(gs.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,n){return l(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(c.pluginStatus!=="loading")return this.setState(c),c;const o=c.pluginURL,f=new Promise(w=>{this.loadScriptResolve=w});n(o);const v=new Promise(w=>setTimeout(()=>w(),this.TIMEOUT));if(yield Promise.race([f,v]),this.isParsed()){const w={pluginStatus:"loaded",pluginURL:o};return this.setState(w),w}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${o}`)})}};class an{constructor(n,o){this.isSupportedScript=kh,this.zoom=n,o?(this.now=o.now||0,this.fadeDuration=o.fadeDuration||0,this.zoomHistory=o.zoomHistory||new ka,this.transition=o.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ka,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,o=n-Math.floor(n),f=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*o}}}function kh(c){return function(n,o){for(const f of n)if(!$l(f.charCodeAt(0),o))return!1;return!0}(c,gs.getRTLTextPluginStatus()==="loaded")}class Xa{constructor(n,o,f){this.property=n,this.value=o,this.expression=function(v,w,A){if(Bi(v))return new qo(v,w);if(us(v)){const P=ga(v,w,A);if(P.result==="error")throw new Error(P.value.map(I=>`${I.key}: ${I.message}`).join(", "));return P.value}{let P=v;return w.type==="color"&&typeof v=="string"?P=xr.parse(v):w.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?w.type!=="numberArray"||typeof v!="number"&&!Array.isArray(v)?w.type!=="colorArray"||typeof v!="string"&&!Array.isArray(v)?w.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?P=fi.parse(v):w.type==="projectionDefinition"&&typeof v=="string"&&(P=Li.parse(v)):P=Kn.parse(v):P=di.parse(v):P=hi.parse(v),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>P}}}(o===void 0?n.specification.default:o,n.specification,f)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(n,o,f){return this.property.possiblyEvaluate(this,n,o,f)}}class Sr{constructor(n,o){this.property=n,this.value=new Xa(n,void 0,o)}transitioned(n,o){return new Pn(this.property,this.value,o,ar({},n.transition,this.transition),n.now)}untransitioned(){return new Pn(this.property,this.value,null,{},0)}}class on{constructor(n,o){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues),this._globalState=o}getValue(n){return _t(this._values[n].value.value)}setValue(n,o){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Sr(this._values[n].property,this._globalState)),this._values[n].value=new Xa(this._values[n].property,o===null?void 0:_t(o),this._globalState)}getTransition(n){return _t(this._values[n].transition)}setTransition(n,o){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Sr(this._values[n].property,this._globalState)),this._values[n].transition=_t(o)||void 0}serialize(){const n={};for(const o of Object.keys(this._values)){const f=this.getValue(o);f!==void 0&&(n[o]=f);const v=this.getTransition(o);v!==void 0&&(n[`${o}-transition`]=v)}return n}transitioned(n,o){const f=new Su(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].transitioned(n,o._values[v]);return f}untransitioned(){const n=new Su(this._properties);for(const o of Object.keys(this._values))n._values[o]=this._values[o].untransitioned();return n}}class Pn{constructor(n,o,f,v,w){this.property=n,this.value=o,this.begin=w+v.delay||0,this.end=this.begin+v.duration||0,n.specification.transition&&(v.delay||v.duration)&&(this.prior=f)}possiblyEvaluate(n,o,f){const v=n.now||0,w=this.value.possiblyEvaluate(n,o,f),A=this.prior;if(A){if(v>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(v<this.begin)return A.possiblyEvaluate(n,o,f);{const P=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(A.possiblyEvaluate(n,o,f),w,ct(P))}}return w}}class Su{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,o,f){const v=new ql(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].possiblyEvaluate(n,o,f);return v}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Vs{constructor(n,o){this._properties=n,this._values=Object.create(n.defaultPropertyValues),this._globalState=o}hasValue(n){return this._values[n].value!==void 0}getValue(n){return _t(this._values[n].value)}setValue(n,o){this._values[n]=new Xa(this._values[n].property,o===null?void 0:_t(o),this._globalState)}serialize(){const n={};for(const o of Object.keys(this._values)){const f=this.getValue(o);f!==void 0&&(n[o]=f)}return n}possiblyEvaluate(n,o,f){const v=new ql(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].possiblyEvaluate(n,o,f);return v}}class qi{constructor(n,o,f){this.property=n,this.value=o,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,o,f,v){return this.property.evaluate(this.value,this.parameters,n,o,f,v)}}class ql{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Lt{constructor(n){this.specification=n}possiblyEvaluate(n,o){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(o)}interpolate(n,o,f){const v=da[this.specification.type];return v?v(n,o,f):n}}class Xt{constructor(n,o){this.specification=n,this.overrides=o}possiblyEvaluate(n,o,f,v){return new qi(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(o,null,{},f,v)}:n.expression,o)}interpolate(n,o,f){if(n.value.kind!=="constant"||o.value.kind!=="constant")return n;if(n.value.value===void 0||o.value.value===void 0)return new qi(this,{kind:"constant",value:void 0},n.parameters);const v=da[this.specification.type];if(v){const w=v(n.value.value,o.value.value,f);return new qi(this,{kind:"constant",value:w},n.parameters)}return n}evaluate(n,o,f,v,w,A){return n.kind==="constant"?n.value:n.evaluate(o,f,v,w,A)}}class Rc extends Xt{possiblyEvaluate(n,o,f,v){if(n.value===void 0)return new qi(this,{kind:"constant",value:void 0},o);if(n.expression.kind==="constant"){const w=n.expression.evaluate(o,null,{},f,v),A=n.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,P=this._calculate(A,A,A,o);return new qi(this,{kind:"constant",value:P},o)}if(n.expression.kind==="camera"){const w=this._calculate(n.expression.evaluate({zoom:o.zoom-1}),n.expression.evaluate({zoom:o.zoom}),n.expression.evaluate({zoom:o.zoom+1}),o);return new qi(this,{kind:"constant",value:w},o)}return new qi(this,n.expression,o)}evaluate(n,o,f,v,w,A){if(n.kind==="source"){const P=n.evaluate(o,f,v,w,A);return this._calculate(P,P,P,o)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(o.zoom)-1},f,v),n.evaluate({zoom:Math.floor(o.zoom)},f,v),n.evaluate({zoom:Math.floor(o.zoom)+1},f,v),o):n.value}_calculate(n,o,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:n,to:o}:{from:f,to:o}}interpolate(n){return n}}class Fn{constructor(n){this.specification=n}possiblyEvaluate(n,o,f,v){if(n.value!==void 0){if(n.expression.kind==="constant"){const w=n.expression.evaluate(o,null,{},f,v);return this._calculate(w,w,w,o)}return this._calculate(n.expression.evaluate(new an(Math.floor(o.zoom-1),o)),n.expression.evaluate(new an(Math.floor(o.zoom),o)),n.expression.evaluate(new an(Math.floor(o.zoom+1),o)),o)}}_calculate(n,o,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:n,to:o}:{from:f,to:o}}interpolate(n){return n}}class Dc{constructor(n){this.specification=n}possiblyEvaluate(n,o,f,v){return!!n.expression.evaluate(o,null,{},f,v)}interpolate(){return!1}}class ji{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in n){const f=n[o];f.specification.overridable&&this.overridableProperties.push(o);const v=this.defaultPropertyValues[o]=new Xa(f,void 0,void 0),w=this.defaultTransitionablePropertyValues[o]=new Sr(f,void 0);this.defaultTransitioningPropertyValues[o]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=v.possiblyEvaluate({})}}}Nt("DataDrivenProperty",Xt),Nt("DataConstantProperty",Lt),Nt("CrossFadedDataDrivenProperty",Rc),Nt("CrossFadedProperty",Fn),Nt("ColorRampProperty",Dc);const Vd="-transition";class Wa extends Ht{constructor(n,o,f){if(super(),this.id=n.id,this.type=n.type,this._globalState=f,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter,this._featureFilter=zl(n.filter,f)),o.layout&&(this._unevaluatedLayout=new Vs(o.layout,f)),o.paint)){this._transitionablePaint=new on(o.paint,f);for(const v in n.paint)this.setPaintProperty(v,n.paint[v],{validate:!1});for(const v in n.layout)this.setLayoutProperty(v,n.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ql(o.paint)}}setFilter(n){this.filter=n,this._featureFilter=zl(n,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}getLayoutAffectingGlobalStateRefs(){const n=new Set;if(this._unevaluatedLayout)for(const o in this._unevaluatedLayout._values){const f=this._unevaluatedLayout._values[o];for(const v of f.getGlobalStateRefs())n.add(v)}for(const o of this._featureFilter.getGlobalStateRefs())n.add(o);return n}getPaintAffectingGlobalStateRefs(){var n;const o=new globalThis.Map;if(this._transitionablePaint)for(const f in this._transitionablePaint._values){const v=this._transitionablePaint._values[f].value;for(const w of v.getGlobalStateRefs()){const A=(n=o.get(w))!==null&&n!==void 0?n:[];A.push({name:f,value:v.value}),o.set(w,A)}}return o}setLayoutProperty(n,o,f={}){o!=null&&this._validate(fs,`layers.${this.id}.layout.${n}`,n,o,f)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,o):this.visibility=o)}getPaintProperty(n){return n.endsWith(Vd)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,o,f={}){if(o!=null&&this._validate(ip,`layers.${this.id}.paint.${n}`,n,o,f))return!1;if(n.endsWith(Vd))return this._transitionablePaint.setTransition(n.slice(0,-11),o||void 0),!1;{const v=this._transitionablePaint._values[n],w=v.property.specification["property-type"]==="cross-faded-data-driven",A=v.value.isDataDriven(),P=v.value;this._transitionablePaint.setValue(n,o),this._handleSpecialPaintPropertyUpdate(n);const I=this._transitionablePaint._values[n].value;return I.isDataDriven()||A||w||this._handleOverridablePaintPropertyUpdate(n,P,I)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,o,f){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,o){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,o)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),or(n,(o,f)=>!(o===void 0||f==="layout"&&!Object.keys(o).length||f==="paint"&&!Object.keys(o).length))}_validate(n,o,f,v,w={}){return(!w||w.validate!==!1)&&$d(this,n.call(_a,{key:o,layerType:this.type,objectKey:f,value:v,styleSpec:Ve,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const o=this.paint.get(n);if(o instanceof qi&&Nl(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}let Ul;var Gd={get paint(){return Ul=Ul||new ji({"raster-opacity":new Lt(Ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new Lt(Ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Lt(Ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Lt(Ve.paint_raster["raster-brightness-max"]),"raster-saturation":new Lt(Ve.paint_raster["raster-saturation"]),"raster-contrast":new Lt(Ve.paint_raster["raster-contrast"]),"raster-resampling":new Lt(Ve.paint_raster["raster-resampling"]),"raster-fade-duration":new Lt(Ve.paint_raster["raster-fade-duration"])})}};class Zd extends Wa{constructor(n,o){super(n,Gd,o)}}const Hd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class gi{constructor(n,o){this._structArray=n,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class _r{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,o){return n._trim(),o&&(n.isTransferred=!0,o.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const o=Object.create(this.prototype);return o.arrayBuffer=n.arrayBuffer,o.length=n.length,o.capacity=n.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function En(c,n=1){let o=0,f=0;return{members:c.map(v=>{const w=Hd[v.type].BYTES_PER_ELEMENT,A=o=Ya(o,Math.max(n,w)),P=v.components||1;return f=Math.max(f,w),o+=w*P,{name:v.name,type:v.type,components:P,offset:A}}),size:Ya(o,Math.max(f,n)),alignment:n}}function Ya(c,n){return Math.ceil(c/n)*n}class ys extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o){const f=this.length;return this.resize(f+1),this.emplace(f,n,o)}emplace(n,o,f){const v=2*n;return this.int16[v+0]=o,this.int16[v+1]=f,n}}ys.prototype.bytesPerElement=4,Nt("StructArrayLayout2i4",ys);class Gs extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,f)}emplace(n,o,f,v){const w=3*n;return this.int16[w+0]=o,this.int16[w+1]=f,this.int16[w+2]=v,n}}Gs.prototype.bytesPerElement=6,Nt("StructArrayLayout3i6",Gs);class Ka extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,n,o,f,v)}emplace(n,o,f,v,w){const A=4*n;return this.int16[A+0]=o,this.int16[A+1]=f,this.int16[A+2]=v,this.int16[A+3]=w,n}}Ka.prototype.bytesPerElement=8,Nt("StructArrayLayout4i8",Ka);class Zs extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,f,v,w,A){const P=this.length;return this.resize(P+1),this.emplace(P,n,o,f,v,w,A)}emplace(n,o,f,v,w,A,P){const I=6*n;return this.int16[I+0]=o,this.int16[I+1]=f,this.int16[I+2]=v,this.int16[I+3]=w,this.int16[I+4]=A,this.int16[I+5]=P,n}}Zs.prototype.bytesPerElement=12,Nt("StructArrayLayout2i4i12",Zs);class Tu extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,f,v,w,A){const P=this.length;return this.resize(P+1),this.emplace(P,n,o,f,v,w,A)}emplace(n,o,f,v,w,A,P){const I=4*n,D=8*n;return this.int16[I+0]=o,this.int16[I+1]=f,this.uint8[D+4]=v,this.uint8[D+5]=w,this.uint8[D+6]=A,this.uint8[D+7]=P,n}}Tu.prototype.bytesPerElement=8,Nt("StructArrayLayout2i4ub8",Tu);class Ho extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o){const f=this.length;return this.resize(f+1),this.emplace(f,n,o)}emplace(n,o,f){const v=2*n;return this.float32[v+0]=o,this.float32[v+1]=f,n}}Ho.prototype.bytesPerElement=8,Nt("StructArrayLayout2f8",Ho);class Hs extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,f,v,w,A,P,I,D,B){const V=this.length;return this.resize(V+1),this.emplace(V,n,o,f,v,w,A,P,I,D,B)}emplace(n,o,f,v,w,A,P,I,D,B,V){const W=10*n;return this.uint16[W+0]=o,this.uint16[W+1]=f,this.uint16[W+2]=v,this.uint16[W+3]=w,this.uint16[W+4]=A,this.uint16[W+5]=P,this.uint16[W+6]=I,this.uint16[W+7]=D,this.uint16[W+8]=B,this.uint16[W+9]=V,n}}Hs.prototype.bytesPerElement=20,Nt("StructArrayLayout10ui20",Hs);class Nh extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,f,v,w,A,P,I){const D=this.length;return this.resize(D+1),this.emplace(D,n,o,f,v,w,A,P,I)}emplace(n,o,f,v,w,A,P,I,D){const B=8*n;return this.uint16[B+0]=o,this.uint16[B+1]=f,this.uint16[B+2]=v,this.uint16[B+3]=w,this.uint16[B+4]=A,this.uint16[B+5]=P,this.uint16[B+6]=I,this.uint16[B+7]=D,n}}Nh.prototype.bytesPerElement=16,Nt("StructArrayLayout8ui16",Nh);class Au extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,f,v,w,A,P,I,D,B,V,W){const K=this.length;return this.resize(K+1),this.emplace(K,n,o,f,v,w,A,P,I,D,B,V,W)}emplace(n,o,f,v,w,A,P,I,D,B,V,W,K){const te=12*n;return this.int16[te+0]=o,this.int16[te+1]=f,this.int16[te+2]=v,this.int16[te+3]=w,this.uint16[te+4]=A,this.uint16[te+5]=P,this.uint16[te+6]=I,this.uint16[te+7]=D,this.int16[te+8]=B,this.int16[te+9]=V,this.int16[te+10]=W,this.int16[te+11]=K,n}}Au.prototype.bytesPerElement=24,Nt("StructArrayLayout4i4ui4i24",Au);class Xs extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,f)}emplace(n,o,f,v){const w=3*n;return this.float32[w+0]=o,this.float32[w+1]=f,this.float32[w+2]=v,n}}Xs.prototype.bytesPerElement=12,Nt("StructArrayLayout3f12",Xs);class Rh extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint32[1*n+0]=o,n}}Rh.prototype.bytesPerElement=4,Nt("StructArrayLayout1ul4",Rh);class Dh extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,f,v,w,A,P,I,D){const B=this.length;return this.resize(B+1),this.emplace(B,n,o,f,v,w,A,P,I,D)}emplace(n,o,f,v,w,A,P,I,D,B){const V=10*n,W=5*n;return this.int16[V+0]=o,this.int16[V+1]=f,this.int16[V+2]=v,this.int16[V+3]=w,this.int16[V+4]=A,this.int16[V+5]=P,this.uint32[W+3]=I,this.uint16[V+8]=D,this.uint16[V+9]=B,n}}Dh.prototype.bytesPerElement=20,Nt("StructArrayLayout6i1ul2ui20",Dh);class zc extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,f,v,w,A){const P=this.length;return this.resize(P+1),this.emplace(P,n,o,f,v,w,A)}emplace(n,o,f,v,w,A,P){const I=6*n;return this.int16[I+0]=o,this.int16[I+1]=f,this.int16[I+2]=v,this.int16[I+3]=w,this.int16[I+4]=A,this.int16[I+5]=P,n}}zc.prototype.bytesPerElement=12,Nt("StructArrayLayout2i2i2i12",zc);class zh extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,f,v,w){const A=this.length;return this.resize(A+1),this.emplace(A,n,o,f,v,w)}emplace(n,o,f,v,w,A){const P=4*n,I=8*n;return this.float32[P+0]=o,this.float32[P+1]=f,this.float32[P+2]=v,this.int16[I+6]=w,this.int16[I+7]=A,n}}zh.prototype.bytesPerElement=16,Nt("StructArrayLayout2f1f2i16",zh);class b extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,f,v,w,A){const P=this.length;return this.resize(P+1),this.emplace(P,n,o,f,v,w,A)}emplace(n,o,f,v,w,A,P){const I=16*n,D=4*n,B=8*n;return this.uint8[I+0]=o,this.uint8[I+1]=f,this.float32[D+1]=v,this.float32[D+2]=w,this.int16[B+6]=A,this.int16[B+7]=P,n}}b.prototype.bytesPerElement=16,Nt("StructArrayLayout2ub2f2i16",b);class r extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,f)}emplace(n,o,f,v){const w=3*n;return this.uint16[w+0]=o,this.uint16[w+1]=f,this.uint16[w+2]=v,n}}r.prototype.bytesPerElement=6,Nt("StructArrayLayout3ui6",r);class u extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,f,v,w,A,P,I,D,B,V,W,K,te,le,de,ve){const Be=this.length;return this.resize(Be+1),this.emplace(Be,n,o,f,v,w,A,P,I,D,B,V,W,K,te,le,de,ve)}emplace(n,o,f,v,w,A,P,I,D,B,V,W,K,te,le,de,ve,Be){const Me=24*n,Ce=12*n,Ke=48*n;return this.int16[Me+0]=o,this.int16[Me+1]=f,this.uint16[Me+2]=v,this.uint16[Me+3]=w,this.uint32[Ce+2]=A,this.uint32[Ce+3]=P,this.uint32[Ce+4]=I,this.uint16[Me+10]=D,this.uint16[Me+11]=B,this.uint16[Me+12]=V,this.float32[Ce+7]=W,this.float32[Ce+8]=K,this.uint8[Ke+36]=te,this.uint8[Ke+37]=le,this.uint8[Ke+38]=de,this.uint32[Ce+10]=ve,this.int16[Me+22]=Be,n}}u.prototype.bytesPerElement=48,Nt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",u);class p extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,f,v,w,A,P,I,D,B,V,W,K,te,le,de,ve,Be,Me,Ce,Ke,ot,gt,Pt,Mt,Ct,Ut,It){const kt=this.length;return this.resize(kt+1),this.emplace(kt,n,o,f,v,w,A,P,I,D,B,V,W,K,te,le,de,ve,Be,Me,Ce,Ke,ot,gt,Pt,Mt,Ct,Ut,It)}emplace(n,o,f,v,w,A,P,I,D,B,V,W,K,te,le,de,ve,Be,Me,Ce,Ke,ot,gt,Pt,Mt,Ct,Ut,It,kt){const ft=32*n,nr=16*n;return this.int16[ft+0]=o,this.int16[ft+1]=f,this.int16[ft+2]=v,this.int16[ft+3]=w,this.int16[ft+4]=A,this.int16[ft+5]=P,this.int16[ft+6]=I,this.int16[ft+7]=D,this.uint16[ft+8]=B,this.uint16[ft+9]=V,this.uint16[ft+10]=W,this.uint16[ft+11]=K,this.uint16[ft+12]=te,this.uint16[ft+13]=le,this.uint16[ft+14]=de,this.uint16[ft+15]=ve,this.uint16[ft+16]=Be,this.uint16[ft+17]=Me,this.uint16[ft+18]=Ce,this.uint16[ft+19]=Ke,this.uint16[ft+20]=ot,this.uint16[ft+21]=gt,this.uint16[ft+22]=Pt,this.uint32[nr+12]=Mt,this.float32[nr+13]=Ct,this.float32[nr+14]=Ut,this.uint16[ft+30]=It,this.uint16[ft+31]=kt,n}}p.prototype.bytesPerElement=64,Nt("StructArrayLayout8i15ui1ul2f2ui64",p);class _ extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.float32[1*n+0]=o,n}}_.prototype.bytesPerElement=4,Nt("StructArrayLayout1f4",_);class S extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,f)}emplace(n,o,f,v){const w=3*n;return this.uint16[6*n+0]=o,this.float32[w+1]=f,this.float32[w+2]=v,n}}S.prototype.bytesPerElement=12,Nt("StructArrayLayout1ui2f12",S);class j extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,f)}emplace(n,o,f,v){const w=4*n;return this.uint32[2*n+0]=o,this.uint16[w+2]=f,this.uint16[w+3]=v,n}}j.prototype.bytesPerElement=8,Nt("StructArrayLayout1ul2ui8",j);class k extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o){const f=this.length;return this.resize(f+1),this.emplace(f,n,o)}emplace(n,o,f){const v=2*n;return this.uint16[v+0]=o,this.uint16[v+1]=f,n}}k.prototype.bytesPerElement=4,Nt("StructArrayLayout2ui4",k);class R extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint16[1*n+0]=o,n}}R.prototype.bytesPerElement=2,Nt("StructArrayLayout1ui2",R);class $ extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,n,o,f,v)}emplace(n,o,f,v,w){const A=4*n;return this.float32[A+0]=o,this.float32[A+1]=f,this.float32[A+2]=v,this.float32[A+3]=w,n}}$.prototype.bytesPerElement=16,Nt("StructArrayLayout4f16",$);class U extends gi{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new M(this.anchorPointX,this.anchorPointY)}}U.prototype.size=20;class X extends Dh{get(n){return new U(this,n)}}Nt("CollisionBoxArray",X);class Z extends gi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Z.prototype.size=48;class Q extends u{get(n){return new Z(this,n)}}Nt("PlacedSymbolArray",Q);class se extends gi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}se.prototype.size=64;class me extends p{get(n){return new se(this,n)}}Nt("SymbolInstanceArray",me);class pe extends _{getoffsetX(n){return this.float32[1*n+0]}}Nt("GlyphOffsetArray",pe);class ye extends Gs{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Nt("SymbolLineVertexArray",ye);class _e extends gi{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}_e.prototype.size=12;class Ae extends S{get(n){return new _e(this,n)}}Nt("TextAnchorOffsetArray",Ae);class be extends gi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}be.prototype.size=8;class Ee extends j{get(n){return new be(this,n)}}Nt("FeatureIndexArray",Ee);class Ie extends ys{}class we extends ys{}class De extends ys{}class it extends Zs{}class Ye extends Tu{}class Qe extends Ho{}class Je extends Hs{}class Tt extends Nh{}class At extends Au{}class yt extends Xs{}class Bt extends Rh{}class lr extends zc{}class Xr extends b{}class Wr extends r{}class cn extends k{}const Cn=En([{name:"a_pos",components:2,type:"Int16"}],4),{members:un}=Cn;class Tr{constructor(n=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=n}prepareSegment(n,o,f,v){const w=this.segments[this.segments.length-1];return n>Tr.MAX_VERTEX_ARRAY_LENGTH&&Jt(`Max vertices per segment is ${Tr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Tr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!w||w.vertexLength+n>Tr.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==v?this.createNewSegment(o,f,v):w}createNewSegment(n,o,f){const v={vertexOffset:n.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(v.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(v),v}getOrCreateLatestSegment(n,o,f){return this.prepareSegment(0,n,o,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const n of this.segments)for(const o in n.vaos)n.vaos[o].destroy()}static simpleSegment(n,o,f,v){return new Tr([{vertexOffset:n,primitiveOffset:o,vertexLength:f,primitiveLength:v,vaos:{},sortKey:0}])}}function pn(c,n){return 256*(c=zt(Math.floor(c),0,255))+zt(Math.floor(n),0,255)}Tr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Nt("SegmentVector",Tr);const ai=En([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),$n=En([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var qn,wi,vs,Qa={exports:{}},Ws={exports:{}},Ja={exports:{}},Ys=function(){if(vs)return Qa.exports;vs=1;var c=(qn||(qn=1,Ws.exports=function(o,f){var v,w,A,P,I,D,B,V;for(w=o.length-(v=3&o.length),A=f,I=3432918353,D=461845907,V=0;V<w;)B=255&o.charCodeAt(V)|(255&o.charCodeAt(++V))<<8|(255&o.charCodeAt(++V))<<16|(255&o.charCodeAt(++V))<<24,++V,A=27492+(65535&(P=5*(65535&(A=(A^=B=(65535&(B=(B=(65535&B)*I+(((B>>>16)*I&65535)<<16)&4294967295)<<15|B>>>17))*D+(((B>>>16)*D&65535)<<16)&4294967295)<<13|A>>>19))+((5*(A>>>16)&65535)<<16)&4294967295))+((58964+(P>>>16)&65535)<<16);switch(B=0,v){case 3:B^=(255&o.charCodeAt(V+2))<<16;case 2:B^=(255&o.charCodeAt(V+1))<<8;case 1:A^=B=(65535&(B=(B=(65535&(B^=255&o.charCodeAt(V)))*I+(((B>>>16)*I&65535)<<16)&4294967295)<<15|B>>>17))*D+(((B>>>16)*D&65535)<<16)&4294967295}return A^=o.length,A=2246822507*(65535&(A^=A>>>16))+((2246822507*(A>>>16)&65535)<<16)&4294967295,A=3266489909*(65535&(A^=A>>>13))+((3266489909*(A>>>16)&65535)<<16)&4294967295,(A^=A>>>16)>>>0}),Ws.exports),n=(wi||(wi=1,Ja.exports=function(o,f){for(var v,w=o.length,A=f^w,P=0;w>=4;)v=1540483477*(65535&(v=255&o.charCodeAt(P)|(255&o.charCodeAt(++P))<<8|(255&o.charCodeAt(++P))<<16|(255&o.charCodeAt(++P))<<24))+((1540483477*(v>>>16)&65535)<<16),A=1540483477*(65535&A)+((1540483477*(A>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),w-=4,++P;switch(w){case 3:A^=(255&o.charCodeAt(P+2))<<16;case 2:A^=(255&o.charCodeAt(P+1))<<8;case 1:A=1540483477*(65535&(A^=255&o.charCodeAt(P)))+((1540483477*(A>>>16)&65535)<<16)}return A=1540483477*(65535&(A^=A>>>13))+((1540483477*(A>>>16)&65535)<<16),(A^=A>>>15)>>>0}),Ja.exports);return Qa.exports=c,Qa.exports.murmur3=c,Qa.exports.murmur2=n,Qa.exports}(),_s=E(Ys);class Na{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,o,f,v){this.ids.push(Ui(n)),this.positions.push(o,f,v)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=Ui(n);let f=0,v=this.ids.length-1;for(;f<v;){const A=f+v>>1;this.ids[A]>=o?v=A:f=A+1}const w=[];for(;this.ids[f]===o;)w.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return w}static serialize(n,o){const f=new Float64Array(n.ids),v=new Uint32Array(n.positions);return wo(f,v,0,f.length-1),o&&o.push(f.buffer,v.buffer),{ids:f,positions:v}}static deserialize(n){const o=new Na;return o.ids=n.ids,o.positions=n.positions,o.indexed=!0,o}}function Ui(c){const n=+c;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:_s(String(c))}function wo(c,n,o,f){for(;o<f;){const v=c[o+f>>1];let w=o-1,A=f+1;for(;;){do w++;while(c[w]<v);do A--;while(c[A]>v);if(w>=A)break;So(c,w,A),So(n,3*w,3*A),So(n,3*w+1,3*A+1),So(n,3*w+2,3*A+2)}A-o<f-A?(wo(c,n,o,A),o=A+1):(wo(c,n,A+1,f),f=A)}}function So(c,n,o){const f=c[n];c[n]=c[o],c[o]=f}Nt("FeaturePositionMap",Na);class Si{constructor(n,o){this.gl=n.gl,this.location=o}}class Rn extends Si{constructor(n,o){super(n,o),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class sn extends Si{constructor(n,o){super(n,o),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Un extends Si{constructor(n,o){super(n,o),this.current=xr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Tn=new Float32Array(16);function Lh(c){return[pn(255*c.r,255*c.g),pn(255*c.b,255*c.a)]}class eo{constructor(n,o,f){this.value=n,this.uniformNames=o.map(v=>`u_${v}`),this.type=f}setUniform(n,o,f){n.set(f.constantOr(this.value))}getBinding(n,o,f){return this.type==="color"?new Un(n,o):new Rn(n,o)}}class ta{constructor(n,o){this.uniformNames=o.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=n.tlbr}setConstantDashPositions(n,o){this.dashTo=[0,n.y,n.height,n.width],this.dashFrom=[0,o.y,o.height,o.width]}setUniform(n,o,f,v){let w=null;v==="u_pattern_to"?w=this.patternTo:v==="u_pattern_from"?w=this.patternFrom:v==="u_dasharray_to"?w=this.dashTo:v==="u_dasharray_from"?w=this.dashFrom:v==="u_pixel_ratio_to"?w=this.pixelRatioTo:v==="u_pixel_ratio_from"&&(w=this.pixelRatioFrom),w!==null&&n.set(w)}getBinding(n,o,f){return f.substr(0,9)==="u_pattern"||f.substr(0,12)==="u_dasharray_"?new sn(n,o):new Rn(n,o)}}class mn{constructor(n,o,f,v){this.expression=n,this.type=f,this.maxValue=0,this.paintVertexAttributes=o.map(w=>({name:`a_${w}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(n,o,f){const v=this.paintVertexArray.length,w=this.expression.evaluate(new an(0,f),o,{},f.canonical,[],f.formattedSection);this.paintVertexArray.resize(n),this._setPaintValue(v,n,w)}updatePaintArray(n,o,f,v,w){const A=this.expression.evaluate(new an(0,w),f,v);this._setPaintValue(n,o,A)}_setPaintValue(n,o,f){if(this.type==="color"){const v=Lh(f);for(let w=n;w<o;w++)this.paintVertexArray.emplace(w,v[0],v[1])}else{for(let v=n;v<o;v++)this.paintVertexArray.emplace(v,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class xa{constructor(n,o,f,v,w,A){this.expression=n,this.uniformNames=o.map(P=>`u_${P}_t`),this.type=f,this.useIntegerZoom=v,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=o.map(P=>({name:`a_${P}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new A}populatePaintArray(n,o,f){const v=this.expression.evaluate(new an(this.zoom,f),o,{},f.canonical,[],f.formattedSection),w=this.expression.evaluate(new an(this.zoom+1,f),o,{},f.canonical,[],f.formattedSection),A=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(A,n,v,w)}updatePaintArray(n,o,f,v,w){const A=this.expression.evaluate(new an(this.zoom,w),f,v),P=this.expression.evaluate(new an(this.zoom+1,w),f,v);this._setPaintValue(n,o,A,P)}_setPaintValue(n,o,f,v){if(this.type==="color"){const w=Lh(f),A=Lh(v);for(let P=n;P<o;P++)this.paintVertexArray.emplace(P,w[0],w[1],A[0],A[1])}else{for(let w=n;w<o;w++)this.paintVertexArray.emplace(w,f,v);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(v))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,o){const f=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,v=zt(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);n.set(v)}getBinding(n,o,f){return new Rn(n,o)}}class Xo{constructor(n,o,f,v,w,A){this.expression=n,this.type=o,this.useIntegerZoom=f,this.zoom=v,this.layerId=A,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(n,o,f){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(v,n,this.getPositionIds(o),f)}updatePaintArray(n,o,f,v,w){this._setPaintValues(n,o,this.getPositionIds(f),w)}_setPaintValues(n,o,f,v){const w=this.getPositions(v);if(!w||!f)return;const A=w[f.min],P=w[f.mid],I=w[f.max];if(A&&P&&I)for(let D=n;D<o;D++)this.emplace(this.zoomInPaintVertexArray,D,P,A),this.emplace(this.zoomOutPaintVertexArray,D,P,I)}upload(n){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const o=this.getVertexAttributes();this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,o,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,o,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Wo extends Xo{getPositions(n){return n.imagePositions}getPositionIds(n){return n.patterns&&n.patterns[this.layerId]}getVertexAttributes(){return ai.members}emplace(n,o,f,v){n.emplace(o,f.tlbr[0],f.tlbr[1],f.tlbr[2],f.tlbr[3],v.tlbr[0],v.tlbr[1],v.tlbr[2],v.tlbr[3],f.pixelRatio,v.pixelRatio)}}class Bh extends Xo{getPositions(n){return n.dashPositions}getPositionIds(n){return n.dashes&&n.dashes[this.layerId]}getVertexAttributes(){return $n.members}emplace(n,o,f,v){n.emplace(o,0,f.y,f.height,f.width,0,v.y,v.height,v.width)}}class Fh{constructor(n,o,f){this.binders={},this._buffers=[];const v=[];for(const w in n.paint._values){if(!f(w))continue;const A=n.paint.get(w);if(!(A instanceof qi&&Nl(A.property.specification)))continue;const P=Lc(w,n.type),I=A.value,D=A.property.specification.type,B=A.property.useIntegerZoom,V=A.property.specification["property-type"],W=V==="cross-faded"||V==="cross-faded-data-driven";if(I.kind==="constant")this.binders[w]=W?new ta(I.value,P):new eo(I.value,P,D),v.push(`/u_${w}`);else if(I.kind==="source"||W){const K=$h(w,D,"source");this.binders[w]=W?w==="line-dasharray"?new Bh(I,D,B,o,K,n.id):new Wo(I,D,B,o,K,n.id):new mn(I,P,D,K),v.push(`/a_${w}`)}else{const K=$h(w,D,"composite");this.binders[w]=new xa(I,P,D,B,o,K),v.push(`/z_${w}`)}}this.cacheKey=v.sort().join("")}getMaxValue(n){const o=this.binders[n];return o instanceof mn||o instanceof xa?o.maxValue:0}populatePaintArrays(n,o,f){for(const v in this.binders){const w=this.binders[v];(w instanceof mn||w instanceof xa||w instanceof Xo)&&w.populatePaintArray(n,o,f)}}setConstantPatternPositions(n,o){for(const f in this.binders){const v=this.binders[f];v instanceof ta&&v.setConstantPatternPositions(n,o)}}setConstantDashPositions(n,o){for(const f in this.binders){const v=this.binders[f];v instanceof ta&&v.setConstantDashPositions(n,o)}}updatePaintArrays(n,o,f,v,w){let A=!1;for(const P in n){const I=o.getPositions(P);for(const D of I){const B=f.feature(D.index);for(const V in this.binders){const W=this.binders[V];if((W instanceof mn||W instanceof xa||W instanceof Xo)&&W.expression.isStateDependent===!0){const K=v.paint.get(V);W.expression=K.value,W.updatePaintArray(D.start,D.end,B,n[P],w),A=!0}}}}return A}defines(){const n=[];for(const o in this.binders){const f=this.binders[o];(f instanceof eo||f instanceof ta)&&n.push(...f.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return n}getBinderAttributes(){const n=[];for(const o in this.binders){const f=this.binders[o];if(f instanceof mn||f instanceof xa)for(let v=0;v<f.paintVertexAttributes.length;v++)n.push(f.paintVertexAttributes[v].name);else if(f instanceof Xo){const v=f.getVertexAttributes();for(const w of v)n.push(w.name)}}return n}getBinderUniforms(){const n=[];for(const o in this.binders){const f=this.binders[o];if(f instanceof eo||f instanceof ta||f instanceof xa)for(const v of f.uniformNames)n.push(v)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,o){const f=[];for(const v in this.binders){const w=this.binders[v];if(w instanceof eo||w instanceof ta||w instanceof xa){for(const A of w.uniformNames)if(o[A]){const P=w.getBinding(n,o[A],A);f.push({name:A,property:v,binding:P})}}}return f}setUniforms(n,o,f,v){for(const{name:w,property:A,binding:P}of o)this.binders[A].setUniform(P,v,f.get(A),w)}updatePaintBuffers(n){this._buffers=[];for(const o in this.binders){const f=this.binders[o];if(n&&f instanceof Xo){const v=n.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(f instanceof mn||f instanceof xa)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(n){for(const o in this.binders){const f=this.binders[o];(f instanceof mn||f instanceof xa||f instanceof Xo)&&f.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const o=this.binders[n];(o instanceof mn||o instanceof xa||o instanceof Xo)&&o.destroy()}}}class ba{constructor(n,o,f=()=>!0){this.programConfigurations={};for(const v of n)this.programConfigurations[v.id]=new Fh(v,o,f);this.needsUpload=!1,this._featureMap=new Na,this._bufferOffset=0}populatePaintArrays(n,o,f,v){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(n,o,v);o.id!==void 0&&this._featureMap.add(o.id,f,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,o,f,v){for(const w of f)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(n,this._featureMap,o,w,v)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Lc(c,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${n}-`,"").replace(/-/g,"_")]}function $h(c,n,o){const f={color:{source:Ho,composite:$},number:{source:_,composite:Ho}},v=function(w){return{"line-pattern":{source:Je,composite:Je},"fill-pattern":{source:Je,composite:Je},"fill-extrusion-pattern":{source:Je,composite:Je},"line-dasharray":{source:Tt,composite:Tt}}[w]}(c);return v&&v[o]||f[n][o]}Nt("ConstantBinder",eo),Nt("CrossFadedConstantBinder",ta),Nt("SourceExpressionBinder",mn),Nt("CrossFadedPatternBinder",Wo),Nt("CrossFadedDasharrayBinder",Bh),Nt("CompositeExpressionBinder",xa),Nt("ProgramConfiguration",Fh,{omit:["_buffers"]}),Nt("ProgramConfigurationSet",ba);const Bc=Math.pow(2,14)-1,Um=-Bc-1;function Ks(c){const n=dt/c.extent,o=c.loadGeometry();for(let f=0;f<o.length;f++){const v=o[f];for(let w=0;w<v.length;w++){const A=v[w],P=Math.round(A.x*n),I=Math.round(A.y*n);A.x=zt(P,Um,Bc),A.y=zt(I,Um,Bc),(P<A.x||P>A.x+1||I<A.y||I>A.y+1)&&Jt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function Fc(c,n){return{type:c.type,id:c.id,properties:c.properties,geometry:n?Ks(c):[]}}const ap=-32768;function Yy(c,n,o,f,v){c.emplaceBack(ap+8*n+f,ap+8*o+v)}class op{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasDependencies=!1,this.layoutVertexArray=new we,this.indexArray=new Wr,this.segments=new Tr,this.programConfigurations=new ba(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,f){const v=this.layers[0],w=[];let A=null,P=!1,I=v.type==="heatmap";if(v.type==="circle"){const B=v;A=B.layout.get("circle-sort-key"),P=!A.isConstant(),I=I||B.paint.get("circle-pitch-alignment")==="map"}const D=I?o.subdivisionGranularity.circle:1;for(const{feature:B,id:V,index:W,sourceLayerIndex:K}of n){const te=this.layers[0]._featureFilter.needGeometry,le=Fc(B,te);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),le,f))continue;const de=P?A.evaluate(le,{},f):void 0,ve={id:V,properties:B.properties,type:B.type,sourceLayerIndex:K,index:W,geometry:te?le.geometry:Ks(B),patterns:{},sortKey:de};w.push(ve)}P&&w.sort((B,V)=>B.sortKey-V.sortKey);for(const B of w){const{geometry:V,index:W,sourceLayerIndex:K}=B,te=n[W].feature;this.addFeature(B,V,W,f,D),o.featureIndex.insert(te,V,W,K,this.index)}}update(n,o,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,un),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,o,f,v,w=1){let A;switch(w){case 1:A=[0,7];break;case 3:A=[0,2,5,7];break;case 5:A=[0,1,3,4,6,7];break;case 7:A=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${w}; valid values are 1, 3, 5, 7.`)}const P=A.length;for(const I of o)for(const D of I){const B=D.x,V=D.y;if(B<0||B>=dt||V<0||V>=dt)continue;const W=this.segments.prepareSegment(P*P,this.layoutVertexArray,this.indexArray,n.sortKey),K=W.vertexLength;for(let te=0;te<P;te++)for(let le=0;le<P;le++)Yy(this.layoutVertexArray,B,V,A[le],A[te]);for(let te=0;te<P-1;te++)for(let le=0;le<P-1;le++){const de=K+te*P+le,ve=K+(te+1)*P+le;this.indexArray.emplaceBack(de,ve+1,de+1),this.indexArray.emplaceBack(de,ve,ve+1)}W.vertexLength+=P*P,W.primitiveLength+=(P-1)*(P-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:{},canonical:v})}}function Ky(c,n){for(let o=0;o<c.length;o++)if(Vl(n,c[o]))return!0;for(let o=0;o<n.length;o++)if(Vl(c,n[o]))return!0;return!!sp(c,n)}function Xd(c,n,o){return!!Vl(c,n)||!!lp(n,c,o)}function Pi(c,n){if(c.length===1)return Gm(n,c[0]);for(let o=0;o<n.length;o++){const f=n[o];for(let v=0;v<f.length;v++)if(Vl(c,f[v]))return!0}for(let o=0;o<c.length;o++)if(Gm(n,c[o]))return!0;for(let o=0;o<n.length;o++)if(sp(c,n[o]))return!0;return!1}function ra(c,n,o){if(c.length>1){if(sp(c,n))return!0;for(let f=0;f<n.length;f++)if(lp(n[f],c,o))return!0}for(let f=0;f<c.length;f++)if(lp(c[f],n,o))return!0;return!1}function sp(c,n){if(c.length===0||n.length===0)return!1;for(let o=0;o<c.length-1;o++){const f=c[o],v=c[o+1];for(let w=0;w<n.length-1;w++)if(Qy(f,v,n[w],n[w+1]))return!0}return!1}function Qy(c,n,o,f){return Kr(c,o,f)!==Kr(n,o,f)&&Kr(c,n,o)!==Kr(c,n,f)}function lp(c,n,o){const f=o*o;if(n.length===1)return c.distSqr(n[0])<f;for(let v=1;v<n.length;v++)if(Vm(c,n[v-1],n[v])<f)return!0;return!1}function Vm(c,n,o){const f=n.distSqr(o);if(f===0)return c.distSqr(n);const v=((c.x-n.x)*(o.x-n.x)+(c.y-n.y)*(o.y-n.y))/f;return c.distSqr(v<0?n:v>1?o:o.sub(n)._mult(v)._add(n))}function Gm(c,n){let o,f,v,w=!1;for(let A=0;A<c.length;A++){o=c[A];for(let P=0,I=o.length-1;P<o.length;I=P++)f=o[P],v=o[I],f.y>n.y!=v.y>n.y&&n.x<(v.x-f.x)*(n.y-f.y)/(v.y-f.y)+f.x&&(w=!w)}return w}function Vl(c,n){let o=!1;for(let f=0,v=c.length-1;f<c.length;v=f++){const w=c[f],A=c[v];w.y>n.y!=A.y>n.y&&n.x<(A.x-w.x)*(n.y-w.y)/(A.y-w.y)+w.x&&(o=!o)}return o}function Zm(c,n,o){const f=o[0],v=o[2];if(c.x<f.x&&n.x<f.x||c.x>v.x&&n.x>v.x||c.y<f.y&&n.y<f.y||c.y>v.y&&n.y>v.y)return!1;const w=Kr(c,n,o[0]);return w!==Kr(c,n,o[1])||w!==Kr(c,n,o[2])||w!==Kr(c,n,o[3])}function Mu(c,n,o){const f=n.paint.get(c).value;return f.kind==="constant"?f.value:o.programConfigurations.get(n.id).getMaxValue(c)}function Wd(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Yd(c,n,o,f,v){if(!n[0]&&!n[1])return c;const w=M.convert(n)._mult(v);o==="viewport"&&w._rotate(-f);const A=[];for(let P=0;P<c.length;P++)A.push(c[P].sub(w));return A}function Hm({queryGeometry:c,size:n},o){return Xd(c,o,n)}function Xm({queryGeometry:c,size:n,transform:o,unwrappedTileID:f,getElevation:v},w){return Xd(c,w,n*(o.projectTileCoordinates(w.x,w.y,f,v).signedDistanceFromCamera/o.cameraToCenterDistance))}function Wm({queryGeometry:c,size:n,transform:o,unwrappedTileID:f,getElevation:v},w){const A=o.projectTileCoordinates(w.x,w.y,f,v).signedDistanceFromCamera,P=n*(o.cameraToCenterDistance/A);return Xd(c,qh(w,o,f,v),P)}function Jy({queryGeometry:c,size:n,transform:o,unwrappedTileID:f,getElevation:v},w){return Xd(c,qh(w,o,f,v),n)}function cp({queryGeometry:c,size:n,transform:o,unwrappedTileID:f,getElevation:v,pitchAlignment:w="map",pitchScale:A="map"},P){const I=w==="map"?A==="map"?Hm:Xm:A==="map"?Wm:Jy,D={queryGeometry:c,size:n,transform:o,unwrappedTileID:f,getElevation:v};for(const B of P)for(const V of B)if(I(D,V))return!0;return!1}function qh(c,n,o,f){const v=n.projectTileCoordinates(c.x,c.y,o,f).point;return new M((.5*v.x+.5)*n.width,(.5*-v.y+.5)*n.height)}let up,Ym;Nt("CircleBucket",op,{omit:["layers"]});var Km={get paint(){return Ym=Ym||new ji({"circle-radius":new Xt(Ve.paint_circle["circle-radius"]),"circle-color":new Xt(Ve.paint_circle["circle-color"]),"circle-blur":new Xt(Ve.paint_circle["circle-blur"]),"circle-opacity":new Xt(Ve.paint_circle["circle-opacity"]),"circle-translate":new Lt(Ve.paint_circle["circle-translate"]),"circle-translate-anchor":new Lt(Ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Lt(Ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Lt(Ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Xt(Ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Xt(Ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Xt(Ve.paint_circle["circle-stroke-opacity"])})},get layout(){return up=up||new ji({"circle-sort-key":new Xt(Ve.layout_circle["circle-sort-key"])})}};class ev extends Wa{constructor(n,o){super(n,Km,o)}createBucket(n){return new op(n)}queryRadius(n){const o=n;return Mu("circle-radius",this,o)+Mu("circle-stroke-width",this,o)+Wd(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:f,geometry:v,transform:w,pixelsToTileUnits:A,unwrappedTileID:P,getElevation:I}){const D=Yd(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-w.bearingInRadians,A),B=this.paint.get("circle-radius").evaluate(o,f)+this.paint.get("circle-stroke-width").evaluate(o,f),V=this.paint.get("circle-pitch-scale"),W=this.paint.get("circle-pitch-alignment");let K,te;return W==="map"?(K=D,te=B*A):(K=function(le,de,ve,Be){return le.map(Me=>qh(Me,de,ve,Be))}(D,w,P,I),te=B),cp({queryGeometry:K,size:te,transform:w,unwrappedTileID:P,getElevation:I,pitchAlignment:W,pitchScale:V},v)}}class Qs extends op{}let hp;Nt("HeatmapBucket",Qs,{omit:["layers"]});var Dx={get paint(){return hp=hp||new ji({"heatmap-radius":new Xt(Ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Xt(Ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Lt(Ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Dc(Ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Lt(Ve.paint_heatmap["heatmap-opacity"])})}};function dp(c,{width:n,height:o},f,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==n*o*f)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${n*o*f}`)}else v=new Uint8Array(n*o*f);return c.width=n,c.height=o,c.data=v,c}function Js(c,{width:n,height:o},f){if(n===c.width&&o===c.height)return;const v=dp({},{width:n,height:o},f);fp(c,v,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,n),height:Math.min(c.height,o)},f),c.width=n,c.height=o,c.data=v.data}function fp(c,n,o,f,v,w){if(v.width===0||v.height===0)return n;if(v.width>c.width||v.height>c.height||o.x>c.width-v.width||o.y>c.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>n.width||v.height>n.height||f.x>n.width-v.width||f.y>n.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const A=c.data,P=n.data;if(A===P)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<v.height;I++){const D=((o.y+I)*c.width+o.x)*w,B=((f.y+I)*n.width+f.x)*w;for(let V=0;V<v.width*w;V++)P[B+V]=A[D+V]}return n}class $c{constructor(n,o){dp(this,n,1,o)}resize(n){Js(this,n,1)}clone(){return new $c({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,f,v,w){fp(n,o,f,v,w,1)}}class Ei{constructor(n,o){dp(this,n,4,o)}resize(n){Js(this,n,4)}replace(n,o){o?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ei({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,f,v,w){fp(n,o,f,v,w,4)}setPixel(n,o,f){const v=4*(n*this.width+o);this.data[v+0]=Math.round(255*f.r/f.a),this.data[v+1]=Math.round(255*f.g/f.a),this.data[v+2]=Math.round(255*f.b/f.a),this.data[v+3]=Math.round(255*f.a)}}function Vn(c){const n={},o=c.resolution||256,f=c.clips?c.clips.length:1,v=c.image||new Ei({width:o,height:f});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const w=(A,P,I)=>{n[c.evaluationKey]=I;const D=c.expression.evaluate(n);v.setPixel(A/4/o,P/4,D)};if(c.clips)for(let A=0,P=0;A<f;++A,P+=4*o)for(let I=0,D=0;I<o;I++,D+=4){const B=I/(o-1),{start:V,end:W}=c.clips[A];w(P,D,V*(1-B)+W*B)}else for(let A=0,P=0;A<o;A++,P+=4)w(0,P,A/(o-1));return v}Nt("AlphaImage",$c),Nt("RGBAImage",Ei);const Qm="big-fb";class zx extends Wa{createBucket(n){return new Qs(n)}constructor(n,o){super(n,Dx,o),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Vn({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Qm)&&this.heatmapFbos.delete(Qm)}queryRadius(n){return Mu("heatmap-radius",this,n)}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:f,geometry:v,transform:w,pixelsToTileUnits:A,unwrappedTileID:P,getElevation:I}){return cp({queryGeometry:n,size:this.paint.get("heatmap-radius").evaluate(o,f)*A,transform:w,unwrappedTileID:P,getElevation:I},v)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Jm;var Kd={get paint(){return Jm=Jm||new ji({"hillshade-illumination-direction":new Lt(Ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Lt(Ve.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Lt(Ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Lt(Ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Lt(Ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Lt(Ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Lt(Ve.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Lt(Ve.paint_hillshade["hillshade-method"])})}};class qc extends Wa{constructor(n,o){super(n,Kd,o),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let n=this.paint.get("hillshade-illumination-direction").values,o=this.paint.get("hillshade-illumination-altitude").values,f=this.paint.get("hillshade-highlight-color").values,v=this.paint.get("hillshade-shadow-color").values;const w=Math.max(n.length,o.length,f.length,v.length);n=n.concat(Array(w-n.length).fill(n.at(-1))),o=o.concat(Array(w-o.length).fill(o.at(-1))),f=f.concat(Array(w-f.length).fill(f.at(-1))),v=v.concat(Array(w-v.length).fill(v.at(-1)));const A=o.map(Ps);return{directionRadians:n.map(Ps),altitudeRadians:A,shadowColor:v,highlightColor:f}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let eg;var tv={get paint(){return eg=eg||new ji({"color-relief-opacity":new Lt(Ve["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Dc(Ve["paint_color-relief"]["color-relief-color"])})}};class ju{constructor(n,o,f,v){this.context=n,this.format=f,this.texture=n.gl.createTexture(),this.update(o,v)}update(n,o,f){const{width:v,height:w}=n,A=!(this.size&&this.size[0]===v&&this.size[1]===w||f),{context:P}=this,{gl:I}=P;if(this.useMipmap=!!(o&&o.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!o||o.premultiply!==!1)),A)this.size=[v,w],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||Wn(n)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,n):I.texImage2D(I.TEXTURE_2D,0,this.format,v,w,0,this.format,I.UNSIGNED_BYTE,n.data);else{const{x:D,y:B}=f||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||Wn(n)?I.texSubImage2D(I.TEXTURE_2D,0,D,B,I.RGBA,I.UNSIGNED_BYTE,n):I.texSubImage2D(I.TEXTURE_2D,0,D,B,v,w,I.RGBA,I.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D),P.pixelStoreUnpackFlipY.setDefault(),P.pixelStoreUnpack.setDefault(),P.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(n,o,f){const{context:v}=this,{gl:w}=v;w.bindTexture(w.TEXTURE_2D,this.texture),f!==w.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=w.LINEAR),n!==this.filter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,n),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,f||n),this.filter=n),o!==this.wrap&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,o),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class xs{constructor(n,o,f,v=1,w=1,A=1,P=0){if(this.uid=n,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Jt(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const I=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=w,this.blueFactor=A,this.baseShift=P;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<I;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(I,D)]=this.data[this._idx(I-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,I)]=this.data[this._idx(D,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<I;D++)for(let B=0;B<I;B++){const V=this.get(D,B);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(n,o){const f=new Uint8Array(this.data.buffer),v=4*this._idx(n,o);return this.unpack(f[v],f[v+1],f[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,o){if(n<-1||n>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(n+1)}unpack(n,o,f){return n*this.redFactor+o*this.greenFactor+f*this.blueFactor-this.baseShift}pack(n){return tg(n,this.getUnpackVector())}getPixels(){return new Ei({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,o,f){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let v=o*this.dim,w=o*this.dim+this.dim,A=f*this.dim,P=f*this.dim+this.dim;switch(o){case-1:v=w-1;break;case 1:w=v+1}switch(f){case-1:A=P-1;break;case 1:P=A+1}const I=-o*this.dim,D=-f*this.dim;for(let B=A;B<P;B++)for(let V=v;V<w;V++)this.data[this._idx(V,B)]=n.data[this._idx(V+I,B+D)]}}function tg(c,n){const o=n[0],f=n[1],v=n[2],w=n[3],A=Math.min(o,f,v),P=Math.round((c+w)/A);return{r:Math.floor(P*A/o)%256,g:Math.floor(P*A/f)%256,b:Math.floor(P*A/v)%256}}Nt("DEMData",xs);class rg extends Wa{constructor(n,o){super(n,tv,o)}_createColorRamp(n){const o={elevationStops:[],colorStops:[]},f=this._transitionablePaint._values["color-relief-color"].value.expression;if(f instanceof Dl&&f._styleExpression.expression instanceof mi){this.colorRampExpression=f;const A=f._styleExpression.expression;o.elevationStops=A.labels,o.colorStops=[];for(const P of o.elevationStops)o.colorStops.push(A.evaluate({globals:{elevation:P}}))}if(o.elevationStops.length<1&&(o.elevationStops=[0],o.colorStops=[xr.transparent]),o.elevationStops.length<2&&(o.elevationStops.push(o.elevationStops[0]+1),o.colorStops.push(o.colorStops[0])),o.elevationStops.length<=n)return o;const v={elevationStops:[],colorStops:[]},w=(o.elevationStops.length-1)/(n-1);for(let A=0;A<o.elevationStops.length-.5;A+=w)v.elevationStops.push(o.elevationStops[Math.round(A)]),v.colorStops.push(o.colorStops[Math.round(A)]);return Jt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),v}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(n,o,f){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const v=this._createColorRamp(o),w=new Ei({width:v.colorStops.length,height:1}),A=new Ei({width:v.colorStops.length,height:1});for(let P=0;P<v.elevationStops.length;P++){const I=tg(v.elevationStops[P],f);A.setPixel(0,P,new xr(I.r/255,I.g/255,I.b/255,1)),w.setPixel(0,P,v.colorStops[P])}return this.colorRampTextures={elevationTexture:new ju(n,A,n.gl.RGBA),colorTexture:new ju(n,w,n.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const rv=En([{name:"a_pos",components:2,type:"Int16"}],4),{members:ng}=rv;function Uh(c,n,o){const f=o.patternDependencies;let v=!1;for(const w of n){const A=w.paint.get(`${c}-pattern`);A.isConstant()||(v=!0);const P=A.constantOr(null);P&&(v=!0,f[P.to]=!0,f[P.from]=!0)}return v}function Vh(c,n,o,f,v){const{zoom:w}=f,A=v.patternDependencies;for(const P of n){const I=P.paint.get(`${c}-pattern`).value;if(I.kind!=="constant"){let D=I.evaluate({zoom:w-1},o,{},v.availableImages),B=I.evaluate({zoom:w},o,{},v.availableImages),V=I.evaluate({zoom:w+1},o,{},v.availableImages);D=D&&D.name?D.name:D,B=B&&B.name?B.name:B,V=V&&V.name?V.name:V,A[D]=!0,A[B]=!0,A[V]=!0,o.patterns[P.id]={min:D,mid:B,max:V}}}return o}function ig(c,n,o,f,v){let w;if(v===function(A,P,I,D){let B=0;for(let V=P,W=I-D;V<I;V+=D)B+=(A[W]-A[V])*(A[V+1]+A[W+1]),W=V;return B}(c,n,o,f)>0)for(let A=n;A<o;A+=f)w=Uc(A/f|0,c[A],c[A+1],w);else for(let A=o-f;A>=n;A-=f)w=Uc(A/f|0,c[A],c[A+1],w);return w&&Gi(w,w.next)&&(Ko(w),w=w.next),w}function Ra(c,n){if(!c)return c;n||(n=c);let o,f=c;do if(o=!1,f.steiner||!Gi(f,f.next)&&zn(f.prev,f,f.next)!==0)f=f.next;else{if(Ko(f),f=n=f.prev,f===f.next)break;o=!0}while(o||f!==n);return n}function Dn(c,n,o,f,v,w,A){if(!c)return;!A&&w&&function(I,D,B,V){let W=I;do W.z===0&&(W.z=wa(W.x,W.y,D,B,V)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==I);W.prevZ.nextZ=null,W.prevZ=null,function(K){let te,le=1;do{let de,ve=K;K=null;let Be=null;for(te=0;ve;){te++;let Me=ve,Ce=0;for(let ot=0;ot<le&&(Ce++,Me=Me.nextZ,Me);ot++);let Ke=le;for(;Ce>0||Ke>0&&Me;)Ce!==0&&(Ke===0||!Me||ve.z<=Me.z)?(de=ve,ve=ve.nextZ,Ce--):(de=Me,Me=Me.nextZ,Ke--),Be?Be.nextZ=de:K=de,de.prevZ=Be,Be=de;ve=Me}Be.nextZ=null,le*=2}while(te>1)}(W)}(c,f,v,w);let P=c;for(;c.prev!==c.next;){const I=c.prev,D=c.next;if(w?nv(c,f,v,w):ag(c))n.push(I.i,c.i,D.i),Ko(c),c=D.next,P=D.next;else if((c=D)===P){A?A===1?Dn(c=Vi(Ra(c),n),n,o,f,v,w,2):A===2&&Lx(c,n,o,f,v,w):Dn(Ra(c),n,o,f,v,w,1);break}}}function ag(c){const n=c.prev,o=c,f=c.next;if(zn(n,o,f)>=0)return!1;const v=n.x,w=o.x,A=f.x,P=n.y,I=o.y,D=f.y,B=Math.min(v,w,A),V=Math.min(P,I,D),W=Math.max(v,w,A),K=Math.max(P,I,D);let te=f.next;for(;te!==n;){if(te.x>=B&&te.x<=W&&te.y>=V&&te.y<=K&&Gh(v,P,w,I,A,D,te.x,te.y)&&zn(te.prev,te,te.next)>=0)return!1;te=te.next}return!0}function nv(c,n,o,f){const v=c.prev,w=c,A=c.next;if(zn(v,w,A)>=0)return!1;const P=v.x,I=w.x,D=A.x,B=v.y,V=w.y,W=A.y,K=Math.min(P,I,D),te=Math.min(B,V,W),le=Math.max(P,I,D),de=Math.max(B,V,W),ve=wa(K,te,n,o,f),Be=wa(le,de,n,o,f);let Me=c.prevZ,Ce=c.nextZ;for(;Me&&Me.z>=ve&&Ce&&Ce.z<=Be;){if(Me.x>=K&&Me.x<=le&&Me.y>=te&&Me.y<=de&&Me!==v&&Me!==A&&Gh(P,B,I,V,D,W,Me.x,Me.y)&&zn(Me.prev,Me,Me.next)>=0||(Me=Me.prevZ,Ce.x>=K&&Ce.x<=le&&Ce.y>=te&&Ce.y<=de&&Ce!==v&&Ce!==A&&Gh(P,B,I,V,D,W,Ce.x,Ce.y)&&zn(Ce.prev,Ce,Ce.next)>=0))return!1;Ce=Ce.nextZ}for(;Me&&Me.z>=ve;){if(Me.x>=K&&Me.x<=le&&Me.y>=te&&Me.y<=de&&Me!==v&&Me!==A&&Gh(P,B,I,V,D,W,Me.x,Me.y)&&zn(Me.prev,Me,Me.next)>=0)return!1;Me=Me.prevZ}for(;Ce&&Ce.z<=Be;){if(Ce.x>=K&&Ce.x<=le&&Ce.y>=te&&Ce.y<=de&&Ce!==v&&Ce!==A&&Gh(P,B,I,V,D,W,Ce.x,Ce.y)&&zn(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.nextZ}return!0}function Vi(c,n){let o=c;do{const f=o.prev,v=o.next.next;!Gi(f,v)&&Yo(f,o,o.next,v)&&Zh(f,v)&&Zh(v,f)&&(n.push(f.i,o.i,v.i),Ko(o),Ko(o.next),o=c=v),o=o.next}while(o!==c);return Ra(o)}function Lx(c,n,o,f,v,w){let A=c;do{let P=A.next.next;for(;P!==A.prev;){if(A.i!==P.i&&Bx(A,P)){let I=Zl(A,P);return A=Ra(A,A.next),I=Ra(I,I.next),Dn(A,n,o,f,v,w,0),void Dn(I,n,o,f,v,w,0)}P=P.next}A=A.next}while(A!==c)}function iv(c,n){let o=c.x-n.x;return o===0&&(o=c.y-n.y,o===0)&&(o=(c.next.y-c.y)/(c.next.x-c.x)-(n.next.y-n.y)/(n.next.x-n.x)),o}function av(c,n){const o=function(v,w){let A=w;const P=v.x,I=v.y;let D,B=-1/0;if(Gi(v,A))return A;do{if(Gi(v,A.next))return A.next;if(I<=A.y&&I>=A.next.y&&A.next.y!==A.y){const le=A.x+(I-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(le<=P&&le>B&&(B=le,D=A.x<A.next.x?A:A.next,le===P))return D}A=A.next}while(A!==w);if(!D)return null;const V=D,W=D.x,K=D.y;let te=1/0;A=D;do{if(P>=A.x&&A.x>=W&&P!==A.x&&og(I<K?P:B,I,W,K,I<K?B:P,I,A.x,A.y)){const le=Math.abs(I-A.y)/(P-A.x);Zh(A,v)&&(le<te||le===te&&(A.x>D.x||A.x===D.x&&Gn(D,A)))&&(D=A,te=le)}A=A.next}while(A!==V);return D}(c,n);if(!o)return n;const f=Zl(o,c);return Ra(f,f.next),Ra(o,o.next)}function Gn(c,n){return zn(c.prev,c,n.prev)<0&&zn(n.next,c,c.next)<0}function wa(c,n,o,f,v){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-o)*v|0)|c<<8))|c<<4))|c<<2))|c<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-f)*v|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Gl(c){let n=c,o=c;do(n.x<o.x||n.x===o.x&&n.y<o.y)&&(o=n),n=n.next;while(n!==c);return o}function og(c,n,o,f,v,w,A,P){return(v-A)*(n-P)>=(c-A)*(w-P)&&(c-A)*(f-P)>=(o-A)*(n-P)&&(o-A)*(w-P)>=(v-A)*(f-P)}function Gh(c,n,o,f,v,w,A,P){return!(c===A&&n===P)&&og(c,n,o,f,v,w,A,P)}function Bx(c,n){return c.next.i!==n.i&&c.prev.i!==n.i&&!function(o,f){let v=o;do{if(v.i!==o.i&&v.next.i!==o.i&&v.i!==f.i&&v.next.i!==f.i&&Yo(v,v.next,o,f))return!0;v=v.next}while(v!==o);return!1}(c,n)&&(Zh(c,n)&&Zh(n,c)&&function(o,f){let v=o,w=!1;const A=(o.x+f.x)/2,P=(o.y+f.y)/2;do v.y>P!=v.next.y>P&&v.next.y!==v.y&&A<(v.next.x-v.x)*(P-v.y)/(v.next.y-v.y)+v.x&&(w=!w),v=v.next;while(v!==o);return w}(c,n)&&(zn(c.prev,c,n.prev)||zn(c,n.prev,n))||Gi(c,n)&&zn(c.prev,c,c.next)>0&&zn(n.prev,n,n.next)>0)}function zn(c,n,o){return(n.y-c.y)*(o.x-n.x)-(n.x-c.x)*(o.y-n.y)}function Gi(c,n){return c.x===n.x&&c.y===n.y}function Yo(c,n,o,f){const v=Sa(zn(c,n,o)),w=Sa(zn(c,n,f)),A=Sa(zn(o,f,c)),P=Sa(zn(o,f,n));return v!==w&&A!==P||!(v!==0||!Qd(c,o,n))||!(w!==0||!Qd(c,f,n))||!(A!==0||!Qd(o,c,f))||!(P!==0||!Qd(o,n,f))}function Qd(c,n,o){return n.x<=Math.max(c.x,o.x)&&n.x>=Math.min(c.x,o.x)&&n.y<=Math.max(c.y,o.y)&&n.y>=Math.min(c.y,o.y)}function Sa(c){return c>0?1:c<0?-1:0}function Zh(c,n){return zn(c.prev,c,c.next)<0?zn(c,n,c.next)>=0&&zn(c,c.prev,n)>=0:zn(c,n,c.prev)<0||zn(c,c.next,n)<0}function Zl(c,n){const o=Jd(c.i,c.x,c.y),f=Jd(n.i,n.x,n.y),v=c.next,w=n.prev;return c.next=n,n.prev=c,o.next=v,v.prev=o,f.next=o,o.prev=f,w.next=f,f.prev=w,f}function Uc(c,n,o,f){const v=Jd(c,n,o);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function Ko(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Jd(c,n,o){return{i:c,x:n,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Vc{constructor(n,o){if(o>n)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=n,this._minGranularity=o}getGranularityForZoomLevel(n){return Math.max(Math.floor(this._baseZoomGranularity/(1<<n)),this._minGranularity,1)}}class To{constructor(n){this.fill=n.fill,this.line=n.line,this.tile=n.tile,this.stencil=n.stencil,this.circle=n.circle}}To.noSubdivision=new To({fill:new Vc(0,0),line:new Vc(0,0),tile:new Vc(0,0),stencil:new Vc(0,0),circle:1}),Nt("SubdivisionGranularityExpression",Vc),Nt("SubdivisionGranularitySetting",To);const Pu=-32768,el=32767;class ef{constructor(n,o){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=n,this._granularityCellSize=dt/n,this._canonical=o}_getKey(n,o){return(n+=32768)<<16|o+32768}_vertexToIndex(n,o){if(n<-32768||o<-32768||n>32767||o>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(n),v=0|Math.round(o),w=this._getKey(f,v);if(this._vertexDictionary.has(w))return this._vertexDictionary.get(w);const A=this._vertexBuffer.length/2;return this._vertexDictionary.set(w,A),this._vertexBuffer.push(f,v),A}_subdivideTrianglesScanline(n){if(this._granularity<2)return function(v,w){const A=[];for(let P=0;P<w.length;P+=3){const I=w[P],D=w[P+1],B=w[P+2],V=v[2*I],W=v[2*I+1];(v[2*D]-V)*(v[2*B+1]-W)-(v[2*D+1]-W)*(v[2*B]-V)>0?(A.push(I),A.push(B),A.push(D)):(A.push(I),A.push(D),A.push(B))}return A}(this._vertexBuffer,n);const o=[],f=n.length;for(let v=0;v<f;v+=3){const w=[n[v+0],n[v+1],n[v+2]],A=[this._vertexBuffer[2*n[v+0]+0],this._vertexBuffer[2*n[v+0]+1],this._vertexBuffer[2*n[v+1]+0],this._vertexBuffer[2*n[v+1]+1],this._vertexBuffer[2*n[v+2]+0],this._vertexBuffer[2*n[v+2]+1]];let P=1/0,I=1/0,D=-1/0,B=-1/0;for(let le=0;le<3;le++){const de=A[2*le],ve=A[2*le+1];P=Math.min(P,de),D=Math.max(D,de),I=Math.min(I,ve),B=Math.max(B,ve)}if(P===D||I===B)continue;const V=Math.floor(P/this._granularityCellSize),W=Math.ceil(D/this._granularityCellSize),K=Math.floor(I/this._granularityCellSize),te=Math.ceil(B/this._granularityCellSize);if(V!==W||K!==te)for(let le=K;le<te;le++){const de=this._scanlineGenerateVertexRingForCellRow(le,A,w);ov(this._vertexBuffer,de,o)}else o.push(...w)}return o}_scanlineGenerateVertexRingForCellRow(n,o,f){const v=n*this._granularityCellSize,w=v+this._granularityCellSize,A=[];for(let P=0;P<3;P++){const I=o[2*P],D=o[2*P+1],B=o[2*(P+1)%6],V=o[(2*(P+1)+1)%6],W=o[2*(P+2)%6],K=o[(2*(P+2)+1)%6],te=B-I,le=V-D,de=te===0,ve=le===0,Be=(v-D)/le,Me=(w-D)/le,Ce=Math.min(Be,Me),Ke=Math.max(Be,Me);if(!ve&&(Ce>=1||Ke<=0)||ve&&(D<v||D>w)){V>=v&&V<=w&&A.push(f[(P+1)%3]);continue}!ve&&Ce>0&&A.push(this._vertexToIndex(I+te*Ce,D+le*Ce));const ot=I+te*Math.max(Ce,0),gt=I+te*Math.min(Ke,1);de||this._generateIntraEdgeVertices(A,I,D,B,V,ot,gt),!ve&&Ke<1&&A.push(this._vertexToIndex(I+te*Ke,D+le*Ke)),(ve||V>=v&&V<=w)&&A.push(f[(P+1)%3]),!ve&&(V<=v||V>=w)&&this._generateInterEdgeVertices(A,I,D,B,V,W,K,gt,v,w)}return A}_generateIntraEdgeVertices(n,o,f,v,w,A,P){const I=v-o,D=w-f,B=D===0,V=B?Math.min(o,v):Math.min(A,P),W=B?Math.max(o,v):Math.max(A,P),K=Math.floor(V/this._granularityCellSize)+1,te=Math.ceil(W/this._granularityCellSize)-1;if(B?o<v:A<P)for(let le=K;le<=te;le++){const de=le*this._granularityCellSize;n.push(this._vertexToIndex(de,f+D*(de-o)/I))}else for(let le=te;le>=K;le--){const de=le*this._granularityCellSize;n.push(this._vertexToIndex(de,f+D*(de-o)/I))}}_generateInterEdgeVertices(n,o,f,v,w,A,P,I,D,B){const V=w-f,W=A-v,K=P-w,te=(D-w)/K,le=(B-w)/K,de=Math.min(te,le),ve=Math.max(te,le),Be=v+W*de;let Me=Math.floor(Math.min(Be,I)/this._granularityCellSize)+1,Ce=Math.ceil(Math.max(Be,I)/this._granularityCellSize)-1,Ke=I<Be;const ot=K===0;if(ot&&(P===D||P===B))return;if(ot||de>=1||ve<=0){const Pt=f-P,Mt=A+(o-A)*Math.min((D-P)/Pt,(B-P)/Pt);Me=Math.floor(Math.min(Mt,I)/this._granularityCellSize)+1,Ce=Math.ceil(Math.max(Mt,I)/this._granularityCellSize)-1,Ke=I<Mt}const gt=V>0?B:D;if(Ke)for(let Pt=Me;Pt<=Ce;Pt++)n.push(this._vertexToIndex(Pt*this._granularityCellSize,gt));else for(let Pt=Ce;Pt>=Me;Pt--)n.push(this._vertexToIndex(Pt*this._granularityCellSize,gt))}_generateOutline(n){const o=[];for(const f of n){const v=Qo(f,this._granularity,!0),w=this._pointArrayToIndices(v),A=[];for(let P=1;P<w.length;P++)A.push(w[P-1]),A.push(w[P]);o.push(A)}return o}_handlePoles(n){let o=!1,f=!1;this._canonical&&(this._canonical.y===0&&(o=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(o||f)&&this._fillPoles(n,o,f)}_ensureNoPoleVertices(){const n=this._vertexBuffer;for(let o=0;o<n.length;o+=2){const f=n[o+1];f===Pu&&(n[o+1]=-32767),f===el&&(n[o+1]=32766)}}_generatePoleQuad(n,o,f,v,w,A){v>w!=(A===Pu)?(n.push(o),n.push(f),n.push(this._vertexToIndex(v,A)),n.push(f),n.push(this._vertexToIndex(w,A)),n.push(this._vertexToIndex(v,A))):(n.push(f),n.push(o),n.push(this._vertexToIndex(v,A)),n.push(this._vertexToIndex(w,A)),n.push(f),n.push(this._vertexToIndex(v,A)))}_fillPoles(n,o,f){const v=this._vertexBuffer,w=dt,A=n.length;for(let P=2;P<A;P+=3){const I=n[P-2],D=n[P-1],B=n[P],V=v[2*I],W=v[2*I+1],K=v[2*D],te=v[2*D+1],le=v[2*B],de=v[2*B+1];o&&(W===0&&te===0&&this._generatePoleQuad(n,I,D,V,K,Pu),te===0&&de===0&&this._generatePoleQuad(n,D,B,K,le,Pu),de===0&&W===0&&this._generatePoleQuad(n,B,I,le,V,Pu)),f&&(W===w&&te===w&&this._generatePoleQuad(n,I,D,V,K,el),te===w&&de===w&&this._generatePoleQuad(n,D,B,K,le,el),de===w&&W===w&&this._generatePoleQuad(n,B,I,le,V,el))}}_initializeVertices(n){for(let o=0;o<n.length;o+=2)this._vertexToIndex(n[o],n[o+1])}subdividePolygonInternal(n,o){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:v}=function(P){const I=[],D=[];for(const B of P)if(B.length!==0){B!==P[0]&&I.push(D.length/2);for(let V=0;V<B.length;V++)D.push(B[V].x),D.push(B[V].y)}return{flattened:D,holeIndices:I}}(n);let w;this._initializeVertices(f);try{const P=function(D,B,V=2){const W=B&&B.length,K=W?B[0]*V:D.length;let te=ig(D,0,K,V,!0);const le=[];if(!te||te.next===te.prev)return le;let de,ve,Be;if(W&&(te=function(Me,Ce,Ke,ot){const gt=[];for(let Pt=0,Mt=Ce.length;Pt<Mt;Pt++){const Ct=ig(Me,Ce[Pt]*ot,Pt<Mt-1?Ce[Pt+1]*ot:Me.length,ot,!1);Ct===Ct.next&&(Ct.steiner=!0),gt.push(Gl(Ct))}gt.sort(iv);for(let Pt=0;Pt<gt.length;Pt++)Ke=av(gt[Pt],Ke);return Ke}(D,B,te,V)),D.length>80*V){de=D[0],ve=D[1];let Me=de,Ce=ve;for(let Ke=V;Ke<K;Ke+=V){const ot=D[Ke],gt=D[Ke+1];ot<de&&(de=ot),gt<ve&&(ve=gt),ot>Me&&(Me=ot),gt>Ce&&(Ce=gt)}Be=Math.max(Me-de,Ce-ve),Be=Be!==0?32767/Be:0}return Dn(te,le,V,de,ve,Be,0),le}(f,v),I=this._convertIndices(f,P);w=this._subdivideTrianglesScanline(I)}catch(P){console.error(P)}let A=[];return o&&(A=this._generateOutline(n)),this._ensureNoPoleVertices(),this._handlePoles(w),{verticesFlattened:this._vertexBuffer,indicesTriangles:w,indicesLineList:A}}_convertIndices(n,o){const f=[];for(let v=0;v<o.length;v++)f.push(this._vertexToIndex(n[2*o[v]],n[2*o[v]+1]));return f}_pointArrayToIndices(n){const o=[];for(let f=0;f<n.length;f++){const v=n[f];o.push(this._vertexToIndex(v.x,v.y))}return o}}function Hh(c,n,o,f=!0){return new ef(o,n).subdividePolygonInternal(c,f)}function Qo(c,n,o=!1){if(!c||c.length<1)return[];if(c.length<2)return[];const f=c[0],v=c[c.length-1],w=o&&(f.x!==v.x||f.y!==v.y);if(n<2)return w?[...c,c[0]]:[...c];const A=Math.floor(dt/n),P=[];P.push(new M(c[0].x,c[0].y));const I=c.length,D=w?I:I-1;for(let B=0;B<D;B++){const V=c[B],W=B<I-1?c[B+1]:c[0],K=V.x,te=V.y,le=W.x,de=W.y,ve=K!==le,Be=te!==de;if(!ve&&!Be)continue;const Me=le-K,Ce=de-te,Ke=Math.abs(Me),ot=Math.abs(Ce);let gt=K,Pt=te;for(;;){const Ct=Me>0?(Math.floor(gt/A)+1)*A:(Math.ceil(gt/A)-1)*A,Ut=Ce>0?(Math.floor(Pt/A)+1)*A:(Math.ceil(Pt/A)-1)*A,It=Math.abs(gt-Ct),kt=Math.abs(Pt-Ut),ft=Math.abs(gt-le),nr=Math.abs(Pt-de),sr=ve?It/Ke:Number.POSITIVE_INFINITY,Zt=Be?kt/ot:Number.POSITIVE_INFINITY;if((ft<=It||!ve)&&(nr<=kt||!Be))break;if(sr<Zt&&ve||!Be){gt=Ct,Pt+=Ce*sr;const Vt=new M(gt,Math.round(Pt));P[P.length-1].x===Vt.x&&P[P.length-1].y===Vt.y||P.push(Vt)}else{gt+=Me*Zt,Pt=Ut;const Vt=new M(Math.round(gt),Pt);P[P.length-1].x===Vt.x&&P[P.length-1].y===Vt.y||P.push(Vt)}}const Mt=new M(le,de);P[P.length-1].x===Mt.x&&P[P.length-1].y===Mt.y||P.push(Mt)}return P}function ov(c,n,o){if(n.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,v=c[2*n[0]];for(let I=1;I<n.length;I++){const D=c[2*n[I]];D<v&&(v=D,f=I)}const w=n.length;let A=f,P=(A+1)%w;for(;;){const I=A-1>=0?A-1:w-1,D=(P+1)%w,B=c[2*n[I]],V=c[2*n[D]],W=c[2*n[A]],K=c[2*n[A]+1],te=c[2*n[P]+1];let le=!1;if(B<V)le=!0;else if(B>V)le=!1;else{const de=te-K,ve=-(c[2*n[P]]-W),Be=K<te?1:-1;((B-W)*de+(c[2*n[I]+1]-K)*ve)*Be>((V-W)*de+(c[2*n[D]+1]-K)*ve)*Be&&(le=!0)}if(le){const de=n[I],ve=n[A],Be=n[P];de!==ve&&de!==Be&&ve!==Be&&o.push(Be,ve,de),A--,A<0&&(A=w-1)}else{const de=n[D],ve=n[A],Be=n[P];de!==ve&&de!==Be&&ve!==Be&&o.push(Be,ve,de),P++,P>=w&&(P=0)}if(I===D)break}}function sg(c,n,o,f,v,w,A,P,I){const D=v.length/2,B=A&&P&&I;if(D<Tr.MAX_VERTEX_ARRAY_LENGTH){const V=n.prepareSegment(D,o,f),W=V.vertexLength;for(let le=0;le<w.length;le+=3)f.emplaceBack(W+w[le],W+w[le+1],W+w[le+2]);let K,te;V.vertexLength+=D,V.primitiveLength+=w.length/3,B&&(te=A.prepareSegment(D,o,P),K=te.vertexLength,te.vertexLength+=D);for(let le=0;le<v.length;le+=2)c(v[le],v[le+1]);if(B)for(let le=0;le<I.length;le++){const de=I[le];for(let ve=1;ve<de.length;ve+=2)P.emplaceBack(K+de[ve-1],K+de[ve]);te.primitiveLength+=de.length/2}}else(function(V,W,K,te,le,de){const ve=[];for(let ot=0;ot<te.length/2;ot++)ve.push(-1);const Be={count:0};let Me=0,Ce=V.getOrCreateLatestSegment(W,K),Ke=Ce.vertexLength;for(let ot=2;ot<le.length;ot+=3){const gt=le[ot-2],Pt=le[ot-1],Mt=le[ot];let Ct=ve[gt]<Me,Ut=ve[Pt]<Me,It=ve[Mt]<Me;Ce.vertexLength+((Ct?1:0)+(Ut?1:0)+(It?1:0))>Tr.MAX_VERTEX_ARRAY_LENGTH&&(Ce=V.createNewSegment(W,K),Me=Be.count,Ct=!0,Ut=!0,It=!0,Ke=0);const kt=Hl(ve,te,de,Be,gt,Ct,Ce),ft=Hl(ve,te,de,Be,Pt,Ut,Ce),nr=Hl(ve,te,de,Be,Mt,It,Ce);K.emplaceBack(Ke+kt-Me,Ke+ft-Me,Ke+nr-Me),Ce.primitiveLength++}})(n,o,f,v,w,c),B&&function(V,W,K,te,le,de){const ve=[];for(let ot=0;ot<te.length/2;ot++)ve.push(-1);const Be={count:0};let Me=0,Ce=V.getOrCreateLatestSegment(W,K),Ke=Ce.vertexLength;for(let ot=0;ot<le.length;ot++){const gt=le[ot];for(let Pt=1;Pt<le[ot].length;Pt+=2){const Mt=gt[Pt-1],Ct=gt[Pt];let Ut=ve[Mt]<Me,It=ve[Ct]<Me;Ce.vertexLength+((Ut?1:0)+(It?1:0))>Tr.MAX_VERTEX_ARRAY_LENGTH&&(Ce=V.createNewSegment(W,K),Me=Be.count,Ut=!0,It=!0,Ke=0);const kt=Hl(ve,te,de,Be,Mt,Ut,Ce),ft=Hl(ve,te,de,Be,Ct,It,Ce);K.emplaceBack(Ke+kt-Me,Ke+ft-Me),Ce.primitiveLength++}}}(A,o,P,v,I,c),n.forceNewSegmentOnNextPrepare(),A==null||A.forceNewSegmentOnNextPrepare()}function Hl(c,n,o,f,v,w,A){if(w){const P=f.count;return o(n[2*v],n[2*v+1]),c[v]=f.count,f.count++,A.vertexLength++,P}return c[v]}class pp{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new De,this.indexArray=new Wr,this.indexArray2=new cn,this.programConfigurations=new ba(n.layers,n.zoom),this.segments=new Tr,this.segments2=new Tr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,f){this.hasDependencies=Uh("fill",this.layers,o);const v=this.layers[0].layout.get("fill-sort-key"),w=!v.isConstant(),A=[];for(const{feature:P,id:I,index:D,sourceLayerIndex:B}of n){const V=this.layers[0]._featureFilter.needGeometry,W=Fc(P,V);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),W,f))continue;const K=w?v.evaluate(W,{},f,o.availableImages):void 0,te={id:I,properties:P.properties,type:P.type,sourceLayerIndex:B,index:D,geometry:V?W.geometry:Ks(P),patterns:{},sortKey:K};A.push(te)}w&&A.sort((P,I)=>P.sortKey-I.sortKey);for(const P of A){const{geometry:I,index:D,sourceLayerIndex:B}=P;if(this.hasDependencies){const V=Vh("fill",this.layers,P,{zoom:this.zoom},o);this.patternFeatures.push(V)}else this.addFeature(P,I,D,f,{},o.subdivisionGranularity);o.featureIndex.insert(n[D].feature,I,D,B,this.index)}}update(n,o,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:f})}addFeatures(n,o,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,o,f,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ng),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,o,f,v,w,A){for(const P of Sh(o,500)){const I=Hh(P,v,A.fill.getGranularityForZoomLevel(v.z)),D=this.layoutVertexArray;sg((B,V)=>{D.emplaceBack(B,V)},this.segments,this.layoutVertexArray,this.indexArray,I.verticesFlattened,I.indicesTriangles,this.segments2,this.indexArray2,I.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:w,canonical:v})}}let tf,lg;Nt("FillBucket",pp,{omit:["layers","patternFeatures"]});var Fx={get paint(){return lg=lg||new ji({"fill-antialias":new Lt(Ve.paint_fill["fill-antialias"]),"fill-opacity":new Xt(Ve.paint_fill["fill-opacity"]),"fill-color":new Xt(Ve.paint_fill["fill-color"]),"fill-outline-color":new Xt(Ve.paint_fill["fill-outline-color"]),"fill-translate":new Lt(Ve.paint_fill["fill-translate"]),"fill-translate-anchor":new Lt(Ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new Rc(Ve.paint_fill["fill-pattern"])})},get layout(){return tf=tf||new ji({"fill-sort-key":new Xt(Ve.layout_fill["fill-sort-key"])})}};class $x extends Wa{constructor(n,o){super(n,Fx,o)}recalculate(n,o){super.recalculate(n,o);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new pp(n)}queryRadius(){return Wd(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:n,geometry:o,transform:f,pixelsToTileUnits:v}){return Pi(Yd(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,v),o)}isTileClipped(){return!0}}const gn=En([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),On=En([{name:"a_centroid",components:2,type:"Int16"}],4),{members:zr}=gn;class Ir{constructor(n,o,f,v,w){this.properties={},this.extent=f,this.type=0,this.id=void 0,this._pbf=n,this._geometry=-1,this._keys=v,this._values=w,n.readFields(yn,this,o)}loadGeometry(){const n=this._pbf;n.pos=this._geometry;const o=n.readVarint()+n.pos,f=[];let v,w=1,A=0,P=0,I=0;for(;n.pos<o;){if(A<=0){const D=n.readVarint();w=7&D,A=D>>3}if(A--,w===1||w===2)P+=n.readSVarint(),I+=n.readSVarint(),w===1&&(v&&f.push(v),v=[]),v&&v.push(new M(P,I));else{if(w!==7)throw new Error(`unknown command ${w}`);v&&v.push(v[0].clone())}}return v&&f.push(v),f}bbox(){const n=this._pbf;n.pos=this._geometry;const o=n.readVarint()+n.pos;let f=1,v=0,w=0,A=0,P=1/0,I=-1/0,D=1/0,B=-1/0;for(;n.pos<o;){if(v<=0){const V=n.readVarint();f=7&V,v=V>>3}if(v--,f===1||f===2)w+=n.readSVarint(),A+=n.readSVarint(),w<P&&(P=w),w>I&&(I=w),A<D&&(D=A),A>B&&(B=A);else if(f!==7)throw new Error(`unknown command ${f}`)}return[P,D,I,B]}toGeoJSON(n,o,f){const v=this.extent*Math.pow(2,f),w=this.extent*n,A=this.extent*o,P=this.loadGeometry();function I(W){return[360*(W.x+w)/v-180,360/Math.PI*Math.atan(Math.exp((1-2*(W.y+A)/v)*Math.PI))-90]}function D(W){return W.map(I)}let B;if(this.type===1){const W=[];for(const te of P)W.push(te[0]);const K=D(W);B=W.length===1?{type:"Point",coordinates:K[0]}:{type:"MultiPoint",coordinates:K}}else if(this.type===2){const W=P.map(D);B=W.length===1?{type:"LineString",coordinates:W[0]}:{type:"MultiLineString",coordinates:W}}else{if(this.type!==3)throw new Error("unknown feature type");{const W=function(te){const le=te.length;if(le<=1)return[te];const de=[];let ve,Be;for(let Me=0;Me<le;Me++){const Ce=Ao(te[Me]);Ce!==0&&(Be===void 0&&(Be=Ce<0),Be===Ce<0?(ve&&de.push(ve),ve=[te[Me]]):ve&&ve.push(te[Me]))}return ve&&de.push(ve),de}(P),K=[];for(const te of W)K.push(te.map(D));B=K.length===1?{type:"Polygon",coordinates:K[0]}:{type:"MultiPolygon",coordinates:K}}}const V={type:"Feature",geometry:B,properties:this.properties};return this.id!=null&&(V.id=this.id),V}}function yn(c,n,o){c===1?n.id=o.readVarint():c===2?function(f,v){const w=f.readVarint()+f.pos;for(;f.pos<w;){const A=v._keys[f.readVarint()],P=v._values[f.readVarint()];v.properties[A]=P}}(o,n):c===3?n.type=o.readVarint():c===4&&(n._geometry=o.pos)}function Ao(c){let n=0;for(let o,f,v=0,w=c.length,A=w-1;v<w;A=v++)o=c[v],f=c[A],n+=(f.x-o.x)*(o.y+f.y);return n}Ir.types=["Unknown","Point","LineString","Polygon"];class Xl{constructor(n,o){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(Xh,this,o),this.length=this._features.length}feature(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];const o=this._pbf.readVarint()+this._pbf.pos;return new Ir(this._pbf,o,this.extent,this._keys,this._values)}}function Xh(c,n,o){c===15?n.version=o.readVarint():c===1?n.name=o.readString():c===5?n.extent=o.readVarint():c===2?n._features.push(o.pos):c===3?n._keys.push(o.readString()):c===4&&n._values.push(function(f){let v=null;const w=f.readVarint()+f.pos;for(;f.pos<w;){const A=f.readVarint()>>3;v=A===1?f.readString():A===2?f.readFloat():A===3?f.readDouble():A===4?f.readVarint64():A===5?f.readVarint():A===6?f.readSVarint():A===7?f.readBoolean():null}if(v==null)throw new Error("unknown feature value");return v}(o))}class mp{constructor(n,o){this.layers=n.readFields(Wl,{},o)}}function Wl(c,n,o){if(c===3){const f=new Xl(o,o.readVarint()+o.pos);f.length&&(n[f.name]=f)}}const Zn=Math.pow(2,13);function Jo(c,n,o,f,v,w,A,P){c.emplaceBack(n,o,2*Math.floor(f*Zn)+A,v*Zn*2,w*Zn*2,Math.round(P))}class Yl{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasDependencies=!1,this.layoutVertexArray=new it,this.centroidVertexArray=new Ie,this.indexArray=new Wr,this.programConfigurations=new ba(n.layers,n.zoom),this.segments=new Tr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,f){this.features=[],this.hasDependencies=Uh("fill-extrusion",this.layers,o);for(const{feature:v,id:w,index:A,sourceLayerIndex:P}of n){const I=this.layers[0]._featureFilter.needGeometry,D=Fc(v,I);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),D,f))continue;const B={id:w,sourceLayerIndex:P,index:A,geometry:I?D.geometry:Ks(v),properties:v.properties,type:v.type,patterns:{}};this.hasDependencies?this.features.push(Vh("fill-extrusion",this.layers,B,{zoom:this.zoom},o)):this.addFeature(B,B.geometry,A,f,{},o.subdivisionGranularity),o.featureIndex.insert(v,B.geometry,A,P,this.index,!0)}}addFeatures(n,o,f){for(const v of this.features){const{geometry:w}=v;this.addFeature(v,w,v.index,o,f,n.subdivisionGranularity)}}update(n,o,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,zr),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,On.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,o,f,v,w,A){for(const P of Sh(o,500)){const I={x:0,y:0,sampleCount:0},D=this.layoutVertexArray.length;this.processPolygon(I,v,n,P,A);const B=this.layoutVertexArray.length-D,V=Math.floor(I.x/I.sampleCount),W=Math.floor(I.y/I.sampleCount);for(let K=0;K<B;K++)this.centroidVertexArray.emplaceBack(V,W)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:w,canonical:v})}processPolygon(n,o,f,v,w){if(v.length<1||Eu(v[0]))return;for(const V of v)V.length!==0&&cg(n,V);const A={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},P=w.fill.getGranularityForZoomLevel(o.z),I=Ir.types[f.type]==="Polygon";for(const V of v){if(V.length===0||Eu(V))continue;const W=Qo(V,P,I);this._generateSideFaces(W,A)}if(!I)return;const D=Hh(v,o,P,!1),B=this.layoutVertexArray;sg((V,W)=>{Jo(B,V,W,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,D.verticesFlattened,D.indicesTriangles)}_generateSideFaces(n,o){let f=0;for(let v=1;v<n.length;v++){const w=n[v],A=n[v-1];if(es(w,A))continue;o.segment.vertexLength+4>Tr.MAX_VERTEX_ARRAY_LENGTH&&(o.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const P=w.sub(A)._perp()._unit(),I=A.dist(w);f+I>32768&&(f=0),Jo(this.layoutVertexArray,w.x,w.y,P.x,P.y,0,0,f),Jo(this.layoutVertexArray,w.x,w.y,P.x,P.y,0,1,f),f+=I,Jo(this.layoutVertexArray,A.x,A.y,P.x,P.y,0,0,f),Jo(this.layoutVertexArray,A.x,A.y,P.x,P.y,0,1,f);const D=o.segment.vertexLength;this.indexArray.emplaceBack(D,D+2,D+1),this.indexArray.emplaceBack(D+1,D+2,D+3),o.segment.vertexLength+=4,o.segment.primitiveLength+=2}}}function cg(c,n){for(let o=0;o<n.length;o++){const f=n[o];o===n.length-1&&n[0].x===f.x&&n[0].y===f.y||(c.x+=f.x,c.y+=f.y,c.sampleCount++)}}function es(c,n){return c.x===n.x&&(c.x<0||c.x>dt)||c.y===n.y&&(c.y<0||c.y>dt)}function Eu(c){return c.every(n=>n.x<0)||c.every(n=>n.x>dt)||c.every(n=>n.y<0)||c.every(n=>n.y>dt)}let Wh;Nt("FillExtrusionBucket",Yl,{omit:["layers","features"]});var to={get paint(){return Wh=Wh||new ji({"fill-extrusion-opacity":new Lt(Ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Xt(Ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Lt(Ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Lt(Ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Rc(Ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Xt(Ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Xt(Ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Lt(Ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ug extends Wa{constructor(n,o){super(n,to,o)}createBucket(n){return new Yl(n)}queryRadius(){return Wd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:f,geometry:v,transform:w,pixelsToTileUnits:A,pixelPosMatrix:P}){const I=Yd(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-w.bearingInRadians,A),D=this.paint.get("fill-extrusion-height").evaluate(o,f),B=this.paint.get("fill-extrusion-base").evaluate(o,f),V=function(K,te){const le=[];for(const de of K){const ve=[de.x,de.y,0,1];st(ve,ve,te),le.push(new M(ve[0]/ve[3],ve[1]/ve[3]))}return le}(I,P),W=function(K,te,le,de){const ve=[],Be=[],Me=de[8]*te,Ce=de[9]*te,Ke=de[10]*te,ot=de[11]*te,gt=de[8]*le,Pt=de[9]*le,Mt=de[10]*le,Ct=de[11]*le;for(const Ut of K){const It=[],kt=[];for(const ft of Ut){const nr=ft.x,sr=ft.y,Zt=de[0]*nr+de[4]*sr+de[12],Vt=de[1]*nr+de[5]*sr+de[13],Cr=de[2]*nr+de[6]*sr+de[14],bn=de[3]*nr+de[7]*sr+de[15],Hn=Cr+Ke,Ci=bn+ot,ia=Zt+gt,aa=Vt+Pt,oi=Cr+Mt,An=bn+Ct,Ti=new M((Zt+Me)/Ci,(Vt+Ce)/Ci);Ti.z=Hn/Ci,It.push(Ti);const si=new M(ia/An,aa/An);si.z=oi/An,kt.push(si)}ve.push(It),Be.push(kt)}return[ve,Be]}(v,B,D,P);return function(K,te,le){let de=1/0;Pi(le,te)&&(de=rf(le,te[0]));for(let ve=0;ve<te.length;ve++){const Be=te[ve],Me=K[ve];for(let Ce=0;Ce<Be.length-1;Ce++){const Ke=Be[Ce],ot=[Ke,Be[Ce+1],Me[Ce+1],Me[Ce],Ke];Ky(le,ot)&&(de=Math.min(de,rf(le,ot)))}}return de!==1/0&&de}(W[0],W[1],V)}}function Cu(c,n){return c.x*n.x+c.y*n.y}function rf(c,n){if(c.length===1){let o=0;const f=n[o++];let v;for(;!v||f.equals(v);)if(v=n[o++],!v)return 1/0;for(;o<n.length;o++){const w=n[o],A=c[0],P=v.sub(f),I=w.sub(f),D=A.sub(f),B=Cu(P,P),V=Cu(P,I),W=Cu(I,I),K=Cu(D,P),te=Cu(D,I),le=B*W-V*V,de=(W*K-V*te)/le,ve=(B*te-V*K)/le,Be=f.z*(1-de-ve)+v.z*de+w.z*ve;if(isFinite(Be))return Be}return 1/0}{let o=1/0;for(const f of n)o=Math.min(o,f.z);return o}}const gp=En([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Gc}=gp,na=En([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Zc}=na,Yh=Math.cos(Math.PI/180*37.5),Ou=Math.pow(2,14)/.5;class nf{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Ye,this.layoutVertexArray2=new Qe,this.indexArray=new Wr,this.programConfigurations=new ba(n.layers,n.zoom),this.segments=new Tr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,f){this.hasDependencies=Uh("line",this.layers,o)||this.hasLineDasharray(this.layers);const v=this.layers[0].layout.get("line-sort-key"),w=!v.isConstant(),A=[];for(const{feature:P,id:I,index:D,sourceLayerIndex:B}of n){const V=this.layers[0]._featureFilter.needGeometry,W=Fc(P,V);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),W,f))continue;const K=w?v.evaluate(W,{},f):void 0,te={id:I,properties:P.properties,type:P.type,sourceLayerIndex:B,index:D,geometry:V?W.geometry:Ks(P),patterns:{},dashes:{},sortKey:K};A.push(te)}w&&A.sort((P,I)=>P.sortKey-I.sortKey);for(const P of A){const{geometry:I,index:D,sourceLayerIndex:B}=P;this.hasDependencies?(Uh("line",this.layers,o)?Vh("line",this.layers,P,{zoom:this.zoom},o):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,P,this.zoom,o),this.patternFeatures.push(P)):this.addFeature(P,I,D,f,{},{},o.subdivisionGranularity),o.featureIndex.insert(n[D].feature,I,D,B,this.index)}}update(n,o,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:f,dashPositions:v})}addFeatures(n,o,f,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,o,f,v,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Zc)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Gc),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,o,f,v,w,A,P){const I=this.layers[0].layout,D=I.get("line-join").evaluate(n,{}),B=I.get("line-cap"),V=I.get("line-miter-limit"),W=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const K of o)this.addLine(K,n,D,B,V,W,v,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:w,dashPositions:A,canonical:v})}addLine(n,o,f,v,w,A,P,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,n=Qo(n,P?I.line.getGranularityForZoomLevel(P.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Me=0;Me<n.length-1;Me++)this.totalDistance+=n[Me].dist(n[Me+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=Ir.types[o.type]==="Polygon";let B=n.length;for(;B>=2&&n[B-1].equals(n[B-2]);)B--;let V=0;for(;V<B-1&&n[V].equals(n[V+1]);)V++;if(B<(D?3:2))return;f==="bevel"&&(w=1.05);const W=this.overscaling<=16?122880/(512*this.overscaling):0,K=this.segments.prepareSegment(10*B,this.layoutVertexArray,this.indexArray);let te,le,de,ve,Be;this.e1=this.e2=-1,D&&(te=n[B-2],Be=n[V].sub(te)._unit()._perp());for(let Me=V;Me<B;Me++){if(de=Me===B-1?D?n[V+1]:void 0:n[Me+1],de&&n[Me].equals(de))continue;Be&&(ve=Be),te&&(le=te),te=n[Me],Be=de?de.sub(te)._unit()._perp():ve,ve=ve||Be;let Ce=ve.add(Be);Ce.x===0&&Ce.y===0||Ce._unit();const Ke=ve.x*Be.x+ve.y*Be.y,ot=Ce.x*Be.x+Ce.y*Be.y,gt=ot!==0?1/ot:1/0,Pt=2*Math.sqrt(2-2*ot),Mt=ot<Yh&&le&&de,Ct=ve.x*Be.y-ve.y*Be.x>0;if(Mt&&Me>V){const kt=te.dist(le);if(kt>2*W){const ft=te.sub(te.sub(le)._mult(W/kt)._round());this.updateDistance(le,ft),this.addCurrentVertex(ft,ve,0,0,K),le=ft}}const Ut=le&&de;let It=Ut?f:D?"butt":v;if(Ut&&It==="round"&&(gt<A?It="miter":gt<=2&&(It="fakeround")),It==="miter"&&gt>w&&(It="bevel"),It==="bevel"&&(gt>2&&(It="flipbevel"),gt<w&&(It="miter")),le&&this.updateDistance(le,te),It==="miter")Ce._mult(gt),this.addCurrentVertex(te,Ce,0,0,K);else if(It==="flipbevel"){if(gt>100)Ce=Be.mult(-1);else{const kt=gt*ve.add(Be).mag()/ve.sub(Be).mag();Ce._perp()._mult(kt*(Ct?-1:1))}this.addCurrentVertex(te,Ce,0,0,K),this.addCurrentVertex(te,Ce.mult(-1),0,0,K)}else if(It==="bevel"||It==="fakeround"){const kt=-Math.sqrt(gt*gt-1),ft=Ct?kt:0,nr=Ct?0:kt;if(le&&this.addCurrentVertex(te,ve,ft,nr,K),It==="fakeround"){const sr=Math.round(180*Pt/Math.PI/20);for(let Zt=1;Zt<sr;Zt++){let Vt=Zt/sr;if(Vt!==.5){const bn=Vt-.5;Vt+=Vt*bn*(Vt-1)*((1.0904+Ke*(Ke*(3.55645-1.43519*Ke)-3.2452))*bn*bn+(.848013+Ke*(.215638*Ke-1.06021)))}const Cr=Be.sub(ve)._mult(Vt)._add(ve)._unit()._mult(Ct?-1:1);this.addHalfVertex(te,Cr.x,Cr.y,!1,Ct,0,K)}}de&&this.addCurrentVertex(te,Be,-ft,-nr,K)}else if(It==="butt")this.addCurrentVertex(te,Ce,0,0,K);else if(It==="square"){const kt=le?1:-1;this.addCurrentVertex(te,Ce,kt,kt,K)}else It==="round"&&(le&&(this.addCurrentVertex(te,ve,0,0,K),this.addCurrentVertex(te,ve,1,1,K,!0)),de&&(this.addCurrentVertex(te,Be,-1,-1,K,!0),this.addCurrentVertex(te,Be,0,0,K)));if(Mt&&Me<B-1){const kt=te.dist(de);if(kt>2*W){const ft=te.add(de.sub(te)._mult(W/kt)._round());this.updateDistance(te,ft),this.addCurrentVertex(ft,Be,0,0,K),te=ft}}}}addCurrentVertex(n,o,f,v,w,A=!1){const P=o.y*v-o.x,I=-o.y-o.x*v;this.addHalfVertex(n,o.x+o.y*f,o.y-o.x*f,A,!1,f,w),this.addHalfVertex(n,P,I,A,!0,-v,w),this.distance>Ou/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,o,f,v,w,A))}addHalfVertex({x:n,y:o},f,v,w,A,P,I){const D=.5*(this.lineClips?this.scaledDistance*(Ou-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(w?1:0),(o<<1)+(A?1:0),Math.round(63*f)+128,Math.round(63*v)+128,1+(P===0?0:P<0?-1:1)|(63&D)<<2,D>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const B=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,B,this.e2),I.primitiveLength++),A?this.e2=B:this.e1=B}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,o){this.distance+=n.dist(o),this.updateScaledDistance()}hasLineDasharray(n){for(const o of n){const f=o.paint.get("line-dasharray");if(f&&!f.isConstant())return!0}return!1}addLineDashDependencies(n,o,f,v){for(const w of n){const A=w.paint.get("line-dasharray");if(!A||A.value.kind==="constant")continue;const P=w.layout.get("line-cap")==="round",I={dasharray:A.value.evaluate({zoom:f-1},o,{}),round:P},D={dasharray:A.value.evaluate({zoom:f},o,{}),round:P},B={dasharray:A.value.evaluate({zoom:f+1},o,{}),round:P},V=`${I.dasharray.join(",")},${I.round}`,W=`${D.dasharray.join(",")},${D.round}`,K=`${B.dasharray.join(",")},${B.round}`;v.dashDependencies[V]=I,v.dashDependencies[W]=D,v.dashDependencies[K]=B,o.dashes[w.id]={min:V,mid:W,max:K}}}}let yp,hg;Nt("LineBucket",nf,{omit:["layers","patternFeatures"]});var Kh={get paint(){return hg=hg||new ji({"line-opacity":new Xt(Ve.paint_line["line-opacity"]),"line-color":new Xt(Ve.paint_line["line-color"]),"line-translate":new Lt(Ve.paint_line["line-translate"]),"line-translate-anchor":new Lt(Ve.paint_line["line-translate-anchor"]),"line-width":new Xt(Ve.paint_line["line-width"]),"line-gap-width":new Xt(Ve.paint_line["line-gap-width"]),"line-offset":new Xt(Ve.paint_line["line-offset"]),"line-blur":new Xt(Ve.paint_line["line-blur"]),"line-dasharray":new Rc(Ve.paint_line["line-dasharray"]),"line-pattern":new Rc(Ve.paint_line["line-pattern"]),"line-gradient":new Dc(Ve.paint_line["line-gradient"])})},get layout(){return yp=yp||new ji({"line-cap":new Lt(Ve.layout_line["line-cap"]),"line-join":new Xt(Ve.layout_line["line-join"]),"line-miter-limit":new Lt(Ve.layout_line["line-miter-limit"]),"line-round-limit":new Lt(Ve.layout_line["line-round-limit"]),"line-sort-key":new Xt(Ve.layout_line["line-sort-key"])})}};class dg extends Xt{possiblyEvaluate(n,o){return o=new an(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(n,o)}evaluate(n,o,f,v){return o=ar({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(n,o,f,v)}}let Ta;class sv extends Wa{constructor(n,o){super(n,Kh,o),this.gradientVersion=0,Ta||(Ta=new dg(Kh.paint.properties["line-width"].specification),Ta.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(o)&&o._styleExpression.expression instanceof ks,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,o){super.recalculate(n,o),this.paint._values["line-floorwidth"]=Ta.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new nf(n)}queryRadius(n){const o=n,f=ro(Mu("line-width",this,o),Mu("line-gap-width",this,o)),v=Mu("line-offset",this,o);return f/2+Math.abs(v)+Wd(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:f,geometry:v,transform:w,pixelsToTileUnits:A}){const P=Yd(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-w.bearingInRadians,A),I=A/2*ro(this.paint.get("line-width").evaluate(o,f),this.paint.get("line-gap-width").evaluate(o,f)),D=this.paint.get("line-offset").evaluate(o,f);return D&&(v=function(B,V){const W=[];for(let K=0;K<B.length;K++){const te=B[K],le=[];for(let de=0;de<te.length;de++){const ve=te[de-1],Be=te[de],Me=te[de+1],Ce=de===0?new M(0,0):Be.sub(ve)._unit()._perp(),Ke=de===te.length-1?new M(0,0):Me.sub(Be)._unit()._perp(),ot=Ce._add(Ke)._unit(),gt=ot.x*Ke.x+ot.y*Ke.y;gt!==0&&ot._mult(1/gt),le.push(ot._mult(V)._add(Be))}W.push(le)}return W}(v,D*A)),function(B,V,W){for(let K=0;K<V.length;K++){const te=V[K];if(B.length>=3){for(let le=0;le<te.length;le++)if(Vl(B,te[le]))return!0}if(ra(B,te,W))return!0}return!1}(P,v,I)}isTileClipped(){return!0}}function ro(c,n){return n>0?n+2*c:c}const lv=En([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),cv=En([{name:"a_projected_pos",components:3,type:"Float32"}],4);En([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const qx=En([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);En([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Kl=En([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),vp=En([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function fg(c,n,o){return c.sections.forEach(f=>{f.text=function(v,w,A){const P=w.layout.get("text-transform").evaluate(A,{});return P==="uppercase"?v=v.toLocaleUpperCase():P==="lowercase"&&(v=v.toLocaleLowerCase()),gs.applyArabicShaping&&(v=gs.applyArabicShaping(v)),v}(f.text,n,o)}),c}En([{name:"triangle",components:3,type:"Uint16"}]),En([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),En([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),En([{type:"Float32",name:"offsetX"}]),En([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),En([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const tl={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var yi=24;const _p=4294967296,pg=1/_p,xp=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class af{constructor(n=new Uint8Array(16)){this.buf=ArrayBuffer.isView(n)?n:new Uint8Array(n),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(n,o,f=this.length){for(;this.pos<f;){const v=this.readVarint(),w=v>>3,A=this.pos;this.type=7&v,n(w,o,this),this.pos===A&&this.skip(v)}return o}readMessage(n,o){return this.readFields(n,o,this.readVarint()+this.pos)}readFixed32(){const n=this.dataView.getUint32(this.pos,!0);return this.pos+=4,n}readSFixed32(){const n=this.dataView.getInt32(this.pos,!0);return this.pos+=4,n}readFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*_p;return this.pos+=8,n}readSFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*_p;return this.pos+=8,n}readFloat(){const n=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,n}readDouble(){const n=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,n}readVarint(n){const o=this.buf;let f,v;return v=o[this.pos++],f=127&v,v<128?f:(v=o[this.pos++],f|=(127&v)<<7,v<128?f:(v=o[this.pos++],f|=(127&v)<<14,v<128?f:(v=o[this.pos++],f|=(127&v)<<21,v<128?f:(v=o[this.pos],f|=(15&v)<<28,function(w,A,P){const I=P.buf;let D,B;if(B=I[P.pos++],D=(112&B)>>4,B<128||(B=I[P.pos++],D|=(127&B)<<3,B<128)||(B=I[P.pos++],D|=(127&B)<<10,B<128)||(B=I[P.pos++],D|=(127&B)<<17,B<128)||(B=I[P.pos++],D|=(127&B)<<24,B<128)||(B=I[P.pos++],D|=(1&B)<<31,B<128))return Qh(w,D,A);throw new Error("Expected varint not more than 10 bytes")}(f,n,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const n=this.readVarint();return n%2==1?(n+1)/-2:n/2}readBoolean(){return!!this.readVarint()}readString(){const n=this.readVarint()+this.pos,o=this.pos;return this.pos=n,n-o>=12&&xp?xp.decode(this.buf.subarray(o,n)):function(f,v,w){let A="",P=v;for(;P<w;){const I=f[P];let D,B,V,W=null,K=I>239?4:I>223?3:I>191?2:1;if(P+K>w)break;K===1?I<128&&(W=I):K===2?(D=f[P+1],(192&D)==128&&(W=(31&I)<<6|63&D,W<=127&&(W=null))):K===3?(D=f[P+1],B=f[P+2],(192&D)==128&&(192&B)==128&&(W=(15&I)<<12|(63&D)<<6|63&B,(W<=2047||W>=55296&&W<=57343)&&(W=null))):K===4&&(D=f[P+1],B=f[P+2],V=f[P+3],(192&D)==128&&(192&B)==128&&(192&V)==128&&(W=(15&I)<<18|(63&D)<<12|(63&B)<<6|63&V,(W<=65535||W>=1114112)&&(W=null))),W===null?(W=65533,K=1):W>65535&&(W-=65536,A+=String.fromCharCode(W>>>10&1023|55296),W=56320|1023&W),A+=String.fromCharCode(W),P+=K}return A}(this.buf,o,n)}readBytes(){const n=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,n);return this.pos=n,o}readPackedVarint(n=[],o){const f=this.readPackedEnd();for(;this.pos<f;)n.push(this.readVarint(o));return n}readPackedSVarint(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSVarint());return n}readPackedBoolean(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readBoolean());return n}readPackedFloat(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFloat());return n}readPackedDouble(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readDouble());return n}readPackedFixed32(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFixed32());return n}readPackedSFixed32(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSFixed32());return n}readPackedFixed64(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFixed64());return n}readPackedSFixed64(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSFixed64());return n}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(n){const o=7&n;if(o===0)for(;this.buf[this.pos++]>127;);else if(o===2)this.pos=this.readVarint()+this.pos;else if(o===5)this.pos+=4;else{if(o!==1)throw new Error(`Unimplemented type: ${o}`);this.pos+=8}}writeTag(n,o){this.writeVarint(n<<3|o)}realloc(n){let o=this.length||16;for(;o<this.pos+n;)o*=2;if(o!==this.length){const f=new Uint8Array(o);f.set(this.buf),this.buf=f,this.dataView=new DataView(f.buffer),this.length=o}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeSFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*pg),!0),this.pos+=8}writeSFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*pg),!0),this.pos+=8}writeVarint(n){(n=+n||0)>268435455||n<0?function(o,f){let v,w;if(o>=0?(v=o%4294967296|0,w=o/4294967296|0):(v=~(-o%4294967296),w=~(-o/4294967296),4294967295^v?v=v+1|0:(v=0,w=w+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),function(A,P,I){I.buf[I.pos++]=127&A|128,A>>>=7,I.buf[I.pos++]=127&A|128,A>>>=7,I.buf[I.pos++]=127&A|128,A>>>=7,I.buf[I.pos++]=127&A|128,I.buf[I.pos]=127&(A>>>=7)}(v,0,f),function(A,P){const I=(7&A)<<4;P.buf[P.pos++]|=I|((A>>>=3)?128:0),A&&(P.buf[P.pos++]=127&A|((A>>>=7)?128:0),A&&(P.buf[P.pos++]=127&A|((A>>>=7)?128:0),A&&(P.buf[P.pos++]=127&A|((A>>>=7)?128:0),A&&(P.buf[P.pos++]=127&A|((A>>>=7)?128:0),A&&(P.buf[P.pos++]=127&A)))))}(w,f)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))}writeSVarint(n){this.writeVarint(n<0?2*-n-1:2*n)}writeBoolean(n){this.writeVarint(+n)}writeString(n){n=String(n),this.realloc(4*n.length),this.pos++;const o=this.pos;this.pos=function(v,w,A){for(let P,I,D=0;D<w.length;D++){if(P=w.charCodeAt(D),P>55295&&P<57344){if(!I){P>56319||D+1===w.length?(v[A++]=239,v[A++]=191,v[A++]=189):I=P;continue}if(P<56320){v[A++]=239,v[A++]=191,v[A++]=189,I=P;continue}P=I-55296<<10|P-56320|65536,I=null}else I&&(v[A++]=239,v[A++]=191,v[A++]=189,I=null);P<128?v[A++]=P:(P<2048?v[A++]=P>>6|192:(P<65536?v[A++]=P>>12|224:(v[A++]=P>>18|240,v[A++]=P>>12&63|128),v[A++]=P>>6&63|128),v[A++]=63&P|128)}return A}(this.buf,n,this.pos);const f=this.pos-o;f>=128&&uv(o,f,this),this.pos=o-1,this.writeVarint(f),this.pos+=f}writeFloat(n){this.realloc(4),this.dataView.setFloat32(this.pos,n,!0),this.pos+=4}writeDouble(n){this.realloc(8),this.dataView.setFloat64(this.pos,n,!0),this.pos+=8}writeBytes(n){const o=n.length;this.writeVarint(o),this.realloc(o);for(let f=0;f<o;f++)this.buf[this.pos++]=n[f]}writeRawMessage(n,o){this.pos++;const f=this.pos;n(o,this);const v=this.pos-f;v>=128&&uv(f,v,this),this.pos=f-1,this.writeVarint(v),this.pos+=v}writeMessage(n,o,f){this.writeTag(n,2),this.writeRawMessage(o,f)}writePackedVarint(n,o){o.length&&this.writeMessage(n,Ux,o)}writePackedSVarint(n,o){o.length&&this.writeMessage(n,hv,o)}writePackedBoolean(n,o){o.length&&this.writeMessage(n,bp,o)}writePackedFloat(n,o){o.length&&this.writeMessage(n,dv,o)}writePackedDouble(n,o){o.length&&this.writeMessage(n,Jh,o)}writePackedFixed32(n,o){o.length&&this.writeMessage(n,fv,o)}writePackedSFixed32(n,o){o.length&&this.writeMessage(n,pv,o)}writePackedFixed64(n,o){o.length&&this.writeMessage(n,mv,o)}writePackedSFixed64(n,o){o.length&&this.writeMessage(n,gv,o)}writeBytesField(n,o){this.writeTag(n,2),this.writeBytes(o)}writeFixed32Field(n,o){this.writeTag(n,5),this.writeFixed32(o)}writeSFixed32Field(n,o){this.writeTag(n,5),this.writeSFixed32(o)}writeFixed64Field(n,o){this.writeTag(n,1),this.writeFixed64(o)}writeSFixed64Field(n,o){this.writeTag(n,1),this.writeSFixed64(o)}writeVarintField(n,o){this.writeTag(n,0),this.writeVarint(o)}writeSVarintField(n,o){this.writeTag(n,0),this.writeSVarint(o)}writeStringField(n,o){this.writeTag(n,2),this.writeString(o)}writeFloatField(n,o){this.writeTag(n,5),this.writeFloat(o)}writeDoubleField(n,o){this.writeTag(n,1),this.writeDouble(o)}writeBooleanField(n,o){this.writeVarintField(n,+o)}}function Qh(c,n,o){return o?4294967296*n+(c>>>0):4294967296*(n>>>0)+(c>>>0)}function uv(c,n,o){const f=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));o.realloc(f);for(let v=o.pos-1;v>=c;v--)o.buf[v+f]=o.buf[v]}function Ux(c,n){for(let o=0;o<c.length;o++)n.writeVarint(c[o])}function hv(c,n){for(let o=0;o<c.length;o++)n.writeSVarint(c[o])}function dv(c,n){for(let o=0;o<c.length;o++)n.writeFloat(c[o])}function Jh(c,n){for(let o=0;o<c.length;o++)n.writeDouble(c[o])}function bp(c,n){for(let o=0;o<c.length;o++)n.writeBoolean(c[o])}function fv(c,n){for(let o=0;o<c.length;o++)n.writeFixed32(c[o])}function pv(c,n){for(let o=0;o<c.length;o++)n.writeSFixed32(c[o])}function mv(c,n){for(let o=0;o<c.length;o++)n.writeFixed64(c[o])}function gv(c,n){for(let o=0;o<c.length;o++)n.writeSFixed64(c[o])}function yv(c,n,o){c===1&&o.readMessage(vv,n)}function vv(c,n,o){if(c===3){const{id:f,bitmap:v,width:w,height:A,left:P,top:I,advance:D}=o.readMessage(wp,{});n.push({id:f,bitmap:new $c({width:w+6,height:A+6},v),metrics:{width:w,height:A,left:P,top:I,advance:D}})}}function wp(c,n,o){c===1?n.id=o.readVarint():c===2?n.bitmap=o.readBytes():c===3?n.width=o.readVarint():c===4?n.height=o.readVarint():c===5?n.left=o.readSVarint():c===6?n.top=o.readSVarint():c===7&&(n.advance=o.readVarint())}function mg(c){let n=0,o=0;for(const A of c)n+=A.w*A.h,o=Math.max(o,A.w);c.sort((A,P)=>P.h-A.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),o),h:1/0}];let v=0,w=0;for(const A of c)for(let P=f.length-1;P>=0;P--){const I=f[P];if(!(A.w>I.w||A.h>I.h)){if(A.x=I.x,A.y=I.y,w=Math.max(w,A.y+A.h),v=Math.max(v,A.x+A.w),A.w===I.w&&A.h===I.h){const D=f.pop();D&&P<f.length&&(f[P]=D)}else A.h===I.h?(I.x+=A.w,I.w-=A.w):A.w===I.w?(I.y+=A.h,I.h-=A.h):(f.push({x:I.x+A.w,y:I.y,w:I.w-A.w,h:A.h}),I.y+=A.h,I.h-=A.h);break}}return{w:v,h:w,fill:n/(v*w)||0}}class Sp{constructor(n,{pixelRatio:o,version:f,stretchX:v,stretchY:w,content:A,textFitWidth:P,textFitHeight:I}){this.paddedRect=n,this.pixelRatio=o,this.stretchX=v,this.stretchY=w,this.content=A,this.version=f,this.textFitWidth=P,this.textFitHeight=I}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class xn{constructor(n,o){const f={},v={};this.haveRenderCallbacks=[];const w=[];this.addImages(n,f,w),this.addImages(o,v,w);const{w:A,h:P}=mg(w),I=new Ei({width:A||1,height:P||1});for(const D in n){const B=n[D],V=f[D].paddedRect;Ei.copy(B.data,I,{x:0,y:0},{x:V.x+1,y:V.y+1},B.data)}for(const D in o){const B=o[D],V=v[D].paddedRect,W=V.x+1,K=V.y+1,te=B.data.width,le=B.data.height;Ei.copy(B.data,I,{x:0,y:0},{x:W,y:K},B.data),Ei.copy(B.data,I,{x:0,y:le-1},{x:W,y:K-1},{width:te,height:1}),Ei.copy(B.data,I,{x:0,y:0},{x:W,y:K+le},{width:te,height:1}),Ei.copy(B.data,I,{x:te-1,y:0},{x:W-1,y:K},{width:1,height:le}),Ei.copy(B.data,I,{x:0,y:0},{x:W+te,y:K},{width:1,height:le})}this.image=I,this.iconPositions=f,this.patternPositions=v}addImages(n,o,f){for(const v in n){const w=n[v],A={x:0,y:0,w:w.data.width+2,h:w.data.height+2};f.push(A),o[v]=new Sp(A,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(n,o){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in n.updatedImages)this.patchUpdatedImage(this.iconPositions[f],n.getImage(f),o),this.patchUpdatedImage(this.patternPositions[f],n.getImage(f),o)}patchUpdatedImage(n,o,f){if(!n||!o||n.version===o.version)return;n.version=o.version;const[v,w]=n.tl;f.update(o.data,void 0,{x:v,y:w})}}var rl;Nt("ImagePosition",Sp),Nt("ImageAtlas",xn),m.ao=void 0,(rl=m.ao||(m.ao={}))[rl.none=0]="none",rl[rl.horizontal=1]="horizontal",rl[rl.vertical=2]="vertical",rl[rl.horizontalOnly=3]="horizontalOnly";class of{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(n,o,f){const v=new of;return v.scale=n||1,v.fontStack=o,v.verticalAlign=f||"bottom",v}static forImage(n,o){const f=new of;return f.imageName=n,f.verticalAlign=o||"bottom",f}}class Iu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,o){const f=new Iu;for(let v=0;v<n.sections.length;v++){const w=n.sections[v];w.image?f.addImageSection(w):f.addTextSection(w,o)}return f}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let o="";for(let f=0;f<n.length;f++){const v=n.charCodeAt(f+1)||null,w=n.charCodeAt(f-1)||null;o+=v&&Nc(v)&&!tl[n[f+1]]||w&&Nc(w)&&!tl[n[f-1]]||!tl[n[f]]?n[f]:tl[n[f]]}return o}(this.text)}trim(){let n=0;for(let f=0;f<this.text.length&&Ap[this.text.charCodeAt(f)];f++)n++;let o=this.text.length;for(let f=this.text.length-1;f>=0&&f>=n&&Ap[this.text.charCodeAt(f)];f--)o--;this.text=this.text.substring(n,o),this.sectionIndex=this.sectionIndex.slice(n,o)}substring(n,o){const f=new Iu;return f.text=this.text.substring(n,o),f.sectionIndex=this.sectionIndex.slice(n,o),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,o)=>Math.max(n,this.sections[o].scale),0)}getMaxImageSize(n){let o=0,f=0;for(let v=0;v<this.length();v++){const w=this.getSection(v);if(w.imageName){const A=n[w.imageName];if(!A)continue;const P=A.displaySize;o=Math.max(o,P[0]),f=Math.max(f,P[1])}}return{maxImageWidth:o,maxImageHeight:f}}addTextSection(n,o){this.text+=n.text,this.sections.push(of.forText(n.scale,n.fontStack||o,n.verticalAlign));const f=this.sections.length-1;for(let v=0;v<n.text.length;++v)this.sectionIndex.push(f)}addImageSection(n){const o=n.image?n.image.name:"";if(o.length===0)return void Jt("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(of.forImage(o,n.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Jt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Tp(c,n,o,f,v,w,A,P,I,D,B,V,W,K,te){const le=Iu.fromFeature(c,v);let de;V===m.ao.vertical&&le.verticalizePunctuation();const{processBidirectionalText:ve,processStyledBidirectionalText:Be}=gs;if(ve&&le.sections.length===1){de=[];const Ke=ve(le.toString(),ts(le,D,w,n,f,K));for(const ot of Ke){const gt=new Iu;gt.text=ot,gt.sections=le.sections;for(let Pt=0;Pt<ot.length;Pt++)gt.sectionIndex.push(0);de.push(gt)}}else if(Be){de=[];const Ke=Be(le.text,le.sectionIndex,ts(le,D,w,n,f,K));for(const ot of Ke){const gt=new Iu;gt.text=ot[0],gt.sectionIndex=ot[1],gt.sections=le.sections,de.push(gt)}}else de=function(Ke,ot){const gt=[],Pt=Ke.text;let Mt=0;for(const Ct of ot)gt.push(Ke.substring(Mt,Ct)),Mt=Ct;return Mt<Pt.length&&gt.push(Ke.substring(Mt,Pt.length)),gt}(le,ts(le,D,w,n,f,K));const Me=[],Ce={positionedLines:Me,text:le.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(Ke,ot,gt,Pt,Mt,Ct,Ut,It,kt,ft,nr,sr){let Zt=0,Vt=0,Cr=0,bn=0;const Hn=It==="right"?1:It==="left"?0:.5,Ci=yi/sr;let ia=0;for(const An of Mt){An.trim();const Ti=An.getMaxScale(),si={positionedGlyphs:[],lineOffset:0};Ke.positionedLines[ia]=si;const s=si.positionedGlyphs;let h=0;if(!An.length()){Vt+=Ct,++ia;continue}const g=Gx(Pt,An,Ci);for(let O=0;O<An.length();O++){const z=An.getSection(O),Y=An.getSectionIndex(O),ue=An.getCharCode(O),je=_v(kt,nr,ue);let Ue;if(z.imageName){if(Ke.iconsInText=!0,z.scale=z.scale*Ci,Ue=bv(z,je,Ti,g,Pt),!Ue)continue;h=Math.max(h,Ue.imageOffset)}else if(Ue=xv(z,ue,je,g,ot,gt),!Ue)continue;const{rect:pt,metrics:bt,baselineOffset:nt}=Ue;s.push({glyph:ue,imageName:z.imageName,x:Zt,y:Vt+nt+-17,vertical:je,scale:z.scale,fontStack:z.fontStack,sectionIndex:Y,metrics:bt,rect:pt}),je?(Ke.verticalizable=!0,Zt+=(z.imageName?bt.advance:yi)*z.scale+ft):Zt+=bt.advance*z.scale+ft}s.length!==0&&(Cr=Math.max(Zt-ft,Cr),Zx(s,0,s.length-1,Hn)),Zt=0,si.lineOffset=Math.max(h,(Ti-1)*yi);const T=Ct*Ti+h;Vt+=T,bn=Math.max(T,bn),++ia}const{horizontalAlign:aa,verticalAlign:oi}=Nu(Ut);(function(An,Ti,si,s,h,g,T,O,z){const Y=(Ti-si)*h;let ue=0;ue=g!==T?-O*s- -17:-s*z*T+.5*T;for(const je of An)for(const Ue of je.positionedGlyphs)Ue.x+=Y,Ue.y+=ue})(Ke.positionedLines,Hn,aa,oi,Cr,bn,Ct,Vt,Mt.length),Ke.top+=-oi*Vt,Ke.bottom=Ke.top+Vt,Ke.left+=-aa*Cr,Ke.right=Ke.left+Cr}(Ce,n,o,f,de,A,P,I,V,D,W,te),!function(Ke){for(const ot of Ke)if(ot.positionedGlyphs.length!==0)return!1;return!0}(Me)&&Ce}const Ap={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Vx={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Mp={40:!0};function ku(c,n,o,f,v,w){if(n.imageName){const A=f[n.imageName];return A?A.displaySize[0]*n.scale*yi/w+v:0}{const A=o[n.fontStack],P=A&&A[c];return P?P.metrics.advance*n.scale+v:0}}function jp(c,n,o,f){const v=Math.pow(c-n,2);return f?c<n?v/2:2*v:v+Math.abs(o)*o}function Pp(c,n,o){let f=0;return c===10&&(f-=1e4),o&&(f+=150),c!==40&&c!==65288||(f+=50),n!==41&&n!==65289||(f+=50),f}function Ep(c,n,o,f,v,w){let A=null,P=jp(n,o,v,w);for(const I of f){const D=jp(n-I.x,o,v,w)+I.badness;D<=P&&(A=I,P=D)}return{index:c,x:n,priorBreak:A,badness:P}}function Hc(c){return c?Hc(c.priorBreak).concat(c.index):[]}function ts(c,n,o,f,v,w){if(!c)return[];const A=[],P=function(V,W,K,te,le,de){let ve=0;for(let Be=0;Be<V.length();Be++){const Me=V.getSection(Be);ve+=ku(V.getCharCode(Be),Me,te,le,W,de)}return ve/Math.max(1,Math.ceil(ve/K))}(c,n,o,f,v,w),I=c.text.indexOf("​")>=0;let D=0;for(let V=0;V<c.length();V++){const W=c.getSection(V),K=c.getCharCode(V);if(Ap[K]||(D+=ku(K,W,f,v,n,w)),V<c.length()-1){const te=!((B=K)<11904)&&(!!wr["CJK Compatibility Forms"](B)||!!wr["CJK Compatibility"](B)||!!wr["CJK Strokes"](B)||!!wr["CJK Symbols and Punctuation"](B)||!!wr["Enclosed CJK Letters and Months"](B)||!!wr["Halfwidth and Fullwidth Forms"](B)||!!wr["Ideographic Description Characters"](B)||!!wr["Vertical Forms"](B)||Ih.test(String.fromCodePoint(B)));(Vx[K]||te||W.imageName||V!==c.length()-2&&Mp[c.getCharCode(V+1)])&&A.push(Ep(V+1,D,P,A,Pp(K,c.getCharCode(V+1),te&&I),!1))}}var B;return Hc(Ep(c.length(),D,P,A,0,!0))}function Nu(c){let n=.5,o=.5;switch(c){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:n,verticalAlign:o}}function Gx(c,n,o){const f=n.getMaxScale()*yi,{maxImageWidth:v,maxImageHeight:w}=n.getMaxImageSize(c),A=Math.max(f,w*o);return{verticalLineContentWidth:Math.max(f,v*o),horizontalLineContentHeight:A}}function gg(c){switch(c){case"top":return 0;case"center":return .5;default:return 1}}function _v(c,n,o){return!(c===m.ao.horizontal||!n&&!Us(o)||n&&(Ap[o]||(f=o,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(f)))));var f}function xv(c,n,o,f,v,w){const A=w[c.fontStack],P=function(D,B,V,W){if(D&&D.rect)return D;const K=B[V.fontStack],te=K&&K[W];return te?{rect:null,metrics:te.metrics}:null}(A&&A[n],v,c,n);if(P===null)return null;let I;if(o)I=f.verticalLineContentWidth-c.scale*yi;else{const D=gg(c.verticalAlign);I=(f.horizontalLineContentHeight-c.scale*yi)*D}return{rect:P.rect,metrics:P.metrics,baselineOffset:I}}function bv(c,n,o,f,v){const w=v[c.imageName];if(!w)return null;const A=w.paddedRect,P=w.displaySize,I={width:P[0],height:P[1],left:1,top:-3,advance:n?P[1]:P[0]};let D;if(n)D=f.verticalLineContentWidth-P[1]*c.scale;else{const B=gg(c.verticalAlign);D=(f.horizontalLineContentHeight-P[1]*c.scale)*B}return{rect:A,metrics:I,baselineOffset:D,imageOffset:(n?P[0]:P[1])*c.scale-yi*o}}function Zx(c,n,o,f){if(f===0)return;const v=c[o],w=(c[o].x+v.metrics.advance*v.scale)*f;for(let A=n;A<=o;A++)c[A].x-=w}function yg(c,n,o){const{horizontalAlign:f,verticalAlign:v}=Nu(o),w=n[0]-c.displaySize[0]*f,A=n[1]-c.displaySize[1]*v;return{image:c,top:A,bottom:A+c.displaySize[1],left:w,right:w+c.displaySize[0]}}function vg(c){var n,o;let f=c.left,v=c.top,w=c.right-f,A=c.bottom-v;const P=(n=c.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",I=(o=c.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",D=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(I==="proportional"){if(P==="stretchOnly"&&w/A<D||P==="proportional"){const B=Math.ceil(A*D);f*=B/w,w=B}}else if(P==="proportional"&&I==="stretchOnly"&&D!==0&&w/A>D){const B=Math.ceil(w/D);v*=B/A,A=B}return{x1:f,y1:v,x2:f+w,y2:v+A}}function _g(c,n,o,f,v,w){const A=c.image;let P;if(A.content){const de=A.content,ve=A.pixelRatio||1;P=[de[0]/ve,de[1]/ve,A.displaySize[0]-de[2]/ve,A.displaySize[1]-de[3]/ve]}const I=n.left*w,D=n.right*w;let B,V,W,K;o==="width"||o==="both"?(K=v[0]+I-f[3],V=v[0]+D+f[1]):(K=v[0]+(I+D-A.displaySize[0])/2,V=K+A.displaySize[0]);const te=n.top*w,le=n.bottom*w;return o==="height"||o==="both"?(B=v[1]+te-f[0],W=v[1]+le+f[2]):(B=v[1]+(te+le-A.displaySize[1])/2,W=B+A.displaySize[1]),{image:A,top:B,right:V,bottom:W,left:K,collisionPadding:P}}const Ql=128,nl=32640;function Cp(c,n){const{expression:o}=n;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new an(c+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:v}=o;let w=0;for(;w<f.length&&f[w]<=c;)w++;w=Math.max(0,w-1);let A=w;for(;A<f.length&&f[A]<c+1;)A++;A=Math.min(f.length-1,A);const P=f[w],I=f[A];return o.kind==="composite"?{kind:"composite",minZoom:P,maxZoom:I,interpolationType:v}:{kind:"camera",minZoom:P,maxZoom:I,minSize:o.evaluate(new an(P)),maxSize:o.evaluate(new an(I)),interpolationType:v}}}function xg(c,n,o){let f="never";const v=c.get(n);return v?f=v:c.get(o)&&(f="always"),f}const Hx=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Xc(c,n,o,f,v,w,A,P,I,D,B,V,W){const K=P?Math.min(nl,Math.round(P[0])):0,te=P?Math.min(nl,Math.round(P[1])):0;c.emplaceBack(n,o,Math.round(32*f),Math.round(32*v),w,A,(K<<1)+(I?1:0),te,16*D,16*B,256*V,256*W)}function bg(c,n,o){c.emplaceBack(n.x,n.y,o),c.emplaceBack(n.x,n.y,o),c.emplaceBack(n.x,n.y,o),c.emplaceBack(n.x,n.y,o)}function wv(c){for(const n of c.sections)if(wu(n.text))return!0;return!1}class kr{constructor(n){this.layoutVertexArray=new At,this.indexArray=new Wr,this.programConfigurations=n,this.segments=new Tr,this.dynamicLayoutVertexArray=new yt,this.opacityVertexArray=new Bt,this.hasVisibleVertices=!1,this.placedSymbolArray=new Q}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,o,f,v){this.isEmpty()||(f&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,lv.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,cv.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,Hx,!0),this.opacityVertexBuffer.itemSize=1),(f||v)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Nt("SymbolBuffers",kr);class sf{constructor(n,o,f){this.layoutVertexArray=new n,this.layoutAttributes=o,this.indexArray=new f,this.segments=new Tr,this.collisionVertexArray=new Xr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,qx.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Nt("CollisionBuffers",sf);class Jl{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=Ii(globalThis)?Math.min(n.overscaling,128):n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(A=>A.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Cp(this.zoom,o["text-size"]),this.iconSizeData=Cp(this.zoom,o["icon-size"]);const f=this.layers[0].layout,v=f.get("symbol-sort-key"),w=f.get("symbol-z-order");this.canOverlap=xg(f,"text-overlap","text-allow-overlap")!=="never"||xg(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(A=>m.ao[A])),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id),this.sourceID=n.sourceID}createArrays(){this.text=new kr(new ba(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new kr(new ba(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new pe,this.lineVertexArray=new ye,this.symbolInstances=new me,this.textAnchorOffsets=new Ae}calculateGlyphDependencies(n,o,f,v,w){for(let A=0;A<n.length;A++)if(o[n.charCodeAt(A)]=!0,(f||v)&&w){const P=tl[n.charAt(A)];P&&(o[P.charCodeAt(0)]=!0)}}populate(n,o,f){const v=this.layers[0],w=v.layout,A=w.get("text-font"),P=w.get("text-field"),I=w.get("icon-image"),D=(P.value.kind!=="constant"||P.value.value instanceof Qi&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(A.value.kind!=="constant"||A.value.value.length>0),B=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,V=w.get("symbol-sort-key");if(this.features=[],!D&&!B)return;const W=o.iconDependencies,K=o.glyphDependencies,te=o.availableImages,le=new an(this.zoom);for(const{feature:de,id:ve,index:Be,sourceLayerIndex:Me}of n){const Ce=v._featureFilter.needGeometry,Ke=Fc(de,Ce);if(!v._featureFilter.filter(le,Ke,f))continue;let ot,gt;if(Ce||(Ke.geometry=Ks(de)),D){const Mt=v.getValueAndResolveTokens("text-field",Ke,f,te),Ct=Qi.factory(Mt),Ut=this.hasRTLText=this.hasRTLText||wv(Ct);(!Ut||gs.getRTLTextPluginStatus()==="unavailable"||Ut&&gs.isParsed())&&(ot=fg(Ct,v,Ke))}if(B){const Mt=v.getValueAndResolveTokens("icon-image",Ke,f,te);gt=Mt instanceof ti?Mt:ti.fromString(Mt)}if(!ot&&!gt)continue;const Pt=this.sortFeaturesByKey?V.evaluate(Ke,{},f):void 0;if(this.features.push({id:ve,text:ot,icon:gt,index:Be,sourceLayerIndex:Me,geometry:Ke.geometry,properties:de.properties,type:Ir.types[de.type],sortKey:Pt}),gt&&(W[gt.name]=!0),ot){const Mt=A.evaluate(Ke,{},f).join(","),Ct=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(m.ao.vertical)>=0;for(const Ut of ot.sections)if(Ut.image)W[Ut.image.name]=!0;else{const It=kc(ot.toString()),kt=Ut.fontStack||Mt,ft=K[kt]=K[kt]||{};this.calculateGlyphDependencies(Ut.text,ft,Ct,this.allowVerticalPlacement,It)}}}w.get("symbol-placement")==="line"&&(this.features=function(de){const ve={},Be={},Me=[];let Ce=0;function Ke(Mt){Me.push(de[Mt]),Ce++}function ot(Mt,Ct,Ut){const It=Be[Mt];return delete Be[Mt],Be[Ct]=It,Me[It].geometry[0].pop(),Me[It].geometry[0]=Me[It].geometry[0].concat(Ut[0]),It}function gt(Mt,Ct,Ut){const It=ve[Ct];return delete ve[Ct],ve[Mt]=It,Me[It].geometry[0].shift(),Me[It].geometry[0]=Ut[0].concat(Me[It].geometry[0]),It}function Pt(Mt,Ct,Ut){const It=Ut?Ct[0][Ct[0].length-1]:Ct[0][0];return`${Mt}:${It.x}:${It.y}`}for(let Mt=0;Mt<de.length;Mt++){const Ct=de[Mt],Ut=Ct.geometry,It=Ct.text?Ct.text.toString():null;if(!It){Ke(Mt);continue}const kt=Pt(It,Ut),ft=Pt(It,Ut,!0);if(kt in Be&&ft in ve&&Be[kt]!==ve[ft]){const nr=gt(kt,ft,Ut),sr=ot(kt,ft,Me[nr].geometry);delete ve[kt],delete Be[ft],Be[Pt(It,Me[sr].geometry,!0)]=sr,Me[nr].geometry=null}else kt in Be?ot(kt,ft,Ut):ft in ve?gt(kt,ft,Ut):(Ke(Mt),ve[kt]=Ce-1,Be[ft]=Ce-1)}return Me.filter(Mt=>Mt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((de,ve)=>de.sortKey-ve.sortKey)}update(n,o,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,o,this.layers,{imagePositions:f}),this.icon.programConfigurations.updatePaintArrays(n,o,this.layers,{imagePositions:f}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,o){const f=this.lineVertexArray.length;if(n.segment!==void 0){let v=n.dist(o[n.segment+1]),w=n.dist(o[n.segment]);const A={};for(let P=n.segment+1;P<o.length;P++)A[P]={x:o[P].x,y:o[P].y,tileUnitDistanceFromAnchor:v},P<o.length-1&&(v+=o[P+1].dist(o[P]));for(let P=n.segment||0;P>=0;P--)A[P]={x:o[P].x,y:o[P].y,tileUnitDistanceFromAnchor:w},P>0&&(w+=o[P-1].dist(o[P]));for(let P=0;P<o.length;P++){const I=A[P];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(n,o,f,v,w,A,P,I,D,B,V,W){const K=n.indexArray,te=n.layoutVertexArray,le=n.segments.prepareSegment(4*o.length,te,K,this.canOverlap?A.sortKey:void 0),de=this.glyphOffsetArray.length,ve=le.vertexLength,Be=this.allowVerticalPlacement&&P===m.ao.vertical?Math.PI/2:0,Me=A.text&&A.text.sections;for(let Ce=0;Ce<o.length;Ce++){const{tl:Ke,tr:ot,bl:gt,br:Pt,tex:Mt,pixelOffsetTL:Ct,pixelOffsetBR:Ut,minFontScaleX:It,minFontScaleY:kt,glyphOffset:ft,isSDF:nr,sectionIndex:sr}=o[Ce],Zt=le.vertexLength,Vt=ft[1];Xc(te,I.x,I.y,Ke.x,Vt+Ke.y,Mt.x,Mt.y,f,nr,Ct.x,Ct.y,It,kt),Xc(te,I.x,I.y,ot.x,Vt+ot.y,Mt.x+Mt.w,Mt.y,f,nr,Ut.x,Ct.y,It,kt),Xc(te,I.x,I.y,gt.x,Vt+gt.y,Mt.x,Mt.y+Mt.h,f,nr,Ct.x,Ut.y,It,kt),Xc(te,I.x,I.y,Pt.x,Vt+Pt.y,Mt.x+Mt.w,Mt.y+Mt.h,f,nr,Ut.x,Ut.y,It,kt),bg(n.dynamicLayoutVertexArray,I,Be),K.emplaceBack(Zt,Zt+2,Zt+1),K.emplaceBack(Zt+1,Zt+2,Zt+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ft[0]),Ce!==o.length-1&&sr===o[Ce+1].sectionIndex||n.programConfigurations.populatePaintArrays(te.length,A,A.index,{imagePositions:{},canonical:W,formattedSection:Me&&Me[sr]})}n.placedSymbolArray.emplaceBack(I.x,I.y,de,this.glyphOffsetArray.length-de,ve,D,B,I.segment,f?f[0]:0,f?f[1]:0,v[0],v[1],P,0,!1,0,V)}_addCollisionDebugVertex(n,o,f,v,w,A){return o.emplaceBack(0,0),n.emplaceBack(f.x,f.y,v,w,Math.round(A.x),Math.round(A.y))}addCollisionDebugVertices(n,o,f,v,w,A,P){const I=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),D=I.vertexLength,B=w.layoutVertexArray,V=w.collisionVertexArray,W=P.anchorX,K=P.anchorY;this._addCollisionDebugVertex(B,V,A,W,K,new M(n,o)),this._addCollisionDebugVertex(B,V,A,W,K,new M(f,o)),this._addCollisionDebugVertex(B,V,A,W,K,new M(f,v)),this._addCollisionDebugVertex(B,V,A,W,K,new M(n,v)),I.vertexLength+=4;const te=w.indexArray;te.emplaceBack(D,D+1),te.emplaceBack(D+1,D+2),te.emplaceBack(D+2,D+3),te.emplaceBack(D+3,D),I.primitiveLength+=4}addDebugCollisionBoxes(n,o,f,v){for(let w=n;w<o;w++){const A=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(A.x1,A.y1,A.x2,A.y2,v?this.textCollisionBox:this.iconCollisionBox,A.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sf(lr,Kl.members,cn),this.iconCollisionBox=new sf(lr,Kl.members,cn);for(let n=0;n<this.symbolInstances.length;n++){const o=this.symbolInstances.get(n);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(n,o,f,v,w,A,P,I,D){const B={};for(let V=o;V<f;V++){const W=n.get(V);B.textBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},B.textFeatureIndex=W.featureIndex;break}for(let V=v;V<w;V++){const W=n.get(V);B.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},B.verticalTextFeatureIndex=W.featureIndex;break}for(let V=A;V<P;V++){const W=n.get(V);B.iconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},B.iconFeatureIndex=W.featureIndex;break}for(let V=I;V<D;V++){const W=n.get(V);B.verticalIconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},B.verticalIconFeatureIndex=W.featureIndex;break}return B}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const f=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,o){const f=n.placedSymbolArray.get(o),v=f.vertexStartIndex+4*f.numGlyphs;for(let w=f.vertexStartIndex;w<v;w+=4)n.indexArray.emplaceBack(w,w+2,w+1),n.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(n),f=Math.cos(n),v=[],w=[],A=[];for(let P=0;P<this.symbolInstances.length;++P){A.push(P);const I=this.symbolInstances.get(P);v.push(0|Math.round(o*I.anchorX+f*I.anchorY)),w.push(I.featureIndex)}return A.sort((P,I)=>v[P]-v[I]||w[I]-w[P]),A}addToSortKeyRanges(n,o){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===o?f.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const f=this.symbolInstances.get(o);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((v,w,A)=>{v>=0&&A.indexOf(v)===w&&this.addIndicesForPlacedSymbol(this.text,v)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Op,wg;Nt("SymbolBucket",Jl,{omit:["layers","collisionBoxArray","features","compareText"]}),Jl.MAX_GLYPHS=65535,Jl.addDynamicAttributes=bg;var lf={get paint(){return wg=wg||new ji({"icon-opacity":new Xt(Ve.paint_symbol["icon-opacity"]),"icon-color":new Xt(Ve.paint_symbol["icon-color"]),"icon-halo-color":new Xt(Ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new Xt(Ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Xt(Ve.paint_symbol["icon-halo-blur"]),"icon-translate":new Lt(Ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new Lt(Ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new Xt(Ve.paint_symbol["text-opacity"]),"text-color":new Xt(Ve.paint_symbol["text-color"],{runtimeType:vi,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Xt(Ve.paint_symbol["text-halo-color"]),"text-halo-width":new Xt(Ve.paint_symbol["text-halo-width"]),"text-halo-blur":new Xt(Ve.paint_symbol["text-halo-blur"]),"text-translate":new Lt(Ve.paint_symbol["text-translate"]),"text-translate-anchor":new Lt(Ve.paint_symbol["text-translate-anchor"])})},get layout(){return Op=Op||new ji({"symbol-placement":new Lt(Ve.layout_symbol["symbol-placement"]),"symbol-spacing":new Lt(Ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Lt(Ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Xt(Ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Lt(Ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Lt(Ve.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Lt(Ve.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Lt(Ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new Lt(Ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Lt(Ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new Xt(Ve.layout_symbol["icon-size"]),"icon-text-fit":new Lt(Ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Lt(Ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new Xt(Ve.layout_symbol["icon-image"]),"icon-rotate":new Xt(Ve.layout_symbol["icon-rotate"]),"icon-padding":new Xt(Ve.layout_symbol["icon-padding"]),"icon-keep-upright":new Lt(Ve.layout_symbol["icon-keep-upright"]),"icon-offset":new Xt(Ve.layout_symbol["icon-offset"]),"icon-anchor":new Xt(Ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Lt(Ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Lt(Ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Lt(Ve.layout_symbol["text-rotation-alignment"]),"text-field":new Xt(Ve.layout_symbol["text-field"]),"text-font":new Xt(Ve.layout_symbol["text-font"]),"text-size":new Xt(Ve.layout_symbol["text-size"]),"text-max-width":new Xt(Ve.layout_symbol["text-max-width"]),"text-line-height":new Lt(Ve.layout_symbol["text-line-height"]),"text-letter-spacing":new Xt(Ve.layout_symbol["text-letter-spacing"]),"text-justify":new Xt(Ve.layout_symbol["text-justify"]),"text-radial-offset":new Xt(Ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Lt(Ve.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Xt(Ve.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Xt(Ve.layout_symbol["text-anchor"]),"text-max-angle":new Lt(Ve.layout_symbol["text-max-angle"]),"text-writing-mode":new Lt(Ve.layout_symbol["text-writing-mode"]),"text-rotate":new Xt(Ve.layout_symbol["text-rotate"]),"text-padding":new Lt(Ve.layout_symbol["text-padding"]),"text-keep-upright":new Lt(Ve.layout_symbol["text-keep-upright"]),"text-transform":new Xt(Ve.layout_symbol["text-transform"]),"text-offset":new Xt(Ve.layout_symbol["text-offset"]),"text-allow-overlap":new Lt(Ve.layout_symbol["text-allow-overlap"]),"text-overlap":new Lt(Ve.layout_symbol["text-overlap"]),"text-ignore-placement":new Lt(Ve.layout_symbol["text-ignore-placement"]),"text-optional":new Lt(Ve.layout_symbol["text-optional"])})}};class ed{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Yn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(n.formattedSection))return o.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Nt("FormatSectionOverride",ed,{omit:["defaultValue"]});class Ru extends Wa{constructor(n,o){super(n,lf,o)}recalculate(n,o){if(super.recalculate(n,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const v=[];for(const w of f)v.indexOf(w)<0&&v.push(w);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,o,f,v){const w=this.layout.get(n).evaluate(o,{},f,v),A=this._unevaluatedLayout._values[n];return A.isDataDriven()||us(A.value)||!w?w:function(P,I){return I.replace(/{([^{}]+)}/g,(D,B)=>P&&B in P?String(P[B]):"")}(o.properties,w)}createBucket(n){return new Jl(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of lf.paint.overridableProperties){if(!Ru.hasPaintOverride(this.layout,n))continue;const o=this.paint.get(n),f=new ed(o),v=new zs(f,o.property.specification);let w=null;w=o.value.kind==="constant"||o.value.kind==="source"?new Dl("source",v):new Ji("composite",v,o.value.zoomStops),this.paint._values[n]=new qi(o.property,w,o.parameters)}}_handleOverridablePaintPropertyUpdate(n,o,f){return!(!this.layout||o.isDataDriven()||f.isDataDriven())&&Ru.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,o){const f=n.get("text-field"),v=lf.paint.properties[o];let w=!1;const A=P=>{for(const I of P)if(v.overrides&&v.overrides.hasOverride(I))return void(w=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Qi)A(f.value.value.sections);else if(f.value.kind==="source"||f.value.kind==="composite"){const P=D=>{w||(D instanceof ur&&vn(D.value)===Oo?A(D.value.sections):D instanceof _h?A(D.sections):D.eachChild(P))},I=f.value;I._styleExpression&&P(I._styleExpression.expression)}return w}}let Du;var Sv={get paint(){return Du=Du||new ji({"background-color":new Lt(Ve.paint_background["background-color"]),"background-pattern":new Fn(Ve.paint_background["background-pattern"]),"background-opacity":new Lt(Ve.paint_background["background-opacity"])})}};class Xx extends Wa{constructor(n,o){super(n,Sv,o)}}class Wx extends Wa{constructor(n,o){super(n,{},o),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Tv{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Av={once:!0},td=63710088e-1;class Gr{constructor(n,o){if(isNaN(n)||isNaN(o))throw new Error(`Invalid LngLat object: (${n}, ${o})`);if(this.lng=+n,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Gr(yr(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const o=Math.PI/180,f=this.lat*o,v=n.lat*o,w=Math.sin(f)*Math.sin(v)+Math.cos(f)*Math.cos(v)*Math.cos((n.lng-this.lng)*o);return td*Math.acos(Math.min(w,1))}static convert(n){if(n instanceof Gr)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Gr(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Gr(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ip=2*Math.PI*td;function Zi(c){return Ip*Math.cos(c*Math.PI/180)}function Mv(c){return(180+c)/360}function kp(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function Np(c,n){return c/Zi(n)}function rd(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function Sg(c,n){return c*Zi(rd(n))}class nd{constructor(n,o,f=0){this.x=+n,this.y=+o,this.z=+f}static fromLngLat(n,o=0){const f=Gr.convert(n);return new nd(Mv(f.lng),kp(f.lat),Np(o,f.lat))}toLngLat(){return new Gr(360*this.x-180,rd(this.y))}toAltitude(){return Sg(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ip*(n=rd(this.y),1/Math.cos(n*Math.PI/180));var n}}function Rp(c,n,o){var f=2*Math.PI*6378137/256/Math.pow(2,o);return[c*f-2*Math.PI*6378137/2,n*f-2*Math.PI*6378137/2]}class cf{constructor(n,o,f){if(!function(v,w,A){return!(v<0||v>25||A<0||A>=Math.pow(2,v)||w<0||w>=Math.pow(2,v))}(n,o,f))throw new Error(`x=${o}, y=${f}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=o,this.y=f,this.key=id(0,n,n,o,f)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,o,f){const v=(A=this.y,P=this.z,I=Rp(256*(w=this.x),256*(A=Math.pow(2,P)-A-1),P),D=Rp(256*(w+1),256*(A+1),P),I[0]+","+I[1]+","+D[0]+","+D[1]);var w,A,P,I,D;const B=function(V,W,K){let te,le="";for(let de=V;de>0;de--)te=1<<de-1,le+=(W&te?1:0)+(K&te?2:0);return le}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,B).replace(/{bbox-epsg-3857}/g,v)}isChildOf(n){const o=this.z-n.z;return o>0&&n.x===this.x>>o&&n.y===this.y>>o}getTilePoint(n){const o=Math.pow(2,this.z);return new M((n.x*o-this.x)*dt,(n.y*o-this.y)*dt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class jv{constructor(n,o){this.wrap=n,this.canonical=o,this.key=id(n,o.z,o.z,o.x,o.y)}}class no{constructor(n,o,f,v,w){if(this.terrainRttPosMatrix32f=null,n<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${f}`);this.overscaledZ=n,this.wrap=o,this.canonical=new cf(f,+v,+w),this.key=id(o,n,f,v,w)}clone(){return new no(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-n;return n>this.canonical.z?new no(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new no(n,this.wrap,n,this.canonical.x>>o,this.canonical.y>>o)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(n,o){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-n;return n>this.canonical.z?id(this.wrap*+o,n,this.canonical.z,this.canonical.x,this.canonical.y):id(this.wrap*+o,n,n,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(n){if(n.wrap!==this.wrap||this.overscaledZ-n.overscaledZ<=0)return!1;if(n.overscaledZ===0)return this.overscaledZ>0;const o=this.canonical.z-n.canonical.z;return!(o<0)&&n.canonical.x===this.canonical.x>>o&&n.canonical.y===this.canonical.y>>o}children(n){if(this.overscaledZ>=n)return[new no(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,f=2*this.canonical.x,v=2*this.canonical.y;return[new no(o,this.wrap,o,f,v),new no(o,this.wrap,o,f+1,v),new no(o,this.wrap,o,f,v+1),new no(o,this.wrap,o,f+1,v+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new no(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new no(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new jv(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new nd(n.x-this.wrap,n.y))}}function id(c,n,o,f,v){(c*=2)<0&&(c=-1*c-1);const w=1<<o;return(w*w*c+w*v+f).toString(36)+o.toString(36)+n.toString(36)}function ad(c,n){return n?c.properties[n]:c.id}Nt("CanonicalTileID",cf),Nt("OverscaledTileID",no,{omit:["terrainRttPosMatrix32f"]});class zu{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(n){return this.minX=Math.min(this.minX,n.x),this.minY=Math.min(this.minY,n.y),this.maxX=Math.max(this.maxX,n.x),this.maxY=Math.max(this.maxY,n.y),this}expandBy(n){return this.minX-=n,this.minY-=n,this.maxX+=n,this.maxY+=n,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(n){return this.expandBy(-n)}map(n){const o=new zu;return o.extend(n(new M(this.minX,this.minY))),o.extend(n(new M(this.maxX,this.minY))),o.extend(n(new M(this.minX,this.maxY))),o.extend(n(new M(this.maxX,this.maxY))),o}static fromPoints(n){const o=new zu;for(const f of n)o.extend(f);return o}contains(n){return n.x>=this.minX&&n.x<=this.maxX&&n.y>=this.minY&&n.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(n){return!this.empty()&&!n.empty()&&n.minX>=this.minX&&n.maxX<=this.maxX&&n.minY>=this.minY&&n.maxY<=this.maxY}intersects(n){return!this.empty()&&!n.empty()&&n.minX<=this.maxX&&n.maxX>=this.minX&&n.minY<=this.maxY&&n.maxY>=this.minY}}class Pv{constructor(n){this._stringToNumber={},this._numberToString=[];for(let o=0;o<n.length;o++){const f=n[o];this._stringToNumber[f]=o,this._numberToString[o]=f}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class ec{constructor(n,o,f,v,w){this.type="Feature",this._vectorTileFeature=n,n._z=o,n._x=f,n._y=v,this.properties=n.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(n[o]=this[o]);return n}}class Tg{constructor(n,o){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new $s(dt,16,0),this.grid3D=new $s(dt,16,0),this.featureIndexArray=new Ee,this.promoteId=o}insert(n,o,f,v,w,A){const P=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,v,w);const I=A?this.grid3D:this.grid;for(let D=0;D<o.length;D++){const B=o[D],V=[1/0,1/0,-1/0,-1/0];for(let W=0;W<B.length;W++){const K=B[W];V[0]=Math.min(V[0],K.x),V[1]=Math.min(V[1],K.y),V[2]=Math.max(V[2],K.x),V[3]=Math.max(V[3],K.y)}V[0]<dt&&V[1]<dt&&V[2]>=0&&V[3]>=0&&I.insert(P,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new mp(new af(this.rawTileData)).layers,this.sourceLayerCoder=new Pv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,o,f,v){this.loadVTLayers();const w=n.params,A=dt/n.tileSize/n.scale,P=zl(w.filter,w.globalState),I=n.queryGeometry,D=n.queryPadding*A,B=zu.fromPoints(I),V=this.grid.query(B.minX-D,B.minY-D,B.maxX+D,B.maxY+D),W=zu.fromPoints(n.cameraQueryGeometry).expandBy(D),K=this.grid3D.query(W.minX,W.minY,W.maxX,W.maxY,(de,ve,Be,Me)=>function(Ce,Ke,ot,gt,Pt){for(const Ct of Ce)if(Ke<=Ct.x&&ot<=Ct.y&&gt>=Ct.x&&Pt>=Ct.y)return!0;const Mt=[new M(Ke,ot),new M(Ke,Pt),new M(gt,Pt),new M(gt,ot)];if(Ce.length>2){for(const Ct of Mt)if(Vl(Ce,Ct))return!0}for(let Ct=0;Ct<Ce.length-1;Ct++)if(Zm(Ce[Ct],Ce[Ct+1],Mt))return!0;return!1}(n.cameraQueryGeometry,de-D,ve-D,Be+D,Me+D));for(const de of K)V.push(de);V.sort(Yx);const te={};let le;for(let de=0;de<V.length;de++){const ve=V[de];if(ve===le)continue;le=ve;const Be=this.featureIndexArray.get(ve);let Me=null;this.loadMatchingFeature(te,Be.bucketIndex,Be.sourceLayerIndex,Be.featureIndex,P,w.layers,w.availableImages,o,f,v,(Ce,Ke,ot)=>(Me||(Me=Ks(Ce)),Ke.queryIntersectsFeature({queryGeometry:I,feature:Ce,featureState:ot,geometry:Me,zoom:this.z,transform:n.transform,pixelsToTileUnits:A,pixelPosMatrix:n.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:n.getElevation})))}return te}loadMatchingFeature(n,o,f,v,w,A,P,I,D,B,V){const W=this.bucketLayerIDs[o];if(A&&!W.some(de=>A.has(de)))return;const K=this.sourceLayerCoder.decode(f),te=this.vtLayers[K].feature(v);if(w.needGeometry){const de=Fc(te,!0);if(!w.filter(new an(this.tileID.overscaledZ),de,this.tileID.canonical))return}else if(!w.filter(new an(this.tileID.overscaledZ),te))return;const le=this.getId(te,K);for(let de=0;de<W.length;de++){const ve=W[de];if(A&&!A.has(ve))continue;const Be=I[ve];if(!Be)continue;let Me={};le&&B&&(Me=B.getState(Be.sourceLayer||"_geojsonTileLayer",le));const Ce=ar({},D[ve]);Ce.paint=Dp(Ce.paint,Be.paint,te,Me,P),Ce.layout=Dp(Ce.layout,Be.layout,te,Me,P);const Ke=!V||V(te,Be,Me);if(!Ke)continue;const ot=new ec(te,this.z,this.x,this.y,le);ot.layer=Ce;let gt=n[ve];gt===void 0&&(gt=n[ve]=[]),gt.push({featureIndex:v,feature:ot,intersectionZ:Ke})}}lookupSymbolFeatures(n,o,f,v,w,A,P,I){const D={};this.loadVTLayers();const B=zl(w.filterSpec,w.globalState);for(const V of n)this.loadMatchingFeature(D,f,v,V,B,A,P,I,o);return D}hasLayer(n){for(const o of this.bucketLayerIDs)for(const f of o)if(n===f)return!0;return!1}getId(n,o){var f;let v=n.id;return this.promoteId&&(v=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof v=="boolean"&&(v=Number(v)),v===void 0&&(!((f=n.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(v=Number(n.properties.cluster_id))),v}}function Dp(c,n,o,f,v){return rr(c,(w,A)=>{const P=n instanceof ql?n.get(A):null;return P&&P.evaluate?P.evaluate(o,f,v):P})}function Yx(c,n){return n-c}function Ev(c,n,o,f,v){const w=[];for(let A=0;A<c.length;A++){const P=c[A];let I;for(let D=0;D<P.length-1;D++){let B=P[D],V=P[D+1];B.x<n&&V.x<n||(B.x<n?B=new M(n,B.y+(n-B.x)/(V.x-B.x)*(V.y-B.y))._round():V.x<n&&(V=new M(n,B.y+(n-B.x)/(V.x-B.x)*(V.y-B.y))._round()),B.y<o&&V.y<o||(B.y<o?B=new M(B.x+(o-B.y)/(V.y-B.y)*(V.x-B.x),o)._round():V.y<o&&(V=new M(B.x+(o-B.y)/(V.y-B.y)*(V.x-B.x),o)._round()),B.x>=f&&V.x>=f||(B.x>=f?B=new M(f,B.y+(f-B.x)/(V.x-B.x)*(V.y-B.y))._round():V.x>=f&&(V=new M(f,B.y+(f-B.x)/(V.x-B.x)*(V.y-B.y))._round()),B.y>=v&&V.y>=v||(B.y>=v?B=new M(B.x+(v-B.y)/(V.y-B.y)*(V.x-B.x),v)._round():V.y>=v&&(V=new M(B.x+(v-B.y)/(V.y-B.y)*(V.x-B.x),v)._round()),I&&B.equals(I[I.length-1])||(I=[B],w.push(I)),I.push(V)))))}}return w}Nt("FeatureIndex",Tg,{omit:["rawTileData","sourceLayerCoder"]});class il extends M{constructor(n,o,f,v){super(n,o),this.angle=f,v!==void 0&&(this.segment=v)}clone(){return new il(this.x,this.y,this.angle,this.segment)}}function Cv(c,n,o,f,v){if(n.segment===void 0||o===0)return!0;let w=n,A=n.segment+1,P=0;for(;P>-o/2;){if(A--,A<0)return!1;P-=c[A].dist(w),w=c[A]}P+=c[A].dist(c[A+1]),A++;const I=[];let D=0;for(;P<o/2;){const B=c[A],V=c[A+1];if(!V)return!1;let W=c[A-1].angleTo(B)-B.angleTo(V);for(W=Math.abs((W+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:P,angleDelta:W}),D+=W;P-I[0].distance>f;)D-=I.shift().angleDelta;if(D>v)return!1;A++,P+=B.dist(V)}return!0}function rs(c){let n=0;for(let o=0;o<c.length-1;o++)n+=c[o].dist(c[o+1]);return n}function zp(c,n,o){return c?.6*n*o:0}function Ag(c,n){return Math.max(c?c.right-c.left:0,n?n.right-n.left:0)}function Ov(c,n,o,f,v,w){const A=zp(o,v,w),P=Ag(o,f)*w;let I=0;const D=rs(c)/2;for(let B=0;B<c.length-1;B++){const V=c[B],W=c[B+1],K=V.dist(W);if(I+K>D){const te=(D-I)/K,le=da.number(V.x,W.x,te),de=da.number(V.y,W.y,te),ve=new il(le,de,W.angleTo(V),B);return ve._round(),!A||Cv(c,ve,P,A,n)?ve:void 0}I+=K}}function uf(c,n,o,f,v,w,A,P,I){const D=zp(f,w,A),B=Ag(f,v),V=B*A,W=c[0].x===0||c[0].x===I||c[0].y===0||c[0].y===I;return n-V<n/4&&(n=V+n/4),Mo(c,W?n/2*P%n:(B/2+2*w)*A*P%n,n,D,o,V,W,!1,I)}function Mo(c,n,o,f,v,w,A,P,I){const D=w/2,B=rs(c);let V=0,W=n-o,K=[];for(let te=0;te<c.length-1;te++){const le=c[te],de=c[te+1],ve=le.dist(de),Be=de.angleTo(le);for(;W+o<V+ve;){W+=o;const Me=(W-V)/ve,Ce=da.number(le.x,de.x,Me),Ke=da.number(le.y,de.y,Me);if(Ce>=0&&Ce<I&&Ke>=0&&Ke<I&&W-D>=0&&W+D<=B){const ot=new il(Ce,Ke,Be,te);ot._round(),f&&!Cv(c,ot,w,f,v)||K.push(ot)}}V+=ve}return P||K.length||A||(K=Mo(c,V/2,o,f,v,w,A,!0,I)),K}function Mg(c,n,o,f){const v=[],w=c.image,A=w.pixelRatio,P=w.paddedRect.w-2,I=w.paddedRect.h-2;let D={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const B=w.stretchX||[[0,P]],V=w.stretchY||[[0,I]],W=(ft,nr)=>ft+nr[1]-nr[0],K=B.reduce(W,0),te=V.reduce(W,0),le=P-K,de=I-te;let ve=0,Be=K,Me=0,Ce=te,Ke=0,ot=le,gt=0,Pt=de;if(w.content&&f){const ft=w.content,nr=ft[2]-ft[0],sr=ft[3]-ft[1];(w.textFitWidth||w.textFitHeight)&&(D=vg(c)),ve=Lu(B,0,ft[0]),Me=Lu(V,0,ft[1]),Be=Lu(B,ft[0],ft[2]),Ce=Lu(V,ft[1],ft[3]),Ke=ft[0]-ve,gt=ft[1]-Me,ot=nr-Be,Pt=sr-Ce}const Mt=D.x1,Ct=D.y1,Ut=D.x2-Mt,It=D.y2-Ct,kt=(ft,nr,sr,Zt)=>{const Vt=Lp(ft.stretch-ve,Be,Ut,Mt),Cr=Bp(ft.fixed-Ke,ot,ft.stretch,K),bn=Lp(nr.stretch-Me,Ce,It,Ct),Hn=Bp(nr.fixed-gt,Pt,nr.stretch,te),Ci=Lp(sr.stretch-ve,Be,Ut,Mt),ia=Bp(sr.fixed-Ke,ot,sr.stretch,K),aa=Lp(Zt.stretch-Me,Ce,It,Ct),oi=Bp(Zt.fixed-gt,Pt,Zt.stretch,te),An=new M(Vt,bn),Ti=new M(Ci,bn),si=new M(Ci,aa),s=new M(Vt,aa),h=new M(Cr/A,Hn/A),g=new M(ia/A,oi/A),T=n*Math.PI/180;if(T){const Y=Math.sin(T),ue=Math.cos(T),je=[ue,-Y,Y,ue];An._matMult(je),Ti._matMult(je),s._matMult(je),si._matMult(je)}const O=ft.stretch+ft.fixed,z=nr.stretch+nr.fixed;return{tl:An,tr:Ti,bl:s,br:si,tex:{x:w.paddedRect.x+1+O,y:w.paddedRect.y+1+z,w:sr.stretch+sr.fixed-O,h:Zt.stretch+Zt.fixed-z},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:ot/A/Ut,minFontScaleY:Pt/A/It,isSDF:o}};if(f&&(w.stretchX||w.stretchY)){const ft=al(B,le,K),nr=al(V,de,te);for(let sr=0;sr<ft.length-1;sr++){const Zt=ft[sr],Vt=ft[sr+1];for(let Cr=0;Cr<nr.length-1;Cr++)v.push(kt(Zt,nr[Cr],Vt,nr[Cr+1]))}}else v.push(kt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:P+1},{fixed:0,stretch:I+1}));return v}function Lu(c,n,o){let f=0;for(const v of c)f+=Math.max(n,Math.min(o,v[1]))-Math.max(n,Math.min(o,v[0]));return f}function al(c,n,o){const f=[{fixed:-1,stretch:0}];for(const[v,w]of c){const A=f[f.length-1];f.push({fixed:v-A.stretch,stretch:A.stretch}),f.push({fixed:v-A.stretch,stretch:A.stretch+(w-v)})}return f.push({fixed:n+1,stretch:o}),f}function Lp(c,n,o,f){return c/n*o+f}function Bp(c,n,o,f){return c-n*o/f}Nt("Anchor",il);class tc{constructor(n,o,f,v,w,A,P,I,D,B){var V;if(this.boxStartIndex=n.length,D){let W=A.top,K=A.bottom;const te=A.collisionPadding;te&&(W-=te[1],K+=te[3]);let le=K-W;le>0&&(le=Math.max(10,le),this.circleDiameter=le)}else{const W=!((V=A.image)===null||V===void 0)&&V.content&&(A.image.textFitWidth||A.image.textFitHeight)?vg(A):{x1:A.left,y1:A.top,x2:A.right,y2:A.bottom};W.y1=W.y1*P-I[0],W.y2=W.y2*P+I[2],W.x1=W.x1*P-I[3],W.x2=W.x2*P+I[1];const K=A.collisionPadding;if(K&&(W.x1-=K[0]*P,W.y1-=K[1]*P,W.x2+=K[2]*P,W.y2+=K[3]*P),B){const te=new M(W.x1,W.y1),le=new M(W.x2,W.y1),de=new M(W.x1,W.y2),ve=new M(W.x2,W.y2),Be=B*Math.PI/180;te._rotate(Be),le._rotate(Be),de._rotate(Be),ve._rotate(Be),W.x1=Math.min(te.x,le.x,de.x,ve.x),W.x2=Math.max(te.x,le.x,de.x,ve.x),W.y1=Math.min(te.y,le.y,de.y,ve.y),W.y2=Math.max(te.y,le.y,de.y,ve.y)}n.emplaceBack(o.x,o.y,W.x1,W.y1,W.x2,W.y2,f,v,w)}this.boxEndIndex=n.length}}class Iv{constructor(n=[],o=(f,v)=>f<v?-1:f>v?1:0){if(this.data=n,this.length=this.data.length,this.compare=o,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:o,compare:f}=this,v=o[n];for(;n>0;){const w=n-1>>1,A=o[w];if(f(v,A)>=0)break;o[n]=A,n=w}o[n]=v}_down(n){const{data:o,compare:f}=this,v=this.length>>1,w=o[n];for(;n<v;){let A=1+(n<<1);const P=A+1;if(P<this.length&&f(o[P],o[A])<0&&(A=P),f(o[A],w)>=0)break;o[n]=o[A],n=A}o[n]=w}}function Kx(c,n=1,o=!1){const f=zu.fromPoints(c[0]),v=Math.min(f.width(),f.height());let w=v/2;const A=new Iv([],Qx),{minX:P,minY:I,maxX:D,maxY:B}=f;if(v===0)return new M(P,I);for(let K=P;K<D;K+=v)for(let te=I;te<B;te+=v)A.push(new od(K+w,te+w,w,c));let V=function(K){let te=0,le=0,de=0;const ve=K[0];for(let Be=0,Me=ve.length,Ce=Me-1;Be<Me;Ce=Be++){const Ke=ve[Be],ot=ve[Ce],gt=Ke.x*ot.y-ot.x*Ke.y;le+=(Ke.x+ot.x)*gt,de+=(Ke.y+ot.y)*gt,te+=3*gt}return new od(le/te,de/te,0,K)}(c),W=A.length;for(;A.length;){const K=A.pop();(K.d>V.d||!V.d)&&(V=K,o&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,W)),K.max-V.d<=n||(w=K.h/2,A.push(new od(K.p.x-w,K.p.y-w,w,c)),A.push(new od(K.p.x+w,K.p.y-w,w,c)),A.push(new od(K.p.x-w,K.p.y+w,w,c)),A.push(new od(K.p.x+w,K.p.y+w,w,c)),W+=4)}return o&&(console.log(`num probes: ${W}`),console.log(`best distance: ${V.d}`)),V.p}function Qx(c,n){return n.max-c.max}function od(c,n,o,f){this.p=new M(c,n),this.h=o,this.d=function(v,w){let A=!1,P=1/0;for(let I=0;I<w.length;I++){const D=w[I];for(let B=0,V=D.length,W=V-1;B<V;W=B++){const K=D[B],te=D[W];K.y>v.y!=te.y>v.y&&v.x<(te.x-K.x)*(v.y-K.y)/(te.y-K.y)+K.x&&(A=!A),P=Math.min(P,Vm(v,K,te))}}return(A?1:-1)*Math.sqrt(P)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var Hi;m.aE=void 0,(Hi=m.aE||(m.aE={}))[Hi.center=1]="center",Hi[Hi.left=2]="left",Hi[Hi.right=3]="right",Hi[Hi.top=4]="top",Hi[Hi.bottom=5]="bottom",Hi[Hi["top-left"]=6]="top-left",Hi[Hi["top-right"]=7]="top-right",Hi[Hi["bottom-left"]=8]="bottom-left",Hi[Hi["bottom-right"]=9]="bottom-right";const jg=Number.POSITIVE_INFINITY;function kv(c,n){return n[1]!==jg?function(o,f,v){let w=0,A=0;switch(f=Math.abs(f),v=Math.abs(v),o){case"top-right":case"top-left":case"top":A=v-7;break;case"bottom-right":case"bottom-left":case"bottom":A=7-v}switch(o){case"top-right":case"bottom-right":case"right":w=-f;break;case"top-left":case"bottom-left":case"left":w=f}return[w,A]}(c,n[0],n[1]):function(o,f){let v=0,w=0;f<0&&(f=0);const A=f/Math.SQRT2;switch(o){case"top-right":case"top-left":w=A-7;break;case"bottom-right":case"bottom-left":w=7-A;break;case"bottom":w=7-f;break;case"top":w=f-7}switch(o){case"top-right":case"bottom-right":v=-A;break;case"top-left":case"bottom-left":v=A;break;case"left":v=f;break;case"right":v=-f}return[v,w]}(c,n[0])}function Nv(c,n,o){var f;const v=c.layout,w=(f=v.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(n,{},o);if(w){const P=w.values,I=[];for(let D=0;D<P.length;D+=2){const B=I[D]=P[D],V=P[D+1].map(W=>W*yi);B.startsWith("top")?V[1]-=7:B.startsWith("bottom")&&(V[1]+=7),I[D+1]=V}return new fi(I)}const A=v.get("text-variable-anchor");if(A){let P;P=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(n,{},o)*yi,jg]:v.get("text-offset").evaluate(n,{},o).map(D=>D*yi);const I=[];for(const D of A)I.push(D,kv(D,P));return new fi(I)}return null}function Fp(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function sd(c,n,o,f,v,w,A,P,I,D,B,V){let W=w.textMaxSize.evaluate(n,{});W===void 0&&(W=A);const K=c.layers[0].layout,te=K.get("icon-offset").evaluate(n,{},B),le=Pg(o.horizontal),de=A/24,ve=c.tilePixelRatio*de,Be=c.tilePixelRatio*W/24,Me=c.tilePixelRatio*P,Ce=c.tilePixelRatio*K.get("symbol-spacing"),Ke=K.get("text-padding")*c.tilePixelRatio,ot=function(sr,Zt,Vt,Cr=1){const bn=sr.get("icon-padding").evaluate(Zt,{},Vt),Hn=bn&&bn.values;return[Hn[0]*Cr,Hn[1]*Cr,Hn[2]*Cr,Hn[3]*Cr]}(K,n,B,c.tilePixelRatio),gt=K.get("text-max-angle")/180*Math.PI,Pt=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point",Mt=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",Ct=K.get("symbol-placement"),Ut=Ce/2,It=K.get("icon-text-fit");let kt;f&&It!=="none"&&(c.allowVerticalPlacement&&o.vertical&&(kt=_g(f,o.vertical,It,K.get("icon-text-fit-padding"),te,de)),le&&(f=_g(f,le,It,K.get("icon-text-fit-padding"),te,de)));const ft=B?V.line.getGranularityForZoomLevel(B.z):1,nr=(sr,Zt)=>{Zt.x<0||Zt.x>=dt||Zt.y<0||Zt.y>=dt||function(Vt,Cr,bn,Hn,Ci,ia,aa,oi,An,Ti,si,s,h,g,T,O,z,Y,ue,je,Ue,pt,bt,nt,ut){const cr=Vt.addToLineVertexArray(Cr,bn);let ir,Jr,He,ze,tt=0,xt=0,Wt=0,Nr=0,er=-1,dr=-1;const In={};let en=_s("");if(Vt.allowVerticalPlacement&&Hn.vertical){const Da=oi.layout.get("text-rotate").evaluate(Ue,{},nt)+90;He=new tc(An,Cr,Ti,si,s,Hn.vertical,h,g,T,Da),aa&&(ze=new tc(An,Cr,Ti,si,s,aa,z,Y,T,Da))}if(Ci){const Da=oi.layout.get("icon-rotate").evaluate(Ue,{}),bs=oi.layout.get("icon-text-fit")!=="none",gf=Mg(Ci,Da,bt,bs),ic=aa?Mg(aa,Da,bt,bs):void 0;Jr=new tc(An,Cr,Ti,si,s,Ci,z,Y,!1,Da),tt=4*gf.length;const yf=Vt.iconSizeData;let Wc=null;yf.kind==="source"?(Wc=[Ql*oi.layout.get("icon-size").evaluate(Ue,{})],Wc[0]>nl&&Jt(`${Vt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):yf.kind==="composite"&&(Wc=[Ql*pt.compositeIconSizes[0].evaluate(Ue,{},nt),Ql*pt.compositeIconSizes[1].evaluate(Ue,{},nt)],(Wc[0]>nl||Wc[1]>nl)&&Jt(`${Vt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Vt.addSymbols(Vt.icon,gf,Wc,je,ue,Ue,m.ao.none,Cr,cr.lineStartIndex,cr.lineLength,-1,nt),er=Vt.icon.placedSymbolArray.length-1,ic&&(xt=4*ic.length,Vt.addSymbols(Vt.icon,ic,Wc,je,ue,Ue,m.ao.vertical,Cr,cr.lineStartIndex,cr.lineLength,-1,nt),dr=Vt.icon.placedSymbolArray.length-1)}const rc=Object.keys(Hn.horizontal);for(const Da of rc){const bs=Hn.horizontal[Da];if(!ir){en=_s(bs.text);const ic=oi.layout.get("text-rotate").evaluate(Ue,{},nt);ir=new tc(An,Cr,Ti,si,s,bs,h,g,T,ic)}const gf=bs.positionedLines.length===1;if(Wt+=ld(Vt,Cr,bs,ia,oi,T,Ue,O,cr,Hn.vertical?m.ao.horizontal:m.ao.horizontalOnly,gf?rc:[Da],In,er,pt,nt),gf)break}Hn.vertical&&(Nr+=ld(Vt,Cr,Hn.vertical,ia,oi,T,Ue,O,cr,m.ao.vertical,["vertical"],In,dr,pt,nt));const t0=ir?ir.boxStartIndex:Vt.collisionBoxArray.length,xD=ir?ir.boxEndIndex:Vt.collisionBoxArray.length,bD=He?He.boxStartIndex:Vt.collisionBoxArray.length,wD=He?He.boxEndIndex:Vt.collisionBoxArray.length,SD=Jr?Jr.boxStartIndex:Vt.collisionBoxArray.length,TD=Jr?Jr.boxEndIndex:Vt.collisionBoxArray.length,AD=ze?ze.boxStartIndex:Vt.collisionBoxArray.length,MD=ze?ze.boxEndIndex:Vt.collisionBoxArray.length;let nc=-1;const Rv=(Da,bs)=>Da&&Da.circleDiameter?Math.max(Da.circleDiameter,bs):bs;nc=Rv(ir,nc),nc=Rv(He,nc),nc=Rv(Jr,nc),nc=Rv(ze,nc);const eA=nc>-1?1:0;eA&&(nc*=ut/yi),Vt.glyphOffsetArray.length>=Jl.MAX_GLYPHS&&Jt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ue.sortKey!==void 0&&Vt.addToSortKeyRanges(Vt.symbolInstances.length,Ue.sortKey);const jD=Nv(oi,Ue,nt),[PD,ED]=function(Da,bs){const gf=Da.length,ic=bs==null?void 0:bs.values;if((ic==null?void 0:ic.length)>0)for(let yf=0;yf<ic.length;yf+=2){const Wc=ic[yf+1];Da.emplaceBack(m.aE[ic[yf]],Wc[0],Wc[1])}return[gf,Da.length]}(Vt.textAnchorOffsets,jD);Vt.symbolInstances.emplaceBack(Cr.x,Cr.y,In.right>=0?In.right:-1,In.center>=0?In.center:-1,In.left>=0?In.left:-1,In.vertical||-1,er,dr,en,t0,xD,bD,wD,SD,TD,AD,MD,Ti,Wt,Nr,tt,xt,eA,0,h,nc,PD,ED)}(c,Zt,sr,o,f,v,kt,c.layers[0],c.collisionBoxArray,n.index,n.sourceLayerIndex,c.index,ve,[Ke,Ke,Ke,Ke],Pt,I,Me,ot,Mt,te,n,w,D,B,A)};if(Ct==="line")for(const sr of Ev(n.geometry,0,0,dt,dt)){const Zt=Qo(sr,ft),Vt=uf(Zt,Ce,gt,o.vertical||le,f,24,Be,c.overscaling,dt);for(const Cr of Vt)le&&Jx(c,le.text,Ut,Cr)||nr(Zt,Cr)}else if(Ct==="line-center"){for(const sr of n.geometry)if(sr.length>1){const Zt=Qo(sr,ft),Vt=Ov(Zt,gt,o.vertical||le,f,24,Be);Vt&&nr(Zt,Vt)}}else if(n.type==="Polygon")for(const sr of Sh(n.geometry,0)){const Zt=Kx(sr,16);nr(Qo(sr[0],ft,!0),new il(Zt.x,Zt.y,0))}else if(n.type==="LineString")for(const sr of n.geometry){const Zt=Qo(sr,ft);nr(Zt,new il(Zt[0].x,Zt[0].y,0))}else if(n.type==="Point")for(const sr of n.geometry)for(const Zt of sr)nr([Zt],new il(Zt.x,Zt.y,0))}function ld(c,n,o,f,v,w,A,P,I,D,B,V,W,K,te){const le=function(Be,Me,Ce,Ke,ot,gt,Pt,Mt){const Ct=Ke.layout.get("text-rotate").evaluate(gt,{})*Math.PI/180,Ut=[];for(const It of Me.positionedLines)for(const kt of It.positionedGlyphs){if(!kt.rect)continue;const ft=kt.rect||{};let nr=4,sr=!0,Zt=1,Vt=0;const Cr=(ot||Mt)&&kt.vertical,bn=kt.metrics.advance*kt.scale/2;if(Mt&&Me.verticalizable&&(Vt=It.lineOffset/2-(kt.imageName?-(yi-kt.metrics.width*kt.scale)/2:(kt.scale-1)*yi)),kt.imageName){const Y=Pt[kt.imageName];sr=Y.sdf,Zt=Y.pixelRatio,nr=1/Zt}const Hn=ot?[kt.x+bn,kt.y]:[0,0];let Ci=ot?[0,0]:[kt.x+bn+Ce[0],kt.y+Ce[1]-Vt],ia=[0,0];Cr&&(ia=Ci,Ci=[0,0]);const aa=kt.metrics.isDoubleResolution?2:1,oi=(kt.metrics.left-nr)*kt.scale-bn+Ci[0],An=(-kt.metrics.top-nr)*kt.scale+Ci[1],Ti=oi+ft.w/aa*kt.scale/Zt,si=An+ft.h/aa*kt.scale/Zt,s=new M(oi,An),h=new M(Ti,An),g=new M(oi,si),T=new M(Ti,si);if(Cr){const Y=new M(-bn,bn- -17),ue=-Math.PI/2,je=12-bn,Ue=new M(22-je,-(kt.imageName?je:0)),pt=new M(...ia);s._rotateAround(ue,Y)._add(Ue)._add(pt),h._rotateAround(ue,Y)._add(Ue)._add(pt),g._rotateAround(ue,Y)._add(Ue)._add(pt),T._rotateAround(ue,Y)._add(Ue)._add(pt)}if(Ct){const Y=Math.sin(Ct),ue=Math.cos(Ct),je=[ue,-Y,Y,ue];s._matMult(je),h._matMult(je),g._matMult(je),T._matMult(je)}const O=new M(0,0),z=new M(0,0);Ut.push({tl:s,tr:h,bl:g,br:T,tex:ft,writingMode:Me.writingMode,glyphOffset:Hn,sectionIndex:kt.sectionIndex,isSDF:sr,pixelOffsetTL:O,pixelOffsetBR:z,minFontScaleX:0,minFontScaleY:0})}return Ut}(0,o,P,v,w,A,f,c.allowVerticalPlacement),de=c.textSizeData;let ve=null;de.kind==="source"?(ve=[Ql*v.layout.get("text-size").evaluate(A,{})],ve[0]>nl&&Jt(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):de.kind==="composite"&&(ve=[Ql*K.compositeTextSizes[0].evaluate(A,{},te),Ql*K.compositeTextSizes[1].evaluate(A,{},te)],(ve[0]>nl||ve[1]>nl)&&Jt(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,le,ve,P,w,A,D,n,I.lineStartIndex,I.lineLength,W,te);for(const Be of B)V[Be]=c.text.placedSymbolArray.length-1;return 4*le.length}function Pg(c){for(const n in c)return c[n];return null}function Jx(c,n,o,f){const v=c.compareText;if(n in v){const w=v[n];for(let A=w.length-1;A>=0;A--)if(f.dist(w[A])<o)return!0}else v[n]=[];return v[n].push(f),!1}const Bu=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Fu{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,f]=new Uint8Array(n,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=f>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const w=Bu[15&f];if(!w)throw new Error("Unrecognized array type.");const[A]=new Uint16Array(n,2,1),[P]=new Uint32Array(n,4,1);return new Fu(P,A,w,n)}constructor(n,o=64,f=Float64Array,v){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=f,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const w=Bu.indexOf(this.ArrayType),A=2*n*this.ArrayType.BYTES_PER_ELEMENT,P=n*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-P%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${f}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+P+I,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+A+P+I),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+P+I,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=n)}add(n,o){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=n,this.coords[this._pos++]=o,f}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return $p(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,o,f,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:A,nodeSize:P}=this,I=[0,w.length-1,0],D=[];for(;I.length;){const B=I.pop()||0,V=I.pop()||0,W=I.pop()||0;if(V-W<=P){for(let de=W;de<=V;de++){const ve=A[2*de],Be=A[2*de+1];ve>=n&&ve<=f&&Be>=o&&Be<=v&&D.push(w[de])}continue}const K=W+V>>1,te=A[2*K],le=A[2*K+1];te>=n&&te<=f&&le>=o&&le<=v&&D.push(w[K]),(B===0?n<=te:o<=le)&&(I.push(W),I.push(K-1),I.push(1-B)),(B===0?f>=te:v>=le)&&(I.push(K+1),I.push(V),I.push(1-B))}return D}within(n,o,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:w,nodeSize:A}=this,P=[0,v.length-1,0],I=[],D=f*f;for(;P.length;){const B=P.pop()||0,V=P.pop()||0,W=P.pop()||0;if(V-W<=A){for(let de=W;de<=V;de++)ff(w[2*de],w[2*de+1],n,o)<=D&&I.push(v[de]);continue}const K=W+V>>1,te=w[2*K],le=w[2*K+1];ff(te,le,n,o)<=D&&I.push(v[K]),(B===0?n-f<=te:o-f<=le)&&(P.push(W),P.push(K-1),P.push(1-B)),(B===0?n+f>=te:o+f>=le)&&(P.push(K+1),P.push(V),P.push(1-B))}return I}}function $p(c,n,o,f,v,w){if(v-f<=o)return;const A=f+v>>1;hf(c,n,A,f,v,w),$p(c,n,o,f,A-1,1-w),$p(c,n,o,A+1,v,1-w)}function hf(c,n,o,f,v,w){for(;v>f;){if(v-f>600){const D=v-f+1,B=o-f+1,V=Math.log(D),W=.5*Math.exp(2*V/3),K=.5*Math.sqrt(V*W*(D-W)/D)*(B-D/2<0?-1:1);hf(c,n,o,Math.max(f,Math.floor(o-B*W/D+K)),Math.min(v,Math.floor(o+(D-B)*W/D+K)),w)}const A=n[2*o+w];let P=f,I=v;for($u(c,n,f,o),n[2*v+w]>A&&$u(c,n,f,v);P<I;){for($u(c,n,P,I),P++,I--;n[2*P+w]<A;)P++;for(;n[2*I+w]>A;)I--}n[2*f+w]===A?$u(c,n,f,I):(I++,$u(c,n,I,v)),I<=o&&(f=I+1),o<=I&&(v=I-1)}}function $u(c,n,o,f){df(c,o,f),df(n,2*o,2*f),df(n,2*o+1,2*f+1)}function df(c,n,o){const f=c[n];c[n]=c[o],c[o]=f}function ff(c,n,o,f){const v=c-o,w=n-f;return v*v+w*w}var qp;m.cx=void 0,(qp=m.cx||(m.cx={})).create="create",qp.load="load",qp.fullLoad="fullLoad";let pf=null,mf=[];const Up=1e3/60,qu="loadTime",Eg="fullLoadTime",e0={mark(c){performance.mark(c)},frame(c){const n=c;pf!=null&&mf.push(n-pf),pf=n},clearMetrics(){pf=null,mf=[],performance.clearMeasures(qu),performance.clearMeasures(Eg);for(const c in m.cx)performance.clearMarks(m.cx[c])},getPerformanceMetrics(){performance.measure(qu,m.cx.create,m.cx.load),performance.measure(Eg,m.cx.create,m.cx.fullLoad);const c=performance.getEntriesByName(qu)[0].duration,n=performance.getEntriesByName(Eg)[0].duration,o=mf.length,f=1/(mf.reduce((w,A)=>w+A,0)/o/1e3),v=mf.filter(w=>w>Up).reduce((w,A)=>w+(A-Up)/Up,0);return{loadTime:c,fullLoadTime:n,fps:f,percentDroppedFrames:v/(o+v)*100,totalFrames:o}}};m.$=dt,m.A=ne,m.B=function([c,n,o]){return n+=90,n*=Math.PI/180,o*=Math.PI/180,{x:c*Math.cos(n)*Math.sin(o),y:c*Math.sin(n)*Math.sin(o),z:c*Math.cos(o)}},m.C=da,m.D=Lt,m.E=Ht,m.F=an,m.G=Oc,m.H=Ii,m.I=Sp,m.J=class{constructor(c,n){this.target=c,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Tv(()=>this.process()),this.subscription=Eo(this.target,"message",o=>this.receive(o),!1),this.globalScope=rn(self)?c:window}registerMessageHandler(c,n){this.messageHandlers[c]=n}sendAsync(c,n){return new Promise((o,f)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10),w=n?Eo(n.signal,"abort",()=>{w==null||w.unsubscribe(),delete this.resolveRejects[v];const I={id:v,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)},Av):null;this.resolveRejects[v]={resolve:I=>{w==null||w.unsubscribe(),o(I)},reject:I=>{w==null||w.unsubscribe(),f(I)}};const A=[],P=Object.assign(Object.assign({},c),{id:v,sourceMapId:this.mapId,origin:location.origin,data:Ic(c.data,A)});this.target.postMessage(P,{transfer:A})})}receive(c){const n=c.data,o=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[o];const f=this.abortControllers[o];return delete this.abortControllers[o],void(f&&f.abort())}if(rn(self)||n.mustQueue)return this.tasks[o]=n,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,n)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),n=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(c,n)}processTask(c,n){return l(this,void 0,void 0,function*(){if(n.type==="<response>"){const v=this.resolveRejects[c];return delete this.resolveRejects[c],v?void(n.error?v.reject(qs(n.error)):v.resolve(qs(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=qs(n.data),f=new AbortController;this.abortControllers[c]=f;try{const v=yield this.messageHandlers[n.type](n.sourceMapId,o,f);this.completeTask(c,null,v)}catch(v){this.completeTask(c,v)}})}completeTask(c,n,o){const f=[];delete this.abortControllers[c];const v={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Ic(n):null,data:Ic(o,f)};this.target.postMessage(v,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},m.K=Se,m.L=function(){var c=new ne(16);return ne!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},m.M=function(c,n,o){var f,v,w,A,P,I,D,B,V,W,K,te,le=o[0],de=o[1],ve=o[2];return n===c?(c[12]=n[0]*le+n[4]*de+n[8]*ve+n[12],c[13]=n[1]*le+n[5]*de+n[9]*ve+n[13],c[14]=n[2]*le+n[6]*de+n[10]*ve+n[14],c[15]=n[3]*le+n[7]*de+n[11]*ve+n[15]):(v=n[1],w=n[2],A=n[3],P=n[4],I=n[5],D=n[6],B=n[7],V=n[8],W=n[9],K=n[10],te=n[11],c[0]=f=n[0],c[1]=v,c[2]=w,c[3]=A,c[4]=P,c[5]=I,c[6]=D,c[7]=B,c[8]=V,c[9]=W,c[10]=K,c[11]=te,c[12]=f*le+P*de+V*ve+n[12],c[13]=v*le+I*de+W*ve+n[13],c[14]=w*le+D*de+K*ve+n[14],c[15]=A*le+B*de+te*ve+n[15]),c},m.N=function(c,n,o){var f=o[0],v=o[1],w=o[2];return c[0]=n[0]*f,c[1]=n[1]*f,c[2]=n[2]*f,c[3]=n[3]*f,c[4]=n[4]*v,c[5]=n[5]*v,c[6]=n[6]*v,c[7]=n[7]*v,c[8]=n[8]*w,c[9]=n[9]*w,c[10]=n[10]*w,c[11]=n[11]*w,c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15],c},m.O=function(c,n,o){var f=n[0],v=n[1],w=n[2],A=n[3],P=n[4],I=n[5],D=n[6],B=n[7],V=n[8],W=n[9],K=n[10],te=n[11],le=n[12],de=n[13],ve=n[14],Be=n[15],Me=o[0],Ce=o[1],Ke=o[2],ot=o[3];return c[0]=Me*f+Ce*P+Ke*V+ot*le,c[1]=Me*v+Ce*I+Ke*W+ot*de,c[2]=Me*w+Ce*D+Ke*K+ot*ve,c[3]=Me*A+Ce*B+Ke*te+ot*Be,c[4]=(Me=o[4])*f+(Ce=o[5])*P+(Ke=o[6])*V+(ot=o[7])*le,c[5]=Me*v+Ce*I+Ke*W+ot*de,c[6]=Me*w+Ce*D+Ke*K+ot*ve,c[7]=Me*A+Ce*B+Ke*te+ot*Be,c[8]=(Me=o[8])*f+(Ce=o[9])*P+(Ke=o[10])*V+(ot=o[11])*le,c[9]=Me*v+Ce*I+Ke*W+ot*de,c[10]=Me*w+Ce*D+Ke*K+ot*ve,c[11]=Me*A+Ce*B+Ke*te+ot*Be,c[12]=(Me=o[12])*f+(Ce=o[13])*P+(Ke=o[14])*V+(ot=o[15])*le,c[13]=Me*v+Ce*I+Ke*W+ot*de,c[14]=Me*w+Ce*D+Ke*K+ot*ve,c[15]=Me*A+Ce*B+Ke*te+ot*Be,c},m.P=M,m.Q=function(c,n){const o={};for(let f=0;f<n.length;f++){const v=n[f];v in c&&(o[v]=c[v])}return o},m.R=Ei,m.S=Gr,m.T=ju,m.U=kp,m.V=Mv,m.W=q,m.X=re,m.Y=ki,m.Z=no,m._=l,m.a=oe,m.a$=et,m.a0=function(c,n){var o,f,v,w,A;if(!c)return n??{};if(!n)return c;let P=Object.assign({},c);if(n.removeAll&&(P={removeAll:!0}),n.remove){const I=new Set(n.remove);P.add&&(P.add=P.add.filter(B=>!I.has(B.id))),P.update&&(P.update=P.update.filter(B=>!I.has(B.id)));const D=new Set(((o=c.add)!==null&&o!==void 0?o:[]).map(B=>B.id));n.remove=n.remove.filter(B=>!D.has(B))}if(n.remove){const I=new Set(P.remove?P.remove.concat(n.remove):n.remove);P.remove=Array.from(I.values())}if(n.add){const I=P.add?P.add.concat(n.add):n.add,D=new Map(I.map(B=>[B.id,B]));P.add=Array.from(D.values())}if(n.update){const I=new Map((f=P.update)===null||f===void 0?void 0:f.map(D=>[D.id,D]));for(const D of n.update){const B=(v=I.get(D.id))!==null&&v!==void 0?v:{id:D.id};D.newGeometry&&(B.newGeometry=D.newGeometry),D.addOrUpdateProperties&&(B.addOrUpdateProperties=((w=B.addOrUpdateProperties)!==null&&w!==void 0?w:[]).concat(D.addOrUpdateProperties)),D.removeProperties&&(B.removeProperties=((A=B.removeProperties)!==null&&A!==void 0?A:[]).concat(D.removeProperties)),D.removeAllProperties&&(B.removeAllProperties=!0),I.set(D.id,B)}P.update=Array.from(I.values())}return P.remove&&P.add&&(P.remove=P.remove.filter(I=>P.add.findIndex(D=>D.id===I)===-1)),P},m.a1=nd,m.a2=zu,m.a3=25,m.a4=cf,m.a5=c=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(o=>{n.onloadstart=()=>{o(n)};for(const f of c){const v=window.document.createElement("source");Le(f)||(n.crossOrigin="Anonymous"),v.src=f,n.appendChild(v)}})},m.a6=wt,m.a7=function(){return Ot++},m.a8=X,m.a9=Jl,m.aA=function(c){let n=1/0,o=1/0,f=-1/0,v=-1/0;for(const w of c)n=Math.min(n,w.x),o=Math.min(o,w.y),f=Math.max(f,w.x),v=Math.max(v,w.y);return[n,o,f,v]},m.aB=yi,m.aC=xe,m.aD=function(c,n,o,f,v=!1){if(!o[0]&&!o[1])return[0,0];const w=v?f==="map"?-c.bearingInRadians:0:f==="viewport"?c.bearingInRadians:0;if(w){const A=Math.sin(w),P=Math.cos(w);o=[o[0]*P-o[1]*A,o[0]*A+o[1]*P]}return[v?o[0]:xe(n,o[0],c.zoom),v?o[1]:xe(n,o[1],c.zoom)]},m.aF=xg,m.aG=Fp,m.aH=Nu,m.aI=Fu,m.aJ=En,m.aK=To,m.aL=Ie,m.aM=Tr,m.aN=Wr,m.aO=yr,m.aP=Ri,m.aQ=Sg,m.aR=at,m.aS=Oe,m.aT=function(c){var n=new ne(3);return n[0]=c[0],n[1]=c[1],n[2]=c[2],n},m.aU=function(c,n,o){return c[0]=n[0]-o[0],c[1]=n[1]-o[1],c[2]=n[2]-o[2],c},m.aV=function(c,n){var o=n[0],f=n[1],v=n[2],w=o*o+f*f+v*v;return w>0&&(w=1/Math.sqrt(w)),c[0]=n[0]*w,c[1]=n[1]*w,c[2]=n[2]*w,c},m.aW=ke,m.aX=function(c,n){return c[0]*n[0]+c[1]*n[1]+c[2]*n[2]},m.aY=function(c,n,o){return c[0]=n[0]*o[0],c[1]=n[1]*o[1],c[2]=n[2]*o[2],c[3]=n[3]*o[3],c},m.aZ=he,m.a_=function(c,n,o){const f=n[0]*o[0]+n[1]*o[1]+n[2]*o[2];return f===0?null:(-(c[0]*o[0]+c[1]*o[1]+c[2]*o[2])-o[3])/f},m.aa=zl,m.ab=Fc,m.ac=ec,m.ad=function(c){const n={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,f,v,w)=>{const A=v||w;return n[f]=!A||A.toLowerCase(),""}),n["max-age"]){const o=parseInt(n["max-age"],10);isNaN(o)?delete n["max-age"]:n["max-age"]=o}return n},m.ae=Ps,m.af=function(c){return Math.pow(2,c)},m.ag=J,m.ah=zt,m.ai=85.051129,m.aj=Np,m.ak=function(c){return Math.log(c)/Math.LN2},m.al=function(c){var n=c[0],o=c[1];return n*n+o*o},m.am=function(c){if(!c.length)return new Set;const n=Math.max(...c.map(I=>I.canonical.z));let o=1/0,f=-1/0,v=1/0,w=-1/0;const A=[];for(const I of c){const{x:D,y:B,z:V}=I.canonical,W=Math.pow(2,n-V),K=D*W,te=B*W;A.push({id:I,x:K,y:te}),K<o&&(o=K),K>f&&(f=K),te<v&&(v=te),te>w&&(w=te)}const P=new Set;for(const I of A)I.x!==o&&I.x!==f&&I.y!==v&&I.y!==w||P.add(I.id);return P},m.an=function(c,n){let o=0,f=0;if(c.kind==="constant")f=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:v,minZoom:w,maxZoom:A}=c,P=v?zt(mi.interpolationFactor(v,n,w,A),0,1):0;c.kind==="camera"?f=da.number(c.minSize,c.maxSize,P):o=P}return{uSizeT:o,uSize:f}},m.ap=function(c,{uSize:n,uSizeT:o},{lowerSize:f,upperSize:v}){return c.kind==="source"?f/Ql:c.kind==="composite"?da.number(f/Ql,v/Ql,o):n},m.aq=function(c,n){var o=n[0],f=n[1],v=n[2],w=n[3],A=n[4],P=n[5],I=n[6],D=n[7],B=n[8],V=n[9],W=n[10],K=n[11],te=n[12],le=n[13],de=n[14],ve=n[15],Be=o*P-f*A,Me=o*I-v*A,Ce=o*D-w*A,Ke=f*I-v*P,ot=f*D-w*P,gt=v*D-w*I,Pt=B*le-V*te,Mt=B*de-W*te,Ct=B*ve-K*te,Ut=V*de-W*le,It=V*ve-K*le,kt=W*ve-K*de,ft=Be*kt-Me*It+Ce*Ut+Ke*Ct-ot*Mt+gt*Pt;return ft?(c[0]=(P*kt-I*It+D*Ut)*(ft=1/ft),c[1]=(v*It-f*kt-w*Ut)*ft,c[2]=(le*gt-de*ot+ve*Ke)*ft,c[3]=(W*ot-V*gt-K*Ke)*ft,c[4]=(I*Ct-A*kt-D*Mt)*ft,c[5]=(o*kt-v*Ct+w*Mt)*ft,c[6]=(de*Ce-te*gt-ve*Me)*ft,c[7]=(B*gt-W*Ce+K*Me)*ft,c[8]=(A*It-P*Ct+D*Pt)*ft,c[9]=(f*Ct-o*It-w*Pt)*ft,c[10]=(te*ot-le*Ce+ve*Be)*ft,c[11]=(V*Ce-B*ot-K*Be)*ft,c[12]=(P*Mt-A*Ut-I*Pt)*ft,c[13]=(o*Ut-f*Mt+v*Pt)*ft,c[14]=(le*Me-te*Ke-de*Be)*ft,c[15]=(B*Ke-V*Me+W*Be)*ft,c):null},m.ar=Ge,m.as=function(c){var n=c[0],o=c[1];return Math.sqrt(n*n+o*o)},m.at=function(c){return c[0]=0,c[1]=0,c},m.au=function(c,n,o){return c[0]=n[0]*o,c[1]=n[1]*o,c},m.av=bg,m.aw=st,m.ax=function(c,n,o,f){const v=n.y-c.y,w=n.x-c.x,A=f.y-o.y,P=f.x-o.x,I=A*w-P*v;if(I===0)return null;const D=(P*(c.y-o.y)-A*(c.x-o.x))/I;return new M(c.x+D*w,c.y+D*v)},m.ay=Ev,m.az=Ky,m.b=Wn,m.b$=class extends Si{constructor(c,n){super(c,n),this.current=new Array}set(c){if(c!=this.current){this.current=c;const n=new Float32Array(c);this.gl.uniform1fv(this.location,n)}}},m.b0=function(c,n,o){return c[0]=n[0]*o,c[1]=n[1]*o,c[2]=n[2]*o,c[3]=n[3]*o,c},m.b1=function(c,n){return c[0]*n[0]+c[1]*n[1]+c[2]*n[2]+c[3]},m.b2=jv,m.b3=id,m.b4=function(c,n,o,f,v){var w=1/Math.tan(n/2);if(c[0]=w/o,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=w,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,v!=null&&v!==1/0){var A=1/(f-v);c[10]=(v+f)*A,c[14]=2*v*f*A}else c[10]=-1,c[14]=-2*f;return c},m.b5=function(c){var n=new ne(16);return n[0]=c[0],n[1]=c[1],n[2]=c[2],n[3]=c[3],n[4]=c[4],n[5]=c[5],n[6]=c[6],n[7]=c[7],n[8]=c[8],n[9]=c[9],n[10]=c[10],n[11]=c[11],n[12]=c[12],n[13]=c[13],n[14]=c[14],n[15]=c[15],n},m.b6=function(c,n,o){var f=Math.sin(o),v=Math.cos(o),w=n[0],A=n[1],P=n[2],I=n[3],D=n[4],B=n[5],V=n[6],W=n[7];return n!==c&&(c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c[0]=w*v+D*f,c[1]=A*v+B*f,c[2]=P*v+V*f,c[3]=I*v+W*f,c[4]=D*v-w*f,c[5]=B*v-A*f,c[6]=V*v-P*f,c[7]=W*v-I*f,c},m.b7=function(c,n,o){var f=Math.sin(o),v=Math.cos(o),w=n[4],A=n[5],P=n[6],I=n[7],D=n[8],B=n[9],V=n[10],W=n[11];return n!==c&&(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c[4]=w*v+D*f,c[5]=A*v+B*f,c[6]=P*v+V*f,c[7]=I*v+W*f,c[8]=D*v-w*f,c[9]=B*v-A*f,c[10]=V*v-P*f,c[11]=W*v-I*f,c},m.b8=function(){const c=new Float32Array(16);return J(c),c},m.b9=function(){const c=new Float64Array(16);return J(c),c},m.bA=function(c,n){const o=We(c,360),f=We(n,360),v=f-o,w=f>o?v-360:v+360;return Math.abs(v)<Math.abs(w)?v:w},m.bB=function(c){return c[0]=0,c[1]=0,c[2]=0,c},m.bC=function(c,n,o,f){const v=Math.sqrt(c*c+n*n),w=Math.sqrt(o*o+f*f);c/=v,n/=v,o/=w,f/=w;const A=Math.acos(c*o+n*f);return-n*o+c*f>0?A:-A},m.bD=function(c,n){const o=We(c,2*Math.PI),f=We(n,2*Math.PI);return Math.min(Math.abs(o-f),Math.abs(o-f+2*Math.PI),Math.abs(o-f-2*Math.PI))},m.bE=function(){const c={},n=Ve.$version;for(const o in Ve.$root){const f=Ve.$root[o];if(f.required){let v=null;v=o==="version"?n:f.type==="array"?[]:{},v!=null&&(c[o]=v)}}return c},m.bF=ka,m.bG=Re,m.bH=function c(n,o){if(Array.isArray(n)){if(!Array.isArray(o)||n.length!==o.length)return!1;for(let f=0;f<n.length;f++)if(!c(n[f],o[f]))return!1;return!0}if(typeof n=="object"&&n!==null&&o!==null){if(typeof o!="object"||Object.keys(n).length!==Object.keys(o).length)return!1;for(const f in n)if(!c(n[f],o[f]))return!1;return!0}return n===o},m.bI=function(c){c=c.slice();const n=Object.create(null);for(let o=0;o<c.length;o++)n[c[o].id]=c[o];for(let o=0;o<c.length;o++)"ref"in c[o]&&(c[o]=qr(c[o],n[c[o].ref]));return c},m.bJ=function(c,n){if(c.type==="custom")return new Wx(c,n);switch(c.type){case"background":return new Xx(c,n);case"circle":return new ev(c,n);case"color-relief":return new rg(c,n);case"fill":return new $x(c,n);case"fill-extrusion":return new ug(c,n);case"heatmap":return new zx(c,n);case"hillshade":return new qc(c,n);case"line":return new sv(c,n);case"raster":return new Zd(c,n);case"symbol":return new Ru(c,n)}},m.bK=c=>c.type==="raster",m.bL=_t,m.bM=function(c,n){if(!c)return[{command:"setStyle",args:[n]}];let o=[];try{if(!qt(c.version,n.version))return[{command:"setStyle",args:[n]}];qt(c.center,n.center)||o.push({command:"setCenter",args:[n.center]}),qt(c.state,n.state)||o.push({command:"setGlobalState",args:[n.state]}),qt(c.centerAltitude,n.centerAltitude)||o.push({command:"setCenterAltitude",args:[n.centerAltitude]}),qt(c.zoom,n.zoom)||o.push({command:"setZoom",args:[n.zoom]}),qt(c.bearing,n.bearing)||o.push({command:"setBearing",args:[n.bearing]}),qt(c.pitch,n.pitch)||o.push({command:"setPitch",args:[n.pitch]}),qt(c.roll,n.roll)||o.push({command:"setRoll",args:[n.roll]}),qt(c.sprite,n.sprite)||o.push({command:"setSprite",args:[n.sprite]}),qt(c.glyphs,n.glyphs)||o.push({command:"setGlyphs",args:[n.glyphs]}),qt(c.transition,n.transition)||o.push({command:"setTransition",args:[n.transition]}),qt(c.light,n.light)||o.push({command:"setLight",args:[n.light]}),qt(c.terrain,n.terrain)||o.push({command:"setTerrain",args:[n.terrain]}),qt(c.sky,n.sky)||o.push({command:"setSky",args:[n.sky]}),qt(c.projection,n.projection)||o.push({command:"setProjection",args:[n.projection]});const f={},v=[];(function(A,P,I,D){let B;for(B in P=P||{},A=A||{})Object.prototype.hasOwnProperty.call(A,B)&&(Object.prototype.hasOwnProperty.call(P,B)||ui(B,I,D));for(B in P)Object.prototype.hasOwnProperty.call(P,B)&&(Object.prototype.hasOwnProperty.call(A,B)?qt(A[B],P[B])||(A[B].type==="geojson"&&P[B].type==="geojson"&&Hr(A,P,B)?Er(I,{command:"setGeoJSONSourceData",args:[B,P[B].data]}):dn(B,P,I,D)):ei(B,P,I))})(c.sources,n.sources,v,f);const w=[];c.layers&&c.layers.forEach(A=>{"source"in A&&f[A.source]?o.push({command:"removeLayer",args:[A.id]}):w.push(A)}),o=o.concat(v),function(A,P,I){P=P||[];const D=(A=A||[]).map(Mn),B=P.map(Mn),V=A.reduce(Ur,{}),W=P.reduce(Ur,{}),K=D.slice(),te=Object.create(null);let le,de,ve,Be,Me;for(let Ce=0,Ke=0;Ce<D.length;Ce++)le=D[Ce],Object.prototype.hasOwnProperty.call(W,le)?Ke++:(Er(I,{command:"removeLayer",args:[le]}),K.splice(K.indexOf(le,Ke),1));for(let Ce=0,Ke=0;Ce<B.length;Ce++)le=B[B.length-1-Ce],K[K.length-1-Ce]!==le&&(Object.prototype.hasOwnProperty.call(V,le)?(Er(I,{command:"removeLayer",args:[le]}),K.splice(K.lastIndexOf(le,K.length-Ke),1)):Ke++,Be=K[K.length-Ce],Er(I,{command:"addLayer",args:[W[le],Be]}),K.splice(K.length-Ce,0,le),te[le]=!0);for(let Ce=0;Ce<B.length;Ce++)if(le=B[Ce],de=V[le],ve=W[le],!te[le]&&!qt(de,ve))if(qt(de.source,ve.source)&&qt(de["source-layer"],ve["source-layer"])&&qt(de.type,ve.type)){for(Me in Ar(de.layout,ve.layout,I,le,null,"setLayoutProperty"),Ar(de.paint,ve.paint,I,le,null,"setPaintProperty"),qt(de.filter,ve.filter)||Er(I,{command:"setFilter",args:[le,ve.filter]}),qt(de.minzoom,ve.minzoom)&&qt(de.maxzoom,ve.maxzoom)||Er(I,{command:"setLayerZoomRange",args:[le,ve.minzoom,ve.maxzoom]}),de)Object.prototype.hasOwnProperty.call(de,Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?Ar(de[Me],ve[Me],I,le,Me.slice(6),"setPaintProperty"):qt(de[Me],ve[Me])||Er(I,{command:"setLayerProperty",args:[le,Me,ve[Me]]}));for(Me in ve)Object.prototype.hasOwnProperty.call(ve,Me)&&!Object.prototype.hasOwnProperty.call(de,Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?Ar(de[Me],ve[Me],I,le,Me.slice(6),"setPaintProperty"):qt(de[Me],ve[Me])||Er(I,{command:"setLayerProperty",args:[le,Me,ve[Me]]}))}else Er(I,{command:"removeLayer",args:[le]}),Be=K[K.lastIndexOf(le)+1],Er(I,{command:"addLayer",args:[ve,Be]})}(w,n.layers,o)}catch(f){console.warn("Unable to compute style diff:",f),o=[{command:"setStyle",args:[n]}]}return o},m.bN=function(c){const n=[],o=c.id;return o===void 0&&n.push({message:`layers.${o}: missing required property "id"`}),c.render===void 0&&n.push({message:`layers.${o}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&n.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),n},m.bO=rr,m.bP=or,m.bQ=class extends Si{constructor(c,n){super(c,n),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},m.bR=Un,m.bS=class extends Si{constructor(c,n){super(c,n),this.current=Tn}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let n=1;n<16;n++)if(c[n]!==this.current[n]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},m.bT=sn,m.bU=class extends Si{constructor(c,n){super(c,n),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},m.bV=class extends Si{constructor(c,n){super(c,n),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},m.bW=ce,m.bX=function(c,n){var o=Math.sin(n),f=Math.cos(n);return c[0]=f,c[1]=o,c[2]=0,c[3]=-o,c[4]=f,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},m.bY=function(c,n,o){var f=n[0],v=n[1],w=n[2];return c[0]=f*o[0]+v*o[3]+w*o[6],c[1]=f*o[1]+v*o[4]+w*o[7],c[2]=f*o[2]+v*o[5]+w*o[8],c},m.bZ=function(c,n,o,f,v,w,A){var P=1/(n-o),I=1/(f-v),D=1/(w-A);return c[0]=-2*P,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*I,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*D,c[11]=0,c[12]=(n+o)*P,c[13]=(v+f)*I,c[14]=(A+w)*D,c[15]=1,c},m.b_=class extends Si{constructor(c,n){super(c,n),this.current=new Array}set(c){if(c!=this.current){this.current=c;const n=new Float32Array(4*c.length);for(let o=0;o<c.length;o++)n[4*o]=c[o].r,n[4*o+1]=c[o].g,n[4*o+2]=c[o].b,n[4*o+3]=c[o].a;this.gl.uniform4fv(this.location,n)}}},m.ba=function(){return new Float64Array(16)},m.bb=function(c,n,o){const f=new Float64Array(4);return Te(f,c,n-90,o),f},m.bc=function(c,n,o,f){var v,w,A,P,I,D=n[0],B=n[1],V=n[2],W=n[3],K=o[0],te=o[1],le=o[2],de=o[3];return(w=D*K+B*te+V*le+W*de)<0&&(w=-w,K=-K,te=-te,le=-le,de=-de),1-w>ie?(v=Math.acos(w),A=Math.sin(v),P=Math.sin((1-f)*v)/A,I=Math.sin(f*v)/A):(P=1-f,I=f),c[0]=P*D+I*K,c[1]=P*B+I*te,c[2]=P*V+I*le,c[3]=P*W+I*de,c},m.bd=function(c){const n=new Float64Array(9);var o,f,v,w,A,P,I,D,B,V,W,K,te,le,de,ve,Be,Me;V=(v=(f=c)[0])*(I=v+v),W=(w=f[1])*I,te=(A=f[2])*I,le=A*(D=w+w),ve=(P=f[3])*I,Be=P*D,Me=P*(B=A+A),(o=n)[0]=1-(K=w*D)-(de=A*B),o[3]=W-Me,o[6]=te+Be,o[1]=W+Me,o[4]=1-V-de,o[7]=le-ve,o[2]=te-Be,o[5]=le+ve,o[8]=1-V-K;const Ce=Ri(-Math.asin(zt(n[2],-1,1)));let Ke,ot;return Math.hypot(n[5],n[8])<.001?(Ke=0,ot=-Ri(Math.atan2(n[3],n[4]))):(Ke=Ri(n[5]===0&&n[8]===0?0:Math.atan2(n[5],n[8])),ot=Ri(n[1]===0&&n[0]===0?0:Math.atan2(n[1],n[0]))),{roll:Ke,pitch:Ce+90,bearing:ot}},m.be=function(c,n){return c.roll==n.roll&&c.pitch==n.pitch&&c.bearing==n.bearing},m.bf=xr,m.bg=Rn,m.bh=Pu,m.bi=el,m.bj=Vc,m.bk=lt,m.bl=ct,m.bm=Li,m.bn=function(c,n,o,f,v){return lt(f,v,zt((c-n)/(o-n),0,1))},m.bo=We,m.bp=function(){return new Float64Array(3)},m.bq=function(c,n,o,f){return c[0]=n[0]+o[0]*f,c[1]=n[1]+o[1]*f,c[2]=n[2]+o[2]*f,c},m.br=Te,m.bs=function(c,n,o){var f=o[0],v=o[1],w=o[2],A=o[3],P=n[0],I=n[1],D=n[2],B=v*D-w*I,V=w*P-f*D,W=f*I-v*P;return c[0]=P+A*(B+=B)+v*(W+=W)-w*(V+=V),c[1]=I+A*V+w*B-f*W,c[2]=D+A*W+f*V-v*B,c},m.bt=function(c,n,o){const f=(v=[c[0],c[1],c[2],n[0],n[1],n[2],o[0],o[1],o[2]])[0]*((B=v[8])*(A=v[4])-(P=v[5])*(D=v[7]))+v[1]*(-B*(w=v[3])+P*(I=v[6]))+v[2]*(D*w-A*I);var v,w,A,P,I,D,B;if(f===0)return null;const V=ke([],[n[0],n[1],n[2]],[o[0],o[1],o[2]]),W=ke([],[o[0],o[1],o[2]],[c[0],c[1],c[2]]),K=ke([],[c[0],c[1],c[2]],[n[0],n[1],n[2]]),te=at([],V,-c[3]);return Oe(te,te,at([],W,-n[3])),Oe(te,te,at([],K,-o[3])),at(te,te,1/f),te},m.bu=td,m.bv=function(){return new Float64Array(4)},m.bw=function(c,n,o,f){var v=[],w=[];return v[0]=n[0]-o[0],v[1]=n[1]-o[1],v[2]=n[2]-o[2],w[0]=v[0]*Math.cos(f)-v[1]*Math.sin(f),w[1]=v[0]*Math.sin(f)+v[1]*Math.cos(f),w[2]=v[2],c[0]=w[0]+o[0],c[1]=w[1]+o[1],c[2]=w[2]+o[2],c},m.bx=function(c,n,o,f){var v=[],w=[];return v[0]=n[0]-o[0],v[1]=n[1]-o[1],v[2]=n[2]-o[2],w[0]=v[0],w[1]=v[1]*Math.cos(f)-v[2]*Math.sin(f),w[2]=v[1]*Math.sin(f)+v[2]*Math.cos(f),c[0]=w[0]+o[0],c[1]=w[1]+o[1],c[2]=w[2]+o[2],c},m.by=function(c,n,o,f){var v=[],w=[];return v[0]=n[0]-o[0],v[1]=n[1]-o[1],v[2]=n[2]-o[2],w[0]=v[2]*Math.sin(f)+v[0]*Math.cos(f),w[1]=v[1],w[2]=v[2]*Math.cos(f)-v[0]*Math.sin(f),c[0]=w[0]+o[0],c[1]=w[1]+o[1],c[2]=w[2]+o[2],c},m.bz=function(c,n,o){var f=Math.sin(o),v=Math.cos(o),w=n[0],A=n[1],P=n[2],I=n[3],D=n[8],B=n[9],V=n[10],W=n[11];return n!==c&&(c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c[0]=w*v-D*f,c[1]=A*v-B*f,c[2]=P*v-V*f,c[3]=I*v-W*f,c[8]=w*f+D*v,c[9]=A*f+B*v,c[10]=P*f+V*v,c[11]=I*f+W*v,c},m.c=ae,m.c0=class extends zh{},m.c1=vp,m.c2=class extends r{},m.c3=Qm,m.c4=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},m.c5=Vn,m.c6=function(c,n,o){var f=n[0],v=n[1],w=n[2],A=o[3]*f+o[7]*v+o[11]*w+o[15];return c[0]=(o[0]*f+o[4]*v+o[8]*w+o[12])/(A=A||1),c[1]=(o[1]*f+o[5]*v+o[9]*w+o[13])/A,c[2]=(o[2]*f+o[6]*v+o[10]*w+o[14])/A,c},m.c7=class extends Ka{},m.c8=class extends R{},m.c9=function(c,n){return c[0]===n[0]&&c[1]===n[1]&&c[2]===n[2]&&c[3]===n[3]&&c[4]===n[4]&&c[5]===n[5]&&c[6]===n[6]&&c[7]===n[7]&&c[8]===n[8]&&c[9]===n[9]&&c[10]===n[10]&&c[11]===n[11]&&c[12]===n[12]&&c[13]===n[13]&&c[14]===n[14]&&c[15]===n[15]},m.cA=function(c,n){oe.REGISTERED_PROTOCOLS[c]=n},m.cB=function(c){delete oe.REGISTERED_PROTOCOLS[c]},m.cC=function(c,n){const o={};for(let v=0;v<c.length;v++){const w=n&&n[c[v].id]||vu(c[v]);n&&(n[c[v].id]=w);let A=o[w];A||(A=o[w]=[]),A.push(c[v])}const f=[];for(const v in o)f.push(o[v]);return f},m.cD=Nt,m.cE=Pv,m.cF=Tg,m.cG=xn,m.cH=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=dt/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const n=c.bucket.layers[0],o=n.layout,f=n._unevaluatedLayout._values,v={layoutIconSize:f["icon-size"].possiblyEvaluate(new an(c.bucket.zoom+1),c.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new an(c.bucket.zoom+1),c.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new an(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:B}=c.bucket.textSizeData;v.compositeTextSizes=[f["text-size"].possiblyEvaluate(new an(D),c.canonical),f["text-size"].possiblyEvaluate(new an(B),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:B}=c.bucket.iconSizeData;v.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new an(D),c.canonical),f["icon-size"].possiblyEvaluate(new an(B),c.canonical)]}const w=o.get("text-line-height")*yi,A=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",P=o.get("text-keep-upright"),I=o.get("text-size");for(const D of c.bucket.features){const B=o.get("text-font").evaluate(D,{},c.canonical).join(","),V=I.evaluate(D,{},c.canonical),W=v.layoutTextSize.evaluate(D,{},c.canonical),K=v.layoutIconSize.evaluate(D,{},c.canonical),te={horizontal:{},vertical:void 0},le=D.text;let de,ve=[0,0];if(le){const Ce=le.toString(),Ke=o.get("text-letter-spacing").evaluate(D,{},c.canonical)*yi,ot=ms(Ce)?Ke:0,gt=o.get("text-anchor").evaluate(D,{},c.canonical),Pt=Nv(n,D,c.canonical);if(!Pt){const It=o.get("text-radial-offset").evaluate(D,{},c.canonical);ve=It?kv(gt,[It*yi,jg]):o.get("text-offset").evaluate(D,{},c.canonical).map(kt=>kt*yi)}let Mt=A?"center":o.get("text-justify").evaluate(D,{},c.canonical);const Ct=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(D,{},c.canonical)*yi:1/0,Ut=()=>{c.bucket.allowVerticalPlacement&&kc(Ce)&&(te.vertical=Tp(le,c.glyphMap,c.glyphPositions,c.imagePositions,B,Ct,w,gt,"left",ot,ve,m.ao.vertical,!0,W,V))};if(!A&&Pt){const It=new Set;if(Mt==="auto")for(let ft=0;ft<Pt.values.length;ft+=2)It.add(Fp(Pt.values[ft]));else It.add(Mt);let kt=!1;for(const ft of It)if(!te.horizontal[ft])if(kt)te.horizontal[ft]=te.horizontal[0];else{const nr=Tp(le,c.glyphMap,c.glyphPositions,c.imagePositions,B,Ct,w,"center",ft,ot,ve,m.ao.horizontal,!1,W,V);nr&&(te.horizontal[ft]=nr,kt=nr.positionedLines.length===1)}Ut()}else{Mt==="auto"&&(Mt=Fp(gt));const It=Tp(le,c.glyphMap,c.glyphPositions,c.imagePositions,B,Ct,w,gt,Mt,ot,ve,m.ao.horizontal,!1,W,V);It&&(te.horizontal[Mt]=It),Ut(),kc(Ce)&&A&&P&&(te.vertical=Tp(le,c.glyphMap,c.glyphPositions,c.imagePositions,B,Ct,w,gt,Mt,ot,ve,m.ao.vertical,!1,W,V))}}let Be=!1;if(D.icon&&D.icon.name){const Ce=c.imageMap[D.icon.name];Ce&&(de=yg(c.imagePositions[D.icon.name],o.get("icon-offset").evaluate(D,{},c.canonical),o.get("icon-anchor").evaluate(D,{},c.canonical)),Be=!!Ce.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=Be:c.bucket.sdfIcons!==Be&&Jt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ce.pixelRatio!==c.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Me=Pg(te.horizontal)||te.vertical;c.bucket.iconsInText=!!Me&&Me.iconsInText,(Me||de)&&sd(c.bucket,D,te,de,c.imageMap,v,W,K,ve,Be,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},m.cI=pp,m.cJ=Yl,m.cK=nf,m.cL=mp,m.cM=af,m.cN=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},m.cO=function(c,n,o,f,v){return l(this,void 0,void 0,function*(){if(re())try{return yield ki(c,n,o,f,v)}catch{}return function(w,A,P,I,D){const B=w.width,V=w.height;Ni&&Yi||(Ni=new OffscreenCanvas(B,V),Yi=Ni.getContext("2d",{willReadFrequently:!0})),Ni.width=B,Ni.height=V,Yi.drawImage(w,0,0,B,V);const W=Yi.getImageData(A,P,I,D);return Yi.clearRect(0,0,B,V),W.data}(c,n,o,f,v)})},m.cP=xs,m.cQ=E,m.cR=Xl,m.cS=Ir,m.cT=Rl,m.cU=function(c,n){const o=new Map;if(c!=null)if(c.type==="Feature")o.set(ad(c,n),c);else for(const f of c.features)o.set(ad(f,n),f);return o},m.cV=function(c,n){if(c==null)return!0;if(c.type==="Feature")return ad(c,n)!=null;if(c.type==="FeatureCollection"){const o=new Set;for(const f of c.features){const v=ad(f,n);if(v==null||o.has(v))return!1;o.add(v)}return!0}return!1},m.cW=function(c,n,o){var f,v,w,A;if(n.removeAll&&c.clear(),n.remove)for(const P of n.remove)c.delete(P);if(n.add)for(const P of n.add){const I=ad(P,o);I!=null&&c.set(I,P)}if(n.update)for(const P of n.update){let I=c.get(P.id);if(I==null)continue;const D=!P.removeAllProperties&&(((f=P.removeProperties)===null||f===void 0?void 0:f.length)>0||((v=P.addOrUpdateProperties)===null||v===void 0?void 0:v.length)>0);if((P.newGeometry||P.removeAllProperties||D)&&(I=Object.assign({},I),c.set(P.id,I),D&&(I.properties=Object.assign({},I.properties))),P.newGeometry&&(I.geometry=P.newGeometry),P.removeAllProperties)I.properties={};else if(((w=P.removeProperties)===null||w===void 0?void 0:w.length)>0)for(const B of P.removeProperties)Object.prototype.hasOwnProperty.call(I.properties,B)&&delete I.properties[B];if(((A=P.addOrUpdateProperties)===null||A===void 0?void 0:A.length)>0)for(const{key:B,value:V}of P.addOrUpdateProperties)I.properties[B]=V}},m.cX=gs,m.ca=function(c,n){var o=c[0],f=c[1],v=c[2],w=c[3],A=c[4],P=c[5],I=c[6],D=c[7],B=c[8],V=c[9],W=c[10],K=c[11],te=c[12],le=c[13],de=c[14],ve=c[15],Be=n[0],Me=n[1],Ce=n[2],Ke=n[3],ot=n[4],gt=n[5],Pt=n[6],Mt=n[7],Ct=n[8],Ut=n[9],It=n[10],kt=n[11],ft=n[12],nr=n[13],sr=n[14],Zt=n[15];return Math.abs(o-Be)<=ie*Math.max(1,Math.abs(o),Math.abs(Be))&&Math.abs(f-Me)<=ie*Math.max(1,Math.abs(f),Math.abs(Me))&&Math.abs(v-Ce)<=ie*Math.max(1,Math.abs(v),Math.abs(Ce))&&Math.abs(w-Ke)<=ie*Math.max(1,Math.abs(w),Math.abs(Ke))&&Math.abs(A-ot)<=ie*Math.max(1,Math.abs(A),Math.abs(ot))&&Math.abs(P-gt)<=ie*Math.max(1,Math.abs(P),Math.abs(gt))&&Math.abs(I-Pt)<=ie*Math.max(1,Math.abs(I),Math.abs(Pt))&&Math.abs(D-Mt)<=ie*Math.max(1,Math.abs(D),Math.abs(Mt))&&Math.abs(B-Ct)<=ie*Math.max(1,Math.abs(B),Math.abs(Ct))&&Math.abs(V-Ut)<=ie*Math.max(1,Math.abs(V),Math.abs(Ut))&&Math.abs(W-It)<=ie*Math.max(1,Math.abs(W),Math.abs(It))&&Math.abs(K-kt)<=ie*Math.max(1,Math.abs(K),Math.abs(kt))&&Math.abs(te-ft)<=ie*Math.max(1,Math.abs(te),Math.abs(ft))&&Math.abs(le-nr)<=ie*Math.max(1,Math.abs(le),Math.abs(nr))&&Math.abs(de-sr)<=ie*Math.max(1,Math.abs(de),Math.abs(sr))&&Math.abs(ve-Zt)<=ie*Math.max(1,Math.abs(ve),Math.abs(Zt))},m.cb=function(c,n){return c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15],c},m.cc=c=>c.type==="symbol",m.cd=c=>c.type==="circle",m.ce=c=>c.type==="heatmap",m.cf=c=>c.type==="line",m.cg=c=>c.type==="fill",m.ch=c=>c.type==="fill-extrusion",m.ci=c=>c.type==="hillshade",m.cj=c=>c.type==="color-relief",m.ck=c=>c.type==="background",m.cl=c=>c.type==="custom",m.cm=jt,m.cn=function(c,n,o){const f=Ze(n.x-o.x,n.y-o.y),v=Ze(c.x-o.x,c.y-o.y);var w,A;return Ri(Math.atan2(f[0]*v[1]-f[1]*v[0],(w=f)[0]*(A=v)[0]+w[1]*A[1]))},m.co=Gt,m.cp=function(c,n){return ci[n]&&(c instanceof MouseEvent||c instanceof WheelEvent)},m.cq=function(c,n){return Jn[n]&&"touches"in c},m.cr=function(c){return Jn[c]||ci[c]},m.cs=function(c,n,o){var f=n[0],v=n[1];return c[0]=o[0]*f+o[4]*v+o[12],c[1]=o[1]*f+o[5]*v+o[13],c},m.ct=function(c,n){const{x:o,y:f}=nd.fromLngLat(n);return!(c<0||c>25||f<0||f>=1||o<0||o>=1)},m.cu=function(c,n){return c[0]=n[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=n[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=n[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},m.cv=class extends Gs{},m.cw=e0,m.cy=function(c){return c.message===Ne},m.cz=Pe,m.d=Le,m.e=ar,m.f=c=>l(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(n)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),m.g=fe,m.h=c=>new Promise((n,o)=>{const f=new Image;f.onload=()=>{n(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame(()=>{f.src=Fa})},f.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(c)],{type:"image/png"});f.src=c.byteLength?URL.createObjectURL(v):Fa}),m.i=rn,m.j=(c,n)=>Xe(ar(c,{type:"json"}),n),m.k=$t,m.l=mt,m.m=Xe,m.n=(c,n)=>Xe(ar(c,{type:"arrayBuffer"}),n),m.o=function(c){return new af(c).readFields(yv,[])},m.p=mg,m.q=$c,m.r=ji,m.s=Eo,m.t=on,m.u=wr,m.v=Ve,m.w=Jt,m.x=Fd,m.y=$d,m.z=_a}),d("worker",["./shared"],function(m){class l{constructor(ae,oe){this.keyCache={},ae&&this.replace(ae,oe)}replace(ae,oe){this._layerConfigs={},this._layers={},this.update(ae,[],oe)}update(ae,oe,fe){for(const Pe of ae){this._layerConfigs[Pe.id]=Pe;const Re=this._layers[Pe.id]=m.bJ(Pe,fe);Re._featureFilter=m.aa(Re.filter,fe),this.keyCache[Pe.id]&&delete this.keyCache[Pe.id]}for(const Pe of oe)delete this.keyCache[Pe],delete this._layerConfigs[Pe],delete this._layers[Pe];this.familiesBySource={};const Se=m.cC(Object.values(this._layerConfigs),this.keyCache);for(const Pe of Se){const Re=Pe.map($t=>this._layers[$t.id]),Xe=Re[0];if(Xe.visibility==="none")continue;const Le=Xe.source||"";let ht=this.familiesBySource[Le];ht||(ht=this.familiesBySource[Le]={});const St=Xe.sourceLayer||"_geojsonTileLayer";let mt=ht[St];mt||(mt=ht[St]=[]),mt.push(Re)}}}class M{constructor(ae){const oe={},fe=[];for(const Xe in ae){const Le=ae[Xe],ht=oe[Xe]={};for(const St in Le){const mt=Le[+St];if(!mt||mt.bitmap.width===0||mt.bitmap.height===0)continue;const $t={x:0,y:0,w:mt.bitmap.width+2,h:mt.bitmap.height+2};fe.push($t),ht[St]={rect:$t,metrics:mt.metrics}}}const{w:Se,h:Pe}=m.p(fe),Re=new m.q({width:Se||1,height:Pe||1});for(const Xe in ae){const Le=ae[Xe];for(const ht in Le){const St=Le[+ht];if(!St||St.bitmap.width===0||St.bitmap.height===0)continue;const mt=oe[Xe][ht].rect;m.q.copy(St.bitmap,Re,{x:0,y:0},{x:mt.x+1,y:mt.y+1},St.bitmap)}}this.image=Re,this.positions=oe}}m.cD("GlyphAtlas",M);class E{constructor(ae){this.tileID=new m.Z(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[]}parse(ae,oe,fe,Se,Pe){return m._(this,void 0,void 0,function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new m.a8;const Re=new m.cE(Object.keys(ae.layers).sort()),Xe=new m.cF(this.tileID,this.promoteId);Xe.bucketLayerIDs=[];const Le={},ht={featureIndex:Xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:fe,subdivisionGranularity:Pe},St=oe.familiesBySource[this.source];for(const Ur in St){const wt=ae.layers[Ur];if(!wt)continue;wt.version===1&&m.w(`Vector tile source "${this.source}" layer "${Ur}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Co=Re.encode(Ur),ua=[];for(let Mi=0;Mi<wt.length;Mi++){const Yn=wt.feature(Mi),Et=Xe.getId(Yn,Ur);ua.push({feature:Yn,id:Et,index:Mi,sourceLayerIndex:Co})}for(const Mi of St[Ur]){const Yn=Mi[0];Yn.source!==this.source&&m.w(`layer.source = ${Yn.source} does not equal this.source = ${this.source}`),Yn.minzoom&&this.zoom<Math.floor(Yn.minzoom)||Yn.maxzoom&&this.zoom>=Yn.maxzoom||Yn.visibility!=="none"&&(N(Mi,this.zoom,fe),(Le[Yn.id]=Yn.createBucket({index:Xe.bucketLayerIDs.length,layers:Mi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Co,sourceID:this.source})).populate(ua,ht,this.tileID.canonical),Xe.bucketLayerIDs.push(Mi.map(Et=>Et.id)))}}const mt=m.bO(ht.glyphDependencies,Ur=>Object.keys(Ur).map(Number));this.inFlightDependencies.forEach(Ur=>Ur==null?void 0:Ur.abort()),this.inFlightDependencies=[];let $t=Promise.resolve({});if(Object.keys(mt).length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),$t=Se.sendAsync({type:"GG",data:{stacks:mt,source:this.source,tileID:this.tileID,type:"glyphs"}},Ur)}const Ht=Object.keys(ht.iconDependencies);let Ve=Promise.resolve({});if(Ht.length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),Ve=Se.sendAsync({type:"GI",data:{icons:Ht,source:this.source,tileID:this.tileID,type:"icons"}},Ur)}const Or=Object.keys(ht.patternDependencies);let qr=Promise.resolve({});if(Or.length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),qr=Se.sendAsync({type:"GI",data:{icons:Or,source:this.source,tileID:this.tileID,type:"patterns"}},Ur)}const qt=ht.dashDependencies;let Er=Promise.resolve({});if(Object.keys(qt).length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),Er=Se.sendAsync({type:"GDA",data:{dashes:qt}},Ur)}const[ei,ui,dn,Hr]=yield Promise.all([$t,Ve,qr,Er]),Ar=new M(ei),Mn=new m.cG(ui,dn);for(const Ur in Le){const wt=Le[Ur];wt instanceof m.a9?(N(wt.layers,this.zoom,fe),m.cH({bucket:wt,glyphMap:ei,glyphPositions:Ar.positions,imageMap:ui,imagePositions:Mn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:ht.subdivisionGranularity})):wt.hasDependencies&&(wt instanceof m.cI||wt instanceof m.cJ||wt instanceof m.cK)&&(N(wt.layers,this.zoom,fe),wt.addFeatures(ht,this.tileID.canonical,Mn.patternPositions,Hr))}return this.status="done",{buckets:Object.values(Le).filter(Ur=>!Ur.isEmpty()),featureIndex:Xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ar.image,imageAtlas:Mn,dashPositions:Hr,glyphMap:this.returnDependencies?ei:null,iconMap:this.returnDependencies?ui:null,glyphPositions:this.returnDependencies?Ar.positions:null}})}}function N(Ne,ae,oe){const fe=new m.F(ae);for(const Se of Ne)Se.recalculate(fe,oe)}class C{constructor(ae,oe,fe){this.actor=ae,this.layerIndex=oe,this.availableImages=fe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ae,oe){return m._(this,void 0,void 0,function*(){const fe=yield m.n(ae.request,oe);try{return{vectorTile:new m.cL(new m.cM(fe.data)),rawData:fe.data,cacheControl:fe.cacheControl,expires:fe.expires}}catch(Se){const Pe=new Uint8Array(fe.data);let Re=`Unable to parse the tile at ${ae.request.url}, `;throw Re+=Pe[0]===31&&Pe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Se.message}`,new Error(Re)}})}loadTile(ae){return m._(this,void 0,void 0,function*(){const oe=ae.uid,fe=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new m.cN(ae.request),Se=new E(ae);this.loading[oe]=Se;const Pe=new AbortController;Se.abort=Pe;try{const Re=yield this.loadVectorTile(ae,Pe);if(delete this.loading[oe],!Re)return null;const Xe=Re.rawData,Le={};Re.expires&&(Le.expires=Re.expires),Re.cacheControl&&(Le.cacheControl=Re.cacheControl);const ht={};if(fe){const mt=fe.finish();mt&&(ht.resourceTiming=JSON.parse(JSON.stringify(mt)))}Se.vectorTile=Re.vectorTile;const St=Se.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);this.loaded[oe]=Se,this.fetching[oe]={rawTileData:Xe,cacheControl:Le,resourceTiming:ht};try{const mt=yield St;return m.e({rawTileData:Xe.slice(0)},mt,Le,ht)}finally{delete this.fetching[oe]}}catch(Re){throw delete this.loading[oe],Se.status="done",this.loaded[oe]=Se,Re}})}reloadTile(ae){return m._(this,void 0,void 0,function*(){const oe=ae.uid;if(!this.loaded||!this.loaded[oe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const fe=this.loaded[oe];if(fe.showCollisionBoxes=ae.showCollisionBoxes,fe.status==="parsing"){const Se=yield fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);let Pe;if(this.fetching[oe]){const{rawTileData:Re,cacheControl:Xe,resourceTiming:Le}=this.fetching[oe];delete this.fetching[oe],Pe=m.e({rawTileData:Re.slice(0)},Se,Xe,Le)}else Pe=Se;return Pe}if(fe.status==="done"&&fe.vectorTile)return fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity)})}abortTile(ae){return m._(this,void 0,void 0,function*(){const oe=this.loading,fe=ae.uid;oe&&oe[fe]&&oe[fe].abort&&(oe[fe].abort.abort(),delete oe[fe])})}removeTile(ae){return m._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]})}}class L{constructor(){this.loaded={}}loadTile(ae){return m._(this,void 0,void 0,function*(){const{uid:oe,encoding:fe,rawImageData:Se,redFactor:Pe,greenFactor:Re,blueFactor:Xe,baseShift:Le}=ae,ht=Se.width+2,St=Se.height+2,mt=m.b(Se)?new m.R({width:ht,height:St},yield m.cO(Se,-1,-1,ht,St)):Se,$t=new m.cP(oe,mt,fe,Pe,Re,Xe,Le);return this.loaded=this.loaded||{},this.loaded[oe]=$t,$t})}removeTile(ae){const oe=this.loaded,fe=ae.uid;oe&&oe[fe]&&delete oe[fe]}}var F,H,G=function(){if(H)return F;function Ne(oe,fe){if(oe.length!==0){ae(oe[0],fe);for(var Se=1;Se<oe.length;Se++)ae(oe[Se],!fe)}}function ae(oe,fe){for(var Se=0,Pe=0,Re=0,Xe=oe.length,Le=Xe-1;Re<Xe;Le=Re++){var ht=(oe[Re][0]-oe[Le][0])*(oe[Le][1]+oe[Re][1]),St=Se+ht;Pe+=Math.abs(Se)>=Math.abs(ht)?Se-St+ht:ht-St+Se,Se=St}Se+Pe>=0!=!!fe&&oe.reverse()}return H=1,F=function oe(fe,Se){var Pe,Re=fe&&fe.type;if(Re==="FeatureCollection")for(Pe=0;Pe<fe.features.length;Pe++)oe(fe.features[Pe],Se);else if(Re==="GeometryCollection")for(Pe=0;Pe<fe.geometries.length;Pe++)oe(fe.geometries[Pe],Se);else if(Re==="Feature")oe(fe.geometry,Se);else if(Re==="Polygon")Ne(fe.coordinates,Se);else if(Re==="MultiPolygon")for(Pe=0;Pe<fe.coordinates.length;Pe++)Ne(fe.coordinates[Pe],Se);return fe}}(),q=m.cQ(G);class re extends m.cS{constructor(ae,oe){super(new m.cM,0,oe,[],[]),this.feature=ae,this.type=ae.type,this.properties=ae.tags?ae.tags:{},"id"in ae&&(typeof ae.id=="string"?this.id=parseInt(ae.id,10):typeof ae.id!="number"||isNaN(ae.id)||(this.id=ae.id))}loadGeometry(){const ae=[],oe=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const fe of oe){const Se=[];for(const Pe of fe)Se.push(new m.P(Pe[0],Pe[1]));ae.push(Se)}return ae}}class ie extends m.cR{constructor(ae,oe){super(new m.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=oe?oe.version:1,this.extent=oe?oe.extent:4096,this.length=ae.length,this.features=ae}feature(ae){return new re(this.features[ae],this.extent)}}function ne(Ne,ae){ae.writeVarintField(15,Ne.version||1),ae.writeStringField(1,Ne.name||""),ae.writeVarintField(5,Ne.extent||4096);const oe={keys:[],values:[],keycache:{},valuecache:{}};for(let Pe=0;Pe<Ne.length;Pe++)oe.feature=Ne.feature(Pe),ae.writeMessage(2,ce,oe);const fe=oe.keys;for(const Pe of fe)ae.writeStringField(3,Pe);const Se=oe.values;for(const Pe of Se)ae.writeMessage(4,Oe,Pe)}function ce(Ne,ae){if(!Ne.feature)return;const oe=Ne.feature;oe.id!==void 0&&ae.writeVarintField(1,oe.id),ae.writeMessage(2,J,Ne),ae.writeVarintField(3,oe.type),ae.writeMessage(4,ge,oe)}function J(Ne,ae){var oe;for(const fe in(oe=Ne.feature)==null?void 0:oe.properties){let Se=Ne.feature.properties[fe],Pe=Ne.keycache[fe];if(Se===null)continue;Pe===void 0&&(Ne.keys.push(fe),Pe=Ne.keys.length-1,Ne.keycache[fe]=Pe),ae.writeVarint(Pe),typeof Se!="string"&&typeof Se!="boolean"&&typeof Se!="number"&&(Se=JSON.stringify(Se));const Re=typeof Se+":"+Se;let Xe=Ne.valuecache[Re];Xe===void 0&&(Ne.values.push(Se),Xe=Ne.values.length-1,Ne.valuecache[Re]=Xe),ae.writeVarint(Xe)}}function ee(Ne,ae){return(ae<<3)+(7&Ne)}function he(Ne){return Ne<<1^Ne>>31}function ge(Ne,ae){const oe=Ne.loadGeometry(),fe=Ne.type;let Se=0,Pe=0;for(const Re of oe){let Xe=1;fe===1&&(Xe=Re.length),ae.writeVarint(ee(1,Xe));const Le=fe===3?Re.length-1:Re.length;for(let ht=0;ht<Le;ht++){ht===1&&fe!==1&&ae.writeVarint(ee(2,Le-1));const St=Re[ht].x-Se,mt=Re[ht].y-Pe;ae.writeVarint(he(St)),ae.writeVarint(he(mt)),Se+=St,Pe+=mt}Ne.type===3&&ae.writeVarint(ee(7,1))}}function Oe(Ne,ae){const oe=typeof Ne;oe==="string"?ae.writeStringField(1,Ne):oe==="boolean"?ae.writeBooleanField(7,Ne):oe==="number"&&(Ne%1!=0?ae.writeDoubleField(3,Ne):Ne<0?ae.writeSVarintField(6,Ne):ae.writeVarintField(5,Ne))}const at={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ne=>Ne},ke=Math.fround||(qe=new Float32Array(1),Ne=>(qe[0]=+Ne,qe[0]));var qe;class et{constructor(ae){this.options=Object.assign(Object.create(at),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:oe,minZoom:fe,maxZoom:Se}=this.options;oe&&console.time("total time");const Pe=`prepare ${ae.length} points`;oe&&console.time(Pe),this.points=ae;const Re=[];for(let Le=0;Le<ae.length;Le++){const ht=ae[Le];if(!ht.geometry)continue;const[St,mt]=ht.geometry.coordinates,$t=ke(Te(St)),Ht=ke(Ge(mt));Re.push($t,Ht,1/0,Le,-1,1),this.options.reduce&&Re.push(0)}let Xe=this.trees[Se+1]=this._createTree(Re);oe&&console.timeEnd(Pe);for(let Le=Se;Le>=fe;Le--){const ht=+Date.now();Xe=this.trees[Le]=this._createTree(this._cluster(Xe,Le)),oe&&console.log("z%d: %d clusters in %dms",Le,Xe.numItems,+Date.now()-ht)}return oe&&console.timeEnd("total time"),this}getClusters(ae,oe){let fe=((ae[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,ae[1]));let Pe=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const Re=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)fe=-180,Pe=180;else if(fe>Pe){const mt=this.getClusters([fe,Se,180,Re],oe),$t=this.getClusters([-180,Se,Pe,Re],oe);return mt.concat($t)}const Xe=this.trees[this._limitZoom(oe)],Le=Xe.range(Te(fe),Ge(Re),Te(Pe),Ge(Se)),ht=Xe.data,St=[];for(const mt of Le){const $t=this.stride*mt;St.push(ht[$t+5]>1?st(ht,$t,this.clusterProps):this.points[ht[$t+3]])}return St}getChildren(ae){const oe=this._getOriginId(ae),fe=this._getOriginZoom(ae),Se="No cluster with the specified id.",Pe=this.trees[fe];if(!Pe)throw new Error(Se);const Re=Pe.data;if(oe*this.stride>=Re.length)throw new Error(Se);const Xe=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),Le=Pe.within(Re[oe*this.stride],Re[oe*this.stride+1],Xe),ht=[];for(const St of Le){const mt=St*this.stride;Re[mt+4]===ae&&ht.push(Re[mt+5]>1?st(Re,mt,this.clusterProps):this.points[Re[mt+3]])}if(ht.length===0)throw new Error(Se);return ht}getLeaves(ae,oe,fe){const Se=[];return this._appendLeaves(Se,ae,oe=oe||10,fe=fe||0,0),Se}getTile(ae,oe,fe){const Se=this.trees[this._limitZoom(ae)],Pe=Math.pow(2,ae),{extent:Re,radius:Xe}=this.options,Le=Xe/Re,ht=(fe-Le)/Pe,St=(fe+1+Le)/Pe,mt={features:[]};return this._addTileFeatures(Se.range((oe-Le)/Pe,ht,(oe+1+Le)/Pe,St),Se.data,oe,fe,Pe,mt),oe===0&&this._addTileFeatures(Se.range(1-Le/Pe,ht,1,St),Se.data,Pe,fe,Pe,mt),oe===Pe-1&&this._addTileFeatures(Se.range(0,ht,Le/Pe,St),Se.data,-1,fe,Pe,mt),mt.features.length?mt:null}getClusterExpansionZoom(ae){let oe=this._getOriginZoom(ae)-1;for(;oe<=this.options.maxZoom;){const fe=this.getChildren(ae);if(oe++,fe.length!==1)break;ae=fe[0].properties.cluster_id}return oe}_appendLeaves(ae,oe,fe,Se,Pe){const Re=this.getChildren(oe);for(const Xe of Re){const Le=Xe.properties;if(Le&&Le.cluster?Pe+Le.point_count<=Se?Pe+=Le.point_count:Pe=this._appendLeaves(ae,Le.cluster_id,fe,Se,Pe):Pe<Se?Pe++:ae.push(Xe),ae.length===fe)break}return Pe}_createTree(ae){const oe=new m.aI(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let fe=0;fe<ae.length;fe+=this.stride)oe.add(ae[fe],ae[fe+1]);return oe.finish(),oe.data=ae,oe}_addTileFeatures(ae,oe,fe,Se,Pe,Re){for(const Xe of ae){const Le=Xe*this.stride,ht=oe[Le+5]>1;let St,mt,$t;if(ht)St=rt(oe,Le,this.clusterProps),mt=oe[Le],$t=oe[Le+1];else{const Or=this.points[oe[Le+3]];St=Or.properties;const[qr,qt]=Or.geometry.coordinates;mt=Te(qr),$t=Ge(qt)}const Ht={type:1,geometry:[[Math.round(this.options.extent*(mt*Pe-fe)),Math.round(this.options.extent*($t*Pe-Se))]],tags:St};let Ve;Ve=ht||this.options.generateId?oe[Le+3]:this.points[oe[Le+3]].id,Ve!==void 0&&(Ht.id=Ve),Re.features.push(Ht)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,oe){const{radius:fe,extent:Se,reduce:Pe,minPoints:Re}=this.options,Xe=fe/(Se*Math.pow(2,oe)),Le=ae.data,ht=[],St=this.stride;for(let mt=0;mt<Le.length;mt+=St){if(Le[mt+2]<=oe)continue;Le[mt+2]=oe;const $t=Le[mt],Ht=Le[mt+1],Ve=ae.within(Le[mt],Le[mt+1],Xe),Or=Le[mt+5];let qr=Or;for(const qt of Ve){const Er=qt*St;Le[Er+2]>oe&&(qr+=Le[Er+5])}if(qr>Or&&qr>=Re){let qt,Er=$t*Or,ei=Ht*Or,ui=-1;const dn=(mt/St<<5)+(oe+1)+this.points.length;for(const Hr of Ve){const Ar=Hr*St;if(Le[Ar+2]<=oe)continue;Le[Ar+2]=oe;const Mn=Le[Ar+5];Er+=Le[Ar]*Mn,ei+=Le[Ar+1]*Mn,Le[Ar+4]=dn,Pe&&(qt||(qt=this._map(Le,mt,!0),ui=this.clusterProps.length,this.clusterProps.push(qt)),Pe(qt,this._map(Le,Ar)))}Le[mt+4]=dn,ht.push(Er/qr,ei/qr,1/0,dn,-1,qr),Pe&&ht.push(ui)}else{for(let qt=0;qt<St;qt++)ht.push(Le[mt+qt]);if(qr>1)for(const qt of Ve){const Er=qt*St;if(!(Le[Er+2]<=oe)){Le[Er+2]=oe;for(let ei=0;ei<St;ei++)ht.push(Le[Er+ei])}}}}return ht}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,oe,fe){if(ae[oe+5]>1){const Re=this.clusterProps[ae[oe+6]];return fe?Object.assign({},Re):Re}const Se=this.points[ae[oe+3]].properties,Pe=this.options.map(Se);return fe&&Pe===Se?Object.assign({},Pe):Pe}}function st(Ne,ae,oe){return{type:"Feature",id:Ne[ae+3],properties:rt(Ne,ae,oe),geometry:{type:"Point",coordinates:[(fe=Ne[ae],360*(fe-.5)),Ze(Ne[ae+1])]}};var fe}function rt(Ne,ae,oe){const fe=Ne[ae+5],Se=fe>=1e4?`${Math.round(fe/1e3)}k`:fe>=1e3?Math.round(fe/100)/10+"k":fe,Pe=Ne[ae+6],Re=Pe===-1?{}:Object.assign({},oe[Pe]);return Object.assign(Re,{cluster:!0,cluster_id:Ne[ae+3],point_count:fe,point_count_abbreviated:Se})}function Te(Ne){return Ne/360+.5}function Ge(Ne){const ae=Math.sin(Ne*Math.PI/180),oe=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return oe<0?0:oe>1?1:oe}function Ze(Ne){const ae=(180-360*Ne)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function dt(Ne,ae,oe,fe){let Se=fe;const Pe=ae+(oe-ae>>1);let Re,Xe=oe-ae;const Le=Ne[ae],ht=Ne[ae+1],St=Ne[oe],mt=Ne[oe+1];for(let $t=ae+3;$t<oe;$t+=3){const Ht=xe(Ne[$t],Ne[$t+1],Le,ht,St,mt);if(Ht>Se)Re=$t,Se=Ht;else if(Ht===Se){const Ve=Math.abs($t-Pe);Ve<Xe&&(Re=$t,Xe=Ve)}}Se>fe&&(Re-ae>3&&dt(Ne,ae,Re,fe),Ne[Re+2]=Se,oe-Re>3&&dt(Ne,Re,oe,fe))}function xe(Ne,ae,oe,fe,Se,Pe){let Re=Se-oe,Xe=Pe-fe;if(Re!==0||Xe!==0){const Le=((Ne-oe)*Re+(ae-fe)*Xe)/(Re*Re+Xe*Xe);Le>1?(oe=Se,fe=Pe):Le>0&&(oe+=Re*Le,fe+=Xe*Le)}return Re=Ne-oe,Xe=ae-fe,Re*Re+Xe*Xe}function We(Ne,ae,oe,fe){const Se={id:Ne??null,type:ae,geometry:oe,tags:fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")lt(Se,oe);else if(ae==="Polygon")lt(Se,oe[0]);else if(ae==="MultiLineString")for(const Pe of oe)lt(Se,Pe);else if(ae==="MultiPolygon")for(const Pe of oe)lt(Se,Pe[0]);return Se}function lt(Ne,ae){for(let oe=0;oe<ae.length;oe+=3)Ne.minX=Math.min(Ne.minX,ae[oe]),Ne.minY=Math.min(Ne.minY,ae[oe+1]),Ne.maxX=Math.max(Ne.maxX,ae[oe]),Ne.maxY=Math.max(Ne.maxY,ae[oe+1])}function ct(Ne,ae,oe,fe){if(!ae.geometry)return;const Se=ae.geometry.coordinates;if(Se&&Se.length===0)return;const Pe=ae.geometry.type,Re=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2);let Xe=[],Le=ae.id;if(oe.promoteId?Le=ae.properties[oe.promoteId]:oe.generateId&&(Le=fe||0),Pe==="Point")jt(Se,Xe);else if(Pe==="MultiPoint")for(const ht of Se)jt(ht,Xe);else if(Pe==="LineString")Gt(Se,Xe,Re,!1);else if(Pe==="MultiLineString"){if(oe.lineMetrics){for(const ht of Se)Xe=[],Gt(ht,Xe,Re,!1),Ne.push(We(Le,"LineString",Xe,ae.properties));return}zt(Se,Xe,Re,!1)}else if(Pe==="Polygon")zt(Se,Xe,Re,!0);else{if(Pe!=="MultiPolygon"){if(Pe==="GeometryCollection"){for(const ht of ae.geometry.geometries)ct(Ne,{id:Le,geometry:ht,properties:ae.properties},oe,fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const ht of Se){const St=[];zt(ht,St,Re,!0),Xe.push(St)}}Ne.push(We(Le,Pe,Xe,ae.properties))}function jt(Ne,ae){ae.push(yr(Ne[0]),ar(Ne[1]),0)}function Gt(Ne,ae,oe,fe){let Se,Pe,Re=0;for(let Le=0;Le<Ne.length;Le++){const ht=yr(Ne[Le][0]),St=ar(Ne[Le][1]);ae.push(ht,St,0),Le>0&&(Re+=fe?(Se*St-ht*Pe)/2:Math.sqrt(Math.pow(ht-Se,2)+Math.pow(St-Pe,2))),Se=ht,Pe=St}const Xe=ae.length-3;ae[2]=1,dt(ae,0,Xe,oe),ae[Xe+2]=1,ae.size=Math.abs(Re),ae.start=0,ae.end=ae.size}function zt(Ne,ae,oe,fe){for(let Se=0;Se<Ne.length;Se++){const Pe=[];Gt(Ne[Se],Pe,oe,fe),ae.push(Pe)}}function yr(Ne){return Ne/360+.5}function ar(Ne){const ae=Math.sin(Ne*Math.PI/180),oe=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return oe<0?0:oe>1?1:oe}function Ot(Ne,ae,oe,fe,Se,Pe,Re,Xe){if(fe/=ae,Pe>=(oe/=ae)&&Re<fe)return Ne;if(Re<oe||Pe>=fe)return null;const Le=[];for(const ht of Ne){const St=ht.geometry;let mt=ht.type;const $t=Se===0?ht.minX:ht.minY,Ht=Se===0?ht.maxX:ht.maxY;if($t>=oe&&Ht<fe){Le.push(ht);continue}if(Ht<oe||$t>=fe)continue;let Ve=[];if(mt==="Point"||mt==="MultiPoint")rr(St,Ve,oe,fe,Se);else if(mt==="LineString")or(St,Ve,oe,fe,Se,!1,Xe.lineMetrics);else if(mt==="MultiLineString")fr(St,Ve,oe,fe,Se,!1);else if(mt==="Polygon")fr(St,Ve,oe,fe,Se,!0);else if(mt==="MultiPolygon")for(const Or of St){const qr=[];fr(Or,qr,oe,fe,Se,!0),qr.length&&Ve.push(qr)}if(Ve.length){if(Xe.lineMetrics&&mt==="LineString"){for(const Or of Ve)Le.push(We(ht.id,mt,Or,ht.tags));continue}mt!=="LineString"&&mt!=="MultiLineString"||(Ve.length===1?(mt="LineString",Ve=Ve[0]):mt="MultiLineString"),mt!=="Point"&&mt!=="MultiPoint"||(mt=Ve.length===3?"Point":"MultiPoint"),Le.push(We(ht.id,mt,Ve,ht.tags))}}return Le.length?Le:null}function rr(Ne,ae,oe,fe,Se){for(let Pe=0;Pe<Ne.length;Pe+=3){const Re=Ne[Pe+Se];Re>=oe&&Re<=fe&&Jt(ae,Ne[Pe],Ne[Pe+1],Ne[Pe+2])}}function or(Ne,ae,oe,fe,Se,Pe,Re){let Xe=_t(Ne);const Le=Se===0?Kr:rn;let ht,St,mt=Ne.start;for(let qr=0;qr<Ne.length-3;qr+=3){const qt=Ne[qr],Er=Ne[qr+1],ei=Ne[qr+2],ui=Ne[qr+3],dn=Ne[qr+4],Hr=Se===0?qt:Er,Ar=Se===0?ui:dn;let Mn=!1;Re&&(ht=Math.sqrt(Math.pow(qt-ui,2)+Math.pow(Er-dn,2))),Hr<oe?Ar>oe&&(St=Le(Xe,qt,Er,ui,dn,oe),Re&&(Xe.start=mt+ht*St)):Hr>fe?Ar<fe&&(St=Le(Xe,qt,Er,ui,dn,fe),Re&&(Xe.start=mt+ht*St)):Jt(Xe,qt,Er,ei),Ar<oe&&Hr>=oe&&(St=Le(Xe,qt,Er,ui,dn,oe),Mn=!0),Ar>fe&&Hr<=fe&&(St=Le(Xe,qt,Er,ui,dn,fe),Mn=!0),!Pe&&Mn&&(Re&&(Xe.end=mt+ht*St),ae.push(Xe),Xe=_t(Ne)),Re&&(mt+=ht)}let $t=Ne.length-3;const Ht=Ne[$t],Ve=Ne[$t+1],Or=Se===0?Ht:Ve;Or>=oe&&Or<=fe&&Jt(Xe,Ht,Ve,Ne[$t+2]),$t=Xe.length-3,Pe&&$t>=3&&(Xe[$t]!==Xe[0]||Xe[$t+1]!==Xe[1])&&Jt(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&ae.push(Xe)}function _t(Ne){const ae=[];return ae.size=Ne.size,ae.start=Ne.start,ae.end=Ne.end,ae}function fr(Ne,ae,oe,fe,Se,Pe){for(const Re of Ne)or(Re,ae,oe,fe,Se,Pe,!1)}function Jt(Ne,ae,oe,fe){Ne.push(ae,oe,fe)}function Kr(Ne,ae,oe,fe,Se,Pe){const Re=(Pe-ae)/(fe-ae);return Jt(Ne,Pe,oe+(Se-oe)*Re,1),Re}function rn(Ne,ae,oe,fe,Se,Pe){const Re=(Pe-oe)/(Se-oe);return Jt(Ne,ae+(fe-ae)*Re,Pe,1),Re}function Qr(Ne,ae){const oe=[];for(let fe=0;fe<Ne.length;fe++){const Se=Ne[fe],Pe=Se.type;let Re;if(Pe==="Point"||Pe==="MultiPoint"||Pe==="LineString")Re=Ii(Se.geometry,ae);else if(Pe==="MultiLineString"||Pe==="Polygon"){Re=[];for(const Xe of Se.geometry)Re.push(Ii(Xe,ae))}else if(Pe==="MultiPolygon"){Re=[];for(const Xe of Se.geometry){const Le=[];for(const ht of Xe)Le.push(Ii(ht,ae));Re.push(Le)}}oe.push(We(Se.id,Pe,Re,Se.tags))}return oe}function Ii(Ne,ae){const oe=[];oe.size=Ne.size,Ne.start!==void 0&&(oe.start=Ne.start,oe.end=Ne.end);for(let fe=0;fe<Ne.length;fe+=3)oe.push(Ne[fe]+ae,Ne[fe+1],Ne[fe+2]);return oe}function Wn(Ne,ae){if(Ne.transformed)return Ne;const oe=1<<Ne.z,fe=Ne.x,Se=Ne.y;for(const Pe of Ne.features){const Re=Pe.geometry,Xe=Pe.type;if(Pe.geometry=[],Xe===1)for(let Le=0;Le<Re.length;Le+=2)Pe.geometry.push(Fa(Re[Le],Re[Le+1],ae,oe,fe,Se));else for(let Le=0;Le<Re.length;Le++){const ht=[];for(let St=0;St<Re[Le].length;St+=2)ht.push(Fa(Re[Le][St],Re[Le][St+1],ae,oe,fe,Se));Pe.geometry.push(ht)}}return Ne.transformed=!0,Ne}function Fa(Ne,ae,oe,fe,Se,Pe){return[Math.round(oe*(Ne*fe-Se)),Math.round(oe*(ae*fe-Pe))]}function ki(Ne,ae,oe,fe,Se){const Pe=ae===Se.maxZoom?0:Se.tolerance/((1<<ae)*Se.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:Ne.length,source:null,x:oe,y:fe,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Xe of Ne)Ni(Re,Xe,Pe,Se);return Re}function Ni(Ne,ae,oe,fe){const Se=ae.geometry,Pe=ae.type,Re=[];if(Ne.minX=Math.min(Ne.minX,ae.minX),Ne.minY=Math.min(Ne.minY,ae.minY),Ne.maxX=Math.max(Ne.maxX,ae.maxX),Ne.maxY=Math.max(Ne.maxY,ae.maxY),Pe==="Point"||Pe==="MultiPoint")for(let Xe=0;Xe<Se.length;Xe+=3)Re.push(Se[Xe],Se[Xe+1]),Ne.numPoints++,Ne.numSimplified++;else if(Pe==="LineString")Yi(Re,Se,Ne,oe,!1,!1);else if(Pe==="MultiLineString"||Pe==="Polygon")for(let Xe=0;Xe<Se.length;Xe++)Yi(Re,Se[Xe],Ne,oe,Pe==="Polygon",Xe===0);else if(Pe==="MultiPolygon")for(let Xe=0;Xe<Se.length;Xe++){const Le=Se[Xe];for(let ht=0;ht<Le.length;ht++)Yi(Re,Le[ht],Ne,oe,!0,ht===0)}if(Re.length){let Xe=ae.tags||null;if(Pe==="LineString"&&fe.lineMetrics){Xe={};for(const ht in ae.tags)Xe[ht]=ae.tags[ht];Xe.mapbox_clip_start=Se.start/Se.size,Xe.mapbox_clip_end=Se.end/Se.size}const Le={geometry:Re,type:Pe==="Polygon"||Pe==="MultiPolygon"?3:Pe==="LineString"||Pe==="MultiLineString"?2:1,tags:Xe};ae.id!==null&&(Le.id=ae.id),Ne.features.push(Le)}}function Yi(Ne,ae,oe,fe,Se,Pe){const Re=fe*fe;if(fe>0&&ae.size<(Se?Re:fe))return void(oe.numPoints+=ae.length/3);const Xe=[];for(let Le=0;Le<ae.length;Le+=3)(fe===0||ae[Le+2]>Re)&&(oe.numSimplified++,Xe.push(ae[Le],ae[Le+1])),oe.numPoints++;Se&&function(Le,ht){let St=0;for(let mt=0,$t=Le.length,Ht=$t-2;mt<$t;Ht=mt,mt+=2)St+=(Le[mt]-Le[Ht])*(Le[mt+1]+Le[Ht+1]);if(St>0===ht)for(let mt=0,$t=Le.length;mt<$t/2;mt+=2){const Ht=Le[mt],Ve=Le[mt+1];Le[mt]=Le[$t-2-mt],Le[mt+1]=Le[$t-1-mt],Le[$t-2-mt]=Ht,Le[$t-1-mt]=Ve}}(Xe,Pe),Ne.push(Xe)}const Eo={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ps{constructor(ae,oe){const fe=(oe=this.options=function(Pe,Re){for(const Xe in Re)Pe[Xe]=Re[Xe];return Pe}(Object.create(Eo),oe)).debug;if(fe&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");let Se=function(Pe,Re){const Xe=[];if(Pe.type==="FeatureCollection")for(let Le=0;Le<Pe.features.length;Le++)ct(Xe,Pe.features[Le],Re,Le);else ct(Xe,Pe.type==="Feature"?Pe:{geometry:Pe},Re);return Xe}(ae,oe);this.tiles={},this.tileCoords=[],fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Se=function(Pe,Re){const Xe=Re.buffer/Re.extent;let Le=Pe;const ht=Ot(Pe,1,-1-Xe,Xe,0,-1,2,Re),St=Ot(Pe,1,1-Xe,2+Xe,0,-1,2,Re);return(ht||St)&&(Le=Ot(Pe,1,-Xe,1+Xe,0,-1,2,Re)||[],ht&&(Le=Qr(ht,1).concat(Le)),St&&(Le=Le.concat(Qr(St,-1)))),Le}(Se,oe),Se.length&&this.splitTile(Se,0,0,0),fe&&(Se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,oe,fe,Se,Pe,Re,Xe){const Le=[ae,oe,fe,Se],ht=this.options,St=ht.debug;for(;Le.length;){Se=Le.pop(),fe=Le.pop(),oe=Le.pop(),ae=Le.pop();const mt=1<<oe,$t=Ri(oe,fe,Se);let Ht=this.tiles[$t];if(!Ht&&(St>1&&console.time("creation"),Ht=this.tiles[$t]=ki(ae,oe,fe,Se,ht),this.tileCoords.push({z:oe,x:fe,y:Se}),St)){St>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,fe,Se,Ht.numFeatures,Ht.numPoints,Ht.numSimplified),console.timeEnd("creation"));const Mn=`z${oe}`;this.stats[Mn]=(this.stats[Mn]||0)+1,this.total++}if(Ht.source=ae,Pe==null){if(oe===ht.indexMaxZoom||Ht.numPoints<=ht.indexMaxPoints)continue}else{if(oe===ht.maxZoom||oe===Pe)continue;if(Pe!=null){const Mn=Pe-oe;if(fe!==Re>>Mn||Se!==Xe>>Mn)continue}}if(Ht.source=null,ae.length===0)continue;St>1&&console.time("clipping");const Ve=.5*ht.buffer/ht.extent,Or=.5-Ve,qr=.5+Ve,qt=1+Ve;let Er=null,ei=null,ui=null,dn=null,Hr=Ot(ae,mt,fe-Ve,fe+qr,0,Ht.minX,Ht.maxX,ht),Ar=Ot(ae,mt,fe+Or,fe+qt,0,Ht.minX,Ht.maxX,ht);ae=null,Hr&&(Er=Ot(Hr,mt,Se-Ve,Se+qr,1,Ht.minY,Ht.maxY,ht),ei=Ot(Hr,mt,Se+Or,Se+qt,1,Ht.minY,Ht.maxY,ht),Hr=null),Ar&&(ui=Ot(Ar,mt,Se-Ve,Se+qr,1,Ht.minY,Ht.maxY,ht),dn=Ot(Ar,mt,Se+Or,Se+qt,1,Ht.minY,Ht.maxY,ht),Ar=null),St>1&&console.timeEnd("clipping"),Le.push(Er||[],oe+1,2*fe,2*Se),Le.push(ei||[],oe+1,2*fe,2*Se+1),Le.push(ui||[],oe+1,2*fe+1,2*Se),Le.push(dn||[],oe+1,2*fe+1,2*Se+1)}}getTile(ae,oe,fe){ae=+ae,oe=+oe,fe=+fe;const Se=this.options,{extent:Pe,debug:Re}=Se;if(ae<0||ae>24)return null;const Xe=1<<ae,Le=Ri(ae,oe=oe+Xe&Xe-1,fe);if(this.tiles[Le])return Wn(this.tiles[Le],Pe);Re>1&&console.log("drilling down to z%d-%d-%d",ae,oe,fe);let ht,St=ae,mt=oe,$t=fe;for(;!ht&&St>0;)St--,mt>>=1,$t>>=1,ht=this.tiles[Ri(St,mt,$t)];return ht&&ht.source?(Re>1&&(console.log("found parent tile z%d-%d-%d",St,mt,$t),console.time("drilling down")),this.splitTile(ht.source,St,mt,$t,ae,oe,fe),Re>1&&console.timeEnd("drilling down"),this.tiles[Le]?Wn(this.tiles[Le],Pe):null):null}}function Ri(Ne,ae,oe){return 32*((1<<Ne)*oe+ae)+Ne}class Jn extends C{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ae,oe){return m._(this,void 0,void 0,function*(){const fe=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Se=this._geoJSONIndex.getTile(fe.z,fe.x,fe.y);if(!Se)return null;const Pe=new ie(Se.features,{version:2,extent:m.$});let Re=function(Xe){const Le=new m.cM;return function(ht,St){for(const mt in ht.layers)St.writeMessage(3,ne,ht.layers[mt])}(Xe,Le),Le.finish()}(Pe);return Re.byteOffset===0&&Re.byteLength===Re.buffer.byteLength||(Re=new Uint8Array(Re)),{vectorTile:Pe,rawData:Re.buffer}})}loadData(ae){return m._(this,void 0,void 0,function*(){var oe;(oe=this._pendingRequest)===null||oe===void 0||oe.abort();const fe=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new m.cN(ae.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest);const Se=yield this._pendingData;this._geoJSONIndex=ae.cluster?new et(function({superclusterOptions:Re,clusterProperties:Xe}){if(!Xe||!Re)return Re;const Le={},ht={},St={accumulated:null,zoom:0},mt={properties:null},$t=Object.keys(Xe);for(const Ht of $t){const[Ve,Or]=Xe[Ht],qr=m.cT(Or),qt=m.cT(typeof Ve=="string"?[Ve,["accumulated"],["get",Ht]]:Ve);Le[Ht]=qr.value,ht[Ht]=qt.value}return Re.map=Ht=>{mt.properties=Ht;const Ve={};for(const Or of $t)Ve[Or]=Le[Or].evaluate(St,mt);return Ve},Re.reduce=(Ht,Ve)=>{mt.properties=Ve;for(const Or of $t)St.accumulated=Ht[Or],Ht[Or]=ht[Or].evaluate(St,mt)},Re}(ae)).load(Se.features):function(Re,Xe){return new Ps(Re,Xe)}(Se,ae.geojsonVtOptions),this.loaded={};const Pe={data:Se};if(fe){const Re=fe.finish();Re&&(Pe.resourceTiming={},Pe.resourceTiming[ae.source]=JSON.parse(JSON.stringify(Re)))}return Pe}catch(Se){if(delete this._pendingRequest,m.cy(Se))return{abandoned:!0};throw Se}})}getData(){return m._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ae){const oe=this.loaded;return oe&&oe[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,oe){return m._(this,void 0,void 0,function*(){let fe=yield this.loadGeoJSON(ae,oe);if(delete this._pendingRequest,typeof fe!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(q(fe,!0),ae.filter){const Se=m.cT(ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Se.result==="error")throw new Error(Se.value.map(Re=>`${Re.key}: ${Re.message}`).join(", "));fe={type:"FeatureCollection",features:fe.features.filter(Re=>Se.value.evaluate({zoom:0},Re))}}return fe})}loadGeoJSON(ae,oe){return m._(this,void 0,void 0,function*(){const{promoteId:fe}=ae;if(ae.request){const Se=yield m.j(ae.request,oe);return this._dataUpdateable=m.cV(Se.data,fe)?m.cU(Se.data,fe):void 0,Se.data}if(typeof ae.data=="string")try{const Se=JSON.parse(ae.data);return this._dataUpdateable=m.cV(Se,fe)?m.cU(Se,fe):void 0,Se}catch{throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`)}if(!ae.dataDiff)throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ae.source}`);return m.cW(this._dataUpdateable,ae.dataDiff,fe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ae){return m._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}class ci{constructor(ae){this.self=ae,this.actor=new m.J(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(oe,fe)=>{if(this.externalWorkerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.externalWorkerSourceTypes[oe]=fe},this.self.addProtocol=m.cA,this.self.removeProtocol=m.cB,this.self.registerRTLTextPlugin=oe=>{m.cX.setMethods(oe)},this.actor.registerMessageHandler("LDT",(oe,fe)=>this._getDEMWorkerSource(oe,fe.source).loadTile(fe)),this.actor.registerMessageHandler("RDT",(oe,fe)=>m._(this,void 0,void 0,function*(){this._getDEMWorkerSource(oe,fe.source).removeTile(fe)})),this.actor.registerMessageHandler("GCEZ",(oe,fe)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,fe.type,fe.source).getClusterExpansionZoom(fe)})),this.actor.registerMessageHandler("GCC",(oe,fe)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,fe.type,fe.source).getClusterChildren(fe)})),this.actor.registerMessageHandler("GCL",(oe,fe)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,fe.type,fe.source).getClusterLeaves(fe)})),this.actor.registerMessageHandler("LD",(oe,fe)=>this._getWorkerSource(oe,fe.type,fe.source).loadData(fe)),this.actor.registerMessageHandler("GD",(oe,fe)=>this._getWorkerSource(oe,fe.type,fe.source).getData()),this.actor.registerMessageHandler("LT",(oe,fe)=>this._getWorkerSource(oe,fe.type,fe.source).loadTile(fe)),this.actor.registerMessageHandler("RT",(oe,fe)=>this._getWorkerSource(oe,fe.type,fe.source).reloadTile(fe)),this.actor.registerMessageHandler("AT",(oe,fe)=>this._getWorkerSource(oe,fe.type,fe.source).abortTile(fe)),this.actor.registerMessageHandler("RMT",(oe,fe)=>this._getWorkerSource(oe,fe.type,fe.source).removeTile(fe)),this.actor.registerMessageHandler("RS",(oe,fe)=>m._(this,void 0,void 0,function*(){if(!this.workerSources[oe]||!this.workerSources[oe][fe.type]||!this.workerSources[oe][fe.type][fe.source])return;const Se=this.workerSources[oe][fe.type][fe.source];delete this.workerSources[oe][fe.type][fe.source],Se.removeSource!==void 0&&Se.removeSource(fe)})),this.actor.registerMessageHandler("RM",oe=>m._(this,void 0,void 0,function*(){delete this.layerIndexes[oe],delete this.availableImages[oe],delete this.workerSources[oe],delete this.demWorkerSources[oe],this.globalStates.delete(oe)})),this.actor.registerMessageHandler("SR",(oe,fe)=>m._(this,void 0,void 0,function*(){this.referrer=fe})),this.actor.registerMessageHandler("SRPS",(oe,fe)=>this._syncRTLPluginState(oe,fe)),this.actor.registerMessageHandler("IS",(oe,fe)=>m._(this,void 0,void 0,function*(){this.self.importScripts(fe)})),this.actor.registerMessageHandler("SI",(oe,fe)=>this._setImages(oe,fe)),this.actor.registerMessageHandler("UL",(oe,fe)=>m._(this,void 0,void 0,function*(){this._getLayerIndex(oe).update(fe.layers,fe.removedIds,this._getGlobalState(oe))})),this.actor.registerMessageHandler("UGS",(oe,fe)=>m._(this,void 0,void 0,function*(){const Se=this._getGlobalState(oe);for(const Pe in fe)Se[Pe]=fe[Pe]})),this.actor.registerMessageHandler("SL",(oe,fe)=>m._(this,void 0,void 0,function*(){this._getLayerIndex(oe).replace(fe,this._getGlobalState(oe))}))}_getGlobalState(ae){let oe=this.globalStates.get(ae);return oe||(oe={},this.globalStates.set(ae,oe)),oe}_setImages(ae,oe){return m._(this,void 0,void 0,function*(){this.availableImages[ae]=oe;for(const fe in this.workerSources[ae]){const Se=this.workerSources[ae][fe];for(const Pe in Se)Se[Pe].availableImages=oe}})}_syncRTLPluginState(ae,oe){return m._(this,void 0,void 0,function*(){return yield m.cX.syncState(oe,this.self.importScripts)})}_getAvailableImages(ae){let oe=this.availableImages[ae];return oe||(oe=[]),oe}_getLayerIndex(ae){let oe=this.layerIndexes[ae];return oe||(oe=this.layerIndexes[ae]=new l),oe}_getWorkerSource(ae,oe,fe){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][oe]||(this.workerSources[ae][oe]={}),!this.workerSources[ae][oe][fe]){const Se={sendAsync:(Pe,Re)=>(Pe.targetMapId=ae,this.actor.sendAsync(Pe,Re))};switch(oe){case"vector":this.workerSources[ae][oe][fe]=new C(Se,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][oe][fe]=new Jn(Se,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][oe][fe]=new this.externalWorkerSourceTypes[oe](Se,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][oe][fe]}_getDEMWorkerSource(ae,oe){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][oe]||(this.demWorkerSources[ae][oe]=new L),this.demWorkerSources[ae][oe]}}return m.i(self)&&(self.worker=new ci(self)),ci}),d("index",["exports","./shared"],function(m,l){var M="5.9.0";function E(){var b=new l.A(4);return l.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}let N,C;const L={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(b,r,u){const p=requestAnimationFrame(S=>{_(),r(S)}),{unsubscribe:_}=l.s(b.signal,"abort",()=>{_(),cancelAnimationFrame(p),u(l.c())},!1)},frameAsync(b){return new Promise((r,u)=>{this.frame(b,r,u)})},getImageData(b,r=0){return this.getImageCanvasContext(b).getImageData(-r,-r,b.width+2*r,b.height+2*r)},getImageCanvasContext(b){const r=window.document.createElement("canvas"),u=r.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return r.width=b.width,r.height=b.height,u.drawImage(b,0,0,b.width,b.height),u},resolveURL:b=>(N||(N=document.createElement("a")),N.href=b,N.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(C==null&&(C=matchMedia("(prefers-reduced-motion: reduce)")),C.matches)}};class F{static testProp(r){if(!F.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in F.docStyle)return r[u];return r[0]}static create(r,u,p){const _=window.document.createElement(r);return u!==void 0&&(_.className=u),p&&p.appendChild(_),_}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){F.docStyle&&F.selectProp&&(F.userSelect=F.docStyle[F.selectProp],F.docStyle[F.selectProp]="none")}static enableDrag(){F.docStyle&&F.selectProp&&(F.docStyle[F.selectProp]=F.userSelect)}static setTransform(r,u){r.style[F.transformProp]=u}static addEventListener(r,u,p,_={}){r.addEventListener(u,p,"passive"in _?_:_.capture)}static removeEventListener(r,u,p,_={}){r.removeEventListener(u,p,"passive"in _?_:_.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",F.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",F.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",F.suppressClickInternal,!0)},0)}static getScale(r){const u=r.getBoundingClientRect();return{x:u.width/r.offsetWidth||1,y:u.height/r.offsetHeight||1,boundingClientRect:u}}static getPoint(r,u,p){const _=u.boundingClientRect;return new l.P((p.clientX-_.left)/u.x-r.clientLeft,(p.clientY-_.top)/u.y-r.clientTop)}static mousePos(r,u){const p=F.getScale(r);return F.getPoint(r,p,u)}static touchPos(r,u){const p=[],_=F.getScale(r);for(let S=0;S<u.length;S++)p.push(F.getPoint(r,_,u[S]));return p}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const u=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),p=u.querySelectorAll("script");for(const _ of p)_.remove();return F.clean(u),u.innerHTML}static isPossiblyDangerous(r,u){const p=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!p.includes("javascript:")&&!p.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const u=r.children;for(const p of u)F.removeAttributes(p),F.clean(p)}static removeAttributes(r){for(const{name:u,value:p}of r.attributes)F.isPossiblyDangerous(u,p)&&r.removeAttribute(u)}}F.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,F.selectProp=F.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),F.transformProp=F.testProp(["transform","WebkitTransform"]);const H={supported:!1,testSupport:function(b){!re&&q&&(ie?ne(b):G=b)}};let G,q,re=!1,ie=!1;function ne(b){const r=b.createTexture();b.bindTexture(b.TEXTURE_2D,r);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,q),b.isContextLost())return;H.supported=!0}catch{}b.deleteTexture(r),re=!0}var ce;typeof document<"u"&&(q=document.createElement("img"),q.onload=()=>{G&&ne(G),G=null,ie=!0},q.onerror=()=>{re=!0,G=null},q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(b){let r,u,p,_;b.resetRequestQueue=()=>{r=[],u=0,p=0,_={}},b.addThrottleControl=R=>{const $=p++;return _[$]=R,$},b.removeThrottleControl=R=>{delete _[R],j()},b.getImage=(R,$,U=!0)=>new Promise((X,Z)=>{H.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),l.e(R,{type:"image"}),r.push({abortController:$,requestParameters:R,supportImageRefresh:U,state:"queued",onError:Q=>{Z(Q)},onSuccess:Q=>{X(Q)}}),j()});const S=R=>l._(this,void 0,void 0,function*(){R.state="running";const{requestParameters:$,supportImageRefresh:U,onError:X,onSuccess:Z,abortController:Q}=R,se=U===!1&&!l.i(self)&&!l.g($.url)&&(!$.headers||Object.keys($.headers).reduce((ye,_e)=>ye&&_e==="accept",!0));u++;const me=se?k($,Q):l.m($,Q);try{const ye=yield me;delete R.abortController,R.state="completed",ye.data instanceof HTMLImageElement||l.b(ye.data)?Z(ye):ye.data&&Z({data:yield(pe=ye.data,typeof createImageBitmap=="function"?l.f(pe):l.h(pe)),cacheControl:ye.cacheControl,expires:ye.expires})}catch(ye){delete R.abortController,X(ye)}finally{u--,j()}var pe}),j=()=>{const R=(()=>{for(const $ of Object.keys(_))if(_[$]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let $=u;$<R&&r.length>0;$++){const U=r.shift();U.abortController.signal.aborted?$--:S(U)}},k=(R,$)=>new Promise((U,X)=>{const Z=new Image,Q=R.url,se=R.credentials;se&&se==="include"?Z.crossOrigin="use-credentials":(se&&se==="same-origin"||!l.d(Q))&&(Z.crossOrigin="anonymous"),$.signal.addEventListener("abort",()=>{Z.src="",X(l.c())}),Z.fetchPriority="high",Z.onload=()=>{Z.onerror=Z.onload=null,U({data:Z})},Z.onerror=()=>{Z.onerror=Z.onload=null,$.signal.aborted||X(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Z.src=Q})}(ce||(ce={})),ce.resetRequestQueue();class J{constructor(r){this._transformRequestFn=r??null}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function ee(b){const r=[];if(typeof b=="string")r.push({id:"default",url:b});else if(b&&b.length>0){const u=[];for(const{id:p,url:_}of b){const S=`${p}${_}`;u.indexOf(S)===-1&&(u.push(S),r.push({id:p,url:_}))}}return r}function he(b,r,u){try{const p=new URL(b);return p.pathname+=`${r}${u}`,p.toString()}catch{throw new Error(`Invalid sprite URL "${b}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ge(b){const{userImage:r}=b;return!!(r&&r.render&&r.render())&&(b.data.replace(new Uint8Array(r.data.buffer)),!0)}class Oe extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,promiseResolve:p}of this.requestors)p(this._getImagesForIds(u));this.requestors=[]}}getImage(r){const u=this.images[r];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new l.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let p=!0;const _=u.data||u.spriteData;return this._validateStretch(u.stretchX,_&&_.width)||(this.fire(new l.k(new Error(`Image "${r}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,_&&_.height)||(this.fire(new l.k(new Error(`Image "${r}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new l.k(new Error(`Image "${r}" has invalid "content" value`))),p=!1),p}_validateStretch(r,u){if(!r)return!0;let p=0;for(const _ of r){if(_[0]<p||_[1]<_[0]||u<_[1])return!1;p=_[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;const p=u.spriteData,_=p&&p.width||u.data.width,S=p&&p.height||u.data.height;return!(r[0]<0||_<r[0]||r[1]<0||S<r[1]||r[2]<0||_<r[2]||r[3]<0||S<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,p=!0){const _=this.getImage(r);if(p&&(_.data.width!==u.data.width||_.data.height!==u.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=_.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((u,p)=>{let _=!0;if(!this.isLoaded())for(const S of r)this.images[S]||(_=!1);this.isLoaded()||_?u(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:u})})}_getImagesForIds(r){const u={};for(const p of r){let _=this.getImage(p);_||(this.fire(new l.l("styleimagemissing",{id:p})),_=this.getImage(p)),_?u[p]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:l.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],p=this.getImage(r);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const _={w:p.data.width+2,h:p.data.height+2,x:0,y:0},S=new l.I(_,p);this.patterns[r]={bin:_,position:S}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.T(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const S in this.patterns)r.push(this.patterns[S].bin);const{w:u,h:p}=l.p(r),_=this.atlasImage;_.resize({width:u||1,height:p||1});for(const S in this.patterns){const{bin:j}=this.patterns[S],k=j.x+1,R=j.y+1,$=this.getImage(S).data,U=$.width,X=$.height;l.R.copy($,_,{x:0,y:0},{x:k,y:R},{width:U,height:X}),l.R.copy($,_,{x:0,y:X-1},{x:k,y:R-1},{width:U,height:1}),l.R.copy($,_,{x:0,y:0},{x:k,y:R+X},{width:U,height:1}),l.R.copy($,_,{x:U-1,y:0},{x:k-1,y:R},{width:1,height:X}),l.R.copy($,_,{x:0,y:0},{x:k+U,y:R},{width:1,height:X})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||l.w(`Image with ID: "${u}" was not found`),ge(p)&&this.updateImage(u,p)}}}const at=1e20;function ke(b,r,u,p,_,S,j,k,R){for(let $=r;$<r+p;$++)qe(b,u*S+$,S,_,j,k,R);for(let $=u;$<u+_;$++)qe(b,$*S+r,1,p,j,k,R)}function qe(b,r,u,p,_,S,j){S[0]=0,j[0]=-1e20,j[1]=at,_[0]=b[r];for(let k=1,R=0,$=0;k<p;k++){_[k]=b[r+k*u];const U=k*k;do{const X=S[R];$=(_[k]-_[X]+U-X*X)/(k-X)/2}while($<=j[R]&&--R>-1);R++,S[R]=k,j[R]=$,j[R+1]=at}for(let k=0,R=0;k<p;k++){for(;j[R+1]<k;)R++;const $=S[R],U=k-$;b[r+k*u]=_[$]+U*U}}class et{constructor(r,u,p){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={},this.lang=p}setURL(r){this.url=r}getGlyphs(r){return l._(this,void 0,void 0,function*(){const u=[];for(const S in r)for(const j of r[S])u.push(this._getAndCacheGlyphsPromise(S,j));const p=yield Promise.all(u),_={};for(const{stack:S,id:j,glyph:k}of p)_[S]||(_[S]={}),_[S][j]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics};return _})}_getAndCacheGlyphsPromise(r,u){return l._(this,void 0,void 0,function*(){let p=this.entries[r];p||(p=this.entries[r]={glyphs:{},requests:{},ranges:{}});let _=p.glyphs[u];if(_!==void 0)return{stack:r,id:u,glyph:_};if(_=this._tinySDF(p,r,u),_)return p.glyphs[u]=_,{stack:r,id:u,glyph:_};const S=Math.floor(u/256);if(256*S>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[S])return{stack:r,id:u,glyph:_};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[S]){const k=et.loadGlyphRange(r,S,this.url,this.requestManager);p.requests[S]=k}const j=yield p.requests[S];for(const k in j)this._doesCharSupportLocalGlyph(+k)||(p.glyphs[+k]=j[+k]);return p.ranges[S]=!0,{stack:r,id:u,glyph:j[u]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||l.u["CJK Unified Ideographs"](r)||l.u["Hangul Syllables"](r)||l.u.Hiragana(r)||l.u.Katakana(r)||l.u["CJK Symbols and Punctuation"](r)||l.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,u,p){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(p))return;let S=r.tinySDF;if(!S){let k="400";/bold/i.test(u)?k="900":/medium/i.test(u)?k="500":/light/i.test(u)&&(k="200"),S=r.tinySDF=new et.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:_,fontWeight:k})}const j=S.draw(String.fromCharCode(p));return{id:p,bitmap:new l.q({width:j.width||60,height:j.height||60},j.data),metrics:{width:j.glyphWidth/2||24,height:j.glyphHeight/2||24,left:j.glyphLeft/2+.5||0,top:j.glyphTop/2-27.5||-8,advance:j.glyphAdvance/2||24,isDoubleResolution:!0}}}}et.loadGlyphRange=function(b,r,u,p){return l._(this,void 0,void 0,function*(){const _=256*r,S=_+255,j=p.transformRequest(u.replace("{fontstack}",b).replace("{range}",`${_}-${S}`),"Glyphs"),k=yield l.n(j,new AbortController);if(!k||!k.data)throw new Error(`Could not load glyph range. range: ${r}, ${_}-${S}`);const R={};for(const $ of l.o(k.data))R[$.id]=$;return R})},et.TinySDF=class{constructor({fontSize:b=24,buffer:r=3,radius:u=8,cutoff:p=.25,fontFamily:_="sans-serif",fontWeight:S="normal",fontStyle:j="normal",lang:k=null}={}){this.buffer=r,this.cutoff=p,this.radius=u,this.lang=k;const R=this.size=b+4*r,$=this._createCanvas(R),U=this.ctx=$.getContext("2d",{willReadFrequently:!0});U.font=`${j} ${S} ${b}px ${_}`,U.textBaseline="alphabetic",U.textAlign="left",U.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(b){const r=document.createElement("canvas");return r.width=r.height=b,r}draw(b){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:_,actualBoundingBoxRight:S}=this.ctx.measureText(b),j=Math.ceil(u),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(S-_))),R=Math.min(this.size-this.buffer,j+Math.ceil(p)),$=k+2*this.buffer,U=R+2*this.buffer,X=Math.max($*U,0),Z=new Uint8ClampedArray(X),Q={data:Z,width:$,height:U,glyphWidth:k,glyphHeight:R,glyphTop:j,glyphLeft:0,glyphAdvance:r};if(k===0||R===0)return Q;const{ctx:se,buffer:me,gridInner:pe,gridOuter:ye}=this;this.lang&&(se.lang=this.lang),se.clearRect(me,me,k,R),se.fillText(b,me,me+j);const _e=se.getImageData(me,me,k,R);ye.fill(at,0,X),pe.fill(0,0,X);for(let Ae=0;Ae<R;Ae++)for(let be=0;be<k;be++){const Ee=_e.data[4*(Ae*k+be)+3]/255;if(Ee===0)continue;const Ie=(Ae+me)*$+be+me;if(Ee===1)ye[Ie]=0,pe[Ie]=at;else{const we=.5-Ee;ye[Ie]=we>0?we*we:0,pe[Ie]=we<0?we*we:0}}ke(ye,0,0,$,U,$,this.f,this.v,this.z),ke(pe,me,me,k,R,$,this.f,this.v,this.z);for(let Ae=0;Ae<X;Ae++){const be=Math.sqrt(ye[Ae])-Math.sqrt(pe[Ae]);Z[Ae]=Math.round(255-255*(be/this.radius+this.cutoff))}return Q}};class st{constructor(){this.specification=l.v.light.position}possiblyEvaluate(r,u){return l.B(r.expression.evaluate(u))}interpolate(r,u,p){return{x:l.C.number(r.x,u.x,p),y:l.C.number(r.y,u.y,p),z:l.C.number(r.z,u.z,p)}}}let rt;class Te extends l.E{constructor(r){super(),rt=rt||new l.r({anchor:new l.D(l.v.light.anchor),position:new st,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.t(rt,void 0),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(l.x,r,u))for(const p in r){const _=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),_):this._transitionable.setValue(p,_)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,p){return(!p||p.validate!==!1)&&l.y(this,r.call(l.z,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}const Ge=new l.r({"sky-color":new l.D(l.v.sky["sky-color"]),"horizon-color":new l.D(l.v.sky["horizon-color"]),"fog-color":new l.D(l.v.sky["fog-color"]),"fog-ground-blend":new l.D(l.v.sky["fog-ground-blend"]),"horizon-fog-blend":new l.D(l.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new l.D(l.v.sky["sky-horizon-blend"]),"atmosphere-blend":new l.D(l.v.sky["atmosphere-blend"])});class Ze extends l.E{constructor(r){super(),this._transitionable=new l.t(Ge,void 0),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.F(0))}setSky(r,u={}){if(!this._validate(l.G,r,u)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in r){const _=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),_):this._transitionable.setValue(p,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,p={}){return(p==null?void 0:p.validate)!==!1&&l.y(this,r.call(l.z,l.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class dt{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const p=r.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(r,u)),this.dashEntry[p]}getDashRanges(r,u,p){const _=[];let S=r.length%2==1?-r[r.length-1]*p:0,j=r[0]*p,k=!0;_.push({left:S,right:j,isDash:k,zeroLength:r[0]===0});let R=r[0];for(let $=1;$<r.length;$++){k=!k;const U=r[$];S=R*p,R+=U,j=R*p,_.push({left:S,right:j,isDash:k,zeroLength:U===0})}return _}addRoundDash(r,u,p){const _=u/2;for(let S=-p;S<=p;S++){const j=this.width*(this.nextRow+p+S);let k=0,R=r[k];for(let $=0;$<this.width;$++){$/R.right>1&&(R=r[++k]);const U=Math.abs($-R.left),X=Math.abs($-R.right),Z=Math.min(U,X);let Q;const se=S/p*(_+1);if(R.isDash){const me=_-Math.abs(se);Q=Math.sqrt(Z*Z+me*me)}else Q=_-Math.sqrt(Z*Z+se*se);this.data[j+$]=Math.max(0,Math.min(255,Q+128))}}}addRegularDash(r){for(let k=r.length-1;k>=0;--k){const R=r[k],$=r[k+1];R.zeroLength?r.splice(k,1):$&&$.isDash===R.isDash&&($.left=R.left,r.splice(k,1))}const u=r[0],p=r[r.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const _=this.width*this.nextRow;let S=0,j=r[S];for(let k=0;k<this.width;k++){k/j.right>1&&(j=r[++S]);const R=Math.abs(k-j.left),$=Math.abs(k-j.right),U=Math.min(R,$);this.data[_+k]=Math.max(0,Math.min(255,(j.isDash?U:-U)+128))}}addDash(r,u){const p=u?7:0,_=2*p+1;if(this.nextRow+_>this.height)return l.w("LineAtlas out of space"),null;let S=0;for(let k=0;k<r.length;k++)S+=r[k];if(S!==0){const k=this.width/S,R=this.getDashRanges(r,this.width,k);u?this.addRoundDash(R,k,p):this.addRegularDash(R)}const j={y:this.nextRow+p,height:2*p,width:S};return this.nextRow+=_,this.dirty=!0,j}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const xe="maplibre_preloaded_worker_pool";class We{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<We.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[xe]}numActive(){return Object.keys(this.active).length}}const lt=Math.floor(L.hardwareConcurrency/2);let ct,jt;function Gt(){return ct||(ct=new We),ct}We.workerCount=l.H(globalThis)?Math.max(Math.min(lt,3),1):1;class zt{constructor(r,u){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=u;const p=this.workerPool.acquire(u);for(let _=0;_<p.length;_++){const S=new l.J(p[_],u);S.name=`Worker ${_}`,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u){const p=[];for(const _ of this.actors)p.push(_.sendAsync({type:r,data:u}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,u){for(const p of this.actors)p.registerMessageHandler(r,u)}}function yr(){return jt||(jt=new zt(Gt(),l.K),jt.registerMessageHandler("GR",(b,r,u)=>l.m(r,u))),jt}function ar(b,r){const u=l.L();return l.M(u,u,[1,1,0]),l.N(u,u,[.5*b.width,.5*b.height,1]),b.calculatePosMatrix?l.O(u,u,b.calculatePosMatrix(r.toUnwrapped())):u}function Ot(b,r,u,p,_,S,j){var k;const R=function(Z,Q,se){if(Z)for(const me of Z){const pe=Q[me];if(pe&&pe.source===se&&pe.type==="fill-extrusion")return!0}else for(const me in Q){const pe=Q[me];if(pe.source===se&&pe.type==="fill-extrusion")return!0}return!1}((k=_==null?void 0:_.layers)!==null&&k!==void 0?k:null,r,b.id),$=S.maxPitchScaleFactor(),U=b.tilesIn(p,$,R);U.sort(rr);const X=[];for(const Z of U)X.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(r,u,b._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,_,S,$,ar(b.transform,Z.tileID),j?(Q,se)=>j(Z.tileID,Q,se):void 0)});return function(Z,Q){for(const se in Z)for(const me of Z[se])or(me,Q);return Z}(function(Z){const Q={},se={};for(const me of Z){const pe=me.queryResults,ye=me.wrappedTileID,_e=se[ye]=se[ye]||{};for(const Ae in pe){const be=pe[Ae],Ee=_e[Ae]=_e[Ae]||{},Ie=Q[Ae]=Q[Ae]||[];for(const we of be)Ee[we.featureIndex]||(Ee[we.featureIndex]=!0,Ie.push(we))}}return Q}(X),b)}function rr(b,r){const u=b.tileID,p=r.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}function or(b,r){const u=b.feature,p=r.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=p}function _t(b,r,u){return l._(this,void 0,void 0,function*(){let p=b;if(b.url?p=(yield l.j(r.transformRequest(b.url,"Source"),u)).data:yield L.frameAsync(u),!p)return null;const _=l.Q(l.e(p,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(_.vectorLayerIds=p.vector_layers.map(S=>S.id)),_})}class fr{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof l.S?new l.S(r.lng,r.lat):l.S.convert(r),this}setSouthWest(r){return this._sw=r instanceof l.S?new l.S(r.lng,r.lat):l.S.convert(r),this}extend(r){const u=this._sw,p=this._ne;let _,S;if(r instanceof l.S)_=r,S=r;else{if(!(r instanceof fr))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(fr.convert(r)):this.extend(l.S.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(l.S.convert(r)):this;if(_=r._sw,S=r._ne,!_||!S)return this}return u||p?(u.lng=Math.min(_.lng,u.lng),u.lat=Math.min(_.lat,u.lat),p.lng=Math.max(S.lng,p.lng),p.lat=Math.max(S.lat,p.lat)):(this._sw=new l.S(_.lng,_.lat),this._ne=new l.S(S.lng,S.lat)),this}getCenter(){return new l.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.S(this.getWest(),this.getNorth())}getSouthEast(){return new l.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:u,lat:p}=l.S.convert(r);let _=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&_}static convert(r){return r instanceof fr?r:r&&new fr(r)}static fromLngLat(r,u=0){const p=360*u/40075017,_=p/Math.cos(Math.PI/180*r.lat);return new fr(new l.S(r.lng-_,r.lat-p),new l.S(r.lng+_,r.lat+p))}adjustAntiMeridian(){const r=new l.S(this._sw.lng,this._sw.lat),u=new l.S(this._ne.lng,this._ne.lat);return new fr(r,r.lng>u.lng?new l.S(u.lng+360,u.lat):u)}}class Jt{constructor(r,u,p){this.bounds=fr.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),p=Math.floor(l.V(this.bounds.getWest())*u),_=Math.floor(l.U(this.bounds.getNorth())*u),S=Math.ceil(l.V(this.bounds.getEast())*u),j=Math.ceil(l.U(this.bounds.getSouth())*u);return r.x>=p&&r.x<S&&r.y>=_&&r.y<j}}class Kr extends l.E{constructor(r,u,p,_){if(super(),this.id=r,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.Q(u,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield _t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(l.e(this,r),r.bounds&&(this.tileBounds=new Jt(r.bounds,this.minzoom,this.maxzoom)),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this._loaded=!0,this.fire(new l.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(r){return l._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(u,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};p.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((S,j)=>{r.reloadPromise={resolve:S,reject:j}})}else r.actor=this.dispatcher.getActor(),_="LT";r.abortController=new AbortController;try{const S=yield r.actor.sendAsync({type:_,data:p},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,S)}catch(S){if(delete r.abortController,r.aborted)return;if(S&&S.status!==404)throw S;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,u){if(u&&u.resourceTiming&&(r.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&r.setExpiryData(u),r.loadVectorData(u,this.map.painter),r.reloadPromise){const p=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(p.resolve).catch(p.reject)}}abortTile(r){return l._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return l._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class rn extends l.E{constructor(r,u,p,_){super(),this.id=r,this.dispatcher=p,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},u),l.e(this,l.Q(u,["url","scheme","tileSize"]))}load(){return l._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield _t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(l.e(this,u),u.bounds&&(this.tileBounds=new Jt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(u){this._tileJSONRequest=null,this._loaded=!0,this.fire(new l.k(u))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return l.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return l._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const p=yield ce.getImage(this.map._requestManager.transformRequest(u,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&r.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const _=this.map.painter.context,S=_.gl,j=p.data;r.texture=this.map.painter.getTileTexture(j.width),r.texture?r.texture.update(j,{useMipmap:!0}):(r.texture=new l.T(_,j,S.RGBA,{useMipmap:!0}),r.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(p){if(delete r.abortController,r.aborted)r.state="unloaded";else if(p)throw r.state="errored",p}})}abortTile(r){return l._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return l._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class Qr extends rn{constructor(r,u,p,_){super(r,u,p,_),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(r){return l._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(u,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const _=yield ce.getImage(p,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(_&&_.data){const S=_.data;this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&r.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const j=l.b(S)&&l.W()?S:yield this.readImageNow(S),k={type:this.type,uid:r.uid,source:this.id,rawImageData:j,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const R=yield r.actor.sendAsync({type:"LDT",data:k});r.dem=R,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(_){if(delete r.abortController,r.aborted)r.state="unloaded";else if(_)throw r.state="errored",_}})}readImageNow(r){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.X()){const u=r.width+2,p=r.height+2;try{return new l.R({width:u,height:p},yield l.Y(r,-1,-1,u,p))}catch{}}return L.getImageData(r,1)})}_getNeighboringTiles(r){const u=r.canonical,p=Math.pow(2,u.z),_=(u.x-1+p)%p,S=u.x===0?r.wrap-1:r.wrap,j=(u.x+1+p)%p,k=u.x+1===p?r.wrap+1:r.wrap,R={};return R[new l.Z(r.overscaledZ,S,u.z,_,u.y).key]={backfilled:!1},R[new l.Z(r.overscaledZ,k,u.z,j,u.y).key]={backfilled:!1},u.y>0&&(R[new l.Z(r.overscaledZ,S,u.z,_,u.y-1).key]={backfilled:!1},R[new l.Z(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},R[new l.Z(r.overscaledZ,k,u.z,j,u.y-1).key]={backfilled:!1}),u.y+1<p&&(R[new l.Z(r.overscaledZ,S,u.z,_,u.y+1).key]={backfilled:!1},R[new l.Z(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},R[new l.Z(r.overscaledZ,k,u.z,j,u.y+1).key]={backfilled:!1}),R}unloadTile(r){return l._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class Ii extends l.E{constructor(r,u,p,_){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:u.data},this.actor=p.getActor(),this.setEventedParent(_),this._data=u.data,this._options=l.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&l.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=l.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(u.buffer!==void 0?u.buffer:128),tolerance:this._pixelsToTileUnits(u.tolerance!==void 0?u.tolerance:.375),extent:l.$,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(u.clusterMaxZoom),minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.$,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(l.$/this.tileSize)}_getClusterMaxZoom(r){const u=r?Math.round(r):this.maxzoom-1;return Number.isInteger(r)||r===void 0||l.w(`Integer expected for option 'clusterMaxZoom': provided value "${r}" rounded to "${u}"`),u}load(){return l._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._pendingWorkerUpdate={data:r},this._updateWorkerData(),this}updateData(r){return this._pendingWorkerUpdate.diff=l.a0(this._pendingWorkerUpdate.diff,r),this._updateWorkerData(),this}getData(){return l._(this,void 0,void 0,function*(){const r=l.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(u=>u.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return l._(this,void 0,void 0,function*(){const r=new fr,u=yield this.getData();let p;switch(u.type){case"FeatureCollection":p=u.features.map(_=>this.getCoordinatesFromGeometry(_.geometry)).flat(1/0);break;case"Feature":p=this.getCoordinatesFromGeometry(u.geometry);break;default:p=this.getCoordinatesFromGeometry(u)}if(p.length==0)return r;for(let _=0;_<p.length-1;_+=2)r.extend([p[_],p[_+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(r.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,u,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:u,offset:p}})}_updateWorkerData(){return l._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:r,diff:u}=this._pendingWorkerUpdate;if(!r&&!u)return void l.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const p=l.e({type:this.type},this.workerOptions);r?(typeof r=="string"?(p.request=this.map._requestManager.transformRequest(L.resolveURL(r),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(r),this._pendingWorkerUpdate.data=void 0):u&&(p.dataDiff=u,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new l.l("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:p});if(this._isUpdatingWorker=!1,this._removed||_.abandoned)return void this.fire(new l.l("dataabort",{dataType:"source"}));this._data=_.data;let S=null;_.resourceTiming&&_.resourceTiming[this.id]&&(S=_.resourceTiming[this.id].slice(0));const j={dataType:"source"};this._collectResourceTiming&&S&&S.length>0&&l.e(j,{resourceTiming:S}),this.fire(new l.l("data",Object.assign(Object.assign({},j),{sourceDataType:"metadata"}))),this.fire(new l.l("data",Object.assign(Object.assign({},j),{sourceDataType:"content"})))}catch(_){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new l.l("dataabort",{dataType:"source"}));this.fire(new l.k(_))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(r){return l._(this,void 0,void 0,function*(){const u=r.actor?"RT":"LT";r.actor=this.actor;const p={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const _=yield this.actor.sendAsync({type:u,data:p},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(_,this.map.painter,u==="RT")})}abortTile(r){return l._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return l._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Wn extends l.E{constructor(r,u,p,_){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=u}load(r){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield ce.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,r&&(this.coordinates=r),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new l.k(u))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const u=r.map(l.a1.fromLngLat);var p;return this.tileID=function(_){const S=l.a2.fromPoints(_),j=S.width(),k=S.height(),R=Math.max(j,k),$=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),U=Math.pow(2,$);return new l.a4($,Math.floor((S.minX+S.maxX)/2*U),Math.floor((S.minY+S.maxY)/2*U))}(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map(_=>this.tileID.getTilePoint(_)._round()),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new l.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,u=r.gl;this.texture||(this.texture=new l.T(r,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const _ in this.tiles){const S=this.tiles[_];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,p=!0)}p&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return l._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){const{minX:u,minY:p,maxX:_,maxY:S}=l.a2.fromPoints(r),j={};for(let k=0;k<=l.a3;k++){const R=Math.pow(2,k),$=Math.floor(u*R),U=Math.floor(p*R),X=Math.floor(_*R),Z=Math.floor(S*R);j[k]={minTileX:$,minTileY:U,maxTileX:X,maxTileY:Z}}return j}}class Fa extends Wn{constructor(r,u,p,_){super(r,u,p,_),this.roundZoom=!0,this.type="video",this.options=u}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const u of r.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield l.a5(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new l.k(u))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new l.k(new l.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,u=r.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new l.T(r,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const _ in this.tiles){const S=this.tiles[_];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,p=!0)}p&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ki extends Wn{constructor(r,u,p,_){super(r,u,p,_),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(S=>!Array.isArray(S)||S.length!==2||S.some(j=>typeof j!="number"))||this.fire(new l.k(new l.a6(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.k(new l.a6(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.k(new l.a6(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.k(new l.a6(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.k(new l.a6(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return l._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,p=u.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.T(u,this.canvas,p.RGBA,{premultiply:!0});let _=!1;for(const S in this.tiles){const j=this.tiles[S];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture,_=!0)}_&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Ni={},Yi=b=>{switch(b){case"geojson":return Ii;case"image":return Wn;case"raster":return rn;case"raster-dem":return Qr;case"vector":return Kr;case"video":return Fa;case"canvas":return ki}return Ni[b]},Eo="RTLPluginLoaded";class Ps extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=yr()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(u=>{throw this.status="error",u})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return l._(this,arguments,void 0,function*(u,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=L.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return l._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.l(Eo))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ri=null;function Jn(){return Ri||(Ri=new Ps),Ri}var ci,Ne;(function(b){b[b.Base=0]="Base",b[b.Parent=1]="Parent"})(ci||(ci={})),function(b){b[b.Departing=0]="Departing",b[b.Incoming=1]="Incoming"}(Ne||(Ne={}));class ae{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=r,this.uid=l.a7(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(r){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(r||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:r,fadingDirection:u,fadingParentID:p,fadeEndTime:_}){this.resetFadeLogic(),this.fadingRole=r,this.fadingDirection=u,this.fadingParentID=p,this.fadeEndTime=_}setSelfFadeLogic(r){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=r}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=L.now(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(_,S){const j={};if(!S)return j;for(const k of _){const R=k.layerIds.map($=>S.getLayer($)).filter(Boolean);if(R.length!==0){k.layers=R,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map($=>R.filter(U=>U.id===$)[0]));for(const $ of R)j[$.id]=k}}return j}(r.buckets,u==null?void 0:u.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const S=this.buckets[_];if(S instanceof l.a9){if(this.hasSymbolBuckets=!0,!p)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const S=this.buckets[_];if(S instanceof l.a9&&S.hasRTLText){this.hasRTLText=!0,Jn().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const S=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(_).queryRadius(S))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),this.dashPositions=r.dashPositions}else this.collisionBoxArray=new l.a8}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const p in this.buckets){const _=this.buckets[p];_.uploadPending()&&_.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new l.T(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new l.T(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,p,_,S,j,k,R,$,U,X){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:S,scale:j,tileSize:this.tileSize,pixelPosMatrix:U,transform:R,params:k,queryPadding:this.queryPadding*$,getElevation:X},r,u,p):{}}querySourceFeatures(r,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const _=p.loadVTLayers(),S=u&&u.sourceLayer?u.sourceLayer:"",j=_._geojsonTileLayer||_[S];if(!j)return;const k=l.aa(u==null?void 0:u.filter,u==null?void 0:u.globalState),{z:R,x:$,y:U}=this.tileID.canonical,X={z:R,x:$,y:U};for(let Z=0;Z<j.length;Z++){const Q=j.feature(Z);if(k.needGeometry){const pe=l.ab(Q,!0);if(!k.filter(new l.F(this.tileID.overscaledZ),pe,this.tileID.canonical))continue}else if(!k.filter(new l.F(this.tileID.overscaledZ),Q))continue;const se=p.getId(Q,S),me=new l.ac(Q,R,$,U,se);me.tile=X,r.push(me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const p=l.ad(r.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const p=Date.now();let _=!1;if(this.expirationTime>p)_=!1;else if(u)if(this.expirationTime<u)_=!0;else{const S=this.expirationTime-u;S?this.expirationTime=p+Math.max(S,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!u.style.hasLayer(_))continue;const S=this.buckets[_],j=S.layers[0].sourceLayer||"_geojsonTileLayer",k=p[j],R=r[j];if(!k||!R||Object.keys(R).length===0)continue;S.update(R,k,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const $=u&&u.style&&u.style.getLayer(_);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(S)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<L.now()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(r){this.symbolFadeHoldUntil=L.now()+r}setDependencies(r,u){const p={};for(const _ of u)p[_]=!0;this.dependencies[r]=p}hasDependency(r,u){for(const p of r){const _=this.dependencies[p];if(_){for(const S of u)if(_[S])return!0}}return!1}}class oe{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,p){const _=r.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const S={value:u,timeout:void 0};if(p!==void 0&&(S.timeout=setTimeout(()=>{this.remove(r,S)},p)),this.data[_].push(S),this.order.push(_),this.order.length>this.max){const j=this._getAndRemoveByKey(this.order[0]);j&&this.onRemove(j)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const p=r.wrapped().key,_=u===void 0?0:this.data[p].indexOf(u),S=this.data[p][_];return this.data[p].splice(_,1),S.timeout&&clearTimeout(S.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(S.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const p in this.data)for(const _ of this.data[p])r(_.value)||u.push(_);for(const p of u)this.remove(p.value.tileID,p)}}class fe{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,p){const _=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][_]=this.stateChanges[r][_]||{},l.e(this.stateChanges[r][_],p),this.deletedStates[r]===null){this.deletedStates[r]={};for(const S in this.state[r])S!==_&&(this.deletedStates[r][S]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][_]===null){this.deletedStates[r][_]={};for(const S in this.state[r][_])p[S]||(this.deletedStates[r][_][S]=null)}else for(const S in p)this.deletedStates[r]&&this.deletedStates[r][_]&&this.deletedStates[r][_][S]===null&&delete this.deletedStates[r][_][S]}removeFeatureState(r,u,p){if(this.deletedStates[r]===null)return;const _=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},p&&u!==void 0)this.deletedStates[r][_]!==null&&(this.deletedStates[r][_]=this.deletedStates[r][_]||{},this.deletedStates[r][_][p]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][_])for(p in this.deletedStates[r][_]={},this.stateChanges[r][_])this.deletedStates[r][_][p]=null;else this.deletedStates[r][_]=null;else this.deletedStates[r]=null}getState(r,u){const p=String(u),_=l.e({},(this.state[r]||{})[p],(this.stateChanges[r]||{})[p]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const S=this.deletedStates[r][u];if(S===null)return{};for(const j in S)delete _[j]}return _}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const p={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const S={};for(const j in this.stateChanges[_])this.state[_][j]||(this.state[_][j]={}),l.e(this.state[_][j],this.stateChanges[_][j]),S[j]=this.state[_][j];p[_]=S}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const S={};if(this.deletedStates[_]===null)for(const j in this.state[_])S[j]={},this.state[_][j]={};else for(const j in this.deletedStates[_]){if(this.deletedStates[_][j]===null)this.state[_][j]={};else for(const k of Object.keys(this.deletedStates[_][j]))delete this.state[_][j][k];S[j]=this.state[_][j]}p[_]=p[_]||{},l.e(p[_],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const _ in r)r[_].setFeatureState(p,u)}}const Se=89.25;function Pe(b,r){const u=l.ah(r.lat,-l.ai,l.ai);return new l.P(l.V(r.lng)*b,l.U(u)*b)}function Re(b,r){return new l.a1(r.x/b,r.y/b).toLngLat()}function Xe(b){return b.cameraToCenterDistance*Math.min(.85*Math.tan(l.ae(90-b.pitch)),Math.tan(l.ae(Se-b.pitch)))}function Le(b,r){const u=b.canonical,p=r/l.af(u.z),_=u.x+Math.pow(2,u.z)*b.wrap,S=l.ag(new Float64Array(16));return l.M(S,S,[_*p,u.y*p,0]),l.N(S,S,[p/l.$,p/l.$,1]),S}function ht(b,r,u,p,_){const S=l.a1.fromLngLat(b,r),j=_*l.aj(1,b.lat),k=j*Math.cos(l.ae(u)),R=Math.sqrt(j*j-k*k),$=R*Math.sin(l.ae(-p)),U=R*Math.cos(l.ae(-p));return new l.a1(S.x+$,S.y+U,S.z+k)}function St(b,r,u){const p=r.intersectsFrustum(b);if(!u||p===0)return p;const _=r.intersectsPlane(u);return _===0?0:p===2&&_===2?2:1}function mt(b,r,u){let p=0;const _=(u-r)/10;for(let S=0;S<10;S++)p+=_*Math.pow(Math.cos(r+(S+.5)/10*(u-r)),b);return p}function $t(b,r){return function(u,p,_,S,j){const k=2*((b-1)/l.ak(Math.cos(l.ae(Se-j))/Math.cos(l.ae(Se)))-1),R=Math.acos(_/S),$=2*mt(k-1,0,l.ae(j/2)),U=Math.min(l.ae(Se),R+l.ae(j/2)),X=mt(k-1,Math.min(U,R-l.ae(j/2)),U),Z=Math.atan(p/_),Q=Math.hypot(p,_);let se=u;return se+=l.ak(S/Q/Math.max(.5,Math.cos(l.ae(j/2)))),se+=k*l.ak(Math.cos(Z))/2,se-=l.ak(Math.max(1,X/$/r))/2,se}}const Ht=$t(9.314,3);function Ve(b,r){const u=(r.roundZoom?Math.round:Math.floor)(b.zoom+l.ak(b.tileSize/r.tileSize));return Math.max(0,u)}function Or(b,r){const u=b.getCameraFrustum(),p=b.getClippingPlane(),_=b.screenPointToMercatorCoordinate(b.getCameraPoint()),S=l.a1.fromLngLat(b.center,b.elevation);_.z=S.z+Math.cos(b.pitchInRadians)*b.cameraToCenterDistance/b.worldSize;const j=b.getCoveringTilesDetailsProvider(),k=j.allowVariableZoom(b,r),R=Ve(b,r),$=r.minzoom||0,U=r.maxzoom!==void 0?r.maxzoom:b.maxZoom,X=Math.min(Math.max(0,R),U),Z=Math.pow(2,X),Q=[Z*_.x,Z*_.y,0],se=[Z*S.x,Z*S.y,0],me=Math.hypot(S.x-_.x,S.y-_.y),pe=Math.abs(S.z-_.z),ye=Math.hypot(me,pe),_e=Ee=>({zoom:0,x:0,y:0,wrap:Ee,fullyVisible:!1}),Ae=[],be=[];if(b.renderWorldCopies&&j.allowWorldCopies())for(let Ee=1;Ee<=3;Ee++)Ae.push(_e(-Ee)),Ae.push(_e(Ee));for(Ae.push(_e(0));Ae.length>0;){const Ee=Ae.pop(),Ie=Ee.x,we=Ee.y;let De=Ee.fullyVisible;const it={x:Ie,y:we,z:Ee.zoom},Ye=j.getTileBoundingVolume(it,Ee.wrap,b.elevation,r);if(!De){const At=St(u,Ye,p);if(At===0)continue;De=At===2}const Qe=j.distanceToTile2d(_.x,_.y,it,Ye);let Je=R;k&&(Je=(r.calculateTileZoom||Ht)(b.zoom+l.ak(b.tileSize/r.tileSize),Qe,pe,ye,b.fov)),Je=(r.roundZoom?Math.round:Math.floor)(Je),Je=Math.max(0,Je);const Tt=Math.min(Je,U);if(Ee.wrap=j.getWrap(S,it,Ee.wrap),Ee.zoom>=Tt){if(Ee.zoom<$)continue;const At=X-Ee.zoom,yt=Q[0]-.5-(Ie<<At),Bt=Q[1]-.5-(we<<At),lr=r.reparseOverscaled?Math.max(Ee.zoom,Je):Ee.zoom;be.push({tileID:new l.Z(Ee.zoom===U?lr:Ee.zoom,Ee.wrap,Ee.zoom,Ie,we),distanceSq:l.al([se[0]-.5-Ie,se[1]-.5-we]),tileDistanceToCamera:Math.sqrt(yt*yt+Bt*Bt)})}else for(let At=0;At<4;At++)Ae.push({zoom:Ee.zoom+1,x:(Ie<<1)+At%2,y:(we<<1)+(At>>1),wrap:Ee.wrap,fullyVisible:De})}return be.sort((Ee,Ie)=>Ee.distanceSq-Ie.distanceSq).map(Ee=>Ee.tileID)}const qr=l.a2.fromPoints([new l.P(0,0),new l.P(l.$,l.$)]);class qt extends l.E{constructor(r,u,p){super(),this.id=r,this.dispatcher=p,this.on("data",_=>this._dataHandler(_)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((_,S,j,k)=>{const R=new(Yi(S.type))(_,S,j,k);if(R.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${R.id}`);return R})(r,u,p,this),this._tiles={},this._cache=new oe(0,_=>this._unloadTile(_)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new fe,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u,p){return l._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,u,p)}catch(_){r.state="errored",_.status!==404?this._source.fire(new l.k(_,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new l.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(r),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Er).map(r=>r.key)}getRenderableIds(r){const u=[];for(const p in this._tiles)this._isIdRenderable(p,r)&&u.push(this._tiles[p]);return r?u.sort((p,_)=>{const S=p.tileID,j=_.tileID,k=new l.P(S.canonical.x,S.canonical.y)._rotate(-this.transform.bearingInRadians),R=new l.P(j.canonical.x,j.canonical.y)._rotate(-this.transform.bearingInRadians);return S.overscaledZ-j.overscaledZ||R.y-k.y||R.x-k.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(Er).map(p=>p.key)}hasRenderableParent(r){const u=r.overscaledZ-1;if(u>=this._source.minzoom){const p=this._getLoadedTile(r.scaledTo(u));if(p)return this._isIdRenderable(p.tileID.key)}return!1}_isIdRenderable(r,u=!1){var p;return(p=this._tiles[r])===null||p===void 0?void 0:p.isRenderable(u)}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)r?this._reloadTile(u,"expired"):this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(r,u){return l._(this,void 0,void 0,function*(){const p=this._tiles[r];p&&(p.state!=="loading"&&(p.state=u),yield this._loadTile(p,r,u))})}_tileLoaded(r,u,p){r.timeAdded=L.now(),p==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let _=0;_<u.length;_++){const S=u[_];if(r.neighboringTiles&&r.neighboringTiles[S]){const j=this.getTileByID(S);p(r,j),p(j,r)}}function p(_,S){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let j=S.tileID.canonical.x-_.tileID.canonical.x;const k=S.tileID.canonical.y-_.tileID.canonical.y,R=Math.pow(2,_.tileID.canonical.z),$=S.tileID.key;j===0&&k===0||Math.abs(k)>1||(Math.abs(j)>1&&(Math.abs(j+R)===1?j+=R:Math.abs(j-R)===1&&(j-=R)),S.dem&&_.dem&&(_.dem.backfillBorder(S.dem,j,k),_.neighboringTiles&&_.neighboringTiles[$]&&(_.neighboringTiles[$].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u){const p=Object.values(r),_=this._getLoadedDescendents(p),S={};for(const j of p){const k=_[j.key];if(!(k!=null&&k.length)){S[j.key]=j;continue}const R=j.overscaledZ+qt.maxUnderzooming,$=k.filter(Z=>Z.tileID.overscaledZ<=R);if(!$.length){S[j.key]=j;continue}const U=Math.min(...$.map(Z=>Z.tileID.overscaledZ)),X=$.filter(Z=>Z.tileID.overscaledZ===U).map(Z=>Z.tileID);for(const Z of X)u[Z.key]=Z;this._areDescendentsComplete(X,U,j.overscaledZ)||(S[j.key]=j)}return S}_getLoadedDescendents(r){var u;const p={};for(const _ in this._tiles){const S=this._tiles[_];if(S.hasData())for(const j of r)S.tileID.isChildOf(j)&&(p[u=j.key]||(p[u]=[])).push(S)}return p}_areDescendentsComplete(r,u,p){return r.length===1&&r[0].isOverscaled()?r[0].overscaledZ===u:Math.pow(4,u-p)===r.length}_getLoadedTile(r){const u=this._tiles[r.key];return u!=null&&u.hasData()?u:null}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,p=Math.ceil(r.height/this._source.tileSize)+1,_=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(S)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const p={};for(const _ in this._tiles){const S=this._tiles[_];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+u),p[S.tileID.key]=S}this._tiles=p;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}update(r,u){if(!this._sourceLoaded||this._paused)return;let p;this.transform=r,this.terrain=u,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?p=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new l.Z(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(p=Or(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter(R=>this._source.hasTile(R)))):p=[],this.usedForTerrain&&(p=this._addTerrainIdealTiles(p));const _=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,_&&this.fire(new l.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const S=Ve(r,this._source),j=this._updateRetainedTiles(p,S),k=ei(this._source.type);k&&this._rasterFadeDuration>0&&!u&&this._updateFadingTiles(p,j),k?this._cleanUpRasterTiles(j):this._cleanUpVectorTiles(j)}_cleanUpRasterTiles(r){for(const u in this._tiles)r[u]||this._removeTile(u)}_cleanUpVectorTiles(r){for(const u in this._tiles){const p=this._tiles[u];r[u]?p.clearSymbolFadeHold():p.hasSymbolBuckets?p.holdingForSymbolFade()?p.symbolFadeFinished()&&this._removeTile(u):p.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(u)}}_addTerrainIdealTiles(r){const u=[];for(const p of r)if(p.canonical.z>this._source.minzoom){const _=p.scaledTo(p.canonical.z-1);u.push(_);const S=p.scaledTo(Math.max(this._source.minzoom,Math.min(p.canonical.z,5)));u.push(S)}return r.concat(u)}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForSymbolFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){var p;const _={},S={},j=Math.max(u-qt.maxOverzooming,this._source.minzoom);let k={};for(const R of r){const $=this._addTile(R);_[R.key]=R,$.hasData()||(k[R.key]=R)}k=this._retainLoadedChildren(k,_);for(const R in k){const $=k[R];let U=this._tiles[R],X=U==null?void 0:U.wasRequested();for(let Z=$.overscaledZ-1;Z>=j;--Z){const Q=$.scaledTo(Z);if(S[Q.key])break;if(S[Q.key]=!0,U=this.getTile(Q),!U&&X&&(U=this._addTile(Q)),U){const se=U.hasData();if((se||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||X)&&(_[Q.key]=Q),X=U.wasRequested(),se)break}}}return _}_updateFadingTiles(r,u){const p=L.now(),_=l.am(r);for(const S of r){const j=this._tiles[S.key];j.fadingDirection!==Ne.Departing&&j.fadeOpacity!==0||j.resetFadeLogic(),this._updateFadingAncestor(j,u,p)||this._updateFadingDescendents(j,u,p)||this._updateFadingEdge(j,_,p)||j.resetFadeLogic()}}_updateFadingAncestor(r,u,p){if(!r.hasData())return!1;const{tileID:_,fadingRole:S,fadingDirection:j,fadingParentID:k}=r;if(S===ci.Base&&j===Ne.Incoming&&k)return u[k.key]=k,!0;const R=Math.max(_.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let $=_.overscaledZ-1;$>=R;$--){const U=_.scaledTo($),X=this._getLoadedTile(U);if(X)return r.setCrossFadeLogic({fadingRole:ci.Base,fadingDirection:Ne.Incoming,fadingParentID:X.tileID,fadeEndTime:p+this._rasterFadeDuration}),X.setCrossFadeLogic({fadingRole:ci.Parent,fadingDirection:Ne.Departing,fadeEndTime:p+this._rasterFadeDuration}),u[U.key]=U,!0}return!1}_updateFadingDescendents(r,u,p){if(!r.hasData())return!1;const _=r.tileID.children(this._source.maxzoom);let S=this._updateFadingChildren(r,_,u,p);if(S)return!0;for(const j of _){const k=j.children(this._source.maxzoom);this._updateFadingChildren(r,k,u,p)&&(S=!0)}return S}_updateFadingChildren(r,u,p,_){if(u[0].overscaledZ>=this._source.maxzoom)return!1;let S=!1;for(const j of u){const k=this._getLoadedTile(j);if(!k)continue;const{fadingRole:R,fadingDirection:$,fadingParentID:U}=k;R===ci.Base&&$===Ne.Departing&&U||(k.setCrossFadeLogic({fadingRole:ci.Base,fadingDirection:Ne.Departing,fadingParentID:r.tileID,fadeEndTime:_+this._rasterFadeDuration}),r.setCrossFadeLogic({fadingRole:ci.Parent,fadingDirection:Ne.Incoming,fadeEndTime:_+this._rasterFadeDuration})),p[j.key]=j,S=!0}return S}_updateFadingEdge(r,u,p){const _=r.tileID;return!!r.selfFading||!r.hasData()&&!!u.has(_)&&(r.setSelfFadeLogic(p+this._rasterFadeDuration),!0)}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(u.resetFadeLogic(),this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const p=u;return u||(u=new ae(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,r.key,u.state)),u.uses++,this._tiles[r.key]=u,p||this._source.fire(new l.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const p=u.getExpiryTimeout();p&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},p))}refreshTiles(r){for(const u in this._tiles)(this._isIdRenderable(u)||this._tiles[u].state=="errored")&&r.some(p=>p.equals(this._tiles[u].tileID.canonical))&&this._reloadTile(u,"expired")}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(r){r.dataType==="source"&&(r.sourceDataType!=="metadata"?r.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,p){const _=[],S=this.transform;if(!S)return _;const j=S.getCoveringTilesDetailsProvider().allowWorldCopies(),k=p?S.getCameraQueryGeometry(r):r,R=Q=>S.screenPointToMercatorCoordinate(Q,this.terrain),$=this.transformBbox(r,R,!j),U=this.transformBbox(k,R,!j),X=this.getIds(),Z=l.a2.fromPoints(U);for(let Q=0;Q<X.length;Q++){const se=this._tiles[X[Q]];if(se.holdingForSymbolFade())continue;const me=j?[se.tileID]:[se.tileID.unwrapTo(-1),se.tileID.unwrapTo(0)],pe=Math.pow(2,S.zoom-se.tileID.overscaledZ),ye=u*se.queryPadding*l.$/se.tileSize/pe;for(const _e of me){const Ae=Z.map(be=>_e.getTilePoint(new l.a1(be.x,be.y)));if(Ae.expandBy(ye),Ae.intersects(qr)){const be=$.map(Ie=>_e.getTilePoint(Ie)),Ee=U.map(Ie=>_e.getTilePoint(Ie));_.push({tile:se,tileID:j?_e:_e.unwrapTo(0),queryGeometry:be,cameraQueryGeometry:Ee,scale:pe})}}}return _}transformBbox(r,u,p){let _=r.map(u);if(p){const S=l.a2.fromPoints(r);S.shrinkBy(.001*Math.min(S.width(),S.height()));const j=S.map(u);l.a2.fromPoints(_).covers(j)||(_=_.map(k=>k.x>.5?new l.a1(k.x-1,k.y,k.z):k))}return _}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(p=>this._tiles[p].tileID);return this.transform&&this.transform.populateCache(u),u}hasTransition(){if(this._source.hasTransition())return!0;if(ei(this._source.type)&&this._rasterFadeDuration>0){const r=L.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setRasterFadeDuration(r){this._rasterFadeDuration=r}setFeatureState(r,u,p){this._state.updateState(r=r||"_geojsonTileLayer",u,p)}removeFeatureState(r,u,p){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,p)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,p){const _=this._tiles[r];_&&_.setDependencies(u,p)}reloadTilesForDependencies(r,u){for(const p in this._tiles)this._tiles[p].hasDependency(r,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(r,u))}}function Er(b,r){const u=Math.abs(2*b.wrap)-+(b.wrap<0),p=Math.abs(2*r.wrap)-+(r.wrap<0);return b.overscaledZ-r.overscaledZ||p-u||r.canonical.y-b.canonical.y||r.canonical.x-b.canonical.x}function ei(b){return b==="raster"||b==="image"||b==="video"}qt.maxOverzooming=10,qt.maxUnderzooming=3;class ui{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.ah(r,0,1);let u=1,p=this._distances[u];const _=r*this.paddedLength+this.padding;for(;p<_&&u<this._distances.length;)p=this._distances[++u];const S=u-1,j=this._distances[S],k=p-j,R=k>0?(_-j)/k:0;return this.points[S].mult(1-R).add(this.points[u].mult(R))}}function dn(b,r){let u=!0;return b==="always"||b!=="never"&&r!=="never"||(u=!1),u}class Hr{constructor(r,u,p){const _=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(r/p),this.yCellCount=Math.ceil(u/p);for(let j=0;j<this.xCellCount*this.yCellCount;j++)_.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,p,_,S){this._forEachCell(u,p,_,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(S)}insertCircle(r,u,p,_){this._forEachCell(u-_,p-_,u+_,p+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(p),this.circles.push(_)}_insertBoxCell(r,u,p,_,S,j){this.boxCells[S].push(j)}_insertCircleCell(r,u,p,_,S,j){this.circleCells[S].push(j)}_query(r,u,p,_,S,j,k){if(p<0||r>this.width||_<0||u>this.height)return[];const R=[];if(r<=0&&u<=0&&this.width<=p&&this.height<=_){if(S)return[{key:null,x1:r,y1:u,x2:p,y2:_}];for(let $=0;$<this.boxKeys.length;$++)R.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const U=this.circles[3*$],X=this.circles[3*$+1],Z=this.circles[3*$+2];R.push({key:this.circleKeys[$],x1:U-Z,y1:X-Z,x2:U+Z,y2:X+Z})}}else this._forEachCell(r,u,p,_,this._queryCell,R,{hitTest:S,overlapMode:j,seenUids:{box:{},circle:{}}},k);return R}query(r,u,p,_){return this._query(r,u,p,_,!1,null)}hitTest(r,u,p,_,S,j){return this._query(r,u,p,_,!0,S,j).length>0}hitTestCircle(r,u,p,_,S){const j=r-p,k=r+p,R=u-p,$=u+p;if(k<0||j>this.width||$<0||R>this.height)return!1;const U=[];return this._forEachCell(j,R,k,$,this._queryCellCircle,U,{hitTest:!0,overlapMode:_,circle:{x:r,y:u,radius:p},seenUids:{box:{},circle:{}}},S),U.length>0}_queryCell(r,u,p,_,S,j,k,R){const{seenUids:$,hitTest:U,overlapMode:X}=k,Z=this.boxCells[S];if(Z!==null){const se=this.bboxes;for(const me of Z)if(!$.box[me]){$.box[me]=!0;const pe=4*me,ye=this.boxKeys[me];if(r<=se[pe+2]&&u<=se[pe+3]&&p>=se[pe+0]&&_>=se[pe+1]&&(!R||R(ye))&&(!U||!dn(X,ye.overlapMode))&&(j.push({key:ye,x1:se[pe],y1:se[pe+1],x2:se[pe+2],y2:se[pe+3]}),U))return!0}}const Q=this.circleCells[S];if(Q!==null){const se=this.circles;for(const me of Q)if(!$.circle[me]){$.circle[me]=!0;const pe=3*me,ye=this.circleKeys[me];if(this._circleAndRectCollide(se[pe],se[pe+1],se[pe+2],r,u,p,_)&&(!R||R(ye))&&(!U||!dn(X,ye.overlapMode))){const _e=se[pe],Ae=se[pe+1],be=se[pe+2];if(j.push({key:ye,x1:_e-be,y1:Ae-be,x2:_e+be,y2:Ae+be}),U)return!0}}}return!1}_queryCellCircle(r,u,p,_,S,j,k,R){const{circle:$,seenUids:U,overlapMode:X}=k,Z=this.boxCells[S];if(Z!==null){const se=this.bboxes;for(const me of Z)if(!U.box[me]){U.box[me]=!0;const pe=4*me,ye=this.boxKeys[me];if(this._circleAndRectCollide($.x,$.y,$.radius,se[pe+0],se[pe+1],se[pe+2],se[pe+3])&&(!R||R(ye))&&!dn(X,ye.overlapMode))return j.push(!0),!0}}const Q=this.circleCells[S];if(Q!==null){const se=this.circles;for(const me of Q)if(!U.circle[me]){U.circle[me]=!0;const pe=3*me,ye=this.circleKeys[me];if(this._circlesCollide(se[pe],se[pe+1],se[pe+2],$.x,$.y,$.radius)&&(!R||R(ye))&&!dn(X,ye.overlapMode))return j.push(!0),!0}}}_forEachCell(r,u,p,_,S,j,k,R){const $=this._convertToXCellCoord(r),U=this._convertToYCellCoord(u),X=this._convertToXCellCoord(p),Z=this._convertToYCellCoord(_);for(let Q=$;Q<=X;Q++)for(let se=U;se<=Z;se++)if(S.call(this,r,u,p,_,this.xCellCount*se+Q,j,k,R))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,p,_,S,j){const k=_-r,R=S-u,$=p+j;return $*$>k*k+R*R}_circleAndRectCollide(r,u,p,_,S,j,k){const R=(j-_)/2,$=Math.abs(r-(_+R));if($>R+p)return!1;const U=(k-S)/2,X=Math.abs(u-(S+U));if(X>U+p)return!1;if($<=R||X<=U)return!0;const Z=$-R,Q=X-U;return Z*Z+Q*Q<=p*p}}function Ar(b,r,u){const p=l.L();if(!b){const{vecSouth:X,vecEast:Z}=Ur(r),Q=E();Q[0]=Z[0],Q[1]=Z[1],Q[2]=X[0],Q[3]=X[1],_=Q,(U=(j=(S=Q)[0])*($=S[3])-(R=S[2])*(k=S[1]))&&(_[0]=$*(U=1/U),_[1]=-k*U,_[2]=-R*U,_[3]=j*U),p[0]=Q[0],p[1]=Q[1],p[4]=Q[2],p[5]=Q[3]}var _,S,j,k,R,$,U;return l.N(p,p,[1/u,1/u,1]),p}function Mn(b,r,u,p){if(b){const _=l.L();if(!r){const{vecSouth:S,vecEast:j}=Ur(u);_[0]=j[0],_[1]=j[1],_[4]=S[0],_[5]=S[1]}return l.N(_,_,[p,p,1]),_}return u.pixelsToClipSpaceMatrix}function Ur(b){const r=Math.cos(b.rollInRadians),u=Math.sin(b.rollInRadians),p=Math.cos(b.pitchInRadians),_=Math.cos(b.bearingInRadians),S=Math.sin(b.bearingInRadians),j=l.ar();j[0]=-_*p*u-S*r,j[1]=-S*p*u+_*r;const k=l.as(j);k<1e-9?l.at(j):l.au(j,j,1/k);const R=l.ar();R[0]=_*p*r-S*u,R[1]=S*p*r+_*u;const $=l.as(R);return $<1e-9?l.at(R):l.au(R,R,1/$),{vecEast:R,vecSouth:j}}function wt(b,r,u,p){let _;p?(_=[b,r,p(b,r),1],l.aw(_,_,u)):(_=[b,r,0,1],ml(_,_,u));const S=_[3];return{point:new l.P(_[0]/S,_[1]/S),signedDistanceFromCamera:S,isOccluded:!1}}function Co(b,r){return .5+b/r*.5}function ua(b,r){return b.x>=-r[0]&&b.x<=r[0]&&b.y>=-r[1]&&b.y<=r[1]}function Mi(b,r,u,p,_,S,j,k,R,$,U,X,Z){const Q=u?b.textSizeData:b.iconSizeData,se=l.an(Q,r.transform.zoom),me=[256/r.width*2+1,256/r.height*2+1],pe=u?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;pe.clear();const ye=b.lineVertexArray,_e=u?b.text.placedSymbolArray:b.icon.placedSymbolArray,Ae=r.transform.width/r.transform.height;let be=!1;for(let Ee=0;Ee<_e.length;Ee++){const Ie=_e.get(Ee);if(Ie.hidden||Ie.writingMode===l.ao.vertical&&!be){Io(Ie.numGlyphs,pe);continue}be=!1;const we=new l.P(Ie.anchorX,Ie.anchorY),De={getElevation:Z,pitchedLabelPlaneMatrix:p,lineVertexArray:ye,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:we,unwrappedTileID:R,width:$,height:U,translation:X},it=vr(Ie.anchorX,Ie.anchorY,De);if(!ua(it.point,me)){Io(Ie.numGlyphs,pe);continue}const Ye=Co(r.transform.cameraToCenterDistance,it.signedDistanceFromCamera),Qe=l.ap(Q,se,Ie),Je=S?Qe*r.transform.getPitchedTextCorrection(Ie.anchorX,Ie.anchorY,R)/Ye:Qe*Ye,Tt=mr({projectionContext:De,pitchedLabelPlaneMatrixInverse:_,symbol:Ie,fontSize:Je,flip:!1,keepUpright:j,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:Ae,rotateToLine:k});be=Tt.useVertical,(Tt.notEnoughRoom||be||Tt.needsFlipping&&mr({projectionContext:De,pitchedLabelPlaneMatrixInverse:_,symbol:Ie,fontSize:Je,flip:!0,keepUpright:j,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:Ae,rotateToLine:k}).notEnoughRoom)&&Io(Ie.numGlyphs,pe)}u?b.text.dynamicLayoutVertexBuffer.updateData(pe):b.icon.dynamicLayoutVertexBuffer.updateData(pe)}function Yn(b,r,u,p,_,S,j,k){const R=S.glyphStartIndex+S.numGlyphs,$=S.lineStartIndex,U=S.lineStartIndex+S.lineLength,X=r.getoffsetX(S.glyphStartIndex),Z=r.getoffsetX(R-1),Q=pl(b*X,u,p,_,S.segment,$,U,k,j);if(!Q)return null;const se=pl(b*Z,u,p,_,S.segment,$,U,k,j);return se?k.projectionCache.anyProjectionOccluded?null:{first:Q,last:se}:null}function Et(b,r,u,p){return b===l.ao.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*p?{useVertical:!0}:(b===l.ao.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function mr(b){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:u,symbol:p,fontSize:_,flip:S,keepUpright:j,glyphOffsetArray:k,dynamicLayoutVertexArray:R,aspectRatio:$,rotateToLine:U}=b,X=_/24,Z=p.lineOffsetX*X,Q=p.lineOffsetY*X;let se;if(p.numGlyphs>1){const me=p.glyphStartIndex+p.numGlyphs,pe=p.lineStartIndex,ye=p.lineStartIndex+p.lineLength,_e=Yn(X,k,Z,Q,S,p,U,r);if(!_e)return{notEnoughRoom:!0};const Ae=uo(_e.first.point.x,_e.first.point.y,r,u),be=uo(_e.last.point.x,_e.last.point.y,r,u);if(j&&!S){const Ee=Et(p.writingMode,Ae,be,$);if(Ee)return Ee}se=[_e.first];for(let Ee=p.glyphStartIndex+1;Ee<me-1;Ee++){const Ie=pl(X*k.getoffsetX(Ee),Z,Q,S,p.segment,pe,ye,r,U);if(!Ie)return{notEnoughRoom:!0};se.push(Ie)}se.push(_e.last)}else{if(j&&!S){const pe=fn(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,ye=p.lineStartIndex+p.segment+1,_e=new l.P(r.lineVertexArray.getx(ye),r.lineVertexArray.gety(ye)),Ae=fn(_e.x,_e.y,r),be=Ae.signedDistanceFromCamera>0?Ae.point:pr(r.tileAnchorPoint,_e,pe,1,r),Ee=uo(pe.x,pe.y,r,u),Ie=uo(be.x,be.y,r,u),we=Et(p.writingMode,Ee,Ie,$);if(we)return we}const me=pl(X*k.getoffsetX(p.glyphStartIndex),Z,Q,S,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,r,U);if(!me||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};se=[me]}for(const me of se)l.av(R,me.point,me.angle);return{}}function pr(b,r,u,p,_){const S=b.add(b.sub(r)._unit()),j=fn(S.x,S.y,_).point,k=u.sub(j);return u.add(k._mult(p/k.mag()))}function vi(b,r,u){const p=r.projectionCache;if(p.projections[b])return p.projections[b];const _=new l.P(r.lineVertexArray.getx(b),r.lineVertexArray.gety(b)),S=fn(_.x,_.y,r);if(S.signedDistanceFromCamera>0)return p.projections[b]=S.point,p.anyProjectionOccluded=p.anyProjectionOccluded||S.isOccluded,S.point;const j=b-u.direction;return pr(u.distanceFromAnchor===0?r.tileAnchorPoint:new l.P(r.lineVertexArray.getx(j),r.lineVertexArray.gety(j)),_,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,r)}function fn(b,r,u){const p=b+u.translation[0],_=r+u.translation[1];let S;return u.pitchWithMap?(S=wt(p,_,u.pitchedLabelPlaneMatrix,u.getElevation),S.isOccluded=!1):(S=u.transform.projectTileCoordinates(p,_,u.unwrappedTileID,u.getElevation),S.point.x=(.5*S.point.x+.5)*u.width,S.point.y=(.5*-S.point.y+.5)*u.height),S}function uo(b,r,u,p){if(u.pitchWithMap){const _=[b,r,0,1];return l.aw(_,_,p),u.transform.projectTileCoordinates(_[0]/_[3],_[1]/_[3],u.unwrappedTileID,u.getElevation).point}return{x:b/u.width*2-1,y:1-r/u.height*2}}function vr(b,r,u){return u.transform.projectTileCoordinates(b,r,u.unwrappedTileID,u.getElevation)}function $a(b,r,u){return b._unit()._perp()._mult(r*u)}function Oo(b,r,u,p,_,S,j,k,R){if(k.projectionCache.offsets[b])return k.projectionCache.offsets[b];const $=u.add(r);if(b+R.direction<p||b+R.direction>=_)return k.projectionCache.offsets[b]=$,$;const U=vi(b+R.direction,k,R),X=$a(U.sub(u),j,R.direction),Z=u.add(X),Q=U.add(X);return k.projectionCache.offsets[b]=l.ax(S,$,Z,Q)||$,k.projectionCache.offsets[b]}function pl(b,r,u,p,_,S,j,k,R){const $=p?b-r:b+r;let U=$>0?1:-1,X=0;p&&(U*=-1,X=Math.PI),U<0&&(X+=Math.PI);let Z,Q=U>0?S+_:S+_+1;k.projectionCache.cachedAnchorPoint?Z=k.projectionCache.cachedAnchorPoint:(Z=fn(k.tileAnchorPoint.x,k.tileAnchorPoint.y,k).point,k.projectionCache.cachedAnchorPoint=Z);let se,me,pe=Z,ye=Z,_e=0,Ae=0;const be=Math.abs($),Ee=[];let Ie;for(;_e+Ae<=be;){if(Q+=U,Q<S||Q>=j)return null;_e+=Ae,ye=pe,me=se;const it={absOffsetX:be,direction:U,distanceFromAnchor:_e,previousVertex:ye};if(pe=vi(Q,k,it),u===0)Ee.push(ye),Ie=pe.sub(ye);else{let Ye;const Qe=pe.sub(ye);Ye=Qe.mag()===0?$a(vi(Q+U,k,it).sub(pe),u,U):$a(Qe,u,U),me||(me=ye.add(Ye)),se=Oo(Q,Ye,pe,S,j,me,u,k,it),Ee.push(me),Ie=se.sub(me)}Ae=Ie.mag()}const we=Ie._mult((be-_e)/Ae)._add(me||ye),De=X+Math.atan2(pe.y-ye.y,pe.x-ye.x);return Ee.push(we),{point:we,angle:R?De:0,path:Ee}}const mc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Io(b,r){for(let u=0;u<b;u++){const p=r.length;r.resize(p+4),r.float32.set(mc,3*p)}}function ml(b,r,u){const p=r[0],_=r[1];return b[0]=u[0]*p+u[4]*_+u[12],b[1]=u[1]*p+u[5]*_+u[13],b[3]=u[3]*p+u[7]*_+u[15],b}const jn=100;class Di{constructor(r,u=new Hr(r.width+200,r.height+200,25),p=new Hr(r.width+200,r.height+200,25)){this.transform=r,this.grid=u,this.ignoredGrid=p,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+jn,this.screenBottomBoundary=r.height+jn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,p,_,S,j,k,R,$,U,X,Z){const Q=this.projectAndGetPerspectiveRatio(r.anchorPointX+R[0],r.anchorPointY+R[1],S,U,Z),se=p*Q.perspectiveRatio;let me;if(j||k)me=this._projectCollisionBox(r,se,_,S,j,k,R,Q,U,X,Z);else{const Ie=Q.x+(X?X.x*se:0),we=Q.y+(X?X.y*se:0);me={allPointsOccluded:!1,box:[Ie+r.x1*se,we+r.y1*se,Ie+r.x2*se,we+r.y2*se]}}const[pe,ye,_e,Ae]=me.box,be=j?me.allPointsOccluded:Q.isOccluded;let Ee=be;return Ee||(Ee=Q.perspectiveRatio<this.perspectiveRatioCutoff),Ee||(Ee=!this.isInsideGrid(pe,ye,_e,Ae)),Ee||u!=="always"&&this.grid.hitTest(pe,ye,_e,Ae,u,$)?{box:[pe,ye,_e,Ae],placeable:!1,offscreen:!1,occluded:be}:{box:[pe,ye,_e,Ae],placeable:!0,offscreen:this.isOffscreen(pe,ye,_e,Ae),occluded:be}}placeCollisionCircles(r,u,p,_,S,j,k,R,$,U,X,Z,Q,se){const me=[],pe=new l.P(u.anchorX,u.anchorY),ye=this.getPerspectiveRatio(pe.x,pe.y,j,se),_e=($?S*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,j)/ye:S*ye)/l.aB,Ae={getElevation:se,pitchedLabelPlaneMatrix:k,lineVertexArray:p,pitchWithMap:$,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:pe,unwrappedTileID:j,width:this.transform.width,height:this.transform.height,translation:Q},be=Yn(_e,_,u.lineOffsetX*_e,u.lineOffsetY*_e,!1,u,!1,Ae);let Ee=!1,Ie=!1,we=!0;if(be){const De=.5*X*ye+Z,it=new l.P(-100,-100),Ye=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Qe=new ui,Je=be.first,Tt=be.last;let At=[];for(let lr=Je.path.length-1;lr>=1;lr--)At.push(Je.path[lr]);for(let lr=1;lr<Tt.path.length;lr++)At.push(Tt.path[lr]);const yt=2.5*De;if($){const lr=this.projectPathToScreenSpace(At,Ae);At=lr.some(Xr=>Xr.signedDistanceFromCamera<=0)?[]:lr.map(Xr=>Xr.point)}let Bt=[];if(At.length>0){const lr=At[0].clone(),Xr=At[0].clone();for(let Wr=1;Wr<At.length;Wr++)lr.x=Math.min(lr.x,At[Wr].x),lr.y=Math.min(lr.y,At[Wr].y),Xr.x=Math.max(Xr.x,At[Wr].x),Xr.y=Math.max(Xr.y,At[Wr].y);Bt=lr.x>=it.x&&Xr.x<=Ye.x&&lr.y>=it.y&&Xr.y<=Ye.y?[At]:Xr.x<it.x||lr.x>Ye.x||Xr.y<it.y||lr.y>Ye.y?[]:l.ay([At],it.x,it.y,Ye.x,Ye.y)}for(const lr of Bt){Qe.reset(lr,.25*De);let Xr=0;Xr=Qe.length<=.5*De?1:Math.ceil(Qe.paddedLength/yt)+1;for(let Wr=0;Wr<Xr;Wr++){const cn=Wr/Math.max(Xr-1,1),Cn=Qe.lerp(cn),un=Cn.x+jn,Tr=Cn.y+jn;me.push(un,Tr,De,0);const pn=un-De,ai=Tr-De,$n=un+De,qn=Tr+De;if(we=we&&this.isOffscreen(pn,ai,$n,qn),Ie=Ie||this.isInsideGrid(pn,ai,$n,qn),r!=="always"&&this.grid.hitTestCircle(un,Tr,De,r,U)&&(Ee=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Ee}}}}return{circles:!R&&Ee||!Ie||ye<this.perspectiveRatioCutoff?[]:me,offscreen:we,collisionDetected:Ee}}projectPathToScreenSpace(r,u){const p=function(_,S){const j=l.L();return l.aq(j,S.pitchedLabelPlaneMatrix),_.map(k=>{const R=wt(k.x,k.y,j,S.getElevation),$=S.transform.projectTileCoordinates(R.point.x,R.point.y,S.unwrappedTileID,S.getElevation);return $.point.x=(.5*$.point.x+.5)*S.width,$.point.y=(.5*-$.point.y+.5)*S.height,$})}(r,u);return function(_){let S=0,j=0,k=0,R=0;for(let $=0;$<_.length;$++)_[$].isOccluded?(k=$+1,R=0):(R++,R>j&&(j=R,S=k));return _.slice(S,S+j)}(p)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[],p=new l.a2;for(const X of r){const Z=new l.P(X.x+jn,X.y+jn);p.extend(Z),u.push(Z)}const{minX:_,minY:S,maxX:j,maxY:k}=p,R=this.grid.query(_,S,j,k).concat(this.ignoredGrid.query(_,S,j,k)),$={},U={};for(const X of R){const Z=X.key;if($[Z.bucketInstanceId]===void 0&&($[Z.bucketInstanceId]={}),$[Z.bucketInstanceId][Z.featureIndex])continue;const Q=[new l.P(X.x1,X.y1),new l.P(X.x2,X.y1),new l.P(X.x2,X.y2),new l.P(X.x1,X.y2)];l.az(u,Q)&&($[Z.bucketInstanceId][Z.featureIndex]=!0,U[Z.bucketInstanceId]===void 0&&(U[Z.bucketInstanceId]=[]),U[Z.bucketInstanceId].push(Z.featureIndex))}return U}insertCollisionBox(r,u,p,_,S,j){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:S,collisionGroupID:j,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,p,_,S,j){const k=p?this.ignoredGrid:this.grid,R={bucketInstanceId:_,featureIndex:S,collisionGroupID:j,overlapMode:u};for(let $=0;$<r.length;$+=4)k.insertCircle(R,r[$],r[$+1],r[$+2])}projectAndGetPerspectiveRatio(r,u,p,_,S){if(S){let j;_?(j=[r,u,_(r,u),1],l.aw(j,j,S)):(j=[r,u,0,1],ml(j,j,S));const k=j[3];return{x:(j[0]/k+1)/2*this.transform.width+jn,y:(-j[1]/k+1)/2*this.transform.height+jn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/k*.5,isOccluded:!1,signedDistanceFromCamera:k}}{const j=this.transform.projectTileCoordinates(r,u,p,_);return{x:(j.point.x+1)/2*this.transform.width+jn,y:(1-j.point.y)/2*this.transform.height+jn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/j.signedDistanceFromCamera*.5,isOccluded:j.isOccluded,signedDistanceFromCamera:j.signedDistanceFromCamera}}}getPerspectiveRatio(r,u,p,_){const S=this.transform.projectTileCoordinates(r,u,p,_);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(r,u,p,_){return p<jn||r>=this.screenRightBoundary||_<jn||u>this.screenBottomBoundary}isInsideGrid(r,u,p,_){return p>=0&&r<this.gridRightBoundary&&_>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=l.ag([]);return l.M(r,r,[-100,-100,0]),r}_projectCollisionBox(r,u,p,_,S,j,k,R,$,U,X){let Z=1,Q=0,se=0,me=1;const pe=r.anchorPointX+k[0],ye=r.anchorPointY+k[1];if(j&&!S){const At=this.projectAndGetPerspectiveRatio(pe+1,ye,_,$,X),yt=At.x-R.x,Bt=Math.atan((At.y-R.y)/yt)+(yt<0?Math.PI:0),lr=Math.sin(Bt),Xr=Math.cos(Bt);Z=Xr,Q=lr,se=-lr,me=Xr}else if(!j&&S){const At=Ur(this.transform);Z=At.vecEast[0],Q=At.vecEast[1],se=At.vecSouth[0],me=At.vecSouth[1]}let _e=R.x,Ae=R.y,be=u;S&&(_e=pe,Ae=ye,be=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),be*=this.transform.getPitchedTextCorrection(pe,ye,_),U||(be*=l.ah(.5+R.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),U&&(_e+=Z*U.x*be+se*U.y*be,Ae+=Q*U.x*be+me*U.y*be);const Ee=r.x1*be,Ie=r.x2*be,we=(Ee+Ie)/2,De=r.y1*be,it=r.y2*be,Ye=(De+it)/2,Qe=[{offsetX:Ee,offsetY:De},{offsetX:we,offsetY:De},{offsetX:Ie,offsetY:De},{offsetX:Ie,offsetY:Ye},{offsetX:Ie,offsetY:it},{offsetX:we,offsetY:it},{offsetX:Ee,offsetY:it},{offsetX:Ee,offsetY:Ye}];let Je=[];for(const{offsetX:At,offsetY:yt}of Qe)Je.push(new l.P(_e+Z*At+se*yt,Ae+Q*At+me*yt));let Tt=!1;if(S){const At=Je.map(yt=>this.projectAndGetPerspectiveRatio(yt.x,yt.y,_,$,X));Tt=At.some(yt=>!yt.isOccluded),Je=At.map(yt=>new l.P(yt.x,yt.y))}else Tt=!0;return{box:l.aA(Je),allPointsOccluded:!Tt}}}class Vr{constructor(r,u,p,_){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):_&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class gl{constructor(r,u,p,_,S){this.text=new Vr(r?r.text:null,u,p,S),this.icon=new Vr(r?r.icon:null,u,_,S)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class yl{constructor(r,u,p){this.text=r,this.icon=u,this.skipFade=p}}class Es{constructor(r,u,p,_,S){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=_,this.tileID=S}}class as{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[r]}}function ho(b,r,u,p,_){const{horizontalAlign:S,verticalAlign:j}=l.aH(b);return new l.P(-(S-.5)*r+p[0]*_,-(j-.5)*u+p[1]*_)}class qf{constructor(r,u,p,_,S){this.transform=r.clone(),this.terrain=u,this.collisionIndex=new Di(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new as(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const u=this.terrain;return u?(p,_)=>u.getElevation(r,p,_):null}getBucketParts(r,u,p,_){const S=p.getBucket(u),j=p.latestFeatureIndex;if(!S||!j||u.id!==S.layerIds[0])return;const k=p.collisionBoxArray,R=S.layers[0].layout,$=S.layers[0].paint,U=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),X=p.tileSize/l.$,Z=p.tileID.toUnwrapped(),Q=R.get("text-rotation-alignment")==="map",se=l.aC(p,1,this.transform.zoom),me=l.aD(this.collisionIndex.transform,p,$.get("text-translate"),$.get("text-translate-anchor")),pe=l.aD(this.collisionIndex.transform,p,$.get("icon-translate"),$.get("icon-translate-anchor")),ye=Ar(Q,this.transform,se);this.retainedQueryData[S.bucketInstanceId]=new Es(S.bucketInstanceId,j,S.sourceLayerIndex,S.index,p.tileID);const _e={bucket:S,layout:R,translationText:me,translationIcon:pe,unwrappedTileID:Z,pitchedLabelPlaneMatrix:ye,scale:U,textPixelRatio:X,holdingForFade:p.holdingForSymbolFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:l.an(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(_)for(const Ae of S.sortKeyRanges){const{sortKey:be,symbolInstanceStart:Ee,symbolInstanceEnd:Ie}=Ae;r.push({sortKey:be,symbolInstanceStart:Ee,symbolInstanceEnd:Ie,parameters:_e})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:_e})}attemptAnchorPlacement(r,u,p,_,S,j,k,R,$,U,X,Z,Q,se,me,pe,ye,_e,Ae,be){const Ee=l.aE[r.textAnchor],Ie=[r.textOffset0,r.textOffset1],we=ho(Ee,p,_,Ie,S),De=this.collisionIndex.placeCollisionBox(u,Z,R,$,U,k,j,pe,X.predicate,Ae,we,be);if((!_e||this.collisionIndex.placeCollisionBox(_e,Z,R,$,U,k,j,ye,X.predicate,Ae,we,be).placeable)&&De.placeable){let it;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(it=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),Q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Q.crossTileID]={textOffset:Ie,width:p,height:_,anchor:Ee,textBoxScale:S,prevAnchor:it},this.markUsedJustification(se,Ee,Q,me),se.allowVerticalPlacement&&(this.markUsedOrientation(se,me,Q),this.placedOrientations[Q.crossTileID]=me),{shift:we,placedGlyphBoxes:De}}}placeLayerBucketPart(r,u,p){const{bucket:_,layout:S,translationText:j,translationIcon:k,unwrappedTileID:R,pitchedLabelPlaneMatrix:$,textPixelRatio:U,holdingForFade:X,collisionBoxArray:Z,partiallyEvaluatedTextSize:Q,collisionGroup:se}=r.parameters,me=S.get("text-optional"),pe=S.get("icon-optional"),ye=l.aF(S,"text-overlap","text-allow-overlap"),_e=ye==="always",Ae=l.aF(S,"icon-overlap","icon-allow-overlap"),be=Ae==="always",Ee=S.get("text-rotation-alignment")==="map",Ie=S.get("text-pitch-alignment")==="map",we=S.get("icon-text-fit")!=="none",De=S.get("symbol-z-order")==="viewport-y",it=_e&&(be||!_.hasIconData()||pe),Ye=be&&(_e||!_.hasTextData()||me);!_.collisionArrays&&Z&&_.deserializeCollisionBoxes(Z);const Qe=this.retainedQueryData[_.bucketInstanceId].tileID,Je=this._getTerrainElevationFunc(Qe),Tt=this.transform.getFastPathSimpleProjectionMatrix(Qe),At=(yt,Bt,lr)=>{var Xr,Wr;if(u[yt.crossTileID])return;if(X)return void(this.placements[yt.crossTileID]=new yl(!1,!1,!1));let cn=!1,Cn=!1,un=!0,Tr=null,pn={box:null,placeable:!1,offscreen:null,occluded:!1},ai={placeable:!1},$n=null,qn=null,wi=null,vs=0,Qa=0,Ws=0;Bt.textFeatureIndex?vs=Bt.textFeatureIndex:yt.useRuntimeCollisionCircles&&(vs=yt.featureIndex),Bt.verticalTextFeatureIndex&&(Qa=Bt.verticalTextFeatureIndex);const Ja=Bt.textBox;if(Ja){const Ui=Rn=>{let sn=l.ao.horizontal;if(_.allowVerticalPlacement&&!Rn&&this.prevPlacement){const Un=this.prevPlacement.placedOrientations[yt.crossTileID];Un&&(this.placedOrientations[yt.crossTileID]=Un,sn=Un,this.markUsedOrientation(_,sn,yt))}return sn},wo=(Rn,sn)=>{if(_.allowVerticalPlacement&&yt.numVerticalGlyphVertices>0&&Bt.verticalTextBox){for(const Un of _.writingModes)if(Un===l.ao.vertical?(pn=sn(),ai=pn):pn=Rn(),pn&&pn.placeable)break}else pn=Rn()},So=yt.textAnchorOffsetStartIndex,Si=yt.textAnchorOffsetEndIndex;if(Si===So){const Rn=(sn,Un)=>{const Tn=this.collisionIndex.placeCollisionBox(sn,ye,U,Qe,R,Ie,Ee,j,se.predicate,Je,void 0,Tt);return Tn&&Tn.placeable&&(this.markUsedOrientation(_,Un,yt),this.placedOrientations[yt.crossTileID]=Un),Tn};wo(()=>Rn(Ja,l.ao.horizontal),()=>{const sn=Bt.verticalTextBox;return _.allowVerticalPlacement&&yt.numVerticalGlyphVertices>0&&sn?Rn(sn,l.ao.vertical):{box:null,offscreen:null}}),Ui(pn&&pn.placeable)}else{let Rn=l.aE[(Wr=(Xr=this.prevPlacement)===null||Xr===void 0?void 0:Xr.variableOffsets[yt.crossTileID])===null||Wr===void 0?void 0:Wr.anchor];const sn=(Tn,Lh,eo)=>{const ta=Tn.x2-Tn.x1,mn=Tn.y2-Tn.y1,xa=yt.textBoxScale,Xo=we&&Ae==="never"?Lh:null;let Wo=null,Bh=ye==="never"?1:2,Fh="never";Rn&&Bh++;for(let ba=0;ba<Bh;ba++){for(let Lc=So;Lc<Si;Lc++){const $h=_.textAnchorOffsets.get(Lc);if(Rn&&$h.textAnchor!==Rn)continue;const Bc=this.attemptAnchorPlacement($h,Tn,ta,mn,xa,Ee,Ie,U,Qe,R,se,Fh,yt,_,eo,j,k,Xo,Je);if(Bc&&(Wo=Bc.placedGlyphBoxes,Wo&&Wo.placeable))return cn=!0,Tr=Bc.shift,Wo}Rn?Rn=null:Fh=ye}return p&&!Wo&&(Wo={box:this.collisionIndex.placeCollisionBox(Ja,"always",U,Qe,R,Ie,Ee,j,se.predicate,Je,void 0,Tt).box,offscreen:!1,placeable:!1,occluded:!1}),Wo};wo(()=>sn(Ja,Bt.iconBox,l.ao.horizontal),()=>{const Tn=Bt.verticalTextBox;return _.allowVerticalPlacement&&(!pn||!pn.placeable)&&yt.numVerticalGlyphVertices>0&&Tn?sn(Tn,Bt.verticalIconBox,l.ao.vertical):{box:null,occluded:!0,offscreen:null}}),pn&&(cn=pn.placeable,un=pn.offscreen);const Un=Ui(pn&&pn.placeable);if(!cn&&this.prevPlacement){const Tn=this.prevPlacement.variableOffsets[yt.crossTileID];Tn&&(this.variableOffsets[yt.crossTileID]=Tn,this.markUsedJustification(_,Tn.anchor,yt,Un))}}}if($n=pn,cn=$n&&$n.placeable,un=$n&&$n.offscreen,yt.useRuntimeCollisionCircles&&yt.centerJustifiedTextSymbolIndex>=0){const Ui=_.text.placedSymbolArray.get(yt.centerJustifiedTextSymbolIndex),wo=l.ap(_.textSizeData,Q,Ui),So=S.get("text-padding");qn=this.collisionIndex.placeCollisionCircles(ye,Ui,_.lineVertexArray,_.glyphOffsetArray,wo,R,$,p,Ie,se.predicate,yt.collisionCircleDiameter,So,j,Je),qn.circles.length&&qn.collisionDetected&&!p&&l.w("Collisions detected, but collision boxes are not shown"),cn=_e||qn.circles.length>0&&!qn.collisionDetected,un=un&&qn.offscreen}if(Bt.iconFeatureIndex&&(Ws=Bt.iconFeatureIndex),Bt.iconBox){const Ui=wo=>this.collisionIndex.placeCollisionBox(wo,Ae,U,Qe,R,Ie,Ee,k,se.predicate,Je,we&&Tr?Tr:void 0,Tt);ai&&ai.placeable&&Bt.verticalIconBox?(wi=Ui(Bt.verticalIconBox),Cn=wi.placeable):(wi=Ui(Bt.iconBox),Cn=wi.placeable),un=un&&wi.offscreen}const Ys=me||yt.numHorizontalGlyphVertices===0&&yt.numVerticalGlyphVertices===0,_s=pe||yt.numIconVertices===0;Ys||_s?_s?Ys||(Cn=Cn&&cn):cn=Cn&&cn:Cn=cn=Cn&&cn;const Na=Cn&&wi.placeable;if(cn&&$n.placeable&&this.collisionIndex.insertCollisionBox($n.box,ye,S.get("text-ignore-placement"),_.bucketInstanceId,ai&&ai.placeable&&Qa?Qa:vs,se.ID),Na&&this.collisionIndex.insertCollisionBox(wi.box,Ae,S.get("icon-ignore-placement"),_.bucketInstanceId,Ws,se.ID),qn&&cn&&this.collisionIndex.insertCollisionCircles(qn.circles,ye,S.get("text-ignore-placement"),_.bucketInstanceId,vs,se.ID),p&&this.storeCollisionData(_.bucketInstanceId,lr,Bt,$n,wi,qn),yt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[yt.crossTileID]=new yl((cn||it)&&!($n!=null&&$n.occluded),(Cn||Ye)&&!(wi!=null&&wi.occluded),un||_.justReloaded),u[yt.crossTileID]=!0};if(De){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const yt=_.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Bt=yt.length-1;Bt>=0;--Bt){const lr=yt[Bt];At(_.symbolInstances.get(lr),_.collisionArrays[lr],lr)}}else for(let yt=r.symbolInstanceStart;yt<r.symbolInstanceEnd;yt++)At(_.symbolInstances.get(yt),_.collisionArrays[yt],yt);_.justReloaded=!1}storeCollisionData(r,u,p,_,S,j){if(p.textBox||p.iconBox){let k,R;this.collisionBoxArrays.has(r)?k=this.collisionBoxArrays.get(r):(k=new Map,this.collisionBoxArrays.set(r,k)),k.has(u)?R=k.get(u):(R={text:null,icon:null},k.set(u,R)),p.textBox&&(R.text=_.box),p.iconBox&&(R.icon=S.box)}if(j){let k=this.collisionCircleArrays[r];k===void 0&&(k=this.collisionCircleArrays[r]=[]);for(let R=0;R<j.circles.length;R+=4)k.push(j.circles[R+0]-jn),k.push(j.circles[R+1]-jn),k.push(j.circles[R+2]),k.push(j.collisionDetected?1:0)}}markUsedJustification(r,u,p,_){let S;S=_===l.ao.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[l.aG(u)];const j=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const k of j)k>=0&&(r.text.placedSymbolArray.get(k).crossTileID=S>=0&&k!==S?0:p.crossTileID)}markUsedOrientation(r,u,p){const _=u===l.ao.horizontal||u===l.ao.horizontalOnly?u:0,S=u===l.ao.vertical?u:0,j=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const k of j)r.text.placedSymbolArray.get(k).placedOrientation=_;p.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=S)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const _=u?u.symbolFadeChange(r):1,S=u?u.opacities:{},j=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const R in this.placements){const $=this.placements[R],U=S[R];U?(this.opacities[R]=new gl(U,_,$.text,$.icon),p=p||$.text!==U.text.placed||$.icon!==U.icon.placed):(this.opacities[R]=new gl(null,_,$.text,$.icon,$.skipFade),p=p||$.text||$.icon)}for(const R in S){const $=S[R];if(!this.opacities[R]){const U=new gl($,_,!1,!1);U.isHidden()||(this.opacities[R]=U,p=p||$.text.placed||$.icon.placed)}}for(const R in j)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=j[R]);for(const R in k)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=k[R]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const p={};for(const _ of u){const S=_.getBucket(r);S&&_.latestFeatureIndex&&r.id===S.layerIds[0]&&this.updateBucketOpacities(S,_.tileID,p,_.collisionBoxArray)}}updateBucketOpacities(r,u,p,_){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const S=r.layers[0],j=S.layout,k=new gl(null,0,!1,!1,!0),R=j.get("text-allow-overlap"),$=j.get("icon-allow-overlap"),U=S._unevaluatedLayout.hasValue("text-variable-anchor")||S._unevaluatedLayout.hasValue("text-variable-anchor-offset"),X=j.get("text-rotation-alignment")==="map",Z=j.get("text-pitch-alignment")==="map",Q=j.get("icon-text-fit")!=="none",se=new gl(null,0,R&&($||!r.hasIconData()||j.get("icon-optional")),$&&(R||!r.hasTextData()||j.get("text-optional")),!0);!r.collisionArrays&&_&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(_);const me=(ye,_e,Ae)=>{for(let be=0;be<_e/4;be++)ye.opacityVertexArray.emplaceBack(Ae);ye.hasVisibleVertices=ye.hasVisibleVertices||Ae!==os},pe=this.collisionBoxArrays.get(r.bucketInstanceId);for(let ye=0;ye<r.symbolInstances.length;ye++){const _e=r.symbolInstances.get(ye),{numHorizontalGlyphVertices:Ae,numVerticalGlyphVertices:be,crossTileID:Ee}=_e;let Ie=this.opacities[Ee];p[Ee]?Ie=k:Ie||(Ie=se,this.opacities[Ee]=Ie),p[Ee]=!0;const we=_e.numIconVertices>0,De=this.placedOrientations[_e.crossTileID],it=De===l.ao.vertical,Ye=De===l.ao.horizontal||De===l.ao.horizontalOnly;if(Ae>0||be>0){const Je=ha(Ie.text);me(r.text,Ae,it?os:Je),me(r.text,be,Ye?os:Je);const Tt=Ie.text.isHidden();[_e.rightJustifiedTextSymbolIndex,_e.centerJustifiedTextSymbolIndex,_e.leftJustifiedTextSymbolIndex].forEach(Bt=>{Bt>=0&&(r.text.placedSymbolArray.get(Bt).hidden=Tt||it?1:0)}),_e.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(_e.verticalPlacedTextSymbolIndex).hidden=Tt||Ye?1:0);const At=this.variableOffsets[_e.crossTileID];At&&this.markUsedJustification(r,At.anchor,_e,De);const yt=this.placedOrientations[_e.crossTileID];yt&&(this.markUsedJustification(r,"left",_e,yt),this.markUsedOrientation(r,yt,_e))}if(we){const Je=ha(Ie.icon),Tt=!(Q&&_e.verticalPlacedIconSymbolIndex&&it);_e.placedIconSymbolIndex>=0&&(me(r.icon,_e.numIconVertices,Tt?Je:os),r.icon.placedSymbolArray.get(_e.placedIconSymbolIndex).hidden=Ie.icon.isHidden()),_e.verticalPlacedIconSymbolIndex>=0&&(me(r.icon,_e.numVerticalIconVertices,Tt?os:Je),r.icon.placedSymbolArray.get(_e.verticalPlacedIconSymbolIndex).hidden=Ie.icon.isHidden())}const Qe=pe&&pe.has(ye)?pe.get(ye):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Je=r.collisionArrays[ye];if(Je){let Tt=new l.P(0,0);if(Je.textBox||Je.verticalTextBox){let At=!0;if(U){const yt=this.variableOffsets[Ee];yt?(Tt=ho(yt.anchor,yt.width,yt.height,yt.textOffset,yt.textBoxScale),X&&Tt._rotate(Z?-this.transform.bearingInRadians:this.transform.bearingInRadians)):At=!1}if(Je.textBox||Je.verticalTextBox){let yt;Je.textBox&&(yt=it),Je.verticalTextBox&&(yt=Ye),oh(r.textCollisionBox.collisionVertexArray,Ie.text.placed,!At||yt,Qe.text,Tt.x,Tt.y)}}if(Je.iconBox||Je.verticalIconBox){const At=!!(!Ye&&Je.verticalIconBox);let yt;Je.iconBox&&(yt=At),Je.verticalIconBox&&(yt=!At),oh(r.iconCollisionBox.collisionVertexArray,Ie.icon.placed,yt,Qe.icon,Q?Tt.x:0,Q?Tt.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>r}setStale(){this.stale=!0}}function oh(b,r,u,p,_,S){p&&p.length!==0||(p=[0,0,0,0]);const j=p[0]-jn,k=p[1]-jn,R=p[2]-jn,$=p[3]-jn;b.emplaceBack(r?1:0,u?1:0,_||0,S||0,j,k),b.emplaceBack(r?1:0,u?1:0,_||0,S||0,R,k),b.emplaceBack(r?1:0,u?1:0,_||0,S||0,R,$),b.emplaceBack(r?1:0,u?1:0,_||0,S||0,j,$)}const ja=Math.pow(2,25),vl=Math.pow(2,24),Uf=Math.pow(2,17),sh=Math.pow(2,16),Vf=Math.pow(2,9),lh=Math.pow(2,8),Gf=Math.pow(2,1);function ha(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const r=b.placed?1:0,u=Math.floor(127*b.opacity);return u*ja+r*vl+u*Uf+r*sh+u*Vf+r*lh+u*Gf+r}const os=0;class ch{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,p,_,S){const j=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(j,_,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,j.sort((k,R)=>k.sortKey-R.sortKey));this._currentPartIndex<j.length;)if(u.placeLayerBucketPart(j[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,S())return!0;return!1}}class uh{constructor(r,u,p,_,S,j,k,R){this.placement=new qf(r,u,j,k,R),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(r,u,p){const _=L.now(),S=()=>!this._forceFullPlacement&&L.now()-_>2;for(;this._currentPlacementIndex>=0;){const j=u[r[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(j.type==="symbol"&&(!j.minzoom||j.minzoom<=k)&&(!j.maxzoom||j.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new ch(j)),this._inProgressLayer.continuePlacement(p[j.source],this.placement,this._showCollisionBoxes,j,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const qa=512/l.$/2;class hh{constructor(r,u,p){this.tileID=r,this.bucketInstanceId=p,this._symbolsByKey={};const _=new Map;for(let S=0;S<u.length;S++){const j=u.get(S),k=j.key,R=_.get(k);R?R.push(j):_.set(k,[j])}for(const[S,j]of _){const k={positions:j.map(R=>({x:Math.floor(R.anchorX*qa),y:Math.floor(R.anchorY*qa)})),crossTileIDs:j.map(R=>R.crossTileID)};if(k.positions.length>128){const R=new l.aI(k.positions.length,16,Uint16Array);for(const{x:$,y:U}of k.positions)R.add($,U);R.finish(),delete k.positions,k.index=R}this._symbolsByKey[S]=k}}getScaledCoordinates(r,u){const{x:p,y:_,z:S}=this.tileID.canonical,{x:j,y:k,z:R}=u.canonical,$=qa/Math.pow(2,R-S),U=(k*l.$+r.anchorY)*$,X=_*l.$*qa;return{x:Math.floor((j*l.$+r.anchorX)*$-p*l.$*qa),y:Math.floor(U-X)}}findMatches(r,u,p){const _=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let S=0;S<r.length;S++){const j=r.get(S);if(j.crossTileID)continue;const k=this._symbolsByKey[j.key];if(!k)continue;const R=this.getScaledCoordinates(j,u);if(k.index){const $=k.index.range(R.x-_,R.y-_,R.x+_,R.y+_).sort();for(const U of $){const X=k.crossTileIDs[U];if(!p[X]){p[X]=!0,j.crossTileID=X;break}}}else if(k.positions)for(let $=0;$<k.positions.length;$++){const U=k.positions[$],X=k.crossTileIDs[$];if(Math.abs(U.x-R.x)<=_&&Math.abs(U.y-R.y)<=_&&!p[X]){p[X]=!0,j.crossTileID=X;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Zf{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ko{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const p in this.indexes){const _=this.indexes[p],S={};for(const j in _){const k=_[j];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),S[k.tileID.key]=k}this.indexes[p]=S}this.lng=r}addBucket(r,u,p){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let S=0;S<u.symbolInstances.length;S++)u.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const _=this.usedCrossTileIDs[r.overscaledZ];for(const S in this.indexes){const j=this.indexes[S];if(Number(S)>r.overscaledZ)for(const k in j){const R=j[k];R.tileID.isChildOf(r)&&R.findMatches(u.symbolInstances,r,_)}else{const k=j[r.scaledTo(Number(S)).key];k&&k.findMatches(u.symbolInstances,r,_)}}for(let S=0;S<u.symbolInstances.length;S++){const j=u.symbolInstances.get(S);j.crossTileID||(j.crossTileID=p.generate(),_[j.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new hh(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const p of u.getCrossTileIDsLists())for(const _ of p)delete this.usedCrossTileIDs[r][_]}removeStaleBuckets(r){let u=!1;for(const p in this.indexes){const _=this.indexes[p];for(const S in _)r[_[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,_[S]),delete _[S],u=!0)}return u}}class nu{constructor(){this.layerIndexes={},this.crossTileIDs=new Zf,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,p){let _=this.layerIndexes[r.id];_===void 0&&(_=this.layerIndexes[r.id]=new ko);let S=!1;const j={};_.handleWrapJump(p);for(const k of u){const R=k.getBucket(r);R&&r.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(k.tileID,R,this.crossTileIDs)&&(S=!0),j[R.bucketInstanceId]=!0)}return _.removeStaleBuckets(j)&&(S=!0),S}pruneUnusedLayers(r){const u={};r.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}var dh="void main() {fragColor=vec4(1.0);}";const zi={prelude:jr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:jr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:jr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:jr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:jr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:jr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:jr(dh,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:jr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:jr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:jr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:jr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:jr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:jr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:jr(dh,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:jr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:jr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:jr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:jr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:jr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:jr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:jr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:jr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:jr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:jr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:jr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:jr(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:jr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:jr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:jr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:jr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:jr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:jr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:jr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:jr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:jr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:jr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:jr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function jr(b,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=r.match(/in ([\w]+) ([\w]+)/g),_=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),j=S?S.concat(_):_,k={};return{fragmentSource:b=b.replace(u,(R,$,U,X,Z)=>(k[Z]=!0,$==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
in ${U} ${X} ${Z};
#else
uniform ${U} ${X} u_${Z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Z}
    ${U} ${X} ${Z} = u_${Z};
#endif
`)),vertexSource:r=r.replace(u,(R,$,U,X,Z)=>{const Q=X==="float"?"vec2":"vec4",se=Z.match(/color/)?"color":Q;return k[Z]?$==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${U} ${Q} a_${Z};
out ${U} ${X} ${Z};
#else
uniform ${U} ${X} u_${Z};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${U} ${X} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${se}(a_${Z}, u_${Z}_t);
#else
    ${U} ${X} ${Z} = u_${Z};
#endif
`:$==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${U} ${Q} a_${Z};
#else
uniform ${U} ${X} u_${Z};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${U} ${X} ${Z} = a_${Z};
#else
    ${U} ${X} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${U} ${X} ${Z} = unpack_mix_${se}(a_${Z}, u_${Z}_t);
#else
    ${U} ${X} ${Z} = u_${Z};
#endif
`}),staticAttributes:p,staticUniforms:j}}class gc{constructor(r,u,p){this.vertexBuffer=r,this.indexBuffer=u,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ki=l.aJ([{name:"a_pos",type:"Int16",components:2}]);const No="#define PROJECTION_MERCATOR",xr="mercator";class _l{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return xr}get shaderDefine(){return No}get shaderPreludeCode(){return zi.projectionMercator}get vertexShaderPreludeCode(){return zi.projectionMercator.vertexSource}get subdivisionGranularity(){return l.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,u,p,_,S){if(this._cachedMesh)return this._cachedMesh;const j=new l.aL;j.emplaceBack(0,0),j.emplaceBack(l.$,0),j.emplaceBack(0,l.$),j.emplaceBack(l.$,l.$);const k=r.createVertexBuffer(j,Ki.members),R=l.aM.simpleSegment(0,0,4,2),$=new l.aN;$.emplaceBack(1,0,2),$.emplaceBack(1,2,3);const U=r.createIndexBuffer($);return this._cachedMesh=new gc(k,U,R),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class Ro{constructor(r=0,u=0,p=0,_=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=p,this.right=_}interpolate(r,u,p){return u.top!=null&&r.top!=null&&(this.top=l.C.number(r.top,u.top,p)),u.bottom!=null&&r.bottom!=null&&(this.bottom=l.C.number(r.bottom,u.bottom,p)),u.left!=null&&r.left!=null&&(this.left=l.C.number(r.left,u.left,p)),u.right!=null&&r.right!=null&&(this.right=l.C.number(r.right,u.right,p)),this}getCenter(r,u){const p=l.ah((this.left+r-this.right)/2,0,r),_=l.ah((this.top+u-this.bottom)/2,0,u);return new l.P(p,_)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Ro(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function fo(b,r){if(!b.renderWorldCopies||b.lngRange)return;const u=r.lng-b.center.lng;r.lng+=u>180?-360:u<-180?360:0}function Qi(b){return Math.max(0,Math.floor(b))}class hi{constructor(r,u,p,_,S,j){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=j===void 0||!!j,this._minZoom=u||0,this._maxZoom=p||22,this._minPitch=_??0,this._maxPitch=S??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new l.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Qi(this._zoom),this._scale=l.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ro,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,u,p){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=Qi(this._zoom),this._scale=l.af(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new Ro(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!p&&r.autoCalculateNearFarZ,u&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const u=l.aO(r,-180,180)*Math.PI/180;var p,_,S,j,k,R,$,U,X;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=E(),p=this._rotationMatrix,S=-this._bearingInRadians,j=(_=this._rotationMatrix)[0],k=_[1],R=_[2],$=_[3],U=Math.sin(S),X=Math.cos(S),p[0]=j*X+R*U,p[1]=k*X+$*U,p[2]=j*-U+R*X,p[3]=k*-U+$*X)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const u=l.ah(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const u=r/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return l.aP(this._fovInRadians)}setFov(r){r=l.ah(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=l.ae(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const u=this.getConstrained(this._center,r).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=l.af(u),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,u){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,p){this._unmodified=!1,this._edgeInsets.interpolate(r,u,p),this._constrain(),this._calcMatrices()}resize(r,u,p=!0){this._width=r,this._height=u,p&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new fr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-l.ai,l.ai])}getConstrained(r,u){return this._callbacks.getConstrained(r,u)}getCameraQueryGeometry(r,u){if(u.length===1)return[u[0],r];{const{minX:p,minY:_,maxX:S,maxY:j}=l.a2.fromPoints(u).extend(r);return[new l.P(p,_),new l.P(S,_),new l.P(S,j),new l.P(p,j),new l.P(p,_)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:u,zoom:p}=this.getConstrained(this.center,this.zoom);this.setCenter(u),this.setZoom(p),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=l.ag(new Float64Array(16));l.N(r,r,[this._width/2,-this._height/2,1]),l.M(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=l.ag(new Float64Array(16)),l.N(r,r,[1,-1,1]),l.M(r,r,[-1,-1,0]),l.N(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,u,p,_){const S=p!==void 0?p:this.bearing,j=_=_!==void 0?_:this.pitch,k=l.a1.fromLngLat(r,u),R=-Math.cos(l.ae(j)),$=Math.sin(l.ae(j)),U=$*Math.sin(l.ae(S)),X=-$*Math.cos(l.ae(S));let Z=this.elevation;const Q=u-Z;let se;R*Q>=0||Math.abs(R)<.1?(se=1e4,Z=u+se*R):se=-Q/R;let me,pe,ye=l.aQ(1,k.y),_e=0;do{if(_e+=1,_e>10)break;pe=se/ye,me=new l.a1(k.x+U*pe,k.y+X*pe),ye=1/me.meterInMercatorCoordinateUnits()}while(Math.abs(se-pe*ye)>1e-12);return{center:me.toLngLat(),elevation:Z,zoom:l.ak(this.height/2/Math.tan(this.fovInRadians/2)/pe/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const u=l.aj(1,this.center.lat)*this.worldSize,p=this.cameraToCenterDistance/u,_=l.a1.fromLngLat(this.center,this.elevation),S=ht(this.center,this.elevation,this.pitch,this.bearing,p);this._elevation=r;const j=this.calculateCenterFromCameraLngLatAlt(S.toLngLat(),l.aQ(S.z,_.y),this.bearing,this.pitch);this._elevation=j.elevation,this._center=j.center,this.setZoom(j.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=l.aj(1,this.center.lat)*this.worldSize;return ht(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const u=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/u,r.canonical.y/u,1/u/l.$,1/u/l.$]}}class di{constructor(r,u){this.min=r,this.max=u,this.center=l.aR([],l.aS([],this.min,this.max),.5)}quadrant(r){const u=[r%2==0,r<2],p=l.aT(this.min),_=l.aT(this.max);for(let S=0;S<u.length;S++)p[S]=u[S]?this.min[S]:this.center[S],_[S]=u[S]?this.center[S]:this.max[S];return _[2]=this.max[2],new di(p,_)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let u=!0;for(let p=0;p<r.planes.length;p++){const _=this.intersectsPlane(r.planes[p]);if(_===0)return 0;_===1&&(u=!1)}return u?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let u=r[3],p=r[3];for(let _=0;_<3;_++)r[_]>0?(u+=r[_]*this.min[_],p+=r[_]*this.max[_]):(p+=r[_]*this.min[_],u+=r[_]*this.max[_]);return u>=0?2:p<0?0:1}}class Kn{distanceToTile2d(r,u,p,_){const S=_.distanceX([r,u]),j=_.distanceY([r,u]);return Math.hypot(S,j)}getWrap(r,u,p){return p}getTileBoundingVolume(r,u,p,_){var S,j;let k=0,R=0;if(_!=null&&_.terrain){const U=new l.Z(r.z,u,r.z,r.x,r.y),X=_.terrain.getMinMaxElevation(U);k=(S=X.minElevation)!==null&&S!==void 0?S:Math.min(0,p),R=(j=X.maxElevation)!==null&&j!==void 0?j:Math.max(0,p)}const $=1<<r.z;return new di([u+r.x/$,r.y/$,k],[u+(r.x+1)/$,(r.y+1)/$,R])}allowVariableZoom(r,u){const p=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,_=l.ah(78.5-p/2,0,60);return!!u.terrain||r.pitch>_}allowWorldCopies(){return!0}prepareNextFrame(){}}class Fr{constructor(r,u,p){this.points=r,this.planes=u,this.aabb=p}static fromInvProjectionMatrix(r,u=1,p=0,_,S){const j=S?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],k=Math.pow(2,p),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Z=>function(Q,se,me,pe){const ye=l.aw([],Q,se),_e=1/ye[3]/me*pe;return l.aY(ye,ye,[_e,_e,1/ye[3],_e])}(Z,r,u,k));_&&function(Z,Q,se,me){const pe=me?4:0,ye=me?0:4;let _e=0;const Ae=[],be=[];for(let we=0;we<4;we++){const De=l.aU([],Z[we+ye],Z[we+pe]),it=l.aZ(De);l.aR(De,De,1/it),Ae.push(it),be.push(De)}for(let we=0;we<4;we++){const De=l.a_(Z[we+pe],be[we],se);_e=De!==null&&De>=0?Math.max(_e,De):Math.max(_e,Ae[we])}const Ee=function(we,De){const it=l.aU([],we[De[0]],we[De[1]]),Ye=l.aU([],we[De[2]],we[De[1]]),Qe=[0,0,0,0];return l.aV(Qe,l.aW([],it,Ye)),Qe[3]=-l.aX(Qe,we[De[0]]),Qe}(Z,Q),Ie=function(we,De){const it=l.a$(we),Ye=l.b0([],we,1/it),Qe=l.aU([],De,l.aR([],Ye,l.aX(De,Ye))),Je=l.a$(Qe);if(Je>0){const Tt=Math.sqrt(1-Ye[3]*Ye[3]),At=l.aR([],Ye,-Ye[3]),yt=l.aS([],At,l.aR([],Qe,Tt/Je));return l.b1(De,yt)}return null}(se,Ee);if(Ie!==null){const we=Ie/l.aX(be[0],Ee);_e=Math.min(_e,we)}for(let we=0;we<4;we++){const De=Math.min(_e,Ae[we]);Z[we+ye]=[Z[we+pe][0]+be[we][0]*De,Z[we+pe][1]+be[we][1]*De,Z[we+pe][2]+be[we][2]*De,1]}}(R,j[0],_,S);const $=j.map(Z=>{const Q=l.aU([],R[Z[0]],R[Z[1]]),se=l.aU([],R[Z[2]],R[Z[1]]),me=l.aV([],l.aW([],Q,se)),pe=-l.aX(me,R[Z[1]]);return me.concat(pe)}),U=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],X=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Z of R)for(let Q=0;Q<3;Q++)U[Q]=Math.min(U[Q],Z[Q]),X[Q]=Math.max(X[Q],Z[Q]);return new Fr(R,$,new di(U,X))}}class Cs{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,u,p){return this._helper.interpolatePadding(r,u,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,u,p=!0){this._helper.resize(r,u,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,u){this._helper.overrideNearFarZ(r,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,u){}constructor(r,u,p,_,S){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new hi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(j,k)=>this.getConstrained(j,k)},r,u,p,_,S),this._coveringTilesDetailsProvider=new Kn}clone(){const r=new Cs;return r.apply(this),r}apply(r,u,p){this._helper.apply(r,u,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const u=[new l.b2(0,r)];if(this._helper._renderWorldCopies){const p=this.screenPointToMercatorCoordinate(new l.P(0,0)),_=this.screenPointToMercatorCoordinate(new l.P(this._helper._width,0)),S=this.screenPointToMercatorCoordinate(new l.P(this._helper._width,this._helper._height)),j=this.screenPointToMercatorCoordinate(new l.P(0,this._helper._height)),k=Math.floor(Math.min(p.x,_.x,S.x,j.x)),R=Math.floor(Math.max(p.x,_.x,S.x,j.x)),$=1;for(let U=k-$;U<=R+$;U++)U!==0&&u.push(new l.b2(U,r))}return u}getCameraFrustum(){return Fr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const u=this.screenPointToLocation(this.centerPoint,r),p=r?r.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(r,u){const p=l.aj(this.elevation,this.center.lat),_=this.screenPointToMercatorCoordinateAtZ(u,p),S=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),j=l.a1.fromLngLat(r),k=new l.a1(j.x-(_.x-S.x),j.y-(_.y-S.y));this.setCenter(k==null?void 0:k.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,u){return u?this.coordinatePoint(l.a1.fromLngLat(r),u.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(l.a1.fromLngLat(r))}screenPointToLocation(r,u){var p;return(p=this.screenPointToMercatorCoordinate(r,u))===null||p===void 0?void 0:p.toLngLat()}screenPointToMercatorCoordinate(r,u){if(u){const p=u.pointCoordinate(r);if(p!=null)return p}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,u){const p=u||0,_=[r.x,r.y,0,1],S=[r.x,r.y,1,1];l.aw(_,_,this._pixelMatrixInverse),l.aw(S,S,this._pixelMatrixInverse);const j=_[3],k=S[3],R=_[1]/j,$=S[1]/k,U=_[2]/j,X=S[2]/k,Z=U===X?0:(p-U)/(X-U);return new l.a1(l.C.number(_[0]/j,S[0]/k,Z)/this.worldSize,l.C.number(R,$,Z)/this.worldSize,p)}coordinatePoint(r,u=0,p=this._pixelMatrix){const _=[r.x*this.worldSize,r.y*this.worldSize,u,1];return l.aw(_,_,p),new l.P(_[0]/_[3],_[1]/_[3])}getBounds(){const r=Math.max(0,this._helper._height/2-Xe(this));return new fr().extend(this.screenPointToLocation(new l.P(0,r))).extend(this.screenPointToLocation(new l.P(this._helper._width,r))).extend(this.screenPointToLocation(new l.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new l.P(0,this._helper._height)))}isPointOnMapSurface(r,u){return u?u.pointCoordinate(r)!=null:r.y>this.height/2-Xe(this)}calculatePosMatrix(r,u=!1,p){var _;const S=(_=r.key)!==null&&_!==void 0?_:l.b3(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),j=u?this._alignedPosMatrixCache:this._posMatrixCache;if(j.has(S)){const $=j.get(S);return p?$.f32:$.f64}const k=Le(r,this.worldSize);l.O(k,u?this._alignedProjMatrix:this._viewProjMatrix,k);const R={f64:k,f32:new Float32Array(k)};return j.set(S,R),p?R.f32:R.f64}calculateFogMatrix(r){const u=r.key,p=this._fogMatrixCacheF32;if(p.has(u))return p.get(u);const _=Le(r,this.worldSize);return l.O(_,this._fogMatrix,_),p.set(u,new Float32Array(_)),p.get(u)}getConstrained(r,u){u=l.ah(+u,this.minZoom,this.maxZoom);const p={center:new l.S(r.lng,r.lat),zoom:u};let _=this._helper._lngRange;!this._helper._renderWorldCopies&&_===null&&(_=[-179.9999999999,179.9999999999]);const S=this.tileSize*l.af(p.zoom);let j=0,k=S,R=0,$=S,U=0,X=0;const{x:Z,y:Q}=this.size;if(this._helper._latRange){const Ae=this._helper._latRange;j=l.U(Ae[1])*S,k=l.U(Ae[0])*S,k-j<Q&&(U=Q/(k-j))}_&&(R=l.aO(l.V(_[0])*S,0,S),$=l.aO(l.V(_[1])*S,0,S),$<R&&($+=S),$-R<Z&&(X=Z/($-R)));const{x:se,y:me}=Pe(S,r);let pe,ye;const _e=Math.max(X||0,U||0);if(_e){const Ae=new l.P(X?($+R)/2:se,U?(k+j)/2:me);return p.center=Re(S,Ae).wrap(),p.zoom+=l.ak(_e),p}if(this._helper._latRange){const Ae=Q/2;me-Ae<j&&(ye=j+Ae),me+Ae>k&&(ye=k-Ae)}if(_){const Ae=(R+$)/2;let be=se;this._helper._renderWorldCopies&&(be=l.aO(se,Ae-S/2,Ae+S/2));const Ee=Z/2;be-Ee<R&&(pe=R+Ee),be+Ee>$&&(pe=$-Ee)}if(pe!==void 0||ye!==void 0){const Ae=new l.P(pe??se,ye??me);p.center=Re(S,Ae).wrap()}return p}calculateCenterFromCameraLngLatAlt(r,u,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(r,u,p,_)}_calculateNearFarZIfNeeded(r,u,p){if(!this._helper.autoCalculateNearFarZ)return;const _=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),S=r-_*this._helper._pixelPerMeter/Math.cos(u),j=_<0?S:r,k=Math.PI/2+this.pitchInRadians,R=l.ae(this.fov)*(Math.abs(Math.cos(l.ae(this.roll)))*this.height+Math.abs(Math.sin(l.ae(this.roll)))*this.width)/this.height*(.5+p.y/this.height),$=Math.sin(R)*j/Math.sin(l.ah(Math.PI-k-R,.01,Math.PI-.01)),U=Xe(this),X=Math.atan(U/this._helper.cameraToCenterDistance),Z=l.ae(.75),Q=X>Z?2*X*(.5+p.y/(2*U)):Z,se=Math.sin(Q)*j/Math.sin(l.ah(Math.PI-k-Q,.01,Math.PI-.01)),me=Math.min($,se);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*me+j),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,u=Pe(this.worldSize,this.center),p=u.x,_=u.y;this._helper._pixelPerMeter=l.aj(1,this.center.lat)*this.worldSize;const S=l.ae(Math.min(this.pitch,Se)),j=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(S));let k;this._calculateNearFarZIfNeeded(j,S,r),k=new Float64Array(16),l.b4(k,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),l.aq(this._invProjMatrix,k),k[8]=2*-r.x/this._helper._width,k[9]=2*r.y/this._helper._height,this._projectionMatrix=l.b5(k),l.N(k,k,[1,-1,1]),l.M(k,k,[0,0,-this._helper.cameraToCenterDistance]),l.b6(k,k,-this.rollInRadians),l.b7(k,k,this.pitchInRadians),l.b6(k,k,-this.bearingInRadians),l.M(k,k,[-p,-_,0]),this._mercatorMatrix=l.N([],k,[this.worldSize,this.worldSize,this.worldSize]),l.N(k,k,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=l.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,k),l.M(k,k,[0,0,-this.elevation]),this._viewProjMatrix=k,this._invViewProjMatrix=l.aq([],k);const R=[0,0,-1,1];l.aw(R,R,this._invViewProjMatrix),this._cameraPosition=[R[0]/R[3],R[1]/R[3],R[2]/R[3]],this._fogMatrix=new Float64Array(16),l.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,j,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,l.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),l.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),l.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),l.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),l.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),l.M(this._fogMatrix,this._fogMatrix,[-p,-_,0]),l.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),l.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=l.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,k);const $=this._helper._width%2/2,U=this._helper._height%2/2,X=Math.cos(this.bearingInRadians),Z=Math.sin(-this.bearingInRadians),Q=p-Math.round(p)+X*$+Z*U,se=_-Math.round(_)+X*U+Z*$,me=new Float64Array(k);if(l.M(me,me,[Q>.5?Q-1:Q,se>.5?se-1:se,0]),this._alignedProjMatrix=me,k=l.aq(new Float64Array(16),this._pixelMatrix),!k)throw new Error("failed to invert matrix");this._pixelMatrixInverse=k,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new l.P(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.aw(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=l.aj(1,this.center.lat)*this.worldSize;return ht(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,u){const p=l.a1.fromLngLat(r),_=[p.x*this.worldSize,p.y*this.worldSize,u,1];return l.aw(_,_,this._viewProjMatrix),_[2]/_[3]}getProjectionData(r){const{overscaledTileID:u,aligned:p,applyTerrainMatrix:_}=r,S=this._helper.getMercatorTileCoordinates(u),j=u?this.calculatePosMatrix(u,p,!0):null;let k;return k=u&&u.terrainRttPosMatrix32f&&_?u.terrainRttPosMatrix32f:j||l.b8(),{mainMatrix:k,tileMercatorCoords:S,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:k}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,u,p){return 1}transformLightDirection(r){return l.aT(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,u,p,_){const S=this.calculatePosMatrix(p);let j;_?(j=[r,u,_(r,u),1],l.aw(j,j,S)):(j=[r,u,0,1],ml(j,j,S));const k=j[3];return{point:new l.P(j[0]/k,j[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}populateCache(r){for(const u of r)this.calculatePosMatrix(u)}getMatrixForModel(r,u){const p=l.a1.fromLngLat(r,u),_=p.meterInMercatorCoordinateUnits(),S=l.b9();return l.M(S,S,[p.x,p.y,p.z]),l.b6(S,S,Math.PI),l.b7(S,S,Math.PI/2),l.N(S,S,[-_,_,_]),S}getProjectionDataForCustomLayer(r=!0){const u=new l.Z(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:r}),_=Le(u,this.worldSize);l.O(_,this._viewProjMatrix,_),p.tileMercatorCoords=[0,0,1,1];const S=[l.$,l.$,this.worldSize/this._helper.pixelsPerMeter],j=l.ba();return l.N(j,_,S),p.fallbackMatrix=j,p.mainMatrix=j,p}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function fi(){l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ti(b){if(b.useSlerp)if(b.k<1){const r=l.bb(b.startEulerAngles.roll,b.startEulerAngles.pitch,b.startEulerAngles.bearing),u=l.bb(b.endEulerAngles.roll,b.endEulerAngles.pitch,b.endEulerAngles.bearing),p=new Float64Array(4);l.bc(p,r,u,b.k);const _=l.bd(p);b.tr.setRoll(_.roll),b.tr.setPitch(_.pitch),b.tr.setBearing(_.bearing)}else b.tr.setRoll(b.endEulerAngles.roll),b.tr.setPitch(b.endEulerAngles.pitch),b.tr.setBearing(b.endEulerAngles.bearing);else b.tr.setRoll(l.C.number(b.startEulerAngles.roll,b.endEulerAngles.roll,b.k)),b.tr.setPitch(l.C.number(b.startEulerAngles.pitch,b.endEulerAngles.pitch,b.k)),b.tr.setBearing(l.C.number(b.startEulerAngles.bearing,b.endEulerAngles.bearing,b.k))}function Li(b,r,u,p,_){const S=_.padding,j=Pe(_.worldSize,u.getNorthWest()),k=Pe(_.worldSize,u.getNorthEast()),R=Pe(_.worldSize,u.getSouthEast()),$=Pe(_.worldSize,u.getSouthWest()),U=l.ae(-p),X=j.rotate(U),Z=k.rotate(U),Q=R.rotate(U),se=$.rotate(U),me=new l.P(Math.max(X.x,Z.x,se.x,Q.x),Math.max(X.y,Z.y,se.y,Q.y)),pe=new l.P(Math.min(X.x,Z.x,se.x,Q.x),Math.min(X.y,Z.y,se.y,Q.y)),ye=me.sub(pe),_e=(_.width-(S.left+S.right+r.left+r.right))/ye.x,Ae=(_.height-(S.top+S.bottom+r.top+r.bottom))/ye.y;if(Ae<0||_e<0)return void fi();const be=Math.min(l.ak(_.scale*Math.min(_e,Ae)),b.maxZoom),Ee=l.P.convert(b.offset),Ie=new l.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(l.ae(p)),we=Ee.add(Ie).mult(_.scale/l.af(be));return{center:Re(_.worldSize,j.add(R).div(2).sub(we)),zoom:be,bearing:p}}class Os{get useGlobeControls(){return!1}handlePanInertia(r,u){const p=r.mag(),_=Math.abs(Xe(u));return{easingOffset:r.mult(Math.min(.75*_/p,1)),easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(r,u){r.bearingDelta&&u.setBearing(u.bearing+r.bearingDelta),r.pitchDelta&&u.setPitch(u.pitch+r.pitchDelta),r.rollDelta&&u.setRoll(u.roll+r.rollDelta),r.zoomDelta&&u.setZoom(u.zoom+r.zoomDelta)}handleMapControlsPan(r,u,p){r.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(p,r.around)}cameraForBoxAndBearing(r,u,p,_,S){return Li(r,u,p,_,S)}handleJumpToCenterZoom(r,u){r.zoom!==(u.zoom!==void 0?+u.zoom:r.zoom)&&r.setZoom(+u.zoom),u.center!==void 0&&r.setCenter(l.S.convert(u.center))}handleEaseTo(r,u){const p=r.zoom,_=r.padding,S={roll:r.roll,pitch:r.pitch,bearing:r.bearing},j={roll:u.roll===void 0?r.roll:u.roll,pitch:u.pitch===void 0?r.pitch:u.pitch,bearing:u.bearing===void 0?r.bearing:u.bearing},k=u.zoom!==void 0,R=!r.isPaddingEqual(u.padding);let $=!1;const U=k?+u.zoom:r.zoom;let X=r.centerPoint.add(u.offsetAsPoint);const Z=r.screenPointToLocation(X),{center:Q,zoom:se}=r.getConstrained(l.S.convert(u.center||Z),U??p);fo(r,Q);const me=Pe(r.worldSize,Z),pe=Pe(r.worldSize,Q).sub(me),ye=l.af(se-p);return $=se!==p,{easeFunc:_e=>{if($&&r.setZoom(l.C.number(p,se,_e)),l.be(S,j)||ti({startEulerAngles:S,endEulerAngles:j,tr:r,k:_e,useSlerp:S.roll!=j.roll}),R&&(r.interpolatePadding(_,u.padding,_e),X=r.centerPoint.add(u.offsetAsPoint)),u.around)r.setLocationAtPoint(u.around,u.aroundPoint);else{const Ae=l.af(r.zoom-p),be=se>p?Math.min(2,ye):Math.max(.5,ye),Ee=Math.pow(be,1-_e),Ie=Re(r.worldSize,me.add(pe.mult(_e*Ee)).mult(Ae));r.setLocationAtPoint(r.renderWorldCopies?Ie.wrap():Ie,X)}},isZooming:$,elevationCenter:Q}}handleFlyTo(r,u){const p=u.zoom!==void 0,_=r.zoom,S=r.getConstrained(l.S.convert(u.center||u.locationAtOffset),p?+u.zoom:_),j=S.center,k=S.zoom;fo(r,j);const R=Pe(r.worldSize,u.locationAtOffset),$=Pe(r.worldSize,j).sub(R),U=$.mag(),X=l.af(k-_);let Z;if(u.minZoom!==void 0){const Q=Math.min(+u.minZoom,_,k),se=r.getConstrained(j,Q).zoom;Z=l.af(se-_)}return{easeFunc:(Q,se,me,pe)=>{r.setZoom(Q===1?k:_+l.ak(se));const ye=Q===1?j:Re(r.worldSize,R.add($.mult(me)).mult(se));r.setLocationAtPoint(r.renderWorldCopies?ye.wrap():ye,pe)},scaleOfZoom:X,targetCenter:j,scaleOfMinZoom:Z,pixelPathLength:U}}}class nn{constructor(r,u,p){this.blendFunction=r,this.blendColor=u,this.mask=p}}nn.Replace=[1,0],nn.disabled=new nn(nn.Replace,l.bf.transparent,[!1,!1,!1,!1]),nn.unblended=new nn(nn.Replace,l.bf.transparent,[!0,!0,!0,!0]),nn.alphaBlended=new nn([1,771],l.bf.transparent,[!0,!0,!0,!0]);const vn=2305;class br{constructor(r,u,p){this.enable=r,this.mode=u,this.frontFace=p}}br.disabled=new br(!1,1029,vn),br.backCCW=new br(!0,1029,vn),br.frontCCW=new br(!0,1028,vn);class ur{constructor(r,u,p){this.func=r,this.mask=u,this.range=p}}ur.ReadOnly=!1,ur.ReadWrite=!0,ur.disabled=new ur(519,ur.ReadOnly,[0,1]);const pi=7680;class hr{constructor(r,u,p,_,S,j){this.test=r,this.ref=u,this.mask=p,this.fail=_,this.depthFail=S,this.pass=j}}hr.disabled=new hr({func:519,mask:0},0,0,pi,pi,pi);const xl=new WeakMap;function ri(b){var r;if(xl.has(b))return xl.get(b);{const u=(r=b.getParameter(b.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return xl.set(b,u),u}}class wd{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const u=r.context,p=u.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;const _=new l.aL;_.emplaceBack(-1,-1),_.emplaceBack(2,-1),_.emplaceBack(-1,2);const S=new l.aN;S.emplaceBack(0,1,2),this._fullscreenTriangle=new gc(u.createVertexBuffer(_,Ki.members),u.createIndexBuffer(S),l.aM.simpleSegment(0,0,_.length,S.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(p.TEXTURE1);const j=p.createTexture();p.bindTexture(p.TEXTURE_2D,j),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(j),ri(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,u){const p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,u),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,u=r.gl;r.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,u){const p=this._cachedRenderContext.context,_=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:l.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,_.TRIANGLES,ur.disabled,hr.disabled,nn.unblended,br.disabled,((S,j)=>({u_input:S,u_output_expected:j}))(r,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ri(_)){_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.readBuffer(_.COLOR_ATTACHMENT0),_.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),_.bindBuffer(_.PIXEL_PACK_BUFFER,null);const S=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);_.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:S}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ri(r)){const u=r.clientWaitSync(this._readbackQueue.sync,0,0);if(u===r.WAIT_FAILED)return l.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=wd._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let u=0;return u+=r[0]/256,u+=r[1]/65536,u+=r[2]/16777216,r[3]<127&&(u=-u),u/128}}const bl=l.$/128;function wl(b,r){const u=b.granularity!==void 0?Math.max(b.granularity,1):1,p=u+(b.generateBorders?2:0),_=u+(b.extendToNorthPole||b.generateBorders?1:0)+(b.extendToSouthPole||b.generateBorders?1:0),S=p+1,j=_+1,k=b.generateBorders?-1:0,R=b.generateBorders||b.extendToNorthPole?-1:0,$=u+(b.generateBorders?1:0),U=u+(b.generateBorders||b.extendToSouthPole?1:0),X=S*j,Z=p*_*6,Q=S*j>65536;if(Q&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const se=Q||r==="32bit",me=new Int16Array(2*X);let pe=0;for(let Ae=R;Ae<=U;Ae++)for(let be=k;be<=$;be++){let Ee=be/u*l.$;be===-1&&(Ee=-bl),be===u+1&&(Ee=l.$+bl);let Ie=Ae/u*l.$;Ae===-1&&(Ie=b.extendToNorthPole?l.bh:-bl),Ae===u+1&&(Ie=b.extendToSouthPole?l.bi:l.$+bl),me[pe++]=Ee,me[pe++]=Ie}const ye=se?new Uint32Array(Z):new Uint16Array(Z);let _e=0;for(let Ae=0;Ae<_;Ae++)for(let be=0;be<p;be++){const Ee=be+1+Ae*S,Ie=be+(Ae+1)*S,we=be+1+(Ae+1)*S;ye[_e++]=be+Ae*S,ye[_e++]=Ie,ye[_e++]=Ee,ye[_e++]=Ee,ye[_e++]=Ie,ye[_e++]=we}return{vertices:me.buffer.slice(0),indices:ye.buffer.slice(0),uses32bitIndices:se}}const Do=new l.aK({fill:new l.bj(128,2),line:new l.bj(512,0),tile:new l.bj(128,32),stencil:new l.bj(128,1),circle:3});class Is{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return zi.projectionGlobe}get vertexShaderPreludeCode(){return zi.projectionMercator.vertexSource}get subdivisionGranularity(){return Do}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new wd(r));const u=l.U(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,_=this._errorMeasurement.updateErrorLoop(u,p),S=L.now();_!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=_,this._errorMeasurementLastChangeTime=S);const j=Math.min(Math.max((S-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=l.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,l.bl(j))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,u,p,_,S){const j=(S==="stencil"?Do.stencil:Do.tile).getGranularityForZoomLevel(u.z);return this._getMesh(r,{granularity:j,generateBorders:p,extendToNorthPole:u.y===0&&_,extendToSouthPole:u.y===(1<<u.z)-1&&_})}_getMesh(r,u){const p=this._getMeshKey(u);if(p in this._tileMeshCache)return this._tileMeshCache[p];const _=function(S,j){const k=wl(j,"16bit"),R=l.aL.deserialize({arrayBuffer:k.vertices,length:k.vertices.byteLength/2/2}),$=l.aN.deserialize({arrayBuffer:k.indices,length:k.indices.byteLength/2/3});return new gc(S.createVertexBuffer(R,Ki.members),S.createIndexBuffer($),l.aM.simpleSegment(0,0,R.length,$.length))}(r,u);return this._tileMeshCache[p]=_,_}recalculate(r){}hasTransition(){const r=L.now();let u=!1;return u=u||(r-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const fh=new l.r({type:new l.D(l.v.projection.type)});class ph extends l.E{constructor(r){super(),this._transitionable=new l.t(fh,void 0),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.F(0)),this._mercatorProjection=new _l,this._verticalPerspectiveProjection=new Is}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof l.bm){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,u,p,_,S){return this.currentProjection.getMeshFromTileID(r,u,p,_,S)}setProjection(r){this._transitionable.setValue("type",(r==null?void 0:r.type)||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function iu(b){const r=Sl(b.worldSize,b.center.lat);return 2*Math.PI*r}function zo(b,r,u,p,_){const S=1/(1<<_),j=r/l.$*S+p*S,k=l.bo((b/l.$*S+u*S)*Math.PI*2+Math.PI,2*Math.PI),R=2*Math.atan(Math.exp(Math.PI-j*Math.PI*2))-.5*Math.PI,$=Math.cos(R),U=new Float64Array(3);return U[0]=Math.sin(k)*$,U[1]=Math.sin(R),U[2]=Math.cos(k)*$,U}function ni(b){return function(r,u){const p=Math.cos(u),_=new Float64Array(3);return _[0]=Math.sin(r)*p,_[1]=Math.sin(u),_[2]=Math.cos(r)*p,_}(b.lng*Math.PI/180,b.lat*Math.PI/180)}function Sl(b,r){return b/(2*Math.PI)/Math.cos(r*Math.PI/180)}function au(b){const r=Math.asin(b[1])/Math.PI*180,u=Math.sqrt(b[0]*b[0]+b[2]*b[2]);if(u>1e-6){const p=b[0]/u,_=Math.acos(b[2]/u),S=(p>0?_:-_)/Math.PI*180;return new l.S(l.aO(S,-180,180),r)}return new l.S(0,r)}function ks(b){return Math.cos(b*Math.PI/180)}function _i(b,r){const u=ks(b),p=ks(r);return l.ak(p/u)}function mh(b,r){const u=b.rotate(r.bearingInRadians),p=r.zoom+_i(r.center.lat,0),_=l.bk(1/ks(r.center.lat),1/ks(Math.min(Math.abs(r.center.lat),60)),l.bn(p,7,3,0,1)),S=360/iu({worldSize:r.worldSize,center:{lat:r.center.lat}});return new l.S(r.center.lng-u.x*S*_,l.ah(r.center.lat+u.y*S,-l.ai,l.ai))}function ou(b){const r=.5*b,u=Math.sin(r),p=Math.cos(r);return Math.log(u+p)-Math.log(p-u)}function Hf(b,r,u,p){const _=b.lat+u*p;if(Math.abs(u)>1){const S=(Math.sign(b.lat+u)!==Math.sign(b.lat)?-Math.abs(b.lat):Math.abs(b.lat))*Math.PI/180,j=Math.abs(b.lat+u)*Math.PI/180,k=ou(S+p*(j-S)),R=ou(S),$=ou(j);return new l.S(b.lng+r*((k-R)/($-R)),_)}return new l.S(b.lng+r*p,_)}class Lm{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=r}swapBuffers(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(r,u,p,_){const S=`${r.z}_${r.x}_${r.y}_${_!=null&&_.terrain?"t":""}`,j=this._cache.get(S);if(j)return j;const k=this._cachePrevious.get(S);if(k)return this._cache.set(S,k),k;const R=this._boundingVolumeFactory(r,u,p,_);return this._cache.set(S,R),this._hadAnyChanges=!0,R}}class mi{constructor(r,u,p,_){this.min=p,this.max=_,this.points=r,this.planes=u}static fromAabb(r,u){const p=[];for(let _=0;_<8;_++)p.push([1&~_?r[0]:u[0],(_>>1&1)==1?u[1]:r[1],(_>>2&1)==1?u[2]:r[2]]);return new mi(p,[[-1,0,0,u[0]],[1,0,0,-r[0]],[0,-1,0,u[1]],[0,1,0,-r[1]],[0,0,-1,u[2]],[0,0,1,-r[2]]],r,u)}static fromCenterSizeAngles(r,u,p){const _=l.br([],p[0],p[1],p[2]),S=l.bs([],[u[0],0,0],_),j=l.bs([],[0,u[1],0],_),k=l.bs([],[0,0,u[2]],_),R=[...r],$=[...r];for(let X=0;X<8;X++)for(let Z=0;Z<3;Z++){const Q=r[Z]+S[Z]*(1&~X?-1:1)+j[Z]*((X>>1&1)==1?1:-1)+k[Z]*((X>>2&1)==1?1:-1);R[Z]=Math.min(R[Z],Q),$[Z]=Math.max($[Z],Q)}const U=[];for(let X=0;X<8;X++){const Z=[...r];l.aS(Z,Z,l.aR([],S,1&~X?-1:1)),l.aS(Z,Z,l.aR([],j,(X>>1&1)==1?1:-1)),l.aS(Z,Z,l.aR([],k,(X>>2&1)==1?1:-1)),U.push(Z)}return new mi(U,[[...S,-l.aX(S,U[0])],[...j,-l.aX(j,U[0])],[...k,-l.aX(k,U[0])],[-S[0],-S[1],-S[2],-l.aX(S,U[7])],[-j[0],-j[1],-j[2],-l.aX(j,U[7])],[-k[0],-k[1],-k[2],-l.aX(k,U[7])]],R,$)}intersectsFrustum(r){let u=!0;const p=this.points.length,_=this.planes.length,S=r.planes.length,j=r.points.length;for(let k=0;k<S;k++){const R=r.planes[k];let $=0;for(let U=0;U<p;U++){const X=this.points[U];R[0]*X[0]+R[1]*X[1]+R[2]*X[2]+R[3]>=0&&$++}if($===0)return 0;$<p&&(u=!1)}if(u)return 2;for(let k=0;k<_;k++){const R=this.planes[k];let $=0;for(let U=0;U<j;U++){const X=r.points[U];R[0]*X[0]+R[1]*X[1]+R[2]*X[2]+R[3]>=0&&$++}if($===0)return 0}return 1}intersectsPlane(r){const u=this.points.length;let p=0;for(let _=0;_<u;_++){const S=this.points[_];r[0]*S[0]+r[1]*S[1]+r[2]*S[2]+r[3]>=0&&p++}return p===u?2:p===0?0:1}}function yc(b,r,u){const p=b-r;return p<0?-p:Math.max(0,p-u)}function da(b,r,u,p,_){const S=b-u;let j;return j=S<0?Math.min(-S,1+S-_):S>1?Math.min(Math.max(S-_,0),1-S):0,Math.max(j,yc(r,p,_))}class gh{constructor(){this._boundingVolumeCache=new Lm(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(r,u,p,_){const S=1<<p.z,j=1/S,k=p.x/S,R=p.y/S;let $=2;return $=Math.min($,da(r,u,k,R,j)),$=Math.min($,da(r,u,k+.5,-R-j,j)),$=Math.min($,da(r,u,k+.5,2-R-j,j)),$}getWrap(r,u,p){const _=1<<u.z,S=1/_,j=u.x/_,k=yc(r.x,j,S),R=yc(r.x,j-1,S),$=yc(r.x,j+1,S),U=Math.min(k,R,$);return U===$?1:U===R?-1:0}allowVariableZoom(r,u){return Ve(r,u)>4}allowWorldCopies(){return!1}getTileBoundingVolume(r,u,p,_){return this._boundingVolumeCache.getTileBoundingVolume(r,u,p,_)}_computeTileBoundingVolume(r,u,p,_){var S,j;let k=0,R=0;if(_!=null&&_.terrain){const $=new l.Z(r.z,u,r.z,r.x,r.y),U=_.terrain.getMinMaxElevation($);k=(S=U.minElevation)!==null&&S!==void 0?S:Math.min(0,p),R=(j=U.maxElevation)!==null&&j!==void 0?j:Math.max(0,p)}if(k/=l.bu,R/=l.bu,k+=1,R+=1,r.z<=0)return mi.fromAabb([-R,-R,-R],[R,R,R]);if(r.z===1)return mi.fromAabb([r.x===0?-R:0,r.y===0?0:-R,-R],[r.x===0?0:R,r.y===0?R:0,R]);{const $=[zo(0,0,r.x,r.y,r.z),zo(l.$,0,r.x,r.y,r.z),zo(l.$,l.$,r.x,r.y,r.z),zo(0,l.$,r.x,r.y,r.z)],U=[];for(const Qe of $)U.push(l.aR([],Qe,R));if(R!==k)for(const Qe of $)U.push(l.aR([],Qe,k));r.y===0&&U.push([0,1,0]),r.y===(1<<r.z)-1&&U.push([0,-1,0]);const X=[1,1,1],Z=[-1,-1,-1];for(const Qe of U)for(let Je=0;Je<3;Je++)X[Je]=Math.min(X[Je],Qe[Je]),Z[Je]=Math.max(Z[Je],Qe[Je]);const Q=zo(l.$/2,l.$/2,r.x,r.y,r.z),se=l.aW([],[0,1,0],Q);l.aV(se,se);const me=l.aW([],Q,se);l.aV(me,me);const pe=l.aW([],$[2],$[1]);l.aV(pe,pe);const ye=l.aW([],$[0],$[3]);l.aV(ye,ye),U.push(l.aR([],Q,R)),r.y>=(1<<r.z)/2&&U.push(l.aR([],zo(l.$/2,0,r.x,r.y,r.z),R)),r.y<(1<<r.z)/2&&U.push(l.aR([],zo(l.$/2,l.$,r.x,r.y,r.z),R));const _e=Sd(Q,U),Ae=Sd(me,U),be=[-Q[0],-Q[1],-Q[2],_e.max],Ee=[Q[0],Q[1],Q[2],-_e.min],Ie=[-me[0],-me[1],-me[2],Ae.max],we=[me[0],me[1],me[2],-Ae.min],De=[...pe,0],it=[...ye,0],Ye=[];return r.y===0?Ye.push(l.bt(it,De,be),l.bt(it,De,Ee)):Ye.push(l.bt(Ie,De,be),l.bt(Ie,De,Ee),l.bt(Ie,it,be),l.bt(Ie,it,Ee)),r.y===(1<<r.z)-1?Ye.push(l.bt(it,De,be),l.bt(it,De,Ee)):Ye.push(l.bt(we,De,be),l.bt(we,De,Ee),l.bt(we,it,be),l.bt(we,it,Ee)),new mi(Ye,[be,Ee,Ie,we,De,it],X,Z)}}}function Sd(b,r){let u=1/0,p=-1/0;for(const _ of r){const S=l.aX(b,_);u=Math.min(u,S),p=Math.max(p,S)}return{min:u,max:p}}class su{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,u,p){return this._helper.interpolatePadding(r,u,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,u){this._helper.resize(r,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,u){this._helper.overrideNearFarZ(r,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=l.bv(),this._projectionMatrix=l.b9(),this._globeViewProjMatrix32f=l.b8(),this._globeViewProjMatrixNoCorrection=l.b9(),this._globeViewProjMatrixNoCorrectionInverted=l.b9(),this._globeProjMatrixInverted=l.b9(),this._cameraPosition=l.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new hi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,u)=>this.getConstrained(r,u)}),this._coveringTilesDetailsProvider=new gh}clone(){const r=new su;return r.apply(this),r}apply(r,u){this._globeLatitudeErrorCorrectionRadians=u||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=l.bp();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:u,applyGlobeMatrix:p}=r,_=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:_,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const u=this.pitchInRadians,p=this.cameraToCenterDistance/r,_=Math.sin(u)*p,S=Math.cos(u)*p+1,j=1/Math.sqrt(_*_+S*S)*1;let k=-_,R=S;const $=Math.sqrt(k*k+R*R);k/=$,R/=$;const U=[0,k,R];l.bw(U,U,[0,0,0],-this.bearingInRadians),l.bx(U,U,[0,0,0],-1*this.center.lat*Math.PI/180),l.by(U,U,[0,0,0],this.center.lng*Math.PI/180);const X=1/l.aZ(U);return l.aR(U,U,X),[...U,-j*X]}isLocationOccluded(r){return!this.isSurfacePointVisible(ni(r))}transformLightDirection(r){const u=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,_=Math.cos(p),S=[Math.sin(u)*_,Math.sin(p),Math.cos(u)*_],j=[S[2],0,-S[0]],k=[0,0,0];l.aW(k,j,S),l.aV(j,j),l.aV(k,k);const R=[0,0,0];return l.aV(R,[j[0]*r[0]+k[0]*r[1]+S[0]*r[2],j[1]*r[0]+k[1]*r[1]+S[1]*r[2],j[2]*r[0]+k[2]*r[1]+S[2]*r[2]]),R}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,u,p){const _=function(k,R,$){const U=1/(1<<$.z);return new l.a1(k/l.$*U+$.x*U,R/l.$*U+$.y*U)}(r,u,p.canonical),S=(j=_.y,[l.bo(_.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-j*Math.PI*2))-.5*Math.PI]);var j;return this.getCircleRadiusCorrection()/Math.cos(S[1])}projectTileCoordinates(r,u,p,_){const S=p.canonical,j=zo(r,u,S.x,S.y,S.z),k=1+(_?_(r,u):0)/l.bu,R=[j[0]*k,j[1]*k,j[2]*k,1];l.aw(R,R,this._globeViewProjMatrixNoCorrection);const $=this._cachedClippingPlane,U=$[0]*j[0]+$[1]*j[1]+$[2]*j[2]+$[3]<0;return{point:new l.P(R[0]/R[3],R[1]/R[3]),signedDistanceFromCamera:R[3],isOccluded:U}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=Sl(this.worldSize,this.center.lat),u=l.ba(),p=l.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),l.b4(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const _=this.centerOffset;u[8]=2*-_.x/this._helper._width,u[9]=2*_.y/this._helper._height,this._projectionMatrix=l.b5(u),this._globeProjMatrixInverted=l.ba(),l.aq(this._globeProjMatrixInverted,u),l.M(u,u,[0,0,-this.cameraToCenterDistance]),l.b6(u,u,this.rollInRadians),l.b7(u,u,-this.pitchInRadians),l.b6(u,u,this.bearingInRadians),l.M(u,u,[0,0,-r]);const S=l.bp();S[0]=r,S[1]=r,S[2]=r,l.b7(p,u,this.center.lat*Math.PI/180),l.bz(p,p,-this.center.lng*Math.PI/180),l.N(p,p,S),this._globeViewProjMatrixNoCorrection=p,l.b7(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),l.bz(u,u,-this.center.lng*Math.PI/180),l.N(u,u,S),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=l.ba(),l.aq(this._globeViewProjMatrixNoCorrectionInverted,p);const j=l.bp();this._cameraPosition=l.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/r,l.bw(this._cameraPosition,this._cameraPosition,j,-this.rollInRadians),l.bx(this._cameraPosition,this._cameraPosition,j,this.pitchInRadians),l.bw(this._cameraPosition,this._cameraPosition,j,-this.bearingInRadians),l.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),l.bx(this._cameraPosition,this._cameraPosition,j,-this.center.lat*Math.PI/180),l.by(this._cameraPosition,this._cameraPosition,j,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const k=l.b5(this._globeViewProjMatrixNoCorrectionInverted);l.N(k,k,[1,1,-1]),this._cachedFrustum=Fr.fromInvProjectionMatrix(k,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(r){l.w("calculateFogMatrix is not supported on globe projection.");const u=l.ba();return l.ag(u),u}getVisibleUnwrappedCoordinates(r){return[new l.b2(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&l.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,u){if(!this._globeViewProjMatrixNoCorrection)return 1;const p=ni(r);l.aR(p,p,1+u/l.bu);const _=l.bv();return l.aw(_,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),_[2]/_[3]}populateCache(r){}getBounds(){const r=.5*this.width,u=.5*this.height,p=[new l.P(0,0),new l.P(r,0),new l.P(this.width,0),new l.P(this.width,u),new l.P(this.width,this.height),new l.P(r,this.height),new l.P(0,this.height),new l.P(0,u)],_=[];for(const X of p)_.push(this.unprojectScreenPoint(X));let S=0,j=0,k=0,R=0;const $=this.center;for(const X of _){const Z=l.bA($.lng,X.lng),Q=l.bA($.lat,X.lat);Z<j&&(j=Z),Z>S&&(S=Z),Q<R&&(R=Q),Q>k&&(k=Q)}const U=[$.lng+j,$.lat+R,$.lng+S,$.lat+k];return this.isSurfacePointOnScreen([0,1,0])&&(U[3]=90,U[0]=-180,U[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(U[1]=-90,U[0]=-180,U[2]=180),new fr(U)}getConstrained(r,u){const p=l.ah(r.lat,-l.ai,l.ai),_=l.ah(+u,this.minZoom+_i(0,p),this.maxZoom);return{center:new l.S(r.lng,p),zoom:_}}calculateCenterFromCameraLngLatAlt(r,u,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(r,u,p,_)}setLocationAtPoint(r,u){const p=ni(this.unprojectScreenPoint(u)),_=ni(r),S=l.bp();l.bB(S);const j=l.bp();l.by(j,p,S,-this.center.lng*Math.PI/180),l.bx(j,j,S,this.center.lat*Math.PI/180);const k=_[0]*_[0]+_[2]*_[2],R=j[0]*j[0];if(k<R)return;const $=Math.sqrt(k-R),U=-$,X=l.bC(_[0],_[2],j[0],$),Z=l.bC(_[0],_[2],j[0],U),Q=l.bp();l.by(Q,_,S,-X);const se=l.bC(Q[1],Q[2],j[1],j[2]),me=l.bp();l.by(me,_,S,-Z);const pe=l.bC(me[1],me[2],j[1],j[2]),ye=.5*Math.PI,_e=se>=-ye&&se<=ye,Ae=pe>=-ye&&pe<=ye;let be,Ee;if(_e&&Ae){const it=this.center.lng*Math.PI/180,Ye=this.center.lat*Math.PI/180;l.bD(X,it)+l.bD(se,Ye)<l.bD(Z,it)+l.bD(pe,Ye)?(be=X,Ee=se):(be=Z,Ee=pe)}else if(_e)be=X,Ee=se;else{if(!Ae)return;be=Z,Ee=pe}const Ie=be/Math.PI*180,we=Ee/Math.PI*180,De=this.center.lat;this.setCenter(new l.S(Ie,l.ah(we,-90,90))),this.setZoom(this.zoom+_i(De,this.center.lat))}locationToScreenPoint(r,u){const p=ni(r);if(u){const _=u.getElevationForLngLatZoom(r,this._helper._tileZoom);l.aR(p,p,1+_/l.bu)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(r){const u=l.bv();return l.aw(u,[...r,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new l.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,u){if(u){const p=u.pointCoordinate(r);if(p)return p}return l.a1.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,u){var p;return(p=this.screenPointToMercatorCoordinate(r,u))===null||p===void 0?void 0:p.toLngLat()}isPointOnMapSurface(r,u){const p=this._cameraPosition,_=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(p,_)}getRayDirectionFromPixel(r){const u=l.bv();u[0]=r.x/this.width*2-1,u[1]=-1*(r.y/this.height*2-1),u[2]=1,u[3]=1,l.aw(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];const p=l.bp();p[0]=u[0]-this._cameraPosition[0],p[1]=u[1]-this._cameraPosition[1],p[2]=u[2]-this._cameraPosition[2];const _=l.bp();return l.aV(_,p),_}isSurfacePointVisible(r){const u=this._cachedClippingPlane;return u[0]*r[0]+u[1]*r[1]+u[2]*r[2]+u[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const u=l.bv();return l.aw(u,[...r,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(r,u){const p=l.aX(r,u),_=l.bp(),S=l.bp();l.aR(S,u,p),l.aU(_,r,S);const j=1-l.aX(_,_);if(j<0)return null;const k=l.aX(r,r)-1,R=-p+(p<0?1:-1)*Math.sqrt(j),$=k/R,U=R;return{tMin:Math.min($,U),tMax:Math.max($,U)}}unprojectScreenPoint(r){const u=this._cameraPosition,p=this.getRayDirectionFromPixel(r),_=this.rayPlanetIntersection(u,p);if(_){const U=l.bp();l.aS(U,u,[p[0]*_.tMin,p[1]*_.tMin,p[2]*_.tMin]);const X=l.bp();return l.aV(X,U),au(X)}const S=this._cachedClippingPlane,j=S[0]*p[0]+S[1]*p[1]+S[2]*p[2],k=-l.b1(S,u)/j,R=l.bp();if(k>0)l.aS(R,u,[p[0]*k,p[1]*k,p[2]*k]);else{const U=l.bp();l.aS(U,u,[2*p[0],2*p[1],2*p[2]]);const X=l.b1(this._cachedClippingPlane,U);l.aU(R,U,[this._cachedClippingPlane[0]*X,this._cachedClippingPlane[1]*X,this._cachedClippingPlane[2]*X])}const $=function(U){const X=l.bp();return X[0]=U[0]*-U[3],X[1]=U[1]*-U[3],X[2]=U[2]*-U[3],{center:X,radius:Math.sqrt(1-U[3]*U[3])}}(S);return au(function(U,X,Z){const Q=l.bp();l.aU(Q,Z,U);const se=l.bp();return l.bq(se,U,Q,X/l.a$(Q)),se}($.center,$.radius,R))}getMatrixForModel(r,u){const p=l.S.convert(r),_=1/l.bu,S=l.b9();return l.bz(S,S,p.lng/180*Math.PI),l.b7(S,S,-p.lat/180*Math.PI),l.M(S,S,[0,0,1+u/l.bu]),l.b7(S,S,.5*Math.PI),l.N(S,S,[_,_,_]),S}getProjectionDataForCustomLayer(r=!0){const u=this.getProjectionData({overscaledTileID:new l.Z(0,0,0,0,0),applyGlobeMatrix:r});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(r){}}class Lo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,u,p){return this._helper.interpolatePadding(r,u,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,u,p=!0){this._helper.resize(r,u,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,u){this._helper.overrideNearFarZ(r,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,u){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new hi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,u)=>this.getConstrained(r,u)}),this._globeness=1,this._mercatorTransform=new Cs,this._verticalPerspectiveTransform=new su}clone(){const r=new Lo;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const u=this._mercatorTransform.getProjectionData(r),p=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:u.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return l.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return l.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,u,p){const _=this._mercatorTransform.getPitchedTextCorrection(r,u,p),S=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,u,p);return l.bk(_,S,this._globeness)}projectTileCoordinates(r,u,p,_){return this.currentTransform.projectTileCoordinates(r,u,p,_)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,u){return this.currentTransform.lngLatToCameraDepth(r,u)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,u){return this.currentTransform.getConstrained(r,u)}calculateCenterFromCameraLngLatAlt(r,u,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(r,u,p,_)}setLocationAtPoint(r,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,u),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,u),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,u){return this.currentTransform.locationToScreenPoint(r,u)}screenPointToMercatorCoordinate(r,u){return this.currentTransform.screenPointToMercatorCoordinate(r,u)}screenPointToLocation(r,u){return this.currentTransform.screenPointToLocation(r,u)}isPointOnMapSurface(r,u){return this.currentTransform.isPointOnMapSurface(r,u)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,u){return this.currentTransform.getMatrixForModel(r,u)}getProjectionDataForCustomLayer(r=!0){const u=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return u;const p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return p.fallbackMatrix=u.mainMatrix,p}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class po{get useGlobeControls(){return!0}handlePanInertia(r,u){const p=mh(r,u);return Math.abs(p.lng-u.center.lng)>180&&(p.lng=u.center.lng+179.5*Math.sign(p.lng-u.center.lng)),{easingCenter:p,easingOffset:new l.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,u){const p=r.around,_=u.screenPointToLocation(p);r.bearingDelta&&u.setBearing(u.bearing+r.bearingDelta),r.pitchDelta&&u.setPitch(u.pitch+r.pitchDelta),r.rollDelta&&u.setRoll(u.roll+r.rollDelta);const S=u.zoom;r.zoomDelta&&u.setZoom(u.zoom+r.zoomDelta);const j=u.zoom-S;if(j===0)return;const k=l.bA(u.center.lng,_.lng),R=k/(Math.abs(k/180)+1),$=l.bA(u.center.lat,_.lat),U=u.getRayDirectionFromPixel(p),X=u.cameraPosition,Z=-1*l.aX(X,U),Q=l.bp();l.aS(Q,X,[U[0]*Z,U[1]*Z,U[2]*Z]);const se=l.aZ(Q)-1,me=Math.exp(.5*-Math.max(se-.3,0)),pe=Sl(u.worldSize,u.center.lat)/Math.min(u.width,u.height),ye=l.bn(pe,.9,.5,1,.25),_e=(1-l.af(-j))*Math.min(me,ye),Ae=u.center.lat,be=u.zoom,Ee=new l.S(u.center.lng+R*_e,l.ah(u.center.lat+$*_e,-l.ai,l.ai));u.setLocationAtPoint(_,p);const Ie=u.center,we=l.bn(Math.abs(k),45,85,0,1),De=l.bn(pe,.75,.35,0,1),it=Math.pow(Math.max(we,De),.25),Ye=l.bA(Ie.lng,Ee.lng),Qe=l.bA(Ie.lat,Ee.lat);u.setCenter(new l.S(Ie.lng+Ye*it,Ie.lat+Qe*it).wrap()),u.setZoom(be+_i(Ae,u.center.lat))}handleMapControlsPan(r,u,p){if(!r.panDelta)return;const _=u.center.lat,S=u.zoom;u.setCenter(mh(r.panDelta,u).wrap()),u.setZoom(S+_i(_,u.center.lat))}cameraForBoxAndBearing(r,u,p,_,S){const j=Li(r,u,p,_,S),k=u.left/S.width*2-1,R=(S.width-u.right)/S.width*2-1,$=u.top/S.height*-2+1,U=(S.height-u.bottom)/S.height*-2+1,X=l.bA(p.getWest(),p.getEast())<0,Z=X?p.getEast():p.getWest(),Q=X?p.getWest():p.getEast(),se=Math.max(p.getNorth(),p.getSouth()),me=Math.min(p.getNorth(),p.getSouth()),pe=Z+.5*l.bA(Z,Q),ye=se+.5*l.bA(se,me),_e=S.clone();_e.setCenter(j.center),_e.setBearing(j.bearing),_e.setPitch(0),_e.setRoll(0),_e.setZoom(j.zoom);const Ae=_e.modelViewProjectionMatrix,be=[ni(p.getNorthWest()),ni(p.getNorthEast()),ni(p.getSouthWest()),ni(p.getSouthEast()),ni(new l.S(Q,ye)),ni(new l.S(Z,ye)),ni(new l.S(pe,se)),ni(new l.S(pe,me))],Ee=ni(j.center);let Ie=Number.POSITIVE_INFINITY;for(const we of be)k<0&&(Ie=po.getLesserNonNegativeNonNull(Ie,po.solveVectorScale(we,Ee,Ae,"x",k))),R>0&&(Ie=po.getLesserNonNegativeNonNull(Ie,po.solveVectorScale(we,Ee,Ae,"x",R))),$>0&&(Ie=po.getLesserNonNegativeNonNull(Ie,po.solveVectorScale(we,Ee,Ae,"y",$))),U<0&&(Ie=po.getLesserNonNegativeNonNull(Ie,po.solveVectorScale(we,Ee,Ae,"y",U)));if(Number.isFinite(Ie)&&Ie!==0)return j.zoom=_e.zoom+l.ak(Ie),j;fi()}handleJumpToCenterZoom(r,u){const p=r.center.lat,_=r.getConstrained(u.center?l.S.convert(u.center):r.center,r.zoom).center;r.setCenter(_.wrap());const S=u.zoom!==void 0?+u.zoom:r.zoom+_i(p,_.lat);r.zoom!==S&&r.setZoom(S)}handleEaseTo(r,u){const p=r.zoom,_=r.center,S=r.padding,j={roll:r.roll,pitch:r.pitch,bearing:r.bearing},k={roll:u.roll===void 0?r.roll:u.roll,pitch:u.pitch===void 0?r.pitch:u.pitch,bearing:u.bearing===void 0?r.bearing:u.bearing},R=u.zoom!==void 0,$=!r.isPaddingEqual(u.padding);let U=!1;const X=u.center?l.S.convert(u.center):_,Z=r.getConstrained(X,p).center;fo(r,Z);const Q=r.clone();Q.setCenter(Z),Q.setZoom(R?+u.zoom:p+_i(_.lat,X.lat)),Q.setBearing(u.bearing);const se=new l.P(l.ah(r.centerPoint.x+u.offsetAsPoint.x,0,r.width),l.ah(r.centerPoint.y+u.offsetAsPoint.y,0,r.height));Q.setLocationAtPoint(Z,se);const me=(u.offset&&u.offsetAsPoint.mag())>0?Q.center:Z,pe=R?+u.zoom:p+_i(_.lat,me.lat),ye=p+_i(_.lat,0),_e=pe+_i(me.lat,0),Ae=l.bA(_.lng,me.lng),be=l.bA(_.lat,me.lat),Ee=l.af(_e-ye);return U=pe!==p,{easeFunc:Ie=>{if(l.be(j,k)||ti({startEulerAngles:j,endEulerAngles:k,tr:r,k:Ie,useSlerp:j.roll!=k.roll}),$&&r.interpolatePadding(S,u.padding,Ie),u.around)l.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(u.around,u.aroundPoint);else{const we=_e>ye?Math.min(2,Ee):Math.max(.5,Ee),De=Math.pow(we,1-Ie),it=Hf(_,Ae,be,Ie*De);r.setCenter(it.wrap())}if(U){const we=l.C.number(ye,_e,Ie)+_i(0,r.center.lat);r.setZoom(we)}},isZooming:U,elevationCenter:me}}handleFlyTo(r,u){const p=u.zoom!==void 0,_=r.center,S=r.zoom,j=r.padding,k=!r.isPaddingEqual(u.padding),R=r.getConstrained(l.S.convert(u.center||u.locationAtOffset),S).center,$=p?+u.zoom:r.zoom+_i(r.center.lat,R.lat),U=r.clone();U.setCenter(R),U.setZoom($),U.setBearing(u.bearing);const X=new l.P(l.ah(r.centerPoint.x+u.offsetAsPoint.x,0,r.width),l.ah(r.centerPoint.y+u.offsetAsPoint.y,0,r.height));U.setLocationAtPoint(R,X);const Z=U.center;fo(r,Z);const Q=function(be,Ee,Ie){const we=ni(Ee),De=ni(Ie),it=l.aX(we,De),Ye=Math.acos(it),Qe=iu(be);return Ye/(2*Math.PI)*Qe}(r,_,Z),se=S+_i(_.lat,0),me=$+_i(Z.lat,0),pe=l.af(me-se);let ye;if(typeof u.minZoom=="number"){const be=+u.minZoom+_i(Z.lat,0),Ee=Math.min(be,se,me)+_i(0,Z.lat),Ie=r.getConstrained(Z,Ee).zoom+_i(Z.lat,0);ye=l.af(Ie-se)}const _e=l.bA(_.lng,Z.lng),Ae=l.bA(_.lat,Z.lat);return{easeFunc:(be,Ee,Ie,we)=>{const De=Hf(_,_e,Ae,Ie);k&&r.interpolatePadding(j,u.padding,be);const it=be===1?Z:De;r.setCenter(it.wrap());const Ye=se+l.ak(Ee);r.setZoom(be===1?$:Ye+_i(0,it.lat))},scaleOfZoom:pe,targetCenter:Z,scaleOfMinZoom:ye,pixelPathLength:Q}}static solveVectorScale(r,u,p,_,S){const j=_==="x"?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],k=[p[3],p[7],p[11],p[15]],R=r[0]*j[0]+r[1]*j[1]+r[2]*j[2],$=r[0]*k[0]+r[1]*k[1]+r[2]*k[2],U=u[0]*j[0]+u[1]*j[1]+u[2]*j[2],X=u[0]*k[0]+u[1]*k[1]+u[2]*k[2];return U+S*$===R+S*X||k[3]*(R-U)+j[3]*(X-$)+R*X==U*$?null:(U+j[3]-S*X-S*k[3])/(U-R-S*X+S*$)}static getLesserNonNegativeNonNull(r,u){return u!==null&&u>=0&&u<r?u:r}}class Xf{constructor(r){this._globe=r,this._mercatorCameraHelper=new Os,this._verticalPerspectiveCameraHelper=new po}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,u){return this.currentHelper.handlePanInertia(r,u)}handleMapControlsRollPitchBearingZoom(r,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,u)}handleMapControlsPan(r,u,p){this.currentHelper.handleMapControlsPan(r,u,p)}cameraForBoxAndBearing(r,u,p,_,S){return this.currentHelper.cameraForBoxAndBearing(r,u,p,_,S)}handleJumpToCenterZoom(r,u){this.currentHelper.handleJumpToCenterZoom(r,u)}handleEaseTo(r,u){return this.currentHelper.handleEaseTo(r,u)}handleFlyTo(r,u){return this.currentHelper.handleFlyTo(r,u)}}const yh=(b,r)=>l.y(b,r&&r.filter(u=>u.identifier!=="source.canvas")),Bm=l.bE();class Td extends l.E{constructor(r,u={}){var p,_;super(),this._rtlPluginLoaded=()=>{for(const j in this.sourceCaches){const k=this.sourceCaches[j].getSource().type;k!=="vector"&&k!=="geojson"||this.sourceCaches[j].reload()}},this.map=r,this.dispatcher=new zt(Gt(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(j,k)=>this.getGlyphs(j,k)),this.dispatcher.registerMessageHandler("GI",(j,k)=>this.getImages(j,k)),this.dispatcher.registerMessageHandler("GDA",(j,k)=>this.getDashes(j,k)),this.imageManager=new Oe,this.imageManager.setEventedParent(this);const S=((p=r._container)===null||p===void 0?void 0:p.lang)||typeof document<"u"&&((_=document.documentElement)===null||_===void 0?void 0:_.lang)||void 0;this.glyphManager=new et(r._requestManager,u.localIdeographFontFamily,S),this.lineAtlas=new dt(256,512),this.crossTileSymbolIndex=new nu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",l.bG()),Jn().on(Eo,this._rtlPluginLoaded),this.on("data",j=>{if(j.dataType!=="source"||j.sourceDataType!=="metadata")return;const k=this.sourceCaches[j.sourceId];if(!k)return;const R=k.getSource();if(R&&R.vectorLayerIds)for(const $ in this._layers){const U=this._layers[$];U.source===R.id&&this._validateLayer(U)}})}setGlobalStateProperty(r,u){var p,_,S;this._checkLoaded();const j=u===null?(S=(_=(p=this.stylesheet.state)===null||p===void 0?void 0:p[r])===null||_===void 0?void 0:_.default)!==null&&S!==void 0?S:null:u;if(l.bH(j,this._globalState[r]))return this;this._globalState[r]=j,this._applyGlobalStateChanges([r])}getGlobalState(){return this._globalState}setGlobalState(r){this._checkLoaded();const u=[];for(const p in r)!l.bH(this._globalState[p],r[p].default)&&(u.push(p),this._globalState[p]=r[p].default);this._applyGlobalStateChanges(u)}_applyGlobalStateChanges(r){if(r.length===0)return;const u=new Set,p={};for(const _ of r){p[_]=this._globalState[_];for(const S in this._layers){const j=this._layers[S],k=j.getLayoutAffectingGlobalStateRefs(),R=j.getPaintAffectingGlobalStateRefs();if(k.has(_)&&u.add(j.source),R.has(_))for(const{name:$,value:U}of R.get(_))this._updatePaintProperty(j,$,U)}}this.dispatcher.broadcast("UGS",p);for(const _ in this.sourceCaches)u.has(_)&&(this._reloadSource(_),this._changed=!0)}loadURL(r,u={},p){this.fire(new l.l("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const _=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const S=this._loadStyleRequest;l.j(_,this._loadStyleRequest).then(j=>{this._loadStyleRequest=null,this._load(j.data,u,p)}).catch(j=>{this._loadStyleRequest=null,j&&!S.signal.aborted&&this.fire(new l.k(j))})}loadJSON(r,u={},p){this.fire(new l.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,L.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(r,u,p)}).catch(()=>{})}loadEmpty(){this.fire(new l.l("dataloading",{dataType:"style"})),this._load(Bm,{validate:!1})}_load(r,u,p){var _,S;let j=u.transformStyle?u.transformStyle(p,r):r;if(!u.validate||!yh(this,l.z(j))){j=Object.assign({},j),this._loaded=!0,this.stylesheet=j;for(const k in j.sources)this.addSource(k,j.sources[k],{validate:!1});j.sprite?this._loadSprite(j.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(j.glyphs),this._createLayers(),this.light=new Te(this.stylesheet.light),this._setProjectionInternal(((_=this.stylesheet.projection)===null||_===void 0?void 0:_.type)||"mercator"),this.sky=new Ze(this.stylesheet.sky),this.map.setTerrain((S=this.stylesheet.terrain)!==null&&S!==void 0?S:null),this.fire(new l.l("data",{dataType:"style"})),this.fire(new l.l("style.load"))}}_createLayers(){var r,u,p;const _=l.bI(this.stylesheet.layers);this.setGlobalState((r=this.stylesheet.state)!==null&&r!==void 0?r:null),this.dispatcher.broadcast("SL",_),this._order=_.map(S=>S.id),this._layers={},this._serializedLayers=null;for(const S of _){const j=l.bJ(S,this._globalState);if(j.setEventedParent(this,{layer:{id:S.id}}),this._layers[S.id]=j,l.bK(j)&&this.sourceCaches[j.source]){const k=(p=(u=S.paint)===null||u===void 0?void 0:u["raster-fade-duration"])!==null&&p!==void 0?p:j.paint.get("raster-fade-duration");this.sourceCaches[j.source].setRasterFadeDuration(k)}}}_loadSprite(r,u=!1,p=void 0){let _;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(S,j,k,R){return l._(this,void 0,void 0,function*(){const $=ee(S),U=k>1?"@2x":"",X={},Z={};for(const{id:Q,url:se}of $){const me=j.transformRequest(he(se,U,".json"),"SpriteJSON");X[Q]=l.j(me,R);const pe=j.transformRequest(he(se,U,".png"),"SpriteImage");Z[Q]=ce.getImage(pe,R)}return yield Promise.all([...Object.values(X),...Object.values(Z)]),function(Q,se){return l._(this,void 0,void 0,function*(){const me={};for(const pe in Q){me[pe]={};const ye=L.getImageCanvasContext((yield se[pe]).data),_e=(yield Q[pe]).data;for(const Ae in _e){const{width:be,height:Ee,x:Ie,y:we,sdf:De,pixelRatio:it,stretchX:Ye,stretchY:Qe,content:Je,textFitWidth:Tt,textFitHeight:At}=_e[Ae];me[pe][Ae]={data:null,pixelRatio:it,sdf:De,stretchX:Ye,stretchY:Qe,content:Je,textFitWidth:Tt,textFitHeight:At,spriteData:{width:be,height:Ee,x:Ie,y:we,context:ye}}}}return me})}(X,Z)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(S=>{if(this._spriteRequest=null,S)for(const j in S){this._spritesImagesIds[j]=[];const k=this._spritesImagesIds[j]?this._spritesImagesIds[j].filter(R=>!(R in S)):[];for(const R of k)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(const R in S[j]){const $=j==="default"?R:`${j}:${R}`;this._spritesImagesIds[j].push($),$ in this.imageManager.images?this.imageManager.updateImage($,S[j][R],!1):this.imageManager.addImage($,S[j][R]),u&&(this._changedImages[$]=!0)}}}).catch(S=>{this._spriteRequest=null,_=S,this.fire(new l.k(_))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"})),p&&p(_)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const p=r.sourceLayer;if(!p)return;const _=u.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(p)===-1)&&this.fire(new l.k(new Error(`Source layer "${p}" does not exist on source "${_.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,u=!1){const p=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u?l.bL(p):p);const _=[];for(const S of r)if(p[S]){const j=u?l.bL(p[S]):p[S];_.push(j)}return _}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const _=this._layers[p];_.type!=="custom"&&(r[p]=_.serialize())}return r}hasTransitions(){var r,u,p;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((u=this.sky)===null||u===void 0)&&u.hasTransition()||!((p=this.projection)===null||p===void 0)&&p.hasTransition())return!0;for(const _ in this.sourceCaches)if(this.sourceCaches[_].hasTransition())return!0;for(const _ in this._layers)if(this._layers[_].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(u){const _=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(_.length||S.length)&&this._updateWorkerLayers(_,S);for(const j in this._updatedSources){const k=this._updatedSources[j];if(k==="reload")this._reloadSource(j);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(j)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const j in this._updatedPaintProps)this._layers[j].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const p={};for(const _ in this.sourceCaches){const S=this.sourceCaches[_];p[_]=S.used,S.used=!1}for(const _ of this._order){const S=this._layers[_];S.recalculate(r,this._availableImages),!S.isHidden(r.zoom)&&S.source&&(this.sourceCaches[S.source].used=!0)}for(const _ in p){const S=this.sourceCaches[_];!!p[_]!=!!S.used&&S.fire(new l.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,u&&this.fire(new l.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){var p;this._checkLoaded();const _=this.serialize();if(r=u.transformStyle?u.transformStyle(_,r):r,((p=u.validate)===null||p===void 0||p)&&yh(this,l.z(r)))return!1;(r=l.bL(r)).layers=l.bI(r.layers);const S=l.bM(_,r),j=this._getOperationsToPerform(S);if(j.unimplemented.length>0)throw new Error(`Unimplemented: ${j.unimplemented.join(", ")}.`);if(j.operations.length===0)return!1;for(const k of j.operations)k();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const u=[],p=[];for(const _ of r)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push(()=>this.addLayer.apply(this,_.args));break;case"removeLayer":u.push(()=>this.removeLayer.apply(this,_.args));break;case"setPaintProperty":u.push(()=>this.setPaintProperty.apply(this,_.args));break;case"setLayoutProperty":u.push(()=>this.setLayoutProperty.apply(this,_.args));break;case"setFilter":u.push(()=>this.setFilter.apply(this,_.args));break;case"addSource":u.push(()=>this.addSource.apply(this,_.args));break;case"removeSource":u.push(()=>this.removeSource.apply(this,_.args));break;case"setLayerZoomRange":u.push(()=>this.setLayerZoomRange.apply(this,_.args));break;case"setLight":u.push(()=>this.setLight.apply(this,_.args));break;case"setGeoJSONSourceData":u.push(()=>this.setGeoJSONSourceData.apply(this,_.args));break;case"setGlyphs":u.push(()=>this.setGlyphs.apply(this,_.args));break;case"setSprite":u.push(()=>this.setSprite.apply(this,_.args));break;case"setTerrain":u.push(()=>this.map.setTerrain.apply(this,_.args));break;case"setSky":u.push(()=>this.setSky.apply(this,_.args));break;case"setProjection":this.setProjection.apply(this,_.args);break;case"setGlobalState":u.push(()=>this.setGlobalState.apply(this,_.args));break;case"setTransition":u.push(()=>{});break;default:p.push(_.command)}return{operations:u,unimplemented:p}}addImage(r,u){if(this.getImage(r))return this.fire(new l.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,p={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.z.source,`sources.${r}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const _=this.sourceCaches[r]=new qt(r,u,this.dispatcher);_.style=this,_.setEventedParent(this,()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:r})),_.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===r)return this.fire(new l.k(new Error(`Source "${r}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new l.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const p=this.sourceCaches[r].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,p={}){this._checkLoaded();const _=r.id;if(this.getLayer(_))return void this.fire(new l.k(new Error(`Layer "${_}" already exists on this map.`)));let S;if(r.type==="custom"){if(yh(this,l.bN(r)))return;S=l.bJ(r,this._globalState)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(_,r.source),r=l.bL(r),r=l.e(r,{source:_})),this._validate(l.z.layer,`layers.${_}`,r,{arrayIndex:-1},p))return;S=l.bJ(r,this._globalState),this._validateLayer(S),S.setEventedParent(this,{layer:{id:_}})}const j=u?this._order.indexOf(u):this._order.length;if(u&&j===-1)this.fire(new l.k(new Error(`Cannot add layer "${_}" before non-existing layer "${u}".`)));else{if(this._order.splice(j,0,_),this._layerOrderChanged=!0,this._layers[_]=S,this._removedLayers[_]&&S.source&&S.type!=="custom"){const k=this._removedLayers[_];delete this._removedLayers[_],k.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const p=this._order.indexOf(r);this._order.splice(p,1);const _=u?this._order.indexOf(u):this._order.length;u&&_===-1?this.fire(new l.k(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(_,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new l.k(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const p=this._order.indexOf(r);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,p){this._checkLoaded();const _=this.getLayer(r);_?_.minzoom===u&&_.maxzoom===p||(u!=null&&(_.minzoom=u),p!=null&&(_.maxzoom=p),this._updateLayer(_)):this.fire(new l.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,p={}){this._checkLoaded();const _=this.getLayer(r);if(_){if(!l.bH(_.filter,u))return u==null?(_.setFilter(void 0),void this._updateLayer(_)):void(this._validate(l.z.filter,`layers.${_.id}.filter`,u,null,p)||(_.setFilter(l.bL(u)),this._updateLayer(_)))}else this.fire(new l.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.bL(this.getLayer(r).filter)}setLayoutProperty(r,u,p,_={}){this._checkLoaded();const S=this.getLayer(r);S?l.bH(S.getLayoutProperty(u),p)||(S.setLayoutProperty(u,p,_),this._updateLayer(S)):this.fire(new l.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const p=this.getLayer(r);if(p)return p.getLayoutProperty(u);this.fire(new l.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,p,_={}){this._checkLoaded();const S=this.getLayer(r);S?l.bH(S.getPaintProperty(u),p)||this._updatePaintProperty(S,u,p,_):this.fire(new l.k(new Error(`Cannot style non-existing layer "${r}".`)))}_updatePaintProperty(r,u,p,_={}){r.setPaintProperty(u,p,_)&&this._updateLayer(r),l.bK(r)&&u==="raster-fade-duration"&&this.sourceCaches[r.source].setRasterFadeDuration(p),this._changed=!0,this._updatedPaintProps[r.id]=!0,this._serializedLayers=null}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const p=r.source,_=r.sourceLayer,S=this.sourceCaches[p];if(S===void 0)return void this.fire(new l.k(new Error(`The source '${p}' does not exist in the map's style.`)));const j=S.getSource().type;j==="geojson"&&_?this.fire(new l.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):j!=="vector"||_?(r.id===void 0&&this.fire(new l.k(new Error("The feature id parameter must be provided."))),S.setFeatureState(_,r.id,u)):this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const p=r.source,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new l.k(new Error(`The source '${p}' does not exist in the map's style.`)));const S=_.getSource().type,j=S==="vector"?r.sourceLayer:void 0;S!=="vector"||j?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.k(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(j,r.id,u):this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,p=r.sourceLayer,_=this.sourceCaches[u];if(_!==void 0)return _.getSource().type!=="vector"||p?(r.id===void 0&&this.fire(new l.k(new Error("The feature id parameter must be provided."))),_.getFeatureState(p,r.id)):void this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=l.bO(this.sourceCaches,S=>S.serialize()),u=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,_=this.stylesheet;return l.bP({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,projection:_.projection,sources:r,layers:u,terrain:p},S=>S!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=j=>this._layers[j].type==="fill-extrusion",p={},_=[];for(let j=this._order.length-1;j>=0;j--){const k=this._order[j];if(u(k)){p[k]=j;for(const R of r){const $=R[k];if($)for(const U of $)_.push(U)}}}_.sort((j,k)=>k.intersectionZ-j.intersectionZ);const S=[];for(let j=this._order.length-1;j>=0;j--){const k=this._order[j];if(u(k))for(let R=_.length-1;R>=0;R--){const $=_[R].feature;if(p[$.layer.id]<j)break;S.push($),_.pop()}else for(const R of r){const $=R[k];if($)for(const U of $)S.push(U.feature)}}return S}queryRenderedFeatures(r,u,p){u&&u.filter&&this._validate(l.z.filter,"queryRenderedFeatures.filter",u.filter,null,u);const _={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new l.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const $ of u.layers){const U=this._layers[$];if(!U)return this.fire(new l.k(new Error(`The layer '${$}' does not exist in the map's style and cannot be queried for features.`))),[];_[U.source]=!0}}const S=[];u.availableImages=this._availableImages;const j=this._serializedAllLayers(),k=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,R=Object.assign(Object.assign({},u),{layers:k,globalState:this._globalState});for(const $ in this.sourceCaches)u.layers&&!_[$]||S.push(Ot(this.sourceCaches[$],this._layers,j,r,R,p,this.map.terrain?(U,X,Z)=>this.map.terrain.getElevation(U,X,Z):void 0));return this.placement&&S.push(function($,U,X,Z,Q,se,me){const pe={},ye=se.queryRenderedSymbols(Z),_e=[];for(const Ae of Object.keys(ye).map(Number))_e.push(me[Ae]);_e.sort(rr);for(const Ae of _e){const be=Ae.featureIndex.lookupSymbolFeatures(ye[Ae.bucketInstanceId],U,Ae.bucketIndex,Ae.sourceLayerIndex,{filterSpec:Q.filter,globalState:Q.globalState},Q.layers,Q.availableImages,$);for(const Ee in be){const Ie=pe[Ee]=pe[Ee]||[],we=be[Ee];we.sort((De,it)=>{const Ye=Ae.featureSortOrder;if(Ye){const Qe=Ye.indexOf(De.featureIndex);return Ye.indexOf(it.featureIndex)-Qe}return it.featureIndex-De.featureIndex});for(const De of we)Ie.push(De)}}return function(Ae,be,Ee){for(const Ie in Ae)for(const we of Ae[Ie])or(we,Ee[be[Ie].source]);return Ae}(pe,$,X)}(this._layers,j,this.sourceCaches,r,R,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(r,u){u!=null&&u.filter&&this._validate(l.z.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[r];return p?function(_,S){const j=_.getRenderableIds().map($=>_.getTileByID($)),k=[],R={};for(let $=0;$<j.length;$++){const U=j[$],X=U.tileID.canonical.key;R[X]||(R[X]=!0,U.querySourceFeatures(k,S))}return k}(p,u?Object.assign(Object.assign({},u),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const p=this.light.getLight();let _=!1;for(const j in r)if(!l.bH(r[j],p[j])){_=!0;break}if(!_)return;const S={now:L.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(S)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,u={}){this._checkLoaded();const p=this.getSky();let _=!1;if(!r&&!p)return;if(r&&!p)_=!0;else if(!r&&p)_=!0;else for(const j in r)if(!l.bH(r[j],p[j])){_=!0;break}if(!_)return;const S={now:L.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,u),this.sky.updateTransitions(S)}_setProjectionInternal(r){const u=function(p){if(Array.isArray(p)){const _=new ph({type:p});return{projection:_,transform:new Lo,cameraHelper:new Xf(_)}}switch(p){case"mercator":return{projection:new _l,transform:new Cs,cameraHelper:new Os};case"globe":{const _=new ph({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:_,transform:new Lo,cameraHelper:new Xf(_)}}case"vertical-perspective":return{projection:new Is,transform:new su,cameraHelper:new po};default:return l.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new _l,transform:new Cs,cameraHelper:new Os}}}(r);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(const p in this.sourceCaches)this.sourceCaches[p].reload()}_validate(r,u,p,_,S={}){return(!S||S.validate!==!1)&&yh(this,r.call(l.z,l.e({key:u,style:this.serialize(),value:p,styleSpec:l.v},_)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Jn().off(Eo,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,p,_,S=!1){let j=!1,k=!1;const R={};for(const $ of this._order){const U=this._layers[$];if(U.type!=="symbol")continue;if(!R[U.source]){const Z=this.sourceCaches[U.source];R[U.source]=Z.getRenderableIds(!0).map(Q=>Z.getTileByID(Q)).sort((Q,se)=>se.tileID.overscaledZ-Q.tileID.overscaledZ||(Q.tileID.isLessThan(se.tileID)?-1:1))}const X=this.crossTileSymbolIndex.addLayer(U,R[U.source],r.center.lng);j=j||X}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(L.now(),r.zoom))&&(this.pauseablePlacement=new uh(r,this.map.terrain,this._order,S,u,p,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(L.now()),k=!0),j&&this.pauseablePlacement.placement.setStale()),k||j)for(const $ of this._order){const U=this._layers[$];U.type==="symbol"&&this.placement.updateLayerOpacities(U,R[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(L.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u){return l._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const _=this.sourceCaches[u.source];return _&&_.setDependencies(u.tileID.key,u.type,u.icons),p})}getGlyphs(r,u){return l._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(u.stacks),_=this.sourceCaches[u.source];return _&&_.setDependencies(u.tileID.key,u.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(l.z.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}getDashes(r,u){return l._(this,void 0,void 0,function*(){const p={};for(const[_,S]of Object.entries(u.dashes))p[_]=this.lineAtlas.getDash(S.dasharray,S.round);return p})}addSprite(r,u,p={},_){this._checkLoaded();const S=[{id:r,url:u}],j=[...ee(this.stylesheet.sprite),...S];this._validate(l.z.sprite,"sprite",j,null,p)||(this.stylesheet.sprite=j,this._loadSprite(S,!0,_))}removeSprite(r){this._checkLoaded();const u=ee(this.stylesheet.sprite);if(u.find(p=>p.id===r)){if(this._spritesImagesIds[r])for(const p of this._spritesImagesIds[r])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}else this.fire(new l.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return ee(this.stylesheet.sprite)}setSprite(r,u={},p){this._checkLoaded(),r&&this._validate(l.z.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,p):(this._unloadSprite(),p&&p(null)))}}var Fm=l.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class vh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,p,_,S,j,k,R,$){this.context=r;let U=this.boundPaintVertexBuffers.length!==_.length;for(let X=0;!U&&X<_.length;X++)this.boundPaintVertexBuffers[X]!==_[X]&&(U=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||U||this.boundIndexBuffer!==S||this.boundVertexOffset!==j||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==$?this.freshBind(u,p,_,S,j,k,R,$):(r.bindVertexArray.set(this.vao),k&&k.bind(),S&&S.dynamicDraw&&S.bind(),R&&R.bind(),$&&$.bind())}freshBind(r,u,p,_,S,j,k,R){const $=r.numAttributes,U=this.context,X=U.gl;this.vao&&this.destroy(),this.vao=U.createVertexArray(),U.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=_,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=j,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=R,u.enableAttributes(X,r);for(const Z of p)Z.enableAttributes(X,r);j&&j.enableAttributes(X,r),k&&k.enableAttributes(X,r),R&&R.enableAttributes(X,r),u.bind(),u.setVertexAttribPointers(X,r,S);for(const Z of p)Z.bind(),Z.setVertexAttribPointers(X,r,S);j&&(j.bind(),j.setVertexAttribPointers(X,r,S)),_&&_.bind(),k&&(k.bind(),k.setVertexAttribPointers(X,r,S)),R&&(R.bind(),R.setVertexAttribPointers(X,r,S)),U.currentNumAttributes=$}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Ad=(b,r,u,p,_)=>({u_texture:0,u_ele_delta:b,u_fog_matrix:r,u_fog_color:u?u.properties.get("fog-color"):l.bf.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?0:u?u.calculateFogBlendOpacity(p):0,u_horizon_color:u?u.properties.get("horizon-color"):l.bf.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:_?1:0}),_h={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ns(b){const r=[];for(let u=0;u<b.length;u++){if(b[u]===null)continue;const p=b[u].split(" ");r.push(p.pop())}return r}class Tl{constructor(r,u,p,_,S,j,k,R,$=[]){const U=r.gl;this.program=U.createProgram();const X=Ns(u.staticAttributes),Z=p?p.getBinderAttributes():[],Q=X.concat(Z),se=zi.prelude.staticUniforms?Ns(zi.prelude.staticUniforms):[],me=k.staticUniforms?Ns(k.staticUniforms):[],pe=u.staticUniforms?Ns(u.staticUniforms):[],ye=p?p.getBinderUniforms():[],_e=se.concat(me).concat(pe).concat(ye),Ae=[];for(const Ye of _e)Ae.indexOf(Ye)<0&&Ae.push(Ye);const be=p?p.defines():[];ri(U)&&be.unshift("#version 300 es"),S&&be.push("#define OVERDRAW_INSPECTOR;"),j&&be.push("#define TERRAIN3D;"),R&&be.push(R),$&&be.push(...$);let Ee=be.concat(zi.prelude.fragmentSource,k.fragmentSource,u.fragmentSource).join(`
`),Ie=be.concat(zi.prelude.vertexSource,k.vertexSource,u.vertexSource).join(`
`);ri(U)||(Ee=function(Ye){return Ye.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Ee),Ie=function(Ye){return Ye.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Ie));const we=U.createShader(U.FRAGMENT_SHADER);if(U.isContextLost())return void(this.failedToCreate=!0);if(U.shaderSource(we,Ee),U.compileShader(we),!U.getShaderParameter(we,U.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${U.getShaderInfoLog(we)}`);U.attachShader(this.program,we);const De=U.createShader(U.VERTEX_SHADER);if(U.isContextLost())return void(this.failedToCreate=!0);if(U.shaderSource(De,Ie),U.compileShader(De),!U.getShaderParameter(De,U.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${U.getShaderInfoLog(De)}`);U.attachShader(this.program,De),this.attributes={};const it={};this.numAttributes=Q.length;for(let Ye=0;Ye<this.numAttributes;Ye++)Q[Ye]&&(U.bindAttribLocation(this.program,Ye,Q[Ye]),this.attributes[Q[Ye]]=Ye);if(U.linkProgram(this.program),!U.getProgramParameter(this.program,U.LINK_STATUS))throw new Error(`Program failed to link: ${U.getProgramInfoLog(this.program)}`);U.deleteShader(De),U.deleteShader(we);for(let Ye=0;Ye<Ae.length;Ye++){const Qe=Ae[Ye];if(Qe&&!it[Qe]){const Je=U.getUniformLocation(this.program,Qe);Je&&(it[Qe]=Je)}}this.fixedUniforms=_(r,it),this.terrainUniforms=((Ye,Qe)=>({u_depth:new l.bQ(Ye,Qe.u_depth),u_terrain:new l.bQ(Ye,Qe.u_terrain),u_terrain_dim:new l.bg(Ye,Qe.u_terrain_dim),u_terrain_matrix:new l.bS(Ye,Qe.u_terrain_matrix),u_terrain_unpack:new l.bT(Ye,Qe.u_terrain_unpack),u_terrain_exaggeration:new l.bg(Ye,Qe.u_terrain_exaggeration)}))(r,it),this.projectionUniforms=((Ye,Qe)=>({u_projection_matrix:new l.bS(Ye,Qe.u_projection_matrix),u_projection_tile_mercator_coords:new l.bT(Ye,Qe.u_projection_tile_mercator_coords),u_projection_clipping_plane:new l.bT(Ye,Qe.u_projection_clipping_plane),u_projection_transition:new l.bg(Ye,Qe.u_projection_transition),u_projection_fallback_matrix:new l.bS(Ye,Qe.u_projection_fallback_matrix)}))(r,it),this.binderUniforms=p?p.getUniforms(r,it):[]}draw(r,u,p,_,S,j,k,R,$,U,X,Z,Q,se,me,pe,ye,_e,Ae){const be=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(p),r.setStencilMode(_),r.setColorMode(S),r.setCullFace(j),R){r.activeTexture.set(be.TEXTURE2),be.bindTexture(be.TEXTURE_2D,R.depthTexture),r.activeTexture.set(be.TEXTURE3),be.bindTexture(be.TEXTURE_2D,R.texture);for(const Ie in this.terrainUniforms)this.terrainUniforms[Ie].set(R[Ie])}if($)for(const Ie in $)this.projectionUniforms[_h[Ie]].set($[Ie]);if(k)for(const Ie in this.fixedUniforms)this.fixedUniforms[Ie].set(k[Ie]);pe&&pe.setUniforms(r,this.binderUniforms,se,{zoom:me});let Ee=0;switch(u){case be.LINES:Ee=2;break;case be.TRIANGLES:Ee=3;break;case be.LINE_STRIP:Ee=1}for(const Ie of Q.get()){const we=Ie.vaos||(Ie.vaos={});(we[U]||(we[U]=new vh)).bind(r,this,X,pe?pe.getPaintVertexBuffers():[],Z,Ie.vertexOffset,ye,_e,Ae),be.drawElements(u,Ie.primitiveLength*Ee,be.UNSIGNED_SHORT,Ie.primitiveOffset*Ee*2)}}}function mo(b,r,u){const p=1/l.aC(u,1,r.transform.tileZoom),_=Math.pow(2,u.tileID.overscaledZ),S=u.tileSize*Math.pow(2,r.transform.tileZoom)/_,j=S*(u.tileID.canonical.x+u.tileID.wrap*_),k=S*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[j>>16,k>>16],u_pixel_coord_lower:[65535&j,65535&k]}}const Md=(b,r,u,p)=>{const _=b.style.light,S=_.properties.get("position"),j=[S.x,S.y,S.z],k=l.bW();_.properties.get("anchor")==="viewport"&&l.bX(k,b.transform.bearingInRadians),l.bY(j,j,k);const R=b.transform.transformLightDirection(j),$=_.properties.get("color");return{u_lightpos:j,u_lightpos_globe:R,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[$.r,$.g,$.b],u_vertical_gradient:+r,u_opacity:u,u_fill_translate:p}},xh=(b,r,u,p,_,S,j)=>l.e(Md(b,r,u,p),mo(S,b,j),{u_height_factor:-Math.pow(2,_.overscaledZ)/j.tileSize/8}),Al=(b,r,u,p)=>l.e(mo(r,b,u),{u_fill_translate:p}),vc=(b,r)=>({u_world:b,u_fill_translate:r}),Wf=(b,r,u,p,_)=>l.e(Al(b,r,u,_),{u_world:p}),ss=(b,r,u,p,_)=>{const S=b.transform;let j,k,R=0;if(u.paint.get("circle-pitch-alignment")==="map"){const $=l.aC(r,1,S.zoom);j=!0,k=[$,$],R=$/(l.$*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*_}else j=!1,k=S.pixelsToGLUnits;return{u_camera_to_center_distance:S.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+j,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:k,u_globe_extrude_scale:R,u_translate:p}},$m=b=>({u_pixel_extrude_scale:[1/b.width,1/b.height]}),_c=b=>({u_viewport_size:[b.width,b.height]}),Yf=(b,r=1)=>({u_color:b,u_overlay:0,u_overlay_scale:r}),bh=(b,r,u,p)=>{const _=l.aC(b,1,r)/(l.$*Math.pow(2,b.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:l.aC(b,1,r),u_intensity:u,u_globe_extrude_scale:_}},jd=(b,r,u,p)=>{const _=l.L();l.bZ(_,0,b.width,b.height,0,0,1);const S=b.context.gl;return{u_matrix:_,u_world:[S.drawingBufferWidth,S.drawingBufferHeight],u_image:u,u_color_ramp:p,u_opacity:r.paint.get("heatmap-opacity")}},xc=(b,r,u)=>{const p=u.paint.get("hillshade-accent-color");let _;switch(u.paint.get("hillshade-method")){case"basic":_=4;break;case"combined":_=1;break;case"igor":_=2;break;case"multidirectional":_=3;break;default:_=0}const S=u.getIlluminationProperties();for(let j=0;j<S.directionRadians.length;j++)u.paint.get("hillshade-illumination-anchor")==="viewport"&&(S.directionRadians[j]+=b.transform.bearingInRadians);return{u_image:0,u_latrange:Kf(0,r.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:S.altitudeRadians,u_azimuths:S.directionRadians,u_accent:p,u_method:_,u_highlights:S.highlightColor,u_shadows:S.shadowColor}},Ml=(b,r)=>{const u=r.stride,p=l.L();return l.bZ(p,0,l.$,-l.$,0,0,1),l.M(p,p,[0,-l.$,0]),{u_matrix:p,u_image:1,u_dimension:[u,u],u_zoom:b.overscaledZ,u_unpack:r.getUnpackVector()}};function Kf(b,r){const u=Math.pow(2,r.canonical.z),p=r.canonical.y;return[new l.a1(0,p/u).toLngLat().lat,new l.a1(0,(p+1)/u).toLngLat().lat]}const lu=(b,r,u=0)=>({u_image:0,u_unpack:r.getUnpackVector(),u_dimension:[r.stride,r.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:u,u_opacity:b.paint.get("color-relief-opacity")}),bc=(b,r,u,p)=>{const _=b.transform;return{u_translation:Cd(b,r,u),u_ratio:p/l.aC(r,1,_.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Pd=(b,r,u,p,_)=>l.e(bc(b,r,u,p),{u_image:0,u_image_height:_}),ls=(b,r,u,p,_)=>{const S=b.transform,j=Rs(r,S);return{u_translation:Cd(b,r,u),u_texsize:r.imageAtlasTexture.size,u_ratio:p/l.aC(r,1,S.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[j,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},wh=(b,r,u,p,_)=>{const S=Rs(r,b.transform);return l.e(bc(b,r,u,p),{u_tileratio:S,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image:0,u_mix:_.t,u_lineatlas_width:b.lineAtlas.width,u_lineatlas_height:b.lineAtlas.height})},Ed=(b,r,u,p,_,S)=>{const j=Rs(r,b.transform);return l.e(bc(b,r,u,p),{u_image:0,u_image_height:S,u_tileratio:j,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image_dash:1,u_mix:_.t,u_lineatlas_width:b.lineAtlas.width,u_lineatlas_height:b.lineAtlas.height})};function Rs(b,r){return 1/l.aC(b,1,r.tileZoom)}function Cd(b,r,u){return l.aD(b.transform,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Sh=(b,r,u,p,_)=>{return{u_tl_parent:b,u_scale_parent:r,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(j=p.paint.get("raster-saturation"),j>0?1-1/(1.001-j):-j),u_contrast_factor:(S=p.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:qm(p.paint.get("raster-hue-rotate")),u_coords_top:[_[0].x,_[0].y,_[1].x,_[1].y],u_coords_bottom:[_[3].x,_[3].y,_[2].x,_[2].y]};var S,j};function qm(b){b*=Math.PI/180;const r=Math.sin(b),u=Math.cos(b);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const Qf=(b,r,u,p,_,S,j,k,R,$,U,X,Z)=>{const Q=j.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Q.cameraToCenterDistance,u_pitch:Q.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:Q.width/Q.height,u_fade_change:j.options.fadeDuration?j.symbolFadeChange:1,u_label_plane_matrix:k,u_coord_matrix:R,u_is_text:+U,u_pitch_with_map:+p,u_is_along_line:_,u_is_variable_anchor:S,u_texsize:X,u_texture:0,u_translation:$,u_pitched_scale:Z}},Od=(b,r,u,p,_,S,j,k,R,$,U,X,Z,Q)=>{const se=j.transform;return l.e(Qf(b,r,u,p,_,S,j,k,R,$,U,X,Q),{u_gamma_scale:p?Math.cos(se.pitch*Math.PI/180)*se.cameraToCenterDistance:1,u_device_pixel_ratio:j.pixelRatio,u_is_halo:1})},Jf=(b,r,u,p,_,S,j,k,R,$,U,X,Z)=>l.e(Od(b,r,u,p,_,S,j,k,R,$,!0,U,0,Z),{u_texsize_icon:X,u_texture_icon:1}),fa=(b,r)=>({u_opacity:b,u_color:r}),jl=(b,r,u,p,_)=>l.e(function(S,j,k,R){const $=k.imageManager.getPattern(S.from.toString()),U=k.imageManager.getPattern(S.to.toString()),{width:X,height:Z}=k.imageManager.getPixelSize(),Q=Math.pow(2,R.tileID.overscaledZ),se=R.tileSize*Math.pow(2,k.transform.tileZoom)/Q,me=se*(R.tileID.canonical.x+R.tileID.wrap*Q),pe=se*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:$.tl,u_pattern_br_a:$.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[X,Z],u_mix:j.t,u_pattern_size_a:$.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/l.aC(R,1,k.transform.tileZoom),u_pixel_coord_upper:[me>>16,pe>>16],u_pixel_coord_lower:[65535&me,65535&pe]}}(u,_,r,p),{u_opacity:b}),Th=(b,r)=>{},cu={fillExtrusion:(b,r)=>({u_lightpos:new l.bU(b,r.u_lightpos),u_lightpos_globe:new l.bU(b,r.u_lightpos_globe),u_lightintensity:new l.bg(b,r.u_lightintensity),u_lightcolor:new l.bU(b,r.u_lightcolor),u_vertical_gradient:new l.bg(b,r.u_vertical_gradient),u_opacity:new l.bg(b,r.u_opacity),u_fill_translate:new l.bV(b,r.u_fill_translate)}),fillExtrusionPattern:(b,r)=>({u_lightpos:new l.bU(b,r.u_lightpos),u_lightpos_globe:new l.bU(b,r.u_lightpos_globe),u_lightintensity:new l.bg(b,r.u_lightintensity),u_lightcolor:new l.bU(b,r.u_lightcolor),u_vertical_gradient:new l.bg(b,r.u_vertical_gradient),u_height_factor:new l.bg(b,r.u_height_factor),u_opacity:new l.bg(b,r.u_opacity),u_fill_translate:new l.bV(b,r.u_fill_translate),u_image:new l.bQ(b,r.u_image),u_texsize:new l.bV(b,r.u_texsize),u_pixel_coord_upper:new l.bV(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bV(b,r.u_pixel_coord_lower),u_scale:new l.bU(b,r.u_scale),u_fade:new l.bg(b,r.u_fade)}),fill:(b,r)=>({u_fill_translate:new l.bV(b,r.u_fill_translate)}),fillPattern:(b,r)=>({u_image:new l.bQ(b,r.u_image),u_texsize:new l.bV(b,r.u_texsize),u_pixel_coord_upper:new l.bV(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bV(b,r.u_pixel_coord_lower),u_scale:new l.bU(b,r.u_scale),u_fade:new l.bg(b,r.u_fade),u_fill_translate:new l.bV(b,r.u_fill_translate)}),fillOutline:(b,r)=>({u_world:new l.bV(b,r.u_world),u_fill_translate:new l.bV(b,r.u_fill_translate)}),fillOutlinePattern:(b,r)=>({u_world:new l.bV(b,r.u_world),u_image:new l.bQ(b,r.u_image),u_texsize:new l.bV(b,r.u_texsize),u_pixel_coord_upper:new l.bV(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bV(b,r.u_pixel_coord_lower),u_scale:new l.bU(b,r.u_scale),u_fade:new l.bg(b,r.u_fade),u_fill_translate:new l.bV(b,r.u_fill_translate)}),circle:(b,r)=>({u_camera_to_center_distance:new l.bg(b,r.u_camera_to_center_distance),u_scale_with_map:new l.bQ(b,r.u_scale_with_map),u_pitch_with_map:new l.bQ(b,r.u_pitch_with_map),u_extrude_scale:new l.bV(b,r.u_extrude_scale),u_device_pixel_ratio:new l.bg(b,r.u_device_pixel_ratio),u_globe_extrude_scale:new l.bg(b,r.u_globe_extrude_scale),u_translate:new l.bV(b,r.u_translate)}),collisionBox:(b,r)=>({u_pixel_extrude_scale:new l.bV(b,r.u_pixel_extrude_scale)}),collisionCircle:(b,r)=>({u_viewport_size:new l.bV(b,r.u_viewport_size)}),debug:(b,r)=>({u_color:new l.bR(b,r.u_color),u_overlay:new l.bQ(b,r.u_overlay),u_overlay_scale:new l.bg(b,r.u_overlay_scale)}),depth:Th,clippingMask:Th,heatmap:(b,r)=>({u_extrude_scale:new l.bg(b,r.u_extrude_scale),u_intensity:new l.bg(b,r.u_intensity),u_globe_extrude_scale:new l.bg(b,r.u_globe_extrude_scale)}),heatmapTexture:(b,r)=>({u_matrix:new l.bS(b,r.u_matrix),u_world:new l.bV(b,r.u_world),u_image:new l.bQ(b,r.u_image),u_color_ramp:new l.bQ(b,r.u_color_ramp),u_opacity:new l.bg(b,r.u_opacity)}),hillshade:(b,r)=>({u_image:new l.bQ(b,r.u_image),u_latrange:new l.bV(b,r.u_latrange),u_exaggeration:new l.bg(b,r.u_exaggeration),u_altitudes:new l.b$(b,r.u_altitudes),u_azimuths:new l.b$(b,r.u_azimuths),u_accent:new l.bR(b,r.u_accent),u_method:new l.bQ(b,r.u_method),u_shadows:new l.b_(b,r.u_shadows),u_highlights:new l.b_(b,r.u_highlights)}),hillshadePrepare:(b,r)=>({u_matrix:new l.bS(b,r.u_matrix),u_image:new l.bQ(b,r.u_image),u_dimension:new l.bV(b,r.u_dimension),u_zoom:new l.bg(b,r.u_zoom),u_unpack:new l.bT(b,r.u_unpack)}),colorRelief:(b,r)=>({u_image:new l.bQ(b,r.u_image),u_unpack:new l.bT(b,r.u_unpack),u_dimension:new l.bV(b,r.u_dimension),u_elevation_stops:new l.bQ(b,r.u_elevation_stops),u_color_stops:new l.bQ(b,r.u_color_stops),u_color_ramp_size:new l.bQ(b,r.u_color_ramp_size),u_opacity:new l.bg(b,r.u_opacity)}),line:(b,r)=>({u_translation:new l.bV(b,r.u_translation),u_ratio:new l.bg(b,r.u_ratio),u_device_pixel_ratio:new l.bg(b,r.u_device_pixel_ratio),u_units_to_pixels:new l.bV(b,r.u_units_to_pixels)}),lineGradient:(b,r)=>({u_translation:new l.bV(b,r.u_translation),u_ratio:new l.bg(b,r.u_ratio),u_device_pixel_ratio:new l.bg(b,r.u_device_pixel_ratio),u_units_to_pixels:new l.bV(b,r.u_units_to_pixels),u_image:new l.bQ(b,r.u_image),u_image_height:new l.bg(b,r.u_image_height)}),linePattern:(b,r)=>({u_translation:new l.bV(b,r.u_translation),u_texsize:new l.bV(b,r.u_texsize),u_ratio:new l.bg(b,r.u_ratio),u_device_pixel_ratio:new l.bg(b,r.u_device_pixel_ratio),u_image:new l.bQ(b,r.u_image),u_units_to_pixels:new l.bV(b,r.u_units_to_pixels),u_scale:new l.bU(b,r.u_scale),u_fade:new l.bg(b,r.u_fade)}),lineSDF:(b,r)=>({u_translation:new l.bV(b,r.u_translation),u_ratio:new l.bg(b,r.u_ratio),u_device_pixel_ratio:new l.bg(b,r.u_device_pixel_ratio),u_units_to_pixels:new l.bV(b,r.u_units_to_pixels),u_image:new l.bQ(b,r.u_image),u_mix:new l.bg(b,r.u_mix),u_tileratio:new l.bg(b,r.u_tileratio),u_crossfade_from:new l.bg(b,r.u_crossfade_from),u_crossfade_to:new l.bg(b,r.u_crossfade_to),u_lineatlas_width:new l.bg(b,r.u_lineatlas_width),u_lineatlas_height:new l.bg(b,r.u_lineatlas_height)}),lineGradientSDF:(b,r)=>({u_translation:new l.bV(b,r.u_translation),u_ratio:new l.bg(b,r.u_ratio),u_device_pixel_ratio:new l.bg(b,r.u_device_pixel_ratio),u_units_to_pixels:new l.bV(b,r.u_units_to_pixels),u_image:new l.bQ(b,r.u_image),u_image_height:new l.bg(b,r.u_image_height),u_tileratio:new l.bg(b,r.u_tileratio),u_crossfade_from:new l.bg(b,r.u_crossfade_from),u_crossfade_to:new l.bg(b,r.u_crossfade_to),u_image_dash:new l.bQ(b,r.u_image_dash),u_mix:new l.bg(b,r.u_mix),u_lineatlas_width:new l.bg(b,r.u_lineatlas_width),u_lineatlas_height:new l.bg(b,r.u_lineatlas_height)}),raster:(b,r)=>({u_tl_parent:new l.bV(b,r.u_tl_parent),u_scale_parent:new l.bg(b,r.u_scale_parent),u_buffer_scale:new l.bg(b,r.u_buffer_scale),u_fade_t:new l.bg(b,r.u_fade_t),u_opacity:new l.bg(b,r.u_opacity),u_image0:new l.bQ(b,r.u_image0),u_image1:new l.bQ(b,r.u_image1),u_brightness_low:new l.bg(b,r.u_brightness_low),u_brightness_high:new l.bg(b,r.u_brightness_high),u_saturation_factor:new l.bg(b,r.u_saturation_factor),u_contrast_factor:new l.bg(b,r.u_contrast_factor),u_spin_weights:new l.bU(b,r.u_spin_weights),u_coords_top:new l.bT(b,r.u_coords_top),u_coords_bottom:new l.bT(b,r.u_coords_bottom)}),symbolIcon:(b,r)=>({u_is_size_zoom_constant:new l.bQ(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bQ(b,r.u_is_size_feature_constant),u_size_t:new l.bg(b,r.u_size_t),u_size:new l.bg(b,r.u_size),u_camera_to_center_distance:new l.bg(b,r.u_camera_to_center_distance),u_pitch:new l.bg(b,r.u_pitch),u_rotate_symbol:new l.bQ(b,r.u_rotate_symbol),u_aspect_ratio:new l.bg(b,r.u_aspect_ratio),u_fade_change:new l.bg(b,r.u_fade_change),u_label_plane_matrix:new l.bS(b,r.u_label_plane_matrix),u_coord_matrix:new l.bS(b,r.u_coord_matrix),u_is_text:new l.bQ(b,r.u_is_text),u_pitch_with_map:new l.bQ(b,r.u_pitch_with_map),u_is_along_line:new l.bQ(b,r.u_is_along_line),u_is_variable_anchor:new l.bQ(b,r.u_is_variable_anchor),u_texsize:new l.bV(b,r.u_texsize),u_texture:new l.bQ(b,r.u_texture),u_translation:new l.bV(b,r.u_translation),u_pitched_scale:new l.bg(b,r.u_pitched_scale)}),symbolSDF:(b,r)=>({u_is_size_zoom_constant:new l.bQ(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bQ(b,r.u_is_size_feature_constant),u_size_t:new l.bg(b,r.u_size_t),u_size:new l.bg(b,r.u_size),u_camera_to_center_distance:new l.bg(b,r.u_camera_to_center_distance),u_pitch:new l.bg(b,r.u_pitch),u_rotate_symbol:new l.bQ(b,r.u_rotate_symbol),u_aspect_ratio:new l.bg(b,r.u_aspect_ratio),u_fade_change:new l.bg(b,r.u_fade_change),u_label_plane_matrix:new l.bS(b,r.u_label_plane_matrix),u_coord_matrix:new l.bS(b,r.u_coord_matrix),u_is_text:new l.bQ(b,r.u_is_text),u_pitch_with_map:new l.bQ(b,r.u_pitch_with_map),u_is_along_line:new l.bQ(b,r.u_is_along_line),u_is_variable_anchor:new l.bQ(b,r.u_is_variable_anchor),u_texsize:new l.bV(b,r.u_texsize),u_texture:new l.bQ(b,r.u_texture),u_gamma_scale:new l.bg(b,r.u_gamma_scale),u_device_pixel_ratio:new l.bg(b,r.u_device_pixel_ratio),u_is_halo:new l.bQ(b,r.u_is_halo),u_translation:new l.bV(b,r.u_translation),u_pitched_scale:new l.bg(b,r.u_pitched_scale)}),symbolTextAndIcon:(b,r)=>({u_is_size_zoom_constant:new l.bQ(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bQ(b,r.u_is_size_feature_constant),u_size_t:new l.bg(b,r.u_size_t),u_size:new l.bg(b,r.u_size),u_camera_to_center_distance:new l.bg(b,r.u_camera_to_center_distance),u_pitch:new l.bg(b,r.u_pitch),u_rotate_symbol:new l.bQ(b,r.u_rotate_symbol),u_aspect_ratio:new l.bg(b,r.u_aspect_ratio),u_fade_change:new l.bg(b,r.u_fade_change),u_label_plane_matrix:new l.bS(b,r.u_label_plane_matrix),u_coord_matrix:new l.bS(b,r.u_coord_matrix),u_is_text:new l.bQ(b,r.u_is_text),u_pitch_with_map:new l.bQ(b,r.u_pitch_with_map),u_is_along_line:new l.bQ(b,r.u_is_along_line),u_is_variable_anchor:new l.bQ(b,r.u_is_variable_anchor),u_texsize:new l.bV(b,r.u_texsize),u_texsize_icon:new l.bV(b,r.u_texsize_icon),u_texture:new l.bQ(b,r.u_texture),u_texture_icon:new l.bQ(b,r.u_texture_icon),u_gamma_scale:new l.bg(b,r.u_gamma_scale),u_device_pixel_ratio:new l.bg(b,r.u_device_pixel_ratio),u_is_halo:new l.bQ(b,r.u_is_halo),u_translation:new l.bV(b,r.u_translation),u_pitched_scale:new l.bg(b,r.u_pitched_scale)}),background:(b,r)=>({u_opacity:new l.bg(b,r.u_opacity),u_color:new l.bR(b,r.u_color)}),backgroundPattern:(b,r)=>({u_opacity:new l.bg(b,r.u_opacity),u_image:new l.bQ(b,r.u_image),u_pattern_tl_a:new l.bV(b,r.u_pattern_tl_a),u_pattern_br_a:new l.bV(b,r.u_pattern_br_a),u_pattern_tl_b:new l.bV(b,r.u_pattern_tl_b),u_pattern_br_b:new l.bV(b,r.u_pattern_br_b),u_texsize:new l.bV(b,r.u_texsize),u_mix:new l.bg(b,r.u_mix),u_pattern_size_a:new l.bV(b,r.u_pattern_size_a),u_pattern_size_b:new l.bV(b,r.u_pattern_size_b),u_scale_a:new l.bg(b,r.u_scale_a),u_scale_b:new l.bg(b,r.u_scale_b),u_pixel_coord_upper:new l.bV(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bV(b,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.bg(b,r.u_tile_units_to_pixels)}),terrain:(b,r)=>({u_texture:new l.bQ(b,r.u_texture),u_ele_delta:new l.bg(b,r.u_ele_delta),u_fog_matrix:new l.bS(b,r.u_fog_matrix),u_fog_color:new l.bR(b,r.u_fog_color),u_fog_ground_blend:new l.bg(b,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new l.bg(b,r.u_fog_ground_blend_opacity),u_horizon_color:new l.bR(b,r.u_horizon_color),u_horizon_fog_blend:new l.bg(b,r.u_horizon_fog_blend),u_is_globe_mode:new l.bg(b,r.u_is_globe_mode)}),terrainDepth:(b,r)=>({u_ele_delta:new l.bg(b,r.u_ele_delta)}),terrainCoords:(b,r)=>({u_texture:new l.bQ(b,r.u_texture),u_terrain_coords_id:new l.bg(b,r.u_terrain_coords_id),u_ele_delta:new l.bg(b,r.u_ele_delta)}),projectionErrorMeasurement:(b,r)=>({u_input:new l.bg(b,r.u_input),u_output_expected:new l.bg(b,r.u_output_expected)}),atmosphere:(b,r)=>({u_sun_pos:new l.bU(b,r.u_sun_pos),u_atmosphere_blend:new l.bg(b,r.u_atmosphere_blend),u_globe_position:new l.bU(b,r.u_globe_position),u_globe_radius:new l.bg(b,r.u_globe_radius),u_inv_proj_matrix:new l.bS(b,r.u_inv_proj_matrix)}),sky:(b,r)=>({u_sky_color:new l.bR(b,r.u_sky_color),u_horizon_color:new l.bR(b,r.u_horizon_color),u_horizon:new l.bV(b,r.u_horizon),u_horizon_normal:new l.bV(b,r.u_horizon_normal),u_sky_horizon_blend:new l.bg(b,r.u_sky_horizon_blend),u_sky_blend:new l.bg(b,r.u_sky_blend)})};class Bo{constructor(r,u,p){this.context=r;const _=r.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ah={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class uu{constructor(r,u,p,_){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=_,this.context=r;const S=r.gl;this.buffer=S.createBuffer(),r.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let p=0;p<this.attributes.length;p++){const _=u.attributes[this.attributes[p].name];_!==void 0&&r.enableVertexAttribArray(_)}}setVertexAttribPointers(r,u,p){for(let _=0;_<this.attributes.length;_++){const S=this.attributes[_],j=u.attributes[S.name];j!==void 0&&r.vertexAttribPointer(j,S.components,r[Ah[S.type]],!1,this.itemSize,S.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class $r{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Pl extends $r{getDefault(){return l.bf.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class hu extends $r{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class go extends $r{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class du extends $r{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class ep extends $r{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class El extends $r{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class wc extends $r{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Id extends $r{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class kd extends $r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class Cl extends $r{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Nd extends $r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class fu extends $r{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class pu extends $r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class Mh extends $r{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Rd extends $r{getDefault(){return l.bf.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ol extends $r{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Sc extends $r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class Il extends $r{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class pa extends $r{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Ua extends $r{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Dd extends $r{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class ma extends $r{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class xi extends $r{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class cs extends $r{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Tc extends $r{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Ds extends $r{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class kl extends $r{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class jh extends $r{getDefault(){return null}set(r){var u;if(r===this.current&&!this.dirty)return;const p=this.gl;ri(p)?p.bindVertexArray(r):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class yo extends $r{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Nl extends $r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class mu extends $r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Fo extends $r{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class Pr extends Fo{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Bi extends Fo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class zd extends Fo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const vo="Framebuffer is not complete";class Ac{constructor(r,u,p,_,S){this.context=r,this.width=u,this.height=p;const j=r.gl,k=this.framebuffer=j.createFramebuffer();if(this.colorAttachment=new Pr(r,k),_)this.depthAttachment=S?new zd(r,k):new Bi(r,k);else if(S)throw new Error("Stencil cannot be set without depth");if(j.checkFramebufferStatus(j.FRAMEBUFFER)!==j.FRAMEBUFFER_COMPLETE)throw new Error(vo)}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&r.deleteRenderbuffer(p)}r.deleteFramebuffer(this.framebuffer)}}class Ph{constructor(r){var u,p;if(this.gl=r,this.clearColor=new Pl(this),this.clearDepth=new hu(this),this.clearStencil=new go(this),this.colorMask=new du(this),this.depthMask=new ep(this),this.stencilMask=new El(this),this.stencilFunc=new wc(this),this.stencilOp=new Id(this),this.stencilTest=new kd(this),this.depthRange=new Cl(this),this.depthTest=new Nd(this),this.depthFunc=new fu(this),this.blend=new pu(this),this.blendFunc=new Mh(this),this.blendColor=new Rd(this),this.blendEquation=new Ol(this),this.cullFace=new Sc(this),this.cullFaceSide=new Il(this),this.frontFace=new pa(this),this.program=new Ua(this),this.activeTexture=new Dd(this),this.viewport=new ma(this),this.bindFramebuffer=new xi(this),this.bindRenderbuffer=new cs(this),this.bindTexture=new Tc(this),this.bindVertexBuffer=new Ds(this),this.bindElementBuffer=new kl(this),this.bindVertexArray=new jh(this),this.pixelStoreUnpack=new yo(this),this.pixelStoreUnpackPremultiplyAlpha=new Nl(this),this.pixelStoreUnpackFlipY=new mu(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),ri(r)){this.HALF_FLOAT=r.HALF_FLOAT;const _=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=r.RGBA16F)!==null&&u!==void 0?u:_==null?void 0:_.RGBA16F_EXT,this.RGB16F=(p=r.RGB16F)!==null&&p!==void 0?p:_==null?void 0:_.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const _=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=_==null?void 0:_.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new Bo(this,r,u)}createVertexBuffer(r,u,p){return new uu(this,r,u,p)}createRenderbuffer(r,u,p){const _=this.gl,S=_.createRenderbuffer();return this.bindRenderbuffer.set(S),_.renderbufferStorage(_.RENDERBUFFER,r,u,p),this.bindRenderbuffer.set(null),S}createFramebuffer(r,u,p,_){return new Ac(this,r,u,p,_)}clear({color:r,depth:u,stencil:p}){const _=this.gl;let S=0;r&&(S|=_.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(S|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(S|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),_.clear(S)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){l.bH(r.blendFunction,nn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return ri(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var u;return ri(this.gl)?this.gl.deleteVertexArray(r):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let $o;function gu(b,r,u,p,_){const S=b.context,j=b.transform,k=S.gl,R=b.useProgram("collisionBox"),$=[];let U=0,X=0;for(let ye=0;ye<p.length;ye++){const _e=p[ye],Ae=r.getTile(_e).getBucket(u);if(!Ae)continue;const be=_?Ae.textCollisionBox:Ae.iconCollisionBox,Ee=Ae.collisionCircleArray;Ee.length>0&&($.push({circleArray:Ee,circleOffset:X,coord:_e}),U+=Ee.length/4,X=U),be&&R.draw(S,k.LINES,ur.disabled,hr.disabled,b.colorModeForRenderPass(),br.disabled,$m(b.transform),b.style.map.terrain&&b.style.map.terrain.getTerrainData(_e),j.getProjectionData({overscaledTileID:_e,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,null,b.transform.zoom,null,null,be.collisionVertexBuffer)}if(!_||!$.length)return;const Z=b.useProgram("collisionCircle"),Q=new l.c0;Q.resize(4*U),Q._trim();let se=0;for(const ye of $)for(let _e=0;_e<ye.circleArray.length/4;_e++){const Ae=4*_e,be=ye.circleArray[Ae+0],Ee=ye.circleArray[Ae+1],Ie=ye.circleArray[Ae+2],we=ye.circleArray[Ae+3];Q.emplace(se++,be,Ee,Ie,we,0),Q.emplace(se++,be,Ee,Ie,we,1),Q.emplace(se++,be,Ee,Ie,we,2),Q.emplace(se++,be,Ee,Ie,we,3)}(!$o||$o.length<2*U)&&($o=function(ye){const _e=2*ye,Ae=new l.c2;Ae.resize(_e),Ae._trim();for(let be=0;be<_e;be++){const Ee=6*be;Ae.uint16[Ee+0]=4*be+0,Ae.uint16[Ee+1]=4*be+1,Ae.uint16[Ee+2]=4*be+2,Ae.uint16[Ee+3]=4*be+2,Ae.uint16[Ee+4]=4*be+3,Ae.uint16[Ee+5]=4*be+0}return Ae}(U));const me=S.createIndexBuffer($o,!0),pe=S.createVertexBuffer(Q,l.c1.members,!0);for(const ye of $){const _e=_c(b.transform);Z.draw(S,k.TRIANGLES,ur.disabled,hr.disabled,b.colorModeForRenderPass(),br.disabled,_e,b.style.map.terrain&&b.style.map.terrain.getTerrainData(ye.coord),null,u.id,pe,me,l.aM.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,b.transform.zoom,null,null,null)}pe.destroy(),me.destroy()}const Ld=l.ag(new Float32Array(16));function zs(b,r,u,p,_,S){const{horizontalAlign:j,verticalAlign:k}=l.aH(b);return new l.P((-(j-.5)*r/_+p[0])*S,(-(k-.5)*u/_+p[1])*S)}function us(b,r,u,p,_,S){const j=r.tileAnchorPoint.add(new l.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let k=p.mult(S);u||(k=k.rotate(-_));const R=j.add(k);return wt(R.x,R.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(u){const k=fn(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(b),R=Math.atan(k.y/k.x)+(k.x<0?Math.PI:0);return b.add(p.rotate(R))}return b.add(p)}function Rl(b,r,u,p,_,S,j,k,R,$,U,X){const Z=b.text.placedSymbolArray,Q=b.text.dynamicLayoutVertexArray,se=b.icon.dynamicLayoutVertexArray,me={};Q.clear();for(let pe=0;pe<Z.length;pe++){const ye=Z.get(pe),_e=ye.hidden||!ye.crossTileID||b.allowVerticalPlacement&&!ye.placedOrientation?null:p[ye.crossTileID];if(_e){const Ae=new l.P(ye.anchorX,ye.anchorY),be={getElevation:X,width:_.width,height:_.height,pitchedLabelPlaneMatrix:S,pitchWithMap:u,transform:_,tileAnchorPoint:Ae,translation:$,unwrappedTileID:U},Ee=u?vr(Ae.x,Ae.y,be):fn(Ae.x,Ae.y,be),Ie=Co(_.cameraToCenterDistance,Ee.signedDistanceFromCamera);let we=l.ap(b.textSizeData,k,ye)*Ie/l.aB;u&&(we*=b.tilePixelRatio/j);const{width:De,height:it,anchor:Ye,textOffset:Qe,textBoxScale:Je}=_e,Tt=zs(Ye,De,it,Qe,Je,we),At=_.getPitchedTextCorrection(Ae.x+$[0],Ae.y+$[1],U),yt=us(Ee.point,be,r,Tt,-_.bearingInRadians,At),Bt=b.allowVerticalPlacement&&ye.placedOrientation===l.ao.vertical?Math.PI/2:0;for(let lr=0;lr<ye.numGlyphs;lr++)l.av(Q,yt,Bt);R&&ye.associatedIconIndex>=0&&(me[ye.associatedIconIndex]={shiftedAnchor:yt,angle:Bt})}else Io(ye.numGlyphs,Q)}if(R){se.clear();const pe=b.icon.placedSymbolArray;for(let ye=0;ye<pe.length;ye++){const _e=pe.get(ye);if(_e.hidden)Io(_e.numGlyphs,se);else{const Ae=me[ye];if(Ae)for(let be=0;be<_e.numGlyphs;be++)l.av(se,Ae.shiftedAnchor,Ae.angle);else Io(_e.numGlyphs,se)}}b.icon.dynamicLayoutVertexBuffer.updateData(se)}b.text.dynamicLayoutVertexBuffer.updateData(Q)}function Dl(b,r,u){return u.iconsInText&&r?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function Ji(b,r,u,p,_,S,j,k,R,$,U,X,Z){const Q=b.context,se=Q.gl,me=b.transform,pe=k==="map",ye=R==="map",_e=k!=="viewport"&&u.layout.get("symbol-placement")!=="point",Ae=pe&&!ye&&!_e,be=!u.layout.get("symbol-sort-key").isConstant();let Ee=!1;const Ie=b.getDepthModeForSublayer(0,ur.ReadOnly),we=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),De=[],it=me.getCircleRadiusCorrection();for(const Ye of p){const Qe=r.getTile(Ye),Je=Qe.getBucket(u);if(!Je)continue;const Tt=_?Je.text:Je.icon;if(!Tt||!Tt.segments.get().length||!Tt.hasVisibleVertices)continue;const At=Tt.programConfigurations.get(u.id),yt=_||Je.sdfIcons,Bt=_?Je.textSizeData:Je.iconSizeData,lr=ye||me.pitch!==0,Xr=b.useProgram(Dl(yt,_,Je),At),Wr=l.an(Bt,me.zoom),cn=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ye);let Cn,un,Tr,pn,ai=[0,0],$n=null;if(_)un=Qe.glyphAtlasTexture,Tr=se.LINEAR,Cn=Qe.glyphAtlasTexture.size,Je.iconsInText&&(ai=Qe.imageAtlasTexture.size,$n=Qe.imageAtlasTexture,pn=lr||b.options.rotating||b.options.zooming||Bt.kind==="composite"||Bt.kind==="camera"?se.LINEAR:se.NEAREST);else{const Rn=u.layout.get("icon-size").constantOr(0)!==1||Je.iconsNeedLinear;un=Qe.imageAtlasTexture,Tr=yt||b.options.rotating||b.options.zooming||Rn||lr?se.LINEAR:se.NEAREST,Cn=Qe.imageAtlasTexture.size}const qn=l.aC(Qe,1,b.transform.zoom),wi=Ar(pe,b.transform,qn),vs=l.L();l.aq(vs,wi);const Qa=Mn(ye,pe,b.transform,qn),Ws=l.aD(me,Qe,S,j),Ja=me.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),Ys=we&&Je.hasTextData(),_s=u.layout.get("icon-text-fit")!=="none"&&Ys&&Je.hasIconData();if(_e){const Rn=b.style.map.terrain?(Un,Tn)=>b.style.map.terrain.getElevation(Ye,Un,Tn):null,sn=u.layout.get("text-rotation-alignment")==="map";Mi(Je,b,_,wi,vs,ye,$,sn,Ye.toUnwrapped(),me.width,me.height,Ws,Rn)}const Na=_&&we||_s,Ui=_e||Na?Ld:ye?wi:b.transform.clipSpaceToPixelsMatrix,wo=yt&&u.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let So;So=yt?Je.iconsInText?Jf(Bt.kind,Wr,Ae,ye,_e,Na,b,Ui,Qa,Ws,Cn,ai,it):Od(Bt.kind,Wr,Ae,ye,_e,Na,b,Ui,Qa,Ws,_,Cn,0,it):Qf(Bt.kind,Wr,Ae,ye,_e,Na,b,Ui,Qa,Ws,_,Cn,it);const Si={program:Xr,buffers:Tt,uniformValues:So,projectionData:Ja,atlasTexture:un,atlasTextureIcon:$n,atlasInterpolation:Tr,atlasInterpolationIcon:pn,isSDF:yt,hasHalo:wo};if(be&&Je.canOverlap){Ee=!0;const Rn=Tt.segments.get();for(const sn of Rn)De.push({segments:new l.aM([sn]),sortKey:sn.sortKey,state:Si,terrainData:cn})}else De.push({segments:Tt.segments,sortKey:0,state:Si,terrainData:cn})}Ee&&De.sort((Ye,Qe)=>Ye.sortKey-Qe.sortKey);for(const Ye of De){const Qe=Ye.state;if(Q.activeTexture.set(se.TEXTURE0),Qe.atlasTexture.bind(Qe.atlasInterpolation,se.CLAMP_TO_EDGE),Qe.atlasTextureIcon&&(Q.activeTexture.set(se.TEXTURE1),Qe.atlasTextureIcon&&Qe.atlasTextureIcon.bind(Qe.atlasInterpolationIcon,se.CLAMP_TO_EDGE)),Qe.isSDF){const Je=Qe.uniformValues;Qe.hasHalo&&(Je.u_is_halo=1,ga(Qe.buffers,Ye.segments,u,b,Qe.program,Ie,U,X,Je,Qe.projectionData,Ye.terrainData)),Je.u_is_halo=0}ga(Qe.buffers,Ye.segments,u,b,Qe.program,Ie,U,X,Qe.uniformValues,Qe.projectionData,Ye.terrainData)}}function ga(b,r,u,p,_,S,j,k,R,$,U){const X=p.context;_.draw(X,X.gl.TRIANGLES,S,j,k,br.backCCW,R,U,$,u.id,b.layoutVertexBuffer,b.indexBuffer,r,u.paint,p.transform.zoom,b.programConfigurations.get(u.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function qo(b,r,u,p,_){const S=b.context,j=S.gl,k=hr.disabled,R=new nn([j.ONE,j.ONE],l.bf.transparent,[!0,!0,!0,!0]),$=r.getBucket(u);if(!$)return;const U=p.key;let X=u.heatmapFbos.get(U);X||(X=Pa(S,r.tileSize,r.tileSize),u.heatmapFbos.set(U,X)),S.bindFramebuffer.set(X.framebuffer),S.viewport.set([0,0,r.tileSize,r.tileSize]),S.clear({color:l.bf.transparent});const Z=$.programConfigurations.get(u.id),Q=b.useProgram("heatmap",Z,!_),se=b.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),me=b.style.map.terrain.getTerrainData(p);Q.draw(S,j.TRIANGLES,ur.disabled,k,R,br.disabled,bh(r,b.transform.zoom,u.paint.get("heatmap-intensity"),1),me,se,u.id,$.layoutVertexBuffer,$.indexBuffer,$.segments,u.paint,b.transform.zoom,Z)}function Va(b,r,u,p,_){const S=b.context,j=S.gl,k=b.transform;S.setColorMode(b.colorModeForRenderPass());const R=Ea(S,r),$=u.key,U=r.heatmapFbos.get($);if(!U)return;S.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,U.colorAttachment.get()),S.activeTexture.set(j.TEXTURE1),R.bind(j.LINEAR,j.CLAMP_TO_EDGE);const X=k.getProjectionData({overscaledTileID:u,applyTerrainMatrix:_,applyGlobeMatrix:!p});b.useProgram("heatmapTexture").draw(S,j.TRIANGLES,ur.disabled,hr.disabled,b.colorModeForRenderPass(),br.disabled,jd(b,r,0,1),null,X,r.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments,r.paint,k.zoom),U.destroy(),r.heatmapFbos.delete($)}function Pa(b,r,u){var p,_;const S=b.gl,j=S.createTexture();S.bindTexture(S.TEXTURE_2D,j),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR);const k=(p=b.HALF_FLOAT)!==null&&p!==void 0?p:S.UNSIGNED_BYTE,R=(_=b.RGBA16F)!==null&&_!==void 0?_:S.RGBA;S.texImage2D(S.TEXTURE_2D,0,R,r,u,0,S.RGBA,k,null);const $=b.createFramebuffer(r,u,!1,!1);return $.colorAttachment.set(j),$}function Ea(b,r){return r.colorRampTexture||(r.colorRampTexture=new l.T(b,r.colorRamp,b.gl.RGBA)),r.colorRampTexture}function yu(b,r,u,p,_,S,j,k){let R=256;if(_.stepInterpolant){const $=r.getSource().maxzoom,U=j.canonical.z===$?Math.ceil(1<<b.transform.maxZoom-j.canonical.z):1;R=l.ah(l.c4(S.maxLineLength/l.$*1024*U),256,u.maxTextureSize)}return k.gradient=l.c5({expression:_.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:k.gradient||void 0,clips:S.lineClipsArray}),k.texture?k.texture.update(k.gradient):k.texture=new l.T(u,k.gradient,p.RGBA),k.version=_.gradientVersion,k.texture}function Bd(b,r,u,p,_){b.activeTexture.set(r.TEXTURE0),u.imageAtlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE),p.updatePaintBuffers(_)}function zl(b,r,u,p,_,S){(_||b.lineAtlas.dirty)&&(r.activeTexture.set(u.TEXTURE0),b.lineAtlas.bind(r)),p.updatePaintBuffers(S)}function ea(b,r,u,p,_,S,j){const k=S.gradients[_.id];let R=k.texture;_.gradientVersion!==k.version&&(R=yu(b,r,u,p,_,S,j,k)),u.activeTexture.set(p.TEXTURE0),R.bind(_.stepInterpolant?p.NEAREST:p.LINEAR,p.CLAMP_TO_EDGE)}function Nn(b,r,u,p,_,S,j,k,R){const $=S.gradients[_.id];let U=$.texture;_.gradientVersion!==$.version&&(U=yu(b,r,u,p,_,S,j,$)),u.activeTexture.set(p.TEXTURE0),U.bind(_.stepInterpolant?p.NEAREST:p.LINEAR,p.CLAMP_TO_EDGE),u.activeTexture.set(p.TEXTURE1),b.lineAtlas.bind(u),k.updatePaintBuffers(R)}function Dr(b,r,u,p,_){if(!u||!p||!p.imageAtlas)return;const S=p.imageAtlas.patternPositions;let j=S[u.to.toString()],k=S[u.from.toString()];if(!j&&k&&(j=k),!k&&j&&(k=j),!j||!k){const R=_.getPaintProperty(r);j=S[R],k=S[R]}j&&k&&b.setConstantPatternPositions(j,k)}function Uo(b,r,u,p,_,S,j,k){const R=b.context.gl,$="fill-pattern",U=u.paint.get($),X=U&&U.constantOr(1),Z=u.getCrossfadeParameters();let Q,se,me,pe,ye;const _e=b.transform,Ae=u.paint.get("fill-translate"),be=u.paint.get("fill-translate-anchor");j?(se=X&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Q=R.LINES):(se=X?"fillPattern":"fill",Q=R.TRIANGLES);const Ee=U.constantOr(null);for(const Ie of p){const we=r.getTile(Ie);if(X&&!we.patternsLoaded())continue;const De=we.getBucket(u);if(!De)continue;const it=De.programConfigurations.get(u.id),Ye=b.useProgram(se,it),Qe=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ie);X&&(b.context.activeTexture.set(R.TEXTURE0),we.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),it.updatePaintBuffers(Z)),Dr(it,$,Ee,we,u);const Je=_e.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!k,applyTerrainMatrix:!0}),Tt=l.aD(_e,we,Ae,be);if(j){pe=De.indexBuffer2,ye=De.segments2;const yt=[R.drawingBufferWidth,R.drawingBufferHeight];me=se==="fillOutlinePattern"&&X?Wf(b,Z,we,yt,Tt):vc(yt,Tt)}else pe=De.indexBuffer,ye=De.segments,me=X?Al(b,Z,we,Tt):{u_fill_translate:Tt};const At=b.stencilModeForClipping(Ie);Ye.draw(b.context,Q,_,At,S,br.backCCW,me,Qe,Je,u.id,De.layoutVertexBuffer,pe,ye,u.paint,b.transform.zoom,it)}}function Ca(b,r,u,p,_,S,j,k){const R=b.context,$=R.gl,U="fill-extrusion-pattern",X=u.paint.get(U),Z=X.constantOr(1),Q=u.getCrossfadeParameters(),se=u.paint.get("fill-extrusion-opacity"),me=X.constantOr(null),pe=b.transform;for(const ye of p){const _e=r.getTile(ye),Ae=_e.getBucket(u);if(!Ae)continue;const be=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ye),Ee=Ae.programConfigurations.get(u.id),Ie=b.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",Ee);Z&&(b.context.activeTexture.set($.TEXTURE0),_e.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),Ee.updatePaintBuffers(Q));const we=pe.getProjectionData({overscaledTileID:ye,applyGlobeMatrix:!k,applyTerrainMatrix:!0});Dr(Ee,U,me,_e,u);const De=l.aD(pe,_e,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),it=u.paint.get("fill-extrusion-vertical-gradient"),Ye=Z?xh(b,it,se,De,ye,Q,_e):Md(b,it,se,De);Ie.draw(R,R.gl.TRIANGLES,_,S,j,br.backCCW,Ye,be,we,u.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,u.paint,b.transform.zoom,Ee,b.style.map.terrain&&Ae.centroidVertexBuffer)}}function Mc(b,r,u,p,_,S,j,k,R){var $;const U=b.style.projection,X=b.context,Z=b.transform,Q=X.gl,se=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],me=b.useProgram("hillshade",null,!1,se),pe=!b.options.moving;for(const ye of p){const _e=r.getTile(ye),Ae=_e.fbo;if(!Ae)continue;const be=U.getMeshFromTileID(X,ye.canonical,k,!0,"raster"),Ee=($=b.style.map.terrain)===null||$===void 0?void 0:$.getTerrainData(ye);X.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,Ae.colorAttachment.get());const Ie=Z.getProjectionData({overscaledTileID:ye,aligned:pe,applyGlobeMatrix:!R,applyTerrainMatrix:!0});me.draw(X,Q.TRIANGLES,S,_[ye.overscaledZ],j,br.backCCW,xc(b,_e,u),Ee,Ie,u.id,be.vertexBuffer,be.indexBuffer,be.segments)}}function Ga(b,r,u,p,_,S,j,k,R){var $;const U=b.style.projection,X=b.context,Z=b.transform,Q=X.gl,se=b.useProgram("colorRelief"),me=!b.options.moving;let pe=!0,ye=0;for(const _e of p){const Ae=r.getTile(_e),be=Ae.dem;if(pe){const Ye=Q.getParameter(Q.MAX_TEXTURE_SIZE),{elevationTexture:Qe,colorTexture:Je}=u.getColorRampTextures(X,Ye,be.getUnpackVector());X.activeTexture.set(Q.TEXTURE1),Qe.bind(Q.NEAREST,Q.CLAMP_TO_EDGE),X.activeTexture.set(Q.TEXTURE4),Je.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),pe=!1,ye=Qe.size[0]}if(!be||!be.data)continue;const Ee=be.stride,Ie=be.getPixels();if(X.activeTexture.set(Q.TEXTURE0),X.pixelStoreUnpackPremultiplyAlpha.set(!1),Ae.demTexture=Ae.demTexture||b.getTileTexture(Ee),Ae.demTexture){const Ye=Ae.demTexture;Ye.update(Ie,{premultiply:!1}),Ye.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)}else Ae.demTexture=new l.T(X,Ie,Q.RGBA,{premultiply:!1}),Ae.demTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE);const we=U.getMeshFromTileID(X,_e.canonical,k,!0,"raster"),De=($=b.style.map.terrain)===null||$===void 0?void 0:$.getTerrainData(_e),it=Z.getProjectionData({overscaledTileID:_e,aligned:me,applyGlobeMatrix:!R,applyTerrainMatrix:!0});se.draw(X,Q.TRIANGLES,S,_[_e.overscaledZ],j,br.backCCW,lu(u,Ae.dem,ye),De,it,u.id,we.vertexBuffer,we.indexBuffer,we.segments)}}const jc=[new l.P(0,0),new l.P(l.$,0),new l.P(l.$,l.$),new l.P(0,l.$)];function vu(b,r,u,p,_,S,j,k,R=!1,$=!1){const U=p[p.length-1].overscaledZ,X=b.context,Z=X.gl,Q=b.useProgram("raster"),se=b.transform,me=b.style.projection,pe=b.colorModeForRenderPass(),ye=!b.options.moving,_e=u.paint.get("raster-opacity"),Ae=u.paint.get("raster-resampling"),be=u.paint.get("raster-fade-duration"),Ee=!!b.style.map.terrain;for(const Ie of p){const we=b.getDepthModeForSublayer(Ie.overscaledZ-U,_e===1?ur.ReadWrite:ur.ReadOnly,Z.LESS),De=r.getTile(Ie),it=Ae==="nearest"?Z.NEAREST:Z.LINEAR;X.activeTexture.set(Z.TEXTURE0),De.texture.bind(it,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),X.activeTexture.set(Z.TEXTURE1);const{parentTile:Ye,parentScaleBy:Qe,parentTopLeft:Je,fadeValues:Tt}=Pc(De,r,be,Ee);De.fadeOpacity=Tt.tileOpacity,Ye?(Ye.fadeOpacity=Tt.parentTileOpacity,Ye.texture.bind(it,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST)):De.texture.bind(it,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),De.texture.useMipmap&&X.extTextureFilterAnisotropic&&b.transform.pitch>20&&Z.texParameterf(Z.TEXTURE_2D,X.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,X.extTextureFilterAnisotropicMax);const At=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ie),yt=se.getProjectionData({overscaledTileID:Ie,aligned:ye,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),Bt=Sh(Je,Qe,Tt.fadeMix,u,k),lr=me.getMeshFromTileID(X,Ie.canonical,S,j,"raster");Q.draw(X,Z.TRIANGLES,we,_?_[Ie.overscaledZ]:hr.disabled,pe,R?br.frontCCW:br.backCCW,Bt,At,yt,u.id,lr.vertexBuffer,lr.indexBuffer,lr.segments)}}function Pc(b,r,u,p){const _={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(u===0||p)return _;if(b.fadingParentID){const S=r._getLoadedTile(b.fadingParentID);if(!S)return _;const j=Math.pow(2,S.tileID.overscaledZ-b.tileID.overscaledZ),k=[b.tileID.canonical.x*j%1,b.tileID.canonical.y*j%1],R=function($,U,X){const Z=L.now(),Q=(Z-U.timeAdded)/X,se=$.fadingDirection===Ne.Incoming,me=l.ah((Z-$.timeAdded)/X,0,1),pe=l.ah(1-Q,0,1),ye=se?me:pe;return{tileOpacity:ye,parentTileOpacity:se?pe:me,fadeMix:{opacity:1,mix:1-ye}}}(b,S,u);return{parentTile:S,parentScaleBy:j,parentTopLeft:k,fadeValues:R}}if(b.selfFading){const S=function(j,k){const R=L.now(),$=l.ah((R-j.timeAdded)/k,0,1);return{tileOpacity:$,fadeMix:{opacity:$,mix:0}}}(b,u);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:S}}return _}const _n=new l.bf(1,0,0,1),Ls=new l.bf(0,1,0,1),Fi=new l.bf(0,0,1,1),_u=new l.bf(1,0,1,1),Vo=new l.bf(0,1,1,1);function _o(b,r,u,p){va(b,0,r+u/2,b.transform.width,u,p)}function ya(b,r,u,p){va(b,r-u/2,0,u,b.transform.height,p)}function va(b,r,u,p,_,S){const j=b.context,k=j.gl;k.enable(k.SCISSOR_TEST),k.scissor(r*b.pixelRatio,u*b.pixelRatio,p*b.pixelRatio,_*b.pixelRatio),j.clear({color:S}),k.disable(k.SCISSOR_TEST)}function Ll(b,r,u){const p=b.context,_=p.gl,S=b.useProgram("debug"),j=ur.disabled,k=hr.disabled,R=b.colorModeForRenderPass(),$="$debug",U=b.style.map.terrain&&b.style.map.terrain.getTerrainData(u);p.activeTexture.set(_.TEXTURE0);const X=r.getTileByID(u.key).latestRawTileData,Z=Math.floor((X&&X.byteLength||0)/1024),Q=r.getTile(u).tileSize,se=512/Math.min(Q,512)*(u.overscaledZ/b.transform.zoom)*.5;let me=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(me+=` => ${u.overscaledZ}`),function(ye,_e){ye.initDebugOverlayCanvas();const Ae=ye.debugOverlayCanvas,be=ye.context.gl,Ee=ye.debugOverlayCanvas.getContext("2d");Ee.clearRect(0,0,Ae.width,Ae.height),Ee.shadowColor="white",Ee.shadowBlur=2,Ee.lineWidth=1.5,Ee.strokeStyle="white",Ee.textBaseline="top",Ee.font="bold 36px Open Sans, sans-serif",Ee.fillText(_e,5,5),Ee.strokeText(_e,5,5),ye.debugOverlayTexture.update(Ae),ye.debugOverlayTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE)}(b,`${me} ${Z}kB`);const pe=b.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});S.draw(p,_.TRIANGLES,j,k,nn.alphaBlended,br.disabled,Yf(l.bf.transparent,se),null,pe,$,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),S.draw(p,_.LINE_STRIP,j,k,R,br.disabled,Yf(l.bf.red),U,pe,$,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function Ec(b,r,u,p){const{isRenderingGlobe:_}=p,S=b.context,j=S.gl,k=b.transform,R=b.colorModeForRenderPass(),$=b.getDepthModeFor3D(),U=b.useProgram("terrain");S.bindFramebuffer.set(null),S.viewport.set([0,0,b.width,b.height]);for(const X of u){const Z=r.getTerrainMesh(X.tileID),Q=b.renderToTexture.getTexture(X),se=r.getTerrainData(X.tileID);S.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,Q.texture);const me=r.getMeshFrameDelta(k.zoom),pe=k.calculateFogMatrix(X.tileID.toUnwrapped()),ye=Ad(me,pe,b.style.sky,k.pitch,_),_e=k.getProjectionData({overscaledTileID:X.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});U.draw(S,j.TRIANGLES,$,hr.disabled,R,br.backCCW,ye,se,_e,"terrain",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}function Bl(b,r){if(!r.mesh){const u=new l.aL;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);const p=new l.aN;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),r.mesh=new gc(b.createVertexBuffer(u,Ki.members),b.createIndexBuffer(p),l.aM.simpleSegment(0,0,u.length,p.length))}return r.mesh}class xu{constructor(r,u){this.context=new Ph(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=qt.maxUnderzooming+qt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new nu}resize(r,u,p){if(this.width=Math.floor(r*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const r=this.context,u=new l.aL;u.emplaceBack(0,0),u.emplaceBack(l.$,0),u.emplaceBack(0,l.$),u.emplaceBack(l.$,l.$),this.tileExtentBuffer=r.createVertexBuffer(u,Ki.members),this.tileExtentSegments=l.aM.simpleSegment(0,0,4,2);const p=new l.aL;p.emplaceBack(0,0),p.emplaceBack(l.$,0),p.emplaceBack(0,l.$),p.emplaceBack(l.$,l.$),this.debugBuffer=r.createVertexBuffer(p,Ki.members),this.debugSegments=l.aM.simpleSegment(0,0,4,5);const _=new l.c7;_.emplaceBack(0,0,0,0),_.emplaceBack(l.$,0,l.$,0),_.emplaceBack(0,l.$,0,l.$),_.emplaceBack(l.$,l.$,l.$,l.$),this.rasterBoundsBuffer=r.createVertexBuffer(_,Fm.members),this.rasterBoundsSegments=l.aM.simpleSegment(0,0,4,2);const S=new l.aL;S.emplaceBack(0,0),S.emplaceBack(l.$,0),S.emplaceBack(0,l.$),S.emplaceBack(l.$,l.$),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(S,Ki.members),this.rasterBoundsSegmentsPosOnly=l.aM.simpleSegment(0,0,4,5);const j=new l.aL;j.emplaceBack(0,0),j.emplaceBack(1,0),j.emplaceBack(0,1),j.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(j,Ki.members),this.viewportSegments=l.aM.simpleSegment(0,0,4,2);const k=new l.c8;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(k);const R=new l.aN;R.emplaceBack(1,0,2),R.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(R);const $=this.context.gl;this.stencilClearMode=new hr({func:$.ALWAYS,mask:0},0,255,$.ZERO,$.ZERO,$.ZERO),this.tileExtentMesh=new gc(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=l.L();l.bZ(p,0,this.width,this.height,0,0,1),l.N(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]);const _={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(r,u.TRIANGLES,ur.disabled,this.stencilClearMode,nn.disabled,br.disabled,null,null,_,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u,p){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source,this.nextStencilID+u.length>256&&this.clearStencil();const _=this.context;_.setColorMode(nn.disabled),_.setDepthMode(ur.disabled);const S={};for(const j of u)S[j.key]=this.nextStencilID++;this._renderTileMasks(S,u,p,!0),this._renderTileMasks(S,u,p,!1),this._tileClippingMaskIDs=S}_renderTileMasks(r,u,p,_){const S=this.context,j=S.gl,k=this.style.projection,R=this.transform,$=this.useProgram("clippingMask");for(const U of u){const X=r[U.key],Z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(U),Q=k.getMeshFromTileID(this.context,U.canonical,_,!0,"stencil"),se=R.getProjectionData({overscaledTileID:U,applyGlobeMatrix:!p,applyTerrainMatrix:!0});$.draw(S,j.TRIANGLES,ur.disabled,new hr({func:j.ALWAYS,mask:0},X,255,j.KEEP,j.KEEP,j.REPLACE),nn.disabled,p?br.disabled:br.backCCW,null,Z,se,"$clipping",Q.vertexBuffer,Q.indexBuffer,Q.segments)}}_renderTilesDepthBuffer(){const r=this.context,u=r.gl,p=this.style.projection,_=this.transform,S=this.useProgram("depth"),j=this.getDepthModeFor3D(),k=Or(_,{tileSize:_.tileSize});for(const R of k){const $=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R),U=p.getMeshFromTileID(this.context,R.canonical,!0,!0,"raster"),X=_.getProjectionData({overscaledTileID:R,applyGlobeMatrix:!0,applyTerrainMatrix:!0});S.draw(r,u.TRIANGLES,j,hr.disabled,nn.disabled,br.backCCW,null,$,X,"$clipping",U.vertexBuffer,U.indexBuffer,U.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new hr({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new hr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const u=this.context.gl,p=r.sort((j,k)=>k.overscaledZ-j.overscaledZ),_=p[p.length-1].overscaledZ,S=p[0].overscaledZ-_+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const j={};for(let k=0;k<S;k++)j[k+_]=new hr({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=S,[j,p]}return[{[_]:hr.disabled},p]}stencilConfigForOverlapTwoPass(r){const u=this.context.gl,p=r.sort((j,k)=>k.overscaledZ-j.overscaledZ),_=p[p.length-1].overscaledZ,S=p[0].overscaledZ-_+1;if(this.clearStencil(),S>1){const j={},k={};for(let R=0;R<S;R++)j[R+_]=new hr({func:u.GREATER,mask:255},S+1+R,255,u.KEEP,u.KEEP,u.REPLACE),k[R+_]=new hr({func:u.GREATER,mask:255},1+R,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*S+1,[j,k,p]}return this.nextStencilID=3,[{[_]:new hr({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[_]:new hr({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},p]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new nn([r.CONSTANT_COLOR,r.ONE],new l.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?nn.unblended:nn.alphaBlended}getDepthModeForSublayer(r,u,p){if(!this.opaquePassEnabledForLayer())return ur.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new ur(p||this.context.gl.LEQUAL,u,[_,_])}getDepthModeFor3D(){return new ur(this.context.gl.LEQUAL,ur.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){var p,_;this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(L.now()),this.imageManager.beginFrame();const S=this.style._order,j=this.style.sourceCaches,k={},R={},$={},U={isRenderingToTexture:!1,isRenderingGlobe:((p=r.projection)===null||p===void 0?void 0:p.transitionState)>0};for(const Z in j){const Q=j[Z];Q.used&&Q.prepare(this.context),k[Z]=Q.getVisibleCoordinates(!1),R[Z]=k[Z].slice().reverse(),$[Z]=Q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Z=0;Z<S.length;Z++)if(this.style._layers[S[Z]].is3D()){this.opaquePassCutoff=Z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Z of S){const Q=this.style._layers[Z];if(!Q.hasOffscreenPass()||Q.isHidden(this.transform.zoom))continue;const se=R[Q.source];(Q.type==="custom"||se.length)&&this.renderLayer(this,j[Q.source],Q,se,U)}if((_=this.style.projection)===null||_===void 0||_.updateGPUdependent({context:this.context,useProgram:Z=>this.useProgram(Z)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.bf.black:l.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Z,Q){const se=Z.context,me=se.gl,pe=((Ie,we,De)=>{const it=Math.cos(we.rollInRadians),Ye=Math.sin(we.rollInRadians),Qe=Xe(we),Je=we.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ie.properties.get("sky-color"),u_horizon_color:Ie.properties.get("horizon-color"),u_horizon:[(we.width/2-Qe*Ye)*De,(we.height/2+Qe*it)*De],u_horizon_normal:[-Ye,it],u_sky_horizon_blend:Ie.properties.get("sky-horizon-blend")*we.height/2*De,u_sky_blend:Je}})(Q,Z.style.map.transform,Z.pixelRatio),ye=new ur(me.LEQUAL,ur.ReadWrite,[0,1]),_e=hr.disabled,Ae=Z.colorModeForRenderPass(),be=Z.useProgram("sky"),Ee=Bl(se,Q);be.draw(se,me.TRIANGLES,ye,_e,Ae,br.disabled,pe,null,void 0,"sky",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)}(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=S.length-1;this.currentLayer>=0;this.currentLayer--){const Z=this.style._layers[S[this.currentLayer]],Q=j[Z.source],se=k[Z.source];this._renderTileClippingMasks(Z,se,!1),this.renderLayer(this,Q,Z,se,U)}this.renderPass="translucent";let X=!1;for(this.currentLayer=0;this.currentLayer<S.length;this.currentLayer++){const Z=this.style._layers[S[this.currentLayer]],Q=j[Z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Z,U))continue;this.opaquePassEnabledForLayer()||X||(X=!0,U.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const se=(Z.type==="symbol"?$:R)[Z.source];this._renderTileClippingMasks(Z,k[Z.source],!!this.renderToTexture),this.renderLayer(this,Q,Z,se,U)}if(U.isRenderingGlobe&&function(Z,Q,se){const me=Z.context,pe=me.gl,ye=Z.useProgram("atmosphere"),_e=new ur(pe.LEQUAL,ur.ReadOnly,[0,1]),Ae=Z.transform,be=function(Je,Tt){const At=Je.properties.get("position"),yt=[-At.x,-At.y,-At.z],Bt=l.ag(new Float64Array(16));return Je.properties.get("anchor")==="map"&&(l.b6(Bt,Bt,Tt.rollInRadians),l.b7(Bt,Bt,-Tt.pitchInRadians),l.b6(Bt,Bt,Tt.bearingInRadians),l.b7(Bt,Bt,Tt.center.lat*Math.PI/180),l.bz(Bt,Bt,-Tt.center.lng*Math.PI/180)),l.c6(yt,yt,Bt),yt}(se,Z.transform),Ee=Ae.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ie=Q.properties.get("atmosphere-blend")*Ee.projectionTransition;if(Ie===0)return;const we=Sl(Ae.worldSize,Ae.center.lat),De=Ae.inverseProjectionMatrix,it=new Float64Array(4);it[3]=1,l.aw(it,it,Ae.modelViewProjectionMatrix),it[0]/=it[3],it[1]/=it[3],it[2]/=it[3],it[3]=1,l.aw(it,it,De),it[0]/=it[3],it[1]/=it[3],it[2]/=it[3],it[3]=1;const Ye=((Je,Tt,At,yt,Bt)=>({u_sun_pos:Je,u_atmosphere_blend:Tt,u_globe_position:At,u_globe_radius:yt,u_inv_proj_matrix:Bt}))(be,Ie,[it[0],it[1],it[2]],we,De),Qe=Bl(me,Q);ye.draw(me,pe.TRIANGLES,_e,hr.disabled,nn.alphaBlended,br.disabled,Ye,null,null,"atmosphere",Qe.vertexBuffer,Qe.indexBuffer,Qe.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Z=function(Q,se){let me=null;const pe=Object.values(Q._layers).flatMap(be=>be.source&&!be.isHidden(se)?[Q.sourceCaches[be.source]]:[]),ye=pe.filter(be=>be.getSource().type==="vector"),_e=pe.filter(be=>be.getSource().type!=="vector"),Ae=be=>{(!me||me.getSource().maxzoom<be.getSource().maxzoom)&&(me=be)};return ye.forEach(be=>Ae(be)),me||_e.forEach(be=>Ae(be)),me}(this.style,this.transform.zoom);Z&&function(Q,se,me){for(let pe=0;pe<me.length;pe++)Ll(Q,se,me[pe])}(this,Z,Z.getVisibleCoordinates())}this.options.showPadding&&function(Z){const Q=Z.transform.padding;_o(Z,Z.transform.height-(Q.top||0),3,_n),_o(Z,Q.bottom||0,3,Ls),ya(Z,Q.left||0,3,Fi),ya(Z,Z.transform.width-(Q.right||0),3,_u);const se=Z.transform.centerPoint;(function(me,pe,ye,_e){va(me,pe-1,ye-10,2,20,_e),va(me,pe-10,ye-1,20,2,_e)})(Z,se.x,Z.transform.height-se.y,Vo)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=r?!l.c9(u,p):!l.ca(u,p)),_||(_=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),_&&(l.cb(u,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(S,j){const k=S.context,R=k.gl,$=S.transform,U=nn.unblended,X=new ur(R.LEQUAL,ur.ReadWrite,[0,1]),Z=j.sourceCache.getRenderableTiles(),Q=S.useProgram("terrainDepth");k.bindFramebuffer.set(j.getFramebuffer("depth").framebuffer),k.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),k.clear({color:l.bf.transparent,depth:1});for(const se of Z){const me=j.getTerrainMesh(se.tileID),pe=j.getTerrainData(se.tileID),ye=$.getProjectionData({overscaledTileID:se.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),_e={u_ele_delta:j.getMeshFrameDelta($.zoom)};Q.draw(k,R.TRIANGLES,X,hr.disabled,U,br.backCCW,_e,pe,ye,"terrain",me.vertexBuffer,me.indexBuffer,me.segments)}k.bindFramebuffer.set(null),k.viewport.set([0,0,S.width,S.height])}(this,this.style.map.terrain),function(S,j){const k=S.context,R=k.gl,$=S.transform,U=nn.unblended,X=new ur(R.LEQUAL,ur.ReadWrite,[0,1]),Z=j.getCoordsTexture(),Q=j.sourceCache.getRenderableTiles(),se=S.useProgram("terrainCoords");k.bindFramebuffer.set(j.getFramebuffer("coords").framebuffer),k.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),k.clear({color:l.bf.transparent,depth:1}),j.coordsIndex=[];for(const me of Q){const pe=j.getTerrainMesh(me.tileID),ye=j.getTerrainData(me.tileID);k.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,Z.texture);const _e={u_terrain_coords_id:(255-j.coordsIndex.length)/255,u_texture:0,u_ele_delta:j.getMeshFrameDelta($.zoom)},Ae=$.getProjectionData({overscaledTileID:me.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});se.draw(k,R.TRIANGLES,X,hr.disabled,U,br.backCCW,_e,ye,Ae,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),j.coordsIndex.push(me.tileID.key)}k.bindFramebuffer.set(null),k.viewport.set([0,0,S.width,S.height])}(this,this.style.map.terrain))}renderLayer(r,u,p,_,S){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(_||[]).length)&&(this.id=p.id,l.cc(p)?function(j,k,R,$,U,X){if(j.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=X,Q=hr.disabled,se=j.colorModeForRenderPass();(R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(me,pe,ye,_e,Ae,be,Ee,Ie,we){const De=pe.transform,it=pe.style.map.terrain,Ye=Ae==="map",Qe=be==="map";for(const Je of me){const Tt=_e.getTile(Je),At=Tt.getBucket(ye);if(!At||!At.text||!At.text.segments.get().length)continue;const yt=l.an(At.textSizeData,De.zoom),Bt=l.aC(Tt,1,pe.transform.zoom),lr=Ar(Ye,pe.transform,Bt),Xr=ye.layout.get("icon-text-fit")!=="none"&&At.hasIconData();if(yt){const Wr=Math.pow(2,De.zoom-Tt.tileID.overscaledZ),cn=it?(Cn,un)=>it.getElevation(Je,Cn,un):null;Rl(At,Ye,Qe,we,De,lr,Wr,yt,Xr,l.aD(De,Tt,Ee,Ie),Je.toUnwrapped(),cn)}}}($,j,R,k,R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),U),R.paint.get("icon-opacity").constantOr(1)!==0&&Ji(j,k,R,$,!1,R.paint.get("icon-translate"),R.paint.get("icon-translate-anchor"),R.layout.get("icon-rotation-alignment"),R.layout.get("icon-pitch-alignment"),R.layout.get("icon-keep-upright"),Q,se,Z),R.paint.get("text-opacity").constantOr(1)!==0&&Ji(j,k,R,$,!0,R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.layout.get("text-keep-upright"),Q,se,Z),k.map.showCollisionBoxes&&(gu(j,k,R,$,!0),gu(j,k,R,$,!1))}(r,u,p,_,this.style.placement.variableOffsets,S):l.cd(p)?function(j,k,R,$,U){if(j.renderPass!=="translucent")return;const{isRenderingToTexture:X}=U,Z=R.paint.get("circle-opacity"),Q=R.paint.get("circle-stroke-width"),se=R.paint.get("circle-stroke-opacity"),me=!R.layout.get("circle-sort-key").isConstant();if(Z.constantOr(1)===0&&(Q.constantOr(1)===0||se.constantOr(1)===0))return;const pe=j.context,ye=pe.gl,_e=j.transform,Ae=j.getDepthModeForSublayer(0,ur.ReadOnly),be=hr.disabled,Ee=j.colorModeForRenderPass(),Ie=[],we=_e.getCircleRadiusCorrection();for(let De=0;De<$.length;De++){const it=$[De],Ye=k.getTile(it),Qe=Ye.getBucket(R);if(!Qe)continue;const Je=R.paint.get("circle-translate"),Tt=R.paint.get("circle-translate-anchor"),At=l.aD(_e,Ye,Je,Tt),yt=Qe.programConfigurations.get(R.id),Bt=j.useProgram("circle",yt),lr=Qe.layoutVertexBuffer,Xr=Qe.indexBuffer,Wr=j.style.map.terrain&&j.style.map.terrain.getTerrainData(it),cn={programConfiguration:yt,program:Bt,layoutVertexBuffer:lr,indexBuffer:Xr,uniformValues:ss(j,Ye,R,At,we),terrainData:Wr,projectionData:_e.getProjectionData({overscaledTileID:it,applyGlobeMatrix:!X,applyTerrainMatrix:!0})};if(me){const Cn=Qe.segments.get();for(const un of Cn)Ie.push({segments:new l.aM([un]),sortKey:un.sortKey,state:cn})}else Ie.push({segments:Qe.segments,sortKey:0,state:cn})}me&&Ie.sort((De,it)=>De.sortKey-it.sortKey);for(const De of Ie){const{programConfiguration:it,program:Ye,layoutVertexBuffer:Qe,indexBuffer:Je,uniformValues:Tt,terrainData:At,projectionData:yt}=De.state;Ye.draw(pe,ye.TRIANGLES,Ae,be,Ee,br.backCCW,Tt,At,yt,R.id,Qe,Je,De.segments,R.paint,j.transform.zoom,it)}}(r,u,p,_,S):l.ce(p)?function(j,k,R,$,U){if(R.paint.get("heatmap-opacity")===0)return;const X=j.context,{isRenderingToTexture:Z,isRenderingGlobe:Q}=U;if(j.style.map.terrain){for(const se of $){const me=k.getTile(se);k.hasRenderableParent(se)||(j.renderPass==="offscreen"?qo(j,me,R,se,Q):j.renderPass==="translucent"&&Va(j,R,se,Z,Q))}X.viewport.set([0,0,j.width,j.height])}else j.renderPass==="offscreen"?function(se,me,pe,ye){const _e=se.context,Ae=_e.gl,be=se.transform,Ee=hr.disabled,Ie=new nn([Ae.ONE,Ae.ONE],l.bf.transparent,[!0,!0,!0,!0]);(function(we,De,it){const Ye=we.gl;we.activeTexture.set(Ye.TEXTURE1),we.viewport.set([0,0,De.width/4,De.height/4]);let Qe=it.heatmapFbos.get(l.c3);Qe?(Ye.bindTexture(Ye.TEXTURE_2D,Qe.colorAttachment.get()),we.bindFramebuffer.set(Qe.framebuffer)):(Qe=Pa(we,De.width/4,De.height/4),it.heatmapFbos.set(l.c3,Qe))})(_e,se,pe),_e.clear({color:l.bf.transparent});for(let we=0;we<ye.length;we++){const De=ye[we];if(me.hasRenderableParent(De))continue;const it=me.getTile(De),Ye=it.getBucket(pe);if(!Ye)continue;const Qe=Ye.programConfigurations.get(pe.id),Je=se.useProgram("heatmap",Qe),Tt=be.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),At=be.getCircleRadiusCorrection();Je.draw(_e,Ae.TRIANGLES,ur.disabled,Ee,Ie,br.backCCW,bh(it,be.zoom,pe.paint.get("heatmap-intensity"),At),null,Tt,pe.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,pe.paint,be.zoom,Qe)}_e.viewport.set([0,0,se.width,se.height])}(j,k,R,$):j.renderPass==="translucent"&&function(se,me){const pe=se.context,ye=pe.gl;pe.setColorMode(se.colorModeForRenderPass());const _e=me.heatmapFbos.get(l.c3);_e&&(pe.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,_e.colorAttachment.get()),pe.activeTexture.set(ye.TEXTURE1),Ea(pe,me).bind(ye.LINEAR,ye.CLAMP_TO_EDGE),se.useProgram("heatmapTexture").draw(pe,ye.TRIANGLES,ur.disabled,hr.disabled,se.colorModeForRenderPass(),br.disabled,jd(se,me,0,1),null,null,me.id,se.viewportBuffer,se.quadTriangleIndexBuffer,se.viewportSegments,me.paint,se.transform.zoom))}(j,R)}(r,u,p,_,S):l.cf(p)?function(j,k,R,$,U){if(j.renderPass!=="translucent")return;const{isRenderingToTexture:X}=U,Z=R.paint.get("line-opacity"),Q=R.paint.get("line-width");if(Z.constantOr(1)===0||Q.constantOr(1)===0)return;const se=j.getDepthModeForSublayer(0,ur.ReadOnly),me=j.colorModeForRenderPass(),pe=R.paint.get("line-dasharray"),ye=pe.constantOr(1),_e=R.paint.get("line-pattern"),Ae=_e.constantOr(1),be=R.paint.get("line-gradient"),Ee=R.getCrossfadeParameters();let Ie;Ie=Ae?"linePattern":ye&&be?"lineGradientSDF":ye?"lineSDF":be?"lineGradient":"line";const we=j.context,De=we.gl,it=j.transform;let Ye=!0;for(const Qe of $){const Je=k.getTile(Qe);if(Ae&&!Je.patternsLoaded())continue;const Tt=Je.getBucket(R);if(!Tt)continue;const At=Tt.programConfigurations.get(R.id),yt=j.context.program.get(),Bt=j.useProgram(Ie,At),lr=Ye||Bt.program!==yt,Xr=j.style.map.terrain&&j.style.map.terrain.getTerrainData(Qe),Wr=_e.constantOr(null),cn=pe&&pe.constantOr(null);if(Wr&&Je.imageAtlas){const ai=Je.imageAtlas,$n=ai.patternPositions[Wr.to.toString()],qn=ai.patternPositions[Wr.from.toString()];$n&&qn&&At.setConstantPatternPositions($n,qn)}else if(cn){const ai=R.layout.get("line-cap")==="round",$n=j.lineAtlas.getDash(cn.to,ai),qn=j.lineAtlas.getDash(cn.from,ai);At.setConstantDashPositions($n,qn)}const Cn=it.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!X,applyTerrainMatrix:!0}),un=it.getPixelScale();let Tr;Ae?(Tr=ls(j,Je,R,un,Ee),Bd(we,De,Je,At,Ee)):ye&&be?(Tr=Ed(j,Je,R,un,Ee,Tt.lineClipsArray.length),Nn(j,k,we,De,R,Tt,Qe,At,Ee)):ye?(Tr=wh(j,Je,R,un,Ee),zl(j,we,De,At,lr,Ee)):be?(Tr=Pd(j,Je,R,un,Tt.lineClipsArray.length),ea(j,k,we,De,R,Tt,Qe)):Tr=bc(j,Je,R,un);const pn=j.stencilModeForClipping(Qe);Bt.draw(we,De.TRIANGLES,se,pn,me,br.disabled,Tr,Xr,Cn,R.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,R.paint,j.transform.zoom,At,Tt.layoutVertexBuffer2),Ye=!1}}(r,u,p,_,S):l.cg(p)?function(j,k,R,$,U){const X=R.paint.get("fill-color"),Z=R.paint.get("fill-opacity");if(Z.constantOr(1)===0)return;const{isRenderingToTexture:Q}=U,se=j.colorModeForRenderPass(),me=R.paint.get("fill-pattern"),pe=j.opaquePassEnabledForLayer()&&!me.constantOr(1)&&X.constantOr(l.bf.transparent).a===1&&Z.constantOr(0)===1?"opaque":"translucent";if(j.renderPass===pe){const ye=j.getDepthModeForSublayer(1,j.renderPass==="opaque"?ur.ReadWrite:ur.ReadOnly);Uo(j,k,R,$,ye,se,!1,Q)}if(j.renderPass==="translucent"&&R.paint.get("fill-antialias")){const ye=j.getDepthModeForSublayer(R.getPaintProperty("fill-outline-color")?2:0,ur.ReadOnly);Uo(j,k,R,$,ye,se,!0,Q)}}(r,u,p,_,S):l.ch(p)?function(j,k,R,$,U){const X=R.paint.get("fill-extrusion-opacity");if(X===0)return;const{isRenderingToTexture:Z}=U;if(j.renderPass==="translucent"){const Q=new ur(j.context.gl.LEQUAL,ur.ReadWrite,j.depthRangeFor3D);if(X!==1||R.paint.get("fill-extrusion-pattern").constantOr(1))Ca(j,k,R,$,Q,hr.disabled,nn.disabled,Z),Ca(j,k,R,$,Q,j.stencilModeFor3D(),j.colorModeForRenderPass(),Z);else{const se=j.colorModeForRenderPass();Ca(j,k,R,$,Q,hr.disabled,se,Z)}}}(r,u,p,_,S):l.ci(p)?function(j,k,R,$,U){if(j.renderPass!=="offscreen"&&j.renderPass!=="translucent")return;const{isRenderingToTexture:X}=U,Z=j.context,Q=j.style.projection.useSubdivision,se=j.getDepthModeForSublayer(0,ur.ReadOnly),me=j.colorModeForRenderPass();if(j.renderPass==="offscreen")(function(pe,ye,_e,Ae,be,Ee,Ie){const we=pe.context,De=we.gl;for(const it of _e){const Ye=ye.getTile(it),Qe=Ye.dem;if(!Qe||!Qe.data||!Ye.needsHillshadePrepare)continue;const Je=Qe.dim,Tt=Qe.stride,At=Qe.getPixels();if(we.activeTexture.set(De.TEXTURE1),we.pixelStoreUnpackPremultiplyAlpha.set(!1),Ye.demTexture=Ye.demTexture||pe.getTileTexture(Tt),Ye.demTexture){const Bt=Ye.demTexture;Bt.update(At,{premultiply:!1}),Bt.bind(De.NEAREST,De.CLAMP_TO_EDGE)}else Ye.demTexture=new l.T(we,At,De.RGBA,{premultiply:!1}),Ye.demTexture.bind(De.NEAREST,De.CLAMP_TO_EDGE);we.activeTexture.set(De.TEXTURE0);let yt=Ye.fbo;if(!yt){const Bt=new l.T(we,{width:Je,height:Je,data:null},De.RGBA);Bt.bind(De.LINEAR,De.CLAMP_TO_EDGE),yt=Ye.fbo=we.createFramebuffer(Je,Je,!0,!1),yt.colorAttachment.set(Bt.texture)}we.bindFramebuffer.set(yt.framebuffer),we.viewport.set([0,0,Je,Je]),pe.useProgram("hillshadePrepare").draw(we,De.TRIANGLES,be,Ee,Ie,br.disabled,Ml(Ye.tileID,Qe),null,null,Ae.id,pe.rasterBoundsBuffer,pe.quadTriangleIndexBuffer,pe.rasterBoundsSegments),Ye.needsHillshadePrepare=!1}})(j,k,$,R,se,hr.disabled,me),Z.viewport.set([0,0,j.width,j.height]);else if(j.renderPass==="translucent")if(Q){const[pe,ye,_e]=j.stencilConfigForOverlapTwoPass($);Mc(j,k,R,_e,pe,se,me,!1,X),Mc(j,k,R,_e,ye,se,me,!0,X)}else{const[pe,ye]=j.getStencilConfigForOverlapAndUpdateStencilID($);Mc(j,k,R,ye,pe,se,me,!1,X)}}(r,u,p,_,S):l.cj(p)?function(j,k,R,$,U){if(j.renderPass!=="translucent"||!$.length)return;const{isRenderingToTexture:X}=U,Z=j.style.projection.useSubdivision,Q=j.getDepthModeForSublayer(0,ur.ReadOnly),se=j.colorModeForRenderPass();if(Z){const[me,pe,ye]=j.stencilConfigForOverlapTwoPass($);Ga(j,k,R,ye,me,Q,se,!1,X),Ga(j,k,R,ye,pe,Q,se,!0,X)}else{const[me,pe]=j.getStencilConfigForOverlapAndUpdateStencilID($);Ga(j,k,R,pe,me,Q,se,!1,X)}}(r,u,p,_,S):l.bK(p)?function(j,k,R,$,U){if(j.renderPass!=="translucent"||R.paint.get("raster-opacity")===0||!$.length)return;const{isRenderingToTexture:X}=U,Z=k.getSource(),Q=j.style.projection.useSubdivision;if(Z instanceof Wn)vu(j,k,R,$,null,!1,!1,Z.tileCoords,Z.flippedWindingOrder,X);else if(Q){const[se,me,pe]=j.stencilConfigForOverlapTwoPass($);vu(j,k,R,pe,se,!1,!0,jc,!1,X),vu(j,k,R,pe,me,!0,!0,jc,!1,X)}else{const[se,me]=j.getStencilConfigForOverlapAndUpdateStencilID($);vu(j,k,R,me,se,!1,!0,jc,!1,X)}}(r,u,p,_,S):l.ck(p)?function(j,k,R,$,U){const X=R.paint.get("background-color"),Z=R.paint.get("background-opacity");if(Z===0)return;const{isRenderingToTexture:Q}=U,se=j.context,me=se.gl,pe=j.style.projection,ye=j.transform,_e=ye.tileSize,Ae=R.paint.get("background-pattern");if(j.isPatternMissing(Ae))return;const be=!Ae&&X.a===1&&Z===1&&j.opaquePassEnabledForLayer()?"opaque":"translucent";if(j.renderPass!==be)return;const Ee=hr.disabled,Ie=j.getDepthModeForSublayer(0,be==="opaque"?ur.ReadWrite:ur.ReadOnly),we=j.colorModeForRenderPass(),De=j.useProgram(Ae?"backgroundPattern":"background"),it=$||Or(ye,{tileSize:_e,terrain:j.style.map.terrain});Ae&&(se.activeTexture.set(me.TEXTURE0),j.imageManager.bind(j.context));const Ye=R.getCrossfadeParameters();for(const Qe of it){const Je=ye.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!Q,applyTerrainMatrix:!0}),Tt=Ae?jl(Z,j,Ae,{tileID:Qe,tileSize:_e},Ye):fa(Z,X),At=j.style.map.terrain&&j.style.map.terrain.getTerrainData(Qe),yt=pe.getMeshFromTileID(se,Qe.canonical,!1,!0,"raster");De.draw(se,me.TRIANGLES,Ie,Ee,we,br.backCCW,Tt,At,Je,R.id,yt.vertexBuffer,yt.indexBuffer,yt.segments)}}(r,0,p,_,S):l.cl(p)&&function(j,k,R,$){const{isRenderingGlobe:U}=$,X=j.context,Z=R.implementation,Q=j.style.projection,se=j.transform,me=se.getProjectionDataForCustomLayer(U),pe={farZ:se.farZ,nearZ:se.nearZ,fov:se.fov*Math.PI/180,modelViewProjectionMatrix:se.modelViewProjectionMatrix,projectionMatrix:se.projectionMatrix,shaderData:{variantName:Q.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Q.shaderPreludeCode.vertexSource}`,define:Q.shaderDefine},defaultProjectionData:me},ye=Z.renderingMode?Z.renderingMode:"2d";if(j.renderPass==="offscreen"){const _e=Z.prerender;_e&&(j.setCustomLayerDefaults(),X.setColorMode(j.colorModeForRenderPass()),_e.call(Z,X.gl,pe),X.setDirty(),j.setBaseState())}else if(j.renderPass==="translucent"){j.setCustomLayerDefaults(),X.setColorMode(j.colorModeForRenderPass()),X.setStencilMode(hr.disabled);const _e=ye==="3d"?j.getDepthModeFor3D():j.getDepthModeForSublayer(0,ur.ReadOnly);X.setDepthMode(_e),Z.render(X.gl,pe),X.setDirty(),j.setBaseState(),X.bindFramebuffer.set(null)}}(r,0,p,S))}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),p=this.imageManager.getPattern(r.to.toString());return!u||!p}useProgram(r,u,p=!1,_=[]){this.cache=this.cache||{};const S=!!this.style.map.terrain,j=this.style.projection,k=p?zi.projectionMercator:j.shaderPreludeCode,R=p?No:j.shaderDefine,$=r+(u?u.cacheKey:"")+`/${p?xr:j.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(S?"/terrain":"")+(_?`/${_.join("/")}`:"");return this.cache[$]||(this.cache[$]=new Tl(this.context,zi[r],u,cu[r],this._showOverdrawInspector,S,k,R,_)),this.cache[$]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:u}=this.context.gl;return this.width!==r||this.height!==u}}function hs(b,r){let u,p=!1,_=null,S=null;const j=()=>{_=null,p&&(b.apply(S,u),_=setTimeout(j,r),p=!1)};return(...k)=>(p=!0,S=this,u=k,_||j(),_)}class bi{constructor(r){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(p=_)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(!this._isValidHash(u))return!1;const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const p=u.join("/");let _=p;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${p}`);let S=window.location.hash.replace(_,"");S.startsWith("#&")?S=S.slice(0,1)+S.slice(2):S==="#"&&(S="");let j=window.location.href.replace(/(#.+)?$/,S);j=j.replace("&&","&"),window.history.replaceState(window.history.state,null,j)},this._updateHash=hs(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,_=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,_),j=Math.round(u.lng*S)/S,k=Math.round(u.lat*S)/S,R=this._map.getBearing(),$=this._map.getPitch();let U="";if(U+=r?`/${j}/${k}/${p}`:`${p}/${k}/${j}`,(R||$)&&(U+="/"+Math.round(10*R)/10),$&&(U+=`/${Math.round($)}`),this._hashName){const X=this._hashName;let Z=!1;const Q=window.location.hash.slice(1).split("&").map(se=>{const me=se.split("=")[0];return me===X?(Z=!0,`${me}=${U}`):se}).filter(se=>se);return Z||Q.push(`${X}=${U}`),`#${Q.join("&")}`}return`#${U}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new l.S(+r[2],+r[1])}catch{return!1}const u=+r[0],p=+(r[3]||0),_=+(r[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&p>=-180&&p<=180&&_>=this._map.getMinPitch()&&_<=this._map.getMaxPitch()}}const ds={linearity:.3,easing:l.cm(0,0,.3,1)},Bs=l.e({deceleration:2500,maxSpeed:1400},ds),tp=l.e({deceleration:20,maxSpeed:1400},ds),rp=l.e({deceleration:1e3,maxSpeed:360},ds),np=l.e({deceleration:1e3,maxSpeed:90},ds),ii=l.e({deceleration:1e3,maxSpeed:360},ds);class Eh{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:L.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=L.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,roll:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)u.zoom+=S.zoomDelta||0,u.bearing+=S.bearingDelta||0,u.pitch+=S.pitchDelta||0,u.roll+=S.rollDelta||0,S.panDelta&&u.pan._add(S.panDelta),S.around&&(u.around=S.around),S.pinchAround&&(u.pinchAround=S.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(u.pan.mag()){const S=Zo(u.pan.mag(),p,l.e({},Bs,r||{})),j=u.pan.mult(S.amount/u.pan.mag()),k=this._map.cameraHelper.handlePanInertia(j,this._map.transform);_.center=k.easingCenter,_.offset=k.easingOffset,Go(_,S)}if(u.zoom){const S=Zo(u.zoom,p,tp);_.zoom=this._map.transform.zoom+S.amount,Go(_,S)}if(u.bearing){const S=Zo(u.bearing,p,rp);_.bearing=this._map.transform.bearing+l.ah(S.amount,-179,179),Go(_,S)}if(u.pitch){const S=Zo(u.pitch,p,np);_.pitch=this._map.transform.pitch+S.amount,Go(_,S)}if(u.roll){const S=Zo(u.roll,p,ii);_.roll=this._map.transform.roll+l.ah(S.amount,-179,179),Go(_,S)}if(_.zoom||_.bearing){const S=u.pinchAround===void 0?u.around:u.pinchAround;_.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),l.e(_,{noMoveStart:!0})}}function Go(b,r){(!b.duration||b.duration<r.duration)&&(b.duration=r.duration,b.easing=r.easing)}function Zo(b,r,u){const{maxSpeed:p,linearity:_,deceleration:S}=u,j=l.ah(b*_/(r/1e3),-p,p),k=Math.abs(j)/(S*_);return{easing:u.easing,duration:1e3*k,amount:j*(k/2)}}class $i extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,p,_={}){p=p instanceof MouseEvent?p:new MouseEvent(r,p);const S=F.mousePos(u.getCanvas(),p),j=u.unproject(S);super(r,l.e({point:S,lngLat:j,originalEvent:p},_)),this._defaultPrevented=!1,this.target=u}}class Oa extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,p){const _=r==="touchend"?p.changedTouches:p.touches,S=F.touchPos(u.getCanvasContainer(),_),j=S.map(R=>u.unproject(R)),k=S.reduce((R,$,U,X)=>R.add($.div(X.length)),new l.P(0,0));super(r,{points:S,point:k,lngLats:j,lngLat:u.unproject(k),originalEvent:p}),this._defaultPrevented=!1}}class Fs extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,p){super(r,{originalEvent:p}),this._defaultPrevented=!1}}class Za{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Fs(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new $i(r.type,this._map,r))}mouseup(r){this._map.fire(new $i(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new $i(r.type,this._map,r))}dblclick(r){return this._firePreventable(new $i(r.type,this._map,r))}mouseover(r){this._map.fire(new $i(r.type,this._map,r))}mouseout(r){this._map.fire(new $i(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Oa(r.type,this._map,r))}touchmove(r){this._map.fire(new Oa(r.type,this._map,r))}touchend(r){this._map.fire(new Oa(r.type,this._map,r))}touchcancel(r){this._map.fire(new Oa(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ha{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new $i(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $i("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new $i(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Cc{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(l.P.convert(r),this._map.terrain)}}class Ia{constructor(r,u){this._map=r,this._tr=new Cc(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(F.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=p,this._box||(this._box=F.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const S=Math.min(_.x,p.x),j=Math.max(_.x,p.x),k=Math.min(_.y,p.y),R=Math.max(_.y,p.y);F.setTransform(this._box,`translate(${S}px,${k}px)`),this._box.style.width=j-S+"px",this._box.style.height=R-k+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const p=this._startPos,_=u;if(this.reset(),F.suppressClick(),p.x!==_.x||p.y!==_.y)return this._map.fire(new l.l("boxzoomend",{originalEvent:r})),{cameraAnimation:S=>S.fitScreenCoordinates(p,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(F.remove(this._box),this._box=null),F.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new l.l(r,{originalEvent:u}))}}function _a(b,r){if(b.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${r.length}`);const u={};for(let p=0;p<b.length;p++)u[b[p].identifier]=r[p];return u}class Fd{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),p.length===this.numTouches&&(this.centroid=function(_){const S=new l.P(0,0);for(const j of _)S._add(j);return S.div(_.length)}(u),this.touches=_a(p,u)))}touchmove(r,u,p){if(this.aborted||!this.centroid)return;const _=_a(p,u);for(const S in this.touches){const j=_[S];(!j||j.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(r,u,p){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Oc{constructor(r){this.singleTap=new Fd(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,p){this.singleTap.touchstart(r,u,p)}touchmove(r,u,p){this.singleTap.touchmove(r,u,p)}touchend(r,u,p){const _=this.singleTap.touchend(r,u,p);if(_){const S=r.timeStamp-this.lastTime<500,j=!this.lastTap||this.lastTap.dist(_)<30;if(S&&j||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class ip{constructor(r){this._tr=new Cc(r),this._zoomIn=new Oc({numTouches:1,numTaps:2}),this._zoomOut=new Oc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,p){this._zoomIn.touchstart(r,u,p),this._zoomOut.touchstart(r,u,p)}touchmove(r,u,p){this._zoomIn.touchmove(r,u,p),this._zoomOut.touchmove(r,u,p)}touchend(r,u,p){const _=this._zoomIn.touchend(r,u,p),S=this._zoomOut.touchend(r,u,p),j=this._tr;return _?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:j.zoom+1,around:j.unproject(_)},{originalEvent:r})}):S?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:j.zoom-1,around:j.unproject(S)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fs{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const _=Array.isArray(u)?u[0]:u;return!this._moved&&_.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(p,_))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&F.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const $d=0,$s=2,xo={[$d]:1,[$s]:2};class Nt{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const u=F.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,p){const _=xo[p];return u.buttons===void 0||(u.buttons&_)!==_}(r,this._eventButton)}isValidEndEvent(r){return F.mouseButton(r)===this._eventButton}}class bu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class Ch{constructor(r=new Nt({checkCorrectEvent:()=>!0}),u=new bu){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(r,u,p){return r instanceof MouseEvent?u(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?p(r):void 0}startMove(r){this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.startMove(u),u=>this.oneFingerTouchMoveStateManager.startMove(u))}endMove(r){this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.endMove(u),u=>this.oneFingerTouchMoveStateManager.endMove(u))}isValidStartEvent(r){return this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.isValidStartEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u))}isValidMoveEvent(r){return this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.isValidMoveEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u))}isValidEndEvent(r){return this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.isValidEndEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u))}}const ps=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=r=>{r.preventDefault()}};class Ic{constructor(r,u){this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,u,p){return this._calculateTransform(r,u,p)}touchmove(r,u,p){if(this._active){if(!this._shouldBePrevented(p.length))return r.preventDefault(),this._calculateTransform(r,u,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,u,p){this._calculateTransform(r,u,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,p){p.length>0&&(this._active=!0);const _=_a(p,u),S=new l.P(0,0),j=new l.P(0,0);let k=0;for(const $ in _){const U=_[$],X=this._touches[$];X&&(S._add(U),j._add(U.sub(X)),k++,_[$]=U)}if(this._touches=_,this._shouldBePrevented(k)||!j.mag())return;const R=j.div(k);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(k),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qs{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,p){if(!this._firstTwoTouches)return;r.preventDefault();const[_,S]=this._firstTwoTouches,j=ka(p,u,_),k=ka(p,u,S);if(!j||!k)return;const R=this._aroundCenter?null:j.add(k).div(2);return this._move([j,k],R,r)}touchend(r,u,p){if(!this._firstTwoTouches)return;const[_,S]=this._firstTwoTouches,j=ka(p,u,_),k=ka(p,u,S);j&&k||(this._active&&F.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ka(b,r,u){for(let p=0;p<b.length;p++)if(b[p].identifier===u)return r[p]}function wr(b,r){return Math.log(b/r)/Math.LN2}class kc extends qs{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const p=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(wr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wr(this._distance,p),pinchAround:u}}}function ms(b,r){return 180*b.angleWith(r)/Math.PI}class bo extends qs{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u,p){const _=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ms(this._vector,_),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,p=ms(r,this._startVector);return Math.abs(p)<u}}function Fl(b){return Math.abs(b.y)>Math.abs(b.x)}class Oh extends qs{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,p){super.touchstart(r,u,p),this._currentTouchCount=p.length}_start(r){this._lastPoints=r,Fl(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=r[0].sub(this._lastPoints[0]),S=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,S,p.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(_.y+S.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,p){if(this._valid!==void 0)return this._valid;const _=r.mag()>=2,S=u.mag()>=2;if(!_&&!S)return;if(!_||!S)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const j=r.y>0==u.y>0;return Fl(r)&&Fl(u)&&j}}const Ih={panStep:100,bearingStep:15,pitchStep:10};class Us{constructor(r){this._tr=new Cc(r);const u=Ih;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,p=0,_=0,S=0,j=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?p=-1:(r.preventDefault(),S=-1);break;case 39:r.shiftKey?p=1:(r.preventDefault(),S=1);break;case 38:r.shiftKey?_=1:(r.preventDefault(),j=-1);break;case 40:r.shiftKey?_=-1:(r.preventDefault(),j=1);break;default:return}return this._rotationDisabled&&(p=0,_=0),{cameraAnimation:k=>{const R=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:Nc,zoom:u?Math.round(R.zoom)+u*(r.shiftKey?2:1):R.zoom,bearing:R.bearing+p*this._bearingStep,pitch:R.pitch+_*this._pitchStep,offset:[-S*this._panStep,-j*this._panStep],center:R.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Nc(b){return b*(2-b)}const qd=4.000244140625,Ud=1/450;class $l{constructor(r,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=r,this._tr=new Cc(r),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Ud}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const p=L.now(),_=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%qd==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(_*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=F.mousePos(this._map.getCanvas(),r),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(l.S.convert(p.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const k=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=k),typeof this._targetZoom=="number"&&(this._targetZoom+=k)}if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>qd?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&R!==0&&(R=1/R);const $=typeof this._targetZoom!="number"?r.scale:l.af(this._targetZoom);this._targetZoom=r.getConstrained(r.getCameraLngLat(),l.ak($*R)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,p=this._startZoom,_=this._easing;let S,j=!1;if(this._type==="wheel"&&p&&_){const k=L.now()-this._lastWheelEventTime,R=Math.min((k+5)/200,1),$=_(R);S=l.C.number(p,u,$),R<1?this._frameId||(this._frameId=!0):j=!0}else S=u,j=!0;return this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=S,{noInertia:!0,needsRenderFrame:!j,zoomDelta:S-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=l.co;if(this._prevEase){const p=this._prevEase,_=(L.now()-p.start)/p.duration,S=p.easing(_+.01)-p.easing(_),j=.27/Math.sqrt(S*S+1e-4)*.01,k=Math.sqrt(.0729-j*j);u=l.cm(j,k,.25,1)}return this._prevEase={start:L.now(),duration:r,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class wu{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class gs{constructor(r){this._tr=new Cc(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class an{constructor(){this._tap=new Oc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,u,p){if(!this._swipePoint)if(this._tapTime){const _=u[0],S=r.timeStamp-this._tapTime<500,j=this._tapPoint.dist(_)<30;S&&j?p.length>0&&(this._swipePoint=_,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(r,u,p)}touchmove(r,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const _=u[0],S=_.y-this._swipePoint.y;return this._swipePoint=_,r.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(r,u,p)}touchend(r,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const _=this._tap.touchend(r,u,p);_&&(this._tapTime=r.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kh{constructor(r,u,p){this._el=r,this._mousePan=u,this._touchPan=p}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Xa{constructor(r,u,p,_){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=u,this._mousePitch=p,this._mouseRoll=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Sr{constructor(r,u,p,_){this._el=r,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class on{constructor(r,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=F.create("div","maplibregl-cooperative-gesture-screen",r);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=u,this._container.appendChild(_);const S=document.createElement("div");S.className="maplibregl-mobile-message",S.textContent=p,this._container.appendChild(S),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(F.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,u){this._enabled&&(this._map.fire(new l.l("cooperativegestureprevented",{gestureType:r,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Pn=b=>b.zoom||b.drag||b.roll||b.pitch||b.rotate;class Su extends l.l{}function Vs(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta||b.rollDelta}class qi{constructor(r,u){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,S)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const j=_.type==="renderFrame"?void 0:_,k={needsRenderFrame:!1},R={},$={};for(const{handlerName:Z,handler:Q,allowed:se}of this._handlers){if(!Q.isEnabled())continue;let me;if(this._blockedByActive($,se,Z))Q.reset();else if(Q[S||_.type]){if(l.cp(_,S||_.type)){const pe=F.mousePos(this._map.getCanvas(),_);me=Q[S||_.type](_,pe)}else if(l.cq(_,S||_.type)){const pe=this._getMapTouches(_.touches),ye=F.touchPos(this._map.getCanvas(),pe);me=Q[S||_.type](_,ye,pe)}else l.cr(S||_.type)||(me=Q[S||_.type](_));this.mergeHandlerResult(k,R,me,Z,j),me&&me.needsRenderFrame&&this._triggerRenderFrame()}(me||Q.isActive())&&($[Z]=Q)}const U={};for(const Z in this._previousActiveHandlers)$[Z]||(U[Z]=j);this._previousActiveHandlers=$,(Object.keys(U).length||Vs(k))&&(this._changes.push([k,R,U]),this._triggerRenderFrame()),(Object.keys($).length||Vs(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:X}=k;X&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],X(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Eh(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,S,j]of this._listeners)F.addEventListener(_,S,_===document?this.handleWindowEvent:this.handleEvent,j)}destroy(){for(const[r,u,p]of this._listeners)F.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(r){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Za(u,r));const _=u.boxZoom=new Ia(u,r);this._add("boxZoom",_),r.interactive&&r.boxZoom&&_.enable();const S=u.cooperativeGestures=new on(u,r.cooperativeGestures);this._add("cooperativeGestures",S),r.cooperativeGestures&&S.enable();const j=new ip(u),k=new gs(u);u.doubleClickZoom=new wu(k,j),this._add("tapZoom",j),this._add("clickZoom",k),r.interactive&&r.doubleClickZoom&&u.doubleClickZoom.enable();const R=new an;this._add("tapDragZoom",R);const $=u.touchPitch=new Oh(u);this._add("touchPitch",$),r.interactive&&r.touchPitch&&u.touchPitch.enable(r.touchPitch);const U=()=>u.project(u.getCenter()),X=function({enable:be,clickTolerance:Ee,aroundCenter:Ie=!0,minPixelCenterThreshold:we=100,rotateDegreesPerPixelMoved:De=.8},it){const Ye=new Nt({checkCorrectEvent:Qe=>F.mouseButton(Qe)===0&&Qe.ctrlKey||F.mouseButton(Qe)===2&&!Qe.ctrlKey});return new fs({clickTolerance:Ee,move:(Qe,Je)=>{const Tt=it();if(Ie&&Math.abs(Tt.y-Qe.y)>we)return{bearingDelta:l.cn(new l.P(Qe.x,Je.y),Je,Tt)};let At=(Je.x-Qe.x)*De;return Ie&&Je.y<Tt.y&&(At=-At),{bearingDelta:At}},moveStateManager:Ye,enable:be,assignEvents:ps})}(r,U),Z=function({enable:be,clickTolerance:Ee,pitchDegreesPerPixelMoved:Ie=-.5}){const we=new Nt({checkCorrectEvent:De=>F.mouseButton(De)===0&&De.ctrlKey||F.mouseButton(De)===2});return new fs({clickTolerance:Ee,move:(De,it)=>({pitchDelta:(it.y-De.y)*Ie}),moveStateManager:we,enable:be,assignEvents:ps})}(r),Q=function({enable:be,clickTolerance:Ee,rollDegreesPerPixelMoved:Ie=.3},we){const De=new Nt({checkCorrectEvent:it=>F.mouseButton(it)===2&&it.ctrlKey});return new fs({clickTolerance:Ee,move:(it,Ye)=>{const Qe=we();let Je=(Ye.x-it.x)*Ie;return Ye.y<Qe.y&&(Je=-Je),{rollDelta:Je}},moveStateManager:De,enable:be,assignEvents:ps})}(r,U);u.dragRotate=new Xa(r,X,Z,Q),this._add("mouseRotate",X,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Q,["mousePitch"]),r.interactive&&r.dragRotate&&u.dragRotate.enable();const se=function({enable:be,clickTolerance:Ee}){const Ie=new Nt({checkCorrectEvent:we=>F.mouseButton(we)===0&&!we.ctrlKey});return new fs({clickTolerance:Ee,move:(we,De)=>({around:De,panDelta:De.sub(we)}),activateOnStart:!0,moveStateManager:Ie,enable:be,assignEvents:ps})}(r),me=new Ic(r,u);u.dragPan=new kh(p,se,me),this._add("mousePan",se),this._add("touchPan",me,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&u.dragPan.enable(r.dragPan);const pe=new bo,ye=new kc;u.touchZoomRotate=new Sr(p,ye,pe,R),this._add("touchRotate",pe,["touchPan","touchZoom"]),this._add("touchZoom",ye,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&u.touchZoomRotate.enable(r.touchZoomRotate);const _e=u.scrollZoom=new $l(u,()=>this._triggerRenderFrame());this._add("scrollZoom",_e,["mousePan"]),r.interactive&&r.scrollZoom&&u.scrollZoom.enable(r.scrollZoom);const Ae=u.keyboard=new Us(u);this._add("keyboard",Ae),r.interactive&&r.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Ha(u))}_add(r,u,p){this._handlers.push({handlerName:r,handler:u,allowed:p}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Pn(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,p){for(const _ in r)if(_!==p&&(!u||u.indexOf(_)<0))return!0;return!1}_getMapTouches(r){const u=[];for(const p of r)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(r,u,p,_,S){if(!p)return;l.e(r,p);const j={handlerName:_,originalEvent:p.originalEvent||S};p.zoomDelta!==void 0&&(u.zoom=j),p.panDelta!==void 0&&(u.drag=j),p.rollDelta!==void 0&&(u.roll=j),p.pitchDelta!==void 0&&(u.pitch=j),p.bearingDelta!==void 0&&(u.rotate=j)}_applyChanges(){const r={},u={},p={};for(const[_,S,j]of this._changes)_.panDelta&&(r.panDelta=(r.panDelta||new l.P(0,0))._add(_.panDelta)),_.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+_.pitchDelta),_.rollDelta&&(r.rollDelta=(r.rollDelta||0)+_.rollDelta),_.around!==void 0&&(r.around=_.around),_.pinchAround!==void 0&&(r.pinchAround=_.pinchAround),_.noInertia&&(r.noInertia=_.noInertia),l.e(u,S),l.e(p,j);this._updateMapTransform(r,u,p),this._changes=[]}_updateMapTransform(r,u,p){const _=this._map,S=_._getTransformForUpdate(),j=_.terrain;if(!(Vs(r)||j&&this._terrainMovement))return this._fireEvents(u,p,!0);_._stop(!0);let{panDelta:k,zoomDelta:R,bearingDelta:$,pitchDelta:U,rollDelta:X,around:Z,pinchAround:Q}=r;Q!==void 0&&(Z=Q),Z=Z||_.transform.centerPoint,j&&!S.isPointOnMapSurface(Z)&&(Z=S.centerPoint);const se={panDelta:k,zoomDelta:R,rollDelta:X,pitchDelta:U,bearingDelta:$,around:Z};this._map.cameraHelper.useGlobeControls&&!S.isPointOnMapSurface(Z)&&(Z=S.centerPoint);const me=Z.distSqr(S.centerPoint)<.01?S.center:S.screenPointToLocation(k?Z.sub(k):Z);this._handleMapControls({terrain:j,tr:S,deltasForHelper:se,preZoomAroundLoc:me,combinedEventsInProgress:u,panDelta:k}),_._applyUpdatedTransform(S),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,p,!0)}_handleMapControls({terrain:r,tr:u,deltasForHelper:p,preZoomAroundLoc:_,combinedEventsInProgress:S,panDelta:j}){const k=this._map.cameraHelper;if(k.handleMapControlsRollPitchBearingZoom(p,u),r)return k.useGlobeControls?(this._terrainMovement||!S.drag&&!S.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void k.handleMapControlsPan(p,u,_)):this._terrainMovement||!S.drag&&!S.zoom?void(S.drag&&this._terrainMovement&&j?u.setCenter(u.screenPointToLocation(u.centerPoint.sub(j))):k.handleMapControlsPan(p,u,_)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void k.handleMapControlsPan(p,u,_));k.handleMapControlsPan(p,u,_)}_fireEvents(r,u,p){const _=Pn(this._eventsInProgress),S=Pn(r),j={};for(const X in r){const{originalEvent:Z}=r[X];this._eventsInProgress[X]||(j[`${X}start`]=Z),this._eventsInProgress[X]=r[X]}!_&&S&&this._fireEvent("movestart",S.originalEvent);for(const X in j)this._fireEvent(X,j[X]);S&&this._fireEvent("move",S.originalEvent);for(const X in r){const{originalEvent:Z}=r[X];this._fireEvent(X,Z)}const k={};let R;for(const X in this._eventsInProgress){const{handlerName:Z,originalEvent:Q}=this._eventsInProgress[X];this._handlersById[Z].isActive()||(delete this._eventsInProgress[X],R=u[Z]||Q,k[`${X}end`]=R)}for(const X in k)this._fireEvent(X,k[X]);const $=Pn(this._eventsInProgress),U=(_||S)&&!$;if(U&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const X=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&X.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(X)}if(p&&U){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=Q=>Q!==0&&-this._bearingSnap<Q&&Q<this._bearingSnap;!X||!X.essential&&L.prefersReducedMotion?(this._map.fire(new l.l("moveend",{originalEvent:R})),Z(this._map.getBearing())&&this._map.resetNorth()):(Z(X.bearing||this._map.getBearing())&&(X.bearing=0),X.freezeElevation=!0,this._map.easeTo(X,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new l.l(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Su("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ql extends l.E{constructor(r,u,p){super(),this._renderFrameCallback=()=>{const _=Math.min((L.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=p.bearingSnap,this.cameraHelper=u,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,u){r.apply(this.transform),this.transform=r,this.cameraHelper=u}getCenter(){return new l.S(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,u){return this.jumpTo({elevation:r},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,u,p){return r=l.P.convert(r).mult(-1),this.panTo(this.transform.center,l.e({offset:r},u),p)}panTo(r,u,p){return this.easeTo(l.e({center:r},u),p)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,p){return this.easeTo(l.e({zoom:r},u),p)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,u){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new l.l("movestart",u)).fire(new l.l("move",u)).fire(new l.l("moveend",u))),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,p){return this.easeTo(l.e({bearing:r},u),p)}resetNorth(r,u){return this.rotateTo(0,l.e({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(l.e({bearing:0,pitch:0,roll:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}getRoll(){return this.transform.roll}setRoll(r,u){return this.jumpTo({roll:r},u),this}cameraForBounds(r,u){r=fr.convert(r).adjustAntiMeridian();const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),p,u)}_cameraForBoxAndBearing(r,u,p,_){const S={top:0,bottom:0,right:0,left:0};if(typeof(_=l.e({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const $=_.padding;_.padding={top:$,bottom:$,right:$,left:$}}const j=l.e(S,_.padding);_.padding=j;const k=this.transform,R=new fr(r,u);return this.cameraHelper.cameraForBoxAndBearing(_,j,R,p,k)}fitBounds(r,u,p){return this._fitInternal(this.cameraForBounds(r,u),u,p)}fitScreenCoordinates(r,u,p,_,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(l.P.convert(r)),this.transform.screenPointToLocation(l.P.convert(u)),p,_),_,S)}_fitInternal(r,u,p){return r?(delete(u=l.e(r,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(r,u){this.stop();const p=this._getTransformForUpdate();let _=!1,S=!1,j=!1;const k=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,r);const R=p.zoom!==k;return"elevation"in r&&p.elevation!==+r.elevation&&p.setElevation(+r.elevation),"bearing"in r&&p.bearing!==+r.bearing&&(_=!0,p.setBearing(+r.bearing)),"pitch"in r&&p.pitch!==+r.pitch&&(S=!0,p.setPitch(+r.pitch)),"roll"in r&&p.roll!==+r.roll&&(j=!0,p.setRoll(+r.roll)),r.padding==null||p.isPaddingEqual(r.padding)||p.setPadding(r.padding),this._applyUpdatedTransform(p),this.fire(new l.l("movestart",u)).fire(new l.l("move",u)),R&&this.fire(new l.l("zoomstart",u)).fire(new l.l("zoom",u)).fire(new l.l("zoomend",u)),_&&this.fire(new l.l("rotatestart",u)).fire(new l.l("rotate",u)).fire(new l.l("rotateend",u)),S&&this.fire(new l.l("pitchstart",u)).fire(new l.l("pitch",u)).fire(new l.l("pitchend",u)),j&&this.fire(new l.l("rollstart",u)).fire(new l.l("roll",u)).fire(new l.l("rollend",u)),this.fire(new l.l("moveend",u))}calculateCameraOptionsFromTo(r,u,p,_=0){const S=l.a1.fromLngLat(r,u),j=l.a1.fromLngLat(p,_),k=j.x-S.x,R=j.y-S.y,$=j.z-S.z,U=Math.hypot(k,R,$);if(U===0)throw new Error("Can't calculate camera options with same From and To");const X=Math.hypot(k,R),Z=l.ak(this.transform.cameraToCenterDistance/U/this.transform.tileSize),Q=180*Math.atan2(k,-R)/Math.PI;let se=180*Math.acos(X/U)/Math.PI;return se=$<0?90-se:90+se,{center:j.toLngLat(),elevation:_,zoom:Z,pitch:se,bearing:Q}}calculateCameraOptionsFromCameraLngLatAltRotation(r,u,p,_,S){const j=this.transform.calculateCenterFromCameraLngLatAlt(r,u,p,_);return{center:j.center,elevation:j.elevation,zoom:j.zoom,bearing:p,pitch:_,roll:S}}easeTo(r,u){this._stop(!1,r.easeId),((r=l.e({offset:[0,0],duration:500,easing:l.co},r)).animate===!1||!r.essential&&L.prefersReducedMotion)&&(r.duration=0);const p=this._getTransformForUpdate(),_=this.getBearing(),S=p.pitch,j=p.roll,k="bearing"in r?this._normalizeBearing(r.bearing,_):_,R="pitch"in r?+r.pitch:S,$="roll"in r?this._normalizeBearing(r.roll,j):j,U="padding"in r?r.padding:p.padding,X=l.P.convert(r.offset);let Z,Q;r.around&&(Z=l.S.convert(r.around),Q=p.locationToScreenPoint(Z));const se={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},me=this.cameraHelper.handleEaseTo(p,{bearing:k,pitch:R,roll:$,padding:U,around:Z,aroundPoint:Q,offsetAsPoint:X,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||_!==k,this._pitching=this._pitching||R!==S,this._rolling=this._rolling||$!==j,this._padding=!p.isPaddingEqual(U),this._zooming=this._zooming||me.isZooming,this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,se),this.terrain&&this._prepareElevation(me.elevationCenter),this._ease(pe=>{me.easeFunc(pe),this.terrain&&!r.freezeElevation&&this._updateElevation(pe),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},pe=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(u,pe)},r),this}_prepareEase(r,u,p={}){this._moving=!0,u||p.moving||this.fire(new l.l("movestart",r)),this._zooming&&!p.zooming&&this.fire(new l.l("zoomstart",r)),this._rotating&&!p.rotating&&this.fire(new l.l("rotatestart",r)),this._pitching&&!p.pitching&&this.fire(new l.l("pitchstart",r)),this._rolling&&!p.rolling&&this.fire(new l.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(p-(u-(p*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.setElevation(l.C.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const u=r.getCameraLngLat(),p=r.getCameraAltitude(),_=this.terrain?this.terrain.getElevationForLngLatZoom(u,r.zoom):0;if(p<_){const S=this.calculateCameraOptionsFromTo(u,_,r.center,r.elevation);return{pitch:S.pitch,zoom:S.zoom}}return{}}_applyUpdatedTransform(r){const u=[];if(u.push(_=>this._elevateCameraIfInsideTerrain(_)),this.transformCameraUpdate&&u.push(_=>this.transformCameraUpdate(_)),!u.length)return;const p=r.clone();for(const _ of u){const S=p.clone(),{center:j,zoom:k,roll:R,pitch:$,bearing:U,elevation:X}=_(S);j&&S.setCenter(j),X!==void 0&&S.setElevation(X),k!==void 0&&S.setZoom(k),R!==void 0&&S.setRoll(R),$!==void 0&&S.setPitch($),U!==void 0&&S.setBearing(U),p.apply(S)}this.transform.apply(p)}_fireMoveEvents(r){this.fire(new l.l("move",r)),this._zooming&&this.fire(new l.l("zoom",r)),this._rotating&&this.fire(new l.l("rotate",r)),this._pitching&&this.fire(new l.l("pitch",r)),this._rolling&&this.fire(new l.l("roll",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,_=this._rotating,S=this._pitching,j=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new l.l("zoomend",r)),_&&this.fire(new l.l("rotateend",r)),S&&this.fire(new l.l("pitchend",r)),j&&this.fire(new l.l("rollend",r)),this.fire(new l.l("moveend",r))}flyTo(r,u){if(!r.essential&&L.prefersReducedMotion){const Je=l.Q(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Je,u)}this.stop(),r=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.co},r);const p=this._getTransformForUpdate(),_=p.bearing,S=p.pitch,j=p.roll,k=p.padding,R="bearing"in r?this._normalizeBearing(r.bearing,_):_,$="pitch"in r?+r.pitch:S,U="roll"in r?this._normalizeBearing(r.roll,j):j,X="padding"in r?r.padding:p.padding,Z=l.P.convert(r.offset);let Q=p.centerPoint.add(Z);const se=p.screenPointToLocation(Q),me=this.cameraHelper.handleFlyTo(p,{bearing:R,pitch:$,roll:U,padding:X,locationAtOffset:se,offsetAsPoint:Z,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let pe=r.curve;const ye=Math.max(p.width,p.height),_e=ye/me.scaleOfZoom,Ae=me.pixelPathLength;typeof me.scaleOfMinZoom=="number"&&(pe=Math.sqrt(ye/me.scaleOfMinZoom/Ae*2));const be=pe*pe;function Ee(Je){const Tt=(_e*_e-ye*ye+(Je?-1:1)*be*be*Ae*Ae)/(2*(Je?_e:ye)*be*Ae);return Math.log(Math.sqrt(Tt*Tt+1)-Tt)}function Ie(Je){return(Math.exp(Je)-Math.exp(-Je))/2}function we(Je){return(Math.exp(Je)+Math.exp(-Je))/2}const De=Ee(!1);let it=function(Je){return we(De)/we(De+pe*Je)},Ye=function(Je){return ye*((we(De)*(Ie(Tt=De+pe*Je)/we(Tt))-Ie(De))/be)/Ae;var Tt},Qe=(Ee(!0)-De)/pe;if(Math.abs(Ae)<2e-6||!isFinite(Qe)){if(Math.abs(ye-_e)<1e-6)return this.easeTo(r,u);const Je=_e<ye?-1:1;Qe=Math.abs(Math.log(_e/ye))/pe,Ye=()=>0,it=Tt=>Math.exp(Je*pe*Tt)}return r.duration="duration"in r?+r.duration:1e3*Qe/("screenSpeed"in r?+r.screenSpeed/pe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=_!==R,this._pitching=$!==S,this._rolling=U!==j,this._padding=!p.isPaddingEqual(X),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(me.targetCenter),this._ease(Je=>{const Tt=Je*Qe,At=1/it(Tt),yt=Ye(Tt);this._rotating&&p.setBearing(l.C.number(_,R,Je)),this._pitching&&p.setPitch(l.C.number(S,$,Je)),this._rolling&&p.setRoll(l.C.number(j,U,Je)),this._padding&&(p.interpolatePadding(k,X,Je),Q=p.centerPoint.add(Z)),me.easeFunc(Je,At,yt,Q),this.terrain&&!r.freezeElevation&&this._updateElevation(Je),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,u)}return r||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(r,u,p){p.animate===!1||p.duration===0?(r(1),u()):(this._easeStart=L.now(),this._easeOptions=p,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,u){r=l.aO(r,-180,180);const p=Math.abs(r-u);return Math.abs(r-360-u)<p&&(r-=360),Math.abs(r+360-u)<p&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(l.S.convert(r),this.transform.tileZoom):null}}const Lt={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Xt{constructor(r=Lt){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=F.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=F.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const p=this._map._getUIString(`AttributionControl.${u}`);r.title=p,r.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(_=>typeof _!="string"?"":_)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const u=this._map.style.sourceCaches;for(const _ in u){const S=u[_];if(S.used||S.usedForTerrain){const j=S.getSource();j.attribution&&r.indexOf(j.attribution)<0&&r.push(j.attribution)}}r=r.filter(_=>String(_).trim()),r.sort((_,S)=>_.length-S.length),r=r.filter((_,S)=>{for(let j=S+1;j<r.length;j++)if(r[j].indexOf(_)>=0)return!1;return!0});const p=r.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,r.length?(this._innerContainer.innerHTML=F.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Rc{constructor(r={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=F.create("div","maplibregl-ctrl");const u=F.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){F.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Fn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const _ of p)if(_.id===r)return void(_.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Dc=l.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class ji extends l.E{constructor(r){super(),this._lastTilesetChange=L.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];const p={};for(const _ of Or(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))p[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.terrainRttPosMatrix32f=new Float64Array(16),l.bZ(_.terrainRttPosMatrix32f,0,l.$,l.$,0,0,1),this._tiles[_.key]=new ae(_,this.tileSize),this._lastTilesetChange=L.now());for(const _ in this._tiles)p[_]||delete this._tiles[_]}freeRtt(r){for(const u in this._tiles){const p=this._tiles[u];(!r||p.tileID.equals(r)||p.tileID.isChildOf(r)||r.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,u){return u?this._getTerrainCoordsForTileRanges(r,u):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const u={};for(const p of this._renderableTilesKeys){const _=this._tiles[p].tileID,S=r.clone(),j=l.ba();if(_.canonical.equals(r.canonical))l.bZ(j,0,l.$,l.$,0,0,1);else if(_.canonical.isChildOf(r.canonical)){const k=_.canonical.z-r.canonical.z,R=_.canonical.x-(_.canonical.x>>k<<k),$=_.canonical.y-(_.canonical.y>>k<<k),U=l.$>>k;l.bZ(j,0,U,U,0,0,1),l.M(j,j,[-R*U,-$*U,0])}else{if(!r.canonical.isChildOf(_.canonical))continue;{const k=r.canonical.z-_.canonical.z,R=r.canonical.x-(r.canonical.x>>k<<k),$=r.canonical.y-(r.canonical.y>>k<<k),U=l.$>>k;l.bZ(j,0,l.$,l.$,0,0,1),l.M(j,j,[R*U,$*U,0]),l.N(j,j,[1/2**k,1/2**k,0])}}S.terrainRttPosMatrix32f=new Float32Array(j),u[p]=S}return u}_getTerrainCoordsForTileRanges(r,u){const p={};for(const _ of this._renderableTilesKeys){const S=this._tiles[_].tileID;if(!this._isWithinTileRanges(S,u))continue;const j=r.clone(),k=l.ba();if(S.canonical.z===r.canonical.z){const R=r.canonical.x-S.canonical.x,$=r.canonical.y-S.canonical.y;l.bZ(k,0,l.$,l.$,0,0,1),l.M(k,k,[R*l.$,$*l.$,0])}else if(S.canonical.z>r.canonical.z){const R=S.canonical.z-r.canonical.z,$=S.canonical.x-(S.canonical.x>>R<<R),U=S.canonical.y-(S.canonical.y>>R<<R),X=r.canonical.x-(S.canonical.x>>R),Z=r.canonical.y-(S.canonical.y>>R),Q=l.$>>R;l.bZ(k,0,Q,Q,0,0,1),l.M(k,k,[-$*Q+X*l.$,-U*Q+Z*l.$,0])}else{const R=r.canonical.z-S.canonical.z,$=r.canonical.x-(r.canonical.x>>R<<R),U=r.canonical.y-(r.canonical.y>>R<<R),X=(r.canonical.x>>R)-S.canonical.x,Z=(r.canonical.y>>R)-S.canonical.y,Q=l.$<<R;l.bZ(k,0,Q,Q,0,0,1),l.M(k,k,[$*l.$+X*Q,U*l.$+Z*Q,0])}j.terrainRttPosMatrix32f=new Float32Array(k),p[_]=j}return p}getSourceTile(r,u){const p=this.sourceCache._source;let _=r.overscaledZ-this.deltaZoom;if(_>p.maxzoom&&(_=p.maxzoom),_<p.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(_).key);let S=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!S||!S.dem)&&u)for(;_>=p.minzoom&&(!S||!S.dem);)S=this.sourceCache.getTileByID(r.scaledTo(_--).key);return S}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,u){return u[r.canonical.z]&&r.canonical.x>=u[r.canonical.z].minTileX&&r.canonical.x<=u[r.canonical.z].maxTileX&&r.canonical.y>=u[r.canonical.z].minTileY&&r.canonical.y<=u[r.canonical.z].maxTileY}}class Vd{constructor(r,u,p){this._meshCache={},this.painter=r,this.sourceCache=new ji(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,p,_=l.$){var S;if(!(u>=0&&u<_&&p>=0&&p<_))return 0;const j=this.getTerrainData(r),k=(S=j.tile)===null||S===void 0?void 0:S.dem;if(!k)return 0;const R=l.cs([],[u/_*l.$,p/_*l.$],j.u_terrain_matrix),$=[R[0]*k.dim,R[1]*k.dim],U=Math.floor($[0]),X=Math.floor($[1]),Z=$[0]-U,Q=$[1]-X;return k.get(U,X)*(1-Z)*(1-Q)+k.get(U+1,X)*Z*(1-Q)+k.get(U,X+1)*(1-Z)*Q+k.get(U+1,X+1)*Z*Q}getElevationForLngLatZoom(r,u){if(!l.ct(u,r.wrap()))return 0;const{tileID:p,mercatorX:_,mercatorY:S}=this._getOverscaledTileIDFromLngLatZoom(r,u);return this.getElevation(p,_%l.$,S%l.$,l.$)}getElevation(r,u,p,_=l.$){return this.getDEMElevation(r,u,p,_)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const _=this.painter.context,S=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new l.T(_,S,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new l.T(_,new l.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ag([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const _=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new l.T(_,u.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),u.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+r.key;if(p&&!this._demMatrixCache[p]){const _=this.sourceCache.sourceCache._source.maxzoom;let S=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=_?S=r.canonical.z-_:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const j=r.canonical.x-(r.canonical.x>>S<<S),k=r.canonical.y-(r.canonical.y>>S<<S),R=l.cu(new Float64Array(16),[1/(l.$<<S),1/(l.$<<S),0]);l.M(R,R,[j*l.$,k*l.$,0]),this._demMatrixCache[r.key]={matrix:R,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){const u=this.painter,p=u.width/devicePixelRatio,_=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new l.T(u.context,{width:p,height:_,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new l.T(u.context,{width:p,height:_,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,_,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,_))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,j=0;S<this._coordsTextureSize;S++)for(let k=0;k<this._coordsTextureSize;k++,j+=4)u[j+0]=255&k,u[j+1]=255&S,u[j+2]=k>>8<<4|S>>8,u[j+3]=0;const p=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),_=new l.T(r,p,r.gl.RGBA,{premultiply:!1});return _.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),p=this.painter.context,_=p.gl,S=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),j=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),k=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(S,k-j-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const R=u[0]+(u[2]>>4<<8),$=u[1]+((15&u[2])<<8),U=this.coordsIndex[255-u[3]],X=U&&this.sourceCache.getTileByID(U);if(!X)return null;const Z=this._coordsTextureSize,Q=(1<<X.tileID.canonical.z)*Z;return new l.a1((X.tileID.canonical.x*Z+R)/Q+X.tileID.wrap,(X.tileID.canonical.y*Z+$)/Q,this.getElevation(X.tileID,R,$,Z))}depthAtPoint(r){const u=new Uint8Array(4),p=this.painter.context,_=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(r){var u;const p=((u=this.painter.style.projection)===null||u===void 0?void 0:u.transitionState)>0,_=p&&r.canonical.y===0,S=p&&r.canonical.y===(1<<r.canonical.z)-1,j=`m_${_?"n":""}_${S?"s":""}`;if(this._meshCache[j])return this._meshCache[j];const k=this.painter.context,R=new l.cv,$=new l.aN,U=this.meshSize,X=l.$/U,Z=U*U;for(let we=0;we<=U;we++)for(let De=0;De<=U;De++)R.emplaceBack(De*X,we*X,0);for(let we=0;we<Z;we+=U+1)for(let De=0;De<U;De++)$.emplaceBack(De+we,U+De+we+1,U+De+we+2),$.emplaceBack(De+we,U+De+we+2,De+we+1);const Q=R.length,se=Q+(U+1),me=(U+1)*U,pe=_?l.bh:0,ye=_?0:1,_e=S?l.bi:l.$,Ae=S?0:1;for(let we=0;we<=U;we++)R.emplaceBack(we*X,pe,ye);for(let we=0;we<=U;we++)R.emplaceBack(we*X,_e,Ae);for(let we=0;we<U;we++)$.emplaceBack(me+we,se+we,se+we+1),$.emplaceBack(me+we,se+we+1,me+we+1),$.emplaceBack(0+we,Q+we+1,Q+we),$.emplaceBack(0+we,0+we+1,Q+we+1);const be=R.length,Ee=be+2*(U+1);for(const we of[0,1])for(let De=0;De<=U;De++)for(const it of[0,1])R.emplaceBack(we*l.$,De*X,it);for(let we=0;we<2*U;we+=2)$.emplaceBack(be+we,be+we+1,be+we+3),$.emplaceBack(be+we,be+we+3,be+we+2),$.emplaceBack(Ee+we,Ee+we+3,Ee+we+1),$.emplaceBack(Ee+we,Ee+we+2,Ee+we+3);const Ie=new gc(k.createVertexBuffer(R,Dc.members),k.createIndexBuffer($),l.aM.simpleSegment(0,0,R.length,$.length));return this._meshCache[j]=Ie,Ie}getMeshFrameDelta(r){return 2*Math.PI*l.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,u){var p;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(r,u);return(p=this.getMinMaxElevation(_).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(r,u){const p=l.a1.fromLngLat(r.wrap()),_=(1<<u)*l.$,S=p.x*_,j=p.y*_,k=Math.floor(S/l.$),R=Math.floor(j/l.$);return{tileID:new l.Z(u,0,u,k,R),mercatorX:S,mercatorY:j}}}class Wa{constructor(r,u,p){this._context=r,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new l.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:r,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Ul={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Gd{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new Wa(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(p=>!r._layers[p].isHidden(u)),this._coordsAscending={};for(const p in r.sourceCaches){this._coordsAscending[p]={};const _=r.sourceCaches[p].getVisibleCoordinates(),S=r.sourceCaches[p].getSource(),j=S instanceof Wn?S.terrainTileRanges:null;for(const k of _){const R=this.terrain.sourceCache.getTerrainCoords(k,j);for(const $ in R)this._coordsAscending[p][$]||(this._coordsAscending[p][$]=[]),this._coordsAscending[p][$].push(R[$])}}this._coordsAscendingStr={};for(const p of r._order){const _=r._layers[p],S=_.source;if(Ul[_.type]&&!this._coordsAscendingStr[S]){this._coordsAscendingStr[S]={};for(const j in this._coordsAscending[S])this._coordsAscendingStr[S][j]=this._coordsAscending[S][j].map(k=>k.key).sort().join()}}for(const p of this._renderableTiles)for(const _ in this._coordsAscendingStr){const S=this._coordsAscendingStr[_][p.tileID.key];S&&S!==p.rttCoords[_]&&(p.rtt=[])}}renderLayer(r,u){if(r.isHidden(this.painter.transform.zoom))return!1;const p=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),_=r.type,S=this.painter,j=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Ul[_]&&(this._prevType&&Ul[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(r.id),!j))return!0;if(Ul[this._prevType]||Ul[_]&&j){this._prevType=_;const k=this._stacks.length-1,R=this._stacks[k]||[];for(const $ of this._renderableTiles){if(this.pool.isFull()&&(Ec(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push($),$.rtt[k]){const X=this.pool.getObjectForId($.rtt[k].id);if(X.stamp===$.rtt[k].stamp){this.pool.useObject(X);continue}}const U=this.pool.getOrCreateFreeObject();this.pool.useObject(U),this.pool.stampObject(U),$.rtt[k]={id:U.id,stamp:U.stamp},S.context.bindFramebuffer.set(U.fbo.framebuffer),S.context.clear({color:l.bf.transparent,stencil:0}),S.currentStencilSource=void 0;for(let X=0;X<R.length;X++){const Z=S.style._layers[R[X]],Q=Z.source?this._coordsAscending[Z.source][$.tileID.key]:[$.tileID];S.context.viewport.set([0,0,U.fbo.width,U.fbo.height]),S._renderTileClippingMasks(Z,Q,!0),S.renderLayer(S,S.style.sourceCaches[Z.source],Z,Q,p),Z.source&&($.rttCoords[Z.source]=this._coordsAscendingStr[Z.source][$.tileID.key])}}return Ec(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),Ul[_]}return!1}}const Zd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Hd=M,gi={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Lt,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},_r={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class En{constructor(r,u,p=!1){this.mousedown=S=>{this.startMove(S,F.mousePos(this.element,S)),F.addEventListener(window,"mousemove",this.mousemove),F.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.move(S,F.mousePos(this.element,S))},this.mouseup=S=>{this._rotatePitchHandler.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=F.touchPos(this.element,S.targetTouches)[0],this.startMove(S,this._startPos),F.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=F.touchPos(this.element,S.targetTouches)[0],this.move(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;const _=new Ch;this._rotatePitchHandler=new fs({clickTolerance:3,move:(S,j)=>{const k=u.getBoundingClientRect(),R=new l.P((k.bottom-k.top)/2,(k.right-k.left)/2);return{bearingDelta:l.cn(new l.P(S.x,j.y),j,R),pitchDelta:p?-.5*(j.y-S.y):void 0}},moveStateManager:_,enable:!0,assignEvents:()=>{}}),this.map=r,F.addEventListener(u,"mousedown",this.mousedown),F.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),F.addEventListener(u,"touchcancel",this.reset)}startMove(r,u){this._rotatePitchHandler.dragStart(r,u),F.disableDrag()}move(r,u){const p=this.map,{bearingDelta:_,pitchDelta:S}=this._rotatePitchHandler.dragMove(r,u)||{};_&&p.setBearing(p.getBearing()+_),S&&p.setPitch(p.getPitch()+S)}off(){const r=this.element;F.removeEventListener(r,"mousedown",this.mousedown),F.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend),F.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){F.enableDrag(),F.removeEventListener(window,"mousemove",this.mousemove),F.removeEventListener(window,"mouseup",this.mouseup),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend)}}let Ya;function ys(b,r,u,p=!1){if(p||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return b==null?void 0:b.wrap();const _=new l.S(b.lng,b.lat);if(b=new l.S(b.lng,b.lat),r){const S=new l.S(b.lng-360,b.lat),j=new l.S(b.lng+360,b.lat),k=u.locationToScreenPoint(b).distSqr(r);u.locationToScreenPoint(S).distSqr(r)<k?b=S:u.locationToScreenPoint(j).distSqr(r)<k&&(b=j)}for(;Math.abs(b.lng-u.center.lng)>180;){const S=u.locationToScreenPoint(b);if(S.x>=0&&S.y>=0&&S.x<=u.width&&S.y<=u.height)break;b.lng>u.center.lng?b.lng-=360:b.lng+=360}return b.lng!==_.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(b))?b:_}const Gs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ka(b,r,u){const p=b.classList;for(const _ in Gs)p.remove(`maplibregl-${u}-anchor-${_}`);p.add(`maplibregl-${u}-anchor-${r}`)}class Zs extends l.E{constructor(r){if(super(),this._onKeyPress=u=>{const p=u.code,_=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,_=this._element;this._popup&&(p===_||_.contains(p))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=ys(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),F.setTransform(this._element,`${Gs[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${_}`),L.frameAsync(new AbortController).then(()=>{this._updateOpacity(u&&u.type==="moveend")}).catch(()=>{})},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.l("dragstart"))),this.fire(new l.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=l.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=F.create("div");const u=F.createNS("http://www.w3.org/2000/svg","svg"),p=41,_=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${_}px`),u.setAttributeNS(null,"viewBox",`0 0 ${_} ${p}`);const S=F.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"stroke","none"),S.setAttributeNS(null,"stroke-width","1"),S.setAttributeNS(null,"fill","none"),S.setAttributeNS(null,"fill-rule","evenodd");const j=F.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill-rule","nonzero");const k=F.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ye of R){const _e=F.createNS("http://www.w3.org/2000/svg","ellipse");_e.setAttributeNS(null,"opacity","0.04"),_e.setAttributeNS(null,"cx","10.5"),_e.setAttributeNS(null,"cy","5.80029008"),_e.setAttributeNS(null,"rx",ye.rx),_e.setAttributeNS(null,"ry",ye.ry),k.appendChild(_e)}const $=F.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);const U=F.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(U);const X=F.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"opacity","0.25"),X.setAttributeNS(null,"fill","#000000");const Z=F.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),X.appendChild(Z);const Q=F.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Q.setAttributeNS(null,"fill","#FFFFFF");const se=F.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(8.0, 8.0)");const me=F.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#000000"),me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962");const pe=F.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#FFFFFF"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962"),se.appendChild(me),se.appendChild(pe),j.appendChild(k),j.appendChild($),j.appendChild(X),j.appendChild(Q),j.appendChild(se),u.appendChild(j),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(u),this._offset=l.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Ka(this._element,this._anchor,"marker"),r&&r.className)for(const u of r.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),F.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.S.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const _=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var u,p;const _=(u=this._map)===null||u===void 0?void 0:u.terrain,S=this._map.transform.isLocationOccluded(this._lngLat);if(!_||S){const Q=S?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Q&&(this._element.style.opacity=Q))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const j=this._map,k=j.terrain.depthAtPoint(this._pos),R=j.terrain.getElevationForLngLatZoom(this._lngLat,j.transform.tileZoom);if(j.transform.lngLatToCameraDepth(this._lngLat,R)-k<.006)return void(this._element.style.opacity=this._opacity);const $=-this._offset.y/j.transform.pixelsPerMeter,U=Math.sin(j.getPitch()*Math.PI/180)*$,X=j.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),Z=j.transform.lngLatToCameraDepth(this._lngLat,R+U)-X>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&Z&&this._popup.remove(),this._element.style.opacity=Z?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=l.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,u){return(this._opacity===void 0||r===void 0&&u===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const Tu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ho=0,Hs=!1;const Nh={maxWidth:100,unit:"metric"};function Au(b,r,u){const p=u&&u.maxWidth||100,_=b._container.clientHeight/2,S=b._container.clientWidth/2,j=b.unproject([S-p/2,_]),k=b.unproject([S+p/2,_]),R=Math.round(b.project(k).x-b.project(j).x),$=Math.min(p,R,b._container.clientWidth),U=j.distanceTo(k);if(u&&u.unit==="imperial"){const X=3.2808*U;X>5280?Xs(r,$,X/5280,b._getUIString("ScaleControl.Miles")):Xs(r,$,X,b._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Xs(r,$,U/1852,b._getUIString("ScaleControl.NauticalMiles")):U>=1e3?Xs(r,$,U/1e3,b._getUIString("ScaleControl.Kilometers")):Xs(r,$,U,b._getUIString("ScaleControl.Meters"))}function Xs(b,r,u,p){const _=function(S){const j=Math.pow(10,`${Math.floor(S)}`.length-1);let k=S/j;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(R){const $=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*$)/$}(k),j*k}(u);b.style.width=r*(_/u)+"px",b.innerHTML=`${_}&nbsp;${p}`}const Rh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Dh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function zc(b){if(b){if(typeof b=="number"){const r=Math.round(Math.abs(b)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,b),"top-left":new l.P(r,r),"top-right":new l.P(-r,r),bottom:new l.P(0,-b),"bottom-left":new l.P(r,-r),"bottom-right":new l.P(-r,-r),left:new l.P(b,0),right:new l.P(-b,0)}}if(b instanceof l.P||Array.isArray(b)){const r=l.P.convert(b);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.P.convert(b.center||[0,0]),top:l.P.convert(b.top||[0,0]),"top-left":l.P.convert(b["top-left"]||[0,0]),"top-right":l.P.convert(b["top-right"]||[0,0]),bottom:l.P.convert(b.bottom||[0,0]),"bottom-left":l.P.convert(b["bottom-left"]||[0,0]),"bottom-right":l.P.convert(b["bottom-right"]||[0,0]),left:l.P.convert(b.left||[0,0]),right:l.P.convert(b.right||[0,0])}}return zc(new l.P(0,0))}const zh=M;m.AJAXError=l.cz,m.Event=l.l,m.Evented=l.E,m.LngLat=l.S,m.MercatorCoordinate=l.a1,m.Point=l.P,m.addProtocol=l.cA,m.config=l.a,m.removeProtocol=l.cB,m.AttributionControl=Xt,m.BoxZoomHandler=Ia,m.CanvasSource=ki,m.CooperativeGesturesHandler=on,m.DoubleClickZoomHandler=wu,m.DragPanHandler=kh,m.DragRotateHandler=Xa,m.EdgeInsets=Ro,m.FullscreenControl=class extends l.E{constructor(b={}){super(),this._onFullscreenChange=()=>{var r;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=u==null?void 0:u.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){F.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const b=this._fullscreenButton=F.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);F.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},m.GeoJSONSource=Ii,m.GeolocateControl=class extends l.E{constructor(b){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new l.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const u=new l.S(r.coords.longitude,r.coords.latitude),p=r.coords.accuracy,_=this._map.getBearing(),S=l.e({bearing:_},this.options.fitBoundsOptions),j=fr.fromLngLat(u,p);this._map.fitBounds(j,S,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const u=new l.S(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=r.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Hs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=F.create("button","maplibregl-ctrl-geolocate",this._container),F.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Zs({element:this._dotElement}),this._circleElement=F.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Zs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{const p=(u==null?void 0:u[0])instanceof ResizeObserverEntry;u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.l("trackuserlocationend")),this.fire(new l.l("userlocationlostfocus")))})}},this.options=l.e({},Tu,b)}onAdd(b){return this._map=b,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return l._(this,arguments,void 0,function*(r=!1){if(Ya!==void 0&&!r)return Ya;if(window.navigator.permissions===void 0)return Ya=!!window.navigator.geolocation,Ya;try{Ya=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ya=!!window.navigator.geolocation}return Ya})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),F.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Ho=0,Hs=!1}_isOutOfMapMaxBounds(b){const r=this._map.getMaxBounds(),u=b.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const b=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&b))return;const r=this._map.project(b),u=this._map.unproject([r.x+100,r.y]),p=b.distanceTo(u)/100,_=2*this._accuracy/p;this._circleElement.style.width=`${_.toFixed(2)}px`,this._circleElement.style.height=`${_.toFixed(2)}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ho--,Hs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.l("trackuserlocationstart")),this.fire(new l.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ho++,Ho>1?(b={maximumAge:6e5,timeout:0},Hs=!0):(b=this.options.positionOptions,Hs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},m.GlobeControl=class{constructor(){this._toggleProjection=()=>{var b;const r=(b=this._map.getProjection())===null||b===void 0?void 0:b.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var b;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((b=this._map.getProjection())===null||b===void 0?void 0:b.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(b){return this._map=b,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=F.create("button","maplibregl-ctrl-globe",this._container),F.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},m.Hash=bi,m.ImageSource=Wn,m.KeyboardHandler=Us,m.LngLatBounds=fr,m.LogoControl=Rc,m.Map=class extends ql{constructor(b){var r,u;l.cw.mark(l.cx.create);const p=Object.assign(Object.assign(Object.assign({},gi),b),{canvasContextAttributes:Object.assign(Object.assign({},gi.canvasContextAttributes),b.canvasContextAttributes)});if(p.minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const _=new Cs,S=new Os;if(p.minZoom!==void 0&&_.setMinZoom(p.minZoom),p.maxZoom!==void 0&&_.setMaxZoom(p.maxZoom),p.minPitch!==void 0&&_.setMinPitch(p.minPitch),p.maxPitch!==void 0&&_.setMaxPitch(p.maxPitch),p.renderWorldCopies!==void 0&&_.setRenderWorldCopies(p.renderWorldCopies),super(_,S,{bearingSnap:p.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Fn,this._controls=[],this._mapId=l.a7(),this._contextLost=k=>{k.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.l("webglcontextlost",{originalEvent:k}))},this._contextRestored=k=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.l("webglcontextrestored",{originalEvent:k}))},this._onMapScroll=k=>{if(k.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=p.trackResize===!0,this._bearingSnap=p.bearingSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=p.refreshExpiredTiles===!0,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions===!0,this._collectResourceTiming=p.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Zd),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this.transformCameraUpdate=p.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=p.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ce.addThrottleControl(()=>this.isMoving()),this._requestManager=new J(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let k=!1;const R=hs($=>{this._trackResize&&!this._removed&&(this.resize($),this.redraw())},50);this._resizeObserver=new ResizeObserver($=>{k?R($):k=!0}),this._resizeObserver.observe(this._container)}this.handlers=new qi(this,p),this._hash=p.hash&&new bi(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.e({},p.fitBoundsOptions,{duration:0}))));const j=typeof p.style=="string"||((u=(r=p.style)===null||r===void 0?void 0:r.projection)===null||u===void 0?void 0:u.type)!=="globe";this.resize(null,j),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new Xt(typeof p.attributionControl=="boolean"?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new Rc,p.logoPosition),this.on("style.load",()=>{if(j||this._resizeTransform(),this.transform.unmodified){const k=l.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(k)}}),this.on("data",k=>{this._update(k.dataType==="style"),this.fire(new l.l(`${k.dataType}data`,k))}),this.on("dataloading",k=>{this.fire(new l.l(`${k.dataType}dataloading`,k))}),this.on("dataabort",k=>{this.fire(new l.l("sourcedataabort",k))})}_getMapId(){return this._mapId}setGlobalStateProperty(b,r){return this.style.setGlobalStateProperty(b,r),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(b,r){if(r===void 0&&(r=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new l.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=b.onAdd(this);this._controls.push(b);const p=this._controlPositions[r];return r.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new l.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(b);return r>-1&&this._controls.splice(r,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}coveringTiles(b){return Or(this.transform,b)}calculateCameraOptionsFromTo(b,r,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,r,u,p)}resize(b,r=!0){const[u,p]=this._containerDimensions(),_=this._getClampedPixelRatio(u,p);if(this._resizeCanvas(u,p,_),this.painter.resize(u,p,_),this.painter.overLimit()){const j=this.painter.context.gl;this._maxCanvasSize=[j.drawingBufferWidth,j.drawingBufferHeight];const k=this._getClampedPixelRatio(u,p);this._resizeCanvas(u,p,k),this.painter.resize(u,p,k)}this._resizeTransform(r);const S=!this._moving;return S&&(this.stop(),this.fire(new l.l("movestart",b)).fire(new l.l("move",b))),this.fire(new l.l("resize",b)),S&&this.fire(new l.l("moveend",b)),this}_resizeTransform(b=!0){var r;const[u,p]=this._containerDimensions();this.transform.resize(u,p,b),(r=this._requestedCameraState)===null||r===void 0||r.resize(u,p,b)}_getClampedPixelRatio(b,r){const{0:u,1:p}=this._maxCanvasSize,_=this.getPixelRatio(),S=b*_,j=r*_;return Math.min(S>u?u/S:1,j>p?p/j:1)*_}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(fr.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.setMinZoom(b),this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.setMaxZoom(b),this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.setMinPitch(b),this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(b>=this.transform.minPitch)return this.transform.setMaxPitch(b),this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.setRenderWorldCopies(b),this._update()}project(b){return this.transform.locationToScreenPoint(l.S.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.screenPointToLocation(l.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,r,u){if(b==="mouseenter"||b==="mouseover"){let p=!1;return{layers:r,listener:u,delegates:{mousemove:S=>{const j=r.filter(R=>this.getLayer(R)),k=j.length!==0?this.queryRenderedFeatures(S.point,{layers:j}):[];k.length?p||(p=!0,u.call(this,new $i(b,this,S.originalEvent,{features:k}))):p=!1},mouseout:()=>{p=!1}}}}if(b==="mouseleave"||b==="mouseout"){let p=!1;return{layers:r,listener:u,delegates:{mousemove:j=>{const k=r.filter(R=>this.getLayer(R));(k.length!==0?this.queryRenderedFeatures(j.point,{layers:k}):[]).length?p=!0:p&&(p=!1,u.call(this,new $i(b,this,j.originalEvent)))},mouseout:j=>{p&&(p=!1,u.call(this,new $i(b,this,j.originalEvent)))}}}}{const p=_=>{const S=r.filter(k=>this.getLayer(k)),j=S.length!==0?this.queryRenderedFeatures(_.point,{layers:S}):[];j.length&&(_.features=j,u.call(this,_),delete _.features)};return{layers:r,listener:u,delegates:{[b]:p}}}}_saveDelegatedListener(b,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(r)}_removeDelegatedListener(b,r,u){if(!this._delegatedListeners||!this._delegatedListeners[b])return;const p=this._delegatedListeners[b];for(let _=0;_<p.length;_++){const S=p[_];if(S.listener===u&&S.layers.length===r.length&&S.layers.every(j=>r.includes(j))){for(const j in S.delegates)this.off(j,S.delegates[j]);return void p.splice(_,1)}}}on(b,r,u){if(u===void 0)return super.on(b,r);const p=typeof r=="string"?[r]:r,_=this._createDelegatedListener(b,p,u);this._saveDelegatedListener(b,_);for(const S in _.delegates)this.on(S,_.delegates[S]);return{unsubscribe:()=>{this._removeDelegatedListener(b,p,u)}}}once(b,r,u){if(u===void 0)return super.once(b,r);const p=typeof r=="string"?[r]:r,_=this._createDelegatedListener(b,p,u);for(const S in _.delegates){const j=_.delegates[S];_.delegates[S]=(...k)=>{this._removeDelegatedListener(b,p,u),j(...k)}}this._saveDelegatedListener(b,_);for(const S in _.delegates)this.once(S,_.delegates[S]);return this}off(b,r,u){return u===void 0?super.off(b,r):(this._removeDelegatedListener(b,typeof r=="string"?[r]:r,u),this)}queryRenderedFeatures(b,r){if(!this.style)return[];let u;const p=b instanceof l.P||Array.isArray(b),_=p?b:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(p?{}:b)||{},_ instanceof l.P||typeof _[0]=="number")u=[l.P.convert(_)];else{const S=l.P.convert(_[0]),j=l.P.convert(_[1]);u=[S,new l.P(j.x,S.y),j,new l.P(S.x,j.y),S]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(b,r){return this.style.querySourceFeatures(b,r)}setStyle(b,r){return(r=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(b,r))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const r=this._locale[b];if(r==null)throw new Error(`Missing UI string '${b}'`);return r}_updateStyle(b,r){var u,p;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(b,r));const _=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new Td(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,r,_):this.style.loadJSON(b,r,_),this):((p=(u=this.style)===null||u===void 0?void 0:u.projection)===null||p===void 0||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Td(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,r){if(typeof b=="string"){const u=this._requestManager.transformRequest(b,"Style");l.j(u,new AbortController).then(p=>{this._updateDiff(p.data,r)}).catch(p=>{p&&this.fire(new l.k(p))})}else typeof b=="object"&&this._updateDiff(b,r)}_updateDiff(b,r){try{this.style.setState(b,r)&&this._update(!0)}catch(u){l.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(b,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(b,r){return this._lazyInitEmptyStyle(),this.style.addSource(b,r),this._update(!0)}isSourceLoaded(b){const r=this.style&&this.style.sourceCaches[b];if(r!==void 0)return r.loaded();this.fire(new l.k(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){const r=this.style.sourceCaches[b.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);this.terrain===null&&r.reload();for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===b.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),p.type==="color-relief"&&p.source===b.source&&l.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Vd(this.painter,r,b),this.painter.renderToTexture=new Gd(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var p;u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==b.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((p=u.source)===null||p===void 0?void 0:p.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new l.l("terrain",{terrain:b})),this}getTerrain(){var b,r;return(r=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const b=this.style&&this.style.sourceCaches;for(const r in b){const u=b[r]._tiles;for(const p in u){const _=u[p];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}setSourceTileLodParams(b,r,u){if(u){const p=this.getSource(u);if(!p)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);p.calculateTileZoom=$t(Math.max(1,b),Math.max(1,r))}else for(const p in this.style.sourceCaches)this.style.sourceCaches[p].getSource().calculateTileZoom=$t(Math.max(1,b),Math.max(1,r));return this._update(!0),this}refreshTiles(b,r){const u=this.style.sourceCaches[b];if(!u)throw new Error(`There is no source cache with ID "${b}", cannot refresh tile`);r===void 0?u.reload(!0):u.refreshTiles(r.map(p=>new l.a4(p.z,p.x,p.y)))}addImage(b,r,u={}){const{pixelRatio:p=1,sdf:_=!1,stretchX:S,stretchY:j,content:k,textFitWidth:R,textFitHeight:$}=u;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||l.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new l.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:U,height:X,data:Z}=r,Q=r;return this.style.addImage(b,{data:new l.R({width:U,height:X},new Uint8Array(Z)),pixelRatio:p,stretchX:S,stretchY:j,content:k,textFitWidth:R,textFitHeight:$,sdf:_,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,b),this}}{const{width:U,height:X,data:Z}=L.getImageData(r);this.style.addImage(b,{data:new l.R({width:U,height:X},Z),pixelRatio:p,stretchX:S,stretchY:j,content:k,textFitWidth:R,textFitHeight:$,sdf:_,version:0})}}updateImage(b,r){const u=this.style.getImage(b);if(!u)return this.fire(new l.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=r instanceof HTMLImageElement||l.b(r)?L.getImageData(r):r,{width:_,height:S,data:j}=p;if(_===void 0||S===void 0)return this.fire(new l.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==u.data.width||S!==u.data.height)return this.fire(new l.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(r instanceof HTMLImageElement||l.b(r));return u.data.replace(j,k),this.style.updateImage(b,u),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new l.k(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b){return ce.getImage(this._requestManager.transformRequest(b,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(b,r){return this._lazyInitEmptyStyle(),this.style.addLayer(b,r),this._update(!0)}moveLayer(b,r){return this.style.moveLayer(b,r),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,r,u){return this.style.setLayerZoomRange(b,r,u),this._update(!0)}setFilter(b,r,u={}){return this.style.setFilter(b,r,u),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,r,u,p={}){return this.style.setPaintProperty(b,r,u,p),this._update(!0)}getPaintProperty(b,r){return this.style.getPaintProperty(b,r)}setLayoutProperty(b,r,u,p={}){return this.style.setLayoutProperty(b,r,u,p),this._update(!0)}getLayoutProperty(b,r){return this.style.getLayoutProperty(b,r)}setGlyphs(b,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,r,u,p=>{p||this._update(!0)}),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,r,u=>{u||this._update(!0)}),this}setLight(b,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(b,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(b,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(b,r){return this.style.setFeatureState(b,r),this._update()}removeFeatureState(b,r){return this.style.removeFeatureState(b,r),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,r=0;return this._container&&(b=this._container.clientWidth||400,r=this._container.clientHeight||300),[b,r]}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map");const r=this._canvasContainer=F.create("div","maplibregl-canvas-container",b);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=F.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const _=this._controlContainer=F.create("div","maplibregl-control-container",b),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(j=>{S[j]=F.create("div",`maplibregl-ctrl-${j} `,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,r,u){this._canvas.width=Math.floor(u*b),this._canvas.height=Math.floor(u*r),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const b=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{r={requestedAttributes:b},p&&(r.statusMessage=p.statusMessage,r.type=p.type)},{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,b):this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b),!u){const p="Failed to initialize WebGL";throw r?(r.message=p,new Error(JSON.stringify(r))):new Error(p)}this.painter=new xu(u,this.transform),H.testSupport(u)}migrateProjection(b,r){super.migrateProjection(b,r),this.painter.transform=b,this.fire(new l.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){var r,u,p,_,S;const j=this._idleTriggered?this._fadeDuration:0,k=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let R=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const X=this.transform.zoom,Z=L.now();this.style.zoomHistory.update(X,Z);const Q=new l.F(X,{now:Z,fadeDuration:j,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),se=Q.crossFadingFactor();se===1&&se===this._crossFadingFactor||(R=!0,this._crossFadingFactor=se),this.style.update(Q)}const $=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0!==k;(p=this.style.projection)===null||p===void 0||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((_=this.style.projection)===null||_===void 0?void 0:_.transitionState,(S=this.style.projection)===null||S===void 0?void 0:S.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||$)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,j,this._crossSourceCollisions,$),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:j,showPadding:this.showPadding}),this.fire(new l.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.cw.mark(l.cx.load),this.fire(new l.l("load"))),this.style&&(this.style.hasTransitions()||R)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const U=this._sourcesDirty||this._styleDirty||this._placementDirty;return U||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.l("idle")),!this._loaded||this._fullyLoaded||U||(this._fullyLoaded=!0,l.cw.mark(l.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ce.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),F.remove(this._canvasContainer),F.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),l.cw.clearMetrics(),this._removed=!0,this.fire(new l.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,L.frame(this._frameRequest,b=>{l.cw.frame(b),this._frameRequest=null;try{this._render(b)}catch(r){if(!l.cy(r)&&!function(u){return u.message===vo}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return Hd}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(b){return this._lazyInitEmptyStyle(),this.style.setProjection(b),this._update(!0)}},m.MapMouseEvent=$i,m.MapTouchEvent=Oa,m.MapWheelEvent=Fs,m.Marker=Zs,m.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{const r=this._map.getZoom(),u=r===this._map.getMaxZoom(),p=r===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);r.title=p,r.setAttribute("aria-label",p)},this.options=l.e({},_r,b),this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),F.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),F.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=F.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new En(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){F.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,r){const u=F.create("button",b,this._container);return u.type="button",u.addEventListener("click",r),u}},m.Popup=class extends l.E{constructor(b){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&F.remove(this._content),this._container&&(F.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=F.create("div","maplibregl-popup",this._map.getContainer()),this._tip=F.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const j of this.options.className.split(" "))this._container.classList.add(j);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ys(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const u=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor;const _=zc(this.options.offset);if(!p){const j=this._container.offsetWidth,k=this._container.offsetHeight;let R;R=u.y+_.bottom.y<k?["top"]:u.y>this._map.transform.height-k?["bottom"]:[],u.x<j/2?R.push("left"):u.x>this._map.transform.width-j/2&&R.push("right"),p=R.length===0?"bottom":R.join("-")}let S=u.add(_[p]);this.options.subpixelPositioning||(S=S.round()),F.setTransform(this._container,`${Gs[p]} translate(${S.x}px,${S.y}px)`),Ka(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Rh),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=l.S.convert(b),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const r=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=b;p=u.firstChild,p;)r.appendChild(p);return this.setDOMContent(r)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=F.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){return this._container&&this._container.classList.add(b),this}removeClassName(b){return this._container&&this._container.classList.remove(b),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}setSubpixelPositioning(b){this.options.subpixelPositioning=b}_createCloseButton(){this.options.closeButton&&(this._closeButton=F.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(Dh);b&&b.focus()}},m.RasterDEMTileSource=Qr,m.RasterTileSource=rn,m.ScaleControl=class{constructor(b){this._onMove=()=>{Au(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Au(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Nh),b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){F.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},m.ScrollZoomHandler=$l,m.Style=Td,m.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=b}onAdd(b){return this._map=b,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=F.create("button","maplibregl-ctrl-terrain",this._container),F.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){F.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},m.TwoFingersTouchPitchHandler=Oh,m.TwoFingersTouchRotateHandler=bo,m.TwoFingersTouchZoomHandler=kc,m.TwoFingersTouchZoomRotateHandler=Sr,m.VectorTileSource=Kr,m.VideoSource=Fa,m.addSourceType=(b,r)=>l._(void 0,void 0,void 0,function*(){if(Yi(b))throw new Error(`A source type called "${b}" already exists.`);((u,p)=>{Ni[u]=p})(b,r)}),m.clearPrewarmedResources=function(){const b=ct;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(xe),ct=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},m.createTileMesh=wl,m.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},m.getRTLTextPluginStatus=function(){return Jn().getRTLTextPluginStatus()},m.getVersion=function(){return zh},m.getWorkerCount=function(){return We.workerCount},m.getWorkerUrl=function(){return l.a.WORKER_URL},m.importScriptInWorkers=function(b){return yr().broadcast("IS",b)},m.prewarm=function(){Gt().acquire(xe)},m.setMaxParallelImageRequests=function(b){l.a.MAX_PARALLEL_IMAGE_REQUESTS=b},m.setRTLTextPlugin=function(b,r){return Jn().setRTLTextPlugin(b,r)},m.setWorkerCount=function(b){We.workerCount=b},m.setWorkerUrl=function(b){l.a.WORKER_URL=b}});var y=i;return y})}(t_)),t_.exports}GW();const ZW=VS("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function r_({className:e,variant:t,...i}){return x.jsx("div",{"data-slot":"alert",role:"alert",className:Ba(ZW({variant:t}),e),...i})}function n_({className:e,...t}){return x.jsx("div",{"data-slot":"alert-description",className:Ba("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}const HW=({navigateTo:e})=>{const[t,i]=Fe.useState({email:"",name:"",city:"",phone:"",honeypot:""}),[a,d]=Fe.useState(!1),[y,m]=Fe.useState(!1),[l,M]=Fe.useState(null),[E,N]=Fe.useState(null),[C,L]=Fe.useState(null),[F,H]=Fe.useState(!1),[G,q]=Fe.useState(null);Fe.useEffect(()=>{const he=new URLSearchParams(window.location.search).get("ref");if(he)q(he),localStorage.setItem("muth_ref",he),fetch("/api/referrals/click",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refCode:he,path:window.location.pathname})}).catch(ge=>console.error("Failed to record click:",ge));else{const ge=localStorage.getItem("muth_ref");ge&&q(ge)}},[]);const re=ee=>{const{name:he,value:ge}=ee.target;i(Oe=>({...Oe,[he]:ge}))},ie=async ee=>{ee.preventDefault(),d(!0),M(null);try{const he=await fetch("/api/waitlist/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,refCode:G})}),ge=await he.json();if(!he.ok)throw new Error(ge.error||"حدث خطأ أثناء التسجيل");ge.ok&&(m(!0),N(ge.refCode),L(ge.stats),fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventName:"waitlist_view",eventProps:{ref_code:ge.refCode}})}).catch(()=>{}))}catch(he){M(he.message)}finally{d(!1)}},ne=()=>{const ee=`https://www.muthammen.com/?ref=${E}`;navigator.clipboard.writeText(ee),H(!0),setTimeout(()=>H(!1),2e3)},ce=ee=>{switch(ee){case"diamond":return x.jsx(ZS,{className:"w-5 h-5 text-purple-600"});case"gold":return x.jsx(qI,{className:"w-5 h-5 text-yellow-600"});case"silver":return x.jsx(Mf,{className:"w-5 h-5 text-gray-400"});case"bronze":return x.jsx(Mf,{className:"w-5 h-5 text-orange-600"});default:return x.jsx(Xu,{className:"w-5 h-5 text-gray-400"})}},J=ee=>{switch(ee){case"diamond":return"الماسي (50+ إحالة)";case"gold":return"الذهبي (20-49 إحالة)";case"silver":return"الفضي (10-19 إحالة)";case"bronze":return"البرونزي (3-9 إحالات)";default:return"ابدأ بدعوة الأصدقاء"}};return x.jsxs("div",{className:"container mx-auto px-4 py-12",children:[x.jsxs("div",{className:"text-center mb-12",children:[x.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-yellow-100 text-yellow-800 text-sm font-semibold mb-4",children:[x.jsx(im,{className:"w-4 h-4"}),x.jsx("span",{children:"قريبًا"})]}),x.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-4",children:"خريطة الوعي العقاري الأولى في المملكة"}),x.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"استكشف الأسعار، الاتجاهات، والفرص في كل حي بتفاصيل غير مسبوقة"})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[x.jsxs(Ft,{className:"p-6",children:[x.jsx("div",{className:"p-3 rounded-xl bg-blue-100 w-fit mb-4",children:x.jsx(im,{className:"w-6 h-6 text-blue-600"})}),x.jsx("h3",{className:"font-bold text-lg mb-2",children:"خريطة تفاعلية للرياض"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"عرض جميع الأحياء مع معلومات تفصيلية عن الأسعار والمرافق"})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsx("div",{className:"p-3 rounded-xl bg-green-100 w-fit mb-4",children:x.jsx(Ms,{className:"w-6 h-6 text-green-600"})}),x.jsx("h3",{className:"font-bold text-lg mb-2",children:"اتجاهات الأسعار"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"تتبع تغيرات الأسعار عبر الزمن واكتشف الفرص الاستثمارية"})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsx("div",{className:"p-3 rounded-xl bg-purple-100 w-fit mb-4",children:x.jsx(dc,{className:"w-6 h-6 text-purple-600"})}),x.jsx("h3",{className:"font-bold text-lg mb-2",children:"إحصائيات تفصيلية"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"متوسط الأسعار، عدد العقارات، ومعدل النمو لكل حي"})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsx("div",{className:"p-3 rounded-xl bg-orange-100 w-fit mb-4",children:x.jsx(Qc,{className:"w-6 h-6 text-orange-600"})}),x.jsx("h3",{className:"font-bold text-lg mb-2",children:"فلترة متقدمة"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"فلتر حسب نوع العقار، النطاق السعري، والمنطقة"})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsx("div",{className:"p-3 rounded-xl bg-pink-100 w-fit mb-4",children:x.jsx(cl,{className:"w-6 h-6 text-pink-600"})}),x.jsx("h3",{className:"font-bold text-lg mb-2",children:"مقارنة الأحياء"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"قارن بين الأحياء لاتخاذ قرار مستنير"})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsx("div",{className:"p-3 rounded-xl bg-cyan-100 w-fit mb-4",children:x.jsx(dd,{className:"w-6 h-6 text-cyan-600"})}),x.jsx("h3",{className:"font-bold text-lg mb-2",children:"توصيات ذكية"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"اقتراحات مخصصة بناءً على احتياجاتك وميزانيتك"})]})]}),x.jsxs(Ft,{className:"p-8 max-w-2xl mx-auto mb-12",children:[x.jsxs("div",{className:"text-center mb-6",children:[x.jsx("h2",{className:"text-3xl font-bold mb-2",children:"سجّل الآن واحصل على وصول مبكر"}),x.jsx("p",{className:"text-muted-foreground",children:"كن من أوائل المستخدمين واحصل على مزايا حصرية"})]}),y?x.jsxs("div",{className:"text-center space-y-6",children:[x.jsx("div",{className:"p-4 rounded-full bg-green-100 w-20 h-20 mx-auto flex items-center justify-center",children:x.jsx(cl,{className:"w-10 h-10 text-green-600"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-2xl font-bold mb-2",children:"تم التسجيل بنجاح!"}),x.jsx("p",{className:"text-muted-foreground",children:"شكراً لانضمامك. سنرسل لك تحديثات عند إطلاق الخريطة."})]}),x.jsxs(Ft,{className:"p-6 bg-gradient-to-br from-blue-50 to-purple-50",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[ce(C==null?void 0:C.rewardTier),x.jsx("h4",{className:"font-bold",children:"رابط الإحالة الخاص بك"})]}),x.jsxs("div",{className:"flex gap-2 mb-4",children:[x.jsx(Mr,{value:`https://www.muthammen.com/?ref=${E}`,readOnly:!0,className:"font-mono text-sm"}),x.jsx(Zr,{onClick:ne,variant:"outline",size:"icon",children:F?x.jsx(RI,{className:"w-4 h-4"}):x.jsx(zI,{className:"w-4 h-4"})})]}),x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted-foreground",children:"عدد الإحالات:"}),x.jsx("span",{className:"font-bold",children:(C==null?void 0:C.referralsCount)||0})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted-foreground",children:"المستوى:"}),x.jsx("span",{className:"font-bold",children:J(C==null?void 0:C.rewardTier)})]})]}),x.jsxs(r_,{className:"mt-4 bg-white",children:[x.jsx(Mf,{className:"h-4 w-4"}),x.jsx(n_,{children:"شارك رابطك مع الأصدقاء واحصل على مكافآت حصرية!"})]})]}),x.jsxs(Zr,{onClick:()=>e("home"),variant:"outline",className:"w-full",children:[x.jsx(fc,{className:"w-4 h-4 mr-2"}),"ابدأ بالتقييم الآن"]})]}):x.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[G&&x.jsxs(r_,{className:"bg-green-50 border-green-200",children:[x.jsx(cl,{className:"h-4 w-4 text-green-600"}),x.jsxs(n_,{className:"text-green-800",children:["تم استخدام كود الإحالة: ",x.jsx("strong",{children:G})]})]}),l&&x.jsxs(r_,{variant:"destructive",children:[x.jsx(Qc,{className:"h-4 w-4"}),x.jsx(n_,{children:l})]}),x.jsxs("div",{children:[x.jsx(Rt,{htmlFor:"email",children:"البريد الإلكتروني *"}),x.jsx(Mr,{id:"email",name:"email",type:"email",required:!0,value:t.email,onChange:re,placeholder:"example@email.com",className:"mt-1"})]}),x.jsxs("div",{children:[x.jsx(Rt,{htmlFor:"name",children:"الاسم (اختياري)"}),x.jsx(Mr,{id:"name",name:"name",type:"text",value:t.name,onChange:re,placeholder:"أدخل اسمك",className:"mt-1"})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx(Rt,{htmlFor:"city",children:"المدينة (اختياري)"}),x.jsx(Mr,{id:"city",name:"city",type:"text",value:t.city,onChange:re,placeholder:"الرياض",className:"mt-1"})]}),x.jsxs("div",{children:[x.jsx(Rt,{htmlFor:"phone",children:"رقم الجوال (اختياري)"}),x.jsx(Mr,{id:"phone",name:"phone",type:"tel",value:t.phone,onChange:re,placeholder:"05xxxxxxxx",className:"mt-1"})]})]}),x.jsx("input",{type:"text",name:"honeypot",value:t.honeypot,onChange:re,style:{display:"none"},tabIndex:"-1",autoComplete:"off"}),x.jsx(Zr,{type:"submit",className:"w-full",size:"lg",disabled:a,children:a?"جارٍ التسجيل...":"سجّل الآن"})]})]}),x.jsxs(Ft,{className:"p-8 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:[x.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"لماذا خريطة مُثمّن؟"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold mb-2",children:"فهم أعمق للسوق"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"الخريطة تعطيك نظرة شاملة على السوق العقاري في الرياض، مما يساعدك على فهم الاتجاهات والفرص."})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold mb-2",children:"قرارات مستنيرة"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"باستخدام بيانات دقيقة وتحليلات متقدمة، يمكنك اتخاذ قرارات شراء أو استثمار أفضل."})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold mb-2",children:"توفير الوقت"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"بدلاً من البحث في مواقع متعددة، احصل على جميع المعلومات في مكان واحد."})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold mb-2",children:"شفافية كاملة"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"بيانات حقيقية ومحدثة باستمرار لضمان أعلى مستوى من الدقة."})]})]})]})]})};function Qu(e,t,{checkForDefaultPrevented:i=!0}={}){return function(d){if(e==null||e(d),i===!1||!d.defaultPrevented)return t==null?void 0:t(d)}}function QT(e,t=[]){let i=[];function a(y,m){const l=Fe.createContext(m),M=i.length;i=[...i,m];const E=C=>{var re;const{scope:L,children:F,...H}=C,G=((re=L==null?void 0:L[e])==null?void 0:re[M])||l,q=Fe.useMemo(()=>H,Object.values(H));return x.jsx(G.Provider,{value:q,children:F})};E.displayName=y+"Provider";function N(C,L){var G;const F=((G=L==null?void 0:L[e])==null?void 0:G[M])||l,H=Fe.useContext(F);if(H)return H;if(m!==void 0)return m;throw new Error(`\`${C}\` must be used within \`${y}\``)}return[E,N]}const d=()=>{const y=i.map(m=>Fe.createContext(m));return function(l){const M=(l==null?void 0:l[e])||y;return Fe.useMemo(()=>({[`__scope${e}`]:{...l,[e]:M}}),[l,M])}};return d.scopeName=e,[a,XW(d,...t)]}function XW(...e){const t=e[0];if(e.length===1)return t;const i=()=>{const a=e.map(d=>({useScope:d(),scopeName:d.scopeName}));return function(y){const m=a.reduce((l,{useScope:M,scopeName:E})=>{const C=M(y)[`__scope${E}`];return{...l,...C}},{});return Fe.useMemo(()=>({[`__scope${t.scopeName}`]:m}),[m])}};return i.scopeName=t.scopeName,i}function WW(e){const t=e+"CollectionProvider",[i,a]=QT(t),[d,y]=i(t,{collectionRef:{current:null},itemMap:new Map}),m=G=>{const{scope:q,children:re}=G,ie=$e.useRef(null),ne=$e.useRef(new Map).current;return x.jsx(d,{scope:q,itemMap:ne,collectionRef:ie,children:re})};m.displayName=t;const l=e+"CollectionSlot",M=i_(l),E=$e.forwardRef((G,q)=>{const{scope:re,children:ie}=G,ne=y(l,re),ce=ey(q,ne.collectionRef);return x.jsx(M,{ref:ce,children:ie})});E.displayName=l;const N=e+"CollectionItemSlot",C="data-radix-collection-item",L=i_(N),F=$e.forwardRef((G,q)=>{const{scope:re,children:ie,...ne}=G,ce=$e.useRef(null),J=ey(q,ce),ee=y(N,re);return $e.useEffect(()=>(ee.itemMap.set(ce,{ref:ce,...ne}),()=>void ee.itemMap.delete(ce))),x.jsx(L,{[C]:"",ref:J,children:ie})});F.displayName=N;function H(G){const q=y(e+"CollectionConsumer",G);return $e.useCallback(()=>{const ie=q.collectionRef.current;if(!ie)return[];const ne=Array.from(ie.querySelectorAll(`[${C}]`));return Array.from(q.itemMap.values()).sort((ee,he)=>ne.indexOf(ee.ref.current)-ne.indexOf(he.ref.current))},[q.collectionRef,q.itemMap])}return[{Provider:m,Slot:E,ItemSlot:F},H,a]}var tx=globalThis!=null&&globalThis.document?Fe.useLayoutEffect:()=>{},YW=yI[" useId ".trim().toString()]||(()=>{}),KW=0;function eD(e){const[t,i]=Fe.useState(YW());return tx(()=>{i(a=>a??String(KW++))},[e]),e||(t?`radix-${t}`:"")}function QW(e){const t=Fe.useRef(e);return Fe.useEffect(()=>{t.current=e}),Fe.useMemo(()=>(...i)=>{var a;return(a=t.current)==null?void 0:a.call(t,...i)},[])}var JW=yI[" useInsertionEffect ".trim().toString()]||tx;function tD({prop:e,defaultProp:t,onChange:i=()=>{},caller:a}){const[d,y,m]=eY({defaultProp:t,onChange:i}),l=e!==void 0,M=l?e:d;{const N=Fe.useRef(e!==void 0);Fe.useEffect(()=>{const C=N.current;C!==l&&console.warn(`${a} is changing from ${C?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),N.current=l},[l,a])}const E=Fe.useCallback(N=>{var C;if(l){const L=tY(N)?N(e):N;L!==e&&((C=m.current)==null||C.call(m,L))}else y(N)},[l,e,y,m]);return[M,E]}function eY({defaultProp:e,onChange:t}){const[i,a]=Fe.useState(e),d=Fe.useRef(i),y=Fe.useRef(t);return JW(()=>{y.current=t},[t]),Fe.useEffect(()=>{var m;d.current!==i&&((m=y.current)==null||m.call(y,i),d.current=i)},[i,d]),[i,a,y]}function tY(e){return typeof e=="function"}var rY=Fe.createContext(void 0);function rD(e){const t=Fe.useContext(rY);return e||t||"ltr"}var c2="rovingFocusGroup.onEntryFocus",nY={bubbles:!1,cancelable:!0},Wy="RovingFocusGroup",[$S,nD,iY]=WW(Wy),[aY,iD]=QT(Wy,[iY]),[oY,sY]=aY(Wy),aD=Fe.forwardRef((e,t)=>x.jsx($S.Provider,{scope:e.__scopeRovingFocusGroup,children:x.jsx($S.Slot,{scope:e.__scopeRovingFocusGroup,children:x.jsx(lY,{...e,ref:t})})}));aD.displayName=Wy;var lY=Fe.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:i,orientation:a,loop:d=!1,dir:y,currentTabStopId:m,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:M,onEntryFocus:E,preventScrollOnEntryFocus:N=!1,...C}=e,L=Fe.useRef(null),F=ey(t,L),H=rD(y),[G,q]=tD({prop:m,defaultProp:l??null,onChange:M,caller:Wy}),[re,ie]=Fe.useState(!1),ne=QW(E),ce=nD(i),J=Fe.useRef(!1),[ee,he]=Fe.useState(0);return Fe.useEffect(()=>{const ge=L.current;if(ge)return ge.addEventListener(c2,ne),()=>ge.removeEventListener(c2,ne)},[ne]),x.jsx(oY,{scope:i,orientation:a,dir:H,loop:d,currentTabStopId:G,onItemFocus:Fe.useCallback(ge=>q(ge),[q]),onItemShiftTab:Fe.useCallback(()=>ie(!0),[]),onFocusableItemAdd:Fe.useCallback(()=>he(ge=>ge+1),[]),onFocusableItemRemove:Fe.useCallback(()=>he(ge=>ge-1),[]),children:x.jsx(Df.div,{tabIndex:re||ee===0?-1:0,"data-orientation":a,...C,ref:F,style:{outline:"none",...e.style},onMouseDown:Qu(e.onMouseDown,()=>{J.current=!0}),onFocus:Qu(e.onFocus,ge=>{const Oe=!J.current;if(ge.target===ge.currentTarget&&Oe&&!re){const at=new CustomEvent(c2,nY);if(ge.currentTarget.dispatchEvent(at),!at.defaultPrevented){const ke=ce().filter(Te=>Te.focusable),qe=ke.find(Te=>Te.active),et=ke.find(Te=>Te.id===G),rt=[qe,et,...ke].filter(Boolean).map(Te=>Te.ref.current);lD(rt,N)}}J.current=!1}),onBlur:Qu(e.onBlur,()=>ie(!1))})})}),oD="RovingFocusGroupItem",sD=Fe.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:i,focusable:a=!0,active:d=!1,tabStopId:y,children:m,...l}=e,M=eD(),E=y||M,N=sY(oD,i),C=N.currentTabStopId===E,L=nD(i),{onFocusableItemAdd:F,onFocusableItemRemove:H,currentTabStopId:G}=N;return Fe.useEffect(()=>{if(a)return F(),()=>H()},[a,F,H]),x.jsx($S.ItemSlot,{scope:i,id:E,focusable:a,active:d,children:x.jsx(Df.span,{tabIndex:C?0:-1,"data-orientation":N.orientation,...l,ref:t,onMouseDown:Qu(e.onMouseDown,q=>{a?N.onItemFocus(E):q.preventDefault()}),onFocus:Qu(e.onFocus,()=>N.onItemFocus(E)),onKeyDown:Qu(e.onKeyDown,q=>{if(q.key==="Tab"&&q.shiftKey){N.onItemShiftTab();return}if(q.target!==q.currentTarget)return;const re=hY(q,N.orientation,N.dir);if(re!==void 0){if(q.metaKey||q.ctrlKey||q.altKey||q.shiftKey)return;q.preventDefault();let ne=L().filter(ce=>ce.focusable).map(ce=>ce.ref.current);if(re==="last")ne.reverse();else if(re==="prev"||re==="next"){re==="prev"&&ne.reverse();const ce=ne.indexOf(q.currentTarget);ne=N.loop?dY(ne,ce+1):ne.slice(ce+1)}setTimeout(()=>lD(ne))}}),children:typeof m=="function"?m({isCurrentTabStop:C,hasTabStop:G!=null}):m})})});sD.displayName=oD;var cY={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function uY(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function hY(e,t,i){const a=uY(e.key,i);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return cY[a]}function lD(e,t=!1){const i=document.activeElement;for(const a of e)if(a===i||(a.focus({preventScroll:t}),document.activeElement!==i))return}function dY(e,t){return e.map((i,a)=>e[(t+a)%e.length])}var fY=aD,pY=sD;function mY(e,t){return Fe.useReducer((i,a)=>t[i][a]??i,e)}var cD=e=>{const{present:t,children:i}=e,a=gY(t),d=typeof i=="function"?i({present:a.isPresent}):Fe.Children.only(i),y=ey(a.ref,yY(d));return typeof i=="function"||a.isPresent?Fe.cloneElement(d,{ref:y}):null};cD.displayName="Presence";function gY(e){const[t,i]=Fe.useState(),a=Fe.useRef(null),d=Fe.useRef(e),y=Fe.useRef("none"),m=e?"mounted":"unmounted",[l,M]=mY(m,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Fe.useEffect(()=>{const E=Qv(a.current);y.current=l==="mounted"?E:"none"},[l]),tx(()=>{const E=a.current,N=d.current;if(N!==e){const L=y.current,F=Qv(E);e?M("MOUNT"):F==="none"||(E==null?void 0:E.display)==="none"?M("UNMOUNT"):M(N&&L!==F?"ANIMATION_OUT":"UNMOUNT"),d.current=e}},[e,M]),tx(()=>{if(t){let E;const N=t.ownerDocument.defaultView??window,C=F=>{const G=Qv(a.current).includes(F.animationName);if(F.target===t&&G&&(M("ANIMATION_END"),!d.current)){const q=t.style.animationFillMode;t.style.animationFillMode="forwards",E=N.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=q)})}},L=F=>{F.target===t&&(y.current=Qv(a.current))};return t.addEventListener("animationstart",L),t.addEventListener("animationcancel",C),t.addEventListener("animationend",C),()=>{N.clearTimeout(E),t.removeEventListener("animationstart",L),t.removeEventListener("animationcancel",C),t.removeEventListener("animationend",C)}}else M("ANIMATION_END")},[t,M]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:Fe.useCallback(E=>{a.current=E?getComputedStyle(E):null,i(E)},[])}}function Qv(e){return(e==null?void 0:e.animationName)||"none"}function yY(e){var a,d;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=(d=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:d.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var Rx="Tabs",[vY,gK]=QT(Rx,[iD]),uD=iD(),[_Y,JT]=vY(Rx),hD=Fe.forwardRef((e,t)=>{const{__scopeTabs:i,value:a,onValueChange:d,defaultValue:y,orientation:m="horizontal",dir:l,activationMode:M="automatic",...E}=e,N=rD(l),[C,L]=tD({prop:a,onChange:d,defaultProp:y??"",caller:Rx});return x.jsx(_Y,{scope:i,baseId:eD(),value:C,onValueChange:L,orientation:m,dir:N,activationMode:M,children:x.jsx(Df.div,{dir:N,"data-orientation":m,...E,ref:t})})});hD.displayName=Rx;var dD="TabsList",fD=Fe.forwardRef((e,t)=>{const{__scopeTabs:i,loop:a=!0,...d}=e,y=JT(dD,i),m=uD(i);return x.jsx(fY,{asChild:!0,...m,orientation:y.orientation,dir:y.dir,loop:a,children:x.jsx(Df.div,{role:"tablist","aria-orientation":y.orientation,...d,ref:t})})});fD.displayName=dD;var pD="TabsTrigger",mD=Fe.forwardRef((e,t)=>{const{__scopeTabs:i,value:a,disabled:d=!1,...y}=e,m=JT(pD,i),l=uD(i),M=vD(m.baseId,a),E=_D(m.baseId,a),N=a===m.value;return x.jsx(pY,{asChild:!0,...l,focusable:!d,active:N,children:x.jsx(Df.button,{type:"button",role:"tab","aria-selected":N,"aria-controls":E,"data-state":N?"active":"inactive","data-disabled":d?"":void 0,disabled:d,id:M,...y,ref:t,onMouseDown:Qu(e.onMouseDown,C=>{!d&&C.button===0&&C.ctrlKey===!1?m.onValueChange(a):C.preventDefault()}),onKeyDown:Qu(e.onKeyDown,C=>{[" ","Enter"].includes(C.key)&&m.onValueChange(a)}),onFocus:Qu(e.onFocus,()=>{const C=m.activationMode!=="manual";!N&&!d&&C&&m.onValueChange(a)})})})});mD.displayName=pD;var gD="TabsContent",yD=Fe.forwardRef((e,t)=>{const{__scopeTabs:i,value:a,forceMount:d,children:y,...m}=e,l=JT(gD,i),M=vD(l.baseId,a),E=_D(l.baseId,a),N=a===l.value,C=Fe.useRef(N);return Fe.useEffect(()=>{const L=requestAnimationFrame(()=>C.current=!1);return()=>cancelAnimationFrame(L)},[]),x.jsx(cD,{present:d||N,children:({present:L})=>x.jsx(Df.div,{"data-state":N?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":M,hidden:!L,id:E,tabIndex:0,...m,ref:t,style:{...e.style,animationDuration:C.current?"0s":void 0},children:L&&y})})});yD.displayName=gD;function vD(e,t){return`${e}-trigger-${t}`}function _D(e,t){return`${e}-content-${t}`}var xY=hD,bY=fD,wY=mD,SY=yD;function TY({className:e,...t}){return x.jsx(xY,{"data-slot":"tabs",className:Ba("flex flex-col gap-2",e),...t})}function AY({className:e,...t}){return x.jsx(bY,{"data-slot":"tabs-list",className:Ba("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function u2({className:e,...t}){return x.jsx(wY,{"data-slot":"tabs-trigger",className:Ba("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function h2({className:e,...t}){return x.jsx(SY,{"data-slot":"tabs-content",className:Ba("flex-1 outline-none",e),...t})}function hI({className:e,...t}){return x.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:x.jsx("table",{"data-slot":"table",className:Ba("w-full caption-bottom text-sm",e),...t})})}function dI({className:e,...t}){return x.jsx("thead",{"data-slot":"table-header",className:Ba("[&_tr]:border-b",e),...t})}function fI({className:e,...t}){return x.jsx("tbody",{"data-slot":"table-body",className:Ba("[&_tr:last-child]:border-0",e),...t})}function Jv({className:e,...t}){return x.jsx("tr",{"data-slot":"table-row",className:Ba("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function ao({className:e,...t}){return x.jsx("th",{"data-slot":"table-head",className:Ba("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function oo({className:e,...t}){return x.jsx("td",{"data-slot":"table-cell",className:Ba("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}var MY={};const jY=({onLogout:e})=>{const[t,i]=Fe.useState(!1),[a,d]=Fe.useState(""),[y,m]=Fe.useState(""),[l,M]=Fe.useState(!1),[E,N]=Fe.useState({totalSignups:0,todaySignups:0,weekSignups:0,totalReferrals:0,conversionRate:0,topCity:""}),[C,L]=Fe.useState([]),[F,H]=Fe.useState([]),[G,q]=Fe.useState(""),re=ee=>{ee.preventDefault();const he=MY.ADMIN_PASS||"muthammen2025";a===he?(i(!0),m(""),ie()):m("كلمة المرور غير صحيحة")},ie=async()=>{M(!0);try{setTimeout(()=>{N({totalSignups:0,todaySignups:0,weekSignups:0,totalReferrals:0,conversionRate:0,topCity:"الرياض"}),L([]),H([]),M(!1)},500)}catch(ee){console.error("Error loading data:",ee),M(!1)}},ne=(ee,he)=>{if(ee.length===0){alert("لا توجد بيانات للتصدير");return}const ge=Object.keys(ee[0]),Oe=[ge.join(","),...ee.map(qe=>ge.map(et=>{const st=qe[et];return typeof st=="string"&&st.includes(",")?`"${st}"`:st}).join(","))].join(`
`),at=new Blob(["\uFEFF"+Oe],{type:"text/csv;charset=utf-8;"}),ke=document.createElement("a");ke.href=URL.createObjectURL(at),ke.download=`${he}_${new Date().toISOString().split("T")[0]}.csv`,ke.click()},ce=ee=>{switch(ee){case"diamond":return x.jsx(ZS,{className:"w-4 h-4 text-purple-600"});case"gold":return x.jsx(qI,{className:"w-4 h-4 text-yellow-600"});case"silver":return x.jsx(kI,{className:"w-4 h-4 text-gray-400"});case"bronze":return x.jsx(Mf,{className:"w-4 h-4 text-orange-600"});default:return null}},J=C.filter(ee=>{var he,ge,Oe;return((he=ee.email)==null?void 0:he.toLowerCase().includes(G.toLowerCase()))||((ge=ee.name)==null?void 0:ge.toLowerCase().includes(G.toLowerCase()))||((Oe=ee.city)==null?void 0:Oe.toLowerCase().includes(G.toLowerCase()))});return t?x.jsxs("div",{className:"min-h-screen bg-gray-50",children:[x.jsx("div",{className:"bg-white border-b",children:x.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[x.jsx("h1",{className:"text-2xl font-bold",children:"لوحة إدارة مُثمّن"}),x.jsx(Zr,{onClick:e,variant:"outline",children:"تسجيل الخروج"})]})}),x.jsx("div",{className:"container mx-auto px-4 py-8",children:x.jsxs(TY,{defaultValue:"overview",className:"space-y-6",children:[x.jsxs(AY,{className:"grid w-full grid-cols-3",children:[x.jsx(u2,{value:"overview",children:"نظرة عامة"}),x.jsx(u2,{value:"waitlist",children:"قائمة الانتظار"}),x.jsx(u2,{value:"referrals",children:"الإحالات"})]}),x.jsxs(h2,{value:"overview",className:"space-y-6",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[x.jsx(Ft,{className:"p-6",children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:x.jsx(Xu,{className:"w-6 h-6 text-blue-600"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"إجمالي التسجيلات"}),x.jsx("p",{className:"text-2xl font-bold",children:E.totalSignups})]})]})}),x.jsx(Ft,{className:"p-6",children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:x.jsx(g2,{className:"w-6 h-6 text-green-600"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"تسجيلات اليوم"}),x.jsx("p",{className:"text-2xl font-bold",children:E.todaySignups})]})]})}),x.jsx(Ft,{className:"p-6",children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:x.jsx(Ms,{className:"w-6 h-6 text-purple-600"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"هذا الأسبوع"}),x.jsx("p",{className:"text-2xl font-bold",children:E.weekSignups})]})]})}),x.jsx(Ft,{className:"p-6",children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"p-3 rounded-xl bg-orange-100",children:x.jsx(Mf,{className:"w-6 h-6 text-orange-600"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"إجمالي الإحالات"}),x.jsx("p",{className:"text-2xl font-bold",children:E.totalReferrals})]})]})})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[x.jsxs(Ft,{className:"p-6",children:[x.jsx("h3",{className:"font-bold text-lg mb-4",children:"إحصائيات سريعة"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("span",{className:"text-muted-foreground",children:"معدل التحويل"}),x.jsxs("span",{className:"font-bold",children:[E.conversionRate,"%"]})]}),x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("span",{className:"text-muted-foreground",children:"أكثر مدينة"}),x.jsx("span",{className:"font-bold",children:E.topCity||"لا توجد بيانات"})]}),x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("span",{className:"text-muted-foreground",children:"متوسط الإحالات/مستخدم"}),x.jsx("span",{className:"font-bold",children:E.totalSignups>0?(E.totalReferrals/E.totalSignups).toFixed(2):0})]})]})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsx("h3",{className:"font-bold text-lg mb-4",children:"التحديثات الأخيرة"}),x.jsx("div",{className:"text-center text-muted-foreground py-8",children:l?"جارٍ التحميل...":"لا توجد بيانات حتى الآن"})]})]})]}),x.jsx(h2,{value:"waitlist",className:"space-y-6",children:x.jsxs(Ft,{className:"p-6",children:[x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsx("h3",{className:"font-bold text-lg",children:"قائمة المسجلين"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("div",{className:"relative",children:[x.jsx(e5,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),x.jsx(Mr,{placeholder:"بحث...",value:G,onChange:ee=>q(ee.target.value),className:"pl-10 w-64"})]}),x.jsxs(Zr,{onClick:()=>ne(C,"waitlist"),variant:"outline",disabled:C.length===0,children:[x.jsx(y2,{className:"w-4 h-4 mr-2"}),"تصدير CSV"]})]})]}),J.length===0?x.jsx("div",{className:"text-center text-muted-foreground py-12",children:l?"جارٍ التحميل...":"لا توجد تسجيلات حتى الآن"}):x.jsx("div",{className:"overflow-x-auto",children:x.jsxs(hI,{children:[x.jsx(dI,{children:x.jsxs(Jv,{children:[x.jsx(ao,{children:"البريد الإلكتروني"}),x.jsx(ao,{children:"الاسم"}),x.jsx(ao,{children:"المدينة"}),x.jsx(ao,{children:"الهاتف"}),x.jsx(ao,{children:"كود الإحالة"}),x.jsx(ao,{children:"أُحيل بواسطة"}),x.jsx(ao,{children:"عدد الإحالات"}),x.jsx(ao,{children:"المستوى"}),x.jsx(ao,{children:"تاريخ التسجيل"})]})}),x.jsx(fI,{children:J.map((ee,he)=>x.jsxs(Jv,{children:[x.jsx(oo,{className:"font-mono text-sm",children:ee.email}),x.jsx(oo,{children:ee.name||"-"}),x.jsx(oo,{children:ee.city||"-"}),x.jsx(oo,{children:ee.phone||"-"}),x.jsx(oo,{className:"font-mono text-sm",children:ee.ref_code}),x.jsx(oo,{className:"font-mono text-sm",children:ee.referred_by||"-"}),x.jsx(oo,{className:"text-center",children:ee.referrals_count}),x.jsx(oo,{children:x.jsxs("div",{className:"flex items-center gap-2",children:[ce(ee.reward_tier),x.jsx("span",{className:"capitalize",children:ee.reward_tier})]})}),x.jsx(oo,{className:"text-sm text-muted-foreground",children:new Date(ee.created_at).toLocaleDateString("ar-SA")})]},he))})]})})]})}),x.jsx(h2,{value:"referrals",className:"space-y-6",children:x.jsxs(Ft,{className:"p-6",children:[x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsx("h3",{className:"font-bold text-lg",children:"لوحة المتصدرين"}),x.jsxs(Zr,{onClick:()=>ne(F,"referrals"),variant:"outline",disabled:F.length===0,children:[x.jsx(y2,{className:"w-4 h-4 mr-2"}),"تصدير CSV"]})]}),F.length===0?x.jsx("div",{className:"text-center text-muted-foreground py-12",children:l?"جارٍ التحميل...":"لا توجد إحالات حتى الآن"}):x.jsx("div",{className:"overflow-x-auto",children:x.jsxs(hI,{children:[x.jsx(dI,{children:x.jsxs(Jv,{children:[x.jsx(ao,{children:"الترتيب"}),x.jsx(ao,{children:"البريد الإلكتروني"}),x.jsx(ao,{children:"كود الإحالة"}),x.jsx(ao,{children:"عدد الإحالات"}),x.jsx(ao,{children:"النقرات"}),x.jsx(ao,{children:"معدل التحويل"}),x.jsx(ao,{children:"المستوى"})]})}),x.jsx(fI,{children:F.map((ee,he)=>x.jsxs(Jv,{children:[x.jsxs(oo,{className:"font-bold",children:["#",he+1]}),x.jsx(oo,{children:ee.email}),x.jsx(oo,{className:"font-mono text-sm",children:ee.ref_code}),x.jsx(oo,{className:"text-center font-bold",children:ee.referrals_count}),x.jsx(oo,{className:"text-center",children:ee.clicks||0}),x.jsx(oo,{className:"text-center",children:ee.clicks>0?`${(ee.referrals_count/ee.clicks*100).toFixed(1)}%`:"-"}),x.jsx(oo,{children:x.jsxs("div",{className:"flex items-center gap-2",children:[ce(ee.reward_tier),x.jsx("span",{className:"capitalize",children:ee.reward_tier})]})})]},he))})]})})]})})]})})]}):x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50",children:x.jsxs(Ft,{className:"w-full max-w-md p-8",children:[x.jsxs("div",{className:"text-center mb-6",children:[x.jsx("h1",{className:"text-3xl font-bold mb-2",children:"لوحة الإدارة"}),x.jsx("p",{className:"text-muted-foreground",children:"مشروع مُثمّن"})]}),x.jsxs("form",{onSubmit:re,className:"space-y-4",children:[y&&x.jsx(r_,{variant:"destructive",children:x.jsx(n_,{children:y})}),x.jsxs("div",{children:[x.jsx(Rt,{htmlFor:"password",children:"كلمة المرور"}),x.jsx(Mr,{id:"password",type:"password",value:a,onChange:ee=>d(ee.target.value),placeholder:"أدخل كلمة المرور",className:"mt-1",required:!0})]}),x.jsx(Zr,{type:"submit",className:"w-full",children:"تسجيل الدخول"})]})]})})};function PY({onLoginSuccess:e}){const[t,i]=Fe.useState(!0),[a,d]=Fe.useState({email:"",password:"",name:"",confirmPassword:""}),[y,m]=Fe.useState(""),[l,M]=Fe.useState(!1),E=C=>{d({...a,[C.target.name]:C.target.value}),m("")},N=async C=>{C.preventDefault(),m(""),M(!0);try{if(!a.email||!a.password){m("يرجى إدخال البريد الإلكتروني وكلمة المرور"),M(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)){m("البريد الإلكتروني غير صحيح"),M(!1);return}if(!t){if(!a.name){m("يرجى إدخال الاسم الكامل"),M(!1);return}if(a.password.length<6){m("كلمة المرور يجب أن تكون 6 أحرف على الأقل"),M(!1);return}if(a.password!==a.confirmPassword){m("كلمة المرور غير متطابقة"),M(!1);return}}await new Promise(H=>setTimeout(H,1e3));const F={email:a.email,name:a.name||a.email.split("@")[0],loginTime:new Date().toISOString(),isAdmin:a.email==="ali.alshehro.ar@gmail.com"};localStorage.setItem("muthammen_user",JSON.stringify(F)),e&&e(F)}catch{m("حدث خطأ، يرجى المحاولة مرة أخرى")}finally{M(!1)}};return x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 px-4",children:x.jsxs("div",{className:"w-full max-w-md",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[x.jsx("div",{className:"p-3 rounded-xl primary-gradient",children:x.jsx(zf,{className:"w-10 h-10 text-white"})}),x.jsxs("div",{className:"text-right",children:[x.jsx("h1",{className:"text-3xl font-black text-foreground",children:"مُثمّن"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"تقييم عقاري ذكي بالذكاء الاصطناعي"})]})]}),x.jsx("h2",{className:"text-2xl font-bold mb-2",children:t?"تسجيل الدخول":"إنشاء حساب جديد"}),x.jsx("p",{className:"text-muted-foreground",children:t?"مرحباً بعودتك! سجل دخولك للمتابعة":"انضم إلى منصة مُثمّن الآن"})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsxs("form",{onSubmit:N,className:"space-y-4",children:[!t&&x.jsxs("div",{className:"space-y-2",children:[x.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[x.jsx(p5,{className:"w-4 h-4"}),"الاسم الكامل"]}),x.jsx("input",{type:"text",name:"name",value:a.name,onChange:E,className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"أدخل اسمك الكامل",disabled:l})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[x.jsx(FI,{className:"w-4 h-4"}),"البريد الإلكتروني"]}),x.jsx("input",{type:"email",name:"email",value:a.email,onChange:E,className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"example@email.com",disabled:l})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[x.jsx(xA,{className:"w-4 h-4"}),"كلمة المرور"]}),x.jsx("input",{type:"password",name:"password",value:a.password,onChange:E,className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"••••••••",disabled:l})]}),!t&&x.jsxs("div",{className:"space-y-2",children:[x.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[x.jsx(xA,{className:"w-4 h-4"}),"تأكيد كلمة المرور"]}),x.jsx("input",{type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:E,className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"••••••••",disabled:l})]}),y&&x.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[x.jsx(Qc,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),x.jsx("p",{className:"text-sm text-red-800",children:y})]}),x.jsx(Zr,{type:"submit",className:"w-full gap-2",size:"lg",disabled:l,children:l?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري المعالجة..."]}):x.jsxs(x.Fragment,{children:[t?x.jsx(BI,{className:"w-5 h-5"}):x.jsx(d5,{className:"w-5 h-5"}),t?"تسجيل الدخول":"إنشاء حساب"]})})]}),x.jsx("div",{className:"mt-6 text-center",children:x.jsxs("p",{className:"text-sm text-muted-foreground",children:[t?"ليس لديك حساب؟":"لديك حساب بالفعل؟"," ",x.jsx("button",{type:"button",onClick:()=>{i(!t),m(""),d({email:"",password:"",name:"",confirmPassword:""})},className:"text-primary font-semibold hover:underline",disabled:l,children:t?"إنشاء حساب جديد":"تسجيل الدخول"})]})})]}),x.jsx("div",{className:"mt-6 text-center",children:x.jsx("p",{className:"text-xs text-muted-foreground",children:"بالتسجيل، أنت توافق على شروط الخدمة وسياسة الخصوصية"})})]})})}function EY({onLogout:e,navigateTo:t}){const[i,a]=Fe.useState(null),[d,y]=Fe.useState({totalEvaluations:0,totalUsers:0,avgPropertyValue:0,activeSubscriptions:0,referralCount:0,recentActivity:[]});Fe.useEffect(()=>{const E=JSON.parse(localStorage.getItem("muthammen_user")||"{}");a(E),m()},[]);const m=()=>{const E=JSON.parse(localStorage.getItem("evaluation_history")||"[]"),N=E.length,C=E.length>0?Math.round(E.reduce((H,G)=>H+(G.estimatedValue||0),0)/E.length):0;localStorage.getItem("referral_code");const L=parseInt(localStorage.getItem("referral_count")||"0"),F=E.slice(-5).reverse().map(H=>({type:"evaluation",date:H.timestamp||new Date().toISOString(),value:H.estimatedValue,city:H.city,district:H.district}));y({totalEvaluations:N,totalUsers:1,avgPropertyValue:C,activeSubscriptions:0,referralCount:L,recentActivity:F})},l=E=>new Intl.NumberFormat("ar-SA").format(E),M=E=>{const N=new Date(E);return new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(N)};return i?x.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[x.jsx("header",{className:"border-b border-border/50 bg-white/80 backdrop-blur-sm sticky top-0 z-50",children:x.jsx("div",{className:"container mx-auto px-4 py-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2 rounded-xl primary-gradient",children:x.jsx(zf,{className:"w-8 h-8 text-white"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-black text-foreground",children:"لوحة التحكم"}),x.jsxs("p",{className:"text-xs text-muted-foreground",children:["مرحباً، ",i.name]})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs(Zr,{variant:"outline",size:"sm",onClick:()=>t("home"),className:"gap-2",children:[x.jsx(ty,{className:"w-4 h-4"}),"الرئيسية"]}),x.jsxs(Zr,{variant:"outline",size:"sm",onClick:e,className:"gap-2",children:[x.jsx(k3,{className:"w-4 h-4"}),"تسجيل الخروج"]})]})]})})}),x.jsxs("main",{className:"container mx-auto px-4 py-8",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[x.jsxs(Ft,{className:"p-6",children:[x.jsxs("div",{className:"flex items-start justify-between mb-4",children:[x.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:x.jsx(_A,{className:"w-6 h-6 text-blue-600"})}),x.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"+12%"})]}),x.jsx("h3",{className:"text-sm text-muted-foreground mb-1",children:"إجمالي التقييمات"}),x.jsx("p",{className:"text-3xl font-bold",children:l(d.totalEvaluations)})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsxs("div",{className:"flex items-start justify-between mb-4",children:[x.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:x.jsx(h3,{className:"w-6 h-6 text-green-600"})}),x.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"+8%"})]}),x.jsx("h3",{className:"text-sm text-muted-foreground mb-1",children:"متوسط قيمة العقار"}),x.jsx("p",{className:"text-3xl font-bold",children:l(d.avgPropertyValue)}),x.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"ريال سعودي"})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsxs("div",{className:"flex items-start justify-between mb-4",children:[x.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:x.jsx(Xu,{className:"w-6 h-6 text-purple-600"})}),x.jsxs("span",{className:"text-xs text-green-600 font-semibold",children:["+",d.referralCount]})]}),x.jsx("h3",{className:"text-sm text-muted-foreground mb-1",children:"الإحالات الناجحة"}),x.jsx("p",{className:"text-3xl font-bold",children:l(d.referralCount)})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsxs("div",{className:"flex items-start justify-between mb-4",children:[x.jsx("div",{className:"p-3 rounded-xl bg-orange-100",children:x.jsx(LI,{className:"w-6 h-6 text-orange-600"})}),x.jsx("span",{className:"text-xs text-muted-foreground",children:"قريباً"})]}),x.jsx("h3",{className:"text-sm text-muted-foreground mb-1",children:"الاشتراكات النشطة"}),x.jsx("p",{className:"text-3xl font-bold",children:l(d.activeSubscriptions)})]})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[x.jsxs(Ft,{className:"lg:col-span-2 p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-bold mb-1",children:"نظرة عامة على التقييمات"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"آخر 30 يوم"})]}),x.jsxs(Zr,{variant:"outline",size:"sm",className:"gap-2",children:[x.jsx(y2,{className:"w-4 h-4"}),"تصدير"]})]}),x.jsx("div",{className:"h-64 flex items-end justify-between gap-2",children:[65,45,80,55,70,90,75,60,85,95,70,80].map((E,N)=>x.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[x.jsx("div",{className:"w-full bg-gradient-to-t from-blue-600 to-blue-400 rounded-t-lg transition-all hover:opacity-80 cursor-pointer",style:{height:`${E}%`},title:`${E}%`}),x.jsx("span",{className:"text-xs text-muted-foreground",children:N+1})]},N))})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsx("h3",{className:"text-lg font-bold",children:"النشاط الأخير"}),x.jsx(Zr,{variant:"ghost",size:"sm",children:x.jsx(Z3,{className:"w-4 h-4"})})]}),x.jsx("div",{className:"space-y-4",children:d.recentActivity.length>0?d.recentActivity.map((E,N)=>x.jsxs("div",{className:"flex items-start gap-3 pb-4 border-b border-border last:border-0",children:[x.jsx("div",{className:"p-2 rounded-lg bg-blue-100 flex-shrink-0",children:x.jsx(g2,{className:"w-4 h-4 text-blue-600"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-sm font-medium mb-1",children:"تقييم عقار جديد"}),x.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[E.city," - ",E.district]}),x.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[l(E.value)," ريال"]})]})]},N)):x.jsxs("div",{className:"text-center py-8",children:[x.jsx(g2,{className:"w-12 h-12 text-muted-foreground/30 mx-auto mb-2"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"لا يوجد نشاط حتى الآن"})]})})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[x.jsxs(Ft,{className:"p-6",children:[x.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[x.jsx(e_,{className:"w-5 h-5"}),"الوصول السريع"]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs(Zr,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>t("home"),children:[x.jsx(_A,{className:"w-4 h-4"}),"تقييم عقار جديد"]}),x.jsxs(Zr,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>t("map"),children:[x.jsx(Xg,{className:"w-4 h-4"}),"الخريطة التفاعلية"]}),x.jsxs(Zr,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>t("market"),children:[x.jsx(dc,{className:"w-4 h-4"}),"دراسة السوق"]}),x.jsxs(Zr,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>t("referrals"),children:[x.jsx(Xu,{className:"w-4 h-4"}),"برنامج الإحالات"]})]})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[x.jsx(u5,{className:"w-5 h-5"}),"معلومات الحساب"]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border",children:[x.jsx("span",{className:"text-sm text-muted-foreground",children:"البريد الإلكتروني"}),x.jsx("span",{className:"text-sm font-medium truncate max-w-[180px]",children:i.email})]}),x.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border",children:[x.jsx("span",{className:"text-sm text-muted-foreground",children:"نوع الحساب"}),x.jsx("span",{className:"text-sm font-medium",children:i.isAdmin?"مدير":"مستخدم"})]}),x.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border",children:[x.jsx("span",{className:"text-sm text-muted-foreground",children:"تاريخ التسجيل"}),x.jsx("span",{className:"text-sm font-medium",children:M(i.loginTime)})]}),x.jsxs("div",{className:"flex items-center justify-between py-2",children:[x.jsx("span",{className:"text-sm text-muted-foreground",children:"الحالة"}),x.jsxs("span",{className:"text-sm font-medium text-green-600 flex items-center gap-1",children:[x.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full"}),"نشط"]})]})]})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[x.jsx(qz,{className:"w-5 h-5"}),"الإشعارات"]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[x.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"مرحباً بك في مُثمّن!"}),x.jsx("p",{className:"text-xs text-blue-700",children:"ابدأ بتقييم عقارك الأول الآن"})]}),x.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[x.jsx("p",{className:"text-sm font-medium text-purple-900 mb-1",children:"خريطة تفاعلية قريباً"}),x.jsx("p",{className:"text-xs text-purple-700",children:"استكشف الأسعار في جميع الأحياء"})]}),x.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[x.jsx("p",{className:"text-sm font-medium text-green-900 mb-1",children:"برنامج الإحالات"}),x.jsx("p",{className:"text-xs text-green-700",children:"احصل على مكافآت عند دعوة الأصدقاء"})]})]})]})]}),i.isAdmin&&x.jsx(Ft,{className:"p-6 mt-6 bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-200",children:x.jsxs("div",{className:"flex items-start gap-4",children:[x.jsx("div",{className:"p-3 rounded-xl bg-purple-600",children:x.jsx(e_,{className:"w-6 h-6 text-white"})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"text-lg font-bold mb-2",children:"صلاحيات المدير"}),x.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"لديك صلاحيات كاملة للوصول إلى جميع البيانات والإحصائيات في المنصة."}),x.jsxs("div",{className:"flex flex-wrap gap-2",children:[x.jsxs(Zr,{size:"sm",variant:"outline",className:"gap-2",children:[x.jsx(Xu,{className:"w-4 h-4"}),"إدارة المستخدمين"]}),x.jsxs(Zr,{size:"sm",variant:"outline",className:"gap-2",children:[x.jsx(dc,{className:"w-4 h-4"}),"التقارير المتقدمة"]}),x.jsxs(Zr,{size:"sm",variant:"outline",className:"gap-2",children:[x.jsx(e_,{className:"w-4 h-4"}),"الإعدادات العامة"]})]})]})]})})]})]}):x.jsx("div",{className:"min-h-screen flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),x.jsx("p",{className:"text-muted-foreground",children:"جاري التحميل..."})]})})}const CY={riyadh_olaya:{city:"الرياض",district:"العليا",coords:[46.6753,24.7136],services:{schools:12,parks:8,mosques:15,supermarkets:22,hospitals:4,restaurants:45,cafes:38},density_score:92},riyadh_malqa:{city:"الرياض",district:"الملقا",coords:[46.6234,24.7743],services:{schools:18,parks:12,mosques:20,supermarkets:28,hospitals:3,restaurants:35,cafes:25},density_score:88},riyadh_narjis:{city:"الرياض",district:"النرجس",coords:[46.7234,24.8143],services:{schools:15,parks:10,mosques:18,supermarkets:20,hospitals:2,restaurants:28,cafes:22},density_score:85},jeddah_rawdah:{city:"جدة",district:"الروضة",coords:[39.1653,21.5811],services:{schools:14,parks:9,mosques:17,supermarkets:25,hospitals:3,restaurants:40,cafes:32},density_score:90},jeddah_salamah:{city:"جدة",district:"السلامة",coords:[39.1953,21.6211],services:{schools:16,parks:11,mosques:19,supermarkets:23,hospitals:4,restaurants:38,cafes:30},density_score:87},dammam_faisaliyah:{city:"الدمام",district:"الفيصلية",coords:[50.1088,26.4207],services:{schools:10,parks:7,mosques:14,supermarkets:18,hospitals:2,restaurants:25,cafes:20},density_score:82}},rx={districts:CY},OY={riyadh_olaya:{main_roads_count:4,avg_distance_to_main_road_m:350,highway_exits_within_5km:3,avg_street_width_m:18,accessibility_score:95},riyadh_malqa:{main_roads_count:5,avg_distance_to_main_road_m:280,highway_exits_within_5km:4,avg_street_width_m:20,accessibility_score:92},riyadh_narjis:{main_roads_count:3,avg_distance_to_main_road_m:420,highway_exits_within_5km:2,avg_street_width_m:16,accessibility_score:88},jeddah_rawdah:{main_roads_count:4,avg_distance_to_main_road_m:300,highway_exits_within_5km:3,avg_street_width_m:19,accessibility_score:93},jeddah_salamah:{main_roads_count:5,avg_distance_to_main_road_m:250,highway_exits_within_5km:4,avg_street_width_m:21,accessibility_score:94},dammam_faisaliyah:{main_roads_count:3,avg_distance_to_main_road_m:400,highway_exits_within_5km:2,avg_street_width_m:17,accessibility_score:85}},IY={districts:OY},kY={riyadh_olaya:{parks_count:8,total_green_area_m2:125e3,green_coverage_percent:12,avg_distance_to_park_m:420,greenery_score:88},riyadh_malqa:{parks_count:12,total_green_area_m2:185e3,green_coverage_percent:15,avg_distance_to_park_m:350,greenery_score:92},riyadh_narjis:{parks_count:10,total_green_area_m2:16e4,green_coverage_percent:14,avg_distance_to_park_m:380,greenery_score:90},jeddah_rawdah:{parks_count:9,total_green_area_m2:14e4,green_coverage_percent:13,avg_distance_to_park_m:400,greenery_score:89},jeddah_salamah:{parks_count:11,total_green_area_m2:17e4,green_coverage_percent:14,avg_distance_to_park_m:360,greenery_score:91},dammam_faisaliyah:{parks_count:7,total_green_area_m2:11e4,green_coverage_percent:11,avg_distance_to_park_m:450,greenery_score:85}},NY={districts:kY},RY={riyadh_olaya:{schools_count:12,private_schools:8,public_schools:4,universities_nearby:2,avg_distance_to_school_m:650,education_score:90},riyadh_malqa:{schools_count:18,private_schools:12,public_schools:6,universities_nearby:1,avg_distance_to_school_m:550,education_score:94},riyadh_narjis:{schools_count:15,private_schools:10,public_schools:5,universities_nearby:1,avg_distance_to_school_m:600,education_score:92},jeddah_rawdah:{schools_count:14,private_schools:9,public_schools:5,universities_nearby:2,avg_distance_to_school_m:620,education_score:91},jeddah_salamah:{schools_count:16,private_schools:11,public_schools:5,universities_nearby:1,avg_distance_to_school_m:580,education_score:93},dammam_faisaliyah:{schools_count:10,private_schools:6,public_schools:4,universities_nearby:1,avg_distance_to_school_m:700,education_score:87}},DY={districts:RY},zY={riyadh_olaya:{fiber_coverage_percent:95,street_lighting_score:92,cleanliness_score:90,noise_level:45,safety_score:93,municipal_services_score:91},riyadh_malqa:{fiber_coverage_percent:92,street_lighting_score:90,cleanliness_score:88,noise_level:40,safety_score:91,municipal_services_score:89},riyadh_narjis:{fiber_coverage_percent:90,street_lighting_score:89,cleanliness_score:87,noise_level:38,safety_score:90,municipal_services_score:88},jeddah_rawdah:{fiber_coverage_percent:93,street_lighting_score:91,cleanliness_score:89,noise_level:42,safety_score:92,municipal_services_score:90},jeddah_salamah:{fiber_coverage_percent:94,street_lighting_score:92,cleanliness_score:90,noise_level:41,safety_score:93,municipal_services_score:91},dammam_faisaliyah:{fiber_coverage_percent:88,street_lighting_score:86,cleanliness_score:85,noise_level:50,safety_score:88,municipal_services_score:86}},LY={districts:zY},BY={riyadh_olaya:{p25:5200,p50:6800,p75:8500,p90:10200,percentile_rank:90,wealth_indicator:"مرتفع جداً"},riyadh_malqa:{p25:4800,p50:6200,p75:7800,p90:9400,percentile_rank:85,wealth_indicator:"مرتفع"},riyadh_narjis:{p25:4500,p50:5800,p75:7200,p90:8600,percentile_rank:80,wealth_indicator:"مرتفع"},jeddah_rawdah:{p25:4600,p50:6e3,p75:7500,p90:9e3,percentile_rank:83,wealth_indicator:"مرتفع"},jeddah_salamah:{p25:4900,p50:6400,p75:8e3,p90:9600,percentile_rank:87,wealth_indicator:"مرتفع جداً"},dammam_faisaliyah:{p25:3800,p50:4900,p75:6100,p90:7300,percentile_rank:70,wealth_indicator:"متوسط-مرتفع"}},FY={districts:BY},Wp={services:.25,accessibility:.2,greenery:.15,education:.15,pricePercentile:.2,noise:.05};function $Y(e){if(!e||e.length!==2)return null;const[t,i]=e;let a=null,d=1/0;return Object.keys(rx.districts).forEach(y=>{const m=rx.districts[y],[l,M]=m.coords,E=l-t,N=M-i,C=Math.sqrt(E*E+N*N);C<d&&(d=C,a=y)}),a}function qY(e,t){if(!e||!t)return null;for(const[i,a]of Object.entries(rx.districts))if(a.district===e&&a.city===t)return i;return null}function UY(e){const t=rx.districts[e];return t&&t.density_score||50}function VY(e){const t=IY.districts[e];return t&&t.accessibility_score||50}function GY(e){const t=NY.districts[e];return t&&t.greenery_score||50}function ZY(e){const t=DY.districts[e];return t&&t.education_score||50}function HY(e){const t=FY.districts[e];return t&&t.percentile_rank||50}function XY(e){const t=LY.districts[e];return t?100-(t.noise_level||50):50}function WY({coords:e,district:t,city:i}){let a=null;if(t&&i&&(a=qY(t,i)),!a&&e&&(a=$Y(e)),!a)return{score:70,level:"متوسط",factors:{services:70,accessibility:70,greenery:70,education:70,pricePercentile:70,noise:70},districtFound:!1,message:"لم يتم العثور على بيانات الحي - استخدام قيمة افتراضية"};const d={services:UY(a),accessibility:VY(a),greenery:GY(a),education:ZY(a),pricePercentile:HY(a),noise:XY(a)},y=d.services*Wp.services+d.accessibility*Wp.accessibility+d.greenery*Wp.greenery+d.education*Wp.education+d.pricePercentile*Wp.pricePercentile+d.noise*Wp.noise,m=Math.max(0,Math.min(100,Math.round(y)));let l="متوسط";return m>=85?l="مرتفع جداً":m>=75?l="مرتفع":m>=60?l="متوسط-مرتفع":m>=45?l="متوسط":l="منخفض",{score:m,level:l,factors:d,districtFound:!0,districtKey:a,message:`تم حساب جودة الحي تلقائياً بناءً على ${Object.keys(d).length} عوامل`}}function YY(e,t){const i=(e-50)/50*6,a=t*(i/100),d=t+a;return{adjustmentPercent:i.toFixed(2),adjustmentAmount:Math.round(a),adjustedPrice:Math.round(d),explanation:`تعديل جودة الحي: ${i>0?"+":""}${i.toFixed(1)}%`}}function KY(e){if(!e.districtFound)return"تحليل جودة الحي (تلقائي): متوسط — بيانات محدودة متاحة للحي";const{level:t,factors:i}=e,a=Object.entries(i).sort((m,l)=>l[1]-m[1]).slice(0,3),d={services:"كثافة الخدمات",accessibility:"سهولة النفاذ",greenery:"المساحات الخضراء",education:"المؤسسات التعليمية",pricePercentile:"موقع الحي السعري",noise:"الهدوء"},y=a.map(([m])=>d[m]||m).join("، ");return`تحليل جودة الحي (تلقائي): ${t} — استنادًا إلى ${y}`}const pI={الرياض:3500,جدة:3200,مكة:3e3,المدينة:2800,الدمام:2700,الخبر:2900,الظهران:3100,الطائف:2400,تبوك:2200,بريدة:2100,"خميس مشيط":2e3,حائل:1900,نجران:1800,جازان:1700,ينبع:2300,الأحساء:2e3,القطيف:2500,أبها:2200,عرعر:1600,سكاكا:1500,أخرى:2e3},QY={فيلا:1.15,شقة:.95,دور:1.05,عمارة:1.25,أرض:.7,دوبلكس:1.1,استوديو:.85,بنتهاوس:1.4,"تاون هاوس":1.08},JY={جديد:1.1,"1-5":1,"6-10":.95,"11-15":.88,"16-20":.8,"21-30":.7,"أكثر من 30":.6},eK={"راقي جداً":1.35,راقي:1.2,"متوسط إلى راقي":1.1,متوسط:1,شعبي:.85,قديم:.75},tK={شمالية:1.08,جنوبية:1.05,شرقية:1.03,غربية:1.02,"شمالية شرقية":1.1,"شمالية غربية":1.09,"جنوبية شرقية":1.07,"جنوبية غربية":1.06,"ثلاث واجهات":1.18,"أربع واجهات":1.25},rK={"< 10م":.95,"10-15م":1,"16-20م":1.08,"21-30م":1.15,"> 30م":1.22},nK={"سوبر لوكس":1.25,لوكس:1.15,ممتاز:1.08,"جيد جداً":1.03,جيد:1,متوسط:.95,بسيط:.88,"على العظم":.75},d2={مسبح:8e4,مصعد:6e4,مولد_كهرباء:35e3,نظام_أمني:25e3,نظام_إطفاء:2e4,خزان_ماء:15e3,سخان_مركزي:3e4,تكييف_مركزي:5e4,غرفة_خادمة:4e4,غرفة_سائق:35e3,مجلس_رجال:45e3,صالة_رياضية:7e4,ملحق_خارجي:55e3,مطبخ_خارجي:25e3,موقف_مظلل:2e4},mI={مسجد:1.02,مدرسة:1.03,مستشفى:1.04,مركز_تجاري:1.05,حديقة:1.03,محطة_وقود:1.01,مواصلات_عامة:1.02,جامعة:1.03},iK={بحر:1.2,جبل:1.12,حديقة:1.1,"شارع رئيسي":1.05,"شارع فرعي":1,"مبنى مقابل":.97};async function gI(e){if(!e.area||!e.city)return{estimatedValue:0,confidence:0,error:"يرجى إدخال المساحة والمدينة على الأقل"};const t=parseFloat(e.area),i=pI[e.city]||pI.أخرى;let a=t*i,d=2;const y=100,m={baseCalculation:`${t} م² × ${i} ريال/م² = ${a.toLocaleString("ar-SA")} ريال`,appliedFactors:[]};if(e.propertyType){const q=QY[e.propertyType]||1;a*=q,m.appliedFactors.push({factor:"نوع العقار",value:e.propertyType,multiplier:q,impact:`${((q-1)*100).toFixed(1)}%`}),d++}if(e.age){const q=JY[e.age]||1;a*=q,m.appliedFactors.push({factor:"عمر العقار",value:e.age,multiplier:q,impact:`${((q-1)*100).toFixed(1)}%`}),d++}if(e.neighborhood){const q=eK[e.neighborhood]||1;a*=q,m.appliedFactors.push({factor:"مستوى الحي",value:e.neighborhood,multiplier:q,impact:`${((q-1)*100).toFixed(1)}%`}),d++}if(e.facade){const q=tK[e.facade]||1;a*=q,m.appliedFactors.push({factor:"الواجهة",value:e.facade,multiplier:q,impact:`${((q-1)*100).toFixed(1)}%`}),d++}if(e.streetWidth){const q=rK[e.streetWidth]||1;a*=q,m.appliedFactors.push({factor:"عرض الشارع",value:e.streetWidth,multiplier:q,impact:`${((q-1)*100).toFixed(1)}%`}),d++}if(e.finishing){const q=nK[e.finishing]||1;a*=q,m.appliedFactors.push({factor:"التشطيب",value:e.finishing,multiplier:q,impact:`${((q-1)*100).toFixed(1)}%`}),d++}if(e.view){const q=iK[e.view]||1;a*=q,m.appliedFactors.push({factor:"الإطلالة",value:e.view,multiplier:q,impact:`${((q-1)*100).toFixed(1)}%`}),d++}if(e.bedrooms){const q=parseInt(e.bedrooms);if(q>3){const re=q-3,ie=1+re*.02;a*=ie,m.appliedFactors.push({factor:"عدد الغرف",value:`${q} غرفة`,multiplier:ie,impact:`+${re*2}%`})}d++}if(e.bathrooms){const q=parseInt(e.bathrooms);if(q>2){const re=q-2,ie=1+re*.015;a*=ie,m.appliedFactors.push({factor:"دورات المياه",value:`${q} دورة`,multiplier:ie,impact:`+${re*1.5}%`})}d++}let l=0;const M=[];Object.keys(d2).forEach(q=>{e[q]===!0&&(l+=d2[q],M.push({name:q.replace(/_/g," "),value:d2[q]}),d++)}),l>0&&(a+=l,m.appliedFactors.push({factor:"المرافق الإضافية",value:M.map(q=>q.name).join("، "),addition:l,impact:`+${l.toLocaleString("ar-SA")} ريال`}));let E=1;const N=[];if(Object.keys(mI).forEach(q=>{e[`قرب_${q}`]===!0&&(E*=mI[q],N.push(q.replace(/_/g," ")),d++)}),N.length>0&&(a*=E,m.appliedFactors.push({factor:"القرب من الخدمات",value:N.join("، "),multiplier:E,impact:`${((E-1)*100).toFixed(1)}%`})),e.parking){const q=parseInt(e.parking);if(q>0){const re=1+q*.01;a*=re,m.appliedFactors.push({factor:"مواقف السيارات",value:`${q} موقف`,multiplier:re,impact:`+${q}%`}),d++}}if(e.floor&&e.propertyType==="شقة"){const q=parseInt(e.floor);if(q>0){const re=1+q*.005;a*=re,m.appliedFactors.push({factor:"رقم الطابق",value:`الطابق ${q}`,multiplier:re,impact:`+${(q*.5).toFixed(1)}%`}),d++}}if(e.landArea&&["فيلا","عمارة","أرض"].includes(e.propertyType)){const q=parseFloat(e.landArea),re=parseFloat(e.area);if(q>re){const ie=q-re,ne=ie*(i*.5);a+=ne,m.appliedFactors.push({factor:"الأرض الفاضية",value:`${ie} م²`,addition:ne,impact:`+${ne.toLocaleString("ar-SA")} ريال`})}d++}let L=d/y*70;e.propertyType&&(L+=5),e.age&&(L+=5),e.neighborhood&&(L+=5),e.finishing&&(L+=5),e.bedrooms&&e.bathrooms&&(L+=5),e.facade&&(L+=3),e.streetWidth&&(L+=2),L=Math.min(Math.round(L),95);let F=null,H=null,G=!1;try{try{const re=await(await fetch("/api/agent/score-nqs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({city:e.city,district:e.district,coords:e.coords||null,extras:{propertyType:e.propertyType,area:e.area}})})).json();if(re.ok&&re.source==="agent")F={score:re.nqs,level:re.level,districtFound:re.districtFound,source:"agent",notes:re.notes},G=!0,console.log("✅ استخدام نتيجة الوكيل:",F);else if(re.fallback)throw console.log("⚠️ الوكيل غير متاح، استخدام الحساب المحلي"),new Error("Agent fallback requested")}catch(q){console.log("⚠️ فشل الوكيل، استخدام الحساب المحلي:",q.message),F=WY({coords:e.coords||null,district:e.district||null,city:e.city}),G=!1}F&&F.score&&(H=YY(F.score,a),a=H.adjustedPrice,m.appliedFactors.push({factor:G?"جودة الحي (ذكاء اصطناعي)":"جودة الحي (تلقائي)",value:F.level,score:F.score,multiplier:1+parseFloat(H.adjustmentPercent)/100,impact:`${H.adjustmentPercent>0?"+":""}${H.adjustmentPercent}%`}))}catch(q){console.warn("تعذر حساب NQS:",q),G=!1}return aK({timestamp:new Date().toISOString(),formData:e,estimatedValue:a,confidence:L,filledFieldsCount:d}),{estimatedValue:Math.round(a),confidence:L,filledFieldsCount:d,totalPossibleFields:y,adjustments:m,priceRange:{min:Math.round(a*.9),max:Math.round(a*1.1)},recommendations:oK(e,L),nqs:F?{score:F.score,level:F.level,explanation:KY(F),districtFound:F.districtFound,source:F.source||"local"}:null,usedAgent:G}}function aK(e){try{const t=JSON.parse(localStorage.getItem("evaluationHistory")||"[]");t.push(e),t.length>100&&t.shift(),localStorage.setItem("evaluationHistory",JSON.stringify(t))}catch(t){console.warn("تعذر حفظ التقييم في السجل:",t)}}function oK(e,t){const i=[];return t<50&&i.push("لتحسين دقة التقييم، يُنصح بإدخال المزيد من التفاصيل"),e.propertyType||i.push("إضافة نوع العقار سيحسن الدقة بشكل كبير"),e.age||i.push("تحديد عمر العقار مهم للحصول على تقييم دقيق"),e.neighborhood||i.push("مستوى الحي له تأثير كبير على القيمة"),e.finishing||i.push("جودة التشطيب تؤثر بشكل ملحوظ على السعر"),(!e.bedrooms||!e.bathrooms)&&i.push("عدد الغرف ودورات المياه من العوامل المهمة"),t>=70&&i.push("مستوى الثقة جيد! يمكنك الاعتماد على هذا التقييم"),i}const qS={apiKey:"",apiEndpoint:"https://api.openai.com/v1/chat/completions",model:"gpt-4o",temperature:.3,maxTokens:2e3,enabled:!1};function sK(){try{const e=localStorage.getItem("evaluationHistory");return e?JSON.parse(e):[]}catch(e){return console.warn("تعذر قراءة سجل التقييمات:",e),[]}}function lK(){try{return localStorage.removeItem("evaluationHistory"),!0}catch(e){return console.error("تعذر مسح السجل:",e),!1}}function cK(){const e=sK();if(e.length===0)return{totalEvaluations:0,gptEvaluations:0,localEvaluations:0,averageConfidence:0};const t=e.filter(d=>d.source==="gpt").length,i=e.length-t,a=e.reduce((d,y)=>{var l;const m=((l=y.evaluation)==null?void 0:l.confidence)||y.confidence||0;return d+m},0);return{totalEvaluations:e.length,gptEvaluations:t,localEvaluations:i,averageConfidence:Math.round(a/e.length)}}function uK(){Fe.useEffect(()=>{try{const t=new URLSearchParams(window.location.search).get("ref");if(t&&t.length>=6&&t.length<=8){if(!/^[A-Z0-9]+$/.test(t)){console.warn("رمز إحالة غير صالح:",t);return}localStorage.setItem("muth_ref",t),localStorage.setItem("muth_ref_timestamp",Date.now().toString());const i=60*60*24*14;document.cookie=`muth_ref=${t};path=/;max-age=${i};SameSite=Lax`;let a=localStorage.getItem("muth_vid");a||(a=hK(),localStorage.setItem("muth_vid",a)),dK({type:"click",ref:t,visitorId:a,timestamp:Date.now(),url:window.location.href}),fK(t,a).catch(d=>{console.log("تتبع الإحالة (محلي فقط):",d.message)}),console.log("✅ تم حفظ رمز الإحالة:",t)}}catch(e){console.error("خطأ في معالجة رمز الإحالة:",e)}},[])}function hK(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"vid_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}function dK(e){try{const t=JSON.parse(localStorage.getItem("muth_ref_events")||"[]");t.push(e),t.length>100&&t.splice(0,t.length-100),localStorage.setItem("muth_ref_events",JSON.stringify(t))}catch(t){console.error("خطأ في تسجيل حدث الإحالة:",t)}}async function fK(e,t){return new URLSearchParams({ref:e,vid:t,ts:Date.now().toString()}),new Promise((i,a)=>{i({ok:!0,stub:!0})})}function pK(){uK();const[e,t]=Fe.useState("home"),[i,a]=Fe.useState(null),[d,y]=Fe.useState(!1),[m,l]=Fe.useState(null),[M,E]=Fe.useState(qS.enabled),[N,C]=Fe.useState(!1),[L,F]=Fe.useState(!1),[H,G]=Fe.useState(null);Fe.useEffect(()=>{const he=localStorage.getItem("muthammen_user");he&&(F(!0),G(JSON.parse(he)))},[]);const q=async he=>{y(!0),l(null),a(null);try{let ge;M&&qS.enabled||(ge=await gI(he)),a(ge)}catch(ge){if(console.error("خطأ في التقييم:",ge),l(ge.message||"حدث خطأ أثناء التقييم. يرجى المحاولة مرة أخرى."),M)try{const Oe=await gI(he);a(Oe),l("تم استخدام المحرك المحلي بدلاً من GPT")}catch(Oe){console.error("فشل المحرك المحلي أيضاً:",Oe)}}finally{y(!1)}},re=()=>{a(null),l(null),window.scrollTo({top:0,behavior:"smooth"})},ie=()=>{confirm("هل أنت متأكد من حذف سجل التقييمات؟")&&(lK(),alert("تم مسح السجل بنجاح"))},ne=cK(),ce=he=>{t(he),a(null),l(null),window.scrollTo({top:0,behavior:"smooth"})},J=he=>{F(!0),G(he),t("dashboard")},ee=()=>{localStorage.removeItem("muthammen_user"),F(!1),G(null),t("home")};return e==="login"?x.jsx(PY,{onLoginSuccess:J}):e==="dashboard"?L?x.jsx(EY,{onLogout:ee,navigateTo:ce}):(t("login"),null):e==="admin"?x.jsx(jY,{onLogout:()=>ce("home")}):e==="subscriptions"?x.jsxs(x.Fragment,{children:[x.jsx(Yp,{currentPage:e,navigateTo:ce,isLoggedIn:L}),x.jsx(x5,{}),x.jsx(Kp,{})]}):e==="referrals"?x.jsxs(x.Fragment,{children:[x.jsx(Yp,{currentPage:e,navigateTo:ce,isLoggedIn:L}),x.jsx(E5,{}),x.jsx(Kp,{})]}):e==="market"?x.jsxs(x.Fragment,{children:[x.jsx(Yp,{currentPage:e,navigateTo:ce,isLoggedIn:L}),x.jsx(UW,{}),x.jsx(Kp,{})]}):e==="map"?x.jsxs(x.Fragment,{children:[x.jsx(Yp,{currentPage:e,navigateTo:ce,isLoggedIn:L}),x.jsx(HW,{navigateTo:ce}),x.jsx(Kp,{})]}):e==="map-old"?x.jsxs(x.Fragment,{children:[x.jsx(Yp,{currentPage:e,navigateTo:ce,isLoggedIn:L}),x.jsxs("div",{className:"container mx-auto px-4 py-12",children:[x.jsxs("div",{className:"text-center mb-12",children:[x.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-yellow-100 text-yellow-800 text-sm font-semibold mb-4",children:[x.jsx(im,{className:"w-4 h-4"}),x.jsx("span",{children:"قريبًا"})]}),x.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-4",children:"خريطة الوعي العقاري الأولى في المملكة 🇺🇦"}),x.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"استكشف الأسعار، الاتجاهات، والفرص في كل حي بتفاصيل غير مسبوقة"})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[x.jsxs(Ft,{className:"p-6",children:[x.jsx("div",{className:"p-3 rounded-xl bg-blue-100 w-fit mb-4",children:x.jsx(im,{className:"w-6 h-6 text-blue-600"})}),x.jsx("h3",{className:"font-bold text-lg mb-2",children:"خريطة تفاعلية للرياض"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"عرض جميع الأحياء مع معلومات تفصيلية عن الأسعار والمرافق"})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsx("div",{className:"p-3 rounded-xl bg-green-100 w-fit mb-4",children:x.jsx(Ms,{className:"w-6 h-6 text-green-600"})}),x.jsx("h3",{className:"font-bold text-lg mb-2",children:"اتجاهات الأسعار"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"تتبع تغيرات الأسعار عبر الزمن واكتشف الفرص الاستثمارية"})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsx("div",{className:"p-3 rounded-xl bg-purple-100 w-fit mb-4",children:x.jsx(dc,{className:"w-6 h-6 text-purple-600"})}),x.jsx("h3",{className:"font-bold text-lg mb-2",children:"إحصائيات تفصيلية"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"متوسط الأسعار، عدد العقارات، ومعدل النمو لكل حي"})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsx("div",{className:"p-3 rounded-xl bg-orange-100 w-fit mb-4",children:x.jsx(Qc,{className:"w-6 h-6 text-orange-600"})}),x.jsx("h3",{className:"font-bold text-lg mb-2",children:"فلترة متقدمة"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"فلتر حسب نوع العقار، النطاق السعري، والمنطقة"})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsx("div",{className:"p-3 rounded-xl bg-pink-100 w-fit mb-4",children:x.jsx(cl,{className:"w-6 h-6 text-pink-600"})}),x.jsx("h3",{className:"font-bold text-lg mb-2",children:"مقارنة الأحياء"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"قارن بين الأحياء لاتخاذ قرار مستنير"})]}),x.jsxs(Ft,{className:"p-6",children:[x.jsx("div",{className:"p-3 rounded-xl bg-cyan-100 w-fit mb-4",children:x.jsx(dd,{className:"w-6 h-6 text-cyan-600"})}),x.jsx("h3",{className:"font-bold text-lg mb-2",children:"توصيات ذكية"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"اقتراحات مخصصة بناءً على احتياجاتك وميزانيتك"})]})]}),x.jsxs(Ft,{className:"p-8 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:[x.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"لماذا خريطة مُثمّن؟"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold mb-2",children:"📍 فهم أعمق للسوق"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"الخريطة تعطيك نظرة شاملة على السوق العقاري في الرياض، مما يساعدك على فهم الاتجاهات والفرص."})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold mb-2",children:"📊 قرارات مستنيرة"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"باستخدام بيانات دقيقة وتحليلات متقدمة، يمكنك اتخاذ قرارات شراء أو استثمار أفضل."})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold mb-2",children:"⏱️ توفير الوقت"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"بدلاً من البحث في مواقع متعددة، احصل على جميع المعلومات في مكان واحد."})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold mb-2",children:"🔍 شفافية كاملة"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"بيانات حقيقية ومحدثة باستمرار لضمان أعلى مستوى من الدقة."})]})]}),x.jsx("div",{className:"text-center",children:x.jsxs(Zr,{size:"lg",className:"gap-2",onClick:()=>ce("home"),children:[x.jsx(fc,{className:"w-5 h-5"}),"ابدأ بالتقييم الآن"]})})]})]}),x.jsx(Kp,{})]}):x.jsxs("div",{className:"app-container min-h-screen",children:[x.jsx(Yp,{currentPage:e,navigateTo:ce,showSettings:N,setShowSettings:C,isLoggedIn:L}),N&&x.jsx("div",{className:"border-b border-border/50 bg-white",children:x.jsx("div",{className:"container mx-auto px-4 py-4",children:x.jsx(mK,{useGPT:M,setUseGPT:E,stats:ne,onClearHistory:ie})})}),x.jsxs("main",{className:"container mx-auto px-4 py-8",children:[!i&&x.jsxs("div",{className:"text-center mb-12 space-y-4",children:[x.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-semibold mb-4",children:[x.jsx(fc,{className:"w-4 h-4"}),x.jsx("span",{children:"كل عقار له قصة… ومثمّن يقرأها لك"})]}),x.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-balance",children:["اكتشف القيمة الحقيقية",x.jsx("br",{}),"لعقارك في دقائق"]}),x.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto text-balance",children:"ذكاء يفهم السوق — قبل ما يتحرك السوق"}),x.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg max-w-2xl mx-auto",children:x.jsxs("p",{className:"text-sm text-green-900",children:[x.jsx("strong",{children:"🇸🇦 النسخة التجريبية الوطنية"})," للمشاركة في هاكاثون روشن 2025 — مفتوحة مجانًا للعرض العام"]})}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-4xl mx-auto mt-8",children:[x.jsxs(Ft,{className:"p-6 hover-lift",children:[x.jsx("div",{className:"p-3 rounded-xl bg-blue-100 w-fit mx-auto mb-3",children:x.jsx(dd,{className:"w-6 h-6 text-blue-600"})}),x.jsx("h3",{className:"font-bold mb-2",children:"ذكاء اصطناعي متقدم"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"كل تقييم جديد يجعل مثمّن أذكى من الأمس"})]}),x.jsxs(Ft,{className:"p-6 hover-lift",children:[x.jsx("div",{className:"p-3 rounded-xl bg-green-100 w-fit mx-auto mb-3",children:x.jsx(UI,{className:"w-6 h-6 text-green-600"})}),x.jsx("h3",{className:"font-bold mb-2",children:"نتائج فورية"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"احصل على تقييم شامل في أقل من دقيقة"})]}),x.jsxs(Ft,{className:"p-6 hover-lift",children:[x.jsx("div",{className:"p-3 rounded-xl bg-purple-100 w-fit mx-auto mb-3",children:x.jsx(Ms,{className:"w-6 h-6 text-purple-600"})}),x.jsx("h3",{className:"font-bold mb-2",children:"دقة عالية"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"تحليل متعدد الطبقات لأكثر من 100 متغير"})]})]})]}),m&&x.jsx(Ft,{className:"mb-6 p-4 border-2 border-amber-200 bg-amber-50",children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx(Qc,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-amber-900 mb-1",children:"تنبيه"}),x.jsx("p",{className:"text-sm text-amber-800",children:m})]})]})}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[x.jsx("div",{className:i?"lg:sticky lg:top-24 lg:self-start":"",children:x.jsxs(Ft,{className:"p-6 card-gradient",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(cl,{className:"w-5 h-5 text-primary"}),x.jsx("h3",{className:"text-xl font-bold",children:"بيانات العقار"})]}),i&&x.jsxs(Zr,{variant:"outline",size:"sm",onClick:re,className:"gap-2",children:[x.jsx(X3,{className:"w-4 h-4"}),"تقييم جديد"]})]}),x.jsx(y5,{onSubmit:q,isLoading:d})]})}),i&&x.jsxs("div",{children:[x.jsx(v5,{result:i}),x.jsx(Ft,{className:"mt-6 p-6 bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-200",children:x.jsxs("div",{className:"flex items-start gap-4",children:[x.jsx(L3,{className:"w-6 h-6 text-purple-600 flex-shrink-0 mt-1"}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold mb-2",children:"🧠 الذكاء العقاري يتطور باستمرار"}),x.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"شاركنا تجربتك وساهم في تحسين دقة التقييم الوطني 🇸🇦"}),x.jsx(Zr,{variant:"outline",size:"sm",disabled:!0,children:"قيّم التجربة (قريباً)"})]})]})}),x.jsx(Ft,{className:"mt-6 p-6 bg-gradient-to-br from-blue-50 to-cyan-50 border-2 border-blue-200",children:x.jsxs("div",{className:"text-center",children:[x.jsx("h3",{className:"font-bold text-lg mb-2",children:"🔓 تحليل الحي الكامل، وأفضل مناطق السكن، والتكتلات السعريّة"}),x.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"قريبًا في خطة Smart Plan"}),x.jsx(Zr,{variant:"default",onClick:()=>ce("subscriptions"),children:"اكتشف الباقات"})]})})]})]}),!i&&x.jsxs(x.Fragment,{children:[x.jsxs(Ft,{className:"mt-12 p-8 bg-gradient-to-br from-primary/5 to-purple-50 border-2 border-primary/20",children:[x.jsx("h3",{className:"text-2xl font-bold mb-4 text-center",children:"كيف يعمل مُثمّن؟"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mt-6",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"1"}),x.jsx("h4",{className:"font-semibold mb-2",children:"أدخل البيانات"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"ابدأ بالمعلومات الأساسية وأضف التفاصيل"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"2"}),x.jsx("h4",{className:"font-semibold mb-2",children:"التحليل الذكي"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"المحرك يحلل جميع العوامل المؤثرة"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"3"}),x.jsx("h4",{className:"font-semibold mb-2",children:"التقييم الدقيق"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"احصل على السعر ونطاق التقييم"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"4"}),x.jsx("h4",{className:"font-semibold mb-2",children:"التوصيات"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"نصائح لتحسين قيمة العقار"})]})]})]}),x.jsxs(Ft,{className:"mt-8 p-8 bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-200 text-center",children:[x.jsx("h3",{className:"text-3xl font-black mb-3",children:"قريبًا: خريطة الوعي العقاري الأولى في المملكة 🇸🇦"}),x.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"استكشف الأسعار، الاتجاهات، والفرص في كل حي بتفاصيل غير مسبوقة"}),x.jsxs(Zr,{size:"lg",onClick:()=>ce("referrals"),className:"gap-2",children:[x.jsx(Xu,{className:"w-5 h-5"}),"افتحها بدعمك المبكر"]})]})]})]}),x.jsx(Kp,{})]})}function Yp({currentPage:e,navigateTo:t,showSettings:i,setShowSettings:a,isLoggedIn:d}){const y=[{id:"home",label:"التقييم",icon:ty},{id:"map",label:"الخريطة",icon:im},{id:"market",label:"دراسة السوق",icon:dc},{id:"subscriptions",label:"الباقات",icon:LI},{id:"referrals",label:"الإحالات",icon:Xu}];return d?y.push({id:"dashboard",label:"لوحة التحكم",icon:A3}):y.push({id:"login",label:"تسجيل الدخول",icon:BI}),x.jsx("header",{className:"border-b border-border/50 bg-white/80 backdrop-blur-sm sticky top-0 z-50",children:x.jsxs("div",{className:"container mx-auto px-4 py-4",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t("home"),children:[x.jsx("div",{className:"p-2 rounded-xl primary-gradient",children:x.jsx(zf,{className:"w-8 h-8 text-white"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-black text-foreground",children:"مُثمّن"}),x.jsx("p",{className:"text-xs text-muted-foreground",children:"تقييم عقاري ذكي بالذكاء الاصطناعي"})]})]}),x.jsx("nav",{className:"hidden md:flex items-center gap-2",children:y.map(m=>{const l=m.icon;return x.jsxs(Zr,{variant:e===m.id?"default":"ghost",size:"sm",onClick:()=>t(m.id),className:"gap-2",children:[x.jsx(l,{className:"w-4 h-4"}),m.label]},m.id)})}),e==="home"&&a&&x.jsxs(Zr,{variant:"outline",size:"sm",onClick:()=>a(!i),className:"gap-2",children:[x.jsx(e_,{className:"w-4 h-4"}),"الإعدادات"]})]}),x.jsx("nav",{className:"md:hidden flex items-center gap-2 mt-4 overflow-x-auto",children:y.map(m=>{const l=m.icon;return x.jsxs(Zr,{variant:e===m.id?"default":"outline",size:"sm",onClick:()=>t(m.id),className:"gap-2 flex-shrink-0",children:[x.jsx(l,{className:"w-4 h-4"}),m.label]},m.id)})})]})})}function mK({useGPT:e,setUseGPT:t,stats:i,onClearHistory:a}){return x.jsxs(Ft,{className:"p-4 space-y-4 animate-slide-in",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(dd,{className:"w-5 h-5 text-primary"}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold",children:"محرك التقييم"}),x.jsx("p",{className:"text-xs text-muted-foreground",children:"المحرك المحلي فقط"})]})]}),qS.enabled]}),x.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[x.jsx("p",{className:"text-sm text-blue-900 mb-2",children:x.jsx("strong",{children:"لتفعيل الذكاء الاصطناعي المتقدم:"})}),x.jsxs("ol",{className:"text-xs text-blue-800 space-y-1 mr-4",children:[x.jsxs("li",{children:["1. افتح ملف ",x.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"src/lib/apiConfig.js"})]}),x.jsxs("li",{children:["2. ضع API Key الخاص بك في ",x.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"API_CONFIG.apiKey"})]}),x.jsx("li",{children:"3. احفظ الملف وأعد تشغيل التطبيق"})]})]}),x.jsxs("div",{className:"pt-3 border-t border-border",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("h3",{className:"font-semibold text-sm",children:"إحصائيات الاستخدام"}),x.jsx(Zr,{variant:"ghost",size:"sm",onClick:a,className:"text-xs",children:"مسح السجل"})]}),x.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[x.jsxs("div",{className:"p-2 bg-muted rounded-lg",children:[x.jsx("p",{className:"text-xs text-muted-foreground",children:"إجمالي التقييمات"}),x.jsx("p",{className:"text-lg font-bold",children:i.totalEvaluations})]}),x.jsxs("div",{className:"p-2 bg-muted rounded-lg",children:[x.jsx("p",{className:"text-xs text-muted-foreground",children:"تقييمات GPT"}),x.jsx("p",{className:"text-lg font-bold text-primary",children:i.gptEvaluations})]}),x.jsxs("div",{className:"p-2 bg-muted rounded-lg",children:[x.jsx("p",{className:"text-xs text-muted-foreground",children:"متوسط الثقة"}),x.jsxs("p",{className:"text-lg font-bold text-green-600",children:[i.averageConfidence,"%"]})]})]})]})]})}function Kp(){return x.jsx("footer",{className:"border-t border-border/50 bg-white/80 backdrop-blur-sm mt-16",children:x.jsxs("div",{className:"container mx-auto px-4 py-8",children:[x.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[x.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[x.jsx(zf,{className:"w-4 h-4"}),x.jsx("span",{children:"© جميع الحقوق محفوظة 2025 لمنصّة مثمّن الذكاء العقاري السعودي"})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:x.jsx(x3,{className:"w-5 h-5"})}),x.jsx("a",{href:"mailto:info@mothammen.sa",className:"text-muted-foreground hover:text-primary transition-colors",children:x.jsx(FI,{className:"w-5 h-5"})})]})]}),x.jsx("div",{className:"mt-4 text-center text-xs text-muted-foreground",children:x.jsx("p",{children:"💡 هذا التطبيق يستخدم الذكاء الاصطناعي لتقديم تقييمات تقديرية. للحصول على تقييم رسمي معتمد، يُنصح بالتواصل مع مقيّم عقاري مرخّص."})})]})})}BD.createRoot(document.getElementById("root")).render(x.jsx(Fe.StrictMode,{children:x.jsx(pK,{})}));
