(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))a(f);new MutationObserver(f=>{for(const y of f)if(y.type==="childList")for(const m of y.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function i(f){const y={};return f.integrity&&(y.integrity=f.integrity),f.referrerPolicy&&(y.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?y.credentials="include":f.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function a(f){if(f.ep)return;f.ep=!0;const y=i(f);fetch(f.href,y)}})();var Av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var F0={exports:{}},_g={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jT;function CD(){if(jT)return _g;jT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(a,f,y){var m=null;if(y!==void 0&&(m=""+y),f.key!==void 0&&(m=""+f.key),"key"in f){y={};for(var c in f)c!=="key"&&(y[c]=f[c])}else y=f;return f=y.ref,{$$typeof:e,type:a,key:m,ref:f!==void 0?f:null,props:y}}return _g.Fragment=t,_g.jsx=i,_g.jsxs=i,_g}var OT;function jD(){return OT||(OT=1,F0.exports=CD()),F0.exports}var P=jD(),$0={exports:{}},kr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IT;function OD(){if(IT)return kr;IT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),m=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),O=Symbol.iterator;function B(be){return be===null||typeof be!="object"?null:(be=O&&be[O]||be["@@iterator"],typeof be=="function"?be:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,Z={};function U(be,Xe,ot){this.props=be,this.context=Xe,this.refs=Z,this.updater=ot||F}U.prototype.isReactComponent={},U.prototype.setState=function(be,Xe){if(typeof be!="object"&&typeof be!="function"&&be!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,be,Xe,"setState")},U.prototype.forceUpdate=function(be){this.updater.enqueueForceUpdate(this,be,"forceUpdate")};function te(){}te.prototype=U.prototype;function ae(be,Xe,ot){this.props=be,this.context=Xe,this.refs=Z,this.updater=ot||F}var ne=ae.prototype=new te;ne.constructor=ae,X(ne,U.prototype),ne.isPureReactComponent=!0;var ue=Array.isArray,J={H:null,A:null,T:null,S:null,V:null},oe=Object.prototype.hasOwnProperty;function me(be,Xe,ot,st,Pt,Vt){return ot=Vt.ref,{$$typeof:e,type:be,key:Xe,ref:ot!==void 0?ot:null,props:Vt}}function _e(be,Xe){return me(be.type,Xe,void 0,void 0,void 0,be.props)}function ke(be){return typeof be=="object"&&be!==null&&be.$$typeof===e}function at(be){var Xe={"=":"=0",":":"=2"};return"$"+be.replace(/[=:]/g,function(ot){return Xe[ot]})}var ze=/\/+/g;function Fe(be,Xe){return typeof be=="object"&&be!==null&&be.key!=null?at(""+be.key):Xe.toString(36)}function tt(){}function ut(be){switch(be.status){case"fulfilled":return be.value;case"rejected":throw be.reason;default:switch(typeof be.status=="string"?be.then(tt,tt):(be.status="pending",be.then(function(Xe){be.status==="pending"&&(be.status="fulfilled",be.value=Xe)},function(Xe){be.status==="pending"&&(be.status="rejected",be.reason=Xe)})),be.status){case"fulfilled":return be.value;case"rejected":throw be.reason}}throw be}function rt(be,Xe,ot,st,Pt){var Vt=typeof be;(Vt==="undefined"||Vt==="boolean")&&(be=null);var Rt=!1;if(be===null)Rt=!0;else switch(Vt){case"bigint":case"string":case"number":Rt=!0;break;case"object":switch(be.$$typeof){case e:case t:Rt=!0;break;case D:return Rt=be._init,rt(Rt(be._payload),Xe,ot,st,Pt)}}if(Rt)return Pt=Pt(be),Rt=st===""?"."+Fe(be,0):st,ue(Pt)?(ot="",Rt!=null&&(ot=Rt.replace(ze,"$&/")+"/"),rt(Pt,Xe,ot,"",function(Ot){return Ot})):Pt!=null&&(ke(Pt)&&(Pt=_e(Pt,ot+(Pt.key==null||be&&be.key===Pt.key?"":(""+Pt.key).replace(ze,"$&/")+"/")+Rt)),Xe.push(Pt)),1;Rt=0;var mr=st===""?".":st+":";if(ue(be))for(var nr=0;nr<be.length;nr++)st=be[nr],Vt=mr+Fe(st,nr),Rt+=rt(st,Xe,ot,Vt,Pt);else if(nr=B(be),typeof nr=="function")for(be=nr.call(be),nr=0;!(st=be.next()).done;)st=st.value,Vt=mr+Fe(st,nr++),Rt+=rt(st,Xe,ot,Vt,Pt);else if(Vt==="object"){if(typeof be.then=="function")return rt(ut(be),Xe,ot,st,Pt);throw Xe=String(be),Error("Objects are not valid as a React child (found: "+(Xe==="[object Object]"?"object with keys {"+Object.keys(be).join(", ")+"}":Xe)+"). If you meant to render a collection of children, use an array instead.")}return Rt}function Pe(be,Xe,ot){if(be==null)return be;var st=[],Pt=0;return rt(be,st,"","",function(Vt){return Xe.call(ot,Vt,Pt++)}),st}function Ve(be){if(be._status===-1){var Xe=be._result;Xe=Xe(),Xe.then(function(ot){(be._status===0||be._status===-1)&&(be._status=1,be._result=ot)},function(ot){(be._status===0||be._status===-1)&&(be._status=2,be._result=ot)}),be._status===-1&&(be._status=0,be._result=Xe)}if(be._status===1)return be._result.default;throw be._result}var Ge=typeof reportError=="function"?reportError:function(be){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Xe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof be=="object"&&be!==null&&typeof be.message=="string"?String(be.message):String(be),error:be});if(!window.dispatchEvent(Xe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",be);return}console.error(be)};function ht(){}return kr.Children={map:Pe,forEach:function(be,Xe,ot){Pe(be,function(){Xe.apply(this,arguments)},ot)},count:function(be){var Xe=0;return Pe(be,function(){Xe++}),Xe},toArray:function(be){return Pe(be,function(Xe){return Xe})||[]},only:function(be){if(!ke(be))throw Error("React.Children.only expected to receive a single React element child.");return be}},kr.Component=U,kr.Fragment=i,kr.Profiler=f,kr.PureComponent=ae,kr.StrictMode=a,kr.Suspense=M,kr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,kr.__COMPILER_RUNTIME={__proto__:null,c:function(be){return J.H.useMemoCache(be)}},kr.cache=function(be){return function(){return be.apply(null,arguments)}},kr.cloneElement=function(be,Xe,ot){if(be==null)throw Error("The argument must be a React element, but you passed "+be+".");var st=X({},be.props),Pt=be.key,Vt=void 0;if(Xe!=null)for(Rt in Xe.ref!==void 0&&(Vt=void 0),Xe.key!==void 0&&(Pt=""+Xe.key),Xe)!oe.call(Xe,Rt)||Rt==="key"||Rt==="__self"||Rt==="__source"||Rt==="ref"&&Xe.ref===void 0||(st[Rt]=Xe[Rt]);var Rt=arguments.length-2;if(Rt===1)st.children=ot;else if(1<Rt){for(var mr=Array(Rt),nr=0;nr<Rt;nr++)mr[nr]=arguments[nr+2];st.children=mr}return me(be.type,Pt,void 0,void 0,Vt,st)},kr.createContext=function(be){return be={$$typeof:m,_currentValue:be,_currentValue2:be,_threadCount:0,Provider:null,Consumer:null},be.Provider=be,be.Consumer={$$typeof:y,_context:be},be},kr.createElement=function(be,Xe,ot){var st,Pt={},Vt=null;if(Xe!=null)for(st in Xe.key!==void 0&&(Vt=""+Xe.key),Xe)oe.call(Xe,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(Pt[st]=Xe[st]);var Rt=arguments.length-2;if(Rt===1)Pt.children=ot;else if(1<Rt){for(var mr=Array(Rt),nr=0;nr<Rt;nr++)mr[nr]=arguments[nr+2];Pt.children=mr}if(be&&be.defaultProps)for(st in Rt=be.defaultProps,Rt)Pt[st]===void 0&&(Pt[st]=Rt[st]);return me(be,Vt,void 0,void 0,null,Pt)},kr.createRef=function(){return{current:null}},kr.forwardRef=function(be){return{$$typeof:c,render:be}},kr.isValidElement=ke,kr.lazy=function(be){return{$$typeof:D,_payload:{_status:-1,_result:be},_init:Ve}},kr.memo=function(be,Xe){return{$$typeof:C,type:be,compare:Xe===void 0?null:Xe}},kr.startTransition=function(be){var Xe=J.T,ot={};J.T=ot;try{var st=be(),Pt=J.S;Pt!==null&&Pt(ot,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(ht,Ge)}catch(Vt){Ge(Vt)}finally{J.T=Xe}},kr.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},kr.use=function(be){return J.H.use(be)},kr.useActionState=function(be,Xe,ot){return J.H.useActionState(be,Xe,ot)},kr.useCallback=function(be,Xe){return J.H.useCallback(be,Xe)},kr.useContext=function(be){return J.H.useContext(be)},kr.useDebugValue=function(){},kr.useDeferredValue=function(be,Xe){return J.H.useDeferredValue(be,Xe)},kr.useEffect=function(be,Xe,ot){var st=J.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(be,Xe)},kr.useId=function(){return J.H.useId()},kr.useImperativeHandle=function(be,Xe,ot){return J.H.useImperativeHandle(be,Xe,ot)},kr.useInsertionEffect=function(be,Xe){return J.H.useInsertionEffect(be,Xe)},kr.useLayoutEffect=function(be,Xe){return J.H.useLayoutEffect(be,Xe)},kr.useMemo=function(be,Xe){return J.H.useMemo(be,Xe)},kr.useOptimistic=function(be,Xe){return J.H.useOptimistic(be,Xe)},kr.useReducer=function(be,Xe,ot){return J.H.useReducer(be,Xe,ot)},kr.useRef=function(be){return J.H.useRef(be)},kr.useState=function(be){return J.H.useState(be)},kr.useSyncExternalStore=function(be,Xe,ot){return J.H.useSyncExternalStore(be,Xe,ot)},kr.useTransition=function(){return J.H.useTransition()},kr.version="19.1.0",kr}var kT;function wS(){return kT||(kT=1,$0.exports=OD()),$0.exports}var pt=wS();const $e=kn(pt);var q0={exports:{}},bg={},U0={exports:{}},V0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT;function ID(){return zT||(zT=1,function(e){function t(Pe,Ve){var Ge=Pe.length;Pe.push(Ve);e:for(;0<Ge;){var ht=Ge-1>>>1,be=Pe[ht];if(0<f(be,Ve))Pe[ht]=Ve,Pe[Ge]=be,Ge=ht;else break e}}function i(Pe){return Pe.length===0?null:Pe[0]}function a(Pe){if(Pe.length===0)return null;var Ve=Pe[0],Ge=Pe.pop();if(Ge!==Ve){Pe[0]=Ge;e:for(var ht=0,be=Pe.length,Xe=be>>>1;ht<Xe;){var ot=2*(ht+1)-1,st=Pe[ot],Pt=ot+1,Vt=Pe[Pt];if(0>f(st,Ge))Pt<be&&0>f(Vt,st)?(Pe[ht]=Vt,Pe[Pt]=Ge,ht=Pt):(Pe[ht]=st,Pe[ot]=Ge,ht=ot);else if(Pt<be&&0>f(Vt,Ge))Pe[ht]=Vt,Pe[Pt]=Ge,ht=Pt;else break e}}return Ve}function f(Pe,Ve){var Ge=Pe.sortIndex-Ve.sortIndex;return Ge!==0?Ge:Pe.id-Ve.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var y=performance;e.unstable_now=function(){return y.now()}}else{var m=Date,c=m.now();e.unstable_now=function(){return m.now()-c}}var M=[],C=[],D=1,O=null,B=3,F=!1,X=!1,Z=!1,U=!1,te=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function ue(Pe){for(var Ve=i(C);Ve!==null;){if(Ve.callback===null)a(C);else if(Ve.startTime<=Pe)a(C),Ve.sortIndex=Ve.expirationTime,t(M,Ve);else break;Ve=i(C)}}function J(Pe){if(Z=!1,ue(Pe),!X)if(i(M)!==null)X=!0,oe||(oe=!0,Fe());else{var Ve=i(C);Ve!==null&&rt(J,Ve.startTime-Pe)}}var oe=!1,me=-1,_e=5,ke=-1;function at(){return U?!0:!(e.unstable_now()-ke<_e)}function ze(){if(U=!1,oe){var Pe=e.unstable_now();ke=Pe;var Ve=!0;try{e:{X=!1,Z&&(Z=!1,ae(me),me=-1),F=!0;var Ge=B;try{t:{for(ue(Pe),O=i(M);O!==null&&!(O.expirationTime>Pe&&at());){var ht=O.callback;if(typeof ht=="function"){O.callback=null,B=O.priorityLevel;var be=ht(O.expirationTime<=Pe);if(Pe=e.unstable_now(),typeof be=="function"){O.callback=be,ue(Pe),Ve=!0;break t}O===i(M)&&a(M),ue(Pe)}else a(M);O=i(M)}if(O!==null)Ve=!0;else{var Xe=i(C);Xe!==null&&rt(J,Xe.startTime-Pe),Ve=!1}}break e}finally{O=null,B=Ge,F=!1}Ve=void 0}}finally{Ve?Fe():oe=!1}}}var Fe;if(typeof ne=="function")Fe=function(){ne(ze)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,ut=tt.port2;tt.port1.onmessage=ze,Fe=function(){ut.postMessage(null)}}else Fe=function(){te(ze,0)};function rt(Pe,Ve){me=te(function(){Pe(e.unstable_now())},Ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Pe){Pe.callback=null},e.unstable_forceFrameRate=function(Pe){0>Pe||125<Pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_e=0<Pe?Math.floor(1e3/Pe):5},e.unstable_getCurrentPriorityLevel=function(){return B},e.unstable_next=function(Pe){switch(B){case 1:case 2:case 3:var Ve=3;break;default:Ve=B}var Ge=B;B=Ve;try{return Pe()}finally{B=Ge}},e.unstable_requestPaint=function(){U=!0},e.unstable_runWithPriority=function(Pe,Ve){switch(Pe){case 1:case 2:case 3:case 4:case 5:break;default:Pe=3}var Ge=B;B=Pe;try{return Ve()}finally{B=Ge}},e.unstable_scheduleCallback=function(Pe,Ve,Ge){var ht=e.unstable_now();switch(typeof Ge=="object"&&Ge!==null?(Ge=Ge.delay,Ge=typeof Ge=="number"&&0<Ge?ht+Ge:ht):Ge=ht,Pe){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=Ge+be,Pe={id:D++,callback:Ve,priorityLevel:Pe,startTime:Ge,expirationTime:be,sortIndex:-1},Ge>ht?(Pe.sortIndex=Ge,t(C,Pe),i(M)===null&&Pe===i(C)&&(Z?(ae(me),me=-1):Z=!0,rt(J,Ge-ht))):(Pe.sortIndex=be,t(M,Pe),X||F||(X=!0,oe||(oe=!0,Fe()))),Pe},e.unstable_shouldYield=at,e.unstable_wrapCallback=function(Pe){var Ve=B;return function(){var Ge=B;B=Ve;try{return Pe.apply(this,arguments)}finally{B=Ge}}}}(V0)),V0}var DT;function kD(){return DT||(DT=1,U0.exports=ID()),U0.exports}var G0={exports:{}},no={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT;function zD(){if(RT)return no;RT=1;var e=wS();function t(M){var C="https://react.dev/errors/"+M;if(1<arguments.length){C+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)C+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+M+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},f=Symbol.for("react.portal");function y(M,C,D){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:O==null?null:""+O,children:M,containerInfo:C,implementation:D}}var m=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(M,C){if(M==="font")return"";if(typeof C=="string")return C==="use-credentials"?C:""}return no.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,no.createPortal=function(M,C){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C||C.nodeType!==1&&C.nodeType!==9&&C.nodeType!==11)throw Error(t(299));return y(M,C,null,D)},no.flushSync=function(M){var C=m.T,D=a.p;try{if(m.T=null,a.p=2,M)return M()}finally{m.T=C,a.p=D,a.d.f()}},no.preconnect=function(M,C){typeof M=="string"&&(C?(C=C.crossOrigin,C=typeof C=="string"?C==="use-credentials"?C:"":void 0):C=null,a.d.C(M,C))},no.prefetchDNS=function(M){typeof M=="string"&&a.d.D(M)},no.preinit=function(M,C){if(typeof M=="string"&&C&&typeof C.as=="string"){var D=C.as,O=c(D,C.crossOrigin),B=typeof C.integrity=="string"?C.integrity:void 0,F=typeof C.fetchPriority=="string"?C.fetchPriority:void 0;D==="style"?a.d.S(M,typeof C.precedence=="string"?C.precedence:void 0,{crossOrigin:O,integrity:B,fetchPriority:F}):D==="script"&&a.d.X(M,{crossOrigin:O,integrity:B,fetchPriority:F,nonce:typeof C.nonce=="string"?C.nonce:void 0})}},no.preinitModule=function(M,C){if(typeof M=="string")if(typeof C=="object"&&C!==null){if(C.as==null||C.as==="script"){var D=c(C.as,C.crossOrigin);a.d.M(M,{crossOrigin:D,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0})}}else C==null&&a.d.M(M)},no.preload=function(M,C){if(typeof M=="string"&&typeof C=="object"&&C!==null&&typeof C.as=="string"){var D=C.as,O=c(D,C.crossOrigin);a.d.L(M,D,{crossOrigin:O,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0,type:typeof C.type=="string"?C.type:void 0,fetchPriority:typeof C.fetchPriority=="string"?C.fetchPriority:void 0,referrerPolicy:typeof C.referrerPolicy=="string"?C.referrerPolicy:void 0,imageSrcSet:typeof C.imageSrcSet=="string"?C.imageSrcSet:void 0,imageSizes:typeof C.imageSizes=="string"?C.imageSizes:void 0,media:typeof C.media=="string"?C.media:void 0})}},no.preloadModule=function(M,C){if(typeof M=="string")if(C){var D=c(C.as,C.crossOrigin);a.d.m(M,{as:typeof C.as=="string"&&C.as!=="script"?C.as:void 0,crossOrigin:D,integrity:typeof C.integrity=="string"?C.integrity:void 0})}else a.d.m(M)},no.requestFormReset=function(M){a.d.r(M)},no.unstable_batchedUpdates=function(M,C){return M(C)},no.useFormState=function(M,C,D){return m.H.useFormState(M,C,D)},no.useFormStatus=function(){return m.H.useHostTransitionStatus()},no.version="19.1.0",no}var NT;function qO(){if(NT)return G0.exports;NT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),G0.exports=zD(),G0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT;function DD(){if(LT)return bg;LT=1;var e=kD(),t=wS(),i=qO();function a(s){var h="https://react.dev/errors/"+s;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+s+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function y(s){var h=s,g=s;if(s.alternate)for(;h.return;)h=h.return;else{s=h;do h=s,(h.flags&4098)!==0&&(g=h.return),s=h.return;while(s)}return h.tag===3?g:null}function m(s){if(s.tag===13){var h=s.memoizedState;if(h===null&&(s=s.alternate,s!==null&&(h=s.memoizedState)),h!==null)return h.dehydrated}return null}function c(s){if(y(s)!==s)throw Error(a(188))}function M(s){var h=s.alternate;if(!h){if(h=y(s),h===null)throw Error(a(188));return h!==s?null:s}for(var g=s,S=h;;){var j=g.return;if(j===null)break;var N=j.alternate;if(N===null){if(S=j.return,S!==null){g=S;continue}break}if(j.child===N.child){for(N=j.child;N;){if(N===g)return c(j),s;if(N===S)return c(j),h;N=N.sibling}throw Error(a(188))}if(g.return!==S.return)g=j,S=N;else{for(var Y=!1,ce=j.child;ce;){if(ce===g){Y=!0,g=j,S=N;break}if(ce===S){Y=!0,S=j,g=N;break}ce=ce.sibling}if(!Y){for(ce=N.child;ce;){if(ce===g){Y=!0,g=N,S=j;break}if(ce===S){Y=!0,S=N,g=j;break}ce=ce.sibling}if(!Y)throw Error(a(189))}}if(g.alternate!==S)throw Error(a(190))}if(g.tag!==3)throw Error(a(188));return g.stateNode.current===g?s:h}function C(s){var h=s.tag;if(h===5||h===26||h===27||h===6)return s;for(s=s.child;s!==null;){if(h=C(s),h!==null)return h;s=s.sibling}return null}var D=Object.assign,O=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),ae=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),_e=Symbol.for("react.lazy"),ke=Symbol.for("react.activity"),at=Symbol.for("react.memo_cache_sentinel"),ze=Symbol.iterator;function Fe(s){return s===null||typeof s!="object"?null:(s=ze&&s[ze]||s["@@iterator"],typeof s=="function"?s:null)}var tt=Symbol.for("react.client.reference");function ut(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===tt?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case X:return"Fragment";case U:return"Profiler";case Z:return"StrictMode";case J:return"Suspense";case oe:return"SuspenseList";case ke:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case F:return"Portal";case ne:return(s.displayName||"Context")+".Provider";case ae:return(s._context.displayName||"Context")+".Consumer";case ue:var h=s.render;return s=s.displayName,s||(s=h.displayName||h.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case me:return h=s.displayName||null,h!==null?h:ut(s.type)||"Memo";case _e:h=s._payload,s=s._init;try{return ut(s(h))}catch{}}return null}var rt=Array.isArray,Pe=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ve=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge={pending:!1,data:null,method:null,action:null},ht=[],be=-1;function Xe(s){return{current:s}}function ot(s){0>be||(s.current=ht[be],ht[be]=null,be--)}function st(s,h){be++,ht[be]=s.current,s.current=h}var Pt=Xe(null),Vt=Xe(null),Rt=Xe(null),mr=Xe(null);function nr(s,h){switch(st(Rt,h),st(Vt,s),st(Pt,null),h.nodeType){case 9:case 11:s=(s=h.documentElement)&&(s=s.namespaceURI)?dg(s):0;break;default:if(s=h.tagName,h=h.namespaceURI)h=dg(h),s=Wh(h,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ot(Pt),st(Pt,s)}function Ot(){ot(Pt),ot(Vt),ot(Rt)}function er(s){s.memoizedState!==null&&st(mr,s);var h=Pt.current,g=Wh(h,s.type);h!==g&&(st(Vt,s),st(Pt,g))}function ir(s){Vt.current===s&&(ot(Pt),ot(Vt)),mr.current===s&&(ot(mr),x._currentValue=Ge)}var _t=Object.prototype.hasOwnProperty,hr=e.unstable_scheduleCallback,Qt=e.unstable_cancelCallback,Yr=e.unstable_shouldYield,tn=e.unstable_requestPaint,Kr=e.unstable_now,Oi=e.unstable_getCurrentPriorityLevel,Xn=e.unstable_ImmediatePriority,Ba=e.unstable_UserBlockingPriority,Ii=e.unstable_NormalPriority,ki=e.unstable_LowPriority,Wi=e.unstable_IdlePriority,Mo=e.log,Ts=e.unstable_setDisableYieldValue,zi=null,Qn=null;function li(s){if(typeof Mo=="function"&&Ts(s),Qn&&typeof Qn.setStrictMode=="function")try{Qn.setStrictMode(zi,s)}catch{}}var Ie=Math.clz32?Math.clz32:de,re=Math.log,ie=Math.LN2;function de(s){return s>>>=0,s===0?32:31-(re(s)/ie|0)|0}var Se=256,Ee=4194304;function De(s){var h=s&42;if(h!==0)return h;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function He(s,h,g){var S=s.pendingLanes;if(S===0)return 0;var j=0,N=s.suspendedLanes,Y=s.pingedLanes;s=s.warmLanes;var ce=S&134217727;return ce!==0?(S=ce&~N,S!==0?j=De(S):(Y&=ce,Y!==0?j=De(Y):g||(g=ce&~s,g!==0&&(j=De(g))))):(ce=S&~N,ce!==0?j=De(ce):Y!==0?j=De(Y):g||(g=S&~s,g!==0&&(j=De(g)))),j===0?0:h!==0&&h!==j&&(h&N)===0&&(N=j&-j,g=h&-h,N>=g||N===32&&(g&4194048)!==0)?h:j}function Le(s,h){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&h)===0}function ct(s,h){switch(s){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function St(){var s=Se;return Se<<=1,(Se&4194048)===0&&(Se=256),s}function mt(){var s=Ee;return Ee<<=1,(Ee&62914560)===0&&(Ee=4194304),s}function Bt(s){for(var h=[],g=0;31>g;g++)h.push(s);return h}function Zt(s,h){s.pendingLanes|=h,h!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ue(s,h,g,S,j,N){var Y=s.pendingLanes;s.pendingLanes=g,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=g,s.entangledLanes&=g,s.errorRecoveryDisabledLanes&=g,s.shellSuspendCounter=0;var ce=s.entanglements,Me=s.expirationTimes,qe=s.hiddenUpdates;for(g=Y&~g;0<g;){var ft=31-Ie(g),xt=1<<ft;ce[ft]=0,Me[ft]=-1;var et=qe[ft];if(et!==null)for(qe[ft]=null,ft=0;ft<et.length;ft++){var lt=et[ft];lt!==null&&(lt.lane&=-536870913)}g&=~xt}S!==0&&Cr(s,S,0),N!==0&&j===0&&s.tag!==0&&(s.suspendedLanes|=N&~(Y&~h))}function Cr(s,h,g){s.pendingLanes|=h,s.suspendedLanes&=~h;var S=31-Ie(h);s.entangledLanes|=h,s.entanglements[S]=s.entanglements[S]|1073741824|g&4194090}function qr(s,h){var g=s.entangledLanes|=h;for(s=s.entanglements;g;){var S=31-Ie(g),j=1<<S;j&h|s[S]&h&&(s[S]|=h),g&=~j}}function Ft(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Pr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Jn(){var s=Ve.p;return s!==0?s:(s=window.event,s===void 0?32:je(s.type))}function ci(s,h){var g=Ve.p;try{return Ve.p=s,h()}finally{Ve.p=g}}var hn=Math.random().toString(36).slice(2),Zr="__reactFiber$"+hn,Tr="__reactProps$"+hn,An="__reactContainer$"+hn,Ur="__reactEvents$"+hn,wt="__reactListeners$"+hn,Po="__reactHandles$"+hn,ca="__reactResources$"+hn,Ai="__reactMarker$"+hn;function Wn(s){delete s[Zr],delete s[Tr],delete s[Ur],delete s[wt],delete s[Po]}function Ct(s){var h=s[Zr];if(h)return h;for(var g=s.parentNode;g;){if(h=g[An]||g[Zr]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(s=pg(s);s!==null;){if(g=s[Zr])return g;s=pg(s)}return h}s=g,g=s.parentNode}return null}function fr(s){if(s=s[Zr]||s[An]){var h=s.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return s}return null}function dr(s){var h=s.tag;if(h===5||h===26||h===27||h===6)return s.stateNode;throw Error(a(33))}function yi(s){var h=s[ca];return h||(h=s[ca]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function dn(s){s[Ai]=!0}var so=new Set,gr={};function Fa(s,h){Eo(s,h),Eo(s+"Capture",h)}function Eo(s,h){for(gr[s]=h,s=0;s<h.length;s++)so.add(h[s])}var cl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lc={},Co={};function ul(s){return _t.call(Co,s)?!0:_t.call(lc,s)?!1:cl.test(s)?Co[s]=!0:(lc[s]=!0,!1)}function Mn(s,h,g){if(ul(h))if(g===null)s.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":s.removeAttribute(h);return;case"boolean":var S=h.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){s.removeAttribute(h);return}}s.setAttribute(h,""+g)}}function Di(s,h,g){if(g===null)s.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttribute(h,""+g)}}function Vr(s,h,g,S){if(S===null)s.removeAttribute(g);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(g);return}s.setAttributeNS(h,g,""+S)}}var hl,dl;function As(s){if(hl===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);hl=h&&h[1]||"",dl=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hl+s+dl}var rs=!1;function lo(s,h){if(!s||rs)return"";rs=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(h){var xt=function(){throw Error()};if(Object.defineProperty(xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xt,[])}catch(lt){var et=lt}Reflect.construct(s,[],xt)}else{try{xt.call()}catch(lt){et=lt}s.call(xt.prototype)}}else{try{throw Error()}catch(lt){et=lt}(xt=s())&&typeof xt.catch=="function"&&xt.catch(function(){})}}catch(lt){if(lt&&et&&typeof lt.stack=="string")return[lt.stack,et.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var j=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");j&&j.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=S.DetermineComponentFrameRoot(),Y=N[0],ce=N[1];if(Y&&ce){var Me=Y.split(`
`),qe=ce.split(`
`);for(j=S=0;S<Me.length&&!Me[S].includes("DetermineComponentFrameRoot");)S++;for(;j<qe.length&&!qe[j].includes("DetermineComponentFrameRoot");)j++;if(S===Me.length||j===qe.length)for(S=Me.length-1,j=qe.length-1;1<=S&&0<=j&&Me[S]!==qe[j];)j--;for(;1<=S&&0<=j;S--,j--)if(Me[S]!==qe[j]){if(S!==1||j!==1)do if(S--,j--,0>j||Me[S]!==qe[j]){var ft=`
`+Me[S].replace(" at new "," at ");return s.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",s.displayName)),ft}while(1<=S&&0<=j);break}}}finally{rs=!1,Error.prepareStackTrace=g}return(g=s?s.displayName||s.name:"")?As(g):""}function If(s){switch(s.tag){case 26:case 27:case 5:return As(s.type);case 16:return As("Lazy");case 13:return As("Suspense");case 19:return As("SuspenseList");case 0:case 15:return lo(s.type,!1);case 11:return lo(s.type.render,!1);case 1:return lo(s.type,!0);case 31:return As("Activity");default:return""}}function Qu(s){try{var h="";do h+=If(s),s=s.return;while(s);return h}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function Ma(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function fl(s){var h=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function kf(s){var h=fl(s)?"checked":"value",g=Object.getOwnPropertyDescriptor(s.constructor.prototype,h),S=""+s[h];if(!s.hasOwnProperty(h)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var j=g.get,N=g.set;return Object.defineProperty(s,h,{configurable:!0,get:function(){return j.call(this)},set:function(Y){S=""+Y,N.call(this,Y)}}),Object.defineProperty(s,h,{enumerable:g.enumerable}),{getValue:function(){return S},setValue:function(Y){S=""+Y},stopTracking:function(){s._valueTracker=null,delete s[h]}}}}function Ju(s){s._valueTracker||(s._valueTracker=kf(s))}function zf(s){if(!s)return!1;var h=s._valueTracker;if(!h)return!0;var g=h.getValue(),S="";return s&&(S=fl(s)?s.checked?"true":"false":s.value),s=S,s!==g?(h.setValue(s),!0):!1}function eh(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Df=/[\n"\\]/g;function ua(s){return s.replace(Df,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function ns(s,h,g,S,j,N,Y,ce){s.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?s.type=Y:s.removeAttribute("type"),h!=null?Y==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+Ma(h)):s.value!==""+Ma(h)&&(s.value=""+Ma(h)):Y!=="submit"&&Y!=="reset"||s.removeAttribute("value"),h!=null?rh(s,Y,Ma(h)):g!=null?rh(s,Y,Ma(g)):S!=null&&s.removeAttribute("value"),j==null&&N!=null&&(s.defaultChecked=!!N),j!=null&&(s.checked=j&&typeof j!="function"&&typeof j!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?s.name=""+Ma(ce):s.removeAttribute("name")}function th(s,h,g,S,j,N,Y,ce){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(s.type=N),h!=null||g!=null){if(!(N!=="submit"&&N!=="reset"||h!=null))return;g=g!=null?""+Ma(g):"",h=h!=null?""+Ma(h):g,ce||h===s.value||(s.value=h),s.defaultValue=h}S=S??j,S=typeof S!="function"&&typeof S!="symbol"&&!!S,s.checked=ce?s.checked:!!S,s.defaultChecked=!!S,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(s.name=Y)}function rh(s,h,g){h==="number"&&eh(s.ownerDocument)===s||s.defaultValue===""+g||(s.defaultValue=""+g)}function $a(s,h,g,S){if(s=s.options,h){h={};for(var j=0;j<g.length;j++)h["$"+g[j]]=!0;for(g=0;g<s.length;g++)j=h.hasOwnProperty("$"+s[g].value),s[g].selected!==j&&(s[g].selected=j),j&&S&&(s[g].defaultSelected=!0)}else{for(g=""+Ma(g),h=null,j=0;j<s.length;j++){if(s[j].value===g){s[j].selected=!0,S&&(s[j].defaultSelected=!0);return}h!==null||s[j].disabled||(h=s[j])}h!==null&&(h.selected=!0)}}function nh(s,h,g){if(h!=null&&(h=""+Ma(h),h!==s.value&&(s.value=h),g==null)){s.defaultValue!==h&&(s.defaultValue=h);return}s.defaultValue=g!=null?""+Ma(g):""}function Rf(s,h,g,S){if(h==null){if(S!=null){if(g!=null)throw Error(a(92));if(rt(S)){if(1<S.length)throw Error(a(93));S=S[0]}g=S}g==null&&(g=""),h=g}g=Ma(h),s.defaultValue=g,S=s.textContent,S===g&&S!==""&&S!==null&&(s.value=S)}function jo(s,h){if(h){var g=s.firstChild;if(g&&g===s.lastChild&&g.nodeType===3){g.nodeValue=h;return}}s.textContent=h}var Yc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ih(s,h,g){var S=h.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?S?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="":S?s.setProperty(h,g):typeof g!="number"||g===0||Yc.has(h)?h==="float"?s.cssFloat=g:s[h]=(""+g).trim():s[h]=g+"px"}function Ri(s,h,g){if(h!=null&&typeof h!="object")throw Error(a(62));if(s=s.style,g!=null){for(var S in g)!g.hasOwnProperty(S)||h!=null&&h.hasOwnProperty(S)||(S.indexOf("--")===0?s.setProperty(S,""):S==="float"?s.cssFloat="":s[S]="");for(var j in h)S=h[j],h.hasOwnProperty(j)&&g[j]!==S&&ih(s,j,S)}else for(var N in h)h.hasOwnProperty(N)&&ih(s,N,h[N])}function Ar(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oo(s){return Yi.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var vr=null;function pl(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Io=null,co=null;function Ki(s){var h=fr(s);if(h&&(s=h.stateNode)){var g=s[Tr]||null;e:switch(s=h.stateNode,h.type){case"input":if(ns(s,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),h=g.name,g.type==="radio"&&h!=null){for(g=s;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+ua(""+h)+'"][type="radio"]'),h=0;h<g.length;h++){var S=g[h];if(S!==s&&S.form===s.form){var j=S[Tr]||null;if(!j)throw Error(a(90));ns(S,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name)}}for(h=0;h<g.length;h++)S=g[h],S.form===s.form&&zf(S)}break e;case"textarea":nh(s,g.value,g.defaultValue);break e;case"select":h=g.value,h!=null&&$a(s,!!g.multiple,h,!1)}}}var ui=!1;function hi(s,h,g){if(ui)return s(h,g);ui=!0;try{var S=s(h);return S}finally{if(ui=!1,(Io!==null||co!==null)&&(lp(),Io&&(h=Io,s=co,co=Io=null,Ki(h),s)))for(h=0;h<s.length;h++)Ki(s[h])}}function Yn(s,h){var g=s.stateNode;if(g===null)return null;var S=g[Tr]||null;if(S===null)return null;g=S[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(s=s.type,S=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!S;break e;default:s=!1}if(s)return null;if(g&&typeof g!="function")throw Error(a(231,h,typeof g));return g}var Br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ms=!1;if(Br)try{var di={};Object.defineProperty(di,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",di,di),window.removeEventListener("test",di,di)}catch{Ms=!1}var ei=null,Ni=null,Ps=null;function rn(){if(Ps)return Ps;var s,h=Ni,g=h.length,S,j="value"in ei?ei.value:ei.textContent,N=j.length;for(s=0;s<g&&h[s]===j[s];s++);var Y=g-s;for(S=1;S<=Y&&h[g-S]===j[N-S];S++);return Ps=j.slice(s,1<S?1-S:void 0)}function yn(s){var h=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&h===13&&(s=13)):s=h,s===10&&(s=13),32<=s||s===13?s:0}function _r(){return!0}function lr(){return!1}function fi(s){function h(g,S,j,N,Y){this._reactName=g,this._targetInst=j,this.type=S,this.nativeEvent=N,this.target=Y,this.currentTarget=null;for(var ce in s)s.hasOwnProperty(ce)&&(g=s[ce],this[ce]=g?g(N):N[ce]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?_r:lr,this.isPropagationStopped=lr,this}return D(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),h}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ml=fi(cr),ti=D({},cr,{view:0,detail:0}),pd=fi(ti),gl,yl,ko,Es=D({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ha,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ko&&(ko&&s.type==="mousemove"?(gl=s.screenX-ko.screenX,yl=s.screenY-ko.screenY):yl=gl=0,ko=s),gl)},movementY:function(s){return"movementY"in s?s.movementY:yl}}),ah=fi(Es),oh=D({},Es,{dataTransfer:0}),Kc=fi(oh),zo=D({},ti,{relatedTarget:0}),ri=fi(zo),vl=D({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qc=fi(vl),Cs=D({},cr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),vi=fi(Cs),sh=D({},cr,{data:0}),Jc=fi(sh),Nf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uc(s){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(s):(s=pi[s])?!!h[s]:!1}function ha(){return uc}var lh=D({},ti,{key:function(s){if(s.key){var h=Nf[s.key]||s.key;if(h!=="Unidentified")return h}return s.type==="keypress"?(s=yn(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Pm[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ha,charCode:function(s){return s.type==="keypress"?yn(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?yn(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),md=fi(lh),eu=D({},Es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Do=fi(eu),uo=D({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ha}),Lf=fi(uo),ch=D({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Em=fi(ch),gd=D({},Es,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Cm=fi(gd),uh=D({},cr,{newState:0,oldState:0}),yd=fi(uh),hh=[9,13,27,32],js=Br&&"CompositionEvent"in window,_l=null;Br&&"documentMode"in document&&(_l=document.documentMode);var ho=Br&&"TextEvent"in window&&!_l,vd=Br&&(!js||_l&&8<_l&&11>=_l),dh=" ",bl=!1;function hc(s,h){switch(s){case"keyup":return hh.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bf(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var is=!1;function jm(s,h){switch(s){case"compositionend":return Bf(h);case"keypress":return h.which!==32?null:(bl=!0,dh);case"textInput":return s=h.data,s===dh&&bl?null:s;default:return null}}function dc(s,h){if(is)return s==="compositionend"||!js&&hc(s,h)?(s=rn(),Ps=Ni=ei=null,is=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return vd&&h.locale!=="ko"?null:h.data;default:return null}}var Ff={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fh(s){var h=s&&s.nodeName&&s.nodeName.toLowerCase();return h==="input"?!!Ff[s.type]:h==="textarea"}function _d(s,h,g,S){Io?co?co.push(S):co=[S]:Io=S,h=Eu(h,"onChange"),0<h.length&&(g=new ml("onChange","change",null,g,S),s.push({event:g,listeners:h}))}var fc=null,xl=null;function $f(s){hv(s,0)}function tu(s){var h=dr(s);if(zf(h))return s}function pc(s,h){if(s==="change")return h}var bd=!1;if(Br){var as;if(Br){var ph="oninput"in document;if(!ph){var xd=document.createElement("div");xd.setAttribute("oninput","return;"),ph=typeof xd.oninput=="function"}as=ph}else as=!1;bd=as&&(!document.documentMode||9<document.documentMode)}function Os(){fc&&(fc.detachEvent("onpropertychange",wd),xl=fc=null)}function wd(s){if(s.propertyName==="value"&&tu(xl)){var h=[];_d(h,xl,s,pl(s)),hi($f,h)}}function mh(s,h,g){s==="focusin"?(Os(),fc=h,xl=g,fc.attachEvent("onpropertychange",wd)):s==="focusout"&&Os()}function Om(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return tu(xl)}function qf(s,h){if(s==="click")return tu(h)}function Sd(s,h){if(s==="input"||s==="change")return tu(h)}function Uf(s,h){return s===h&&(s!==0||1/s===1/h)||s!==s&&h!==h}var da=typeof Object.is=="function"?Object.is:Uf;function wl(s,h){if(da(s,h))return!0;if(typeof s!="object"||s===null||typeof h!="object"||h===null)return!1;var g=Object.keys(s),S=Object.keys(h);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var j=g[S];if(!_t.call(h,j)||!da(s[j],h[j]))return!1}return!0}function gh(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ru(s,h){var g=gh(s);s=0;for(var S;g;){if(g.nodeType===3){if(S=s+g.textContent.length,s<=h&&S>=h)return{node:g,offset:h-s};s=S}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=gh(g)}}function Ro(s,h){return s&&h?s===h?!0:s&&s.nodeType===3?!1:h&&h.nodeType===3?Ro(s,h.parentNode):"contains"in s?s.contains(h):s.compareDocumentPosition?!!(s.compareDocumentPosition(h)&16):!1:!1}function yh(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var h=eh(s.document);h instanceof s.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)s=h.contentWindow;else break;h=eh(s.document)}return h}function nu(s){var h=s&&s.nodeName&&s.nodeName.toLowerCase();return h&&(h==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||h==="textarea"||s.contentEditable==="true")}var Fr=Br&&"documentMode"in document&&11>=document.documentMode,Sl=null,iu=null,fo=null,au=!1;function Vf(s,h,g){var S=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;au||Sl==null||Sl!==eh(S)||(S=Sl,"selectionStart"in S&&nu(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),fo&&wl(fo,S)||(fo=S,S=Eu(iu,"onSelect"),0<S.length&&(h=new ml("onSelect","select",null,h,g),s.push({event:h,listeners:S}),h.target=Sl)))}function Tl(s,h){var g={};return g[s.toLowerCase()]=h.toLowerCase(),g["Webkit"+s]="webkit"+h,g["Moz"+s]="moz"+h,g}var mc={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionrun:Tl("Transition","TransitionRun"),transitionstart:Tl("Transition","TransitionStart"),transitioncancel:Tl("Transition","TransitionCancel"),transitionend:Tl("Transition","TransitionEnd")},Td={},Ad={};Br&&(Ad=document.createElement("div").style,"AnimationEvent"in window||(delete mc.animationend.animation,delete mc.animationiteration.animation,delete mc.animationstart.animation),"TransitionEvent"in window||delete mc.transitionend.transition);function Al(s){if(Td[s])return Td[s];if(!mc[s])return s;var h=mc[s],g;for(g in h)if(h.hasOwnProperty(g)&&g in Ad)return Td[s]=h[g];return s}var Md=Al("animationend"),ou=Al("animationiteration"),su=Al("animationstart"),vh=Al("transitionrun"),Pd=Al("transitionstart"),Ml=Al("transitioncancel"),gc=Al("transitionend"),Pl=new Map,fa="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fa.push("scrollEnd");function qa(s,h){Pl.set(s,h),Fa(h,[s])}var Ed=new WeakMap;function pa(s,h){if(typeof s=="object"&&s!==null){var g=Ed.get(s);return g!==void 0?g:(h={value:s,source:h,stack:Qu(h)},Ed.set(s,h),h)}return{value:s,source:h,stack:Qu(h)}}var _i=[],os=0,yc=0;function Is(){for(var s=os,h=yc=os=0;h<s;){var g=_i[h];_i[h++]=null;var S=_i[h];_i[h++]=null;var j=_i[h];_i[h++]=null;var N=_i[h];if(_i[h++]=null,S!==null&&j!==null){var Y=S.pending;Y===null?j.next=j:(j.next=Y.next,Y.next=j),S.pending=j}N!==0&&Cl(g,j,N)}}function El(s,h,g,S){_i[os++]=s,_i[os++]=h,_i[os++]=g,_i[os++]=S,yc|=S,s.lanes|=S,s=s.alternate,s!==null&&(s.lanes|=S)}function _h(s,h,g,S){return El(s,h,g,S),lu(s)}function po(s,h){return El(s,null,null,h),lu(s)}function Cl(s,h,g){s.lanes|=g;var S=s.alternate;S!==null&&(S.lanes|=g);for(var j=!1,N=s.return;N!==null;)N.childLanes|=g,S=N.alternate,S!==null&&(S.childLanes|=g),N.tag===22&&(s=N.stateNode,s===null||s._visibility&1||(j=!0)),s=N,N=N.return;return s.tag===3?(N=s.stateNode,j&&h!==null&&(j=31-Ie(g),s=N.hiddenUpdates,S=s[j],S===null?s[j]=[h]:S.push(h),h.lane=g|536870912),N):null}function lu(s){if(50<Uh)throw Uh=0,tg=null,Error(a(185));for(var h=s.return;h!==null;)s=h,h=s.return;return s.tag===3?s.stateNode:null}var No={};function Mr(s,h,g,S){this.tag=s,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Li(s,h,g,S){return new Mr(s,h,g,S)}function Cd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function mo(s,h){var g=s.alternate;return g===null?(g=Li(s.tag,h,s.key,s.mode),g.elementType=s.elementType,g.type=s.type,g.stateNode=s.stateNode,g.alternate=s,s.alternate=g):(g.pendingProps=h,g.type=s.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=s.flags&65011712,g.childLanes=s.childLanes,g.lanes=s.lanes,g.child=s.child,g.memoizedProps=s.memoizedProps,g.memoizedState=s.memoizedState,g.updateQueue=s.updateQueue,h=s.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=s.sibling,g.index=s.index,g.ref=s.ref,g.refCleanup=s.refCleanup,g}function vc(s,h){s.flags&=65011714;var g=s.alternate;return g===null?(s.childLanes=0,s.lanes=h,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=g.childLanes,s.lanes=g.lanes,s.child=g.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=g.memoizedProps,s.memoizedState=g.memoizedState,s.updateQueue=g.updateQueue,s.type=g.type,h=g.dependencies,s.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),s}function bh(s,h,g,S,j,N){var Y=0;if(S=s,typeof s=="function")Cd(s)&&(Y=1);else if(typeof s=="string")Y=sf(s,g,Pt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case ke:return s=Li(31,g,h,j),s.elementType=ke,s.lanes=N,s;case X:return Lo(g.children,j,N,h);case Z:Y=8,j|=24;break;case U:return s=Li(12,g,h,j|2),s.elementType=U,s.lanes=N,s;case J:return s=Li(13,g,h,j),s.elementType=J,s.lanes=N,s;case oe:return s=Li(19,g,h,j),s.elementType=oe,s.lanes=N,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case te:case ne:Y=10;break e;case ae:Y=9;break e;case ue:Y=11;break e;case me:Y=14;break e;case _e:Y=16,S=null;break e}Y=29,g=Error(a(130,s===null?"null":typeof s,"")),S=null}return h=Li(Y,g,h,j),h.elementType=s,h.type=S,h.lanes=N,h}function Lo(s,h,g,S){return s=Li(7,s,S,h),s.lanes=g,s}function cu(s,h,g){return s=Li(6,s,null,h),s.lanes=g,s}function jd(s,h,g){return h=Li(4,s.children!==null?s.children:[],s.key,h),h.lanes=g,h.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},h}var ks=[],ss=0,jl=null,Ol=0,Qi=[],ma=0,Bo=null,Ua=1,Pa="";function Ea(s,h){ks[ss++]=Ol,ks[ss++]=jl,jl=s,Ol=h}function uu(s,h,g){Qi[ma++]=Ua,Qi[ma++]=Pa,Qi[ma++]=Bo,Bo=s;var S=Ua;s=Pa;var j=32-Ie(S)-1;S&=~(1<<j),g+=1;var N=32-Ie(h)+j;if(30<N){var Y=j-j%5;N=(S&(1<<Y)-1).toString(32),S>>=Y,j-=Y,Ua=1<<32-Ie(h)+j|g<<j|S,Pa=N+s}else Ua=1<<N|g<<j|S,Pa=s}function Od(s){s.return!==null&&(Ea(s,1),uu(s,1,0))}function Il(s){for(;s===jl;)jl=ks[--ss],ks[ss]=null,Ol=ks[--ss],ks[ss]=null;for(;s===Bo;)Bo=Qi[--ma],Qi[ma]=null,Pa=Qi[--ma],Qi[ma]=null,Ua=Qi[--ma],Qi[ma]=null}var Ji=null,zn=null,Dr=!1,Fo=null,Ca=!1,_c=Error(a(519));function Va(s){var h=Error(a(418,""));throw Bi(pa(h,s)),_c}function bc(s){var h=s.stateNode,g=s.type,S=s.memoizedProps;switch(h[Zr]=s,h[Tr]=S,g){case"dialog":Or("cancel",h),Or("close",h);break;case"iframe":case"object":case"embed":Or("load",h);break;case"video":case"audio":for(g=0;g<$c.length;g++)Or($c[g],h);break;case"source":Or("error",h);break;case"img":case"image":case"link":Or("error",h),Or("load",h);break;case"details":Or("toggle",h);break;case"input":Or("invalid",h),th(h,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0),Ju(h);break;case"select":Or("invalid",h);break;case"textarea":Or("invalid",h),Rf(h,S.value,S.defaultValue,S.children),Ju(h)}g=S.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||h.textContent===""+g||S.suppressHydrationWarning===!0||pv(h.textContent,g)?(S.popover!=null&&(Or("beforetoggle",h),Or("toggle",h)),S.onScroll!=null&&Or("scroll",h),S.onScrollEnd!=null&&Or("scrollend",h),S.onClick!=null&&(h.onclick=Hh),h=!0):h=!1,h||Va(s)}function hu(s){for(Ji=s.return;Ji;)switch(Ji.tag){case 5:case 13:Ca=!1;return;case 27:case 3:Ca=!0;return;default:Ji=Ji.return}}function xc(s){if(s!==Ji)return!1;if(!Dr)return hu(s),Dr=!0,!1;var h=s.tag,g;if((g=h!==3&&h!==27)&&((g=h===5)&&(g=s.type,g=!(g!=="form"&&g!=="button")||Ap(s.type,s.memoizedProps)),g=!g),g&&zn&&Va(s),hu(s),h===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(317));e:{for(s=s.nextSibling,h=0;s;){if(s.nodeType===8)if(g=s.data,g==="/$"){if(h===0){zn=Jo(s.nextSibling);break e}h--}else g!=="$"&&g!=="$!"&&g!=="$?"||h++;s=s.nextSibling}zn=null}}else h===27?(h=zn,Wl(s.type)?(s=Pp,Pp=null,zn=s):zn=h):zn=Ji?Jo(s.stateNode.nextSibling):null;return!0}function vn(){zn=Ji=null,Dr=!1}function zs(){var s=Fo;return s!==null&&(eo===null?eo=s:eo.push.apply(eo,s),Fo=null),s}function Bi(s){Fo===null?Fo=[s]:Fo.push(s)}var du=Xe(null),$o=null,go=null;function ga(s,h,g){st(du,h._currentValue),h._currentValue=g}function ya(s){s._currentValue=du.current,ot(du)}function kl(s,h,g){for(;s!==null;){var S=s.alternate;if((s.childLanes&h)!==h?(s.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),s===g)break;s=s.return}}function wc(s,h,g,S){var j=s.child;for(j!==null&&(j.return=s);j!==null;){var N=j.dependencies;if(N!==null){var Y=j.child;N=N.firstContext;e:for(;N!==null;){var ce=N;N=j;for(var Me=0;Me<h.length;Me++)if(ce.context===h[Me]){N.lanes|=g,ce=N.alternate,ce!==null&&(ce.lanes|=g),kl(N.return,g,s),S||(Y=null);break e}N=ce.next}}else if(j.tag===18){if(Y=j.return,Y===null)throw Error(a(341));Y.lanes|=g,N=Y.alternate,N!==null&&(N.lanes|=g),kl(Y,g,s),Y=null}else Y=j.child;if(Y!==null)Y.return=j;else for(Y=j;Y!==null;){if(Y===s){Y=null;break}if(j=Y.sibling,j!==null){j.return=Y.return,Y=j;break}Y=Y.return}j=Y}}function zl(s,h,g,S){s=null;for(var j=h,N=!1;j!==null;){if(!N){if((j.flags&524288)!==0)N=!0;else if((j.flags&262144)!==0)break}if(j.tag===10){var Y=j.alternate;if(Y===null)throw Error(a(387));if(Y=Y.memoizedProps,Y!==null){var ce=j.type;da(j.pendingProps.value,Y.value)||(s!==null?s.push(ce):s=[ce])}}else if(j===mr.current){if(Y=j.alternate,Y===null)throw Error(a(387));Y.memoizedState.memoizedState!==j.memoizedState.memoizedState&&(s!==null?s.push(x):s=[x])}j=j.return}s!==null&&wc(h,s,g,S),h.flags|=262144}function fu(s){for(s=s.firstContext;s!==null;){if(!da(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ls(s){$o=s,go=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function bi(s){return Ds($o,s)}function cs(s,h){return $o===null&&ls(s),Ds(s,h)}function Ds(s,h){var g=h._currentValue;if(h={context:h,memoizedValue:g,next:null},go===null){if(s===null)throw Error(a(308));go=h,s.dependencies={lanes:0,firstContext:h},s.flags|=524288}else go=go.next=h;return g}var Gf=typeof AbortController<"u"?AbortController:function(){var s=[],h=this.signal={aborted:!1,addEventListener:function(g,S){s.push(S)}};this.abort=function(){h.aborted=!0,s.forEach(function(g){return g()})}},Zf=e.unstable_scheduleCallback,Hf=e.unstable_NormalPriority,ni={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xh(){return{controller:new Gf,data:new Map,refCount:0}}function qo(s){s.refCount--,s.refCount===0&&Zf(Hf,function(){s.controller.abort()})}var Uo=null,Fi=0,ja=0,Rs=null;function Ga(s,h){if(Uo===null){var g=Uo=[];Fi=0,ja=og(),Rs={status:"pending",value:void 0,then:function(S){g.push(S)}}}return Fi++,h.then(Za,Za),h}function Za(){if(--Fi===0&&Uo!==null){Rs!==null&&(Rs.status="fulfilled");var s=Uo;Uo=null,ja=0,Rs=null;for(var h=0;h<s.length;h++)(0,s[h])()}}function Sc(s,h){var g=[],S={status:"pending",value:null,reason:null,then:function(j){g.push(j)}};return s.then(function(){S.status="fulfilled",S.value=h;for(var j=0;j<g.length;j++)(0,g[j])(h)},function(j){for(S.status="rejected",S.reason=j,j=0;j<g.length;j++)(0,g[j])(void 0)}),S}var Oa=Pe.S;Pe.S=function(s,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&Ga(s,h),Oa!==null&&Oa(s,h)};var va=Xe(null);function Id(){var s=va.current;return s!==null?s:jn.pooledCache}function Tc(s,h){h===null?st(va,va.current):st(va,h.pool)}function Xf(){var s=Id();return s===null?null:{parent:ni._currentValue,pool:s}}var us=Error(a(460)),kd=Error(a(474)),Ns=Error(a(542)),yo={then:function(){}};function zt(s){return s=s.status,s==="fulfilled"||s==="rejected"}function pu(){}function wh(s,h,g){switch(g=s[g],g===void 0?s.push(h):g!==h&&(h.then(pu,pu),h=g),h.status){case"fulfilled":return h.value;case"rejected":throw s=h.reason,Ls(s),s;default:if(typeof h.status=="string")h.then(pu,pu);else{if(s=jn,s!==null&&100<s.shellSuspendCounter)throw Error(a(482));s=h,s.status="pending",s.then(function(S){if(h.status==="pending"){var j=h;j.status="fulfilled",j.value=S}},function(S){if(h.status==="pending"){var j=h;j.status="rejected",j.reason=S}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw s=h.reason,Ls(s),s}throw hs=h,us}}var hs=null;function Ac(){if(hs===null)throw Error(a(459));var s=hs;return hs=null,s}function Ls(s){if(s===us||s===Ns)throw Error(a(483))}var Ia=!1;function br(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mc(s,h){s=s.updateQueue,h.updateQueue===s&&(h.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ds(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function vo(s,h,g){var S=s.updateQueue;if(S===null)return null;if(S=S.shared,(mn&2)!==0){var j=S.pending;return j===null?h.next=h:(h.next=j.next,j.next=h),S.pending=h,h=lu(s),Cl(s,null,g),h}return El(s,S,h,g),lu(s)}function Dl(s,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194048)!==0)){var S=h.lanes;S&=s.pendingLanes,g|=S,h.lanes=g,qr(s,g)}}function Sh(s,h){var g=s.updateQueue,S=s.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var j=null,N=null;if(g=g.firstBaseUpdate,g!==null){do{var Y={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};N===null?j=N=Y:N=N.next=Y,g=g.next}while(g!==null);N===null?j=N=h:N=N.next=h}else j=N=h;g={baseState:S.baseState,firstBaseUpdate:j,lastBaseUpdate:N,shared:S.shared,callbacks:S.callbacks},s.updateQueue=g;return}s=g.lastBaseUpdate,s===null?g.firstBaseUpdate=h:s.next=h,g.lastBaseUpdate=h}var Th=!1;function Bs(){if(Th){var s=Rs;if(s!==null)throw s}}function Pc(s,h,g,S){Th=!1;var j=s.updateQueue;Ia=!1;var N=j.firstBaseUpdate,Y=j.lastBaseUpdate,ce=j.shared.pending;if(ce!==null){j.shared.pending=null;var Me=ce,qe=Me.next;Me.next=null,Y===null?N=qe:Y.next=qe,Y=Me;var ft=s.alternate;ft!==null&&(ft=ft.updateQueue,ce=ft.lastBaseUpdate,ce!==Y&&(ce===null?ft.firstBaseUpdate=qe:ce.next=qe,ft.lastBaseUpdate=Me))}if(N!==null){var xt=j.baseState;Y=0,ft=qe=Me=null,ce=N;do{var et=ce.lane&-536870913,lt=et!==ce.lane;if(lt?(jr&et)===et:(S&et)===et){et!==0&&et===ja&&(Th=!0),ft!==null&&(ft=ft.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var sr=s,rr=ce;et=h;var Qr=g;switch(rr.tag){case 1:if(sr=rr.payload,typeof sr=="function"){xt=sr.call(Qr,xt,et);break e}xt=sr;break e;case 3:sr.flags=sr.flags&-65537|128;case 0:if(sr=rr.payload,et=typeof sr=="function"?sr.call(Qr,xt,et):sr,et==null)break e;xt=D({},xt,et);break e;case 2:Ia=!0}}et=ce.callback,et!==null&&(s.flags|=64,lt&&(s.flags|=8192),lt=j.callbacks,lt===null?j.callbacks=[et]:lt.push(et))}else lt={lane:et,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},ft===null?(qe=ft=lt,Me=xt):ft=ft.next=lt,Y|=et;if(ce=ce.next,ce===null){if(ce=j.shared.pending,ce===null)break;lt=ce,ce=lt.next,lt.next=null,j.lastBaseUpdate=lt,j.shared.pending=null}}while(!0);ft===null&&(Me=xt),j.baseState=Me,j.firstBaseUpdate=qe,j.lastBaseUpdate=ft,N===null&&(j.shared.lanes=0),Yo|=Y,s.lanes=Y,s.memoizedState=xt}}function zd(s,h){if(typeof s!="function")throw Error(a(191,s));s.call(h)}function Dd(s,h){var g=s.callbacks;if(g!==null)for(s.callbacks=null,s=0;s<g.length;s++)zd(g[s],h)}var Rl=Xe(null),mu=Xe(0);function fs(s,h){s=Vl,st(mu,s),st(Rl,h),Vl=s|h.baseLanes}function nn(){st(mu,Vl),st(Rl,Rl.current)}function Ah(){Vl=mu.current,ot(Rl),ot(mu)}var Ha=0,xr=null,an=null,Pn=null,gu=!1,Fs=!1,$i=!1,Nl=0,Nt=0,Ht=null,Ec=0;function Bn(){throw Error(a(321))}function Cc(s,h){if(h===null)return!1;for(var g=0;g<h.length&&g<s.length;g++)if(!da(s[g],h[g]))return!1;return!0}function Mi(s,h,g,S,j,N){return Ha=N,xr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Pe.H=s===null||s.memoizedState===null?ms:Ka,$i=!1,N=g(S,j),$i=!1,Fs&&(N=Xa(h,g,S,j)),Rd(s),N}function Rd(s){Pe.H=xi;var h=an!==null&&an.next!==null;if(Ha=0,Pn=an=xr=null,gu=!1,Nt=0,Ht=null,h)throw Error(a(300));s===null||Pi||(s=s.dependencies,s!==null&&fu(s)&&(Pi=!0))}function Xa(s,h,g,S){xr=s;var j=0;do{if(Fs&&(Ht=null),Nt=0,Fs=!1,25<=j)throw Error(a(301));if(j+=1,Pn=an=null,s.updateQueue!=null){var N=s.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}Pe.H=Gs,N=h(g,S)}while(Fs);return N}function Ll(){var s=Pe.H,h=s.useState()[0];return h=typeof h.then=="function"?Wa(h):h,s=s.useState()[0],(an!==null?an.memoizedState:null)!==s&&(xr.flags|=1024),h}function Nd(){var s=Nl!==0;return Nl=0,s}function Ld(s,h,g){h.updateQueue=s.updateQueue,h.flags&=-2053,s.lanes&=~g}function Bd(s){if(gu){for(s=s.memoizedState;s!==null;){var h=s.queue;h!==null&&(h.pending=null),s=s.next}gu=!1}Ha=0,Pn=an=xr=null,Fs=!1,Nt=Nl=0,Ht=null}function mi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?xr.memoizedState=Pn=s:Pn=Pn.next=s,Pn}function yr(){if(an===null){var s=xr.alternate;s=s!==null?s.memoizedState:null}else s=an.next;var h=Pn===null?xr.memoizedState:Pn.next;if(h!==null)Pn=h,an=s;else{if(s===null)throw xr.alternate===null?Error(a(467)):Error(a(310));an=s,s={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},Pn===null?xr.memoizedState=Pn=s:Pn=Pn.next=s}return Pn}function En(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wa(s){var h=Nt;return Nt+=1,Ht===null&&(Ht=[]),s=wh(Ht,s,h),h=xr,(Pn===null?h.memoizedState:Pn.next)===null&&(h=h.alternate,Pe.H=h===null||h.memoizedState===null?ms:Ka),s}function ps(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Wa(s);if(s.$$typeof===ne)return bi(s)}throw Error(a(438,String(s)))}function $s(s){var h=null,g=xr.updateQueue;if(g!==null&&(h=g.memoCache),h==null){var S=xr.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(h={data:S.data.map(function(j){return j.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),g===null&&(g=En(),xr.updateQueue=g),g.memoCache=h,g=h.data[h.index],g===void 0)for(g=h.data[h.index]=Array(s),S=0;S<s;S++)g[S]=at;return h.index++,g}function Ya(s,h){return typeof h=="function"?h(s):h}function qs(s){var h=yr();return yu(h,an,s)}function yu(s,h,g){var S=s.queue;if(S===null)throw Error(a(311));S.lastRenderedReducer=g;var j=s.baseQueue,N=S.pending;if(N!==null){if(j!==null){var Y=j.next;j.next=N.next,N.next=Y}h.baseQueue=j=N,S.pending=null}if(N=s.baseState,j===null)s.memoizedState=N;else{h=j.next;var ce=Y=null,Me=null,qe=h,ft=!1;do{var xt=qe.lane&-536870913;if(xt!==qe.lane?(jr&xt)===xt:(Ha&xt)===xt){var et=qe.revertLane;if(et===0)Me!==null&&(Me=Me.next={lane:0,revertLane:0,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),xt===ja&&(ft=!0);else if((Ha&et)===et){qe=qe.next,et===ja&&(ft=!0);continue}else xt={lane:0,revertLane:qe.revertLane,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},Me===null?(ce=Me=xt,Y=N):Me=Me.next=xt,xr.lanes|=et,Yo|=et;xt=qe.action,$i&&g(N,xt),N=qe.hasEagerState?qe.eagerState:g(N,xt)}else et={lane:xt,revertLane:qe.revertLane,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},Me===null?(ce=Me=et,Y=N):Me=Me.next=et,xr.lanes|=xt,Yo|=xt;qe=qe.next}while(qe!==null&&qe!==h);if(Me===null?Y=N:Me.next=ce,!da(N,s.memoizedState)&&(Pi=!0,ft&&(g=Rs,g!==null)))throw g;s.memoizedState=N,s.baseState=Y,s.baseQueue=Me,S.lastRenderedState=N}return j===null&&(S.lanes=0),[s.memoizedState,S.dispatch]}function Vo(s){var h=yr(),g=h.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=s;var S=g.dispatch,j=g.pending,N=h.memoizedState;if(j!==null){g.pending=null;var Y=j=j.next;do N=s(N,Y.action),Y=Y.next;while(Y!==j);da(N,h.memoizedState)||(Pi=!0),h.memoizedState=N,h.baseQueue===null&&(h.baseState=N),g.lastRenderedState=N}return[N,S]}function Us(s,h,g){var S=xr,j=yr(),N=Dr;if(N){if(g===void 0)throw Error(a(407));g=g()}else g=h();var Y=!da((an||j).memoizedState,g);Y&&(j.memoizedState=g,Pi=!0),j=j.queue;var ce=Vs.bind(null,S,j,s);if(fe(2048,8,ce,[s]),j.getSnapshot!==h||Y||Pn!==null&&Pn.memoizedState.tag&1){if(S.flags|=2048,G(9,Q(),vu.bind(null,S,j,g,h),null),jn===null)throw Error(a(349));N||(Ha&124)!==0||Mh(S,h,g)}return g}function Mh(s,h,g){s.flags|=16384,s={getSnapshot:h,value:g},h=xr.updateQueue,h===null?(h=En(),xr.updateQueue=h,h.stores=[s]):(g=h.stores,g===null?h.stores=[s]:g.push(s))}function vu(s,h,g,S){h.value=g,h.getSnapshot=S,Ph(h)&&Eh(s)}function Vs(s,h,g){return g(function(){Ph(h)&&Eh(s)})}function Ph(s){var h=s.getSnapshot;s=s.value;try{var g=h();return!da(s,g)}catch{return!0}}function Eh(s){var h=po(s,2);h!==null&&to(h,s,2)}function jc(s){var h=mi();if(typeof s=="function"){var g=s;if(s=g(),$i){li(!0);try{g()}finally{li(!1)}}}return h.memoizedState=h.baseState=s,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:s},h}function Ch(s,h,g,S){return s.baseState=g,yu(s,an,typeof S=="function"?S:Ya)}function b(s,h,g,S,j){if(ii(s))throw Error(a(485));if(s=h.action,s!==null){var N={payload:j,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){N.listeners.push(Y)}};Pe.T!==null?g(!0):N.isTransition=!1,S(N),g=h.pending,g===null?(N.next=h.pending=N,r(h,N)):(N.next=g.next,h.pending=g.next=N)}}function r(s,h){var g=h.action,S=h.payload,j=s.state;if(h.isTransition){var N=Pe.T,Y={};Pe.T=Y;try{var ce=g(j,S),Me=Pe.S;Me!==null&&Me(Y,ce),u(s,h,ce)}catch(qe){_(s,h,qe)}finally{Pe.T=N}}else try{N=g(j,S),u(s,h,N)}catch(qe){_(s,h,qe)}}function u(s,h,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(S){p(s,h,S)},function(S){return _(s,h,S)}):p(s,h,g)}function p(s,h,g){h.status="fulfilled",h.value=g,w(h),s.state=g,h=s.pending,h!==null&&(g=h.next,g===h?s.pending=null:(g=g.next,h.next=g,r(s,g)))}function _(s,h,g){var S=s.pending;if(s.pending=null,S!==null){S=S.next;do h.status="rejected",h.reason=g,w(h),h=h.next;while(h!==S)}s.action=null}function w(s){s=s.listeners;for(var h=0;h<s.length;h++)(0,s[h])()}function A(s,h){return h}function k(s,h){if(Dr){var g=jn.formState;if(g!==null){e:{var S=xr;if(Dr){if(zn){t:{for(var j=zn,N=Ca;j.nodeType!==8;){if(!N){j=null;break t}if(j=Jo(j.nextSibling),j===null){j=null;break t}}N=j.data,j=N==="F!"||N==="F"?j:null}if(j){zn=Jo(j.nextSibling),S=j.data==="F!";break e}}Va(S)}S=!1}S&&(h=g[0])}}return g=mi(),g.memoizedState=g.baseState=h,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:h},g.queue=S,g=cn.bind(null,xr,S),S.dispatch=g,S=jc(!1),N=fn.bind(null,xr,!1,S.queue),S=mi(),j={state:h,dispatch:null,action:s,pending:null},S.queue=j,g=b.bind(null,xr,j,N,g),j.dispatch=g,S.memoizedState=s,[h,g,!1]}function z(s){var h=yr();return $(h,an,s)}function $(s,h,g){if(h=yu(s,h,A)[0],s=qs(Ya)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var S=Wa(h)}catch(Y){throw Y===us?Ns:Y}else S=h;h=yr();var j=h.queue,N=j.dispatch;return g!==h.memoizedState&&(xr.flags|=2048,G(9,Q(),q.bind(null,j,g),null)),[S,N,s]}function q(s,h){s.action=h}function H(s){var h=yr(),g=an;if(g!==null)return $(h,g,s);yr(),h=h.memoizedState,g=yr();var S=g.queue.dispatch;return g.memoizedState=s,[h,S,!1]}function G(s,h,g,S){return s={tag:s,create:g,deps:S,inst:h,next:null},h=xr.updateQueue,h===null&&(h=En(),xr.updateQueue=h),g=h.lastEffect,g===null?h.lastEffect=s.next=s:(S=g.next,g.next=s,s.next=S,h.lastEffect=s),s}function Q(){return{destroy:void 0,resource:void 0}}function se(){return yr().memoizedState}function pe(s,h,g,S){var j=mi();S=S===void 0?null:S,xr.flags|=s,j.memoizedState=G(1|h,Q(),g,S)}function fe(s,h,g,S){var j=yr();S=S===void 0?null:S;var N=j.memoizedState.inst;an!==null&&S!==null&&Cc(S,an.memoizedState.deps)?j.memoizedState=G(h,N,g,S):(xr.flags|=s,j.memoizedState=G(1|h,N,g,S))}function ge(s,h){pe(8390656,8,s,h)}function ve(s,h){fe(2048,8,s,h)}function Te(s,h){return fe(4,2,s,h)}function xe(s,h){return fe(4,4,s,h)}function Ce(s,h){if(typeof h=="function"){s=s();var g=h(s);return function(){typeof g=="function"?g():h(null)}}if(h!=null)return s=s(),h.current=s,function(){h.current=null}}function Oe(s,h,g){g=g!=null?g.concat([s]):null,fe(4,4,Ce.bind(null,h,s),g)}function we(){}function Re(s,h){var g=yr();h=h===void 0?null:h;var S=g.memoizedState;return h!==null&&Cc(h,S[1])?S[0]:(g.memoizedState=[s,h],s)}function nt(s,h){var g=yr();h=h===void 0?null:h;var S=g.memoizedState;if(h!==null&&Cc(h,S[1]))return S[0];if(S=s(),$i){li(!0);try{s()}finally{li(!1)}}return g.memoizedState=[S,h],S}function We(s,h,g){return g===void 0||(Ha&1073741824)!==0?s.memoizedState=h:(s.memoizedState=g,s=Yy(),xr.lanes|=s,Yo|=s,g)}function Ke(s,h,g,S){return da(g,h)?g:Rl.current!==null?(s=We(s,g,S),da(s,h)||(Pi=!0),s):(Ha&42)===0?(Pi=!0,s.memoizedState=g):(s=Yy(),xr.lanes|=s,Yo|=s,h)}function Qe(s,h,g,S,j){var N=Ve.p;Ve.p=N!==0&&8>N?N:8;var Y=Pe.T,ce={};Pe.T=ce,fn(s,!1,h,g);try{var Me=j(),qe=Pe.S;if(qe!==null&&qe(ce,Me),Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var ft=Sc(Me,S);wr(s,h,ft,Sa(s))}else wr(s,h,S,Sa(s))}catch(xt){wr(s,h,{then:function(){},status:"rejected",reason:xt},Sa())}finally{Ve.p=N,Pe.T=Y}}function Tt(){}function At(s,h,g,S){if(s.tag!==5)throw Error(a(476));var j=yt(s).queue;Qe(s,j,h,Ge,g===null?Tt:function(){return Lt(s),g(S)})}function yt(s){var h=s.memoizedState;if(h!==null)return h;h={memoizedState:Ge,baseState:Ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:Ge},next:null};var g={};return h.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:g},next:null},s.memoizedState=h,s=s.alternate,s!==null&&(s.memoizedState=h),h}function Lt(s){var h=yt(s).next.queue;wr(s,h,{},Sa())}function or(){return bi(x)}function Hr(){return yr().memoizedState}function Xr(){return yr().memoizedState}function ln(s){for(var h=s.return;h!==null;){switch(h.tag){case 24:case 3:var g=Sa();s=ds(g);var S=vo(h,s,g);S!==null&&(to(S,h,g),Dl(S,h,g)),h={cache:xh()},s.payload=h;return}h=h.return}}function Cn(s,h,g){var S=Sa();g={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},ii(s)?Fn(h,g):(g=_h(s,h,g,S),g!==null&&(to(g,s,S),$n(g,h,S)))}function cn(s,h,g){var S=Sa();wr(s,h,g,S)}function wr(s,h,g,S){var j={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(ii(s))Fn(h,j);else{var N=s.alternate;if(s.lanes===0&&(N===null||N.lanes===0)&&(N=h.lastRenderedReducer,N!==null))try{var Y=h.lastRenderedState,ce=N(Y,g);if(j.hasEagerState=!0,j.eagerState=ce,da(ce,Y))return El(s,h,j,0),jn===null&&Is(),!1}catch{}finally{}if(g=_h(s,h,j,S),g!==null)return to(g,s,S),$n(g,h,S),!0}return!1}function fn(s,h,g,S){if(S={lane:2,revertLane:og(),action:S,hasEagerState:!1,eagerState:null,next:null},ii(s)){if(h)throw Error(a(479))}else h=_h(s,g,S,2),h!==null&&to(h,s,2)}function ii(s){var h=s.alternate;return s===xr||h!==null&&h===xr}function Fn(s,h){Fs=gu=!0;var g=s.pending;g===null?h.next=h:(h.next=g.next,g.next=h),s.pending=h}function $n(s,h,g){if((g&4194048)!==0){var S=h.lanes;S&=s.pendingLanes,g|=S,h.lanes=g,qr(s,g)}}var xi={readContext:bi,use:ps,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useLayoutEffect:Bn,useInsertionEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useSyncExternalStore:Bn,useId:Bn,useHostTransitionStatus:Bn,useFormState:Bn,useActionState:Bn,useOptimistic:Bn,useMemoCache:Bn,useCacheRefresh:Bn},ms={readContext:bi,use:ps,useCallback:function(s,h){return mi().memoizedState=[s,h===void 0?null:h],s},useContext:bi,useEffect:ge,useImperativeHandle:function(s,h,g){g=g!=null?g.concat([s]):null,pe(4194308,4,Ce.bind(null,h,s),g)},useLayoutEffect:function(s,h){return pe(4194308,4,s,h)},useInsertionEffect:function(s,h){pe(4,2,s,h)},useMemo:function(s,h){var g=mi();h=h===void 0?null:h;var S=s();if($i){li(!0);try{s()}finally{li(!1)}}return g.memoizedState=[S,h],S},useReducer:function(s,h,g){var S=mi();if(g!==void 0){var j=g(h);if($i){li(!0);try{g(h)}finally{li(!1)}}}else j=h;return S.memoizedState=S.baseState=j,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:j},S.queue=s,s=s.dispatch=Cn.bind(null,xr,s),[S.memoizedState,s]},useRef:function(s){var h=mi();return s={current:s},h.memoizedState=s},useState:function(s){s=jc(s);var h=s.queue,g=cn.bind(null,xr,h);return h.dispatch=g,[s.memoizedState,g]},useDebugValue:we,useDeferredValue:function(s,h){var g=mi();return We(g,s,h)},useTransition:function(){var s=jc(!1);return s=Qe.bind(null,xr,s.queue,!0,!1),mi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,h,g){var S=xr,j=mi();if(Dr){if(g===void 0)throw Error(a(407));g=g()}else{if(g=h(),jn===null)throw Error(a(349));(jr&124)!==0||Mh(S,h,g)}j.memoizedState=g;var N={value:g,getSnapshot:h};return j.queue=N,ge(Vs.bind(null,S,N,s),[s]),S.flags|=2048,G(9,Q(),vu.bind(null,S,N,g,h),null),g},useId:function(){var s=mi(),h=jn.identifierPrefix;if(Dr){var g=Pa,S=Ua;g=(S&~(1<<32-Ie(S)-1)).toString(32)+g,h="«"+h+"R"+g,g=Nl++,0<g&&(h+="H"+g.toString(32)),h+="»"}else g=Ec++,h="«"+h+"r"+g.toString(32)+"»";return s.memoizedState=h},useHostTransitionStatus:or,useFormState:k,useActionState:k,useOptimistic:function(s){var h=mi();h.memoizedState=h.baseState=s;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=g,h=fn.bind(null,xr,!0,g),g.dispatch=h,[s,h]},useMemoCache:$s,useCacheRefresh:function(){return mi().memoizedState=ln.bind(null,xr)}},Ka={readContext:bi,use:ps,useCallback:Re,useContext:bi,useEffect:ve,useImperativeHandle:Oe,useInsertionEffect:Te,useLayoutEffect:xe,useMemo:nt,useReducer:qs,useRef:se,useState:function(){return qs(Ya)},useDebugValue:we,useDeferredValue:function(s,h){var g=yr();return Ke(g,an.memoizedState,s,h)},useTransition:function(){var s=qs(Ya)[0],h=yr().memoizedState;return[typeof s=="boolean"?s:Wa(s),h]},useSyncExternalStore:Us,useId:Hr,useHostTransitionStatus:or,useFormState:z,useActionState:z,useOptimistic:function(s,h){var g=yr();return Ch(g,an,s,h)},useMemoCache:$s,useCacheRefresh:Xr},Gs={readContext:bi,use:ps,useCallback:Re,useContext:bi,useEffect:ve,useImperativeHandle:Oe,useInsertionEffect:Te,useLayoutEffect:xe,useMemo:nt,useReducer:Vo,useRef:se,useState:function(){return Vo(Ya)},useDebugValue:we,useDeferredValue:function(s,h){var g=yr();return an===null?We(g,s,h):Ke(g,an.memoizedState,s,h)},useTransition:function(){var s=Vo(Ya)[0],h=yr().memoizedState;return[typeof s=="boolean"?s:Wa(s),h]},useSyncExternalStore:Us,useId:Hr,useHostTransitionStatus:or,useFormState:H,useActionState:H,useOptimistic:function(s,h){var g=yr();return an!==null?Ch(g,an,s,h):(g.baseState=s,[s,g.queue.dispatch])},useMemoCache:$s,useCacheRefresh:Xr},Qa=null,Zs=0;function gs(s){var h=Zs;return Zs+=1,Qa===null&&(Qa=[]),wh(Qa,s,h)}function ka(s,h){h=h.props.ref,s.ref=h!==void 0?h:null}function qi(s,h){throw h.$$typeof===O?Error(a(525)):(s=Object.prototype.toString.call(h),Error(a(31,s==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":s)))}function _o(s){var h=s._init;return h(s._payload)}function bo(s){function h(Ze,Ne){if(s){var Je=Ze.deletions;Je===null?(Ze.deletions=[Ne],Ze.flags|=16):Je.push(Ne)}}function g(Ze,Ne){if(!s)return null;for(;Ne!==null;)h(Ze,Ne),Ne=Ne.sibling;return null}function S(Ze){for(var Ne=new Map;Ze!==null;)Ze.key!==null?Ne.set(Ze.key,Ze):Ne.set(Ze.index,Ze),Ze=Ze.sibling;return Ne}function j(Ze,Ne){return Ze=mo(Ze,Ne),Ze.index=0,Ze.sibling=null,Ze}function N(Ze,Ne,Je){return Ze.index=Je,s?(Je=Ze.alternate,Je!==null?(Je=Je.index,Je<Ne?(Ze.flags|=67108866,Ne):Je):(Ze.flags|=67108866,Ne)):(Ze.flags|=1048576,Ne)}function Y(Ze){return s&&Ze.alternate===null&&(Ze.flags|=67108866),Ze}function ce(Ze,Ne,Je,bt){return Ne===null||Ne.tag!==6?(Ne=cu(Je,Ze.mode,bt),Ne.return=Ze,Ne):(Ne=j(Ne,Je),Ne.return=Ze,Ne)}function Me(Ze,Ne,Je,bt){var Xt=Je.type;return Xt===X?ft(Ze,Ne,Je.props.children,bt,Je.key):Ne!==null&&(Ne.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===_e&&_o(Xt)===Ne.type)?(Ne=j(Ne,Je.props),ka(Ne,Je),Ne.return=Ze,Ne):(Ne=bh(Je.type,Je.key,Je.props,null,Ze.mode,bt),ka(Ne,Je),Ne.return=Ze,Ne)}function qe(Ze,Ne,Je,bt){return Ne===null||Ne.tag!==4||Ne.stateNode.containerInfo!==Je.containerInfo||Ne.stateNode.implementation!==Je.implementation?(Ne=jd(Je,Ze.mode,bt),Ne.return=Ze,Ne):(Ne=j(Ne,Je.children||[]),Ne.return=Ze,Ne)}function ft(Ze,Ne,Je,bt,Xt){return Ne===null||Ne.tag!==7?(Ne=Lo(Je,Ze.mode,bt,Xt),Ne.return=Ze,Ne):(Ne=j(Ne,Je),Ne.return=Ze,Ne)}function xt(Ze,Ne,Je){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Ne=cu(""+Ne,Ze.mode,Je),Ne.return=Ze,Ne;if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case B:return Je=bh(Ne.type,Ne.key,Ne.props,null,Ze.mode,Je),ka(Je,Ne),Je.return=Ze,Je;case F:return Ne=jd(Ne,Ze.mode,Je),Ne.return=Ze,Ne;case _e:var bt=Ne._init;return Ne=bt(Ne._payload),xt(Ze,Ne,Je)}if(rt(Ne)||Fe(Ne))return Ne=Lo(Ne,Ze.mode,Je,null),Ne.return=Ze,Ne;if(typeof Ne.then=="function")return xt(Ze,gs(Ne),Je);if(Ne.$$typeof===ne)return xt(Ze,cs(Ze,Ne),Je);qi(Ze,Ne)}return null}function et(Ze,Ne,Je,bt){var Xt=Ne!==null?Ne.key:null;if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Xt!==null?null:ce(Ze,Ne,""+Je,bt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case B:return Je.key===Xt?Me(Ze,Ne,Je,bt):null;case F:return Je.key===Xt?qe(Ze,Ne,Je,bt):null;case _e:return Xt=Je._init,Je=Xt(Je._payload),et(Ze,Ne,Je,bt)}if(rt(Je)||Fe(Je))return Xt!==null?null:ft(Ze,Ne,Je,bt,null);if(typeof Je.then=="function")return et(Ze,Ne,gs(Je),bt);if(Je.$$typeof===ne)return et(Ze,Ne,cs(Ze,Je),bt);qi(Ze,Je)}return null}function lt(Ze,Ne,Je,bt,Xt){if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return Ze=Ze.get(Je)||null,ce(Ne,Ze,""+bt,Xt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case B:return Ze=Ze.get(bt.key===null?Je:bt.key)||null,Me(Ne,Ze,bt,Xt);case F:return Ze=Ze.get(bt.key===null?Je:bt.key)||null,qe(Ne,Ze,bt,Xt);case _e:var Ir=bt._init;return bt=Ir(bt._payload),lt(Ze,Ne,Je,bt,Xt)}if(rt(bt)||Fe(bt))return Ze=Ze.get(Je)||null,ft(Ne,Ze,bt,Xt,null);if(typeof bt.then=="function")return lt(Ze,Ne,Je,gs(bt),Xt);if(bt.$$typeof===ne)return lt(Ze,Ne,Je,cs(Ne,bt),Xt);qi(Ne,bt)}return null}function sr(Ze,Ne,Je,bt){for(var Xt=null,Ir=null,Jt=Ne,ur=Ne=0,On=null;Jt!==null&&ur<Je.length;ur++){Jt.index>ur?(On=Jt,Jt=null):On=Jt.sibling;var Jr=et(Ze,Jt,Je[ur],bt);if(Jr===null){Jt===null&&(Jt=On);break}s&&Jt&&Jr.alternate===null&&h(Ze,Jt),Ne=N(Jr,Ne,ur),Ir===null?Xt=Jr:Ir.sibling=Jr,Ir=Jr,Jt=On}if(ur===Je.length)return g(Ze,Jt),Dr&&Ea(Ze,ur),Xt;if(Jt===null){for(;ur<Je.length;ur++)Jt=xt(Ze,Je[ur],bt),Jt!==null&&(Ne=N(Jt,Ne,ur),Ir===null?Xt=Jt:Ir.sibling=Jt,Ir=Jt);return Dr&&Ea(Ze,ur),Xt}for(Jt=S(Jt);ur<Je.length;ur++)On=lt(Jt,Ze,ur,Je[ur],bt),On!==null&&(s&&On.alternate!==null&&Jt.delete(On.key===null?ur:On.key),Ne=N(On,Ne,ur),Ir===null?Xt=On:Ir.sibling=On,Ir=On);return s&&Jt.forEach(function(Kl){return h(Ze,Kl)}),Dr&&Ea(Ze,ur),Xt}function rr(Ze,Ne,Je,bt){if(Je==null)throw Error(a(151));for(var Xt=null,Ir=null,Jt=Ne,ur=Ne=0,On=null,Jr=Je.next();Jt!==null&&!Jr.done;ur++,Jr=Je.next()){Jt.index>ur?(On=Jt,Jt=null):On=Jt.sibling;var Kl=et(Ze,Jt,Jr.value,bt);if(Kl===null){Jt===null&&(Jt=On);break}s&&Jt&&Kl.alternate===null&&h(Ze,Jt),Ne=N(Kl,Ne,ur),Ir===null?Xt=Kl:Ir.sibling=Kl,Ir=Kl,Jt=On}if(Jr.done)return g(Ze,Jt),Dr&&Ea(Ze,ur),Xt;if(Jt===null){for(;!Jr.done;ur++,Jr=Je.next())Jr=xt(Ze,Jr.value,bt),Jr!==null&&(Ne=N(Jr,Ne,ur),Ir===null?Xt=Jr:Ir.sibling=Jr,Ir=Jr);return Dr&&Ea(Ze,ur),Xt}for(Jt=S(Jt);!Jr.done;ur++,Jr=Je.next())Jr=lt(Jt,Ze,ur,Jr.value,bt),Jr!==null&&(s&&Jr.alternate!==null&&Jt.delete(Jr.key===null?ur:Jr.key),Ne=N(Jr,Ne,ur),Ir===null?Xt=Jr:Ir.sibling=Jr,Ir=Jr);return s&&Jt.forEach(function(B0){return h(Ze,B0)}),Dr&&Ea(Ze,ur),Xt}function Qr(Ze,Ne,Je,bt){if(typeof Je=="object"&&Je!==null&&Je.type===X&&Je.key===null&&(Je=Je.props.children),typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case B:e:{for(var Xt=Je.key;Ne!==null;){if(Ne.key===Xt){if(Xt=Je.type,Xt===X){if(Ne.tag===7){g(Ze,Ne.sibling),bt=j(Ne,Je.props.children),bt.return=Ze,Ze=bt;break e}}else if(Ne.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===_e&&_o(Xt)===Ne.type){g(Ze,Ne.sibling),bt=j(Ne,Je.props),ka(bt,Je),bt.return=Ze,Ze=bt;break e}g(Ze,Ne);break}else h(Ze,Ne);Ne=Ne.sibling}Je.type===X?(bt=Lo(Je.props.children,Ze.mode,bt,Je.key),bt.return=Ze,Ze=bt):(bt=bh(Je.type,Je.key,Je.props,null,Ze.mode,bt),ka(bt,Je),bt.return=Ze,Ze=bt)}return Y(Ze);case F:e:{for(Xt=Je.key;Ne!==null;){if(Ne.key===Xt)if(Ne.tag===4&&Ne.stateNode.containerInfo===Je.containerInfo&&Ne.stateNode.implementation===Je.implementation){g(Ze,Ne.sibling),bt=j(Ne,Je.children||[]),bt.return=Ze,Ze=bt;break e}else{g(Ze,Ne);break}else h(Ze,Ne);Ne=Ne.sibling}bt=jd(Je,Ze.mode,bt),bt.return=Ze,Ze=bt}return Y(Ze);case _e:return Xt=Je._init,Je=Xt(Je._payload),Qr(Ze,Ne,Je,bt)}if(rt(Je))return sr(Ze,Ne,Je,bt);if(Fe(Je)){if(Xt=Fe(Je),typeof Xt!="function")throw Error(a(150));return Je=Xt.call(Je),rr(Ze,Ne,Je,bt)}if(typeof Je.then=="function")return Qr(Ze,Ne,gs(Je),bt);if(Je.$$typeof===ne)return Qr(Ze,Ne,cs(Ze,Je),bt);qi(Ze,Je)}return typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint"?(Je=""+Je,Ne!==null&&Ne.tag===6?(g(Ze,Ne.sibling),bt=j(Ne,Je),bt.return=Ze,Ze=bt):(g(Ze,Ne),bt=cu(Je,Ze.mode,bt),bt.return=Ze,Ze=bt),Y(Ze)):g(Ze,Ne)}return function(Ze,Ne,Je,bt){try{Zs=0;var Xt=Qr(Ze,Ne,Je,bt);return Qa=null,Xt}catch(Jt){if(Jt===us||Jt===Ns)throw Jt;var Ir=Li(29,Jt,null,Ze.mode);return Ir.lanes=bt,Ir.return=Ze,Ir}finally{}}}var wi=bo(!0),Dn=bo(!1),on=Xe(null),qn=null;function Sn(s){var h=s.alternate;st(pn,pn.current&1),st(on,s),qn===null&&(h===null||Rl.current!==null||h.memoizedState!==null)&&(qn=s)}function jh(s){if(s.tag===22){if(st(pn,pn.current),st(on,s),qn===null){var h=s.alternate;h!==null&&h.memoizedState!==null&&(qn=s)}}else Ja()}function Ja(){st(pn,pn.current),st(on,on.current)}function ea(s){ot(on),qn===s&&(qn=null),ot(pn)}var pn=Xe(0);function _a(s){for(var h=s;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||el(g)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break;for(;h.sibling===null;){if(h.return===null||h.return===s)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function Go(s,h,g,S){h=s.memoizedState,g=g(S,h),g=g==null?h:D({},h,g),s.memoizedState=g,s.lanes===0&&(s.updateQueue.baseState=g)}var Zo={enqueueSetState:function(s,h,g){s=s._reactInternals;var S=Sa(),j=ds(S);j.payload=h,g!=null&&(j.callback=g),h=vo(s,j,S),h!==null&&(to(h,s,S),Dl(h,s,S))},enqueueReplaceState:function(s,h,g){s=s._reactInternals;var S=Sa(),j=ds(S);j.tag=1,j.payload=h,g!=null&&(j.callback=g),h=vo(s,j,S),h!==null&&(to(h,s,S),Dl(h,s,S))},enqueueForceUpdate:function(s,h){s=s._reactInternals;var g=Sa(),S=ds(g);S.tag=2,h!=null&&(S.callback=h),h=vo(s,S,g),h!==null&&(to(h,s,g),Dl(h,s,g))}};function Oh(s,h,g,S,j,N,Y){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(S,N,Y):h.prototype&&h.prototype.isPureReactComponent?!wl(g,S)||!wl(j,N):!0}function Ih(s,h,g,S){s=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,S),h.state!==s&&Zo.enqueueReplaceState(h,h.state,null)}function ba(s,h){var g=h;if("ref"in h){g={};for(var S in h)S!=="ref"&&(g[S]=h[S])}if(s=s.defaultProps){g===h&&(g=D({},g));for(var j in s)g[j]===void 0&&(g[j]=s[j])}return g}var Oc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function kh(s){Oc(s)}function Ic(s){console.error(s)}function Im(s){Oc(s)}function Hs(s,h){try{var g=s.onUncaughtError;g(h.value,{componentStack:h.stack})}catch(S){setTimeout(function(){throw S})}}function kc(s,h,g){try{var S=s.onCaughtError;S(g.value,{componentStack:g.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(j){setTimeout(function(){throw j})}}function Wf(s,h,g){return g=ds(g),g.tag=3,g.payload={element:null},g.callback=function(){Hs(s,h)},g}function By(s){return s=ds(s),s.tag=3,s}function Yf(s,h,g,S){var j=g.type.getDerivedStateFromError;if(typeof j=="function"){var N=S.value;s.payload=function(){return j(N)},s.callback=function(){kc(h,g,S)}}var Y=g.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(s.callback=function(){kc(h,g,S),typeof j!="function"&&(Lc===null?Lc=new Set([this]):Lc.add(this));var ce=S.stack;this.componentDidCatch(S.value,{componentStack:ce!==null?ce:""})})}function Fy(s,h,g,S,j){if(g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(h=g.alternate,h!==null&&zl(h,g,j,!0),g=on.current,g!==null){switch(g.tag){case 13:return qn===null?up():g.alternate===null&&Gn===0&&(Gn=3),g.flags&=-257,g.flags|=65536,g.lanes=j,S===yo?g.flags|=16384:(h=g.updateQueue,h===null?g.updateQueue=new Set([S]):h.add(S),Qs(s,S,j)),!1;case 22:return g.flags|=65536,S===yo?g.flags|=16384:(h=g.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([S])},g.updateQueue=h):(g=h.retryQueue,g===null?h.retryQueue=new Set([S]):g.add(S)),Qs(s,S,j)),!1}throw Error(a(435,g.tag))}return Qs(s,S,j),up(),!1}if(Dr)return h=on.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=j,S!==_c&&(s=Error(a(422),{cause:S}),Bi(pa(s,g)))):(S!==_c&&(h=Error(a(423),{cause:S}),Bi(pa(h,g))),s=s.current.alternate,s.flags|=65536,j&=-j,s.lanes|=j,S=pa(S,g),j=Wf(s.stateNode,S,j),Sh(s,j),Gn!==4&&(Gn=2)),!1;var N=Error(a(520),{cause:S});if(N=pa(N,g),$h===null?$h=[N]:$h.push(N),Gn!==4&&(Gn=2),h===null)return!0;S=pa(S,g),g=h;do{switch(g.tag){case 3:return g.flags|=65536,s=j&-j,g.lanes|=s,s=Wf(g.stateNode,S,s),Sh(g,s),!1;case 1:if(h=g.type,N=g.stateNode,(g.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Lc===null||!Lc.has(N))))return g.flags|=65536,j&=-j,g.lanes|=j,j=By(j),Yf(j,s,g,S),Sh(g,j),!1}g=g.return}while(g!==null);return!1}var Fd=Error(a(461)),Pi=!1;function ta(s,h,g,S){h.child=s===null?Dn(h,null,g,S):wi(h,s.child,g,S)}function Kf(s,h,g,S,j){g=g.render;var N=h.ref;if("ref"in S){var Y={};for(var ce in S)ce!=="ref"&&(Y[ce]=S[ce])}else Y=S;return ls(h),S=Mi(s,h,g,Y,N,j),ce=Nd(),s!==null&&!Pi?(Ld(s,h,j),Xs(s,h,j)):(Dr&&ce&&Od(h),h.flags|=1,ta(s,h,S,j),h.child)}function $y(s,h,g,S,j){if(s===null){var N=g.type;return typeof N=="function"&&!Cd(N)&&N.defaultProps===void 0&&g.compare===null?(h.tag=15,h.type=N,Qf(s,h,N,S,j)):(s=bh(g.type,null,S,h,h.mode,j),s.ref=h.ref,s.return=h,h.child=s)}if(N=s.child,!tp(s,j)){var Y=N.memoizedProps;if(g=g.compare,g=g!==null?g:wl,g(Y,S)&&s.ref===h.ref)return Xs(s,h,j)}return h.flags|=1,s=mo(N,S),s.ref=h.ref,s.return=h,h.child=s}function Qf(s,h,g,S,j){if(s!==null){var N=s.memoizedProps;if(wl(N,S)&&s.ref===h.ref)if(Pi=!1,h.pendingProps=S=N,tp(s,j))(s.flags&131072)!==0&&(Pi=!0);else return h.lanes=s.lanes,Xs(s,h,j)}return Dm(s,h,g,S,j)}function km(s,h,g){var S=h.pendingProps,j=S.children,N=s!==null?s.memoizedState:null;if(S.mode==="hidden"){if((h.flags&128)!==0){if(S=N!==null?N.baseLanes|g:g,s!==null){for(j=h.child=s.child,N=0;j!==null;)N=N|j.lanes|j.childLanes,j=j.sibling;h.childLanes=N&~S}else h.childLanes=0,h.child=null;return zm(s,h,S,g)}if((g&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},s!==null&&Tc(h,N!==null?N.cachePool:null),N!==null?fs(h,N):nn(),jh(h);else return h.lanes=h.childLanes=536870912,zm(s,h,N!==null?N.baseLanes|g:g,g)}else N!==null?(Tc(h,N.cachePool),fs(h,N),Ja(),h.memoizedState=null):(s!==null&&Tc(h,null),nn(),Ja());return ta(s,h,j,g),h.child}function zm(s,h,g,S){var j=Id();return j=j===null?null:{parent:ni._currentValue,pool:j},h.memoizedState={baseLanes:g,cachePool:j},s!==null&&Tc(h,null),nn(),jh(h),s!==null&&zl(s,h,S,!0),null}function Bl(s,h){var g=h.ref;if(g===null)s!==null&&s.ref!==null&&(h.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(a(284));(s===null||s.ref!==g)&&(h.flags|=4194816)}}function Dm(s,h,g,S,j){return ls(h),g=Mi(s,h,g,S,void 0,j),S=Nd(),s!==null&&!Pi?(Ld(s,h,j),Xs(s,h,j)):(Dr&&S&&Od(h),h.flags|=1,ta(s,h,g,j),h.child)}function _u(s,h,g,S,j,N){return ls(h),h.updateQueue=null,g=Xa(h,S,g,j),Rd(s),S=Nd(),s!==null&&!Pi?(Ld(s,h,N),Xs(s,h,N)):(Dr&&S&&Od(h),h.flags|=1,ta(s,h,g,N),h.child)}function $d(s,h,g,S,j){if(ls(h),h.stateNode===null){var N=No,Y=g.contextType;typeof Y=="object"&&Y!==null&&(N=bi(Y)),N=new g(S,N),h.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Zo,h.stateNode=N,N._reactInternals=h,N=h.stateNode,N.props=S,N.state=h.memoizedState,N.refs={},br(h),Y=g.contextType,N.context=typeof Y=="object"&&Y!==null?bi(Y):No,N.state=h.memoizedState,Y=g.getDerivedStateFromProps,typeof Y=="function"&&(Go(h,g,Y,S),N.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(Y=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),Y!==N.state&&Zo.enqueueReplaceState(N,N.state,null),Pc(h,S,N,j),Bs(),N.state=h.memoizedState),typeof N.componentDidMount=="function"&&(h.flags|=4194308),S=!0}else if(s===null){N=h.stateNode;var ce=h.memoizedProps,Me=ba(g,ce);N.props=Me;var qe=N.context,ft=g.contextType;Y=No,typeof ft=="object"&&ft!==null&&(Y=bi(ft));var xt=g.getDerivedStateFromProps;ft=typeof xt=="function"||typeof N.getSnapshotBeforeUpdate=="function",ce=h.pendingProps!==ce,ft||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(ce||qe!==Y)&&Ih(h,N,S,Y),Ia=!1;var et=h.memoizedState;N.state=et,Pc(h,S,N,j),Bs(),qe=h.memoizedState,ce||et!==qe||Ia?(typeof xt=="function"&&(Go(h,g,xt,S),qe=h.memoizedState),(Me=Ia||Oh(h,g,Me,S,et,qe,Y))?(ft||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(h.flags|=4194308)):(typeof N.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=qe),N.props=S,N.state=qe,N.context=Y,S=Me):(typeof N.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{N=h.stateNode,Mc(s,h),Y=h.memoizedProps,ft=ba(g,Y),N.props=ft,xt=h.pendingProps,et=N.context,qe=g.contextType,Me=No,typeof qe=="object"&&qe!==null&&(Me=bi(qe)),ce=g.getDerivedStateFromProps,(qe=typeof ce=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(Y!==xt||et!==Me)&&Ih(h,N,S,Me),Ia=!1,et=h.memoizedState,N.state=et,Pc(h,S,N,j),Bs();var lt=h.memoizedState;Y!==xt||et!==lt||Ia||s!==null&&s.dependencies!==null&&fu(s.dependencies)?(typeof ce=="function"&&(Go(h,g,ce,S),lt=h.memoizedState),(ft=Ia||Oh(h,g,ft,S,et,lt,Me)||s!==null&&s.dependencies!==null&&fu(s.dependencies))?(qe||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(S,lt,Me),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(S,lt,Me)),typeof N.componentDidUpdate=="function"&&(h.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof N.componentDidUpdate!="function"||Y===s.memoizedProps&&et===s.memoizedState||(h.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||Y===s.memoizedProps&&et===s.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=lt),N.props=S,N.state=lt,N.context=Me,S=ft):(typeof N.componentDidUpdate!="function"||Y===s.memoizedProps&&et===s.memoizedState||(h.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||Y===s.memoizedProps&&et===s.memoizedState||(h.flags|=1024),S=!1)}return N=S,Bl(s,h),S=(h.flags&128)!==0,N||S?(N=h.stateNode,g=S&&typeof g.getDerivedStateFromError!="function"?null:N.render(),h.flags|=1,s!==null&&S?(h.child=wi(h,s.child,null,j),h.child=wi(h,null,g,j)):ta(s,h,g,j),h.memoizedState=N.state,s=h.child):s=Xs(s,h,j),s}function qd(s,h,g,S){return vn(),h.flags|=256,ta(s,h,g,S),h.child}var Rm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nm(s){return{baseLanes:s,cachePool:Xf()}}function Lm(s,h,g){return s=s!==null?s.childLanes&~g:0,h&&(s|=Ko),s}function qy(s,h,g){var S=h.pendingProps,j=!1,N=(h.flags&128)!==0,Y;if((Y=N)||(Y=s!==null&&s.memoizedState===null?!1:(pn.current&2)!==0),Y&&(j=!0,h.flags&=-129),Y=(h.flags&32)!==0,h.flags&=-33,s===null){if(Dr){if(j?Sn(h):Ja(),Dr){var ce=zn,Me;if(Me=ce){e:{for(Me=ce,ce=Ca;Me.nodeType!==8;){if(!ce){ce=null;break e}if(Me=Jo(Me.nextSibling),Me===null){ce=null;break e}}ce=Me}ce!==null?(h.memoizedState={dehydrated:ce,treeContext:Bo!==null?{id:Ua,overflow:Pa}:null,retryLane:536870912,hydrationErrors:null},Me=Li(18,null,null,0),Me.stateNode=ce,Me.return=h,h.child=Me,Ji=h,zn=null,Me=!0):Me=!1}Me||Va(h)}if(ce=h.memoizedState,ce!==null&&(ce=ce.dehydrated,ce!==null))return el(ce)?h.lanes=32:h.lanes=536870912,null;ea(h)}return ce=S.children,S=S.fallback,j?(Ja(),j=h.mode,ce=zh({mode:"hidden",children:ce},j),S=Lo(S,j,g,null),ce.return=h,S.return=h,ce.sibling=S,h.child=ce,j=h.child,j.memoizedState=Nm(g),j.childLanes=Lm(s,Y,g),h.memoizedState=Rm,S):(Sn(h),Jf(h,ce))}if(Me=s.memoizedState,Me!==null&&(ce=Me.dehydrated,ce!==null)){if(N)h.flags&256?(Sn(h),h.flags&=-257,h=ep(s,h,g)):h.memoizedState!==null?(Ja(),h.child=s.child,h.flags|=128,h=null):(Ja(),j=S.fallback,ce=h.mode,S=zh({mode:"visible",children:S.children},ce),j=Lo(j,ce,g,null),j.flags|=2,S.return=h,j.return=h,S.sibling=j,h.child=S,wi(h,s.child,null,g),S=h.child,S.memoizedState=Nm(g),S.childLanes=Lm(s,Y,g),h.memoizedState=Rm,h=j);else if(Sn(h),el(ce)){if(Y=ce.nextSibling&&ce.nextSibling.dataset,Y)var qe=Y.dgst;Y=qe,S=Error(a(419)),S.stack="",S.digest=Y,Bi({value:S,source:null,stack:null}),h=ep(s,h,g)}else if(Pi||zl(s,h,g,!1),Y=(g&s.childLanes)!==0,Pi||Y){if(Y=jn,Y!==null&&(S=g&-g,S=(S&42)!==0?1:Ft(S),S=(S&(Y.suspendedLanes|g))!==0?0:S,S!==0&&S!==Me.retryLane))throw Me.retryLane=S,po(s,S),to(Y,s,S),Fd;ce.data==="$?"||up(),h=ep(s,h,g)}else ce.data==="$?"?(h.flags|=192,h.child=s.child,h=null):(s=Me.treeContext,zn=Jo(ce.nextSibling),Ji=h,Dr=!0,Fo=null,Ca=!1,s!==null&&(Qi[ma++]=Ua,Qi[ma++]=Pa,Qi[ma++]=Bo,Ua=s.id,Pa=s.overflow,Bo=h),h=Jf(h,S.children),h.flags|=4096);return h}return j?(Ja(),j=S.fallback,ce=h.mode,Me=s.child,qe=Me.sibling,S=mo(Me,{mode:"hidden",children:S.children}),S.subtreeFlags=Me.subtreeFlags&65011712,qe!==null?j=mo(qe,j):(j=Lo(j,ce,g,null),j.flags|=2),j.return=h,S.return=h,S.sibling=j,h.child=S,S=j,j=h.child,ce=s.child.memoizedState,ce===null?ce=Nm(g):(Me=ce.cachePool,Me!==null?(qe=ni._currentValue,Me=Me.parent!==qe?{parent:qe,pool:qe}:Me):Me=Xf(),ce={baseLanes:ce.baseLanes|g,cachePool:Me}),j.memoizedState=ce,j.childLanes=Lm(s,Y,g),h.memoizedState=Rm,S):(Sn(h),g=s.child,s=g.sibling,g=mo(g,{mode:"visible",children:S.children}),g.return=h,g.sibling=null,s!==null&&(Y=h.deletions,Y===null?(h.deletions=[s],h.flags|=16):Y.push(s)),h.child=g,h.memoizedState=null,g)}function Jf(s,h){return h=zh({mode:"visible",children:h},s.mode),h.return=s,s.child=h}function zh(s,h){return s=Li(22,s,null,h),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function ep(s,h,g){return wi(h,s.child,null,g),s=Jf(h,h.pendingProps.children),s.flags|=2,h.memoizedState=null,s}function Bm(s,h,g){s.lanes|=h;var S=s.alternate;S!==null&&(S.lanes|=h),kl(s.return,h,g)}function Fm(s,h,g,S,j){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:j}:(N.isBackwards=h,N.rendering=null,N.renderingStartTime=0,N.last=S,N.tail=g,N.tailMode=j)}function Uy(s,h,g){var S=h.pendingProps,j=S.revealOrder,N=S.tail;if(ta(s,h,S.children,g),S=pn.current,(S&2)!==0)S=S&1|2,h.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=h.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Bm(s,g,h);else if(s.tag===19)Bm(s,g,h);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===h)break e;for(;s.sibling===null;){if(s.return===null||s.return===h)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}S&=1}switch(st(pn,S),j){case"forwards":for(g=h.child,j=null;g!==null;)s=g.alternate,s!==null&&_a(s)===null&&(j=g),g=g.sibling;g=j,g===null?(j=h.child,h.child=null):(j=g.sibling,g.sibling=null),Fm(h,!1,j,g,N);break;case"backwards":for(g=null,j=h.child,h.child=null;j!==null;){if(s=j.alternate,s!==null&&_a(s)===null){h.child=j;break}s=j.sibling,j.sibling=g,g=j,j=s}Fm(h,!0,g,null,N);break;case"together":Fm(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Xs(s,h,g){if(s!==null&&(h.dependencies=s.dependencies),Yo|=h.lanes,(g&h.childLanes)===0)if(s!==null){if(zl(s,h,g,!1),(g&h.childLanes)===0)return null}else return null;if(s!==null&&h.child!==s.child)throw Error(a(153));if(h.child!==null){for(s=h.child,g=mo(s,s.pendingProps),h.child=g,g.return=h;s.sibling!==null;)s=s.sibling,g=g.sibling=mo(s,s.pendingProps),g.return=h;g.sibling=null}return h.child}function tp(s,h){return(s.lanes&h)!==0?!0:(s=s.dependencies,!!(s!==null&&fu(s)))}function b0(s,h,g){switch(h.tag){case 3:nr(h,h.stateNode.containerInfo),ga(h,ni,s.memoizedState.cache),vn();break;case 27:case 5:er(h);break;case 4:nr(h,h.stateNode.containerInfo);break;case 10:ga(h,h.type,h.memoizedProps.value);break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(Sn(h),h.flags|=128,null):(g&h.child.childLanes)!==0?qy(s,h,g):(Sn(h),s=Xs(s,h,g),s!==null?s.sibling:null);Sn(h);break;case 19:var j=(s.flags&128)!==0;if(S=(g&h.childLanes)!==0,S||(zl(s,h,g,!1),S=(g&h.childLanes)!==0),j){if(S)return Uy(s,h,g);h.flags|=128}if(j=h.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),st(pn,pn.current),S)break;return null;case 22:case 23:return h.lanes=0,km(s,h,g);case 24:ga(h,ni,s.memoizedState.cache)}return Xs(s,h,g)}function rp(s,h,g){if(s!==null)if(s.memoizedProps!==h.pendingProps)Pi=!0;else{if(!tp(s,g)&&(h.flags&128)===0)return Pi=!1,b0(s,h,g);Pi=(s.flags&131072)!==0}else Pi=!1,Dr&&(h.flags&1048576)!==0&&uu(h,Ol,h.index);switch(h.lanes=0,h.tag){case 16:e:{s=h.pendingProps;var S=h.elementType,j=S._init;if(S=j(S._payload),h.type=S,typeof S=="function")Cd(S)?(s=ba(S,s),h.tag=1,h=$d(null,h,S,s,g)):(h.tag=0,h=Dm(null,h,S,s,g));else{if(S!=null){if(j=S.$$typeof,j===ue){h.tag=11,h=Kf(null,h,S,s,g);break e}else if(j===me){h.tag=14,h=$y(null,h,S,s,g);break e}}throw h=ut(S)||S,Error(a(306,h,""))}}return h;case 0:return Dm(s,h,h.type,h.pendingProps,g);case 1:return S=h.type,j=ba(S,h.pendingProps),$d(s,h,S,j,g);case 3:e:{if(nr(h,h.stateNode.containerInfo),s===null)throw Error(a(387));S=h.pendingProps;var N=h.memoizedState;j=N.element,Mc(s,h),Pc(h,S,null,g);var Y=h.memoizedState;if(S=Y.cache,ga(h,ni,S),S!==N.cache&&wc(h,[ni],g,!0),Bs(),S=Y.element,N.isDehydrated)if(N={element:S,isDehydrated:!1,cache:Y.cache},h.updateQueue.baseState=N,h.memoizedState=N,h.flags&256){h=qd(s,h,S,g);break e}else if(S!==j){j=pa(Error(a(424)),h),Bi(j),h=qd(s,h,S,g);break e}else{switch(s=h.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(zn=Jo(s.firstChild),Ji=h,Dr=!0,Fo=null,Ca=!0,g=Dn(h,null,S,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(vn(),S===j){h=Xs(s,h,g);break e}ta(s,h,S,g)}h=h.child}return h;case 26:return Bl(s,h),s===null?(g=jp(h.type,null,h.pendingProps,null))?h.memoizedState=g:Dr||(g=h.type,s=h.pendingProps,S=Xh(Rt.current).createElement(g),S[Zr]=h,S[Tr]=s,Gi(S,g,s),dn(S),h.stateNode=S):h.memoizedState=jp(h.type,s.memoizedProps,h.pendingProps,s.memoizedState),null;case 27:return er(h),s===null&&Dr&&(S=h.stateNode=bv(h.type,h.pendingProps,Rt.current),Ji=h,Ca=!0,j=zn,Wl(h.type)?(Pp=j,zn=Jo(S.firstChild)):zn=j),ta(s,h,h.pendingProps.children,g),Bl(s,h),s===null&&(h.flags|=4194304),h.child;case 5:return s===null&&Dr&&((j=S=zn)&&(S=z0(S,h.type,h.pendingProps,Ca),S!==null?(h.stateNode=S,Ji=h,zn=Jo(S.firstChild),Ca=!1,j=!0):j=!1),j||Va(h)),er(h),j=h.type,N=h.pendingProps,Y=s!==null?s.memoizedProps:null,S=N.children,Ap(j,N)?S=null:Y!==null&&Ap(j,Y)&&(h.flags|=32),h.memoizedState!==null&&(j=Mi(s,h,Ll,null,null,g),x._currentValue=j),Bl(s,h),ta(s,h,S,g),h.child;case 6:return s===null&&Dr&&((s=g=zn)&&(g=vv(g,h.pendingProps,Ca),g!==null?(h.stateNode=g,Ji=h,zn=null,s=!0):s=!1),s||Va(h)),null;case 13:return qy(s,h,g);case 4:return nr(h,h.stateNode.containerInfo),S=h.pendingProps,s===null?h.child=wi(h,null,S,g):ta(s,h,S,g),h.child;case 11:return Kf(s,h,h.type,h.pendingProps,g);case 7:return ta(s,h,h.pendingProps,g),h.child;case 8:return ta(s,h,h.pendingProps.children,g),h.child;case 12:return ta(s,h,h.pendingProps.children,g),h.child;case 10:return S=h.pendingProps,ga(h,h.type,S.value),ta(s,h,S.children,g),h.child;case 9:return j=h.type._context,S=h.pendingProps.children,ls(h),j=bi(j),S=S(j),h.flags|=1,ta(s,h,S,g),h.child;case 14:return $y(s,h,h.type,h.pendingProps,g);case 15:return Qf(s,h,h.type,h.pendingProps,g);case 19:return Uy(s,h,g);case 31:return S=h.pendingProps,g=h.mode,S={mode:S.mode,children:S.children},s===null?(g=zh(S,g),g.ref=h.ref,h.child=g,g.return=h,h=g):(g=mo(s.child,S),g.ref=h.ref,h.child=g,g.return=h,h=g),h;case 22:return km(s,h,g);case 24:return ls(h),S=bi(ni),s===null?(j=Id(),j===null&&(j=jn,N=xh(),j.pooledCache=N,N.refCount++,N!==null&&(j.pooledCacheLanes|=g),j=N),h.memoizedState={parent:S,cache:j},br(h),ga(h,ni,j)):((s.lanes&g)!==0&&(Mc(s,h),Pc(h,null,null,g),Bs()),j=s.memoizedState,N=h.memoizedState,j.parent!==S?(j={parent:S,cache:S},h.memoizedState=j,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=j),ga(h,ni,S)):(S=N.cache,ga(h,ni,S),S!==j.cache&&wc(h,[ni],g,!0))),ta(s,h,h.pendingProps.children,g),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function Ws(s){s.flags|=4}function np(s,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!kp(h)){if(h=on.current,h!==null&&((jr&4194048)===jr?qn!==null:(jr&62914560)!==jr&&(jr&536870912)===0||h!==qn))throw hs=yo,kd;s.flags|=8192}}function zc(s,h){h!==null&&(s.flags|=4),s.flags&16384&&(h=s.tag!==22?mt():536870912,s.lanes|=h,wu|=h)}function Ei(s,h){if(!Dr)switch(s.tailMode){case"hidden":h=s.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?s.tail=null:g.sibling=null;break;case"collapsed":g=s.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?h||s.tail===null?s.tail=null:s.tail.sibling=null:S.sibling=null}}function Un(s){var h=s.alternate!==null&&s.alternate.child===s.child,g=0,S=0;if(h)for(var j=s.child;j!==null;)g|=j.lanes|j.childLanes,S|=j.subtreeFlags&65011712,S|=j.flags&65011712,j.return=s,j=j.sibling;else for(j=s.child;j!==null;)g|=j.lanes|j.childLanes,S|=j.subtreeFlags,S|=j.flags,j.return=s,j=j.sibling;return s.subtreeFlags|=S,s.childLanes=g,h}function $m(s,h,g){var S=h.pendingProps;switch(Il(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(h),null;case 1:return Un(h),null;case 3:return g=h.stateNode,S=null,s!==null&&(S=s.memoizedState.cache),h.memoizedState.cache!==S&&(h.flags|=2048),ya(ni),Ot(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(xc(h)?Ws(h):s===null||s.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,zs())),Un(h),null;case 26:return g=h.memoizedState,s===null?(Ws(h),g!==null?(Un(h),np(h,g)):(Un(h),h.flags&=-16777217)):g?g!==s.memoizedState?(Ws(h),Un(h),np(h,g)):(Un(h),h.flags&=-16777217):(s.memoizedProps!==S&&Ws(h),Un(h),h.flags&=-16777217),null;case 27:ir(h),g=Rt.current;var j=h.type;if(s!==null&&h.stateNode!=null)s.memoizedProps!==S&&Ws(h);else{if(!S){if(h.stateNode===null)throw Error(a(166));return Un(h),null}s=Pt.current,xc(h)?bc(h):(s=bv(j,S,g),h.stateNode=s,Ws(h))}return Un(h),null;case 5:if(ir(h),g=h.type,s!==null&&h.stateNode!=null)s.memoizedProps!==S&&Ws(h);else{if(!S){if(h.stateNode===null)throw Error(a(166));return Un(h),null}if(s=Pt.current,xc(h))bc(h);else{switch(j=Xh(Rt.current),s){case 1:s=j.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:s=j.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":s=j.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":s=j.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":s=j.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof S.is=="string"?j.createElement("select",{is:S.is}):j.createElement("select"),S.multiple?s.multiple=!0:S.size&&(s.size=S.size);break;default:s=typeof S.is=="string"?j.createElement(g,{is:S.is}):j.createElement(g)}}s[Zr]=h,s[Tr]=S;e:for(j=h.child;j!==null;){if(j.tag===5||j.tag===6)s.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===h)break e;for(;j.sibling===null;){if(j.return===null||j.return===h)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}h.stateNode=s;e:switch(Gi(s,g,S),g){case"button":case"input":case"select":case"textarea":s=!!S.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ws(h)}}return Un(h),h.flags&=-16777217,null;case 6:if(s&&h.stateNode!=null)s.memoizedProps!==S&&Ws(h);else{if(typeof S!="string"&&h.stateNode===null)throw Error(a(166));if(s=Rt.current,xc(h)){if(s=h.stateNode,g=h.memoizedProps,S=null,j=Ji,j!==null)switch(j.tag){case 27:case 5:S=j.memoizedProps}s[Zr]=h,s=!!(s.nodeValue===g||S!==null&&S.suppressHydrationWarning===!0||pv(s.nodeValue,g)),s||Va(h)}else s=Xh(s).createTextNode(S),s[Zr]=h,h.stateNode=s}return Un(h),null;case 13:if(S=h.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(j=xc(h),S!==null&&S.dehydrated!==null){if(s===null){if(!j)throw Error(a(318));if(j=h.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(a(317));j[Zr]=h}else vn(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Un(h),j=!1}else j=zs(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=j),j=!0;if(!j)return h.flags&256?(ea(h),h):(ea(h),null)}if(ea(h),(h.flags&128)!==0)return h.lanes=g,h;if(g=S!==null,s=s!==null&&s.memoizedState!==null,g){S=h.child,j=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(j=S.alternate.memoizedState.cachePool.pool);var N=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(N=S.memoizedState.cachePool.pool),N!==j&&(S.flags|=2048)}return g!==s&&g&&(h.child.flags|=8192),zc(h,h.updateQueue),Un(h),null;case 4:return Ot(),s===null&&xp(h.stateNode.containerInfo),Un(h),null;case 10:return ya(h.type),Un(h),null;case 19:if(ot(pn),j=h.memoizedState,j===null)return Un(h),null;if(S=(h.flags&128)!==0,N=j.rendering,N===null)if(S)Ei(j,!1);else{if(Gn!==0||s!==null&&(s.flags&128)!==0)for(s=h.child;s!==null;){if(N=_a(s),N!==null){for(h.flags|=128,Ei(j,!1),s=N.updateQueue,h.updateQueue=s,zc(h,s),h.subtreeFlags=0,s=g,g=h.child;g!==null;)vc(g,s),g=g.sibling;return st(pn,pn.current&1|2),h.child}s=s.sibling}j.tail!==null&&Kr()>Xd&&(h.flags|=128,S=!0,Ei(j,!1),h.lanes=4194304)}else{if(!S)if(s=_a(N),s!==null){if(h.flags|=128,S=!0,s=s.updateQueue,h.updateQueue=s,zc(h,s),Ei(j,!0),j.tail===null&&j.tailMode==="hidden"&&!N.alternate&&!Dr)return Un(h),null}else 2*Kr()-j.renderingStartTime>Xd&&g!==536870912&&(h.flags|=128,S=!0,Ei(j,!1),h.lanes=4194304);j.isBackwards?(N.sibling=h.child,h.child=N):(s=j.last,s!==null?s.sibling=N:h.child=N,j.last=N)}return j.tail!==null?(h=j.tail,j.rendering=h,j.tail=h.sibling,j.renderingStartTime=Kr(),h.sibling=null,s=pn.current,st(pn,S?s&1|2:s&1),h):(Un(h),null);case 22:case 23:return ea(h),Ah(),S=h.memoizedState!==null,s!==null?s.memoizedState!==null!==S&&(h.flags|=8192):S&&(h.flags|=8192),S?(g&536870912)!==0&&(h.flags&128)===0&&(Un(h),h.subtreeFlags&6&&(h.flags|=8192)):Un(h),g=h.updateQueue,g!==null&&zc(h,g.retryQueue),g=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==g&&(h.flags|=2048),s!==null&&ot(va),null;case 24:return g=null,s!==null&&(g=s.memoizedState.cache),h.memoizedState.cache!==g&&(h.flags|=2048),ya(ni),Un(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function x0(s,h){switch(Il(h),h.tag){case 1:return s=h.flags,s&65536?(h.flags=s&-65537|128,h):null;case 3:return ya(ni),Ot(),s=h.flags,(s&65536)!==0&&(s&128)===0?(h.flags=s&-65537|128,h):null;case 26:case 27:case 5:return ir(h),null;case 13:if(ea(h),s=h.memoizedState,s!==null&&s.dehydrated!==null){if(h.alternate===null)throw Error(a(340));vn()}return s=h.flags,s&65536?(h.flags=s&-65537|128,h):null;case 19:return ot(pn),null;case 4:return Ot(),null;case 10:return ya(h.type),null;case 22:case 23:return ea(h),Ah(),s!==null&&ot(va),s=h.flags,s&65536?(h.flags=s&-65537|128,h):null;case 24:return ya(ni),null;case 25:return null;default:return null}}function qm(s,h){switch(Il(h),h.tag){case 3:ya(ni),Ot();break;case 26:case 27:case 5:ir(h);break;case 4:Ot();break;case 13:ea(h);break;case 19:ot(pn);break;case 10:ya(h.type);break;case 22:case 23:ea(h),Ah(),s!==null&&ot(va);break;case 24:ya(ni)}}function Ud(s,h){try{var g=h.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var j=S.next;g=j;do{if((g.tag&s)===s){S=void 0;var N=g.create,Y=g.inst;S=N(),Y.destroy=S}g=g.next}while(g!==j)}}catch(ce){_n(h,h.return,ce)}}function Dc(s,h,g){try{var S=h.updateQueue,j=S!==null?S.lastEffect:null;if(j!==null){var N=j.next;S=N;do{if((S.tag&s)===s){var Y=S.inst,ce=Y.destroy;if(ce!==void 0){Y.destroy=void 0,j=h;var Me=g,qe=ce;try{qe()}catch(ft){_n(j,Me,ft)}}}S=S.next}while(S!==N)}}catch(ft){_n(h,h.return,ft)}}function Um(s){var h=s.updateQueue;if(h!==null){var g=s.stateNode;try{Dd(h,g)}catch(S){_n(s,s.return,S)}}}function Vy(s,h,g){g.props=ba(s.type,s.memoizedProps),g.state=s.memoizedState;try{g.componentWillUnmount()}catch(S){_n(s,h,S)}}function bu(s,h){try{var g=s.ref;if(g!==null){switch(s.tag){case 26:case 27:case 5:var S=s.stateNode;break;case 30:S=s.stateNode;break;default:S=s.stateNode}typeof g=="function"?s.refCleanup=g(S):g.current=S}}catch(j){_n(s,h,j)}}function ys(s,h){var g=s.ref,S=s.refCleanup;if(g!==null)if(typeof S=="function")try{S()}catch(j){_n(s,h,j)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(j){_n(s,h,j)}else g.current=null}function Vm(s){var h=s.type,g=s.memoizedProps,S=s.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":g.autoFocus&&S.focus();break e;case"img":g.src?S.src=g.src:g.srcSet&&(S.srcset=g.srcSet)}}catch(j){_n(s,s.return,j)}}function Gm(s,h,g){try{var S=s.stateNode;mv(S,s.type,g,h),S[Tr]=h}catch(j){_n(s,s.return,j)}}function Gy(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Wl(s.type)||s.tag===4}function Zm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Gy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Wl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Dh(s,h,g){var S=s.tag;if(S===5||S===6)s=s.stateNode,h?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(s,h):(h=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,h.appendChild(s),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=Hh));else if(S!==4&&(S===27&&Wl(s.type)&&(g=s.stateNode,h=null),s=s.child,s!==null))for(Dh(s,h,g),s=s.sibling;s!==null;)Dh(s,h,g),s=s.sibling}function Rh(s,h,g){var S=s.tag;if(S===5||S===6)s=s.stateNode,h?g.insertBefore(s,h):g.appendChild(s);else if(S!==4&&(S===27&&Wl(s.type)&&(g=s.stateNode),s=s.child,s!==null))for(Rh(s,h,g),s=s.sibling;s!==null;)Rh(s,h,g),s=s.sibling}function Hm(s){var h=s.stateNode,g=s.memoizedProps;try{for(var S=s.type,j=h.attributes;j.length;)h.removeAttributeNode(j[0]);Gi(h,S,g),h[Zr]=s,h[Tr]=g}catch(N){_n(s,s.return,N)}}var za=!1,Rn=!1,Xm=!1,Zy=typeof WeakSet=="function"?WeakSet:Set,Ui=null;function w0(s,h){if(s=s.containerInfo,Sp=K,s=yh(s),nu(s)){if("selectionStart"in s)var g={start:s.selectionStart,end:s.selectionEnd};else e:{g=(g=s.ownerDocument)&&g.defaultView||window;var S=g.getSelection&&g.getSelection();if(S&&S.rangeCount!==0){g=S.anchorNode;var j=S.anchorOffset,N=S.focusNode;S=S.focusOffset;try{g.nodeType,N.nodeType}catch{g=null;break e}var Y=0,ce=-1,Me=-1,qe=0,ft=0,xt=s,et=null;t:for(;;){for(var lt;xt!==g||j!==0&&xt.nodeType!==3||(ce=Y+j),xt!==N||S!==0&&xt.nodeType!==3||(Me=Y+S),xt.nodeType===3&&(Y+=xt.nodeValue.length),(lt=xt.firstChild)!==null;)et=xt,xt=lt;for(;;){if(xt===s)break t;if(et===g&&++qe===j&&(ce=Y),et===N&&++ft===S&&(Me=Y),(lt=xt.nextSibling)!==null)break;xt=et,et=xt.parentNode}xt=lt}g=ce===-1||Me===-1?null:{start:ce,end:Me}}else g=null}g=g||{start:0,end:0}}else g=null;for(Tp={focusedElem:s,selectionRange:g},K=!1,Ui=h;Ui!==null;)if(h=Ui,s=h.child,(h.subtreeFlags&1024)!==0&&s!==null)s.return=h,Ui=s;else for(;Ui!==null;){switch(h=Ui,N=h.alternate,s=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&N!==null){s=void 0,g=h,j=N.memoizedProps,N=N.memoizedState,S=g.stateNode;try{var sr=ba(g.type,j,g.elementType===g.type);s=S.getSnapshotBeforeUpdate(sr,N),S.__reactInternalSnapshotBeforeUpdate=s}catch(rr){_n(g,g.return,rr)}}break;case 3:if((s&1024)!==0){if(s=h.stateNode.containerInfo,g=s.nodeType,g===9)Mp(s);else if(g===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Mp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(a(163))}if(s=h.sibling,s!==null){s.return=h.return,Ui=s;break}Ui=h.return}}function Hy(s,h,g){var S=g.flags;switch(g.tag){case 0:case 11:case 15:$l(s,g),S&4&&Ud(5,g);break;case 1:if($l(s,g),S&4)if(s=g.stateNode,h===null)try{s.componentDidMount()}catch(Y){_n(g,g.return,Y)}else{var j=ba(g.type,h.memoizedProps);h=h.memoizedState;try{s.componentDidUpdate(j,h,s.__reactInternalSnapshotBeforeUpdate)}catch(Y){_n(g,g.return,Y)}}S&64&&Um(g),S&512&&bu(g,g.return);break;case 3:if($l(s,g),S&64&&(s=g.updateQueue,s!==null)){if(h=null,g.child!==null)switch(g.child.tag){case 27:case 5:h=g.child.stateNode;break;case 1:h=g.child.stateNode}try{Dd(s,h)}catch(Y){_n(g,g.return,Y)}}break;case 27:h===null&&S&4&&Hm(g);case 26:case 5:$l(s,g),h===null&&S&4&&Vm(g),S&512&&bu(g,g.return);break;case 12:$l(s,g);break;case 13:$l(s,g),S&4&&Nh(s,g),S&64&&(s=g.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(g=pp.bind(null,g),_v(s,g))));break;case 22:if(S=g.memoizedState!==null||za,!S){h=h!==null&&h.memoizedState!==null||Rn,j=za;var N=Rn;za=S,(Rn=h)&&!N?Xo(s,g,(g.subtreeFlags&8772)!==0):$l(s,g),za=j,Rn=N}break;case 30:break;default:$l(s,g)}}function Xy(s){var h=s.alternate;h!==null&&(s.alternate=null,Xy(h)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(h=s.stateNode,h!==null&&Wn(h)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Vn=null,xa=!1;function Fl(s,h,g){for(g=g.child;g!==null;)Wm(s,h,g),g=g.sibling}function Wm(s,h,g){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(zi,g)}catch{}switch(g.tag){case 26:Rn||ys(g,h),Fl(s,h,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Rn||ys(g,h);var S=Vn,j=xa;Wl(g.type)&&(Vn=g.stateNode,xa=!1),Fl(s,h,g),tf(g.stateNode),Vn=S,xa=j;break;case 5:Rn||ys(g,h);case 6:if(S=Vn,j=xa,Vn=null,Fl(s,h,g),Vn=S,xa=j,Vn!==null)if(xa)try{(Vn.nodeType===9?Vn.body:Vn.nodeName==="HTML"?Vn.ownerDocument.body:Vn).removeChild(g.stateNode)}catch(N){_n(g,h,N)}else try{Vn.removeChild(g.stateNode)}catch(N){_n(g,h,N)}break;case 18:Vn!==null&&(xa?(s=Vn,fg(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,g.stateNode),na(s)):fg(Vn,g.stateNode));break;case 4:S=Vn,j=xa,Vn=g.stateNode.containerInfo,xa=!0,Fl(s,h,g),Vn=S,xa=j;break;case 0:case 11:case 14:case 15:Rn||Dc(2,g,h),Rn||Dc(4,g,h),Fl(s,h,g);break;case 1:Rn||(ys(g,h),S=g.stateNode,typeof S.componentWillUnmount=="function"&&Vy(g,h,S)),Fl(s,h,g);break;case 21:Fl(s,h,g);break;case 22:Rn=(S=Rn)||g.memoizedState!==null,Fl(s,h,g),Rn=S;break;default:Fl(s,h,g)}}function Nh(s,h){if(h.memoizedState===null&&(s=h.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{na(s)}catch(g){_n(h,h.return,g)}}function S0(s){switch(s.tag){case 13:case 19:var h=s.stateNode;return h===null&&(h=s.stateNode=new Zy),h;case 22:return s=s.stateNode,h=s._retryCache,h===null&&(h=s._retryCache=new Zy),h;default:throw Error(a(435,s.tag))}}function Nn(s,h){var g=S0(s);h.forEach(function(S){var j=mp.bind(null,s,S);g.has(S)||(g.add(S),S.then(j,j))})}function Vi(s,h){var g=h.deletions;if(g!==null)for(var S=0;S<g.length;S++){var j=g[S],N=s,Y=h,ce=Y;e:for(;ce!==null;){switch(ce.tag){case 27:if(Wl(ce.type)){Vn=ce.stateNode,xa=!1;break e}break;case 5:Vn=ce.stateNode,xa=!1;break e;case 3:case 4:Vn=ce.stateNode.containerInfo,xa=!0;break e}ce=ce.return}if(Vn===null)throw Error(a(160));Wm(N,Y,j),Vn=null,xa=!1,N=j.alternate,N!==null&&(N.return=null),j.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)Vd(h,s),h=h.sibling}var Ho=null;function Vd(s,h){var g=s.alternate,S=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Vi(h,s),wa(s),S&4&&(Dc(3,s,s.return),Ud(3,s),Dc(5,s,s.return));break;case 1:Vi(h,s),wa(s),S&512&&(Rn||g===null||ys(g,g.return)),S&64&&za&&(s=s.updateQueue,s!==null&&(S=s.callbacks,S!==null&&(g=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=g===null?S:g.concat(S))));break;case 26:var j=Ho;if(Vi(h,s),wa(s),S&512&&(Rn||g===null||ys(g,g.return)),S&4){var N=g!==null?g.memoizedState:null;if(S=s.memoizedState,g===null)if(S===null)if(s.stateNode===null){e:{S=s.type,g=s.memoizedProps,j=j.ownerDocument||j;t:switch(S){case"title":N=j.getElementsByTagName("title")[0],(!N||N[Ai]||N[Zr]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=j.createElement(S),j.head.insertBefore(N,j.querySelector("head > title"))),Gi(N,S,g),N[Zr]=s,dn(N),S=N;break e;case"link":var Y=Ip("link","href",j).get(S+(g.href||""));if(Y){for(var ce=0;ce<Y.length;ce++)if(N=Y[ce],N.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&N.getAttribute("rel")===(g.rel==null?null:g.rel)&&N.getAttribute("title")===(g.title==null?null:g.title)&&N.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){Y.splice(ce,1);break t}}N=j.createElement(S),Gi(N,S,g),j.head.appendChild(N);break;case"meta":if(Y=Ip("meta","content",j).get(S+(g.content||""))){for(ce=0;ce<Y.length;ce++)if(N=Y[ce],N.getAttribute("content")===(g.content==null?null:""+g.content)&&N.getAttribute("name")===(g.name==null?null:g.name)&&N.getAttribute("property")===(g.property==null?null:g.property)&&N.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&N.getAttribute("charset")===(g.charSet==null?null:g.charSet)){Y.splice(ce,1);break t}}N=j.createElement(S),Gi(N,S,g),j.head.appendChild(N);break;default:throw Error(a(468,S))}N[Zr]=s,dn(N),S=N}s.stateNode=S}else of(j,s.type,s.stateNode);else s.stateNode=Op(j,S,s.memoizedProps);else N!==S?(N===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):N.count--,S===null?of(j,s.type,s.stateNode):Op(j,S,s.memoizedProps)):S===null&&s.stateNode!==null&&Gm(s,s.memoizedProps,g.memoizedProps)}break;case 27:Vi(h,s),wa(s),S&512&&(Rn||g===null||ys(g,g.return)),g!==null&&S&4&&Gm(s,s.memoizedProps,g.memoizedProps);break;case 5:if(Vi(h,s),wa(s),S&512&&(Rn||g===null||ys(g,g.return)),s.flags&32){j=s.stateNode;try{jo(j,"")}catch(lt){_n(s,s.return,lt)}}S&4&&s.stateNode!=null&&(j=s.memoizedProps,Gm(s,j,g!==null?g.memoizedProps:j)),S&1024&&(Xm=!0);break;case 6:if(Vi(h,s),wa(s),S&4){if(s.stateNode===null)throw Error(a(162));S=s.memoizedProps,g=s.stateNode;try{g.nodeValue=S}catch(lt){_n(s,s.return,lt)}}break;case 3:if(af=null,j=Ho,Ho=Ou(h.containerInfo),Vi(h,s),Ho=j,wa(s),S&4&&g!==null&&g.memoizedState.isDehydrated)try{na(h.containerInfo)}catch(lt){_n(s,s.return,lt)}Xm&&(Xm=!1,Lh(s));break;case 4:S=Ho,Ho=Ou(s.stateNode.containerInfo),Vi(h,s),wa(s),Ho=S;break;case 12:Vi(h,s),wa(s);break;case 13:Vi(h,s),wa(s),s.child.flags&8192&&s.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(Su=Kr()),S&4&&(S=s.updateQueue,S!==null&&(s.updateQueue=null,Nn(s,S)));break;case 22:j=s.memoizedState!==null;var Me=g!==null&&g.memoizedState!==null,qe=za,ft=Rn;if(za=qe||j,Rn=ft||Me,Vi(h,s),Rn=ft,za=qe,wa(s),S&8192)e:for(h=s.stateNode,h._visibility=j?h._visibility&-2:h._visibility|1,j&&(g===null||Me||za||Rn||Rc(s)),g=null,h=s;;){if(h.tag===5||h.tag===26){if(g===null){Me=g=h;try{if(N=Me.stateNode,j)Y=N.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{ce=Me.stateNode;var xt=Me.memoizedProps.style,et=xt!=null&&xt.hasOwnProperty("display")?xt.display:null;ce.style.display=et==null||typeof et=="boolean"?"":(""+et).trim()}}catch(lt){_n(Me,Me.return,lt)}}}else if(h.tag===6){if(g===null){Me=h;try{Me.stateNode.nodeValue=j?"":Me.memoizedProps}catch(lt){_n(Me,Me.return,lt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===s)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;g===h&&(g=null),h=h.return}g===h&&(g=null),h.sibling.return=h.return,h=h.sibling}S&4&&(S=s.updateQueue,S!==null&&(g=S.retryQueue,g!==null&&(S.retryQueue=null,Nn(s,g))));break;case 19:Vi(h,s),wa(s),S&4&&(S=s.updateQueue,S!==null&&(s.updateQueue=null,Nn(s,S)));break;case 30:break;case 21:break;default:Vi(h,s),wa(s)}}function wa(s){var h=s.flags;if(h&2){try{for(var g,S=s.return;S!==null;){if(Gy(S)){g=S;break}S=S.return}if(g==null)throw Error(a(160));switch(g.tag){case 27:var j=g.stateNode,N=Zm(s);Rh(s,N,j);break;case 5:var Y=g.stateNode;g.flags&32&&(jo(Y,""),g.flags&=-33);var ce=Zm(s);Rh(s,ce,Y);break;case 3:case 4:var Me=g.stateNode.containerInfo,qe=Zm(s);Dh(s,qe,Me);break;default:throw Error(a(161))}}catch(ft){_n(s,s.return,ft)}s.flags&=-3}h&4096&&(s.flags&=-4097)}function Lh(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var h=s;Lh(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),s=s.sibling}}function $l(s,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Hy(s,h.alternate,h),h=h.sibling}function Rc(s){for(s=s.child;s!==null;){var h=s;switch(h.tag){case 0:case 11:case 14:case 15:Dc(4,h,h.return),Rc(h);break;case 1:ys(h,h.return);var g=h.stateNode;typeof g.componentWillUnmount=="function"&&Vy(h,h.return,g),Rc(h);break;case 27:tf(h.stateNode);case 26:case 5:ys(h,h.return),Rc(h);break;case 22:h.memoizedState===null&&Rc(h);break;case 30:Rc(h);break;default:Rc(h)}s=s.sibling}}function Xo(s,h,g){for(g=g&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var S=h.alternate,j=s,N=h,Y=N.flags;switch(N.tag){case 0:case 11:case 15:Xo(j,N,g),Ud(4,N);break;case 1:if(Xo(j,N,g),S=N,j=S.stateNode,typeof j.componentDidMount=="function")try{j.componentDidMount()}catch(qe){_n(S,S.return,qe)}if(S=N,j=S.updateQueue,j!==null){var ce=S.stateNode;try{var Me=j.shared.hiddenCallbacks;if(Me!==null)for(j.shared.hiddenCallbacks=null,j=0;j<Me.length;j++)zd(Me[j],ce)}catch(qe){_n(S,S.return,qe)}}g&&Y&64&&Um(N),bu(N,N.return);break;case 27:Hm(N);case 26:case 5:Xo(j,N,g),g&&S===null&&Y&4&&Vm(N),bu(N,N.return);break;case 12:Xo(j,N,g);break;case 13:Xo(j,N,g),g&&Y&4&&Nh(j,N);break;case 22:N.memoizedState===null&&Xo(j,N,g),bu(N,N.return);break;case 30:break;default:Xo(j,N,g)}h=h.sibling}}function Gd(s,h){var g=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),s=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(s=h.memoizedState.cachePool.pool),s!==g&&(s!=null&&s.refCount++,g!=null&&qo(g))}function Nc(s,h){s=null,h.alternate!==null&&(s=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==s&&(h.refCount++,s!=null&&qo(s))}function xo(s,h,g,S){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)xu(s,h,g,S),h=h.sibling}function xu(s,h,g,S){var j=h.flags;switch(h.tag){case 0:case 11:case 15:xo(s,h,g,S),j&2048&&Ud(9,h);break;case 1:xo(s,h,g,S);break;case 3:xo(s,h,g,S),j&2048&&(s=null,h.alternate!==null&&(s=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==s&&(h.refCount++,s!=null&&qo(s)));break;case 12:if(j&2048){xo(s,h,g,S),s=h.stateNode;try{var N=h.memoizedProps,Y=N.id,ce=N.onPostCommit;typeof ce=="function"&&ce(Y,h.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Me){_n(h,h.return,Me)}}else xo(s,h,g,S);break;case 13:xo(s,h,g,S);break;case 23:break;case 22:N=h.stateNode,Y=h.alternate,h.memoizedState!==null?N._visibility&2?xo(s,h,g,S):Zd(s,h):N._visibility&2?xo(s,h,g,S):(N._visibility|=2,Ys(s,h,g,S,(h.subtreeFlags&10256)!==0)),j&2048&&Gd(Y,h);break;case 24:xo(s,h,g,S),j&2048&&Nc(h.alternate,h);break;default:xo(s,h,g,S)}}function Ys(s,h,g,S,j){for(j=j&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var N=s,Y=h,ce=g,Me=S,qe=Y.flags;switch(Y.tag){case 0:case 11:case 15:Ys(N,Y,ce,Me,j),Ud(8,Y);break;case 23:break;case 22:var ft=Y.stateNode;Y.memoizedState!==null?ft._visibility&2?Ys(N,Y,ce,Me,j):Zd(N,Y):(ft._visibility|=2,Ys(N,Y,ce,Me,j)),j&&qe&2048&&Gd(Y.alternate,Y);break;case 24:Ys(N,Y,ce,Me,j),j&&qe&2048&&Nc(Y.alternate,Y);break;default:Ys(N,Y,ce,Me,j)}h=h.sibling}}function Zd(s,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var g=s,S=h,j=S.flags;switch(S.tag){case 22:Zd(g,S),j&2048&&Gd(S.alternate,S);break;case 24:Zd(g,S),j&2048&&Nc(S.alternate,S);break;default:Zd(g,S)}h=h.sibling}}var Bh=8192;function Wo(s){if(s.subtreeFlags&Bh)for(s=s.child;s!==null;)Wy(s),s=s.sibling}function Wy(s){switch(s.tag){case 26:Wo(s),s.flags&Bh&&s.memoizedState!==null&&L0(Ho,s.memoizedState,s.memoizedProps);break;case 5:Wo(s);break;case 3:case 4:var h=Ho;Ho=Ou(s.stateNode.containerInfo),Wo(s),Ho=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=Bh,Bh=16777216,Wo(s),Bh=h):Wo(s));break;default:Wo(s)}}function Ym(s){var h=s.alternate;if(h!==null&&(s=h.child,s!==null)){h.child=null;do h=s.sibling,s.sibling=null,s=h;while(s!==null)}}function ql(s){var h=s.deletions;if((s.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];Ui=S,Km(S,s)}Ym(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ip(s),s=s.sibling}function ip(s){switch(s.tag){case 0:case 11:case 15:ql(s),s.flags&2048&&Dc(9,s,s.return);break;case 3:ql(s);break;case 12:ql(s);break;case 22:var h=s.stateNode;s.memoizedState!==null&&h._visibility&2&&(s.return===null||s.return.tag!==13)?(h._visibility&=-3,Hd(s)):ql(s);break;default:ql(s)}}function Hd(s){var h=s.deletions;if((s.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];Ui=S,Km(S,s)}Ym(s)}for(s=s.child;s!==null;){switch(h=s,h.tag){case 0:case 11:case 15:Dc(8,h,h.return),Hd(h);break;case 22:g=h.stateNode,g._visibility&2&&(g._visibility&=-3,Hd(h));break;default:Hd(h)}s=s.sibling}}function Km(s,h){for(;Ui!==null;){var g=Ui;switch(g.tag){case 0:case 11:case 15:Dc(8,g,h);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var S=g.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:qo(g.memoizedState.cache)}if(S=g.child,S!==null)S.return=g,Ui=S;else e:for(g=s;Ui!==null;){S=Ui;var j=S.sibling,N=S.return;if(Xy(S),S===g){Ui=null;break e}if(j!==null){j.return=N,Ui=j;break e}Ui=N}}}var T0={getCacheForType:function(s){var h=bi(ni),g=h.data.get(s);return g===void 0&&(g=s(),h.data.set(s,g)),g}},A0=typeof WeakMap=="function"?WeakMap:Map,mn=0,jn=null,Rr=null,jr=0,gn=0,wo=null,Ul=!1,Fh=!1,ap=!1,Vl=0,Gn=0,Yo=0,Gl=0,Qm=0,Ko=0,wu=0,$h=null,eo=null,Jm=!1,Su=0,Xd=1/0,op=null,Lc=null,ra=0,Bc=null,qh=null,Tu=0,Wd=0,sp=null,eg=null,Uh=0,tg=null;function Sa(){if((mn&2)!==0&&jr!==0)return jr&-jr;if(Pe.T!==null){var s=ja;return s!==0?s:og()}return Jn()}function Yy(){Ko===0&&(Ko=(jr&536870912)===0||Dr?St():536870912);var s=on.current;return s!==null&&(s.flags|=32),Ko}function to(s,h,g){(s===jn&&(gn===2||gn===9)||s.cancelPendingCommit!==null)&&(Ks(s,0),Zl(s,jr,Ko,!1)),Zt(s,g),((mn&2)===0||s!==jn)&&(s===jn&&((mn&2)===0&&(Gl|=g),Gn===4&&Zl(s,jr,Ko,!1)),Qo(s))}function Ky(s,h,g){if((mn&6)!==0)throw Error(a(327));var S=!g&&(h&124)===0&&(h&s.expiredLanes)===0||Le(s,h),j=S?Jy(s,h):Yd(s,h,!0),N=S;do{if(j===0){Fh&&!S&&Zl(s,h,0,!1);break}else{if(g=s.current.alternate,N&&!M0(g)){j=Yd(s,h,!1),N=!1;continue}if(j===2){if(N=h,s.errorRecoveryDisabledLanes&N)var Y=0;else Y=s.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){h=Y;e:{var ce=s;j=$h;var Me=ce.current.memoizedState.isDehydrated;if(Me&&(Ks(ce,Y).flags|=256),Y=Yd(ce,Y,!1),Y!==2){if(ap&&!Me){ce.errorRecoveryDisabledLanes|=N,Gl|=N,j=4;break e}N=eo,eo=j,N!==null&&(eo===null?eo=N:eo.push.apply(eo,N))}j=Y}if(N=!1,j!==2)continue}}if(j===1){Ks(s,0),Zl(s,h,0,!0);break}e:{switch(S=s,N=j,N){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:Zl(S,h,Ko,!Ul);break e;case 2:eo=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(j=Su+300-Kr(),10<j)){if(Zl(S,h,Ko,!Ul),He(S,0,!0)!==0)break e;S.timeoutHandle=ro(Qy.bind(null,S,g,eo,op,Jm,h,Ko,Gl,wu,Ul,N,2,-0,0),j);break e}Qy(S,g,eo,op,Jm,h,Ko,Gl,wu,Ul,N,0,-0,0)}}break}while(!0);Qo(s)}function Qy(s,h,g,S,j,N,Y,ce,Me,qe,ft,xt,et,lt){if(s.timeoutHandle=-1,xt=h.subtreeFlags,(xt&8192||(xt&16785408)===16785408)&&(Du={stylesheets:null,count:0,unsuspend:vg},Wy(h),xt=l(),xt!==null)){s.cancelPendingCommit=xt(nv.bind(null,s,h,N,g,S,j,Y,ce,Me,ft,1,et,lt)),Zl(s,N,Y,!qe);return}nv(s,h,N,g,S,j,Y,ce,Me)}function M0(s){for(var h=s;;){var g=h.tag;if((g===0||g===11||g===15)&&h.flags&16384&&(g=h.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var S=0;S<g.length;S++){var j=g[S],N=j.getSnapshot;j=j.value;try{if(!da(N(),j))return!1}catch{return!1}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===s)break;for(;h.sibling===null;){if(h.return===null||h.return===s)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Zl(s,h,g,S){h&=~Qm,h&=~Gl,s.suspendedLanes|=h,s.pingedLanes&=~h,S&&(s.warmLanes|=h),S=s.expirationTimes;for(var j=h;0<j;){var N=31-Ie(j),Y=1<<N;S[N]=-1,j&=~Y}g!==0&&Cr(s,g,h)}function lp(){return(mn&6)===0?(Pu(0),!1):!0}function rg(){if(Rr!==null){if(gn===0)var s=Rr.return;else s=Rr,go=$o=null,Bd(s),Qa=null,Zs=0,s=Rr;for(;s!==null;)qm(s.alternate,s),s=s.return;Rr=null}}function Ks(s,h){var g=s.timeoutHandle;g!==-1&&(s.timeoutHandle=-1,Yh(g)),g=s.cancelPendingCommit,g!==null&&(s.cancelPendingCommit=null,g()),rg(),jn=s,Rr=g=mo(s.current,null),jr=h,gn=0,wo=null,Ul=!1,Fh=Le(s,h),ap=!1,wu=Ko=Qm=Gl=Yo=Gn=0,eo=$h=null,Jm=!1,(h&8)!==0&&(h|=h&32);var S=s.entangledLanes;if(S!==0)for(s=s.entanglements,S&=h;0<S;){var j=31-Ie(S),N=1<<j;h|=s[j],S&=~N}return Vl=h,Is(),g}function gi(s,h){xr=null,Pe.H=xi,h===us||h===Ns?(h=Ac(),gn=3):h===kd?(h=Ac(),gn=4):gn=h===Fd?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,wo=h,Rr===null&&(Gn=1,Hs(s,pa(h,s.current)))}function cp(){var s=Pe.H;return Pe.H=xi,s===null?xi:s}function ng(){var s=Pe.A;return Pe.A=T0,s}function up(){Gn=4,Ul||(jr&4194048)!==jr&&on.current!==null||(Fh=!0),(Yo&134217727)===0&&(Gl&134217727)===0||jn===null||Zl(jn,jr,Ko,!1)}function Yd(s,h,g){var S=mn;mn|=2;var j=cp(),N=ng();(jn!==s||jr!==h)&&(op=null,Ks(s,h)),h=!1;var Y=Gn;e:do try{if(gn!==0&&Rr!==null){var ce=Rr,Me=wo;switch(gn){case 8:rg(),Y=6;break e;case 3:case 2:case 9:case 6:on.current===null&&(h=!0);var qe=gn;if(gn=0,wo=null,Gh(s,ce,Me,qe),g&&Fh){Y=0;break e}break;default:qe=gn,gn=0,wo=null,Gh(s,ce,Me,qe)}}Vh(),Y=Gn;break}catch(ft){gi(s,ft)}while(!0);return h&&s.shellSuspendCounter++,go=$o=null,mn=S,Pe.H=j,Pe.A=N,Rr===null&&(jn=null,jr=0,Is()),Y}function Vh(){for(;Rr!==null;)ev(Rr)}function Jy(s,h){var g=mn;mn|=2;var S=cp(),j=ng();jn!==s||jr!==h?(op=null,Xd=Kr()+500,Ks(s,h)):Fh=Le(s,h);e:do try{if(gn!==0&&Rr!==null){h=Rr;var N=wo;t:switch(gn){case 1:gn=0,wo=null,Gh(s,h,N,1);break;case 2:case 9:if(zt(N)){gn=0,wo=null,tv(h);break}h=function(){gn!==2&&gn!==9||jn!==s||(gn=7),Qo(s)},N.then(h,h);break e;case 3:gn=7;break e;case 4:gn=5;break e;case 7:zt(N)?(gn=0,wo=null,tv(h)):(gn=0,wo=null,Gh(s,h,N,7));break;case 5:var Y=null;switch(Rr.tag){case 26:Y=Rr.memoizedState;case 5:case 27:var ce=Rr;if(!Y||kp(Y)){gn=0,wo=null;var Me=ce.sibling;if(Me!==null)Rr=Me;else{var qe=ce.return;qe!==null?(Rr=qe,hp(qe)):Rr=null}break t}}gn=0,wo=null,Gh(s,h,N,5);break;case 6:gn=0,wo=null,Gh(s,h,N,6);break;case 8:rg(),Gn=6;break e;default:throw Error(a(462))}}P0();break}catch(ft){gi(s,ft)}while(!0);return go=$o=null,Pe.H=S,Pe.A=j,mn=g,Rr!==null?0:(jn=null,jr=0,Is(),Gn)}function P0(){for(;Rr!==null&&!Yr();)ev(Rr)}function ev(s){var h=rp(s.alternate,s,Vl);s.memoizedProps=s.pendingProps,h===null?hp(s):Rr=h}function tv(s){var h=s,g=h.alternate;switch(h.tag){case 15:case 0:h=_u(g,h,h.pendingProps,h.type,void 0,jr);break;case 11:h=_u(g,h,h.pendingProps,h.type.render,h.ref,jr);break;case 5:Bd(h);default:qm(g,h),h=Rr=vc(h,Vl),h=rp(g,h,Vl)}s.memoizedProps=s.pendingProps,h===null?hp(s):Rr=h}function Gh(s,h,g,S){go=$o=null,Bd(h),Qa=null,Zs=0;var j=h.return;try{if(Fy(s,j,h,g,jr)){Gn=1,Hs(s,pa(g,s.current)),Rr=null;return}}catch(N){if(j!==null)throw Rr=j,N;Gn=1,Hs(s,pa(g,s.current)),Rr=null;return}h.flags&32768?(Dr||S===1?s=!0:Fh||(jr&536870912)!==0?s=!1:(Ul=s=!0,(S===2||S===9||S===3||S===6)&&(S=on.current,S!==null&&S.tag===13&&(S.flags|=16384))),rv(h,s)):hp(h)}function hp(s){var h=s;do{if((h.flags&32768)!==0){rv(h,Ul);return}s=h.return;var g=$m(h.alternate,h,Vl);if(g!==null){Rr=g;return}if(h=h.sibling,h!==null){Rr=h;return}Rr=h=s}while(h!==null);Gn===0&&(Gn=5)}function rv(s,h){do{var g=x0(s.alternate,s);if(g!==null){g.flags&=32767,Rr=g;return}if(g=s.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!h&&(s=s.sibling,s!==null)){Rr=s;return}Rr=s=g}while(s!==null);Gn=6,Rr=null}function nv(s,h,g,S,j,N,Y,ce,Me){s.cancelPendingCommit=null;do dp();while(ra!==0);if((mn&6)!==0)throw Error(a(327));if(h!==null){if(h===s.current)throw Error(a(177));if(N=h.lanes|h.childLanes,N|=yc,Ue(s,g,N,Y,ce,Me),s===jn&&(Rr=jn=null,jr=0),qh=h,Bc=s,Tu=g,Wd=N,sp=j,eg=S,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,E0(Ii,function(){return ig(),null})):(s.callbackNode=null,s.callbackPriority=0),S=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||S){S=Pe.T,Pe.T=null,j=Ve.p,Ve.p=2,Y=mn,mn|=4;try{w0(s,h,g)}finally{mn=Y,Ve.p=j,Pe.T=S}}ra=1,iv(),av(),ov()}}function iv(){if(ra===1){ra=0;var s=Bc,h=qh,g=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||g){g=Pe.T,Pe.T=null;var S=Ve.p;Ve.p=2;var j=mn;mn|=4;try{Vd(h,s);var N=Tp,Y=yh(s.containerInfo),ce=N.focusedElem,Me=N.selectionRange;if(Y!==ce&&ce&&ce.ownerDocument&&Ro(ce.ownerDocument.documentElement,ce)){if(Me!==null&&nu(ce)){var qe=Me.start,ft=Me.end;if(ft===void 0&&(ft=qe),"selectionStart"in ce)ce.selectionStart=qe,ce.selectionEnd=Math.min(ft,ce.value.length);else{var xt=ce.ownerDocument||document,et=xt&&xt.defaultView||window;if(et.getSelection){var lt=et.getSelection(),sr=ce.textContent.length,rr=Math.min(Me.start,sr),Qr=Me.end===void 0?rr:Math.min(Me.end,sr);!lt.extend&&rr>Qr&&(Y=Qr,Qr=rr,rr=Y);var Ze=ru(ce,rr),Ne=ru(ce,Qr);if(Ze&&Ne&&(lt.rangeCount!==1||lt.anchorNode!==Ze.node||lt.anchorOffset!==Ze.offset||lt.focusNode!==Ne.node||lt.focusOffset!==Ne.offset)){var Je=xt.createRange();Je.setStart(Ze.node,Ze.offset),lt.removeAllRanges(),rr>Qr?(lt.addRange(Je),lt.extend(Ne.node,Ne.offset)):(Je.setEnd(Ne.node,Ne.offset),lt.addRange(Je))}}}}for(xt=[],lt=ce;lt=lt.parentNode;)lt.nodeType===1&&xt.push({element:lt,left:lt.scrollLeft,top:lt.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<xt.length;ce++){var bt=xt[ce];bt.element.scrollLeft=bt.left,bt.element.scrollTop=bt.top}}K=!!Sp,Tp=Sp=null}finally{mn=j,Ve.p=S,Pe.T=g}}s.current=h,ra=2}}function av(){if(ra===2){ra=0;var s=Bc,h=qh,g=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||g){g=Pe.T,Pe.T=null;var S=Ve.p;Ve.p=2;var j=mn;mn|=4;try{Hy(s,h.alternate,h)}finally{mn=j,Ve.p=S,Pe.T=g}}ra=3}}function ov(){if(ra===4||ra===3){ra=0,tn();var s=Bc,h=qh,g=Tu,S=eg;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?ra=5:(ra=0,qh=Bc=null,sv(s,s.pendingLanes));var j=s.pendingLanes;if(j===0&&(Lc=null),Pr(g),h=h.stateNode,Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(zi,h,void 0,(h.current.flags&128)===128)}catch{}if(S!==null){h=Pe.T,j=Ve.p,Ve.p=2,Pe.T=null;try{for(var N=s.onRecoverableError,Y=0;Y<S.length;Y++){var ce=S[Y];N(ce.value,{componentStack:ce.stack})}}finally{Pe.T=h,Ve.p=j}}(Tu&3)!==0&&dp(),Qo(s),j=s.pendingLanes,(g&4194090)!==0&&(j&42)!==0?s===tg?Uh++:(Uh=0,tg=s):Uh=0,Pu(0)}}function sv(s,h){(s.pooledCacheLanes&=h)===0&&(h=s.pooledCache,h!=null&&(s.pooledCache=null,qo(h)))}function dp(s){return iv(),av(),ov(),ig()}function ig(){if(ra!==5)return!1;var s=Bc,h=Wd;Wd=0;var g=Pr(Tu),S=Pe.T,j=Ve.p;try{Ve.p=32>g?32:g,Pe.T=null,g=sp,sp=null;var N=Bc,Y=Tu;if(ra=0,qh=Bc=null,Tu=0,(mn&6)!==0)throw Error(a(331));var ce=mn;if(mn|=4,ip(N.current),xu(N,N.current,Y,g),mn=ce,Pu(0,!1),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(zi,N)}catch{}return!0}finally{Ve.p=j,Pe.T=S,sv(s,h)}}function fp(s,h,g){h=pa(g,h),h=Wf(s.stateNode,h,2),s=vo(s,h,2),s!==null&&(Zt(s,2),Qo(s))}function _n(s,h,g){if(s.tag===3)fp(s,s,g);else for(;h!==null;){if(h.tag===3){fp(h,s,g);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Lc===null||!Lc.has(S))){s=pa(g,s),g=By(2),S=vo(h,g,2),S!==null&&(Yf(g,S,h,s),Zt(S,2),Qo(S));break}}h=h.return}}function Qs(s,h,g){var S=s.pingCache;if(S===null){S=s.pingCache=new A0;var j=new Set;S.set(h,j)}else j=S.get(h),j===void 0&&(j=new Set,S.set(h,j));j.has(g)||(ap=!0,j.add(g),s=Kd.bind(null,s,h,g),h.then(s,s))}function Kd(s,h,g){var S=s.pingCache;S!==null&&S.delete(h),s.pingedLanes|=s.suspendedLanes&g,s.warmLanes&=~g,jn===s&&(jr&g)===g&&(Gn===4||Gn===3&&(jr&62914560)===jr&&300>Kr()-Su?(mn&2)===0&&Ks(s,0):Qm|=g,wu===jr&&(wu=0)),Qo(s)}function Au(s,h){h===0&&(h=mt()),s=po(s,h),s!==null&&(Zt(s,h),Qo(s))}function pp(s){var h=s.memoizedState,g=0;h!==null&&(g=h.retryLane),Au(s,g)}function mp(s,h){var g=0;switch(s.tag){case 13:var S=s.stateNode,j=s.memoizedState;j!==null&&(g=j.retryLane);break;case 19:S=s.stateNode;break;case 22:S=s.stateNode._retryCache;break;default:throw Error(a(314))}S!==null&&S.delete(h),Au(s,g)}function E0(s,h){return hr(s,h)}var gp=null,Mu=null,yp=!1,vp=!1,_p=!1,Fc=0;function Qo(s){s!==Mu&&s.next===null&&(Mu===null?gp=Mu=s:Mu=Mu.next=s),vp=!0,yp||(yp=!0,j0())}function Pu(s,h){if(!_p&&vp){_p=!0;do for(var g=!1,S=gp;S!==null;){if(s!==0){var j=S.pendingLanes;if(j===0)var N=0;else{var Y=S.suspendedLanes,ce=S.pingedLanes;N=(1<<31-Ie(42|s)+1)-1,N&=j&~(Y&~ce),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(g=!0,uv(S,N))}else N=jr,N=He(S,S===jn?N:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(N&3)===0||Le(S,N)||(g=!0,uv(S,N));S=S.next}while(g);_p=!1}}function C0(){ag()}function ag(){vp=yp=!1;var s=0;Fc!==0&&(gv()&&(s=Fc),Fc=0);for(var h=Kr(),g=null,S=gp;S!==null;){var j=S.next,N=lv(S,h);N===0?(S.next=null,g===null?gp=j:g.next=j,j===null&&(Mu=g)):(g=S,(s!==0||(N&3)!==0)&&(vp=!0)),S=j}Pu(s)}function lv(s,h){for(var g=s.suspendedLanes,S=s.pingedLanes,j=s.expirationTimes,N=s.pendingLanes&-62914561;0<N;){var Y=31-Ie(N),ce=1<<Y,Me=j[Y];Me===-1?((ce&g)===0||(ce&S)!==0)&&(j[Y]=ct(ce,h)):Me<=h&&(s.expiredLanes|=ce),N&=~ce}if(h=jn,g=jr,g=He(s,s===h?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),S=s.callbackNode,g===0||s===h&&(gn===2||gn===9)||s.cancelPendingCommit!==null)return S!==null&&S!==null&&Qt(S),s.callbackNode=null,s.callbackPriority=0;if((g&3)===0||Le(s,g)){if(h=g&-g,h===s.callbackPriority)return h;switch(S!==null&&Qt(S),Pr(g)){case 2:case 8:g=Ba;break;case 32:g=Ii;break;case 268435456:g=Wi;break;default:g=Ii}return S=cv.bind(null,s),g=hr(g,S),s.callbackPriority=h,s.callbackNode=g,h}return S!==null&&S!==null&&Qt(S),s.callbackPriority=2,s.callbackNode=null,2}function cv(s,h){if(ra!==0&&ra!==5)return s.callbackNode=null,s.callbackPriority=0,null;var g=s.callbackNode;if(dp()&&s.callbackNode!==g)return null;var S=jr;return S=He(s,s===jn?S:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),S===0?null:(Ky(s,S,h),lv(s,Kr()),s.callbackNode!=null&&s.callbackNode===g?cv.bind(null,s):null)}function uv(s,h){if(dp())return null;Ky(s,h,!0)}function j0(){ju(function(){(mn&6)!==0?hr(Xn,C0):ag()})}function og(){return Fc===0&&(Fc=St()),Fc}function sg(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Oo(""+s)}function lg(s,h){var g=h.ownerDocument.createElement("input");return g.name=h.name,g.value=h.value,s.id&&g.setAttribute("form",s.id),h.parentNode.insertBefore(g,h),s=new FormData(s),g.parentNode.removeChild(g),s}function Hl(s,h,g,S,j){if(h==="submit"&&g&&g.stateNode===j){var N=sg((j[Tr]||null).action),Y=S.submitter;Y&&(h=(h=Y[Tr]||null)?sg(h.formAction):Y.getAttribute("formAction"),h!==null&&(N=h,Y=null));var ce=new ml("action","action",null,S,j);s.push({event:ce,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Fc!==0){var Me=Y?lg(j,Y):new FormData(j);At(g,{pending:!0,data:Me,method:j.method,action:N},null,Me)}}else typeof N=="function"&&(ce.preventDefault(),Me=Y?lg(j,Y):new FormData(j),At(g,{pending:!0,data:Me,method:j.method,action:N},N,Me))},currentTarget:j}]})}}for(var Js=0;Js<fa.length;Js++){var bp=fa[Js],cg=bp.toLowerCase(),O0=bp[0].toUpperCase()+bp.slice(1);qa(cg,"on"+O0)}qa(Md,"onAnimationEnd"),qa(ou,"onAnimationIteration"),qa(su,"onAnimationStart"),qa("dblclick","onDoubleClick"),qa("focusin","onFocus"),qa("focusout","onBlur"),qa(vh,"onTransitionRun"),qa(Pd,"onTransitionStart"),qa(Ml,"onTransitionCancel"),qa(gc,"onTransitionEnd"),Eo("onMouseEnter",["mouseout","mouseover"]),Eo("onMouseLeave",["mouseout","mouseover"]),Eo("onPointerEnter",["pointerout","pointerover"]),Eo("onPointerLeave",["pointerout","pointerover"]),Fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ug=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($c));function hv(s,h){h=(h&4)!==0;for(var g=0;g<s.length;g++){var S=s[g],j=S.event;S=S.listeners;e:{var N=void 0;if(h)for(var Y=S.length-1;0<=Y;Y--){var ce=S[Y],Me=ce.instance,qe=ce.currentTarget;if(ce=ce.listener,Me!==N&&j.isPropagationStopped())break e;N=ce,j.currentTarget=qe;try{N(j)}catch(ft){Oc(ft)}j.currentTarget=null,N=Me}else for(Y=0;Y<S.length;Y++){if(ce=S[Y],Me=ce.instance,qe=ce.currentTarget,ce=ce.listener,Me!==N&&j.isPropagationStopped())break e;N=ce,j.currentTarget=qe;try{N(j)}catch(ft){Oc(ft)}j.currentTarget=null,N=Me}}}}function Or(s,h){var g=h[Ur];g===void 0&&(g=h[Ur]=new Set);var S=s+"__bubble";g.has(S)||(hg(h,s,2,!1),g.add(S))}function Qd(s,h,g){var S=0;h&&(S|=4),hg(g,s,S,h)}var Xl="_reactListening"+Math.random().toString(36).slice(2);function xp(s){if(!s[Xl]){s[Xl]=!0,so.forEach(function(g){g!=="selectionchange"&&(ug.has(g)||Qd(g,!1,s),Qd(g,!0,s))});var h=s.nodeType===9?s:s.ownerDocument;h===null||h[Xl]||(h[Xl]=!0,Qd("selectionchange",!1,h))}}function hg(s,h,g,S){switch(je(h)){case 2:var j=ee;break;case 8:j=le;break;default:j=he}g=j.bind(null,h,g,s),j=void 0,!Ms||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(j=!0),S?j!==void 0?s.addEventListener(h,g,{capture:!0,passive:j}):s.addEventListener(h,g,!0):j!==void 0?s.addEventListener(h,g,{passive:j}):s.addEventListener(h,g,!1)}function Jd(s,h,g,S,j){var N=S;if((h&1)===0&&(h&2)===0&&S!==null)e:for(;;){if(S===null)return;var Y=S.tag;if(Y===3||Y===4){var ce=S.stateNode.containerInfo;if(ce===j)break;if(Y===4)for(Y=S.return;Y!==null;){var Me=Y.tag;if((Me===3||Me===4)&&Y.stateNode.containerInfo===j)return;Y=Y.return}for(;ce!==null;){if(Y=Ct(ce),Y===null)return;if(Me=Y.tag,Me===5||Me===6||Me===26||Me===27){S=N=Y;continue e}ce=ce.parentNode}}S=S.return}hi(function(){var qe=N,ft=pl(g),xt=[];e:{var et=Pl.get(s);if(et!==void 0){var lt=ml,sr=s;switch(s){case"keypress":if(yn(g)===0)break e;case"keydown":case"keyup":lt=md;break;case"focusin":sr="focus",lt=ri;break;case"focusout":sr="blur",lt=ri;break;case"beforeblur":case"afterblur":lt=ri;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=ah;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=Kc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=Lf;break;case Md:case ou:case su:lt=Qc;break;case gc:lt=Em;break;case"scroll":case"scrollend":lt=pd;break;case"wheel":lt=Cm;break;case"copy":case"cut":case"paste":lt=vi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Do;break;case"toggle":case"beforetoggle":lt=yd}var rr=(h&4)!==0,Qr=!rr&&(s==="scroll"||s==="scrollend"),Ze=rr?et!==null?et+"Capture":null:et;rr=[];for(var Ne=qe,Je;Ne!==null;){var bt=Ne;if(Je=bt.stateNode,bt=bt.tag,bt!==5&&bt!==26&&bt!==27||Je===null||Ze===null||(bt=Yn(Ne,Ze),bt!=null&&rr.push(Zh(Ne,bt,Je))),Qr)break;Ne=Ne.return}0<rr.length&&(et=new lt(et,sr,null,g,ft),xt.push({event:et,listeners:rr}))}}if((h&7)===0){e:{if(et=s==="mouseover"||s==="pointerover",lt=s==="mouseout"||s==="pointerout",et&&g!==vr&&(sr=g.relatedTarget||g.fromElement)&&(Ct(sr)||sr[An]))break e;if((lt||et)&&(et=ft.window===ft?ft:(et=ft.ownerDocument)?et.defaultView||et.parentWindow:window,lt?(sr=g.relatedTarget||g.toElement,lt=qe,sr=sr?Ct(sr):null,sr!==null&&(Qr=y(sr),rr=sr.tag,sr!==Qr||rr!==5&&rr!==27&&rr!==6)&&(sr=null)):(lt=null,sr=qe),lt!==sr)){if(rr=ah,bt="onMouseLeave",Ze="onMouseEnter",Ne="mouse",(s==="pointerout"||s==="pointerover")&&(rr=Do,bt="onPointerLeave",Ze="onPointerEnter",Ne="pointer"),Qr=lt==null?et:dr(lt),Je=sr==null?et:dr(sr),et=new rr(bt,Ne+"leave",lt,g,ft),et.target=Qr,et.relatedTarget=Je,bt=null,Ct(ft)===qe&&(rr=new rr(Ze,Ne+"enter",sr,g,ft),rr.target=Je,rr.relatedTarget=Qr,bt=rr),Qr=bt,lt&&sr)t:{for(rr=lt,Ze=sr,Ne=0,Je=rr;Je;Je=Cu(Je))Ne++;for(Je=0,bt=Ze;bt;bt=Cu(bt))Je++;for(;0<Ne-Je;)rr=Cu(rr),Ne--;for(;0<Je-Ne;)Ze=Cu(Ze),Je--;for(;Ne--;){if(rr===Ze||Ze!==null&&rr===Ze.alternate)break t;rr=Cu(rr),Ze=Cu(Ze)}rr=null}else rr=null;lt!==null&&dv(xt,et,lt,rr,!1),sr!==null&&Qr!==null&&dv(xt,Qr,sr,rr,!0)}}e:{if(et=qe?dr(qe):window,lt=et.nodeName&&et.nodeName.toLowerCase(),lt==="select"||lt==="input"&&et.type==="file")var Xt=pc;else if(fh(et))if(bd)Xt=Sd;else{Xt=Om;var Ir=mh}else lt=et.nodeName,!lt||lt.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?qe&&Ar(qe.elementType)&&(Xt=pc):Xt=qf;if(Xt&&(Xt=Xt(s,qe))){_d(xt,Xt,g,ft);break e}Ir&&Ir(s,et,qe),s==="focusout"&&qe&&et.type==="number"&&qe.memoizedProps.value!=null&&rh(et,"number",et.value)}switch(Ir=qe?dr(qe):window,s){case"focusin":(fh(Ir)||Ir.contentEditable==="true")&&(Sl=Ir,iu=qe,fo=null);break;case"focusout":fo=iu=Sl=null;break;case"mousedown":au=!0;break;case"contextmenu":case"mouseup":case"dragend":au=!1,Vf(xt,g,ft);break;case"selectionchange":if(Fr)break;case"keydown":case"keyup":Vf(xt,g,ft)}var Jt;if(js)e:{switch(s){case"compositionstart":var ur="onCompositionStart";break e;case"compositionend":ur="onCompositionEnd";break e;case"compositionupdate":ur="onCompositionUpdate";break e}ur=void 0}else is?hc(s,g)&&(ur="onCompositionEnd"):s==="keydown"&&g.keyCode===229&&(ur="onCompositionStart");ur&&(vd&&g.locale!=="ko"&&(is||ur!=="onCompositionStart"?ur==="onCompositionEnd"&&is&&(Jt=rn()):(ei=ft,Ni="value"in ei?ei.value:ei.textContent,is=!0)),Ir=Eu(qe,ur),0<Ir.length&&(ur=new Jc(ur,s,null,g,ft),xt.push({event:ur,listeners:Ir}),Jt?ur.data=Jt:(Jt=Bf(g),Jt!==null&&(ur.data=Jt)))),(Jt=ho?jm(s,g):dc(s,g))&&(ur=Eu(qe,"onBeforeInput"),0<ur.length&&(Ir=new Jc("onBeforeInput","beforeinput",null,g,ft),xt.push({event:Ir,listeners:ur}),Ir.data=Jt)),Hl(xt,s,qe,g,ft)}hv(xt,h)})}function Zh(s,h,g){return{instance:s,listener:h,currentTarget:g}}function Eu(s,h){for(var g=h+"Capture",S=[];s!==null;){var j=s,N=j.stateNode;if(j=j.tag,j!==5&&j!==26&&j!==27||N===null||(j=Yn(s,g),j!=null&&S.unshift(Zh(s,j,N)),j=Yn(s,h),j!=null&&S.push(Zh(s,j,N))),s.tag===3)return S;s=s.return}return[]}function Cu(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function dv(s,h,g,S,j){for(var N=h._reactName,Y=[];g!==null&&g!==S;){var ce=g,Me=ce.alternate,qe=ce.stateNode;if(ce=ce.tag,Me!==null&&Me===S)break;ce!==5&&ce!==26&&ce!==27||qe===null||(Me=qe,j?(qe=Yn(g,N),qe!=null&&Y.unshift(Zh(g,qe,Me))):j||(qe=Yn(g,N),qe!=null&&Y.push(Zh(g,qe,Me)))),g=g.return}Y.length!==0&&s.push({event:h,listeners:Y})}var I0=/\r\n?/g,k0=/\u0000|\uFFFD/g;function fv(s){return(typeof s=="string"?s:""+s).replace(I0,`
`).replace(k0,"")}function pv(s,h){return h=fv(h),fv(s)===h}function Hh(){}function Gr(s,h,g,S,j,N){switch(g){case"children":typeof S=="string"?h==="body"||h==="textarea"&&S===""||jo(s,S):(typeof S=="number"||typeof S=="bigint")&&h!=="body"&&jo(s,""+S);break;case"className":Di(s,"class",S);break;case"tabIndex":Di(s,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Di(s,g,S);break;case"style":Ri(s,S,N);break;case"data":if(h!=="object"){Di(s,"data",S);break}case"src":case"href":if(S===""&&(h!=="a"||g!=="href")){s.removeAttribute(g);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){s.removeAttribute(g);break}S=Oo(""+S),s.setAttribute(g,S);break;case"action":case"formAction":if(typeof S=="function"){s.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(g==="formAction"?(h!=="input"&&Gr(s,h,"name",j.name,j,null),Gr(s,h,"formEncType",j.formEncType,j,null),Gr(s,h,"formMethod",j.formMethod,j,null),Gr(s,h,"formTarget",j.formTarget,j,null)):(Gr(s,h,"encType",j.encType,j,null),Gr(s,h,"method",j.method,j,null),Gr(s,h,"target",j.target,j,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){s.removeAttribute(g);break}S=Oo(""+S),s.setAttribute(g,S);break;case"onClick":S!=null&&(s.onclick=Hh);break;case"onScroll":S!=null&&Or("scroll",s);break;case"onScrollEnd":S!=null&&Or("scrollend",s);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(a(61));if(g=S.__html,g!=null){if(j.children!=null)throw Error(a(60));s.innerHTML=g}}break;case"multiple":s.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":s.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){s.removeAttribute("xlink:href");break}g=Oo(""+S),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?s.setAttribute(g,""+S):s.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?s.setAttribute(g,""):s.removeAttribute(g);break;case"capture":case"download":S===!0?s.setAttribute(g,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?s.setAttribute(g,S):s.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?s.setAttribute(g,S):s.removeAttribute(g);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?s.removeAttribute(g):s.setAttribute(g,S);break;case"popover":Or("beforetoggle",s),Or("toggle",s),Mn(s,"popover",S);break;case"xlinkActuate":Vr(s,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":Vr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":Vr(s,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":Vr(s,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":Vr(s,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":Vr(s,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":Vr(s,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":Vr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":Vr(s,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Mn(s,"is",S);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=cc.get(g)||g,Mn(s,g,S))}}function wp(s,h,g,S,j,N){switch(g){case"style":Ri(s,S,N);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(a(61));if(g=S.__html,g!=null){if(j.children!=null)throw Error(a(60));s.innerHTML=g}}break;case"children":typeof S=="string"?jo(s,S):(typeof S=="number"||typeof S=="bigint")&&jo(s,""+S);break;case"onScroll":S!=null&&Or("scroll",s);break;case"onScrollEnd":S!=null&&Or("scrollend",s);break;case"onClick":S!=null&&(s.onclick=Hh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gr.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(j=g.endsWith("Capture"),h=g.slice(2,j?g.length-7:void 0),N=s[Tr]||null,N=N!=null?N[g]:null,typeof N=="function"&&s.removeEventListener(h,N,j),typeof S=="function")){typeof N!="function"&&N!==null&&(g in s?s[g]=null:s.hasAttribute(g)&&s.removeAttribute(g)),s.addEventListener(h,S,j);break e}g in s?s[g]=S:S===!0?s.setAttribute(g,""):Mn(s,g,S)}}}function Gi(s,h,g){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Or("error",s),Or("load",s);var S=!1,j=!1,N;for(N in g)if(g.hasOwnProperty(N)){var Y=g[N];if(Y!=null)switch(N){case"src":S=!0;break;case"srcSet":j=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Gr(s,h,N,Y,g,null)}}j&&Gr(s,h,"srcSet",g.srcSet,g,null),S&&Gr(s,h,"src",g.src,g,null);return;case"input":Or("invalid",s);var ce=N=Y=j=null,Me=null,qe=null;for(S in g)if(g.hasOwnProperty(S)){var ft=g[S];if(ft!=null)switch(S){case"name":j=ft;break;case"type":Y=ft;break;case"checked":Me=ft;break;case"defaultChecked":qe=ft;break;case"value":N=ft;break;case"defaultValue":ce=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(a(137,h));break;default:Gr(s,h,S,ft,g,null)}}th(s,N,ce,Me,qe,Y,j,!1),Ju(s);return;case"select":Or("invalid",s),S=Y=N=null;for(j in g)if(g.hasOwnProperty(j)&&(ce=g[j],ce!=null))switch(j){case"value":N=ce;break;case"defaultValue":Y=ce;break;case"multiple":S=ce;default:Gr(s,h,j,ce,g,null)}h=N,g=Y,s.multiple=!!S,h!=null?$a(s,!!S,h,!1):g!=null&&$a(s,!!S,g,!0);return;case"textarea":Or("invalid",s),N=j=S=null;for(Y in g)if(g.hasOwnProperty(Y)&&(ce=g[Y],ce!=null))switch(Y){case"value":S=ce;break;case"defaultValue":j=ce;break;case"children":N=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(a(91));break;default:Gr(s,h,Y,ce,g,null)}Rf(s,S,j,N),Ju(s);return;case"option":for(Me in g)if(g.hasOwnProperty(Me)&&(S=g[Me],S!=null))switch(Me){case"selected":s.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:Gr(s,h,Me,S,g,null)}return;case"dialog":Or("beforetoggle",s),Or("toggle",s),Or("cancel",s),Or("close",s);break;case"iframe":case"object":Or("load",s);break;case"video":case"audio":for(S=0;S<$c.length;S++)Or($c[S],s);break;case"image":Or("error",s),Or("load",s);break;case"details":Or("toggle",s);break;case"embed":case"source":case"link":Or("error",s),Or("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(qe in g)if(g.hasOwnProperty(qe)&&(S=g[qe],S!=null))switch(qe){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Gr(s,h,qe,S,g,null)}return;default:if(Ar(h)){for(ft in g)g.hasOwnProperty(ft)&&(S=g[ft],S!==void 0&&wp(s,h,ft,S,g,void 0));return}}for(ce in g)g.hasOwnProperty(ce)&&(S=g[ce],S!=null&&Gr(s,h,ce,S,g,null))}function mv(s,h,g,S){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var j=null,N=null,Y=null,ce=null,Me=null,qe=null,ft=null;for(lt in g){var xt=g[lt];if(g.hasOwnProperty(lt)&&xt!=null)switch(lt){case"checked":break;case"value":break;case"defaultValue":Me=xt;default:S.hasOwnProperty(lt)||Gr(s,h,lt,null,S,xt)}}for(var et in S){var lt=S[et];if(xt=g[et],S.hasOwnProperty(et)&&(lt!=null||xt!=null))switch(et){case"type":N=lt;break;case"name":j=lt;break;case"checked":qe=lt;break;case"defaultChecked":ft=lt;break;case"value":Y=lt;break;case"defaultValue":ce=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(a(137,h));break;default:lt!==xt&&Gr(s,h,et,lt,S,xt)}}ns(s,Y,ce,Me,qe,ft,N,j);return;case"select":lt=Y=ce=et=null;for(N in g)if(Me=g[N],g.hasOwnProperty(N)&&Me!=null)switch(N){case"value":break;case"multiple":lt=Me;default:S.hasOwnProperty(N)||Gr(s,h,N,null,S,Me)}for(j in S)if(N=S[j],Me=g[j],S.hasOwnProperty(j)&&(N!=null||Me!=null))switch(j){case"value":et=N;break;case"defaultValue":ce=N;break;case"multiple":Y=N;default:N!==Me&&Gr(s,h,j,N,S,Me)}h=ce,g=Y,S=lt,et!=null?$a(s,!!g,et,!1):!!S!=!!g&&(h!=null?$a(s,!!g,h,!0):$a(s,!!g,g?[]:"",!1));return;case"textarea":lt=et=null;for(ce in g)if(j=g[ce],g.hasOwnProperty(ce)&&j!=null&&!S.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:Gr(s,h,ce,null,S,j)}for(Y in S)if(j=S[Y],N=g[Y],S.hasOwnProperty(Y)&&(j!=null||N!=null))switch(Y){case"value":et=j;break;case"defaultValue":lt=j;break;case"children":break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(a(91));break;default:j!==N&&Gr(s,h,Y,j,S,N)}nh(s,et,lt);return;case"option":for(var sr in g)if(et=g[sr],g.hasOwnProperty(sr)&&et!=null&&!S.hasOwnProperty(sr))switch(sr){case"selected":s.selected=!1;break;default:Gr(s,h,sr,null,S,et)}for(Me in S)if(et=S[Me],lt=g[Me],S.hasOwnProperty(Me)&&et!==lt&&(et!=null||lt!=null))switch(Me){case"selected":s.selected=et&&typeof et!="function"&&typeof et!="symbol";break;default:Gr(s,h,Me,et,S,lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rr in g)et=g[rr],g.hasOwnProperty(rr)&&et!=null&&!S.hasOwnProperty(rr)&&Gr(s,h,rr,null,S,et);for(qe in S)if(et=S[qe],lt=g[qe],S.hasOwnProperty(qe)&&et!==lt&&(et!=null||lt!=null))switch(qe){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(a(137,h));break;default:Gr(s,h,qe,et,S,lt)}return;default:if(Ar(h)){for(var Qr in g)et=g[Qr],g.hasOwnProperty(Qr)&&et!==void 0&&!S.hasOwnProperty(Qr)&&wp(s,h,Qr,void 0,S,et);for(ft in S)et=S[ft],lt=g[ft],!S.hasOwnProperty(ft)||et===lt||et===void 0&&lt===void 0||wp(s,h,ft,et,S,lt);return}}for(var Ze in g)et=g[Ze],g.hasOwnProperty(Ze)&&et!=null&&!S.hasOwnProperty(Ze)&&Gr(s,h,Ze,null,S,et);for(xt in S)et=S[xt],lt=g[xt],!S.hasOwnProperty(xt)||et===lt||et==null&&lt==null||Gr(s,h,xt,et,S,lt)}var Sp=null,Tp=null;function Xh(s){return s.nodeType===9?s:s.ownerDocument}function dg(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wh(s,h){if(s===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&h==="foreignObject"?0:s}function Ap(s,h){return s==="textarea"||s==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var ef=null;function gv(){var s=window.event;return s&&s.type==="popstate"?s===ef?!1:(ef=s,!0):(ef=null,!1)}var ro=typeof setTimeout=="function"?setTimeout:void 0,Yh=typeof clearTimeout=="function"?clearTimeout:void 0,Kh=typeof Promise=="function"?Promise:void 0,ju=typeof queueMicrotask=="function"?queueMicrotask:typeof Kh<"u"?function(s){return Kh.resolve(null).then(s).catch(yv)}:ro;function yv(s){setTimeout(function(){throw s})}function Wl(s){return s==="head"}function fg(s,h){var g=h,S=0,j=0;do{var N=g.nextSibling;if(s.removeChild(g),N&&N.nodeType===8)if(g=N.data,g==="/$"){if(0<S&&8>S){g=S;var Y=s.ownerDocument;if(g&1&&tf(Y.documentElement),g&2&&tf(Y.body),g&4)for(g=Y.head,tf(g),Y=g.firstChild;Y;){var ce=Y.nextSibling,Me=Y.nodeName;Y[Ai]||Me==="SCRIPT"||Me==="STYLE"||Me==="LINK"&&Y.rel.toLowerCase()==="stylesheet"||g.removeChild(Y),Y=ce}}if(j===0){s.removeChild(N),na(h);return}j--}else g==="$"||g==="$?"||g==="$!"?j++:S=g.charCodeAt(0)-48;else S=0;g=N}while(g);na(h)}function Mp(s){var h=s.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var g=h;switch(h=h.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":Mp(g),Wn(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}s.removeChild(g)}}function z0(s,h,g,S){for(;s.nodeType===1;){var j=g;if(s.nodeName.toLowerCase()!==h.toLowerCase()){if(!S&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(S){if(!s[Ai])switch(h){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(N=s.getAttribute("rel"),N==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(N!==j.rel||s.getAttribute("href")!==(j.href==null||j.href===""?null:j.href)||s.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin)||s.getAttribute("title")!==(j.title==null?null:j.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(N=s.getAttribute("src"),(N!==(j.src==null?null:j.src)||s.getAttribute("type")!==(j.type==null?null:j.type)||s.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin))&&N&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(h==="input"&&s.type==="hidden"){var N=j.name==null?null:""+j.name;if(j.type==="hidden"&&s.getAttribute("name")===N)return s}else return s;if(s=Jo(s.nextSibling),s===null)break}return null}function vv(s,h,g){if(h==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!g||(s=Jo(s.nextSibling),s===null))return null;return s}function el(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function _v(s,h){var g=s.ownerDocument;if(s.data!=="$?"||g.readyState==="complete")h();else{var S=function(){h(),g.removeEventListener("DOMContentLoaded",S)};g.addEventListener("DOMContentLoaded",S),s._reactRetry=S}}function Jo(s){for(;s!=null;s=s.nextSibling){var h=s.nodeType;if(h===1||h===3)break;if(h===8){if(h=s.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return s}var Pp=null;function pg(s){s=s.previousSibling;for(var h=0;s;){if(s.nodeType===8){var g=s.data;if(g==="$"||g==="$!"||g==="$?"){if(h===0)return s;h--}else g==="/$"&&h++}s=s.previousSibling}return null}function bv(s,h,g){switch(h=Xh(g),s){case"html":if(s=h.documentElement,!s)throw Error(a(452));return s;case"head":if(s=h.head,!s)throw Error(a(453));return s;case"body":if(s=h.body,!s)throw Error(a(454));return s;default:throw Error(a(451))}}function tf(s){for(var h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Wn(s)}var So=new Map,mg=new Set;function Ou(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var tl=Ve.d;Ve.d={f:Ep,r:Cp,D:D0,C:R0,L:Qh,m:Zi,X:wv,S:gg,M:Sv};function Ep(){var s=tl.f(),h=lp();return s||h}function Cp(s){var h=fr(s);h!==null&&h.tag===5&&h.type==="form"?Lt(h):tl.r(s)}var Yl=typeof document>"u"?null:document;function xv(s,h,g){var S=Yl;if(S&&typeof h=="string"&&h){var j=ua(h);j='link[rel="'+s+'"][href="'+j+'"]',typeof g=="string"&&(j+='[crossorigin="'+g+'"]'),mg.has(j)||(mg.add(j),s={rel:s,crossOrigin:g,href:h},S.querySelector(j)===null&&(h=S.createElement("link"),Gi(h,"link",s),dn(h),S.head.appendChild(h)))}}function D0(s){tl.D(s),xv("dns-prefetch",s,null)}function R0(s,h){tl.C(s,h),xv("preconnect",s,h)}function Qh(s,h,g){tl.L(s,h,g);var S=Yl;if(S&&s&&h){var j='link[rel="preload"][as="'+ua(h)+'"]';h==="image"&&g&&g.imageSrcSet?(j+='[imagesrcset="'+ua(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(j+='[imagesizes="'+ua(g.imageSizes)+'"]')):j+='[href="'+ua(s)+'"]';var N=j;switch(h){case"style":N=Jh(s);break;case"script":N=Iu(s)}So.has(N)||(s=D({rel:"preload",href:h==="image"&&g&&g.imageSrcSet?void 0:s,as:h},g),So.set(N,s),S.querySelector(j)!==null||h==="style"&&S.querySelector(ed(N))||h==="script"&&S.querySelector(ku(N))||(h=S.createElement("link"),Gi(h,"link",s),dn(h),S.head.appendChild(h)))}}function Zi(s,h){tl.m(s,h);var g=Yl;if(g&&s){var S=h&&typeof h.as=="string"?h.as:"script",j='link[rel="modulepreload"][as="'+ua(S)+'"][href="'+ua(s)+'"]',N=j;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=Iu(s)}if(!So.has(N)&&(s=D({rel:"modulepreload",href:s},h),So.set(N,s),g.querySelector(j)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(ku(N)))return}S=g.createElement("link"),Gi(S,"link",s),dn(S),g.head.appendChild(S)}}}function gg(s,h,g){tl.S(s,h,g);var S=Yl;if(S&&s){var j=yi(S).hoistableStyles,N=Jh(s);h=h||"default";var Y=j.get(N);if(!Y){var ce={loading:0,preload:null};if(Y=S.querySelector(ed(N)))ce.loading=5;else{s=D({rel:"stylesheet",href:s,"data-precedence":h},g),(g=So.get(N))&&zu(s,g);var Me=Y=S.createElement("link");dn(Me),Gi(Me,"link",s),Me._p=new Promise(function(qe,ft){Me.onload=qe,Me.onerror=ft}),Me.addEventListener("load",function(){ce.loading|=1}),Me.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,rf(Y,h,S)}Y={type:"stylesheet",instance:Y,count:1,state:ce},j.set(N,Y)}}}function wv(s,h){tl.X(s,h);var g=Yl;if(g&&s){var S=yi(g).hoistableScripts,j=Iu(s),N=S.get(j);N||(N=g.querySelector(ku(j)),N||(s=D({src:s,async:!0},h),(h=So.get(j))&&nf(s,h),N=g.createElement("script"),dn(N),Gi(N,"link",s),g.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},S.set(j,N))}}function Sv(s,h){tl.M(s,h);var g=Yl;if(g&&s){var S=yi(g).hoistableScripts,j=Iu(s),N=S.get(j);N||(N=g.querySelector(ku(j)),N||(s=D({src:s,async:!0,type:"module"},h),(h=So.get(j))&&nf(s,h),N=g.createElement("script"),dn(N),Gi(N,"link",s),g.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},S.set(j,N))}}function jp(s,h,g,S){var j=(j=Rt.current)?Ou(j):null;if(!j)throw Error(a(446));switch(s){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(h=Jh(g.href),g=yi(j).hoistableStyles,S=g.get(h),S||(S={type:"style",instance:null,count:0,state:null},g.set(h,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){s=Jh(g.href);var N=yi(j).hoistableStyles,Y=N.get(s);if(Y||(j=j.ownerDocument||j,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(s,Y),(N=j.querySelector(ed(s)))&&!N._p&&(Y.instance=N,Y.state.loading=5),So.has(s)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},So.set(s,g),N||N0(j,s,g,Y.state))),h&&S===null)throw Error(a(528,""));return Y}if(h&&S!==null)throw Error(a(529,""));return null;case"script":return h=g.async,g=g.src,typeof g=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Iu(g),g=yi(j).hoistableScripts,S=g.get(h),S||(S={type:"script",instance:null,count:0,state:null},g.set(h,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,s))}}function Jh(s){return'href="'+ua(s)+'"'}function ed(s){return'link[rel="stylesheet"]['+s+"]"}function yg(s){return D({},s,{"data-precedence":s.precedence,precedence:null})}function N0(s,h,g,S){s.querySelector('link[rel="preload"][as="style"]['+h+"]")?S.loading=1:(h=s.createElement("link"),S.preload=h,h.addEventListener("load",function(){return S.loading|=1}),h.addEventListener("error",function(){return S.loading|=2}),Gi(h,"link",g),dn(h),s.head.appendChild(h))}function Iu(s){return'[src="'+ua(s)+'"]'}function ku(s){return"script[async]"+s}function Op(s,h,g){if(h.count++,h.instance===null)switch(h.type){case"style":var S=s.querySelector('style[data-href~="'+ua(g.href)+'"]');if(S)return h.instance=S,dn(S),S;var j=D({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return S=(s.ownerDocument||s).createElement("style"),dn(S),Gi(S,"style",j),rf(S,g.precedence,s),h.instance=S;case"stylesheet":j=Jh(g.href);var N=s.querySelector(ed(j));if(N)return h.state.loading|=4,h.instance=N,dn(N),N;S=yg(g),(j=So.get(j))&&zu(S,j),N=(s.ownerDocument||s).createElement("link"),dn(N);var Y=N;return Y._p=new Promise(function(ce,Me){Y.onload=ce,Y.onerror=Me}),Gi(N,"link",S),h.state.loading|=4,rf(N,g.precedence,s),h.instance=N;case"script":return N=Iu(g.src),(j=s.querySelector(ku(N)))?(h.instance=j,dn(j),j):(S=g,(j=So.get(N))&&(S=D({},g),nf(S,j)),s=s.ownerDocument||s,j=s.createElement("script"),dn(j),Gi(j,"link",S),s.head.appendChild(j),h.instance=j);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(S=h.instance,h.state.loading|=4,rf(S,g.precedence,s));return h.instance}function rf(s,h,g){for(var S=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),j=S.length?S[S.length-1]:null,N=j,Y=0;Y<S.length;Y++){var ce=S[Y];if(ce.dataset.precedence===h)N=ce;else if(N!==j)break}N?N.parentNode.insertBefore(s,N.nextSibling):(h=g.nodeType===9?g.head:g,h.insertBefore(s,h.firstChild))}function zu(s,h){s.crossOrigin==null&&(s.crossOrigin=h.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=h.referrerPolicy),s.title==null&&(s.title=h.title)}function nf(s,h){s.crossOrigin==null&&(s.crossOrigin=h.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=h.referrerPolicy),s.integrity==null&&(s.integrity=h.integrity)}var af=null;function Ip(s,h,g){if(af===null){var S=new Map,j=af=new Map;j.set(g,S)}else j=af,S=j.get(g),S||(S=new Map,j.set(g,S));if(S.has(s))return S;for(S.set(s,null),g=g.getElementsByTagName(s),j=0;j<g.length;j++){var N=g[j];if(!(N[Ai]||N[Zr]||s==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=N.getAttribute(h)||"";Y=s+Y;var ce=S.get(Y);ce?ce.push(N):S.set(Y,[N])}}return S}function of(s,h,g){s=s.ownerDocument||s,s.head.insertBefore(g,h==="title"?s.querySelector("head > title"):null)}function sf(s,h,g){if(g===1||h.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return s=h.disabled,typeof h.precedence=="string"&&s==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function kp(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Du=null;function vg(){}function L0(s,h,g){if(Du===null)throw Error(a(475));var S=Du;if(h.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var j=Jh(g.href),N=s.querySelector(ed(j));if(N){s=N._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(S.count++,S=n.bind(S),s.then(S,S)),h.state.loading|=4,h.instance=N,dn(N);return}N=s.ownerDocument||s,g=yg(g),(j=So.get(j))&&zu(g,j),N=N.createElement("link"),dn(N);var Y=N;Y._p=new Promise(function(ce,Me){Y.onload=ce,Y.onerror=Me}),Gi(N,"link",g),h.instance=N}S.stylesheets===null&&(S.stylesheets=new Map),S.stylesheets.set(h,s),(s=h.state.preload)&&(h.state.loading&3)===0&&(S.count++,h=n.bind(S),s.addEventListener("load",h),s.addEventListener("error",h))}}function l(){if(Du===null)throw Error(a(475));var s=Du;return s.stylesheets&&s.count===0&&d(s,s.stylesheets),0<s.count?function(h){var g=setTimeout(function(){if(s.stylesheets&&d(s,s.stylesheets),s.unsuspend){var S=s.unsuspend;s.unsuspend=null,S()}},6e4);return s.unsuspend=h,function(){s.unsuspend=null,clearTimeout(g)}}:null}function n(){if(this.count--,this.count===0){if(this.stylesheets)d(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var o=null;function d(s,h){s.stylesheets=null,s.unsuspend!==null&&(s.count++,o=new Map,h.forEach(v,s),o=null,n.call(s))}function v(s,h){if(!(h.state.loading&4)){var g=o.get(s);if(g)var S=g.get(null);else{g=new Map,o.set(s,g);for(var j=s.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<j.length;N++){var Y=j[N];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(g.set(Y.dataset.precedence,Y),S=Y)}S&&g.set(null,S)}j=h.instance,Y=j.getAttribute("data-precedence"),N=g.get(Y)||S,N===S&&g.set(null,j),g.set(Y,j),this.count++,S=n.bind(this),j.addEventListener("load",S),j.addEventListener("error",S),N?N.parentNode.insertBefore(j,N.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(j,s.firstChild)),h.state.loading|=4}}var x={$$typeof:ne,Provider:null,Consumer:null,_currentValue:Ge,_currentValue2:Ge,_threadCount:0};function T(s,h,g,S,j,N,Y,ce){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.hiddenUpdates=Bt(null),this.identifierPrefix=S,this.onUncaughtError=j,this.onCaughtError=N,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function E(s,h,g,S,j,N,Y,ce,Me,qe,ft,xt){return s=new T(s,h,g,Y,ce,Me,qe,xt),h=1,N===!0&&(h|=24),N=Li(3,null,null,h),s.current=N,N.stateNode=s,h=xh(),h.refCount++,s.pooledCache=h,h.refCount++,N.memoizedState={element:S,isDehydrated:g,cache:h},br(N),s}function I(s){return s?(s=No,s):No}function R(s,h,g,S,j,N){j=I(j),S.context===null?S.context=j:S.pendingContext=j,S=ds(h),S.payload={element:g},N=N===void 0?null:N,N!==null&&(S.callback=N),g=vo(s,S,h),g!==null&&(to(g,s,h),Dl(g,s,h))}function L(s,h){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var g=s.retryLane;s.retryLane=g!==0&&g<h?g:h}}function V(s,h){L(s,h),(s=s.alternate)&&L(s,h)}function W(s){if(s.tag===13){var h=po(s,67108864);h!==null&&to(h,s,67108864),V(s,67108864)}}var K=!0;function ee(s,h,g,S){var j=Pe.T;Pe.T=null;var N=Ve.p;try{Ve.p=2,he(s,h,g,S)}finally{Ve.p=N,Pe.T=j}}function le(s,h,g,S){var j=Pe.T;Pe.T=null;var N=Ve.p;try{Ve.p=8,he(s,h,g,S)}finally{Ve.p=N,Pe.T=j}}function he(s,h,g,S){if(K){var j=ye(S);if(j===null)Jd(s,h,S,Be,g),kt(s,S);else if(tr(j,s,h,g,S))S.stopPropagation();else if(kt(s,S),h&4&&-1<It.indexOf(s)){for(;j!==null;){var N=fr(j);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var Y=De(N.pendingLanes);if(Y!==0){var ce=N;for(ce.pendingLanes|=2,ce.entangledLanes|=2;Y;){var Me=1<<31-Ie(Y);ce.entanglements[1]|=Me,Y&=~Me}Qo(N),(mn&6)===0&&(Xd=Kr()+500,Pu(0))}}break;case 13:ce=po(N,2),ce!==null&&to(ce,N,2),lp(),V(N,2)}if(N=ye(S),N===null&&Jd(s,h,S,Be,g),N===j)break;j=N}j!==null&&S.stopPropagation()}else Jd(s,h,S,null,g)}}function ye(s){return s=pl(s),Ae(s)}var Be=null;function Ae(s){if(Be=null,s=Ct(s),s!==null){var h=y(s);if(h===null)s=null;else{var g=h.tag;if(g===13){if(s=m(h),s!==null)return s;s=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;s=null}else h!==s&&(s=null)}}return Be=s,null}function je(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oi()){case Xn:return 2;case Ba:return 8;case Ii:case ki:return 32;case Wi:return 268435456;default:return 32}default:return 32}}var Ye=!1,it=null,gt=null,Et=null,Mt=new Map,jt=new Map,$t=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kt(s,h){switch(s){case"focusin":case"focusout":it=null;break;case"dragenter":case"dragleave":gt=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":Mt.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(h.pointerId)}}function dt(s,h,g,S,j,N){return s===null||s.nativeEvent!==N?(s={blockedOn:h,domEventName:g,eventSystemFlags:S,nativeEvent:N,targetContainers:[j]},h!==null&&(h=fr(h),h!==null&&W(h)),s):(s.eventSystemFlags|=S,h=s.targetContainers,j!==null&&h.indexOf(j)===-1&&h.push(j),s)}function tr(s,h,g,S,j){switch(h){case"focusin":return it=dt(it,s,h,g,S,j),!0;case"dragenter":return gt=dt(gt,s,h,g,S,j),!0;case"mouseover":return Et=dt(Et,s,h,g,S,j),!0;case"pointerover":var N=j.pointerId;return Mt.set(N,dt(Mt.get(N)||null,s,h,g,S,j)),!0;case"gotpointercapture":return N=j.pointerId,jt.set(N,dt(jt.get(N)||null,s,h,g,S,j)),!0}return!1}function ar(s){var h=Ct(s.target);if(h!==null){var g=y(h);if(g!==null){if(h=g.tag,h===13){if(h=m(g),h!==null){s.blockedOn=h,ci(s.priority,function(){if(g.tag===13){var S=Sa();S=Ft(S);var j=po(g,S);j!==null&&to(j,g,S),V(g,S)}});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){s.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Gt(s){if(s.blockedOn!==null)return!1;for(var h=s.targetContainers;0<h.length;){var g=ye(s.nativeEvent);if(g===null){g=s.nativeEvent;var S=new g.constructor(g.type,g);vr=S,g.target.dispatchEvent(S),vr=null}else return h=fr(g),h!==null&&W(h),s.blockedOn=g,!1;h.shift()}return!0}function Ut(s,h,g){Gt(s)&&g.delete(h)}function Er(){Ye=!1,it!==null&&Gt(it)&&(it=null),gt!==null&&Gt(gt)&&(gt=null),Et!==null&&Gt(Et)&&(Et=null),Mt.forEach(Ut),jt.forEach(Ut)}function bn(s,h){s.blockedOn===h&&(s.blockedOn=null,Ye||(Ye=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Er)))}var Zn=null;function Ci(s){Zn!==s&&(Zn=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Zn===s&&(Zn=null);for(var h=0;h<s.length;h+=3){var g=s[h],S=s[h+1],j=s[h+2];if(typeof S!="function"){if(Ae(S||g)===null)continue;break}var N=fr(g);N!==null&&(s.splice(h,3),h-=3,At(N,{pending:!0,data:j,method:g.method,action:S},S,j))}}))}function na(s){function h(Me){return bn(Me,s)}it!==null&&bn(it,s),gt!==null&&bn(gt,s),Et!==null&&bn(Et,s),Mt.forEach(h),jt.forEach(h);for(var g=0;g<$t.length;g++){var S=$t[g];S.blockedOn===s&&(S.blockedOn=null)}for(;0<$t.length&&(g=$t[0],g.blockedOn===null);)ar(g),g.blockedOn===null&&$t.shift();if(g=(s.ownerDocument||s).$$reactFormReplay,g!=null)for(S=0;S<g.length;S+=3){var j=g[S],N=g[S+1],Y=j[Tr]||null;if(typeof N=="function")Y||Ci(g);else if(Y){var ce=null;if(N&&N.hasAttribute("formAction")){if(j=N,Y=N[Tr]||null)ce=Y.formAction;else if(Ae(j)!==null)continue}else ce=Y.action;typeof ce=="function"?g[S+1]=ce:(g.splice(S,3),S-=3),Ci(g)}}}function ia(s){this._internalRoot=s}ai.prototype.render=ia.prototype.render=function(s){var h=this._internalRoot;if(h===null)throw Error(a(409));var g=h.current,S=Sa();R(g,S,s,h,null,null)},ai.prototype.unmount=ia.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var h=s.containerInfo;R(s.current,2,null,s,null,null),lp(),h[An]=null}};function ai(s){this._internalRoot=s}ai.prototype.unstable_scheduleHydration=function(s){if(s){var h=Jn();s={blockedOn:null,target:s,priority:h};for(var g=0;g<$t.length&&h!==0&&h<$t[g].priority;g++);$t.splice(g,0,s),g===0&&ar(s)}};var Tn=t.version;if(Tn!=="19.1.0")throw Error(a(527,Tn,"19.1.0"));Ve.findDOMNode=function(s){var h=s._reactInternals;if(h===void 0)throw typeof s.render=="function"?Error(a(188)):(s=Object.keys(s).join(","),Error(a(268,s)));return s=M(h),s=s!==null?C(s):null,s=s===null?null:s.stateNode,s};var Si={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Pe,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oi.isDisabled&&oi.supportsFiber)try{zi=oi.inject(Si),Qn=oi}catch{}}return bg.createRoot=function(s,h){if(!f(s))throw Error(a(299));var g=!1,S="",j=kh,N=Ic,Y=Im,ce=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(j=h.onUncaughtError),h.onCaughtError!==void 0&&(N=h.onCaughtError),h.onRecoverableError!==void 0&&(Y=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(ce=h.unstable_transitionCallbacks)),h=E(s,1,!1,null,null,g,S,j,N,Y,ce,null),s[An]=h.current,xp(s),new ia(h)},bg.hydrateRoot=function(s,h,g){if(!f(s))throw Error(a(299));var S=!1,j="",N=kh,Y=Ic,ce=Im,Me=null,qe=null;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(j=g.identifierPrefix),g.onUncaughtError!==void 0&&(N=g.onUncaughtError),g.onCaughtError!==void 0&&(Y=g.onCaughtError),g.onRecoverableError!==void 0&&(ce=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(Me=g.unstable_transitionCallbacks),g.formState!==void 0&&(qe=g.formState)),h=E(s,1,!0,h,g??null,S,j,N,Y,ce,Me,qe),h.context=I(null),g=h.current,S=Sa(),S=Ft(S),j=ds(S),j.callback=null,vo(g,j,S),g=S,h.current.lanes=g,Zt(h,g),Qo(h),s[An]=h.current,xp(s),new ai(h)},bg.version="19.1.0",bg}var BT;function RD(){if(BT)return q0.exports;BT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),q0.exports=DD(),q0.exports}var ND=RD();function FT(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function LD(...e){return t=>{let i=!1;const a=e.map(f=>{const y=FT(f,t);return!i&&typeof y=="function"&&(i=!0),y});if(i)return()=>{for(let f=0;f<a.length;f++){const y=a[f];typeof y=="function"?y():FT(e[f],null)}}}}function BD(...e){return pt.useCallback(LD(...e),e)}function UO(e){const t=FD(e),i=pt.forwardRef((a,f)=>{const{children:y,...m}=a,c=pt.Children.toArray(y),M=c.find(qD);if(M){const C=M.props.children,D=c.map(O=>O===M?pt.Children.count(C)>1?pt.Children.only(null):pt.isValidElement(C)?C.props.children:null:O);return P.jsx(t,{...m,ref:f,children:pt.isValidElement(C)?pt.cloneElement(C,void 0,D):null})}return P.jsx(t,{...m,ref:f,children:y})});return i.displayName=`${e}.Slot`,i}var VO=UO("Slot");function FD(e){const t=pt.forwardRef((i,a)=>{const{children:f,...y}=i,m=pt.isValidElement(f)?VD(f):void 0,c=BD(m,a);if(pt.isValidElement(f)){const M=UD(y,f.props);return f.type!==pt.Fragment&&(M.ref=c),pt.cloneElement(f,M)}return pt.Children.count(f)>1?pt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $D=Symbol("radix.slottable");function qD(e){return pt.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$D}function UD(e,t){const i={...t};for(const a in t){const f=e[a],y=t[a];/^on[A-Z]/.test(a)?f&&y?i[a]=(...c)=>{const M=y(...c);return f(...c),M}:f&&(i[a]=f):a==="style"?i[a]={...f,...y}:a==="className"&&(i[a]=[f,y].filter(Boolean).join(" "))}return{...e,...i}}function VD(e){var a,f;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=(f=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:f.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}function GO(e){var t,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var f=e.length;for(t=0;t<f;t++)e[t]&&(i=GO(e[t]))&&(a&&(a+=" "),a+=i)}else for(i in e)e[i]&&(a&&(a+=" "),a+=i);return a}function sn(){for(var e,t,i=0,a="",f=arguments.length;i<f;i++)(e=arguments[i])&&(t=GO(e))&&(a&&(a+=" "),a+=t);return a}const $T=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,qT=sn,ZO=(e,t)=>i=>{var a;if((t==null?void 0:t.variants)==null)return qT(e,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:f,defaultVariants:y}=t,m=Object.keys(f).map(C=>{const D=i==null?void 0:i[C],O=y==null?void 0:y[C];if(D===null)return null;const B=$T(D)||$T(O);return f[C][B]}),c=i&&Object.entries(i).reduce((C,D)=>{let[O,B]=D;return B===void 0||(C[O]=B),C},{}),M=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((C,D)=>{let{class:O,className:B,...F}=D;return Object.entries(F).every(X=>{let[Z,U]=X;return Array.isArray(U)?U.includes({...y,...c}[Z]):{...y,...c}[Z]===U})?[...C,O,B]:C},[]);return qT(e,m,M,i==null?void 0:i.class,i==null?void 0:i.className)},SS="-",GD=e=>{const t=HD(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:m=>{const c=m.split(SS);return c[0]===""&&c.length!==1&&c.shift(),HO(c,t)||ZD(m)},getConflictingClassGroupIds:(m,c)=>{const M=i[m]||[];return c&&a[m]?[...M,...a[m]]:M}}},HO=(e,t)=>{var m;if(e.length===0)return t.classGroupId;const i=e[0],a=t.nextPart.get(i),f=a?HO(e.slice(1),a):void 0;if(f)return f;if(t.validators.length===0)return;const y=e.join(SS);return(m=t.validators.find(({validator:c})=>c(y)))==null?void 0:m.classGroupId},UT=/^\[(.+)\]$/,ZD=e=>{if(UT.test(e)){const t=UT.exec(e)[1],i=t==null?void 0:t.substring(0,t.indexOf(":"));if(i)return"arbitrary.."+i}},HD=e=>{const{theme:t,classGroups:i}=e,a={nextPart:new Map,validators:[]};for(const f in i)Ww(i[f],a,f,t);return a},Ww=(e,t,i,a)=>{e.forEach(f=>{if(typeof f=="string"){const y=f===""?t:VT(t,f);y.classGroupId=i;return}if(typeof f=="function"){if(XD(f)){Ww(f(a),t,i,a);return}t.validators.push({validator:f,classGroupId:i});return}Object.entries(f).forEach(([y,m])=>{Ww(m,VT(t,y),i,a)})})},VT=(e,t)=>{let i=e;return t.split(SS).forEach(a=>{i.nextPart.has(a)||i.nextPart.set(a,{nextPart:new Map,validators:[]}),i=i.nextPart.get(a)}),i},XD=e=>e.isThemeGetter,WD=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,i=new Map,a=new Map;const f=(y,m)=>{i.set(y,m),t++,t>e&&(t=0,a=i,i=new Map)};return{get(y){let m=i.get(y);if(m!==void 0)return m;if((m=a.get(y))!==void 0)return f(y,m),m},set(y,m){i.has(y)?i.set(y,m):f(y,m)}}},Yw="!",Kw=":",YD=Kw.length,KD=e=>{const{prefix:t,experimentalParseClassName:i}=e;let a=f=>{const y=[];let m=0,c=0,M=0,C;for(let X=0;X<f.length;X++){let Z=f[X];if(m===0&&c===0){if(Z===Kw){y.push(f.slice(M,X)),M=X+YD;continue}if(Z==="/"){C=X;continue}}Z==="["?m++:Z==="]"?m--:Z==="("?c++:Z===")"&&c--}const D=y.length===0?f:f.substring(M),O=QD(D),B=O!==D,F=C&&C>M?C-M:void 0;return{modifiers:y,hasImportantModifier:B,baseClassName:O,maybePostfixModifierPosition:F}};if(t){const f=t+Kw,y=a;a=m=>m.startsWith(f)?y(m.substring(f.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:m,maybePostfixModifierPosition:void 0}}if(i){const f=a;a=y=>i({className:y,parseClassName:f})}return a},QD=e=>e.endsWith(Yw)?e.substring(0,e.length-1):e.startsWith(Yw)?e.substring(1):e,JD=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const f=[];let y=[];return a.forEach(m=>{m[0]==="["||t[m]?(f.push(...y.sort(),m),y=[]):y.push(m)}),f.push(...y.sort()),f}},eR=e=>({cache:WD(e.cacheSize),parseClassName:KD(e),sortModifiers:JD(e),...GD(e)}),tR=/\s+/,rR=(e,t)=>{const{parseClassName:i,getClassGroupId:a,getConflictingClassGroupIds:f,sortModifiers:y}=t,m=[],c=e.trim().split(tR);let M="";for(let C=c.length-1;C>=0;C-=1){const D=c[C],{isExternal:O,modifiers:B,hasImportantModifier:F,baseClassName:X,maybePostfixModifierPosition:Z}=i(D);if(O){M=D+(M.length>0?" "+M:M);continue}let U=!!Z,te=a(U?X.substring(0,Z):X);if(!te){if(!U){M=D+(M.length>0?" "+M:M);continue}if(te=a(X),!te){M=D+(M.length>0?" "+M:M);continue}U=!1}const ae=y(B).join(":"),ne=F?ae+Yw:ae,ue=ne+te;if(m.includes(ue))continue;m.push(ue);const J=f(te,U);for(let oe=0;oe<J.length;++oe){const me=J[oe];m.push(ne+me)}M=D+(M.length>0?" "+M:M)}return M};function nR(){let e=0,t,i,a="";for(;e<arguments.length;)(t=arguments[e++])&&(i=XO(t))&&(a&&(a+=" "),a+=i);return a}const XO=e=>{if(typeof e=="string")return e;let t,i="";for(let a=0;a<e.length;a++)e[a]&&(t=XO(e[a]))&&(i&&(i+=" "),i+=t);return i};function iR(e,...t){let i,a,f,y=m;function m(M){const C=t.reduce((D,O)=>O(D),e());return i=eR(C),a=i.cache.get,f=i.cache.set,y=c,c(M)}function c(M){const C=a(M);if(C)return C;const D=rR(M,i);return f(M,D),D}return function(){return y(nR.apply(null,arguments))}}const aa=e=>{const t=i=>i[e]||[];return t.isThemeGetter=!0,t},WO=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,YO=/^\((?:(\w[\w-]*):)?(.+)\)$/i,aR=/^\d+\/\d+$/,oR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,cR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zp=e=>aR.test(e),Nr=e=>!!e&&!Number.isNaN(Number(e)),td=e=>!!e&&Number.isInteger(Number(e)),Z0=e=>e.endsWith("%")&&Nr(e.slice(0,-1)),Ru=e=>oR.test(e),hR=()=>!0,dR=e=>sR.test(e)&&!lR.test(e),KO=()=>!1,fR=e=>cR.test(e),pR=e=>uR.test(e),mR=e=>!Yt(e)&&!Kt(e),gR=e=>ym(e,eI,KO),Yt=e=>WO.test(e),uf=e=>ym(e,tI,dR),H0=e=>ym(e,xR,Nr),GT=e=>ym(e,QO,KO),yR=e=>ym(e,JO,pR),Mv=e=>ym(e,rI,fR),Kt=e=>YO.test(e),xg=e=>vm(e,tI),vR=e=>vm(e,wR),ZT=e=>vm(e,QO),_R=e=>vm(e,eI),bR=e=>vm(e,JO),Pv=e=>vm(e,rI,!0),ym=(e,t,i)=>{const a=WO.exec(e);return a?a[1]?t(a[1]):i(a[2]):!1},vm=(e,t,i=!1)=>{const a=YO.exec(e);return a?a[1]?t(a[1]):i:!1},QO=e=>e==="position"||e==="percentage",JO=e=>e==="image"||e==="url",eI=e=>e==="length"||e==="size"||e==="bg-size",tI=e=>e==="length",xR=e=>e==="number",wR=e=>e==="family-name",rI=e=>e==="shadow",SR=()=>{const e=aa("color"),t=aa("font"),i=aa("text"),a=aa("font-weight"),f=aa("tracking"),y=aa("leading"),m=aa("breakpoint"),c=aa("container"),M=aa("spacing"),C=aa("radius"),D=aa("shadow"),O=aa("inset-shadow"),B=aa("text-shadow"),F=aa("drop-shadow"),X=aa("blur"),Z=aa("perspective"),U=aa("aspect"),te=aa("ease"),ae=aa("animate"),ne=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ue=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],J=()=>[...ue(),Kt,Yt],oe=()=>["auto","hidden","clip","visible","scroll"],me=()=>["auto","contain","none"],_e=()=>[Kt,Yt,M],ke=()=>[zp,"full","auto",..._e()],at=()=>[td,"none","subgrid",Kt,Yt],ze=()=>["auto",{span:["full",td,Kt,Yt]},td,Kt,Yt],Fe=()=>[td,"auto",Kt,Yt],tt=()=>["auto","min","max","fr",Kt,Yt],ut=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],rt=()=>["start","end","center","stretch","center-safe","end-safe"],Pe=()=>["auto",..._e()],Ve=()=>[zp,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",..._e()],Ge=()=>[e,Kt,Yt],ht=()=>[...ue(),ZT,GT,{position:[Kt,Yt]}],be=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Xe=()=>["auto","cover","contain",_R,gR,{size:[Kt,Yt]}],ot=()=>[Z0,xg,uf],st=()=>["","none","full",C,Kt,Yt],Pt=()=>["",Nr,xg,uf],Vt=()=>["solid","dashed","dotted","double"],Rt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],mr=()=>[Nr,Z0,ZT,GT],nr=()=>["","none",X,Kt,Yt],Ot=()=>["none",Nr,Kt,Yt],er=()=>["none",Nr,Kt,Yt],ir=()=>[Nr,Kt,Yt],_t=()=>[zp,"full",..._e()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ru],breakpoint:[Ru],color:[hR],container:[Ru],"drop-shadow":[Ru],ease:["in","out","in-out"],font:[mR],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ru],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ru],shadow:[Ru],spacing:["px",Nr],text:[Ru],"text-shadow":[Ru],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",zp,Yt,Kt,U]}],container:["container"],columns:[{columns:[Nr,Yt,Kt,c]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:J()}],overflow:[{overflow:oe()}],"overflow-x":[{"overflow-x":oe()}],"overflow-y":[{"overflow-y":oe()}],overscroll:[{overscroll:me()}],"overscroll-x":[{"overscroll-x":me()}],"overscroll-y":[{"overscroll-y":me()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ke()}],"inset-x":[{"inset-x":ke()}],"inset-y":[{"inset-y":ke()}],start:[{start:ke()}],end:[{end:ke()}],top:[{top:ke()}],right:[{right:ke()}],bottom:[{bottom:ke()}],left:[{left:ke()}],visibility:["visible","invisible","collapse"],z:[{z:[td,"auto",Kt,Yt]}],basis:[{basis:[zp,"full","auto",c,..._e()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Nr,zp,"auto","initial","none",Yt]}],grow:[{grow:["",Nr,Kt,Yt]}],shrink:[{shrink:["",Nr,Kt,Yt]}],order:[{order:[td,"first","last","none",Kt,Yt]}],"grid-cols":[{"grid-cols":at()}],"col-start-end":[{col:ze()}],"col-start":[{"col-start":Fe()}],"col-end":[{"col-end":Fe()}],"grid-rows":[{"grid-rows":at()}],"row-start-end":[{row:ze()}],"row-start":[{"row-start":Fe()}],"row-end":[{"row-end":Fe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":tt()}],"auto-rows":[{"auto-rows":tt()}],gap:[{gap:_e()}],"gap-x":[{"gap-x":_e()}],"gap-y":[{"gap-y":_e()}],"justify-content":[{justify:[...ut(),"normal"]}],"justify-items":[{"justify-items":[...rt(),"normal"]}],"justify-self":[{"justify-self":["auto",...rt()]}],"align-content":[{content:["normal",...ut()]}],"align-items":[{items:[...rt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...rt(),{baseline:["","last"]}]}],"place-content":[{"place-content":ut()}],"place-items":[{"place-items":[...rt(),"baseline"]}],"place-self":[{"place-self":["auto",...rt()]}],p:[{p:_e()}],px:[{px:_e()}],py:[{py:_e()}],ps:[{ps:_e()}],pe:[{pe:_e()}],pt:[{pt:_e()}],pr:[{pr:_e()}],pb:[{pb:_e()}],pl:[{pl:_e()}],m:[{m:Pe()}],mx:[{mx:Pe()}],my:[{my:Pe()}],ms:[{ms:Pe()}],me:[{me:Pe()}],mt:[{mt:Pe()}],mr:[{mr:Pe()}],mb:[{mb:Pe()}],ml:[{ml:Pe()}],"space-x":[{"space-x":_e()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":_e()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ve()}],w:[{w:[c,"screen",...Ve()]}],"min-w":[{"min-w":[c,"screen","none",...Ve()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[m]},...Ve()]}],h:[{h:["screen","lh",...Ve()]}],"min-h":[{"min-h":["screen","lh","none",...Ve()]}],"max-h":[{"max-h":["screen","lh",...Ve()]}],"font-size":[{text:["base",i,xg,uf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Kt,H0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Z0,Yt]}],"font-family":[{font:[vR,Yt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[f,Kt,Yt]}],"line-clamp":[{"line-clamp":[Nr,"none",Kt,H0]}],leading:[{leading:[y,..._e()]}],"list-image":[{"list-image":["none",Kt,Yt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Kt,Yt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Ge()}],"text-color":[{text:Ge()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Vt(),"wavy"]}],"text-decoration-thickness":[{decoration:[Nr,"from-font","auto",Kt,uf]}],"text-decoration-color":[{decoration:Ge()}],"underline-offset":[{"underline-offset":[Nr,"auto",Kt,Yt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_e()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Kt,Yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Kt,Yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ht()}],"bg-repeat":[{bg:be()}],"bg-size":[{bg:Xe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},td,Kt,Yt],radial:["",Kt,Yt],conic:[td,Kt,Yt]},bR,yR]}],"bg-color":[{bg:Ge()}],"gradient-from-pos":[{from:ot()}],"gradient-via-pos":[{via:ot()}],"gradient-to-pos":[{to:ot()}],"gradient-from":[{from:Ge()}],"gradient-via":[{via:Ge()}],"gradient-to":[{to:Ge()}],rounded:[{rounded:st()}],"rounded-s":[{"rounded-s":st()}],"rounded-e":[{"rounded-e":st()}],"rounded-t":[{"rounded-t":st()}],"rounded-r":[{"rounded-r":st()}],"rounded-b":[{"rounded-b":st()}],"rounded-l":[{"rounded-l":st()}],"rounded-ss":[{"rounded-ss":st()}],"rounded-se":[{"rounded-se":st()}],"rounded-ee":[{"rounded-ee":st()}],"rounded-es":[{"rounded-es":st()}],"rounded-tl":[{"rounded-tl":st()}],"rounded-tr":[{"rounded-tr":st()}],"rounded-br":[{"rounded-br":st()}],"rounded-bl":[{"rounded-bl":st()}],"border-w":[{border:Pt()}],"border-w-x":[{"border-x":Pt()}],"border-w-y":[{"border-y":Pt()}],"border-w-s":[{"border-s":Pt()}],"border-w-e":[{"border-e":Pt()}],"border-w-t":[{"border-t":Pt()}],"border-w-r":[{"border-r":Pt()}],"border-w-b":[{"border-b":Pt()}],"border-w-l":[{"border-l":Pt()}],"divide-x":[{"divide-x":Pt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Pt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Vt(),"hidden","none"]}],"divide-style":[{divide:[...Vt(),"hidden","none"]}],"border-color":[{border:Ge()}],"border-color-x":[{"border-x":Ge()}],"border-color-y":[{"border-y":Ge()}],"border-color-s":[{"border-s":Ge()}],"border-color-e":[{"border-e":Ge()}],"border-color-t":[{"border-t":Ge()}],"border-color-r":[{"border-r":Ge()}],"border-color-b":[{"border-b":Ge()}],"border-color-l":[{"border-l":Ge()}],"divide-color":[{divide:Ge()}],"outline-style":[{outline:[...Vt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Nr,Kt,Yt]}],"outline-w":[{outline:["",Nr,xg,uf]}],"outline-color":[{outline:Ge()}],shadow:[{shadow:["","none",D,Pv,Mv]}],"shadow-color":[{shadow:Ge()}],"inset-shadow":[{"inset-shadow":["none",O,Pv,Mv]}],"inset-shadow-color":[{"inset-shadow":Ge()}],"ring-w":[{ring:Pt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Ge()}],"ring-offset-w":[{"ring-offset":[Nr,uf]}],"ring-offset-color":[{"ring-offset":Ge()}],"inset-ring-w":[{"inset-ring":Pt()}],"inset-ring-color":[{"inset-ring":Ge()}],"text-shadow":[{"text-shadow":["none",B,Pv,Mv]}],"text-shadow-color":[{"text-shadow":Ge()}],opacity:[{opacity:[Nr,Kt,Yt]}],"mix-blend":[{"mix-blend":[...Rt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Rt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Nr]}],"mask-image-linear-from-pos":[{"mask-linear-from":mr()}],"mask-image-linear-to-pos":[{"mask-linear-to":mr()}],"mask-image-linear-from-color":[{"mask-linear-from":Ge()}],"mask-image-linear-to-color":[{"mask-linear-to":Ge()}],"mask-image-t-from-pos":[{"mask-t-from":mr()}],"mask-image-t-to-pos":[{"mask-t-to":mr()}],"mask-image-t-from-color":[{"mask-t-from":Ge()}],"mask-image-t-to-color":[{"mask-t-to":Ge()}],"mask-image-r-from-pos":[{"mask-r-from":mr()}],"mask-image-r-to-pos":[{"mask-r-to":mr()}],"mask-image-r-from-color":[{"mask-r-from":Ge()}],"mask-image-r-to-color":[{"mask-r-to":Ge()}],"mask-image-b-from-pos":[{"mask-b-from":mr()}],"mask-image-b-to-pos":[{"mask-b-to":mr()}],"mask-image-b-from-color":[{"mask-b-from":Ge()}],"mask-image-b-to-color":[{"mask-b-to":Ge()}],"mask-image-l-from-pos":[{"mask-l-from":mr()}],"mask-image-l-to-pos":[{"mask-l-to":mr()}],"mask-image-l-from-color":[{"mask-l-from":Ge()}],"mask-image-l-to-color":[{"mask-l-to":Ge()}],"mask-image-x-from-pos":[{"mask-x-from":mr()}],"mask-image-x-to-pos":[{"mask-x-to":mr()}],"mask-image-x-from-color":[{"mask-x-from":Ge()}],"mask-image-x-to-color":[{"mask-x-to":Ge()}],"mask-image-y-from-pos":[{"mask-y-from":mr()}],"mask-image-y-to-pos":[{"mask-y-to":mr()}],"mask-image-y-from-color":[{"mask-y-from":Ge()}],"mask-image-y-to-color":[{"mask-y-to":Ge()}],"mask-image-radial":[{"mask-radial":[Kt,Yt]}],"mask-image-radial-from-pos":[{"mask-radial-from":mr()}],"mask-image-radial-to-pos":[{"mask-radial-to":mr()}],"mask-image-radial-from-color":[{"mask-radial-from":Ge()}],"mask-image-radial-to-color":[{"mask-radial-to":Ge()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ue()}],"mask-image-conic-pos":[{"mask-conic":[Nr]}],"mask-image-conic-from-pos":[{"mask-conic-from":mr()}],"mask-image-conic-to-pos":[{"mask-conic-to":mr()}],"mask-image-conic-from-color":[{"mask-conic-from":Ge()}],"mask-image-conic-to-color":[{"mask-conic-to":Ge()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ht()}],"mask-repeat":[{mask:be()}],"mask-size":[{mask:Xe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Kt,Yt]}],filter:[{filter:["","none",Kt,Yt]}],blur:[{blur:nr()}],brightness:[{brightness:[Nr,Kt,Yt]}],contrast:[{contrast:[Nr,Kt,Yt]}],"drop-shadow":[{"drop-shadow":["","none",F,Pv,Mv]}],"drop-shadow-color":[{"drop-shadow":Ge()}],grayscale:[{grayscale:["",Nr,Kt,Yt]}],"hue-rotate":[{"hue-rotate":[Nr,Kt,Yt]}],invert:[{invert:["",Nr,Kt,Yt]}],saturate:[{saturate:[Nr,Kt,Yt]}],sepia:[{sepia:["",Nr,Kt,Yt]}],"backdrop-filter":[{"backdrop-filter":["","none",Kt,Yt]}],"backdrop-blur":[{"backdrop-blur":nr()}],"backdrop-brightness":[{"backdrop-brightness":[Nr,Kt,Yt]}],"backdrop-contrast":[{"backdrop-contrast":[Nr,Kt,Yt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Nr,Kt,Yt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Nr,Kt,Yt]}],"backdrop-invert":[{"backdrop-invert":["",Nr,Kt,Yt]}],"backdrop-opacity":[{"backdrop-opacity":[Nr,Kt,Yt]}],"backdrop-saturate":[{"backdrop-saturate":[Nr,Kt,Yt]}],"backdrop-sepia":[{"backdrop-sepia":["",Nr,Kt,Yt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":_e()}],"border-spacing-x":[{"border-spacing-x":_e()}],"border-spacing-y":[{"border-spacing-y":_e()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Kt,Yt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Nr,"initial",Kt,Yt]}],ease:[{ease:["linear","initial",te,Kt,Yt]}],delay:[{delay:[Nr,Kt,Yt]}],animate:[{animate:["none",ae,Kt,Yt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[Z,Kt,Yt]}],"perspective-origin":[{"perspective-origin":J()}],rotate:[{rotate:Ot()}],"rotate-x":[{"rotate-x":Ot()}],"rotate-y":[{"rotate-y":Ot()}],"rotate-z":[{"rotate-z":Ot()}],scale:[{scale:er()}],"scale-x":[{"scale-x":er()}],"scale-y":[{"scale-y":er()}],"scale-z":[{"scale-z":er()}],"scale-3d":["scale-3d"],skew:[{skew:ir()}],"skew-x":[{"skew-x":ir()}],"skew-y":[{"skew-y":ir()}],transform:[{transform:[Kt,Yt,"","none","gpu","cpu"]}],"transform-origin":[{origin:J()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:_t()}],"translate-x":[{"translate-x":_t()}],"translate-y":[{"translate-y":_t()}],"translate-z":[{"translate-z":_t()}],"translate-none":["translate-none"],accent:[{accent:Ge()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Ge()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Kt,Yt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_e()}],"scroll-mx":[{"scroll-mx":_e()}],"scroll-my":[{"scroll-my":_e()}],"scroll-ms":[{"scroll-ms":_e()}],"scroll-me":[{"scroll-me":_e()}],"scroll-mt":[{"scroll-mt":_e()}],"scroll-mr":[{"scroll-mr":_e()}],"scroll-mb":[{"scroll-mb":_e()}],"scroll-ml":[{"scroll-ml":_e()}],"scroll-p":[{"scroll-p":_e()}],"scroll-px":[{"scroll-px":_e()}],"scroll-py":[{"scroll-py":_e()}],"scroll-ps":[{"scroll-ps":_e()}],"scroll-pe":[{"scroll-pe":_e()}],"scroll-pt":[{"scroll-pt":_e()}],"scroll-pr":[{"scroll-pr":_e()}],"scroll-pb":[{"scroll-pb":_e()}],"scroll-pl":[{"scroll-pl":_e()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Kt,Yt]}],fill:[{fill:["none",...Ge()]}],"stroke-w":[{stroke:[Nr,xg,uf,H0]}],stroke:[{stroke:["none",...Ge()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},TR=iR(SR);function Py(...e){return TR(sn(e))}const AR=ZO("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Na({className:e,variant:t,size:i,asChild:a=!1,...f}){const y=a?VO:"button";return P.jsx(y,{"data-slot":"button",className:Py(AR({variant:t,size:i,className:e})),...f})}function zr({className:e,...t}){return P.jsx("div",{"data-slot":"card",className:Py("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function $r({className:e,type:t,...i}){return P.jsx("input",{type:t,"data-slot":"input",className:Py("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}qO();var MR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],PR=MR.reduce((e,t)=>{const i=UO(`Primitive.${t}`),a=pt.forwardRef((f,y)=>{const{asChild:m,...c}=f,M=m?i:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),P.jsx(M,{...c,ref:y})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),ER="Label",nI=pt.forwardRef((e,t)=>P.jsx(PR.label,{...e,ref:t,onMouseDown:i=>{var f;i.target.closest("button, input, select, textarea")||((f=e.onMouseDown)==null||f.call(e,i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));nI.displayName=ER;var CR=nI;function qt({className:e,...t}){return P.jsx(CR,{"data-slot":"label",className:Py("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OR=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,a)=>a?a.toUpperCase():i.toLowerCase()),HT=e=>{const t=OR(e);return t.charAt(0).toUpperCase()+t.slice(1)},iI=(...e)=>e.filter((t,i,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===i).join(" ").trim(),IR=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=pt.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:f="",children:y,iconNode:m,...c},M)=>pt.createElement("svg",{ref:M,...kR,width:t,height:t,stroke:e,strokeWidth:a?Number(i)*24/Number(t):i,className:iI("lucide",f),...!y&&!IR(c)&&{"aria-hidden":"true"},...c},[...m.map(([C,D])=>pt.createElement(C,D)),...Array.isArray(y)?y:[y]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=(e,t)=>{const i=pt.forwardRef(({className:a,...f},y)=>pt.createElement(zR,{ref:y,iconNode:t,className:iI(`lucide-${jR(HT(e))}`,`lucide-${e}`,a),...f}));return i.displayName=HT(e),i};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],RR=Sr("award",DR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],LR=Sr("bath",NR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],FR=Sr("bed",BR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],qR=Sr("book-open",$R);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Fp=Sr("brain",UR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Ey=Sr("building-2",VR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],aI=Sr("calendar",GR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],HR=Sr("car",ZR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],vf=Sr("chart-column",XR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],YR=Sr("check",WR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],wg=Sr("chevron-down",KR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Sg=Sr("chevron-up",QR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Vp=Sr("circle-alert",JR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],od=Sr("circle-check",e3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],oI=Sr("clock",t3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],n3=Sr("compass",r3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],a3=Sr("copy",i3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],s3=Sr("credit-card",o3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],c3=Sr("crown",l3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],h3=Sr("database",u3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],f3=Sr("external-link",d3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],m3=Sr("eye",p3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],XT=Sr("gift",g3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],v3=Sr("github",y3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Uv=Sr("house",_3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],x3=Sr("info",b3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],S3=Sr("lightbulb",w3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],A3=Sr("loader-circle",T3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],P3=Sr("mail",M3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],$v=Sr("map-pin",E3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],j3=Sr("map",C3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],I3=Sr("message-square",O3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M5 12h14",key:"1ays0h"}]],z3=Sr("minus",k3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],R3=Sr("paintbrush",D3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],L3=Sr("qr-code",N3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],F3=Sr("rotate-ccw",B3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],q3=Sr("route",$3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],V3=Sr("ruler",U3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Z3=Sr("settings",G3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],X3=Sr("share-2",H3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],$u=Sr("sparkles",W3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],sI=Sr("target",Y3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],Qw=Sr("trending-down",K3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Hc=Sr("trending-up",Q3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$_=Sr("users",J3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],lI=Sr("zap",eN);function tN({onSubmit:e,isLoading:t}){const[i,a]=pt.useState({}),[f,y]=pt.useState({basic:!0,details:!1,amenities:!1,location:!1,advanced:!1}),m=O=>{y(B=>({...B,[O]:!B[O]}))},c=(O,B)=>{a(F=>({...F,[O]:B}))},M=O=>{a(B=>({...B,[O]:!B[O]}))},C=O=>{O.preventDefault(),e(i)},D=Object.keys(i).filter(O=>{const B=i[O];return B!=null&&B!==""}).length;return P.jsxs("form",{onSubmit:C,className:"space-y-6",children:[P.jsxs(zr,{className:"p-4 card-gradient",children:[P.jsxs("div",{className:"flex items-center justify-between mb-2",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx($u,{className:"w-5 h-5 text-primary"}),P.jsx("span",{className:"font-semibold",children:"مستوى اكتمال البيانات"})]}),P.jsxs("span",{className:"text-sm text-muted-foreground",children:[D," / 100 حقل"]})]}),P.jsx("div",{className:"w-full h-2 bg-muted rounded-full overflow-hidden",children:P.jsx("div",{className:"progress-bar h-full rounded-full",style:{width:`${Math.min(D/100*100,100)}%`}})}),P.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"كلما أضفت المزيد من التفاصيل، زادت دقة التقييم"})]}),P.jsxs(zr,{className:"overflow-hidden",children:[P.jsxs("button",{type:"button",onClick:()=>m("basic"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:P.jsx(Ey,{className:"w-5 h-5 text-primary"})}),P.jsxs("div",{className:"text-right",children:[P.jsx("h3",{className:"font-bold text-lg",children:"البيانات الأساسية"}),P.jsx("p",{className:"text-sm text-muted-foreground",children:"المعلومات المطلوبة للتقييم"})]})]}),f.basic?P.jsx(Sg,{}):P.jsx(wg,{})]}),f.basic&&P.jsxs("div",{className:"p-6 pt-0 grid grid-cols-1 md:grid-cols-2 gap-4",children:[P.jsxs("div",{className:"space-y-2",children:[P.jsxs(qt,{htmlFor:"area",className:"flex items-center gap-2",children:[P.jsx(V3,{className:"w-4 h-4"}),"المساحة (م²) *"]}),P.jsx($r,{id:"area",type:"number",placeholder:"مثال: 300",value:i.area||"",onChange:O=>c("area",O.target.value),required:!0,className:"text-lg"})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsxs(qt,{htmlFor:"city",className:"flex items-center gap-2",children:[P.jsx($v,{className:"w-4 h-4"}),"المدينة *"]}),P.jsxs("select",{id:"city",value:i.city||"",onChange:O=>c("city",O.target.value),required:!0,className:"w-full px-3 py-2 rounded-md border border-input bg-background text-lg",children:[P.jsx("option",{value:"",children:"اختر المدينة"}),P.jsx("option",{value:"الرياض",children:"الرياض"}),P.jsx("option",{value:"جدة",children:"جدة"}),P.jsx("option",{value:"مكة",children:"مكة المكرمة"}),P.jsx("option",{value:"المدينة",children:"المدينة المنورة"}),P.jsx("option",{value:"الدمام",children:"الدمام"}),P.jsx("option",{value:"الخبر",children:"الخبر"}),P.jsx("option",{value:"الظهران",children:"الظهران"}),P.jsx("option",{value:"الطائف",children:"الطائف"}),P.jsx("option",{value:"تبوك",children:"تبوك"}),P.jsx("option",{value:"بريدة",children:"بريدة"}),P.jsx("option",{value:"خميس مشيط",children:"خميس مشيط"}),P.jsx("option",{value:"حائل",children:"حائل"}),P.jsx("option",{value:"نجران",children:"نجران"}),P.jsx("option",{value:"جازان",children:"جازان"}),P.jsx("option",{value:"ينبع",children:"ينبع"}),P.jsx("option",{value:"الأحساء",children:"الأحساء"}),P.jsx("option",{value:"القطيف",children:"القطيف"}),P.jsx("option",{value:"أبها",children:"أبها"}),P.jsx("option",{value:"عرعر",children:"عرعر"}),P.jsx("option",{value:"سكاكا",children:"سكاكا"}),P.jsx("option",{value:"أخرى",children:"أخرى"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsxs(qt,{htmlFor:"district",className:"flex items-center gap-2",children:[P.jsx($v,{className:"w-4 h-4"}),"الحي *"]}),P.jsx($r,{id:"district",type:"text",value:i.district||"",onChange:O=>c("district",O.target.value),placeholder:"مثال: الياسمين",required:!0,className:"text-lg"}),!i.district&&P.jsx("p",{className:"text-xs text-red-500",children:"الحي مطلوب"})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsxs(qt,{htmlFor:"propertyType",className:"flex items-center gap-2",children:[P.jsx(Uv,{className:"w-4 h-4"}),"نوع العقار"]}),P.jsxs("select",{id:"propertyType",value:i.propertyType||"",onChange:O=>c("propertyType",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر النوع"}),P.jsx("option",{value:"فيلا",children:"فيلا"}),P.jsx("option",{value:"شقة",children:"شقة"}),P.jsx("option",{value:"دور",children:"دور"}),P.jsx("option",{value:"عمارة",children:"عمارة"}),P.jsx("option",{value:"أرض",children:"أرض"}),P.jsx("option",{value:"دوبلكس",children:"دوبلكس"}),P.jsx("option",{value:"استوديو",children:"استوديو"}),P.jsx("option",{value:"بنتهاوس",children:"بنتهاوس"}),P.jsx("option",{value:"تاون هاوس",children:"تاون هاوس"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsxs(qt,{htmlFor:"age",className:"flex items-center gap-2",children:[P.jsx(aI,{className:"w-4 h-4"}),"عمر العقار"]}),P.jsxs("select",{id:"age",value:i.age||"",onChange:O=>c("age",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر العمر"}),P.jsx("option",{value:"جديد",children:"جديد (قيد الإنشاء أو أقل من سنة)"}),P.jsx("option",{value:"1-5",children:"1-5 سنوات"}),P.jsx("option",{value:"6-10",children:"6-10 سنوات"}),P.jsx("option",{value:"11-15",children:"11-15 سنة"}),P.jsx("option",{value:"16-20",children:"16-20 سنة"}),P.jsx("option",{value:"21-30",children:"21-30 سنة"}),P.jsx("option",{value:"أكثر من 30",children:"أكثر من 30 سنة"})]})]})]})]}),P.jsxs(zr,{className:"overflow-hidden",children:[P.jsxs("button",{type:"button",onClick:()=>m("details"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:P.jsx(Uv,{className:"w-5 h-5 text-primary"})}),P.jsxs("div",{className:"text-right",children:[P.jsx("h3",{className:"font-bold text-lg",children:"تفاصيل العقار"}),P.jsx("p",{className:"text-sm text-muted-foreground",children:"الغرف والمرافق الأساسية"})]})]}),f.details?P.jsx(Sg,{}):P.jsx(wg,{})]}),f.details&&P.jsxs("div",{className:"p-6 pt-0 grid grid-cols-1 md:grid-cols-3 gap-4",children:[P.jsxs("div",{className:"space-y-2",children:[P.jsxs(qt,{htmlFor:"bedrooms",className:"flex items-center gap-2",children:[P.jsx(FR,{className:"w-4 h-4"}),"عدد الغرف"]}),P.jsx($r,{id:"bedrooms",type:"number",placeholder:"مثال: 4",value:i.bedrooms||"",onChange:O=>c("bedrooms",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsxs(qt,{htmlFor:"bathrooms",className:"flex items-center gap-2",children:[P.jsx(LR,{className:"w-4 h-4"}),"دورات المياه"]}),P.jsx($r,{id:"bathrooms",type:"number",placeholder:"مثال: 3",value:i.bathrooms||"",onChange:O=>c("bathrooms",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsxs(qt,{htmlFor:"parking",className:"flex items-center gap-2",children:[P.jsx(HR,{className:"w-4 h-4"}),"مواقف السيارات"]}),P.jsx($r,{id:"parking",type:"number",placeholder:"مثال: 2",value:i.parking||"",onChange:O=>c("parking",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"maidRooms",children:"غرف خدم"}),P.jsx($r,{id:"maidRooms",type:"number",placeholder:"العدد",value:i.maidRooms||"",onChange:O=>c("maidRooms",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"guestRooms",children:"غرف ضيوف"}),P.jsx($r,{id:"guestRooms",type:"number",placeholder:"العدد",value:i.guestRooms||"",onChange:O=>c("guestRooms",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"majlis",children:"مجالس"}),P.jsx($r,{id:"majlis",type:"number",placeholder:"العدد",value:i.majlis||"",onChange:O=>c("majlis",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"kitchens",children:"عدد المطابخ"}),P.jsx($r,{id:"kitchens",type:"number",placeholder:"مثال: 1",value:i.kitchens||"",onChange:O=>c("kitchens",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"storage",children:"مخازن"}),P.jsx($r,{id:"storage",type:"number",placeholder:"العدد",value:i.storage||"",onChange:O=>c("storage",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"balconies",children:"شرفات"}),P.jsx($r,{id:"balconies",type:"number",placeholder:"العدد",value:i.balconies||"",onChange:O=>c("balconies",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsxs(qt,{htmlFor:"finishing",className:"flex items-center gap-2",children:[P.jsx(R3,{className:"w-4 h-4"}),"التشطيب"]}),P.jsxs("select",{id:"finishing",value:i.finishing||"",onChange:O=>c("finishing",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر التشطيب"}),P.jsx("option",{value:"سوبر لوكس",children:"سوبر لوكس"}),P.jsx("option",{value:"لوكس",children:"لوكس"}),P.jsx("option",{value:"ممتاز",children:"ممتاز"}),P.jsx("option",{value:"جيد جداً",children:"جيد جداً"}),P.jsx("option",{value:"جيد",children:"جيد"}),P.jsx("option",{value:"متوسط",children:"متوسط"}),P.jsx("option",{value:"بسيط",children:"بسيط"}),P.jsx("option",{value:"على العظم",children:"على العظم"})]})]})]})]}),P.jsxs(zr,{className:"overflow-hidden",children:[P.jsxs("button",{type:"button",onClick:()=>m("amenities"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:P.jsx(od,{className:"w-5 h-5 text-primary"})}),P.jsxs("div",{className:"text-right",children:[P.jsx("h3",{className:"font-bold text-lg",children:"المرافق الإضافية"}),P.jsx("p",{className:"text-sm text-muted-foreground",children:"الميزات والخدمات المتوفرة"})]})]}),f.amenities?P.jsx(Sg,{}):P.jsx(wg,{})]}),f.amenities&&P.jsx("div",{className:"p-6 pt-0 grid grid-cols-2 md:grid-cols-3 gap-3",children:[{id:"مسبح",label:"مسبح"},{id:"مصعد",label:"مصعد"},{id:"مولد_كهرباء",label:"مولد كهرباء"},{id:"نظام_أمني",label:"نظام أمني"},{id:"نظام_إطفاء",label:"نظام إطفاء"},{id:"خزان_ماء",label:"خزان ماء"},{id:"سخان_مركزي",label:"سخان مركزي"},{id:"تكييف_مركزي",label:"تكييف مركزي"},{id:"غرفة_خادمة",label:"غرفة خادمة"},{id:"غرفة_سائق",label:"غرفة سائق"},{id:"مجلس_رجال",label:"مجلس رجال"},{id:"صالة_رياضية",label:"صالة رياضية"},{id:"ملحق_خارجي",label:"ملحق خارجي"},{id:"مطبخ_خارجي",label:"مطبخ خارجي"},{id:"موقف_مظلل",label:"موقف مظلل"},{id:"حديقة",label:"حديقة"},{id:"شلال",label:"شلال"},{id:"نافورة",label:"نافورة"},{id:"ملعب_أطفال",label:"ملعب أطفال"},{id:"غرفة_بخار",label:"غرفة بخار"},{id:"جاكوزي",label:"جاكوزي"},{id:"مدفأة",label:"مدفأة"},{id:"مخزن_تحت_الدرج",label:"مخزن تحت الدرج"},{id:"غرفة_غسيل",label:"غرفة غسيل"},{id:"مدخل_خاص",label:"مدخل خاص"}].map(O=>P.jsxs("label",{className:"flex items-center gap-2 p-3 rounded-lg border border-input hover:bg-accent/50 cursor-pointer transition-colors",children:[P.jsx("input",{type:"checkbox",checked:i[O.id]||!1,onChange:()=>M(O.id),className:"w-4 h-4 rounded border-gray-300"}),P.jsx("span",{className:"text-sm",children:O.label})]},O.id))})]}),P.jsxs(zr,{className:"overflow-hidden",children:[P.jsxs("button",{type:"button",onClick:()=>m("location"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:P.jsx($v,{className:"w-5 h-5 text-primary"})}),P.jsxs("div",{className:"text-right",children:[P.jsx("h3",{className:"font-bold text-lg",children:"الموقع والمحيط"}),P.jsx("p",{className:"text-sm text-muted-foreground",children:"القرب من الخدمات والمرافق"})]})]}),f.location?P.jsx(Sg,{}):P.jsx(wg,{})]}),f.location&&P.jsxs("div",{className:"p-6 pt-0 space-y-4",children:[P.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{id:"قرب_مسجد",label:"مسجد قريب"},{id:"قرب_مدرسة",label:"مدرسة قريبة"},{id:"قرب_مستشفى",label:"مستشفى قريب"},{id:"قرب_مركز_تجاري",label:"مركز تجاري"},{id:"قرب_حديقة",label:"حديقة قريبة"},{id:"قرب_محطة_وقود",label:"محطة وقود"},{id:"قرب_مواصلات_عامة",label:"مواصلات عامة"},{id:"قرب_جامعة",label:"جامعة قريبة"},{id:"قرب_سوبرماركت",label:"سوبرماركت"},{id:"قرب_مطاعم",label:"مطاعم قريبة"},{id:"قرب_صيدلية",label:"صيدلية"},{id:"قرب_بنك",label:"بنك"},{id:"قرب_صراف_آلي",label:"صراف آلي"},{id:"قرب_مكتب_بريد",label:"مكتب بريد"},{id:"قرب_مركز_شرطة",label:"مركز شرطة"},{id:"قرب_دفاع_مدني",label:"دفاع مدني"},{id:"قرب_نادي_رياضي",label:"نادي رياضي"},{id:"قرب_مسبح_عام",label:"مسبح عام"},{id:"قرب_ملاعب",label:"ملاعب رياضية"},{id:"قرب_مكتبة",label:"مكتبة عامة"},{id:"قرب_مسرح",label:"مسرح/سينما"}].map(O=>P.jsxs("label",{className:"flex items-center gap-2 p-3 rounded-lg border border-input hover:bg-accent/50 cursor-pointer transition-colors",children:[P.jsx("input",{type:"checkbox",checked:i[O.id]||!1,onChange:()=>M(O.id),className:"w-4 h-4 rounded border-gray-300"}),P.jsx("span",{className:"text-sm",children:O.label})]},O.id))}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[P.jsxs("div",{className:"space-y-2",children:[P.jsxs(qt,{htmlFor:"facade",className:"flex items-center gap-2",children:[P.jsx(n3,{className:"w-4 h-4"}),"اتجاه الواجهة"]}),P.jsxs("select",{id:"facade",value:i.facade||"",onChange:O=>c("facade",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر الاتجاه"}),P.jsx("option",{value:"شمالية",children:"شمالية"}),P.jsx("option",{value:"جنوبية",children:"جنوبية"}),P.jsx("option",{value:"شرقية",children:"شرقية"}),P.jsx("option",{value:"غربية",children:"غربية"}),P.jsx("option",{value:"شمالية شرقية",children:"شمالية شرقية"}),P.jsx("option",{value:"شمالية غربية",children:"شمالية غربية"}),P.jsx("option",{value:"جنوبية شرقية",children:"جنوبية شرقية"}),P.jsx("option",{value:"جنوبية غربية",children:"جنوبية غربية"}),P.jsx("option",{value:"ثلاث واجهات",children:"ثلاث واجهات"}),P.jsx("option",{value:"أربع واجهات",children:"أربع واجهات"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsxs(qt,{htmlFor:"streetWidth",className:"flex items-center gap-2",children:[P.jsx(q3,{className:"w-4 h-4"}),"عرض الشارع"]}),P.jsxs("select",{id:"streetWidth",value:i.streetWidth||"",onChange:O=>c("streetWidth",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر العرض"}),P.jsx("option",{value:"< 10م",children:"أقل من 10 متر"}),P.jsx("option",{value:"10-15م",children:"10-15 متر"}),P.jsx("option",{value:"16-20م",children:"16-20 متر"}),P.jsx("option",{value:"21-30م",children:"21-30 متر"}),P.jsx("option",{value:"> 30م",children:"أكثر من 30 متر"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsxs(qt,{htmlFor:"view",className:"flex items-center gap-2",children:[P.jsx(m3,{className:"w-4 h-4"}),"الإطلالة"]}),P.jsxs("select",{id:"view",value:i.view||"",onChange:O=>c("view",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر الإطلالة"}),P.jsx("option",{value:"بحر",children:"بحر"}),P.jsx("option",{value:"جبل",children:"جبل"}),P.jsx("option",{value:"حديقة",children:"حديقة"}),P.jsx("option",{value:"شارع رئيسي",children:"شارع رئيسي"}),P.jsx("option",{value:"شارع فرعي",children:"شارع فرعي"}),P.jsx("option",{value:"مبنى مقابل",children:"مبنى مقابل"})]})]})]})]})]}),P.jsxs(zr,{className:"overflow-hidden",children:[P.jsxs("button",{type:"button",onClick:()=>m("advanced"),className:"w-full p-4 flex items-center justify-between hover:bg-accent/50 transition-colors",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:P.jsx(Hc,{className:"w-5 h-5 text-primary"})}),P.jsxs("div",{className:"text-right",children:[P.jsx("h3",{className:"font-bold text-lg",children:"تفاصيل متقدمة"}),P.jsx("p",{className:"text-sm text-muted-foreground",children:"معلومات إضافية لدقة أعلى"})]})]}),f.advanced?P.jsx(Sg,{}):P.jsx(wg,{})]}),f.advanced&&P.jsxs("div",{className:"p-6 pt-0 space-y-6",children:[P.jsxs("div",{children:[P.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"أبعاد الأرض والمساحات"}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"landArea",children:"مساحة الأرض (م²)"}),P.jsx($r,{id:"landArea",type:"number",placeholder:"للفلل والعمائر",value:i.landArea||"",onChange:O=>c("landArea",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"frontWidth",children:"عرض الواجهة (م)"}),P.jsx($r,{id:"frontWidth",type:"number",placeholder:"مثال: 15",value:i.frontWidth||"",onChange:O=>c("frontWidth",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"depth",children:"العمق (م)"}),P.jsx($r,{id:"depth",type:"number",placeholder:"مثال: 20",value:i.depth||"",onChange:O=>c("depth",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"yardArea",children:"مساحة الحوش (م²)"}),P.jsx($r,{id:"yardArea",type:"number",placeholder:"إن وجد",value:i.yardArea||"",onChange:O=>c("yardArea",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"gardenArea",children:"مساحة الحديقة (م²)"}),P.jsx($r,{id:"gardenArea",type:"number",placeholder:"إن وجدت",value:i.gardenArea||"",onChange:O=>c("gardenArea",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"roofArea",children:"مساحة السطح (م²)"}),P.jsx($r,{id:"roofArea",type:"number",placeholder:"إن كان مفتوح",value:i.roofArea||"",onChange:O=>c("roofArea",O.target.value)})]})]})]}),P.jsxs("div",{children:[P.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"تفاصيل البناء والطوابق"}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"floor",children:"رقم الطابق"}),P.jsx($r,{id:"floor",type:"number",placeholder:"للشقق",value:i.floor||"",onChange:O=>c("floor",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"totalFloors",children:"إجمالي الطوابق"}),P.jsx($r,{id:"totalFloors",type:"number",placeholder:"في المبنى",value:i.totalFloors||"",onChange:O=>c("totalFloors",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"floorHeight",children:"ارتفاع السقف (م)"}),P.jsx($r,{id:"floorHeight",type:"number",step:"0.1",placeholder:"مثال: 3.2",value:i.floorHeight||"",onChange:O=>c("floorHeight",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"buildingAge",children:"عمر البناء (سنة)"}),P.jsx($r,{id:"buildingAge",type:"number",placeholder:"بالسنوات",value:i.buildingAge||"",onChange:O=>c("buildingAge",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"lastRenovation",children:"آخر تجديد (سنة)"}),P.jsx($r,{id:"lastRenovation",type:"number",placeholder:"مثال: 2023",value:i.lastRenovation||"",onChange:O=>c("lastRenovation",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"structureType",children:"نوع الهيكل"}),P.jsxs("select",{id:"structureType",value:i.structureType||"",onChange:O=>c("structureType",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر النوع"}),P.jsx("option",{value:"خرساني",children:"خرساني"}),P.jsx("option",{value:"حديد",children:"حديد"}),P.jsx("option",{value:"طوب",children:"طوب"}),P.jsx("option",{value:"مختلط",children:"مختلط"})]})]})]})]}),P.jsxs("div",{children:[P.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"مواد التشطيب والجودة"}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"flooringType",children:"نوع الأرضيات"}),P.jsxs("select",{id:"flooringType",value:i.flooringType||"",onChange:O=>c("flooringType",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر النوع"}),P.jsx("option",{value:"سيراميك",children:"سيراميك"}),P.jsx("option",{value:"بورسلان",children:"بورسلان"}),P.jsx("option",{value:"رخام",children:"رخام"}),P.jsx("option",{value:"باركيه",children:"باركيه"}),P.jsx("option",{value:"موكيت",children:"موكيت"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"wallFinish",children:"تشطيب الجدران"}),P.jsxs("select",{id:"wallFinish",value:i.wallFinish||"",onChange:O=>c("wallFinish",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر النوع"}),P.jsx("option",{value:"دهان",children:"دهان"}),P.jsx("option",{value:"ورق جدران",children:"ورق جدران"}),P.jsx("option",{value:"حجر",children:"حجر"}),P.jsx("option",{value:"جبس",children:"جبس"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"kitchenQuality",children:"جودة المطبخ"}),P.jsxs("select",{id:"kitchenQuality",value:i.kitchenQuality||"",onChange:O=>c("kitchenQuality",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر الجودة"}),P.jsx("option",{value:"فاخر",children:"فاخر"}),P.jsx("option",{value:"جيد",children:"جيد"}),P.jsx("option",{value:"عادي",children:"عادي"}),P.jsx("option",{value:"بسيط",children:"بسيط"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"bathroomQuality",children:"جودة الحمامات"}),P.jsxs("select",{id:"bathroomQuality",value:i.bathroomQuality||"",onChange:O=>c("bathroomQuality",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر الجودة"}),P.jsx("option",{value:"فاخر",children:"فاخر"}),P.jsx("option",{value:"جيد",children:"جيد"}),P.jsx("option",{value:"عادي",children:"عادي"}),P.jsx("option",{value:"بسيط",children:"بسيط"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"windowType",children:"نوع النوافذ"}),P.jsxs("select",{id:"windowType",value:i.windowType||"",onChange:O=>c("windowType",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر النوع"}),P.jsx("option",{value:"UPVC",children:"UPVC"}),P.jsx("option",{value:"ألمنيوم",children:"ألمنيوم"}),P.jsx("option",{value:"خشب",children:"خشب"}),P.jsx("option",{value:"حديد",children:"حديد"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"doorType",children:"نوع الأبواب"}),P.jsxs("select",{id:"doorType",value:i.doorType||"",onChange:O=>c("doorType",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر النوع"}),P.jsx("option",{value:"خشب صلب",children:"خشب صلب"}),P.jsx("option",{value:"خشب مضغوط",children:"خشب مضغوط"}),P.jsx("option",{value:"معدن",children:"معدن"}),P.jsx("option",{value:"UPVC",children:"UPVC"})]})]})]})]}),P.jsxs("div",{children:[P.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"الأنظمة والتجهيزات"}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"acType",children:"نوع التكييف"}),P.jsxs("select",{id:"acType",value:i.acType||"",onChange:O=>c("acType",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر النوع"}),P.jsx("option",{value:"مركزي",children:"مركزي"}),P.jsx("option",{value:"سبليت",children:"سبليت"}),P.jsx("option",{value:"شباك",children:"شباك"}),P.jsx("option",{value:"مخفي",children:"مخفي"}),P.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"heatingType",children:"نظام التدفئة"}),P.jsxs("select",{id:"heatingType",value:i.heatingType||"",onChange:O=>c("heatingType",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر النوع"}),P.jsx("option",{value:"مركزي",children:"مركزي"}),P.jsx("option",{value:"دفايات",children:"دفايات"}),P.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"waterHeater",children:"سخان المياه"}),P.jsxs("select",{id:"waterHeater",value:i.waterHeater||"",onChange:O=>c("waterHeater",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر النوع"}),P.jsx("option",{value:"مركزي",children:"مركزي"}),P.jsx("option",{value:"كهربائي",children:"كهربائي"}),P.jsx("option",{value:"غاز",children:"غاز"}),P.jsx("option",{value:"شمسي",children:"شمسي"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"waterTank",children:"خزان المياه (لتر)"}),P.jsx($r,{id:"waterTank",type:"number",placeholder:"السعة",value:i.waterTank||"",onChange:O=>c("waterTank",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"generator",children:"مولد كهربائي"}),P.jsxs("select",{id:"generator",value:i.generator||"",onChange:O=>c("generator",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"يوجد؟"}),P.jsx("option",{value:"نعم",children:"نعم"}),P.jsx("option",{value:"لا",children:"لا"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"solarPanels",children:"ألواح شمسية"}),P.jsxs("select",{id:"solarPanels",value:i.solarPanels||"",onChange:O=>c("solarPanels",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"يوجد؟"}),P.jsx("option",{value:"نعم",children:"نعم"}),P.jsx("option",{value:"لا",children:"لا"})]})]})]})]}),P.jsxs("div",{children:[P.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"العزل والحماية"}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"thermalInsulation",children:"عزل حراري"}),P.jsxs("select",{id:"thermalInsulation",value:i.thermalInsulation||"",onChange:O=>c("thermalInsulation",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"يوجد؟"}),P.jsx("option",{value:"ممتاز",children:"ممتاز"}),P.jsx("option",{value:"جيد",children:"جيد"}),P.jsx("option",{value:"عادي",children:"عادي"}),P.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"waterproofing",children:"عزل مائي"}),P.jsxs("select",{id:"waterproofing",value:i.waterproofing||"",onChange:O=>c("waterproofing",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"يوجد؟"}),P.jsx("option",{value:"ممتاز",children:"ممتاز"}),P.jsx("option",{value:"جيد",children:"جيد"}),P.jsx("option",{value:"عادي",children:"عادي"}),P.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"soundproofing",children:"عزل صوتي"}),P.jsxs("select",{id:"soundproofing",value:i.soundproofing||"",onChange:O=>c("soundproofing",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"يوجد؟"}),P.jsx("option",{value:"ممتاز",children:"ممتاز"}),P.jsx("option",{value:"جيد",children:"جيد"}),P.jsx("option",{value:"عادي",children:"عادي"}),P.jsx("option",{value:"لا يوجد",children:"لا يوجد"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"fireAlarm",children:"نظام إنذار حريق"}),P.jsxs("select",{id:"fireAlarm",value:i.fireAlarm||"",onChange:O=>c("fireAlarm",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"يوجد؟"}),P.jsx("option",{value:"نعم",children:"نعم"}),P.jsx("option",{value:"لا",children:"لا"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"fireExtinguisher",children:"طفايات حريق"}),P.jsx($r,{id:"fireExtinguisher",type:"number",placeholder:"العدد",value:i.fireExtinguisher||"",onChange:O=>c("fireExtinguisher",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"emergencyExit",children:"مخرج طوارئ"}),P.jsxs("select",{id:"emergencyExit",value:i.emergencyExit||"",onChange:O=>c("emergencyExit",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"يوجد؟"}),P.jsx("option",{value:"نعم",children:"نعم"}),P.jsx("option",{value:"لا",children:"لا"})]})]})]})]}),P.jsxs("div",{children:[P.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"الاتصالات والتقنية"}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"internetSpeed",children:"سرعة الإنترنت (Mbps)"}),P.jsx($r,{id:"internetSpeed",type:"number",placeholder:"مثال: 100",value:i.internetSpeed||"",onChange:O=>c("internetSpeed",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"fiberOptic",children:"ألياف ضوئية"}),P.jsxs("select",{id:"fiberOptic",value:i.fiberOptic||"",onChange:O=>c("fiberOptic",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"متوفر؟"}),P.jsx("option",{value:"نعم",children:"نعم"}),P.jsx("option",{value:"لا",children:"لا"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"smartHome",children:"منزل ذكي"}),P.jsxs("select",{id:"smartHome",value:i.smartHome||"",onChange:O=>c("smartHome",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"يوجد؟"}),P.jsx("option",{value:"كامل",children:"كامل"}),P.jsx("option",{value:"جزئي",children:"جزئي"}),P.jsx("option",{value:"لا",children:"لا"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"satelliteDish",children:"طبق استقبال"}),P.jsxs("select",{id:"satelliteDish",value:i.satelliteDish||"",onChange:O=>c("satelliteDish",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"يوجد؟"}),P.jsx("option",{value:"نعم",children:"نعم"}),P.jsx("option",{value:"لا",children:"لا"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"intercom",children:"انتركم"}),P.jsxs("select",{id:"intercom",value:i.intercom||"",onChange:O=>c("intercom",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"يوجد؟"}),P.jsx("option",{value:"فيديو",children:"فيديو"}),P.jsx("option",{value:"صوتي",children:"صوتي"}),P.jsx("option",{value:"لا",children:"لا"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"cctv",children:"كاميرات مراقبة"}),P.jsx($r,{id:"cctv",type:"number",placeholder:"العدد",value:i.cctv||"",onChange:O=>c("cctv",O.target.value)})]})]})]}),P.jsxs("div",{children:[P.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"المسافات من الخدمات (كم)"}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"distanceSchool",children:"أقرب مدرسة"}),P.jsx($r,{id:"distanceSchool",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceSchool||"",onChange:O=>c("distanceSchool",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"distanceHospital",children:"أقرب مستشفى"}),P.jsx($r,{id:"distanceHospital",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceHospital||"",onChange:O=>c("distanceHospital",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"distanceMosque",children:"أقرب مسجد"}),P.jsx($r,{id:"distanceMosque",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceMosque||"",onChange:O=>c("distanceMosque",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"distanceMall",children:"أقرب مول"}),P.jsx($r,{id:"distanceMall",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceMall||"",onChange:O=>c("distanceMall",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"distanceSupermarket",children:"أقرب سوبرماركت"}),P.jsx($r,{id:"distanceSupermarket",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceSupermarket||"",onChange:O=>c("distanceSupermarket",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"distanceHighway",children:"أقرب طريق سريع"}),P.jsx($r,{id:"distanceHighway",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceHighway||"",onChange:O=>c("distanceHighway",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"distanceAirport",children:"المطار"}),P.jsx($r,{id:"distanceAirport",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceAirport||"",onChange:O=>c("distanceAirport",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"distanceMetro",children:"محطة مترو/قطار"}),P.jsx($r,{id:"distanceMetro",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distanceMetro||"",onChange:O=>c("distanceMetro",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"distancePark",children:"أقرب حديقة"}),P.jsx($r,{id:"distancePark",type:"number",step:"0.1",placeholder:"بالكيلومتر",value:i.distancePark||"",onChange:O=>c("distancePark",O.target.value)})]})]})]}),P.jsxs("div",{children:[P.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"البيئة المحيطة"}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"noiseLevel",children:"مستوى الضوضاء"}),P.jsxs("select",{id:"noiseLevel",value:i.noiseLevel||"",onChange:O=>c("noiseLevel",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر المستوى"}),P.jsx("option",{value:"هادئ جداً",children:"هادئ جداً"}),P.jsx("option",{value:"هادئ",children:"هادئ"}),P.jsx("option",{value:"متوسط",children:"متوسط"}),P.jsx("option",{value:"مزعج",children:"مزعج"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"trafficLevel",children:"كثافة المرور"}),P.jsxs("select",{id:"trafficLevel",value:i.trafficLevel||"",onChange:O=>c("trafficLevel",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر الكثافة"}),P.jsx("option",{value:"منخفضة",children:"منخفضة"}),P.jsx("option",{value:"متوسطة",children:"متوسطة"}),P.jsx("option",{value:"عالية",children:"عالية"}),P.jsx("option",{value:"مزدحم جداً",children:"مزدحم جداً"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"airQuality",children:"جودة الهواء"}),P.jsxs("select",{id:"airQuality",value:i.airQuality||"",onChange:O=>c("airQuality",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر الجودة"}),P.jsx("option",{value:"ممتازة",children:"ممتازة"}),P.jsx("option",{value:"جيدة",children:"جيدة"}),P.jsx("option",{value:"متوسطة",children:"متوسطة"}),P.jsx("option",{value:"سيئة",children:"سيئة"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"sunExposure",children:"التعرض للشمس"}),P.jsxs("select",{id:"sunExposure",value:i.sunExposure||"",onChange:O=>c("sunExposure",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر المستوى"}),P.jsx("option",{value:"كامل",children:"كامل"}),P.jsx("option",{value:"جزئي",children:"جزئي"}),P.jsx("option",{value:"محدود",children:"محدود"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"flooding",children:"احتمال الفيضان"}),P.jsxs("select",{id:"flooding",value:i.flooding||"",onChange:O=>c("flooding",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر المستوى"}),P.jsx("option",{value:"معدوم",children:"معدوم"}),P.jsx("option",{value:"منخفض",children:"منخفض"}),P.jsx("option",{value:"متوسط",children:"متوسط"}),P.jsx("option",{value:"عالي",children:"عالي"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"neighborhoodSafety",children:"أمان الحي"}),P.jsxs("select",{id:"neighborhoodSafety",value:i.neighborhoodSafety||"",onChange:O=>c("neighborhoodSafety",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر المستوى"}),P.jsx("option",{value:"ممتاز",children:"ممتاز"}),P.jsx("option",{value:"جيد",children:"جيد"}),P.jsx("option",{value:"متوسط",children:"متوسط"}),P.jsx("option",{value:"ضعيف",children:"ضعيف"})]})]})]})]}),P.jsxs("div",{children:[P.jsx("h4",{className:"font-semibold mb-3 text-primary",children:"معلومات قانونية ومالية"}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"ownership",children:"نوع الملكية"}),P.jsxs("select",{id:"ownership",value:i.ownership||"",onChange:O=>c("ownership",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"اختر النوع"}),P.jsx("option",{value:"ملك",children:"ملك"}),P.jsx("option",{value:"إيجار",children:"إيجار"}),P.jsx("option",{value:"وقف",children:"وقف"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"deed",children:"صك إلكتروني"}),P.jsxs("select",{id:"deed",value:i.deed||"",onChange:O=>c("deed",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"يوجد؟"}),P.jsx("option",{value:"نعم",children:"نعم"}),P.jsx("option",{value:"لا",children:"لا"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"mortgage",children:"رهن عقاري"}),P.jsxs("select",{id:"mortgage",value:i.mortgage||"",onChange:O=>c("mortgage",O.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[P.jsx("option",{value:"",children:"يوجد؟"}),P.jsx("option",{value:"نعم",children:"نعم"}),P.jsx("option",{value:"لا",children:"لا"})]})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"annualTax",children:"الضريبة السنوية (ريال)"}),P.jsx($r,{id:"annualTax",type:"number",placeholder:"إن وجدت",value:i.annualTax||"",onChange:O=>c("annualTax",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"maintenanceFee",children:"رسوم الصيانة (ريال/شهر)"}),P.jsx($r,{id:"maintenanceFee",type:"number",placeholder:"إن وجدت",value:i.maintenanceFee||"",onChange:O=>c("maintenanceFee",O.target.value)})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx(qt,{htmlFor:"utilities",children:"فواتير الخدمات (ريال/شهر)"}),P.jsx($r,{id:"utilities",type:"number",placeholder:"متوسط",value:i.utilities||"",onChange:O=>c("utilities",O.target.value)})]})]})]})]})]}),P.jsx(Na,{type:"submit",disabled:t||!i.area||!i.city||!i.district,className:"w-full h-14 text-lg font-bold primary-gradient hover:opacity-90 transition-opacity",children:t?P.jsxs(P.Fragment,{children:[P.jsx(A3,{className:"w-5 h-5 ml-2 animate-spin"}),"جاري التقييم..."]}):P.jsxs(P.Fragment,{children:[P.jsx($u,{className:"w-5 h-5 ml-2"}),"احسب القيمة التقديرية"]})}),(!i.area||!i.city)&&P.jsxs("div",{className:"flex items-start gap-2 p-4 rounded-lg bg-amber-50 border border-amber-200",children:[P.jsx(Vp,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),P.jsxs("p",{className:"text-sm text-amber-800",children:["يرجى إدخال ",P.jsx("strong",{children:"المساحة"})," و",P.jsx("strong",{children:"المدينة"})," على الأقل للحصول على تقييم أولي"]})]})]})}function rN({result:e}){var y,m;if(!e)return null;const t=c=>new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(c),i=c=>c>=70?"text-green-600 bg-green-50 border-green-200":c>=50?"text-amber-600 bg-amber-50 border-amber-200":"text-red-600 bg-red-50 border-red-200",a=c=>c>=70?P.jsx(od,{className:"w-5 h-5"}):c>=50?P.jsx(Vp,{className:"w-5 h-5"}):P.jsx(Vp,{className:"w-5 h-5"}),f=c=>c==="صاعد"?P.jsx(Hc,{className:"w-5 h-5 text-green-600"}):c==="نازل"?P.jsx(Qw,{className:"w-5 h-5 text-red-600"}):P.jsx(z3,{className:"w-5 h-5 text-gray-600"});return P.jsxs("div",{className:"space-y-6 animate-slide-in",children:[P.jsxs(zr,{className:"p-8 result-badge text-white overflow-hidden relative",children:[P.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:P.jsx("div",{className:"absolute top-4 right-4",children:P.jsx($u,{className:"w-32 h-32"})})}),P.jsxs("div",{className:"relative z-10",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[P.jsx(sI,{className:"w-6 h-6"}),P.jsx("h2",{className:"text-xl font-bold",children:"القيمة التقديرية للعقار"})]}),P.jsxs("div",{className:"mt-4",children:[P.jsx("div",{className:"text-5xl font-black mb-2",children:t(e.estimatedValue)}),P.jsxs("p",{className:"text-white/80 text-sm",children:["النطاق المتوقع: ",t(((y=e.priceRange)==null?void 0:y.min)||e.estimatedValue*.9)," - ",t(((m=e.priceRange)==null?void 0:m.max)||e.estimatedValue*1.1)]})]}),e.source==="gpt"&&P.jsxs("div",{className:"mt-4 flex items-center gap-2 text-white/90 bg-white/10 rounded-lg px-3 py-2 w-fit",children:[P.jsx(Fp,{className:"w-4 h-4"}),P.jsx("span",{className:"text-sm font-semibold",children:"تم التقييم بواسطة الذكاء الاصطناعي المتقدم"})]})]})]}),!e.usedAgent&&P.jsxs(zr,{className:`p-6 border-2 ${i(e.confidence)}`,children:[P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[a(e.confidence),P.jsxs("div",{children:[P.jsx("h3",{className:"font-bold text-lg",children:"مستوى الثقة في التقييم"}),P.jsxs("p",{className:"text-sm opacity-80",children:["بناءً على ",e.filledFieldsCount||"عدة"," معلومة مُدخلة"]})]})]}),P.jsxs("div",{className:"text-4xl font-black",children:[e.confidence,"%"]})]}),P.jsx("div",{className:"mt-4 w-full h-3 bg-white/50 rounded-full overflow-hidden",children:P.jsx("div",{className:"h-full rounded-full transition-all duration-1000 ease-out",style:{width:`${e.confidence}%`,background:e.confidence>=70?"linear-gradient(90deg, #22c55e, #16a34a)":e.confidence>=50?"linear-gradient(90deg, #f59e0b, #d97706)":"linear-gradient(90deg, #ef4444, #dc2626)"}})})]}),e.usedAgent&&e.nqs&&P.jsx(zr,{className:"p-6 border-2 border-primary/30 bg-primary/5",children:P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx(Fp,{className:"w-6 h-6 text-primary"}),P.jsxs("div",{children:[P.jsx("h3",{className:"font-bold text-lg",children:"تم التقييم بواسطة الذكاء الاصطناعي"}),P.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.nqs.notes||"تم حساب القيمة بدقة عالية باستخدام نموذج ذكاء اصطناعي متقدم"})]})]})}),e.analysis&&P.jsxs(zr,{className:"p-6",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[P.jsx(vf,{className:"w-5 h-5 text-primary"}),P.jsx("h3",{className:"font-bold text-lg",children:"تحليل العوامل المؤثرة"})]}),e.analysis.baseCalculation&&P.jsxs("div",{className:"mb-4 p-4 bg-muted rounded-lg",children:[P.jsx("p",{className:"text-sm font-semibold mb-1",children:"الحساب الأساسي:"}),P.jsx("p",{className:"text-sm",children:e.analysis.baseCalculation})]}),e.analysis.keyFactors&&e.analysis.keyFactors.length>0&&P.jsx("div",{className:"space-y-3",children:e.analysis.keyFactors.map((c,M)=>P.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[P.jsxs("div",{className:"flex items-start justify-between mb-2",children:[P.jsx("h4",{className:"font-semibold",children:c.factor}),P.jsx("span",{className:"text-sm font-bold text-primary",children:c.impact})]}),c.reasoning&&P.jsx("p",{className:"text-sm text-muted-foreground",children:c.reasoning})]},M))}),e.analysis.marketComparison&&P.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[P.jsx("p",{className:"text-sm font-semibold mb-1 text-blue-900",children:"مقارنة السوق:"}),P.jsx("p",{className:"text-sm text-blue-800",children:e.analysis.marketComparison})]}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.analysis.strengths&&e.analysis.strengths.length>0&&P.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[P.jsxs("h4",{className:"font-semibold text-green-900 mb-2 flex items-center gap-2",children:[P.jsx(od,{className:"w-4 h-4"}),"نقاط القوة"]}),P.jsx("ul",{className:"space-y-1",children:e.analysis.strengths.map((c,M)=>P.jsxs("li",{className:"text-sm text-green-800",children:["• ",c]},M))})]}),e.analysis.weaknesses&&e.analysis.weaknesses.length>0&&P.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[P.jsxs("h4",{className:"font-semibold text-amber-900 mb-2 flex items-center gap-2",children:[P.jsx(Vp,{className:"w-4 h-4"}),"نقاط الضعف"]}),P.jsx("ul",{className:"space-y-1",children:e.analysis.weaknesses.map((c,M)=>P.jsxs("li",{className:"text-sm text-amber-800",children:["• ",c]},M))})]})]})]}),e.adjustments&&!e.analysis&&P.jsxs(zr,{className:"p-6",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[P.jsx(vf,{className:"w-5 h-5 text-primary"}),P.jsx("h3",{className:"font-bold text-lg",children:"تفاصيل الحساب"})]}),e.adjustments.baseCalculation&&P.jsxs("div",{className:"mb-4 p-4 bg-muted rounded-lg",children:[P.jsx("p",{className:"text-sm font-semibold mb-1",children:"الحساب الأساسي:"}),P.jsx("p",{className:"text-sm",children:e.adjustments.baseCalculation})]}),e.adjustments.appliedFactors&&e.adjustments.appliedFactors.length>0&&P.jsxs("div",{className:"space-y-2",children:[P.jsx("p",{className:"text-sm font-semibold mb-2",children:"العوامل المطبقة:"}),e.adjustments.appliedFactors.map((c,M)=>P.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[P.jsxs("div",{children:[P.jsxs("span",{className:"font-semibold text-sm",children:[c.factor,":"]}),P.jsx("span",{className:"text-sm text-muted-foreground mr-2",children:c.value})]}),P.jsx("span",{className:"text-sm font-bold text-primary",children:c.impact})]},M))]})]}),e.marketInsights&&P.jsxs(zr,{className:"p-6",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[P.jsx(Hc,{className:"w-5 h-5 text-primary"}),P.jsx("h3",{className:"font-bold text-lg",children:"رؤى السوق"})]}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P.jsxs("div",{className:"p-4 border border-border rounded-lg text-center",children:[P.jsx("div",{className:"flex items-center justify-center mb-2",children:f(e.marketInsights.trend)}),P.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"اتجاه السوق"}),P.jsx("p",{className:"font-bold",children:e.marketInsights.trend})]}),P.jsxs("div",{className:"p-4 border border-border rounded-lg text-center",children:[P.jsx("div",{className:"flex items-center justify-center mb-2",children:P.jsx(vf,{className:"w-5 h-5 text-blue-600"})}),P.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"مستوى الطلب"}),P.jsx("p",{className:"font-bold",children:e.marketInsights.demandLevel})]}),P.jsxs("div",{className:"p-4 border border-border rounded-lg text-center",children:[P.jsx("div",{className:"flex items-center justify-center mb-2",children:P.jsx(oI,{className:"w-5 h-5 text-green-600"})}),P.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"أفضل وقت للبيع"}),P.jsx("p",{className:"font-bold",children:e.marketInsights.bestTimeToSell})]})]})]}),e.investmentScore&&P.jsx(zr,{className:"p-6 border-2 border-primary/20",children:P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx(RR,{className:"w-6 h-6 text-primary"}),P.jsxs("div",{children:[P.jsx("h3",{className:"font-bold text-lg",children:"تقييم الاستثمار"}),P.jsx("p",{className:"text-sm text-muted-foreground",children:"من 10"})]})]}),P.jsx("div",{className:"text-5xl font-black text-primary",children:e.investmentScore})]})}),e.recommendations&&e.recommendations.length>0&&P.jsxs(zr,{className:"p-6 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[P.jsx(S3,{className:"w-5 h-5 text-blue-600"}),P.jsx("h3",{className:"font-bold text-lg text-blue-900",children:"توصيات لتحسين التقييم"})]}),P.jsx("ul",{className:"space-y-3",children:e.recommendations.map((c,M)=>P.jsxs("li",{className:"flex items-start gap-3 p-3 bg-white/70 rounded-lg",children:[P.jsx(od,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),P.jsx("span",{className:"text-sm text-blue-900",children:c})]},M))})]}),e.reasoning&&P.jsxs(zr,{className:"p-6 bg-muted/50",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[P.jsx(Fp,{className:"w-5 h-5 text-primary"}),P.jsx("h3",{className:"font-bold text-lg",children:"التحليل الشامل"})]}),P.jsx("p",{className:"text-sm leading-relaxed",children:e.reasoning})]}),e.nqs&&e.nqs.districtFound&&P.jsxs(zr,{className:"p-4 bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[P.jsx(Fp,{className:"w-5 h-5 text-indigo-600"}),P.jsx("h4",{className:"font-semibold text-indigo-900",children:"تحليل جودة الحي (تلقائي)"})]}),P.jsx("p",{className:"text-sm text-indigo-800",children:e.nqs.explanation}),P.jsx("p",{className:"text-xs text-indigo-600 mt-2",children:"ℹ️ تم حساب جودة الحي تلقائياً بناءً على كثافة الخدمات، سهولة النفاذ، المساحات الخضراء، والمؤسسات التعليمية"})]}),P.jsxs("div",{className:"text-center text-sm text-muted-foreground space-y-1",children:[P.jsx("p",{children:"💡 هذا التقييم تقديري ويعتمد على البيانات المُدخلة والسوق الحالي"}),P.jsx("p",{children:"📊 للحصول على تقييم أكثر دقة، يُنصح بإضافة المزيد من التفاصيل"}),e.source==="gpt"&&P.jsxs("p",{className:"font-semibold text-primary",children:["🤖 تم التقييم باستخدام نموذج ",e.model]})]})]})}const nN=ZO("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Vg({className:e,variant:t,asChild:i=!1,...a}){const f=i?VO:"span";return P.jsx(f,{"data-slot":"badge",className:Py(nN({variant:t}),e),...a})}function iN(){const e=[{id:"basic",name:"Basic",nameAr:"الباقة الأساسية",price:"مجاني",status:"active",statusText:"✅ فعّالة",icon:$u,color:"from-blue-500 to-blue-600",features:["تقييم عقاري أساسي","تحليل السوق العام","نتائج فورية","دعم فني أساسي"]},{id:"smart",name:"Smart",nameAr:"الباقة الذكية",price:"٤٩ ريال",priceNote:"شهرياً",status:"coming",statusText:"🔒 قريباً",icon:lI,color:"from-purple-500 to-purple-600",badge:"الأكثر شعبية",features:["كل مزايا Basic","تحليل الحي الكامل","أفضل مناطق السكن","التكتلات السعرية","تقارير مفصّلة","أولوية في الدعم"]},{id:"pro",name:"Pro",nameAr:"الباقة الاحترافية",price:"١٤٩ ريال",priceNote:"شهرياً",status:"coming",statusText:"🔒 قريباً",icon:c3,color:"from-amber-500 to-amber-600",features:["كل مزايا Smart","خريطة الوعي العقاري","تحليلات متقدمة بالذكاء الاصطناعي","مقارنات غير محدودة","API للتكامل","استشارات شهرية","دعم فني مخصص"]},{id:"api",name:"API",nameAr:"باقة الأعمال",price:"B2B",priceNote:"حسب الاستخدام",status:"coming",statusText:"🔒 قريباً",icon:Ey,color:"from-green-500 to-green-600",features:["وصول كامل لـ API","تكامل مع أنظمتك","حدود استخدام مرتفعة","بيانات تاريخية","دعم فني مخصص 24/7","SLA مضمون","تدريب للفريق"]}],t=i=>i==="active"?{text:"مفعّلة",variant:"default",disabled:!0}:{text:"قريباً",variant:"outline",disabled:!0};return P.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted/30 py-12 px-4",children:P.jsxs("div",{className:"container mx-auto max-w-7xl",children:[P.jsxs("div",{className:"text-center mb-12 space-y-4",children:[P.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-semibold mb-4",children:[P.jsx($u,{className:"w-4 h-4"}),P.jsx("span",{children:"اختر الباقة المناسبة لك"})]}),P.jsx("h1",{className:"text-4xl md:text-5xl font-black text-balance",children:"باقات مُثمّن"}),P.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto text-balance",children:"ابدأ مجاناً واستكشف قوة الذكاء الاصطناعي في التقييم العقاري"})]}),P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:e.map(i=>{const a=i.icon,f=t(i.status),y=i.status==="active";return P.jsxs(zr,{className:`relative p-6 hover-lift ${y?"border-2 border-primary shadow-lg":""}`,children:[i.badge&&P.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:P.jsx(Vg,{className:"bg-gradient-to-r from-amber-500 to-amber-600 text-white",children:i.badge})}),P.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${i.color} w-fit mb-4`,children:P.jsx(a,{className:"w-6 h-6 text-white"})}),P.jsx("h3",{className:"text-xl font-bold mb-1",children:i.nameAr}),P.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:i.name}),P.jsx("div",{className:"mb-4",children:P.jsxs("div",{className:"flex items-baseline gap-2",children:[P.jsx("span",{className:"text-3xl font-black",children:i.price}),i.priceNote&&P.jsx("span",{className:"text-sm text-muted-foreground",children:i.priceNote})]})}),P.jsx("div",{className:"mb-6",children:P.jsx(Vg,{variant:y?"default":"secondary",children:i.statusText})}),P.jsx(Na,{className:"w-full mb-6",variant:f.variant,disabled:f.disabled,children:f.text}),P.jsx("div",{className:"space-y-3",children:i.features.map((m,c)=>P.jsxs("div",{className:"flex items-start gap-2",children:[P.jsx(YR,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${y?"text-primary":"text-muted-foreground"}`}),P.jsx("span",{className:"text-sm",children:m})]},c))})]},i.id)})}),P.jsx(zr,{className:"p-6 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:P.jsxs("div",{className:"flex items-start gap-4",children:[P.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:P.jsx($u,{className:"w-6 h-6 text-blue-600"})}),P.jsxs("div",{className:"flex-1",children:[P.jsx("h3",{className:"font-bold text-lg mb-2",children:"النسخة الحالية للتجربة العامة"}),P.jsx("p",{className:"text-muted-foreground mb-4",children:"جميع المزايا المتقدمة ستُتاح في التحديث القادم. نحن نعمل على تطوير تجربة استثنائية لك."}),P.jsxs("div",{className:"flex flex-wrap gap-3",children:[P.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[P.jsx(j3,{className:"w-4 h-4 text-blue-600"}),P.jsx("span",{children:"خريطة الوعي العقاري"})]}),P.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[P.jsx(vf,{className:"w-4 h-4 text-purple-600"}),P.jsx("span",{children:"تحليلات متقدمة"})]}),P.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[P.jsx(Hc,{className:"w-4 h-4 text-green-600"}),P.jsx("span",{children:"توقعات السوق"})]}),P.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[P.jsx($_,{className:"w-4 h-4 text-amber-600"}),P.jsx("span",{children:"مقارنات الأحياء"})]})]})]})]})}),P.jsxs("div",{className:"mt-12 text-center",children:[P.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"هل لديك احتياجات خاصة؟"}),P.jsx(Na,{variant:"outline",size:"lg",children:"تواصل معنا"})]})]})})}const Jw="ABCDEFGHJKMNPQRSTUVWXYZ23456789",aN=7;function WT(e=aN){let t="";for(let i=0;i<e;i++){const a=Math.floor(Math.random()*Jw.length);t+=Jw[a]}return t}function oN(e){return!e||typeof e!="string"||e.length<6||e.length>8?!1:new RegExp(`^[${Jw}]+$`).test(e)}function cI(e,t=null){return`${t||window.location.origin}/?ref=${e}`}async function sN(e){const t=cI(e);return`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(t)}`}function lN(e,t){if(!oN(t))throw new Error("رمز إحالة غير صالح");const i=JSON.parse(localStorage.getItem("muth_user_codes")||"{}");i[e]={code:t,createdAt:Date.now()},localStorage.setItem("muth_user_codes",JSON.stringify(i))}function cN(e){var i;return((i=JSON.parse(localStorage.getItem("muth_user_codes")||"{}")[e])==null?void 0:i.code)||null}function uN(e){let t=cN(e);if(!t){t=WT();const i=Object.values(JSON.parse(localStorage.getItem("muth_user_codes")||"{}")).map(f=>f.code);let a=0;for(;i.includes(t)&&a<10;)t=WT(),a++;lN(e,t)}return t}function hN(e){const i=JSON.parse(localStorage.getItem("muth_ref_usages")||"[]").filter(y=>y.code===e);return{clicks:JSON.parse(localStorage.getItem("muth_ref_events")||"[]").filter(y=>y.ref===e).filter(y=>y.type==="click").length,signups:i.length,qualified:i.filter(y=>y.verified).length,lastUsed:i.length>0?Math.max(...i.map(y=>y.timestamp)):null}}function dN(e){const t=[];return e>=1&&t.push({id:"early_access",name:"Early Access",nameAr:"وصول مبكر",description:"شارة Early Access + ظهور في لوحة الداعمين الأوائل",icon:"🌟",unlocked:!0}),e>=3&&t.push({id:"neighborhood_analysis",name:"Neighborhood Analysis",nameAr:"تحليل الحي المختصر",description:"تفعيل تحليل الحي المختصر مبكراً",icon:"🏘️",unlocked:!0}),e>=10&&t.push({id:"founder_tester",name:"Founder Tester",nameAr:"مختبر مؤسس",description:"وصول مبكّر للخريطة التفاعلية + شارة Founder Tester",icon:"👑",unlocked:!0}),e<3&&t.push({id:"neighborhood_analysis",name:"Neighborhood Analysis",nameAr:"تحليل الحي المختصر",description:`يحتاج ${3-e} إحالات إضافية`,icon:"🔒",unlocked:!1,required:3}),e<10&&t.push({id:"founder_tester",name:"Founder Tester",nameAr:"مختبر مؤسس",description:`يحتاج ${10-e} إحالات إضافية`,icon:"🔒",unlocked:!1,required:10}),t}function fN(){const[e]=pt.useState("demo_user"),[t,i]=pt.useState(""),[a,f]=pt.useState(""),[y,m]=pt.useState(""),[c,M]=pt.useState({clicks:0,signups:0,qualified:0}),[C,D]=pt.useState([]),[O,B]=pt.useState(!1),[F,X]=pt.useState(!1),[Z,U]=pt.useState(!1);pt.useEffect(()=>{const ue=uN(e);i(ue);const J=cI(ue);f(J);const oe=hN(ue);M(oe);const me=dN(oe.qualified);D(me),sN(ue).then(_e=>m(_e))},[e]);const te=()=>{navigator.clipboard.writeText(t),B(!0),setTimeout(()=>B(!1),2e3)},ae=()=>{navigator.clipboard.writeText(a),X(!0),setTimeout(()=>X(!1),2e3)},ne=async()=>{if(navigator.share)try{await navigator.share({title:"مُثمّن - تقييم عقاري ذكي",text:"جرّب مُثمّن للتقييم العقاري بالذكاء الاصطناعي",url:a})}catch(ue){console.log("خطأ في المشاركة:",ue)}else ae()};return P.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted/30 py-12 px-4",children:P.jsxs("div",{className:"container mx-auto max-w-5xl",children:[P.jsxs("div",{className:"text-center mb-12 space-y-4",children:[P.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-semibold mb-4",children:[P.jsx(XT,{className:"w-4 h-4"}),P.jsx("span",{children:"برنامج الإحالات"})]}),P.jsx("h1",{className:"text-4xl md:text-5xl font-black text-balance",children:"إحالاتي"}),P.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto text-balance",children:"انشر كودك وخَلّ مثمّن يكبر بعقلك"})]}),P.jsxs(zr,{className:"p-8 mb-8 card-gradient",children:[P.jsxs("div",{className:"text-center mb-6",children:[P.jsx("h2",{className:"text-2xl font-bold mb-2",children:"رمز الإحالة الخاص بك"}),P.jsx("p",{className:"text-muted-foreground",children:"كل إحالة ترفع ذكاء المنصّة وتحجز لك مزايا خاصّة"})]}),P.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[P.jsx("div",{className:"px-8 py-4 bg-gradient-to-r from-primary/10 to-purple-100 rounded-xl border-2 border-primary/20",children:P.jsx("span",{className:"text-4xl font-black tracking-wider",children:t})}),P.jsx(Na,{size:"lg",onClick:te,className:"gap-2",children:O?P.jsxs(P.Fragment,{children:[P.jsx(od,{className:"w-5 h-5"}),"تم النسخ"]}):P.jsxs(P.Fragment,{children:[P.jsx(a3,{className:"w-5 h-5"}),"نسخ"]})})]}),P.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 mb-6",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[P.jsx(f3,{className:"w-4 h-4 text-muted-foreground"}),P.jsx("span",{className:"text-sm font-semibold",children:"رابط الإحالة"})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("input",{type:"text",value:a,readOnly:!0,className:"flex-1 bg-white px-4 py-2 rounded-lg text-sm border",dir:"ltr"}),P.jsx(Na,{variant:"outline",size:"sm",onClick:ae,children:F?"تم النسخ":"نسخ"})]})]}),P.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[P.jsxs(Na,{variant:"outline",onClick:ne,className:"gap-2",children:[P.jsx(X3,{className:"w-4 h-4"}),"مشاركة"]}),P.jsxs(Na,{variant:"outline",onClick:()=>U(!Z),className:"gap-2",children:[P.jsx(L3,{className:"w-4 h-4"}),Z?"إخفاء QR":"إظهار QR"]})]}),Z&&y&&P.jsxs("div",{className:"mt-6 text-center animate-slide-in",children:[P.jsx("img",{src:y,alt:"QR Code",className:"w-48 h-48 mx-auto rounded-lg border-2 border-border"}),P.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"امسح الكود للوصول السريع"})]})]}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[P.jsx(zr,{className:"p-6 hover-lift",children:P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:P.jsx($_,{className:"w-6 h-6 text-blue-600"})}),P.jsxs("div",{children:[P.jsx("p",{className:"text-sm text-muted-foreground",children:"النقرات"}),P.jsx("p",{className:"text-3xl font-black",children:c.clicks})]})]})}),P.jsx(zr,{className:"p-6 hover-lift",children:P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:P.jsx(Hc,{className:"w-6 h-6 text-green-600"})}),P.jsxs("div",{children:[P.jsx("p",{className:"text-sm text-muted-foreground",children:"التسجيلات"}),P.jsx("p",{className:"text-3xl font-black",children:c.signups})]})]})}),P.jsx(zr,{className:"p-6 hover-lift",children:P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:P.jsx(od,{className:"w-6 h-6 text-purple-600"})}),P.jsxs("div",{children:[P.jsx("p",{className:"text-sm text-muted-foreground",children:"المؤهلة"}),P.jsx("p",{className:"text-3xl font-black",children:c.qualified})]})]})})]}),P.jsxs(zr,{className:"p-8",children:[P.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[P.jsx(XT,{className:"w-6 h-6 text-primary"}),P.jsx("h2",{className:"text-2xl font-bold",children:"جوائزك"})]}),P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(ue=>P.jsx("div",{className:`p-4 rounded-lg border-2 ${ue.unlocked?"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200":"bg-muted/30 border-border"}`,children:P.jsxs("div",{className:"flex items-start gap-3",children:[P.jsx("div",{className:"text-3xl",children:ue.icon}),P.jsxs("div",{className:"flex-1",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[P.jsx("h3",{className:"font-bold",children:ue.nameAr}),ue.unlocked&&P.jsx(Vg,{className:"bg-green-600",children:"مفعّلة"})]}),P.jsx("p",{className:"text-sm text-muted-foreground",children:ue.description})]})]})},ue.id))}),c.qualified<10&&P.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:P.jsxs("p",{className:"text-sm text-blue-900",children:["💡 ",P.jsx("strong",{children:"قريبًا:"})," خريطة الوعي العقاري الأولى في المملكة 🇸🇦",P.jsx("br",{}),"افتحها بدعمك المبكر - ",10-c.qualified," إحالات إضافية فقط!"]})})]}),P.jsx(zr,{className:"mt-8 p-6 bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-200",children:P.jsxs("div",{className:"flex items-start gap-4",children:[P.jsx($u,{className:"w-6 h-6 text-purple-600 flex-shrink-0 mt-1"}),P.jsxs("div",{children:[P.jsx("h3",{className:"font-bold mb-2",children:"كيف تعمل الإحالات؟"}),P.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[P.jsx("li",{children:"• شارك رمزك أو رابطك مع أصدقائك"}),P.jsx("li",{children:"• عند تسجيلهم، تُحسب إحالة جديدة لك"}),P.jsx("li",{children:'• بعد تأكيد البريد الإلكتروني، تصبح الإحالة "مؤهلة"'}),P.jsx("li",{children:"• كل 1، 3، 10 إحالات مؤهلة تفتح مكافأة جديدة"}),P.jsx("li",{children:"• الحد الأقصى: 50 إحالة شهرياً في النسخة التجريبية"})]})]})]})})]})})}function TS(e){const t=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];return String(e).replace(/\d/g,i=>t[i])}function _f(e,t=!0){if(e==null)return"-";const i=new Intl.NumberFormat("ar-SA").format(e);return t?TS(i):i}function id(e,t=1,i=!0){if(e==null)return"-";const a=(e*100).toFixed(t);return`${i?TS(a):a}٪`}function e2(e,t=!0){return`${_f(e,t)} ر.س/م²`}function t2(e,t=!0){return`${_f(e,t)} ر.س/م²/شهر`}function pN(e){const t=new Date(e);return new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"long",day:"numeric"}).format(t)}function uI(e,t=!0){return`${t?TS(e):e} يوم`}function r2(e,t=!0){return id(e,0,t)}function mN(e,t,i=!0){return`${_f(e,i)} - ${_f(t,i)} ر.س/م²`}function YT(e,t=!0){return e>=1e6?`${_f((e/1e6).toFixed(1),t)} مليون`:e>=1e3?`${_f((e/1e3).toFixed(1),t)} ألف`:_f(e,t)}function Dg(e,t="change"){return t==="change"?e>0?"text-green-600":e<0?"text-red-600":"text-muted-foreground":t==="confidence"?e>=.8?"text-green-600":e>=.6?"text-amber-600":"text-red-600":"text-foreground"}function gN({data:e}){const t=[{id:"sale",title:"سعر البيع",value:e2(e.national.sale_price_per_m2),change:e.national.sale_yoy,icon:Ey,color:"blue"},{id:"rent",title:"سعر الإيجار",value:t2(e.national.rent_price_per_m2_month),change:e.national.rent_yoy,icon:Uv,color:"green"},{id:"sale_growth",title:"نمو البيع السنوي",value:id(e.national.sale_yoy),change:e.national.sale_yoy,icon:e.national.sale_yoy>0?Hc:Qw,color:e.national.sale_yoy>0?"green":"red"},{id:"rent_growth",title:"نمو الإيجار السنوي",value:id(e.national.rent_yoy),change:e.national.rent_yoy,icon:e.national.rent_yoy>0?Hc:Qw,color:e.national.rent_yoy>0?"green":"amber"},{id:"days_to_sell",title:"متوسط زمن البيع",value:uI(e.national.avg_days_to_sell),icon:oI,color:"purple"},{id:"confidence",title:"مستوى الثقة الوطني",value:r2(e.national.national_confidence),icon:sI,color:"amber"}],i=a=>{const f={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",red:"bg-red-100 text-red-600",amber:"bg-amber-100 text-amber-600",purple:"bg-purple-100 text-purple-600"};return f[a]||f.blue};return P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(a=>{const f=a.icon,y=i(a.color);return P.jsxs(zr,{className:"p-6 hover-lift",children:[P.jsxs("div",{className:"flex items-start justify-between mb-4",children:[P.jsx("div",{className:`p-3 rounded-xl ${y}`,children:P.jsx(f,{className:"w-6 h-6"})}),a.change!==void 0&&P.jsxs("div",{className:`text-sm font-semibold ${Dg(a.change,"change")}`,children:[a.change>0?"↗":a.change<0?"↘":"→"," ",id(Math.abs(a.change))]})]}),P.jsx("h3",{className:"text-sm text-muted-foreground mb-2",children:a.title}),P.jsx("p",{className:"text-2xl font-black",children:a.value})]},a.id)})})}function yN({cities:e}){const[t,i]=pt.useState(null);return P.jsxs("div",{children:[P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>P.jsxs(zr,{className:"p-6 hover-lift cursor-pointer",onClick:()=>i(a),children:[P.jsxs("div",{className:"flex items-start justify-between mb-4",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx($v,{className:"w-5 h-5 text-primary"}),P.jsx("h3",{className:"text-xl font-bold",children:a.name})]}),P.jsx(Vg,{variant:"secondary",children:r2(a.confidence)})]}),P.jsxs("div",{className:"space-y-3",children:[P.jsxs("div",{children:[P.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"سعر البيع"}),P.jsxs("div",{className:"flex items-baseline gap-2",children:[P.jsx("p",{className:"text-lg font-bold",children:e2(a.sale_price_per_m2)}),P.jsx("span",{className:`text-sm ${Dg(a.sale_yoy,"change")}`,children:id(a.sale_yoy)})]})]}),P.jsxs("div",{children:[P.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"سعر الإيجار"}),P.jsxs("div",{className:"flex items-baseline gap-2",children:[P.jsx("p",{className:"text-lg font-bold",children:t2(a.rent_price_per_m2_month)}),P.jsx("span",{className:`text-sm ${Dg(a.rent_yoy,"change")}`,children:id(a.rent_yoy)})]})]}),P.jsx("div",{className:"pt-3 border-t border-border",children:P.jsxs("div",{className:"flex items-center justify-between text-sm",children:[P.jsx("span",{className:"text-muted-foreground",children:"المعاملات"}),P.jsx("span",{className:"font-semibold",children:YT(a.transactions)})]})})]}),P.jsxs(Na,{variant:"ghost",size:"sm",className:"w-full mt-4 gap-2",children:[P.jsx(x3,{className:"w-4 h-4"}),"عرض التفاصيل"]})]},a.id))}),t&&P.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>i(null),children:P.jsxs(zr,{className:"max-w-2xl w-full p-8 animate-slide-in",onClick:a=>a.stopPropagation(),children:[P.jsxs("div",{className:"flex items-start justify-between mb-6",children:[P.jsxs("div",{children:[P.jsx("h2",{className:"text-3xl font-black mb-2",children:t.name}),P.jsx("p",{className:"text-muted-foreground",children:t.note})]}),P.jsx(Na,{variant:"ghost",size:"sm",onClick:()=>i(null),children:"✕"})]}),P.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[P.jsxs("div",{children:[P.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[P.jsx(Hc,{className:"w-4 h-4 text-blue-600"}),"أسعار البيع"]}),P.jsxs("div",{className:"space-y-2 text-sm",children:[P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-muted-foreground",children:"المتوسط"}),P.jsx("span",{className:"font-semibold",children:e2(t.sale_price_per_m2)})]}),P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-muted-foreground",children:"النطاق (P25-P75)"}),P.jsx("span",{className:"font-semibold text-xs",children:mN(t.sale_p25,t.sale_p75)})]}),P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-muted-foreground",children:"النمو السنوي"}),P.jsx("span",{className:`font-semibold ${Dg(t.sale_yoy,"change")}`,children:id(t.sale_yoy)})]})]})]}),P.jsxs("div",{children:[P.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[P.jsx(Hc,{className:"w-4 h-4 text-green-600"}),"أسعار الإيجار"]}),P.jsxs("div",{className:"space-y-2 text-sm",children:[P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-muted-foreground",children:"المتوسط"}),P.jsx("span",{className:"font-semibold",children:t2(t.rent_price_per_m2_month)})]}),P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-muted-foreground",children:"النطاق (P25-P75)"}),P.jsxs("span",{className:"font-semibold text-xs",children:[KT(t.rent_p25)," - ",KT(t.rent_p75)," ر.س"]})]}),P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-muted-foreground",children:"النمو السنوي"}),P.jsx("span",{className:`font-semibold ${Dg(t.rent_yoy,"change")}`,children:id(t.rent_yoy)})]})]})]})]}),P.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-6 border-t border-border",children:[P.jsxs("div",{className:"text-center",children:[P.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"متوسط زمن البيع"}),P.jsx("p",{className:"text-lg font-bold",children:uI(t.avg_days_to_sell)})]}),P.jsxs("div",{className:"text-center",children:[P.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"عدد المعاملات"}),P.jsx("p",{className:"text-lg font-bold",children:YT(t.transactions)})]}),P.jsxs("div",{className:"text-center",children:[P.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"مستوى الثقة"}),P.jsx("p",{className:"text-lg font-bold",children:r2(t.confidence)})]})]})]})})]})}function KT(e){return new Intl.NumberFormat("ar-SA").format(e)}var X0,QT;function ts(){if(QT)return X0;QT=1;var e=Array.isArray;return X0=e,X0}var W0,JT;function hI(){if(JT)return W0;JT=1;var e=typeof Av=="object"&&Av&&Av.Object===Object&&Av;return W0=e,W0}var Y0,eA;function Wc(){if(eA)return Y0;eA=1;var e=hI(),t=typeof self=="object"&&self&&self.Object===Object&&self,i=e||t||Function("return this")();return Y0=i,Y0}var K0,tA;function Cy(){if(tA)return K0;tA=1;var e=Wc(),t=e.Symbol;return K0=t,K0}var Q0,rA;function vN(){if(rA)return Q0;rA=1;var e=Cy(),t=Object.prototype,i=t.hasOwnProperty,a=t.toString,f=e?e.toStringTag:void 0;function y(m){var c=i.call(m,f),M=m[f];try{m[f]=void 0;var C=!0}catch{}var D=a.call(m);return C&&(c?m[f]=M:delete m[f]),D}return Q0=y,Q0}var J0,nA;function _N(){if(nA)return J0;nA=1;var e=Object.prototype,t=e.toString;function i(a){return t.call(a)}return J0=i,J0}var eb,iA;function Wu(){if(iA)return eb;iA=1;var e=Cy(),t=vN(),i=_N(),a="[object Null]",f="[object Undefined]",y=e?e.toStringTag:void 0;function m(c){return c==null?c===void 0?f:a:y&&y in Object(c)?t(c):i(c)}return eb=m,eb}var tb,aA;function Yu(){if(aA)return tb;aA=1;function e(t){return t!=null&&typeof t=="object"}return tb=e,tb}var rb,oA;function _m(){if(oA)return rb;oA=1;var e=Wu(),t=Yu(),i="[object Symbol]";function a(f){return typeof f=="symbol"||t(f)&&e(f)==i}return rb=a,rb}var nb,sA;function AS(){if(sA)return nb;sA=1;var e=ts(),t=_m(),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function f(y,m){if(e(y))return!1;var c=typeof y;return c=="number"||c=="symbol"||c=="boolean"||y==null||t(y)?!0:a.test(y)||!i.test(y)||m!=null&&y in Object(m)}return nb=f,nb}var ib,lA;function cd(){if(lA)return ib;lA=1;function e(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}return ib=e,ib}var ab,cA;function MS(){if(cA)return ab;cA=1;var e=Wu(),t=cd(),i="[object AsyncFunction]",a="[object Function]",f="[object GeneratorFunction]",y="[object Proxy]";function m(c){if(!t(c))return!1;var M=e(c);return M==a||M==f||M==i||M==y}return ab=m,ab}var ob,uA;function bN(){if(uA)return ob;uA=1;var e=Wc(),t=e["__core-js_shared__"];return ob=t,ob}var sb,hA;function xN(){if(hA)return sb;hA=1;var e=bN(),t=function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function i(a){return!!t&&t in a}return sb=i,sb}var lb,dA;function dI(){if(dA)return lb;dA=1;var e=Function.prototype,t=e.toString;function i(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return lb=i,lb}var cb,fA;function wN(){if(fA)return cb;fA=1;var e=MS(),t=xN(),i=cd(),a=dI(),f=/[\\^$.*+?()[\]{}|]/g,y=/^\[object .+?Constructor\]$/,m=Function.prototype,c=Object.prototype,M=m.toString,C=c.hasOwnProperty,D=RegExp("^"+M.call(C).replace(f,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function O(B){if(!i(B)||t(B))return!1;var F=e(B)?D:y;return F.test(a(B))}return cb=O,cb}var ub,pA;function SN(){if(pA)return ub;pA=1;function e(t,i){return t==null?void 0:t[i]}return ub=e,ub}var hb,mA;function Ef(){if(mA)return hb;mA=1;var e=wN(),t=SN();function i(a,f){var y=t(a,f);return e(y)?y:void 0}return hb=i,hb}var db,gA;function q_(){if(gA)return db;gA=1;var e=Ef(),t=e(Object,"create");return db=t,db}var fb,yA;function TN(){if(yA)return fb;yA=1;var e=q_();function t(){this.__data__=e?e(null):{},this.size=0}return fb=t,fb}var pb,vA;function AN(){if(vA)return pb;vA=1;function e(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}return pb=e,pb}var mb,_A;function MN(){if(_A)return mb;_A=1;var e=q_(),t="__lodash_hash_undefined__",i=Object.prototype,a=i.hasOwnProperty;function f(y){var m=this.__data__;if(e){var c=m[y];return c===t?void 0:c}return a.call(m,y)?m[y]:void 0}return mb=f,mb}var gb,bA;function PN(){if(bA)return gb;bA=1;var e=q_(),t=Object.prototype,i=t.hasOwnProperty;function a(f){var y=this.__data__;return e?y[f]!==void 0:i.call(y,f)}return gb=a,gb}var yb,xA;function EN(){if(xA)return yb;xA=1;var e=q_(),t="__lodash_hash_undefined__";function i(a,f){var y=this.__data__;return this.size+=this.has(a)?0:1,y[a]=e&&f===void 0?t:f,this}return yb=i,yb}var vb,wA;function CN(){if(wA)return vb;wA=1;var e=TN(),t=AN(),i=MN(),a=PN(),f=EN();function y(m){var c=-1,M=m==null?0:m.length;for(this.clear();++c<M;){var C=m[c];this.set(C[0],C[1])}}return y.prototype.clear=e,y.prototype.delete=t,y.prototype.get=i,y.prototype.has=a,y.prototype.set=f,vb=y,vb}var _b,SA;function jN(){if(SA)return _b;SA=1;function e(){this.__data__=[],this.size=0}return _b=e,_b}var bb,TA;function PS(){if(TA)return bb;TA=1;function e(t,i){return t===i||t!==t&&i!==i}return bb=e,bb}var xb,AA;function U_(){if(AA)return xb;AA=1;var e=PS();function t(i,a){for(var f=i.length;f--;)if(e(i[f][0],a))return f;return-1}return xb=t,xb}var wb,MA;function ON(){if(MA)return wb;MA=1;var e=U_(),t=Array.prototype,i=t.splice;function a(f){var y=this.__data__,m=e(y,f);if(m<0)return!1;var c=y.length-1;return m==c?y.pop():i.call(y,m,1),--this.size,!0}return wb=a,wb}var Sb,PA;function IN(){if(PA)return Sb;PA=1;var e=U_();function t(i){var a=this.__data__,f=e(a,i);return f<0?void 0:a[f][1]}return Sb=t,Sb}var Tb,EA;function kN(){if(EA)return Tb;EA=1;var e=U_();function t(i){return e(this.__data__,i)>-1}return Tb=t,Tb}var Ab,CA;function zN(){if(CA)return Ab;CA=1;var e=U_();function t(i,a){var f=this.__data__,y=e(f,i);return y<0?(++this.size,f.push([i,a])):f[y][1]=a,this}return Ab=t,Ab}var Mb,jA;function V_(){if(jA)return Mb;jA=1;var e=jN(),t=ON(),i=IN(),a=kN(),f=zN();function y(m){var c=-1,M=m==null?0:m.length;for(this.clear();++c<M;){var C=m[c];this.set(C[0],C[1])}}return y.prototype.clear=e,y.prototype.delete=t,y.prototype.get=i,y.prototype.has=a,y.prototype.set=f,Mb=y,Mb}var Pb,OA;function ES(){if(OA)return Pb;OA=1;var e=Ef(),t=Wc(),i=e(t,"Map");return Pb=i,Pb}var Eb,IA;function DN(){if(IA)return Eb;IA=1;var e=CN(),t=V_(),i=ES();function a(){this.size=0,this.__data__={hash:new e,map:new(i||t),string:new e}}return Eb=a,Eb}var Cb,kA;function RN(){if(kA)return Cb;kA=1;function e(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}return Cb=e,Cb}var jb,zA;function G_(){if(zA)return jb;zA=1;var e=RN();function t(i,a){var f=i.__data__;return e(a)?f[typeof a=="string"?"string":"hash"]:f.map}return jb=t,jb}var Ob,DA;function NN(){if(DA)return Ob;DA=1;var e=G_();function t(i){var a=e(this,i).delete(i);return this.size-=a?1:0,a}return Ob=t,Ob}var Ib,RA;function LN(){if(RA)return Ib;RA=1;var e=G_();function t(i){return e(this,i).get(i)}return Ib=t,Ib}var kb,NA;function BN(){if(NA)return kb;NA=1;var e=G_();function t(i){return e(this,i).has(i)}return kb=t,kb}var zb,LA;function FN(){if(LA)return zb;LA=1;var e=G_();function t(i,a){var f=e(this,i),y=f.size;return f.set(i,a),this.size+=f.size==y?0:1,this}return zb=t,zb}var Db,BA;function CS(){if(BA)return Db;BA=1;var e=DN(),t=NN(),i=LN(),a=BN(),f=FN();function y(m){var c=-1,M=m==null?0:m.length;for(this.clear();++c<M;){var C=m[c];this.set(C[0],C[1])}}return y.prototype.clear=e,y.prototype.delete=t,y.prototype.get=i,y.prototype.has=a,y.prototype.set=f,Db=y,Db}var Rb,FA;function fI(){if(FA)return Rb;FA=1;var e=CS(),t="Expected a function";function i(a,f){if(typeof a!="function"||f!=null&&typeof f!="function")throw new TypeError(t);var y=function(){var m=arguments,c=f?f.apply(this,m):m[0],M=y.cache;if(M.has(c))return M.get(c);var C=a.apply(this,m);return y.cache=M.set(c,C)||M,C};return y.cache=new(i.Cache||e),y}return i.Cache=e,Rb=i,Rb}var Nb,$A;function $N(){if($A)return Nb;$A=1;var e=fI(),t=500;function i(a){var f=e(a,function(m){return y.size===t&&y.clear(),m}),y=f.cache;return f}return Nb=i,Nb}var Lb,qA;function qN(){if(qA)return Lb;qA=1;var e=$N(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=e(function(f){var y=[];return f.charCodeAt(0)===46&&y.push(""),f.replace(t,function(m,c,M,C){y.push(M?C.replace(i,"$1"):c||m)}),y});return Lb=a,Lb}var Bb,UA;function jS(){if(UA)return Bb;UA=1;function e(t,i){for(var a=-1,f=t==null?0:t.length,y=Array(f);++a<f;)y[a]=i(t[a],a,t);return y}return Bb=e,Bb}var Fb,VA;function UN(){if(VA)return Fb;VA=1;var e=Cy(),t=jS(),i=ts(),a=_m(),f=e?e.prototype:void 0,y=f?f.toString:void 0;function m(c){if(typeof c=="string")return c;if(i(c))return t(c,m)+"";if(a(c))return y?y.call(c):"";var M=c+"";return M=="0"&&1/c==-1/0?"-0":M}return Fb=m,Fb}var $b,GA;function pI(){if(GA)return $b;GA=1;var e=UN();function t(i){return i==null?"":e(i)}return $b=t,$b}var qb,ZA;function mI(){if(ZA)return qb;ZA=1;var e=ts(),t=AS(),i=qN(),a=pI();function f(y,m){return e(y)?y:t(y,m)?[y]:i(a(y))}return qb=f,qb}var Ub,HA;function Z_(){if(HA)return Ub;HA=1;var e=_m();function t(i){if(typeof i=="string"||e(i))return i;var a=i+"";return a=="0"&&1/i==-1/0?"-0":a}return Ub=t,Ub}var Vb,XA;function OS(){if(XA)return Vb;XA=1;var e=mI(),t=Z_();function i(a,f){f=e(f,a);for(var y=0,m=f.length;a!=null&&y<m;)a=a[t(f[y++])];return y&&y==m?a:void 0}return Vb=i,Vb}var Gb,WA;function gI(){if(WA)return Gb;WA=1;var e=OS();function t(i,a,f){var y=i==null?void 0:e(i,a);return y===void 0?f:y}return Gb=t,Gb}var VN=gI();const al=kn(VN);var Zb,YA;function GN(){if(YA)return Zb;YA=1;function e(t){return t==null}return Zb=e,Zb}var ZN=GN();const Wr=kn(ZN);var Hb,KA;function HN(){if(KA)return Hb;KA=1;var e=Wu(),t=ts(),i=Yu(),a="[object String]";function f(y){return typeof y=="string"||!t(y)&&i(y)&&e(y)==a}return Hb=f,Hb}var XN=HN();const Sf=kn(XN);var WN=MS();const Lr=kn(WN);var YN=cd();const bm=kn(YN);var Xb={exports:{}},xn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QA;function KN(){if(QA)return xn;QA=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),m=Symbol.for("react.context"),c=Symbol.for("react.server_context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),X;X=Symbol.for("react.module.reference");function Z(U){if(typeof U=="object"&&U!==null){var te=U.$$typeof;switch(te){case e:switch(U=U.type,U){case i:case f:case a:case C:case D:return U;default:switch(U=U&&U.$$typeof,U){case c:case m:case M:case B:case O:case y:return U;default:return te}}case t:return te}}}return xn.ContextConsumer=m,xn.ContextProvider=y,xn.Element=e,xn.ForwardRef=M,xn.Fragment=i,xn.Lazy=B,xn.Memo=O,xn.Portal=t,xn.Profiler=f,xn.StrictMode=a,xn.Suspense=C,xn.SuspenseList=D,xn.isAsyncMode=function(){return!1},xn.isConcurrentMode=function(){return!1},xn.isContextConsumer=function(U){return Z(U)===m},xn.isContextProvider=function(U){return Z(U)===y},xn.isElement=function(U){return typeof U=="object"&&U!==null&&U.$$typeof===e},xn.isForwardRef=function(U){return Z(U)===M},xn.isFragment=function(U){return Z(U)===i},xn.isLazy=function(U){return Z(U)===B},xn.isMemo=function(U){return Z(U)===O},xn.isPortal=function(U){return Z(U)===t},xn.isProfiler=function(U){return Z(U)===f},xn.isStrictMode=function(U){return Z(U)===a},xn.isSuspense=function(U){return Z(U)===C},xn.isSuspenseList=function(U){return Z(U)===D},xn.isValidElementType=function(U){return typeof U=="string"||typeof U=="function"||U===i||U===f||U===a||U===C||U===D||U===F||typeof U=="object"&&U!==null&&(U.$$typeof===B||U.$$typeof===O||U.$$typeof===y||U.$$typeof===m||U.$$typeof===M||U.$$typeof===X||U.getModuleId!==void 0)},xn.typeOf=Z,xn}var JA;function QN(){return JA||(JA=1,Xb.exports=KN()),Xb.exports}var JN=QN(),Wb,eM;function yI(){if(eM)return Wb;eM=1;var e=Wu(),t=Yu(),i="[object Number]";function a(f){return typeof f=="number"||t(f)&&e(f)==i}return Wb=a,Wb}var Yb,tM;function e5(){if(tM)return Yb;tM=1;var e=yI();function t(i){return e(i)&&i!=+i}return Yb=t,Yb}var t5=e5();const jy=kn(t5);var r5=yI();const n5=kn(r5);var oc=function(t){return t===0?0:t>0?1:-1},pf=function(t){return Sf(t)&&t.indexOf("%")===t.length-1},Dt=function(t){return n5(t)&&!jy(t)},sa=function(t){return Dt(t)||Sf(t)},i5=0,Oy=function(t){var i=++i5;return"".concat(t||"").concat(i)},Tf=function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Dt(t)&&!Sf(t))return a;var y;if(pf(t)){var m=t.indexOf("%");y=i*parseFloat(t.slice(0,m))/100}else y=+t;return jy(y)&&(y=a),f&&y>i&&(y=i),y},nd=function(t){if(!t)return null;var i=Object.keys(t);return i&&i.length?t[i[0]]:null},a5=function(t){if(!Array.isArray(t))return!1;for(var i=t.length,a={},f=0;f<i;f++)if(!a[t[f]])a[t[f]]=!0;else return!0;return!1},ic=function(t,i){return Dt(t)&&Dt(i)?function(a){return t+a*(i-t)}:function(){return i}};function Vv(e,t,i){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):al(a,t))===i})}var o5=function(t,i){return Dt(t)&&Dt(i)?t-i:Sf(t)&&Sf(i)?t.localeCompare(i):t instanceof Date&&i instanceof Date?t.getTime()-i.getTime():String(t).localeCompare(String(i))};function Gp(e,t){for(var i in e)if({}.hasOwnProperty.call(e,i)&&(!{}.hasOwnProperty.call(t,i)||e[i]!==t[i]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function n2(e){"@babel/helpers - typeof";return n2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n2(e)}var s5=["viewBox","children"],l5=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],rM=["points","pathLength"],Kb={svg:s5,polygon:rM,polyline:rM},IS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Gv=function(t,i){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(pt.isValidElement(t)&&(a=t.props),!bm(a))return null;var f={};return Object.keys(a).forEach(function(y){IS.includes(y)&&(f[y]=i||function(m){return a[y](a,m)})}),f},c5=function(t,i,a){return function(f){return t(i,a,f),null}},Zv=function(t,i,a){if(!bm(t)||n2(t)!=="object")return null;var f=null;return Object.keys(t).forEach(function(y){var m=t[y];IS.includes(y)&&typeof m=="function"&&(f||(f={}),f[y]=c5(m,i,a))}),f},u5=["children"],h5=["children"];function nM(e,t){if(e==null)return{};var i=d5(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function d5(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function i2(e){"@babel/helpers - typeof";return i2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i2(e)}var iM={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},qu=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},aM=null,Qb=null,kS=function e(t){if(t===aM&&Array.isArray(Qb))return Qb;var i=[];return pt.Children.forEach(t,function(a){Wr(a)||(JN.isFragment(a)?i=i.concat(e(a.props.children)):i.push(a))}),Qb=i,aM=t,i};function ol(e,t){var i=[],a=[];return Array.isArray(t)?a=t.map(function(f){return qu(f)}):a=[qu(t)],kS(e).forEach(function(f){var y=al(f,"type.displayName")||al(f,"type.name");a.indexOf(y)!==-1&&i.push(f)}),i}function xs(e,t){var i=ol(e,t);return i&&i[0]}var oM=function(t){if(!t||!t.props)return!1;var i=t.props,a=i.width,f=i.height;return!(!Dt(a)||a<=0||!Dt(f)||f<=0)},f5=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],p5=function(t){return t&&t.type&&Sf(t.type)&&f5.indexOf(t.type)>=0},m5=function(t){return t&&i2(t)==="object"&&"clipDot"in t},g5=function(t,i,a,f){var y,m=(y=Kb==null?void 0:Kb[f])!==null&&y!==void 0?y:[];return i.startsWith("data-")||!Lr(t)&&(f&&m.includes(i)||l5.includes(i))||a&&IS.includes(i)},en=function(t,i,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var f=t;if(pt.isValidElement(t)&&(f=t.props),!bm(f))return null;var y={};return Object.keys(f).forEach(function(m){var c;g5((c=f)===null||c===void 0?void 0:c[m],m,i,a)&&(y[m]=f[m])}),y},a2=function e(t,i){if(t===i)return!0;var a=pt.Children.count(t);if(a!==pt.Children.count(i))return!1;if(a===0)return!0;if(a===1)return sM(Array.isArray(t)?t[0]:t,Array.isArray(i)?i[0]:i);for(var f=0;f<a;f++){var y=t[f],m=i[f];if(Array.isArray(y)||Array.isArray(m)){if(!e(y,m))return!1}else if(!sM(y,m))return!1}return!0},sM=function(t,i){if(Wr(t)&&Wr(i))return!0;if(!Wr(t)&&!Wr(i)){var a=t.props||{},f=a.children,y=nM(a,u5),m=i.props||{},c=m.children,M=nM(m,h5);return f&&c?Gp(y,M)&&a2(f,c):!f&&!c?Gp(y,M):!1}return!1},lM=function(t,i){var a=[],f={};return kS(t).forEach(function(y,m){if(p5(y))a.push(y);else if(y){var c=qu(y.type),M=i[c]||{},C=M.handler,D=M.once;if(C&&(!D||!f[c])){var O=C(y,c,m);a.push(O),f[c]=!0}}}),a},y5=function(t){var i=t&&t.type;return i&&iM[i]?iM[i]:null},v5=function(t,i){return kS(i).indexOf(t)},_5=["children","width","height","viewBox","className","style","title","desc"];function o2(){return o2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},o2.apply(this,arguments)}function b5(e,t){if(e==null)return{};var i=x5(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function x5(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function s2(e){var t=e.children,i=e.width,a=e.height,f=e.viewBox,y=e.className,m=e.style,c=e.title,M=e.desc,C=b5(e,_5),D=f||{width:i,height:a,x:0,y:0},O=sn("recharts-surface",y);return $e.createElement("svg",o2({},en(C,!0,"svg"),{className:O,width:i,height:a,style:m,viewBox:"".concat(D.x," ").concat(D.y," ").concat(D.width," ").concat(D.height)}),$e.createElement("title",null,c),$e.createElement("desc",null,M),t)}var w5=["children","className"];function l2(){return l2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},l2.apply(this,arguments)}function S5(e,t){if(e==null)return{};var i=T5(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function T5(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var ji=$e.forwardRef(function(e,t){var i=e.children,a=e.className,f=S5(e,w5),y=sn("recharts-layer",a);return $e.createElement("g",l2({className:y},en(f,!0),{ref:t}),i)}),Uu=function(t,i){for(var a=arguments.length,f=new Array(a>2?a-2:0),y=2;y<a;y++)f[y-2]=arguments[y]},Jb,cM;function A5(){if(cM)return Jb;cM=1;function e(t,i,a){var f=-1,y=t.length;i<0&&(i=-i>y?0:y+i),a=a>y?y:a,a<0&&(a+=y),y=i>a?0:a-i>>>0,i>>>=0;for(var m=Array(y);++f<y;)m[f]=t[f+i];return m}return Jb=e,Jb}var ex,uM;function M5(){if(uM)return ex;uM=1;var e=A5();function t(i,a,f){var y=i.length;return f=f===void 0?y:f,!a&&f>=y?i:e(i,a,f)}return ex=t,ex}var tx,hM;function vI(){if(hM)return tx;hM=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",f=t+i+a,y="\\ufe0e\\ufe0f",m="\\u200d",c=RegExp("["+m+e+f+y+"]");function M(C){return c.test(C)}return tx=M,tx}var rx,dM;function P5(){if(dM)return rx;dM=1;function e(t){return t.split("")}return rx=e,rx}var nx,fM;function E5(){if(fM)return nx;fM=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",f=t+i+a,y="\\ufe0e\\ufe0f",m="["+e+"]",c="["+f+"]",M="\\ud83c[\\udffb-\\udfff]",C="(?:"+c+"|"+M+")",D="[^"+e+"]",O="(?:\\ud83c[\\udde6-\\uddff]){2}",B="[\\ud800-\\udbff][\\udc00-\\udfff]",F="\\u200d",X=C+"?",Z="["+y+"]?",U="(?:"+F+"(?:"+[D,O,B].join("|")+")"+Z+X+")*",te=Z+X+U,ae="(?:"+[D+c+"?",c,O,B,m].join("|")+")",ne=RegExp(M+"(?="+M+")|"+ae+te,"g");function ue(J){return J.match(ne)||[]}return nx=ue,nx}var ix,pM;function C5(){if(pM)return ix;pM=1;var e=P5(),t=vI(),i=E5();function a(f){return t(f)?i(f):e(f)}return ix=a,ix}var ax,mM;function j5(){if(mM)return ax;mM=1;var e=M5(),t=vI(),i=C5(),a=pI();function f(y){return function(m){m=a(m);var c=t(m)?i(m):void 0,M=c?c[0]:m.charAt(0),C=c?e(c,1).join(""):m.slice(1);return M[y]()+C}}return ax=f,ax}var ox,gM;function O5(){if(gM)return ox;gM=1;var e=j5(),t=e("toUpperCase");return ox=t,ox}var I5=O5();const H_=kn(I5);function Hn(e){return function(){return e}}const _I=Math.cos,Hv=Math.sin,sc=Math.sqrt,Xv=Math.PI,X_=2*Xv,c2=Math.PI,u2=2*c2,df=1e-6,k5=u2-df;function bI(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function z5(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return bI;const i=10**t;return function(a){this._+=a[0];for(let f=1,y=a.length;f<y;++f)this._+=Math.round(arguments[f]*i)/i+a[f]}}class D5{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?bI:z5(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,a,f){this._append`Q${+t},${+i},${this._x1=+a},${this._y1=+f}`}bezierCurveTo(t,i,a,f,y,m){this._append`C${+t},${+i},${+a},${+f},${this._x1=+y},${this._y1=+m}`}arcTo(t,i,a,f,y){if(t=+t,i=+i,a=+a,f=+f,y=+y,y<0)throw new Error(`negative radius: ${y}`);let m=this._x1,c=this._y1,M=a-t,C=f-i,D=m-t,O=c-i,B=D*D+O*O;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(B>df)if(!(Math.abs(O*M-C*D)>df)||!y)this._append`L${this._x1=t},${this._y1=i}`;else{let F=a-m,X=f-c,Z=M*M+C*C,U=F*F+X*X,te=Math.sqrt(Z),ae=Math.sqrt(B),ne=y*Math.tan((c2-Math.acos((Z+B-U)/(2*te*ae)))/2),ue=ne/ae,J=ne/te;Math.abs(ue-1)>df&&this._append`L${t+ue*D},${i+ue*O}`,this._append`A${y},${y},0,0,${+(O*F>D*X)},${this._x1=t+J*M},${this._y1=i+J*C}`}}arc(t,i,a,f,y,m){if(t=+t,i=+i,a=+a,m=!!m,a<0)throw new Error(`negative radius: ${a}`);let c=a*Math.cos(f),M=a*Math.sin(f),C=t+c,D=i+M,O=1^m,B=m?f-y:y-f;this._x1===null?this._append`M${C},${D}`:(Math.abs(this._x1-C)>df||Math.abs(this._y1-D)>df)&&this._append`L${C},${D}`,a&&(B<0&&(B=B%u2+u2),B>k5?this._append`A${a},${a},0,1,${O},${t-c},${i-M}A${a},${a},0,1,${O},${this._x1=C},${this._y1=D}`:B>df&&this._append`A${a},${a},0,${+(B>=c2)},${O},${this._x1=t+a*Math.cos(y)},${this._y1=i+a*Math.sin(y)}`)}rect(t,i,a,f){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${a=+a}v${+f}h${-a}Z`}toString(){return this._}}function zS(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const a=Math.floor(i);if(!(a>=0))throw new RangeError(`invalid digits: ${i}`);t=a}return e},()=>new D5(t)}function DS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xI(e){this._context=e}xI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function W_(e){return new xI(e)}function wI(e){return e[0]}function SI(e){return e[1]}function TI(e,t){var i=Hn(!0),a=null,f=W_,y=null,m=zS(c);e=typeof e=="function"?e:e===void 0?wI:Hn(e),t=typeof t=="function"?t:t===void 0?SI:Hn(t);function c(M){var C,D=(M=DS(M)).length,O,B=!1,F;for(a==null&&(y=f(F=m())),C=0;C<=D;++C)!(C<D&&i(O=M[C],C,M))===B&&((B=!B)?y.lineStart():y.lineEnd()),B&&y.point(+e(O,C,M),+t(O,C,M));if(F)return y=null,F+""||null}return c.x=function(M){return arguments.length?(e=typeof M=="function"?M:Hn(+M),c):e},c.y=function(M){return arguments.length?(t=typeof M=="function"?M:Hn(+M),c):t},c.defined=function(M){return arguments.length?(i=typeof M=="function"?M:Hn(!!M),c):i},c.curve=function(M){return arguments.length?(f=M,a!=null&&(y=f(a)),c):f},c.context=function(M){return arguments.length?(M==null?a=y=null:y=f(a=M),c):a},c}function Ev(e,t,i){var a=null,f=Hn(!0),y=null,m=W_,c=null,M=zS(C);e=typeof e=="function"?e:e===void 0?wI:Hn(+e),t=typeof t=="function"?t:Hn(t===void 0?0:+t),i=typeof i=="function"?i:i===void 0?SI:Hn(+i);function C(O){var B,F,X,Z=(O=DS(O)).length,U,te=!1,ae,ne=new Array(Z),ue=new Array(Z);for(y==null&&(c=m(ae=M())),B=0;B<=Z;++B){if(!(B<Z&&f(U=O[B],B,O))===te)if(te=!te)F=B,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),X=B-1;X>=F;--X)c.point(ne[X],ue[X]);c.lineEnd(),c.areaEnd()}te&&(ne[B]=+e(U,B,O),ue[B]=+t(U,B,O),c.point(a?+a(U,B,O):ne[B],i?+i(U,B,O):ue[B]))}if(ae)return c=null,ae+""||null}function D(){return TI().defined(f).curve(m).context(y)}return C.x=function(O){return arguments.length?(e=typeof O=="function"?O:Hn(+O),a=null,C):e},C.x0=function(O){return arguments.length?(e=typeof O=="function"?O:Hn(+O),C):e},C.x1=function(O){return arguments.length?(a=O==null?null:typeof O=="function"?O:Hn(+O),C):a},C.y=function(O){return arguments.length?(t=typeof O=="function"?O:Hn(+O),i=null,C):t},C.y0=function(O){return arguments.length?(t=typeof O=="function"?O:Hn(+O),C):t},C.y1=function(O){return arguments.length?(i=O==null?null:typeof O=="function"?O:Hn(+O),C):i},C.lineX0=C.lineY0=function(){return D().x(e).y(t)},C.lineY1=function(){return D().x(e).y(i)},C.lineX1=function(){return D().x(a).y(t)},C.defined=function(O){return arguments.length?(f=typeof O=="function"?O:Hn(!!O),C):f},C.curve=function(O){return arguments.length?(m=O,y!=null&&(c=m(y)),C):m},C.context=function(O){return arguments.length?(O==null?y=c=null:c=m(y=O),C):y},C}class AI{constructor(t,i){this._context=t,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,i){switch(t=+t,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,i,t,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,t,this._y0,t,i);break}}this._x0=t,this._y0=i}}function R5(e){return new AI(e,!0)}function N5(e){return new AI(e,!1)}const RS={draw(e,t){const i=sc(t/Xv);e.moveTo(i,0),e.arc(0,0,i,0,X_)}},L5={draw(e,t){const i=sc(t/5)/2;e.moveTo(-3*i,-i),e.lineTo(-i,-i),e.lineTo(-i,-3*i),e.lineTo(i,-3*i),e.lineTo(i,-i),e.lineTo(3*i,-i),e.lineTo(3*i,i),e.lineTo(i,i),e.lineTo(i,3*i),e.lineTo(-i,3*i),e.lineTo(-i,i),e.lineTo(-3*i,i),e.closePath()}},MI=sc(1/3),B5=MI*2,F5={draw(e,t){const i=sc(t/B5),a=i*MI;e.moveTo(0,-i),e.lineTo(a,0),e.lineTo(0,i),e.lineTo(-a,0),e.closePath()}},$5={draw(e,t){const i=sc(t),a=-i/2;e.rect(a,a,i,i)}},q5=.8908130915292852,PI=Hv(Xv/10)/Hv(7*Xv/10),U5=Hv(X_/10)*PI,V5=-_I(X_/10)*PI,G5={draw(e,t){const i=sc(t*q5),a=U5*i,f=V5*i;e.moveTo(0,-i),e.lineTo(a,f);for(let y=1;y<5;++y){const m=X_*y/5,c=_I(m),M=Hv(m);e.lineTo(M*i,-c*i),e.lineTo(c*a-M*f,M*a+c*f)}e.closePath()}},sx=sc(3),Z5={draw(e,t){const i=-sc(t/(sx*3));e.moveTo(0,i*2),e.lineTo(-sx*i,-i),e.lineTo(sx*i,-i),e.closePath()}},rl=-.5,nl=sc(3)/2,h2=1/sc(12),H5=(h2/2+1)*3,X5={draw(e,t){const i=sc(t/H5),a=i/2,f=i*h2,y=a,m=i*h2+i,c=-y,M=m;e.moveTo(a,f),e.lineTo(y,m),e.lineTo(c,M),e.lineTo(rl*a-nl*f,nl*a+rl*f),e.lineTo(rl*y-nl*m,nl*y+rl*m),e.lineTo(rl*c-nl*M,nl*c+rl*M),e.lineTo(rl*a+nl*f,rl*f-nl*a),e.lineTo(rl*y+nl*m,rl*m-nl*y),e.lineTo(rl*c+nl*M,rl*M-nl*c),e.closePath()}};function W5(e,t){let i=null,a=zS(f);e=typeof e=="function"?e:Hn(e||RS),t=typeof t=="function"?t:Hn(t===void 0?64:+t);function f(){let y;if(i||(i=y=a()),e.apply(this,arguments).draw(i,+t.apply(this,arguments)),y)return i=null,y+""||null}return f.type=function(y){return arguments.length?(e=typeof y=="function"?y:Hn(y),f):e},f.size=function(y){return arguments.length?(t=typeof y=="function"?y:Hn(+y),f):t},f.context=function(y){return arguments.length?(i=y??null,f):i},f}function Wv(){}function Yv(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function EI(e){this._context=e}EI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Y5(e){return new EI(e)}function CI(e){this._context=e}CI.prototype={areaStart:Wv,areaEnd:Wv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Yv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function K5(e){return new CI(e)}function jI(e){this._context=e}jI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,a):this._context.moveTo(i,a);break;case 3:this._point=4;default:Yv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Q5(e){return new jI(e)}function OI(e){this._context=e}OI.prototype={areaStart:Wv,areaEnd:Wv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function J5(e){return new OI(e)}function yM(e){return e<0?-1:1}function vM(e,t,i){var a=e._x1-e._x0,f=t-e._x1,y=(e._y1-e._y0)/(a||f<0&&-0),m=(i-e._y1)/(f||a<0&&-0),c=(y*f+m*a)/(a+f);return(yM(y)+yM(m))*Math.min(Math.abs(y),Math.abs(m),.5*Math.abs(c))||0}function _M(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function lx(e,t,i){var a=e._x0,f=e._y0,y=e._x1,m=e._y1,c=(y-a)/3;e._context.bezierCurveTo(a+c,f+c*t,y-c,m-c*i,y,m)}function Kv(e){this._context=e}Kv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lx(this,this._t0,_M(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var i=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,lx(this,_M(this,i=vM(this,e,t)),i);break;default:lx(this,this._t0,i=vM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}};function II(e){this._context=new kI(e)}(II.prototype=Object.create(Kv.prototype)).point=function(e,t){Kv.prototype.point.call(this,t,e)};function kI(e){this._context=e}kI.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,i,a,f,y){this._context.bezierCurveTo(t,e,a,i,y,f)}};function e4(e){return new Kv(e)}function t4(e){return new II(e)}function zI(e){this._context=e}zI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,i=e.length;if(i)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),i===2)this._context.lineTo(e[1],t[1]);else for(var a=bM(e),f=bM(t),y=0,m=1;m<i;++y,++m)this._context.bezierCurveTo(a[0][y],f[0][y],a[1][y],f[1][y],e[m],t[m]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function bM(e){var t,i=e.length-1,a,f=new Array(i),y=new Array(i),m=new Array(i);for(f[0]=0,y[0]=2,m[0]=e[0]+2*e[1],t=1;t<i-1;++t)f[t]=1,y[t]=4,m[t]=4*e[t]+2*e[t+1];for(f[i-1]=2,y[i-1]=7,m[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)a=f[t]/y[t-1],y[t]-=a,m[t]-=a*m[t-1];for(f[i-1]=m[i-1]/y[i-1],t=i-2;t>=0;--t)f[t]=(m[t]-f[t+1])/y[t];for(y[i-1]=(e[i]+f[i-1])/2,t=0;t<i-1;++t)y[t]=2*e[t+1]-f[t+1];return[f,y]}function r4(e){return new zI(e)}function Y_(e,t){this._context=e,this._t=t}Y_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}break}}this._x=e,this._y=t}};function n4(e){return new Y_(e,.5)}function i4(e){return new Y_(e,0)}function a4(e){return new Y_(e,1)}function Xp(e,t){if((m=e.length)>1)for(var i=1,a,f,y=e[t[0]],m,c=y.length;i<m;++i)for(f=y,y=e[t[i]],a=0;a<c;++a)y[a][1]+=y[a][0]=isNaN(f[a][1])?f[a][0]:f[a][1]}function d2(e){for(var t=e.length,i=new Array(t);--t>=0;)i[t]=t;return i}function o4(e,t){return e[t]}function s4(e){const t=[];return t.key=e,t}function l4(){var e=Hn([]),t=d2,i=Xp,a=o4;function f(y){var m=Array.from(e.apply(this,arguments),s4),c,M=m.length,C=-1,D;for(const O of y)for(c=0,++C;c<M;++c)(m[c][C]=[0,+a(O,m[c].key,C,y)]).data=O;for(c=0,D=DS(t(m));c<M;++c)m[D[c]].index=c;return i(m,D),m}return f.keys=function(y){return arguments.length?(e=typeof y=="function"?y:Hn(Array.from(y)),f):e},f.value=function(y){return arguments.length?(a=typeof y=="function"?y:Hn(+y),f):a},f.order=function(y){return arguments.length?(t=y==null?d2:typeof y=="function"?y:Hn(Array.from(y)),f):t},f.offset=function(y){return arguments.length?(i=y??Xp,f):i},f}function c4(e,t){if((a=e.length)>0){for(var i,a,f=0,y=e[0].length,m;f<y;++f){for(m=i=0;i<a;++i)m+=e[i][f][1]||0;if(m)for(i=0;i<a;++i)e[i][f][1]/=m}Xp(e,t)}}function u4(e,t){if((f=e.length)>0){for(var i=0,a=e[t[0]],f,y=a.length;i<y;++i){for(var m=0,c=0;m<f;++m)c+=e[m][i][1]||0;a[i][1]+=a[i][0]=-c/2}Xp(e,t)}}function h4(e,t){if(!(!((m=e.length)>0)||!((y=(f=e[t[0]]).length)>0))){for(var i=0,a=1,f,y,m;a<y;++a){for(var c=0,M=0,C=0;c<m;++c){for(var D=e[t[c]],O=D[a][1]||0,B=D[a-1][1]||0,F=(O-B)/2,X=0;X<c;++X){var Z=e[t[X]],U=Z[a][1]||0,te=Z[a-1][1]||0;F+=U-te}M+=O,C+=F*O}f[a-1][1]+=f[a-1][0]=i,M&&(i-=C/M)}f[a-1][1]+=f[a-1][0]=i,Xp(e,t)}}function Gg(e){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gg(e)}var d4=["type","size","sizeType"];function f2(){return f2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},f2.apply(this,arguments)}function xM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function wM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?xM(Object(i),!0).forEach(function(a){f4(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function f4(e,t,i){return t=p4(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p4(e){var t=m4(e,"string");return Gg(t)=="symbol"?t:t+""}function m4(e,t){if(Gg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Gg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g4(e,t){if(e==null)return{};var i=y4(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function y4(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var DI={symbolCircle:RS,symbolCross:L5,symbolDiamond:F5,symbolSquare:$5,symbolStar:G5,symbolTriangle:Z5,symbolWye:X5},v4=Math.PI/180,_4=function(t){var i="symbol".concat(H_(t));return DI[i]||RS},b4=function(t,i,a){if(i==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var f=18*v4;return 1.25*t*t*(Math.tan(f)-Math.tan(f*2)*Math.pow(Math.tan(f),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},x4=function(t,i){DI["symbol".concat(H_(t))]=i},NS=function(t){var i=t.type,a=i===void 0?"circle":i,f=t.size,y=f===void 0?64:f,m=t.sizeType,c=m===void 0?"area":m,M=g4(t,d4),C=wM(wM({},M),{},{type:a,size:y,sizeType:c}),D=function(){var U=_4(a),te=W5().type(U).size(b4(y,c,a));return te()},O=C.className,B=C.cx,F=C.cy,X=en(C,!0);return B===+B&&F===+F&&y===+y?$e.createElement("path",f2({},X,{className:sn("recharts-symbols",O),transform:"translate(".concat(B,", ").concat(F,")"),d:D()})):null};NS.registerSymbol=x4;function Wp(e){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function p2(){return p2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},p2.apply(this,arguments)}function SM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function w4(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?SM(Object(i),!0).forEach(function(a){Zg(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):SM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function S4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T4(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,NI(a.key),a)}}function A4(e,t,i){return t&&T4(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function M4(e,t,i){return t=Qv(t),P4(e,RI()?Reflect.construct(t,i||[],Qv(e).constructor):t.apply(e,i))}function P4(e,t){if(t&&(Wp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E4(e)}function E4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RI=function(){return!!e})()}function Qv(e){return Qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Qv(e)}function C4(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m2(e,t)}function m2(e,t){return m2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},m2(e,t)}function Zg(e,t,i){return t=NI(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function NI(e){var t=j4(e,"string");return Wp(t)=="symbol"?t:t+""}function j4(e,t){if(Wp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Wp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ec=32,LS=function(e){function t(){return S4(this,t),M4(this,t,arguments)}return C4(t,e),A4(t,[{key:"renderIcon",value:function(a){var f=this.props.inactiveColor,y=ec/2,m=ec/6,c=ec/3,M=a.inactive?f:a.color;if(a.type==="plainline")return $e.createElement("line",{strokeWidth:4,fill:"none",stroke:M,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:y,x2:ec,y2:y,className:"recharts-legend-icon"});if(a.type==="line")return $e.createElement("path",{strokeWidth:4,fill:"none",stroke:M,d:"M0,".concat(y,"h").concat(c,`
            A`).concat(m,",").concat(m,",0,1,1,").concat(2*c,",").concat(y,`
            H`).concat(ec,"M").concat(2*c,",").concat(y,`
            A`).concat(m,",").concat(m,",0,1,1,").concat(c,",").concat(y),className:"recharts-legend-icon"});if(a.type==="rect")return $e.createElement("path",{stroke:"none",fill:M,d:"M0,".concat(ec/8,"h").concat(ec,"v").concat(ec*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if($e.isValidElement(a.legendIcon)){var C=w4({},a);return delete C.legendIcon,$e.cloneElement(a.legendIcon,C)}return $e.createElement(NS,{fill:M,cx:y,cy:y,size:ec,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,f=this.props,y=f.payload,m=f.iconSize,c=f.layout,M=f.formatter,C=f.inactiveColor,D={x:0,y:0,width:ec,height:ec},O={display:c==="horizontal"?"inline-block":"block",marginRight:10},B={display:"inline-block",verticalAlign:"middle",marginRight:4};return y.map(function(F,X){var Z=F.formatter||M,U=sn(Zg(Zg({"recharts-legend-item":!0},"legend-item-".concat(X),!0),"inactive",F.inactive));if(F.type==="none")return null;var te=Lr(F.value)?null:F.value;Uu(!Lr(F.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var ae=F.inactive?C:F.color;return $e.createElement("li",p2({className:U,style:O,key:"legend-item-".concat(X)},Zv(a.props,F,X)),$e.createElement(s2,{width:m,height:m,viewBox:D,style:B},a.renderIcon(F)),$e.createElement("span",{className:"recharts-legend-item-text",style:{color:ae}},Z?Z(te,F,X):te))})}},{key:"render",value:function(){var a=this.props,f=a.payload,y=a.layout,m=a.align;if(!f||!f.length)return null;var c={padding:0,margin:0,textAlign:y==="horizontal"?m:"left"};return $e.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])}(pt.PureComponent);Zg(LS,"displayName","Legend");Zg(LS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var cx,TM;function O4(){if(TM)return cx;TM=1;var e=V_();function t(){this.__data__=new e,this.size=0}return cx=t,cx}var ux,AM;function I4(){if(AM)return ux;AM=1;function e(t){var i=this.__data__,a=i.delete(t);return this.size=i.size,a}return ux=e,ux}var hx,MM;function k4(){if(MM)return hx;MM=1;function e(t){return this.__data__.get(t)}return hx=e,hx}var dx,PM;function z4(){if(PM)return dx;PM=1;function e(t){return this.__data__.has(t)}return dx=e,dx}var fx,EM;function D4(){if(EM)return fx;EM=1;var e=V_(),t=ES(),i=CS(),a=200;function f(y,m){var c=this.__data__;if(c instanceof e){var M=c.__data__;if(!t||M.length<a-1)return M.push([y,m]),this.size=++c.size,this;c=this.__data__=new i(M)}return c.set(y,m),this.size=c.size,this}return fx=f,fx}var px,CM;function LI(){if(CM)return px;CM=1;var e=V_(),t=O4(),i=I4(),a=k4(),f=z4(),y=D4();function m(c){var M=this.__data__=new e(c);this.size=M.size}return m.prototype.clear=t,m.prototype.delete=i,m.prototype.get=a,m.prototype.has=f,m.prototype.set=y,px=m,px}var mx,jM;function R4(){if(jM)return mx;jM=1;var e="__lodash_hash_undefined__";function t(i){return this.__data__.set(i,e),this}return mx=t,mx}var gx,OM;function N4(){if(OM)return gx;OM=1;function e(t){return this.__data__.has(t)}return gx=e,gx}var yx,IM;function BI(){if(IM)return yx;IM=1;var e=CS(),t=R4(),i=N4();function a(f){var y=-1,m=f==null?0:f.length;for(this.__data__=new e;++y<m;)this.add(f[y])}return a.prototype.add=a.prototype.push=t,a.prototype.has=i,yx=a,yx}var vx,kM;function FI(){if(kM)return vx;kM=1;function e(t,i){for(var a=-1,f=t==null?0:t.length;++a<f;)if(i(t[a],a,t))return!0;return!1}return vx=e,vx}var _x,zM;function $I(){if(zM)return _x;zM=1;function e(t,i){return t.has(i)}return _x=e,_x}var bx,DM;function qI(){if(DM)return bx;DM=1;var e=BI(),t=FI(),i=$I(),a=1,f=2;function y(m,c,M,C,D,O){var B=M&a,F=m.length,X=c.length;if(F!=X&&!(B&&X>F))return!1;var Z=O.get(m),U=O.get(c);if(Z&&U)return Z==c&&U==m;var te=-1,ae=!0,ne=M&f?new e:void 0;for(O.set(m,c),O.set(c,m);++te<F;){var ue=m[te],J=c[te];if(C)var oe=B?C(J,ue,te,c,m,O):C(ue,J,te,m,c,O);if(oe!==void 0){if(oe)continue;ae=!1;break}if(ne){if(!t(c,function(me,_e){if(!i(ne,_e)&&(ue===me||D(ue,me,M,C,O)))return ne.push(_e)})){ae=!1;break}}else if(!(ue===J||D(ue,J,M,C,O))){ae=!1;break}}return O.delete(m),O.delete(c),ae}return bx=y,bx}var xx,RM;function L4(){if(RM)return xx;RM=1;var e=Wc(),t=e.Uint8Array;return xx=t,xx}var wx,NM;function B4(){if(NM)return wx;NM=1;function e(t){var i=-1,a=Array(t.size);return t.forEach(function(f,y){a[++i]=[y,f]}),a}return wx=e,wx}var Sx,LM;function BS(){if(LM)return Sx;LM=1;function e(t){var i=-1,a=Array(t.size);return t.forEach(function(f){a[++i]=f}),a}return Sx=e,Sx}var Tx,BM;function F4(){if(BM)return Tx;BM=1;var e=Cy(),t=L4(),i=PS(),a=qI(),f=B4(),y=BS(),m=1,c=2,M="[object Boolean]",C="[object Date]",D="[object Error]",O="[object Map]",B="[object Number]",F="[object RegExp]",X="[object Set]",Z="[object String]",U="[object Symbol]",te="[object ArrayBuffer]",ae="[object DataView]",ne=e?e.prototype:void 0,ue=ne?ne.valueOf:void 0;function J(oe,me,_e,ke,at,ze,Fe){switch(_e){case ae:if(oe.byteLength!=me.byteLength||oe.byteOffset!=me.byteOffset)return!1;oe=oe.buffer,me=me.buffer;case te:return!(oe.byteLength!=me.byteLength||!ze(new t(oe),new t(me)));case M:case C:case B:return i(+oe,+me);case D:return oe.name==me.name&&oe.message==me.message;case F:case Z:return oe==me+"";case O:var tt=f;case X:var ut=ke&m;if(tt||(tt=y),oe.size!=me.size&&!ut)return!1;var rt=Fe.get(oe);if(rt)return rt==me;ke|=c,Fe.set(oe,me);var Pe=a(tt(oe),tt(me),ke,at,ze,Fe);return Fe.delete(oe),Pe;case U:if(ue)return ue.call(oe)==ue.call(me)}return!1}return Tx=J,Tx}var Ax,FM;function UI(){if(FM)return Ax;FM=1;function e(t,i){for(var a=-1,f=i.length,y=t.length;++a<f;)t[y+a]=i[a];return t}return Ax=e,Ax}var Mx,$M;function $4(){if($M)return Mx;$M=1;var e=UI(),t=ts();function i(a,f,y){var m=f(a);return t(a)?m:e(m,y(a))}return Mx=i,Mx}var Px,qM;function q4(){if(qM)return Px;qM=1;function e(t,i){for(var a=-1,f=t==null?0:t.length,y=0,m=[];++a<f;){var c=t[a];i(c,a,t)&&(m[y++]=c)}return m}return Px=e,Px}var Ex,UM;function U4(){if(UM)return Ex;UM=1;function e(){return[]}return Ex=e,Ex}var Cx,VM;function V4(){if(VM)return Cx;VM=1;var e=q4(),t=U4(),i=Object.prototype,a=i.propertyIsEnumerable,f=Object.getOwnPropertySymbols,y=f?function(m){return m==null?[]:(m=Object(m),e(f(m),function(c){return a.call(m,c)}))}:t;return Cx=y,Cx}var jx,GM;function G4(){if(GM)return jx;GM=1;function e(t,i){for(var a=-1,f=Array(t);++a<t;)f[a]=i(a);return f}return jx=e,jx}var Ox,ZM;function Z4(){if(ZM)return Ox;ZM=1;var e=Wu(),t=Yu(),i="[object Arguments]";function a(f){return t(f)&&e(f)==i}return Ox=a,Ox}var Ix,HM;function FS(){if(HM)return Ix;HM=1;var e=Z4(),t=Yu(),i=Object.prototype,a=i.hasOwnProperty,f=i.propertyIsEnumerable,y=e(function(){return arguments}())?e:function(m){return t(m)&&a.call(m,"callee")&&!f.call(m,"callee")};return Ix=y,Ix}var Rg={exports:{}},kx,XM;function H4(){if(XM)return kx;XM=1;function e(){return!1}return kx=e,kx}Rg.exports;var WM;function VI(){return WM||(WM=1,function(e,t){var i=Wc(),a=H4(),f=t&&!t.nodeType&&t,y=f&&!0&&e&&!e.nodeType&&e,m=y&&y.exports===f,c=m?i.Buffer:void 0,M=c?c.isBuffer:void 0,C=M||a;e.exports=C}(Rg,Rg.exports)),Rg.exports}var zx,YM;function $S(){if(YM)return zx;YM=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function i(a,f){var y=typeof a;return f=f??e,!!f&&(y=="number"||y!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<f}return zx=i,zx}var Dx,KM;function qS(){if(KM)return Dx;KM=1;var e=9007199254740991;function t(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=e}return Dx=t,Dx}var Rx,QM;function X4(){if(QM)return Rx;QM=1;var e=Wu(),t=qS(),i=Yu(),a="[object Arguments]",f="[object Array]",y="[object Boolean]",m="[object Date]",c="[object Error]",M="[object Function]",C="[object Map]",D="[object Number]",O="[object Object]",B="[object RegExp]",F="[object Set]",X="[object String]",Z="[object WeakMap]",U="[object ArrayBuffer]",te="[object DataView]",ae="[object Float32Array]",ne="[object Float64Array]",ue="[object Int8Array]",J="[object Int16Array]",oe="[object Int32Array]",me="[object Uint8Array]",_e="[object Uint8ClampedArray]",ke="[object Uint16Array]",at="[object Uint32Array]",ze={};ze[ae]=ze[ne]=ze[ue]=ze[J]=ze[oe]=ze[me]=ze[_e]=ze[ke]=ze[at]=!0,ze[a]=ze[f]=ze[U]=ze[y]=ze[te]=ze[m]=ze[c]=ze[M]=ze[C]=ze[D]=ze[O]=ze[B]=ze[F]=ze[X]=ze[Z]=!1;function Fe(tt){return i(tt)&&t(tt.length)&&!!ze[e(tt)]}return Rx=Fe,Rx}var Nx,JM;function GI(){if(JM)return Nx;JM=1;function e(t){return function(i){return t(i)}}return Nx=e,Nx}var Ng={exports:{}};Ng.exports;var eP;function W4(){return eP||(eP=1,function(e,t){var i=hI(),a=t&&!t.nodeType&&t,f=a&&!0&&e&&!e.nodeType&&e,y=f&&f.exports===a,m=y&&i.process,c=function(){try{var M=f&&f.require&&f.require("util").types;return M||m&&m.binding&&m.binding("util")}catch{}}();e.exports=c}(Ng,Ng.exports)),Ng.exports}var Lx,tP;function ZI(){if(tP)return Lx;tP=1;var e=X4(),t=GI(),i=W4(),a=i&&i.isTypedArray,f=a?t(a):e;return Lx=f,Lx}var Bx,rP;function Y4(){if(rP)return Bx;rP=1;var e=G4(),t=FS(),i=ts(),a=VI(),f=$S(),y=ZI(),m=Object.prototype,c=m.hasOwnProperty;function M(C,D){var O=i(C),B=!O&&t(C),F=!O&&!B&&a(C),X=!O&&!B&&!F&&y(C),Z=O||B||F||X,U=Z?e(C.length,String):[],te=U.length;for(var ae in C)(D||c.call(C,ae))&&!(Z&&(ae=="length"||F&&(ae=="offset"||ae=="parent")||X&&(ae=="buffer"||ae=="byteLength"||ae=="byteOffset")||f(ae,te)))&&U.push(ae);return U}return Bx=M,Bx}var Fx,nP;function K4(){if(nP)return Fx;nP=1;var e=Object.prototype;function t(i){var a=i&&i.constructor,f=typeof a=="function"&&a.prototype||e;return i===f}return Fx=t,Fx}var $x,iP;function HI(){if(iP)return $x;iP=1;function e(t,i){return function(a){return t(i(a))}}return $x=e,$x}var qx,aP;function Q4(){if(aP)return qx;aP=1;var e=HI(),t=e(Object.keys,Object);return qx=t,qx}var Ux,oP;function J4(){if(oP)return Ux;oP=1;var e=K4(),t=Q4(),i=Object.prototype,a=i.hasOwnProperty;function f(y){if(!e(y))return t(y);var m=[];for(var c in Object(y))a.call(y,c)&&c!="constructor"&&m.push(c);return m}return Ux=f,Ux}var Vx,sP;function Iy(){if(sP)return Vx;sP=1;var e=MS(),t=qS();function i(a){return a!=null&&t(a.length)&&!e(a)}return Vx=i,Vx}var Gx,lP;function K_(){if(lP)return Gx;lP=1;var e=Y4(),t=J4(),i=Iy();function a(f){return i(f)?e(f):t(f)}return Gx=a,Gx}var Zx,cP;function eL(){if(cP)return Zx;cP=1;var e=$4(),t=V4(),i=K_();function a(f){return e(f,i,t)}return Zx=a,Zx}var Hx,uP;function tL(){if(uP)return Hx;uP=1;var e=eL(),t=1,i=Object.prototype,a=i.hasOwnProperty;function f(y,m,c,M,C,D){var O=c&t,B=e(y),F=B.length,X=e(m),Z=X.length;if(F!=Z&&!O)return!1;for(var U=F;U--;){var te=B[U];if(!(O?te in m:a.call(m,te)))return!1}var ae=D.get(y),ne=D.get(m);if(ae&&ne)return ae==m&&ne==y;var ue=!0;D.set(y,m),D.set(m,y);for(var J=O;++U<F;){te=B[U];var oe=y[te],me=m[te];if(M)var _e=O?M(me,oe,te,m,y,D):M(oe,me,te,y,m,D);if(!(_e===void 0?oe===me||C(oe,me,c,M,D):_e)){ue=!1;break}J||(J=te=="constructor")}if(ue&&!J){var ke=y.constructor,at=m.constructor;ke!=at&&"constructor"in y&&"constructor"in m&&!(typeof ke=="function"&&ke instanceof ke&&typeof at=="function"&&at instanceof at)&&(ue=!1)}return D.delete(y),D.delete(m),ue}return Hx=f,Hx}var Xx,hP;function rL(){if(hP)return Xx;hP=1;var e=Ef(),t=Wc(),i=e(t,"DataView");return Xx=i,Xx}var Wx,dP;function nL(){if(dP)return Wx;dP=1;var e=Ef(),t=Wc(),i=e(t,"Promise");return Wx=i,Wx}var Yx,fP;function XI(){if(fP)return Yx;fP=1;var e=Ef(),t=Wc(),i=e(t,"Set");return Yx=i,Yx}var Kx,pP;function iL(){if(pP)return Kx;pP=1;var e=Ef(),t=Wc(),i=e(t,"WeakMap");return Kx=i,Kx}var Qx,mP;function aL(){if(mP)return Qx;mP=1;var e=rL(),t=ES(),i=nL(),a=XI(),f=iL(),y=Wu(),m=dI(),c="[object Map]",M="[object Object]",C="[object Promise]",D="[object Set]",O="[object WeakMap]",B="[object DataView]",F=m(e),X=m(t),Z=m(i),U=m(a),te=m(f),ae=y;return(e&&ae(new e(new ArrayBuffer(1)))!=B||t&&ae(new t)!=c||i&&ae(i.resolve())!=C||a&&ae(new a)!=D||f&&ae(new f)!=O)&&(ae=function(ne){var ue=y(ne),J=ue==M?ne.constructor:void 0,oe=J?m(J):"";if(oe)switch(oe){case F:return B;case X:return c;case Z:return C;case U:return D;case te:return O}return ue}),Qx=ae,Qx}var Jx,gP;function oL(){if(gP)return Jx;gP=1;var e=LI(),t=qI(),i=F4(),a=tL(),f=aL(),y=ts(),m=VI(),c=ZI(),M=1,C="[object Arguments]",D="[object Array]",O="[object Object]",B=Object.prototype,F=B.hasOwnProperty;function X(Z,U,te,ae,ne,ue){var J=y(Z),oe=y(U),me=J?D:f(Z),_e=oe?D:f(U);me=me==C?O:me,_e=_e==C?O:_e;var ke=me==O,at=_e==O,ze=me==_e;if(ze&&m(Z)){if(!m(U))return!1;J=!0,ke=!1}if(ze&&!ke)return ue||(ue=new e),J||c(Z)?t(Z,U,te,ae,ne,ue):i(Z,U,me,te,ae,ne,ue);if(!(te&M)){var Fe=ke&&F.call(Z,"__wrapped__"),tt=at&&F.call(U,"__wrapped__");if(Fe||tt){var ut=Fe?Z.value():Z,rt=tt?U.value():U;return ue||(ue=new e),ne(ut,rt,te,ae,ue)}}return ze?(ue||(ue=new e),a(Z,U,te,ae,ne,ue)):!1}return Jx=X,Jx}var e1,yP;function US(){if(yP)return e1;yP=1;var e=oL(),t=Yu();function i(a,f,y,m,c){return a===f?!0:a==null||f==null||!t(a)&&!t(f)?a!==a&&f!==f:e(a,f,y,m,i,c)}return e1=i,e1}var t1,vP;function sL(){if(vP)return t1;vP=1;var e=LI(),t=US(),i=1,a=2;function f(y,m,c,M){var C=c.length,D=C,O=!M;if(y==null)return!D;for(y=Object(y);C--;){var B=c[C];if(O&&B[2]?B[1]!==y[B[0]]:!(B[0]in y))return!1}for(;++C<D;){B=c[C];var F=B[0],X=y[F],Z=B[1];if(O&&B[2]){if(X===void 0&&!(F in y))return!1}else{var U=new e;if(M)var te=M(X,Z,F,y,m,U);if(!(te===void 0?t(Z,X,i|a,M,U):te))return!1}}return!0}return t1=f,t1}var r1,_P;function WI(){if(_P)return r1;_P=1;var e=cd();function t(i){return i===i&&!e(i)}return r1=t,r1}var n1,bP;function lL(){if(bP)return n1;bP=1;var e=WI(),t=K_();function i(a){for(var f=t(a),y=f.length;y--;){var m=f[y],c=a[m];f[y]=[m,c,e(c)]}return f}return n1=i,n1}var i1,xP;function YI(){if(xP)return i1;xP=1;function e(t,i){return function(a){return a==null?!1:a[t]===i&&(i!==void 0||t in Object(a))}}return i1=e,i1}var a1,wP;function cL(){if(wP)return a1;wP=1;var e=sL(),t=lL(),i=YI();function a(f){var y=t(f);return y.length==1&&y[0][2]?i(y[0][0],y[0][1]):function(m){return m===f||e(m,f,y)}}return a1=a,a1}var o1,SP;function uL(){if(SP)return o1;SP=1;function e(t,i){return t!=null&&i in Object(t)}return o1=e,o1}var s1,TP;function hL(){if(TP)return s1;TP=1;var e=mI(),t=FS(),i=ts(),a=$S(),f=qS(),y=Z_();function m(c,M,C){M=e(M,c);for(var D=-1,O=M.length,B=!1;++D<O;){var F=y(M[D]);if(!(B=c!=null&&C(c,F)))break;c=c[F]}return B||++D!=O?B:(O=c==null?0:c.length,!!O&&f(O)&&a(F,O)&&(i(c)||t(c)))}return s1=m,s1}var l1,AP;function dL(){if(AP)return l1;AP=1;var e=uL(),t=hL();function i(a,f){return a!=null&&t(a,f,e)}return l1=i,l1}var c1,MP;function fL(){if(MP)return c1;MP=1;var e=US(),t=gI(),i=dL(),a=AS(),f=WI(),y=YI(),m=Z_(),c=1,M=2;function C(D,O){return a(D)&&f(O)?y(m(D),O):function(B){var F=t(B,D);return F===void 0&&F===O?i(B,D):e(O,F,c|M)}}return c1=C,c1}var u1,PP;function xm(){if(PP)return u1;PP=1;function e(t){return t}return u1=e,u1}var h1,EP;function pL(){if(EP)return h1;EP=1;function e(t){return function(i){return i==null?void 0:i[t]}}return h1=e,h1}var d1,CP;function mL(){if(CP)return d1;CP=1;var e=OS();function t(i){return function(a){return e(a,i)}}return d1=t,d1}var f1,jP;function gL(){if(jP)return f1;jP=1;var e=pL(),t=mL(),i=AS(),a=Z_();function f(y){return i(y)?e(a(y)):t(y)}return f1=f,f1}var p1,OP;function ud(){if(OP)return p1;OP=1;var e=cL(),t=fL(),i=xm(),a=ts(),f=gL();function y(m){return typeof m=="function"?m:m==null?i:typeof m=="object"?a(m)?t(m[0],m[1]):e(m):f(m)}return p1=y,p1}var m1,IP;function KI(){if(IP)return m1;IP=1;function e(t,i,a,f){for(var y=t.length,m=a+(f?1:-1);f?m--:++m<y;)if(i(t[m],m,t))return m;return-1}return m1=e,m1}var g1,kP;function yL(){if(kP)return g1;kP=1;function e(t){return t!==t}return g1=e,g1}var y1,zP;function vL(){if(zP)return y1;zP=1;function e(t,i,a){for(var f=a-1,y=t.length;++f<y;)if(t[f]===i)return f;return-1}return y1=e,y1}var v1,DP;function _L(){if(DP)return v1;DP=1;var e=KI(),t=yL(),i=vL();function a(f,y,m){return y===y?i(f,y,m):e(f,t,m)}return v1=a,v1}var _1,RP;function bL(){if(RP)return _1;RP=1;var e=_L();function t(i,a){var f=i==null?0:i.length;return!!f&&e(i,a,0)>-1}return _1=t,_1}var b1,NP;function xL(){if(NP)return b1;NP=1;function e(t,i,a){for(var f=-1,y=t==null?0:t.length;++f<y;)if(a(i,t[f]))return!0;return!1}return b1=e,b1}var x1,LP;function wL(){if(LP)return x1;LP=1;function e(){}return x1=e,x1}var w1,BP;function SL(){if(BP)return w1;BP=1;var e=XI(),t=wL(),i=BS(),a=1/0,f=e&&1/i(new e([,-0]))[1]==a?function(y){return new e(y)}:t;return w1=f,w1}var S1,FP;function TL(){if(FP)return S1;FP=1;var e=BI(),t=bL(),i=xL(),a=$I(),f=SL(),y=BS(),m=200;function c(M,C,D){var O=-1,B=t,F=M.length,X=!0,Z=[],U=Z;if(D)X=!1,B=i;else if(F>=m){var te=C?null:f(M);if(te)return y(te);X=!1,B=a,U=new e}else U=C?[]:Z;e:for(;++O<F;){var ae=M[O],ne=C?C(ae):ae;if(ae=D||ae!==0?ae:0,X&&ne===ne){for(var ue=U.length;ue--;)if(U[ue]===ne)continue e;C&&U.push(ne),Z.push(ae)}else B(U,ne,D)||(U!==Z&&U.push(ne),Z.push(ae))}return Z}return S1=c,S1}var T1,$P;function AL(){if($P)return T1;$P=1;var e=ud(),t=TL();function i(a,f){return a&&a.length?t(a,e(f,2)):[]}return T1=i,T1}var ML=AL();const qP=kn(ML);function QI(e,t,i){return t===!0?qP(e,i):Lr(t)?qP(e,t):e}function Yp(e){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yp(e)}var PL=["ref"];function UP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Nu(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(i),!0).forEach(function(a){Q_(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):UP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function EL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VP(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ek(a.key),a)}}function CL(e,t,i){return t&&VP(e.prototype,t),i&&VP(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function jL(e,t,i){return t=Jv(t),OL(e,JI()?Reflect.construct(t,i||[],Jv(e).constructor):t.apply(e,i))}function OL(e,t){if(t&&(Yp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IL(e)}function IL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JI=function(){return!!e})()}function Jv(e){return Jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Jv(e)}function kL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g2(e,t)}function g2(e,t){return g2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},g2(e,t)}function Q_(e,t,i){return t=ek(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ek(e){var t=zL(e,"string");return Yp(t)=="symbol"?t:t+""}function zL(e,t){if(Yp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Yp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function DL(e,t){if(e==null)return{};var i=RL(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function RL(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function NL(e){return e.value}function LL(e,t){if($e.isValidElement(e))return $e.cloneElement(e,t);if(typeof e=="function")return $e.createElement(e,t);t.ref;var i=DL(t,PL);return $e.createElement(LS,i)}var GP=1,bf=function(e){function t(){var i;EL(this,t);for(var a=arguments.length,f=new Array(a),y=0;y<a;y++)f[y]=arguments[y];return i=jL(this,t,[].concat(f)),Q_(i,"lastBoundingBox",{width:-1,height:-1}),i}return kL(t,e),CL(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,f=this.getBBox();f?(Math.abs(f.width-this.lastBoundingBox.width)>GP||Math.abs(f.height-this.lastBoundingBox.height)>GP)&&(this.lastBoundingBox.width=f.width,this.lastBoundingBox.height=f.height,a&&a(f)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Nu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var f=this.props,y=f.layout,m=f.align,c=f.verticalAlign,M=f.margin,C=f.chartWidth,D=f.chartHeight,O,B;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(m==="center"&&y==="vertical"){var F=this.getBBoxSnapshot();O={left:((C||0)-F.width)/2}}else O=m==="right"?{right:M&&M.right||0}:{left:M&&M.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(c==="middle"){var X=this.getBBoxSnapshot();B={top:((D||0)-X.height)/2}}else B=c==="bottom"?{bottom:M&&M.bottom||0}:{top:M&&M.top||0};return Nu(Nu({},O),B)}},{key:"render",value:function(){var a=this,f=this.props,y=f.content,m=f.width,c=f.height,M=f.wrapperStyle,C=f.payloadUniqBy,D=f.payload,O=Nu(Nu({position:"absolute",width:m||"auto",height:c||"auto"},this.getDefaultPosition(M)),M);return $e.createElement("div",{className:"recharts-legend-wrapper",style:O,ref:function(F){a.wrapperNode=F}},LL(y,Nu(Nu({},this.props),{},{payload:QI(D,C,NL)})))}}],[{key:"getWithHeight",value:function(a,f){var y=Nu(Nu({},this.defaultProps),a.props),m=y.layout;return m==="vertical"&&Dt(a.props.height)?{height:a.props.height}:m==="horizontal"?{width:a.props.width||f}:null}}])}(pt.PureComponent);Q_(bf,"displayName","Legend");Q_(bf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var A1,ZP;function BL(){if(ZP)return A1;ZP=1;var e=Cy(),t=FS(),i=ts(),a=e?e.isConcatSpreadable:void 0;function f(y){return i(y)||t(y)||!!(a&&y&&y[a])}return A1=f,A1}var M1,HP;function tk(){if(HP)return M1;HP=1;var e=UI(),t=BL();function i(a,f,y,m,c){var M=-1,C=a.length;for(y||(y=t),c||(c=[]);++M<C;){var D=a[M];f>0&&y(D)?f>1?i(D,f-1,y,m,c):e(c,D):m||(c[c.length]=D)}return c}return M1=i,M1}var P1,XP;function FL(){if(XP)return P1;XP=1;function e(t){return function(i,a,f){for(var y=-1,m=Object(i),c=f(i),M=c.length;M--;){var C=c[t?M:++y];if(a(m[C],C,m)===!1)break}return i}}return P1=e,P1}var E1,WP;function $L(){if(WP)return E1;WP=1;var e=FL(),t=e();return E1=t,E1}var C1,YP;function rk(){if(YP)return C1;YP=1;var e=$L(),t=K_();function i(a,f){return a&&e(a,f,t)}return C1=i,C1}var j1,KP;function qL(){if(KP)return j1;KP=1;var e=Iy();function t(i,a){return function(f,y){if(f==null)return f;if(!e(f))return i(f,y);for(var m=f.length,c=a?m:-1,M=Object(f);(a?c--:++c<m)&&y(M[c],c,M)!==!1;);return f}}return j1=t,j1}var O1,QP;function VS(){if(QP)return O1;QP=1;var e=rk(),t=qL(),i=t(e);return O1=i,O1}var I1,JP;function nk(){if(JP)return I1;JP=1;var e=VS(),t=Iy();function i(a,f){var y=-1,m=t(a)?Array(a.length):[];return e(a,function(c,M,C){m[++y]=f(c,M,C)}),m}return I1=i,I1}var k1,eE;function UL(){if(eE)return k1;eE=1;function e(t,i){var a=t.length;for(t.sort(i);a--;)t[a]=t[a].value;return t}return k1=e,k1}var z1,tE;function VL(){if(tE)return z1;tE=1;var e=_m();function t(i,a){if(i!==a){var f=i!==void 0,y=i===null,m=i===i,c=e(i),M=a!==void 0,C=a===null,D=a===a,O=e(a);if(!C&&!O&&!c&&i>a||c&&M&&D&&!C&&!O||y&&M&&D||!f&&D||!m)return 1;if(!y&&!c&&!O&&i<a||O&&f&&m&&!y&&!c||C&&f&&m||!M&&m||!D)return-1}return 0}return z1=t,z1}var D1,rE;function GL(){if(rE)return D1;rE=1;var e=VL();function t(i,a,f){for(var y=-1,m=i.criteria,c=a.criteria,M=m.length,C=f.length;++y<M;){var D=e(m[y],c[y]);if(D){if(y>=C)return D;var O=f[y];return D*(O=="desc"?-1:1)}}return i.index-a.index}return D1=t,D1}var R1,nE;function ZL(){if(nE)return R1;nE=1;var e=jS(),t=OS(),i=ud(),a=nk(),f=UL(),y=GI(),m=GL(),c=xm(),M=ts();function C(D,O,B){O.length?O=e(O,function(Z){return M(Z)?function(U){return t(U,Z.length===1?Z[0]:Z)}:Z}):O=[c];var F=-1;O=e(O,y(i));var X=a(D,function(Z,U,te){var ae=e(O,function(ne){return ne(Z)});return{criteria:ae,index:++F,value:Z}});return f(X,function(Z,U){return m(Z,U,B)})}return R1=C,R1}var N1,iE;function HL(){if(iE)return N1;iE=1;function e(t,i,a){switch(a.length){case 0:return t.call(i);case 1:return t.call(i,a[0]);case 2:return t.call(i,a[0],a[1]);case 3:return t.call(i,a[0],a[1],a[2])}return t.apply(i,a)}return N1=e,N1}var L1,aE;function XL(){if(aE)return L1;aE=1;var e=HL(),t=Math.max;function i(a,f,y){return f=t(f===void 0?a.length-1:f,0),function(){for(var m=arguments,c=-1,M=t(m.length-f,0),C=Array(M);++c<M;)C[c]=m[f+c];c=-1;for(var D=Array(f+1);++c<f;)D[c]=m[c];return D[f]=y(C),e(a,this,D)}}return L1=i,L1}var B1,oE;function WL(){if(oE)return B1;oE=1;function e(t){return function(){return t}}return B1=e,B1}var F1,sE;function ik(){if(sE)return F1;sE=1;var e=Ef(),t=function(){try{var i=e(Object,"defineProperty");return i({},"",{}),i}catch{}}();return F1=t,F1}var $1,lE;function YL(){if(lE)return $1;lE=1;var e=WL(),t=ik(),i=xm(),a=t?function(f,y){return t(f,"toString",{configurable:!0,enumerable:!1,value:e(y),writable:!0})}:i;return $1=a,$1}var q1,cE;function KL(){if(cE)return q1;cE=1;var e=800,t=16,i=Date.now;function a(f){var y=0,m=0;return function(){var c=i(),M=t-(c-m);if(m=c,M>0){if(++y>=e)return arguments[0]}else y=0;return f.apply(void 0,arguments)}}return q1=a,q1}var U1,uE;function QL(){if(uE)return U1;uE=1;var e=YL(),t=KL(),i=t(e);return U1=i,U1}var V1,hE;function JL(){if(hE)return V1;hE=1;var e=xm(),t=XL(),i=QL();function a(f,y){return i(t(f,y,e),f+"")}return V1=a,V1}var G1,dE;function J_(){if(dE)return G1;dE=1;var e=PS(),t=Iy(),i=$S(),a=cd();function f(y,m,c){if(!a(c))return!1;var M=typeof m;return(M=="number"?t(c)&&i(m,c.length):M=="string"&&m in c)?e(c[m],y):!1}return G1=f,G1}var Z1,fE;function e6(){if(fE)return Z1;fE=1;var e=tk(),t=ZL(),i=JL(),a=J_(),f=i(function(y,m){if(y==null)return[];var c=m.length;return c>1&&a(y,m[0],m[1])?m=[]:c>2&&a(m[0],m[1],m[2])&&(m=[m[0]]),t(y,e(m,1),[])});return Z1=f,Z1}var t6=e6();const GS=kn(t6);function Hg(e){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hg(e)}function y2(){return y2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},y2.apply(this,arguments)}function r6(e,t){return o6(e)||a6(e,t)||i6(e,t)||n6()}function n6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i6(e,t){if(e){if(typeof e=="string")return pE(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return pE(e,t)}}function pE(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function a6(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,y,m,c=[],M=!0,C=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(c.push(a.value),c.length!==t);M=!0);}catch(D){C=!0,f=D}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return c}}function o6(e){if(Array.isArray(e))return e}function mE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function H1(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?mE(Object(i),!0).forEach(function(a){s6(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function s6(e,t,i){return t=l6(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l6(e){var t=c6(e,"string");return Hg(t)=="symbol"?t:t+""}function c6(e,t){if(Hg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Hg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u6(e){return Array.isArray(e)&&sa(e[0])&&sa(e[1])?e.join(" ~ "):e}var h6=function(t){var i=t.separator,a=i===void 0?" : ":i,f=t.contentStyle,y=f===void 0?{}:f,m=t.itemStyle,c=m===void 0?{}:m,M=t.labelStyle,C=M===void 0?{}:M,D=t.payload,O=t.formatter,B=t.itemSorter,F=t.wrapperClassName,X=t.labelClassName,Z=t.label,U=t.labelFormatter,te=t.accessibilityLayer,ae=te===void 0?!1:te,ne=function(){if(D&&D.length){var Fe={padding:0,margin:0},tt=(B?GS(D,B):D).map(function(ut,rt){if(ut.type==="none")return null;var Pe=H1({display:"block",paddingTop:4,paddingBottom:4,color:ut.color||"#000"},c),Ve=ut.formatter||O||u6,Ge=ut.value,ht=ut.name,be=Ge,Xe=ht;if(Ve&&be!=null&&Xe!=null){var ot=Ve(Ge,ht,ut,rt,D);if(Array.isArray(ot)){var st=r6(ot,2);be=st[0],Xe=st[1]}else be=ot}return $e.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(rt),style:Pe},sa(Xe)?$e.createElement("span",{className:"recharts-tooltip-item-name"},Xe):null,sa(Xe)?$e.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,$e.createElement("span",{className:"recharts-tooltip-item-value"},be),$e.createElement("span",{className:"recharts-tooltip-item-unit"},ut.unit||""))});return $e.createElement("ul",{className:"recharts-tooltip-item-list",style:Fe},tt)}return null},ue=H1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},y),J=H1({margin:0},C),oe=!Wr(Z),me=oe?Z:"",_e=sn("recharts-default-tooltip",F),ke=sn("recharts-tooltip-label",X);oe&&U&&D!==void 0&&D!==null&&(me=U(Z,D));var at=ae?{role:"status","aria-live":"assertive"}:{};return $e.createElement("div",y2({className:_e,style:ue},at),$e.createElement("p",{className:ke,style:J},$e.isValidElement(me)?me:"".concat(me)),ne())};function Xg(e){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xg(e)}function Cv(e,t,i){return t=d6(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d6(e){var t=f6(e,"string");return Xg(t)=="symbol"?t:t+""}function f6(e,t){if(Xg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Xg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tg="recharts-tooltip-wrapper",p6={visibility:"hidden"};function m6(e){var t=e.coordinate,i=e.translateX,a=e.translateY;return sn(Tg,Cv(Cv(Cv(Cv({},"".concat(Tg,"-right"),Dt(i)&&t&&Dt(t.x)&&i>=t.x),"".concat(Tg,"-left"),Dt(i)&&t&&Dt(t.x)&&i<t.x),"".concat(Tg,"-bottom"),Dt(a)&&t&&Dt(t.y)&&a>=t.y),"".concat(Tg,"-top"),Dt(a)&&t&&Dt(t.y)&&a<t.y))}function gE(e){var t=e.allowEscapeViewBox,i=e.coordinate,a=e.key,f=e.offsetTopLeft,y=e.position,m=e.reverseDirection,c=e.tooltipDimension,M=e.viewBox,C=e.viewBoxDimension;if(y&&Dt(y[a]))return y[a];var D=i[a]-c-f,O=i[a]+f;if(t[a])return m[a]?D:O;if(m[a]){var B=D,F=M[a];return B<F?Math.max(O,M[a]):Math.max(D,M[a])}var X=O+c,Z=M[a]+C;return X>Z?Math.max(D,M[a]):Math.max(O,M[a])}function g6(e){var t=e.translateX,i=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(i,"px, 0)"):"translate(".concat(t,"px, ").concat(i,"px)")}}function y6(e){var t=e.allowEscapeViewBox,i=e.coordinate,a=e.offsetTopLeft,f=e.position,y=e.reverseDirection,m=e.tooltipBox,c=e.useTranslate3d,M=e.viewBox,C,D,O;return m.height>0&&m.width>0&&i?(D=gE({allowEscapeViewBox:t,coordinate:i,key:"x",offsetTopLeft:a,position:f,reverseDirection:y,tooltipDimension:m.width,viewBox:M,viewBoxDimension:M.width}),O=gE({allowEscapeViewBox:t,coordinate:i,key:"y",offsetTopLeft:a,position:f,reverseDirection:y,tooltipDimension:m.height,viewBox:M,viewBoxDimension:M.height}),C=g6({translateX:D,translateY:O,useTranslate3d:c})):C=p6,{cssProperties:C,cssClasses:m6({translateX:D,translateY:O,coordinate:i})}}function Kp(e){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}function yE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function vE(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?yE(Object(i),!0).forEach(function(a){_2(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):yE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function v6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _6(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ok(a.key),a)}}function b6(e,t,i){return t&&_6(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function x6(e,t,i){return t=e_(t),w6(e,ak()?Reflect.construct(t,i||[],e_(e).constructor):t.apply(e,i))}function w6(e,t){if(t&&(Kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S6(e)}function S6(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ak(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ak=function(){return!!e})()}function e_(e){return e_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},e_(e)}function T6(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v2(e,t)}function v2(e,t){return v2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},v2(e,t)}function _2(e,t,i){return t=ok(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ok(e){var t=A6(e,"string");return Kp(t)=="symbol"?t:t+""}function A6(e,t){if(Kp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Kp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _E=1,M6=function(e){function t(){var i;v6(this,t);for(var a=arguments.length,f=new Array(a),y=0;y<a;y++)f[y]=arguments[y];return i=x6(this,t,[].concat(f)),_2(i,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),_2(i,"handleKeyDown",function(m){if(m.key==="Escape"){var c,M,C,D;i.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(M=i.props.coordinate)===null||M===void 0?void 0:M.x)!==null&&c!==void 0?c:0,y:(C=(D=i.props.coordinate)===null||D===void 0?void 0:D.y)!==null&&C!==void 0?C:0}})}}),i}return T6(t,e),b6(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>_E||Math.abs(a.height-this.state.lastBoundingBox.height)>_E)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,f;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((f=this.props.coordinate)===null||f===void 0?void 0:f.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,f=this.props,y=f.active,m=f.allowEscapeViewBox,c=f.animationDuration,M=f.animationEasing,C=f.children,D=f.coordinate,O=f.hasPayload,B=f.isAnimationActive,F=f.offset,X=f.position,Z=f.reverseDirection,U=f.useTranslate3d,te=f.viewBox,ae=f.wrapperStyle,ne=y6({allowEscapeViewBox:m,coordinate:D,offsetTopLeft:F,position:X,reverseDirection:Z,tooltipBox:this.state.lastBoundingBox,useTranslate3d:U,viewBox:te}),ue=ne.cssClasses,J=ne.cssProperties,oe=vE(vE({transition:B&&y?"transform ".concat(c,"ms ").concat(M):void 0},J),{},{pointerEvents:"none",visibility:!this.state.dismissed&&y&&O?"visible":"hidden",position:"absolute",top:0,left:0},ae);return $e.createElement("div",{tabIndex:-1,className:ue,style:oe,ref:function(_e){a.wrapperNode=_e}},C)}}])}(pt.PureComponent),P6=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},wm={isSsr:P6()};function Qp(e){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qp(e)}function bE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function xE(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?bE(Object(i),!0).forEach(function(a){ZS(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):bE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function E6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C6(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,lk(a.key),a)}}function j6(e,t,i){return t&&C6(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function O6(e,t,i){return t=t_(t),I6(e,sk()?Reflect.construct(t,i||[],t_(e).constructor):t.apply(e,i))}function I6(e,t){if(t&&(Qp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k6(e)}function k6(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sk=function(){return!!e})()}function t_(e){return t_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},t_(e)}function z6(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b2(e,t)}function b2(e,t){return b2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},b2(e,t)}function ZS(e,t,i){return t=lk(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function lk(e){var t=D6(e,"string");return Qp(t)=="symbol"?t:t+""}function D6(e,t){if(Qp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Qp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function R6(e){return e.dataKey}function N6(e,t){return $e.isValidElement(e)?$e.cloneElement(e,t):typeof e=="function"?$e.createElement(e,t):$e.createElement(h6,t)}var Uc=function(e){function t(){return E6(this,t),O6(this,t,arguments)}return z6(t,e),j6(t,[{key:"render",value:function(){var a=this,f=this.props,y=f.active,m=f.allowEscapeViewBox,c=f.animationDuration,M=f.animationEasing,C=f.content,D=f.coordinate,O=f.filterNull,B=f.isAnimationActive,F=f.offset,X=f.payload,Z=f.payloadUniqBy,U=f.position,te=f.reverseDirection,ae=f.useTranslate3d,ne=f.viewBox,ue=f.wrapperStyle,J=X??[];O&&J.length&&(J=QI(X.filter(function(me){return me.value!=null&&(me.hide!==!0||a.props.includeHidden)}),Z,R6));var oe=J.length>0;return $e.createElement(M6,{allowEscapeViewBox:m,animationDuration:c,animationEasing:M,isAnimationActive:B,active:y,coordinate:D,hasPayload:oe,offset:F,position:U,reverseDirection:te,useTranslate3d:ae,viewBox:ne,wrapperStyle:ue},N6(C,xE(xE({},this.props),{},{payload:J})))}}])}(pt.PureComponent);ZS(Uc,"displayName","Tooltip");ZS(Uc,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!wm.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var X1,wE;function L6(){if(wE)return X1;wE=1;var e=Wc(),t=function(){return e.Date.now()};return X1=t,X1}var W1,SE;function B6(){if(SE)return W1;SE=1;var e=/\s/;function t(i){for(var a=i.length;a--&&e.test(i.charAt(a)););return a}return W1=t,W1}var Y1,TE;function F6(){if(TE)return Y1;TE=1;var e=B6(),t=/^\s+/;function i(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return Y1=i,Y1}var K1,AE;function ck(){if(AE)return K1;AE=1;var e=F6(),t=cd(),i=_m(),a=NaN,f=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,m=/^0o[0-7]+$/i,c=parseInt;function M(C){if(typeof C=="number")return C;if(i(C))return a;if(t(C)){var D=typeof C.valueOf=="function"?C.valueOf():C;C=t(D)?D+"":D}if(typeof C!="string")return C===0?C:+C;C=e(C);var O=y.test(C);return O||m.test(C)?c(C.slice(2),O?2:8):f.test(C)?a:+C}return K1=M,K1}var Q1,ME;function $6(){if(ME)return Q1;ME=1;var e=cd(),t=L6(),i=ck(),a="Expected a function",f=Math.max,y=Math.min;function m(c,M,C){var D,O,B,F,X,Z,U=0,te=!1,ae=!1,ne=!0;if(typeof c!="function")throw new TypeError(a);M=i(M)||0,e(C)&&(te=!!C.leading,ae="maxWait"in C,B=ae?f(i(C.maxWait)||0,M):B,ne="trailing"in C?!!C.trailing:ne);function ue(tt){var ut=D,rt=O;return D=O=void 0,U=tt,F=c.apply(rt,ut),F}function J(tt){return U=tt,X=setTimeout(_e,M),te?ue(tt):F}function oe(tt){var ut=tt-Z,rt=tt-U,Pe=M-ut;return ae?y(Pe,B-rt):Pe}function me(tt){var ut=tt-Z,rt=tt-U;return Z===void 0||ut>=M||ut<0||ae&&rt>=B}function _e(){var tt=t();if(me(tt))return ke(tt);X=setTimeout(_e,oe(tt))}function ke(tt){return X=void 0,ne&&D?ue(tt):(D=O=void 0,F)}function at(){X!==void 0&&clearTimeout(X),U=0,D=Z=O=X=void 0}function ze(){return X===void 0?F:ke(t())}function Fe(){var tt=t(),ut=me(tt);if(D=arguments,O=this,Z=tt,ut){if(X===void 0)return J(Z);if(ae)return clearTimeout(X),X=setTimeout(_e,M),ue(Z)}return X===void 0&&(X=setTimeout(_e,M)),F}return Fe.cancel=at,Fe.flush=ze,Fe}return Q1=m,Q1}var J1,PE;function q6(){if(PE)return J1;PE=1;var e=$6(),t=cd(),i="Expected a function";function a(f,y,m){var c=!0,M=!0;if(typeof f!="function")throw new TypeError(i);return t(m)&&(c="leading"in m?!!m.leading:c,M="trailing"in m?!!m.trailing:M),e(f,y,{leading:c,maxWait:y,trailing:M})}return J1=a,J1}var U6=q6();const uk=kn(U6);function Wg(e){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wg(e)}function EE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function jv(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?EE(Object(i),!0).forEach(function(a){V6(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):EE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function V6(e,t,i){return t=G6(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function G6(e){var t=Z6(e,"string");return Wg(t)=="symbol"?t:t+""}function Z6(e,t){if(Wg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Wg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H6(e,t){return K6(e)||Y6(e,t)||W6(e,t)||X6()}function X6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W6(e,t){if(e){if(typeof e=="string")return CE(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return CE(e,t)}}function CE(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Y6(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,y,m,c=[],M=!0,C=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(c.push(a.value),c.length!==t);M=!0);}catch(D){C=!0,f=D}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return c}}function K6(e){if(Array.isArray(e))return e}var Q6=pt.forwardRef(function(e,t){var i=e.aspect,a=e.initialDimension,f=a===void 0?{width:-1,height:-1}:a,y=e.width,m=y===void 0?"100%":y,c=e.height,M=c===void 0?"100%":c,C=e.minWidth,D=C===void 0?0:C,O=e.minHeight,B=e.maxHeight,F=e.children,X=e.debounce,Z=X===void 0?0:X,U=e.id,te=e.className,ae=e.onResize,ne=e.style,ue=ne===void 0?{}:ne,J=pt.useRef(null),oe=pt.useRef();oe.current=ae,pt.useImperativeHandle(t,function(){return Object.defineProperty(J.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),J.current},configurable:!0})});var me=pt.useState({containerWidth:f.width,containerHeight:f.height}),_e=H6(me,2),ke=_e[0],at=_e[1],ze=pt.useCallback(function(tt,ut){at(function(rt){var Pe=Math.round(tt),Ve=Math.round(ut);return rt.containerWidth===Pe&&rt.containerHeight===Ve?rt:{containerWidth:Pe,containerHeight:Ve}})},[]);pt.useEffect(function(){var tt=function(ht){var be,Xe=ht[0].contentRect,ot=Xe.width,st=Xe.height;ze(ot,st),(be=oe.current)===null||be===void 0||be.call(oe,ot,st)};Z>0&&(tt=uk(tt,Z,{trailing:!0,leading:!1}));var ut=new ResizeObserver(tt),rt=J.current.getBoundingClientRect(),Pe=rt.width,Ve=rt.height;return ze(Pe,Ve),ut.observe(J.current),function(){ut.disconnect()}},[ze,Z]);var Fe=pt.useMemo(function(){var tt=ke.containerWidth,ut=ke.containerHeight;if(tt<0||ut<0)return null;Uu(pf(m)||pf(M),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,m,M),Uu(!i||i>0,"The aspect(%s) must be greater than zero.",i);var rt=pf(m)?tt:m,Pe=pf(M)?ut:M;i&&i>0&&(rt?Pe=rt/i:Pe&&(rt=Pe*i),B&&Pe>B&&(Pe=B)),Uu(rt>0||Pe>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,rt,Pe,m,M,D,O,i);var Ve=!Array.isArray(F)&&qu(F.type).endsWith("Chart");return $e.Children.map(F,function(Ge){return $e.isValidElement(Ge)?pt.cloneElement(Ge,jv({width:rt,height:Pe},Ve?{style:jv({height:"100%",width:"100%",maxHeight:Pe,maxWidth:rt},Ge.props.style)}:{})):Ge})},[i,F,M,B,O,D,ke,m]);return $e.createElement("div",{id:U?"".concat(U):void 0,className:sn("recharts-responsive-container",te),style:jv(jv({},ue),{},{width:m,height:M,minWidth:D,minHeight:O,maxHeight:B}),ref:J},Fe)}),hk=function(t){return null};hk.displayName="Cell";function Yg(e){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yg(e)}function jE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function x2(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?jE(Object(i),!0).forEach(function(a){J6(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):jE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function J6(e,t,i){return t=eB(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function eB(e){var t=tB(e,"string");return Yg(t)=="symbol"?t:t+""}function tB(e,t){if(Yg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Yg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dp={widthCache:{},cacheCount:0},rB=2e3,nB={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},OE="recharts_measurement_span";function iB(e){var t=x2({},e);return Object.keys(t).forEach(function(i){t[i]||delete t[i]}),t}var Bg=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||wm.isSsr)return{width:0,height:0};var a=iB(i),f=JSON.stringify({text:t,copyStyle:a});if(Dp.widthCache[f])return Dp.widthCache[f];try{var y=document.getElementById(OE);y||(y=document.createElement("span"),y.setAttribute("id",OE),y.setAttribute("aria-hidden","true"),document.body.appendChild(y));var m=x2(x2({},nB),a);Object.assign(y.style,m),y.textContent="".concat(t);var c=y.getBoundingClientRect(),M={width:c.width,height:c.height};return Dp.widthCache[f]=M,++Dp.cacheCount>rB&&(Dp.cacheCount=0,Dp.widthCache={}),M}catch{return{width:0,height:0}}},aB=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Kg(e){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kg(e)}function r_(e,t){return cB(e)||lB(e,t)||sB(e,t)||oB()}function oB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sB(e,t){if(e){if(typeof e=="string")return IE(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return IE(e,t)}}function IE(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function lB(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,y,m,c=[],M=!0,C=!1;try{if(y=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;M=!1}else for(;!(M=(a=y.call(i)).done)&&(c.push(a.value),c.length!==t);M=!0);}catch(D){C=!0,f=D}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return c}}function cB(e){if(Array.isArray(e))return e}function uB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kE(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,dB(a.key),a)}}function hB(e,t,i){return t&&kE(e.prototype,t),i&&kE(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function dB(e){var t=fB(e,"string");return Kg(t)=="symbol"?t:t+""}function fB(e,t){if(Kg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Kg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pB=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mB=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,dk={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},gB=Object.keys(dk),$p="NaN";function yB(e,t){return e*dk[t]}var Ov=function(){function e(t,i){uB(this,e),this.num=t,this.unit=i,this.num=t,this.unit=i,Number.isNaN(t)&&(this.unit=""),i!==""&&!pB.test(i)&&(this.num=NaN,this.unit=""),gB.includes(i)&&(this.num=yB(t,i),this.unit="px")}return hB(e,[{key:"add",value:function(i){return this.unit!==i.unit?new e(NaN,""):new e(this.num+i.num,this.unit)}},{key:"subtract",value:function(i){return this.unit!==i.unit?new e(NaN,""):new e(this.num-i.num,this.unit)}},{key:"multiply",value:function(i){return this.unit!==""&&i.unit!==""&&this.unit!==i.unit?new e(NaN,""):new e(this.num*i.num,this.unit||i.unit)}},{key:"divide",value:function(i){return this.unit!==""&&i.unit!==""&&this.unit!==i.unit?new e(NaN,""):new e(this.num/i.num,this.unit||i.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(i){var a,f=(a=mB.exec(i))!==null&&a!==void 0?a:[],y=r_(f,3),m=y[1],c=y[2];return new e(parseFloat(m),c??"")}}])}();function fk(e){if(e.includes($p))return $p;for(var t=e;t.includes("*")||t.includes("/");){var i,a=(i=zE.exec(t))!==null&&i!==void 0?i:[],f=r_(a,4),y=f[1],m=f[2],c=f[3],M=Ov.parse(y??""),C=Ov.parse(c??""),D=m==="*"?M.multiply(C):M.divide(C);if(D.isNaN())return $p;t=t.replace(zE,D.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var O,B=(O=DE.exec(t))!==null&&O!==void 0?O:[],F=r_(B,4),X=F[1],Z=F[2],U=F[3],te=Ov.parse(X??""),ae=Ov.parse(U??""),ne=Z==="+"?te.add(ae):te.subtract(ae);if(ne.isNaN())return $p;t=t.replace(DE,ne.toString())}return t}var RE=/\(([^()]*)\)/;function vB(e){for(var t=e;t.includes("(");){var i=RE.exec(t),a=r_(i,2),f=a[1];t=t.replace(RE,fk(f))}return t}function _B(e){var t=e.replace(/\s+/g,"");return t=vB(t),t=fk(t),t}function bB(e){try{return _B(e)}catch{return $p}}function ew(e){var t=bB(e.slice(5,-1));return t===$p?"":t}var xB=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],wB=["dx","dy","angle","className","breakAll"];function w2(){return w2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},w2.apply(this,arguments)}function NE(e,t){if(e==null)return{};var i=SB(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function SB(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function LE(e,t){return PB(e)||MB(e,t)||AB(e,t)||TB()}function TB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AB(e,t){if(e){if(typeof e=="string")return BE(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return BE(e,t)}}function BE(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function MB(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,y,m,c=[],M=!0,C=!1;try{if(y=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;M=!1}else for(;!(M=(a=y.call(i)).done)&&(c.push(a.value),c.length!==t);M=!0);}catch(D){C=!0,f=D}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return c}}function PB(e){if(Array.isArray(e))return e}var pk=/[ \f\n\r\t\v\u2028\u2029]+/,mk=function(t){var i=t.children,a=t.breakAll,f=t.style;try{var y=[];Wr(i)||(a?y=i.toString().split(""):y=i.toString().split(pk));var m=y.map(function(M){return{word:M,width:Bg(M,f).width}}),c=a?0:Bg(" ",f).width;return{wordsWithComputedWidth:m,spaceWidth:c}}catch{return null}},EB=function(t,i,a,f,y){var m=t.maxLines,c=t.children,M=t.style,C=t.breakAll,D=Dt(m),O=c,B=function(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return rt.reduce(function(Pe,Ve){var Ge=Ve.word,ht=Ve.width,be=Pe[Pe.length-1];if(be&&(f==null||y||be.width+ht+a<Number(f)))be.words.push(Ge),be.width+=ht+a;else{var Xe={words:[Ge],width:ht};Pe.push(Xe)}return Pe},[])},F=B(i),X=function(rt){return rt.reduce(function(Pe,Ve){return Pe.width>Ve.width?Pe:Ve})};if(!D)return F;for(var Z="…",U=function(rt){var Pe=O.slice(0,rt),Ve=mk({breakAll:C,style:M,children:Pe+Z}).wordsWithComputedWidth,Ge=B(Ve),ht=Ge.length>m||X(Ge).width>Number(f);return[ht,Ge]},te=0,ae=O.length-1,ne=0,ue;te<=ae&&ne<=O.length-1;){var J=Math.floor((te+ae)/2),oe=J-1,me=U(oe),_e=LE(me,2),ke=_e[0],at=_e[1],ze=U(J),Fe=LE(ze,1),tt=Fe[0];if(!ke&&!tt&&(te=J+1),ke&&tt&&(ae=J-1),!ke&&tt){ue=at;break}ne++}return ue||F},FE=function(t){var i=Wr(t)?[]:t.toString().split(pk);return[{words:i}]},CB=function(t){var i=t.width,a=t.scaleToFit,f=t.children,y=t.style,m=t.breakAll,c=t.maxLines;if((i||a)&&!wm.isSsr){var M,C,D=mk({breakAll:m,children:f,style:y});if(D){var O=D.wordsWithComputedWidth,B=D.spaceWidth;M=O,C=B}else return FE(f);return EB({breakAll:m,children:f,maxLines:c,style:y},M,C,i,a)}return FE(f)},$E="#808080",n_=function(t){var i=t.x,a=i===void 0?0:i,f=t.y,y=f===void 0?0:f,m=t.lineHeight,c=m===void 0?"1em":m,M=t.capHeight,C=M===void 0?"0.71em":M,D=t.scaleToFit,O=D===void 0?!1:D,B=t.textAnchor,F=B===void 0?"start":B,X=t.verticalAnchor,Z=X===void 0?"end":X,U=t.fill,te=U===void 0?$E:U,ae=NE(t,xB),ne=pt.useMemo(function(){return CB({breakAll:ae.breakAll,children:ae.children,maxLines:ae.maxLines,scaleToFit:O,style:ae.style,width:ae.width})},[ae.breakAll,ae.children,ae.maxLines,O,ae.style,ae.width]),ue=ae.dx,J=ae.dy,oe=ae.angle,me=ae.className,_e=ae.breakAll,ke=NE(ae,wB);if(!sa(a)||!sa(y))return null;var at=a+(Dt(ue)?ue:0),ze=y+(Dt(J)?J:0),Fe;switch(Z){case"start":Fe=ew("calc(".concat(C,")"));break;case"middle":Fe=ew("calc(".concat((ne.length-1)/2," * -").concat(c," + (").concat(C," / 2))"));break;default:Fe=ew("calc(".concat(ne.length-1," * -").concat(c,")"));break}var tt=[];if(O){var ut=ne[0].width,rt=ae.width;tt.push("scale(".concat((Dt(rt)?rt/ut:1)/ut,")"))}return oe&&tt.push("rotate(".concat(oe,", ").concat(at,", ").concat(ze,")")),tt.length&&(ke.transform=tt.join(" ")),$e.createElement("text",w2({},en(ke,!0),{x:at,y:ze,className:sn("recharts-text",me),textAnchor:F,fill:te.includes("url")?$E:te}),ne.map(function(Pe,Ve){var Ge=Pe.words.join(_e?"":" ");return $e.createElement("tspan",{x:at,dy:Ve===0?Fe:c,key:"".concat(Ge,"-").concat(Ve)},Ge)}))};function sd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jB(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function HS(e){let t,i,a;e.length!==2?(t=sd,i=(c,M)=>sd(e(c),M),a=(c,M)=>e(c)-M):(t=e===sd||e===jB?e:OB,i=e,a=e);function f(c,M,C=0,D=c.length){if(C<D){if(t(M,M)!==0)return D;do{const O=C+D>>>1;i(c[O],M)<0?C=O+1:D=O}while(C<D)}return C}function y(c,M,C=0,D=c.length){if(C<D){if(t(M,M)!==0)return D;do{const O=C+D>>>1;i(c[O],M)<=0?C=O+1:D=O}while(C<D)}return C}function m(c,M,C=0,D=c.length){const O=f(c,M,C,D-1);return O>C&&a(c[O-1],M)>-a(c[O],M)?O-1:O}return{left:f,center:m,right:y}}function OB(){return 0}function gk(e){return e===null?NaN:+e}function*IB(e,t){for(let i of e)i!=null&&(i=+i)>=i&&(yield i)}const kB=HS(sd),ky=kB.right;HS(gk).center;class qE extends Map{constructor(t,i=RB){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const[a,f]of t)this.set(a,f)}get(t){return super.get(UE(this,t))}has(t){return super.has(UE(this,t))}set(t,i){return super.set(zB(this,t),i)}delete(t){return super.delete(DB(this,t))}}function UE({_intern:e,_key:t},i){const a=t(i);return e.has(a)?e.get(a):i}function zB({_intern:e,_key:t},i){const a=t(i);return e.has(a)?e.get(a):(e.set(a,i),i)}function DB({_intern:e,_key:t},i){const a=t(i);return e.has(a)&&(i=e.get(a),e.delete(a)),i}function RB(e){return e!==null&&typeof e=="object"?e.valueOf():e}function NB(e=sd){if(e===sd)return yk;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,i)=>{const a=e(t,i);return a||a===0?a:(e(i,i)===0)-(e(t,t)===0)}}function yk(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const LB=Math.sqrt(50),BB=Math.sqrt(10),FB=Math.sqrt(2);function i_(e,t,i){const a=(t-e)/Math.max(0,i),f=Math.floor(Math.log10(a)),y=a/Math.pow(10,f),m=y>=LB?10:y>=BB?5:y>=FB?2:1;let c,M,C;return f<0?(C=Math.pow(10,-f)/m,c=Math.round(e*C),M=Math.round(t*C),c/C<e&&++c,M/C>t&&--M,C=-C):(C=Math.pow(10,f)*m,c=Math.round(e/C),M=Math.round(t/C),c*C<e&&++c,M*C>t&&--M),M<c&&.5<=i&&i<2?i_(e,t,i*2):[c,M,C]}function S2(e,t,i){if(t=+t,e=+e,i=+i,!(i>0))return[];if(e===t)return[e];const a=t<e,[f,y,m]=a?i_(t,e,i):i_(e,t,i);if(!(y>=f))return[];const c=y-f+1,M=new Array(c);if(a)if(m<0)for(let C=0;C<c;++C)M[C]=(y-C)/-m;else for(let C=0;C<c;++C)M[C]=(y-C)*m;else if(m<0)for(let C=0;C<c;++C)M[C]=(f+C)/-m;else for(let C=0;C<c;++C)M[C]=(f+C)*m;return M}function T2(e,t,i){return t=+t,e=+e,i=+i,i_(e,t,i)[2]}function A2(e,t,i){t=+t,e=+e,i=+i;const a=t<e,f=a?T2(t,e,i):T2(e,t,i);return(a?-1:1)*(f<0?1/-f:f)}function VE(e,t){let i;for(const a of e)a!=null&&(i<a||i===void 0&&a>=a)&&(i=a);return i}function GE(e,t){let i;for(const a of e)a!=null&&(i>a||i===void 0&&a>=a)&&(i=a);return i}function vk(e,t,i=0,a=1/0,f){if(t=Math.floor(t),i=Math.floor(Math.max(0,i)),a=Math.floor(Math.min(e.length-1,a)),!(i<=t&&t<=a))return e;for(f=f===void 0?yk:NB(f);a>i;){if(a-i>600){const M=a-i+1,C=t-i+1,D=Math.log(M),O=.5*Math.exp(2*D/3),B=.5*Math.sqrt(D*O*(M-O)/M)*(C-M/2<0?-1:1),F=Math.max(i,Math.floor(t-C*O/M+B)),X=Math.min(a,Math.floor(t+(M-C)*O/M+B));vk(e,t,F,X,f)}const y=e[t];let m=i,c=a;for(Ag(e,i,t),f(e[a],y)>0&&Ag(e,i,a);m<c;){for(Ag(e,m,c),++m,--c;f(e[m],y)<0;)++m;for(;f(e[c],y)>0;)--c}f(e[i],y)===0?Ag(e,i,c):(++c,Ag(e,c,a)),c<=t&&(i=c+1),t<=c&&(a=c-1)}return e}function Ag(e,t,i){const a=e[t];e[t]=e[i],e[i]=a}function $B(e,t,i){if(e=Float64Array.from(IB(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return GE(e);if(t>=1)return VE(e);var a,f=(a-1)*t,y=Math.floor(f),m=VE(vk(e,y).subarray(0,y+1)),c=GE(e.subarray(y+1));return m+(c-m)*(f-y)}}function qB(e,t,i=gk){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+i(e[0],0,e);if(t>=1)return+i(e[a-1],a-1,e);var a,f=(a-1)*t,y=Math.floor(f),m=+i(e[y],y,e),c=+i(e[y+1],y+1,e);return m+(c-m)*(f-y)}}function UB(e,t,i){e=+e,t=+t,i=(f=arguments.length)<2?(t=e,e=0,1):f<3?1:+i;for(var a=-1,f=Math.max(0,Math.ceil((t-e)/i))|0,y=new Array(f);++a<f;)y[a]=e+a*i;return y}function ll(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ku(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const M2=Symbol("implicit");function XS(){var e=new qE,t=[],i=[],a=M2;function f(y){let m=e.get(y);if(m===void 0){if(a!==M2)return a;e.set(y,m=t.push(y)-1)}return i[m%i.length]}return f.domain=function(y){if(!arguments.length)return t.slice();t=[],e=new qE;for(const m of y)e.has(m)||e.set(m,t.push(m)-1);return f},f.range=function(y){return arguments.length?(i=Array.from(y),f):i.slice()},f.unknown=function(y){return arguments.length?(a=y,f):a},f.copy=function(){return XS(t,i).unknown(a)},ll.apply(f,arguments),f}function Qg(){var e=XS().unknown(void 0),t=e.domain,i=e.range,a=0,f=1,y,m,c=!1,M=0,C=0,D=.5;delete e.unknown;function O(){var B=t().length,F=f<a,X=F?f:a,Z=F?a:f;y=(Z-X)/Math.max(1,B-M+C*2),c&&(y=Math.floor(y)),X+=(Z-X-y*(B-M))*D,m=y*(1-M),c&&(X=Math.round(X),m=Math.round(m));var U=UB(B).map(function(te){return X+y*te});return i(F?U.reverse():U)}return e.domain=function(B){return arguments.length?(t(B),O()):t()},e.range=function(B){return arguments.length?([a,f]=B,a=+a,f=+f,O()):[a,f]},e.rangeRound=function(B){return[a,f]=B,a=+a,f=+f,c=!0,O()},e.bandwidth=function(){return m},e.step=function(){return y},e.round=function(B){return arguments.length?(c=!!B,O()):c},e.padding=function(B){return arguments.length?(M=Math.min(1,C=+B),O()):M},e.paddingInner=function(B){return arguments.length?(M=Math.min(1,B),O()):M},e.paddingOuter=function(B){return arguments.length?(C=+B,O()):C},e.align=function(B){return arguments.length?(D=Math.max(0,Math.min(1,B)),O()):D},e.copy=function(){return Qg(t(),[a,f]).round(c).paddingInner(M).paddingOuter(C).align(D)},ll.apply(O(),arguments)}function _k(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return _k(t())},e}function Fg(){return _k(Qg.apply(null,arguments).paddingInner(1))}function WS(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function bk(e,t){var i=Object.create(e.prototype);for(var a in t)i[a]=t[a];return i}function zy(){}var Jg=.7,a_=1/Jg,Zp="\\s*([+-]?\\d+)\\s*",ey="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VB=/^#([0-9a-f]{3,8})$/,GB=new RegExp(`^rgb\\(${Zp},${Zp},${Zp}\\)$`),ZB=new RegExp(`^rgb\\(${Gc},${Gc},${Gc}\\)$`),HB=new RegExp(`^rgba\\(${Zp},${Zp},${Zp},${ey}\\)$`),XB=new RegExp(`^rgba\\(${Gc},${Gc},${Gc},${ey}\\)$`),WB=new RegExp(`^hsl\\(${ey},${Gc},${Gc}\\)$`),YB=new RegExp(`^hsla\\(${ey},${Gc},${Gc},${ey}\\)$`),ZE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};WS(zy,ty,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:HE,formatHex:HE,formatHex8:KB,formatHsl:QB,formatRgb:XE,toString:XE});function HE(){return this.rgb().formatHex()}function KB(){return this.rgb().formatHex8()}function QB(){return xk(this).formatHsl()}function XE(){return this.rgb().formatRgb()}function ty(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=VB.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?WE(t):i===3?new es(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?Iv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?Iv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=GB.exec(e))?new es(t[1],t[2],t[3],1):(t=ZB.exec(e))?new es(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=HB.exec(e))?Iv(t[1],t[2],t[3],t[4]):(t=XB.exec(e))?Iv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=WB.exec(e))?QE(t[1],t[2]/100,t[3]/100,1):(t=YB.exec(e))?QE(t[1],t[2]/100,t[3]/100,t[4]):ZE.hasOwnProperty(e)?WE(ZE[e]):e==="transparent"?new es(NaN,NaN,NaN,0):null}function WE(e){return new es(e>>16&255,e>>8&255,e&255,1)}function Iv(e,t,i,a){return a<=0&&(e=t=i=NaN),new es(e,t,i,a)}function JB(e){return e instanceof zy||(e=ty(e)),e?(e=e.rgb(),new es(e.r,e.g,e.b,e.opacity)):new es}function P2(e,t,i,a){return arguments.length===1?JB(e):new es(e,t,i,a??1)}function es(e,t,i,a){this.r=+e,this.g=+t,this.b=+i,this.opacity=+a}WS(es,P2,bk(zy,{brighter(e){return e=e==null?a_:Math.pow(a_,e),new es(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jg:Math.pow(Jg,e),new es(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new es(xf(this.r),xf(this.g),xf(this.b),o_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YE,formatHex:YE,formatHex8:eF,formatRgb:KE,toString:KE}));function YE(){return`#${mf(this.r)}${mf(this.g)}${mf(this.b)}`}function eF(){return`#${mf(this.r)}${mf(this.g)}${mf(this.b)}${mf((isNaN(this.opacity)?1:this.opacity)*255)}`}function KE(){const e=o_(this.opacity);return`${e===1?"rgb(":"rgba("}${xf(this.r)}, ${xf(this.g)}, ${xf(this.b)}${e===1?")":`, ${e})`}`}function o_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function mf(e){return e=xf(e),(e<16?"0":"")+e.toString(16)}function QE(e,t,i,a){return a<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new ac(e,t,i,a)}function xk(e){if(e instanceof ac)return new ac(e.h,e.s,e.l,e.opacity);if(e instanceof zy||(e=ty(e)),!e)return new ac;if(e instanceof ac)return e;e=e.rgb();var t=e.r/255,i=e.g/255,a=e.b/255,f=Math.min(t,i,a),y=Math.max(t,i,a),m=NaN,c=y-f,M=(y+f)/2;return c?(t===y?m=(i-a)/c+(i<a)*6:i===y?m=(a-t)/c+2:m=(t-i)/c+4,c/=M<.5?y+f:2-y-f,m*=60):c=M>0&&M<1?0:m,new ac(m,c,M,e.opacity)}function tF(e,t,i,a){return arguments.length===1?xk(e):new ac(e,t,i,a??1)}function ac(e,t,i,a){this.h=+e,this.s=+t,this.l=+i,this.opacity=+a}WS(ac,tF,bk(zy,{brighter(e){return e=e==null?a_:Math.pow(a_,e),new ac(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jg:Math.pow(Jg,e),new ac(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*t,f=2*i-a;return new es(tw(e>=240?e-240:e+120,f,a),tw(e,f,a),tw(e<120?e+240:e-120,f,a),this.opacity)},clamp(){return new ac(JE(this.h),kv(this.s),kv(this.l),o_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=o_(this.opacity);return`${e===1?"hsl(":"hsla("}${JE(this.h)}, ${kv(this.s)*100}%, ${kv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function JE(e){return e=(e||0)%360,e<0?e+360:e}function kv(e){return Math.max(0,Math.min(1,e||0))}function tw(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const YS=e=>()=>e;function rF(e,t){return function(i){return e+i*t}}function nF(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(a){return Math.pow(e+a*t,i)}}function iF(e){return(e=+e)==1?wk:function(t,i){return i-t?nF(t,i,e):YS(isNaN(t)?i:t)}}function wk(e,t){var i=t-e;return i?rF(e,i):YS(isNaN(e)?t:e)}const eC=function e(t){var i=iF(t);function a(f,y){var m=i((f=P2(f)).r,(y=P2(y)).r),c=i(f.g,y.g),M=i(f.b,y.b),C=wk(f.opacity,y.opacity);return function(D){return f.r=m(D),f.g=c(D),f.b=M(D),f.opacity=C(D),f+""}}return a.gamma=e,a}(1);function aF(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,a=t.slice(),f;return function(y){for(f=0;f<i;++f)a[f]=e[f]*(1-y)+t[f]*y;return a}}function oF(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function sF(e,t){var i=t?t.length:0,a=e?Math.min(i,e.length):0,f=new Array(a),y=new Array(i),m;for(m=0;m<a;++m)f[m]=Sm(e[m],t[m]);for(;m<i;++m)y[m]=t[m];return function(c){for(m=0;m<a;++m)y[m]=f[m](c);return y}}function lF(e,t){var i=new Date;return e=+e,t=+t,function(a){return i.setTime(e*(1-a)+t*a),i}}function s_(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function cF(e,t){var i={},a={},f;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(f in t)f in e?i[f]=Sm(e[f],t[f]):a[f]=t[f];return function(y){for(f in i)a[f]=i[f](y);return a}}var E2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rw=new RegExp(E2.source,"g");function uF(e){return function(){return e}}function hF(e){return function(t){return e(t)+""}}function dF(e,t){var i=E2.lastIndex=rw.lastIndex=0,a,f,y,m=-1,c=[],M=[];for(e=e+"",t=t+"";(a=E2.exec(e))&&(f=rw.exec(t));)(y=f.index)>i&&(y=t.slice(i,y),c[m]?c[m]+=y:c[++m]=y),(a=a[0])===(f=f[0])?c[m]?c[m]+=f:c[++m]=f:(c[++m]=null,M.push({i:m,x:s_(a,f)})),i=rw.lastIndex;return i<t.length&&(y=t.slice(i),c[m]?c[m]+=y:c[++m]=y),c.length<2?M[0]?hF(M[0].x):uF(t):(t=M.length,function(C){for(var D=0,O;D<t;++D)c[(O=M[D]).i]=O.x(C);return c.join("")})}function Sm(e,t){var i=typeof t,a;return t==null||i==="boolean"?YS(t):(i==="number"?s_:i==="string"?(a=ty(t))?(t=a,eC):dF:t instanceof ty?eC:t instanceof Date?lF:oF(t)?aF:Array.isArray(t)?sF:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?cF:s_)(e,t)}function KS(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}function fF(e,t){t===void 0&&(t=e,e=Sm);for(var i=0,a=t.length-1,f=t[0],y=new Array(a<0?0:a);i<a;)y[i]=e(f,f=t[++i]);return function(m){var c=Math.max(0,Math.min(a-1,Math.floor(m*=a)));return y[c](m-c)}}function pF(e){return function(){return e}}function l_(e){return+e}var tC=[0,1];function Ao(e){return e}function C2(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:pF(isNaN(t)?NaN:.5)}function mF(e,t){var i;return e>t&&(i=e,e=t,t=i),function(a){return Math.max(e,Math.min(t,a))}}function gF(e,t,i){var a=e[0],f=e[1],y=t[0],m=t[1];return f<a?(a=C2(f,a),y=i(m,y)):(a=C2(a,f),y=i(y,m)),function(c){return y(a(c))}}function yF(e,t,i){var a=Math.min(e.length,t.length)-1,f=new Array(a),y=new Array(a),m=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++m<a;)f[m]=C2(e[m],e[m+1]),y[m]=i(t[m],t[m+1]);return function(c){var M=ky(e,c,1,a)-1;return y[M](f[M](c))}}function Dy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function e0(){var e=tC,t=tC,i=Sm,a,f,y,m=Ao,c,M,C;function D(){var B=Math.min(e.length,t.length);return m!==Ao&&(m=mF(e[0],e[B-1])),c=B>2?yF:gF,M=C=null,O}function O(B){return B==null||isNaN(B=+B)?y:(M||(M=c(e.map(a),t,i)))(a(m(B)))}return O.invert=function(B){return m(f((C||(C=c(t,e.map(a),s_)))(B)))},O.domain=function(B){return arguments.length?(e=Array.from(B,l_),D()):e.slice()},O.range=function(B){return arguments.length?(t=Array.from(B),D()):t.slice()},O.rangeRound=function(B){return t=Array.from(B),i=KS,D()},O.clamp=function(B){return arguments.length?(m=B?!0:Ao,D()):m!==Ao},O.interpolate=function(B){return arguments.length?(i=B,D()):i},O.unknown=function(B){return arguments.length?(y=B,O):y},function(B,F){return a=B,f=F,D()}}function QS(){return e0()(Ao,Ao)}function vF(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function c_(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,a=e.slice(0,i);return[a.length>1?a[0]+a.slice(2):a,+e.slice(i+1)]}function Jp(e){return e=c_(Math.abs(e)),e?e[1]:NaN}function _F(e,t){return function(i,a){for(var f=i.length,y=[],m=0,c=e[0],M=0;f>0&&c>0&&(M+c+1>a&&(c=Math.max(1,a-M)),y.push(i.substring(f-=c,f+c)),!((M+=c+1)>a));)c=e[m=(m+1)%e.length];return y.reverse().join(t)}}function bF(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var xF=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ry(e){if(!(t=xF.exec(e)))throw new Error("invalid format: "+e);var t;return new JS({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ry.prototype=JS.prototype;function JS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}JS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wF(e){e:for(var t=e.length,i=1,a=-1,f;i<t;++i)switch(e[i]){case".":a=f=i;break;case"0":a===0&&(a=i),f=i;break;default:if(!+e[i])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(f+1):e}var Sk;function SF(e,t){var i=c_(e,t);if(!i)return e+"";var a=i[0],f=i[1],y=f-(Sk=Math.max(-8,Math.min(8,Math.floor(f/3)))*3)+1,m=a.length;return y===m?a:y>m?a+new Array(y-m+1).join("0"):y>0?a.slice(0,y)+"."+a.slice(y):"0."+new Array(1-y).join("0")+c_(e,Math.max(0,t+y-1))[0]}function rC(e,t){var i=c_(e,t);if(!i)return e+"";var a=i[0],f=i[1];return f<0?"0."+new Array(-f).join("0")+a:a.length>f+1?a.slice(0,f+1)+"."+a.slice(f+1):a+new Array(f-a.length+2).join("0")}const nC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:vF,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>rC(e*100,t),r:rC,s:SF,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function iC(e){return e}var aC=Array.prototype.map,oC=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function TF(e){var t=e.grouping===void 0||e.thousands===void 0?iC:_F(aC.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",f=e.decimal===void 0?".":e.decimal+"",y=e.numerals===void 0?iC:bF(aC.call(e.numerals,String)),m=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"−":e.minus+"",M=e.nan===void 0?"NaN":e.nan+"";function C(O){O=ry(O);var B=O.fill,F=O.align,X=O.sign,Z=O.symbol,U=O.zero,te=O.width,ae=O.comma,ne=O.precision,ue=O.trim,J=O.type;J==="n"?(ae=!0,J="g"):nC[J]||(ne===void 0&&(ne=12),ue=!0,J="g"),(U||B==="0"&&F==="=")&&(U=!0,B="0",F="=");var oe=Z==="$"?i:Z==="#"&&/[boxX]/.test(J)?"0"+J.toLowerCase():"",me=Z==="$"?a:/[%p]/.test(J)?m:"",_e=nC[J],ke=/[defgprs%]/.test(J);ne=ne===void 0?6:/[gprs]/.test(J)?Math.max(1,Math.min(21,ne)):Math.max(0,Math.min(20,ne));function at(ze){var Fe=oe,tt=me,ut,rt,Pe;if(J==="c")tt=_e(ze)+tt,ze="";else{ze=+ze;var Ve=ze<0||1/ze<0;if(ze=isNaN(ze)?M:_e(Math.abs(ze),ne),ue&&(ze=wF(ze)),Ve&&+ze==0&&X!=="+"&&(Ve=!1),Fe=(Ve?X==="("?X:c:X==="-"||X==="("?"":X)+Fe,tt=(J==="s"?oC[8+Sk/3]:"")+tt+(Ve&&X==="("?")":""),ke){for(ut=-1,rt=ze.length;++ut<rt;)if(Pe=ze.charCodeAt(ut),48>Pe||Pe>57){tt=(Pe===46?f+ze.slice(ut+1):ze.slice(ut))+tt,ze=ze.slice(0,ut);break}}}ae&&!U&&(ze=t(ze,1/0));var Ge=Fe.length+ze.length+tt.length,ht=Ge<te?new Array(te-Ge+1).join(B):"";switch(ae&&U&&(ze=t(ht+ze,ht.length?te-tt.length:1/0),ht=""),F){case"<":ze=Fe+ze+tt+ht;break;case"=":ze=Fe+ht+ze+tt;break;case"^":ze=ht.slice(0,Ge=ht.length>>1)+Fe+ze+tt+ht.slice(Ge);break;default:ze=ht+Fe+ze+tt;break}return y(ze)}return at.toString=function(){return O+""},at}function D(O,B){var F=C((O=ry(O),O.type="f",O)),X=Math.max(-8,Math.min(8,Math.floor(Jp(B)/3)))*3,Z=Math.pow(10,-X),U=oC[8+X/3];return function(te){return F(Z*te)+U}}return{format:C,formatPrefix:D}}var zv,eT,Tk;AF({thousands:",",grouping:[3],currency:["$",""]});function AF(e){return zv=TF(e),eT=zv.format,Tk=zv.formatPrefix,zv}function MF(e){return Math.max(0,-Jp(Math.abs(e)))}function PF(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jp(t)/3)))*3-Jp(Math.abs(e)))}function EF(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Jp(t)-Jp(e))+1}function Ak(e,t,i,a){var f=A2(e,t,i),y;switch(a=ry(a??",f"),a.type){case"s":{var m=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(y=PF(f,m))&&(a.precision=y),Tk(a,m)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(y=EF(f,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=y-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(y=MF(f))&&(a.precision=y-(a.type==="%")*2);break}}return eT(a)}function hd(e){var t=e.domain;return e.ticks=function(i){var a=t();return S2(a[0],a[a.length-1],i??10)},e.tickFormat=function(i,a){var f=t();return Ak(f[0],f[f.length-1],i??10,a)},e.nice=function(i){i==null&&(i=10);var a=t(),f=0,y=a.length-1,m=a[f],c=a[y],M,C,D=10;for(c<m&&(C=m,m=c,c=C,C=f,f=y,y=C);D-- >0;){if(C=T2(m,c,i),C===M)return a[f]=m,a[y]=c,t(a);if(C>0)m=Math.floor(m/C)*C,c=Math.ceil(c/C)*C;else if(C<0)m=Math.ceil(m*C)/C,c=Math.floor(c*C)/C;else break;M=C}return e},e}function u_(){var e=QS();return e.copy=function(){return Dy(e,u_())},ll.apply(e,arguments),hd(e)}function Mk(e){var t;function i(a){return a==null||isNaN(a=+a)?t:a}return i.invert=i,i.domain=i.range=function(a){return arguments.length?(e=Array.from(a,l_),i):e.slice()},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return Mk(e).unknown(t)},e=arguments.length?Array.from(e,l_):[0,1],hd(i)}function Pk(e,t){e=e.slice();var i=0,a=e.length-1,f=e[i],y=e[a],m;return y<f&&(m=i,i=a,a=m,m=f,f=y,y=m),e[i]=t.floor(f),e[a]=t.ceil(y),e}function sC(e){return Math.log(e)}function lC(e){return Math.exp(e)}function CF(e){return-Math.log(-e)}function jF(e){return-Math.exp(-e)}function OF(e){return isFinite(e)?+("1e"+e):e<0?0:e}function IF(e){return e===10?OF:e===Math.E?Math.exp:t=>Math.pow(e,t)}function kF(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function cC(e){return(t,i)=>-e(-t,i)}function tT(e){const t=e(sC,lC),i=t.domain;let a=10,f,y;function m(){return f=kF(a),y=IF(a),i()[0]<0?(f=cC(f),y=cC(y),e(CF,jF)):e(sC,lC),t}return t.base=function(c){return arguments.length?(a=+c,m()):a},t.domain=function(c){return arguments.length?(i(c),m()):i()},t.ticks=c=>{const M=i();let C=M[0],D=M[M.length-1];const O=D<C;O&&([C,D]=[D,C]);let B=f(C),F=f(D),X,Z;const U=c==null?10:+c;let te=[];if(!(a%1)&&F-B<U){if(B=Math.floor(B),F=Math.ceil(F),C>0){for(;B<=F;++B)for(X=1;X<a;++X)if(Z=B<0?X/y(-B):X*y(B),!(Z<C)){if(Z>D)break;te.push(Z)}}else for(;B<=F;++B)for(X=a-1;X>=1;--X)if(Z=B>0?X/y(-B):X*y(B),!(Z<C)){if(Z>D)break;te.push(Z)}te.length*2<U&&(te=S2(C,D,U))}else te=S2(B,F,Math.min(F-B,U)).map(y);return O?te.reverse():te},t.tickFormat=(c,M)=>{if(c==null&&(c=10),M==null&&(M=a===10?"s":","),typeof M!="function"&&(!(a%1)&&(M=ry(M)).precision==null&&(M.trim=!0),M=eT(M)),c===1/0)return M;const C=Math.max(1,a*c/t.ticks().length);return D=>{let O=D/y(Math.round(f(D)));return O*a<a-.5&&(O*=a),O<=C?M(D):""}},t.nice=()=>i(Pk(i(),{floor:c=>y(Math.floor(f(c))),ceil:c=>y(Math.ceil(f(c)))})),t}function Ek(){const e=tT(e0()).domain([1,10]);return e.copy=()=>Dy(e,Ek()).base(e.base()),ll.apply(e,arguments),e}function uC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function hC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function rT(e){var t=1,i=e(uC(t),hC(t));return i.constant=function(a){return arguments.length?e(uC(t=+a),hC(t)):t},hd(i)}function Ck(){var e=rT(e0());return e.copy=function(){return Dy(e,Ck()).constant(e.constant())},ll.apply(e,arguments)}function dC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function zF(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function DF(e){return e<0?-e*e:e*e}function nT(e){var t=e(Ao,Ao),i=1;function a(){return i===1?e(Ao,Ao):i===.5?e(zF,DF):e(dC(i),dC(1/i))}return t.exponent=function(f){return arguments.length?(i=+f,a()):i},hd(t)}function iT(){var e=nT(e0());return e.copy=function(){return Dy(e,iT()).exponent(e.exponent())},ll.apply(e,arguments),e}function RF(){return iT.apply(null,arguments).exponent(.5)}function fC(e){return Math.sign(e)*e*e}function NF(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function jk(){var e=QS(),t=[0,1],i=!1,a;function f(y){var m=NF(e(y));return isNaN(m)?a:i?Math.round(m):m}return f.invert=function(y){return e.invert(fC(y))},f.domain=function(y){return arguments.length?(e.domain(y),f):e.domain()},f.range=function(y){return arguments.length?(e.range((t=Array.from(y,l_)).map(fC)),f):t.slice()},f.rangeRound=function(y){return f.range(y).round(!0)},f.round=function(y){return arguments.length?(i=!!y,f):i},f.clamp=function(y){return arguments.length?(e.clamp(y),f):e.clamp()},f.unknown=function(y){return arguments.length?(a=y,f):a},f.copy=function(){return jk(e.domain(),t).round(i).clamp(e.clamp()).unknown(a)},ll.apply(f,arguments),hd(f)}function Ok(){var e=[],t=[],i=[],a;function f(){var m=0,c=Math.max(1,t.length);for(i=new Array(c-1);++m<c;)i[m-1]=qB(e,m/c);return y}function y(m){return m==null||isNaN(m=+m)?a:t[ky(i,m)]}return y.invertExtent=function(m){var c=t.indexOf(m);return c<0?[NaN,NaN]:[c>0?i[c-1]:e[0],c<i.length?i[c]:e[e.length-1]]},y.domain=function(m){if(!arguments.length)return e.slice();e=[];for(let c of m)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(sd),f()},y.range=function(m){return arguments.length?(t=Array.from(m),f()):t.slice()},y.unknown=function(m){return arguments.length?(a=m,y):a},y.quantiles=function(){return i.slice()},y.copy=function(){return Ok().domain(e).range(t).unknown(a)},ll.apply(y,arguments)}function Ik(){var e=0,t=1,i=1,a=[.5],f=[0,1],y;function m(M){return M!=null&&M<=M?f[ky(a,M,0,i)]:y}function c(){var M=-1;for(a=new Array(i);++M<i;)a[M]=((M+1)*t-(M-i)*e)/(i+1);return m}return m.domain=function(M){return arguments.length?([e,t]=M,e=+e,t=+t,c()):[e,t]},m.range=function(M){return arguments.length?(i=(f=Array.from(M)).length-1,c()):f.slice()},m.invertExtent=function(M){var C=f.indexOf(M);return C<0?[NaN,NaN]:C<1?[e,a[0]]:C>=i?[a[i-1],t]:[a[C-1],a[C]]},m.unknown=function(M){return arguments.length&&(y=M),m},m.thresholds=function(){return a.slice()},m.copy=function(){return Ik().domain([e,t]).range(f).unknown(y)},ll.apply(hd(m),arguments)}function kk(){var e=[.5],t=[0,1],i,a=1;function f(y){return y!=null&&y<=y?t[ky(e,y,0,a)]:i}return f.domain=function(y){return arguments.length?(e=Array.from(y),a=Math.min(e.length,t.length-1),f):e.slice()},f.range=function(y){return arguments.length?(t=Array.from(y),a=Math.min(e.length,t.length-1),f):t.slice()},f.invertExtent=function(y){var m=t.indexOf(y);return[e[m-1],e[m]]},f.unknown=function(y){return arguments.length?(i=y,f):i},f.copy=function(){return kk().domain(e).range(t).unknown(i)},ll.apply(f,arguments)}const nw=new Date,iw=new Date;function la(e,t,i,a){function f(y){return e(y=arguments.length===0?new Date:new Date(+y)),y}return f.floor=y=>(e(y=new Date(+y)),y),f.ceil=y=>(e(y=new Date(y-1)),t(y,1),e(y),y),f.round=y=>{const m=f(y),c=f.ceil(y);return y-m<c-y?m:c},f.offset=(y,m)=>(t(y=new Date(+y),m==null?1:Math.floor(m)),y),f.range=(y,m,c)=>{const M=[];if(y=f.ceil(y),c=c==null?1:Math.floor(c),!(y<m)||!(c>0))return M;let C;do M.push(C=new Date(+y)),t(y,c),e(y);while(C<y&&y<m);return M},f.filter=y=>la(m=>{if(m>=m)for(;e(m),!y(m);)m.setTime(m-1)},(m,c)=>{if(m>=m)if(c<0)for(;++c<=0;)for(;t(m,-1),!y(m););else for(;--c>=0;)for(;t(m,1),!y(m););}),i&&(f.count=(y,m)=>(nw.setTime(+y),iw.setTime(+m),e(nw),e(iw),Math.floor(i(nw,iw))),f.every=y=>(y=Math.floor(y),!isFinite(y)||!(y>0)?null:y>1?f.filter(a?m=>a(m)%y===0:m=>f.count(0,m)%y===0):f)),f}const h_=la(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);h_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?la(t=>{t.setTime(Math.floor(t/e)*e)},(t,i)=>{t.setTime(+t+i*e)},(t,i)=>(i-t)/e):h_);h_.range;const Lu=1e3,il=Lu*60,Bu=il*60,Gu=Bu*24,aT=Gu*7,pC=Gu*30,aw=Gu*365,gf=la(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Lu)},(e,t)=>(t-e)/Lu,e=>e.getUTCSeconds());gf.range;const oT=la(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Lu)},(e,t)=>{e.setTime(+e+t*il)},(e,t)=>(t-e)/il,e=>e.getMinutes());oT.range;const sT=la(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*il)},(e,t)=>(t-e)/il,e=>e.getUTCMinutes());sT.range;const lT=la(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Lu-e.getMinutes()*il)},(e,t)=>{e.setTime(+e+t*Bu)},(e,t)=>(t-e)/Bu,e=>e.getHours());lT.range;const cT=la(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Bu)},(e,t)=>(t-e)/Bu,e=>e.getUTCHours());cT.range;const Ry=la(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*il)/Gu,e=>e.getDate()-1);Ry.range;const t0=la(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Gu,e=>e.getUTCDate()-1);t0.range;const zk=la(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Gu,e=>Math.floor(e/Gu));zk.range;function Cf(e){return la(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,i)=>{t.setDate(t.getDate()+i*7)},(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*il)/aT)}const r0=Cf(0),d_=Cf(1),LF=Cf(2),BF=Cf(3),em=Cf(4),FF=Cf(5),$F=Cf(6);r0.range;d_.range;LF.range;BF.range;em.range;FF.range;$F.range;function jf(e){return la(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i*7)},(t,i)=>(i-t)/aT)}const n0=jf(0),f_=jf(1),qF=jf(2),UF=jf(3),tm=jf(4),VF=jf(5),GF=jf(6);n0.range;f_.range;qF.range;UF.range;tm.range;VF.range;GF.range;const uT=la(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());uT.range;const hT=la(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());hT.range;const Zu=la(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Zu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:la(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,i)=>{t.setFullYear(t.getFullYear()+i*e)});Zu.range;const Hu=la(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:la(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i*e)});Hu.range;function Dk(e,t,i,a,f,y){const m=[[gf,1,Lu],[gf,5,5*Lu],[gf,15,15*Lu],[gf,30,30*Lu],[y,1,il],[y,5,5*il],[y,15,15*il],[y,30,30*il],[f,1,Bu],[f,3,3*Bu],[f,6,6*Bu],[f,12,12*Bu],[a,1,Gu],[a,2,2*Gu],[i,1,aT],[t,1,pC],[t,3,3*pC],[e,1,aw]];function c(C,D,O){const B=D<C;B&&([C,D]=[D,C]);const F=O&&typeof O.range=="function"?O:M(C,D,O),X=F?F.range(C,+D+1):[];return B?X.reverse():X}function M(C,D,O){const B=Math.abs(D-C)/O,F=HS(([,,U])=>U).right(m,B);if(F===m.length)return e.every(A2(C/aw,D/aw,O));if(F===0)return h_.every(Math.max(A2(C,D,O),1));const[X,Z]=m[B/m[F-1][2]<m[F][2]/B?F-1:F];return X.every(Z)}return[c,M]}const[ZF,HF]=Dk(Hu,hT,n0,zk,cT,sT),[XF,WF]=Dk(Zu,uT,r0,Ry,lT,oT);function ow(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function sw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Mg(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}function YF(e){var t=e.dateTime,i=e.date,a=e.time,f=e.periods,y=e.days,m=e.shortDays,c=e.months,M=e.shortMonths,C=Pg(f),D=Eg(f),O=Pg(y),B=Eg(y),F=Pg(m),X=Eg(m),Z=Pg(c),U=Eg(c),te=Pg(M),ae=Eg(M),ne={a:Ve,A:Ge,b:ht,B:be,c:null,d:bC,e:bC,f:_8,g:C8,G:O8,H:g8,I:y8,j:v8,L:Rk,m:b8,M:x8,p:Xe,q:ot,Q:SC,s:TC,S:w8,u:S8,U:T8,V:A8,w:M8,W:P8,x:null,X:null,y:E8,Y:j8,Z:I8,"%":wC},ue={a:st,A:Pt,b:Vt,B:Rt,c:null,d:xC,e:xC,f:R8,g:Z8,G:X8,H:k8,I:z8,j:D8,L:Lk,m:N8,M:L8,p:mr,q:nr,Q:SC,s:TC,S:B8,u:F8,U:$8,V:q8,w:U8,W:V8,x:null,X:null,y:G8,Y:H8,Z:W8,"%":wC},J={a:at,A:ze,b:Fe,B:tt,c:ut,d:vC,e:vC,f:d8,g:yC,G:gC,H:_C,I:_C,j:l8,L:h8,m:s8,M:c8,p:ke,q:o8,Q:p8,s:m8,S:u8,u:t8,U:r8,V:n8,w:e8,W:i8,x:rt,X:Pe,y:yC,Y:gC,Z:a8,"%":f8};ne.x=oe(i,ne),ne.X=oe(a,ne),ne.c=oe(t,ne),ue.x=oe(i,ue),ue.X=oe(a,ue),ue.c=oe(t,ue);function oe(Ot,er){return function(ir){var _t=[],hr=-1,Qt=0,Yr=Ot.length,tn,Kr,Oi;for(ir instanceof Date||(ir=new Date(+ir));++hr<Yr;)Ot.charCodeAt(hr)===37&&(_t.push(Ot.slice(Qt,hr)),(Kr=mC[tn=Ot.charAt(++hr)])!=null?tn=Ot.charAt(++hr):Kr=tn==="e"?" ":"0",(Oi=er[tn])&&(tn=Oi(ir,Kr)),_t.push(tn),Qt=hr+1);return _t.push(Ot.slice(Qt,hr)),_t.join("")}}function me(Ot,er){return function(ir){var _t=Mg(1900,void 0,1),hr=_e(_t,Ot,ir+="",0),Qt,Yr;if(hr!=ir.length)return null;if("Q"in _t)return new Date(_t.Q);if("s"in _t)return new Date(_t.s*1e3+("L"in _t?_t.L:0));if(er&&!("Z"in _t)&&(_t.Z=0),"p"in _t&&(_t.H=_t.H%12+_t.p*12),_t.m===void 0&&(_t.m="q"in _t?_t.q:0),"V"in _t){if(_t.V<1||_t.V>53)return null;"w"in _t||(_t.w=1),"Z"in _t?(Qt=sw(Mg(_t.y,0,1)),Yr=Qt.getUTCDay(),Qt=Yr>4||Yr===0?f_.ceil(Qt):f_(Qt),Qt=t0.offset(Qt,(_t.V-1)*7),_t.y=Qt.getUTCFullYear(),_t.m=Qt.getUTCMonth(),_t.d=Qt.getUTCDate()+(_t.w+6)%7):(Qt=ow(Mg(_t.y,0,1)),Yr=Qt.getDay(),Qt=Yr>4||Yr===0?d_.ceil(Qt):d_(Qt),Qt=Ry.offset(Qt,(_t.V-1)*7),_t.y=Qt.getFullYear(),_t.m=Qt.getMonth(),_t.d=Qt.getDate()+(_t.w+6)%7)}else("W"in _t||"U"in _t)&&("w"in _t||(_t.w="u"in _t?_t.u%7:"W"in _t?1:0),Yr="Z"in _t?sw(Mg(_t.y,0,1)).getUTCDay():ow(Mg(_t.y,0,1)).getDay(),_t.m=0,_t.d="W"in _t?(_t.w+6)%7+_t.W*7-(Yr+5)%7:_t.w+_t.U*7-(Yr+6)%7);return"Z"in _t?(_t.H+=_t.Z/100|0,_t.M+=_t.Z%100,sw(_t)):ow(_t)}}function _e(Ot,er,ir,_t){for(var hr=0,Qt=er.length,Yr=ir.length,tn,Kr;hr<Qt;){if(_t>=Yr)return-1;if(tn=er.charCodeAt(hr++),tn===37){if(tn=er.charAt(hr++),Kr=J[tn in mC?er.charAt(hr++):tn],!Kr||(_t=Kr(Ot,ir,_t))<0)return-1}else if(tn!=ir.charCodeAt(_t++))return-1}return _t}function ke(Ot,er,ir){var _t=C.exec(er.slice(ir));return _t?(Ot.p=D.get(_t[0].toLowerCase()),ir+_t[0].length):-1}function at(Ot,er,ir){var _t=F.exec(er.slice(ir));return _t?(Ot.w=X.get(_t[0].toLowerCase()),ir+_t[0].length):-1}function ze(Ot,er,ir){var _t=O.exec(er.slice(ir));return _t?(Ot.w=B.get(_t[0].toLowerCase()),ir+_t[0].length):-1}function Fe(Ot,er,ir){var _t=te.exec(er.slice(ir));return _t?(Ot.m=ae.get(_t[0].toLowerCase()),ir+_t[0].length):-1}function tt(Ot,er,ir){var _t=Z.exec(er.slice(ir));return _t?(Ot.m=U.get(_t[0].toLowerCase()),ir+_t[0].length):-1}function ut(Ot,er,ir){return _e(Ot,t,er,ir)}function rt(Ot,er,ir){return _e(Ot,i,er,ir)}function Pe(Ot,er,ir){return _e(Ot,a,er,ir)}function Ve(Ot){return m[Ot.getDay()]}function Ge(Ot){return y[Ot.getDay()]}function ht(Ot){return M[Ot.getMonth()]}function be(Ot){return c[Ot.getMonth()]}function Xe(Ot){return f[+(Ot.getHours()>=12)]}function ot(Ot){return 1+~~(Ot.getMonth()/3)}function st(Ot){return m[Ot.getUTCDay()]}function Pt(Ot){return y[Ot.getUTCDay()]}function Vt(Ot){return M[Ot.getUTCMonth()]}function Rt(Ot){return c[Ot.getUTCMonth()]}function mr(Ot){return f[+(Ot.getUTCHours()>=12)]}function nr(Ot){return 1+~~(Ot.getUTCMonth()/3)}return{format:function(Ot){var er=oe(Ot+="",ne);return er.toString=function(){return Ot},er},parse:function(Ot){var er=me(Ot+="",!1);return er.toString=function(){return Ot},er},utcFormat:function(Ot){var er=oe(Ot+="",ue);return er.toString=function(){return Ot},er},utcParse:function(Ot){var er=me(Ot+="",!0);return er.toString=function(){return Ot},er}}}var mC={"-":"",_:" ",0:"0"},Aa=/^\s*\d+/,KF=/^%/,QF=/[\\^$*+?|[\]().{}]/g;function un(e,t,i){var a=e<0?"-":"",f=(a?-e:e)+"",y=f.length;return a+(y<i?new Array(i-y+1).join(t)+f:f)}function JF(e){return e.replace(QF,"\\$&")}function Pg(e){return new RegExp("^(?:"+e.map(JF).join("|")+")","i")}function Eg(e){return new Map(e.map((t,i)=>[t.toLowerCase(),i]))}function e8(e,t,i){var a=Aa.exec(t.slice(i,i+1));return a?(e.w=+a[0],i+a[0].length):-1}function t8(e,t,i){var a=Aa.exec(t.slice(i,i+1));return a?(e.u=+a[0],i+a[0].length):-1}function r8(e,t,i){var a=Aa.exec(t.slice(i,i+2));return a?(e.U=+a[0],i+a[0].length):-1}function n8(e,t,i){var a=Aa.exec(t.slice(i,i+2));return a?(e.V=+a[0],i+a[0].length):-1}function i8(e,t,i){var a=Aa.exec(t.slice(i,i+2));return a?(e.W=+a[0],i+a[0].length):-1}function gC(e,t,i){var a=Aa.exec(t.slice(i,i+4));return a?(e.y=+a[0],i+a[0].length):-1}function yC(e,t,i){var a=Aa.exec(t.slice(i,i+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),i+a[0].length):-1}function a8(e,t,i){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),i+a[0].length):-1}function o8(e,t,i){var a=Aa.exec(t.slice(i,i+1));return a?(e.q=a[0]*3-3,i+a[0].length):-1}function s8(e,t,i){var a=Aa.exec(t.slice(i,i+2));return a?(e.m=a[0]-1,i+a[0].length):-1}function vC(e,t,i){var a=Aa.exec(t.slice(i,i+2));return a?(e.d=+a[0],i+a[0].length):-1}function l8(e,t,i){var a=Aa.exec(t.slice(i,i+3));return a?(e.m=0,e.d=+a[0],i+a[0].length):-1}function _C(e,t,i){var a=Aa.exec(t.slice(i,i+2));return a?(e.H=+a[0],i+a[0].length):-1}function c8(e,t,i){var a=Aa.exec(t.slice(i,i+2));return a?(e.M=+a[0],i+a[0].length):-1}function u8(e,t,i){var a=Aa.exec(t.slice(i,i+2));return a?(e.S=+a[0],i+a[0].length):-1}function h8(e,t,i){var a=Aa.exec(t.slice(i,i+3));return a?(e.L=+a[0],i+a[0].length):-1}function d8(e,t,i){var a=Aa.exec(t.slice(i,i+6));return a?(e.L=Math.floor(a[0]/1e3),i+a[0].length):-1}function f8(e,t,i){var a=KF.exec(t.slice(i,i+1));return a?i+a[0].length:-1}function p8(e,t,i){var a=Aa.exec(t.slice(i));return a?(e.Q=+a[0],i+a[0].length):-1}function m8(e,t,i){var a=Aa.exec(t.slice(i));return a?(e.s=+a[0],i+a[0].length):-1}function bC(e,t){return un(e.getDate(),t,2)}function g8(e,t){return un(e.getHours(),t,2)}function y8(e,t){return un(e.getHours()%12||12,t,2)}function v8(e,t){return un(1+Ry.count(Zu(e),e),t,3)}function Rk(e,t){return un(e.getMilliseconds(),t,3)}function _8(e,t){return Rk(e,t)+"000"}function b8(e,t){return un(e.getMonth()+1,t,2)}function x8(e,t){return un(e.getMinutes(),t,2)}function w8(e,t){return un(e.getSeconds(),t,2)}function S8(e){var t=e.getDay();return t===0?7:t}function T8(e,t){return un(r0.count(Zu(e)-1,e),t,2)}function Nk(e){var t=e.getDay();return t>=4||t===0?em(e):em.ceil(e)}function A8(e,t){return e=Nk(e),un(em.count(Zu(e),e)+(Zu(e).getDay()===4),t,2)}function M8(e){return e.getDay()}function P8(e,t){return un(d_.count(Zu(e)-1,e),t,2)}function E8(e,t){return un(e.getFullYear()%100,t,2)}function C8(e,t){return e=Nk(e),un(e.getFullYear()%100,t,2)}function j8(e,t){return un(e.getFullYear()%1e4,t,4)}function O8(e,t){var i=e.getDay();return e=i>=4||i===0?em(e):em.ceil(e),un(e.getFullYear()%1e4,t,4)}function I8(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+un(t/60|0,"0",2)+un(t%60,"0",2)}function xC(e,t){return un(e.getUTCDate(),t,2)}function k8(e,t){return un(e.getUTCHours(),t,2)}function z8(e,t){return un(e.getUTCHours()%12||12,t,2)}function D8(e,t){return un(1+t0.count(Hu(e),e),t,3)}function Lk(e,t){return un(e.getUTCMilliseconds(),t,3)}function R8(e,t){return Lk(e,t)+"000"}function N8(e,t){return un(e.getUTCMonth()+1,t,2)}function L8(e,t){return un(e.getUTCMinutes(),t,2)}function B8(e,t){return un(e.getUTCSeconds(),t,2)}function F8(e){var t=e.getUTCDay();return t===0?7:t}function $8(e,t){return un(n0.count(Hu(e)-1,e),t,2)}function Bk(e){var t=e.getUTCDay();return t>=4||t===0?tm(e):tm.ceil(e)}function q8(e,t){return e=Bk(e),un(tm.count(Hu(e),e)+(Hu(e).getUTCDay()===4),t,2)}function U8(e){return e.getUTCDay()}function V8(e,t){return un(f_.count(Hu(e)-1,e),t,2)}function G8(e,t){return un(e.getUTCFullYear()%100,t,2)}function Z8(e,t){return e=Bk(e),un(e.getUTCFullYear()%100,t,2)}function H8(e,t){return un(e.getUTCFullYear()%1e4,t,4)}function X8(e,t){var i=e.getUTCDay();return e=i>=4||i===0?tm(e):tm.ceil(e),un(e.getUTCFullYear()%1e4,t,4)}function W8(){return"+0000"}function wC(){return"%"}function SC(e){return+e}function TC(e){return Math.floor(+e/1e3)}var Rp,Fk,$k;Y8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Y8(e){return Rp=YF(e),Fk=Rp.format,Rp.parse,$k=Rp.utcFormat,Rp.utcParse,Rp}function K8(e){return new Date(e)}function Q8(e){return e instanceof Date?+e:+new Date(+e)}function dT(e,t,i,a,f,y,m,c,M,C){var D=QS(),O=D.invert,B=D.domain,F=C(".%L"),X=C(":%S"),Z=C("%I:%M"),U=C("%I %p"),te=C("%a %d"),ae=C("%b %d"),ne=C("%B"),ue=C("%Y");function J(oe){return(M(oe)<oe?F:c(oe)<oe?X:m(oe)<oe?Z:y(oe)<oe?U:a(oe)<oe?f(oe)<oe?te:ae:i(oe)<oe?ne:ue)(oe)}return D.invert=function(oe){return new Date(O(oe))},D.domain=function(oe){return arguments.length?B(Array.from(oe,Q8)):B().map(K8)},D.ticks=function(oe){var me=B();return e(me[0],me[me.length-1],oe??10)},D.tickFormat=function(oe,me){return me==null?J:C(me)},D.nice=function(oe){var me=B();return(!oe||typeof oe.range!="function")&&(oe=t(me[0],me[me.length-1],oe??10)),oe?B(Pk(me,oe)):D},D.copy=function(){return Dy(D,dT(e,t,i,a,f,y,m,c,M,C))},D}function J8(){return ll.apply(dT(XF,WF,Zu,uT,r0,Ry,lT,oT,gf,Fk).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function e$(){return ll.apply(dT(ZF,HF,Hu,hT,n0,t0,cT,sT,gf,$k).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function i0(){var e=0,t=1,i,a,f,y,m=Ao,c=!1,M;function C(O){return O==null||isNaN(O=+O)?M:m(f===0?.5:(O=(y(O)-i)*f,c?Math.max(0,Math.min(1,O)):O))}C.domain=function(O){return arguments.length?([e,t]=O,i=y(e=+e),a=y(t=+t),f=i===a?0:1/(a-i),C):[e,t]},C.clamp=function(O){return arguments.length?(c=!!O,C):c},C.interpolator=function(O){return arguments.length?(m=O,C):m};function D(O){return function(B){var F,X;return arguments.length?([F,X]=B,m=O(F,X),C):[m(0),m(1)]}}return C.range=D(Sm),C.rangeRound=D(KS),C.unknown=function(O){return arguments.length?(M=O,C):M},function(O){return y=O,i=O(e),a=O(t),f=i===a?0:1/(a-i),C}}function dd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function qk(){var e=hd(i0()(Ao));return e.copy=function(){return dd(e,qk())},Ku.apply(e,arguments)}function Uk(){var e=tT(i0()).domain([1,10]);return e.copy=function(){return dd(e,Uk()).base(e.base())},Ku.apply(e,arguments)}function Vk(){var e=rT(i0());return e.copy=function(){return dd(e,Vk()).constant(e.constant())},Ku.apply(e,arguments)}function fT(){var e=nT(i0());return e.copy=function(){return dd(e,fT()).exponent(e.exponent())},Ku.apply(e,arguments)}function t$(){return fT.apply(null,arguments).exponent(.5)}function Gk(){var e=[],t=Ao;function i(a){if(a!=null&&!isNaN(a=+a))return t((ky(e,a,1)-1)/(e.length-1))}return i.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let f of a)f!=null&&!isNaN(f=+f)&&e.push(f);return e.sort(sd),i},i.interpolator=function(a){return arguments.length?(t=a,i):t},i.range=function(){return e.map((a,f)=>t(f/(e.length-1)))},i.quantiles=function(a){return Array.from({length:a+1},(f,y)=>$B(e,y/a))},i.copy=function(){return Gk(t).domain(e)},Ku.apply(i,arguments)}function a0(){var e=0,t=.5,i=1,a=1,f,y,m,c,M,C=Ao,D,O=!1,B;function F(Z){return isNaN(Z=+Z)?B:(Z=.5+((Z=+D(Z))-y)*(a*Z<a*y?c:M),C(O?Math.max(0,Math.min(1,Z)):Z))}F.domain=function(Z){return arguments.length?([e,t,i]=Z,f=D(e=+e),y=D(t=+t),m=D(i=+i),c=f===y?0:.5/(y-f),M=y===m?0:.5/(m-y),a=y<f?-1:1,F):[e,t,i]},F.clamp=function(Z){return arguments.length?(O=!!Z,F):O},F.interpolator=function(Z){return arguments.length?(C=Z,F):C};function X(Z){return function(U){var te,ae,ne;return arguments.length?([te,ae,ne]=U,C=fF(Z,[te,ae,ne]),F):[C(0),C(.5),C(1)]}}return F.range=X(Sm),F.rangeRound=X(KS),F.unknown=function(Z){return arguments.length?(B=Z,F):B},function(Z){return D=Z,f=Z(e),y=Z(t),m=Z(i),c=f===y?0:.5/(y-f),M=y===m?0:.5/(m-y),a=y<f?-1:1,F}}function Zk(){var e=hd(a0()(Ao));return e.copy=function(){return dd(e,Zk())},Ku.apply(e,arguments)}function Hk(){var e=tT(a0()).domain([.1,1,10]);return e.copy=function(){return dd(e,Hk()).base(e.base())},Ku.apply(e,arguments)}function Xk(){var e=rT(a0());return e.copy=function(){return dd(e,Xk()).constant(e.constant())},Ku.apply(e,arguments)}function pT(){var e=nT(a0());return e.copy=function(){return dd(e,pT()).exponent(e.exponent())},Ku.apply(e,arguments)}function r$(){return pT.apply(null,arguments).exponent(.5)}const AC=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Qg,scaleDiverging:Zk,scaleDivergingLog:Hk,scaleDivergingPow:pT,scaleDivergingSqrt:r$,scaleDivergingSymlog:Xk,scaleIdentity:Mk,scaleImplicit:M2,scaleLinear:u_,scaleLog:Ek,scaleOrdinal:XS,scalePoint:Fg,scalePow:iT,scaleQuantile:Ok,scaleQuantize:Ik,scaleRadial:jk,scaleSequential:qk,scaleSequentialLog:Uk,scaleSequentialPow:fT,scaleSequentialQuantile:Gk,scaleSequentialSqrt:t$,scaleSequentialSymlog:Vk,scaleSqrt:RF,scaleSymlog:Ck,scaleThreshold:kk,scaleTime:J8,scaleUtc:e$,tickFormat:Ak},Symbol.toStringTag,{value:"Module"}));var lw,MC;function Wk(){if(MC)return lw;MC=1;var e=_m();function t(i,a,f){for(var y=-1,m=i.length;++y<m;){var c=i[y],M=a(c);if(M!=null&&(C===void 0?M===M&&!e(M):f(M,C)))var C=M,D=c}return D}return lw=t,lw}var cw,PC;function n$(){if(PC)return cw;PC=1;function e(t,i){return t>i}return cw=e,cw}var uw,EC;function i$(){if(EC)return uw;EC=1;var e=Wk(),t=n$(),i=xm();function a(f){return f&&f.length?e(f,i,t):void 0}return uw=a,uw}var a$=i$();const o0=kn(a$);var hw,CC;function o$(){if(CC)return hw;CC=1;function e(t,i){return t<i}return hw=e,hw}var dw,jC;function s$(){if(jC)return dw;jC=1;var e=Wk(),t=o$(),i=xm();function a(f){return f&&f.length?e(f,i,t):void 0}return dw=a,dw}var l$=s$();const s0=kn(l$);var fw,OC;function c$(){if(OC)return fw;OC=1;var e=jS(),t=ud(),i=nk(),a=ts();function f(y,m){var c=a(y)?e:i;return c(y,t(m,3))}return fw=f,fw}var pw,IC;function u$(){if(IC)return pw;IC=1;var e=tk(),t=c$();function i(a,f){return e(t(a,f),1)}return pw=i,pw}var h$=u$();const d$=kn(h$);var mw,kC;function f$(){if(kC)return mw;kC=1;var e=US();function t(i,a){return e(i,a)}return mw=t,mw}var p$=f$();const l0=kn(p$);var Tm=1e9,m$={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},gT,si=!0,sl="[DecimalError] ",wf=sl+"Invalid argument: ",mT=sl+"Exponent out of range: ",Am=Math.floor,ff=Math.pow,g$=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ws,Ta=1e7,Kn=7,Yk=9007199254740991,p_=Am(Yk/Kn),Wt={};Wt.absoluteValue=Wt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Wt.comparedTo=Wt.cmp=function(e){var t,i,a,f,y=this;if(e=new y.constructor(e),y.s!==e.s)return y.s||-e.s;if(y.e!==e.e)return y.e>e.e^y.s<0?1:-1;for(a=y.d.length,f=e.d.length,t=0,i=a<f?a:f;t<i;++t)if(y.d[t]!==e.d[t])return y.d[t]>e.d[t]^y.s<0?1:-1;return a===f?0:a>f^y.s<0?1:-1};Wt.decimalPlaces=Wt.dp=function(){var e=this,t=e.d.length-1,i=(t-e.e)*Kn;if(t=e.d[t],t)for(;t%10==0;t/=10)i--;return i<0?0:i};Wt.dividedBy=Wt.div=function(e){return Vu(this,new this.constructor(e))};Wt.dividedToIntegerBy=Wt.idiv=function(e){var t=this,i=t.constructor;return Ln(Vu(t,new i(e),0,1),i.precision)};Wt.equals=Wt.eq=function(e){return!this.cmp(e)};Wt.exponent=function(){return Xi(this)};Wt.greaterThan=Wt.gt=function(e){return this.cmp(e)>0};Wt.greaterThanOrEqualTo=Wt.gte=function(e){return this.cmp(e)>=0};Wt.isInteger=Wt.isint=function(){return this.e>this.d.length-2};Wt.isNegative=Wt.isneg=function(){return this.s<0};Wt.isPositive=Wt.ispos=function(){return this.s>0};Wt.isZero=function(){return this.s===0};Wt.lessThan=Wt.lt=function(e){return this.cmp(e)<0};Wt.lessThanOrEqualTo=Wt.lte=function(e){return this.cmp(e)<1};Wt.logarithm=Wt.log=function(e){var t,i=this,a=i.constructor,f=a.precision,y=f+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(ws))throw Error(sl+"NaN");if(i.s<1)throw Error(sl+(i.s?"NaN":"-Infinity"));return i.eq(ws)?new a(0):(si=!1,t=Vu(ny(i,y),ny(e,y),y),si=!0,Ln(t,f))};Wt.minus=Wt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Jk(t,e):Kk(t,(e.s=-e.s,e))};Wt.modulo=Wt.mod=function(e){var t,i=this,a=i.constructor,f=a.precision;if(e=new a(e),!e.s)throw Error(sl+"NaN");return i.s?(si=!1,t=Vu(i,e,0,1).times(e),si=!0,i.minus(t)):Ln(new a(i),f)};Wt.naturalExponential=Wt.exp=function(){return Qk(this)};Wt.naturalLogarithm=Wt.ln=function(){return ny(this)};Wt.negated=Wt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Wt.plus=Wt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Kk(t,e):Jk(t,(e.s=-e.s,e))};Wt.precision=Wt.sd=function(e){var t,i,a,f=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(wf+e);if(t=Xi(f)+1,a=f.d.length-1,i=a*Kn+1,a=f.d[a],a){for(;a%10==0;a/=10)i--;for(a=f.d[0];a>=10;a/=10)i++}return e&&t>i?t:i};Wt.squareRoot=Wt.sqrt=function(){var e,t,i,a,f,y,m,c=this,M=c.constructor;if(c.s<1){if(!c.s)return new M(0);throw Error(sl+"NaN")}for(e=Xi(c),si=!1,f=Math.sqrt(+c),f==0||f==1/0?(t=Vc(c.d),(t.length+e)%2==0&&(t+="0"),f=Math.sqrt(t),e=Am((e+1)/2)-(e<0||e%2),f==1/0?t="5e"+e:(t=f.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new M(t)):a=new M(f.toString()),i=M.precision,f=m=i+3;;)if(y=a,a=y.plus(Vu(c,y,m+2)).times(.5),Vc(y.d).slice(0,m)===(t=Vc(a.d)).slice(0,m)){if(t=t.slice(m-3,m+1),f==m&&t=="4999"){if(Ln(y,i+1,0),y.times(y).eq(c)){a=y;break}}else if(t!="9999")break;m+=4}return si=!0,Ln(a,i)};Wt.times=Wt.mul=function(e){var t,i,a,f,y,m,c,M,C,D=this,O=D.constructor,B=D.d,F=(e=new O(e)).d;if(!D.s||!e.s)return new O(0);for(e.s*=D.s,i=D.e+e.e,M=B.length,C=F.length,M<C&&(y=B,B=F,F=y,m=M,M=C,C=m),y=[],m=M+C,a=m;a--;)y.push(0);for(a=C;--a>=0;){for(t=0,f=M+a;f>a;)c=y[f]+F[a]*B[f-a-1]+t,y[f--]=c%Ta|0,t=c/Ta|0;y[f]=(y[f]+t)%Ta|0}for(;!y[--m];)y.pop();return t?++i:y.shift(),e.d=y,e.e=i,si?Ln(e,O.precision):e};Wt.toDecimalPlaces=Wt.todp=function(e,t){var i=this,a=i.constructor;return i=new a(i),e===void 0?i:(Xc(e,0,Tm),t===void 0?t=a.rounding:Xc(t,0,8),Ln(i,e+Xi(i)+1,t))};Wt.toExponential=function(e,t){var i,a=this,f=a.constructor;return e===void 0?i=Af(a,!0):(Xc(e,0,Tm),t===void 0?t=f.rounding:Xc(t,0,8),a=Ln(new f(a),e+1,t),i=Af(a,!0,e+1)),i};Wt.toFixed=function(e,t){var i,a,f=this,y=f.constructor;return e===void 0?Af(f):(Xc(e,0,Tm),t===void 0?t=y.rounding:Xc(t,0,8),a=Ln(new y(f),e+Xi(f)+1,t),i=Af(a.abs(),!1,e+Xi(a)+1),f.isneg()&&!f.isZero()?"-"+i:i)};Wt.toInteger=Wt.toint=function(){var e=this,t=e.constructor;return Ln(new t(e),Xi(e)+1,t.rounding)};Wt.toNumber=function(){return+this};Wt.toPower=Wt.pow=function(e){var t,i,a,f,y,m,c=this,M=c.constructor,C=12,D=+(e=new M(e));if(!e.s)return new M(ws);if(c=new M(c),!c.s){if(e.s<1)throw Error(sl+"Infinity");return c}if(c.eq(ws))return c;if(a=M.precision,e.eq(ws))return Ln(c,a);if(t=e.e,i=e.d.length-1,m=t>=i,y=c.s,m){if((i=D<0?-D:D)<=Yk){for(f=new M(ws),t=Math.ceil(a/Kn+4),si=!1;i%2&&(f=f.times(c),DC(f.d,t)),i=Am(i/2),i!==0;)c=c.times(c),DC(c.d,t);return si=!0,e.s<0?new M(ws).div(f):Ln(f,a)}}else if(y<0)throw Error(sl+"NaN");return y=y<0&&e.d[Math.max(t,i)]&1?-1:1,c.s=1,si=!1,f=e.times(ny(c,a+C)),si=!0,f=Qk(f),f.s=y,f};Wt.toPrecision=function(e,t){var i,a,f=this,y=f.constructor;return e===void 0?(i=Xi(f),a=Af(f,i<=y.toExpNeg||i>=y.toExpPos)):(Xc(e,1,Tm),t===void 0?t=y.rounding:Xc(t,0,8),f=Ln(new y(f),e,t),i=Xi(f),a=Af(f,e<=i||i<=y.toExpNeg,e)),a};Wt.toSignificantDigits=Wt.tosd=function(e,t){var i=this,a=i.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Xc(e,1,Tm),t===void 0?t=a.rounding:Xc(t,0,8)),Ln(new a(i),e,t)};Wt.toString=Wt.valueOf=Wt.val=Wt.toJSON=Wt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Xi(e),i=e.constructor;return Af(e,t<=i.toExpNeg||t>=i.toExpPos)};function Kk(e,t){var i,a,f,y,m,c,M,C,D=e.constructor,O=D.precision;if(!e.s||!t.s)return t.s||(t=new D(e)),si?Ln(t,O):t;if(M=e.d,C=t.d,m=e.e,f=t.e,M=M.slice(),y=m-f,y){for(y<0?(a=M,y=-y,c=C.length):(a=C,f=m,c=M.length),m=Math.ceil(O/Kn),c=m>c?m+1:c+1,y>c&&(y=c,a.length=1),a.reverse();y--;)a.push(0);a.reverse()}for(c=M.length,y=C.length,c-y<0&&(y=c,a=C,C=M,M=a),i=0;y;)i=(M[--y]=M[y]+C[y]+i)/Ta|0,M[y]%=Ta;for(i&&(M.unshift(i),++f),c=M.length;M[--c]==0;)M.pop();return t.d=M,t.e=f,si?Ln(t,O):t}function Xc(e,t,i){if(e!==~~e||e<t||e>i)throw Error(wf+e)}function Vc(e){var t,i,a,f=e.length-1,y="",m=e[0];if(f>0){for(y+=m,t=1;t<f;t++)a=e[t]+"",i=Kn-a.length,i&&(y+=rd(i)),y+=a;m=e[t],a=m+"",i=Kn-a.length,i&&(y+=rd(i))}else if(m===0)return"0";for(;m%10===0;)m/=10;return y+m}var Vu=function(){function e(a,f){var y,m=0,c=a.length;for(a=a.slice();c--;)y=a[c]*f+m,a[c]=y%Ta|0,m=y/Ta|0;return m&&a.unshift(m),a}function t(a,f,y,m){var c,M;if(y!=m)M=y>m?1:-1;else for(c=M=0;c<y;c++)if(a[c]!=f[c]){M=a[c]>f[c]?1:-1;break}return M}function i(a,f,y){for(var m=0;y--;)a[y]-=m,m=a[y]<f[y]?1:0,a[y]=m*Ta+a[y]-f[y];for(;!a[0]&&a.length>1;)a.shift()}return function(a,f,y,m){var c,M,C,D,O,B,F,X,Z,U,te,ae,ne,ue,J,oe,me,_e,ke=a.constructor,at=a.s==f.s?1:-1,ze=a.d,Fe=f.d;if(!a.s)return new ke(a);if(!f.s)throw Error(sl+"Division by zero");for(M=a.e-f.e,me=Fe.length,J=ze.length,F=new ke(at),X=F.d=[],C=0;Fe[C]==(ze[C]||0);)++C;if(Fe[C]>(ze[C]||0)&&--M,y==null?ae=y=ke.precision:m?ae=y+(Xi(a)-Xi(f))+1:ae=y,ae<0)return new ke(0);if(ae=ae/Kn+2|0,C=0,me==1)for(D=0,Fe=Fe[0],ae++;(C<J||D)&&ae--;C++)ne=D*Ta+(ze[C]||0),X[C]=ne/Fe|0,D=ne%Fe|0;else{for(D=Ta/(Fe[0]+1)|0,D>1&&(Fe=e(Fe,D),ze=e(ze,D),me=Fe.length,J=ze.length),ue=me,Z=ze.slice(0,me),U=Z.length;U<me;)Z[U++]=0;_e=Fe.slice(),_e.unshift(0),oe=Fe[0],Fe[1]>=Ta/2&&++oe;do D=0,c=t(Fe,Z,me,U),c<0?(te=Z[0],me!=U&&(te=te*Ta+(Z[1]||0)),D=te/oe|0,D>1?(D>=Ta&&(D=Ta-1),O=e(Fe,D),B=O.length,U=Z.length,c=t(O,Z,B,U),c==1&&(D--,i(O,me<B?_e:Fe,B))):(D==0&&(c=D=1),O=Fe.slice()),B=O.length,B<U&&O.unshift(0),i(Z,O,U),c==-1&&(U=Z.length,c=t(Fe,Z,me,U),c<1&&(D++,i(Z,me<U?_e:Fe,U))),U=Z.length):c===0&&(D++,Z=[0]),X[C++]=D,c&&Z[0]?Z[U++]=ze[ue]||0:(Z=[ze[ue]],U=1);while((ue++<J||Z[0]!==void 0)&&ae--)}return X[0]||X.shift(),F.e=M,Ln(F,m?y+Xi(F)+1:y)}}();function Qk(e,t){var i,a,f,y,m,c,M=0,C=0,D=e.constructor,O=D.precision;if(Xi(e)>16)throw Error(mT+Xi(e));if(!e.s)return new D(ws);for(si=!1,c=O,m=new D(.03125);e.abs().gte(.1);)e=e.times(m),C+=5;for(a=Math.log(ff(2,C))/Math.LN10*2+5|0,c+=a,i=f=y=new D(ws),D.precision=c;;){if(f=Ln(f.times(e),c),i=i.times(++M),m=y.plus(Vu(f,i,c)),Vc(m.d).slice(0,c)===Vc(y.d).slice(0,c)){for(;C--;)y=Ln(y.times(y),c);return D.precision=O,t==null?(si=!0,Ln(y,O)):y}y=m}}function Xi(e){for(var t=e.e*Kn,i=e.d[0];i>=10;i/=10)t++;return t}function gw(e,t,i){if(t>e.LN10.sd())throw si=!0,i&&(e.precision=i),Error(sl+"LN10 precision limit exceeded");return Ln(new e(e.LN10),t)}function rd(e){for(var t="";e--;)t+="0";return t}function ny(e,t){var i,a,f,y,m,c,M,C,D,O=1,B=10,F=e,X=F.d,Z=F.constructor,U=Z.precision;if(F.s<1)throw Error(sl+(F.s?"NaN":"-Infinity"));if(F.eq(ws))return new Z(0);if(t==null?(si=!1,C=U):C=t,F.eq(10))return t==null&&(si=!0),gw(Z,C);if(C+=B,Z.precision=C,i=Vc(X),a=i.charAt(0),y=Xi(F),Math.abs(y)<15e14){for(;a<7&&a!=1||a==1&&i.charAt(1)>3;)F=F.times(e),i=Vc(F.d),a=i.charAt(0),O++;y=Xi(F),a>1?(F=new Z("0."+i),y++):F=new Z(a+"."+i.slice(1))}else return M=gw(Z,C+2,U).times(y+""),F=ny(new Z(a+"."+i.slice(1)),C-B).plus(M),Z.precision=U,t==null?(si=!0,Ln(F,U)):F;for(c=m=F=Vu(F.minus(ws),F.plus(ws),C),D=Ln(F.times(F),C),f=3;;){if(m=Ln(m.times(D),C),M=c.plus(Vu(m,new Z(f),C)),Vc(M.d).slice(0,C)===Vc(c.d).slice(0,C))return c=c.times(2),y!==0&&(c=c.plus(gw(Z,C+2,U).times(y+""))),c=Vu(c,new Z(O),C),Z.precision=U,t==null?(si=!0,Ln(c,U)):c;c=M,f+=2}}function zC(e,t){var i,a,f;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(i<0&&(i=a),i+=+t.slice(a+1),t=t.substring(0,a)):i<0&&(i=t.length),a=0;t.charCodeAt(a)===48;)++a;for(f=t.length;t.charCodeAt(f-1)===48;)--f;if(t=t.slice(a,f),t){if(f-=a,i=i-a-1,e.e=Am(i/Kn),e.d=[],a=(i+1)%Kn,i<0&&(a+=Kn),a<f){for(a&&e.d.push(+t.slice(0,a)),f-=Kn;a<f;)e.d.push(+t.slice(a,a+=Kn));t=t.slice(a),a=Kn-t.length}else a-=f;for(;a--;)t+="0";if(e.d.push(+t),si&&(e.e>p_||e.e<-p_))throw Error(mT+i)}else e.s=0,e.e=0,e.d=[0];return e}function Ln(e,t,i){var a,f,y,m,c,M,C,D,O=e.d;for(m=1,y=O[0];y>=10;y/=10)m++;if(a=t-m,a<0)a+=Kn,f=t,C=O[D=0];else{if(D=Math.ceil((a+1)/Kn),y=O.length,D>=y)return e;for(C=y=O[D],m=1;y>=10;y/=10)m++;a%=Kn,f=a-Kn+m}if(i!==void 0&&(y=ff(10,m-f-1),c=C/y%10|0,M=t<0||O[D+1]!==void 0||C%y,M=i<4?(c||M)&&(i==0||i==(e.s<0?3:2)):c>5||c==5&&(i==4||M||i==6&&(a>0?f>0?C/ff(10,m-f):0:O[D-1])%10&1||i==(e.s<0?8:7))),t<1||!O[0])return M?(y=Xi(e),O.length=1,t=t-y-1,O[0]=ff(10,(Kn-t%Kn)%Kn),e.e=Am(-t/Kn)||0):(O.length=1,O[0]=e.e=e.s=0),e;if(a==0?(O.length=D,y=1,D--):(O.length=D+1,y=ff(10,Kn-a),O[D]=f>0?(C/ff(10,m-f)%ff(10,f)|0)*y:0),M)for(;;)if(D==0){(O[0]+=y)==Ta&&(O[0]=1,++e.e);break}else{if(O[D]+=y,O[D]!=Ta)break;O[D--]=0,y=1}for(a=O.length;O[--a]===0;)O.pop();if(si&&(e.e>p_||e.e<-p_))throw Error(mT+Xi(e));return e}function Jk(e,t){var i,a,f,y,m,c,M,C,D,O,B=e.constructor,F=B.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new B(e),si?Ln(t,F):t;if(M=e.d,O=t.d,a=t.e,C=e.e,M=M.slice(),m=C-a,m){for(D=m<0,D?(i=M,m=-m,c=O.length):(i=O,a=C,c=M.length),f=Math.max(Math.ceil(F/Kn),c)+2,m>f&&(m=f,i.length=1),i.reverse(),f=m;f--;)i.push(0);i.reverse()}else{for(f=M.length,c=O.length,D=f<c,D&&(c=f),f=0;f<c;f++)if(M[f]!=O[f]){D=M[f]<O[f];break}m=0}for(D&&(i=M,M=O,O=i,t.s=-t.s),c=M.length,f=O.length-c;f>0;--f)M[c++]=0;for(f=O.length;f>m;){if(M[--f]<O[f]){for(y=f;y&&M[--y]===0;)M[y]=Ta-1;--M[y],M[f]+=Ta}M[f]-=O[f]}for(;M[--c]===0;)M.pop();for(;M[0]===0;M.shift())--a;return M[0]?(t.d=M,t.e=a,si?Ln(t,F):t):new B(0)}function Af(e,t,i){var a,f=Xi(e),y=Vc(e.d),m=y.length;return t?(i&&(a=i-m)>0?y=y.charAt(0)+"."+y.slice(1)+rd(a):m>1&&(y=y.charAt(0)+"."+y.slice(1)),y=y+(f<0?"e":"e+")+f):f<0?(y="0."+rd(-f-1)+y,i&&(a=i-m)>0&&(y+=rd(a))):f>=m?(y+=rd(f+1-m),i&&(a=i-f-1)>0&&(y=y+"."+rd(a))):((a=f+1)<m&&(y=y.slice(0,a)+"."+y.slice(a)),i&&(a=i-m)>0&&(f+1===m&&(y+="."),y+=rd(a))),e.s<0?"-"+y:y}function DC(e,t){if(e.length>t)return e.length=t,!0}function ez(e){var t,i,a;function f(y){var m=this;if(!(m instanceof f))return new f(y);if(m.constructor=f,y instanceof f){m.s=y.s,m.e=y.e,m.d=(y=y.d)?y.slice():y;return}if(typeof y=="number"){if(y*0!==0)throw Error(wf+y);if(y>0)m.s=1;else if(y<0)y=-y,m.s=-1;else{m.s=0,m.e=0,m.d=[0];return}if(y===~~y&&y<1e7){m.e=0,m.d=[y];return}return zC(m,y.toString())}else if(typeof y!="string")throw Error(wf+y);if(y.charCodeAt(0)===45?(y=y.slice(1),m.s=-1):m.s=1,g$.test(y))zC(m,y);else throw Error(wf+y)}if(f.prototype=Wt,f.ROUND_UP=0,f.ROUND_DOWN=1,f.ROUND_CEIL=2,f.ROUND_FLOOR=3,f.ROUND_HALF_UP=4,f.ROUND_HALF_DOWN=5,f.ROUND_HALF_EVEN=6,f.ROUND_HALF_CEIL=7,f.ROUND_HALF_FLOOR=8,f.clone=ez,f.config=f.set=y$,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(i=a[t++])||(e[i]=this[i]);return f.config(e),f}function y$(e){if(!e||typeof e!="object")throw Error(sl+"Object expected");var t,i,a,f=["precision",1,Tm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<f.length;t+=3)if((a=e[i=f[t]])!==void 0)if(Am(a)===a&&a>=f[t+1]&&a<=f[t+2])this[i]=a;else throw Error(wf+i+": "+a);if((a=e[i="LN10"])!==void 0)if(a==Math.LN10)this[i]=new this(a);else throw Error(wf+i+": "+a);return this}var gT=ez(m$);ws=new gT(1);const In=gT;function v$(e){return w$(e)||x$(e)||b$(e)||_$()}function _$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b$(e,t){if(e){if(typeof e=="string")return j2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return j2(e,t)}}function x$(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function w$(e){if(Array.isArray(e))return j2(e)}function j2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var S$=function(t){return t},tz={},rz=function(t){return t===tz},RC=function(t){return function i(){return arguments.length===0||arguments.length===1&&rz(arguments.length<=0?void 0:arguments[0])?i:t.apply(void 0,arguments)}},T$=function e(t,i){return t===1?i:RC(function(){for(var a=arguments.length,f=new Array(a),y=0;y<a;y++)f[y]=arguments[y];var m=f.filter(function(c){return c!==tz}).length;return m>=t?i.apply(void 0,f):e(t-m,RC(function(){for(var c=arguments.length,M=new Array(c),C=0;C<c;C++)M[C]=arguments[C];var D=f.map(function(O){return rz(O)?M.shift():O});return i.apply(void 0,v$(D).concat(M))}))})},c0=function(t){return T$(t.length,t)},O2=function(t,i){for(var a=[],f=t;f<i;++f)a[f-t]=f;return a},A$=c0(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(i){return t[i]}).map(e)}),M$=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];if(!i.length)return S$;var f=i.reverse(),y=f[0],m=f.slice(1);return function(){return m.reduce(function(c,M){return M(c)},y.apply(void 0,arguments))}},I2=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},nz=function(t){var i=null,a=null;return function(){for(var f=arguments.length,y=new Array(f),m=0;m<f;m++)y[m]=arguments[m];return i&&y.every(function(c,M){return c===i[M]})||(i=y,a=t.apply(void 0,y)),a}};function P$(e){var t;return e===0?t=1:t=Math.floor(new In(e).abs().log(10).toNumber())+1,t}function E$(e,t,i){for(var a=new In(e),f=0,y=[];a.lt(t)&&f<1e5;)y.push(a.toNumber()),a=a.add(i),f++;return y}var C$=c0(function(e,t,i){var a=+e,f=+t;return a+i*(f-a)}),j$=c0(function(e,t,i){var a=t-+e;return a=a||1/0,(i-e)/a}),O$=c0(function(e,t,i){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(i-e)/a))});const u0={rangeStep:E$,getDigitCount:P$,interpolateNumber:C$,uninterpolateNumber:j$,uninterpolateTruncation:O$};function k2(e){return z$(e)||k$(e)||iz(e)||I$()}function I$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k$(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function z$(e){if(Array.isArray(e))return z2(e)}function iy(e,t){return N$(e)||R$(e,t)||iz(e,t)||D$()}function D$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iz(e,t){if(e){if(typeof e=="string")return z2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return z2(e,t)}}function z2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function R$(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var i=[],a=!0,f=!1,y=void 0;try{for(var m=e[Symbol.iterator](),c;!(a=(c=m.next()).done)&&(i.push(c.value),!(t&&i.length===t));a=!0);}catch(M){f=!0,y=M}finally{try{!a&&m.return!=null&&m.return()}finally{if(f)throw y}}return i}}function N$(e){if(Array.isArray(e))return e}function az(e){var t=iy(e,2),i=t[0],a=t[1],f=i,y=a;return i>a&&(f=a,y=i),[f,y]}function oz(e,t,i){if(e.lte(0))return new In(0);var a=u0.getDigitCount(e.toNumber()),f=new In(10).pow(a),y=e.div(f),m=a!==1?.05:.1,c=new In(Math.ceil(y.div(m).toNumber())).add(i).mul(m),M=c.mul(f);return t?M:new In(Math.ceil(M))}function L$(e,t,i){var a=1,f=new In(e);if(!f.isint()&&i){var y=Math.abs(e);y<1?(a=new In(10).pow(u0.getDigitCount(e)-1),f=new In(Math.floor(f.div(a).toNumber())).mul(a)):y>1&&(f=new In(Math.floor(e)))}else e===0?f=new In(Math.floor((t-1)/2)):i||(f=new In(Math.floor(e)));var m=Math.floor((t-1)/2),c=M$(A$(function(M){return f.add(new In(M-m).mul(a)).toNumber()}),O2);return c(0,t)}function sz(e,t,i,a){var f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(i-1)))return{step:new In(0),tickMin:new In(0),tickMax:new In(0)};var y=oz(new In(t).sub(e).div(i-1),a,f),m;e<=0&&t>=0?m=new In(0):(m=new In(e).add(t).div(2),m=m.sub(new In(m).mod(y)));var c=Math.ceil(m.sub(e).div(y).toNumber()),M=Math.ceil(new In(t).sub(m).div(y).toNumber()),C=c+M+1;return C>i?sz(e,t,i,a,f+1):(C<i&&(M=t>0?M+(i-C):M,c=t>0?c:c+(i-C)),{step:y,tickMin:m.sub(new In(c).mul(y)),tickMax:m.add(new In(M).mul(y))})}function B$(e){var t=iy(e,2),i=t[0],a=t[1],f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,m=Math.max(f,2),c=az([i,a]),M=iy(c,2),C=M[0],D=M[1];if(C===-1/0||D===1/0){var O=D===1/0?[C].concat(k2(O2(0,f-1).map(function(){return 1/0}))):[].concat(k2(O2(0,f-1).map(function(){return-1/0})),[D]);return i>a?I2(O):O}if(C===D)return L$(C,f,y);var B=sz(C,D,m,y),F=B.step,X=B.tickMin,Z=B.tickMax,U=u0.rangeStep(X,Z.add(new In(.1).mul(F)),F);return i>a?I2(U):U}function F$(e,t){var i=iy(e,2),a=i[0],f=i[1],y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,m=az([a,f]),c=iy(m,2),M=c[0],C=c[1];if(M===-1/0||C===1/0)return[a,f];if(M===C)return[M];var D=Math.max(t,2),O=oz(new In(C).sub(M).div(D-1),y,0),B=[].concat(k2(u0.rangeStep(new In(M),new In(C).sub(new In(.99).mul(O)),O)),[C]);return a>f?I2(B):B}var $$=nz(B$),q$=nz(F$),U$="Invariant failed";function Mf(e,t){throw new Error(U$)}var V$=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function rm(e){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rm(e)}function m_(){return m_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},m_.apply(this,arguments)}function G$(e,t){return W$(e)||X$(e,t)||H$(e,t)||Z$()}function Z$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H$(e,t){if(e){if(typeof e=="string")return NC(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return NC(e,t)}}function NC(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function X$(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,y,m,c=[],M=!0,C=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(c.push(a.value),c.length!==t);M=!0);}catch(D){C=!0,f=D}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return c}}function W$(e){if(Array.isArray(e))return e}function Y$(e,t){if(e==null)return{};var i=K$(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function K$(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function Q$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J$(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,uz(a.key),a)}}function eq(e,t,i){return t&&J$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tq(e,t,i){return t=g_(t),rq(e,lz()?Reflect.construct(t,i||[],g_(e).constructor):t.apply(e,i))}function rq(e,t){if(t&&(rm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nq(e)}function nq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lz=function(){return!!e})()}function g_(e){return g_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},g_(e)}function iq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D2(e,t)}function D2(e,t){return D2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},D2(e,t)}function cz(e,t,i){return t=uz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function uz(e){var t=aq(e,"string");return rm(t)=="symbol"?t:t+""}function aq(e,t){if(rm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(rm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ny=function(e){function t(){return Q$(this,t),tq(this,t,arguments)}return iq(t,e),eq(t,[{key:"render",value:function(){var a=this.props,f=a.offset,y=a.layout,m=a.width,c=a.dataKey,M=a.data,C=a.dataPointFormatter,D=a.xAxis,O=a.yAxis,B=Y$(a,V$),F=en(B,!1);this.props.direction==="x"&&D.type!=="number"&&Mf();var X=M.map(function(Z){var U=C(Z,c),te=U.x,ae=U.y,ne=U.value,ue=U.errorVal;if(!ue)return null;var J=[],oe,me;if(Array.isArray(ue)){var _e=G$(ue,2);oe=_e[0],me=_e[1]}else oe=me=ue;if(y==="vertical"){var ke=D.scale,at=ae+f,ze=at+m,Fe=at-m,tt=ke(ne-oe),ut=ke(ne+me);J.push({x1:ut,y1:ze,x2:ut,y2:Fe}),J.push({x1:tt,y1:at,x2:ut,y2:at}),J.push({x1:tt,y1:ze,x2:tt,y2:Fe})}else if(y==="horizontal"){var rt=O.scale,Pe=te+f,Ve=Pe-m,Ge=Pe+m,ht=rt(ne-oe),be=rt(ne+me);J.push({x1:Ve,y1:be,x2:Ge,y2:be}),J.push({x1:Pe,y1:ht,x2:Pe,y2:be}),J.push({x1:Ve,y1:ht,x2:Ge,y2:ht})}return $e.createElement(ji,m_({className:"recharts-errorBar",key:"bar-".concat(J.map(function(Xe){return"".concat(Xe.x1,"-").concat(Xe.x2,"-").concat(Xe.y1,"-").concat(Xe.y2)}))},F),J.map(function(Xe){return $e.createElement("line",m_({},Xe,{key:"line-".concat(Xe.x1,"-").concat(Xe.x2,"-").concat(Xe.y1,"-").concat(Xe.y2)}))}))});return $e.createElement(ji,{className:"recharts-errorBars"},X)}}])}($e.Component);cz(Ny,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});cz(Ny,"displayName","ErrorBar");function ay(e){"@babel/helpers - typeof";return ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ay(e)}function LC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function hf(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?LC(Object(i),!0).forEach(function(a){oq(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):LC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function oq(e,t,i){return t=sq(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function sq(e){var t=lq(e,"string");return ay(t)=="symbol"?t:t+""}function lq(e,t){if(ay(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(ay(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hz=function(t){var i=t.children,a=t.formattedGraphicalItems,f=t.legendWidth,y=t.legendContent,m=xs(i,bf);if(!m)return null;var c=bf.defaultProps,M=c!==void 0?hf(hf({},c),m.props):{},C;return m.props&&m.props.payload?C=m.props&&m.props.payload:y==="children"?C=(a||[]).reduce(function(D,O){var B=O.item,F=O.props,X=F.sectors||F.data||[];return D.concat(X.map(function(Z){return{type:m.props.iconType||B.props.legendType,value:Z.name,color:Z.fill,payload:Z}}))},[]):C=(a||[]).map(function(D){var O=D.item,B=O.type.defaultProps,F=B!==void 0?hf(hf({},B),O.props):{},X=F.dataKey,Z=F.name,U=F.legendType,te=F.hide;return{inactive:te,dataKey:X,type:M.iconType||U||"square",color:yT(O),value:Z||X,payload:F}}),hf(hf(hf({},M),bf.getWithHeight(m,f)),{},{payload:C,item:m})};function oy(e){"@babel/helpers - typeof";return oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oy(e)}function BC(e){return dq(e)||hq(e)||uq(e)||cq()}function cq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uq(e,t){if(e){if(typeof e=="string")return R2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return R2(e,t)}}function hq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dq(e){if(Array.isArray(e))return R2(e)}function R2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function FC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Ti(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?FC(Object(i),!0).forEach(function(a){Hp(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):FC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Hp(e,t,i){return t=fq(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function fq(e){var t=pq(e,"string");return oy(t)=="symbol"?t:t+""}function pq(e,t){if(oy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(oy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ss(e,t,i){return Wr(e)||Wr(t)?i:sa(t)?al(e,t,i):Lr(t)?t(e):i}function $g(e,t,i,a){var f=d$(e,function(c){return Ss(c,t)});if(i==="number"){var y=f.filter(function(c){return Dt(c)||parseFloat(c)});return y.length?[s0(y),o0(y)]:[1/0,-1/0]}var m=a?f.filter(function(c){return!Wr(c)}):f;return m.map(function(c){return sa(c)||c instanceof Date?c:""})}var mq=function(t){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],f=arguments.length>2?arguments[2]:void 0,y=arguments.length>3?arguments[3]:void 0,m=-1,c=(i=a==null?void 0:a.length)!==null&&i!==void 0?i:0;if(c<=1)return 0;if(y&&y.axisType==="angleAxis"&&Math.abs(Math.abs(y.range[1]-y.range[0])-360)<=1e-6)for(var M=y.range,C=0;C<c;C++){var D=C>0?f[C-1].coordinate:f[c-1].coordinate,O=f[C].coordinate,B=C>=c-1?f[0].coordinate:f[C+1].coordinate,F=void 0;if(oc(O-D)!==oc(B-O)){var X=[];if(oc(B-O)===oc(M[1]-M[0])){F=B;var Z=O+M[1]-M[0];X[0]=Math.min(Z,(Z+D)/2),X[1]=Math.max(Z,(Z+D)/2)}else{F=D;var U=B+M[1]-M[0];X[0]=Math.min(O,(U+O)/2),X[1]=Math.max(O,(U+O)/2)}var te=[Math.min(O,(F+O)/2),Math.max(O,(F+O)/2)];if(t>te[0]&&t<=te[1]||t>=X[0]&&t<=X[1]){m=f[C].index;break}}else{var ae=Math.min(D,B),ne=Math.max(D,B);if(t>(ae+O)/2&&t<=(ne+O)/2){m=f[C].index;break}}}else for(var ue=0;ue<c;ue++)if(ue===0&&t<=(a[ue].coordinate+a[ue+1].coordinate)/2||ue>0&&ue<c-1&&t>(a[ue].coordinate+a[ue-1].coordinate)/2&&t<=(a[ue].coordinate+a[ue+1].coordinate)/2||ue===c-1&&t>(a[ue].coordinate+a[ue-1].coordinate)/2){m=a[ue].index;break}return m},yT=function(t){var i,a=t,f=a.type.displayName,y=(i=t.type)!==null&&i!==void 0&&i.defaultProps?Ti(Ti({},t.type.defaultProps),t.props):t.props,m=y.stroke,c=y.fill,M;switch(f){case"Line":M=m;break;case"Area":case"Radar":M=m&&m!=="none"?m:c;break;default:M=c;break}return M},gq=function(t){var i=t.barSize,a=t.totalSize,f=t.stackGroups,y=f===void 0?{}:f;if(!y)return{};for(var m={},c=Object.keys(y),M=0,C=c.length;M<C;M++)for(var D=y[c[M]].stackGroups,O=Object.keys(D),B=0,F=O.length;B<F;B++){var X=D[O[B]],Z=X.items,U=X.cateAxisId,te=Z.filter(function(me){return qu(me.type).indexOf("Bar")>=0});if(te&&te.length){var ae=te[0].type.defaultProps,ne=ae!==void 0?Ti(Ti({},ae),te[0].props):te[0].props,ue=ne.barSize,J=ne[U];m[J]||(m[J]=[]);var oe=Wr(ue)?i:ue;m[J].push({item:te[0],stackList:te.slice(1),barSize:Wr(oe)?void 0:Tf(oe,a,0)})}}return m},yq=function(t){var i=t.barGap,a=t.barCategoryGap,f=t.bandSize,y=t.sizeList,m=y===void 0?[]:y,c=t.maxBarSize,M=m.length;if(M<1)return null;var C=Tf(i,f,0,!0),D,O=[];if(m[0].barSize===+m[0].barSize){var B=!1,F=f/M,X=m.reduce(function(ue,J){return ue+J.barSize||0},0);X+=(M-1)*C,X>=f&&(X-=(M-1)*C,C=0),X>=f&&F>0&&(B=!0,F*=.9,X=M*F);var Z=(f-X)/2>>0,U={offset:Z-C,size:0};D=m.reduce(function(ue,J){var oe={item:J.item,position:{offset:U.offset+U.size+C,size:B?F:J.barSize}},me=[].concat(BC(ue),[oe]);return U=me[me.length-1].position,J.stackList&&J.stackList.length&&J.stackList.forEach(function(_e){me.push({item:_e,position:U})}),me},O)}else{var te=Tf(a,f,0,!0);f-2*te-(M-1)*C<=0&&(C=0);var ae=(f-2*te-(M-1)*C)/M;ae>1&&(ae>>=0);var ne=c===+c?Math.min(ae,c):ae;D=m.reduce(function(ue,J,oe){var me=[].concat(BC(ue),[{item:J.item,position:{offset:te+(ae+C)*oe+(ae-ne)/2,size:ne}}]);return J.stackList&&J.stackList.length&&J.stackList.forEach(function(_e){me.push({item:_e,position:me[me.length-1].position})}),me},O)}return D},vq=function(t,i,a,f){var y=a.children,m=a.width,c=a.margin,M=m-(c.left||0)-(c.right||0),C=hz({children:y,legendWidth:M});if(C){var D=f||{},O=D.width,B=D.height,F=C.align,X=C.verticalAlign,Z=C.layout;if((Z==="vertical"||Z==="horizontal"&&X==="middle")&&F!=="center"&&Dt(t[F]))return Ti(Ti({},t),{},Hp({},F,t[F]+(O||0)));if((Z==="horizontal"||Z==="vertical"&&F==="center")&&X!=="middle"&&Dt(t[X]))return Ti(Ti({},t),{},Hp({},X,t[X]+(B||0)))}return t},_q=function(t,i,a){return Wr(i)?!0:t==="horizontal"?i==="yAxis":t==="vertical"||a==="x"?i==="xAxis":a==="y"?i==="yAxis":!0},dz=function(t,i,a,f,y){var m=i.props.children,c=ol(m,Ny).filter(function(C){return _q(f,y,C.props.direction)});if(c&&c.length){var M=c.map(function(C){return C.props.dataKey});return t.reduce(function(C,D){var O=Ss(D,a);if(Wr(O))return C;var B=Array.isArray(O)?[s0(O),o0(O)]:[O,O],F=M.reduce(function(X,Z){var U=Ss(D,Z,0),te=B[0]-Math.abs(Array.isArray(U)?U[0]:U),ae=B[1]+Math.abs(Array.isArray(U)?U[1]:U);return[Math.min(te,X[0]),Math.max(ae,X[1])]},[1/0,-1/0]);return[Math.min(F[0],C[0]),Math.max(F[1],C[1])]},[1/0,-1/0])}return null},bq=function(t,i,a,f,y){var m=i.map(function(c){return dz(t,c,a,y,f)}).filter(function(c){return!Wr(c)});return m&&m.length?m.reduce(function(c,M){return[Math.min(c[0],M[0]),Math.max(c[1],M[1])]},[1/0,-1/0]):null},fz=function(t,i,a,f,y){var m=i.map(function(M){var C=M.props.dataKey;return a==="number"&&C&&dz(t,M,C,f)||$g(t,C,a,y)});if(a==="number")return m.reduce(function(M,C){return[Math.min(M[0],C[0]),Math.max(M[1],C[1])]},[1/0,-1/0]);var c={};return m.reduce(function(M,C){for(var D=0,O=C.length;D<O;D++)c[C[D]]||(c[C[D]]=!0,M.push(C[D]));return M},[])},pz=function(t,i){return t==="horizontal"&&i==="xAxis"||t==="vertical"&&i==="yAxis"||t==="centric"&&i==="angleAxis"||t==="radial"&&i==="radiusAxis"},mz=function(t,i,a,f){if(f)return t.map(function(M){return M.coordinate});var y,m,c=t.map(function(M){return M.coordinate===i&&(y=!0),M.coordinate===a&&(m=!0),M.coordinate});return y||c.push(i),m||c.push(a),c},Fu=function(t,i,a){if(!t)return null;var f=t.scale,y=t.duplicateDomain,m=t.type,c=t.range,M=t.realScaleType==="scaleBand"?f.bandwidth()/2:2,C=(i||a)&&m==="category"&&f.bandwidth?f.bandwidth()/M:0;if(C=t.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?oc(c[0]-c[1])*2*C:C,i&&(t.ticks||t.niceTicks)){var D=(t.ticks||t.niceTicks).map(function(O){var B=y?y.indexOf(O):O;return{coordinate:f(B)+C,value:O,offset:C}});return D.filter(function(O){return!jy(O.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(O,B){return{coordinate:f(O)+C,value:O,index:B,offset:C}}):f.ticks&&!a?f.ticks(t.tickCount).map(function(O){return{coordinate:f(O)+C,value:O,offset:C}}):f.domain().map(function(O,B){return{coordinate:f(O)+C,value:y?y[O]:O,index:B,offset:C}})},yw=new WeakMap,Dv=function(t,i){if(typeof i!="function")return t;yw.has(t)||yw.set(t,new WeakMap);var a=yw.get(t);if(a.has(i))return a.get(i);var f=function(){t.apply(void 0,arguments),i.apply(void 0,arguments)};return a.set(i,f),f},xq=function(t,i,a){var f=t.scale,y=t.type,m=t.layout,c=t.axisType;if(f==="auto")return m==="radial"&&c==="radiusAxis"?{scale:Qg(),realScaleType:"band"}:m==="radial"&&c==="angleAxis"?{scale:u_(),realScaleType:"linear"}:y==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!a)?{scale:Fg(),realScaleType:"point"}:y==="category"?{scale:Qg(),realScaleType:"band"}:{scale:u_(),realScaleType:"linear"};if(Sf(f)){var M="scale".concat(H_(f));return{scale:(AC[M]||Fg)(),realScaleType:AC[M]?M:"point"}}return Lr(f)?{scale:f}:{scale:Fg(),realScaleType:"point"}},$C=1e-4,wq=function(t){var i=t.domain();if(!(!i||i.length<=2)){var a=i.length,f=t.range(),y=Math.min(f[0],f[1])-$C,m=Math.max(f[0],f[1])+$C,c=t(i[0]),M=t(i[a-1]);(c<y||c>m||M<y||M>m)&&t.domain([i[0],i[a-1]])}},Sq=function(t,i){if(!t)return null;for(var a=0,f=t.length;a<f;a++)if(t[a].item===i)return t[a].position;return null},Tq=function(t,i){if(!i||i.length!==2||!Dt(i[0])||!Dt(i[1]))return t;var a=Math.min(i[0],i[1]),f=Math.max(i[0],i[1]),y=[t[0],t[1]];return(!Dt(t[0])||t[0]<a)&&(y[0]=a),(!Dt(t[1])||t[1]>f)&&(y[1]=f),y[0]>f&&(y[0]=f),y[1]<a&&(y[1]=a),y},Aq=function(t){var i=t.length;if(!(i<=0))for(var a=0,f=t[0].length;a<f;++a)for(var y=0,m=0,c=0;c<i;++c){var M=jy(t[c][a][1])?t[c][a][0]:t[c][a][1];M>=0?(t[c][a][0]=y,t[c][a][1]=y+M,y=t[c][a][1]):(t[c][a][0]=m,t[c][a][1]=m+M,m=t[c][a][1])}},Mq=function(t){var i=t.length;if(!(i<=0))for(var a=0,f=t[0].length;a<f;++a)for(var y=0,m=0;m<i;++m){var c=jy(t[m][a][1])?t[m][a][0]:t[m][a][1];c>=0?(t[m][a][0]=y,t[m][a][1]=y+c,y=t[m][a][1]):(t[m][a][0]=0,t[m][a][1]=0)}},Pq={sign:Aq,expand:c4,none:Xp,silhouette:u4,wiggle:h4,positive:Mq},Eq=function(t,i,a){var f=i.map(function(c){return c.props.dataKey}),y=Pq[a],m=l4().keys(f).value(function(c,M){return+Ss(c,M,0)}).order(d2).offset(y);return m(t)},Cq=function(t,i,a,f,y,m){if(!t)return null;var c=m?i.reverse():i,M={},C=c.reduce(function(O,B){var F,X=(F=B.type)!==null&&F!==void 0&&F.defaultProps?Ti(Ti({},B.type.defaultProps),B.props):B.props,Z=X.stackId,U=X.hide;if(U)return O;var te=X[a],ae=O[te]||{hasStack:!1,stackGroups:{}};if(sa(Z)){var ne=ae.stackGroups[Z]||{numericAxisId:a,cateAxisId:f,items:[]};ne.items.push(B),ae.hasStack=!0,ae.stackGroups[Z]=ne}else ae.stackGroups[Oy("_stackId_")]={numericAxisId:a,cateAxisId:f,items:[B]};return Ti(Ti({},O),{},Hp({},te,ae))},M),D={};return Object.keys(C).reduce(function(O,B){var F=C[B];if(F.hasStack){var X={};F.stackGroups=Object.keys(F.stackGroups).reduce(function(Z,U){var te=F.stackGroups[U];return Ti(Ti({},Z),{},Hp({},U,{numericAxisId:a,cateAxisId:f,items:te.items,stackedData:Eq(t,te.items,y)}))},X)}return Ti(Ti({},O),{},Hp({},B,F))},D)},jq=function(t,i){var a=i.realScaleType,f=i.type,y=i.tickCount,m=i.originalDomain,c=i.allowDecimals,M=a||i.scale;if(M!=="auto"&&M!=="linear")return null;if(y&&f==="number"&&m&&(m[0]==="auto"||m[1]==="auto")){var C=t.domain();if(!C.length)return null;var D=$$(C,y,c);return t.domain([s0(D),o0(D)]),{niceTicks:D}}if(y&&f==="number"){var O=t.domain(),B=q$(O,y,c);return{niceTicks:B}}return null};function qC(e){var t=e.axis,i=e.ticks,a=e.bandSize,f=e.entry,y=e.index,m=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Wr(f[t.dataKey])){var c=Vv(i,"value",f[t.dataKey]);if(c)return c.coordinate+a/2}return i[y]?i[y].coordinate+a/2:null}var M=Ss(f,Wr(m)?t.dataKey:m);return Wr(M)?null:t.scale(M)}var UC=function(t){var i=t.axis,a=t.ticks,f=t.offset,y=t.bandSize,m=t.entry,c=t.index;if(i.type==="category")return a[c]?a[c].coordinate+f:null;var M=Ss(m,i.dataKey,i.domain[c]);return Wr(M)?null:i.scale(M)-y/2+f},Oq=function(t){var i=t.numericAxis,a=i.scale.domain();if(i.type==="number"){var f=Math.min(a[0],a[1]),y=Math.max(a[0],a[1]);return f<=0&&y>=0?0:y<0?y:f}return a[0]},Iq=function(t,i){var a,f=(a=t.type)!==null&&a!==void 0&&a.defaultProps?Ti(Ti({},t.type.defaultProps),t.props):t.props,y=f.stackId;if(sa(y)){var m=i[y];if(m){var c=m.items.indexOf(t);return c>=0?m.stackedData[c]:null}}return null},kq=function(t){return t.reduce(function(i,a){return[s0(a.concat([i[0]]).filter(Dt)),o0(a.concat([i[1]]).filter(Dt))]},[1/0,-1/0])},gz=function(t,i,a){return Object.keys(t).reduce(function(f,y){var m=t[y],c=m.stackedData,M=c.reduce(function(C,D){var O=kq(D.slice(i,a+1));return[Math.min(C[0],O[0]),Math.max(C[1],O[1])]},[1/0,-1/0]);return[Math.min(M[0],f[0]),Math.max(M[1],f[1])]},[1/0,-1/0]).map(function(f){return f===1/0||f===-1/0?0:f})},VC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,GC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,N2=function(t,i,a){if(Lr(t))return t(i,a);if(!Array.isArray(t))return i;var f=[];if(Dt(t[0]))f[0]=a?t[0]:Math.min(t[0],i[0]);else if(VC.test(t[0])){var y=+VC.exec(t[0])[1];f[0]=i[0]-y}else Lr(t[0])?f[0]=t[0](i[0]):f[0]=i[0];if(Dt(t[1]))f[1]=a?t[1]:Math.max(t[1],i[1]);else if(GC.test(t[1])){var m=+GC.exec(t[1])[1];f[1]=i[1]+m}else Lr(t[1])?f[1]=t[1](i[1]):f[1]=i[1];return f},y_=function(t,i,a){if(t&&t.scale&&t.scale.bandwidth){var f=t.scale.bandwidth();if(!a||f>0)return f}if(t&&i&&i.length>=2){for(var y=GS(i,function(O){return O.coordinate}),m=1/0,c=1,M=y.length;c<M;c++){var C=y[c],D=y[c-1];m=Math.min((C.coordinate||0)-(D.coordinate||0),m)}return m===1/0?0:m}return a?void 0:0},ZC=function(t,i,a){return!t||!t.length||l0(t,al(a,"type.defaultProps.domain"))?i:t},yz=function(t,i){var a=t.type.defaultProps?Ti(Ti({},t.type.defaultProps),t.props):t.props,f=a.dataKey,y=a.name,m=a.unit,c=a.formatter,M=a.tooltipType,C=a.chartType,D=a.hide;return Ti(Ti({},en(t,!1)),{},{dataKey:f,unit:m,formatter:c,name:y||f,color:yT(t),value:Ss(i,f),type:M,payload:i,chartType:C,hide:D})};function sy(e){"@babel/helpers - typeof";return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sy(e)}function HC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function XC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(i),!0).forEach(function(a){zq(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):HC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function zq(e,t,i){return t=Dq(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Dq(e){var t=Rq(e,"string");return sy(t)=="symbol"?t:t+""}function Rq(e,t){if(sy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(sy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v_=Math.PI/180,Nq=function(t){return t*180/Math.PI},La=function(t,i,a,f){return{x:t+Math.cos(-v_*f)*a,y:i+Math.sin(-v_*f)*a}},Lq=function(t,i){var a=t.x,f=t.y,y=i.x,m=i.y;return Math.sqrt(Math.pow(a-y,2)+Math.pow(f-m,2))},Bq=function(t,i){var a=t.x,f=t.y,y=i.cx,m=i.cy,c=Lq({x:a,y:f},{x:y,y:m});if(c<=0)return{radius:c};var M=(a-y)/c,C=Math.acos(M);return f>m&&(C=2*Math.PI-C),{radius:c,angle:Nq(C),angleInRadian:C}},Fq=function(t){var i=t.startAngle,a=t.endAngle,f=Math.floor(i/360),y=Math.floor(a/360),m=Math.min(f,y);return{startAngle:i-m*360,endAngle:a-m*360}},$q=function(t,i){var a=i.startAngle,f=i.endAngle,y=Math.floor(a/360),m=Math.floor(f/360),c=Math.min(y,m);return t+c*360},WC=function(t,i){var a=t.x,f=t.y,y=Bq({x:a,y:f},i),m=y.radius,c=y.angle,M=i.innerRadius,C=i.outerRadius;if(m<M||m>C)return!1;if(m===0)return!0;var D=Fq(i),O=D.startAngle,B=D.endAngle,F=c,X;if(O<=B){for(;F>B;)F-=360;for(;F<O;)F+=360;X=F>=O&&F<=B}else{for(;F>O;)F-=360;for(;F<B;)F+=360;X=F>=B&&F<=O}return X?XC(XC({},i),{},{radius:m,angle:$q(F,i)}):null};function ly(e){"@babel/helpers - typeof";return ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ly(e)}var qq=["offset"];function Uq(e){return Hq(e)||Zq(e)||Gq(e)||Vq()}function Vq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gq(e,t){if(e){if(typeof e=="string")return L2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return L2(e,t)}}function Zq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hq(e){if(Array.isArray(e))return L2(e)}function L2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Xq(e,t){if(e==null)return{};var i=Wq(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Wq(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function YC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function oa(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?YC(Object(i),!0).forEach(function(a){Yq(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):YC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Yq(e,t,i){return t=Kq(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Kq(e){var t=Qq(e,"string");return ly(t)=="symbol"?t:t+""}function Qq(e,t){if(ly(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(ly(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cy(){return cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},cy.apply(this,arguments)}var Jq=function(t){var i=t.value,a=t.formatter,f=Wr(t.children)?i:t.children;return Lr(a)?a(f):f},eU=function(t,i){var a=oc(i-t),f=Math.min(Math.abs(i-t),360);return a*f},tU=function(t,i,a){var f=t.position,y=t.viewBox,m=t.offset,c=t.className,M=y,C=M.cx,D=M.cy,O=M.innerRadius,B=M.outerRadius,F=M.startAngle,X=M.endAngle,Z=M.clockWise,U=(O+B)/2,te=eU(F,X),ae=te>=0?1:-1,ne,ue;f==="insideStart"?(ne=F+ae*m,ue=Z):f==="insideEnd"?(ne=X-ae*m,ue=!Z):f==="end"&&(ne=X+ae*m,ue=Z),ue=te<=0?ue:!ue;var J=La(C,D,U,ne),oe=La(C,D,U,ne+(ue?1:-1)*359),me="M".concat(J.x,",").concat(J.y,`
    A`).concat(U,",").concat(U,",0,1,").concat(ue?0:1,`,
    `).concat(oe.x,",").concat(oe.y),_e=Wr(t.id)?Oy("recharts-radial-line-"):t.id;return $e.createElement("text",cy({},a,{dominantBaseline:"central",className:sn("recharts-radial-bar-label",c)}),$e.createElement("defs",null,$e.createElement("path",{id:_e,d:me})),$e.createElement("textPath",{xlinkHref:"#".concat(_e)},i))},rU=function(t){var i=t.viewBox,a=t.offset,f=t.position,y=i,m=y.cx,c=y.cy,M=y.innerRadius,C=y.outerRadius,D=y.startAngle,O=y.endAngle,B=(D+O)/2;if(f==="outside"){var F=La(m,c,C+a,B),X=F.x,Z=F.y;return{x:X,y:Z,textAnchor:X>=m?"start":"end",verticalAnchor:"middle"}}if(f==="center")return{x:m,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(f==="centerTop")return{x:m,y:c,textAnchor:"middle",verticalAnchor:"start"};if(f==="centerBottom")return{x:m,y:c,textAnchor:"middle",verticalAnchor:"end"};var U=(M+C)/2,te=La(m,c,U,B),ae=te.x,ne=te.y;return{x:ae,y:ne,textAnchor:"middle",verticalAnchor:"middle"}},nU=function(t){var i=t.viewBox,a=t.parentViewBox,f=t.offset,y=t.position,m=i,c=m.x,M=m.y,C=m.width,D=m.height,O=D>=0?1:-1,B=O*f,F=O>0?"end":"start",X=O>0?"start":"end",Z=C>=0?1:-1,U=Z*f,te=Z>0?"end":"start",ae=Z>0?"start":"end";if(y==="top"){var ne={x:c+C/2,y:M-O*f,textAnchor:"middle",verticalAnchor:F};return oa(oa({},ne),a?{height:Math.max(M-a.y,0),width:C}:{})}if(y==="bottom"){var ue={x:c+C/2,y:M+D+B,textAnchor:"middle",verticalAnchor:X};return oa(oa({},ue),a?{height:Math.max(a.y+a.height-(M+D),0),width:C}:{})}if(y==="left"){var J={x:c-U,y:M+D/2,textAnchor:te,verticalAnchor:"middle"};return oa(oa({},J),a?{width:Math.max(J.x-a.x,0),height:D}:{})}if(y==="right"){var oe={x:c+C+U,y:M+D/2,textAnchor:ae,verticalAnchor:"middle"};return oa(oa({},oe),a?{width:Math.max(a.x+a.width-oe.x,0),height:D}:{})}var me=a?{width:C,height:D}:{};return y==="insideLeft"?oa({x:c+U,y:M+D/2,textAnchor:ae,verticalAnchor:"middle"},me):y==="insideRight"?oa({x:c+C-U,y:M+D/2,textAnchor:te,verticalAnchor:"middle"},me):y==="insideTop"?oa({x:c+C/2,y:M+B,textAnchor:"middle",verticalAnchor:X},me):y==="insideBottom"?oa({x:c+C/2,y:M+D-B,textAnchor:"middle",verticalAnchor:F},me):y==="insideTopLeft"?oa({x:c+U,y:M+B,textAnchor:ae,verticalAnchor:X},me):y==="insideTopRight"?oa({x:c+C-U,y:M+B,textAnchor:te,verticalAnchor:X},me):y==="insideBottomLeft"?oa({x:c+U,y:M+D-B,textAnchor:ae,verticalAnchor:F},me):y==="insideBottomRight"?oa({x:c+C-U,y:M+D-B,textAnchor:te,verticalAnchor:F},me):bm(y)&&(Dt(y.x)||pf(y.x))&&(Dt(y.y)||pf(y.y))?oa({x:c+Tf(y.x,C),y:M+Tf(y.y,D),textAnchor:"end",verticalAnchor:"end"},me):oa({x:c+C/2,y:M+D/2,textAnchor:"middle",verticalAnchor:"middle"},me)},iU=function(t){return"cx"in t&&Dt(t.cx)};function ao(e){var t=e.offset,i=t===void 0?5:t,a=Xq(e,qq),f=oa({offset:i},a),y=f.viewBox,m=f.position,c=f.value,M=f.children,C=f.content,D=f.className,O=D===void 0?"":D,B=f.textBreakAll;if(!y||Wr(c)&&Wr(M)&&!pt.isValidElement(C)&&!Lr(C))return null;if(pt.isValidElement(C))return pt.cloneElement(C,f);var F;if(Lr(C)){if(F=pt.createElement(C,f),pt.isValidElement(F))return F}else F=Jq(f);var X=iU(y),Z=en(f,!0);if(X&&(m==="insideStart"||m==="insideEnd"||m==="end"))return tU(f,F,Z);var U=X?rU(f):nU(f);return $e.createElement(n_,cy({className:sn("recharts-label",O)},Z,U,{breakAll:B}),F)}ao.displayName="Label";var vz=function(t){var i=t.cx,a=t.cy,f=t.angle,y=t.startAngle,m=t.endAngle,c=t.r,M=t.radius,C=t.innerRadius,D=t.outerRadius,O=t.x,B=t.y,F=t.top,X=t.left,Z=t.width,U=t.height,te=t.clockWise,ae=t.labelViewBox;if(ae)return ae;if(Dt(Z)&&Dt(U)){if(Dt(O)&&Dt(B))return{x:O,y:B,width:Z,height:U};if(Dt(F)&&Dt(X))return{x:F,y:X,width:Z,height:U}}return Dt(O)&&Dt(B)?{x:O,y:B,width:0,height:0}:Dt(i)&&Dt(a)?{cx:i,cy:a,startAngle:y||f||0,endAngle:m||f||0,innerRadius:C||0,outerRadius:D||M||c||0,clockWise:te}:t.viewBox?t.viewBox:{}},aU=function(t,i){return t?t===!0?$e.createElement(ao,{key:"label-implicit",viewBox:i}):sa(t)?$e.createElement(ao,{key:"label-implicit",viewBox:i,value:t}):pt.isValidElement(t)?t.type===ao?pt.cloneElement(t,{key:"label-implicit",viewBox:i}):$e.createElement(ao,{key:"label-implicit",content:t,viewBox:i}):Lr(t)?$e.createElement(ao,{key:"label-implicit",content:t,viewBox:i}):bm(t)?$e.createElement(ao,cy({viewBox:i},t,{key:"label-implicit"})):null:null},oU=function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var f=t.children,y=vz(t),m=ol(f,ao).map(function(M,C){return pt.cloneElement(M,{viewBox:i||y,key:"label-".concat(C)})});if(!a)return m;var c=aU(t.label,i||y);return[c].concat(Uq(m))};ao.parseViewBox=vz;ao.renderCallByParent=oU;var vw,KC;function sU(){if(KC)return vw;KC=1;function e(t){var i=t==null?0:t.length;return i?t[i-1]:void 0}return vw=e,vw}var lU=sU();const cU=kn(lU);function uy(e){"@babel/helpers - typeof";return uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uy(e)}var uU=["valueAccessor"],hU=["data","dataKey","clockWise","id","textBreakAll"];function dU(e){return gU(e)||mU(e)||pU(e)||fU()}function fU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pU(e,t){if(e){if(typeof e=="string")return B2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return B2(e,t)}}function mU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gU(e){if(Array.isArray(e))return B2(e)}function B2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function __(){return __=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},__.apply(this,arguments)}function QC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function JC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?QC(Object(i),!0).forEach(function(a){yU(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):QC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function yU(e,t,i){return t=vU(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function vU(e){var t=_U(e,"string");return uy(t)=="symbol"?t:t+""}function _U(e,t){if(uy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(uy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ej(e,t){if(e==null)return{};var i=bU(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function bU(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var xU=function(t){return Array.isArray(t.value)?cU(t.value):t.value};function ld(e){var t=e.valueAccessor,i=t===void 0?xU:t,a=ej(e,uU),f=a.data,y=a.dataKey,m=a.clockWise,c=a.id,M=a.textBreakAll,C=ej(a,hU);return!f||!f.length?null:$e.createElement(ji,{className:"recharts-label-list"},f.map(function(D,O){var B=Wr(y)?i(D,O):Ss(D&&D.payload,y),F=Wr(c)?{}:{id:"".concat(c,"-").concat(O)};return $e.createElement(ao,__({},en(D,!0),C,F,{parentViewBox:D.parentViewBox,value:B,textBreakAll:M,viewBox:ao.parseViewBox(Wr(m)?D:JC(JC({},D),{},{clockWise:m})),key:"label-".concat(O),index:O}))}))}ld.displayName="LabelList";function wU(e,t){return e?e===!0?$e.createElement(ld,{key:"labelList-implicit",data:t}):$e.isValidElement(e)||Lr(e)?$e.createElement(ld,{key:"labelList-implicit",data:t,content:e}):bm(e)?$e.createElement(ld,__({data:t},e,{key:"labelList-implicit"})):null:null}function SU(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&i&&!e.label)return null;var a=e.children,f=ol(a,ld).map(function(m,c){return pt.cloneElement(m,{data:t,key:"labelList-".concat(c)})});if(!i)return f;var y=wU(e.label,t);return[y].concat(dU(f))}ld.renderCallByParent=SU;function hy(e){"@babel/helpers - typeof";return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hy(e)}function F2(){return F2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},F2.apply(this,arguments)}function tj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function rj(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?tj(Object(i),!0).forEach(function(a){TU(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function TU(e,t,i){return t=AU(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function AU(e){var t=MU(e,"string");return hy(t)=="symbol"?t:t+""}function MU(e,t){if(hy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(hy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PU=function(t,i){var a=oc(i-t),f=Math.min(Math.abs(i-t),359.999);return a*f},Rv=function(t){var i=t.cx,a=t.cy,f=t.radius,y=t.angle,m=t.sign,c=t.isExternal,M=t.cornerRadius,C=t.cornerIsExternal,D=M*(c?1:-1)+f,O=Math.asin(M/D)/v_,B=C?y:y+m*O,F=La(i,a,D,B),X=La(i,a,f,B),Z=C?y-m*O:y,U=La(i,a,D*Math.cos(O*v_),Z);return{center:F,circleTangency:X,lineTangency:U,theta:O}},_z=function(t){var i=t.cx,a=t.cy,f=t.innerRadius,y=t.outerRadius,m=t.startAngle,c=t.endAngle,M=PU(m,c),C=m+M,D=La(i,a,y,m),O=La(i,a,y,C),B="M ".concat(D.x,",").concat(D.y,`
    A `).concat(y,",").concat(y,`,0,
    `).concat(+(Math.abs(M)>180),",").concat(+(m>C),`,
    `).concat(O.x,",").concat(O.y,`
  `);if(f>0){var F=La(i,a,f,m),X=La(i,a,f,C);B+="L ".concat(X.x,",").concat(X.y,`
            A `).concat(f,",").concat(f,`,0,
            `).concat(+(Math.abs(M)>180),",").concat(+(m<=C),`,
            `).concat(F.x,",").concat(F.y," Z")}else B+="L ".concat(i,",").concat(a," Z");return B},EU=function(t){var i=t.cx,a=t.cy,f=t.innerRadius,y=t.outerRadius,m=t.cornerRadius,c=t.forceCornerRadius,M=t.cornerIsExternal,C=t.startAngle,D=t.endAngle,O=oc(D-C),B=Rv({cx:i,cy:a,radius:y,angle:C,sign:O,cornerRadius:m,cornerIsExternal:M}),F=B.circleTangency,X=B.lineTangency,Z=B.theta,U=Rv({cx:i,cy:a,radius:y,angle:D,sign:-O,cornerRadius:m,cornerIsExternal:M}),te=U.circleTangency,ae=U.lineTangency,ne=U.theta,ue=M?Math.abs(C-D):Math.abs(C-D)-Z-ne;if(ue<0)return c?"M ".concat(X.x,",").concat(X.y,`
        a`).concat(m,",").concat(m,",0,0,1,").concat(m*2,`,0
        a`).concat(m,",").concat(m,",0,0,1,").concat(-m*2,`,0
      `):_z({cx:i,cy:a,innerRadius:f,outerRadius:y,startAngle:C,endAngle:D});var J="M ".concat(X.x,",").concat(X.y,`
    A`).concat(m,",").concat(m,",0,0,").concat(+(O<0),",").concat(F.x,",").concat(F.y,`
    A`).concat(y,",").concat(y,",0,").concat(+(ue>180),",").concat(+(O<0),",").concat(te.x,",").concat(te.y,`
    A`).concat(m,",").concat(m,",0,0,").concat(+(O<0),",").concat(ae.x,",").concat(ae.y,`
  `);if(f>0){var oe=Rv({cx:i,cy:a,radius:f,angle:C,sign:O,isExternal:!0,cornerRadius:m,cornerIsExternal:M}),me=oe.circleTangency,_e=oe.lineTangency,ke=oe.theta,at=Rv({cx:i,cy:a,radius:f,angle:D,sign:-O,isExternal:!0,cornerRadius:m,cornerIsExternal:M}),ze=at.circleTangency,Fe=at.lineTangency,tt=at.theta,ut=M?Math.abs(C-D):Math.abs(C-D)-ke-tt;if(ut<0&&m===0)return"".concat(J,"L").concat(i,",").concat(a,"Z");J+="L".concat(Fe.x,",").concat(Fe.y,`
      A`).concat(m,",").concat(m,",0,0,").concat(+(O<0),",").concat(ze.x,",").concat(ze.y,`
      A`).concat(f,",").concat(f,",0,").concat(+(ut>180),",").concat(+(O>0),",").concat(me.x,",").concat(me.y,`
      A`).concat(m,",").concat(m,",0,0,").concat(+(O<0),",").concat(_e.x,",").concat(_e.y,"Z")}else J+="L".concat(i,",").concat(a,"Z");return J},CU={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},bz=function(t){var i=rj(rj({},CU),t),a=i.cx,f=i.cy,y=i.innerRadius,m=i.outerRadius,c=i.cornerRadius,M=i.forceCornerRadius,C=i.cornerIsExternal,D=i.startAngle,O=i.endAngle,B=i.className;if(m<y||D===O)return null;var F=sn("recharts-sector",B),X=m-y,Z=Tf(c,X,0,!0),U;return Z>0&&Math.abs(D-O)<360?U=EU({cx:a,cy:f,innerRadius:y,outerRadius:m,cornerRadius:Math.min(Z,X/2),forceCornerRadius:M,cornerIsExternal:C,startAngle:D,endAngle:O}):U=_z({cx:a,cy:f,innerRadius:y,outerRadius:m,startAngle:D,endAngle:O}),$e.createElement("path",F2({},en(i,!0),{className:F,d:U,role:"img"}))};function dy(e){"@babel/helpers - typeof";return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dy(e)}function $2(){return $2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},$2.apply(this,arguments)}function nj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function ij(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?nj(Object(i),!0).forEach(function(a){jU(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):nj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function jU(e,t,i){return t=OU(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function OU(e){var t=IU(e,"string");return dy(t)=="symbol"?t:t+""}function IU(e,t){if(dy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(dy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aj={curveBasisClosed:K5,curveBasisOpen:Q5,curveBasis:Y5,curveBumpX:R5,curveBumpY:N5,curveLinearClosed:J5,curveLinear:W_,curveMonotoneX:e4,curveMonotoneY:t4,curveNatural:r4,curveStep:n4,curveStepAfter:a4,curveStepBefore:i4},Nv=function(t){return t.x===+t.x&&t.y===+t.y},Cg=function(t){return t.x},jg=function(t){return t.y},kU=function(t,i){if(Lr(t))return t;var a="curve".concat(H_(t));return(a==="curveMonotone"||a==="curveBump")&&i?aj["".concat(a).concat(i==="vertical"?"Y":"X")]:aj[a]||W_},zU=function(t){var i=t.type,a=i===void 0?"linear":i,f=t.points,y=f===void 0?[]:f,m=t.baseLine,c=t.layout,M=t.connectNulls,C=M===void 0?!1:M,D=kU(a,c),O=C?y.filter(function(Z){return Nv(Z)}):y,B;if(Array.isArray(m)){var F=C?m.filter(function(Z){return Nv(Z)}):m,X=O.map(function(Z,U){return ij(ij({},Z),{},{base:F[U]})});return c==="vertical"?B=Ev().y(jg).x1(Cg).x0(function(Z){return Z.base.x}):B=Ev().x(Cg).y1(jg).y0(function(Z){return Z.base.y}),B.defined(Nv).curve(D),B(X)}return c==="vertical"&&Dt(m)?B=Ev().y(jg).x1(Cg).x0(m):Dt(m)?B=Ev().x(Cg).y1(jg).y0(m):B=TI().x(Cg).y(jg),B.defined(Nv).curve(D),B(O)},q2=function(t){var i=t.className,a=t.points,f=t.path,y=t.pathRef;if((!a||!a.length)&&!f)return null;var m=a&&a.length?zU(t):f;return $e.createElement("path",$2({},en(t,!1),Gv(t),{className:sn("recharts-curve",i),d:m,ref:y}))},_w={exports:{}},bw,oj;function DU(){if(oj)return bw;oj=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return bw=e,bw}var xw,sj;function RU(){if(sj)return xw;sj=1;var e=DU();function t(){}function i(){}return i.resetWarningCache=t,xw=function(){function a(m,c,M,C,D,O){if(O!==e){var B=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw B.name="Invariant Violation",B}}a.isRequired=a;function f(){return a}var y={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:f,element:a,elementType:a,instanceOf:f,node:a,objectOf:f,oneOf:f,oneOfType:f,shape:f,exact:f,checkPropTypes:i,resetWarningCache:t};return y.PropTypes=y,y},xw}var lj;function NU(){return lj||(lj=1,_w.exports=RU()()),_w.exports}var LU=NU();const wn=kn(LU);var BU=Object.getOwnPropertyNames,FU=Object.getOwnPropertySymbols,$U=Object.prototype.hasOwnProperty;function cj(e,t){return function(a,f,y){return e(a,f,y)&&t(a,f,y)}}function Lv(e){return function(i,a,f){if(!i||!a||typeof i!="object"||typeof a!="object")return e(i,a,f);var y=f.cache,m=y.get(i),c=y.get(a);if(m&&c)return m===a&&c===i;y.set(i,a),y.set(a,i);var M=e(i,a,f);return y.delete(i),y.delete(a),M}}function uj(e){return BU(e).concat(FU(e))}var qU=Object.hasOwn||function(e,t){return $U.call(e,t)};function Of(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var UU="__v",VU="__o",GU="_owner",hj=Object.getOwnPropertyDescriptor,dj=Object.keys;function ZU(e,t,i){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!i.equals(e[a],t[a],a,a,e,t,i))return!1;return!0}function HU(e,t){return Of(e.getTime(),t.getTime())}function XU(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function WU(e,t){return e===t}function fj(e,t,i){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var f=new Array(a),y=e.entries(),m,c,M=0;(m=y.next())&&!m.done;){for(var C=t.entries(),D=!1,O=0;(c=C.next())&&!c.done;){if(f[O]){O++;continue}var B=m.value,F=c.value;if(i.equals(B[0],F[0],M,O,e,t,i)&&i.equals(B[1],F[1],B[0],F[0],e,t,i)){D=f[O]=!0;break}O++}if(!D)return!1;M++}return!0}var YU=Of;function KU(e,t,i){var a=dj(e),f=a.length;if(dj(t).length!==f)return!1;for(;f-- >0;)if(!xz(e,t,i,a[f]))return!1;return!0}function Og(e,t,i){var a=uj(e),f=a.length;if(uj(t).length!==f)return!1;for(var y,m,c;f-- >0;)if(y=a[f],!xz(e,t,i,y)||(m=hj(e,y),c=hj(t,y),(m||c)&&(!m||!c||m.configurable!==c.configurable||m.enumerable!==c.enumerable||m.writable!==c.writable)))return!1;return!0}function QU(e,t){return Of(e.valueOf(),t.valueOf())}function JU(e,t){return e.source===t.source&&e.flags===t.flags}function pj(e,t,i){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var f=new Array(a),y=e.values(),m,c;(m=y.next())&&!m.done;){for(var M=t.values(),C=!1,D=0;(c=M.next())&&!c.done;){if(!f[D]&&i.equals(m.value,c.value,m.value,c.value,e,t,i)){C=f[D]=!0;break}D++}if(!C)return!1}return!0}function eV(e,t){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(e[i]!==t[i])return!1;return!0}function tV(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function xz(e,t,i,a){return(a===GU||a===VU||a===UU)&&(e.$$typeof||t.$$typeof)?!0:qU(t,a)&&i.equals(e[a],t[a],a,a,e,t,i)}var rV="[object Arguments]",nV="[object Boolean]",iV="[object Date]",aV="[object Error]",oV="[object Map]",sV="[object Number]",lV="[object Object]",cV="[object RegExp]",uV="[object Set]",hV="[object String]",dV="[object URL]",fV=Array.isArray,mj=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,gj=Object.assign,pV=Object.prototype.toString.call.bind(Object.prototype.toString);function mV(e){var t=e.areArraysEqual,i=e.areDatesEqual,a=e.areErrorsEqual,f=e.areFunctionsEqual,y=e.areMapsEqual,m=e.areNumbersEqual,c=e.areObjectsEqual,M=e.arePrimitiveWrappersEqual,C=e.areRegExpsEqual,D=e.areSetsEqual,O=e.areTypedArraysEqual,B=e.areUrlsEqual;return function(X,Z,U){if(X===Z)return!0;if(X==null||Z==null)return!1;var te=typeof X;if(te!==typeof Z)return!1;if(te!=="object")return te==="number"?m(X,Z,U):te==="function"?f(X,Z,U):!1;var ae=X.constructor;if(ae!==Z.constructor)return!1;if(ae===Object)return c(X,Z,U);if(fV(X))return t(X,Z,U);if(mj!=null&&mj(X))return O(X,Z,U);if(ae===Date)return i(X,Z,U);if(ae===RegExp)return C(X,Z,U);if(ae===Map)return y(X,Z,U);if(ae===Set)return D(X,Z,U);var ne=pV(X);return ne===iV?i(X,Z,U):ne===cV?C(X,Z,U):ne===oV?y(X,Z,U):ne===uV?D(X,Z,U):ne===lV?typeof X.then!="function"&&typeof Z.then!="function"&&c(X,Z,U):ne===dV?B(X,Z,U):ne===aV?a(X,Z,U):ne===rV?c(X,Z,U):ne===nV||ne===sV||ne===hV?M(X,Z,U):!1}}function gV(e){var t=e.circular,i=e.createCustomConfig,a=e.strict,f={areArraysEqual:a?Og:ZU,areDatesEqual:HU,areErrorsEqual:XU,areFunctionsEqual:WU,areMapsEqual:a?cj(fj,Og):fj,areNumbersEqual:YU,areObjectsEqual:a?Og:KU,arePrimitiveWrappersEqual:QU,areRegExpsEqual:JU,areSetsEqual:a?cj(pj,Og):pj,areTypedArraysEqual:a?Og:eV,areUrlsEqual:tV};if(i&&(f=gj({},f,i(f))),t){var y=Lv(f.areArraysEqual),m=Lv(f.areMapsEqual),c=Lv(f.areObjectsEqual),M=Lv(f.areSetsEqual);f=gj({},f,{areArraysEqual:y,areMapsEqual:m,areObjectsEqual:c,areSetsEqual:M})}return f}function yV(e){return function(t,i,a,f,y,m,c){return e(t,i,c)}}function vV(e){var t=e.circular,i=e.comparator,a=e.createState,f=e.equals,y=e.strict;if(a)return function(M,C){var D=a(),O=D.cache,B=O===void 0?t?new WeakMap:void 0:O,F=D.meta;return i(M,C,{cache:B,equals:f,meta:F,strict:y})};if(t)return function(M,C){return i(M,C,{cache:new WeakMap,equals:f,meta:void 0,strict:y})};var m={cache:void 0,equals:f,meta:void 0,strict:y};return function(M,C){return i(M,C,m)}}var _V=fd();fd({strict:!0});fd({circular:!0});fd({circular:!0,strict:!0});fd({createInternalComparator:function(){return Of}});fd({strict:!0,createInternalComparator:function(){return Of}});fd({circular:!0,createInternalComparator:function(){return Of}});fd({circular:!0,createInternalComparator:function(){return Of},strict:!0});function fd(e){e===void 0&&(e={});var t=e.circular,i=t===void 0?!1:t,a=e.createInternalComparator,f=e.createState,y=e.strict,m=y===void 0?!1:y,c=gV(e),M=mV(c),C=a?a(M):yV(M);return vV({circular:i,comparator:M,createState:f,equals:C,strict:m})}function bV(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function yj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=-1,a=function f(y){i<0&&(i=y),y-i>t?(e(y),i=-1):bV(f)};requestAnimationFrame(a)}function U2(e){"@babel/helpers - typeof";return U2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U2(e)}function xV(e){return AV(e)||TV(e)||SV(e)||wV()}function wV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SV(e,t){if(e){if(typeof e=="string")return vj(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return vj(e,t)}}function vj(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function TV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function AV(e){if(Array.isArray(e))return e}function MV(){var e={},t=function(){return null},i=!1,a=function f(y){if(!i){if(Array.isArray(y)){if(!y.length)return;var m=y,c=xV(m),M=c[0],C=c.slice(1);if(typeof M=="number"){yj(f.bind(null,C),M);return}f(M),yj(f.bind(null,C));return}U2(y)==="object"&&(e=y,t(e)),typeof y=="function"&&y()}};return{stop:function(){i=!0},start:function(y){i=!1,a(y)},subscribe:function(y){return t=y,function(){t=function(){return null}}}}}function fy(e){"@babel/helpers - typeof";return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fy(e)}function _j(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function bj(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?_j(Object(i),!0).forEach(function(a){wz(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_j(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function wz(e,t,i){return t=PV(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function PV(e){var t=EV(e,"string");return fy(t)==="symbol"?t:String(t)}function EV(e,t){if(fy(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(fy(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CV=function(t,i){return[Object.keys(t),Object.keys(i)].reduce(function(a,f){return a.filter(function(y){return f.includes(y)})})},jV=function(t){return t},OV=function(t){return t.replace(/([A-Z])/g,function(i){return"-".concat(i.toLowerCase())})},qg=function(t,i){return Object.keys(i).reduce(function(a,f){return bj(bj({},a),{},wz({},f,t(f,i[f])))},{})},xj=function(t,i,a){return t.map(function(f){return"".concat(OV(f)," ").concat(i,"ms ").concat(a)}).join(",")};function IV(e,t){return DV(e)||zV(e,t)||Sz(e,t)||kV()}function kV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zV(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,y,m,c=[],M=!0,C=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(c.push(a.value),c.length!==t);M=!0);}catch(D){C=!0,f=D}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return c}}function DV(e){if(Array.isArray(e))return e}function RV(e){return BV(e)||LV(e)||Sz(e)||NV()}function NV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sz(e,t){if(e){if(typeof e=="string")return V2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return V2(e,t)}}function LV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BV(e){if(Array.isArray(e))return V2(e)}function V2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var b_=1e-4,Tz=function(t,i){return[0,3*t,3*i-6*t,3*t-3*i+1]},Az=function(t,i){return t.map(function(a,f){return a*Math.pow(i,f)}).reduce(function(a,f){return a+f})},wj=function(t,i){return function(a){var f=Tz(t,i);return Az(f,a)}},FV=function(t,i){return function(a){var f=Tz(t,i),y=[].concat(RV(f.map(function(m,c){return m*c}).slice(1)),[0]);return Az(y,a)}},Sj=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var f=i[0],y=i[1],m=i[2],c=i[3];if(i.length===1)switch(i[0]){case"linear":f=0,y=0,m=1,c=1;break;case"ease":f=.25,y=.1,m=.25,c=1;break;case"ease-in":f=.42,y=0,m=1,c=1;break;case"ease-out":f=.42,y=0,m=.58,c=1;break;case"ease-in-out":f=0,y=0,m=.58,c=1;break;default:{var M=i[0].split("(");if(M[0]==="cubic-bezier"&&M[1].split(")")[0].split(",").length===4){var C=M[1].split(")")[0].split(",").map(function(U){return parseFloat(U)}),D=IV(C,4);f=D[0],y=D[1],m=D[2],c=D[3]}}}var O=wj(f,m),B=wj(y,c),F=FV(f,m),X=function(te){return te>1?1:te<0?0:te},Z=function(te){for(var ae=te>1?1:te,ne=ae,ue=0;ue<8;++ue){var J=O(ne)-ae,oe=F(ne);if(Math.abs(J-ae)<b_||oe<b_)return B(ne);ne=X(ne-J/oe)}return B(ne)};return Z.isStepper=!1,Z},$V=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.stiff,a=i===void 0?100:i,f=t.damping,y=f===void 0?8:f,m=t.dt,c=m===void 0?17:m,M=function(D,O,B){var F=-(D-O)*a,X=B*y,Z=B+(F-X)*c/1e3,U=B*c/1e3+D;return Math.abs(U-O)<b_&&Math.abs(Z)<b_?[O,0]:[U,Z]};return M.isStepper=!0,M.dt=c,M},qV=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var f=i[0];if(typeof f=="string")switch(f){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Sj(f);case"spring":return $V();default:if(f.split("(")[0]==="cubic-bezier")return Sj(f)}return typeof f=="function"?f:null};function py(e){"@babel/helpers - typeof";return py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},py(e)}function Tj(e){return GV(e)||VV(e)||Mz(e)||UV()}function UV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function GV(e){if(Array.isArray(e))return Z2(e)}function Aj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Ra(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Aj(Object(i),!0).forEach(function(a){G2(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Aj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function G2(e,t,i){return t=ZV(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ZV(e){var t=HV(e,"string");return py(t)==="symbol"?t:String(t)}function HV(e,t){if(py(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(py(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XV(e,t){return KV(e)||YV(e,t)||Mz(e,t)||WV()}function WV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mz(e,t){if(e){if(typeof e=="string")return Z2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Z2(e,t)}}function Z2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function YV(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,y,m,c=[],M=!0,C=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(c.push(a.value),c.length!==t);M=!0);}catch(D){C=!0,f=D}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return c}}function KV(e){if(Array.isArray(e))return e}var x_=function(t,i,a){return t+(i-t)*a},H2=function(t){var i=t.from,a=t.to;return i!==a},QV=function e(t,i,a){var f=qg(function(y,m){if(H2(m)){var c=t(m.from,m.to,m.velocity),M=XV(c,2),C=M[0],D=M[1];return Ra(Ra({},m),{},{from:C,velocity:D})}return m},i);return a<1?qg(function(y,m){return H2(m)?Ra(Ra({},m),{},{velocity:x_(m.velocity,f[y].velocity,a),from:x_(m.from,f[y].from,a)}):m},i):e(t,f,a-1)};const JV=function(e,t,i,a,f){var y=CV(e,t),m=y.reduce(function(U,te){return Ra(Ra({},U),{},G2({},te,[e[te],t[te]]))},{}),c=y.reduce(function(U,te){return Ra(Ra({},U),{},G2({},te,{from:e[te],velocity:0,to:t[te]}))},{}),M=-1,C,D,O=function(){return null},B=function(){return qg(function(te,ae){return ae.from},c)},F=function(){return!Object.values(c).filter(H2).length},X=function(te){C||(C=te);var ae=te-C,ne=ae/i.dt;c=QV(i,c,ne),f(Ra(Ra(Ra({},e),t),B())),C=te,F()||(M=requestAnimationFrame(O))},Z=function(te){D||(D=te);var ae=(te-D)/a,ne=qg(function(J,oe){return x_.apply(void 0,Tj(oe).concat([i(ae)]))},m);if(f(Ra(Ra(Ra({},e),t),ne)),ae<1)M=requestAnimationFrame(O);else{var ue=qg(function(J,oe){return x_.apply(void 0,Tj(oe).concat([i(1)]))},m);f(Ra(Ra(Ra({},e),t),ue))}};return O=i.isStepper?X:Z,function(){return requestAnimationFrame(O),function(){cancelAnimationFrame(M)}}};function nm(e){"@babel/helpers - typeof";return nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nm(e)}var e7=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function t7(e,t){if(e==null)return{};var i=r7(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function r7(e,t){if(e==null)return{};var i={},a=Object.keys(e),f,y;for(y=0;y<a.length;y++)f=a[y],!(t.indexOf(f)>=0)&&(i[f]=e[f]);return i}function ww(e){return o7(e)||a7(e)||i7(e)||n7()}function n7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i7(e,t){if(e){if(typeof e=="string")return X2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return X2(e,t)}}function a7(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function o7(e){if(Array.isArray(e))return X2(e)}function X2(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Mj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function tc(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Mj(Object(i),!0).forEach(function(a){Lg(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Mj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Lg(e,t,i){return t=Pz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l7(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Pz(a.key),a)}}function c7(e,t,i){return t&&l7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pz(e){var t=u7(e,"string");return nm(t)==="symbol"?t:String(t)}function u7(e,t){if(nm(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(nm(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function h7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W2(e,t)}function W2(e,t){return W2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},W2(e,t)}function d7(e){var t=f7();return function(){var a=w_(e),f;if(t){var y=w_(this).constructor;f=Reflect.construct(a,arguments,y)}else f=a.apply(this,arguments);return Y2(this,f)}}function Y2(e,t){if(t&&(nm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K2(e)}function K2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w_(e){return w_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},w_(e)}var Xu=function(e){h7(i,e);var t=d7(i);function i(a,f){var y;s7(this,i),y=t.call(this,a,f);var m=y.props,c=m.isActive,M=m.attributeName,C=m.from,D=m.to,O=m.steps,B=m.children,F=m.duration;if(y.handleStyleChange=y.handleStyleChange.bind(K2(y)),y.changeStyle=y.changeStyle.bind(K2(y)),!c||F<=0)return y.state={style:{}},typeof B=="function"&&(y.state={style:D}),Y2(y);if(O&&O.length)y.state={style:O[0].style};else if(C){if(typeof B=="function")return y.state={style:C},Y2(y);y.state={style:M?Lg({},M,C):C}}else y.state={style:{}};return y}return c7(i,[{key:"componentDidMount",value:function(){var f=this.props,y=f.isActive,m=f.canBegin;this.mounted=!0,!(!y||!m)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(f){var y=this.props,m=y.isActive,c=y.canBegin,M=y.attributeName,C=y.shouldReAnimate,D=y.to,O=y.from,B=this.state.style;if(c){if(!m){var F={style:M?Lg({},M,D):D};this.state&&B&&(M&&B[M]!==D||!M&&B!==D)&&this.setState(F);return}if(!(_V(f.to,D)&&f.canBegin&&f.isActive)){var X=!f.canBegin||!f.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var Z=X||C?O:f.to;if(this.state&&B){var U={style:M?Lg({},M,Z):Z};(M&&B[M]!==Z||!M&&B!==Z)&&this.setState(U)}this.runAnimation(tc(tc({},this.props),{},{from:Z,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var f=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),f&&f()}},{key:"handleStyleChange",value:function(f){this.changeStyle(f)}},{key:"changeStyle",value:function(f){this.mounted&&this.setState({style:f})}},{key:"runJSAnimation",value:function(f){var y=this,m=f.from,c=f.to,M=f.duration,C=f.easing,D=f.begin,O=f.onAnimationEnd,B=f.onAnimationStart,F=JV(m,c,qV(C),M,this.changeStyle),X=function(){y.stopJSAnimation=F()};this.manager.start([B,D,X,M,O])}},{key:"runStepAnimation",value:function(f){var y=this,m=f.steps,c=f.begin,M=f.onAnimationStart,C=m[0],D=C.style,O=C.duration,B=O===void 0?0:O,F=function(Z,U,te){if(te===0)return Z;var ae=U.duration,ne=U.easing,ue=ne===void 0?"ease":ne,J=U.style,oe=U.properties,me=U.onAnimationEnd,_e=te>0?m[te-1]:U,ke=oe||Object.keys(J);if(typeof ue=="function"||ue==="spring")return[].concat(ww(Z),[y.runJSAnimation.bind(y,{from:_e.style,to:J,duration:ae,easing:ue}),ae]);var at=xj(ke,ae,ue),ze=tc(tc(tc({},_e.style),J),{},{transition:at});return[].concat(ww(Z),[ze,ae,me]).filter(jV)};return this.manager.start([M].concat(ww(m.reduce(F,[D,Math.max(B,c)])),[f.onAnimationEnd]))}},{key:"runAnimation",value:function(f){this.manager||(this.manager=MV());var y=f.begin,m=f.duration,c=f.attributeName,M=f.to,C=f.easing,D=f.onAnimationStart,O=f.onAnimationEnd,B=f.steps,F=f.children,X=this.manager;if(this.unSubscribe=X.subscribe(this.handleStyleChange),typeof C=="function"||typeof F=="function"||C==="spring"){this.runJSAnimation(f);return}if(B.length>1){this.runStepAnimation(f);return}var Z=c?Lg({},c,M):M,U=xj(Object.keys(Z),m,C);X.start([D,y,tc(tc({},Z),{},{transition:U}),m,O])}},{key:"render",value:function(){var f=this.props,y=f.children;f.begin;var m=f.duration;f.attributeName,f.easing;var c=f.isActive;f.steps,f.from,f.to,f.canBegin,f.onAnimationEnd,f.shouldReAnimate,f.onAnimationReStart;var M=t7(f,e7),C=pt.Children.count(y),D=this.state.style;if(typeof y=="function")return y(D);if(!c||C===0||m<=0)return y;var O=function(F){var X=F.props,Z=X.style,U=Z===void 0?{}:Z,te=X.className,ae=pt.cloneElement(F,tc(tc({},M),{},{style:tc(tc({},U),D),className:te}));return ae};return C===1?O(pt.Children.only(y)):$e.createElement("div",null,pt.Children.map(y,function(B){return O(B)}))}}]),i}(pt.PureComponent);Xu.displayName="Animate";Xu.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Xu.propTypes={from:wn.oneOfType([wn.object,wn.string]),to:wn.oneOfType([wn.object,wn.string]),attributeName:wn.string,duration:wn.number,begin:wn.number,easing:wn.oneOfType([wn.string,wn.func]),steps:wn.arrayOf(wn.shape({duration:wn.number.isRequired,style:wn.object.isRequired,easing:wn.oneOfType([wn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),wn.func]),properties:wn.arrayOf("string"),onAnimationEnd:wn.func})),children:wn.oneOfType([wn.node,wn.func]),isActive:wn.bool,canBegin:wn.bool,onAnimationEnd:wn.func,shouldReAnimate:wn.bool,onAnimationStart:wn.func,onAnimationReStart:wn.func};function my(e){"@babel/helpers - typeof";return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},my(e)}function S_(){return S_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},S_.apply(this,arguments)}function p7(e,t){return v7(e)||y7(e,t)||g7(e,t)||m7()}function m7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g7(e,t){if(e){if(typeof e=="string")return Pj(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Pj(e,t)}}function Pj(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function y7(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,y,m,c=[],M=!0,C=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(c.push(a.value),c.length!==t);M=!0);}catch(D){C=!0,f=D}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return c}}function v7(e){if(Array.isArray(e))return e}function Ej(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Cj(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Ej(Object(i),!0).forEach(function(a){_7(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ej(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function _7(e,t,i){return t=b7(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function b7(e){var t=x7(e,"string");return my(t)=="symbol"?t:t+""}function x7(e,t){if(my(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(my(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jj=function(t,i,a,f,y){var m=Math.min(Math.abs(a)/2,Math.abs(f)/2),c=f>=0?1:-1,M=a>=0?1:-1,C=f>=0&&a>=0||f<0&&a<0?1:0,D;if(m>0&&y instanceof Array){for(var O=[0,0,0,0],B=0,F=4;B<F;B++)O[B]=y[B]>m?m:y[B];D="M".concat(t,",").concat(i+c*O[0]),O[0]>0&&(D+="A ".concat(O[0],",").concat(O[0],",0,0,").concat(C,",").concat(t+M*O[0],",").concat(i)),D+="L ".concat(t+a-M*O[1],",").concat(i),O[1]>0&&(D+="A ".concat(O[1],",").concat(O[1],",0,0,").concat(C,`,
        `).concat(t+a,",").concat(i+c*O[1])),D+="L ".concat(t+a,",").concat(i+f-c*O[2]),O[2]>0&&(D+="A ".concat(O[2],",").concat(O[2],",0,0,").concat(C,`,
        `).concat(t+a-M*O[2],",").concat(i+f)),D+="L ".concat(t+M*O[3],",").concat(i+f),O[3]>0&&(D+="A ".concat(O[3],",").concat(O[3],",0,0,").concat(C,`,
        `).concat(t,",").concat(i+f-c*O[3])),D+="Z"}else if(m>0&&y===+y&&y>0){var X=Math.min(m,y);D="M ".concat(t,",").concat(i+c*X,`
            A `).concat(X,",").concat(X,",0,0,").concat(C,",").concat(t+M*X,",").concat(i,`
            L `).concat(t+a-M*X,",").concat(i,`
            A `).concat(X,",").concat(X,",0,0,").concat(C,",").concat(t+a,",").concat(i+c*X,`
            L `).concat(t+a,",").concat(i+f-c*X,`
            A `).concat(X,",").concat(X,",0,0,").concat(C,",").concat(t+a-M*X,",").concat(i+f,`
            L `).concat(t+M*X,",").concat(i+f,`
            A `).concat(X,",").concat(X,",0,0,").concat(C,",").concat(t,",").concat(i+f-c*X," Z")}else D="M ".concat(t,",").concat(i," h ").concat(a," v ").concat(f," h ").concat(-a," Z");return D},w7=function(t,i){if(!t||!i)return!1;var a=t.x,f=t.y,y=i.x,m=i.y,c=i.width,M=i.height;if(Math.abs(c)>0&&Math.abs(M)>0){var C=Math.min(y,y+c),D=Math.max(y,y+c),O=Math.min(m,m+M),B=Math.max(m,m+M);return a>=C&&a<=D&&f>=O&&f<=B}return!1},S7={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vT=function(t){var i=Cj(Cj({},S7),t),a=pt.useRef(),f=pt.useState(-1),y=p7(f,2),m=y[0],c=y[1];pt.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var ue=a.current.getTotalLength();ue&&c(ue)}catch{}},[]);var M=i.x,C=i.y,D=i.width,O=i.height,B=i.radius,F=i.className,X=i.animationEasing,Z=i.animationDuration,U=i.animationBegin,te=i.isAnimationActive,ae=i.isUpdateAnimationActive;if(M!==+M||C!==+C||D!==+D||O!==+O||D===0||O===0)return null;var ne=sn("recharts-rectangle",F);return ae?$e.createElement(Xu,{canBegin:m>0,from:{width:D,height:O,x:M,y:C},to:{width:D,height:O,x:M,y:C},duration:Z,animationEasing:X,isActive:ae},function(ue){var J=ue.width,oe=ue.height,me=ue.x,_e=ue.y;return $e.createElement(Xu,{canBegin:m>0,from:"0px ".concat(m===-1?1:m,"px"),to:"".concat(m,"px 0px"),attributeName:"strokeDasharray",begin:U,duration:Z,isActive:te,easing:X},$e.createElement("path",S_({},en(i,!0),{className:ne,d:jj(me,_e,J,oe,B),ref:a})))}):$e.createElement("path",S_({},en(i,!0),{className:ne,d:jj(M,C,D,O,B)}))};function Q2(){return Q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Q2.apply(this,arguments)}var _T=function(t){var i=t.cx,a=t.cy,f=t.r,y=t.className,m=sn("recharts-dot",y);return i===+i&&a===+a&&f===+f?$e.createElement("circle",Q2({},en(t,!1),Gv(t),{className:m,cx:i,cy:a,r:f})):null};function gy(e){"@babel/helpers - typeof";return gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gy(e)}var T7=["x","y","top","left","width","height","className"];function J2(){return J2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},J2.apply(this,arguments)}function Oj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function A7(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Oj(Object(i),!0).forEach(function(a){M7(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Oj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function M7(e,t,i){return t=P7(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function P7(e){var t=E7(e,"string");return gy(t)=="symbol"?t:t+""}function E7(e,t){if(gy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(gy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C7(e,t){if(e==null)return{};var i=j7(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function j7(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var O7=function(t,i,a,f,y,m){return"M".concat(t,",").concat(y,"v").concat(f,"M").concat(m,",").concat(i,"h").concat(a)},I7=function(t){var i=t.x,a=i===void 0?0:i,f=t.y,y=f===void 0?0:f,m=t.top,c=m===void 0?0:m,M=t.left,C=M===void 0?0:M,D=t.width,O=D===void 0?0:D,B=t.height,F=B===void 0?0:B,X=t.className,Z=C7(t,T7),U=A7({x:a,y,top:c,left:C,width:O,height:F},Z);return!Dt(a)||!Dt(y)||!Dt(O)||!Dt(F)||!Dt(c)||!Dt(C)?null:$e.createElement("path",J2({},en(U,!0),{className:sn("recharts-cross",X),d:O7(a,y,O,F,c,C)}))},Sw,Ij;function k7(){if(Ij)return Sw;Ij=1;var e=HI(),t=e(Object.getPrototypeOf,Object);return Sw=t,Sw}var Tw,kj;function z7(){if(kj)return Tw;kj=1;var e=Wu(),t=k7(),i=Yu(),a="[object Object]",f=Function.prototype,y=Object.prototype,m=f.toString,c=y.hasOwnProperty,M=m.call(Object);function C(D){if(!i(D)||e(D)!=a)return!1;var O=t(D);if(O===null)return!0;var B=c.call(O,"constructor")&&O.constructor;return typeof B=="function"&&B instanceof B&&m.call(B)==M}return Tw=C,Tw}var D7=z7();const R7=kn(D7);var Aw,zj;function N7(){if(zj)return Aw;zj=1;var e=Wu(),t=Yu(),i="[object Boolean]";function a(f){return f===!0||f===!1||t(f)&&e(f)==i}return Aw=a,Aw}var L7=N7();const B7=kn(L7);function yy(e){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yy(e)}function T_(){return T_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},T_.apply(this,arguments)}function F7(e,t){return V7(e)||U7(e,t)||q7(e,t)||$7()}function $7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q7(e,t){if(e){if(typeof e=="string")return Dj(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Dj(e,t)}}function Dj(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function U7(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,y,m,c=[],M=!0,C=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(c.push(a.value),c.length!==t);M=!0);}catch(D){C=!0,f=D}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return c}}function V7(e){if(Array.isArray(e))return e}function Rj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Nj(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Rj(Object(i),!0).forEach(function(a){G7(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Rj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function G7(e,t,i){return t=Z7(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Z7(e){var t=H7(e,"string");return yy(t)=="symbol"?t:t+""}function H7(e,t){if(yy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(yy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lj=function(t,i,a,f,y){var m=a-f,c;return c="M ".concat(t,",").concat(i),c+="L ".concat(t+a,",").concat(i),c+="L ".concat(t+a-m/2,",").concat(i+y),c+="L ".concat(t+a-m/2-f,",").concat(i+y),c+="L ".concat(t,",").concat(i," Z"),c},X7={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},W7=function(t){var i=Nj(Nj({},X7),t),a=pt.useRef(),f=pt.useState(-1),y=F7(f,2),m=y[0],c=y[1];pt.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var ne=a.current.getTotalLength();ne&&c(ne)}catch{}},[]);var M=i.x,C=i.y,D=i.upperWidth,O=i.lowerWidth,B=i.height,F=i.className,X=i.animationEasing,Z=i.animationDuration,U=i.animationBegin,te=i.isUpdateAnimationActive;if(M!==+M||C!==+C||D!==+D||O!==+O||B!==+B||D===0&&O===0||B===0)return null;var ae=sn("recharts-trapezoid",F);return te?$e.createElement(Xu,{canBegin:m>0,from:{upperWidth:0,lowerWidth:0,height:B,x:M,y:C},to:{upperWidth:D,lowerWidth:O,height:B,x:M,y:C},duration:Z,animationEasing:X,isActive:te},function(ne){var ue=ne.upperWidth,J=ne.lowerWidth,oe=ne.height,me=ne.x,_e=ne.y;return $e.createElement(Xu,{canBegin:m>0,from:"0px ".concat(m===-1?1:m,"px"),to:"".concat(m,"px 0px"),attributeName:"strokeDasharray",begin:U,duration:Z,easing:X},$e.createElement("path",T_({},en(i,!0),{className:ae,d:Lj(me,_e,ue,J,oe),ref:a})))}):$e.createElement("g",null,$e.createElement("path",T_({},en(i,!0),{className:ae,d:Lj(M,C,D,O,B)})))},Y7=["option","shapeType","propTransformer","activeClassName","isActive"];function vy(e){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vy(e)}function K7(e,t){if(e==null)return{};var i=Q7(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Q7(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function Bj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function A_(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Bj(Object(i),!0).forEach(function(a){J7(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Bj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function J7(e,t,i){return t=e9(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function e9(e){var t=t9(e,"string");return vy(t)=="symbol"?t:t+""}function t9(e,t){if(vy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(vy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r9(e,t){return A_(A_({},t),e)}function n9(e,t){return e==="symbols"}function Fj(e){var t=e.shapeType,i=e.elementProps;switch(t){case"rectangle":return $e.createElement(vT,i);case"trapezoid":return $e.createElement(W7,i);case"sector":return $e.createElement(bz,i);case"symbols":if(n9(t))return $e.createElement(NS,i);break;default:return null}}function i9(e){return pt.isValidElement(e)?e.props:e}function a9(e){var t=e.option,i=e.shapeType,a=e.propTransformer,f=a===void 0?r9:a,y=e.activeClassName,m=y===void 0?"recharts-active-shape":y,c=e.isActive,M=K7(e,Y7),C;if(pt.isValidElement(t))C=pt.cloneElement(t,A_(A_({},M),i9(t)));else if(Lr(t))C=t(M);else if(R7(t)&&!B7(t)){var D=f(t,M);C=$e.createElement(Fj,{shapeType:i,elementProps:D})}else{var O=M;C=$e.createElement(Fj,{shapeType:i,elementProps:O})}return c?$e.createElement(ji,{className:m},C):C}function h0(e,t){return t!=null&&"trapezoids"in e.props}function d0(e,t){return t!=null&&"sectors"in e.props}function _y(e,t){return t!=null&&"points"in e.props}function o9(e,t){var i,a,f=e.x===(t==null||(i=t.labelViewBox)===null||i===void 0?void 0:i.x)||e.x===t.x,y=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return f&&y}function s9(e,t){var i=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return i&&a}function l9(e,t){var i=e.x===t.x,a=e.y===t.y,f=e.z===t.z;return i&&a&&f}function c9(e,t){var i;return h0(e,t)?i=o9:d0(e,t)?i=s9:_y(e,t)&&(i=l9),i}function u9(e,t){var i;return h0(e,t)?i="trapezoids":d0(e,t)?i="sectors":_y(e,t)&&(i="points"),i}function h9(e,t){if(h0(e,t)){var i;return(i=t.tooltipPayload)===null||i===void 0||(i=i[0])===null||i===void 0||(i=i.payload)===null||i===void 0?void 0:i.payload}if(d0(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return _y(e,t)?t.payload:{}}function d9(e){var t=e.activeTooltipItem,i=e.graphicalItem,a=e.itemData,f=u9(i,t),y=h9(i,t),m=a.filter(function(M,C){var D=l0(y,M),O=i.props[f].filter(function(X){var Z=c9(i,t);return Z(X,t)}),B=i.props[f].indexOf(O[O.length-1]),F=C===B;return D&&F}),c=a.indexOf(m[m.length-1]);return c}var Mw,$j;function f9(){if($j)return Mw;$j=1;var e=Math.ceil,t=Math.max;function i(a,f,y,m){for(var c=-1,M=t(e((f-a)/(y||1)),0),C=Array(M);M--;)C[m?M:++c]=a,a+=y;return C}return Mw=i,Mw}var Pw,qj;function Ez(){if(qj)return Pw;qj=1;var e=ck(),t=1/0,i=17976931348623157e292;function a(f){if(!f)return f===0?f:0;if(f=e(f),f===t||f===-1/0){var y=f<0?-1:1;return y*i}return f===f?f:0}return Pw=a,Pw}var Ew,Uj;function p9(){if(Uj)return Ew;Uj=1;var e=f9(),t=J_(),i=Ez();function a(f){return function(y,m,c){return c&&typeof c!="number"&&t(y,m,c)&&(m=c=void 0),y=i(y),m===void 0?(m=y,y=0):m=i(m),c=c===void 0?y<m?1:-1:i(c),e(y,m,c,f)}}return Ew=a,Ew}var Cw,Vj;function m9(){if(Vj)return Cw;Vj=1;var e=p9(),t=e();return Cw=t,Cw}var g9=m9();const M_=kn(g9);function by(e){"@babel/helpers - typeof";return by=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},by(e)}function Gj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Zj(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Gj(Object(i),!0).forEach(function(a){Cz(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Gj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Cz(e,t,i){return t=y9(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function y9(e){var t=v9(e,"string");return by(t)=="symbol"?t:t+""}function v9(e,t){if(by(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(by(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _9=["Webkit","Moz","O","ms"],b9=function(t,i){var a=t.replace(/(\w)/,function(y){return y.toUpperCase()}),f=_9.reduce(function(y,m){return Zj(Zj({},y),{},Cz({},m+a,i))},{});return f[t]=i,f};function im(e){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},im(e)}function P_(){return P_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},P_.apply(this,arguments)}function Hj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function jw(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Hj(Object(i),!0).forEach(function(a){bs(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Hj(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function x9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xj(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Oz(a.key),a)}}function w9(e,t,i){return t&&Xj(e.prototype,t),i&&Xj(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function S9(e,t,i){return t=E_(t),T9(e,jz()?Reflect.construct(t,i||[],E_(e).constructor):t.apply(e,i))}function T9(e,t){if(t&&(im(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A9(e)}function A9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jz=function(){return!!e})()}function E_(e){return E_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},E_(e)}function M9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eS(e,t)}function eS(e,t){return eS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},eS(e,t)}function bs(e,t,i){return t=Oz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Oz(e){var t=P9(e,"string");return im(t)=="symbol"?t:t+""}function P9(e,t){if(im(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(im(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var E9=function(t){var i=t.data,a=t.startIndex,f=t.endIndex,y=t.x,m=t.width,c=t.travellerWidth;if(!i||!i.length)return{};var M=i.length,C=Fg().domain(M_(0,M)).range([y,y+m-c]),D=C.domain().map(function(O){return C(O)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:C(a),endX:C(f),scale:C,scaleValues:D}},Wj=function(t){return t.changedTouches&&!!t.changedTouches.length},am=function(e){function t(i){var a;return x9(this,t),a=S9(this,t,[i]),bs(a,"handleDrag",function(f){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(f):a.state.isSlideMoving&&a.handleSlideDrag(f)}),bs(a,"handleTouchMove",function(f){f.changedTouches!=null&&f.changedTouches.length>0&&a.handleDrag(f.changedTouches[0])}),bs(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var f=a.props,y=f.endIndex,m=f.onDragEnd,c=f.startIndex;m==null||m({endIndex:y,startIndex:c})}),a.detachDragEndListener()}),bs(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),bs(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),bs(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),bs(a,"handleSlideDragStart",function(f){var y=Wj(f)?f.changedTouches[0]:f;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:y.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return M9(t,e),w9(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var f=a.startX,y=a.endX,m=this.state.scaleValues,c=this.props,M=c.gap,C=c.data,D=C.length-1,O=Math.min(f,y),B=Math.max(f,y),F=t.getIndexInRange(m,O),X=t.getIndexInRange(m,B);return{startIndex:F-F%M,endIndex:X===D?D:X-X%M}}},{key:"getTextOfTick",value:function(a){var f=this.props,y=f.data,m=f.tickFormatter,c=f.dataKey,M=Ss(y[a],c,a);return Lr(m)?m(M,a):M}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var f=this.state,y=f.slideMoveStartX,m=f.startX,c=f.endX,M=this.props,C=M.x,D=M.width,O=M.travellerWidth,B=M.startIndex,F=M.endIndex,X=M.onChange,Z=a.pageX-y;Z>0?Z=Math.min(Z,C+D-O-c,C+D-O-m):Z<0&&(Z=Math.max(Z,C-m,C-c));var U=this.getIndex({startX:m+Z,endX:c+Z});(U.startIndex!==B||U.endIndex!==F)&&X&&X(U),this.setState({startX:m+Z,endX:c+Z,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,f){var y=Wj(f)?f.changedTouches[0]:f;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:y.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var f=this.state,y=f.brushMoveStartX,m=f.movingTravellerId,c=f.endX,M=f.startX,C=this.state[m],D=this.props,O=D.x,B=D.width,F=D.travellerWidth,X=D.onChange,Z=D.gap,U=D.data,te={startX:this.state.startX,endX:this.state.endX},ae=a.pageX-y;ae>0?ae=Math.min(ae,O+B-F-C):ae<0&&(ae=Math.max(ae,O-C)),te[m]=C+ae;var ne=this.getIndex(te),ue=ne.startIndex,J=ne.endIndex,oe=function(){var _e=U.length-1;return m==="startX"&&(c>M?ue%Z===0:J%Z===0)||c<M&&J===_e||m==="endX"&&(c>M?J%Z===0:ue%Z===0)||c>M&&J===_e};this.setState(bs(bs({},m,C+ae),"brushMoveStartX",a.pageX),function(){X&&oe()&&X(ne)})}},{key:"handleTravellerMoveKeyboard",value:function(a,f){var y=this,m=this.state,c=m.scaleValues,M=m.startX,C=m.endX,D=this.state[f],O=c.indexOf(D);if(O!==-1){var B=O+a;if(!(B===-1||B>=c.length)){var F=c[B];f==="startX"&&F>=C||f==="endX"&&F<=M||this.setState(bs({},f,F),function(){y.props.onChange(y.getIndex({startX:y.state.startX,endX:y.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,f=a.x,y=a.y,m=a.width,c=a.height,M=a.fill,C=a.stroke;return $e.createElement("rect",{stroke:C,fill:M,x:f,y,width:m,height:c})}},{key:"renderPanorama",value:function(){var a=this.props,f=a.x,y=a.y,m=a.width,c=a.height,M=a.data,C=a.children,D=a.padding,O=pt.Children.only(C);return O?$e.cloneElement(O,{x:f,y,width:m,height:c,margin:D,compact:!0,data:M}):null}},{key:"renderTravellerLayer",value:function(a,f){var y,m,c=this,M=this.props,C=M.y,D=M.travellerWidth,O=M.height,B=M.traveller,F=M.ariaLabel,X=M.data,Z=M.startIndex,U=M.endIndex,te=Math.max(a,this.props.x),ae=jw(jw({},en(this.props,!1)),{},{x:te,y:C,width:D,height:O}),ne=F||"Min value: ".concat((y=X[Z])===null||y===void 0?void 0:y.name,", Max value: ").concat((m=X[U])===null||m===void 0?void 0:m.name);return $e.createElement(ji,{tabIndex:0,role:"slider","aria-label":ne,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[f],onTouchStart:this.travellerDragStartHandlers[f],onKeyDown:function(J){["ArrowLeft","ArrowRight"].includes(J.key)&&(J.preventDefault(),J.stopPropagation(),c.handleTravellerMoveKeyboard(J.key==="ArrowRight"?1:-1,f))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(B,ae))}},{key:"renderSlide",value:function(a,f){var y=this.props,m=y.y,c=y.height,M=y.stroke,C=y.travellerWidth,D=Math.min(a,f)+C,O=Math.max(Math.abs(f-a)-C,0);return $e.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:M,fillOpacity:.2,x:D,y:m,width:O,height:c})}},{key:"renderText",value:function(){var a=this.props,f=a.startIndex,y=a.endIndex,m=a.y,c=a.height,M=a.travellerWidth,C=a.stroke,D=this.state,O=D.startX,B=D.endX,F=5,X={pointerEvents:"none",fill:C};return $e.createElement(ji,{className:"recharts-brush-texts"},$e.createElement(n_,P_({textAnchor:"end",verticalAnchor:"middle",x:Math.min(O,B)-F,y:m+c/2},X),this.getTextOfTick(f)),$e.createElement(n_,P_({textAnchor:"start",verticalAnchor:"middle",x:Math.max(O,B)+M+F,y:m+c/2},X),this.getTextOfTick(y)))}},{key:"render",value:function(){var a=this.props,f=a.data,y=a.className,m=a.children,c=a.x,M=a.y,C=a.width,D=a.height,O=a.alwaysShowText,B=this.state,F=B.startX,X=B.endX,Z=B.isTextActive,U=B.isSlideMoving,te=B.isTravellerMoving,ae=B.isTravellerFocused;if(!f||!f.length||!Dt(c)||!Dt(M)||!Dt(C)||!Dt(D)||C<=0||D<=0)return null;var ne=sn("recharts-brush",y),ue=$e.Children.count(m)===1,J=b9("userSelect","none");return $e.createElement(ji,{className:ne,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:J},this.renderBackground(),ue&&this.renderPanorama(),this.renderSlide(F,X),this.renderTravellerLayer(F,"startX"),this.renderTravellerLayer(X,"endX"),(Z||U||te||ae||O)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var f=a.x,y=a.y,m=a.width,c=a.height,M=a.stroke,C=Math.floor(y+c/2)-1;return $e.createElement($e.Fragment,null,$e.createElement("rect",{x:f,y,width:m,height:c,fill:M,stroke:"none"}),$e.createElement("line",{x1:f+1,y1:C,x2:f+m-1,y2:C,fill:"none",stroke:"#fff"}),$e.createElement("line",{x1:f+1,y1:C+2,x2:f+m-1,y2:C+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,f){var y;return $e.isValidElement(a)?y=$e.cloneElement(a,f):Lr(a)?y=a(f):y=t.renderDefaultTraveller(f),y}},{key:"getDerivedStateFromProps",value:function(a,f){var y=a.data,m=a.width,c=a.x,M=a.travellerWidth,C=a.updateId,D=a.startIndex,O=a.endIndex;if(y!==f.prevData||C!==f.prevUpdateId)return jw({prevData:y,prevTravellerWidth:M,prevUpdateId:C,prevX:c,prevWidth:m},y&&y.length?E9({data:y,width:m,x:c,travellerWidth:M,startIndex:D,endIndex:O}):{scale:null,scaleValues:null});if(f.scale&&(m!==f.prevWidth||c!==f.prevX||M!==f.prevTravellerWidth)){f.scale.range([c,c+m-M]);var B=f.scale.domain().map(function(F){return f.scale(F)});return{prevData:y,prevTravellerWidth:M,prevUpdateId:C,prevX:c,prevWidth:m,startX:f.scale(a.startIndex),endX:f.scale(a.endIndex),scaleValues:B}}return null}},{key:"getIndexInRange",value:function(a,f){for(var y=a.length,m=0,c=y-1;c-m>1;){var M=Math.floor((m+c)/2);a[M]>f?c=M:m=M}return f>=a[c]?c:m}}])}(pt.PureComponent);bs(am,"displayName","Brush");bs(am,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Ow,Yj;function C9(){if(Yj)return Ow;Yj=1;var e=VS();function t(i,a){var f;return e(i,function(y,m,c){return f=a(y,m,c),!f}),!!f}return Ow=t,Ow}var Iw,Kj;function j9(){if(Kj)return Iw;Kj=1;var e=FI(),t=ud(),i=C9(),a=ts(),f=J_();function y(m,c,M){var C=a(m)?e:i;return M&&f(m,c,M)&&(c=void 0),C(m,t(c,3))}return Iw=y,Iw}var O9=j9();const I9=kn(O9);var Zc=function(t,i){var a=t.alwaysShow,f=t.ifOverflow;return a&&(f="extendDomain"),f===i},kw,Qj;function k9(){if(Qj)return kw;Qj=1;var e=ik();function t(i,a,f){a=="__proto__"&&e?e(i,a,{configurable:!0,enumerable:!0,value:f,writable:!0}):i[a]=f}return kw=t,kw}var zw,Jj;function z9(){if(Jj)return zw;Jj=1;var e=k9(),t=rk(),i=ud();function a(f,y){var m={};return y=i(y,3),t(f,function(c,M,C){e(m,M,y(c,M,C))}),m}return zw=a,zw}var D9=z9();const R9=kn(D9);var Dw,eO;function N9(){if(eO)return Dw;eO=1;function e(t,i){for(var a=-1,f=t==null?0:t.length;++a<f;)if(!i(t[a],a,t))return!1;return!0}return Dw=e,Dw}var Rw,tO;function L9(){if(tO)return Rw;tO=1;var e=VS();function t(i,a){var f=!0;return e(i,function(y,m,c){return f=!!a(y,m,c),f}),f}return Rw=t,Rw}var Nw,rO;function B9(){if(rO)return Nw;rO=1;var e=N9(),t=L9(),i=ud(),a=ts(),f=J_();function y(m,c,M){var C=a(m)?e:t;return M&&f(m,c,M)&&(c=void 0),C(m,i(c,3))}return Nw=y,Nw}var F9=B9();const Iz=kn(F9);var $9=["x","y"];function xy(e){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xy(e)}function tS(){return tS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},tS.apply(this,arguments)}function nO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Ig(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?nO(Object(i),!0).forEach(function(a){q9(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):nO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function q9(e,t,i){return t=U9(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function U9(e){var t=V9(e,"string");return xy(t)=="symbol"?t:t+""}function V9(e,t){if(xy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(xy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G9(e,t){if(e==null)return{};var i=Z9(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Z9(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function H9(e,t){var i=e.x,a=e.y,f=G9(e,$9),y="".concat(i),m=parseInt(y,10),c="".concat(a),M=parseInt(c,10),C="".concat(t.height||f.height),D=parseInt(C,10),O="".concat(t.width||f.width),B=parseInt(O,10);return Ig(Ig(Ig(Ig(Ig({},t),f),m?{x:m}:{}),M?{y:M}:{}),{},{height:D,width:B,name:t.name,radius:t.radius})}function iO(e){return $e.createElement(a9,tS({shapeType:"rectangle",propTransformer:H9,activeClassName:"recharts-active-bar"},e))}var X9=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,f){if(typeof t=="number")return t;var y=typeof a=="number";return y?t(a,f):(y||Mf(),i)}},W9=["value","background"],kz;function om(e){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},om(e)}function Y9(e,t){if(e==null)return{};var i=K9(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function K9(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function C_(){return C_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},C_.apply(this,arguments)}function aO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Hi(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?aO(Object(i),!0).forEach(function(a){ad(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):aO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Q9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oO(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Dz(a.key),a)}}function J9(e,t,i){return t&&oO(e.prototype,t),i&&oO(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function eG(e,t,i){return t=j_(t),tG(e,zz()?Reflect.construct(t,i||[],j_(e).constructor):t.apply(e,i))}function tG(e,t){if(t&&(om(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rG(e)}function rG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zz=function(){return!!e})()}function j_(e){return j_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},j_(e)}function nG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rS(e,t)}function rS(e,t){return rS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},rS(e,t)}function ad(e,t,i){return t=Dz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Dz(e){var t=iG(e,"string");return om(t)=="symbol"?t:t+""}function iG(e,t){if(om(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(om(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ly=function(e){function t(){var i;Q9(this,t);for(var a=arguments.length,f=new Array(a),y=0;y<a;y++)f[y]=arguments[y];return i=eG(this,t,[].concat(f)),ad(i,"state",{isAnimationFinished:!1}),ad(i,"id",Oy("recharts-bar-")),ad(i,"handleAnimationEnd",function(){var m=i.props.onAnimationEnd;i.setState({isAnimationFinished:!0}),m&&m()}),ad(i,"handleAnimationStart",function(){var m=i.props.onAnimationStart;i.setState({isAnimationFinished:!1}),m&&m()}),i}return nG(t,e),J9(t,[{key:"renderRectanglesStatically",value:function(a){var f=this,y=this.props,m=y.shape,c=y.dataKey,M=y.activeIndex,C=y.activeBar,D=en(this.props,!1);return a&&a.map(function(O,B){var F=B===M,X=F?C:m,Z=Hi(Hi(Hi({},D),O),{},{isActive:F,option:X,index:B,dataKey:c,onAnimationStart:f.handleAnimationStart,onAnimationEnd:f.handleAnimationEnd});return $e.createElement(ji,C_({className:"recharts-bar-rectangle"},Zv(f.props,O,B),{key:"rectangle-".concat(O==null?void 0:O.x,"-").concat(O==null?void 0:O.y,"-").concat(O==null?void 0:O.value,"-").concat(B)}),$e.createElement(iO,Z))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,f=this.props,y=f.data,m=f.layout,c=f.isAnimationActive,M=f.animationBegin,C=f.animationDuration,D=f.animationEasing,O=f.animationId,B=this.state.prevData;return $e.createElement(Xu,{begin:M,duration:C,isActive:c,easing:D,from:{t:0},to:{t:1},key:"bar-".concat(O),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(F){var X=F.t,Z=y.map(function(U,te){var ae=B&&B[te];if(ae){var ne=ic(ae.x,U.x),ue=ic(ae.y,U.y),J=ic(ae.width,U.width),oe=ic(ae.height,U.height);return Hi(Hi({},U),{},{x:ne(X),y:ue(X),width:J(X),height:oe(X)})}if(m==="horizontal"){var me=ic(0,U.height),_e=me(X);return Hi(Hi({},U),{},{y:U.y+U.height-_e,height:_e})}var ke=ic(0,U.width),at=ke(X);return Hi(Hi({},U),{},{width:at})});return $e.createElement(ji,null,a.renderRectanglesStatically(Z))})}},{key:"renderRectangles",value:function(){var a=this.props,f=a.data,y=a.isAnimationActive,m=this.state.prevData;return y&&f&&f.length&&(!m||!l0(m,f))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(f)}},{key:"renderBackground",value:function(){var a=this,f=this.props,y=f.data,m=f.dataKey,c=f.activeIndex,M=en(this.props.background,!1);return y.map(function(C,D){C.value;var O=C.background,B=Y9(C,W9);if(!O)return null;var F=Hi(Hi(Hi(Hi(Hi({},B),{},{fill:"#eee"},O),M),Zv(a.props,C,D)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:m,index:D,className:"recharts-bar-background-rectangle"});return $e.createElement(iO,C_({key:"background-bar-".concat(D),option:a.props.background,isActive:D===c},F))})}},{key:"renderErrorBar",value:function(a,f){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var y=this.props,m=y.data,c=y.xAxis,M=y.yAxis,C=y.layout,D=y.children,O=ol(D,Ny);if(!O)return null;var B=C==="vertical"?m[0].height/2:m[0].width/2,F=function(U,te){var ae=Array.isArray(U.value)?U.value[1]:U.value;return{x:U.x,y:U.y,value:ae,errorVal:Ss(U,te)}},X={clipPath:a?"url(#clipPath-".concat(f,")"):null};return $e.createElement(ji,X,O.map(function(Z){return $e.cloneElement(Z,{key:"error-bar-".concat(f,"-").concat(Z.props.dataKey),data:m,xAxis:c,yAxis:M,layout:C,offset:B,dataPointFormatter:F})}))}},{key:"render",value:function(){var a=this.props,f=a.hide,y=a.data,m=a.className,c=a.xAxis,M=a.yAxis,C=a.left,D=a.top,O=a.width,B=a.height,F=a.isAnimationActive,X=a.background,Z=a.id;if(f||!y||!y.length)return null;var U=this.state.isAnimationFinished,te=sn("recharts-bar",m),ae=c&&c.allowDataOverflow,ne=M&&M.allowDataOverflow,ue=ae||ne,J=Wr(Z)?this.id:Z;return $e.createElement(ji,{className:te},ae||ne?$e.createElement("defs",null,$e.createElement("clipPath",{id:"clipPath-".concat(J)},$e.createElement("rect",{x:ae?C:C-O/2,y:ne?D:D-B/2,width:ae?O:O*2,height:ne?B:B*2}))):null,$e.createElement(ji,{className:"recharts-bar-rectangles",clipPath:ue?"url(#clipPath-".concat(J,")"):null},X?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(ue,J),(!F||U)&&ld.renderCallByParent(this.props,y))}}],[{key:"getDerivedStateFromProps",value:function(a,f){return a.animationId!==f.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:f.curData}:a.data!==f.curData?{curData:a.data}:null}}])}(pt.PureComponent);kz=Ly;ad(Ly,"displayName","Bar");ad(Ly,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!wm.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ad(Ly,"getComposedData",function(e){var t=e.props,i=e.item,a=e.barPosition,f=e.bandSize,y=e.xAxis,m=e.yAxis,c=e.xAxisTicks,M=e.yAxisTicks,C=e.stackedData,D=e.dataStartIndex,O=e.displayedData,B=e.offset,F=Sq(a,i);if(!F)return null;var X=t.layout,Z=i.type.defaultProps,U=Z!==void 0?Hi(Hi({},Z),i.props):i.props,te=U.dataKey,ae=U.children,ne=U.minPointSize,ue=X==="horizontal"?m:y,J=C?ue.scale.domain():null,oe=Oq({numericAxis:ue}),me=ol(ae,hk),_e=O.map(function(ke,at){var ze,Fe,tt,ut,rt,Pe;C?ze=Tq(C[D+at],J):(ze=Ss(ke,te),Array.isArray(ze)||(ze=[oe,ze]));var Ve=X9(ne,kz.defaultProps.minPointSize)(ze[1],at);if(X==="horizontal"){var Ge,ht=[m.scale(ze[0]),m.scale(ze[1])],be=ht[0],Xe=ht[1];Fe=UC({axis:y,ticks:c,bandSize:f,offset:F.offset,entry:ke,index:at}),tt=(Ge=Xe??be)!==null&&Ge!==void 0?Ge:void 0,ut=F.size;var ot=be-Xe;if(rt=Number.isNaN(ot)?0:ot,Pe={x:Fe,y:m.y,width:ut,height:m.height},Math.abs(Ve)>0&&Math.abs(rt)<Math.abs(Ve)){var st=oc(rt||Ve)*(Math.abs(Ve)-Math.abs(rt));tt-=st,rt+=st}}else{var Pt=[y.scale(ze[0]),y.scale(ze[1])],Vt=Pt[0],Rt=Pt[1];if(Fe=Vt,tt=UC({axis:m,ticks:M,bandSize:f,offset:F.offset,entry:ke,index:at}),ut=Rt-Vt,rt=F.size,Pe={x:y.x,y:tt,width:y.width,height:rt},Math.abs(Ve)>0&&Math.abs(ut)<Math.abs(Ve)){var mr=oc(ut||Ve)*(Math.abs(Ve)-Math.abs(ut));ut+=mr}}return Hi(Hi(Hi({},ke),{},{x:Fe,y:tt,width:ut,height:rt,value:C?ze:ze[1],payload:ke,background:Pe},me&&me[at]&&me[at].props),{},{tooltipPayload:[yz(i,ke)],tooltipPosition:{x:Fe+ut/2,y:tt+rt/2}})});return Hi({data:_e,layout:X},B)});function wy(e){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wy(e)}function aG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sO(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Rz(a.key),a)}}function oG(e,t,i){return t&&sO(e.prototype,t),i&&sO(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function lO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function rc(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?lO(Object(i),!0).forEach(function(a){f0(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):lO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function f0(e,t,i){return t=Rz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Rz(e){var t=sG(e,"string");return wy(t)=="symbol"?t:t+""}function sG(e,t){if(wy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(wy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lG=function(t,i,a,f,y){var m=t.width,c=t.height,M=t.layout,C=t.children,D=Object.keys(i),O={left:a.left,leftMirror:a.left,right:m-a.right,rightMirror:m-a.right,top:a.top,topMirror:a.top,bottom:c-a.bottom,bottomMirror:c-a.bottom},B=!!xs(C,Ly);return D.reduce(function(F,X){var Z=i[X],U=Z.orientation,te=Z.domain,ae=Z.padding,ne=ae===void 0?{}:ae,ue=Z.mirror,J=Z.reversed,oe="".concat(U).concat(ue?"Mirror":""),me,_e,ke,at,ze;if(Z.type==="number"&&(Z.padding==="gap"||Z.padding==="no-gap")){var Fe=te[1]-te[0],tt=1/0,ut=Z.categoricalDomain.sort(o5);if(ut.forEach(function(Pt,Vt){Vt>0&&(tt=Math.min((Pt||0)-(ut[Vt-1]||0),tt))}),Number.isFinite(tt)){var rt=tt/Fe,Pe=Z.layout==="vertical"?a.height:a.width;if(Z.padding==="gap"&&(me=rt*Pe/2),Z.padding==="no-gap"){var Ve=Tf(t.barCategoryGap,rt*Pe),Ge=rt*Pe/2;me=Ge-Ve-(Ge-Ve)/Pe*Ve}}}f==="xAxis"?_e=[a.left+(ne.left||0)+(me||0),a.left+a.width-(ne.right||0)-(me||0)]:f==="yAxis"?_e=M==="horizontal"?[a.top+a.height-(ne.bottom||0),a.top+(ne.top||0)]:[a.top+(ne.top||0)+(me||0),a.top+a.height-(ne.bottom||0)-(me||0)]:_e=Z.range,J&&(_e=[_e[1],_e[0]]);var ht=xq(Z,y,B),be=ht.scale,Xe=ht.realScaleType;be.domain(te).range(_e),wq(be);var ot=jq(be,rc(rc({},Z),{},{realScaleType:Xe}));f==="xAxis"?(ze=U==="top"&&!ue||U==="bottom"&&ue,ke=a.left,at=O[oe]-ze*Z.height):f==="yAxis"&&(ze=U==="left"&&!ue||U==="right"&&ue,ke=O[oe]-ze*Z.width,at=a.top);var st=rc(rc(rc({},Z),ot),{},{realScaleType:Xe,x:ke,y:at,scale:be,width:f==="xAxis"?a.width:Z.width,height:f==="yAxis"?a.height:Z.height});return st.bandSize=y_(st,ot),!Z.hide&&f==="xAxis"?O[oe]+=(ze?-1:1)*st.height:Z.hide||(O[oe]+=(ze?-1:1)*st.width),rc(rc({},F),{},f0({},X,st))},{})},Nz=function(t,i){var a=t.x,f=t.y,y=i.x,m=i.y;return{x:Math.min(a,y),y:Math.min(f,m),width:Math.abs(y-a),height:Math.abs(m-f)}},cG=function(t){var i=t.x1,a=t.y1,f=t.x2,y=t.y2;return Nz({x:i,y:a},{x:f,y})},Lz=function(){function e(t){aG(this,e),this.scale=t}return oG(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=a.bandAware,y=a.position;if(i!==void 0){if(y)switch(y){case"start":return this.scale(i);case"middle":{var m=this.bandwidth?this.bandwidth()/2:0;return this.scale(i)+m}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(i)+c}default:return this.scale(i)}if(f){var M=this.bandwidth?this.bandwidth()/2:0;return this.scale(i)+M}return this.scale(i)}}},{key:"isInRange",value:function(i){var a=this.range(),f=a[0],y=a[a.length-1];return f<=y?i>=f&&i<=y:i>=y&&i<=f}}],[{key:"create",value:function(i){return new e(i)}}])}();f0(Lz,"EPS",1e-4);var bT=function(t){var i=Object.keys(t).reduce(function(a,f){return rc(rc({},a),{},f0({},f,Lz.create(t[f])))},{});return rc(rc({},i),{},{apply:function(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=y.bandAware,c=y.position;return R9(f,function(M,C){return i[C].apply(M,{bandAware:m,position:c})})},isInRange:function(f){return Iz(f,function(y,m){return i[m].isInRange(y)})}})};function uG(e){return(e%180+180)%180}var hG=function(t){var i=t.width,a=t.height,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=uG(f),m=y*Math.PI/180,c=Math.atan(a/i),M=m>c&&m<Math.PI-c?a/Math.sin(m):i/Math.cos(m);return Math.abs(M)},Lw,cO;function dG(){if(cO)return Lw;cO=1;var e=ud(),t=Iy(),i=K_();function a(f){return function(y,m,c){var M=Object(y);if(!t(y)){var C=e(m,3);y=i(y),m=function(O){return C(M[O],O,M)}}var D=f(y,m,c);return D>-1?M[C?y[D]:D]:void 0}}return Lw=a,Lw}var Bw,uO;function fG(){if(uO)return Bw;uO=1;var e=Ez();function t(i){var a=e(i),f=a%1;return a===a?f?a-f:a:0}return Bw=t,Bw}var Fw,hO;function pG(){if(hO)return Fw;hO=1;var e=KI(),t=ud(),i=fG(),a=Math.max;function f(y,m,c){var M=y==null?0:y.length;if(!M)return-1;var C=c==null?0:i(c);return C<0&&(C=a(M+C,0)),e(y,t(m,3),C)}return Fw=f,Fw}var $w,dO;function mG(){if(dO)return $w;dO=1;var e=dG(),t=pG(),i=e(t);return $w=i,$w}var gG=mG();const yG=kn(gG);var vG=fI();const _G=kn(vG);var bG=_G(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),xT=pt.createContext(void 0),wT=pt.createContext(void 0),Bz=pt.createContext(void 0),Fz=pt.createContext({}),$z=pt.createContext(void 0),qz=pt.createContext(0),Uz=pt.createContext(0),fO=function(t){var i=t.state,a=i.xAxisMap,f=i.yAxisMap,y=i.offset,m=t.clipPathId,c=t.children,M=t.width,C=t.height,D=bG(y);return $e.createElement(xT.Provider,{value:a},$e.createElement(wT.Provider,{value:f},$e.createElement(Fz.Provider,{value:y},$e.createElement(Bz.Provider,{value:D},$e.createElement($z.Provider,{value:m},$e.createElement(qz.Provider,{value:C},$e.createElement(Uz.Provider,{value:M},c)))))))},xG=function(){return pt.useContext($z)},Vz=function(t){var i=pt.useContext(xT);i==null&&Mf();var a=i[t];return a==null&&Mf(),a},wG=function(){var t=pt.useContext(xT);return nd(t)},SG=function(){var t=pt.useContext(wT),i=yG(t,function(a){return Iz(a.domain,Number.isFinite)});return i||nd(t)},Gz=function(t){var i=pt.useContext(wT);i==null&&Mf();var a=i[t];return a==null&&Mf(),a},TG=function(){var t=pt.useContext(Bz);return t},AG=function(){return pt.useContext(Fz)},ST=function(){return pt.useContext(Uz)},TT=function(){return pt.useContext(qz)};function sm(e){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sm(e)}function MG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PG(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Hz(a.key),a)}}function EG(e,t,i){return t&&PG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function CG(e,t,i){return t=O_(t),jG(e,Zz()?Reflect.construct(t,i||[],O_(e).constructor):t.apply(e,i))}function jG(e,t){if(t&&(sm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OG(e)}function OG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zz=function(){return!!e})()}function O_(e){return O_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},O_(e)}function IG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nS(e,t)}function nS(e,t){return nS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},nS(e,t)}function pO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function mO(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?pO(Object(i),!0).forEach(function(a){AT(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function AT(e,t,i){return t=Hz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Hz(e){var t=kG(e,"string");return sm(t)=="symbol"?t:t+""}function kG(e,t){if(sm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(sm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function zG(e,t){return LG(e)||NG(e,t)||RG(e,t)||DG()}function DG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RG(e,t){if(e){if(typeof e=="string")return gO(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return gO(e,t)}}function gO(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function NG(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,y,m,c=[],M=!0,C=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(c.push(a.value),c.length!==t);M=!0);}catch(D){C=!0,f=D}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return c}}function LG(e){if(Array.isArray(e))return e}function iS(){return iS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},iS.apply(this,arguments)}var BG=function(t,i){var a;return $e.isValidElement(t)?a=$e.cloneElement(t,i):Lr(t)?a=t(i):a=$e.createElement("line",iS({},i,{className:"recharts-reference-line-line"})),a},FG=function(t,i,a,f,y,m,c,M,C){var D=y.x,O=y.y,B=y.width,F=y.height;if(a){var X=C.y,Z=t.y.apply(X,{position:m});if(Zc(C,"discard")&&!t.y.isInRange(Z))return null;var U=[{x:D+B,y:Z},{x:D,y:Z}];return M==="left"?U.reverse():U}if(i){var te=C.x,ae=t.x.apply(te,{position:m});if(Zc(C,"discard")&&!t.x.isInRange(ae))return null;var ne=[{x:ae,y:O+F},{x:ae,y:O}];return c==="top"?ne.reverse():ne}if(f){var ue=C.segment,J=ue.map(function(oe){return t.apply(oe,{position:m})});return Zc(C,"discard")&&I9(J,function(oe){return!t.isInRange(oe)})?null:J}return null};function $G(e){var t=e.x,i=e.y,a=e.segment,f=e.xAxisId,y=e.yAxisId,m=e.shape,c=e.className,M=e.alwaysShow,C=xG(),D=Vz(f),O=Gz(y),B=TG();if(!C||!B)return null;Uu(M===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var F=bT({x:D.scale,y:O.scale}),X=sa(t),Z=sa(i),U=a&&a.length===2,te=FG(F,X,Z,U,B,e.position,D.orientation,O.orientation,e);if(!te)return null;var ae=zG(te,2),ne=ae[0],ue=ne.x,J=ne.y,oe=ae[1],me=oe.x,_e=oe.y,ke=Zc(e,"hidden")?"url(#".concat(C,")"):void 0,at=mO(mO({clipPath:ke},en(e,!0)),{},{x1:ue,y1:J,x2:me,y2:_e});return $e.createElement(ji,{className:sn("recharts-reference-line",c)},BG(m,at),ao.renderCallByParent(e,cG({x1:ue,y1:J,x2:me,y2:_e})))}var MT=function(e){function t(){return MG(this,t),CG(this,t,arguments)}return IG(t,e),EG(t,[{key:"render",value:function(){return $e.createElement($G,this.props)}}])}($e.Component);AT(MT,"displayName","ReferenceLine");AT(MT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function aS(){return aS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},aS.apply(this,arguments)}function lm(e){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lm(e)}function yO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function vO(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(i),!0).forEach(function(a){p0(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):yO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function qG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UG(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Wz(a.key),a)}}function VG(e,t,i){return t&&UG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function GG(e,t,i){return t=I_(t),ZG(e,Xz()?Reflect.construct(t,i||[],I_(e).constructor):t.apply(e,i))}function ZG(e,t){if(t&&(lm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HG(e)}function HG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xz=function(){return!!e})()}function I_(e){return I_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},I_(e)}function XG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oS(e,t)}function oS(e,t){return oS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},oS(e,t)}function p0(e,t,i){return t=Wz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Wz(e){var t=WG(e,"string");return lm(t)=="symbol"?t:t+""}function WG(e,t){if(lm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(lm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var YG=function(t){var i=t.x,a=t.y,f=t.xAxis,y=t.yAxis,m=bT({x:f.scale,y:y.scale}),c=m.apply({x:i,y:a},{bandAware:!0});return Zc(t,"discard")&&!m.isInRange(c)?null:c},m0=function(e){function t(){return qG(this,t),GG(this,t,arguments)}return XG(t,e),VG(t,[{key:"render",value:function(){var a=this.props,f=a.x,y=a.y,m=a.r,c=a.alwaysShow,M=a.clipPathId,C=sa(f),D=sa(y);if(Uu(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!C||!D)return null;var O=YG(this.props);if(!O)return null;var B=O.x,F=O.y,X=this.props,Z=X.shape,U=X.className,te=Zc(this.props,"hidden")?"url(#".concat(M,")"):void 0,ae=vO(vO({clipPath:te},en(this.props,!0)),{},{cx:B,cy:F});return $e.createElement(ji,{className:sn("recharts-reference-dot",U)},t.renderDot(Z,ae),ao.renderCallByParent(this.props,{x:B-m,y:F-m,width:2*m,height:2*m}))}}])}($e.Component);p0(m0,"displayName","ReferenceDot");p0(m0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});p0(m0,"renderDot",function(e,t){var i;return $e.isValidElement(e)?i=$e.cloneElement(e,t):Lr(e)?i=e(t):i=$e.createElement(_T,aS({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),i});function sS(){return sS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},sS.apply(this,arguments)}function cm(e){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cm(e)}function _O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function bO(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?_O(Object(i),!0).forEach(function(a){g0(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_O(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function KG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QG(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Kz(a.key),a)}}function JG(e,t,i){return t&&QG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function eZ(e,t,i){return t=k_(t),tZ(e,Yz()?Reflect.construct(t,i||[],k_(e).constructor):t.apply(e,i))}function tZ(e,t){if(t&&(cm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rZ(e)}function rZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yz=function(){return!!e})()}function k_(e){return k_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},k_(e)}function nZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lS(e,t)}function lS(e,t){return lS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},lS(e,t)}function g0(e,t,i){return t=Kz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Kz(e){var t=iZ(e,"string");return cm(t)=="symbol"?t:t+""}function iZ(e,t){if(cm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(cm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var aZ=function(t,i,a,f,y){var m=y.x1,c=y.x2,M=y.y1,C=y.y2,D=y.xAxis,O=y.yAxis;if(!D||!O)return null;var B=bT({x:D.scale,y:O.scale}),F={x:t?B.x.apply(m,{position:"start"}):B.x.rangeMin,y:a?B.y.apply(M,{position:"start"}):B.y.rangeMin},X={x:i?B.x.apply(c,{position:"end"}):B.x.rangeMax,y:f?B.y.apply(C,{position:"end"}):B.y.rangeMax};return Zc(y,"discard")&&(!B.isInRange(F)||!B.isInRange(X))?null:Nz(F,X)},y0=function(e){function t(){return KG(this,t),eZ(this,t,arguments)}return nZ(t,e),JG(t,[{key:"render",value:function(){var a=this.props,f=a.x1,y=a.x2,m=a.y1,c=a.y2,M=a.className,C=a.alwaysShow,D=a.clipPathId;Uu(C===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var O=sa(f),B=sa(y),F=sa(m),X=sa(c),Z=this.props.shape;if(!O&&!B&&!F&&!X&&!Z)return null;var U=aZ(O,B,F,X,this.props);if(!U&&!Z)return null;var te=Zc(this.props,"hidden")?"url(#".concat(D,")"):void 0;return $e.createElement(ji,{className:sn("recharts-reference-area",M)},t.renderRect(Z,bO(bO({clipPath:te},en(this.props,!0)),U)),ao.renderCallByParent(this.props,U))}}])}($e.Component);g0(y0,"displayName","ReferenceArea");g0(y0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});g0(y0,"renderRect",function(e,t){var i;return $e.isValidElement(e)?i=$e.cloneElement(e,t):Lr(e)?i=e(t):i=$e.createElement(vT,sS({},t,{className:"recharts-reference-area-rect"})),i});function Qz(e,t,i){if(t<1)return[];if(t===1&&i===void 0)return e;for(var a=[],f=0;f<e.length;f+=t)a.push(e[f]);return a}function oZ(e,t,i){var a={width:e.width+t.width,height:e.height+t.height};return hG(a,i)}function sZ(e,t,i){var a=i==="width",f=e.x,y=e.y,m=e.width,c=e.height;return t===1?{start:a?f:y,end:a?f+m:y+c}:{start:a?f+m:y+c,end:a?f:y}}function z_(e,t,i,a,f){if(e*t<e*a||e*t>e*f)return!1;var y=i();return e*(t-e*y/2-a)>=0&&e*(t+e*y/2-f)<=0}function lZ(e,t){return Qz(e,t+1)}function cZ(e,t,i,a,f){for(var y=(a||[]).slice(),m=t.start,c=t.end,M=0,C=1,D=m,O=function(){var X=a==null?void 0:a[M];if(X===void 0)return{v:Qz(a,C)};var Z=M,U,te=function(){return U===void 0&&(U=i(X,Z)),U},ae=X.coordinate,ne=M===0||z_(e,ae,te,D,c);ne||(M=0,D=m,C+=1),ne&&(D=ae+e*(te()/2+f),M+=C)},B;C<=y.length;)if(B=O(),B)return B.v;return[]}function Sy(e){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sy(e)}function xO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function io(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?xO(Object(i),!0).forEach(function(a){uZ(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function uZ(e,t,i){return t=hZ(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function hZ(e){var t=dZ(e,"string");return Sy(t)=="symbol"?t:t+""}function dZ(e,t){if(Sy(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Sy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fZ(e,t,i,a,f){for(var y=(a||[]).slice(),m=y.length,c=t.start,M=t.end,C=function(B){var F=y[B],X,Z=function(){return X===void 0&&(X=i(F,B)),X};if(B===m-1){var U=e*(F.coordinate+e*Z()/2-M);y[B]=F=io(io({},F),{},{tickCoord:U>0?F.coordinate-U*e:F.coordinate})}else y[B]=F=io(io({},F),{},{tickCoord:F.coordinate});var te=z_(e,F.tickCoord,Z,c,M);te&&(M=F.tickCoord-e*(Z()/2+f),y[B]=io(io({},F),{},{isShow:!0}))},D=m-1;D>=0;D--)C(D);return y}function pZ(e,t,i,a,f,y){var m=(a||[]).slice(),c=m.length,M=t.start,C=t.end;if(y){var D=a[c-1],O=i(D,c-1),B=e*(D.coordinate+e*O/2-C);m[c-1]=D=io(io({},D),{},{tickCoord:B>0?D.coordinate-B*e:D.coordinate});var F=z_(e,D.tickCoord,function(){return O},M,C);F&&(C=D.tickCoord-e*(O/2+f),m[c-1]=io(io({},D),{},{isShow:!0}))}for(var X=y?c-1:c,Z=function(ae){var ne=m[ae],ue,J=function(){return ue===void 0&&(ue=i(ne,ae)),ue};if(ae===0){var oe=e*(ne.coordinate-e*J()/2-M);m[ae]=ne=io(io({},ne),{},{tickCoord:oe<0?ne.coordinate-oe*e:ne.coordinate})}else m[ae]=ne=io(io({},ne),{},{tickCoord:ne.coordinate});var me=z_(e,ne.tickCoord,J,M,C);me&&(M=ne.tickCoord+e*(J()/2+f),m[ae]=io(io({},ne),{},{isShow:!0}))},U=0;U<X;U++)Z(U);return m}function PT(e,t,i){var a=e.tick,f=e.ticks,y=e.viewBox,m=e.minTickGap,c=e.orientation,M=e.interval,C=e.tickFormatter,D=e.unit,O=e.angle;if(!f||!f.length||!a)return[];if(Dt(M)||wm.isSsr)return lZ(f,typeof M=="number"&&Dt(M)?M:0);var B=[],F=c==="top"||c==="bottom"?"width":"height",X=D&&F==="width"?Bg(D,{fontSize:t,letterSpacing:i}):{width:0,height:0},Z=function(ne,ue){var J=Lr(C)?C(ne.value,ue):ne.value;return F==="width"?oZ(Bg(J,{fontSize:t,letterSpacing:i}),X,O):Bg(J,{fontSize:t,letterSpacing:i})[F]},U=f.length>=2?oc(f[1].coordinate-f[0].coordinate):1,te=sZ(y,U,F);return M==="equidistantPreserveStart"?cZ(U,te,Z,f,m):(M==="preserveStart"||M==="preserveStartEnd"?B=pZ(U,te,Z,f,m,M==="preserveStartEnd"):B=fZ(U,te,Z,f,m),B.filter(function(ae){return ae.isShow}))}var mZ=["viewBox"],gZ=["viewBox"],yZ=["ticks"];function um(e){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(e)}function qp(){return qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},qp.apply(this,arguments)}function wO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function To(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?wO(Object(i),!0).forEach(function(a){ET(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):wO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function qw(e,t){if(e==null)return{};var i=vZ(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function vZ(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function _Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SO(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,eD(a.key),a)}}function bZ(e,t,i){return t&&SO(e.prototype,t),i&&SO(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function xZ(e,t,i){return t=D_(t),wZ(e,Jz()?Reflect.construct(t,i||[],D_(e).constructor):t.apply(e,i))}function wZ(e,t){if(t&&(um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SZ(e)}function SZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jz=function(){return!!e})()}function D_(e){return D_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},D_(e)}function TZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cS(e,t)}function cS(e,t){return cS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},cS(e,t)}function ET(e,t,i){return t=eD(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function eD(e){var t=AZ(e,"string");return um(t)=="symbol"?t:t+""}function AZ(e,t){if(um(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(um(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Mm=function(e){function t(i){var a;return _Z(this,t),a=xZ(this,t,[i]),a.state={fontSize:"",letterSpacing:""},a}return TZ(t,e),bZ(t,[{key:"shouldComponentUpdate",value:function(a,f){var y=a.viewBox,m=qw(a,mZ),c=this.props,M=c.viewBox,C=qw(c,gZ);return!Gp(y,M)||!Gp(m,C)||!Gp(f,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var f=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];f&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var f=this.props,y=f.x,m=f.y,c=f.width,M=f.height,C=f.orientation,D=f.tickSize,O=f.mirror,B=f.tickMargin,F,X,Z,U,te,ae,ne=O?-1:1,ue=a.tickSize||D,J=Dt(a.tickCoord)?a.tickCoord:a.coordinate;switch(C){case"top":F=X=a.coordinate,U=m+ +!O*M,Z=U-ne*ue,ae=Z-ne*B,te=J;break;case"left":Z=U=a.coordinate,X=y+ +!O*c,F=X-ne*ue,te=F-ne*B,ae=J;break;case"right":Z=U=a.coordinate,X=y+ +O*c,F=X+ne*ue,te=F+ne*B,ae=J;break;default:F=X=a.coordinate,U=m+ +O*M,Z=U+ne*ue,ae=Z+ne*B,te=J;break}return{line:{x1:F,y1:Z,x2:X,y2:U},tick:{x:te,y:ae}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,f=a.orientation,y=a.mirror,m;switch(f){case"left":m=y?"start":"end";break;case"right":m=y?"end":"start";break;default:m="middle";break}return m}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,f=a.orientation,y=a.mirror,m="end";switch(f){case"left":case"right":m="middle";break;case"top":m=y?"start":"end";break;default:m=y?"end":"start";break}return m}},{key:"renderAxisLine",value:function(){var a=this.props,f=a.x,y=a.y,m=a.width,c=a.height,M=a.orientation,C=a.mirror,D=a.axisLine,O=To(To(To({},en(this.props,!1)),en(D,!1)),{},{fill:"none"});if(M==="top"||M==="bottom"){var B=+(M==="top"&&!C||M==="bottom"&&C);O=To(To({},O),{},{x1:f,y1:y+B*c,x2:f+m,y2:y+B*c})}else{var F=+(M==="left"&&!C||M==="right"&&C);O=To(To({},O),{},{x1:f+F*m,y1:y,x2:f+F*m,y2:y+c})}return $e.createElement("line",qp({},O,{className:sn("recharts-cartesian-axis-line",al(D,"className"))}))}},{key:"renderTicks",value:function(a,f,y){var m=this,c=this.props,M=c.tickLine,C=c.stroke,D=c.tick,O=c.tickFormatter,B=c.unit,F=PT(To(To({},this.props),{},{ticks:a}),f,y),X=this.getTickTextAnchor(),Z=this.getTickVerticalAnchor(),U=en(this.props,!1),te=en(D,!1),ae=To(To({},U),{},{fill:"none"},en(M,!1)),ne=F.map(function(ue,J){var oe=m.getTickLineCoord(ue),me=oe.line,_e=oe.tick,ke=To(To(To(To({textAnchor:X,verticalAnchor:Z},U),{},{stroke:"none",fill:C},te),_e),{},{index:J,payload:ue,visibleTicksCount:F.length,tickFormatter:O});return $e.createElement(ji,qp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ue.value,"-").concat(ue.coordinate,"-").concat(ue.tickCoord)},Zv(m.props,ue,J)),M&&$e.createElement("line",qp({},ae,me,{className:sn("recharts-cartesian-axis-tick-line",al(M,"className"))})),D&&t.renderTickItem(D,ke,"".concat(Lr(O)?O(ue.value,J):ue.value).concat(B||"")))});return $e.createElement("g",{className:"recharts-cartesian-axis-ticks"},ne)}},{key:"render",value:function(){var a=this,f=this.props,y=f.axisLine,m=f.width,c=f.height,M=f.ticksGenerator,C=f.className,D=f.hide;if(D)return null;var O=this.props,B=O.ticks,F=qw(O,yZ),X=B;return Lr(M)&&(X=B&&B.length>0?M(this.props):M(F)),m<=0||c<=0||!X||!X.length?null:$e.createElement(ji,{className:sn("recharts-cartesian-axis",C),ref:function(U){a.layerReference=U}},y&&this.renderAxisLine(),this.renderTicks(X,this.state.fontSize,this.state.letterSpacing),ao.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,f,y){var m;return $e.isValidElement(a)?m=$e.cloneElement(a,f):Lr(a)?m=a(f):m=$e.createElement(n_,qp({},f,{className:"recharts-cartesian-axis-tick-value"}),y),m}}])}(pt.Component);ET(Mm,"displayName","CartesianAxis");ET(Mm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var MZ=["x1","y1","x2","y2","key"],PZ=["offset"];function Pf(e){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pf(e)}function TO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function oo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?TO(Object(i),!0).forEach(function(a){EZ(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):TO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function EZ(e,t,i){return t=CZ(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function CZ(e){var t=jZ(e,"string");return Pf(t)=="symbol"?t:t+""}function jZ(e,t){if(Pf(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Pf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yf(){return yf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},yf.apply(this,arguments)}function AO(e,t){if(e==null)return{};var i=OZ(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function OZ(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var IZ=function(t){var i=t.fill;if(!i||i==="none")return null;var a=t.fillOpacity,f=t.x,y=t.y,m=t.width,c=t.height,M=t.ry;return $e.createElement("rect",{x:f,y,ry:M,width:m,height:c,stroke:"none",fill:i,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function tD(e,t){var i;if($e.isValidElement(e))i=$e.cloneElement(e,t);else if(Lr(e))i=e(t);else{var a=t.x1,f=t.y1,y=t.x2,m=t.y2,c=t.key,M=AO(t,MZ),C=en(M,!1);C.offset;var D=AO(C,PZ);i=$e.createElement("line",yf({},D,{x1:a,y1:f,x2:y,y2:m,fill:"none",key:c}))}return i}function kZ(e){var t=e.x,i=e.width,a=e.horizontal,f=a===void 0?!0:a,y=e.horizontalPoints;if(!f||!y||!y.length)return null;var m=y.map(function(c,M){var C=oo(oo({},e),{},{x1:t,y1:c,x2:t+i,y2:c,key:"line-".concat(M),index:M});return tD(f,C)});return $e.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function zZ(e){var t=e.y,i=e.height,a=e.vertical,f=a===void 0?!0:a,y=e.verticalPoints;if(!f||!y||!y.length)return null;var m=y.map(function(c,M){var C=oo(oo({},e),{},{x1:c,y1:t,x2:c,y2:t+i,key:"line-".concat(M),index:M});return tD(f,C)});return $e.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function DZ(e){var t=e.horizontalFill,i=e.fillOpacity,a=e.x,f=e.y,y=e.width,m=e.height,c=e.horizontalPoints,M=e.horizontal,C=M===void 0?!0:M;if(!C||!t||!t.length)return null;var D=c.map(function(B){return Math.round(B+f-f)}).sort(function(B,F){return B-F});f!==D[0]&&D.unshift(0);var O=D.map(function(B,F){var X=!D[F+1],Z=X?f+m-B:D[F+1]-B;if(Z<=0)return null;var U=F%t.length;return $e.createElement("rect",{key:"react-".concat(F),y:B,x:a,height:Z,width:y,stroke:"none",fill:t[U],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return $e.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},O)}function RZ(e){var t=e.vertical,i=t===void 0?!0:t,a=e.verticalFill,f=e.fillOpacity,y=e.x,m=e.y,c=e.width,M=e.height,C=e.verticalPoints;if(!i||!a||!a.length)return null;var D=C.map(function(B){return Math.round(B+y-y)}).sort(function(B,F){return B-F});y!==D[0]&&D.unshift(0);var O=D.map(function(B,F){var X=!D[F+1],Z=X?y+c-B:D[F+1]-B;if(Z<=0)return null;var U=F%a.length;return $e.createElement("rect",{key:"react-".concat(F),x:B,y:m,width:Z,height:M,stroke:"none",fill:a[U],fillOpacity:f,className:"recharts-cartesian-grid-bg"})});return $e.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},O)}var NZ=function(t,i){var a=t.xAxis,f=t.width,y=t.height,m=t.offset;return mz(PT(oo(oo(oo({},Mm.defaultProps),a),{},{ticks:Fu(a,!0),viewBox:{x:0,y:0,width:f,height:y}})),m.left,m.left+m.width,i)},LZ=function(t,i){var a=t.yAxis,f=t.width,y=t.height,m=t.offset;return mz(PT(oo(oo(oo({},Mm.defaultProps),a),{},{ticks:Fu(a,!0),viewBox:{x:0,y:0,width:f,height:y}})),m.top,m.top+m.height,i)},Np={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function rD(e){var t,i,a,f,y,m,c=ST(),M=TT(),C=AG(),D=oo(oo({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Np.stroke,fill:(i=e.fill)!==null&&i!==void 0?i:Np.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:Np.horizontal,horizontalFill:(f=e.horizontalFill)!==null&&f!==void 0?f:Np.horizontalFill,vertical:(y=e.vertical)!==null&&y!==void 0?y:Np.vertical,verticalFill:(m=e.verticalFill)!==null&&m!==void 0?m:Np.verticalFill,x:Dt(e.x)?e.x:C.left,y:Dt(e.y)?e.y:C.top,width:Dt(e.width)?e.width:C.width,height:Dt(e.height)?e.height:C.height}),O=D.x,B=D.y,F=D.width,X=D.height,Z=D.syncWithTicks,U=D.horizontalValues,te=D.verticalValues,ae=wG(),ne=SG();if(!Dt(F)||F<=0||!Dt(X)||X<=0||!Dt(O)||O!==+O||!Dt(B)||B!==+B)return null;var ue=D.verticalCoordinatesGenerator||NZ,J=D.horizontalCoordinatesGenerator||LZ,oe=D.horizontalPoints,me=D.verticalPoints;if((!oe||!oe.length)&&Lr(J)){var _e=U&&U.length,ke=J({yAxis:ne?oo(oo({},ne),{},{ticks:_e?U:ne.ticks}):void 0,width:c,height:M,offset:C},_e?!0:Z);Uu(Array.isArray(ke),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Pf(ke),"]")),Array.isArray(ke)&&(oe=ke)}if((!me||!me.length)&&Lr(ue)){var at=te&&te.length,ze=ue({xAxis:ae?oo(oo({},ae),{},{ticks:at?te:ae.ticks}):void 0,width:c,height:M,offset:C},at?!0:Z);Uu(Array.isArray(ze),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Pf(ze),"]")),Array.isArray(ze)&&(me=ze)}return $e.createElement("g",{className:"recharts-cartesian-grid"},$e.createElement(IZ,{fill:D.fill,fillOpacity:D.fillOpacity,x:D.x,y:D.y,width:D.width,height:D.height,ry:D.ry}),$e.createElement(kZ,yf({},D,{offset:C,horizontalPoints:oe,xAxis:ae,yAxis:ne})),$e.createElement(zZ,yf({},D,{offset:C,verticalPoints:me,xAxis:ae,yAxis:ne})),$e.createElement(DZ,yf({},D,{horizontalPoints:oe})),$e.createElement(RZ,yf({},D,{verticalPoints:me})))}rD.displayName="CartesianGrid";var BZ=["type","layout","connectNulls","ref"],FZ=["key"];function hm(e){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hm(e)}function MO(e,t){if(e==null)return{};var i=$Z(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function $Z(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function Ug(){return Ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Ug.apply(this,arguments)}function PO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function _s(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?PO(Object(i),!0).forEach(function(a){nc(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):PO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Lp(e){return GZ(e)||VZ(e)||UZ(e)||qZ()}function qZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UZ(e,t){if(e){if(typeof e=="string")return uS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return uS(e,t)}}function VZ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function GZ(e){if(Array.isArray(e))return uS(e)}function uS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function ZZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EO(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,iD(a.key),a)}}function HZ(e,t,i){return t&&EO(e.prototype,t),i&&EO(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function XZ(e,t,i){return t=R_(t),WZ(e,nD()?Reflect.construct(t,i||[],R_(e).constructor):t.apply(e,i))}function WZ(e,t){if(t&&(hm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YZ(e)}function YZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nD=function(){return!!e})()}function R_(e){return R_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},R_(e)}function KZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hS(e,t)}function hS(e,t){return hS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},hS(e,t)}function nc(e,t,i){return t=iD(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function iD(e){var t=QZ(e,"string");return hm(t)=="symbol"?t:t+""}function QZ(e,t){if(hm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(hm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dm=function(e){function t(){var i;ZZ(this,t);for(var a=arguments.length,f=new Array(a),y=0;y<a;y++)f[y]=arguments[y];return i=XZ(this,t,[].concat(f)),nc(i,"state",{isAnimationFinished:!0,totalLength:0}),nc(i,"generateSimpleStrokeDasharray",function(m,c){return"".concat(c,"px ").concat(m-c,"px")}),nc(i,"getStrokeDasharray",function(m,c,M){var C=M.reduce(function(te,ae){return te+ae});if(!C)return i.generateSimpleStrokeDasharray(c,m);for(var D=Math.floor(m/C),O=m%C,B=c-m,F=[],X=0,Z=0;X<M.length;Z+=M[X],++X)if(Z+M[X]>O){F=[].concat(Lp(M.slice(0,X)),[O-Z]);break}var U=F.length%2===0?[0,B]:[B];return[].concat(Lp(t.repeat(M,D)),Lp(F),U).map(function(te){return"".concat(te,"px")}).join(", ")}),nc(i,"id",Oy("recharts-line-")),nc(i,"pathRef",function(m){i.mainCurve=m}),nc(i,"handleAnimationEnd",function(){i.setState({isAnimationFinished:!0}),i.props.onAnimationEnd&&i.props.onAnimationEnd()}),nc(i,"handleAnimationStart",function(){i.setState({isAnimationFinished:!1}),i.props.onAnimationStart&&i.props.onAnimationStart()}),i}return KZ(t,e),HZ(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,f){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var y=this.props,m=y.points,c=y.xAxis,M=y.yAxis,C=y.layout,D=y.children,O=ol(D,Ny);if(!O)return null;var B=function(Z,U){return{x:Z.x,y:Z.y,value:Z.value,errorVal:Ss(Z.payload,U)}},F={clipPath:a?"url(#clipPath-".concat(f,")"):null};return $e.createElement(ji,F,O.map(function(X){return $e.cloneElement(X,{key:"bar-".concat(X.props.dataKey),data:m,xAxis:c,yAxis:M,layout:C,dataPointFormatter:B})}))}},{key:"renderDots",value:function(a,f,y){var m=this.props.isAnimationActive;if(m&&!this.state.isAnimationFinished)return null;var c=this.props,M=c.dot,C=c.points,D=c.dataKey,O=en(this.props,!1),B=en(M,!0),F=C.map(function(Z,U){var te=_s(_s(_s({key:"dot-".concat(U),r:3},O),B),{},{index:U,cx:Z.x,cy:Z.y,value:Z.value,dataKey:D,payload:Z.payload,points:C});return t.renderDotItem(M,te)}),X={clipPath:a?"url(#clipPath-".concat(f?"":"dots-").concat(y,")"):null};return $e.createElement(ji,Ug({className:"recharts-line-dots",key:"dots"},X),F)}},{key:"renderCurveStatically",value:function(a,f,y,m){var c=this.props,M=c.type,C=c.layout,D=c.connectNulls;c.ref;var O=MO(c,BZ),B=_s(_s(_s({},en(O,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:f?"url(#clipPath-".concat(y,")"):null,points:a},m),{},{type:M,layout:C,connectNulls:D});return $e.createElement(q2,Ug({},B,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,f){var y=this,m=this.props,c=m.points,M=m.strokeDasharray,C=m.isAnimationActive,D=m.animationBegin,O=m.animationDuration,B=m.animationEasing,F=m.animationId,X=m.animateNewValues,Z=m.width,U=m.height,te=this.state,ae=te.prevPoints,ne=te.totalLength;return $e.createElement(Xu,{begin:D,duration:O,isActive:C,easing:B,from:{t:0},to:{t:1},key:"line-".concat(F),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(ue){var J=ue.t;if(ae){var oe=ae.length/c.length,me=c.map(function(Fe,tt){var ut=Math.floor(tt*oe);if(ae[ut]){var rt=ae[ut],Pe=ic(rt.x,Fe.x),Ve=ic(rt.y,Fe.y);return _s(_s({},Fe),{},{x:Pe(J),y:Ve(J)})}if(X){var Ge=ic(Z*2,Fe.x),ht=ic(U/2,Fe.y);return _s(_s({},Fe),{},{x:Ge(J),y:ht(J)})}return _s(_s({},Fe),{},{x:Fe.x,y:Fe.y})});return y.renderCurveStatically(me,a,f)}var _e=ic(0,ne),ke=_e(J),at;if(M){var ze="".concat(M).split(/[,\s]+/gim).map(function(Fe){return parseFloat(Fe)});at=y.getStrokeDasharray(ke,ne,ze)}else at=y.generateSimpleStrokeDasharray(ne,ke);return y.renderCurveStatically(c,a,f,{strokeDasharray:at})})}},{key:"renderCurve",value:function(a,f){var y=this.props,m=y.points,c=y.isAnimationActive,M=this.state,C=M.prevPoints,D=M.totalLength;return c&&m&&m.length&&(!C&&D>0||!l0(C,m))?this.renderCurveWithAnimation(a,f):this.renderCurveStatically(m,a,f)}},{key:"render",value:function(){var a,f=this.props,y=f.hide,m=f.dot,c=f.points,M=f.className,C=f.xAxis,D=f.yAxis,O=f.top,B=f.left,F=f.width,X=f.height,Z=f.isAnimationActive,U=f.id;if(y||!c||!c.length)return null;var te=this.state.isAnimationFinished,ae=c.length===1,ne=sn("recharts-line",M),ue=C&&C.allowDataOverflow,J=D&&D.allowDataOverflow,oe=ue||J,me=Wr(U)?this.id:U,_e=(a=en(m,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},ke=_e.r,at=ke===void 0?3:ke,ze=_e.strokeWidth,Fe=ze===void 0?2:ze,tt=m5(m)?m:{},ut=tt.clipDot,rt=ut===void 0?!0:ut,Pe=at*2+Fe;return $e.createElement(ji,{className:ne},ue||J?$e.createElement("defs",null,$e.createElement("clipPath",{id:"clipPath-".concat(me)},$e.createElement("rect",{x:ue?B:B-F/2,y:J?O:O-X/2,width:ue?F:F*2,height:J?X:X*2})),!rt&&$e.createElement("clipPath",{id:"clipPath-dots-".concat(me)},$e.createElement("rect",{x:B-Pe/2,y:O-Pe/2,width:F+Pe,height:X+Pe}))):null,!ae&&this.renderCurve(oe,me),this.renderErrorBar(oe,me),(ae||m)&&this.renderDots(oe,rt,me),(!Z||te)&&ld.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(a,f){return a.animationId!==f.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:f.curPoints}:a.points!==f.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,f){for(var y=a.length%2!==0?[].concat(Lp(a),[0]):a,m=[],c=0;c<f;++c)m=[].concat(Lp(m),Lp(y));return m}},{key:"renderDotItem",value:function(a,f){var y;if($e.isValidElement(a))y=$e.cloneElement(a,f);else if(Lr(a))y=a(f);else{var m=f.key,c=MO(f,FZ),M=sn("recharts-line-dot",typeof a!="boolean"?a.className:"");y=$e.createElement(_T,Ug({key:m},c,{className:M}))}return y}}])}(pt.PureComponent);nc(dm,"displayName","Line");nc(dm,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!wm.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});nc(dm,"getComposedData",function(e){var t=e.props,i=e.xAxis,a=e.yAxis,f=e.xAxisTicks,y=e.yAxisTicks,m=e.dataKey,c=e.bandSize,M=e.displayedData,C=e.offset,D=t.layout,O=M.map(function(B,F){var X=Ss(B,m);return D==="horizontal"?{x:qC({axis:i,ticks:f,bandSize:c,entry:B,index:F}),y:Wr(X)?null:a.scale(X),value:X,payload:B}:{x:Wr(X)?null:i.scale(X),y:qC({axis:a,ticks:y,bandSize:c,entry:B,index:F}),value:X,payload:B}});return _s({points:O,layout:D},C)});function fm(e){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fm(e)}function JZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eH(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,sD(a.key),a)}}function tH(e,t,i){return t&&eH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rH(e,t,i){return t=N_(t),nH(e,aD()?Reflect.construct(t,i||[],N_(e).constructor):t.apply(e,i))}function nH(e,t){if(t&&(fm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iH(e)}function iH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aD=function(){return!!e})()}function N_(e){return N_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},N_(e)}function aH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dS(e,t)}function dS(e,t){return dS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},dS(e,t)}function oD(e,t,i){return t=sD(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function sD(e){var t=oH(e,"string");return fm(t)=="symbol"?t:t+""}function oH(e,t){if(fm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(fm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function fS(){return fS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},fS.apply(this,arguments)}function sH(e){var t=e.xAxisId,i=ST(),a=TT(),f=Vz(t);return f==null?null:$e.createElement(Mm,fS({},f,{className:sn("recharts-".concat(f.axisType," ").concat(f.axisType),f.className),viewBox:{x:0,y:0,width:i,height:a},ticksGenerator:function(m){return Fu(m,!0)}}))}var v0=function(e){function t(){return JZ(this,t),rH(this,t,arguments)}return aH(t,e),tH(t,[{key:"render",value:function(){return $e.createElement(sH,this.props)}}])}($e.Component);oD(v0,"displayName","XAxis");oD(v0,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function pm(e){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pm(e)}function lH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cH(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,uD(a.key),a)}}function uH(e,t,i){return t&&cH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hH(e,t,i){return t=L_(t),dH(e,lD()?Reflect.construct(t,i||[],L_(e).constructor):t.apply(e,i))}function dH(e,t){if(t&&(pm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fH(e)}function fH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lD=function(){return!!e})()}function L_(e){return L_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},L_(e)}function pH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pS(e,t)}function pS(e,t){return pS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},pS(e,t)}function cD(e,t,i){return t=uD(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function uD(e){var t=mH(e,"string");return pm(t)=="symbol"?t:t+""}function mH(e,t){if(pm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(pm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function mS(){return mS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},mS.apply(this,arguments)}var gH=function(t){var i=t.yAxisId,a=ST(),f=TT(),y=Gz(i);return y==null?null:$e.createElement(Mm,mS({},y,{className:sn("recharts-".concat(y.axisType," ").concat(y.axisType),y.className),viewBox:{x:0,y:0,width:a,height:f},ticksGenerator:function(c){return Fu(c,!0)}}))},Ty=function(e){function t(){return lH(this,t),hH(this,t,arguments)}return pH(t,e),uH(t,[{key:"render",value:function(){return $e.createElement(gH,this.props)}}])}($e.Component);cD(Ty,"displayName","YAxis");cD(Ty,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function CO(e){return bH(e)||_H(e)||vH(e)||yH()}function yH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vH(e,t){if(e){if(typeof e=="string")return gS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return gS(e,t)}}function _H(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bH(e){if(Array.isArray(e))return gS(e)}function gS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var yS=function(t,i,a,f,y){var m=ol(t,MT),c=ol(t,m0),M=[].concat(CO(m),CO(c)),C=ol(t,y0),D="".concat(f,"Id"),O=f[0],B=i;if(M.length&&(B=M.reduce(function(Z,U){if(U.props[D]===a&&Zc(U.props,"extendDomain")&&Dt(U.props[O])){var te=U.props[O];return[Math.min(Z[0],te),Math.max(Z[1],te)]}return Z},B)),C.length){var F="".concat(O,"1"),X="".concat(O,"2");B=C.reduce(function(Z,U){if(U.props[D]===a&&Zc(U.props,"extendDomain")&&Dt(U.props[F])&&Dt(U.props[X])){var te=U.props[F],ae=U.props[X];return[Math.min(Z[0],te,ae),Math.max(Z[1],te,ae)]}return Z},B)}return y&&y.length&&(B=y.reduce(function(Z,U){return Dt(U)?[Math.min(Z[0],U),Math.max(Z[1],U)]:Z},B)),B},Uw={exports:{}},jO;function xH(){return jO||(jO=1,function(e){var t=Object.prototype.hasOwnProperty,i="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(i=!1));function f(M,C,D){this.fn=M,this.context=C,this.once=D||!1}function y(M,C,D,O,B){if(typeof D!="function")throw new TypeError("The listener must be a function");var F=new f(D,O||M,B),X=i?i+C:C;return M._events[X]?M._events[X].fn?M._events[X]=[M._events[X],F]:M._events[X].push(F):(M._events[X]=F,M._eventsCount++),M}function m(M,C){--M._eventsCount===0?M._events=new a:delete M._events[C]}function c(){this._events=new a,this._eventsCount=0}c.prototype.eventNames=function(){var C=[],D,O;if(this._eventsCount===0)return C;for(O in D=this._events)t.call(D,O)&&C.push(i?O.slice(1):O);return Object.getOwnPropertySymbols?C.concat(Object.getOwnPropertySymbols(D)):C},c.prototype.listeners=function(C){var D=i?i+C:C,O=this._events[D];if(!O)return[];if(O.fn)return[O.fn];for(var B=0,F=O.length,X=new Array(F);B<F;B++)X[B]=O[B].fn;return X},c.prototype.listenerCount=function(C){var D=i?i+C:C,O=this._events[D];return O?O.fn?1:O.length:0},c.prototype.emit=function(C,D,O,B,F,X){var Z=i?i+C:C;if(!this._events[Z])return!1;var U=this._events[Z],te=arguments.length,ae,ne;if(U.fn){switch(U.once&&this.removeListener(C,U.fn,void 0,!0),te){case 1:return U.fn.call(U.context),!0;case 2:return U.fn.call(U.context,D),!0;case 3:return U.fn.call(U.context,D,O),!0;case 4:return U.fn.call(U.context,D,O,B),!0;case 5:return U.fn.call(U.context,D,O,B,F),!0;case 6:return U.fn.call(U.context,D,O,B,F,X),!0}for(ne=1,ae=new Array(te-1);ne<te;ne++)ae[ne-1]=arguments[ne];U.fn.apply(U.context,ae)}else{var ue=U.length,J;for(ne=0;ne<ue;ne++)switch(U[ne].once&&this.removeListener(C,U[ne].fn,void 0,!0),te){case 1:U[ne].fn.call(U[ne].context);break;case 2:U[ne].fn.call(U[ne].context,D);break;case 3:U[ne].fn.call(U[ne].context,D,O);break;case 4:U[ne].fn.call(U[ne].context,D,O,B);break;default:if(!ae)for(J=1,ae=new Array(te-1);J<te;J++)ae[J-1]=arguments[J];U[ne].fn.apply(U[ne].context,ae)}}return!0},c.prototype.on=function(C,D,O){return y(this,C,D,O,!1)},c.prototype.once=function(C,D,O){return y(this,C,D,O,!0)},c.prototype.removeListener=function(C,D,O,B){var F=i?i+C:C;if(!this._events[F])return this;if(!D)return m(this,F),this;var X=this._events[F];if(X.fn)X.fn===D&&(!B||X.once)&&(!O||X.context===O)&&m(this,F);else{for(var Z=0,U=[],te=X.length;Z<te;Z++)(X[Z].fn!==D||B&&!X[Z].once||O&&X[Z].context!==O)&&U.push(X[Z]);U.length?this._events[F]=U.length===1?U[0]:U:m(this,F)}return this},c.prototype.removeAllListeners=function(C){var D;return C?(D=i?i+C:C,this._events[D]&&m(this,D)):(this._events=new a,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,e.exports=c}(Uw)),Uw.exports}var wH=xH();const SH=kn(wH);var Vw=new SH,Gw="recharts.syncMouseEvents";function Ay(e){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ay(e)}function TH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AH(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,hD(a.key),a)}}function MH(e,t,i){return t&&AH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zw(e,t,i){return t=hD(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function hD(e){var t=PH(e,"string");return Ay(t)=="symbol"?t:t+""}function PH(e,t){if(Ay(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Ay(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var EH=function(){function e(){TH(this,e),Zw(this,"activeIndex",0),Zw(this,"coordinateList",[]),Zw(this,"layout","horizontal")}return MH(e,[{key:"setDetails",value:function(i){var a,f=i.coordinateList,y=f===void 0?null:f,m=i.container,c=m===void 0?null:m,M=i.layout,C=M===void 0?null:M,D=i.offset,O=D===void 0?null:D,B=i.mouseHandlerCallback,F=B===void 0?null:B;this.coordinateList=(a=y??this.coordinateList)!==null&&a!==void 0?a:[],this.container=c??this.container,this.layout=C??this.layout,this.offset=O??this.offset,this.mouseHandlerCallback=F??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(i){if(this.coordinateList.length!==0)switch(i.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(i){this.activeIndex=i}},{key:"spoofMouse",value:function(){var i,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var f=this.container.getBoundingClientRect(),y=f.x,m=f.y,c=f.height,M=this.coordinateList[this.activeIndex].coordinate,C=((i=window)===null||i===void 0?void 0:i.scrollX)||0,D=((a=window)===null||a===void 0?void 0:a.scrollY)||0,O=y+M+C,B=m+this.offset.top+c/2+D;this.mouseHandlerCallback({pageX:O,pageY:B})}}}])}();function CH(e,t,i){if(i==="number"&&t===!0&&Array.isArray(e)){var a=e==null?void 0:e[0],f=e==null?void 0:e[1];if(a&&f&&Dt(a)&&Dt(f))return!0}return!1}function jH(e,t,i,a){var f=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-f:i.left+.5,y:e==="horizontal"?i.top+.5:t.y-f,width:e==="horizontal"?a:i.width-1,height:e==="horizontal"?i.height-1:a}}function dD(e){var t=e.cx,i=e.cy,a=e.radius,f=e.startAngle,y=e.endAngle,m=La(t,i,a,f),c=La(t,i,a,y);return{points:[m,c],cx:t,cy:i,radius:a,startAngle:f,endAngle:y}}function OH(e,t,i){var a,f,y,m;if(e==="horizontal")a=t.x,y=a,f=i.top,m=i.top+i.height;else if(e==="vertical")f=t.y,m=f,a=i.left,y=i.left+i.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var c=t.cx,M=t.cy,C=t.innerRadius,D=t.outerRadius,O=t.angle,B=La(c,M,C,O),F=La(c,M,D,O);a=B.x,f=B.y,y=F.x,m=F.y}else return dD(t);return[{x:a,y:f},{x:y,y:m}]}function My(e){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},My(e)}function OO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function Bv(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?OO(Object(i),!0).forEach(function(a){IH(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):OO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function IH(e,t,i){return t=kH(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function kH(e){var t=zH(e,"string");return My(t)=="symbol"?t:t+""}function zH(e,t){if(My(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(My(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DH(e){var t,i,a=e.element,f=e.tooltipEventType,y=e.isActive,m=e.activeCoordinate,c=e.activePayload,M=e.offset,C=e.activeTooltipIndex,D=e.tooltipAxisBandSize,O=e.layout,B=e.chartName,F=(t=a.props.cursor)!==null&&t!==void 0?t:(i=a.type.defaultProps)===null||i===void 0?void 0:i.cursor;if(!a||!F||!y||!m||B!=="ScatterChart"&&f!=="axis")return null;var X,Z=q2;if(B==="ScatterChart")X=m,Z=I7;else if(B==="BarChart")X=jH(O,m,M,D),Z=vT;else if(O==="radial"){var U=dD(m),te=U.cx,ae=U.cy,ne=U.radius,ue=U.startAngle,J=U.endAngle;X={cx:te,cy:ae,startAngle:ue,endAngle:J,innerRadius:ne,outerRadius:ne},Z=bz}else X={points:OH(O,m,M)},Z=q2;var oe=Bv(Bv(Bv(Bv({stroke:"#ccc",pointerEvents:"none"},M),X),en(F,!1)),{},{payload:c,payloadIndex:C,className:sn("recharts-tooltip-cursor",F.className)});return pt.isValidElement(F)?pt.cloneElement(F,oe):pt.createElement(Z,oe)}var RH=["item"],NH=["children","className","width","height","style","compact","title","desc"];function mm(e){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mm(e)}function Up(){return Up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Up.apply(this,arguments)}function IO(e,t){return FH(e)||BH(e,t)||pD(e,t)||LH()}function LH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BH(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,y,m,c=[],M=!0,C=!1;try{if(y=(i=i.call(e)).next,t!==0)for(;!(M=(a=y.call(i)).done)&&(c.push(a.value),c.length!==t);M=!0);}catch(D){C=!0,f=D}finally{try{if(!M&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(C)throw f}}return c}}function FH(e){if(Array.isArray(e))return e}function kO(e,t){if(e==null)return{};var i=$H(e,t),a,f;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(f=0;f<y.length;f++)a=y[f],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function $H(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function qH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UH(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,mD(a.key),a)}}function VH(e,t,i){return t&&UH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function GH(e,t,i){return t=B_(t),ZH(e,fD()?Reflect.construct(t,i||[],B_(e).constructor):t.apply(e,i))}function ZH(e,t){if(t&&(mm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HH(e)}function HH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fD=function(){return!!e})()}function B_(e){return B_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},B_(e)}function XH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vS(e,t)}function vS(e,t){return vS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,f){return a.__proto__=f,a},vS(e,t)}function gm(e){return KH(e)||YH(e)||pD(e)||WH()}function WH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pD(e,t){if(e){if(typeof e=="string")return _S(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _S(e,t)}}function YH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KH(e){if(Array.isArray(e))return _S(e)}function _S(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function zO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function vt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(i),!0).forEach(function(a){pr(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):zO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function pr(e,t,i){return t=mD(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function mD(e){var t=QH(e,"string");return mm(t)=="symbol"?t:t+""}function QH(e,t){if(mm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(mm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JH={xAxis:["bottom","top"],yAxis:["left","right"]},eX={width:"100%",height:"100%"},gD={x:0,y:0};function Fv(e){return e}var tX=function(t,i){return i==="horizontal"?t.x:i==="vertical"?t.y:i==="centric"?t.angle:t.radius},rX=function(t,i,a,f){var y=i.find(function(D){return D&&D.index===a});if(y){if(t==="horizontal")return{x:y.coordinate,y:f.y};if(t==="vertical")return{x:f.x,y:y.coordinate};if(t==="centric"){var m=y.coordinate,c=f.radius;return vt(vt(vt({},f),La(f.cx,f.cy,c,m)),{},{angle:m,radius:c})}var M=y.coordinate,C=f.angle;return vt(vt(vt({},f),La(f.cx,f.cy,M,C)),{},{angle:C,radius:M})}return gD},_0=function(t,i){var a=i.graphicalItems,f=i.dataStartIndex,y=i.dataEndIndex,m=(a??[]).reduce(function(c,M){var C=M.props.data;return C&&C.length?[].concat(gm(c),gm(C)):c},[]);return m.length>0?m:t&&t.length&&Dt(f)&&Dt(y)?t.slice(f,y+1):[]};function yD(e){return e==="number"?[0,"auto"]:void 0}var bS=function(t,i,a,f){var y=t.graphicalItems,m=t.tooltipAxis,c=_0(i,t);return a<0||!y||!y.length||a>=c.length?null:y.reduce(function(M,C){var D,O=(D=C.props.data)!==null&&D!==void 0?D:i;O&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(O=O.slice(t.dataStartIndex,t.dataEndIndex+1));var B;if(m.dataKey&&!m.allowDuplicatedCategory){var F=O===void 0?c:O;B=Vv(F,m.dataKey,f)}else B=O&&O[a]||c[a];return B?[].concat(gm(M),[yz(C,B)]):M},[])},DO=function(t,i,a,f){var y=f||{x:t.chartX,y:t.chartY},m=tX(y,a),c=t.orderedTooltipTicks,M=t.tooltipAxis,C=t.tooltipTicks,D=mq(m,c,C,M);if(D>=0&&C){var O=C[D]&&C[D].value,B=bS(t,i,D,O),F=rX(a,c,D,y);return{activeTooltipIndex:D,activeLabel:O,activePayload:B,activeCoordinate:F}}return null},nX=function(t,i){var a=i.axes,f=i.graphicalItems,y=i.axisType,m=i.axisIdKey,c=i.stackGroups,M=i.dataStartIndex,C=i.dataEndIndex,D=t.layout,O=t.children,B=t.stackOffset,F=pz(D,y);return a.reduce(function(X,Z){var U,te=Z.type.defaultProps!==void 0?vt(vt({},Z.type.defaultProps),Z.props):Z.props,ae=te.type,ne=te.dataKey,ue=te.allowDataOverflow,J=te.allowDuplicatedCategory,oe=te.scale,me=te.ticks,_e=te.includeHidden,ke=te[m];if(X[ke])return X;var at=_0(t.data,{graphicalItems:f.filter(function(ot){var st,Pt=m in ot.props?ot.props[m]:(st=ot.type.defaultProps)===null||st===void 0?void 0:st[m];return Pt===ke}),dataStartIndex:M,dataEndIndex:C}),ze=at.length,Fe,tt,ut;CH(te.domain,ue,ae)&&(Fe=N2(te.domain,null,ue),F&&(ae==="number"||oe!=="auto")&&(ut=$g(at,ne,"category")));var rt=yD(ae);if(!Fe||Fe.length===0){var Pe,Ve=(Pe=te.domain)!==null&&Pe!==void 0?Pe:rt;if(ne){if(Fe=$g(at,ne,ae),ae==="category"&&F){var Ge=a5(Fe);J&&Ge?(tt=Fe,Fe=M_(0,ze)):J||(Fe=ZC(Ve,Fe,Z).reduce(function(ot,st){return ot.indexOf(st)>=0?ot:[].concat(gm(ot),[st])},[]))}else if(ae==="category")J?Fe=Fe.filter(function(ot){return ot!==""&&!Wr(ot)}):Fe=ZC(Ve,Fe,Z).reduce(function(ot,st){return ot.indexOf(st)>=0||st===""||Wr(st)?ot:[].concat(gm(ot),[st])},[]);else if(ae==="number"){var ht=bq(at,f.filter(function(ot){var st,Pt,Vt=m in ot.props?ot.props[m]:(st=ot.type.defaultProps)===null||st===void 0?void 0:st[m],Rt="hide"in ot.props?ot.props.hide:(Pt=ot.type.defaultProps)===null||Pt===void 0?void 0:Pt.hide;return Vt===ke&&(_e||!Rt)}),ne,y,D);ht&&(Fe=ht)}F&&(ae==="number"||oe!=="auto")&&(ut=$g(at,ne,"category"))}else F?Fe=M_(0,ze):c&&c[ke]&&c[ke].hasStack&&ae==="number"?Fe=B==="expand"?[0,1]:gz(c[ke].stackGroups,M,C):Fe=fz(at,f.filter(function(ot){var st=m in ot.props?ot.props[m]:ot.type.defaultProps[m],Pt="hide"in ot.props?ot.props.hide:ot.type.defaultProps.hide;return st===ke&&(_e||!Pt)}),ae,D,!0);if(ae==="number")Fe=yS(O,Fe,ke,y,me),Ve&&(Fe=N2(Ve,Fe,ue));else if(ae==="category"&&Ve){var be=Ve,Xe=Fe.every(function(ot){return be.indexOf(ot)>=0});Xe&&(Fe=be)}}return vt(vt({},X),{},pr({},ke,vt(vt({},te),{},{axisType:y,domain:Fe,categoricalDomain:ut,duplicateDomain:tt,originalDomain:(U=te.domain)!==null&&U!==void 0?U:rt,isCategorical:F,layout:D})))},{})},iX=function(t,i){var a=i.graphicalItems,f=i.Axis,y=i.axisType,m=i.axisIdKey,c=i.stackGroups,M=i.dataStartIndex,C=i.dataEndIndex,D=t.layout,O=t.children,B=_0(t.data,{graphicalItems:a,dataStartIndex:M,dataEndIndex:C}),F=B.length,X=pz(D,y),Z=-1;return a.reduce(function(U,te){var ae=te.type.defaultProps!==void 0?vt(vt({},te.type.defaultProps),te.props):te.props,ne=ae[m],ue=yD("number");if(!U[ne]){Z++;var J;return X?J=M_(0,F):c&&c[ne]&&c[ne].hasStack?(J=gz(c[ne].stackGroups,M,C),J=yS(O,J,ne,y)):(J=N2(ue,fz(B,a.filter(function(oe){var me,_e,ke=m in oe.props?oe.props[m]:(me=oe.type.defaultProps)===null||me===void 0?void 0:me[m],at="hide"in oe.props?oe.props.hide:(_e=oe.type.defaultProps)===null||_e===void 0?void 0:_e.hide;return ke===ne&&!at}),"number",D),f.defaultProps.allowDataOverflow),J=yS(O,J,ne,y)),vt(vt({},U),{},pr({},ne,vt(vt({axisType:y},f.defaultProps),{},{hide:!0,orientation:al(JH,"".concat(y,".").concat(Z%2),null),domain:J,originalDomain:ue,isCategorical:X,layout:D})))}return U},{})},aX=function(t,i){var a=i.axisType,f=a===void 0?"xAxis":a,y=i.AxisComp,m=i.graphicalItems,c=i.stackGroups,M=i.dataStartIndex,C=i.dataEndIndex,D=t.children,O="".concat(f,"Id"),B=ol(D,y),F={};return B&&B.length?F=nX(t,{axes:B,graphicalItems:m,axisType:f,axisIdKey:O,stackGroups:c,dataStartIndex:M,dataEndIndex:C}):m&&m.length&&(F=iX(t,{Axis:y,graphicalItems:m,axisType:f,axisIdKey:O,stackGroups:c,dataStartIndex:M,dataEndIndex:C})),F},oX=function(t){var i=nd(t),a=Fu(i,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:GS(a,function(f){return f.coordinate}),tooltipAxis:i,tooltipAxisBandSize:y_(i,a)}},RO=function(t){var i=t.children,a=t.defaultShowTooltip,f=xs(i,am),y=0,m=0;return t.data&&t.data.length!==0&&(m=t.data.length-1),f&&f.props&&(f.props.startIndex>=0&&(y=f.props.startIndex),f.props.endIndex>=0&&(m=f.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:y,dataEndIndex:m,activeTooltipIndex:-1,isTooltipActive:!!a}},sX=function(t){return!t||!t.length?!1:t.some(function(i){var a=qu(i&&i.type);return a&&a.indexOf("Bar")>=0})},NO=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},lX=function(t,i){var a=t.props,f=t.graphicalItems,y=t.xAxisMap,m=y===void 0?{}:y,c=t.yAxisMap,M=c===void 0?{}:c,C=a.width,D=a.height,O=a.children,B=a.margin||{},F=xs(O,am),X=xs(O,bf),Z=Object.keys(M).reduce(function(J,oe){var me=M[oe],_e=me.orientation;return!me.mirror&&!me.hide?vt(vt({},J),{},pr({},_e,J[_e]+me.width)):J},{left:B.left||0,right:B.right||0}),U=Object.keys(m).reduce(function(J,oe){var me=m[oe],_e=me.orientation;return!me.mirror&&!me.hide?vt(vt({},J),{},pr({},_e,al(J,"".concat(_e))+me.height)):J},{top:B.top||0,bottom:B.bottom||0}),te=vt(vt({},U),Z),ae=te.bottom;F&&(te.bottom+=F.props.height||am.defaultProps.height),X&&i&&(te=vq(te,f,a,i));var ne=C-te.left-te.right,ue=D-te.top-te.bottom;return vt(vt({brushBottom:ae},te),{},{width:Math.max(ne,0),height:Math.max(ue,0)})},cX=function(t,i){if(i==="xAxis")return t[i].width;if(i==="yAxis")return t[i].height},uX=function(t){var i=t.chartName,a=t.GraphicalChild,f=t.defaultTooltipEventType,y=f===void 0?"axis":f,m=t.validateTooltipEventTypes,c=m===void 0?["axis"]:m,M=t.axisComponents,C=t.legendContent,D=t.formatAxisMap,O=t.defaultProps,B=function(te,ae){var ne=ae.graphicalItems,ue=ae.stackGroups,J=ae.offset,oe=ae.updateId,me=ae.dataStartIndex,_e=ae.dataEndIndex,ke=te.barSize,at=te.layout,ze=te.barGap,Fe=te.barCategoryGap,tt=te.maxBarSize,ut=NO(at),rt=ut.numericAxisName,Pe=ut.cateAxisName,Ve=sX(ne),Ge=[];return ne.forEach(function(ht,be){var Xe=_0(te.data,{graphicalItems:[ht],dataStartIndex:me,dataEndIndex:_e}),ot=ht.type.defaultProps!==void 0?vt(vt({},ht.type.defaultProps),ht.props):ht.props,st=ot.dataKey,Pt=ot.maxBarSize,Vt=ot["".concat(rt,"Id")],Rt=ot["".concat(Pe,"Id")],mr={},nr=M.reduce(function(Ii,ki){var Wi=ae["".concat(ki.axisType,"Map")],Mo=ot["".concat(ki.axisType,"Id")];Wi&&Wi[Mo]||ki.axisType==="zAxis"||Mf();var Ts=Wi[Mo];return vt(vt({},Ii),{},pr(pr({},ki.axisType,Ts),"".concat(ki.axisType,"Ticks"),Fu(Ts)))},mr),Ot=nr[Pe],er=nr["".concat(Pe,"Ticks")],ir=ue&&ue[Vt]&&ue[Vt].hasStack&&Iq(ht,ue[Vt].stackGroups),_t=qu(ht.type).indexOf("Bar")>=0,hr=y_(Ot,er),Qt=[],Yr=Ve&&gq({barSize:ke,stackGroups:ue,totalSize:cX(nr,Pe)});if(_t){var tn,Kr,Oi=Wr(Pt)?tt:Pt,Xn=(tn=(Kr=y_(Ot,er,!0))!==null&&Kr!==void 0?Kr:Oi)!==null&&tn!==void 0?tn:0;Qt=yq({barGap:ze,barCategoryGap:Fe,bandSize:Xn!==hr?Xn:hr,sizeList:Yr[Rt],maxBarSize:Oi}),Xn!==hr&&(Qt=Qt.map(function(Ii){return vt(vt({},Ii),{},{position:vt(vt({},Ii.position),{},{offset:Ii.position.offset-Xn/2})})}))}var Ba=ht&&ht.type&&ht.type.getComposedData;Ba&&Ge.push({props:vt(vt({},Ba(vt(vt({},nr),{},{displayedData:Xe,props:te,dataKey:st,item:ht,bandSize:hr,barPosition:Qt,offset:J,stackedData:ir,layout:at,dataStartIndex:me,dataEndIndex:_e}))),{},pr(pr(pr({key:ht.key||"item-".concat(be)},rt,nr[rt]),Pe,nr[Pe]),"animationId",oe)),childIndex:v5(ht,te.children),item:ht})}),Ge},F=function(te,ae){var ne=te.props,ue=te.dataStartIndex,J=te.dataEndIndex,oe=te.updateId;if(!oM({props:ne}))return null;var me=ne.children,_e=ne.layout,ke=ne.stackOffset,at=ne.data,ze=ne.reverseStackOrder,Fe=NO(_e),tt=Fe.numericAxisName,ut=Fe.cateAxisName,rt=ol(me,a),Pe=Cq(at,rt,"".concat(tt,"Id"),"".concat(ut,"Id"),ke,ze),Ve=M.reduce(function(ot,st){var Pt="".concat(st.axisType,"Map");return vt(vt({},ot),{},pr({},Pt,aX(ne,vt(vt({},st),{},{graphicalItems:rt,stackGroups:st.axisType===tt&&Pe,dataStartIndex:ue,dataEndIndex:J}))))},{}),Ge=lX(vt(vt({},Ve),{},{props:ne,graphicalItems:rt}),ae==null?void 0:ae.legendBBox);Object.keys(Ve).forEach(function(ot){Ve[ot]=D(ne,Ve[ot],Ge,ot.replace("Map",""),i)});var ht=Ve["".concat(ut,"Map")],be=oX(ht),Xe=B(ne,vt(vt({},Ve),{},{dataStartIndex:ue,dataEndIndex:J,updateId:oe,graphicalItems:rt,stackGroups:Pe,offset:Ge}));return vt(vt({formattedGraphicalItems:Xe,graphicalItems:rt,offset:Ge,stackGroups:Pe},be),Ve)},X=function(U){function te(ae){var ne,ue,J;return qH(this,te),J=GH(this,te,[ae]),pr(J,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),pr(J,"accessibilityManager",new EH),pr(J,"handleLegendBBoxUpdate",function(oe){if(oe){var me=J.state,_e=me.dataStartIndex,ke=me.dataEndIndex,at=me.updateId;J.setState(vt({legendBBox:oe},F({props:J.props,dataStartIndex:_e,dataEndIndex:ke,updateId:at},vt(vt({},J.state),{},{legendBBox:oe}))))}}),pr(J,"handleReceiveSyncEvent",function(oe,me,_e){if(J.props.syncId===oe){if(_e===J.eventEmitterSymbol&&typeof J.props.syncMethod!="function")return;J.applySyncEvent(me)}}),pr(J,"handleBrushChange",function(oe){var me=oe.startIndex,_e=oe.endIndex;if(me!==J.state.dataStartIndex||_e!==J.state.dataEndIndex){var ke=J.state.updateId;J.setState(function(){return vt({dataStartIndex:me,dataEndIndex:_e},F({props:J.props,dataStartIndex:me,dataEndIndex:_e,updateId:ke},J.state))}),J.triggerSyncEvent({dataStartIndex:me,dataEndIndex:_e})}}),pr(J,"handleMouseEnter",function(oe){var me=J.getMouseInfo(oe);if(me){var _e=vt(vt({},me),{},{isTooltipActive:!0});J.setState(_e),J.triggerSyncEvent(_e);var ke=J.props.onMouseEnter;Lr(ke)&&ke(_e,oe)}}),pr(J,"triggeredAfterMouseMove",function(oe){var me=J.getMouseInfo(oe),_e=me?vt(vt({},me),{},{isTooltipActive:!0}):{isTooltipActive:!1};J.setState(_e),J.triggerSyncEvent(_e);var ke=J.props.onMouseMove;Lr(ke)&&ke(_e,oe)}),pr(J,"handleItemMouseEnter",function(oe){J.setState(function(){return{isTooltipActive:!0,activeItem:oe,activePayload:oe.tooltipPayload,activeCoordinate:oe.tooltipPosition||{x:oe.cx,y:oe.cy}}})}),pr(J,"handleItemMouseLeave",function(){J.setState(function(){return{isTooltipActive:!1}})}),pr(J,"handleMouseMove",function(oe){oe.persist(),J.throttleTriggeredAfterMouseMove(oe)}),pr(J,"handleMouseLeave",function(oe){J.throttleTriggeredAfterMouseMove.cancel();var me={isTooltipActive:!1};J.setState(me),J.triggerSyncEvent(me);var _e=J.props.onMouseLeave;Lr(_e)&&_e(me,oe)}),pr(J,"handleOuterEvent",function(oe){var me=y5(oe),_e=al(J.props,"".concat(me));if(me&&Lr(_e)){var ke,at;/.*touch.*/i.test(me)?at=J.getMouseInfo(oe.changedTouches[0]):at=J.getMouseInfo(oe),_e((ke=at)!==null&&ke!==void 0?ke:{},oe)}}),pr(J,"handleClick",function(oe){var me=J.getMouseInfo(oe);if(me){var _e=vt(vt({},me),{},{isTooltipActive:!0});J.setState(_e),J.triggerSyncEvent(_e);var ke=J.props.onClick;Lr(ke)&&ke(_e,oe)}}),pr(J,"handleMouseDown",function(oe){var me=J.props.onMouseDown;if(Lr(me)){var _e=J.getMouseInfo(oe);me(_e,oe)}}),pr(J,"handleMouseUp",function(oe){var me=J.props.onMouseUp;if(Lr(me)){var _e=J.getMouseInfo(oe);me(_e,oe)}}),pr(J,"handleTouchMove",function(oe){oe.changedTouches!=null&&oe.changedTouches.length>0&&J.throttleTriggeredAfterMouseMove(oe.changedTouches[0])}),pr(J,"handleTouchStart",function(oe){oe.changedTouches!=null&&oe.changedTouches.length>0&&J.handleMouseDown(oe.changedTouches[0])}),pr(J,"handleTouchEnd",function(oe){oe.changedTouches!=null&&oe.changedTouches.length>0&&J.handleMouseUp(oe.changedTouches[0])}),pr(J,"handleDoubleClick",function(oe){var me=J.props.onDoubleClick;if(Lr(me)){var _e=J.getMouseInfo(oe);me(_e,oe)}}),pr(J,"handleContextMenu",function(oe){var me=J.props.onContextMenu;if(Lr(me)){var _e=J.getMouseInfo(oe);me(_e,oe)}}),pr(J,"triggerSyncEvent",function(oe){J.props.syncId!==void 0&&Vw.emit(Gw,J.props.syncId,oe,J.eventEmitterSymbol)}),pr(J,"applySyncEvent",function(oe){var me=J.props,_e=me.layout,ke=me.syncMethod,at=J.state.updateId,ze=oe.dataStartIndex,Fe=oe.dataEndIndex;if(oe.dataStartIndex!==void 0||oe.dataEndIndex!==void 0)J.setState(vt({dataStartIndex:ze,dataEndIndex:Fe},F({props:J.props,dataStartIndex:ze,dataEndIndex:Fe,updateId:at},J.state)));else if(oe.activeTooltipIndex!==void 0){var tt=oe.chartX,ut=oe.chartY,rt=oe.activeTooltipIndex,Pe=J.state,Ve=Pe.offset,Ge=Pe.tooltipTicks;if(!Ve)return;if(typeof ke=="function")rt=ke(Ge,oe);else if(ke==="value"){rt=-1;for(var ht=0;ht<Ge.length;ht++)if(Ge[ht].value===oe.activeLabel){rt=ht;break}}var be=vt(vt({},Ve),{},{x:Ve.left,y:Ve.top}),Xe=Math.min(tt,be.x+be.width),ot=Math.min(ut,be.y+be.height),st=Ge[rt]&&Ge[rt].value,Pt=bS(J.state,J.props.data,rt),Vt=Ge[rt]?{x:_e==="horizontal"?Ge[rt].coordinate:Xe,y:_e==="horizontal"?ot:Ge[rt].coordinate}:gD;J.setState(vt(vt({},oe),{},{activeLabel:st,activeCoordinate:Vt,activePayload:Pt,activeTooltipIndex:rt}))}else J.setState(oe)}),pr(J,"renderCursor",function(oe){var me,_e=J.state,ke=_e.isTooltipActive,at=_e.activeCoordinate,ze=_e.activePayload,Fe=_e.offset,tt=_e.activeTooltipIndex,ut=_e.tooltipAxisBandSize,rt=J.getTooltipEventType(),Pe=(me=oe.props.active)!==null&&me!==void 0?me:ke,Ve=J.props.layout,Ge=oe.key||"_recharts-cursor";return $e.createElement(DH,{key:Ge,activeCoordinate:at,activePayload:ze,activeTooltipIndex:tt,chartName:i,element:oe,isActive:Pe,layout:Ve,offset:Fe,tooltipAxisBandSize:ut,tooltipEventType:rt})}),pr(J,"renderPolarAxis",function(oe,me,_e){var ke=al(oe,"type.axisType"),at=al(J.state,"".concat(ke,"Map")),ze=oe.type.defaultProps,Fe=ze!==void 0?vt(vt({},ze),oe.props):oe.props,tt=at&&at[Fe["".concat(ke,"Id")]];return pt.cloneElement(oe,vt(vt({},tt),{},{className:sn(ke,tt.className),key:oe.key||"".concat(me,"-").concat(_e),ticks:Fu(tt,!0)}))}),pr(J,"renderPolarGrid",function(oe){var me=oe.props,_e=me.radialLines,ke=me.polarAngles,at=me.polarRadius,ze=J.state,Fe=ze.radiusAxisMap,tt=ze.angleAxisMap,ut=nd(Fe),rt=nd(tt),Pe=rt.cx,Ve=rt.cy,Ge=rt.innerRadius,ht=rt.outerRadius;return pt.cloneElement(oe,{polarAngles:Array.isArray(ke)?ke:Fu(rt,!0).map(function(be){return be.coordinate}),polarRadius:Array.isArray(at)?at:Fu(ut,!0).map(function(be){return be.coordinate}),cx:Pe,cy:Ve,innerRadius:Ge,outerRadius:ht,key:oe.key||"polar-grid",radialLines:_e})}),pr(J,"renderLegend",function(){var oe=J.state.formattedGraphicalItems,me=J.props,_e=me.children,ke=me.width,at=me.height,ze=J.props.margin||{},Fe=ke-(ze.left||0)-(ze.right||0),tt=hz({children:_e,formattedGraphicalItems:oe,legendWidth:Fe,legendContent:C});if(!tt)return null;var ut=tt.item,rt=kO(tt,RH);return pt.cloneElement(ut,vt(vt({},rt),{},{chartWidth:ke,chartHeight:at,margin:ze,onBBoxUpdate:J.handleLegendBBoxUpdate}))}),pr(J,"renderTooltip",function(){var oe,me=J.props,_e=me.children,ke=me.accessibilityLayer,at=xs(_e,Uc);if(!at)return null;var ze=J.state,Fe=ze.isTooltipActive,tt=ze.activeCoordinate,ut=ze.activePayload,rt=ze.activeLabel,Pe=ze.offset,Ve=(oe=at.props.active)!==null&&oe!==void 0?oe:Fe;return pt.cloneElement(at,{viewBox:vt(vt({},Pe),{},{x:Pe.left,y:Pe.top}),active:Ve,label:rt,payload:Ve?ut:[],coordinate:tt,accessibilityLayer:ke})}),pr(J,"renderBrush",function(oe){var me=J.props,_e=me.margin,ke=me.data,at=J.state,ze=at.offset,Fe=at.dataStartIndex,tt=at.dataEndIndex,ut=at.updateId;return pt.cloneElement(oe,{key:oe.key||"_recharts-brush",onChange:Dv(J.handleBrushChange,oe.props.onChange),data:ke,x:Dt(oe.props.x)?oe.props.x:ze.left,y:Dt(oe.props.y)?oe.props.y:ze.top+ze.height+ze.brushBottom-(_e.bottom||0),width:Dt(oe.props.width)?oe.props.width:ze.width,startIndex:Fe,endIndex:tt,updateId:"brush-".concat(ut)})}),pr(J,"renderReferenceElement",function(oe,me,_e){if(!oe)return null;var ke=J,at=ke.clipPathId,ze=J.state,Fe=ze.xAxisMap,tt=ze.yAxisMap,ut=ze.offset,rt=oe.type.defaultProps||{},Pe=oe.props,Ve=Pe.xAxisId,Ge=Ve===void 0?rt.xAxisId:Ve,ht=Pe.yAxisId,be=ht===void 0?rt.yAxisId:ht;return pt.cloneElement(oe,{key:oe.key||"".concat(me,"-").concat(_e),xAxis:Fe[Ge],yAxis:tt[be],viewBox:{x:ut.left,y:ut.top,width:ut.width,height:ut.height},clipPathId:at})}),pr(J,"renderActivePoints",function(oe){var me=oe.item,_e=oe.activePoint,ke=oe.basePoint,at=oe.childIndex,ze=oe.isRange,Fe=[],tt=me.props.key,ut=me.item.type.defaultProps!==void 0?vt(vt({},me.item.type.defaultProps),me.item.props):me.item.props,rt=ut.activeDot,Pe=ut.dataKey,Ve=vt(vt({index:at,dataKey:Pe,cx:_e.x,cy:_e.y,r:4,fill:yT(me.item),strokeWidth:2,stroke:"#fff",payload:_e.payload,value:_e.value},en(rt,!1)),Gv(rt));return Fe.push(te.renderActiveDot(rt,Ve,"".concat(tt,"-activePoint-").concat(at))),ke?Fe.push(te.renderActiveDot(rt,vt(vt({},Ve),{},{cx:ke.x,cy:ke.y}),"".concat(tt,"-basePoint-").concat(at))):ze&&Fe.push(null),Fe}),pr(J,"renderGraphicChild",function(oe,me,_e){var ke=J.filterFormatItem(oe,me,_e);if(!ke)return null;var at=J.getTooltipEventType(),ze=J.state,Fe=ze.isTooltipActive,tt=ze.tooltipAxis,ut=ze.activeTooltipIndex,rt=ze.activeLabel,Pe=J.props.children,Ve=xs(Pe,Uc),Ge=ke.props,ht=Ge.points,be=Ge.isRange,Xe=Ge.baseLine,ot=ke.item.type.defaultProps!==void 0?vt(vt({},ke.item.type.defaultProps),ke.item.props):ke.item.props,st=ot.activeDot,Pt=ot.hide,Vt=ot.activeBar,Rt=ot.activeShape,mr=!!(!Pt&&Fe&&Ve&&(st||Vt||Rt)),nr={};at!=="axis"&&Ve&&Ve.props.trigger==="click"?nr={onClick:Dv(J.handleItemMouseEnter,oe.props.onClick)}:at!=="axis"&&(nr={onMouseLeave:Dv(J.handleItemMouseLeave,oe.props.onMouseLeave),onMouseEnter:Dv(J.handleItemMouseEnter,oe.props.onMouseEnter)});var Ot=pt.cloneElement(oe,vt(vt({},ke.props),nr));function er(ki){return typeof tt.dataKey=="function"?tt.dataKey(ki.payload):null}if(mr)if(ut>=0){var ir,_t;if(tt.dataKey&&!tt.allowDuplicatedCategory){var hr=typeof tt.dataKey=="function"?er:"payload.".concat(tt.dataKey.toString());ir=Vv(ht,hr,rt),_t=be&&Xe&&Vv(Xe,hr,rt)}else ir=ht==null?void 0:ht[ut],_t=be&&Xe&&Xe[ut];if(Rt||Vt){var Qt=oe.props.activeIndex!==void 0?oe.props.activeIndex:ut;return[pt.cloneElement(oe,vt(vt(vt({},ke.props),nr),{},{activeIndex:Qt})),null,null]}if(!Wr(ir))return[Ot].concat(gm(J.renderActivePoints({item:ke,activePoint:ir,basePoint:_t,childIndex:ut,isRange:be})))}else{var Yr,tn=(Yr=J.getItemByXY(J.state.activeCoordinate))!==null&&Yr!==void 0?Yr:{graphicalItem:Ot},Kr=tn.graphicalItem,Oi=Kr.item,Xn=Oi===void 0?oe:Oi,Ba=Kr.childIndex,Ii=vt(vt(vt({},ke.props),nr),{},{activeIndex:Ba});return[pt.cloneElement(Xn,Ii),null,null]}return be?[Ot,null,null]:[Ot,null]}),pr(J,"renderCustomized",function(oe,me,_e){return pt.cloneElement(oe,vt(vt({key:"recharts-customized-".concat(_e)},J.props),J.state))}),pr(J,"renderMap",{CartesianGrid:{handler:Fv,once:!0},ReferenceArea:{handler:J.renderReferenceElement},ReferenceLine:{handler:Fv},ReferenceDot:{handler:J.renderReferenceElement},XAxis:{handler:Fv},YAxis:{handler:Fv},Brush:{handler:J.renderBrush,once:!0},Bar:{handler:J.renderGraphicChild},Line:{handler:J.renderGraphicChild},Area:{handler:J.renderGraphicChild},Radar:{handler:J.renderGraphicChild},RadialBar:{handler:J.renderGraphicChild},Scatter:{handler:J.renderGraphicChild},Pie:{handler:J.renderGraphicChild},Funnel:{handler:J.renderGraphicChild},Tooltip:{handler:J.renderCursor,once:!0},PolarGrid:{handler:J.renderPolarGrid,once:!0},PolarAngleAxis:{handler:J.renderPolarAxis},PolarRadiusAxis:{handler:J.renderPolarAxis},Customized:{handler:J.renderCustomized}}),J.clipPathId="".concat((ne=ae.id)!==null&&ne!==void 0?ne:Oy("recharts"),"-clip"),J.throttleTriggeredAfterMouseMove=uk(J.triggeredAfterMouseMove,(ue=ae.throttleDelay)!==null&&ue!==void 0?ue:1e3/60),J.state={},J}return XH(te,U),VH(te,[{key:"componentDidMount",value:function(){var ne,ue;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(ne=this.props.margin.left)!==null&&ne!==void 0?ne:0,top:(ue=this.props.margin.top)!==null&&ue!==void 0?ue:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var ne=this.props,ue=ne.children,J=ne.data,oe=ne.height,me=ne.layout,_e=xs(ue,Uc);if(_e){var ke=_e.props.defaultIndex;if(!(typeof ke!="number"||ke<0||ke>this.state.tooltipTicks.length-1)){var at=this.state.tooltipTicks[ke]&&this.state.tooltipTicks[ke].value,ze=bS(this.state,J,ke,at),Fe=this.state.tooltipTicks[ke].coordinate,tt=(this.state.offset.top+oe)/2,ut=me==="horizontal",rt=ut?{x:Fe,y:tt}:{y:Fe,x:tt},Pe=this.state.formattedGraphicalItems.find(function(Ge){var ht=Ge.item;return ht.type.name==="Scatter"});Pe&&(rt=vt(vt({},rt),Pe.props.points[ke].tooltipPosition),ze=Pe.props.points[ke].tooltipPayload);var Ve={activeTooltipIndex:ke,isTooltipActive:!0,activeLabel:at,activePayload:ze,activeCoordinate:rt};this.setState(Ve),this.renderCursor(_e),this.accessibilityManager.setIndex(ke)}}}},{key:"getSnapshotBeforeUpdate",value:function(ne,ue){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==ue.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==ne.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==ne.margin){var J,oe;this.accessibilityManager.setDetails({offset:{left:(J=this.props.margin.left)!==null&&J!==void 0?J:0,top:(oe=this.props.margin.top)!==null&&oe!==void 0?oe:0}})}return null}},{key:"componentDidUpdate",value:function(ne){a2([xs(ne.children,Uc)],[xs(this.props.children,Uc)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var ne=xs(this.props.children,Uc);if(ne&&typeof ne.props.shared=="boolean"){var ue=ne.props.shared?"axis":"item";return c.indexOf(ue)>=0?ue:y}return y}},{key:"getMouseInfo",value:function(ne){if(!this.container)return null;var ue=this.container,J=ue.getBoundingClientRect(),oe=aB(J),me={chartX:Math.round(ne.pageX-oe.left),chartY:Math.round(ne.pageY-oe.top)},_e=J.width/ue.offsetWidth||1,ke=this.inRange(me.chartX,me.chartY,_e);if(!ke)return null;var at=this.state,ze=at.xAxisMap,Fe=at.yAxisMap,tt=this.getTooltipEventType(),ut=DO(this.state,this.props.data,this.props.layout,ke);if(tt!=="axis"&&ze&&Fe){var rt=nd(ze).scale,Pe=nd(Fe).scale,Ve=rt&&rt.invert?rt.invert(me.chartX):null,Ge=Pe&&Pe.invert?Pe.invert(me.chartY):null;return vt(vt({},me),{},{xValue:Ve,yValue:Ge},ut)}return ut?vt(vt({},me),ut):null}},{key:"inRange",value:function(ne,ue){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,oe=this.props.layout,me=ne/J,_e=ue/J;if(oe==="horizontal"||oe==="vertical"){var ke=this.state.offset,at=me>=ke.left&&me<=ke.left+ke.width&&_e>=ke.top&&_e<=ke.top+ke.height;return at?{x:me,y:_e}:null}var ze=this.state,Fe=ze.angleAxisMap,tt=ze.radiusAxisMap;if(Fe&&tt){var ut=nd(Fe);return WC({x:me,y:_e},ut)}return null}},{key:"parseEventsOfWrapper",value:function(){var ne=this.props.children,ue=this.getTooltipEventType(),J=xs(ne,Uc),oe={};J&&ue==="axis"&&(J.props.trigger==="click"?oe={onClick:this.handleClick}:oe={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var me=Gv(this.props,this.handleOuterEvent);return vt(vt({},me),oe)}},{key:"addListener",value:function(){Vw.on(Gw,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Vw.removeListener(Gw,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(ne,ue,J){for(var oe=this.state.formattedGraphicalItems,me=0,_e=oe.length;me<_e;me++){var ke=oe[me];if(ke.item===ne||ke.props.key===ne.key||ue===qu(ke.item.type)&&J===ke.childIndex)return ke}return null}},{key:"renderClipPath",value:function(){var ne=this.clipPathId,ue=this.state.offset,J=ue.left,oe=ue.top,me=ue.height,_e=ue.width;return $e.createElement("defs",null,$e.createElement("clipPath",{id:ne},$e.createElement("rect",{x:J,y:oe,height:me,width:_e})))}},{key:"getXScales",value:function(){var ne=this.state.xAxisMap;return ne?Object.entries(ne).reduce(function(ue,J){var oe=IO(J,2),me=oe[0],_e=oe[1];return vt(vt({},ue),{},pr({},me,_e.scale))},{}):null}},{key:"getYScales",value:function(){var ne=this.state.yAxisMap;return ne?Object.entries(ne).reduce(function(ue,J){var oe=IO(J,2),me=oe[0],_e=oe[1];return vt(vt({},ue),{},pr({},me,_e.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(ne){var ue;return(ue=this.state.xAxisMap)===null||ue===void 0||(ue=ue[ne])===null||ue===void 0?void 0:ue.scale}},{key:"getYScaleByAxisId",value:function(ne){var ue;return(ue=this.state.yAxisMap)===null||ue===void 0||(ue=ue[ne])===null||ue===void 0?void 0:ue.scale}},{key:"getItemByXY",value:function(ne){var ue=this.state,J=ue.formattedGraphicalItems,oe=ue.activeItem;if(J&&J.length)for(var me=0,_e=J.length;me<_e;me++){var ke=J[me],at=ke.props,ze=ke.item,Fe=ze.type.defaultProps!==void 0?vt(vt({},ze.type.defaultProps),ze.props):ze.props,tt=qu(ze.type);if(tt==="Bar"){var ut=(at.data||[]).find(function(Ge){return w7(ne,Ge)});if(ut)return{graphicalItem:ke,payload:ut}}else if(tt==="RadialBar"){var rt=(at.data||[]).find(function(Ge){return WC(ne,Ge)});if(rt)return{graphicalItem:ke,payload:rt}}else if(h0(ke,oe)||d0(ke,oe)||_y(ke,oe)){var Pe=d9({graphicalItem:ke,activeTooltipItem:oe,itemData:Fe.data}),Ve=Fe.activeIndex===void 0?Pe:Fe.activeIndex;return{graphicalItem:vt(vt({},ke),{},{childIndex:Ve}),payload:_y(ke,oe)?Fe.data[Pe]:ke.props.data[Pe]}}}return null}},{key:"render",value:function(){var ne=this;if(!oM(this))return null;var ue=this.props,J=ue.children,oe=ue.className,me=ue.width,_e=ue.height,ke=ue.style,at=ue.compact,ze=ue.title,Fe=ue.desc,tt=kO(ue,NH),ut=en(tt,!1);if(at)return $e.createElement(fO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$e.createElement(s2,Up({},ut,{width:me,height:_e,title:ze,desc:Fe}),this.renderClipPath(),lM(J,this.renderMap)));if(this.props.accessibilityLayer){var rt,Pe;ut.tabIndex=(rt=this.props.tabIndex)!==null&&rt!==void 0?rt:0,ut.role=(Pe=this.props.role)!==null&&Pe!==void 0?Pe:"application",ut.onKeyDown=function(Ge){ne.accessibilityManager.keyboardEvent(Ge)},ut.onFocus=function(){ne.accessibilityManager.focus()}}var Ve=this.parseEventsOfWrapper();return $e.createElement(fO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$e.createElement("div",Up({className:sn("recharts-wrapper",oe),style:vt({position:"relative",cursor:"default",width:me,height:_e},ke)},Ve,{ref:function(ht){ne.container=ht}}),$e.createElement(s2,Up({},ut,{width:me,height:_e,title:ze,desc:Fe,style:eX}),this.renderClipPath(),lM(J,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(pt.Component);pr(X,"displayName",i),pr(X,"defaultProps",vt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},O)),pr(X,"getDerivedStateFromProps",function(U,te){var ae=U.dataKey,ne=U.data,ue=U.children,J=U.width,oe=U.height,me=U.layout,_e=U.stackOffset,ke=U.margin,at=te.dataStartIndex,ze=te.dataEndIndex;if(te.updateId===void 0){var Fe=RO(U);return vt(vt(vt({},Fe),{},{updateId:0},F(vt(vt({props:U},Fe),{},{updateId:0}),te)),{},{prevDataKey:ae,prevData:ne,prevWidth:J,prevHeight:oe,prevLayout:me,prevStackOffset:_e,prevMargin:ke,prevChildren:ue})}if(ae!==te.prevDataKey||ne!==te.prevData||J!==te.prevWidth||oe!==te.prevHeight||me!==te.prevLayout||_e!==te.prevStackOffset||!Gp(ke,te.prevMargin)){var tt=RO(U),ut={chartX:te.chartX,chartY:te.chartY,isTooltipActive:te.isTooltipActive},rt=vt(vt({},DO(te,ne,me)),{},{updateId:te.updateId+1}),Pe=vt(vt(vt({},tt),ut),rt);return vt(vt(vt({},Pe),F(vt({props:U},Pe),te)),{},{prevDataKey:ae,prevData:ne,prevWidth:J,prevHeight:oe,prevLayout:me,prevStackOffset:_e,prevMargin:ke,prevChildren:ue})}if(!a2(ue,te.prevChildren)){var Ve,Ge,ht,be,Xe=xs(ue,am),ot=Xe&&(Ve=(Ge=Xe.props)===null||Ge===void 0?void 0:Ge.startIndex)!==null&&Ve!==void 0?Ve:at,st=Xe&&(ht=(be=Xe.props)===null||be===void 0?void 0:be.endIndex)!==null&&ht!==void 0?ht:ze,Pt=ot!==at||st!==ze,Vt=!Wr(ne),Rt=Vt&&!Pt?te.updateId:te.updateId+1;return vt(vt({updateId:Rt},F(vt(vt({props:U},te),{},{updateId:Rt,dataStartIndex:ot,dataEndIndex:st}),te)),{},{prevChildren:ue,dataStartIndex:ot,dataEndIndex:st})}return null}),pr(X,"renderActiveDot",function(U,te,ae){var ne;return pt.isValidElement(U)?ne=pt.cloneElement(U,te):Lr(U)?ne=U(te):ne=$e.createElement(_T,te),$e.createElement(ji,{className:"recharts-active-dot",key:ae},ne)});var Z=pt.forwardRef(function(te,ae){return $e.createElement(X,Up({},te,{ref:ae}))});return Z.displayName=X.displayName,Z},hX=uX({chartName:"LineChart",GraphicalChild:dm,axisComponents:[{axisType:"xAxis",AxisComp:v0},{axisType:"yAxis",AxisComp:Ty}],formatAxisMap:lG});function dX({data:e}){const t=e.map(a=>({month:a.month_ar,"البيع (ر.س/م²)":a.sale_price_per_m2,"الإيجار (ر.س/م²/شهر)":a.rent_price_per_m2_month})),i=({active:a,payload:f,label:y})=>a&&f&&f.length?P.jsxs(zr,{className:"p-3 shadow-lg",children:[P.jsx("p",{className:"font-semibold mb-2",children:y}),f.map((m,c)=>P.jsxs("p",{style:{color:m.color},className:"text-sm",children:[m.name,": ",new Intl.NumberFormat("ar-SA").format(m.value)]},c))]}):null;return P.jsxs(zr,{className:"p-6",children:[P.jsxs("div",{className:"mb-6",children:[P.jsx("h2",{className:"text-2xl font-bold mb-2",children:"اتجاهات الأسعار"}),P.jsx("p",{className:"text-muted-foreground",children:"تطور أسعار البيع والإيجار خلال آخر 12 شهر"})]}),P.jsx("div",{className:"w-full h-80",children:P.jsx(Q6,{width:"100%",height:"100%",children:P.jsxs(hX,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[P.jsx(rD,{strokeDasharray:"3 3",stroke:"oklch(0.90 0.01 220)"}),P.jsx(v0,{dataKey:"month",tick:{fill:"oklch(0.50 0.01 240)",fontSize:12},angle:-45,textAnchor:"end",height:80}),P.jsx(Ty,{yAxisId:"left",tick:{fill:"oklch(0.50 0.01 240)",fontSize:12},label:{value:"سعر البيع (ر.س/م²)",angle:-90,position:"insideLeft"}}),P.jsx(Ty,{yAxisId:"right",orientation:"right",tick:{fill:"oklch(0.50 0.01 240)",fontSize:12},label:{value:"سعر الإيجار (ر.س/م²/شهر)",angle:90,position:"insideRight"}}),P.jsx(Uc,{content:P.jsx(i,{})}),P.jsx(bf,{wrapperStyle:{paddingTop:"20px"},iconType:"line"}),P.jsx(dm,{yAxisId:"left",type:"monotone",dataKey:"البيع (ر.س/م²)",stroke:"oklch(0.45 0.15 240)",strokeWidth:3,dot:{fill:"oklch(0.45 0.15 240)",r:4},activeDot:{r:6}}),P.jsx(dm,{yAxisId:"right",type:"monotone",dataKey:"الإيجار (ر.س/م²/شهر)",stroke:"oklch(0.60 0.15 180)",strokeWidth:3,dot:{fill:"oklch(0.60 0.15 180)",r:4},activeDot:{r:6}})]})})}),P.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4 text-sm",children:[P.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[P.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600"}),P.jsx("span",{className:"font-semibold",children:"البيع"})]}),P.jsx("p",{className:"text-xs text-muted-foreground",children:"نمو مستمر بنسبة 6٪ سنوياً"})]}),P.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[P.jsx("div",{className:"w-3 h-3 rounded-full bg-green-600"}),P.jsx("span",{className:"font-semibold",children:"الإيجار"})]}),P.jsx("p",{className:"text-xs text-muted-foreground",children:"استقرار نسبي مع نمو 4٪ سنوياً"})]})]})]})}function fX({data:e}){return P.jsx(zr,{className:"p-6 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:P.jsxs("div",{className:"flex items-start gap-4",children:[P.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:P.jsx(h3,{className:"w-6 h-6 text-blue-600"})}),P.jsxs("div",{className:"flex-1",children:[P.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[P.jsx("h3",{className:"font-bold text-lg",children:"حالة البيانات"}),P.jsx(Vg,{className:"bg-blue-600",children:"نسخة تجريبية"})]}),P.jsxs("div",{className:"space-y-2 mb-4",children:[P.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[P.jsx(aI,{className:"w-4 h-4 text-blue-600"}),P.jsx("span",{className:"text-muted-foreground",children:"آخر تحديث:"}),P.jsx("span",{className:"font-semibold",children:pN(e.updated_at)})]}),P.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[P.jsx(Vp,{className:"w-4 h-4 text-amber-600"}),P.jsx("span",{className:"text-muted-foreground",children:"الفترة:"}),P.jsx("span",{className:"font-semibold",children:e.period})]})]}),P.jsxs("div",{className:"p-4 bg-white/80 rounded-lg border border-blue-200",children:[P.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:[P.jsx("strong",{className:"text-foreground",children:"ملاحظة:"})," ",e.note]}),P.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"البيانات الحالية محلية ومُعدّة للعرض التوضيحي. في النسخة النهائية، سيتم تحديث البيانات تلقائياً من مصادر رسمية معتمدة."})]})]})]})})}function pX(){const e=[{title:"جمع البيانات",description:"تجميع بيانات المعاملات العقارية من مصادر رسمية ومعتمدة"},{title:"التنظيف والتحقق",description:"تنقية البيانات واستبعاد القيم الشاذة والمعاملات غير النمطية"},{title:"التحليل الإحصائي",description:"حساب المتوسطات والنطاقات (P25, P50, P75) لكل منطقة"},{title:"حساب الاتجاهات",description:"تحليل التغيرات السنوية والشهرية وتحديد الاتجاهات"},{title:"تقييم الثقة",description:"حساب مستوى الثقة بناءً على حجم العينة وتناسق البيانات"},{title:"التحديث المستمر",description:"تحديث دوري للبيانات والمؤشرات (شهرياً في النسخة النهائية)"}];return P.jsxs(zr,{className:"p-8",children:[P.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[P.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:P.jsx(qR,{className:"w-6 h-6 text-purple-600"})}),P.jsxs("div",{children:[P.jsx("h2",{className:"text-2xl font-bold",children:"المنهجية"}),P.jsx("p",{className:"text-sm text-muted-foreground",children:"كيف نحسب مؤشرات السوق"})]})]}),P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map((t,i)=>P.jsxs("div",{className:"flex gap-4",children:[P.jsx("div",{className:"flex-shrink-0",children:P.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-bold text-sm",children:i+1})}),P.jsxs("div",{children:[P.jsx("h3",{className:"font-semibold mb-1",children:t.title}),P.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]},i))}),P.jsx("div",{className:"mt-8 p-4 bg-muted/50 rounded-lg",children:P.jsxs("div",{className:"flex items-start gap-3",children:[P.jsx(od,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),P.jsxs("div",{children:[P.jsx("h4",{className:"font-semibold mb-2",children:"معايير الجودة"}),P.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[P.jsx("li",{children:"• استبعاد المعاملات غير النمطية (أقل من 1% أو أكثر من 99%)"}),P.jsx("li",{children:"• الحد الأدنى للعينة: 100 معاملة لكل منطقة"}),P.jsx("li",{children:"• مستوى الثقة يعكس حجم العينة وتناسق البيانات"}),P.jsx("li",{children:"• التحديث الدوري يضمن دقة المؤشرات"})]})]})]})})]})}const mX="2025Q4",gX="2025-10-13",yX="بيانات تجريبية محلية - سيتم تحديثها من مصادر رسمية لاحقاً",vX={sale_price_per_m2:4350,rent_price_per_m2_month:75,sale_yoy:.06,rent_yoy:.04,avg_days_to_sell:52,national_confidence:.82,total_transactions:245e3,transaction_volume_billion:187.5},_X={sale_trend:"صاعد",rent_trend:"مستقر",demand_level:"مرتفع",supply_level:"متوازن"},bX=["نمو مستمر في أسعار البيع بنسبة 6% سنوياً","استقرار نسبي في أسعار الإيجارات","زيادة الطلب على الوحدات السكنية في المدن الرئيسية","تحسن ملحوظ في سرعة البيع مقارنة بالربع السابق"],xX={period:mX,updated_at:gX,note:yX,national:vX,trends:_X,insights:bX},wX=[{id:"riyadh",name:"الرياض",name_en:"Riyadh",sale_price_per_m2:4500,rent_price_per_m2_month:80,sale_p25:3200,sale_p50:4500,sale_p75:6200,rent_p25:60,rent_p50:80,rent_p75:110,sale_yoy:.08,rent_yoy:.05,avg_days_to_sell:48,confidence:.88,transactions:85e3,note:"العاصمة - نمو قوي ومستمر"},{id:"jeddah",name:"جدة",name_en:"Jeddah",sale_price_per_m2:4200,rent_price_per_m2_month:75,sale_p25:3e3,sale_p50:4200,sale_p75:5800,rent_p25:55,rent_p50:75,rent_p75:100,sale_yoy:.07,rent_yoy:.04,avg_days_to_sell:50,confidence:.85,transactions:62e3,note:"المدينة الساحلية - طلب مرتفع"},{id:"dammam",name:"الدمام",name_en:"Dammam",sale_price_per_m2:3800,rent_price_per_m2_month:65,sale_p25:2800,sale_p50:3800,sale_p75:5e3,rent_p25:50,rent_p50:65,rent_p75:85,sale_yoy:.05,rent_yoy:.03,avg_days_to_sell:55,confidence:.8,transactions:38e3,note:"المنطقة الشرقية - استقرار نسبي"},{id:"mecca",name:"مكة المكرمة",name_en:"Makkah",sale_price_per_m2:5200,rent_price_per_m2_month:90,sale_p25:3800,sale_p50:5200,sale_p75:7500,rent_p25:70,rent_p50:90,rent_p75:130,sale_yoy:.09,rent_yoy:.06,avg_days_to_sell:45,confidence:.82,transactions:32e3,note:"المدينة المقدسة - طلب استثنائي"},{id:"medina",name:"المدينة المنورة",name_en:"Madinah",sale_price_per_m2:4800,rent_price_per_m2_month:85,sale_p25:3500,sale_p50:4800,sale_p75:6800,rent_p25:65,rent_p50:85,rent_p75:115,sale_yoy:.08,rent_yoy:.05,avg_days_to_sell:47,confidence:.83,transactions:28e3,note:"المدينة المنورة - نمو مستدام"}],SX=[{month:"2024-11",month_ar:"نوفمبر ٢٠٢٤",sale_price_per_m2:4100,rent_price_per_m2_month:72},{month:"2024-12",month_ar:"ديسمبر ٢٠٢٤",sale_price_per_m2:4150,rent_price_per_m2_month:73},{month:"2025-01",month_ar:"يناير ٢٠٢٥",sale_price_per_m2:4180,rent_price_per_m2_month:73},{month:"2025-02",month_ar:"فبراير ٢٠٢٥",sale_price_per_m2:4200,rent_price_per_m2_month:74},{month:"2025-03",month_ar:"مارس ٢٠٢٥",sale_price_per_m2:4220,rent_price_per_m2_month:74},{month:"2025-04",month_ar:"أبريل ٢٠٢٥",sale_price_per_m2:4250,rent_price_per_m2_month:74},{month:"2025-05",month_ar:"مايو ٢٠٢٥",sale_price_per_m2:4270,rent_price_per_m2_month:75},{month:"2025-06",month_ar:"يونيو ٢٠٢٥",sale_price_per_m2:4290,rent_price_per_m2_month:75},{month:"2025-07",month_ar:"يوليو ٢٠٢٥",sale_price_per_m2:4310,rent_price_per_m2_month:75},{month:"2025-08",month_ar:"أغسطس ٢٠٢٥",sale_price_per_m2:4330,rent_price_per_m2_month:76},{month:"2025-09",month_ar:"سبتمبر ٢٠٢٥",sale_price_per_m2:4340,rent_price_per_m2_month:76},{month:"2025-10",month_ar:"أكتوبر ٢٠٢٥",sale_price_per_m2:4350,rent_price_per_m2_month:75}];function TX(){return xX}function AX(){return wX}function MX(){return SX}function PX(){const e=TX(),t=AX(),i=MX();return P.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted/30 py-12 px-4",children:P.jsxs("div",{className:"container mx-auto max-w-7xl",children:[P.jsxs("div",{className:"text-center mb-12 space-y-4",children:[P.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-semibold mb-4",children:[P.jsx(vf,{className:"w-4 h-4"}),P.jsx("span",{children:"دراسة السوق العقاري السعودي"})]}),P.jsx("h1",{className:"text-4xl md:text-5xl font-black text-balance",children:"السوق العقاري السعودي"}),P.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto text-balance",children:"تحليل شامل ومؤشرات دقيقة لسوق العقارات في المملكة"})]}),P.jsx("div",{className:"mb-8",children:P.jsx(fX,{data:e})}),P.jsxs("div",{className:"mb-12",children:[P.jsx("h2",{className:"text-2xl font-bold mb-6",children:"المؤشرات الرئيسية"}),P.jsx(gN,{data:e})]}),P.jsx("div",{className:"mb-12",children:P.jsx(dX,{data:i})}),P.jsxs("div",{className:"mb-12",children:[P.jsxs("div",{className:"flex items-center justify-between mb-6",children:[P.jsx("h2",{className:"text-2xl font-bold",children:"المدن الرئيسية"}),P.jsx("div",{className:"text-sm text-muted-foreground",children:"اضغط على أي مدينة لعرض التفاصيل"})]}),P.jsx(yN,{cities:t})]}),P.jsxs("div",{className:"mb-12 grid grid-cols-1 md:grid-cols-2 gap-6",children:[P.jsxs("div",{className:"p-6 rounded-xl bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[P.jsx($u,{className:"w-5 h-5 text-green-600"}),P.jsx("h3",{className:"font-bold text-lg",children:"رؤى السوق"})]}),P.jsx("ul",{className:"space-y-2 text-sm",children:e.insights.map((a,f)=>P.jsxs("li",{className:"flex items-start gap-2",children:[P.jsx("span",{className:"text-green-600 font-bold",children:"•"}),P.jsx("span",{children:a})]},f))})]}),P.jsxs("div",{className:"p-6 rounded-xl bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[P.jsx(vf,{className:"w-5 h-5 text-blue-600"}),P.jsx("h3",{className:"font-bold text-lg",children:"الاتجاهات"})]}),P.jsxs("div",{className:"space-y-3 text-sm",children:[P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx("span",{className:"text-muted-foreground",children:"اتجاه البيع"}),P.jsx("span",{className:"font-semibold px-3 py-1 bg-green-100 text-green-700 rounded-full",children:e.trends.sale_trend})]}),P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx("span",{className:"text-muted-foreground",children:"اتجاه الإيجار"}),P.jsx("span",{className:"font-semibold px-3 py-1 bg-blue-100 text-blue-700 rounded-full",children:e.trends.rent_trend})]}),P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx("span",{className:"text-muted-foreground",children:"مستوى الطلب"}),P.jsx("span",{className:"font-semibold px-3 py-1 bg-amber-100 text-amber-700 rounded-full",children:e.trends.demand_level})]}),P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx("span",{className:"text-muted-foreground",children:"مستوى العرض"}),P.jsx("span",{className:"font-semibold px-3 py-1 bg-purple-100 text-purple-700 rounded-full",children:e.trends.supply_level})]})]})]})]}),P.jsx("div",{className:"mb-12",children:P.jsx(pX,{})}),P.jsxs("div",{className:"p-8 rounded-xl bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 text-center",children:[P.jsx("h3",{className:"text-2xl font-bold mb-3",children:"قريباً في خطة Smart Plan"}),P.jsx("p",{className:"text-muted-foreground mb-4",children:"🔓 تحليل الحي الكامل، وأفضل مناطق السكن، والتكتلات السعريّة"}),P.jsxs("div",{className:"flex flex-wrap justify-center gap-3 text-sm",children:[P.jsx("span",{className:"px-4 py-2 bg-white rounded-full font-semibold",children:"خريطة تفاعلية"}),P.jsx("span",{className:"px-4 py-2 bg-white rounded-full font-semibold",children:"مقارنات الأحياء"}),P.jsx("span",{className:"px-4 py-2 bg-white rounded-full font-semibold",children:"توقعات الأسعار"}),P.jsx("span",{className:"px-4 py-2 bg-white rounded-full font-semibold",children:"تقارير مفصّلة"})]})]})]})})}var qv={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.9.0/LICENSE.txt
 */var EX=qv.exports,LO;function CX(){return LO||(LO=1,function(e,t){(function(i,a){e.exports=a()})(EX,function(){var i={},a={};function f(m,c,M){if(a[m]=M,m==="index"){var C="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",D={};return a.shared(D),a.index(i,D),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),i}}f("shared",["exports"],function(m){function c(l,n,o,d){return new(o||(o=Promise))(function(v,x){function T(R){try{I(d.next(R))}catch(L){x(L)}}function E(R){try{I(d.throw(R))}catch(L){x(L)}}function I(R){var L;R.done?v(R.value):(L=R.value,L instanceof o?L:new o(function(V){V(L)})).then(T,E)}I((d=d.apply(l,n||[])).next())})}function M(l,n){this.x=l,this.y=n}function C(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var D,O;typeof SuppressedError=="function"&&SuppressedError,M.prototype={clone(){return new M(this.x,this.y)},add(l){return this.clone()._add(l)},sub(l){return this.clone()._sub(l)},multByPoint(l){return this.clone()._multByPoint(l)},divByPoint(l){return this.clone()._divByPoint(l)},mult(l){return this.clone()._mult(l)},div(l){return this.clone()._div(l)},rotate(l){return this.clone()._rotate(l)},rotateAround(l,n){return this.clone()._rotateAround(l,n)},matMult(l){return this.clone()._matMult(l)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(l){return this.x===l.x&&this.y===l.y},dist(l){return Math.sqrt(this.distSqr(l))},distSqr(l){const n=l.x-this.x,o=l.y-this.y;return n*n+o*o},angle(){return Math.atan2(this.y,this.x)},angleTo(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith(l){return this.angleWithSep(l.x,l.y)},angleWithSep(l,n){return Math.atan2(this.x*n-this.y*l,this.x*l+this.y*n)},_matMult(l){const n=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=n,this},_add(l){return this.x+=l.x,this.y+=l.y,this},_sub(l){return this.x-=l.x,this.y-=l.y,this},_mult(l){return this.x*=l,this.y*=l,this},_div(l){return this.x/=l,this.y/=l,this},_multByPoint(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint(l){return this.x/=l.x,this.y/=l.y,this},_unit(){return this._div(this.mag()),this},_perp(){const l=this.y;return this.y=this.x,this.x=-l,this},_rotate(l){const n=Math.cos(l),o=Math.sin(l),d=o*this.x+n*this.y;return this.x=n*this.x-o*this.y,this.y=d,this},_rotateAround(l,n){const o=Math.cos(l),d=Math.sin(l),v=n.y+d*(this.x-n.x)+o*(this.y-n.y);return this.x=n.x+o*(this.x-n.x)-d*(this.y-n.y),this.y=v,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:M},M.convert=function(l){if(l instanceof M)return l;if(Array.isArray(l))return new M(+l[0],+l[1]);if(l.x!==void 0&&l.y!==void 0)return new M(+l.x,+l.y);throw new Error("Expected [x, y] or {x, y} point format")};var B=function(){if(O)return D;function l(n,o,d,v){this.cx=3*n,this.bx=3*(d-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(v-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=o,this.p2x=d,this.p2y=v}return O=1,D=l,l.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,o){if(o===void 0&&(o=1e-6),n<0)return 0;if(n>1)return 1;for(var d=n,v=0;v<8;v++){var x=this.sampleCurveX(d)-n;if(Math.abs(x)<o)return d;var T=this.sampleCurveDerivativeX(d);if(Math.abs(T)<1e-6)break;d-=x/T}var E=0,I=1;for(d=n,v=0;v<20&&(x=this.sampleCurveX(d),!(Math.abs(x-n)<o));v++)n>x?E=d:I=d,d=.5*(I-E)+E;return d},solve:function(n,o){return this.sampleCurveY(this.solveCurveX(n,o))}},D}(),F=C(B);let X,Z;function U(){return X==null&&(X=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),X}function te(){if(Z==null&&(Z=!1,U())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let d=0;d<5*5;d++){const v=4*d;n.fillStyle=`rgb(${v},${v+1},${v+2})`,n.fillRect(d%5,Math.floor(d/5),1,1)}const o=n.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&o[d]!==d){Z=!0;break}}}return Z||!1}var ae=1e-6,ne=typeof Float32Array<"u"?Float32Array:Array;function ue(){var l=new ne(9);return ne!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function J(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function oe(){var l=new ne(3);return ne!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function me(l){var n=l[0],o=l[1],d=l[2];return Math.sqrt(n*n+o*o+d*d)}function _e(l,n,o){var d=new ne(3);return d[0]=l,d[1]=n,d[2]=o,d}function ke(l,n,o){return l[0]=n[0]+o[0],l[1]=n[1]+o[1],l[2]=n[2]+o[2],l}function at(l,n,o){return l[0]=n[0]*o,l[1]=n[1]*o,l[2]=n[2]*o,l}function ze(l,n,o){var d=n[0],v=n[1],x=n[2],T=o[0],E=o[1],I=o[2];return l[0]=v*I-x*E,l[1]=x*T-d*I,l[2]=d*E-v*T,l}var Fe,tt=me;function ut(l,n,o){var d=n[0],v=n[1],x=n[2],T=n[3];return l[0]=o[0]*d+o[4]*v+o[8]*x+o[12]*T,l[1]=o[1]*d+o[5]*v+o[9]*x+o[13]*T,l[2]=o[2]*d+o[6]*v+o[10]*x+o[14]*T,l[3]=o[3]*d+o[7]*v+o[11]*x+o[15]*T,l}function rt(){var l=new ne(4);return ne!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function Pe(l,n,o,d){var v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",x=Math.PI/360;n*=x,d*=x,o*=x;var T=Math.sin(n),E=Math.cos(n),I=Math.sin(o),R=Math.cos(o),L=Math.sin(d),V=Math.cos(d);switch(v){case"xyz":l[0]=T*R*V+E*I*L,l[1]=E*I*V-T*R*L,l[2]=E*R*L+T*I*V,l[3]=E*R*V-T*I*L;break;case"xzy":l[0]=T*R*V-E*I*L,l[1]=E*I*V-T*R*L,l[2]=E*R*L+T*I*V,l[3]=E*R*V+T*I*L;break;case"yxz":l[0]=T*R*V+E*I*L,l[1]=E*I*V-T*R*L,l[2]=E*R*L-T*I*V,l[3]=E*R*V+T*I*L;break;case"yzx":l[0]=T*R*V+E*I*L,l[1]=E*I*V+T*R*L,l[2]=E*R*L-T*I*V,l[3]=E*R*V-T*I*L;break;case"zxy":l[0]=T*R*V-E*I*L,l[1]=E*I*V+T*R*L,l[2]=E*R*L+T*I*V,l[3]=E*R*V-T*I*L;break;case"zyx":l[0]=T*R*V-E*I*L,l[1]=E*I*V+T*R*L,l[2]=E*R*L-T*I*V,l[3]=E*R*V+T*I*L;break;default:throw new Error("Unknown angle order "+v)}return l}function Ve(){var l=new ne(2);return ne!=Float32Array&&(l[0]=0,l[1]=0),l}function Ge(l,n){var o=new ne(2);return o[0]=l,o[1]=n,o}oe(),Fe=new ne(4),ne!=Float32Array&&(Fe[0]=0,Fe[1]=0,Fe[2]=0,Fe[3]=0),oe(),_e(1,0,0),_e(0,1,0),rt(),rt(),ue(),Ve();const ht=8192;function be(l,n,o){return n*(ht/(l.tileSize*Math.pow(2,o-l.tileID.overscaledZ)))}function Xe(l,n){return(l%n+n)%n}function ot(l,n,o){return l*(1-o)+n*o}function st(l){if(l<=0)return 0;if(l>=1)return 1;const n=l*l,o=n*l;return 4*(l<.5?o:3*(l-n)+o-.75)}function Pt(l,n,o,d){const v=new F(l,n,o,d);return x=>v.solve(x)}const Vt=Pt(.25,.1,.25,1);function Rt(l,n,o){return Math.min(o,Math.max(n,l))}function mr(l,n,o){const d=o-n,v=((l-n)%d+d)%d+n;return v===n?o:v}function nr(l,...n){for(const o of n)for(const d in o)l[d]=o[d];return l}let Ot=1;function er(l,n,o){const d={};for(const v in l)d[v]=n.call(this,l[v],v,l);return d}function ir(l,n,o){const d={};for(const v in l)n.call(this,l[v],v,l)&&(d[v]=l[v]);return d}function _t(l){return Array.isArray(l)?l.map(_t):typeof l=="object"&&l?er(l,_t):l}const hr={};function Qt(l){hr[l]||(typeof console<"u"&&console.warn(l),hr[l]=!0)}function Yr(l,n,o){return(o.y-l.y)*(n.x-l.x)>(n.y-l.y)*(o.x-l.x)}function tn(l){return typeof WorkerGlobalScope<"u"&&l!==void 0&&l instanceof WorkerGlobalScope}let Kr=null;function Oi(l){if(Kr==null){const n=l.navigator?l.navigator.userAgent:null;Kr=!!l.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Kr}function Xn(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const Ba="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ii(l,n,o,d,v){return c(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(l,{timestamp:0});try{const T=x==null?void 0:x.format;if(!T||!T.startsWith("BGR")&&!T.startsWith("RGB"))throw new Error(`Unrecognized format ${T}`);const E=T.startsWith("BGR"),I=new Uint8ClampedArray(d*v*4);if(yield x.copyTo(I,function(R,L,V,W,K){const ee=4*Math.max(-L,0),le=(Math.max(0,V)-V)*W*4+ee,he=4*W,ye=Math.max(0,L),Be=Math.max(0,V);return{rect:{x:ye,y:Be,width:Math.min(R.width,L+W)-ye,height:Math.min(R.height,V+K)-Be},layout:[{offset:le,stride:he}]}}(l,n,o,d,v)),E)for(let R=0;R<I.length;R+=4){const L=I[R];I[R]=I[R+2],I[R+2]=L}return I}finally{x.close()}})}let ki,Wi;function Mo(l,n,o,d){return l.addEventListener(n,o,d),{unsubscribe:()=>{l.removeEventListener(n,o,d)}}}function Ts(l){return l*Math.PI/180}function zi(l){return l/Math.PI*180}const Qn={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},li={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Ie="AbortError";function re(){return new Error(Ie)}const ie={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function de(l){return ie.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}const Se="global-dispatcher";class Ee extends Error{constructor(n,o,d,v){super(`AJAXError: ${o} (${n}): ${d}`),this.status=n,this.statusText=o,this.url=d,this.body=v}}const De=()=>tn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,He=function(l,n){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){const d=de(l.url);if(d)return d(l,n);if(tn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:Se},n)}if(!(/^file:/.test(o=l.url)||/^file:/.test(De())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,v){return c(this,void 0,void 0,function*(){const x=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:De(),signal:v.signal});let T,E;d.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");try{T=yield fetch(x)}catch(R){throw new Ee(0,R.message,d.url,new Blob)}if(!T.ok){const R=yield T.blob();throw new Ee(T.status,T.statusText,d.url,R)}E=d.type==="arrayBuffer"||d.type==="image"?T.arrayBuffer():d.type==="json"?T.json():T.text();const I=yield E;if(v.signal.aborted)throw re();return{data:I,cacheControl:T.headers.get("Cache-Control"),expires:T.headers.get("Expires")}})}(l,n);if(tn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:Se},n)}var o;return function(d,v){return new Promise((x,T)=>{var E;const I=new XMLHttpRequest;I.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(I.responseType="arraybuffer");for(const R in d.headers)I.setRequestHeader(R,d.headers[R]);d.type==="json"&&(I.responseType="text",!((E=d.headers)===null||E===void 0)&&E.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=d.credentials==="include",I.onerror=()=>{T(new Error(I.statusText))},I.onload=()=>{if(!v.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let R=I.response;if(d.type==="json")try{R=JSON.parse(I.response)}catch(L){return void T(L)}x({data:R,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const R=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});T(new Ee(I.status,I.statusText,d.url,R))}},v.signal.addEventListener("abort",()=>{I.abort(),T(re())}),I.send(d.body)})}(l,n)};function Le(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;const n=new URL(l),o=window.location;return n.protocol===o.protocol&&n.host===o.host}function ct(l,n,o){o[l]&&o[l].indexOf(n)!==-1||(o[l]=o[l]||[],o[l].push(n))}function St(l,n,o){if(o&&o[l]){const d=o[l].indexOf(n);d!==-1&&o[l].splice(d,1)}}class mt{constructor(n,o={}){nr(this,o),this.type=n}}class Bt extends mt{constructor(n,o={}){super("error",nr({error:n},o))}}class Zt{on(n,o){return this._listeners=this._listeners||{},ct(n,o,this._listeners),{unsubscribe:()=>{this.off(n,o)}}}off(n,o){return St(n,o,this._listeners),St(n,o,this._oneTimeListeners),this}once(n,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},ct(n,o,this._oneTimeListeners),this):new Promise(d=>this.once(n,d))}fire(n,o){typeof n=="string"&&(n=new mt(n,o||{}));const d=n.type;if(this.listens(d)){n.target=this;const v=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const E of v)E.call(this,n);const x=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const E of x)St(d,E,this._oneTimeListeners),E.call(this,n);const T=this._eventedParent;T&&(nr(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(n))}else n instanceof Bt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,o){return this._eventedParent=n,this._eventedParentData=o,this}}var Ue={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Cr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function qr(l,n){const o={};for(const d in l)d!=="ref"&&(o[d]=l[d]);return Cr.forEach(d=>{d in n&&(o[d]=n[d])}),o}function Ft(l,n){if(Array.isArray(l)){if(!Array.isArray(n)||l.length!==n.length)return!1;for(let o=0;o<l.length;o++)if(!Ft(l[o],n[o]))return!1;return!0}if(typeof l=="object"&&l!==null&&n!==null){if(typeof n!="object"||Object.keys(l).length!==Object.keys(n).length)return!1;for(const o in l)if(!Ft(l[o],n[o]))return!1;return!0}return l===n}function Pr(l,n){l.push(n)}function Jn(l,n,o){Pr(o,{command:"addSource",args:[l,n[l]]})}function ci(l,n,o){Pr(n,{command:"removeSource",args:[l]}),o[l]=!0}function hn(l,n,o,d){ci(l,o,d),Jn(l,n,o)}function Zr(l,n,o){let d;for(d in l[o])if(Object.prototype.hasOwnProperty.call(l[o],d)&&d!=="data"&&!Ft(l[o][d],n[o][d]))return!1;for(d in n[o])if(Object.prototype.hasOwnProperty.call(n[o],d)&&d!=="data"&&!Ft(l[o][d],n[o][d]))return!1;return!0}function Tr(l,n,o,d,v,x){l=l||{},n=n||{};for(const T in l)Object.prototype.hasOwnProperty.call(l,T)&&(Ft(l[T],n[T])||o.push({command:x,args:[d,T,n[T],v]}));for(const T in n)Object.prototype.hasOwnProperty.call(n,T)&&!Object.prototype.hasOwnProperty.call(l,T)&&(Ft(l[T],n[T])||o.push({command:x,args:[d,T,n[T],v]}))}function An(l){return l.id}function Ur(l,n){return l[n.id]=n,l}class wt{constructor(n,o,d,v){this.message=(n?`${n}: `:"")+d,v&&(this.identifier=v),o!=null&&o.__line__&&(this.line=o.__line__)}}function Po(l,...n){for(const o of n)for(const d in o)l[d]=o[d];return l}class ca extends Error{constructor(n,o){super(o),this.message=o,this.key=n}}class Ai{constructor(n,o=[]){this.parent=n,this.bindings={};for(const[d,v]of o)this.bindings[d]=v}concat(n){return new Ai(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Wn={kind:"null"},Ct={kind:"number"},fr={kind:"string"},dr={kind:"boolean"},yi={kind:"color"},dn={kind:"projectionDefinition"},so={kind:"object"},gr={kind:"value"},Fa={kind:"collator"},Eo={kind:"formatted"},cl={kind:"padding"},lc={kind:"colorArray"},Co={kind:"numberArray"},ul={kind:"resolvedImage"},Mn={kind:"variableAnchorOffsetCollection"};function Di(l,n){return{kind:"array",itemType:l,N:n}}function Vr(l){if(l.kind==="array"){const n=Vr(l.itemType);return typeof l.N=="number"?`array<${n}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${n}>`}return l.kind}const hl=[Wn,Ct,fr,dr,yi,dn,Eo,so,Di(gr),cl,Co,lc,ul,Mn];function dl(l,n){if(n.kind==="error")return null;if(l.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!dl(l.itemType,n.itemType))&&(typeof l.N!="number"||l.N===n.N))return null}else{if(l.kind===n.kind)return null;if(l.kind==="value"){for(const o of hl)if(!dl(o,n))return null}}return`Expected ${Vr(l)} but found ${Vr(n)} instead.`}function As(l,n){return n.some(o=>o.kind===l.kind)}function rs(l,n){return n.some(o=>o==="null"?l===null:o==="array"?Array.isArray(l):o==="object"?l&&!Array.isArray(l)&&typeof l=="object":o===typeof l)}function lo(l,n){return l.kind==="array"&&n.kind==="array"?l.itemType.kind===n.itemType.kind&&typeof l.N=="number":l.kind===n.kind}const If=.96422,Qu=.82521,Ma=4/29,fl=6/29,kf=3*fl*fl,Ju=fl*fl*fl,zf=Math.PI/180,eh=180/Math.PI;function Df(l){return(l%=360)<0&&(l+=360),l}function ua([l,n,o,d]){let v,x;const T=th((.2225045*(l=ns(l))+.7168786*(n=ns(n))+.0606169*(o=ns(o)))/1);l===n&&n===o?v=x=T:(v=th((.4360747*l+.3850649*n+.1430804*o)/If),x=th((.0139322*l+.0971045*n+.7141733*o)/Qu));const E=116*T-16;return[E<0?0:E,500*(v-T),200*(T-x),d]}function ns(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function th(l){return l>Ju?Math.pow(l,1/3):l/kf+Ma}function rh([l,n,o,d]){let v=(l+16)/116,x=isNaN(n)?v:v+n/500,T=isNaN(o)?v:v-o/200;return v=1*nh(v),x=If*nh(x),T=Qu*nh(T),[$a(3.1338561*x-1.6168667*v-.4906146*T),$a(-.9787684*x+1.9161415*v+.033454*T),$a(.0719453*x-.2289914*v+1.4052427*T),d]}function $a(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function nh(l){return l>fl?l*l*l:kf*(l-Ma)}const Rf=Object.hasOwn||function(l,n){return Object.prototype.hasOwnProperty.call(l,n)};function jo(l,n){return Rf(l,n)?l[n]:void 0}function Yc(l){return parseInt(l.padEnd(2,l),16)/255}function ih(l,n){return Ri(n?l/100:l,0,1)}function Ri(l,n,o){return Math.min(Math.max(n,l),o)}function Ar(l){return!l.some(Number.isNaN)}const cc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Yi(l,n,o){return l+o*(n-l)}function Oo(l,n,o){return l.map((d,v)=>Yi(d,n[v],o))}class vr{constructor(n,o,d,v=1,x=!0){this.r=n,this.g=o,this.b=d,this.a=v,x||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[n,o,d,v]))}static parse(n){if(n instanceof vr)return n;if(typeof n!="string")return;const o=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=jo(cc,d);if(v){const[T,E,I]=v;return[T/255,E/255,I/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const T=d.length<6?1:2;let E=1;return[Yc(d.slice(E,E+=T)),Yc(d.slice(E,E+=T)),Yc(d.slice(E,E+=T)),Yc(d.slice(E,E+T)||"ff")]}if(d.startsWith("rgb")){const T=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[E,I,R,L,V,W,K,ee,le,he,ye,Be]=T,Ae=[L||" ",K||" ",he].join("");if(Ae==="  "||Ae==="  /"||Ae===",,"||Ae===",,,"){const je=[R,W,le].join(""),Ye=je==="%%%"?100:je===""?255:0;if(Ye){const it=[Ri(+I/Ye,0,1),Ri(+V/Ye,0,1),Ri(+ee/Ye,0,1),ye?ih(+ye,Be):1];if(Ar(it))return it}}return}}const x=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[T,E,I,R,L,V,W,K,ee]=x,le=[I||" ",L||" ",W].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const he=[+E,Ri(+R,0,100),Ri(+V,0,100),K?ih(+K,ee):1];if(Ar(he))return function([ye,Be,Ae,je]){function Ye(it){const gt=(it+ye/30)%12,Et=Be*Math.min(Ae,1-Ae);return Ae-Et*Math.max(-1,Math.min(gt-3,9-gt,1))}return ye=Df(ye),Be/=100,Ae/=100,[Ye(0),Ye(8),Ye(4),je]}(he)}}}(n);return o?new vr(...o,!1):void 0}get rgb(){const{r:n,g:o,b:d,a:v}=this,x=v||1/0;return this.overwriteGetter("rgb",[n/x,o/x,d/x,v])}get hcl(){return this.overwriteGetter("hcl",function(n){const[o,d,v,x]=ua(n),T=Math.sqrt(d*d+v*v);return[Math.round(1e4*T)?Df(Math.atan2(v,d)*eh):NaN,T,o,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ua(this.rgb))}overwriteGetter(n,o){return Object.defineProperty(this,n,{value:o}),o}toString(){const[n,o,d,v]=this.rgb;return`rgba(${[n,o,d].map(x=>Math.round(255*x)).join(",")},${v})`}static interpolate(n,o,d,v="rgb"){switch(v){case"rgb":{const[x,T,E,I]=Oo(n.rgb,o.rgb,d);return new vr(x,T,E,I,!1)}case"hcl":{const[x,T,E,I]=n.hcl,[R,L,V,W]=o.hcl;let K,ee;if(isNaN(x)||isNaN(R))isNaN(x)?isNaN(R)?K=NaN:(K=R,E!==1&&E!==0||(ee=L)):(K=x,V!==1&&V!==0||(ee=T));else{let Ae=R-x;R>x&&Ae>180?Ae-=360:R<x&&x-R>180&&(Ae+=360),K=x+d*Ae}const[le,he,ye,Be]=function([Ae,je,Ye,it]){return Ae=isNaN(Ae)?0:Ae*zf,rh([Ye,Math.cos(Ae)*je,Math.sin(Ae)*je,it])}([K,ee??Yi(T,L,d),Yi(E,V,d),Yi(I,W,d)]);return new vr(le,he,ye,Be,!1)}case"lab":{const[x,T,E,I]=rh(Oo(n.lab,o.lab,d));return new vr(x,T,E,I,!1)}}}}vr.black=new vr(0,0,0,1),vr.white=new vr(1,1,1,1),vr.transparent=new vr(0,0,0,0),vr.red=new vr(1,0,0,1);class pl{constructor(n,o,d){this.sensitivity=n?o?"variant":"case":o?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,o){return this.collator.compare(n,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Io=["bottom","center","top"];class co{constructor(n,o,d,v,x,T){this.text=n,this.image=o,this.scale=d,this.fontStack=v,this.textColor=x,this.verticalAlign=T}}class Ki{constructor(n){this.sections=n}static fromString(n){return new Ki([new co(n,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Ki?n:Ki.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class ui{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ui)return n;if(typeof n=="number")return new ui([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const o of n)if(typeof o!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new ui(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,d){return new ui(Oo(n.values,o.values,d))}}class hi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof hi)return n;if(typeof n=="number")return new hi([n]);if(Array.isArray(n)){for(const o of n)if(typeof o!="number")return;return new hi(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,d){return new hi(Oo(n.values,o.values,d))}}class Yn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Yn)return n;if(typeof n=="string"){const d=vr.parse(n);return d?new Yn([d]):void 0}if(!Array.isArray(n))return;const o=[];for(const d of n){if(typeof d!="string")return;const v=vr.parse(d);if(!v)return;o.push(v)}return new Yn(o)}toString(){return JSON.stringify(this.values)}static interpolate(n,o,d,v="rgb"){const x=[];if(n.values.length!=o.values.length)throw new Error(`colorArray: Arrays have mismatched length (${n.values.length} vs. ${o.values.length}), cannot interpolate.`);for(let T=0;T<n.values.length;T++)x.push(vr.interpolate(n.values[T],o.values[T],d,v));return new Yn(x)}}class Br extends Error{constructor(n){super(n),this.name="RuntimeError"}toJSON(){return this.message}}const Ms=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class di{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof di)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let o=0;o<n.length;o+=2){const d=n[o],v=n[o+1];if(typeof d!="string"||!Ms.has(d)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new di(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,d){const v=n.values,x=o.values;if(v.length!==x.length)throw new Br(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${o.toString()}`);const T=[];for(let E=0;E<v.length;E+=2){if(v[E]!==x[E])throw new Br(`Cannot interpolate values containing mismatched anchors. from[${E}]: ${v[E]}, to[${E}]: ${x[E]}`);T.push(v[E]);const[I,R]=v[E+1],[L,V]=x[E+1];T.push([Yi(I,L,d),Yi(R,V,d)])}return new di(T)}}class ei{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ei({name:n,available:!1}):null}}class Ni{constructor(n,o,d){this.from=n,this.to=o,this.transition=d}static interpolate(n,o,d){return new Ni(n,o,d)}static parse(n){return n instanceof Ni?n:Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"?new Ni(n[0],n[1],n[2]):typeof n=="object"&&typeof n.from=="string"&&typeof n.to=="string"&&typeof n.transition=="number"?new Ni(n.from,n.to,n.transition):typeof n=="string"?new Ni(n,n,1):void 0}}function Ps(l,n,o,d){return typeof l=="number"&&l>=0&&l<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof o=="number"&&o>=0&&o<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[l,n,o,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[l,n,o,d]:[l,n,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function rn(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof Ni||l instanceof vr||l instanceof pl||l instanceof Ki||l instanceof ui||l instanceof hi||l instanceof Yn||l instanceof di||l instanceof ei)return!0;if(Array.isArray(l)){for(const n of l)if(!rn(n))return!1;return!0}if(typeof l=="object"){for(const n in l)if(!rn(l[n]))return!1;return!0}return!1}function yn(l){if(l===null)return Wn;if(typeof l=="string")return fr;if(typeof l=="boolean")return dr;if(typeof l=="number")return Ct;if(l instanceof vr)return yi;if(l instanceof Ni)return dn;if(l instanceof pl)return Fa;if(l instanceof Ki)return Eo;if(l instanceof ui)return cl;if(l instanceof hi)return Co;if(l instanceof Yn)return lc;if(l instanceof di)return Mn;if(l instanceof ei)return ul;if(Array.isArray(l)){const n=l.length;let o;for(const d of l){const v=yn(d);if(o){if(o===v)continue;o=gr;break}o=v}return Di(o||gr,n)}return so}function _r(l){const n=typeof l;return l===null?"":n==="string"||n==="number"||n==="boolean"?String(l):l instanceof vr||l instanceof Ni||l instanceof Ki||l instanceof ui||l instanceof hi||l instanceof Yn||l instanceof di||l instanceof ei?l.toString():JSON.stringify(l)}class lr{constructor(n,o){this.type=n,this.value=o}static parse(n,o){if(n.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!rn(n[1]))return o.error("invalid value");const d=n[1];let v=yn(d);const x=o.expectedType;return v.kind!=="array"||v.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(v=x),new lr(v,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const fi={string:fr,number:Ct,boolean:dr,object:so};class cr{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let d,v=1;const x=n[0];if(x==="array"){let E,I;if(n.length>2){const R=n[1];if(typeof R!="string"||!(R in fi)||R==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);E=fi[R],v++}else E=gr;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return o.error('The length argument to "array" must be a positive integer literal',2);I=n[2],v++}d=Di(E,I)}else{if(!fi[x])throw new Error(`Types doesn't contain name = ${x}`);d=fi[x]}const T=[];for(;v<n.length;v++){const E=o.parse(n[v],v,gr);if(!E)return null;T.push(E)}return new cr(d,T)}evaluate(n){for(let o=0;o<this.args.length;o++){const d=this.args[o].evaluate(n);if(!dl(this.type,yn(d)))return d;if(o===this.args.length-1)throw new Br(`Expected value to be of type ${Vr(this.type)}, but found ${Vr(yn(d))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const ml={"to-boolean":dr,"to-color":yi,"to-number":Ct,"to-string":fr};class ti{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const d=n[0];if(!ml[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&n.length!==2)return o.error("Expected one argument.");const v=ml[d],x=[];for(let T=1;T<n.length;T++){const E=o.parse(n[T],T,gr);if(!E)return null;x.push(E)}return new ti(v,x)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let o,d;for(const v of this.args){if(o=v.evaluate(n),d=null,o instanceof vr)return o;if(typeof o=="string"){const x=n.parseColor(o);if(x)return x}else if(Array.isArray(o)&&(d=o.length<3||o.length>4?`Invalid rgba value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Ps(o[0],o[1],o[2],o[3]),!d))return new vr(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Br(d||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const d of this.args){o=d.evaluate(n);const v=ui.parse(o);if(v)return v}throw new Br(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"numberArray":{let o;for(const d of this.args){o=d.evaluate(n);const v=hi.parse(o);if(v)return v}throw new Br(`Could not parse numberArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"colorArray":{let o;for(const d of this.args){o=d.evaluate(n);const v=Yn.parse(o);if(v)return v}throw new Br(`Could not parse colorArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const d of this.args){o=d.evaluate(n);const v=di.parse(o);if(v)return v}throw new Br(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const d of this.args){if(o=d.evaluate(n),o===null)return 0;const v=Number(o);if(!isNaN(v))return v}throw new Br(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return Ki.fromString(_r(this.args[0].evaluate(n)));case"resolvedImage":return ei.fromString(_r(this.args[0].evaluate(n)));case"projectionDefinition":return this.args[0].evaluate(n);default:return _r(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const pd=["Unknown","Point","LineString","Polygon"];class gl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?pd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let o=this._parseColorCache.get(n);return o||(o=vr.parse(n),this._parseColorCache.set(n,o)),o}}class yl{constructor(n,o,d=[],v,x=new Ai,T=[]){this.registry=n,this.path=d,this.key=d.map(E=>`[${E}]`).join(""),this.scope=x,this.errors=T,this.expectedType=v,this._isConstant=o}parse(n,o,d,v,x={}){return o?this.concat(o,d,v)._parse(n,x):this._parse(n,x)}_parse(n,o){function d(v,x,T){return T==="assert"?new cr(x,[v]):T==="coerce"?new ti(x,[v]):v}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=n[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[v];if(x){let T=x.parse(n,this);if(!T)return null;if(this.expectedType){const E=this.expectedType,I=T.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||I.kind!=="value"){if(E.kind==="projectionDefinition"&&["string","array"].includes(I.kind)||["color","formatted","resolvedImage"].includes(E.kind)&&["value","string"].includes(I.kind)||["padding","numberArray"].includes(E.kind)&&["value","number","array"].includes(I.kind)||E.kind==="colorArray"&&["value","string","array"].includes(I.kind)||E.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(I.kind))T=d(T,E,o.typeAnnotation||"coerce");else if(this.checkSubtype(E,I))return null}else T=d(T,E,o.typeAnnotation||"assert")}if(!(T instanceof lr)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){const E=new gl;try{T=new lr(T.type,T.evaluate(E))}catch(I){return this.error(I.message),null}}return T}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,o,d){const v=typeof n=="number"?this.path.concat(n):this.path,x=d?this.scope.concat(d):this.scope;return new yl(this.registry,this._isConstant,v,o||null,x,this.errors)}error(n,...o){const d=`${this.key}${o.map(v=>`[${v}]`).join("")}`;this.errors.push(new ca(d,n))}checkSubtype(n,o){const d=dl(n,o);return d&&this.error(d),d}}class ko{constructor(n,o){this.type=o.type,this.bindings=[].concat(n),this.result=o}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const o of this.bindings)n(o[1]);n(this.result)}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const d=[];for(let x=1;x<n.length-1;x+=2){const T=n[x];if(typeof T!="string")return o.error(`Expected string, but found ${typeof T} instead.`,x);if(/[^a-zA-Z0-9_]/.test(T))return o.error("Variable names must contain only alphanumeric characters or '_'.",x);const E=o.parse(n[x+1],x+1);if(!E)return null;d.push([T,E])}const v=o.parse(n[n.length-1],n.length-1,o.expectedType,d);return v?new ko(d,v):null}outputDefined(){return this.result.outputDefined()}}class Es{constructor(n,o){this.type=o.type,this.name=n,this.boundExpression=o}static parse(n,o){if(n.length!==2||typeof n[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const d=n[1];return o.scope.has(d)?new Es(d,o.scope.get(d)):o.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class ah{constructor(n,o,d){this.type=n,this.index=o,this.input=d}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=o.parse(n[1],1,Ct),v=o.parse(n[2],2,Di(o.expectedType||gr));return d&&v?new ah(v.type.itemType,d,v):null}evaluate(n){const o=this.index.evaluate(n),d=this.input.evaluate(n);if(o<0)throw new Br(`Array index out of bounds: ${o} < 0.`);if(o>=d.length)throw new Br(`Array index out of bounds: ${o} > ${d.length-1}.`);if(o!==Math.floor(o))throw new Br(`Array index must be an integer, but found ${o} instead.`);return d[o]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class oh{constructor(n,o){this.type=dr,this.needle=n,this.haystack=o}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=o.parse(n[1],1,gr),v=o.parse(n[2],2,gr);return d&&v?As(d.type,[dr,fr,Ct,Wn,gr])?new oh(d,v):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vr(d.type)} instead`):null}evaluate(n){const o=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!d)return!1;if(!rs(o,["boolean","string","number","null"]))throw new Br(`Expected first argument to be of type boolean, string, number or null, but found ${Vr(yn(o))} instead.`);if(!rs(d,["string","array"]))throw new Br(`Expected second argument to be of type array or string, but found ${Vr(yn(d))} instead.`);return d.indexOf(o)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Kc{constructor(n,o,d){this.type=Ct,this.needle=n,this.haystack=o,this.fromIndex=d}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const d=o.parse(n[1],1,gr),v=o.parse(n[2],2,gr);if(!d||!v)return null;if(!As(d.type,[dr,fr,Ct,Wn,gr]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vr(d.type)} instead`);if(n.length===4){const x=o.parse(n[3],3,Ct);return x?new Kc(d,v,x):null}return new Kc(d,v)}evaluate(n){const o=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!rs(o,["boolean","string","number","null"]))throw new Br(`Expected first argument to be of type boolean, string, number or null, but found ${Vr(yn(o))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(n)),rs(d,["string"])){const x=d.indexOf(o,v);return x===-1?-1:[...d.slice(0,x)].length}if(rs(d,["array"]))return d.indexOf(o,v);throw new Br(`Expected second argument to be of type array or string, but found ${Vr(yn(d))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class zo{constructor(n,o,d,v,x,T){this.inputType=n,this.type=o,this.input=d,this.cases=v,this.outputs=x,this.otherwise=T}static parse(n,o){if(n.length<5)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return o.error("Expected an even number of arguments.");let d,v;o.expectedType&&o.expectedType.kind!=="value"&&(v=o.expectedType);const x={},T=[];for(let R=2;R<n.length-1;R+=2){let L=n[R];const V=n[R+1];Array.isArray(L)||(L=[L]);const W=o.concat(R);if(L.length===0)return W.error("Expected at least one branch label.");for(const ee of L){if(typeof ee!="number"&&typeof ee!="string")return W.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return W.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return W.error("Numeric branch labels must be integer values.");if(d){if(W.checkSubtype(d,yn(ee)))return null}else d=yn(ee);if(x[String(ee)]!==void 0)return W.error("Branch labels must be unique.");x[String(ee)]=T.length}const K=o.parse(V,R,v);if(!K)return null;v=v||K.type,T.push(K)}const E=o.parse(n[1],1,gr);if(!E)return null;const I=o.parse(n[n.length-1],n.length-1,v);return I?E.type.kind!=="value"&&o.concat(1).checkSubtype(d,E.type)?null:new zo(d,v,E,x,T,I):null}evaluate(n){const o=this.input.evaluate(n);return(yn(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class ri{constructor(n,o,d){this.type=n,this.branches=o,this.otherwise=d}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return o.error("Expected an odd number of arguments.");let d;o.expectedType&&o.expectedType.kind!=="value"&&(d=o.expectedType);const v=[];for(let T=1;T<n.length-1;T+=2){const E=o.parse(n[T],T,dr);if(!E)return null;const I=o.parse(n[T+1],T+1,d);if(!I)return null;v.push([E,I]),d=d||I.type}const x=o.parse(n[n.length-1],n.length-1,d);if(!x)return null;if(!d)throw new Error("Can't infer output type");return new ri(d,v,x)}evaluate(n){for(const[o,d]of this.branches)if(o.evaluate(n))return d.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[o,d]of this.branches)n(o),n(d);n(this.otherwise)}outputDefined(){return this.branches.every(([n,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class vl{constructor(n,o,d,v){this.type=n,this.input=o,this.beginIndex=d,this.endIndex=v}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const d=o.parse(n[1],1,gr),v=o.parse(n[2],2,Ct);if(!d||!v)return null;if(!As(d.type,[Di(gr),fr,gr]))return o.error(`Expected first argument to be of type array or string, but found ${Vr(d.type)} instead`);if(n.length===4){const x=o.parse(n[3],3,Ct);return x?new vl(d.type,d,v,x):null}return new vl(d.type,d,v)}evaluate(n){const o=this.input.evaluate(n),d=this.beginIndex.evaluate(n);let v;if(this.endIndex&&(v=this.endIndex.evaluate(n)),rs(o,["string"]))return[...o].slice(d,v).join("");if(rs(o,["array"]))return o.slice(d,v);throw new Br(`Expected first argument to be of type array or string, but found ${Vr(yn(o))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Qc(l,n){const o=l.length-1;let d,v,x=0,T=o,E=0;for(;x<=T;)if(E=Math.floor((x+T)/2),d=l[E],v=l[E+1],d<=n){if(E===o||n<v)return E;x=E+1}else{if(!(d>n))throw new Br("Input is not a number.");T=E-1}return 0}class Cs{constructor(n,o,d){this.type=n,this.input=o,this.labels=[],this.outputs=[];for(const[v,x]of d)this.labels.push(v),this.outputs.push(x)}static parse(n,o){if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");const d=o.parse(n[1],1,Ct);if(!d)return null;const v=[];let x=null;o.expectedType&&o.expectedType.kind!=="value"&&(x=o.expectedType);for(let T=1;T<n.length;T+=2){const E=T===1?-1/0:n[T],I=n[T+1],R=T,L=T+1;if(typeof E!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(v.length&&v[v.length-1][0]>=E)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);const V=o.parse(I,L,x);if(!V)return null;x=x||V.type,v.push([E,V])}return new Cs(x,d,v)}evaluate(n){const o=this.labels,d=this.outputs;if(o.length===1)return d[0].evaluate(n);const v=this.input.evaluate(n);if(v<=o[0])return d[0].evaluate(n);const x=o.length;return v>=o[x-1]?d[x-1].evaluate(n):d[Qc(o,v)].evaluate(n)}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function vi(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var sh,Jc,Nf=function(){if(Jc)return sh;function l(n,o,d,v){this.cx=3*n,this.bx=3*(d-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(v-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=o,this.p2x=d,this.p2y=v}return Jc=1,sh=l,l.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,o){if(o===void 0&&(o=1e-6),n<0)return 0;if(n>1)return 1;for(var d=n,v=0;v<8;v++){var x=this.sampleCurveX(d)-n;if(Math.abs(x)<o)return d;var T=this.sampleCurveDerivativeX(d);if(Math.abs(T)<1e-6)break;d-=x/T}var E=0,I=1;for(d=n,v=0;v<20&&(x=this.sampleCurveX(d),!(Math.abs(x-n)<o));v++)n>x?E=d:I=d,d=.5*(I-E)+E;return d},solve:function(n,o){return this.sampleCurveY(this.solveCurveX(n,o))}},sh}(),Pm=vi(Nf);class pi{constructor(n,o,d,v,x){this.type=n,this.operator=o,this.interpolation=d,this.input=v,this.labels=[],this.outputs=[];for(const[T,E]of x)this.labels.push(T),this.outputs.push(E)}static interpolationFactor(n,o,d,v){let x=0;if(n.name==="exponential")x=uc(o,n.base,d,v);else if(n.name==="linear")x=uc(o,1,d,v);else if(n.name==="cubic-bezier"){const T=n.controlPoints;x=new Pm(T[0],T[1],T[2],T[3]).solve(uc(o,1,d,v))}return x}static parse(n,o){let[d,v,x,...T]=n;if(!Array.isArray(v)||v.length===0)return o.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const R=v[1];if(typeof R!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:R}}else{if(v[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const R=v.slice(1);if(R.length!==4||R.some(L=>typeof L!="number"||L<0||L>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:R}}}if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(x=o.parse(x,2,Ct),!x)return null;const E=[];let I=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||o.expectedType==lc?o.expectedType&&o.expectedType.kind!=="value"&&(I=o.expectedType):I=yi;for(let R=0;R<T.length;R+=2){const L=T[R],V=T[R+1],W=R+3,K=R+4;if(typeof L!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(E.length&&E[E.length-1][0]>=L)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);const ee=o.parse(V,K,I);if(!ee)return null;I=I||ee.type,E.push([L,ee])}return lo(I,Ct)||lo(I,dn)||lo(I,yi)||lo(I,cl)||lo(I,Co)||lo(I,lc)||lo(I,Mn)||lo(I,Di(Ct))?new pi(I,d,v,x,E):o.error(`Type ${Vr(I)} is not interpolatable.`)}evaluate(n){const o=this.labels,d=this.outputs;if(o.length===1)return d[0].evaluate(n);const v=this.input.evaluate(n);if(v<=o[0])return d[0].evaluate(n);const x=o.length;if(v>=o[x-1])return d[x-1].evaluate(n);const T=Qc(o,v),E=pi.interpolationFactor(this.interpolation,v,o[T],o[T+1]),I=d[T].evaluate(n),R=d[T+1].evaluate(n);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Yi(I,R,E);case"color":return vr.interpolate(I,R,E);case"padding":return ui.interpolate(I,R,E);case"colorArray":return Yn.interpolate(I,R,E);case"numberArray":return hi.interpolate(I,R,E);case"variableAnchorOffsetCollection":return di.interpolate(I,R,E);case"array":return Oo(I,R,E);case"projectionDefinition":return Ni.interpolate(I,R,E)}case"interpolate-hcl":switch(this.type.kind){case"color":return vr.interpolate(I,R,E,"hcl");case"colorArray":return Yn.interpolate(I,R,E,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return vr.interpolate(I,R,E,"lab");case"colorArray":return Yn.interpolate(I,R,E,"lab")}}}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function uc(l,n,o,d){const v=d-o,x=l-o;return v===0?0:n===1?x/v:(Math.pow(n,x)-1)/(Math.pow(n,v)-1)}const ha={color:vr.interpolate,number:Yi,padding:ui.interpolate,numberArray:hi.interpolate,colorArray:Yn.interpolate,variableAnchorOffsetCollection:di.interpolate,array:Oo};class lh{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let d=null;const v=o.expectedType;v&&v.kind!=="value"&&(d=v);const x=[];for(const E of n.slice(1)){const I=o.parse(E,1+x.length,d,void 0,{typeAnnotation:"omit"});if(!I)return null;d=d||I.type,x.push(I)}if(!d)throw new Error("No output type");const T=v&&x.some(E=>dl(v,E.type));return new lh(T?gr:d,x)}evaluate(n){let o,d=null,v=0;for(const x of this.args)if(v++,d=x.evaluate(n),d&&d instanceof ei&&!d.available&&(o||(o=d.name),d=null,v===this.args.length&&(d=o)),d!==null)break;return d}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function md(l,n){return l==="=="||l==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function eu(l,n,o,d){return d.compare(n,o)===0}function Do(l,n,o){const d=l!=="=="&&l!=="!=";return class vD{constructor(x,T,E){this.type=dr,this.lhs=x,this.rhs=T,this.collator=E,this.hasUntypedArgument=x.type.kind==="value"||T.type.kind==="value"}static parse(x,T){if(x.length!==3&&x.length!==4)return T.error("Expected two or three arguments.");const E=x[0];let I=T.parse(x[1],1,gr);if(!I)return null;if(!md(E,I.type))return T.concat(1).error(`"${E}" comparisons are not supported for type '${Vr(I.type)}'.`);let R=T.parse(x[2],2,gr);if(!R)return null;if(!md(E,R.type))return T.concat(2).error(`"${E}" comparisons are not supported for type '${Vr(R.type)}'.`);if(I.type.kind!==R.type.kind&&I.type.kind!=="value"&&R.type.kind!=="value")return T.error(`Cannot compare types '${Vr(I.type)}' and '${Vr(R.type)}'.`);d&&(I.type.kind==="value"&&R.type.kind!=="value"?I=new cr(R.type,[I]):I.type.kind!=="value"&&R.type.kind==="value"&&(R=new cr(I.type,[R])));let L=null;if(x.length===4){if(I.type.kind!=="string"&&R.type.kind!=="string"&&I.type.kind!=="value"&&R.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(L=T.parse(x[3],3,Fa),!L)return null}return new vD(I,R,L)}evaluate(x){const T=this.lhs.evaluate(x),E=this.rhs.evaluate(x);if(d&&this.hasUntypedArgument){const I=yn(T),R=yn(E);if(I.kind!==R.kind||I.kind!=="string"&&I.kind!=="number")throw new Br(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${I.kind}, ${R.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const I=yn(T),R=yn(E);if(I.kind!=="string"||R.kind!=="string")return n(x,T,E)}return this.collator?o(x,T,E,this.collator.evaluate(x)):n(x,T,E)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const uo=Do("==",function(l,n,o){return n===o},eu),Lf=Do("!=",function(l,n,o){return n!==o},function(l,n,o,d){return!eu(0,n,o,d)}),ch=Do("<",function(l,n,o){return n<o},function(l,n,o,d){return d.compare(n,o)<0}),Em=Do(">",function(l,n,o){return n>o},function(l,n,o,d){return d.compare(n,o)>0}),gd=Do("<=",function(l,n,o){return n<=o},function(l,n,o,d){return d.compare(n,o)<=0}),Cm=Do(">=",function(l,n,o){return n>=o},function(l,n,o,d){return d.compare(n,o)>=0});class uh{constructor(n,o,d){this.type=Fa,this.locale=d,this.caseSensitive=n,this.diacriticSensitive=o}static parse(n,o){if(n.length!==2)return o.error("Expected one argument.");const d=n[1];if(typeof d!="object"||Array.isArray(d))return o.error("Collator options argument must be an object.");const v=o.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,dr);if(!v)return null;const x=o.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,dr);if(!x)return null;let T=null;return d.locale&&(T=o.parse(d.locale,1,fr),!T)?null:new uh(v,x,T)}evaluate(n){return new pl(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class yd{constructor(n,o,d,v,x){this.type=fr,this.number=n,this.locale=o,this.currency=d,this.minFractionDigits=v,this.maxFractionDigits=x}static parse(n,o){if(n.length!==3)return o.error("Expected two arguments.");const d=o.parse(n[1],1,Ct);if(!d)return null;const v=n[2];if(typeof v!="object"||Array.isArray(v))return o.error("NumberFormat options argument must be an object.");let x=null;if(v.locale&&(x=o.parse(v.locale,1,fr),!x))return null;let T=null;if(v.currency&&(T=o.parse(v.currency,1,fr),!T))return null;let E=null;if(v["min-fraction-digits"]&&(E=o.parse(v["min-fraction-digits"],1,Ct),!E))return null;let I=null;return v["max-fraction-digits"]&&(I=o.parse(v["max-fraction-digits"],1,Ct),!I)?null:new yd(d,x,T,E,I)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class hh{constructor(n){this.type=Eo,this.sections=n}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const d=n[1];if(!Array.isArray(d)&&typeof d=="object")return o.error("First argument must be an image or text section.");const v=[];let x=!1;for(let T=1;T<=n.length-1;++T){const E=n[T];if(x&&typeof E=="object"&&!Array.isArray(E)){x=!1;let I=null;if(E["font-scale"]&&(I=o.parse(E["font-scale"],1,Ct),!I))return null;let R=null;if(E["text-font"]&&(R=o.parse(E["text-font"],1,Di(fr)),!R))return null;let L=null;if(E["text-color"]&&(L=o.parse(E["text-color"],1,yi),!L))return null;let V=null;if(E["vertical-align"]){if(typeof E["vertical-align"]=="string"&&!Io.includes(E["vertical-align"]))return o.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${E["vertical-align"]}' instead.`);if(V=o.parse(E["vertical-align"],1,fr),!V)return null}const W=v[v.length-1];W.scale=I,W.font=R,W.textColor=L,W.verticalAlign=V}else{const I=o.parse(n[T],1,gr);if(!I)return null;const R=I.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,v.push({content:I,scale:null,font:null,textColor:null,verticalAlign:null})}}return new hh(v)}evaluate(n){return new Ki(this.sections.map(o=>{const d=o.content.evaluate(n);return yn(d)===ul?new co("",d,null,null,null,o.verticalAlign?o.verticalAlign.evaluate(n):null):new co(_r(d),null,o.scale?o.scale.evaluate(n):null,o.font?o.font.evaluate(n).join(","):null,o.textColor?o.textColor.evaluate(n):null,o.verticalAlign?o.verticalAlign.evaluate(n):null)}))}eachChild(n){for(const o of this.sections)n(o.content),o.scale&&n(o.scale),o.font&&n(o.font),o.textColor&&n(o.textColor),o.verticalAlign&&n(o.verticalAlign)}outputDefined(){return!1}}class js{constructor(n){this.type=ul,this.input=n}static parse(n,o){if(n.length!==2)return o.error("Expected two arguments.");const d=o.parse(n[1],1,fr);return d?new js(d):o.error("No image name provided.")}evaluate(n){const o=this.input.evaluate(n),d=ei.fromString(o);return d&&n.availableImages&&(d.available=n.availableImages.indexOf(o)>-1),d}eachChild(n){n(this.input)}outputDefined(){return!1}}class _l{constructor(n){this.type=Ct,this.input=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const d=o.parse(n[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Vr(d.type)} instead.`):new _l(d):null}evaluate(n){const o=this.input.evaluate(n);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new Br(`Expected value to be of type string or array, but found ${Vr(yn(o))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const ho=8192;function vd(l,n){const o=(180+l[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,v=Math.pow(2,n.z);return[Math.round(o*v*ho),Math.round(d*v*ho)]}function dh(l,n){const o=Math.pow(2,n.z);return[(v=(l[0]/ho+n.x)/o,360*v-180),(d=(l[1]/ho+n.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,v}function bl(l,n){l[0]=Math.min(l[0],n[0]),l[1]=Math.min(l[1],n[1]),l[2]=Math.max(l[2],n[0]),l[3]=Math.max(l[3],n[1])}function hc(l,n){return!(l[0]<=n[0]||l[2]>=n[2]||l[1]<=n[1]||l[3]>=n[3])}function Bf(l,n,o){const d=l[0]-n[0],v=l[1]-n[1],x=l[0]-o[0],T=l[1]-o[1];return d*T-x*v==0&&d*x<=0&&v*T<=0}function is(l,n,o,d){return(v=[d[0]-o[0],d[1]-o[1]])[0]*(x=[n[0]-l[0],n[1]-l[1]])[1]-v[1]*x[0]!=0&&!(!fc(l,n,o,d)||!fc(o,d,l,n));var v,x}function jm(l,n,o){for(const d of o)for(let v=0;v<d.length-1;++v)if(is(l,n,d[v],d[v+1]))return!0;return!1}function dc(l,n,o=!1){let d=!1;for(const E of n)for(let I=0;I<E.length-1;I++){if(Bf(l,E[I],E[I+1]))return o;(x=E[I])[1]>(v=l)[1]!=(T=E[I+1])[1]>v[1]&&v[0]<(T[0]-x[0])*(v[1]-x[1])/(T[1]-x[1])+x[0]&&(d=!d)}var v,x,T;return d}function Ff(l,n){for(const o of n)if(dc(l,o))return!0;return!1}function fh(l,n){for(const o of l)if(!dc(o,n))return!1;for(let o=0;o<l.length-1;++o)if(jm(l[o],l[o+1],n))return!1;return!0}function _d(l,n){for(const o of n)if(fh(l,o))return!0;return!1}function fc(l,n,o,d){const v=d[0]-o[0],x=d[1]-o[1],T=(l[0]-o[0])*x-v*(l[1]-o[1]),E=(n[0]-o[0])*x-v*(n[1]-o[1]);return T>0&&E<0||T<0&&E>0}function xl(l,n,o){const d=[];for(let v=0;v<l.length;v++){const x=[];for(let T=0;T<l[v].length;T++){const E=vd(l[v][T],o);bl(n,E),x.push(E)}d.push(x)}return d}function $f(l,n,o){const d=[];for(let v=0;v<l.length;v++){const x=xl(l[v],n,o);d.push(x)}return d}function tu(l,n,o,d){if(l[0]<o[0]||l[0]>o[2]){const v=.5*d;let x=l[0]-o[0]>v?-d:o[0]-l[0]>v?d:0;x===0&&(x=l[0]-o[2]>v?-d:o[2]-l[0]>v?d:0),l[0]+=x}bl(n,l)}function pc(l,n,o,d){const v=Math.pow(2,d.z)*ho,x=[d.x*ho,d.y*ho],T=[];for(const E of l)for(const I of E){const R=[I.x+x[0],I.y+x[1]];tu(R,n,o,v),T.push(R)}return T}function bd(l,n,o,d){const v=Math.pow(2,d.z)*ho,x=[d.x*ho,d.y*ho],T=[];for(const I of l){const R=[];for(const L of I){const V=[L.x+x[0],L.y+x[1]];bl(n,V),R.push(V)}T.push(R)}if(n[2]-n[0]<=v/2){(E=n)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const I of T)for(const R of I)tu(R,n,o,v)}var E;return T}class as{constructor(n,o){this.type=dr,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(rn(n[1])){const d=n[1];if(d.type==="FeatureCollection"){const v=[];for(const x of d.features){const{type:T,coordinates:E}=x.geometry;T==="Polygon"&&v.push(E),T==="MultiPolygon"&&v.push(...E)}if(v.length)return new as(d,{type:"MultiPolygon",coordinates:v})}else if(d.type==="Feature"){const v=d.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new as(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new as(d,d)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(o,d){const v=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],T=o.canonicalID();if(d.type==="Polygon"){const E=xl(d.coordinates,x,T),I=pc(o.geometry(),v,x,T);if(!hc(v,x))return!1;for(const R of I)if(!dc(R,E))return!1}if(d.type==="MultiPolygon"){const E=$f(d.coordinates,x,T),I=pc(o.geometry(),v,x,T);if(!hc(v,x))return!1;for(const R of I)if(!Ff(R,E))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(o,d){const v=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],T=o.canonicalID();if(d.type==="Polygon"){const E=xl(d.coordinates,x,T),I=bd(o.geometry(),v,x,T);if(!hc(v,x))return!1;for(const R of I)if(!fh(R,E))return!1}if(d.type==="MultiPolygon"){const E=$f(d.coordinates,x,T),I=bd(o.geometry(),v,x,T);if(!hc(v,x))return!1;for(const R of I)if(!_d(R,E))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let ph=class{constructor(l=[],n=(o,d)=>o<d?-1:o>d?1:0){if(this.data=l,this.length=this.data.length,this.compare=n,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:n,compare:o}=this,d=n[l];for(;l>0;){const v=l-1>>1,x=n[v];if(o(d,x)>=0)break;n[l]=x,l=v}n[l]=d}_down(l){const{data:n,compare:o}=this,d=this.length>>1,v=n[l];for(;l<d;){let x=1+(l<<1);const T=x+1;if(T<this.length&&o(n[T],n[x])<0&&(x=T),o(n[x],v)>=0)break;n[l]=n[x],l=x}n[l]=v}};function xd(l,n,o=0,d=l.length-1,v=wd){for(;d>o;){if(d-o>600){const I=d-o+1,R=n-o+1,L=Math.log(I),V=.5*Math.exp(2*L/3),W=.5*Math.sqrt(L*V*(I-V)/I)*(R-I/2<0?-1:1);xd(l,n,Math.max(o,Math.floor(n-R*V/I+W)),Math.min(d,Math.floor(n+(I-R)*V/I+W)),v)}const x=l[n];let T=o,E=d;for(Os(l,o,n),v(l[d],x)>0&&Os(l,o,d);T<E;){for(Os(l,T,E),T++,E--;v(l[T],x)<0;)T++;for(;v(l[E],x)>0;)E--}v(l[o],x)===0?Os(l,o,E):(E++,Os(l,E,d)),E<=n&&(o=E+1),n<=E&&(d=E-1)}}function Os(l,n,o){const d=l[n];l[n]=l[o],l[o]=d}function wd(l,n){return l<n?-1:l>n?1:0}function mh(l,n){if(l.length<=1)return[l];const o=[];let d,v;for(const x of l){const T=qf(x);T!==0&&(x.area=Math.abs(T),v===void 0&&(v=T<0),v===T<0?(d&&o.push(d),d=[x]):d.push(x))}if(d&&o.push(d),n>1)for(let x=0;x<o.length;x++)o[x].length<=n||(xd(o[x],n,1,o[x].length-1,Om),o[x]=o[x].slice(0,n));return o}function Om(l,n){return n.area-l.area}function qf(l){let n=0;for(let o,d,v=0,x=l.length,T=x-1;v<x;T=v++)o=l[v],d=l[T],n+=(d.x-o.x)*(o.y+d.y);return n}const Sd=1/298.257223563,Uf=Sd*(2-Sd),da=Math.PI/180;class wl{constructor(n){const o=6378.137*da*1e3,d=Math.cos(n*da),v=1/(1-Uf*(1-d*d)),x=Math.sqrt(v);this.kx=o*x*d,this.ky=o*x*v*(1-Uf)}distance(n,o){const d=this.wrap(n[0]-o[0])*this.kx,v=(n[1]-o[1])*this.ky;return Math.sqrt(d*d+v*v)}pointOnLine(n,o){let d,v,x,T,E=1/0;for(let I=0;I<n.length-1;I++){let R=n[I][0],L=n[I][1],V=this.wrap(n[I+1][0]-R)*this.kx,W=(n[I+1][1]-L)*this.ky,K=0;V===0&&W===0||(K=(this.wrap(o[0]-R)*this.kx*V+(o[1]-L)*this.ky*W)/(V*V+W*W),K>1?(R=n[I+1][0],L=n[I+1][1]):K>0&&(R+=V/this.kx*K,L+=W/this.ky*K)),V=this.wrap(o[0]-R)*this.kx,W=(o[1]-L)*this.ky;const ee=V*V+W*W;ee<E&&(E=ee,d=R,v=L,x=I,T=K)}return{point:[d,v],index:x,t:Math.max(0,Math.min(1,T))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function gh(l,n){return n[0]-l[0]}function ru(l){return l[1]-l[0]+1}function Ro(l,n){return l[1]>=l[0]&&l[1]<n}function yh(l,n){if(l[0]>l[1])return[null,null];const o=ru(l);if(n){if(o===2)return[l,null];const v=Math.floor(o/2);return[[l[0],l[0]+v],[l[0]+v,l[1]]]}if(o===1)return[l,null];const d=Math.floor(o/2)-1;return[[l[0],l[0]+d],[l[0]+d+1,l[1]]]}function nu(l,n){if(!Ro(n,l.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let d=n[0];d<=n[1];++d)bl(o,l[d]);return o}function Fr(l){const n=[1/0,1/0,-1/0,-1/0];for(const o of l)for(const d of o)bl(n,d);return n}function Sl(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function iu(l,n,o){if(!Sl(l)||!Sl(n))return NaN;let d=0,v=0;return l[2]<n[0]&&(d=n[0]-l[2]),l[0]>n[2]&&(d=l[0]-n[2]),l[1]>n[3]&&(v=l[1]-n[3]),l[3]<n[1]&&(v=n[1]-l[3]),o.distance([0,0],[d,v])}function fo(l,n,o){const d=o.pointOnLine(n,l);return o.distance(l,d.point)}function au(l,n,o,d,v){const x=Math.min(fo(l,[o,d],v),fo(n,[o,d],v)),T=Math.min(fo(o,[l,n],v),fo(d,[l,n],v));return Math.min(x,T)}function Vf(l,n,o,d,v){if(!Ro(n,l.length)||!Ro(d,o.length))return 1/0;let x=1/0;for(let T=n[0];T<n[1];++T){const E=l[T],I=l[T+1];for(let R=d[0];R<d[1];++R){const L=o[R],V=o[R+1];if(is(E,I,L,V))return 0;x=Math.min(x,au(E,I,L,V,v))}}return x}function Tl(l,n,o,d,v){if(!Ro(n,l.length)||!Ro(d,o.length))return NaN;let x=1/0;for(let T=n[0];T<=n[1];++T)for(let E=d[0];E<=d[1];++E)if(x=Math.min(x,v.distance(l[T],o[E])),x===0)return x;return x}function mc(l,n,o){if(dc(l,n,!0))return 0;let d=1/0;for(const v of n){const x=v[0],T=v[v.length-1];if(x!==T&&(d=Math.min(d,fo(l,[T,x],o)),d===0))return d;const E=o.pointOnLine(v,l);if(d=Math.min(d,o.distance(l,E.point)),d===0)return d}return d}function Td(l,n,o,d){if(!Ro(n,l.length))return NaN;for(let x=n[0];x<=n[1];++x)if(dc(l[x],o,!0))return 0;let v=1/0;for(let x=n[0];x<n[1];++x){const T=l[x],E=l[x+1];for(const I of o)for(let R=0,L=I.length,V=L-1;R<L;V=R++){const W=I[V],K=I[R];if(is(T,E,W,K))return 0;v=Math.min(v,au(T,E,W,K,d))}}return v}function Ad(l,n){for(const o of l)for(const d of o)if(dc(d,n,!0))return!0;return!1}function Al(l,n,o,d=1/0){const v=Fr(l),x=Fr(n);if(d!==1/0&&iu(v,x,o)>=d)return d;if(hc(v,x)){if(Ad(l,n))return 0}else if(Ad(n,l))return 0;let T=1/0;for(const E of l)for(let I=0,R=E.length,L=R-1;I<R;L=I++){const V=E[L],W=E[I];for(const K of n)for(let ee=0,le=K.length,he=le-1;ee<le;he=ee++){const ye=K[he],Be=K[ee];if(is(V,W,ye,Be))return 0;T=Math.min(T,au(V,W,ye,Be,o))}}return T}function Md(l,n,o,d,v,x){if(!x)return;const T=iu(nu(d,x),v,o);T<n&&l.push([T,x,[0,0]])}function ou(l,n,o,d,v,x,T){if(!x||!T)return;const E=iu(nu(d,x),nu(v,T),o);E<n&&l.push([E,x,T])}function su(l,n,o,d,v=1/0){let x=Math.min(d.distance(l[0],o[0][0]),v);if(x===0)return x;const T=new ph([[0,[0,l.length-1],[0,0]]],gh),E=Fr(o);for(;T.length>0;){const I=T.pop();if(I[0]>=x)continue;const R=I[1],L=n?50:100;if(ru(R)<=L){if(!Ro(R,l.length))return NaN;if(n){const V=Td(l,R,o,d);if(isNaN(V)||V===0)return V;x=Math.min(x,V)}else for(let V=R[0];V<=R[1];++V){const W=mc(l[V],o,d);if(x=Math.min(x,W),x===0)return 0}}else{const V=yh(R,n);Md(T,x,d,l,E,V[0]),Md(T,x,d,l,E,V[1])}}return x}function vh(l,n,o,d,v,x=1/0){let T=Math.min(x,v.distance(l[0],o[0]));if(T===0)return T;const E=new ph([[0,[0,l.length-1],[0,o.length-1]]],gh);for(;E.length>0;){const I=E.pop();if(I[0]>=T)continue;const R=I[1],L=I[2],V=n?50:100,W=d?50:100;if(ru(R)<=V&&ru(L)<=W){if(!Ro(R,l.length)&&Ro(L,o.length))return NaN;let K;if(n&&d)K=Vf(l,R,o,L,v),T=Math.min(T,K);else if(n&&!d){const ee=l.slice(R[0],R[1]+1);for(let le=L[0];le<=L[1];++le)if(K=fo(o[le],ee,v),T=Math.min(T,K),T===0)return T}else if(!n&&d){const ee=o.slice(L[0],L[1]+1);for(let le=R[0];le<=R[1];++le)if(K=fo(l[le],ee,v),T=Math.min(T,K),T===0)return T}else K=Tl(l,R,o,L,v),T=Math.min(T,K)}else{const K=yh(R,n),ee=yh(L,d);ou(E,T,v,l,o,K[0],ee[0]),ou(E,T,v,l,o,K[0],ee[1]),ou(E,T,v,l,o,K[1],ee[0]),ou(E,T,v,l,o,K[1],ee[1])}}return T}function Pd(l){return l.type==="MultiPolygon"?l.coordinates.map(n=>({type:"Polygon",coordinates:n})):l.type==="MultiLineString"?l.coordinates.map(n=>({type:"LineString",coordinates:n})):l.type==="MultiPoint"?l.coordinates.map(n=>({type:"Point",coordinates:n})):[l]}class Ml{constructor(n,o){this.type=Ct,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(rn(n[1])){const d=n[1];if(d.type==="FeatureCollection")return new Ml(d,d.features.map(v=>Pd(v.geometry)).flat());if(d.type==="Feature")return new Ml(d,Pd(d.geometry));if("type"in d&&"coordinates"in d)return new Ml(d,Pd(d))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(o,d){const v=o.geometry(),x=v.flat().map(I=>dh([I.x,I.y],o.canonical));if(v.length===0)return NaN;const T=new wl(x[0][1]);let E=1/0;for(const I of d){switch(I.type){case"Point":E=Math.min(E,vh(x,!1,[I.coordinates],!1,T,E));break;case"LineString":E=Math.min(E,vh(x,!1,I.coordinates,!0,T,E));break;case"Polygon":E=Math.min(E,su(x,!1,I.coordinates,T,E))}if(E===0)return E}return E}(n,this.geometries);if(n.geometryType()==="LineString")return function(o,d){const v=o.geometry(),x=v.flat().map(I=>dh([I.x,I.y],o.canonical));if(v.length===0)return NaN;const T=new wl(x[0][1]);let E=1/0;for(const I of d){switch(I.type){case"Point":E=Math.min(E,vh(x,!0,[I.coordinates],!1,T,E));break;case"LineString":E=Math.min(E,vh(x,!0,I.coordinates,!0,T,E));break;case"Polygon":E=Math.min(E,su(x,!0,I.coordinates,T,E))}if(E===0)return E}return E}(n,this.geometries);if(n.geometryType()==="Polygon")return function(o,d){const v=o.geometry();if(v.length===0||v[0].length===0)return NaN;const x=mh(v,0).map(I=>I.map(R=>R.map(L=>dh([L.x,L.y],o.canonical)))),T=new wl(x[0][0][0][1]);let E=1/0;for(const I of d)for(const R of x){switch(I.type){case"Point":E=Math.min(E,su([I.coordinates],!1,R,T,E));break;case"LineString":E=Math.min(E,su(I.coordinates,!0,R,T,E));break;case"Polygon":E=Math.min(E,Al(R,I.coordinates,T,E))}if(E===0)return E}return E}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class gc{constructor(n){this.type=gr,this.key=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const d=n[1];return d==null?o.error("Global state property must be defined."):typeof d!="string"?o.error(`Global state property must be string, but found ${typeof n[1]} instead.`):new gc(d)}evaluate(n){var o;const d=(o=n.globals)===null||o===void 0?void 0:o.globalState;return d&&Object.keys(d).length!==0?jo(d,this.key):null}eachChild(){}outputDefined(){return!1}}const Pl={"==":uo,"!=":Lf,">":Em,"<":ch,">=":Cm,"<=":gd,array:cr,at:ah,boolean:cr,case:ri,coalesce:lh,collator:uh,format:hh,image:js,in:oh,"index-of":Kc,interpolate:pi,"interpolate-hcl":pi,"interpolate-lab":pi,length:_l,let:ko,literal:lr,match:zo,number:cr,"number-format":yd,object:cr,slice:vl,step:Cs,string:cr,"to-boolean":ti,"to-color":ti,"to-number":ti,"to-string":ti,var:Es,within:as,distance:Ml,"global-state":gc};class fa{constructor(n,o,d,v){this.name=n,this.type=o,this._evaluate=d,this.args=v}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,o){const d=n[0],v=fa.definitions[d];if(!v)return o.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(v)?v[0]:v.type,T=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,E=T.filter(([R])=>!Array.isArray(R)||R.length===n.length-1);let I=null;for(const[R,L]of E){I=new yl(o.registry,os,o.path,null,o.scope);const V=[];let W=!1;for(let K=1;K<n.length;K++){const ee=n[K],le=Array.isArray(R)?R[K-1]:R.type,he=I.parse(ee,1+V.length,le);if(!he){W=!0;break}V.push(he)}if(!W)if(Array.isArray(R)&&R.length!==V.length)I.error(`Expected ${R.length} arguments, but found ${V.length} instead.`);else{for(let K=0;K<V.length;K++){const ee=Array.isArray(R)?R[K]:R.type,le=V[K];I.concat(K+1).checkSubtype(ee,le.type)}if(I.errors.length===0)return new fa(d,x,L,V)}}if(E.length===1)o.errors.push(...I.errors);else{const R=(E.length?E:T).map(([V])=>{return W=V,Array.isArray(W)?`(${W.map(Vr).join(", ")})`:`(${Vr(W.type)}...)`;var W}).join(" | "),L=[];for(let V=1;V<n.length;V++){const W=o.parse(n[V],1+L.length);if(!W)return null;L.push(Vr(W.type))}o.error(`Expected arguments of type ${R}, but found (${L.join(", ")}) instead.`)}return null}static register(n,o){fa.definitions=o;for(const d in o)n[d]=fa}}function qa(l,[n,o,d,v]){n=n.evaluate(l),o=o.evaluate(l),d=d.evaluate(l);const x=v?v.evaluate(l):1,T=Ps(n,o,d,x);if(T)throw new Br(T);return new vr(n/255,o/255,d/255,x,!1)}function Ed(l,n){return l in n}function pa(l,n){const o=n[l];return o===void 0?null:o}function _i(l){return{type:l}}function os(l){if(l instanceof Es)return os(l.boundExpression);if(l instanceof fa&&l.name==="error"||l instanceof uh||l instanceof as||l instanceof Ml||l instanceof gc)return!1;const n=l instanceof ti||l instanceof cr;let o=!0;return l.eachChild(d=>{o=n?o&&os(d):o&&d instanceof lr}),!!o&&yc(l)&&El(l,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function yc(l){if(l instanceof fa&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof as||l instanceof Ml)return!1;let n=!0;return l.eachChild(o=>{n&&!yc(o)&&(n=!1)}),n}function Is(l){if(l instanceof fa&&l.name==="feature-state")return!1;let n=!0;return l.eachChild(o=>{n&&!Is(o)&&(n=!1)}),n}function El(l,n){if(l instanceof fa&&n.indexOf(l.name)>=0)return!1;let o=!0;return l.eachChild(d=>{o&&!El(d,n)&&(o=!1)}),o}function _h(l){return{result:"success",value:l}}function po(l){return{result:"error",value:l}}function Cl(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function lu(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function No(l){return!!l.expression&&l.expression.interpolated}function Mr(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Li(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)&&yn(l)===so}function Cd(l){return l}function mo(l,n){const o=l.stops&&typeof l.stops[0][0]=="object",d=o||!(o||l.property!==void 0),v=l.type||(No(n)?"exponential":"interval"),x=function(L){switch(L.type){case"color":return vr.parse;case"padding":return ui.parse;case"numberArray":return hi.parse;case"colorArray":return Yn.parse;default:return null}}(n);if(x&&((l=Po({},l)).stops&&(l.stops=l.stops.map(L=>[L[0],x(L[1])])),l.default=x(l.default?l.default:n.default)),l.colorSpace&&(T=l.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var T;const E=function(L){switch(L){case"exponential":return cu;case"interval":return Lo;case"categorical":return bh;case"identity":return jd;default:throw new Error(`Unknown function type "${L}"`)}}(v);let I,R;if(v==="categorical"){I=Object.create(null);for(const L of l.stops)I[L[0]]=L[1];R=typeof l.stops[0][0]}if(o){const L={},V=[];for(let ee=0;ee<l.stops.length;ee++){const le=l.stops[ee],he=le[0].zoom;L[he]===void 0&&(L[he]={zoom:he,type:l.type,property:l.property,default:l.default,stops:[]},V.push(he)),L[he].stops.push([le[0].value,le[1]])}const W=[];for(const ee of V)W.push([L[ee].zoom,mo(L[ee],n)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:pi.interpolationFactor.bind(void 0,K),zoomStops:W.map(ee=>ee[0]),evaluate:({zoom:ee},le)=>cu({stops:W,base:l.base},n,ee).evaluate(ee,le)}}if(d){const L=v==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:pi.interpolationFactor.bind(void 0,L),zoomStops:l.stops.map(V=>V[0]),evaluate:({zoom:V})=>E(l,n,V,I,R)}}return{kind:"source",evaluate(L,V){const W=V&&V.properties?V.properties[l.property]:void 0;return W===void 0?vc(l.default,n.default):E(l,n,W,I,R)}}}function vc(l,n,o){return l!==void 0?l:n!==void 0?n:o!==void 0?o:void 0}function bh(l,n,o,d,v){return vc(typeof o===v?d[o]:void 0,l.default,n.default)}function Lo(l,n,o){if(Mr(o)!=="number")return vc(l.default,n.default);const d=l.stops.length;if(d===1||o<=l.stops[0][0])return l.stops[0][1];if(o>=l.stops[d-1][0])return l.stops[d-1][1];const v=Qc(l.stops.map(x=>x[0]),o);return l.stops[v][1]}function cu(l,n,o){const d=l.base!==void 0?l.base:1;if(Mr(o)!=="number")return vc(l.default,n.default);const v=l.stops.length;if(v===1||o<=l.stops[0][0])return l.stops[0][1];if(o>=l.stops[v-1][0])return l.stops[v-1][1];const x=Qc(l.stops.map(L=>L[0]),o),T=function(L,V,W,K){const ee=K-W,le=L-W;return ee===0?0:V===1?le/ee:(Math.pow(V,le)-1)/(Math.pow(V,ee)-1)}(o,d,l.stops[x][0],l.stops[x+1][0]),E=l.stops[x][1],I=l.stops[x+1][1],R=ha[n.type]||Cd;return typeof E.evaluate=="function"?{evaluate(...L){const V=E.evaluate.apply(void 0,L),W=I.evaluate.apply(void 0,L);if(V!==void 0&&W!==void 0)return R(V,W,T,l.colorSpace)}}:R(E,I,T,l.colorSpace)}function jd(l,n,o){switch(n.type){case"color":o=vr.parse(o);break;case"formatted":o=Ki.fromString(o.toString());break;case"resolvedImage":o=ei.fromString(o.toString());break;case"padding":o=ui.parse(o);break;case"colorArray":o=Yn.parse(o);break;case"numberArray":o=hi.parse(o);break;default:Mr(o)===n.type||n.type==="enum"&&n.values[o]||(o=void 0)}return vc(o,l.default,n.default)}fa.register(Pl,{error:[{kind:"error"},[fr],(l,[n])=>{throw new Br(n.evaluate(l))}],typeof:[fr,[gr],(l,[n])=>Vr(yn(n.evaluate(l)))],"to-rgba":[Di(Ct,4),[yi],(l,[n])=>{const[o,d,v,x]=n.evaluate(l).rgb;return[255*o,255*d,255*v,x]}],rgb:[yi,[Ct,Ct,Ct],qa],rgba:[yi,[Ct,Ct,Ct,Ct],qa],has:{type:dr,overloads:[[[fr],(l,[n])=>Ed(n.evaluate(l),l.properties())],[[fr,so],(l,[n,o])=>Ed(n.evaluate(l),o.evaluate(l))]]},get:{type:gr,overloads:[[[fr],(l,[n])=>pa(n.evaluate(l),l.properties())],[[fr,so],(l,[n,o])=>pa(n.evaluate(l),o.evaluate(l))]]},"feature-state":[gr,[fr],(l,[n])=>pa(n.evaluate(l),l.featureState||{})],properties:[so,[],l=>l.properties()],"geometry-type":[fr,[],l=>l.geometryType()],id:[gr,[],l=>l.id()],zoom:[Ct,[],l=>l.globals.zoom],"heatmap-density":[Ct,[],l=>l.globals.heatmapDensity||0],elevation:[Ct,[],l=>l.globals.elevation||0],"line-progress":[Ct,[],l=>l.globals.lineProgress||0],accumulated:[gr,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[Ct,_i(Ct),(l,n)=>{let o=0;for(const d of n)o+=d.evaluate(l);return o}],"*":[Ct,_i(Ct),(l,n)=>{let o=1;for(const d of n)o*=d.evaluate(l);return o}],"-":{type:Ct,overloads:[[[Ct,Ct],(l,[n,o])=>n.evaluate(l)-o.evaluate(l)],[[Ct],(l,[n])=>-n.evaluate(l)]]},"/":[Ct,[Ct,Ct],(l,[n,o])=>n.evaluate(l)/o.evaluate(l)],"%":[Ct,[Ct,Ct],(l,[n,o])=>n.evaluate(l)%o.evaluate(l)],ln2:[Ct,[],()=>Math.LN2],pi:[Ct,[],()=>Math.PI],e:[Ct,[],()=>Math.E],"^":[Ct,[Ct,Ct],(l,[n,o])=>Math.pow(n.evaluate(l),o.evaluate(l))],sqrt:[Ct,[Ct],(l,[n])=>Math.sqrt(n.evaluate(l))],log10:[Ct,[Ct],(l,[n])=>Math.log(n.evaluate(l))/Math.LN10],ln:[Ct,[Ct],(l,[n])=>Math.log(n.evaluate(l))],log2:[Ct,[Ct],(l,[n])=>Math.log(n.evaluate(l))/Math.LN2],sin:[Ct,[Ct],(l,[n])=>Math.sin(n.evaluate(l))],cos:[Ct,[Ct],(l,[n])=>Math.cos(n.evaluate(l))],tan:[Ct,[Ct],(l,[n])=>Math.tan(n.evaluate(l))],asin:[Ct,[Ct],(l,[n])=>Math.asin(n.evaluate(l))],acos:[Ct,[Ct],(l,[n])=>Math.acos(n.evaluate(l))],atan:[Ct,[Ct],(l,[n])=>Math.atan(n.evaluate(l))],min:[Ct,_i(Ct),(l,n)=>Math.min(...n.map(o=>o.evaluate(l)))],max:[Ct,_i(Ct),(l,n)=>Math.max(...n.map(o=>o.evaluate(l)))],abs:[Ct,[Ct],(l,[n])=>Math.abs(n.evaluate(l))],round:[Ct,[Ct],(l,[n])=>{const o=n.evaluate(l);return o<0?-Math.round(-o):Math.round(o)}],floor:[Ct,[Ct],(l,[n])=>Math.floor(n.evaluate(l))],ceil:[Ct,[Ct],(l,[n])=>Math.ceil(n.evaluate(l))],"filter-==":[dr,[fr,gr],(l,[n,o])=>l.properties()[n.value]===o.value],"filter-id-==":[dr,[gr],(l,[n])=>l.id()===n.value],"filter-type-==":[dr,[fr],(l,[n])=>l.geometryType()===n.value],"filter-<":[dr,[fr,gr],(l,[n,o])=>{const d=l.properties()[n.value],v=o.value;return typeof d==typeof v&&d<v}],"filter-id-<":[dr,[gr],(l,[n])=>{const o=l.id(),d=n.value;return typeof o==typeof d&&o<d}],"filter->":[dr,[fr,gr],(l,[n,o])=>{const d=l.properties()[n.value],v=o.value;return typeof d==typeof v&&d>v}],"filter-id->":[dr,[gr],(l,[n])=>{const o=l.id(),d=n.value;return typeof o==typeof d&&o>d}],"filter-<=":[dr,[fr,gr],(l,[n,o])=>{const d=l.properties()[n.value],v=o.value;return typeof d==typeof v&&d<=v}],"filter-id-<=":[dr,[gr],(l,[n])=>{const o=l.id(),d=n.value;return typeof o==typeof d&&o<=d}],"filter->=":[dr,[fr,gr],(l,[n,o])=>{const d=l.properties()[n.value],v=o.value;return typeof d==typeof v&&d>=v}],"filter-id->=":[dr,[gr],(l,[n])=>{const o=l.id(),d=n.value;return typeof o==typeof d&&o>=d}],"filter-has":[dr,[gr],(l,[n])=>n.value in l.properties()],"filter-has-id":[dr,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[dr,[Di(fr)],(l,[n])=>n.value.indexOf(l.geometryType())>=0],"filter-id-in":[dr,[Di(gr)],(l,[n])=>n.value.indexOf(l.id())>=0],"filter-in-small":[dr,[fr,Di(gr)],(l,[n,o])=>o.value.indexOf(l.properties()[n.value])>=0],"filter-in-large":[dr,[fr,Di(gr)],(l,[n,o])=>function(d,v,x,T){for(;x<=T;){const E=x+T>>1;if(v[E]===d)return!0;v[E]>d?T=E-1:x=E+1}return!1}(l.properties()[n.value],o.value,0,o.value.length-1)],all:{type:dr,overloads:[[[dr,dr],(l,[n,o])=>n.evaluate(l)&&o.evaluate(l)],[_i(dr),(l,n)=>{for(const o of n)if(!o.evaluate(l))return!1;return!0}]]},any:{type:dr,overloads:[[[dr,dr],(l,[n,o])=>n.evaluate(l)||o.evaluate(l)],[_i(dr),(l,n)=>{for(const o of n)if(o.evaluate(l))return!0;return!1}]]},"!":[dr,[dr],(l,[n])=>!n.evaluate(l)],"is-supported-script":[dr,[fr],(l,[n])=>{const o=l.globals&&l.globals.isSupportedScript;return!o||o(n.evaluate(l))}],upcase:[fr,[fr],(l,[n])=>n.evaluate(l).toUpperCase()],downcase:[fr,[fr],(l,[n])=>n.evaluate(l).toLowerCase()],concat:[fr,_i(gr),(l,n)=>n.map(o=>_r(o.evaluate(l))).join("")],"resolved-locale":[fr,[Fa],(l,[n])=>n.evaluate(l).resolvedLocale()]});class ks{constructor(n,o,d){this.expression=n,this._warningHistory={},this._evaluator=new gl,this._defaultValue=o?function(v){if(v.type==="color"&&Li(v.default))return new vr(0,0,0,0);switch(v.type){case"color":return vr.parse(v.default)||null;case"padding":return ui.parse(v.default)||null;case"numberArray":return hi.parse(v.default)||null;case"colorArray":return Yn.parse(v.default)||null;case"variableAnchorOffsetCollection":return di.parse(v.default)||null;case"projectionDefinition":return Ni.parse(v.default)||null;default:return v.default===void 0?null:v.default}}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null,this._globalState=d}evaluateWithoutErrorHandling(n,o,d,v,x,T){return this._globalState&&(n=Ea(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=o,this._evaluator.featureState=d,this._evaluator.canonical=v,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(n,o,d,v,x,T){this._globalState&&(n=Ea(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=o||null,this._evaluator.featureState=d||null,this._evaluator.canonical=v,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=T||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new Br(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function ss(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in Pl}function jl(l,n,o){const d=new yl(Pl,os,[],n?function(x){const T={color:yi,string:fr,number:Ct,enum:fr,boolean:dr,formatted:Eo,padding:cl,numberArray:Co,colorArray:lc,projectionDefinition:dn,resolvedImage:ul,variableAnchorOffsetCollection:Mn};return x.type==="array"?Di(T[x.value]||gr,x.length):T[x.type]}(n):void 0),v=d.parse(l,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?_h(new ks(v,n,o)):po(d.errors)}class Ol{constructor(n,o,d){this.kind=n,this._styleExpression=o,this.isStateDependent=n!=="constant"&&!Is(o.expression),this.globalStateRefs=Pa(o.expression),this._globalState=d}evaluateWithoutErrorHandling(n,o,d,v,x,T){return this._globalState&&(n=Ea(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,o,d,v,x,T)}evaluate(n,o,d,v,x,T){return this._globalState&&(n=Ea(n,this._globalState)),this._styleExpression.evaluate(n,o,d,v,x,T)}}class Qi{constructor(n,o,d,v,x){this.kind=n,this.zoomStops=d,this._styleExpression=o,this.isStateDependent=n!=="camera"&&!Is(o.expression),this.globalStateRefs=Pa(o.expression),this.interpolationType=v,this._globalState=x}evaluateWithoutErrorHandling(n,o,d,v,x,T){return this._globalState&&(n=Ea(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,o,d,v,x,T)}evaluate(n,o,d,v,x,T){return this._globalState&&(n=Ea(n,this._globalState)),this._styleExpression.evaluate(n,o,d,v,x,T)}interpolationFactor(n,o,d){return this.interpolationType?pi.interpolationFactor(this.interpolationType,n,o,d):0}}function ma(l,n,o){const d=jl(l,n,o);if(d.result==="error")return d;const v=d.value.expression,x=yc(v);if(!x&&!Cl(n))return po([new ca("","data expressions not supported")]);const T=El(v,["zoom"]);if(!T&&!lu(n))return po([new ca("","zoom expressions not supported")]);const E=Ua(v);return E||T?E instanceof ca?po([E]):E instanceof pi&&!No(n)?po([new ca("",'"interpolate" expressions cannot be used with this property')]):_h(E?new Qi(x?"camera":"composite",d.value,E.labels,E instanceof pi?E.interpolation:void 0,o):new Ol(x?"constant":"source",d.value,o)):po([new ca("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Bo{constructor(n,o){this._parameters=n,this._specification=o,Po(this,mo(this._parameters,this._specification))}static deserialize(n){return new Bo(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Ua(l){let n=null;if(l instanceof ko)n=Ua(l.result);else if(l instanceof lh){for(const o of l.args)if(n=Ua(o),n)break}else(l instanceof Cs||l instanceof pi)&&l.input instanceof fa&&l.input.name==="zoom"&&(n=l);return n instanceof ca||l.eachChild(o=>{const d=Ua(o);d instanceof ca?n=d:!n&&d?n=new ca("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&d&&n!==d&&(n=new ca("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Pa(l,n=new Set){return l instanceof gc&&n.add(l.key),l.eachChild(o=>{Pa(o,n)}),n}function Ea(l,n){const{zoom:o,heatmapDensity:d,elevation:v,lineProgress:x,isSupportedScript:T,accumulated:E}=l??{};return{zoom:o,heatmapDensity:d,elevation:v,lineProgress:x,isSupportedScript:T,accumulated:E,globalState:n}}function uu(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const n of l.slice(1))if(!uu(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Od={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Il(l,n){if(l==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};uu(l)||(l=Dr(l));const o=jl(l,Od,n);if(o.result==="error")throw new Error(o.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,v,x)=>o.value.evaluate(d,v,{},x),needGeometry:zn(l),getGlobalStateRefs:()=>Pa(o.value.expression)}}function Ji(l,n){return l<n?-1:l>n?1:0}function zn(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let n=1;n<l.length;n++)if(zn(l[n]))return!0;return!1}function Dr(l){if(!l)return!0;const n=l[0];return l.length<=1?n!=="any":n==="=="?Fo(l[1],l[2],"=="):n==="!="?Va(Fo(l[1],l[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Fo(l[1],l[2],n):n==="any"?(o=l.slice(1),["any"].concat(o.map(Dr))):n==="all"?["all"].concat(l.slice(1).map(Dr)):n==="none"?["all"].concat(l.slice(1).map(Dr).map(Va)):n==="in"?Ca(l[1],l.slice(2)):n==="!in"?Va(Ca(l[1],l.slice(2))):n==="has"?_c(l[1]):n!=="!has"||Va(_c(l[1]));var o}function Fo(l,n,o){switch(l){case"$type":return[`filter-type-${o}`,n];case"$id":return[`filter-id-${o}`,n];default:return[`filter-${o}`,l,n]}}function Ca(l,n){if(n.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(o=>typeof o!=typeof n[0])?["filter-in-large",l,["literal",n.sort(Ji)]]:["filter-in-small",l,["literal",n]]}}function _c(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Va(l){return["!",l]}function bc(l){const n=typeof l;if(n==="number"||n==="boolean"||n==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let v="[";for(const x of l)v+=`${bc(x)},`;return`${v}]`}const o=Object.keys(l).sort();let d="{";for(let v=0;v<o.length;v++)d+=`${JSON.stringify(o[v])}:${bc(l[o[v]])},`;return`${d}}`}function hu(l){let n="";for(const o of Cr)n+=`/${bc(l[o])}`;return n}function xc(l){const n=l.value;return n?[new wt(l.key,n,"constants have been deprecated as of v8")]:[]}function vn(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function zs(l){if(Array.isArray(l))return l.map(zs);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const n={};for(const o in l)n[o]=zs(l[o]);return n}return vn(l)}function Bi(l){const n=l.key,o=l.value,d=l.valueSpec||{},v=l.objectElementValidators||{},x=l.style,T=l.styleSpec,E=l.validateSpec;let I=[];const R=Mr(o);if(R!=="object")return[new wt(n,o,`object expected, ${R} found`)];for(const L in o){const V=L.split(".")[0],W=jo(d,V)||d["*"];let K;if(jo(v,V))K=v[V];else if(jo(d,V))K=E;else if(v["*"])K=v["*"];else{if(!d["*"]){I.push(new wt(n,o[L],`unknown property "${L}"`));continue}K=E}I=I.concat(K({key:(n&&`${n}.`)+L,value:o[L],valueSpec:W,style:x,styleSpec:T,object:o,objectKey:L,validateSpec:E},o))}for(const L in d)v[L]||d[L].required&&d[L].default===void 0&&o[L]===void 0&&I.push(new wt(n,o,`missing required property "${L}"`));return I}function du(l){const n=l.value,o=l.valueSpec,d=l.style,v=l.styleSpec,x=l.key,T=l.arrayElementValidator||l.validateSpec;if(Mr(n)!=="array")return[new wt(x,n,`array expected, ${Mr(n)} found`)];if(o.length&&n.length!==o.length)return[new wt(x,n,`array length ${o.length} expected, length ${n.length} found`)];if(o["min-length"]&&n.length<o["min-length"])return[new wt(x,n,`array length at least ${o["min-length"]} expected, length ${n.length} found`)];let E={type:o.value,values:o.values};v.$version<7&&(E.function=o.function),Mr(o.value)==="object"&&(E=o.value);let I=[];for(let R=0;R<n.length;R++)I=I.concat(T({array:n,arrayIndex:R,value:n[R],valueSpec:E,validateSpec:l.validateSpec,style:d,styleSpec:v,key:`${x}[${R}]`}));return I}function $o(l){const n=l.key,o=l.value,d=l.valueSpec;let v=Mr(o);return v==="number"&&o!=o&&(v="NaN"),v!=="number"?[new wt(n,o,`number expected, ${v} found`)]:"minimum"in d&&o<d.minimum?[new wt(n,o,`${o} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&o>d.maximum?[new wt(n,o,`${o} is greater than the maximum value ${d.maximum}`)]:[]}function go(l){const n=l.valueSpec,o=vn(l.value.type);let d,v,x,T={};const E=o!=="categorical"&&l.value.property===void 0,I=!E,R=Mr(l.value.stops)==="array"&&Mr(l.value.stops[0])==="array"&&Mr(l.value.stops[0][0])==="object",L=Bi({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(K){if(o==="identity")return[new wt(K.key,K.value,'identity function may not have a "stops" property')];let ee=[];const le=K.value;return ee=ee.concat(du({key:K.key,value:le,valueSpec:K.valueSpec,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:V})),Mr(le)==="array"&&le.length===0&&ee.push(new wt(K.key,le,"array must have at least one stop")),ee},default:function(K){return K.validateSpec({key:K.key,value:K.value,valueSpec:n,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec})}}});return o==="identity"&&E&&L.push(new wt(l.key,l.value,'missing required property "property"')),o==="identity"||l.value.stops||L.push(new wt(l.key,l.value,'missing required property "stops"')),o==="exponential"&&l.valueSpec.expression&&!No(l.valueSpec)&&L.push(new wt(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(I&&!Cl(l.valueSpec)?L.push(new wt(l.key,l.value,"property functions not supported")):E&&!lu(l.valueSpec)&&L.push(new wt(l.key,l.value,"zoom functions not supported"))),o!=="categorical"&&!R||l.value.property!==void 0||L.push(new wt(l.key,l.value,'"property" property is required')),L;function V(K){let ee=[];const le=K.value,he=K.key;if(Mr(le)!=="array")return[new wt(he,le,`array expected, ${Mr(le)} found`)];if(le.length!==2)return[new wt(he,le,`array length 2 expected, length ${le.length} found`)];if(R){if(Mr(le[0])!=="object")return[new wt(he,le,`object expected, ${Mr(le[0])} found`)];if(le[0].zoom===void 0)return[new wt(he,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new wt(he,le,"object stop key must have value")];if(x&&x>vn(le[0].zoom))return[new wt(he,le[0].zoom,"stop zoom values must appear in ascending order")];vn(le[0].zoom)!==x&&(x=vn(le[0].zoom),v=void 0,T={}),ee=ee.concat(Bi({key:`${he}[0]`,value:le[0],valueSpec:{zoom:{}},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:$o,value:W}}))}else ee=ee.concat(W({key:`${he}[0]`,value:le[0],validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec},le));return ss(zs(le[1]))?ee.concat([new wt(`${he}[1]`,le[1],"expressions are not allowed in function stops.")]):ee.concat(K.validateSpec({key:`${he}[1]`,value:le[1],valueSpec:n,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec}))}function W(K,ee){const le=Mr(K.value),he=vn(K.value),ye=K.value!==null?K.value:ee;if(d){if(le!==d)return[new wt(K.key,ye,`${le} stop domain type must match previous stop domain type ${d}`)]}else d=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new wt(K.key,ye,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&o!=="categorical"){let Be=`number expected, ${le} found`;return Cl(n)&&o===void 0&&(Be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new wt(K.key,ye,Be)]}return o!=="categorical"||le!=="number"||isFinite(he)&&Math.floor(he)===he?o!=="categorical"&&le==="number"&&v!==void 0&&he<v?[new wt(K.key,ye,"stop domain values must appear in ascending order")]:(v=he,o==="categorical"&&he in T?[new wt(K.key,ye,"stop domain values must be unique")]:(T[he]=!0,[])):[new wt(K.key,ye,`integer expected, found ${he}`)]}}function ga(l){const n=(l.expressionContext==="property"?ma:jl)(zs(l.value),l.valueSpec);if(n.result==="error")return n.value.map(d=>new wt(`${l.key}${d.key}`,l.value,d.message));const o=n.value.expression||n.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!o.outputDefined())return[new wt(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Is(o))return[new wt(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!Is(o))return[new wt(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!El(o,["zoom","feature-state"]))return[new wt(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!yc(o))return[new wt(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ya(l){const n=l.key,o=l.value,d=Mr(o);return d!=="string"?[new wt(n,o,`color expected, ${d} found`)]:vr.parse(String(o))?[]:[new wt(n,o,`color expected, "${o}" found`)]}function kl(l){const n=l.key,o=l.value,d=l.valueSpec,v=[];return Array.isArray(d.values)?d.values.indexOf(vn(o))===-1&&v.push(new wt(n,o,`expected one of [${d.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(d.values).indexOf(vn(o))===-1&&v.push(new wt(n,o,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(o)} found`)),v}function wc(l){return uu(zs(l.value))?ga(Po({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zl(l)}function zl(l){const n=l.value,o=l.key;if(Mr(n)!=="array")return[new wt(o,n,`array expected, ${Mr(n)} found`)];const d=l.styleSpec;let v,x=[];if(n.length<1)return[new wt(o,n,"filter array must have at least 1 element")];switch(x=x.concat(kl({key:`${o}[0]`,value:n[0],valueSpec:d.filter_operator,style:l.style,styleSpec:l.styleSpec})),vn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&vn(n[1])==="$type"&&x.push(new wt(o,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&x.push(new wt(o,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(v=Mr(n[1]),v!=="string"&&x.push(new wt(`${o}[1]`,n[1],`string expected, ${v} found`)));for(let T=2;T<n.length;T++)v=Mr(n[T]),vn(n[1])==="$type"?x=x.concat(kl({key:`${o}[${T}]`,value:n[T],valueSpec:d.geometry_type,style:l.style,styleSpec:l.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&x.push(new wt(`${o}[${T}]`,n[T],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let T=1;T<n.length;T++)x=x.concat(zl({key:`${o}[${T}]`,value:n[T],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":v=Mr(n[1]),n.length!==2?x.push(new wt(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):v!=="string"&&x.push(new wt(`${o}[1]`,n[1],`string expected, ${v} found`))}return x}function fu(l,n){const o=l.key,d=l.validateSpec,v=l.style,x=l.styleSpec,T=l.value,E=l.objectKey,I=x[`${n}_${l.layerType}`];if(!I)return[];const R=E.match(/^(.*)-transition$/);if(n==="paint"&&R&&I[R[1]]&&I[R[1]].transition)return d({key:o,value:T,valueSpec:x.transition,style:v,styleSpec:x});const L=l.valueSpec||I[E];if(!L)return[new wt(o,T,`unknown property "${E}"`)];let V;if(Mr(T)==="string"&&Cl(L)&&!L.tokens&&(V=/^{([^}]+)}$/.exec(T)))return[new wt(o,T,`"${E}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];const W=[];return l.layerType==="symbol"&&(E==="text-field"&&v&&!v.glyphs&&W.push(new wt(o,T,'use of "text-field" requires a style "glyphs" property')),E==="text-font"&&Li(zs(T))&&vn(T.type)==="identity"&&W.push(new wt(o,T,'"text-font" does not support identity functions'))),W.concat(d({key:l.key,value:T,valueSpec:L,style:v,styleSpec:x,expressionContext:"property",propertyType:n,propertyKey:E}))}function ls(l){return fu(l,"paint")}function bi(l){return fu(l,"layout")}function cs(l){let n=[];const o=l.value,d=l.key,v=l.style,x=l.styleSpec;if(Mr(o)!=="object")return[new wt(d,o,`object expected, ${Mr(o)} found`)];o.type||o.ref||n.push(new wt(d,o,'either "type" or "ref" is required'));let T=vn(o.type);const E=vn(o.ref);if(o.id){const I=vn(o.id);for(let R=0;R<l.arrayIndex;R++){const L=v.layers[R];vn(L.id)===I&&n.push(new wt(d,o.id,`duplicate layer id "${o.id}", previously used at line ${L.id.__line__}`))}}if("ref"in o){let I;["type","source","source-layer","filter","layout"].forEach(R=>{R in o&&n.push(new wt(d,o[R],`"${R}" is prohibited for ref layers`))}),v.layers.forEach(R=>{vn(R.id)===E&&(I=R)}),I?I.ref?n.push(new wt(d,o.ref,"ref cannot reference another ref layer")):T=vn(I.type):n.push(new wt(d,o.ref,`ref layer "${E}" not found`))}else if(T!=="background")if(o.source){const I=v.sources&&v.sources[o.source],R=I&&vn(I.type);I?R==="vector"&&T==="raster"?n.push(new wt(d,o.source,`layer "${o.id}" requires a raster source`)):R!=="raster-dem"&&T==="hillshade"||R!=="raster-dem"&&T==="color-relief"?n.push(new wt(d,o.source,`layer "${o.id}" requires a raster-dem source`)):R==="raster"&&T!=="raster"?n.push(new wt(d,o.source,`layer "${o.id}" requires a vector source`)):R!=="vector"||o["source-layer"]?R==="raster-dem"&&T!=="hillshade"&&T!=="color-relief"?n.push(new wt(d,o.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):T!=="line"||!o.paint||!o.paint["line-gradient"]||R==="geojson"&&I.lineMetrics||n.push(new wt(d,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new wt(d,o,`layer "${o.id}" must specify a "source-layer"`)):n.push(new wt(d,o.source,`source "${o.source}" not found`))}else n.push(new wt(d,o,'missing required property "source"'));return n=n.concat(Bi({key:d,value:o,valueSpec:x.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${d}.type`,value:o.type,valueSpec:x.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:o,objectKey:"type"}),filter:wc,layout:I=>Bi({layer:o,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":R=>bi(Po({layerType:T},R))}}),paint:I=>Bi({layer:o,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":R=>ls(Po({layerType:T},R))}})}})),n}function Ds(l){const n=l.value,o=l.key,d=Mr(n);return d!=="string"?[new wt(o,n,`string expected, ${d} found`)]:[]}const Gf={promoteId:function({key:l,value:n}){if(Mr(n)==="string")return Ds({key:l,value:n});{const o=[];for(const d in n)o.push(...Ds({key:`${l}.${d}`,value:n[d]}));return o}}};function Zf(l){const n=l.value,o=l.key,d=l.styleSpec,v=l.style,x=l.validateSpec;if(!n.type)return[new wt(o,n,'"type" is required')];const T=vn(n.type);let E;switch(T){case"vector":case"raster":return E=Bi({key:o,value:n,valueSpec:d[`source_${T.replace("-","_")}`],style:l.style,styleSpec:d,objectElementValidators:Gf,validateSpec:x}),E;case"raster-dem":return E=function(I){var R;const L=(R=I.sourceName)!==null&&R!==void 0?R:"",V=I.value,W=I.styleSpec,K=W.source_raster_dem,ee=I.style;let le=[];const he=Mr(V);if(V===void 0)return le;if(he!=="object")return le.push(new wt("source_raster_dem",V,`object expected, ${he} found`)),le;const ye=vn(V.encoding)==="custom",Be=["redFactor","greenFactor","blueFactor","baseShift"],Ae=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const je in V)!ye&&Be.includes(je)?le.push(new wt(je,V[je],`In "${L}": "${je}" is only valid when "encoding" is set to "custom". ${Ae} encoding found`)):K[je]?le=le.concat(I.validateSpec({key:je,value:V[je],valueSpec:K[je],validateSpec:I.validateSpec,style:ee,styleSpec:W})):le.push(new wt(je,V[je],`unknown property "${je}"`));return le}({sourceName:o,value:n,style:l.style,styleSpec:d,validateSpec:x}),E;case"geojson":if(E=Bi({key:o,value:n,valueSpec:d.source_geojson,style:v,styleSpec:d,validateSpec:x,objectElementValidators:Gf}),n.cluster)for(const I in n.clusterProperties){const[R,L]=n.clusterProperties[I],V=typeof R=="string"?[R,["accumulated"],["get",I]]:R;E.push(...ga({key:`${o}.${I}.map`,value:L,expressionContext:"cluster-map"})),E.push(...ga({key:`${o}.${I}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return E;case"video":return Bi({key:o,value:n,valueSpec:d.source_video,style:v,validateSpec:x,styleSpec:d});case"image":return Bi({key:o,value:n,valueSpec:d.source_image,style:v,validateSpec:x,styleSpec:d});case"canvas":return[new wt(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return kl({key:`${o}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Hf(l){const n=l.value,o=l.styleSpec,d=o.light,v=l.style;let x=[];const T=Mr(n);if(n===void 0)return x;if(T!=="object")return x=x.concat([new wt("light",n,`object expected, ${T} found`)]),x;for(const E in n){const I=E.match(/^(.*)-transition$/);x=x.concat(I&&d[I[1]]&&d[I[1]].transition?l.validateSpec({key:E,value:n[E],valueSpec:o.transition,validateSpec:l.validateSpec,style:v,styleSpec:o}):d[E]?l.validateSpec({key:E,value:n[E],valueSpec:d[E],validateSpec:l.validateSpec,style:v,styleSpec:o}):[new wt(E,n[E],`unknown property "${E}"`)])}return x}function ni(l){const n=l.value,o=l.styleSpec,d=o.sky,v=l.style,x=Mr(n);if(n===void 0)return[];if(x!=="object")return[new wt("sky",n,`object expected, ${x} found`)];let T=[];for(const E in n)T=T.concat(d[E]?l.validateSpec({key:E,value:n[E],valueSpec:d[E],style:v,styleSpec:o}):[new wt(E,n[E],`unknown property "${E}"`)]);return T}function xh(l){const n=l.value,o=l.styleSpec,d=o.terrain,v=l.style;let x=[];const T=Mr(n);if(n===void 0)return x;if(T!=="object")return x=x.concat([new wt("terrain",n,`object expected, ${T} found`)]),x;for(const E in n)x=x.concat(d[E]?l.validateSpec({key:E,value:n[E],valueSpec:d[E],validateSpec:l.validateSpec,style:v,styleSpec:o}):[new wt(E,n[E],`unknown property "${E}"`)]);return x}function qo(l){let n=[];const o=l.value,d=l.key;if(Array.isArray(o)){const v=[],x=[];for(const T in o)o[T].id&&v.includes(o[T].id)&&n.push(new wt(d,o,`all the sprites' ids must be unique, but ${o[T].id} is duplicated`)),v.push(o[T].id),o[T].url&&x.includes(o[T].url)&&n.push(new wt(d,o,`all the sprites' URLs must be unique, but ${o[T].url} is duplicated`)),x.push(o[T].url),n=n.concat(Bi({key:`${d}[${T}]`,value:o[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return n}return Ds({key:d,value:o})}function Uo(l){return n=l.value,n&&n.constructor===Object?[]:[new wt(l.key,l.value,`object expected, ${Mr(l.value)} found`)];var n}const Fi={"*":()=>[],array:du,boolean:function(l){const n=l.value,o=l.key,d=Mr(n);return d!=="boolean"?[new wt(o,n,`boolean expected, ${d} found`)]:[]},number:$o,color:ya,constants:xc,enum:kl,filter:wc,function:go,layer:cs,object:Bi,source:Zf,light:Hf,sky:ni,terrain:xh,projection:function(l){const n=l.value,o=l.styleSpec,d=o.projection,v=l.style,x=Mr(n);if(n===void 0)return[];if(x!=="object")return[new wt("projection",n,`object expected, ${x} found`)];let T=[];for(const E in n)T=T.concat(d[E]?l.validateSpec({key:E,value:n[E],valueSpec:d[E],style:v,styleSpec:o}):[new wt(E,n[E],`unknown property "${E}"`)]);return T},projectionDefinition:function(l){const n=l.key;let o=l.value;o=o instanceof String?o.valueOf():o;const d=Mr(o);return d!=="array"||function(v){return Array.isArray(v)&&v.length===3&&typeof v[0]=="string"&&typeof v[1]=="string"&&typeof v[2]=="number"}(o)||function(v){return!!["interpolate","step","literal"].includes(v[0])}(o)?["array","string"].includes(d)?[]:[new wt(n,o,`projection expected, invalid type "${d}" found`)]:[new wt(n,o,`projection expected, invalid array ${JSON.stringify(o)} found`)]},string:Ds,formatted:function(l){return Ds(l).length===0?[]:ga(l)},resolvedImage:function(l){return Ds(l).length===0?[]:ga(l)},padding:function(l){const n=l.key,o=l.value;if(Mr(o)==="array"){if(o.length<1||o.length>4)return[new wt(n,o,`padding requires 1 to 4 values; ${o.length} values found`)];const d={type:"number"};let v=[];for(let x=0;x<o.length;x++)v=v.concat(l.validateSpec({key:`${n}[${x}]`,value:o[x],validateSpec:l.validateSpec,valueSpec:d}));return v}return $o({key:n,value:o,valueSpec:{}})},numberArray:function(l){const n=l.key,o=l.value;if(Mr(o)==="array"){const d={type:"number"};if(o.length<1)return[new wt(n,o,"array length at least 1 expected, length 0 found")];let v=[];for(let x=0;x<o.length;x++)v=v.concat(l.validateSpec({key:`${n}[${x}]`,value:o[x],validateSpec:l.validateSpec,valueSpec:d}));return v}return $o({key:n,value:o,valueSpec:{}})},colorArray:function(l){const n=l.key,o=l.value;if(Mr(o)==="array"){if(o.length<1)return[new wt(n,o,"array length at least 1 expected, length 0 found")];let d=[];for(let v=0;v<o.length;v++)d=d.concat(ya({key:`${n}[${v}]`,value:o[v]}));return d}return ya({key:n,value:o})},variableAnchorOffsetCollection:function(l){const n=l.key,o=l.value,d=Mr(o),v=l.styleSpec;if(d!=="array"||o.length<1||o.length%2!=0)return[new wt(n,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let T=0;T<o.length;T+=2)x=x.concat(kl({key:`${n}[${T}]`,value:o[T],valueSpec:v.layout_symbol["text-anchor"]})),x=x.concat(du({key:`${n}[${T+1}]`,value:o[T+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:v}));return x},sprite:qo,state:Uo};function ja(l){const n=l.value,o=l.valueSpec,d=l.styleSpec;return l.validateSpec=ja,o.expression&&Li(vn(n))?go(l):o.expression&&ss(zs(n))?ga(l):o.type&&Fi[o.type]?Fi[o.type](l):Bi(Po({},l,{valueSpec:o.type?d[o.type]:o}))}function Rs(l){const n=l.value,o=l.key,d=Ds(l);return d.length||(n.indexOf("{fontstack}")===-1&&d.push(new wt(o,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&d.push(new wt(o,n,'"glyphs" url must include a "{range}" token'))),d}function Ga(l,n=Ue){let o=[];return o=o.concat(ja({key:"",value:l,valueSpec:n.$root,styleSpec:n,style:l,validateSpec:ja,objectElementValidators:{glyphs:Rs,"*":()=>[]}})),l.constants&&(o=o.concat(xc({key:"constants",value:l.constants}))),Sc(o)}function Za(l){return function(n){return l(Object.assign({},n,{validateSpec:ja}))}}function Sc(l){return[].concat(l).sort((n,o)=>n.line-o.line)}function Oa(l){return function(...n){return Sc(l.apply(this,n))}}Ga.source=Oa(Za(Zf)),Ga.sprite=Oa(Za(qo)),Ga.glyphs=Oa(Za(Rs)),Ga.light=Oa(Za(Hf)),Ga.sky=Oa(Za(ni)),Ga.terrain=Oa(Za(xh)),Ga.state=Oa(Za(Uo)),Ga.layer=Oa(Za(cs)),Ga.filter=Oa(Za(wc)),Ga.paintProperty=Oa(Za(ls)),Ga.layoutProperty=Oa(Za(bi));const va=Ga,Id=va.light,Tc=va.sky,Xf=va.paintProperty,us=va.layoutProperty;function kd(l,n){let o=!1;if(n&&n.length)for(const d of n)l.fire(new Bt(new Error(d.message))),o=!0;return o}class Ns{constructor(n,o,d){const v=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const T=new Int32Array(this.arrayBuffer);n=T[0],this.d=(o=T[1])+2*(d=T[2]);for(let I=0;I<this.d*this.d;I++){const R=T[3+I],L=T[3+I+1];v.push(R===L?null:T.subarray(R,L))}const E=T[3+v.length+1];this.keys=T.subarray(T[3+v.length],E),this.bboxes=T.subarray(E),this.insert=this._insertReadonly}else{this.d=o+2*d;for(let T=0;T<this.d*this.d;T++)v.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=n,this.padding=d,this.scale=o/n,this.uid=0;const x=d/o*n;this.min=-x,this.max=n+x}insert(n,o,d,v,x){this._forEachCell(o,d,v,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(o),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,o,d,v,x,T){this.cells[x].push(T)}query(n,o,d,v,x){const T=this.min,E=this.max;if(n<=T&&o<=T&&E<=d&&E<=v&&!x)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(n,o,d,v,this._queryCell,I,{},x),I}}_queryCell(n,o,d,v,x,T,E,I){const R=this.cells[x];if(R!==null){const L=this.keys,V=this.bboxes;for(let W=0;W<R.length;W++){const K=R[W];if(E[K]===void 0){const ee=4*K;(I?I(V[ee+0],V[ee+1],V[ee+2],V[ee+3]):n<=V[ee+2]&&o<=V[ee+3]&&d>=V[ee+0]&&v>=V[ee+1])?(E[K]=!0,T.push(L[K])):E[K]=!1}}}}_forEachCell(n,o,d,v,x,T,E,I){const R=this._convertToCellCoord(n),L=this._convertToCellCoord(o),V=this._convertToCellCoord(d),W=this._convertToCellCoord(v);for(let K=R;K<=V;K++)for(let ee=L;ee<=W;ee++){const le=this.d*ee+K;if((!I||I(this._convertFromCellCoord(K),this._convertFromCellCoord(ee),this._convertFromCellCoord(K+1),this._convertFromCellCoord(ee+1)))&&x.call(this,n,o,d,v,le,T,E,I))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,o=3+this.cells.length+1+1;let d=0;for(let T=0;T<this.cells.length;T++)d+=this.cells[T].length;const v=new Int32Array(o+d+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let x=o;for(let T=0;T<n.length;T++){const E=n[T];v[3+T]=x,v.set(E,x),x+=E.length}return v[3+n.length]=x,v.set(this.keys,x),x+=this.keys.length,v[3+n.length+1]=x,v.set(this.bboxes,x),x+=this.bboxes.length,v.buffer}static serialize(n,o){const d=n.toArrayBuffer();return o&&o.push(d),{buffer:d}}static deserialize(n){return new Ns(n.buffer)}}const yo={};function zt(l,n,o={}){if(yo[l])throw new Error(`${l} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:l,writeable:!1}),yo[l]={klass:n,omit:o.omit||[],shallow:o.shallow||[]}}zt("Object",Object),zt("Set",Set),zt("TransferableGridIndex",Ns),zt("Color",vr),zt("Error",Error),zt("AJAXError",Ee),zt("ResolvedImage",ei),zt("StylePropertyFunction",Bo),zt("StyleExpression",ks,{omit:["_evaluator"]}),zt("ZoomDependentExpression",Qi),zt("ZoomConstantExpression",Ol),zt("CompoundExpression",fa,{omit:["_evaluate"]});for(const l in Pl)Pl[l]._classRegistryKey||zt(`Expression_${l}`,Pl[l]);function pu(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function wh(l){return l.$name||l.constructor._classRegistryKey}function hs(l){return!function(n){if(n===null||typeof n!="object")return!1;const o=wh(n);return!(!o||o==="Object")}(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||pu(l)||Xn(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function Ac(l,n){if(hs(l))return(pu(l)||Xn(l))&&n&&n.push(l),ArrayBuffer.isView(l)&&n&&n.push(l.buffer),l instanceof ImageData&&n&&n.push(l.data.buffer),l;if(Array.isArray(l)){const x=[];for(const T of l)x.push(Ac(T,n));return x}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);const o=wh(l);if(!o)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!yo[o])throw new Error(`${o} is not registered.`);const{klass:d}=yo[o],v=d.serialize?d.serialize(l,n):{};if(d.serialize){if(n&&v===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in l){if(!l.hasOwnProperty(x)||yo[o].omit.indexOf(x)>=0)continue;const T=l[x];v[x]=yo[o].shallow.indexOf(x)>=0?T:Ac(T,n)}l instanceof Error&&(v.message=l.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(v.$name=o),v}function Ls(l){if(hs(l))return l;if(Array.isArray(l))return l.map(Ls);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);const n=wh(l)||"Object";if(!yo[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:o}=yo[n];if(!o)throw new Error(`can't deserialize unregistered class ${n}`);if(o.deserialize)return o.deserialize(l);const d=Object.create(o.prototype);for(const v of Object.keys(l)){if(v==="$name")continue;const x=l[v];d[v]=yo[n].shallow.indexOf(v)>=0?x:Ls(x)}return d}class Ia{constructor(){this.first=!0}update(n,o){const d=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=o),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=d,!0))}}const br={"Latin-1 Supplement":l=>l>=128&&l<=255,"Hangul Jamo":l=>l>=4352&&l<=4607,Khmer:l=>l>=6016&&l<=6143,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Kanbun:l=>l>=12688&&l<=12703,"CJK Strokes":l=>l>=12736&&l<=12783,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Hangul Syllables":l=>l>=44032&&l<=55215,"Private Use Area":l=>l>=57344&&l<=63743,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function Mc(l){for(const n of l)if(Bs(n.charCodeAt(0)))return!0;return!1}function ds(l){for(const n of l)if(!Sh(n.charCodeAt(0)))return!1;return!0}function vo(l){const n=l.map(o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch{return null}}).filter(o=>o);return new RegExp(n.join("|"),"u")}const Dl=vo(["Arab","Dupl","Mong","Ougr","Syrc"]);function Sh(l){return!Dl.test(String.fromCodePoint(l))}const Th=vo(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Bs(l){return!(l!==746&&l!==747&&(l<4352||!(br["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||br["CJK Compatibility"](l)||br["CJK Strokes"](l)||!(!br["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||br["Enclosed CJK Letters and Months"](l)||br["Ideographic Description Characters"](l)||br.Kanbun(l)||br.Katakana(l)&&l!==12540||!(!br["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!br["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||br["Vertical Forms"](l)||br["Yijing Hexagram Symbols"](l)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(l))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(l))||Th.test(String.fromCodePoint(l)))))}function Pc(l){return!(Bs(l)||function(n){return!!(br["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||br["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||br["Letterlike Symbols"](n)||br["Number Forms"](n)||br["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||br["Control Pictures"](n)&&n!==9251||br["Optical Character Recognition"](n)||br["Enclosed Alphanumerics"](n)||br["Geometric Shapes"](n)||br["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||br["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||br["CJK Symbols and Punctuation"](n)||br.Katakana(n)||br["Private Use Area"](n)||br["CJK Compatibility Forms"](n)||br["Small Form Variants"](n)||br["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(l))}const zd=vo(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Dd(l){return zd.test(String.fromCodePoint(l))}function Rl(l,n){return!(!n&&Dd(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||br.Khmer(l))}function mu(l){for(const n of l)if(Dd(n.charCodeAt(0)))return!0;return!1}const fs=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){if(fs.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(l,n){return c(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(l.pluginStatus!=="loading")return this.setState(l),l;const o=l.pluginURL,d=new Promise(x=>{this.loadScriptResolve=x});n(o);const v=new Promise(x=>setTimeout(()=>x(),this.TIMEOUT));if(yield Promise.race([d,v]),this.isParsed()){const x={pluginStatus:"loaded",pluginURL:o};return this.setState(x),x}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${o}`)})}};class nn{constructor(n,o){this.isSupportedScript=Ah,this.zoom=n,o?(this.now=o.now||0,this.fadeDuration=o.fadeDuration||0,this.zoomHistory=o.zoomHistory||new Ia,this.transition=o.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ia,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,o=n-Math.floor(n),d=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*o}}}function Ah(l){return function(n,o){for(const d of n)if(!Rl(d.charCodeAt(0),o))return!1;return!0}(l,fs.getRTLTextPluginStatus()==="loaded")}class Ha{constructor(n,o,d){this.property=n,this.value=o,this.expression=function(v,x,T){if(Li(v))return new Bo(v,x);if(ss(v)){const E=ma(v,x,T);if(E.result==="error")throw new Error(E.value.map(I=>`${I.key}: ${I.message}`).join(", "));return E.value}{let E=v;return x.type==="color"&&typeof v=="string"?E=vr.parse(v):x.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?x.type!=="numberArray"||typeof v!="number"&&!Array.isArray(v)?x.type!=="colorArray"||typeof v!="string"&&!Array.isArray(v)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?E=di.parse(v):x.type==="projectionDefinition"&&typeof v=="string"&&(E=Ni.parse(v)):E=Yn.parse(v):E=hi.parse(v):E=ui.parse(v),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>E}}}(o===void 0?n.specification.default:o,n.specification,d)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(n,o,d){return this.property.possiblyEvaluate(this,n,o,d)}}class xr{constructor(n,o){this.property=n,this.value=new Ha(n,void 0,o)}transitioned(n,o){return new Pn(this.property,this.value,o,nr({},n.transition,this.transition),n.now)}untransitioned(){return new Pn(this.property,this.value,null,{},0)}}class an{constructor(n,o){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues),this._globalState=o}getValue(n){return _t(this._values[n].value.value)}setValue(n,o){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new xr(this._values[n].property,this._globalState)),this._values[n].value=new Ha(this._values[n].property,o===null?void 0:_t(o),this._globalState)}getTransition(n){return _t(this._values[n].transition)}setTransition(n,o){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new xr(this._values[n].property,this._globalState)),this._values[n].transition=_t(o)||void 0}serialize(){const n={};for(const o of Object.keys(this._values)){const d=this.getValue(o);d!==void 0&&(n[o]=d);const v=this.getTransition(o);v!==void 0&&(n[`${o}-transition`]=v)}return n}transitioned(n,o){const d=new gu(this._properties);for(const v of Object.keys(this._values))d._values[v]=this._values[v].transitioned(n,o._values[v]);return d}untransitioned(){const n=new gu(this._properties);for(const o of Object.keys(this._values))n._values[o]=this._values[o].untransitioned();return n}}class Pn{constructor(n,o,d,v,x){this.property=n,this.value=o,this.begin=x+v.delay||0,this.end=this.begin+v.duration||0,n.specification.transition&&(v.delay||v.duration)&&(this.prior=d)}possiblyEvaluate(n,o,d){const v=n.now||0,x=this.value.possiblyEvaluate(n,o,d),T=this.prior;if(T){if(v>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(v<this.begin)return T.possiblyEvaluate(n,o,d);{const E=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(n,o,d),x,st(E))}}return x}}class gu{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,o,d){const v=new Nl(this._properties);for(const x of Object.keys(this._values))v._values[x]=this._values[x].possiblyEvaluate(n,o,d);return v}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Fs{constructor(n,o){this._properties=n,this._values=Object.create(n.defaultPropertyValues),this._globalState=o}hasValue(n){return this._values[n].value!==void 0}getValue(n){return _t(this._values[n].value)}setValue(n,o){this._values[n]=new Ha(this._values[n].property,o===null?void 0:_t(o),this._globalState)}serialize(){const n={};for(const o of Object.keys(this._values)){const d=this.getValue(o);d!==void 0&&(n[o]=d)}return n}possiblyEvaluate(n,o,d){const v=new Nl(this._properties);for(const x of Object.keys(this._values))v._values[x]=this._values[x].possiblyEvaluate(n,o,d);return v}}class $i{constructor(n,o,d){this.property=n,this.value=o,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,o,d,v){return this.property.evaluate(this.value,this.parameters,n,o,d,v)}}class Nl{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Nt{constructor(n){this.specification=n}possiblyEvaluate(n,o){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(o)}interpolate(n,o,d){const v=ha[this.specification.type];return v?v(n,o,d):n}}class Ht{constructor(n,o){this.specification=n,this.overrides=o}possiblyEvaluate(n,o,d,v){return new $i(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(o,null,{},d,v)}:n.expression,o)}interpolate(n,o,d){if(n.value.kind!=="constant"||o.value.kind!=="constant")return n;if(n.value.value===void 0||o.value.value===void 0)return new $i(this,{kind:"constant",value:void 0},n.parameters);const v=ha[this.specification.type];if(v){const x=v(n.value.value,o.value.value,d);return new $i(this,{kind:"constant",value:x},n.parameters)}return n}evaluate(n,o,d,v,x,T){return n.kind==="constant"?n.value:n.evaluate(o,d,v,x,T)}}class Ec extends Ht{possiblyEvaluate(n,o,d,v){if(n.value===void 0)return new $i(this,{kind:"constant",value:void 0},o);if(n.expression.kind==="constant"){const x=n.expression.evaluate(o,null,{},d,v),T=n.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,E=this._calculate(T,T,T,o);return new $i(this,{kind:"constant",value:E},o)}if(n.expression.kind==="camera"){const x=this._calculate(n.expression.evaluate({zoom:o.zoom-1}),n.expression.evaluate({zoom:o.zoom}),n.expression.evaluate({zoom:o.zoom+1}),o);return new $i(this,{kind:"constant",value:x},o)}return new $i(this,n.expression,o)}evaluate(n,o,d,v,x,T){if(n.kind==="source"){const E=n.evaluate(o,d,v,x,T);return this._calculate(E,E,E,o)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(o.zoom)-1},d,v),n.evaluate({zoom:Math.floor(o.zoom)},d,v),n.evaluate({zoom:Math.floor(o.zoom)+1},d,v),o):n.value}_calculate(n,o,d,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:n,to:o}:{from:d,to:o}}interpolate(n){return n}}class Bn{constructor(n){this.specification=n}possiblyEvaluate(n,o,d,v){if(n.value!==void 0){if(n.expression.kind==="constant"){const x=n.expression.evaluate(o,null,{},d,v);return this._calculate(x,x,x,o)}return this._calculate(n.expression.evaluate(new nn(Math.floor(o.zoom-1),o)),n.expression.evaluate(new nn(Math.floor(o.zoom),o)),n.expression.evaluate(new nn(Math.floor(o.zoom+1),o)),o)}}_calculate(n,o,d,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:n,to:o}:{from:d,to:o}}interpolate(n){return n}}class Cc{constructor(n){this.specification=n}possiblyEvaluate(n,o,d,v){return!!n.expression.evaluate(o,null,{},d,v)}interpolate(){return!1}}class Mi{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in n){const d=n[o];d.specification.overridable&&this.overridableProperties.push(o);const v=this.defaultPropertyValues[o]=new Ha(d,void 0,void 0),x=this.defaultTransitionablePropertyValues[o]=new xr(d,void 0);this.defaultTransitioningPropertyValues[o]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=v.possiblyEvaluate({})}}}zt("DataDrivenProperty",Ht),zt("DataConstantProperty",Nt),zt("CrossFadedDataDrivenProperty",Ec),zt("CrossFadedProperty",Bn),zt("ColorRampProperty",Cc);const Rd="-transition";class Xa extends Zt{constructor(n,o,d){if(super(),this.id=n.id,this.type=n.type,this._globalState=d,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter,this._featureFilter=Il(n.filter,d)),o.layout&&(this._unevaluatedLayout=new Fs(o.layout,d)),o.paint)){this._transitionablePaint=new an(o.paint,d);for(const v in n.paint)this.setPaintProperty(v,n.paint[v],{validate:!1});for(const v in n.layout)this.setLayoutProperty(v,n.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Nl(o.paint)}}setFilter(n){this.filter=n,this._featureFilter=Il(n,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}getLayoutAffectingGlobalStateRefs(){const n=new Set;if(this._unevaluatedLayout)for(const o in this._unevaluatedLayout._values){const d=this._unevaluatedLayout._values[o];for(const v of d.getGlobalStateRefs())n.add(v)}for(const o of this._featureFilter.getGlobalStateRefs())n.add(o);return n}getPaintAffectingGlobalStateRefs(){var n;const o=new globalThis.Map;if(this._transitionablePaint)for(const d in this._transitionablePaint._values){const v=this._transitionablePaint._values[d].value;for(const x of v.getGlobalStateRefs()){const T=(n=o.get(x))!==null&&n!==void 0?n:[];T.push({name:d,value:v.value}),o.set(x,T)}}return o}setLayoutProperty(n,o,d={}){o!=null&&this._validate(us,`layers.${this.id}.layout.${n}`,n,o,d)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,o):this.visibility=o)}getPaintProperty(n){return n.endsWith(Rd)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,o,d={}){if(o!=null&&this._validate(Xf,`layers.${this.id}.paint.${n}`,n,o,d))return!1;if(n.endsWith(Rd))return this._transitionablePaint.setTransition(n.slice(0,-11),o||void 0),!1;{const v=this._transitionablePaint._values[n],x=v.property.specification["property-type"]==="cross-faded-data-driven",T=v.value.isDataDriven(),E=v.value;this._transitionablePaint.setValue(n,o),this._handleSpecialPaintPropertyUpdate(n);const I=this._transitionablePaint._values[n].value;return I.isDataDriven()||T||x||this._handleOverridablePaintPropertyUpdate(n,E,I)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,o,d){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,o){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,o)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ir(n,(o,d)=>!(o===void 0||d==="layout"&&!Object.keys(o).length||d==="paint"&&!Object.keys(o).length))}_validate(n,o,d,v,x={}){return(!x||x.validate!==!1)&&kd(this,n.call(va,{key:o,layerType:this.type,objectKey:d,value:v,styleSpec:Ue,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const o=this.paint.get(n);if(o instanceof $i&&Cl(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}let Ll;var Nd={get paint(){return Ll=Ll||new Mi({"raster-opacity":new Nt(Ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new Nt(Ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Nt(Ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Nt(Ue.paint_raster["raster-brightness-max"]),"raster-saturation":new Nt(Ue.paint_raster["raster-saturation"]),"raster-contrast":new Nt(Ue.paint_raster["raster-contrast"]),"raster-resampling":new Nt(Ue.paint_raster["raster-resampling"]),"raster-fade-duration":new Nt(Ue.paint_raster["raster-fade-duration"])})}};class Ld extends Xa{constructor(n,o){super(n,Nd,o)}}const Bd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class mi{constructor(n,o){this._structArray=n,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class yr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,o){return n._trim(),o&&(n.isTransferred=!0,o.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const o=Object.create(this.prototype);return o.arrayBuffer=n.arrayBuffer,o.length=n.length,o.capacity=n.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function En(l,n=1){let o=0,d=0;return{members:l.map(v=>{const x=Bd[v.type].BYTES_PER_ELEMENT,T=o=Wa(o,Math.max(n,x)),E=v.components||1;return d=Math.max(d,x),o+=x*E,{name:v.name,type:v.type,components:E,offset:T}}),size:Wa(o,Math.max(d,n)),alignment:n}}function Wa(l,n){return Math.ceil(l/n)*n}class ps extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o){const d=this.length;return this.resize(d+1),this.emplace(d,n,o)}emplace(n,o,d){const v=2*n;return this.int16[v+0]=o,this.int16[v+1]=d,n}}ps.prototype.bytesPerElement=4,zt("StructArrayLayout2i4",ps);class $s extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,d)}emplace(n,o,d,v){const x=3*n;return this.int16[x+0]=o,this.int16[x+1]=d,this.int16[x+2]=v,n}}$s.prototype.bytesPerElement=6,zt("StructArrayLayout3i6",$s);class Ya extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,o,d,v)}emplace(n,o,d,v,x){const T=4*n;return this.int16[T+0]=o,this.int16[T+1]=d,this.int16[T+2]=v,this.int16[T+3]=x,n}}Ya.prototype.bytesPerElement=8,zt("StructArrayLayout4i8",Ya);class qs extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,v,x,T){const E=this.length;return this.resize(E+1),this.emplace(E,n,o,d,v,x,T)}emplace(n,o,d,v,x,T,E){const I=6*n;return this.int16[I+0]=o,this.int16[I+1]=d,this.int16[I+2]=v,this.int16[I+3]=x,this.int16[I+4]=T,this.int16[I+5]=E,n}}qs.prototype.bytesPerElement=12,zt("StructArrayLayout2i4i12",qs);class yu extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,v,x,T){const E=this.length;return this.resize(E+1),this.emplace(E,n,o,d,v,x,T)}emplace(n,o,d,v,x,T,E){const I=4*n,R=8*n;return this.int16[I+0]=o,this.int16[I+1]=d,this.uint8[R+4]=v,this.uint8[R+5]=x,this.uint8[R+6]=T,this.uint8[R+7]=E,n}}yu.prototype.bytesPerElement=8,zt("StructArrayLayout2i4ub8",yu);class Vo extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o){const d=this.length;return this.resize(d+1),this.emplace(d,n,o)}emplace(n,o,d){const v=2*n;return this.float32[v+0]=o,this.float32[v+1]=d,n}}Vo.prototype.bytesPerElement=8,zt("StructArrayLayout2f8",Vo);class Us extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d,v,x,T,E,I,R,L){const V=this.length;return this.resize(V+1),this.emplace(V,n,o,d,v,x,T,E,I,R,L)}emplace(n,o,d,v,x,T,E,I,R,L,V){const W=10*n;return this.uint16[W+0]=o,this.uint16[W+1]=d,this.uint16[W+2]=v,this.uint16[W+3]=x,this.uint16[W+4]=T,this.uint16[W+5]=E,this.uint16[W+6]=I,this.uint16[W+7]=R,this.uint16[W+8]=L,this.uint16[W+9]=V,n}}Us.prototype.bytesPerElement=20,zt("StructArrayLayout10ui20",Us);class Mh extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d,v,x,T,E,I){const R=this.length;return this.resize(R+1),this.emplace(R,n,o,d,v,x,T,E,I)}emplace(n,o,d,v,x,T,E,I,R){const L=8*n;return this.uint16[L+0]=o,this.uint16[L+1]=d,this.uint16[L+2]=v,this.uint16[L+3]=x,this.uint16[L+4]=T,this.uint16[L+5]=E,this.uint16[L+6]=I,this.uint16[L+7]=R,n}}Mh.prototype.bytesPerElement=16,zt("StructArrayLayout8ui16",Mh);class vu extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d,v,x,T,E,I,R,L,V,W){const K=this.length;return this.resize(K+1),this.emplace(K,n,o,d,v,x,T,E,I,R,L,V,W)}emplace(n,o,d,v,x,T,E,I,R,L,V,W,K){const ee=12*n;return this.int16[ee+0]=o,this.int16[ee+1]=d,this.int16[ee+2]=v,this.int16[ee+3]=x,this.uint16[ee+4]=T,this.uint16[ee+5]=E,this.uint16[ee+6]=I,this.uint16[ee+7]=R,this.int16[ee+8]=L,this.int16[ee+9]=V,this.int16[ee+10]=W,this.int16[ee+11]=K,n}}vu.prototype.bytesPerElement=24,zt("StructArrayLayout4i4ui4i24",vu);class Vs extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,d)}emplace(n,o,d,v){const x=3*n;return this.float32[x+0]=o,this.float32[x+1]=d,this.float32[x+2]=v,n}}Vs.prototype.bytesPerElement=12,zt("StructArrayLayout3f12",Vs);class Ph extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint32[1*n+0]=o,n}}Ph.prototype.bytesPerElement=4,zt("StructArrayLayout1ul4",Ph);class Eh extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d,v,x,T,E,I,R){const L=this.length;return this.resize(L+1),this.emplace(L,n,o,d,v,x,T,E,I,R)}emplace(n,o,d,v,x,T,E,I,R,L){const V=10*n,W=5*n;return this.int16[V+0]=o,this.int16[V+1]=d,this.int16[V+2]=v,this.int16[V+3]=x,this.int16[V+4]=T,this.int16[V+5]=E,this.uint32[W+3]=I,this.uint16[V+8]=R,this.uint16[V+9]=L,n}}Eh.prototype.bytesPerElement=20,zt("StructArrayLayout6i1ul2ui20",Eh);class jc extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,v,x,T){const E=this.length;return this.resize(E+1),this.emplace(E,n,o,d,v,x,T)}emplace(n,o,d,v,x,T,E){const I=6*n;return this.int16[I+0]=o,this.int16[I+1]=d,this.int16[I+2]=v,this.int16[I+3]=x,this.int16[I+4]=T,this.int16[I+5]=E,n}}jc.prototype.bytesPerElement=12,zt("StructArrayLayout2i2i2i12",jc);class Ch extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,n,o,d,v,x)}emplace(n,o,d,v,x,T){const E=4*n,I=8*n;return this.float32[E+0]=o,this.float32[E+1]=d,this.float32[E+2]=v,this.int16[I+6]=x,this.int16[I+7]=T,n}}Ch.prototype.bytesPerElement=16,zt("StructArrayLayout2f1f2i16",Ch);class b extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,v,x,T){const E=this.length;return this.resize(E+1),this.emplace(E,n,o,d,v,x,T)}emplace(n,o,d,v,x,T,E){const I=16*n,R=4*n,L=8*n;return this.uint8[I+0]=o,this.uint8[I+1]=d,this.float32[R+1]=v,this.float32[R+2]=x,this.int16[L+6]=T,this.int16[L+7]=E,n}}b.prototype.bytesPerElement=16,zt("StructArrayLayout2ub2f2i16",b);class r extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,d)}emplace(n,o,d,v){const x=3*n;return this.uint16[x+0]=o,this.uint16[x+1]=d,this.uint16[x+2]=v,n}}r.prototype.bytesPerElement=6,zt("StructArrayLayout3ui6",r);class u extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d,v,x,T,E,I,R,L,V,W,K,ee,le,he,ye){const Be=this.length;return this.resize(Be+1),this.emplace(Be,n,o,d,v,x,T,E,I,R,L,V,W,K,ee,le,he,ye)}emplace(n,o,d,v,x,T,E,I,R,L,V,W,K,ee,le,he,ye,Be){const Ae=24*n,je=12*n,Ye=48*n;return this.int16[Ae+0]=o,this.int16[Ae+1]=d,this.uint16[Ae+2]=v,this.uint16[Ae+3]=x,this.uint32[je+2]=T,this.uint32[je+3]=E,this.uint32[je+4]=I,this.uint16[Ae+10]=R,this.uint16[Ae+11]=L,this.uint16[Ae+12]=V,this.float32[je+7]=W,this.float32[je+8]=K,this.uint8[Ye+36]=ee,this.uint8[Ye+37]=le,this.uint8[Ye+38]=he,this.uint32[je+10]=ye,this.int16[Ae+22]=Be,n}}u.prototype.bytesPerElement=48,zt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",u);class p extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d,v,x,T,E,I,R,L,V,W,K,ee,le,he,ye,Be,Ae,je,Ye,it,gt,Et,Mt,jt,$t,It){const kt=this.length;return this.resize(kt+1),this.emplace(kt,n,o,d,v,x,T,E,I,R,L,V,W,K,ee,le,he,ye,Be,Ae,je,Ye,it,gt,Et,Mt,jt,$t,It)}emplace(n,o,d,v,x,T,E,I,R,L,V,W,K,ee,le,he,ye,Be,Ae,je,Ye,it,gt,Et,Mt,jt,$t,It,kt){const dt=32*n,tr=16*n;return this.int16[dt+0]=o,this.int16[dt+1]=d,this.int16[dt+2]=v,this.int16[dt+3]=x,this.int16[dt+4]=T,this.int16[dt+5]=E,this.int16[dt+6]=I,this.int16[dt+7]=R,this.uint16[dt+8]=L,this.uint16[dt+9]=V,this.uint16[dt+10]=W,this.uint16[dt+11]=K,this.uint16[dt+12]=ee,this.uint16[dt+13]=le,this.uint16[dt+14]=he,this.uint16[dt+15]=ye,this.uint16[dt+16]=Be,this.uint16[dt+17]=Ae,this.uint16[dt+18]=je,this.uint16[dt+19]=Ye,this.uint16[dt+20]=it,this.uint16[dt+21]=gt,this.uint16[dt+22]=Et,this.uint32[tr+12]=Mt,this.float32[tr+13]=jt,this.float32[tr+14]=$t,this.uint16[dt+30]=It,this.uint16[dt+31]=kt,n}}p.prototype.bytesPerElement=64,zt("StructArrayLayout8i15ui1ul2f2ui64",p);class _ extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.float32[1*n+0]=o,n}}_.prototype.bytesPerElement=4,zt("StructArrayLayout1f4",_);class w extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,d)}emplace(n,o,d,v){const x=3*n;return this.uint16[6*n+0]=o,this.float32[x+1]=d,this.float32[x+2]=v,n}}w.prototype.bytesPerElement=12,zt("StructArrayLayout1ui2f12",w);class A extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,d)}emplace(n,o,d,v){const x=4*n;return this.uint32[2*n+0]=o,this.uint16[x+2]=d,this.uint16[x+3]=v,n}}A.prototype.bytesPerElement=8,zt("StructArrayLayout1ul2ui8",A);class k extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o){const d=this.length;return this.resize(d+1),this.emplace(d,n,o)}emplace(n,o,d){const v=2*n;return this.uint16[v+0]=o,this.uint16[v+1]=d,n}}k.prototype.bytesPerElement=4,zt("StructArrayLayout2ui4",k);class z extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint16[1*n+0]=o,n}}z.prototype.bytesPerElement=2,zt("StructArrayLayout1ui2",z);class $ extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,o,d,v)}emplace(n,o,d,v,x){const T=4*n;return this.float32[T+0]=o,this.float32[T+1]=d,this.float32[T+2]=v,this.float32[T+3]=x,n}}$.prototype.bytesPerElement=16,zt("StructArrayLayout4f16",$);class q extends mi{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new M(this.anchorPointX,this.anchorPointY)}}q.prototype.size=20;class H extends Eh{get(n){return new q(this,n)}}zt("CollisionBoxArray",H);class G extends mi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}G.prototype.size=48;class Q extends u{get(n){return new G(this,n)}}zt("PlacedSymbolArray",Q);class se extends mi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}se.prototype.size=64;class pe extends p{get(n){return new se(this,n)}}zt("SymbolInstanceArray",pe);class fe extends _{getoffsetX(n){return this.float32[1*n+0]}}zt("GlyphOffsetArray",fe);class ge extends $s{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}zt("SymbolLineVertexArray",ge);class ve extends mi{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ve.prototype.size=12;class Te extends w{get(n){return new ve(this,n)}}zt("TextAnchorOffsetArray",Te);class xe extends mi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}xe.prototype.size=8;class Ce extends A{get(n){return new xe(this,n)}}zt("FeatureIndexArray",Ce);class Oe extends ps{}class we extends ps{}class Re extends ps{}class nt extends qs{}class We extends yu{}class Ke extends Vo{}class Qe extends Us{}class Tt extends Mh{}class At extends vu{}class yt extends Vs{}class Lt extends Ph{}class or extends jc{}class Hr extends b{}class Xr extends r{}class ln extends k{}const Cn=En([{name:"a_pos",components:2,type:"Int16"}],4),{members:cn}=Cn;class wr{constructor(n=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=n}prepareSegment(n,o,d,v){const x=this.segments[this.segments.length-1];return n>wr.MAX_VERTEX_ARRAY_LENGTH&&Qt(`Max vertices per segment is ${wr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${wr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!x||x.vertexLength+n>wr.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==v?this.createNewSegment(o,d,v):x}createNewSegment(n,o,d){const v={vertexOffset:n.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(v.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(v),v}getOrCreateLatestSegment(n,o,d){return this.prepareSegment(0,n,o,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const n of this.segments)for(const o in n.vaos)n.vaos[o].destroy()}static simpleSegment(n,o,d,v){return new wr([{vertexOffset:n,primitiveOffset:o,vertexLength:d,primitiveLength:v,vaos:{},sortKey:0}])}}function fn(l,n){return 256*(l=Rt(Math.floor(l),0,255))+Rt(Math.floor(n),0,255)}wr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,zt("SegmentVector",wr);const ii=En([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Fn=En([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var $n,xi,ms,Ka={exports:{}},Gs={exports:{}},Qa={exports:{}},Zs=function(){if(ms)return Ka.exports;ms=1;var l=($n||($n=1,Gs.exports=function(o,d){var v,x,T,E,I,R,L,V;for(x=o.length-(v=3&o.length),T=d,I=3432918353,R=461845907,V=0;V<x;)L=255&o.charCodeAt(V)|(255&o.charCodeAt(++V))<<8|(255&o.charCodeAt(++V))<<16|(255&o.charCodeAt(++V))<<24,++V,T=27492+(65535&(E=5*(65535&(T=(T^=L=(65535&(L=(L=(65535&L)*I+(((L>>>16)*I&65535)<<16)&4294967295)<<15|L>>>17))*R+(((L>>>16)*R&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(L=0,v){case 3:L^=(255&o.charCodeAt(V+2))<<16;case 2:L^=(255&o.charCodeAt(V+1))<<8;case 1:T^=L=(65535&(L=(L=(65535&(L^=255&o.charCodeAt(V)))*I+(((L>>>16)*I&65535)<<16)&4294967295)<<15|L>>>17))*R+(((L>>>16)*R&65535)<<16)&4294967295}return T^=o.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0}),Gs.exports),n=(xi||(xi=1,Qa.exports=function(o,d){for(var v,x=o.length,T=d^x,E=0;x>=4;)v=1540483477*(65535&(v=255&o.charCodeAt(E)|(255&o.charCodeAt(++E))<<8|(255&o.charCodeAt(++E))<<16|(255&o.charCodeAt(++E))<<24))+((1540483477*(v>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),x-=4,++E;switch(x){case 3:T^=(255&o.charCodeAt(E+2))<<16;case 2:T^=(255&o.charCodeAt(E+1))<<8;case 1:T=1540483477*(65535&(T^=255&o.charCodeAt(E)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0}),Qa.exports);return Ka.exports=l,Ka.exports.murmur3=l,Ka.exports.murmur2=n,Ka.exports}(),gs=C(Zs);class ka{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,o,d,v){this.ids.push(qi(n)),this.positions.push(o,d,v)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=qi(n);let d=0,v=this.ids.length-1;for(;d<v;){const T=d+v>>1;this.ids[T]>=o?v=T:d=T+1}const x=[];for(;this.ids[d]===o;)x.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return x}static serialize(n,o){const d=new Float64Array(n.ids),v=new Uint32Array(n.positions);return _o(d,v,0,d.length-1),o&&o.push(d.buffer,v.buffer),{ids:d,positions:v}}static deserialize(n){const o=new ka;return o.ids=n.ids,o.positions=n.positions,o.indexed=!0,o}}function qi(l){const n=+l;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:gs(String(l))}function _o(l,n,o,d){for(;o<d;){const v=l[o+d>>1];let x=o-1,T=d+1;for(;;){do x++;while(l[x]<v);do T--;while(l[T]>v);if(x>=T)break;bo(l,x,T),bo(n,3*x,3*T),bo(n,3*x+1,3*T+1),bo(n,3*x+2,3*T+2)}T-o<d-T?(_o(l,n,o,T),o=T+1):(_o(l,n,T+1,d),d=T)}}function bo(l,n,o){const d=l[n];l[n]=l[o],l[o]=d}zt("FeaturePositionMap",ka);class wi{constructor(n,o){this.gl=n.gl,this.location=o}}class Dn extends wi{constructor(n,o){super(n,o),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class on extends wi{constructor(n,o){super(n,o),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class qn extends wi{constructor(n,o){super(n,o),this.current=vr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Sn=new Float32Array(16);function jh(l){return[fn(255*l.r,255*l.g),fn(255*l.b,255*l.a)]}class Ja{constructor(n,o,d){this.value=n,this.uniformNames=o.map(v=>`u_${v}`),this.type=d}setUniform(n,o,d){n.set(d.constantOr(this.value))}getBinding(n,o,d){return this.type==="color"?new qn(n,o):new Dn(n,o)}}class ea{constructor(n,o){this.uniformNames=o.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=n.tlbr}setConstantDashPositions(n,o){this.dashTo=[0,n.y,n.height,n.width],this.dashFrom=[0,o.y,o.height,o.width]}setUniform(n,o,d,v){let x=null;v==="u_pattern_to"?x=this.patternTo:v==="u_pattern_from"?x=this.patternFrom:v==="u_dasharray_to"?x=this.dashTo:v==="u_dasharray_from"?x=this.dashFrom:v==="u_pixel_ratio_to"?x=this.pixelRatioTo:v==="u_pixel_ratio_from"&&(x=this.pixelRatioFrom),x!==null&&n.set(x)}getBinding(n,o,d){return d.substr(0,9)==="u_pattern"||d.substr(0,12)==="u_dasharray_"?new on(n,o):new Dn(n,o)}}class pn{constructor(n,o,d,v){this.expression=n,this.type=d,this.maxValue=0,this.paintVertexAttributes=o.map(x=>({name:`a_${x}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(n,o,d){const v=this.paintVertexArray.length,x=this.expression.evaluate(new nn(0,d),o,{},d.canonical,[],d.formattedSection);this.paintVertexArray.resize(n),this._setPaintValue(v,n,x)}updatePaintArray(n,o,d,v,x){const T=this.expression.evaluate(new nn(0,x),d,v);this._setPaintValue(n,o,T)}_setPaintValue(n,o,d){if(this.type==="color"){const v=jh(d);for(let x=n;x<o;x++)this.paintVertexArray.emplace(x,v[0],v[1])}else{for(let v=n;v<o;v++)this.paintVertexArray.emplace(v,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class _a{constructor(n,o,d,v,x,T){this.expression=n,this.uniformNames=o.map(E=>`u_${E}_t`),this.type=d,this.useIntegerZoom=v,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=o.map(E=>({name:`a_${E}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new T}populatePaintArray(n,o,d){const v=this.expression.evaluate(new nn(this.zoom,d),o,{},d.canonical,[],d.formattedSection),x=this.expression.evaluate(new nn(this.zoom+1,d),o,{},d.canonical,[],d.formattedSection),T=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(T,n,v,x)}updatePaintArray(n,o,d,v,x){const T=this.expression.evaluate(new nn(this.zoom,x),d,v),E=this.expression.evaluate(new nn(this.zoom+1,x),d,v);this._setPaintValue(n,o,T,E)}_setPaintValue(n,o,d,v){if(this.type==="color"){const x=jh(d),T=jh(v);for(let E=n;E<o;E++)this.paintVertexArray.emplace(E,x[0],x[1],T[0],T[1])}else{for(let x=n;x<o;x++)this.paintVertexArray.emplace(x,d,v);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(v))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,o){const d=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,v=Rt(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);n.set(v)}getBinding(n,o,d){return new Dn(n,o)}}class Go{constructor(n,o,d,v,x,T){this.expression=n,this.type=o,this.useIntegerZoom=d,this.zoom=v,this.layerId=T,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(n,o,d){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(v,n,this.getPositionIds(o),d)}updatePaintArray(n,o,d,v,x){this._setPaintValues(n,o,this.getPositionIds(d),x)}_setPaintValues(n,o,d,v){const x=this.getPositions(v);if(!x||!d)return;const T=x[d.min],E=x[d.mid],I=x[d.max];if(T&&E&&I)for(let R=n;R<o;R++)this.emplace(this.zoomInPaintVertexArray,R,E,T),this.emplace(this.zoomOutPaintVertexArray,R,E,I)}upload(n){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const o=this.getVertexAttributes();this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,o,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,o,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Zo extends Go{getPositions(n){return n.imagePositions}getPositionIds(n){return n.patterns&&n.patterns[this.layerId]}getVertexAttributes(){return ii.members}emplace(n,o,d,v){n.emplace(o,d.tlbr[0],d.tlbr[1],d.tlbr[2],d.tlbr[3],v.tlbr[0],v.tlbr[1],v.tlbr[2],v.tlbr[3],d.pixelRatio,v.pixelRatio)}}class Oh extends Go{getPositions(n){return n.dashPositions}getPositionIds(n){return n.dashes&&n.dashes[this.layerId]}getVertexAttributes(){return Fn.members}emplace(n,o,d,v){n.emplace(o,0,d.y,d.height,d.width,0,v.y,v.height,v.width)}}class Ih{constructor(n,o,d){this.binders={},this._buffers=[];const v=[];for(const x in n.paint._values){if(!d(x))continue;const T=n.paint.get(x);if(!(T instanceof $i&&Cl(T.property.specification)))continue;const E=Oc(x,n.type),I=T.value,R=T.property.specification.type,L=T.property.useIntegerZoom,V=T.property.specification["property-type"],W=V==="cross-faded"||V==="cross-faded-data-driven";if(I.kind==="constant")this.binders[x]=W?new ea(I.value,E):new Ja(I.value,E,R),v.push(`/u_${x}`);else if(I.kind==="source"||W){const K=kh(x,R,"source");this.binders[x]=W?x==="line-dasharray"?new Oh(I,R,L,o,K,n.id):new Zo(I,R,L,o,K,n.id):new pn(I,E,R,K),v.push(`/a_${x}`)}else{const K=kh(x,R,"composite");this.binders[x]=new _a(I,E,R,L,o,K),v.push(`/z_${x}`)}}this.cacheKey=v.sort().join("")}getMaxValue(n){const o=this.binders[n];return o instanceof pn||o instanceof _a?o.maxValue:0}populatePaintArrays(n,o,d){for(const v in this.binders){const x=this.binders[v];(x instanceof pn||x instanceof _a||x instanceof Go)&&x.populatePaintArray(n,o,d)}}setConstantPatternPositions(n,o){for(const d in this.binders){const v=this.binders[d];v instanceof ea&&v.setConstantPatternPositions(n,o)}}setConstantDashPositions(n,o){for(const d in this.binders){const v=this.binders[d];v instanceof ea&&v.setConstantDashPositions(n,o)}}updatePaintArrays(n,o,d,v,x){let T=!1;for(const E in n){const I=o.getPositions(E);for(const R of I){const L=d.feature(R.index);for(const V in this.binders){const W=this.binders[V];if((W instanceof pn||W instanceof _a||W instanceof Go)&&W.expression.isStateDependent===!0){const K=v.paint.get(V);W.expression=K.value,W.updatePaintArray(R.start,R.end,L,n[E],x),T=!0}}}}return T}defines(){const n=[];for(const o in this.binders){const d=this.binders[o];(d instanceof Ja||d instanceof ea)&&n.push(...d.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return n}getBinderAttributes(){const n=[];for(const o in this.binders){const d=this.binders[o];if(d instanceof pn||d instanceof _a)for(let v=0;v<d.paintVertexAttributes.length;v++)n.push(d.paintVertexAttributes[v].name);else if(d instanceof Go){const v=d.getVertexAttributes();for(const x of v)n.push(x.name)}}return n}getBinderUniforms(){const n=[];for(const o in this.binders){const d=this.binders[o];if(d instanceof Ja||d instanceof ea||d instanceof _a)for(const v of d.uniformNames)n.push(v)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,o){const d=[];for(const v in this.binders){const x=this.binders[v];if(x instanceof Ja||x instanceof ea||x instanceof _a){for(const T of x.uniformNames)if(o[T]){const E=x.getBinding(n,o[T],T);d.push({name:T,property:v,binding:E})}}}return d}setUniforms(n,o,d,v){for(const{name:x,property:T,binding:E}of o)this.binders[T].setUniform(E,v,d.get(T),x)}updatePaintBuffers(n){this._buffers=[];for(const o in this.binders){const d=this.binders[o];if(n&&d instanceof Go){const v=n.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(d instanceof pn||d instanceof _a)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(n){for(const o in this.binders){const d=this.binders[o];(d instanceof pn||d instanceof _a||d instanceof Go)&&d.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const o=this.binders[n];(o instanceof pn||o instanceof _a||o instanceof Go)&&o.destroy()}}}class ba{constructor(n,o,d=()=>!0){this.programConfigurations={};for(const v of n)this.programConfigurations[v.id]=new Ih(v,o,d);this.needsUpload=!1,this._featureMap=new ka,this._bufferOffset=0}populatePaintArrays(n,o,d,v){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(n,o,v);o.id!==void 0&&this._featureMap.add(o.id,d,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,o,d,v){for(const x of d)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(n,this._featureMap,o,x,v)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Oc(l,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${n}-`,"").replace(/-/g,"_")]}function kh(l,n,o){const d={color:{source:Vo,composite:$},number:{source:_,composite:Vo}},v=function(x){return{"line-pattern":{source:Qe,composite:Qe},"fill-pattern":{source:Qe,composite:Qe},"fill-extrusion-pattern":{source:Qe,composite:Qe},"line-dasharray":{source:Tt,composite:Tt}}[x]}(l);return v&&v[o]||d[n][o]}zt("ConstantBinder",Ja),zt("CrossFadedConstantBinder",ea),zt("SourceExpressionBinder",pn),zt("CrossFadedPatternBinder",Zo),zt("CrossFadedDasharrayBinder",Oh),zt("CompositeExpressionBinder",_a),zt("ProgramConfiguration",Ih,{omit:["_buffers"]}),zt("ProgramConfigurationSet",ba);const Ic=Math.pow(2,14)-1,Im=-Ic-1;function Hs(l){const n=ht/l.extent,o=l.loadGeometry();for(let d=0;d<o.length;d++){const v=o[d];for(let x=0;x<v.length;x++){const T=v[x],E=Math.round(T.x*n),I=Math.round(T.y*n);T.x=Rt(E,Im,Ic),T.y=Rt(I,Im,Ic),(E<T.x||E>T.x+1||I<T.y||I>T.y+1)&&Qt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function kc(l,n){return{type:l.type,id:l.id,properties:l.properties,geometry:n?Hs(l):[]}}const Wf=-32768;function By(l,n,o,d,v){l.emplaceBack(Wf+8*n+d,Wf+8*o+v)}class Yf{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasDependencies=!1,this.layoutVertexArray=new we,this.indexArray=new Xr,this.segments=new wr,this.programConfigurations=new ba(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,d){const v=this.layers[0],x=[];let T=null,E=!1,I=v.type==="heatmap";if(v.type==="circle"){const L=v;T=L.layout.get("circle-sort-key"),E=!T.isConstant(),I=I||L.paint.get("circle-pitch-alignment")==="map"}const R=I?o.subdivisionGranularity.circle:1;for(const{feature:L,id:V,index:W,sourceLayerIndex:K}of n){const ee=this.layers[0]._featureFilter.needGeometry,le=kc(L,ee);if(!this.layers[0]._featureFilter.filter(new nn(this.zoom),le,d))continue;const he=E?T.evaluate(le,{},d):void 0,ye={id:V,properties:L.properties,type:L.type,sourceLayerIndex:K,index:W,geometry:ee?le.geometry:Hs(L),patterns:{},sortKey:he};x.push(ye)}E&&x.sort((L,V)=>L.sortKey-V.sortKey);for(const L of x){const{geometry:V,index:W,sourceLayerIndex:K}=L,ee=n[W].feature;this.addFeature(L,V,W,d,R),o.featureIndex.insert(ee,V,W,K,this.index)}}update(n,o,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:d})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,cn),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,o,d,v,x=1){let T;switch(x){case 1:T=[0,7];break;case 3:T=[0,2,5,7];break;case 5:T=[0,1,3,4,6,7];break;case 7:T=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${x}; valid values are 1, 3, 5, 7.`)}const E=T.length;for(const I of o)for(const R of I){const L=R.x,V=R.y;if(L<0||L>=ht||V<0||V>=ht)continue;const W=this.segments.prepareSegment(E*E,this.layoutVertexArray,this.indexArray,n.sortKey),K=W.vertexLength;for(let ee=0;ee<E;ee++)for(let le=0;le<E;le++)By(this.layoutVertexArray,L,V,T[le],T[ee]);for(let ee=0;ee<E-1;ee++)for(let le=0;le<E-1;le++){const he=K+ee*E+le,ye=K+(ee+1)*E+le;this.indexArray.emplaceBack(he,ye+1,he+1),this.indexArray.emplaceBack(he,ye,ye+1)}W.vertexLength+=E*E,W.primitiveLength+=(E-1)*(E-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{imagePositions:{},canonical:v})}}function Fy(l,n){for(let o=0;o<l.length;o++)if(Bl(n,l[o]))return!0;for(let o=0;o<n.length;o++)if(Bl(l,n[o]))return!0;return!!Kf(l,n)}function Fd(l,n,o){return!!Bl(l,n)||!!Qf(n,l,o)}function Pi(l,n){if(l.length===1)return zm(n,l[0]);for(let o=0;o<n.length;o++){const d=n[o];for(let v=0;v<d.length;v++)if(Bl(l,d[v]))return!0}for(let o=0;o<l.length;o++)if(zm(n,l[o]))return!0;for(let o=0;o<n.length;o++)if(Kf(l,n[o]))return!0;return!1}function ta(l,n,o){if(l.length>1){if(Kf(l,n))return!0;for(let d=0;d<n.length;d++)if(Qf(n[d],l,o))return!0}for(let d=0;d<l.length;d++)if(Qf(l[d],n,o))return!0;return!1}function Kf(l,n){if(l.length===0||n.length===0)return!1;for(let o=0;o<l.length-1;o++){const d=l[o],v=l[o+1];for(let x=0;x<n.length-1;x++)if($y(d,v,n[x],n[x+1]))return!0}return!1}function $y(l,n,o,d){return Yr(l,o,d)!==Yr(n,o,d)&&Yr(l,n,o)!==Yr(l,n,d)}function Qf(l,n,o){const d=o*o;if(n.length===1)return l.distSqr(n[0])<d;for(let v=1;v<n.length;v++)if(km(l,n[v-1],n[v])<d)return!0;return!1}function km(l,n,o){const d=n.distSqr(o);if(d===0)return l.distSqr(n);const v=((l.x-n.x)*(o.x-n.x)+(l.y-n.y)*(o.y-n.y))/d;return l.distSqr(v<0?n:v>1?o:o.sub(n)._mult(v)._add(n))}function zm(l,n){let o,d,v,x=!1;for(let T=0;T<l.length;T++){o=l[T];for(let E=0,I=o.length-1;E<o.length;I=E++)d=o[E],v=o[I],d.y>n.y!=v.y>n.y&&n.x<(v.x-d.x)*(n.y-d.y)/(v.y-d.y)+d.x&&(x=!x)}return x}function Bl(l,n){let o=!1;for(let d=0,v=l.length-1;d<l.length;v=d++){const x=l[d],T=l[v];x.y>n.y!=T.y>n.y&&n.x<(T.x-x.x)*(n.y-x.y)/(T.y-x.y)+x.x&&(o=!o)}return o}function Dm(l,n,o){const d=o[0],v=o[2];if(l.x<d.x&&n.x<d.x||l.x>v.x&&n.x>v.x||l.y<d.y&&n.y<d.y||l.y>v.y&&n.y>v.y)return!1;const x=Yr(l,n,o[0]);return x!==Yr(l,n,o[1])||x!==Yr(l,n,o[2])||x!==Yr(l,n,o[3])}function _u(l,n,o){const d=n.paint.get(l).value;return d.kind==="constant"?d.value:o.programConfigurations.get(n.id).getMaxValue(l)}function $d(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function qd(l,n,o,d,v){if(!n[0]&&!n[1])return l;const x=M.convert(n)._mult(v);o==="viewport"&&x._rotate(-d);const T=[];for(let E=0;E<l.length;E++)T.push(l[E].sub(x));return T}function Rm({queryGeometry:l,size:n},o){return Fd(l,o,n)}function Nm({queryGeometry:l,size:n,transform:o,unwrappedTileID:d,getElevation:v},x){return Fd(l,x,n*(o.projectTileCoordinates(x.x,x.y,d,v).signedDistanceFromCamera/o.cameraToCenterDistance))}function Lm({queryGeometry:l,size:n,transform:o,unwrappedTileID:d,getElevation:v},x){const T=o.projectTileCoordinates(x.x,x.y,d,v).signedDistanceFromCamera,E=n*(o.cameraToCenterDistance/T);return Fd(l,zh(x,o,d,v),E)}function qy({queryGeometry:l,size:n,transform:o,unwrappedTileID:d,getElevation:v},x){return Fd(l,zh(x,o,d,v),n)}function Jf({queryGeometry:l,size:n,transform:o,unwrappedTileID:d,getElevation:v,pitchAlignment:x="map",pitchScale:T="map"},E){const I=x==="map"?T==="map"?Rm:Nm:T==="map"?Lm:qy,R={queryGeometry:l,size:n,transform:o,unwrappedTileID:d,getElevation:v};for(const L of E)for(const V of L)if(I(R,V))return!0;return!1}function zh(l,n,o,d){const v=n.projectTileCoordinates(l.x,l.y,o,d).point;return new M((.5*v.x+.5)*n.width,(.5*-v.y+.5)*n.height)}let ep,Bm;zt("CircleBucket",Yf,{omit:["layers"]});var Fm={get paint(){return Bm=Bm||new Mi({"circle-radius":new Ht(Ue.paint_circle["circle-radius"]),"circle-color":new Ht(Ue.paint_circle["circle-color"]),"circle-blur":new Ht(Ue.paint_circle["circle-blur"]),"circle-opacity":new Ht(Ue.paint_circle["circle-opacity"]),"circle-translate":new Nt(Ue.paint_circle["circle-translate"]),"circle-translate-anchor":new Nt(Ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Nt(Ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Nt(Ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ht(Ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ht(Ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ht(Ue.paint_circle["circle-stroke-opacity"])})},get layout(){return ep=ep||new Mi({"circle-sort-key":new Ht(Ue.layout_circle["circle-sort-key"])})}};class Uy extends Xa{constructor(n,o){super(n,Fm,o)}createBucket(n){return new Yf(n)}queryRadius(n){const o=n;return _u("circle-radius",this,o)+_u("circle-stroke-width",this,o)+$d(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:d,geometry:v,transform:x,pixelsToTileUnits:T,unwrappedTileID:E,getElevation:I}){const R=qd(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-x.bearingInRadians,T),L=this.paint.get("circle-radius").evaluate(o,d)+this.paint.get("circle-stroke-width").evaluate(o,d),V=this.paint.get("circle-pitch-scale"),W=this.paint.get("circle-pitch-alignment");let K,ee;return W==="map"?(K=R,ee=L*T):(K=function(le,he,ye,Be){return le.map(Ae=>zh(Ae,he,ye,Be))}(R,x,E,I),ee=L),Jf({queryGeometry:K,size:ee,transform:x,unwrappedTileID:E,getElevation:I,pitchAlignment:W,pitchScale:V},v)}}class Xs extends Yf{}let tp;zt("HeatmapBucket",Xs,{omit:["layers"]});var b0={get paint(){return tp=tp||new Mi({"heatmap-radius":new Ht(Ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ht(Ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Nt(Ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Cc(Ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Nt(Ue.paint_heatmap["heatmap-opacity"])})}};function rp(l,{width:n,height:o},d,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==n*o*d)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${n*o*d}`)}else v=new Uint8Array(n*o*d);return l.width=n,l.height=o,l.data=v,l}function Ws(l,{width:n,height:o},d){if(n===l.width&&o===l.height)return;const v=rp({},{width:n,height:o},d);np(l,v,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,n),height:Math.min(l.height,o)},d),l.width=n,l.height=o,l.data=v.data}function np(l,n,o,d,v,x){if(v.width===0||v.height===0)return n;if(v.width>l.width||v.height>l.height||o.x>l.width-v.width||o.y>l.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>n.width||v.height>n.height||d.x>n.width-v.width||d.y>n.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const T=l.data,E=n.data;if(T===E)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<v.height;I++){const R=((o.y+I)*l.width+o.x)*x,L=((d.y+I)*n.width+d.x)*x;for(let V=0;V<v.width*x;V++)E[L+V]=T[R+V]}return n}class zc{constructor(n,o){rp(this,n,1,o)}resize(n){Ws(this,n,1)}clone(){return new zc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,d,v,x){np(n,o,d,v,x,1)}}class Ei{constructor(n,o){rp(this,n,4,o)}resize(n){Ws(this,n,4)}replace(n,o){o?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ei({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,d,v,x){np(n,o,d,v,x,4)}setPixel(n,o,d){const v=4*(n*this.width+o);this.data[v+0]=Math.round(255*d.r/d.a),this.data[v+1]=Math.round(255*d.g/d.a),this.data[v+2]=Math.round(255*d.b/d.a),this.data[v+3]=Math.round(255*d.a)}}function Un(l){const n={},o=l.resolution||256,d=l.clips?l.clips.length:1,v=l.image||new Ei({width:o,height:d});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const x=(T,E,I)=>{n[l.evaluationKey]=I;const R=l.expression.evaluate(n);v.setPixel(T/4/o,E/4,R)};if(l.clips)for(let T=0,E=0;T<d;++T,E+=4*o)for(let I=0,R=0;I<o;I++,R+=4){const L=I/(o-1),{start:V,end:W}=l.clips[T];x(E,R,V*(1-L)+W*L)}else for(let T=0,E=0;T<o;T++,E+=4)x(0,E,T/(o-1));return v}zt("AlphaImage",zc),zt("RGBAImage",Ei);const $m="big-fb";class x0 extends Xa{createBucket(n){return new Xs(n)}constructor(n,o){super(n,b0,o),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Un({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has($m)&&this.heatmapFbos.delete($m)}queryRadius(n){return _u("heatmap-radius",this,n)}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:d,geometry:v,transform:x,pixelsToTileUnits:T,unwrappedTileID:E,getElevation:I}){return Jf({queryGeometry:n,size:this.paint.get("heatmap-radius").evaluate(o,d)*T,transform:x,unwrappedTileID:E,getElevation:I},v)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let qm;var Ud={get paint(){return qm=qm||new Mi({"hillshade-illumination-direction":new Nt(Ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Nt(Ue.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Nt(Ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Nt(Ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Nt(Ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Nt(Ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Nt(Ue.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Nt(Ue.paint_hillshade["hillshade-method"])})}};class Dc extends Xa{constructor(n,o){super(n,Ud,o),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let n=this.paint.get("hillshade-illumination-direction").values,o=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,v=this.paint.get("hillshade-shadow-color").values;const x=Math.max(n.length,o.length,d.length,v.length);n=n.concat(Array(x-n.length).fill(n.at(-1))),o=o.concat(Array(x-o.length).fill(o.at(-1))),d=d.concat(Array(x-d.length).fill(d.at(-1))),v=v.concat(Array(x-v.length).fill(v.at(-1)));const T=o.map(Ts);return{directionRadians:n.map(Ts),altitudeRadians:T,shadowColor:v,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Um;var Vy={get paint(){return Um=Um||new Mi({"color-relief-opacity":new Nt(Ue["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Cc(Ue["paint_color-relief"]["color-relief-color"])})}};class bu{constructor(n,o,d,v){this.context=n,this.format=d,this.texture=n.gl.createTexture(),this.update(o,v)}update(n,o,d){const{width:v,height:x}=n,T=!(this.size&&this.size[0]===v&&this.size[1]===x||d),{context:E}=this,{gl:I}=E;if(this.useMipmap=!!(o&&o.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!o||o.premultiply!==!1)),T)this.size=[v,x],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||Xn(n)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,n):I.texImage2D(I.TEXTURE_2D,0,this.format,v,x,0,this.format,I.UNSIGNED_BYTE,n.data);else{const{x:R,y:L}=d||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||Xn(n)?I.texSubImage2D(I.TEXTURE_2D,0,R,L,I.RGBA,I.UNSIGNED_BYTE,n):I.texSubImage2D(I.TEXTURE_2D,0,R,L,v,x,I.RGBA,I.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D),E.pixelStoreUnpackFlipY.setDefault(),E.pixelStoreUnpack.setDefault(),E.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(n,o,d){const{context:v}=this,{gl:x}=v;x.bindTexture(x.TEXTURE_2D,this.texture),d!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=x.LINEAR),n!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,n),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,d||n),this.filter=n),o!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,o),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class ys{constructor(n,o,d,v=1,x=1,T=1,E=0){if(this.uid=n,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Qt(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const I=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=x,this.blueFactor=T,this.baseShift=E;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let R=0;R<I;R++)this.data[this._idx(-1,R)]=this.data[this._idx(0,R)],this.data[this._idx(I,R)]=this.data[this._idx(I-1,R)],this.data[this._idx(R,-1)]=this.data[this._idx(R,0)],this.data[this._idx(R,I)]=this.data[this._idx(R,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let R=0;R<I;R++)for(let L=0;L<I;L++){const V=this.get(R,L);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(n,o){const d=new Uint8Array(this.data.buffer),v=4*this._idx(n,o);return this.unpack(d[v],d[v+1],d[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,o){if(n<-1||n>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(n+1)}unpack(n,o,d){return n*this.redFactor+o*this.greenFactor+d*this.blueFactor-this.baseShift}pack(n){return Vm(n,this.getUnpackVector())}getPixels(){return new Ei({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,o,d){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let v=o*this.dim,x=o*this.dim+this.dim,T=d*this.dim,E=d*this.dim+this.dim;switch(o){case-1:v=x-1;break;case 1:x=v+1}switch(d){case-1:T=E-1;break;case 1:E=T+1}const I=-o*this.dim,R=-d*this.dim;for(let L=T;L<E;L++)for(let V=v;V<x;V++)this.data[this._idx(V,L)]=n.data[this._idx(V+I,L+R)]}}function Vm(l,n){const o=n[0],d=n[1],v=n[2],x=n[3],T=Math.min(o,d,v),E=Math.round((l+x)/T);return{r:Math.floor(E*T/o)%256,g:Math.floor(E*T/d)%256,b:Math.floor(E*T/v)%256}}zt("DEMData",ys);class Gm extends Xa{constructor(n,o){super(n,Vy,o)}_createColorRamp(n){const o={elevationStops:[],colorStops:[]},d=this._transitionablePaint._values["color-relief-color"].value.expression;if(d instanceof Ol&&d._styleExpression.expression instanceof pi){this.colorRampExpression=d;const T=d._styleExpression.expression;o.elevationStops=T.labels,o.colorStops=[];for(const E of o.elevationStops)o.colorStops.push(T.evaluate({globals:{elevation:E}}))}if(o.elevationStops.length<1&&(o.elevationStops=[0],o.colorStops=[vr.transparent]),o.elevationStops.length<2&&(o.elevationStops.push(o.elevationStops[0]+1),o.colorStops.push(o.colorStops[0])),o.elevationStops.length<=n)return o;const v={elevationStops:[],colorStops:[]},x=(o.elevationStops.length-1)/(n-1);for(let T=0;T<o.elevationStops.length-.5;T+=x)v.elevationStops.push(o.elevationStops[Math.round(T)]),v.colorStops.push(o.colorStops[Math.round(T)]);return Qt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),v}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(n,o,d){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const v=this._createColorRamp(o),x=new Ei({width:v.colorStops.length,height:1}),T=new Ei({width:v.colorStops.length,height:1});for(let E=0;E<v.elevationStops.length;E++){const I=Vm(v.elevationStops[E],d);T.setPixel(0,E,new vr(I.r/255,I.g/255,I.b/255,1)),x.setPixel(0,E,v.colorStops[E])}return this.colorRampTextures={elevationTexture:new bu(n,T,n.gl.RGBA),colorTexture:new bu(n,x,n.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const Gy=En([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zm}=Gy;function Dh(l,n,o){const d=o.patternDependencies;let v=!1;for(const x of n){const T=x.paint.get(`${l}-pattern`);T.isConstant()||(v=!0);const E=T.constantOr(null);E&&(v=!0,d[E.to]=!0,d[E.from]=!0)}return v}function Rh(l,n,o,d,v){const{zoom:x}=d,T=v.patternDependencies;for(const E of n){const I=E.paint.get(`${l}-pattern`).value;if(I.kind!=="constant"){let R=I.evaluate({zoom:x-1},o,{},v.availableImages),L=I.evaluate({zoom:x},o,{},v.availableImages),V=I.evaluate({zoom:x+1},o,{},v.availableImages);R=R&&R.name?R.name:R,L=L&&L.name?L.name:L,V=V&&V.name?V.name:V,T[R]=!0,T[L]=!0,T[V]=!0,o.patterns[E.id]={min:R,mid:L,max:V}}}return o}function Hm(l,n,o,d,v){let x;if(v===function(T,E,I,R){let L=0;for(let V=E,W=I-R;V<I;V+=R)L+=(T[W]-T[V])*(T[V+1]+T[W+1]),W=V;return L}(l,n,o,d)>0)for(let T=n;T<o;T+=d)x=Rc(T/d|0,l[T],l[T+1],x);else for(let T=o-d;T>=n;T-=d)x=Rc(T/d|0,l[T],l[T+1],x);return x&&Vi(x,x.next)&&(Xo(x),x=x.next),x}function za(l,n){if(!l)return l;n||(n=l);let o,d=l;do if(o=!1,d.steiner||!Vi(d,d.next)&&Nn(d.prev,d,d.next)!==0)d=d.next;else{if(Xo(d),d=n=d.prev,d===d.next)break;o=!0}while(o||d!==n);return n}function Rn(l,n,o,d,v,x,T){if(!l)return;!T&&x&&function(I,R,L,V){let W=I;do W.z===0&&(W.z=xa(W.x,W.y,R,L,V)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==I);W.prevZ.nextZ=null,W.prevZ=null,function(K){let ee,le=1;do{let he,ye=K;K=null;let Be=null;for(ee=0;ye;){ee++;let Ae=ye,je=0;for(let it=0;it<le&&(je++,Ae=Ae.nextZ,Ae);it++);let Ye=le;for(;je>0||Ye>0&&Ae;)je!==0&&(Ye===0||!Ae||ye.z<=Ae.z)?(he=ye,ye=ye.nextZ,je--):(he=Ae,Ae=Ae.nextZ,Ye--),Be?Be.nextZ=he:K=he,he.prevZ=Be,Be=he;ye=Ae}Be.nextZ=null,le*=2}while(ee>1)}(W)}(l,d,v,x);let E=l;for(;l.prev!==l.next;){const I=l.prev,R=l.next;if(x?Zy(l,d,v,x):Xm(l))n.push(I.i,l.i,R.i),Xo(l),l=R.next,E=R.next;else if((l=R)===E){T?T===1?Rn(l=Ui(za(l),n),n,o,d,v,x,2):T===2&&w0(l,n,o,d,v,x):Rn(za(l),n,o,d,v,x,1);break}}}function Xm(l){const n=l.prev,o=l,d=l.next;if(Nn(n,o,d)>=0)return!1;const v=n.x,x=o.x,T=d.x,E=n.y,I=o.y,R=d.y,L=Math.min(v,x,T),V=Math.min(E,I,R),W=Math.max(v,x,T),K=Math.max(E,I,R);let ee=d.next;for(;ee!==n;){if(ee.x>=L&&ee.x<=W&&ee.y>=V&&ee.y<=K&&Nh(v,E,x,I,T,R,ee.x,ee.y)&&Nn(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function Zy(l,n,o,d){const v=l.prev,x=l,T=l.next;if(Nn(v,x,T)>=0)return!1;const E=v.x,I=x.x,R=T.x,L=v.y,V=x.y,W=T.y,K=Math.min(E,I,R),ee=Math.min(L,V,W),le=Math.max(E,I,R),he=Math.max(L,V,W),ye=xa(K,ee,n,o,d),Be=xa(le,he,n,o,d);let Ae=l.prevZ,je=l.nextZ;for(;Ae&&Ae.z>=ye&&je&&je.z<=Be;){if(Ae.x>=K&&Ae.x<=le&&Ae.y>=ee&&Ae.y<=he&&Ae!==v&&Ae!==T&&Nh(E,L,I,V,R,W,Ae.x,Ae.y)&&Nn(Ae.prev,Ae,Ae.next)>=0||(Ae=Ae.prevZ,je.x>=K&&je.x<=le&&je.y>=ee&&je.y<=he&&je!==v&&je!==T&&Nh(E,L,I,V,R,W,je.x,je.y)&&Nn(je.prev,je,je.next)>=0))return!1;je=je.nextZ}for(;Ae&&Ae.z>=ye;){if(Ae.x>=K&&Ae.x<=le&&Ae.y>=ee&&Ae.y<=he&&Ae!==v&&Ae!==T&&Nh(E,L,I,V,R,W,Ae.x,Ae.y)&&Nn(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.prevZ}for(;je&&je.z<=Be;){if(je.x>=K&&je.x<=le&&je.y>=ee&&je.y<=he&&je!==v&&je!==T&&Nh(E,L,I,V,R,W,je.x,je.y)&&Nn(je.prev,je,je.next)>=0)return!1;je=je.nextZ}return!0}function Ui(l,n){let o=l;do{const d=o.prev,v=o.next.next;!Vi(d,v)&&Ho(d,o,o.next,v)&&Lh(d,v)&&Lh(v,d)&&(n.push(d.i,o.i,v.i),Xo(o),Xo(o.next),o=l=v),o=o.next}while(o!==l);return za(o)}function w0(l,n,o,d,v,x){let T=l;do{let E=T.next.next;for(;E!==T.prev;){if(T.i!==E.i&&S0(T,E)){let I=$l(T,E);return T=za(T,T.next),I=za(I,I.next),Rn(T,n,o,d,v,x,0),void Rn(I,n,o,d,v,x,0)}E=E.next}T=T.next}while(T!==l)}function Hy(l,n){let o=l.x-n.x;return o===0&&(o=l.y-n.y,o===0)&&(o=(l.next.y-l.y)/(l.next.x-l.x)-(n.next.y-n.y)/(n.next.x-n.x)),o}function Xy(l,n){const o=function(v,x){let T=x;const E=v.x,I=v.y;let R,L=-1/0;if(Vi(v,T))return T;do{if(Vi(v,T.next))return T.next;if(I<=T.y&&I>=T.next.y&&T.next.y!==T.y){const le=T.x+(I-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(le<=E&&le>L&&(L=le,R=T.x<T.next.x?T:T.next,le===E))return R}T=T.next}while(T!==x);if(!R)return null;const V=R,W=R.x,K=R.y;let ee=1/0;T=R;do{if(E>=T.x&&T.x>=W&&E!==T.x&&Wm(I<K?E:L,I,W,K,I<K?L:E,I,T.x,T.y)){const le=Math.abs(I-T.y)/(E-T.x);Lh(T,v)&&(le<ee||le===ee&&(T.x>R.x||T.x===R.x&&Vn(R,T)))&&(R=T,ee=le)}T=T.next}while(T!==V);return R}(l,n);if(!o)return n;const d=$l(o,l);return za(d,d.next),za(o,o.next)}function Vn(l,n){return Nn(l.prev,l,n.prev)<0&&Nn(n.next,l,l.next)<0}function xa(l,n,o,d,v){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-o)*v|0)|l<<8))|l<<4))|l<<2))|l<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-d)*v|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Fl(l){let n=l,o=l;do(n.x<o.x||n.x===o.x&&n.y<o.y)&&(o=n),n=n.next;while(n!==l);return o}function Wm(l,n,o,d,v,x,T,E){return(v-T)*(n-E)>=(l-T)*(x-E)&&(l-T)*(d-E)>=(o-T)*(n-E)&&(o-T)*(x-E)>=(v-T)*(d-E)}function Nh(l,n,o,d,v,x,T,E){return!(l===T&&n===E)&&Wm(l,n,o,d,v,x,T,E)}function S0(l,n){return l.next.i!==n.i&&l.prev.i!==n.i&&!function(o,d){let v=o;do{if(v.i!==o.i&&v.next.i!==o.i&&v.i!==d.i&&v.next.i!==d.i&&Ho(v,v.next,o,d))return!0;v=v.next}while(v!==o);return!1}(l,n)&&(Lh(l,n)&&Lh(n,l)&&function(o,d){let v=o,x=!1;const T=(o.x+d.x)/2,E=(o.y+d.y)/2;do v.y>E!=v.next.y>E&&v.next.y!==v.y&&T<(v.next.x-v.x)*(E-v.y)/(v.next.y-v.y)+v.x&&(x=!x),v=v.next;while(v!==o);return x}(l,n)&&(Nn(l.prev,l,n.prev)||Nn(l,n.prev,n))||Vi(l,n)&&Nn(l.prev,l,l.next)>0&&Nn(n.prev,n,n.next)>0)}function Nn(l,n,o){return(n.y-l.y)*(o.x-n.x)-(n.x-l.x)*(o.y-n.y)}function Vi(l,n){return l.x===n.x&&l.y===n.y}function Ho(l,n,o,d){const v=wa(Nn(l,n,o)),x=wa(Nn(l,n,d)),T=wa(Nn(o,d,l)),E=wa(Nn(o,d,n));return v!==x&&T!==E||!(v!==0||!Vd(l,o,n))||!(x!==0||!Vd(l,d,n))||!(T!==0||!Vd(o,l,d))||!(E!==0||!Vd(o,n,d))}function Vd(l,n,o){return n.x<=Math.max(l.x,o.x)&&n.x>=Math.min(l.x,o.x)&&n.y<=Math.max(l.y,o.y)&&n.y>=Math.min(l.y,o.y)}function wa(l){return l>0?1:l<0?-1:0}function Lh(l,n){return Nn(l.prev,l,l.next)<0?Nn(l,n,l.next)>=0&&Nn(l,l.prev,n)>=0:Nn(l,n,l.prev)<0||Nn(l,l.next,n)<0}function $l(l,n){const o=Gd(l.i,l.x,l.y),d=Gd(n.i,n.x,n.y),v=l.next,x=n.prev;return l.next=n,n.prev=l,o.next=v,v.prev=o,d.next=o,o.prev=d,x.next=d,d.prev=x,d}function Rc(l,n,o,d){const v=Gd(l,n,o);return d?(v.next=d.next,v.prev=d,d.next.prev=v,d.next=v):(v.prev=v,v.next=v),v}function Xo(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Gd(l,n,o){return{i:l,x:n,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Nc{constructor(n,o){if(o>n)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=n,this._minGranularity=o}getGranularityForZoomLevel(n){return Math.max(Math.floor(this._baseZoomGranularity/(1<<n)),this._minGranularity,1)}}class xo{constructor(n){this.fill=n.fill,this.line=n.line,this.tile=n.tile,this.stencil=n.stencil,this.circle=n.circle}}xo.noSubdivision=new xo({fill:new Nc(0,0),line:new Nc(0,0),tile:new Nc(0,0),stencil:new Nc(0,0),circle:1}),zt("SubdivisionGranularityExpression",Nc),zt("SubdivisionGranularitySetting",xo);const xu=-32768,Ys=32767;class Zd{constructor(n,o){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=n,this._granularityCellSize=ht/n,this._canonical=o}_getKey(n,o){return(n+=32768)<<16|o+32768}_vertexToIndex(n,o){if(n<-32768||o<-32768||n>32767||o>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(n),v=0|Math.round(o),x=this._getKey(d,v);if(this._vertexDictionary.has(x))return this._vertexDictionary.get(x);const T=this._vertexBuffer.length/2;return this._vertexDictionary.set(x,T),this._vertexBuffer.push(d,v),T}_subdivideTrianglesScanline(n){if(this._granularity<2)return function(v,x){const T=[];for(let E=0;E<x.length;E+=3){const I=x[E],R=x[E+1],L=x[E+2],V=v[2*I],W=v[2*I+1];(v[2*R]-V)*(v[2*L+1]-W)-(v[2*R+1]-W)*(v[2*L]-V)>0?(T.push(I),T.push(L),T.push(R)):(T.push(I),T.push(R),T.push(L))}return T}(this._vertexBuffer,n);const o=[],d=n.length;for(let v=0;v<d;v+=3){const x=[n[v+0],n[v+1],n[v+2]],T=[this._vertexBuffer[2*n[v+0]+0],this._vertexBuffer[2*n[v+0]+1],this._vertexBuffer[2*n[v+1]+0],this._vertexBuffer[2*n[v+1]+1],this._vertexBuffer[2*n[v+2]+0],this._vertexBuffer[2*n[v+2]+1]];let E=1/0,I=1/0,R=-1/0,L=-1/0;for(let le=0;le<3;le++){const he=T[2*le],ye=T[2*le+1];E=Math.min(E,he),R=Math.max(R,he),I=Math.min(I,ye),L=Math.max(L,ye)}if(E===R||I===L)continue;const V=Math.floor(E/this._granularityCellSize),W=Math.ceil(R/this._granularityCellSize),K=Math.floor(I/this._granularityCellSize),ee=Math.ceil(L/this._granularityCellSize);if(V!==W||K!==ee)for(let le=K;le<ee;le++){const he=this._scanlineGenerateVertexRingForCellRow(le,T,x);Wy(this._vertexBuffer,he,o)}else o.push(...x)}return o}_scanlineGenerateVertexRingForCellRow(n,o,d){const v=n*this._granularityCellSize,x=v+this._granularityCellSize,T=[];for(let E=0;E<3;E++){const I=o[2*E],R=o[2*E+1],L=o[2*(E+1)%6],V=o[(2*(E+1)+1)%6],W=o[2*(E+2)%6],K=o[(2*(E+2)+1)%6],ee=L-I,le=V-R,he=ee===0,ye=le===0,Be=(v-R)/le,Ae=(x-R)/le,je=Math.min(Be,Ae),Ye=Math.max(Be,Ae);if(!ye&&(je>=1||Ye<=0)||ye&&(R<v||R>x)){V>=v&&V<=x&&T.push(d[(E+1)%3]);continue}!ye&&je>0&&T.push(this._vertexToIndex(I+ee*je,R+le*je));const it=I+ee*Math.max(je,0),gt=I+ee*Math.min(Ye,1);he||this._generateIntraEdgeVertices(T,I,R,L,V,it,gt),!ye&&Ye<1&&T.push(this._vertexToIndex(I+ee*Ye,R+le*Ye)),(ye||V>=v&&V<=x)&&T.push(d[(E+1)%3]),!ye&&(V<=v||V>=x)&&this._generateInterEdgeVertices(T,I,R,L,V,W,K,gt,v,x)}return T}_generateIntraEdgeVertices(n,o,d,v,x,T,E){const I=v-o,R=x-d,L=R===0,V=L?Math.min(o,v):Math.min(T,E),W=L?Math.max(o,v):Math.max(T,E),K=Math.floor(V/this._granularityCellSize)+1,ee=Math.ceil(W/this._granularityCellSize)-1;if(L?o<v:T<E)for(let le=K;le<=ee;le++){const he=le*this._granularityCellSize;n.push(this._vertexToIndex(he,d+R*(he-o)/I))}else for(let le=ee;le>=K;le--){const he=le*this._granularityCellSize;n.push(this._vertexToIndex(he,d+R*(he-o)/I))}}_generateInterEdgeVertices(n,o,d,v,x,T,E,I,R,L){const V=x-d,W=T-v,K=E-x,ee=(R-x)/K,le=(L-x)/K,he=Math.min(ee,le),ye=Math.max(ee,le),Be=v+W*he;let Ae=Math.floor(Math.min(Be,I)/this._granularityCellSize)+1,je=Math.ceil(Math.max(Be,I)/this._granularityCellSize)-1,Ye=I<Be;const it=K===0;if(it&&(E===R||E===L))return;if(it||he>=1||ye<=0){const Et=d-E,Mt=T+(o-T)*Math.min((R-E)/Et,(L-E)/Et);Ae=Math.floor(Math.min(Mt,I)/this._granularityCellSize)+1,je=Math.ceil(Math.max(Mt,I)/this._granularityCellSize)-1,Ye=I<Mt}const gt=V>0?L:R;if(Ye)for(let Et=Ae;Et<=je;Et++)n.push(this._vertexToIndex(Et*this._granularityCellSize,gt));else for(let Et=je;Et>=Ae;Et--)n.push(this._vertexToIndex(Et*this._granularityCellSize,gt))}_generateOutline(n){const o=[];for(const d of n){const v=Wo(d,this._granularity,!0),x=this._pointArrayToIndices(v),T=[];for(let E=1;E<x.length;E++)T.push(x[E-1]),T.push(x[E]);o.push(T)}return o}_handlePoles(n){let o=!1,d=!1;this._canonical&&(this._canonical.y===0&&(o=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(o||d)&&this._fillPoles(n,o,d)}_ensureNoPoleVertices(){const n=this._vertexBuffer;for(let o=0;o<n.length;o+=2){const d=n[o+1];d===xu&&(n[o+1]=-32767),d===Ys&&(n[o+1]=32766)}}_generatePoleQuad(n,o,d,v,x,T){v>x!=(T===xu)?(n.push(o),n.push(d),n.push(this._vertexToIndex(v,T)),n.push(d),n.push(this._vertexToIndex(x,T)),n.push(this._vertexToIndex(v,T))):(n.push(d),n.push(o),n.push(this._vertexToIndex(v,T)),n.push(this._vertexToIndex(x,T)),n.push(d),n.push(this._vertexToIndex(v,T)))}_fillPoles(n,o,d){const v=this._vertexBuffer,x=ht,T=n.length;for(let E=2;E<T;E+=3){const I=n[E-2],R=n[E-1],L=n[E],V=v[2*I],W=v[2*I+1],K=v[2*R],ee=v[2*R+1],le=v[2*L],he=v[2*L+1];o&&(W===0&&ee===0&&this._generatePoleQuad(n,I,R,V,K,xu),ee===0&&he===0&&this._generatePoleQuad(n,R,L,K,le,xu),he===0&&W===0&&this._generatePoleQuad(n,L,I,le,V,xu)),d&&(W===x&&ee===x&&this._generatePoleQuad(n,I,R,V,K,Ys),ee===x&&he===x&&this._generatePoleQuad(n,R,L,K,le,Ys),he===x&&W===x&&this._generatePoleQuad(n,L,I,le,V,Ys))}}_initializeVertices(n){for(let o=0;o<n.length;o+=2)this._vertexToIndex(n[o],n[o+1])}subdividePolygonInternal(n,o){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:v}=function(E){const I=[],R=[];for(const L of E)if(L.length!==0){L!==E[0]&&I.push(R.length/2);for(let V=0;V<L.length;V++)R.push(L[V].x),R.push(L[V].y)}return{flattened:R,holeIndices:I}}(n);let x;this._initializeVertices(d);try{const E=function(R,L,V=2){const W=L&&L.length,K=W?L[0]*V:R.length;let ee=Hm(R,0,K,V,!0);const le=[];if(!ee||ee.next===ee.prev)return le;let he,ye,Be;if(W&&(ee=function(Ae,je,Ye,it){const gt=[];for(let Et=0,Mt=je.length;Et<Mt;Et++){const jt=Hm(Ae,je[Et]*it,Et<Mt-1?je[Et+1]*it:Ae.length,it,!1);jt===jt.next&&(jt.steiner=!0),gt.push(Fl(jt))}gt.sort(Hy);for(let Et=0;Et<gt.length;Et++)Ye=Xy(gt[Et],Ye);return Ye}(R,L,ee,V)),R.length>80*V){he=R[0],ye=R[1];let Ae=he,je=ye;for(let Ye=V;Ye<K;Ye+=V){const it=R[Ye],gt=R[Ye+1];it<he&&(he=it),gt<ye&&(ye=gt),it>Ae&&(Ae=it),gt>je&&(je=gt)}Be=Math.max(Ae-he,je-ye),Be=Be!==0?32767/Be:0}return Rn(ee,le,V,he,ye,Be,0),le}(d,v),I=this._convertIndices(d,E);x=this._subdivideTrianglesScanline(I)}catch(E){console.error(E)}let T=[];return o&&(T=this._generateOutline(n)),this._ensureNoPoleVertices(),this._handlePoles(x),{verticesFlattened:this._vertexBuffer,indicesTriangles:x,indicesLineList:T}}_convertIndices(n,o){const d=[];for(let v=0;v<o.length;v++)d.push(this._vertexToIndex(n[2*o[v]],n[2*o[v]+1]));return d}_pointArrayToIndices(n){const o=[];for(let d=0;d<n.length;d++){const v=n[d];o.push(this._vertexToIndex(v.x,v.y))}return o}}function Bh(l,n,o,d=!0){return new Zd(o,n).subdividePolygonInternal(l,d)}function Wo(l,n,o=!1){if(!l||l.length<1)return[];if(l.length<2)return[];const d=l[0],v=l[l.length-1],x=o&&(d.x!==v.x||d.y!==v.y);if(n<2)return x?[...l,l[0]]:[...l];const T=Math.floor(ht/n),E=[];E.push(new M(l[0].x,l[0].y));const I=l.length,R=x?I:I-1;for(let L=0;L<R;L++){const V=l[L],W=L<I-1?l[L+1]:l[0],K=V.x,ee=V.y,le=W.x,he=W.y,ye=K!==le,Be=ee!==he;if(!ye&&!Be)continue;const Ae=le-K,je=he-ee,Ye=Math.abs(Ae),it=Math.abs(je);let gt=K,Et=ee;for(;;){const jt=Ae>0?(Math.floor(gt/T)+1)*T:(Math.ceil(gt/T)-1)*T,$t=je>0?(Math.floor(Et/T)+1)*T:(Math.ceil(Et/T)-1)*T,It=Math.abs(gt-jt),kt=Math.abs(Et-$t),dt=Math.abs(gt-le),tr=Math.abs(Et-he),ar=ye?It/Ye:Number.POSITIVE_INFINITY,Gt=Be?kt/it:Number.POSITIVE_INFINITY;if((dt<=It||!ye)&&(tr<=kt||!Be))break;if(ar<Gt&&ye||!Be){gt=jt,Et+=je*ar;const Ut=new M(gt,Math.round(Et));E[E.length-1].x===Ut.x&&E[E.length-1].y===Ut.y||E.push(Ut)}else{gt+=Ae*Gt,Et=$t;const Ut=new M(Math.round(gt),Et);E[E.length-1].x===Ut.x&&E[E.length-1].y===Ut.y||E.push(Ut)}}const Mt=new M(le,he);E[E.length-1].x===Mt.x&&E[E.length-1].y===Mt.y||E.push(Mt)}return E}function Wy(l,n,o){if(n.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,v=l[2*n[0]];for(let I=1;I<n.length;I++){const R=l[2*n[I]];R<v&&(v=R,d=I)}const x=n.length;let T=d,E=(T+1)%x;for(;;){const I=T-1>=0?T-1:x-1,R=(E+1)%x,L=l[2*n[I]],V=l[2*n[R]],W=l[2*n[T]],K=l[2*n[T]+1],ee=l[2*n[E]+1];let le=!1;if(L<V)le=!0;else if(L>V)le=!1;else{const he=ee-K,ye=-(l[2*n[E]]-W),Be=K<ee?1:-1;((L-W)*he+(l[2*n[I]+1]-K)*ye)*Be>((V-W)*he+(l[2*n[R]+1]-K)*ye)*Be&&(le=!0)}if(le){const he=n[I],ye=n[T],Be=n[E];he!==ye&&he!==Be&&ye!==Be&&o.push(Be,ye,he),T--,T<0&&(T=x-1)}else{const he=n[R],ye=n[T],Be=n[E];he!==ye&&he!==Be&&ye!==Be&&o.push(Be,ye,he),E++,E>=x&&(E=0)}if(I===R)break}}function Ym(l,n,o,d,v,x,T,E,I){const R=v.length/2,L=T&&E&&I;if(R<wr.MAX_VERTEX_ARRAY_LENGTH){const V=n.prepareSegment(R,o,d),W=V.vertexLength;for(let le=0;le<x.length;le+=3)d.emplaceBack(W+x[le],W+x[le+1],W+x[le+2]);let K,ee;V.vertexLength+=R,V.primitiveLength+=x.length/3,L&&(ee=T.prepareSegment(R,o,E),K=ee.vertexLength,ee.vertexLength+=R);for(let le=0;le<v.length;le+=2)l(v[le],v[le+1]);if(L)for(let le=0;le<I.length;le++){const he=I[le];for(let ye=1;ye<he.length;ye+=2)E.emplaceBack(K+he[ye-1],K+he[ye]);ee.primitiveLength+=he.length/2}}else(function(V,W,K,ee,le,he){const ye=[];for(let it=0;it<ee.length/2;it++)ye.push(-1);const Be={count:0};let Ae=0,je=V.getOrCreateLatestSegment(W,K),Ye=je.vertexLength;for(let it=2;it<le.length;it+=3){const gt=le[it-2],Et=le[it-1],Mt=le[it];let jt=ye[gt]<Ae,$t=ye[Et]<Ae,It=ye[Mt]<Ae;je.vertexLength+((jt?1:0)+($t?1:0)+(It?1:0))>wr.MAX_VERTEX_ARRAY_LENGTH&&(je=V.createNewSegment(W,K),Ae=Be.count,jt=!0,$t=!0,It=!0,Ye=0);const kt=ql(ye,ee,he,Be,gt,jt,je),dt=ql(ye,ee,he,Be,Et,$t,je),tr=ql(ye,ee,he,Be,Mt,It,je);K.emplaceBack(Ye+kt-Ae,Ye+dt-Ae,Ye+tr-Ae),je.primitiveLength++}})(n,o,d,v,x,l),L&&function(V,W,K,ee,le,he){const ye=[];for(let it=0;it<ee.length/2;it++)ye.push(-1);const Be={count:0};let Ae=0,je=V.getOrCreateLatestSegment(W,K),Ye=je.vertexLength;for(let it=0;it<le.length;it++){const gt=le[it];for(let Et=1;Et<le[it].length;Et+=2){const Mt=gt[Et-1],jt=gt[Et];let $t=ye[Mt]<Ae,It=ye[jt]<Ae;je.vertexLength+(($t?1:0)+(It?1:0))>wr.MAX_VERTEX_ARRAY_LENGTH&&(je=V.createNewSegment(W,K),Ae=Be.count,$t=!0,It=!0,Ye=0);const kt=ql(ye,ee,he,Be,Mt,$t,je),dt=ql(ye,ee,he,Be,jt,It,je);K.emplaceBack(Ye+kt-Ae,Ye+dt-Ae),je.primitiveLength++}}}(T,o,E,v,I,l),n.forceNewSegmentOnNextPrepare(),T==null||T.forceNewSegmentOnNextPrepare()}function ql(l,n,o,d,v,x,T){if(x){const E=d.count;return o(n[2*v],n[2*v+1]),l[v]=d.count,d.count++,T.vertexLength++,E}return l[v]}class ip{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Re,this.indexArray=new Xr,this.indexArray2=new ln,this.programConfigurations=new ba(n.layers,n.zoom),this.segments=new wr,this.segments2=new wr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,d){this.hasDependencies=Dh("fill",this.layers,o);const v=this.layers[0].layout.get("fill-sort-key"),x=!v.isConstant(),T=[];for(const{feature:E,id:I,index:R,sourceLayerIndex:L}of n){const V=this.layers[0]._featureFilter.needGeometry,W=kc(E,V);if(!this.layers[0]._featureFilter.filter(new nn(this.zoom),W,d))continue;const K=x?v.evaluate(W,{},d,o.availableImages):void 0,ee={id:I,properties:E.properties,type:E.type,sourceLayerIndex:L,index:R,geometry:V?W.geometry:Hs(E),patterns:{},sortKey:K};T.push(ee)}x&&T.sort((E,I)=>E.sortKey-I.sortKey);for(const E of T){const{geometry:I,index:R,sourceLayerIndex:L}=E;if(this.hasDependencies){const V=Rh("fill",this.layers,E,{zoom:this.zoom},o);this.patternFeatures.push(V)}else this.addFeature(E,I,R,d,{},o.subdivisionGranularity);o.featureIndex.insert(n[R].feature,I,R,L,this.index)}}update(n,o,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:d})}addFeatures(n,o,d){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,o,d,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Zm),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,o,d,v,x,T){for(const E of mh(o,500)){const I=Bh(E,v,T.fill.getGranularityForZoomLevel(v.z)),R=this.layoutVertexArray;Ym((L,V)=>{R.emplaceBack(L,V)},this.segments,this.layoutVertexArray,this.indexArray,I.verticesFlattened,I.indicesTriangles,this.segments2,this.indexArray2,I.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{imagePositions:x,canonical:v})}}let Hd,Km;zt("FillBucket",ip,{omit:["layers","patternFeatures"]});var T0={get paint(){return Km=Km||new Mi({"fill-antialias":new Nt(Ue.paint_fill["fill-antialias"]),"fill-opacity":new Ht(Ue.paint_fill["fill-opacity"]),"fill-color":new Ht(Ue.paint_fill["fill-color"]),"fill-outline-color":new Ht(Ue.paint_fill["fill-outline-color"]),"fill-translate":new Nt(Ue.paint_fill["fill-translate"]),"fill-translate-anchor":new Nt(Ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ec(Ue.paint_fill["fill-pattern"])})},get layout(){return Hd=Hd||new Mi({"fill-sort-key":new Ht(Ue.layout_fill["fill-sort-key"])})}};class A0 extends Xa{constructor(n,o){super(n,T0,o)}recalculate(n,o){super.recalculate(n,o);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new ip(n)}queryRadius(){return $d(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:n,geometry:o,transform:d,pixelsToTileUnits:v}){return Pi(qd(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,v),o)}isTileClipped(){return!0}}const mn=En([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),jn=En([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Rr}=mn;class jr{constructor(n,o,d,v,x){this.properties={},this.extent=d,this.type=0,this.id=void 0,this._pbf=n,this._geometry=-1,this._keys=v,this._values=x,n.readFields(gn,this,o)}loadGeometry(){const n=this._pbf;n.pos=this._geometry;const o=n.readVarint()+n.pos,d=[];let v,x=1,T=0,E=0,I=0;for(;n.pos<o;){if(T<=0){const R=n.readVarint();x=7&R,T=R>>3}if(T--,x===1||x===2)E+=n.readSVarint(),I+=n.readSVarint(),x===1&&(v&&d.push(v),v=[]),v&&v.push(new M(E,I));else{if(x!==7)throw new Error(`unknown command ${x}`);v&&v.push(v[0].clone())}}return v&&d.push(v),d}bbox(){const n=this._pbf;n.pos=this._geometry;const o=n.readVarint()+n.pos;let d=1,v=0,x=0,T=0,E=1/0,I=-1/0,R=1/0,L=-1/0;for(;n.pos<o;){if(v<=0){const V=n.readVarint();d=7&V,v=V>>3}if(v--,d===1||d===2)x+=n.readSVarint(),T+=n.readSVarint(),x<E&&(E=x),x>I&&(I=x),T<R&&(R=T),T>L&&(L=T);else if(d!==7)throw new Error(`unknown command ${d}`)}return[E,R,I,L]}toGeoJSON(n,o,d){const v=this.extent*Math.pow(2,d),x=this.extent*n,T=this.extent*o,E=this.loadGeometry();function I(W){return[360*(W.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((1-2*(W.y+T)/v)*Math.PI))-90]}function R(W){return W.map(I)}let L;if(this.type===1){const W=[];for(const ee of E)W.push(ee[0]);const K=R(W);L=W.length===1?{type:"Point",coordinates:K[0]}:{type:"MultiPoint",coordinates:K}}else if(this.type===2){const W=E.map(R);L=W.length===1?{type:"LineString",coordinates:W[0]}:{type:"MultiLineString",coordinates:W}}else{if(this.type!==3)throw new Error("unknown feature type");{const W=function(ee){const le=ee.length;if(le<=1)return[ee];const he=[];let ye,Be;for(let Ae=0;Ae<le;Ae++){const je=wo(ee[Ae]);je!==0&&(Be===void 0&&(Be=je<0),Be===je<0?(ye&&he.push(ye),ye=[ee[Ae]]):ye&&ye.push(ee[Ae]))}return ye&&he.push(ye),he}(E),K=[];for(const ee of W)K.push(ee.map(R));L=K.length===1?{type:"Polygon",coordinates:K[0]}:{type:"MultiPolygon",coordinates:K}}}const V={type:"Feature",geometry:L,properties:this.properties};return this.id!=null&&(V.id=this.id),V}}function gn(l,n,o){l===1?n.id=o.readVarint():l===2?function(d,v){const x=d.readVarint()+d.pos;for(;d.pos<x;){const T=v._keys[d.readVarint()],E=v._values[d.readVarint()];v.properties[T]=E}}(o,n):l===3?n.type=o.readVarint():l===4&&(n._geometry=o.pos)}function wo(l){let n=0;for(let o,d,v=0,x=l.length,T=x-1;v<x;T=v++)o=l[v],d=l[T],n+=(d.x-o.x)*(o.y+d.y);return n}jr.types=["Unknown","Point","LineString","Polygon"];class Ul{constructor(n,o){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(Fh,this,o),this.length=this._features.length}feature(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];const o=this._pbf.readVarint()+this._pbf.pos;return new jr(this._pbf,o,this.extent,this._keys,this._values)}}function Fh(l,n,o){l===15?n.version=o.readVarint():l===1?n.name=o.readString():l===5?n.extent=o.readVarint():l===2?n._features.push(o.pos):l===3?n._keys.push(o.readString()):l===4&&n._values.push(function(d){let v=null;const x=d.readVarint()+d.pos;for(;d.pos<x;){const T=d.readVarint()>>3;v=T===1?d.readString():T===2?d.readFloat():T===3?d.readDouble():T===4?d.readVarint64():T===5?d.readVarint():T===6?d.readSVarint():T===7?d.readBoolean():null}if(v==null)throw new Error("unknown feature value");return v}(o))}class ap{constructor(n,o){this.layers=n.readFields(Vl,{},o)}}function Vl(l,n,o){if(l===3){const d=new Ul(o,o.readVarint()+o.pos);d.length&&(n[d.name]=d)}}const Gn=Math.pow(2,13);function Yo(l,n,o,d,v,x,T,E){l.emplaceBack(n,o,2*Math.floor(d*Gn)+T,v*Gn*2,x*Gn*2,Math.round(E))}class Gl{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasDependencies=!1,this.layoutVertexArray=new nt,this.centroidVertexArray=new Oe,this.indexArray=new Xr,this.programConfigurations=new ba(n.layers,n.zoom),this.segments=new wr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,d){this.features=[],this.hasDependencies=Dh("fill-extrusion",this.layers,o);for(const{feature:v,id:x,index:T,sourceLayerIndex:E}of n){const I=this.layers[0]._featureFilter.needGeometry,R=kc(v,I);if(!this.layers[0]._featureFilter.filter(new nn(this.zoom),R,d))continue;const L={id:x,sourceLayerIndex:E,index:T,geometry:I?R.geometry:Hs(v),properties:v.properties,type:v.type,patterns:{}};this.hasDependencies?this.features.push(Rh("fill-extrusion",this.layers,L,{zoom:this.zoom},o)):this.addFeature(L,L.geometry,T,d,{},o.subdivisionGranularity),o.featureIndex.insert(v,L.geometry,T,E,this.index,!0)}}addFeatures(n,o,d){for(const v of this.features){const{geometry:x}=v;this.addFeature(v,x,v.index,o,d,n.subdivisionGranularity)}}update(n,o,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:d})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Rr),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,jn.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,o,d,v,x,T){for(const E of mh(o,500)){const I={x:0,y:0,sampleCount:0},R=this.layoutVertexArray.length;this.processPolygon(I,v,n,E,T);const L=this.layoutVertexArray.length-R,V=Math.floor(I.x/I.sampleCount),W=Math.floor(I.y/I.sampleCount);for(let K=0;K<L;K++)this.centroidVertexArray.emplaceBack(V,W)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{imagePositions:x,canonical:v})}processPolygon(n,o,d,v,x){if(v.length<1||wu(v[0]))return;for(const V of v)V.length!==0&&Qm(n,V);const T={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},E=x.fill.getGranularityForZoomLevel(o.z),I=jr.types[d.type]==="Polygon";for(const V of v){if(V.length===0||wu(V))continue;const W=Wo(V,E,I);this._generateSideFaces(W,T)}if(!I)return;const R=Bh(v,o,E,!1),L=this.layoutVertexArray;Ym((V,W)=>{Yo(L,V,W,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,R.verticesFlattened,R.indicesTriangles)}_generateSideFaces(n,o){let d=0;for(let v=1;v<n.length;v++){const x=n[v],T=n[v-1];if(Ko(x,T))continue;o.segment.vertexLength+4>wr.MAX_VERTEX_ARRAY_LENGTH&&(o.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const E=x.sub(T)._perp()._unit(),I=T.dist(x);d+I>32768&&(d=0),Yo(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,0,d),Yo(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,1,d),d+=I,Yo(this.layoutVertexArray,T.x,T.y,E.x,E.y,0,0,d),Yo(this.layoutVertexArray,T.x,T.y,E.x,E.y,0,1,d);const R=o.segment.vertexLength;this.indexArray.emplaceBack(R,R+2,R+1),this.indexArray.emplaceBack(R+1,R+2,R+3),o.segment.vertexLength+=4,o.segment.primitiveLength+=2}}}function Qm(l,n){for(let o=0;o<n.length;o++){const d=n[o];o===n.length-1&&n[0].x===d.x&&n[0].y===d.y||(l.x+=d.x,l.y+=d.y,l.sampleCount++)}}function Ko(l,n){return l.x===n.x&&(l.x<0||l.x>ht)||l.y===n.y&&(l.y<0||l.y>ht)}function wu(l){return l.every(n=>n.x<0)||l.every(n=>n.x>ht)||l.every(n=>n.y<0)||l.every(n=>n.y>ht)}let $h;zt("FillExtrusionBucket",Gl,{omit:["layers","features"]});var eo={get paint(){return $h=$h||new Mi({"fill-extrusion-opacity":new Nt(Ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ht(Ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Nt(Ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Nt(Ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ec(Ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ht(Ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ht(Ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Nt(Ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Jm extends Xa{constructor(n,o){super(n,eo,o)}createBucket(n){return new Gl(n)}queryRadius(){return $d(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:d,geometry:v,transform:x,pixelsToTileUnits:T,pixelPosMatrix:E}){const I=qd(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-x.bearingInRadians,T),R=this.paint.get("fill-extrusion-height").evaluate(o,d),L=this.paint.get("fill-extrusion-base").evaluate(o,d),V=function(K,ee){const le=[];for(const he of K){const ye=[he.x,he.y,0,1];ut(ye,ye,ee),le.push(new M(ye[0]/ye[3],ye[1]/ye[3]))}return le}(I,E),W=function(K,ee,le,he){const ye=[],Be=[],Ae=he[8]*ee,je=he[9]*ee,Ye=he[10]*ee,it=he[11]*ee,gt=he[8]*le,Et=he[9]*le,Mt=he[10]*le,jt=he[11]*le;for(const $t of K){const It=[],kt=[];for(const dt of $t){const tr=dt.x,ar=dt.y,Gt=he[0]*tr+he[4]*ar+he[12],Ut=he[1]*tr+he[5]*ar+he[13],Er=he[2]*tr+he[6]*ar+he[14],bn=he[3]*tr+he[7]*ar+he[15],Zn=Er+Ye,Ci=bn+it,na=Gt+gt,ia=Ut+Et,ai=Er+Mt,Tn=bn+jt,Si=new M((Gt+Ae)/Ci,(Ut+je)/Ci);Si.z=Zn/Ci,It.push(Si);const oi=new M(na/Tn,ia/Tn);oi.z=ai/Tn,kt.push(oi)}ye.push(It),Be.push(kt)}return[ye,Be]}(v,L,R,E);return function(K,ee,le){let he=1/0;Pi(le,ee)&&(he=Xd(le,ee[0]));for(let ye=0;ye<ee.length;ye++){const Be=ee[ye],Ae=K[ye];for(let je=0;je<Be.length-1;je++){const Ye=Be[je],it=[Ye,Be[je+1],Ae[je+1],Ae[je],Ye];Fy(le,it)&&(he=Math.min(he,Xd(le,it)))}}return he!==1/0&&he}(W[0],W[1],V)}}function Su(l,n){return l.x*n.x+l.y*n.y}function Xd(l,n){if(l.length===1){let o=0;const d=n[o++];let v;for(;!v||d.equals(v);)if(v=n[o++],!v)return 1/0;for(;o<n.length;o++){const x=n[o],T=l[0],E=v.sub(d),I=x.sub(d),R=T.sub(d),L=Su(E,E),V=Su(E,I),W=Su(I,I),K=Su(R,E),ee=Su(R,I),le=L*W-V*V,he=(W*K-V*ee)/le,ye=(L*ee-V*K)/le,Be=d.z*(1-he-ye)+v.z*he+x.z*ye;if(isFinite(Be))return Be}return 1/0}{let o=1/0;for(const d of n)o=Math.min(o,d.z);return o}}const op=En([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Lc}=op,ra=En([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Bc}=ra,qh=Math.cos(Math.PI/180*37.5),Tu=Math.pow(2,14)/.5;class Wd{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new We,this.layoutVertexArray2=new Ke,this.indexArray=new Xr,this.programConfigurations=new ba(n.layers,n.zoom),this.segments=new wr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,d){this.hasDependencies=Dh("line",this.layers,o)||this.hasLineDasharray(this.layers);const v=this.layers[0].layout.get("line-sort-key"),x=!v.isConstant(),T=[];for(const{feature:E,id:I,index:R,sourceLayerIndex:L}of n){const V=this.layers[0]._featureFilter.needGeometry,W=kc(E,V);if(!this.layers[0]._featureFilter.filter(new nn(this.zoom),W,d))continue;const K=x?v.evaluate(W,{},d):void 0,ee={id:I,properties:E.properties,type:E.type,sourceLayerIndex:L,index:R,geometry:V?W.geometry:Hs(E),patterns:{},dashes:{},sortKey:K};T.push(ee)}x&&T.sort((E,I)=>E.sortKey-I.sortKey);for(const E of T){const{geometry:I,index:R,sourceLayerIndex:L}=E;this.hasDependencies?(Dh("line",this.layers,o)?Rh("line",this.layers,E,{zoom:this.zoom},o):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,E,this.zoom,o),this.patternFeatures.push(E)):this.addFeature(E,I,R,d,{},{},o.subdivisionGranularity),o.featureIndex.insert(n[R].feature,I,R,L,this.index)}}update(n,o,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:d,dashPositions:v})}addFeatures(n,o,d,v){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,o,d,v,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Bc)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Lc),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,o,d,v,x,T,E){const I=this.layers[0].layout,R=I.get("line-join").evaluate(n,{}),L=I.get("line-cap"),V=I.get("line-miter-limit"),W=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const K of o)this.addLine(K,n,R,L,V,W,v,E);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{imagePositions:x,dashPositions:T,canonical:v})}addLine(n,o,d,v,x,T,E,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,n=Wo(n,E?I.line.getGranularityForZoomLevel(E.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ae=0;Ae<n.length-1;Ae++)this.totalDistance+=n[Ae].dist(n[Ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=jr.types[o.type]==="Polygon";let L=n.length;for(;L>=2&&n[L-1].equals(n[L-2]);)L--;let V=0;for(;V<L-1&&n[V].equals(n[V+1]);)V++;if(L<(R?3:2))return;d==="bevel"&&(x=1.05);const W=this.overscaling<=16?122880/(512*this.overscaling):0,K=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray);let ee,le,he,ye,Be;this.e1=this.e2=-1,R&&(ee=n[L-2],Be=n[V].sub(ee)._unit()._perp());for(let Ae=V;Ae<L;Ae++){if(he=Ae===L-1?R?n[V+1]:void 0:n[Ae+1],he&&n[Ae].equals(he))continue;Be&&(ye=Be),ee&&(le=ee),ee=n[Ae],Be=he?he.sub(ee)._unit()._perp():ye,ye=ye||Be;let je=ye.add(Be);je.x===0&&je.y===0||je._unit();const Ye=ye.x*Be.x+ye.y*Be.y,it=je.x*Be.x+je.y*Be.y,gt=it!==0?1/it:1/0,Et=2*Math.sqrt(2-2*it),Mt=it<qh&&le&&he,jt=ye.x*Be.y-ye.y*Be.x>0;if(Mt&&Ae>V){const kt=ee.dist(le);if(kt>2*W){const dt=ee.sub(ee.sub(le)._mult(W/kt)._round());this.updateDistance(le,dt),this.addCurrentVertex(dt,ye,0,0,K),le=dt}}const $t=le&&he;let It=$t?d:R?"butt":v;if($t&&It==="round"&&(gt<T?It="miter":gt<=2&&(It="fakeround")),It==="miter"&&gt>x&&(It="bevel"),It==="bevel"&&(gt>2&&(It="flipbevel"),gt<x&&(It="miter")),le&&this.updateDistance(le,ee),It==="miter")je._mult(gt),this.addCurrentVertex(ee,je,0,0,K);else if(It==="flipbevel"){if(gt>100)je=Be.mult(-1);else{const kt=gt*ye.add(Be).mag()/ye.sub(Be).mag();je._perp()._mult(kt*(jt?-1:1))}this.addCurrentVertex(ee,je,0,0,K),this.addCurrentVertex(ee,je.mult(-1),0,0,K)}else if(It==="bevel"||It==="fakeround"){const kt=-Math.sqrt(gt*gt-1),dt=jt?kt:0,tr=jt?0:kt;if(le&&this.addCurrentVertex(ee,ye,dt,tr,K),It==="fakeround"){const ar=Math.round(180*Et/Math.PI/20);for(let Gt=1;Gt<ar;Gt++){let Ut=Gt/ar;if(Ut!==.5){const bn=Ut-.5;Ut+=Ut*bn*(Ut-1)*((1.0904+Ye*(Ye*(3.55645-1.43519*Ye)-3.2452))*bn*bn+(.848013+Ye*(.215638*Ye-1.06021)))}const Er=Be.sub(ye)._mult(Ut)._add(ye)._unit()._mult(jt?-1:1);this.addHalfVertex(ee,Er.x,Er.y,!1,jt,0,K)}}he&&this.addCurrentVertex(ee,Be,-dt,-tr,K)}else if(It==="butt")this.addCurrentVertex(ee,je,0,0,K);else if(It==="square"){const kt=le?1:-1;this.addCurrentVertex(ee,je,kt,kt,K)}else It==="round"&&(le&&(this.addCurrentVertex(ee,ye,0,0,K),this.addCurrentVertex(ee,ye,1,1,K,!0)),he&&(this.addCurrentVertex(ee,Be,-1,-1,K,!0),this.addCurrentVertex(ee,Be,0,0,K)));if(Mt&&Ae<L-1){const kt=ee.dist(he);if(kt>2*W){const dt=ee.add(he.sub(ee)._mult(W/kt)._round());this.updateDistance(ee,dt),this.addCurrentVertex(dt,Be,0,0,K),ee=dt}}}}addCurrentVertex(n,o,d,v,x,T=!1){const E=o.y*v-o.x,I=-o.y-o.x*v;this.addHalfVertex(n,o.x+o.y*d,o.y-o.x*d,T,!1,d,x),this.addHalfVertex(n,E,I,T,!0,-v,x),this.distance>Tu/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,o,d,v,x,T))}addHalfVertex({x:n,y:o},d,v,x,T,E,I){const R=.5*(this.lineClips?this.scaledDistance*(Tu-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(x?1:0),(o<<1)+(T?1:0),Math.round(63*d)+128,Math.round(63*v)+128,1+(E===0?0:E<0?-1:1)|(63&R)<<2,R>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const L=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,L,this.e2),I.primitiveLength++),T?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,o){this.distance+=n.dist(o),this.updateScaledDistance()}hasLineDasharray(n){for(const o of n){const d=o.paint.get("line-dasharray");if(d&&!d.isConstant())return!0}return!1}addLineDashDependencies(n,o,d,v){for(const x of n){const T=x.paint.get("line-dasharray");if(!T||T.value.kind==="constant")continue;const E=x.layout.get("line-cap")==="round",I={dasharray:T.value.evaluate({zoom:d-1},o,{}),round:E},R={dasharray:T.value.evaluate({zoom:d},o,{}),round:E},L={dasharray:T.value.evaluate({zoom:d+1},o,{}),round:E},V=`${I.dasharray.join(",")},${I.round}`,W=`${R.dasharray.join(",")},${R.round}`,K=`${L.dasharray.join(",")},${L.round}`;v.dashDependencies[V]=I,v.dashDependencies[W]=R,v.dashDependencies[K]=L,o.dashes[x.id]={min:V,mid:W,max:K}}}}let sp,eg;zt("LineBucket",Wd,{omit:["layers","patternFeatures"]});var Uh={get paint(){return eg=eg||new Mi({"line-opacity":new Ht(Ue.paint_line["line-opacity"]),"line-color":new Ht(Ue.paint_line["line-color"]),"line-translate":new Nt(Ue.paint_line["line-translate"]),"line-translate-anchor":new Nt(Ue.paint_line["line-translate-anchor"]),"line-width":new Ht(Ue.paint_line["line-width"]),"line-gap-width":new Ht(Ue.paint_line["line-gap-width"]),"line-offset":new Ht(Ue.paint_line["line-offset"]),"line-blur":new Ht(Ue.paint_line["line-blur"]),"line-dasharray":new Ec(Ue.paint_line["line-dasharray"]),"line-pattern":new Ec(Ue.paint_line["line-pattern"]),"line-gradient":new Cc(Ue.paint_line["line-gradient"])})},get layout(){return sp=sp||new Mi({"line-cap":new Nt(Ue.layout_line["line-cap"]),"line-join":new Ht(Ue.layout_line["line-join"]),"line-miter-limit":new Nt(Ue.layout_line["line-miter-limit"]),"line-round-limit":new Nt(Ue.layout_line["line-round-limit"]),"line-sort-key":new Ht(Ue.layout_line["line-sort-key"])})}};class tg extends Ht{possiblyEvaluate(n,o){return o=new nn(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(n,o)}evaluate(n,o,d,v){return o=nr({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(n,o,d,v)}}let Sa;class Yy extends Xa{constructor(n,o){super(n,Uh,o),this.gradientVersion=0,Sa||(Sa=new tg(Uh.paint.properties["line-width"].specification),Sa.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(o)&&o._styleExpression.expression instanceof Cs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,o){super.recalculate(n,o),this.paint._values["line-floorwidth"]=Sa.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Wd(n)}queryRadius(n){const o=n,d=to(_u("line-width",this,o),_u("line-gap-width",this,o)),v=_u("line-offset",this,o);return d/2+Math.abs(v)+$d(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:d,geometry:v,transform:x,pixelsToTileUnits:T}){const E=qd(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-x.bearingInRadians,T),I=T/2*to(this.paint.get("line-width").evaluate(o,d),this.paint.get("line-gap-width").evaluate(o,d)),R=this.paint.get("line-offset").evaluate(o,d);return R&&(v=function(L,V){const W=[];for(let K=0;K<L.length;K++){const ee=L[K],le=[];for(let he=0;he<ee.length;he++){const ye=ee[he-1],Be=ee[he],Ae=ee[he+1],je=he===0?new M(0,0):Be.sub(ye)._unit()._perp(),Ye=he===ee.length-1?new M(0,0):Ae.sub(Be)._unit()._perp(),it=je._add(Ye)._unit(),gt=it.x*Ye.x+it.y*Ye.y;gt!==0&&it._mult(1/gt),le.push(it._mult(V)._add(Be))}W.push(le)}return W}(v,R*T)),function(L,V,W){for(let K=0;K<V.length;K++){const ee=V[K];if(L.length>=3){for(let le=0;le<ee.length;le++)if(Bl(L,ee[le]))return!0}if(ta(L,ee,W))return!0}return!1}(E,v,I)}isTileClipped(){return!0}}function to(l,n){return n>0?n+2*l:l}const Ky=En([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Qy=En([{name:"a_projected_pos",components:3,type:"Float32"}],4);En([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const M0=En([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);En([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Zl=En([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),lp=En([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function rg(l,n,o){return l.sections.forEach(d=>{d.text=function(v,x,T){const E=x.layout.get("text-transform").evaluate(T,{});return E==="uppercase"?v=v.toLocaleUpperCase():E==="lowercase"&&(v=v.toLocaleLowerCase()),fs.applyArabicShaping&&(v=fs.applyArabicShaping(v)),v}(d.text,n,o)}),l}En([{name:"triangle",components:3,type:"Uint16"}]),En([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),En([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),En([{type:"Float32",name:"offsetX"}]),En([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),En([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ks={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var gi=24;const cp=4294967296,ng=1/cp,up=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Yd{constructor(n=new Uint8Array(16)){this.buf=ArrayBuffer.isView(n)?n:new Uint8Array(n),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(n,o,d=this.length){for(;this.pos<d;){const v=this.readVarint(),x=v>>3,T=this.pos;this.type=7&v,n(x,o,this),this.pos===T&&this.skip(v)}return o}readMessage(n,o){return this.readFields(n,o,this.readVarint()+this.pos)}readFixed32(){const n=this.dataView.getUint32(this.pos,!0);return this.pos+=4,n}readSFixed32(){const n=this.dataView.getInt32(this.pos,!0);return this.pos+=4,n}readFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*cp;return this.pos+=8,n}readSFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*cp;return this.pos+=8,n}readFloat(){const n=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,n}readDouble(){const n=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,n}readVarint(n){const o=this.buf;let d,v;return v=o[this.pos++],d=127&v,v<128?d:(v=o[this.pos++],d|=(127&v)<<7,v<128?d:(v=o[this.pos++],d|=(127&v)<<14,v<128?d:(v=o[this.pos++],d|=(127&v)<<21,v<128?d:(v=o[this.pos],d|=(15&v)<<28,function(x,T,E){const I=E.buf;let R,L;if(L=I[E.pos++],R=(112&L)>>4,L<128||(L=I[E.pos++],R|=(127&L)<<3,L<128)||(L=I[E.pos++],R|=(127&L)<<10,L<128)||(L=I[E.pos++],R|=(127&L)<<17,L<128)||(L=I[E.pos++],R|=(127&L)<<24,L<128)||(L=I[E.pos++],R|=(1&L)<<31,L<128))return Vh(x,R,T);throw new Error("Expected varint not more than 10 bytes")}(d,n,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const n=this.readVarint();return n%2==1?(n+1)/-2:n/2}readBoolean(){return!!this.readVarint()}readString(){const n=this.readVarint()+this.pos,o=this.pos;return this.pos=n,n-o>=12&&up?up.decode(this.buf.subarray(o,n)):function(d,v,x){let T="",E=v;for(;E<x;){const I=d[E];let R,L,V,W=null,K=I>239?4:I>223?3:I>191?2:1;if(E+K>x)break;K===1?I<128&&(W=I):K===2?(R=d[E+1],(192&R)==128&&(W=(31&I)<<6|63&R,W<=127&&(W=null))):K===3?(R=d[E+1],L=d[E+2],(192&R)==128&&(192&L)==128&&(W=(15&I)<<12|(63&R)<<6|63&L,(W<=2047||W>=55296&&W<=57343)&&(W=null))):K===4&&(R=d[E+1],L=d[E+2],V=d[E+3],(192&R)==128&&(192&L)==128&&(192&V)==128&&(W=(15&I)<<18|(63&R)<<12|(63&L)<<6|63&V,(W<=65535||W>=1114112)&&(W=null))),W===null?(W=65533,K=1):W>65535&&(W-=65536,T+=String.fromCharCode(W>>>10&1023|55296),W=56320|1023&W),T+=String.fromCharCode(W),E+=K}return T}(this.buf,o,n)}readBytes(){const n=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,n);return this.pos=n,o}readPackedVarint(n=[],o){const d=this.readPackedEnd();for(;this.pos<d;)n.push(this.readVarint(o));return n}readPackedSVarint(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSVarint());return n}readPackedBoolean(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readBoolean());return n}readPackedFloat(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFloat());return n}readPackedDouble(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readDouble());return n}readPackedFixed32(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFixed32());return n}readPackedSFixed32(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSFixed32());return n}readPackedFixed64(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFixed64());return n}readPackedSFixed64(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSFixed64());return n}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(n){const o=7&n;if(o===0)for(;this.buf[this.pos++]>127;);else if(o===2)this.pos=this.readVarint()+this.pos;else if(o===5)this.pos+=4;else{if(o!==1)throw new Error(`Unimplemented type: ${o}`);this.pos+=8}}writeTag(n,o){this.writeVarint(n<<3|o)}realloc(n){let o=this.length||16;for(;o<this.pos+n;)o*=2;if(o!==this.length){const d=new Uint8Array(o);d.set(this.buf),this.buf=d,this.dataView=new DataView(d.buffer),this.length=o}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeSFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*ng),!0),this.pos+=8}writeSFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*ng),!0),this.pos+=8}writeVarint(n){(n=+n||0)>268435455||n<0?function(o,d){let v,x;if(o>=0?(v=o%4294967296|0,x=o/4294967296|0):(v=~(-o%4294967296),x=~(-o/4294967296),4294967295^v?v=v+1|0:(v=0,x=x+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(T,E,I){I.buf[I.pos++]=127&T|128,T>>>=7,I.buf[I.pos++]=127&T|128,T>>>=7,I.buf[I.pos++]=127&T|128,T>>>=7,I.buf[I.pos++]=127&T|128,I.buf[I.pos]=127&(T>>>=7)}(v,0,d),function(T,E){const I=(7&T)<<4;E.buf[E.pos++]|=I|((T>>>=3)?128:0),T&&(E.buf[E.pos++]=127&T|((T>>>=7)?128:0),T&&(E.buf[E.pos++]=127&T|((T>>>=7)?128:0),T&&(E.buf[E.pos++]=127&T|((T>>>=7)?128:0),T&&(E.buf[E.pos++]=127&T|((T>>>=7)?128:0),T&&(E.buf[E.pos++]=127&T)))))}(x,d)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))}writeSVarint(n){this.writeVarint(n<0?2*-n-1:2*n)}writeBoolean(n){this.writeVarint(+n)}writeString(n){n=String(n),this.realloc(4*n.length),this.pos++;const o=this.pos;this.pos=function(v,x,T){for(let E,I,R=0;R<x.length;R++){if(E=x.charCodeAt(R),E>55295&&E<57344){if(!I){E>56319||R+1===x.length?(v[T++]=239,v[T++]=191,v[T++]=189):I=E;continue}if(E<56320){v[T++]=239,v[T++]=191,v[T++]=189,I=E;continue}E=I-55296<<10|E-56320|65536,I=null}else I&&(v[T++]=239,v[T++]=191,v[T++]=189,I=null);E<128?v[T++]=E:(E<2048?v[T++]=E>>6|192:(E<65536?v[T++]=E>>12|224:(v[T++]=E>>18|240,v[T++]=E>>12&63|128),v[T++]=E>>6&63|128),v[T++]=63&E|128)}return T}(this.buf,n,this.pos);const d=this.pos-o;d>=128&&Jy(o,d,this),this.pos=o-1,this.writeVarint(d),this.pos+=d}writeFloat(n){this.realloc(4),this.dataView.setFloat32(this.pos,n,!0),this.pos+=4}writeDouble(n){this.realloc(8),this.dataView.setFloat64(this.pos,n,!0),this.pos+=8}writeBytes(n){const o=n.length;this.writeVarint(o),this.realloc(o);for(let d=0;d<o;d++)this.buf[this.pos++]=n[d]}writeRawMessage(n,o){this.pos++;const d=this.pos;n(o,this);const v=this.pos-d;v>=128&&Jy(d,v,this),this.pos=d-1,this.writeVarint(v),this.pos+=v}writeMessage(n,o,d){this.writeTag(n,2),this.writeRawMessage(o,d)}writePackedVarint(n,o){o.length&&this.writeMessage(n,P0,o)}writePackedSVarint(n,o){o.length&&this.writeMessage(n,ev,o)}writePackedBoolean(n,o){o.length&&this.writeMessage(n,hp,o)}writePackedFloat(n,o){o.length&&this.writeMessage(n,tv,o)}writePackedDouble(n,o){o.length&&this.writeMessage(n,Gh,o)}writePackedFixed32(n,o){o.length&&this.writeMessage(n,rv,o)}writePackedSFixed32(n,o){o.length&&this.writeMessage(n,nv,o)}writePackedFixed64(n,o){o.length&&this.writeMessage(n,iv,o)}writePackedSFixed64(n,o){o.length&&this.writeMessage(n,av,o)}writeBytesField(n,o){this.writeTag(n,2),this.writeBytes(o)}writeFixed32Field(n,o){this.writeTag(n,5),this.writeFixed32(o)}writeSFixed32Field(n,o){this.writeTag(n,5),this.writeSFixed32(o)}writeFixed64Field(n,o){this.writeTag(n,1),this.writeFixed64(o)}writeSFixed64Field(n,o){this.writeTag(n,1),this.writeSFixed64(o)}writeVarintField(n,o){this.writeTag(n,0),this.writeVarint(o)}writeSVarintField(n,o){this.writeTag(n,0),this.writeSVarint(o)}writeStringField(n,o){this.writeTag(n,2),this.writeString(o)}writeFloatField(n,o){this.writeTag(n,5),this.writeFloat(o)}writeDoubleField(n,o){this.writeTag(n,1),this.writeDouble(o)}writeBooleanField(n,o){this.writeVarintField(n,+o)}}function Vh(l,n,o){return o?4294967296*n+(l>>>0):4294967296*(n>>>0)+(l>>>0)}function Jy(l,n,o){const d=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));o.realloc(d);for(let v=o.pos-1;v>=l;v--)o.buf[v+d]=o.buf[v]}function P0(l,n){for(let o=0;o<l.length;o++)n.writeVarint(l[o])}function ev(l,n){for(let o=0;o<l.length;o++)n.writeSVarint(l[o])}function tv(l,n){for(let o=0;o<l.length;o++)n.writeFloat(l[o])}function Gh(l,n){for(let o=0;o<l.length;o++)n.writeDouble(l[o])}function hp(l,n){for(let o=0;o<l.length;o++)n.writeBoolean(l[o])}function rv(l,n){for(let o=0;o<l.length;o++)n.writeFixed32(l[o])}function nv(l,n){for(let o=0;o<l.length;o++)n.writeSFixed32(l[o])}function iv(l,n){for(let o=0;o<l.length;o++)n.writeFixed64(l[o])}function av(l,n){for(let o=0;o<l.length;o++)n.writeSFixed64(l[o])}function ov(l,n,o){l===1&&o.readMessage(sv,n)}function sv(l,n,o){if(l===3){const{id:d,bitmap:v,width:x,height:T,left:E,top:I,advance:R}=o.readMessage(dp,{});n.push({id:d,bitmap:new zc({width:x+6,height:T+6},v),metrics:{width:x,height:T,left:E,top:I,advance:R}})}}function dp(l,n,o){l===1?n.id=o.readVarint():l===2?n.bitmap=o.readBytes():l===3?n.width=o.readVarint():l===4?n.height=o.readVarint():l===5?n.left=o.readSVarint():l===6?n.top=o.readSVarint():l===7&&(n.advance=o.readVarint())}function ig(l){let n=0,o=0;for(const T of l)n+=T.w*T.h,o=Math.max(o,T.w);l.sort((T,E)=>E.h-T.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),o),h:1/0}];let v=0,x=0;for(const T of l)for(let E=d.length-1;E>=0;E--){const I=d[E];if(!(T.w>I.w||T.h>I.h)){if(T.x=I.x,T.y=I.y,x=Math.max(x,T.y+T.h),v=Math.max(v,T.x+T.w),T.w===I.w&&T.h===I.h){const R=d.pop();R&&E<d.length&&(d[E]=R)}else T.h===I.h?(I.x+=T.w,I.w-=T.w):T.w===I.w?(I.y+=T.h,I.h-=T.h):(d.push({x:I.x+T.w,y:I.y,w:I.w-T.w,h:T.h}),I.y+=T.h,I.h-=T.h);break}}return{w:v,h:x,fill:n/(v*x)||0}}class fp{constructor(n,{pixelRatio:o,version:d,stretchX:v,stretchY:x,content:T,textFitWidth:E,textFitHeight:I}){this.paddedRect=n,this.pixelRatio=o,this.stretchX=v,this.stretchY=x,this.content=T,this.version=d,this.textFitWidth=E,this.textFitHeight=I}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class _n{constructor(n,o){const d={},v={};this.haveRenderCallbacks=[];const x=[];this.addImages(n,d,x),this.addImages(o,v,x);const{w:T,h:E}=ig(x),I=new Ei({width:T||1,height:E||1});for(const R in n){const L=n[R],V=d[R].paddedRect;Ei.copy(L.data,I,{x:0,y:0},{x:V.x+1,y:V.y+1},L.data)}for(const R in o){const L=o[R],V=v[R].paddedRect,W=V.x+1,K=V.y+1,ee=L.data.width,le=L.data.height;Ei.copy(L.data,I,{x:0,y:0},{x:W,y:K},L.data),Ei.copy(L.data,I,{x:0,y:le-1},{x:W,y:K-1},{width:ee,height:1}),Ei.copy(L.data,I,{x:0,y:0},{x:W,y:K+le},{width:ee,height:1}),Ei.copy(L.data,I,{x:ee-1,y:0},{x:W-1,y:K},{width:1,height:le}),Ei.copy(L.data,I,{x:0,y:0},{x:W+ee,y:K},{width:1,height:le})}this.image=I,this.iconPositions=d,this.patternPositions=v}addImages(n,o,d){for(const v in n){const x=n[v],T={x:0,y:0,w:x.data.width+2,h:x.data.height+2};d.push(T),o[v]=new fp(T,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(n,o){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in n.updatedImages)this.patchUpdatedImage(this.iconPositions[d],n.getImage(d),o),this.patchUpdatedImage(this.patternPositions[d],n.getImage(d),o)}patchUpdatedImage(n,o,d){if(!n||!o||n.version===o.version)return;n.version=o.version;const[v,x]=n.tl;d.update(o.data,void 0,{x:v,y:x})}}var Qs;zt("ImagePosition",fp),zt("ImageAtlas",_n),m.ao=void 0,(Qs=m.ao||(m.ao={}))[Qs.none=0]="none",Qs[Qs.horizontal=1]="horizontal",Qs[Qs.vertical=2]="vertical",Qs[Qs.horizontalOnly=3]="horizontalOnly";class Kd{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(n,o,d){const v=new Kd;return v.scale=n||1,v.fontStack=o,v.verticalAlign=d||"bottom",v}static forImage(n,o){const d=new Kd;return d.imageName=n,d.verticalAlign=o||"bottom",d}}class Au{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,o){const d=new Au;for(let v=0;v<n.sections.length;v++){const x=n.sections[v];x.image?d.addImageSection(x):d.addTextSection(x,o)}return d}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let o="";for(let d=0;d<n.length;d++){const v=n.charCodeAt(d+1)||null,x=n.charCodeAt(d-1)||null;o+=v&&Pc(v)&&!Ks[n[d+1]]||x&&Pc(x)&&!Ks[n[d-1]]||!Ks[n[d]]?n[d]:Ks[n[d]]}return o}(this.text)}trim(){let n=0;for(let d=0;d<this.text.length&&mp[this.text.charCodeAt(d)];d++)n++;let o=this.text.length;for(let d=this.text.length-1;d>=0&&d>=n&&mp[this.text.charCodeAt(d)];d--)o--;this.text=this.text.substring(n,o),this.sectionIndex=this.sectionIndex.slice(n,o)}substring(n,o){const d=new Au;return d.text=this.text.substring(n,o),d.sectionIndex=this.sectionIndex.slice(n,o),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,o)=>Math.max(n,this.sections[o].scale),0)}getMaxImageSize(n){let o=0,d=0;for(let v=0;v<this.length();v++){const x=this.getSection(v);if(x.imageName){const T=n[x.imageName];if(!T)continue;const E=T.displaySize;o=Math.max(o,E[0]),d=Math.max(d,E[1])}}return{maxImageWidth:o,maxImageHeight:d}}addTextSection(n,o){this.text+=n.text,this.sections.push(Kd.forText(n.scale,n.fontStack||o,n.verticalAlign));const d=this.sections.length-1;for(let v=0;v<n.text.length;++v)this.sectionIndex.push(d)}addImageSection(n){const o=n.image?n.image.name:"";if(o.length===0)return void Qt("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Kd.forImage(o,n.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Qt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function pp(l,n,o,d,v,x,T,E,I,R,L,V,W,K,ee){const le=Au.fromFeature(l,v);let he;V===m.ao.vertical&&le.verticalizePunctuation();const{processBidirectionalText:ye,processStyledBidirectionalText:Be}=fs;if(ye&&le.sections.length===1){he=[];const Ye=ye(le.toString(),Qo(le,R,x,n,d,K));for(const it of Ye){const gt=new Au;gt.text=it,gt.sections=le.sections;for(let Et=0;Et<it.length;Et++)gt.sectionIndex.push(0);he.push(gt)}}else if(Be){he=[];const Ye=Be(le.text,le.sectionIndex,Qo(le,R,x,n,d,K));for(const it of Ye){const gt=new Au;gt.text=it[0],gt.sectionIndex=it[1],gt.sections=le.sections,he.push(gt)}}else he=function(Ye,it){const gt=[],Et=Ye.text;let Mt=0;for(const jt of it)gt.push(Ye.substring(Mt,jt)),Mt=jt;return Mt<Et.length&&gt.push(Ye.substring(Mt,Et.length)),gt}(le,Qo(le,R,x,n,d,K));const Ae=[],je={positionedLines:Ae,text:le.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(Ye,it,gt,Et,Mt,jt,$t,It,kt,dt,tr,ar){let Gt=0,Ut=0,Er=0,bn=0;const Zn=It==="right"?1:It==="left"?0:.5,Ci=gi/ar;let na=0;for(const Tn of Mt){Tn.trim();const Si=Tn.getMaxScale(),oi={positionedGlyphs:[],lineOffset:0};Ye.positionedLines[na]=oi;const s=oi.positionedGlyphs;let h=0;if(!Tn.length()){Ut+=jt,++na;continue}const g=C0(Et,Tn,Ci);for(let j=0;j<Tn.length();j++){const N=Tn.getSection(j),Y=Tn.getSectionIndex(j),ce=Tn.getCharCode(j),Me=lv(kt,tr,ce);let qe;if(N.imageName){if(Ye.iconsInText=!0,N.scale=N.scale*Ci,qe=uv(N,Me,Si,g,Et),!qe)continue;h=Math.max(h,qe.imageOffset)}else if(qe=cv(N,ce,Me,g,it,gt),!qe)continue;const{rect:ft,metrics:xt,baselineOffset:et}=qe;s.push({glyph:ce,imageName:N.imageName,x:Gt,y:Ut+et+-17,vertical:Me,scale:N.scale,fontStack:N.fontStack,sectionIndex:Y,metrics:xt,rect:ft}),Me?(Ye.verticalizable=!0,Gt+=(N.imageName?xt.advance:gi)*N.scale+dt):Gt+=xt.advance*N.scale+dt}s.length!==0&&(Er=Math.max(Gt-dt,Er),j0(s,0,s.length-1,Zn)),Gt=0,oi.lineOffset=Math.max(h,(Si-1)*gi);const S=jt*Si+h;Ut+=S,bn=Math.max(S,bn),++na}const{horizontalAlign:ia,verticalAlign:ai}=Pu($t);(function(Tn,Si,oi,s,h,g,S,j,N){const Y=(Si-oi)*h;let ce=0;ce=g!==S?-j*s- -17:-s*N*S+.5*S;for(const Me of Tn)for(const qe of Me.positionedGlyphs)qe.x+=Y,qe.y+=ce})(Ye.positionedLines,Zn,ia,ai,Er,bn,jt,Ut,Mt.length),Ye.top+=-ai*Ut,Ye.bottom=Ye.top+Ut,Ye.left+=-ia*Er,Ye.right=Ye.left+Er}(je,n,o,d,he,T,E,I,V,R,W,ee),!function(Ye){for(const it of Ye)if(it.positionedGlyphs.length!==0)return!1;return!0}(Ae)&&je}const mp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},E0={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},gp={40:!0};function Mu(l,n,o,d,v,x){if(n.imageName){const T=d[n.imageName];return T?T.displaySize[0]*n.scale*gi/x+v:0}{const T=o[n.fontStack],E=T&&T[l];return E?E.metrics.advance*n.scale+v:0}}function yp(l,n,o,d){const v=Math.pow(l-n,2);return d?l<n?v/2:2*v:v+Math.abs(o)*o}function vp(l,n,o){let d=0;return l===10&&(d-=1e4),o&&(d+=150),l!==40&&l!==65288||(d+=50),n!==41&&n!==65289||(d+=50),d}function _p(l,n,o,d,v,x){let T=null,E=yp(n,o,v,x);for(const I of d){const R=yp(n-I.x,o,v,x)+I.badness;R<=E&&(T=I,E=R)}return{index:l,x:n,priorBreak:T,badness:E}}function Fc(l){return l?Fc(l.priorBreak).concat(l.index):[]}function Qo(l,n,o,d,v,x){if(!l)return[];const T=[],E=function(V,W,K,ee,le,he){let ye=0;for(let Be=0;Be<V.length();Be++){const Ae=V.getSection(Be);ye+=Mu(V.getCharCode(Be),Ae,ee,le,W,he)}return ye/Math.max(1,Math.ceil(ye/K))}(l,n,o,d,v,x),I=l.text.indexOf("​")>=0;let R=0;for(let V=0;V<l.length();V++){const W=l.getSection(V),K=l.getCharCode(V);if(mp[K]||(R+=Mu(K,W,d,v,n,x)),V<l.length()-1){const ee=!((L=K)<11904)&&(!!br["CJK Compatibility Forms"](L)||!!br["CJK Compatibility"](L)||!!br["CJK Strokes"](L)||!!br["CJK Symbols and Punctuation"](L)||!!br["Enclosed CJK Letters and Months"](L)||!!br["Halfwidth and Fullwidth Forms"](L)||!!br["Ideographic Description Characters"](L)||!!br["Vertical Forms"](L)||Th.test(String.fromCodePoint(L)));(E0[K]||ee||W.imageName||V!==l.length()-2&&gp[l.getCharCode(V+1)])&&T.push(_p(V+1,R,E,T,vp(K,l.getCharCode(V+1),ee&&I),!1))}}var L;return Fc(_p(l.length(),R,E,T,0,!0))}function Pu(l){let n=.5,o=.5;switch(l){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:n,verticalAlign:o}}function C0(l,n,o){const d=n.getMaxScale()*gi,{maxImageWidth:v,maxImageHeight:x}=n.getMaxImageSize(l),T=Math.max(d,x*o);return{verticalLineContentWidth:Math.max(d,v*o),horizontalLineContentHeight:T}}function ag(l){switch(l){case"top":return 0;case"center":return .5;default:return 1}}function lv(l,n,o){return!(l===m.ao.horizontal||!n&&!Bs(o)||n&&(mp[o]||(d=o,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function cv(l,n,o,d,v,x){const T=x[l.fontStack],E=function(R,L,V,W){if(R&&R.rect)return R;const K=L[V.fontStack],ee=K&&K[W];return ee?{rect:null,metrics:ee.metrics}:null}(T&&T[n],v,l,n);if(E===null)return null;let I;if(o)I=d.verticalLineContentWidth-l.scale*gi;else{const R=ag(l.verticalAlign);I=(d.horizontalLineContentHeight-l.scale*gi)*R}return{rect:E.rect,metrics:E.metrics,baselineOffset:I}}function uv(l,n,o,d,v){const x=v[l.imageName];if(!x)return null;const T=x.paddedRect,E=x.displaySize,I={width:E[0],height:E[1],left:1,top:-3,advance:n?E[1]:E[0]};let R;if(n)R=d.verticalLineContentWidth-E[1]*l.scale;else{const L=ag(l.verticalAlign);R=(d.horizontalLineContentHeight-E[1]*l.scale)*L}return{rect:T,metrics:I,baselineOffset:R,imageOffset:(n?E[0]:E[1])*l.scale-gi*o}}function j0(l,n,o,d){if(d===0)return;const v=l[o],x=(l[o].x+v.metrics.advance*v.scale)*d;for(let T=n;T<=o;T++)l[T].x-=x}function og(l,n,o){const{horizontalAlign:d,verticalAlign:v}=Pu(o),x=n[0]-l.displaySize[0]*d,T=n[1]-l.displaySize[1]*v;return{image:l,top:T,bottom:T+l.displaySize[1],left:x,right:x+l.displaySize[0]}}function sg(l){var n,o;let d=l.left,v=l.top,x=l.right-d,T=l.bottom-v;const E=(n=l.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",I=(o=l.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",R=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(I==="proportional"){if(E==="stretchOnly"&&x/T<R||E==="proportional"){const L=Math.ceil(T*R);d*=L/x,x=L}}else if(E==="proportional"&&I==="stretchOnly"&&R!==0&&x/T>R){const L=Math.ceil(x/R);v*=L/T,T=L}return{x1:d,y1:v,x2:d+x,y2:v+T}}function lg(l,n,o,d,v,x){const T=l.image;let E;if(T.content){const he=T.content,ye=T.pixelRatio||1;E=[he[0]/ye,he[1]/ye,T.displaySize[0]-he[2]/ye,T.displaySize[1]-he[3]/ye]}const I=n.left*x,R=n.right*x;let L,V,W,K;o==="width"||o==="both"?(K=v[0]+I-d[3],V=v[0]+R+d[1]):(K=v[0]+(I+R-T.displaySize[0])/2,V=K+T.displaySize[0]);const ee=n.top*x,le=n.bottom*x;return o==="height"||o==="both"?(L=v[1]+ee-d[0],W=v[1]+le+d[2]):(L=v[1]+(ee+le-T.displaySize[1])/2,W=L+T.displaySize[1]),{image:T,top:L,right:V,bottom:W,left:K,collisionPadding:E}}const Hl=128,Js=32640;function bp(l,n){const{expression:o}=n;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new nn(l+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:v}=o;let x=0;for(;x<d.length&&d[x]<=l;)x++;x=Math.max(0,x-1);let T=x;for(;T<d.length&&d[T]<l+1;)T++;T=Math.min(d.length-1,T);const E=d[x],I=d[T];return o.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:I,interpolationType:v}:{kind:"camera",minZoom:E,maxZoom:I,minSize:o.evaluate(new nn(E)),maxSize:o.evaluate(new nn(I)),interpolationType:v}}}function cg(l,n,o){let d="never";const v=l.get(n);return v?d=v:l.get(o)&&(d="always"),d}const O0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function $c(l,n,o,d,v,x,T,E,I,R,L,V,W){const K=E?Math.min(Js,Math.round(E[0])):0,ee=E?Math.min(Js,Math.round(E[1])):0;l.emplaceBack(n,o,Math.round(32*d),Math.round(32*v),x,T,(K<<1)+(I?1:0),ee,16*R,16*L,256*V,256*W)}function ug(l,n,o){l.emplaceBack(n.x,n.y,o),l.emplaceBack(n.x,n.y,o),l.emplaceBack(n.x,n.y,o),l.emplaceBack(n.x,n.y,o)}function hv(l){for(const n of l.sections)if(mu(n.text))return!0;return!1}class Or{constructor(n){this.layoutVertexArray=new At,this.indexArray=new Xr,this.programConfigurations=n,this.segments=new wr,this.dynamicLayoutVertexArray=new yt,this.opacityVertexArray=new Lt,this.hasVisibleVertices=!1,this.placedSymbolArray=new Q}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,o,d,v){this.isEmpty()||(d&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ky.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,Qy.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,O0,!0),this.opacityVertexBuffer.itemSize=1),(d||v)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}zt("SymbolBuffers",Or);class Qd{constructor(n,o,d){this.layoutVertexArray=new n,this.layoutAttributes=o,this.indexArray=new d,this.segments=new wr,this.collisionVertexArray=new Hr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,M0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}zt("CollisionBuffers",Qd);class Xl{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=Oi(globalThis)?Math.min(n.overscaling,128):n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(T=>T.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bp(this.zoom,o["text-size"]),this.iconSizeData=bp(this.zoom,o["icon-size"]);const d=this.layers[0].layout,v=d.get("symbol-sort-key"),x=d.get("symbol-z-order");this.canOverlap=cg(d,"text-overlap","text-allow-overlap")!=="never"||cg(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(T=>m.ao[T])),this.stateDependentLayerIds=this.layers.filter(T=>T.isStateDependent()).map(T=>T.id),this.sourceID=n.sourceID}createArrays(){this.text=new Or(new ba(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Or(new ba(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new fe,this.lineVertexArray=new ge,this.symbolInstances=new pe,this.textAnchorOffsets=new Te}calculateGlyphDependencies(n,o,d,v,x){for(let T=0;T<n.length;T++)if(o[n.charCodeAt(T)]=!0,(d||v)&&x){const E=Ks[n.charAt(T)];E&&(o[E.charCodeAt(0)]=!0)}}populate(n,o,d){const v=this.layers[0],x=v.layout,T=x.get("text-font"),E=x.get("text-field"),I=x.get("icon-image"),R=(E.value.kind!=="constant"||E.value.value instanceof Ki&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),L=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,V=x.get("symbol-sort-key");if(this.features=[],!R&&!L)return;const W=o.iconDependencies,K=o.glyphDependencies,ee=o.availableImages,le=new nn(this.zoom);for(const{feature:he,id:ye,index:Be,sourceLayerIndex:Ae}of n){const je=v._featureFilter.needGeometry,Ye=kc(he,je);if(!v._featureFilter.filter(le,Ye,d))continue;let it,gt;if(je||(Ye.geometry=Hs(he)),R){const Mt=v.getValueAndResolveTokens("text-field",Ye,d,ee),jt=Ki.factory(Mt),$t=this.hasRTLText=this.hasRTLText||hv(jt);(!$t||fs.getRTLTextPluginStatus()==="unavailable"||$t&&fs.isParsed())&&(it=rg(jt,v,Ye))}if(L){const Mt=v.getValueAndResolveTokens("icon-image",Ye,d,ee);gt=Mt instanceof ei?Mt:ei.fromString(Mt)}if(!it&&!gt)continue;const Et=this.sortFeaturesByKey?V.evaluate(Ye,{},d):void 0;if(this.features.push({id:ye,text:it,icon:gt,index:Be,sourceLayerIndex:Ae,geometry:Ye.geometry,properties:he.properties,type:jr.types[he.type],sortKey:Et}),gt&&(W[gt.name]=!0),it){const Mt=T.evaluate(Ye,{},d).join(","),jt=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(m.ao.vertical)>=0;for(const $t of it.sections)if($t.image)W[$t.image.name]=!0;else{const It=Mc(it.toString()),kt=$t.fontStack||Mt,dt=K[kt]=K[kt]||{};this.calculateGlyphDependencies($t.text,dt,jt,this.allowVerticalPlacement,It)}}}x.get("symbol-placement")==="line"&&(this.features=function(he){const ye={},Be={},Ae=[];let je=0;function Ye(Mt){Ae.push(he[Mt]),je++}function it(Mt,jt,$t){const It=Be[Mt];return delete Be[Mt],Be[jt]=It,Ae[It].geometry[0].pop(),Ae[It].geometry[0]=Ae[It].geometry[0].concat($t[0]),It}function gt(Mt,jt,$t){const It=ye[jt];return delete ye[jt],ye[Mt]=It,Ae[It].geometry[0].shift(),Ae[It].geometry[0]=$t[0].concat(Ae[It].geometry[0]),It}function Et(Mt,jt,$t){const It=$t?jt[0][jt[0].length-1]:jt[0][0];return`${Mt}:${It.x}:${It.y}`}for(let Mt=0;Mt<he.length;Mt++){const jt=he[Mt],$t=jt.geometry,It=jt.text?jt.text.toString():null;if(!It){Ye(Mt);continue}const kt=Et(It,$t),dt=Et(It,$t,!0);if(kt in Be&&dt in ye&&Be[kt]!==ye[dt]){const tr=gt(kt,dt,$t),ar=it(kt,dt,Ae[tr].geometry);delete ye[kt],delete Be[dt],Be[Et(It,Ae[ar].geometry,!0)]=ar,Ae[tr].geometry=null}else kt in Be?it(kt,dt,$t):dt in ye?gt(kt,dt,$t):(Ye(Mt),ye[kt]=je-1,Be[dt]=je-1)}return Ae.filter(Mt=>Mt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((he,ye)=>he.sortKey-ye.sortKey)}update(n,o,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,o,this.layers,{imagePositions:d}),this.icon.programConfigurations.updatePaintArrays(n,o,this.layers,{imagePositions:d}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,o){const d=this.lineVertexArray.length;if(n.segment!==void 0){let v=n.dist(o[n.segment+1]),x=n.dist(o[n.segment]);const T={};for(let E=n.segment+1;E<o.length;E++)T[E]={x:o[E].x,y:o[E].y,tileUnitDistanceFromAnchor:v},E<o.length-1&&(v+=o[E+1].dist(o[E]));for(let E=n.segment||0;E>=0;E--)T[E]={x:o[E].x,y:o[E].y,tileUnitDistanceFromAnchor:x},E>0&&(x+=o[E-1].dist(o[E]));for(let E=0;E<o.length;E++){const I=T[E];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(n,o,d,v,x,T,E,I,R,L,V,W){const K=n.indexArray,ee=n.layoutVertexArray,le=n.segments.prepareSegment(4*o.length,ee,K,this.canOverlap?T.sortKey:void 0),he=this.glyphOffsetArray.length,ye=le.vertexLength,Be=this.allowVerticalPlacement&&E===m.ao.vertical?Math.PI/2:0,Ae=T.text&&T.text.sections;for(let je=0;je<o.length;je++){const{tl:Ye,tr:it,bl:gt,br:Et,tex:Mt,pixelOffsetTL:jt,pixelOffsetBR:$t,minFontScaleX:It,minFontScaleY:kt,glyphOffset:dt,isSDF:tr,sectionIndex:ar}=o[je],Gt=le.vertexLength,Ut=dt[1];$c(ee,I.x,I.y,Ye.x,Ut+Ye.y,Mt.x,Mt.y,d,tr,jt.x,jt.y,It,kt),$c(ee,I.x,I.y,it.x,Ut+it.y,Mt.x+Mt.w,Mt.y,d,tr,$t.x,jt.y,It,kt),$c(ee,I.x,I.y,gt.x,Ut+gt.y,Mt.x,Mt.y+Mt.h,d,tr,jt.x,$t.y,It,kt),$c(ee,I.x,I.y,Et.x,Ut+Et.y,Mt.x+Mt.w,Mt.y+Mt.h,d,tr,$t.x,$t.y,It,kt),ug(n.dynamicLayoutVertexArray,I,Be),K.emplaceBack(Gt,Gt+2,Gt+1),K.emplaceBack(Gt+1,Gt+2,Gt+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(dt[0]),je!==o.length-1&&ar===o[je+1].sectionIndex||n.programConfigurations.populatePaintArrays(ee.length,T,T.index,{imagePositions:{},canonical:W,formattedSection:Ae&&Ae[ar]})}n.placedSymbolArray.emplaceBack(I.x,I.y,he,this.glyphOffsetArray.length-he,ye,R,L,I.segment,d?d[0]:0,d?d[1]:0,v[0],v[1],E,0,!1,0,V)}_addCollisionDebugVertex(n,o,d,v,x,T){return o.emplaceBack(0,0),n.emplaceBack(d.x,d.y,v,x,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(n,o,d,v,x,T,E){const I=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),R=I.vertexLength,L=x.layoutVertexArray,V=x.collisionVertexArray,W=E.anchorX,K=E.anchorY;this._addCollisionDebugVertex(L,V,T,W,K,new M(n,o)),this._addCollisionDebugVertex(L,V,T,W,K,new M(d,o)),this._addCollisionDebugVertex(L,V,T,W,K,new M(d,v)),this._addCollisionDebugVertex(L,V,T,W,K,new M(n,v)),I.vertexLength+=4;const ee=x.indexArray;ee.emplaceBack(R,R+1),ee.emplaceBack(R+1,R+2),ee.emplaceBack(R+2,R+3),ee.emplaceBack(R+3,R),I.primitiveLength+=4}addDebugCollisionBoxes(n,o,d,v){for(let x=n;x<o;x++){const T=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,v?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Qd(or,Zl.members,ln),this.iconCollisionBox=new Qd(or,Zl.members,ln);for(let n=0;n<this.symbolInstances.length;n++){const o=this.symbolInstances.get(n);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(n,o,d,v,x,T,E,I,R){const L={};for(let V=o;V<d;V++){const W=n.get(V);L.textBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},L.textFeatureIndex=W.featureIndex;break}for(let V=v;V<x;V++){const W=n.get(V);L.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},L.verticalTextFeatureIndex=W.featureIndex;break}for(let V=T;V<E;V++){const W=n.get(V);L.iconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},L.iconFeatureIndex=W.featureIndex;break}for(let V=I;V<R;V++){const W=n.get(V);L.verticalIconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},L.verticalIconFeatureIndex=W.featureIndex;break}return L}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const d=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,o){const d=n.placedSymbolArray.get(o),v=d.vertexStartIndex+4*d.numGlyphs;for(let x=d.vertexStartIndex;x<v;x+=4)n.indexArray.emplaceBack(x,x+2,x+1),n.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(n),d=Math.cos(n),v=[],x=[],T=[];for(let E=0;E<this.symbolInstances.length;++E){T.push(E);const I=this.symbolInstances.get(E);v.push(0|Math.round(o*I.anchorX+d*I.anchorY)),x.push(I.featureIndex)}return T.sort((E,I)=>v[E]-v[I]||x[I]-x[E]),T}addToSortKeyRanges(n,o){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===o?d.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const d=this.symbolInstances.get(o);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((v,x,T)=>{v>=0&&T.indexOf(v)===x&&this.addIndicesForPlacedSymbol(this.text,v)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let xp,hg;zt("SymbolBucket",Xl,{omit:["layers","collisionBoxArray","features","compareText"]}),Xl.MAX_GLYPHS=65535,Xl.addDynamicAttributes=ug;var Jd={get paint(){return hg=hg||new Mi({"icon-opacity":new Ht(Ue.paint_symbol["icon-opacity"]),"icon-color":new Ht(Ue.paint_symbol["icon-color"]),"icon-halo-color":new Ht(Ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ht(Ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ht(Ue.paint_symbol["icon-halo-blur"]),"icon-translate":new Nt(Ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new Nt(Ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ht(Ue.paint_symbol["text-opacity"]),"text-color":new Ht(Ue.paint_symbol["text-color"],{runtimeType:yi,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new Ht(Ue.paint_symbol["text-halo-color"]),"text-halo-width":new Ht(Ue.paint_symbol["text-halo-width"]),"text-halo-blur":new Ht(Ue.paint_symbol["text-halo-blur"]),"text-translate":new Nt(Ue.paint_symbol["text-translate"]),"text-translate-anchor":new Nt(Ue.paint_symbol["text-translate-anchor"])})},get layout(){return xp=xp||new Mi({"symbol-placement":new Nt(Ue.layout_symbol["symbol-placement"]),"symbol-spacing":new Nt(Ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Nt(Ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ht(Ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Nt(Ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Nt(Ue.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Nt(Ue.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Nt(Ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new Nt(Ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Nt(Ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ht(Ue.layout_symbol["icon-size"]),"icon-text-fit":new Nt(Ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Nt(Ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ht(Ue.layout_symbol["icon-image"]),"icon-rotate":new Ht(Ue.layout_symbol["icon-rotate"]),"icon-padding":new Ht(Ue.layout_symbol["icon-padding"]),"icon-keep-upright":new Nt(Ue.layout_symbol["icon-keep-upright"]),"icon-offset":new Ht(Ue.layout_symbol["icon-offset"]),"icon-anchor":new Ht(Ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Nt(Ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Nt(Ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Nt(Ue.layout_symbol["text-rotation-alignment"]),"text-field":new Ht(Ue.layout_symbol["text-field"]),"text-font":new Ht(Ue.layout_symbol["text-font"]),"text-size":new Ht(Ue.layout_symbol["text-size"]),"text-max-width":new Ht(Ue.layout_symbol["text-max-width"]),"text-line-height":new Nt(Ue.layout_symbol["text-line-height"]),"text-letter-spacing":new Ht(Ue.layout_symbol["text-letter-spacing"]),"text-justify":new Ht(Ue.layout_symbol["text-justify"]),"text-radial-offset":new Ht(Ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Nt(Ue.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ht(Ue.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ht(Ue.layout_symbol["text-anchor"]),"text-max-angle":new Nt(Ue.layout_symbol["text-max-angle"]),"text-writing-mode":new Nt(Ue.layout_symbol["text-writing-mode"]),"text-rotate":new Ht(Ue.layout_symbol["text-rotate"]),"text-padding":new Nt(Ue.layout_symbol["text-padding"]),"text-keep-upright":new Nt(Ue.layout_symbol["text-keep-upright"]),"text-transform":new Ht(Ue.layout_symbol["text-transform"]),"text-offset":new Ht(Ue.layout_symbol["text-offset"]),"text-allow-overlap":new Nt(Ue.layout_symbol["text-allow-overlap"]),"text-overlap":new Nt(Ue.layout_symbol["text-overlap"]),"text-ignore-placement":new Nt(Ue.layout_symbol["text-ignore-placement"]),"text-optional":new Nt(Ue.layout_symbol["text-optional"])})}};class Zh{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Wn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(n.formattedSection))return o.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}zt("FormatSectionOverride",Zh,{omit:["defaultValue"]});class Eu extends Xa{constructor(n,o){super(n,Jd,o)}recalculate(n,o){if(super.recalculate(n,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const v=[];for(const x of d)v.indexOf(x)<0&&v.push(x);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,o,d,v){const x=this.layout.get(n).evaluate(o,{},d,v),T=this._unevaluatedLayout._values[n];return T.isDataDriven()||ss(T.value)||!x?x:function(E,I){return I.replace(/{([^{}]+)}/g,(R,L)=>E&&L in E?String(E[L]):"")}(o.properties,x)}createBucket(n){return new Xl(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Jd.paint.overridableProperties){if(!Eu.hasPaintOverride(this.layout,n))continue;const o=this.paint.get(n),d=new Zh(o),v=new ks(d,o.property.specification);let x=null;x=o.value.kind==="constant"||o.value.kind==="source"?new Ol("source",v):new Qi("composite",v,o.value.zoomStops),this.paint._values[n]=new $i(o.property,x,o.parameters)}}_handleOverridablePaintPropertyUpdate(n,o,d){return!(!this.layout||o.isDataDriven()||d.isDataDriven())&&Eu.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,o){const d=n.get("text-field"),v=Jd.paint.properties[o];let x=!1;const T=E=>{for(const I of E)if(v.overrides&&v.overrides.hasOverride(I))return void(x=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Ki)T(d.value.value.sections);else if(d.value.kind==="source"||d.value.kind==="composite"){const E=R=>{x||(R instanceof lr&&yn(R.value)===Eo?T(R.value.sections):R instanceof hh?T(R.sections):R.eachChild(E))},I=d.value;I._styleExpression&&E(I._styleExpression.expression)}return x}}let Cu;var dv={get paint(){return Cu=Cu||new Mi({"background-color":new Nt(Ue.paint_background["background-color"]),"background-pattern":new Bn(Ue.paint_background["background-pattern"]),"background-opacity":new Nt(Ue.paint_background["background-opacity"])})}};class I0 extends Xa{constructor(n,o){super(n,dv,o)}}class k0 extends Xa{constructor(n,o){super(n,{},o),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class fv{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const pv={once:!0},Hh=63710088e-1;class Gr{constructor(n,o){if(isNaN(n)||isNaN(o))throw new Error(`Invalid LngLat object: (${n}, ${o})`);if(this.lng=+n,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Gr(mr(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const o=Math.PI/180,d=this.lat*o,v=n.lat*o,x=Math.sin(d)*Math.sin(v)+Math.cos(d)*Math.cos(v)*Math.cos((n.lng-this.lng)*o);return Hh*Math.acos(Math.min(x,1))}static convert(n){if(n instanceof Gr)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Gr(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Gr(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const wp=2*Math.PI*Hh;function Gi(l){return wp*Math.cos(l*Math.PI/180)}function mv(l){return(180+l)/360}function Sp(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function Tp(l,n){return l/Gi(n)}function Xh(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function dg(l,n){return l*Gi(Xh(n))}class Wh{constructor(n,o,d=0){this.x=+n,this.y=+o,this.z=+d}static fromLngLat(n,o=0){const d=Gr.convert(n);return new Wh(mv(d.lng),Sp(d.lat),Tp(o,d.lat))}toLngLat(){return new Gr(360*this.x-180,Xh(this.y))}toAltitude(){return dg(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/wp*(n=Xh(this.y),1/Math.cos(n*Math.PI/180));var n}}function Ap(l,n,o){var d=2*Math.PI*6378137/256/Math.pow(2,o);return[l*d-2*Math.PI*6378137/2,n*d-2*Math.PI*6378137/2]}class ef{constructor(n,o,d){if(!function(v,x,T){return!(v<0||v>25||T<0||T>=Math.pow(2,v)||x<0||x>=Math.pow(2,v))}(n,o,d))throw new Error(`x=${o}, y=${d}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=o,this.y=d,this.key=Yh(0,n,n,o,d)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,o,d){const v=(T=this.y,E=this.z,I=Ap(256*(x=this.x),256*(T=Math.pow(2,E)-T-1),E),R=Ap(256*(x+1),256*(T+1),E),I[0]+","+I[1]+","+R[0]+","+R[1]);var x,T,E,I,R;const L=function(V,W,K){let ee,le="";for(let he=V;he>0;he--)ee=1<<he-1,le+=(W&ee?1:0)+(K&ee?2:0);return le}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,v)}isChildOf(n){const o=this.z-n.z;return o>0&&n.x===this.x>>o&&n.y===this.y>>o}getTilePoint(n){const o=Math.pow(2,this.z);return new M((n.x*o-this.x)*ht,(n.y*o-this.y)*ht)}toString(){return`${this.z}/${this.x}/${this.y}`}}class gv{constructor(n,o){this.wrap=n,this.canonical=o,this.key=Yh(n,o.z,o.z,o.x,o.y)}}class ro{constructor(n,o,d,v,x){if(this.terrainRttPosMatrix32f=null,n<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${d}`);this.overscaledZ=n,this.wrap=o,this.canonical=new ef(d,+v,+x),this.key=Yh(o,n,d,v,x)}clone(){return new ro(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-n;return n>this.canonical.z?new ro(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ro(n,this.wrap,n,this.canonical.x>>o,this.canonical.y>>o)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(n,o){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-n;return n>this.canonical.z?Yh(this.wrap*+o,n,this.canonical.z,this.canonical.x,this.canonical.y):Yh(this.wrap*+o,n,n,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(n){if(n.wrap!==this.wrap||this.overscaledZ-n.overscaledZ<=0)return!1;if(n.overscaledZ===0)return this.overscaledZ>0;const o=this.canonical.z-n.canonical.z;return!(o<0)&&n.canonical.x===this.canonical.x>>o&&n.canonical.y===this.canonical.y>>o}children(n){if(this.overscaledZ>=n)return[new ro(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,d=2*this.canonical.x,v=2*this.canonical.y;return[new ro(o,this.wrap,o,d,v),new ro(o,this.wrap,o,d+1,v),new ro(o,this.wrap,o,d,v+1),new ro(o,this.wrap,o,d+1,v+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new ro(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new ro(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new gv(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Wh(n.x-this.wrap,n.y))}}function Yh(l,n,o,d,v){(l*=2)<0&&(l=-1*l-1);const x=1<<o;return(x*x*l+x*v+d).toString(36)+o.toString(36)+n.toString(36)}function Kh(l,n){return n?l.properties[n]:l.id}zt("CanonicalTileID",ef),zt("OverscaledTileID",ro,{omit:["terrainRttPosMatrix32f"]});class ju{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(n){return this.minX=Math.min(this.minX,n.x),this.minY=Math.min(this.minY,n.y),this.maxX=Math.max(this.maxX,n.x),this.maxY=Math.max(this.maxY,n.y),this}expandBy(n){return this.minX-=n,this.minY-=n,this.maxX+=n,this.maxY+=n,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(n){return this.expandBy(-n)}map(n){const o=new ju;return o.extend(n(new M(this.minX,this.minY))),o.extend(n(new M(this.maxX,this.minY))),o.extend(n(new M(this.minX,this.maxY))),o.extend(n(new M(this.maxX,this.maxY))),o}static fromPoints(n){const o=new ju;for(const d of n)o.extend(d);return o}contains(n){return n.x>=this.minX&&n.x<=this.maxX&&n.y>=this.minY&&n.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(n){return!this.empty()&&!n.empty()&&n.minX>=this.minX&&n.maxX<=this.maxX&&n.minY>=this.minY&&n.maxY<=this.maxY}intersects(n){return!this.empty()&&!n.empty()&&n.minX<=this.maxX&&n.maxX>=this.minX&&n.minY<=this.maxY&&n.maxY>=this.minY}}class yv{constructor(n){this._stringToNumber={},this._numberToString=[];for(let o=0;o<n.length;o++){const d=n[o];this._stringToNumber[d]=o,this._numberToString[o]=d}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Wl{constructor(n,o,d,v,x){this.type="Feature",this._vectorTileFeature=n,n._z=o,n._x=d,n._y=v,this.properties=n.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(n[o]=this[o]);return n}}class fg{constructor(n,o){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Ns(ht,16,0),this.grid3D=new Ns(ht,16,0),this.featureIndexArray=new Ce,this.promoteId=o}insert(n,o,d,v,x,T){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,v,x);const I=T?this.grid3D:this.grid;for(let R=0;R<o.length;R++){const L=o[R],V=[1/0,1/0,-1/0,-1/0];for(let W=0;W<L.length;W++){const K=L[W];V[0]=Math.min(V[0],K.x),V[1]=Math.min(V[1],K.y),V[2]=Math.max(V[2],K.x),V[3]=Math.max(V[3],K.y)}V[0]<ht&&V[1]<ht&&V[2]>=0&&V[3]>=0&&I.insert(E,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ap(new Yd(this.rawTileData)).layers,this.sourceLayerCoder=new yv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,o,d,v){this.loadVTLayers();const x=n.params,T=ht/n.tileSize/n.scale,E=Il(x.filter,x.globalState),I=n.queryGeometry,R=n.queryPadding*T,L=ju.fromPoints(I),V=this.grid.query(L.minX-R,L.minY-R,L.maxX+R,L.maxY+R),W=ju.fromPoints(n.cameraQueryGeometry).expandBy(R),K=this.grid3D.query(W.minX,W.minY,W.maxX,W.maxY,(he,ye,Be,Ae)=>function(je,Ye,it,gt,Et){for(const jt of je)if(Ye<=jt.x&&it<=jt.y&&gt>=jt.x&&Et>=jt.y)return!0;const Mt=[new M(Ye,it),new M(Ye,Et),new M(gt,Et),new M(gt,it)];if(je.length>2){for(const jt of Mt)if(Bl(je,jt))return!0}for(let jt=0;jt<je.length-1;jt++)if(Dm(je[jt],je[jt+1],Mt))return!0;return!1}(n.cameraQueryGeometry,he-R,ye-R,Be+R,Ae+R));for(const he of K)V.push(he);V.sort(z0);const ee={};let le;for(let he=0;he<V.length;he++){const ye=V[he];if(ye===le)continue;le=ye;const Be=this.featureIndexArray.get(ye);let Ae=null;this.loadMatchingFeature(ee,Be.bucketIndex,Be.sourceLayerIndex,Be.featureIndex,E,x.layers,x.availableImages,o,d,v,(je,Ye,it)=>(Ae||(Ae=Hs(je)),Ye.queryIntersectsFeature({queryGeometry:I,feature:je,featureState:it,geometry:Ae,zoom:this.z,transform:n.transform,pixelsToTileUnits:T,pixelPosMatrix:n.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:n.getElevation})))}return ee}loadMatchingFeature(n,o,d,v,x,T,E,I,R,L,V){const W=this.bucketLayerIDs[o];if(T&&!W.some(he=>T.has(he)))return;const K=this.sourceLayerCoder.decode(d),ee=this.vtLayers[K].feature(v);if(x.needGeometry){const he=kc(ee,!0);if(!x.filter(new nn(this.tileID.overscaledZ),he,this.tileID.canonical))return}else if(!x.filter(new nn(this.tileID.overscaledZ),ee))return;const le=this.getId(ee,K);for(let he=0;he<W.length;he++){const ye=W[he];if(T&&!T.has(ye))continue;const Be=I[ye];if(!Be)continue;let Ae={};le&&L&&(Ae=L.getState(Be.sourceLayer||"_geojsonTileLayer",le));const je=nr({},R[ye]);je.paint=Mp(je.paint,Be.paint,ee,Ae,E),je.layout=Mp(je.layout,Be.layout,ee,Ae,E);const Ye=!V||V(ee,Be,Ae);if(!Ye)continue;const it=new Wl(ee,this.z,this.x,this.y,le);it.layer=je;let gt=n[ye];gt===void 0&&(gt=n[ye]=[]),gt.push({featureIndex:v,feature:it,intersectionZ:Ye})}}lookupSymbolFeatures(n,o,d,v,x,T,E,I){const R={};this.loadVTLayers();const L=Il(x.filterSpec,x.globalState);for(const V of n)this.loadMatchingFeature(R,d,v,V,L,T,E,I,o);return R}hasLayer(n){for(const o of this.bucketLayerIDs)for(const d of o)if(n===d)return!0;return!1}getId(n,o){var d;let v=n.id;return this.promoteId&&(v=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof v=="boolean"&&(v=Number(v)),v===void 0&&(!((d=n.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(v=Number(n.properties.cluster_id))),v}}function Mp(l,n,o,d,v){return er(l,(x,T)=>{const E=n instanceof Nl?n.get(T):null;return E&&E.evaluate?E.evaluate(o,d,v):E})}function z0(l,n){return n-l}function vv(l,n,o,d,v){const x=[];for(let T=0;T<l.length;T++){const E=l[T];let I;for(let R=0;R<E.length-1;R++){let L=E[R],V=E[R+1];L.x<n&&V.x<n||(L.x<n?L=new M(n,L.y+(n-L.x)/(V.x-L.x)*(V.y-L.y))._round():V.x<n&&(V=new M(n,L.y+(n-L.x)/(V.x-L.x)*(V.y-L.y))._round()),L.y<o&&V.y<o||(L.y<o?L=new M(L.x+(o-L.y)/(V.y-L.y)*(V.x-L.x),o)._round():V.y<o&&(V=new M(L.x+(o-L.y)/(V.y-L.y)*(V.x-L.x),o)._round()),L.x>=d&&V.x>=d||(L.x>=d?L=new M(d,L.y+(d-L.x)/(V.x-L.x)*(V.y-L.y))._round():V.x>=d&&(V=new M(d,L.y+(d-L.x)/(V.x-L.x)*(V.y-L.y))._round()),L.y>=v&&V.y>=v||(L.y>=v?L=new M(L.x+(v-L.y)/(V.y-L.y)*(V.x-L.x),v)._round():V.y>=v&&(V=new M(L.x+(v-L.y)/(V.y-L.y)*(V.x-L.x),v)._round()),I&&L.equals(I[I.length-1])||(I=[L],x.push(I)),I.push(V)))))}}return x}zt("FeatureIndex",fg,{omit:["rawTileData","sourceLayerCoder"]});class el extends M{constructor(n,o,d,v){super(n,o),this.angle=d,v!==void 0&&(this.segment=v)}clone(){return new el(this.x,this.y,this.angle,this.segment)}}function _v(l,n,o,d,v){if(n.segment===void 0||o===0)return!0;let x=n,T=n.segment+1,E=0;for(;E>-o/2;){if(T--,T<0)return!1;E-=l[T].dist(x),x=l[T]}E+=l[T].dist(l[T+1]),T++;const I=[];let R=0;for(;E<o/2;){const L=l[T],V=l[T+1];if(!V)return!1;let W=l[T-1].angleTo(L)-L.angleTo(V);for(W=Math.abs((W+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:E,angleDelta:W}),R+=W;E-I[0].distance>d;)R-=I.shift().angleDelta;if(R>v)return!1;T++,E+=L.dist(V)}return!0}function Jo(l){let n=0;for(let o=0;o<l.length-1;o++)n+=l[o].dist(l[o+1]);return n}function Pp(l,n,o){return l?.6*n*o:0}function pg(l,n){return Math.max(l?l.right-l.left:0,n?n.right-n.left:0)}function bv(l,n,o,d,v,x){const T=Pp(o,v,x),E=pg(o,d)*x;let I=0;const R=Jo(l)/2;for(let L=0;L<l.length-1;L++){const V=l[L],W=l[L+1],K=V.dist(W);if(I+K>R){const ee=(R-I)/K,le=ha.number(V.x,W.x,ee),he=ha.number(V.y,W.y,ee),ye=new el(le,he,W.angleTo(V),L);return ye._round(),!T||_v(l,ye,E,T,n)?ye:void 0}I+=K}}function tf(l,n,o,d,v,x,T,E,I){const R=Pp(d,x,T),L=pg(d,v),V=L*T,W=l[0].x===0||l[0].x===I||l[0].y===0||l[0].y===I;return n-V<n/4&&(n=V+n/4),So(l,W?n/2*E%n:(L/2+2*x)*T*E%n,n,R,o,V,W,!1,I)}function So(l,n,o,d,v,x,T,E,I){const R=x/2,L=Jo(l);let V=0,W=n-o,K=[];for(let ee=0;ee<l.length-1;ee++){const le=l[ee],he=l[ee+1],ye=le.dist(he),Be=he.angleTo(le);for(;W+o<V+ye;){W+=o;const Ae=(W-V)/ye,je=ha.number(le.x,he.x,Ae),Ye=ha.number(le.y,he.y,Ae);if(je>=0&&je<I&&Ye>=0&&Ye<I&&W-R>=0&&W+R<=L){const it=new el(je,Ye,Be,ee);it._round(),d&&!_v(l,it,x,d,v)||K.push(it)}}V+=ye}return E||K.length||T||(K=So(l,V/2,o,d,v,x,T,!0,I)),K}function mg(l,n,o,d){const v=[],x=l.image,T=x.pixelRatio,E=x.paddedRect.w-2,I=x.paddedRect.h-2;let R={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom};const L=x.stretchX||[[0,E]],V=x.stretchY||[[0,I]],W=(dt,tr)=>dt+tr[1]-tr[0],K=L.reduce(W,0),ee=V.reduce(W,0),le=E-K,he=I-ee;let ye=0,Be=K,Ae=0,je=ee,Ye=0,it=le,gt=0,Et=he;if(x.content&&d){const dt=x.content,tr=dt[2]-dt[0],ar=dt[3]-dt[1];(x.textFitWidth||x.textFitHeight)&&(R=sg(l)),ye=Ou(L,0,dt[0]),Ae=Ou(V,0,dt[1]),Be=Ou(L,dt[0],dt[2]),je=Ou(V,dt[1],dt[3]),Ye=dt[0]-ye,gt=dt[1]-Ae,it=tr-Be,Et=ar-je}const Mt=R.x1,jt=R.y1,$t=R.x2-Mt,It=R.y2-jt,kt=(dt,tr,ar,Gt)=>{const Ut=Ep(dt.stretch-ye,Be,$t,Mt),Er=Cp(dt.fixed-Ye,it,dt.stretch,K),bn=Ep(tr.stretch-Ae,je,It,jt),Zn=Cp(tr.fixed-gt,Et,tr.stretch,ee),Ci=Ep(ar.stretch-ye,Be,$t,Mt),na=Cp(ar.fixed-Ye,it,ar.stretch,K),ia=Ep(Gt.stretch-Ae,je,It,jt),ai=Cp(Gt.fixed-gt,Et,Gt.stretch,ee),Tn=new M(Ut,bn),Si=new M(Ci,bn),oi=new M(Ci,ia),s=new M(Ut,ia),h=new M(Er/T,Zn/T),g=new M(na/T,ai/T),S=n*Math.PI/180;if(S){const Y=Math.sin(S),ce=Math.cos(S),Me=[ce,-Y,Y,ce];Tn._matMult(Me),Si._matMult(Me),s._matMult(Me),oi._matMult(Me)}const j=dt.stretch+dt.fixed,N=tr.stretch+tr.fixed;return{tl:Tn,tr:Si,bl:s,br:oi,tex:{x:x.paddedRect.x+1+j,y:x.paddedRect.y+1+N,w:ar.stretch+ar.fixed-j,h:Gt.stretch+Gt.fixed-N},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:it/T/$t,minFontScaleY:Et/T/It,isSDF:o}};if(d&&(x.stretchX||x.stretchY)){const dt=tl(L,le,K),tr=tl(V,he,ee);for(let ar=0;ar<dt.length-1;ar++){const Gt=dt[ar],Ut=dt[ar+1];for(let Er=0;Er<tr.length-1;Er++)v.push(kt(Gt,tr[Er],Ut,tr[Er+1]))}}else v.push(kt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:I+1}));return v}function Ou(l,n,o){let d=0;for(const v of l)d+=Math.max(n,Math.min(o,v[1]))-Math.max(n,Math.min(o,v[0]));return d}function tl(l,n,o){const d=[{fixed:-1,stretch:0}];for(const[v,x]of l){const T=d[d.length-1];d.push({fixed:v-T.stretch,stretch:T.stretch}),d.push({fixed:v-T.stretch,stretch:T.stretch+(x-v)})}return d.push({fixed:n+1,stretch:o}),d}function Ep(l,n,o,d){return l/n*o+d}function Cp(l,n,o,d){return l-n*o/d}zt("Anchor",el);class Yl{constructor(n,o,d,v,x,T,E,I,R,L){var V;if(this.boxStartIndex=n.length,R){let W=T.top,K=T.bottom;const ee=T.collisionPadding;ee&&(W-=ee[1],K+=ee[3]);let le=K-W;le>0&&(le=Math.max(10,le),this.circleDiameter=le)}else{const W=!((V=T.image)===null||V===void 0)&&V.content&&(T.image.textFitWidth||T.image.textFitHeight)?sg(T):{x1:T.left,y1:T.top,x2:T.right,y2:T.bottom};W.y1=W.y1*E-I[0],W.y2=W.y2*E+I[2],W.x1=W.x1*E-I[3],W.x2=W.x2*E+I[1];const K=T.collisionPadding;if(K&&(W.x1-=K[0]*E,W.y1-=K[1]*E,W.x2+=K[2]*E,W.y2+=K[3]*E),L){const ee=new M(W.x1,W.y1),le=new M(W.x2,W.y1),he=new M(W.x1,W.y2),ye=new M(W.x2,W.y2),Be=L*Math.PI/180;ee._rotate(Be),le._rotate(Be),he._rotate(Be),ye._rotate(Be),W.x1=Math.min(ee.x,le.x,he.x,ye.x),W.x2=Math.max(ee.x,le.x,he.x,ye.x),W.y1=Math.min(ee.y,le.y,he.y,ye.y),W.y2=Math.max(ee.y,le.y,he.y,ye.y)}n.emplaceBack(o.x,o.y,W.x1,W.y1,W.x2,W.y2,d,v,x)}this.boxEndIndex=n.length}}class xv{constructor(n=[],o=(d,v)=>d<v?-1:d>v?1:0){if(this.data=n,this.length=this.data.length,this.compare=o,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:o,compare:d}=this,v=o[n];for(;n>0;){const x=n-1>>1,T=o[x];if(d(v,T)>=0)break;o[n]=T,n=x}o[n]=v}_down(n){const{data:o,compare:d}=this,v=this.length>>1,x=o[n];for(;n<v;){let T=1+(n<<1);const E=T+1;if(E<this.length&&d(o[E],o[T])<0&&(T=E),d(o[T],x)>=0)break;o[n]=o[T],n=T}o[n]=x}}function D0(l,n=1,o=!1){const d=ju.fromPoints(l[0]),v=Math.min(d.width(),d.height());let x=v/2;const T=new xv([],R0),{minX:E,minY:I,maxX:R,maxY:L}=d;if(v===0)return new M(E,I);for(let K=E;K<R;K+=v)for(let ee=I;ee<L;ee+=v)T.push(new Qh(K+x,ee+x,x,l));let V=function(K){let ee=0,le=0,he=0;const ye=K[0];for(let Be=0,Ae=ye.length,je=Ae-1;Be<Ae;je=Be++){const Ye=ye[Be],it=ye[je],gt=Ye.x*it.y-it.x*Ye.y;le+=(Ye.x+it.x)*gt,he+=(Ye.y+it.y)*gt,ee+=3*gt}return new Qh(le/ee,he/ee,0,K)}(l),W=T.length;for(;T.length;){const K=T.pop();(K.d>V.d||!V.d)&&(V=K,o&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,W)),K.max-V.d<=n||(x=K.h/2,T.push(new Qh(K.p.x-x,K.p.y-x,x,l)),T.push(new Qh(K.p.x+x,K.p.y-x,x,l)),T.push(new Qh(K.p.x-x,K.p.y+x,x,l)),T.push(new Qh(K.p.x+x,K.p.y+x,x,l)),W+=4)}return o&&(console.log(`num probes: ${W}`),console.log(`best distance: ${V.d}`)),V.p}function R0(l,n){return n.max-l.max}function Qh(l,n,o,d){this.p=new M(l,n),this.h=o,this.d=function(v,x){let T=!1,E=1/0;for(let I=0;I<x.length;I++){const R=x[I];for(let L=0,V=R.length,W=V-1;L<V;W=L++){const K=R[L],ee=R[W];K.y>v.y!=ee.y>v.y&&v.x<(ee.x-K.x)*(v.y-K.y)/(ee.y-K.y)+K.x&&(T=!T),E=Math.min(E,km(v,K,ee))}}return(T?1:-1)*Math.sqrt(E)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var Zi;m.aE=void 0,(Zi=m.aE||(m.aE={}))[Zi.center=1]="center",Zi[Zi.left=2]="left",Zi[Zi.right=3]="right",Zi[Zi.top=4]="top",Zi[Zi.bottom=5]="bottom",Zi[Zi["top-left"]=6]="top-left",Zi[Zi["top-right"]=7]="top-right",Zi[Zi["bottom-left"]=8]="bottom-left",Zi[Zi["bottom-right"]=9]="bottom-right";const gg=Number.POSITIVE_INFINITY;function wv(l,n){return n[1]!==gg?function(o,d,v){let x=0,T=0;switch(d=Math.abs(d),v=Math.abs(v),o){case"top-right":case"top-left":case"top":T=v-7;break;case"bottom-right":case"bottom-left":case"bottom":T=7-v}switch(o){case"top-right":case"bottom-right":case"right":x=-d;break;case"top-left":case"bottom-left":case"left":x=d}return[x,T]}(l,n[0],n[1]):function(o,d){let v=0,x=0;d<0&&(d=0);const T=d/Math.SQRT2;switch(o){case"top-right":case"top-left":x=T-7;break;case"bottom-right":case"bottom-left":x=7-T;break;case"bottom":x=7-d;break;case"top":x=d-7}switch(o){case"top-right":case"bottom-right":v=-T;break;case"top-left":case"bottom-left":v=T;break;case"left":v=d;break;case"right":v=-d}return[v,x]}(l,n[0])}function Sv(l,n,o){var d;const v=l.layout,x=(d=v.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(n,{},o);if(x){const E=x.values,I=[];for(let R=0;R<E.length;R+=2){const L=I[R]=E[R],V=E[R+1].map(W=>W*gi);L.startsWith("top")?V[1]-=7:L.startsWith("bottom")&&(V[1]+=7),I[R+1]=V}return new di(I)}const T=v.get("text-variable-anchor");if(T){let E;E=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(n,{},o)*gi,gg]:v.get("text-offset").evaluate(n,{},o).map(R=>R*gi);const I=[];for(const R of T)I.push(R,wv(R,E));return new di(I)}return null}function jp(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Jh(l,n,o,d,v,x,T,E,I,R,L,V){let W=x.textMaxSize.evaluate(n,{});W===void 0&&(W=T);const K=l.layers[0].layout,ee=K.get("icon-offset").evaluate(n,{},L),le=yg(o.horizontal),he=T/24,ye=l.tilePixelRatio*he,Be=l.tilePixelRatio*W/24,Ae=l.tilePixelRatio*E,je=l.tilePixelRatio*K.get("symbol-spacing"),Ye=K.get("text-padding")*l.tilePixelRatio,it=function(ar,Gt,Ut,Er=1){const bn=ar.get("icon-padding").evaluate(Gt,{},Ut),Zn=bn&&bn.values;return[Zn[0]*Er,Zn[1]*Er,Zn[2]*Er,Zn[3]*Er]}(K,n,L,l.tilePixelRatio),gt=K.get("text-max-angle")/180*Math.PI,Et=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point",Mt=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",jt=K.get("symbol-placement"),$t=je/2,It=K.get("icon-text-fit");let kt;d&&It!=="none"&&(l.allowVerticalPlacement&&o.vertical&&(kt=lg(d,o.vertical,It,K.get("icon-text-fit-padding"),ee,he)),le&&(d=lg(d,le,It,K.get("icon-text-fit-padding"),ee,he)));const dt=L?V.line.getGranularityForZoomLevel(L.z):1,tr=(ar,Gt)=>{Gt.x<0||Gt.x>=ht||Gt.y<0||Gt.y>=ht||function(Ut,Er,bn,Zn,Ci,na,ia,ai,Tn,Si,oi,s,h,g,S,j,N,Y,ce,Me,qe,ft,xt,et,lt){const sr=Ut.addToLineVertexArray(Er,bn);let rr,Qr,Ze,Ne,Je=0,bt=0,Xt=0,Ir=0,Jt=-1,ur=-1;const On={};let Jr=gs("");if(Ut.allowVerticalPlacement&&Zn.vertical){const Da=ai.layout.get("text-rotate").evaluate(qe,{},et)+90;Ze=new Yl(Tn,Er,Si,oi,s,Zn.vertical,h,g,S,Da),ia&&(Ne=new Yl(Tn,Er,Si,oi,s,ia,N,Y,S,Da))}if(Ci){const Da=ai.layout.get("icon-rotate").evaluate(qe,{}),vs=ai.layout.get("icon-text-fit")!=="none",lf=mg(Ci,Da,xt,vs),Jl=ia?mg(ia,Da,xt,vs):void 0;Qr=new Yl(Tn,Er,Si,oi,s,Ci,N,Y,!1,Da),Je=4*lf.length;const cf=Ut.iconSizeData;let qc=null;cf.kind==="source"?(qc=[Hl*ai.layout.get("icon-size").evaluate(qe,{})],qc[0]>Js&&Qt(`${Ut.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):cf.kind==="composite"&&(qc=[Hl*ft.compositeIconSizes[0].evaluate(qe,{},et),Hl*ft.compositeIconSizes[1].evaluate(qe,{},et)],(qc[0]>Js||qc[1]>Js)&&Qt(`${Ut.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ut.addSymbols(Ut.icon,lf,qc,Me,ce,qe,m.ao.none,Er,sr.lineStartIndex,sr.lineLength,-1,et),Jt=Ut.icon.placedSymbolArray.length-1,Jl&&(bt=4*Jl.length,Ut.addSymbols(Ut.icon,Jl,qc,Me,ce,qe,m.ao.vertical,Er,sr.lineStartIndex,sr.lineLength,-1,et),ur=Ut.icon.placedSymbolArray.length-1)}const Kl=Object.keys(Zn.horizontal);for(const Da of Kl){const vs=Zn.horizontal[Da];if(!rr){Jr=gs(vs.text);const Jl=ai.layout.get("text-rotate").evaluate(qe,{},et);rr=new Yl(Tn,Er,Si,oi,s,vs,h,g,S,Jl)}const lf=vs.positionedLines.length===1;if(Xt+=ed(Ut,Er,vs,na,ai,S,qe,j,sr,Zn.vertical?m.ao.horizontal:m.ao.horizontalOnly,lf?Kl:[Da],On,Jt,ft,et),lf)break}Zn.vertical&&(Ir+=ed(Ut,Er,Zn.vertical,na,ai,S,qe,j,sr,m.ao.vertical,["vertical"],On,ur,ft,et));const B0=rr?rr.boxStartIndex:Ut.collisionBoxArray.length,_D=rr?rr.boxEndIndex:Ut.collisionBoxArray.length,bD=Ze?Ze.boxStartIndex:Ut.collisionBoxArray.length,xD=Ze?Ze.boxEndIndex:Ut.collisionBoxArray.length,wD=Qr?Qr.boxStartIndex:Ut.collisionBoxArray.length,SD=Qr?Qr.boxEndIndex:Ut.collisionBoxArray.length,TD=Ne?Ne.boxStartIndex:Ut.collisionBoxArray.length,AD=Ne?Ne.boxEndIndex:Ut.collisionBoxArray.length;let Ql=-1;const Tv=(Da,vs)=>Da&&Da.circleDiameter?Math.max(Da.circleDiameter,vs):vs;Ql=Tv(rr,Ql),Ql=Tv(Ze,Ql),Ql=Tv(Qr,Ql),Ql=Tv(Ne,Ql);const CT=Ql>-1?1:0;CT&&(Ql*=lt/gi),Ut.glyphOffsetArray.length>=Xl.MAX_GLYPHS&&Qt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),qe.sortKey!==void 0&&Ut.addToSortKeyRanges(Ut.symbolInstances.length,qe.sortKey);const MD=Sv(ai,qe,et),[PD,ED]=function(Da,vs){const lf=Da.length,Jl=vs==null?void 0:vs.values;if((Jl==null?void 0:Jl.length)>0)for(let cf=0;cf<Jl.length;cf+=2){const qc=Jl[cf+1];Da.emplaceBack(m.aE[Jl[cf]],qc[0],qc[1])}return[lf,Da.length]}(Ut.textAnchorOffsets,MD);Ut.symbolInstances.emplaceBack(Er.x,Er.y,On.right>=0?On.right:-1,On.center>=0?On.center:-1,On.left>=0?On.left:-1,On.vertical||-1,Jt,ur,Jr,B0,_D,bD,xD,wD,SD,TD,AD,Si,Xt,Ir,Je,bt,CT,0,h,Ql,PD,ED)}(l,Gt,ar,o,d,v,kt,l.layers[0],l.collisionBoxArray,n.index,n.sourceLayerIndex,l.index,ye,[Ye,Ye,Ye,Ye],Et,I,Ae,it,Mt,ee,n,x,R,L,T)};if(jt==="line")for(const ar of vv(n.geometry,0,0,ht,ht)){const Gt=Wo(ar,dt),Ut=tf(Gt,je,gt,o.vertical||le,d,24,Be,l.overscaling,ht);for(const Er of Ut)le&&N0(l,le.text,$t,Er)||tr(Gt,Er)}else if(jt==="line-center"){for(const ar of n.geometry)if(ar.length>1){const Gt=Wo(ar,dt),Ut=bv(Gt,gt,o.vertical||le,d,24,Be);Ut&&tr(Gt,Ut)}}else if(n.type==="Polygon")for(const ar of mh(n.geometry,0)){const Gt=D0(ar,16);tr(Wo(ar[0],dt,!0),new el(Gt.x,Gt.y,0))}else if(n.type==="LineString")for(const ar of n.geometry){const Gt=Wo(ar,dt);tr(Gt,new el(Gt[0].x,Gt[0].y,0))}else if(n.type==="Point")for(const ar of n.geometry)for(const Gt of ar)tr([Gt],new el(Gt.x,Gt.y,0))}function ed(l,n,o,d,v,x,T,E,I,R,L,V,W,K,ee){const le=function(Be,Ae,je,Ye,it,gt,Et,Mt){const jt=Ye.layout.get("text-rotate").evaluate(gt,{})*Math.PI/180,$t=[];for(const It of Ae.positionedLines)for(const kt of It.positionedGlyphs){if(!kt.rect)continue;const dt=kt.rect||{};let tr=4,ar=!0,Gt=1,Ut=0;const Er=(it||Mt)&&kt.vertical,bn=kt.metrics.advance*kt.scale/2;if(Mt&&Ae.verticalizable&&(Ut=It.lineOffset/2-(kt.imageName?-(gi-kt.metrics.width*kt.scale)/2:(kt.scale-1)*gi)),kt.imageName){const Y=Et[kt.imageName];ar=Y.sdf,Gt=Y.pixelRatio,tr=1/Gt}const Zn=it?[kt.x+bn,kt.y]:[0,0];let Ci=it?[0,0]:[kt.x+bn+je[0],kt.y+je[1]-Ut],na=[0,0];Er&&(na=Ci,Ci=[0,0]);const ia=kt.metrics.isDoubleResolution?2:1,ai=(kt.metrics.left-tr)*kt.scale-bn+Ci[0],Tn=(-kt.metrics.top-tr)*kt.scale+Ci[1],Si=ai+dt.w/ia*kt.scale/Gt,oi=Tn+dt.h/ia*kt.scale/Gt,s=new M(ai,Tn),h=new M(Si,Tn),g=new M(ai,oi),S=new M(Si,oi);if(Er){const Y=new M(-bn,bn- -17),ce=-Math.PI/2,Me=12-bn,qe=new M(22-Me,-(kt.imageName?Me:0)),ft=new M(...na);s._rotateAround(ce,Y)._add(qe)._add(ft),h._rotateAround(ce,Y)._add(qe)._add(ft),g._rotateAround(ce,Y)._add(qe)._add(ft),S._rotateAround(ce,Y)._add(qe)._add(ft)}if(jt){const Y=Math.sin(jt),ce=Math.cos(jt),Me=[ce,-Y,Y,ce];s._matMult(Me),h._matMult(Me),g._matMult(Me),S._matMult(Me)}const j=new M(0,0),N=new M(0,0);$t.push({tl:s,tr:h,bl:g,br:S,tex:dt,writingMode:Ae.writingMode,glyphOffset:Zn,sectionIndex:kt.sectionIndex,isSDF:ar,pixelOffsetTL:j,pixelOffsetBR:N,minFontScaleX:0,minFontScaleY:0})}return $t}(0,o,E,v,x,T,d,l.allowVerticalPlacement),he=l.textSizeData;let ye=null;he.kind==="source"?(ye=[Hl*v.layout.get("text-size").evaluate(T,{})],ye[0]>Js&&Qt(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):he.kind==="composite"&&(ye=[Hl*K.compositeTextSizes[0].evaluate(T,{},ee),Hl*K.compositeTextSizes[1].evaluate(T,{},ee)],(ye[0]>Js||ye[1]>Js)&&Qt(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,le,ye,E,x,T,R,n,I.lineStartIndex,I.lineLength,W,ee);for(const Be of L)V[Be]=l.text.placedSymbolArray.length-1;return 4*le.length}function yg(l){for(const n in l)return l[n];return null}function N0(l,n,o,d){const v=l.compareText;if(n in v){const x=v[n];for(let T=x.length-1;T>=0;T--)if(d.dist(x[T])<o)return!0}else v[n]=[];return v[n].push(d),!1}const Iu=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ku{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,d]=new Uint8Array(n,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=d>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const x=Iu[15&d];if(!x)throw new Error("Unrecognized array type.");const[T]=new Uint16Array(n,2,1),[E]=new Uint32Array(n,4,1);return new ku(E,T,x,n)}constructor(n,o=64,d=Float64Array,v){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=d,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const x=Iu.indexOf(this.ArrayType),T=2*n*this.ArrayType.BYTES_PER_ELEMENT,E=n*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-E%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${d}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+E+I,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+T+E+I),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+E+I,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=n)}add(n,o){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=n,this.coords[this._pos++]=o,d}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Op(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,o,d,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:T,nodeSize:E}=this,I=[0,x.length-1,0],R=[];for(;I.length;){const L=I.pop()||0,V=I.pop()||0,W=I.pop()||0;if(V-W<=E){for(let he=W;he<=V;he++){const ye=T[2*he],Be=T[2*he+1];ye>=n&&ye<=d&&Be>=o&&Be<=v&&R.push(x[he])}continue}const K=W+V>>1,ee=T[2*K],le=T[2*K+1];ee>=n&&ee<=d&&le>=o&&le<=v&&R.push(x[K]),(L===0?n<=ee:o<=le)&&(I.push(W),I.push(K-1),I.push(1-L)),(L===0?d>=ee:v>=le)&&(I.push(K+1),I.push(V),I.push(1-L))}return R}within(n,o,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:T}=this,E=[0,v.length-1,0],I=[],R=d*d;for(;E.length;){const L=E.pop()||0,V=E.pop()||0,W=E.pop()||0;if(V-W<=T){for(let he=W;he<=V;he++)af(x[2*he],x[2*he+1],n,o)<=R&&I.push(v[he]);continue}const K=W+V>>1,ee=x[2*K],le=x[2*K+1];af(ee,le,n,o)<=R&&I.push(v[K]),(L===0?n-d<=ee:o-d<=le)&&(E.push(W),E.push(K-1),E.push(1-L)),(L===0?n+d>=ee:o+d>=le)&&(E.push(K+1),E.push(V),E.push(1-L))}return I}}function Op(l,n,o,d,v,x){if(v-d<=o)return;const T=d+v>>1;rf(l,n,T,d,v,x),Op(l,n,o,d,T-1,1-x),Op(l,n,o,T+1,v,1-x)}function rf(l,n,o,d,v,x){for(;v>d;){if(v-d>600){const R=v-d+1,L=o-d+1,V=Math.log(R),W=.5*Math.exp(2*V/3),K=.5*Math.sqrt(V*W*(R-W)/R)*(L-R/2<0?-1:1);rf(l,n,o,Math.max(d,Math.floor(o-L*W/R+K)),Math.min(v,Math.floor(o+(R-L)*W/R+K)),x)}const T=n[2*o+x];let E=d,I=v;for(zu(l,n,d,o),n[2*v+x]>T&&zu(l,n,d,v);E<I;){for(zu(l,n,E,I),E++,I--;n[2*E+x]<T;)E++;for(;n[2*I+x]>T;)I--}n[2*d+x]===T?zu(l,n,d,I):(I++,zu(l,n,I,v)),I<=o&&(d=I+1),o<=I&&(v=I-1)}}function zu(l,n,o,d){nf(l,o,d),nf(n,2*o,2*d),nf(n,2*o+1,2*d+1)}function nf(l,n,o){const d=l[n];l[n]=l[o],l[o]=d}function af(l,n,o,d){const v=l-o,x=n-d;return v*v+x*x}var Ip;m.cx=void 0,(Ip=m.cx||(m.cx={})).create="create",Ip.load="load",Ip.fullLoad="fullLoad";let of=null,sf=[];const kp=1e3/60,Du="loadTime",vg="fullLoadTime",L0={mark(l){performance.mark(l)},frame(l){const n=l;of!=null&&sf.push(n-of),of=n},clearMetrics(){of=null,sf=[],performance.clearMeasures(Du),performance.clearMeasures(vg);for(const l in m.cx)performance.clearMarks(m.cx[l])},getPerformanceMetrics(){performance.measure(Du,m.cx.create,m.cx.load),performance.measure(vg,m.cx.create,m.cx.fullLoad);const l=performance.getEntriesByName(Du)[0].duration,n=performance.getEntriesByName(vg)[0].duration,o=sf.length,d=1/(sf.reduce((x,T)=>x+T,0)/o/1e3),v=sf.filter(x=>x>kp).reduce((x,T)=>x+(T-kp)/kp,0);return{loadTime:l,fullLoadTime:n,fps:d,percentDroppedFrames:v/(o+v)*100,totalFrames:o}}};m.$=ht,m.A=ne,m.B=function([l,n,o]){return n+=90,n*=Math.PI/180,o*=Math.PI/180,{x:l*Math.cos(n)*Math.sin(o),y:l*Math.sin(n)*Math.sin(o),z:l*Math.cos(o)}},m.C=ha,m.D=Nt,m.E=Zt,m.F=nn,m.G=Tc,m.H=Oi,m.I=fp,m.J=class{constructor(l,n){this.target=l,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new fv(()=>this.process()),this.subscription=Mo(this.target,"message",o=>this.receive(o),!1),this.globalScope=tn(self)?l:window}registerMessageHandler(l,n){this.messageHandlers[l]=n}sendAsync(l,n){return new Promise((o,d)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10),x=n?Mo(n.signal,"abort",()=>{x==null||x.unsubscribe(),delete this.resolveRejects[v];const I={id:v,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)},pv):null;this.resolveRejects[v]={resolve:I=>{x==null||x.unsubscribe(),o(I)},reject:I=>{x==null||x.unsubscribe(),d(I)}};const T=[],E=Object.assign(Object.assign({},l),{id:v,sourceMapId:this.mapId,origin:location.origin,data:Ac(l.data,T)});this.target.postMessage(E,{transfer:T})})}receive(l){const n=l.data,o=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[o];const d=this.abortControllers[o];return delete this.abortControllers[o],void(d&&d.abort())}if(tn(self)||n.mustQueue)return this.tasks[o]=n,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,n)}}process(){if(this.taskQueue.length===0)return;const l=this.taskQueue.shift(),n=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(l,n)}processTask(l,n){return c(this,void 0,void 0,function*(){if(n.type==="<response>"){const v=this.resolveRejects[l];return delete this.resolveRejects[l],v?void(n.error?v.reject(Ls(n.error)):v.resolve(Ls(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=Ls(n.data),d=new AbortController;this.abortControllers[l]=d;try{const v=yield this.messageHandlers[n.type](n.sourceMapId,o,d);this.completeTask(l,null,v)}catch(v){this.completeTask(l,v)}})}completeTask(l,n,o){const d=[];delete this.abortControllers[l];const v={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Ac(n):null,data:Ac(o,d)};this.target.postMessage(v,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},m.K=Se,m.L=function(){var l=new ne(16);return ne!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},m.M=function(l,n,o){var d,v,x,T,E,I,R,L,V,W,K,ee,le=o[0],he=o[1],ye=o[2];return n===l?(l[12]=n[0]*le+n[4]*he+n[8]*ye+n[12],l[13]=n[1]*le+n[5]*he+n[9]*ye+n[13],l[14]=n[2]*le+n[6]*he+n[10]*ye+n[14],l[15]=n[3]*le+n[7]*he+n[11]*ye+n[15]):(v=n[1],x=n[2],T=n[3],E=n[4],I=n[5],R=n[6],L=n[7],V=n[8],W=n[9],K=n[10],ee=n[11],l[0]=d=n[0],l[1]=v,l[2]=x,l[3]=T,l[4]=E,l[5]=I,l[6]=R,l[7]=L,l[8]=V,l[9]=W,l[10]=K,l[11]=ee,l[12]=d*le+E*he+V*ye+n[12],l[13]=v*le+I*he+W*ye+n[13],l[14]=x*le+R*he+K*ye+n[14],l[15]=T*le+L*he+ee*ye+n[15]),l},m.N=function(l,n,o){var d=o[0],v=o[1],x=o[2];return l[0]=n[0]*d,l[1]=n[1]*d,l[2]=n[2]*d,l[3]=n[3]*d,l[4]=n[4]*v,l[5]=n[5]*v,l[6]=n[6]*v,l[7]=n[7]*v,l[8]=n[8]*x,l[9]=n[9]*x,l[10]=n[10]*x,l[11]=n[11]*x,l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15],l},m.O=function(l,n,o){var d=n[0],v=n[1],x=n[2],T=n[3],E=n[4],I=n[5],R=n[6],L=n[7],V=n[8],W=n[9],K=n[10],ee=n[11],le=n[12],he=n[13],ye=n[14],Be=n[15],Ae=o[0],je=o[1],Ye=o[2],it=o[3];return l[0]=Ae*d+je*E+Ye*V+it*le,l[1]=Ae*v+je*I+Ye*W+it*he,l[2]=Ae*x+je*R+Ye*K+it*ye,l[3]=Ae*T+je*L+Ye*ee+it*Be,l[4]=(Ae=o[4])*d+(je=o[5])*E+(Ye=o[6])*V+(it=o[7])*le,l[5]=Ae*v+je*I+Ye*W+it*he,l[6]=Ae*x+je*R+Ye*K+it*ye,l[7]=Ae*T+je*L+Ye*ee+it*Be,l[8]=(Ae=o[8])*d+(je=o[9])*E+(Ye=o[10])*V+(it=o[11])*le,l[9]=Ae*v+je*I+Ye*W+it*he,l[10]=Ae*x+je*R+Ye*K+it*ye,l[11]=Ae*T+je*L+Ye*ee+it*Be,l[12]=(Ae=o[12])*d+(je=o[13])*E+(Ye=o[14])*V+(it=o[15])*le,l[13]=Ae*v+je*I+Ye*W+it*he,l[14]=Ae*x+je*R+Ye*K+it*ye,l[15]=Ae*T+je*L+Ye*ee+it*Be,l},m.P=M,m.Q=function(l,n){const o={};for(let d=0;d<n.length;d++){const v=n[d];v in l&&(o[v]=l[v])}return o},m.R=Ei,m.S=Gr,m.T=bu,m.U=Sp,m.V=mv,m.W=U,m.X=te,m.Y=Ii,m.Z=ro,m._=c,m.a=ie,m.a$=tt,m.a0=function(l,n){var o,d,v,x,T;if(!l)return n??{};if(!n)return l;let E=Object.assign({},l);if(n.removeAll&&(E={removeAll:!0}),n.remove){const I=new Set(n.remove);E.add&&(E.add=E.add.filter(L=>!I.has(L.id))),E.update&&(E.update=E.update.filter(L=>!I.has(L.id)));const R=new Set(((o=l.add)!==null&&o!==void 0?o:[]).map(L=>L.id));n.remove=n.remove.filter(L=>!R.has(L))}if(n.remove){const I=new Set(E.remove?E.remove.concat(n.remove):n.remove);E.remove=Array.from(I.values())}if(n.add){const I=E.add?E.add.concat(n.add):n.add,R=new Map(I.map(L=>[L.id,L]));E.add=Array.from(R.values())}if(n.update){const I=new Map((d=E.update)===null||d===void 0?void 0:d.map(R=>[R.id,R]));for(const R of n.update){const L=(v=I.get(R.id))!==null&&v!==void 0?v:{id:R.id};R.newGeometry&&(L.newGeometry=R.newGeometry),R.addOrUpdateProperties&&(L.addOrUpdateProperties=((x=L.addOrUpdateProperties)!==null&&x!==void 0?x:[]).concat(R.addOrUpdateProperties)),R.removeProperties&&(L.removeProperties=((T=L.removeProperties)!==null&&T!==void 0?T:[]).concat(R.removeProperties)),R.removeAllProperties&&(L.removeAllProperties=!0),I.set(R.id,L)}E.update=Array.from(I.values())}return E.remove&&E.add&&(E.remove=E.remove.filter(I=>E.add.findIndex(R=>R.id===I)===-1)),E},m.a1=Wh,m.a2=ju,m.a3=25,m.a4=ef,m.a5=l=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(o=>{n.onloadstart=()=>{o(n)};for(const d of l){const v=window.document.createElement("source");Le(d)||(n.crossOrigin="Anonymous"),v.src=d,n.appendChild(v)}})},m.a6=wt,m.a7=function(){return Ot++},m.a8=H,m.a9=Xl,m.aA=function(l){let n=1/0,o=1/0,d=-1/0,v=-1/0;for(const x of l)n=Math.min(n,x.x),o=Math.min(o,x.y),d=Math.max(d,x.x),v=Math.max(v,x.y);return[n,o,d,v]},m.aB=gi,m.aC=be,m.aD=function(l,n,o,d,v=!1){if(!o[0]&&!o[1])return[0,0];const x=v?d==="map"?-l.bearingInRadians:0:d==="viewport"?l.bearingInRadians:0;if(x){const T=Math.sin(x),E=Math.cos(x);o=[o[0]*E-o[1]*T,o[0]*T+o[1]*E]}return[v?o[0]:be(n,o[0],l.zoom),v?o[1]:be(n,o[1],l.zoom)]},m.aF=cg,m.aG=jp,m.aH=Pu,m.aI=ku,m.aJ=En,m.aK=xo,m.aL=Oe,m.aM=wr,m.aN=Xr,m.aO=mr,m.aP=zi,m.aQ=dg,m.aR=at,m.aS=ke,m.aT=function(l){var n=new ne(3);return n[0]=l[0],n[1]=l[1],n[2]=l[2],n},m.aU=function(l,n,o){return l[0]=n[0]-o[0],l[1]=n[1]-o[1],l[2]=n[2]-o[2],l},m.aV=function(l,n){var o=n[0],d=n[1],v=n[2],x=o*o+d*d+v*v;return x>0&&(x=1/Math.sqrt(x)),l[0]=n[0]*x,l[1]=n[1]*x,l[2]=n[2]*x,l},m.aW=ze,m.aX=function(l,n){return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]},m.aY=function(l,n,o){return l[0]=n[0]*o[0],l[1]=n[1]*o[1],l[2]=n[2]*o[2],l[3]=n[3]*o[3],l},m.aZ=me,m.a_=function(l,n,o){const d=n[0]*o[0]+n[1]*o[1]+n[2]*o[2];return d===0?null:(-(l[0]*o[0]+l[1]*o[1]+l[2]*o[2])-o[3])/d},m.aa=Il,m.ab=kc,m.ac=Wl,m.ad=function(l){const n={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,d,v,x)=>{const T=v||x;return n[d]=!T||T.toLowerCase(),""}),n["max-age"]){const o=parseInt(n["max-age"],10);isNaN(o)?delete n["max-age"]:n["max-age"]=o}return n},m.ae=Ts,m.af=function(l){return Math.pow(2,l)},m.ag=J,m.ah=Rt,m.ai=85.051129,m.aj=Tp,m.ak=function(l){return Math.log(l)/Math.LN2},m.al=function(l){var n=l[0],o=l[1];return n*n+o*o},m.am=function(l){if(!l.length)return new Set;const n=Math.max(...l.map(I=>I.canonical.z));let o=1/0,d=-1/0,v=1/0,x=-1/0;const T=[];for(const I of l){const{x:R,y:L,z:V}=I.canonical,W=Math.pow(2,n-V),K=R*W,ee=L*W;T.push({id:I,x:K,y:ee}),K<o&&(o=K),K>d&&(d=K),ee<v&&(v=ee),ee>x&&(x=ee)}const E=new Set;for(const I of T)I.x!==o&&I.x!==d&&I.y!==v&&I.y!==x||E.add(I.id);return E},m.an=function(l,n){let o=0,d=0;if(l.kind==="constant")d=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:v,minZoom:x,maxZoom:T}=l,E=v?Rt(pi.interpolationFactor(v,n,x,T),0,1):0;l.kind==="camera"?d=ha.number(l.minSize,l.maxSize,E):o=E}return{uSizeT:o,uSize:d}},m.ap=function(l,{uSize:n,uSizeT:o},{lowerSize:d,upperSize:v}){return l.kind==="source"?d/Hl:l.kind==="composite"?ha.number(d/Hl,v/Hl,o):n},m.aq=function(l,n){var o=n[0],d=n[1],v=n[2],x=n[3],T=n[4],E=n[5],I=n[6],R=n[7],L=n[8],V=n[9],W=n[10],K=n[11],ee=n[12],le=n[13],he=n[14],ye=n[15],Be=o*E-d*T,Ae=o*I-v*T,je=o*R-x*T,Ye=d*I-v*E,it=d*R-x*E,gt=v*R-x*I,Et=L*le-V*ee,Mt=L*he-W*ee,jt=L*ye-K*ee,$t=V*he-W*le,It=V*ye-K*le,kt=W*ye-K*he,dt=Be*kt-Ae*It+je*$t+Ye*jt-it*Mt+gt*Et;return dt?(l[0]=(E*kt-I*It+R*$t)*(dt=1/dt),l[1]=(v*It-d*kt-x*$t)*dt,l[2]=(le*gt-he*it+ye*Ye)*dt,l[3]=(W*it-V*gt-K*Ye)*dt,l[4]=(I*jt-T*kt-R*Mt)*dt,l[5]=(o*kt-v*jt+x*Mt)*dt,l[6]=(he*je-ee*gt-ye*Ae)*dt,l[7]=(L*gt-W*je+K*Ae)*dt,l[8]=(T*It-E*jt+R*Et)*dt,l[9]=(d*jt-o*It-x*Et)*dt,l[10]=(ee*it-le*je+ye*Be)*dt,l[11]=(V*je-L*it-K*Be)*dt,l[12]=(E*Mt-T*$t-I*Et)*dt,l[13]=(o*$t-d*Mt+v*Et)*dt,l[14]=(le*Ae-ee*Ye-he*Be)*dt,l[15]=(L*Ye-V*Ae+W*Be)*dt,l):null},m.ar=Ve,m.as=function(l){var n=l[0],o=l[1];return Math.sqrt(n*n+o*o)},m.at=function(l){return l[0]=0,l[1]=0,l},m.au=function(l,n,o){return l[0]=n[0]*o,l[1]=n[1]*o,l},m.av=ug,m.aw=ut,m.ax=function(l,n,o,d){const v=n.y-l.y,x=n.x-l.x,T=d.y-o.y,E=d.x-o.x,I=T*x-E*v;if(I===0)return null;const R=(E*(l.y-o.y)-T*(l.x-o.x))/I;return new M(l.x+R*x,l.y+R*v)},m.ay=vv,m.az=Fy,m.b=Xn,m.b$=class extends wi{constructor(l,n){super(l,n),this.current=new Array}set(l){if(l!=this.current){this.current=l;const n=new Float32Array(l);this.gl.uniform1fv(this.location,n)}}},m.b0=function(l,n,o){return l[0]=n[0]*o,l[1]=n[1]*o,l[2]=n[2]*o,l[3]=n[3]*o,l},m.b1=function(l,n){return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]+l[3]},m.b2=gv,m.b3=Yh,m.b4=function(l,n,o,d,v){var x=1/Math.tan(n/2);if(l[0]=x/o,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=x,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,v!=null&&v!==1/0){var T=1/(d-v);l[10]=(v+d)*T,l[14]=2*v*d*T}else l[10]=-1,l[14]=-2*d;return l},m.b5=function(l){var n=new ne(16);return n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=l[3],n[4]=l[4],n[5]=l[5],n[6]=l[6],n[7]=l[7],n[8]=l[8],n[9]=l[9],n[10]=l[10],n[11]=l[11],n[12]=l[12],n[13]=l[13],n[14]=l[14],n[15]=l[15],n},m.b6=function(l,n,o){var d=Math.sin(o),v=Math.cos(o),x=n[0],T=n[1],E=n[2],I=n[3],R=n[4],L=n[5],V=n[6],W=n[7];return n!==l&&(l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[0]=x*v+R*d,l[1]=T*v+L*d,l[2]=E*v+V*d,l[3]=I*v+W*d,l[4]=R*v-x*d,l[5]=L*v-T*d,l[6]=V*v-E*d,l[7]=W*v-I*d,l},m.b7=function(l,n,o){var d=Math.sin(o),v=Math.cos(o),x=n[4],T=n[5],E=n[6],I=n[7],R=n[8],L=n[9],V=n[10],W=n[11];return n!==l&&(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[4]=x*v+R*d,l[5]=T*v+L*d,l[6]=E*v+V*d,l[7]=I*v+W*d,l[8]=R*v-x*d,l[9]=L*v-T*d,l[10]=V*v-E*d,l[11]=W*v-I*d,l},m.b8=function(){const l=new Float32Array(16);return J(l),l},m.b9=function(){const l=new Float64Array(16);return J(l),l},m.bA=function(l,n){const o=Xe(l,360),d=Xe(n,360),v=d-o,x=d>o?v-360:v+360;return Math.abs(v)<Math.abs(x)?v:x},m.bB=function(l){return l[0]=0,l[1]=0,l[2]=0,l},m.bC=function(l,n,o,d){const v=Math.sqrt(l*l+n*n),x=Math.sqrt(o*o+d*d);l/=v,n/=v,o/=x,d/=x;const T=Math.acos(l*o+n*d);return-n*o+l*d>0?T:-T},m.bD=function(l,n){const o=Xe(l,2*Math.PI),d=Xe(n,2*Math.PI);return Math.min(Math.abs(o-d),Math.abs(o-d+2*Math.PI),Math.abs(o-d-2*Math.PI))},m.bE=function(){const l={},n=Ue.$version;for(const o in Ue.$root){const d=Ue.$root[o];if(d.required){let v=null;v=o==="version"?n:d.type==="array"?[]:{},v!=null&&(l[o]=v)}}return l},m.bF=Ia,m.bG=De,m.bH=function l(n,o){if(Array.isArray(n)){if(!Array.isArray(o)||n.length!==o.length)return!1;for(let d=0;d<n.length;d++)if(!l(n[d],o[d]))return!1;return!0}if(typeof n=="object"&&n!==null&&o!==null){if(typeof o!="object"||Object.keys(n).length!==Object.keys(o).length)return!1;for(const d in n)if(!l(n[d],o[d]))return!1;return!0}return n===o},m.bI=function(l){l=l.slice();const n=Object.create(null);for(let o=0;o<l.length;o++)n[l[o].id]=l[o];for(let o=0;o<l.length;o++)"ref"in l[o]&&(l[o]=qr(l[o],n[l[o].ref]));return l},m.bJ=function(l,n){if(l.type==="custom")return new k0(l,n);switch(l.type){case"background":return new I0(l,n);case"circle":return new Uy(l,n);case"color-relief":return new Gm(l,n);case"fill":return new A0(l,n);case"fill-extrusion":return new Jm(l,n);case"heatmap":return new x0(l,n);case"hillshade":return new Dc(l,n);case"line":return new Yy(l,n);case"raster":return new Ld(l,n);case"symbol":return new Eu(l,n)}},m.bK=l=>l.type==="raster",m.bL=_t,m.bM=function(l,n){if(!l)return[{command:"setStyle",args:[n]}];let o=[];try{if(!Ft(l.version,n.version))return[{command:"setStyle",args:[n]}];Ft(l.center,n.center)||o.push({command:"setCenter",args:[n.center]}),Ft(l.state,n.state)||o.push({command:"setGlobalState",args:[n.state]}),Ft(l.centerAltitude,n.centerAltitude)||o.push({command:"setCenterAltitude",args:[n.centerAltitude]}),Ft(l.zoom,n.zoom)||o.push({command:"setZoom",args:[n.zoom]}),Ft(l.bearing,n.bearing)||o.push({command:"setBearing",args:[n.bearing]}),Ft(l.pitch,n.pitch)||o.push({command:"setPitch",args:[n.pitch]}),Ft(l.roll,n.roll)||o.push({command:"setRoll",args:[n.roll]}),Ft(l.sprite,n.sprite)||o.push({command:"setSprite",args:[n.sprite]}),Ft(l.glyphs,n.glyphs)||o.push({command:"setGlyphs",args:[n.glyphs]}),Ft(l.transition,n.transition)||o.push({command:"setTransition",args:[n.transition]}),Ft(l.light,n.light)||o.push({command:"setLight",args:[n.light]}),Ft(l.terrain,n.terrain)||o.push({command:"setTerrain",args:[n.terrain]}),Ft(l.sky,n.sky)||o.push({command:"setSky",args:[n.sky]}),Ft(l.projection,n.projection)||o.push({command:"setProjection",args:[n.projection]});const d={},v=[];(function(T,E,I,R){let L;for(L in E=E||{},T=T||{})Object.prototype.hasOwnProperty.call(T,L)&&(Object.prototype.hasOwnProperty.call(E,L)||ci(L,I,R));for(L in E)Object.prototype.hasOwnProperty.call(E,L)&&(Object.prototype.hasOwnProperty.call(T,L)?Ft(T[L],E[L])||(T[L].type==="geojson"&&E[L].type==="geojson"&&Zr(T,E,L)?Pr(I,{command:"setGeoJSONSourceData",args:[L,E[L].data]}):hn(L,E,I,R)):Jn(L,E,I))})(l.sources,n.sources,v,d);const x=[];l.layers&&l.layers.forEach(T=>{"source"in T&&d[T.source]?o.push({command:"removeLayer",args:[T.id]}):x.push(T)}),o=o.concat(v),function(T,E,I){E=E||[];const R=(T=T||[]).map(An),L=E.map(An),V=T.reduce(Ur,{}),W=E.reduce(Ur,{}),K=R.slice(),ee=Object.create(null);let le,he,ye,Be,Ae;for(let je=0,Ye=0;je<R.length;je++)le=R[je],Object.prototype.hasOwnProperty.call(W,le)?Ye++:(Pr(I,{command:"removeLayer",args:[le]}),K.splice(K.indexOf(le,Ye),1));for(let je=0,Ye=0;je<L.length;je++)le=L[L.length-1-je],K[K.length-1-je]!==le&&(Object.prototype.hasOwnProperty.call(V,le)?(Pr(I,{command:"removeLayer",args:[le]}),K.splice(K.lastIndexOf(le,K.length-Ye),1)):Ye++,Be=K[K.length-je],Pr(I,{command:"addLayer",args:[W[le],Be]}),K.splice(K.length-je,0,le),ee[le]=!0);for(let je=0;je<L.length;je++)if(le=L[je],he=V[le],ye=W[le],!ee[le]&&!Ft(he,ye))if(Ft(he.source,ye.source)&&Ft(he["source-layer"],ye["source-layer"])&&Ft(he.type,ye.type)){for(Ae in Tr(he.layout,ye.layout,I,le,null,"setLayoutProperty"),Tr(he.paint,ye.paint,I,le,null,"setPaintProperty"),Ft(he.filter,ye.filter)||Pr(I,{command:"setFilter",args:[le,ye.filter]}),Ft(he.minzoom,ye.minzoom)&&Ft(he.maxzoom,ye.maxzoom)||Pr(I,{command:"setLayerZoomRange",args:[le,ye.minzoom,ye.maxzoom]}),he)Object.prototype.hasOwnProperty.call(he,Ae)&&Ae!=="layout"&&Ae!=="paint"&&Ae!=="filter"&&Ae!=="metadata"&&Ae!=="minzoom"&&Ae!=="maxzoom"&&(Ae.indexOf("paint.")===0?Tr(he[Ae],ye[Ae],I,le,Ae.slice(6),"setPaintProperty"):Ft(he[Ae],ye[Ae])||Pr(I,{command:"setLayerProperty",args:[le,Ae,ye[Ae]]}));for(Ae in ye)Object.prototype.hasOwnProperty.call(ye,Ae)&&!Object.prototype.hasOwnProperty.call(he,Ae)&&Ae!=="layout"&&Ae!=="paint"&&Ae!=="filter"&&Ae!=="metadata"&&Ae!=="minzoom"&&Ae!=="maxzoom"&&(Ae.indexOf("paint.")===0?Tr(he[Ae],ye[Ae],I,le,Ae.slice(6),"setPaintProperty"):Ft(he[Ae],ye[Ae])||Pr(I,{command:"setLayerProperty",args:[le,Ae,ye[Ae]]}))}else Pr(I,{command:"removeLayer",args:[le]}),Be=K[K.lastIndexOf(le)+1],Pr(I,{command:"addLayer",args:[ye,Be]})}(x,n.layers,o)}catch(d){console.warn("Unable to compute style diff:",d),o=[{command:"setStyle",args:[n]}]}return o},m.bN=function(l){const n=[],o=l.id;return o===void 0&&n.push({message:`layers.${o}: missing required property "id"`}),l.render===void 0&&n.push({message:`layers.${o}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&n.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),n},m.bO=er,m.bP=ir,m.bQ=class extends wi{constructor(l,n){super(l,n),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},m.bR=qn,m.bS=class extends wi{constructor(l,n){super(l,n),this.current=Sn}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let n=1;n<16;n++)if(l[n]!==this.current[n]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},m.bT=on,m.bU=class extends wi{constructor(l,n){super(l,n),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},m.bV=class extends wi{constructor(l,n){super(l,n),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},m.bW=ue,m.bX=function(l,n){var o=Math.sin(n),d=Math.cos(n);return l[0]=d,l[1]=o,l[2]=0,l[3]=-o,l[4]=d,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},m.bY=function(l,n,o){var d=n[0],v=n[1],x=n[2];return l[0]=d*o[0]+v*o[3]+x*o[6],l[1]=d*o[1]+v*o[4]+x*o[7],l[2]=d*o[2]+v*o[5]+x*o[8],l},m.bZ=function(l,n,o,d,v,x,T){var E=1/(n-o),I=1/(d-v),R=1/(x-T);return l[0]=-2*E,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*I,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*R,l[11]=0,l[12]=(n+o)*E,l[13]=(v+d)*I,l[14]=(T+x)*R,l[15]=1,l},m.b_=class extends wi{constructor(l,n){super(l,n),this.current=new Array}set(l){if(l!=this.current){this.current=l;const n=new Float32Array(4*l.length);for(let o=0;o<l.length;o++)n[4*o]=l[o].r,n[4*o+1]=l[o].g,n[4*o+2]=l[o].b,n[4*o+3]=l[o].a;this.gl.uniform4fv(this.location,n)}}},m.ba=function(){return new Float64Array(16)},m.bb=function(l,n,o){const d=new Float64Array(4);return Pe(d,l,n-90,o),d},m.bc=function(l,n,o,d){var v,x,T,E,I,R=n[0],L=n[1],V=n[2],W=n[3],K=o[0],ee=o[1],le=o[2],he=o[3];return(x=R*K+L*ee+V*le+W*he)<0&&(x=-x,K=-K,ee=-ee,le=-le,he=-he),1-x>ae?(v=Math.acos(x),T=Math.sin(v),E=Math.sin((1-d)*v)/T,I=Math.sin(d*v)/T):(E=1-d,I=d),l[0]=E*R+I*K,l[1]=E*L+I*ee,l[2]=E*V+I*le,l[3]=E*W+I*he,l},m.bd=function(l){const n=new Float64Array(9);var o,d,v,x,T,E,I,R,L,V,W,K,ee,le,he,ye,Be,Ae;V=(v=(d=l)[0])*(I=v+v),W=(x=d[1])*I,ee=(T=d[2])*I,le=T*(R=x+x),ye=(E=d[3])*I,Be=E*R,Ae=E*(L=T+T),(o=n)[0]=1-(K=x*R)-(he=T*L),o[3]=W-Ae,o[6]=ee+Be,o[1]=W+Ae,o[4]=1-V-he,o[7]=le-ye,o[2]=ee-Be,o[5]=le+ye,o[8]=1-V-K;const je=zi(-Math.asin(Rt(n[2],-1,1)));let Ye,it;return Math.hypot(n[5],n[8])<.001?(Ye=0,it=-zi(Math.atan2(n[3],n[4]))):(Ye=zi(n[5]===0&&n[8]===0?0:Math.atan2(n[5],n[8])),it=zi(n[1]===0&&n[0]===0?0:Math.atan2(n[1],n[0]))),{roll:Ye,pitch:je+90,bearing:it}},m.be=function(l,n){return l.roll==n.roll&&l.pitch==n.pitch&&l.bearing==n.bearing},m.bf=vr,m.bg=Dn,m.bh=xu,m.bi=Ys,m.bj=Nc,m.bk=ot,m.bl=st,m.bm=Ni,m.bn=function(l,n,o,d,v){return ot(d,v,Rt((l-n)/(o-n),0,1))},m.bo=Xe,m.bp=function(){return new Float64Array(3)},m.bq=function(l,n,o,d){return l[0]=n[0]+o[0]*d,l[1]=n[1]+o[1]*d,l[2]=n[2]+o[2]*d,l},m.br=Pe,m.bs=function(l,n,o){var d=o[0],v=o[1],x=o[2],T=o[3],E=n[0],I=n[1],R=n[2],L=v*R-x*I,V=x*E-d*R,W=d*I-v*E;return l[0]=E+T*(L+=L)+v*(W+=W)-x*(V+=V),l[1]=I+T*V+x*L-d*W,l[2]=R+T*W+d*V-v*L,l},m.bt=function(l,n,o){const d=(v=[l[0],l[1],l[2],n[0],n[1],n[2],o[0],o[1],o[2]])[0]*((L=v[8])*(T=v[4])-(E=v[5])*(R=v[7]))+v[1]*(-L*(x=v[3])+E*(I=v[6]))+v[2]*(R*x-T*I);var v,x,T,E,I,R,L;if(d===0)return null;const V=ze([],[n[0],n[1],n[2]],[o[0],o[1],o[2]]),W=ze([],[o[0],o[1],o[2]],[l[0],l[1],l[2]]),K=ze([],[l[0],l[1],l[2]],[n[0],n[1],n[2]]),ee=at([],V,-l[3]);return ke(ee,ee,at([],W,-n[3])),ke(ee,ee,at([],K,-o[3])),at(ee,ee,1/d),ee},m.bu=Hh,m.bv=function(){return new Float64Array(4)},m.bw=function(l,n,o,d){var v=[],x=[];return v[0]=n[0]-o[0],v[1]=n[1]-o[1],v[2]=n[2]-o[2],x[0]=v[0]*Math.cos(d)-v[1]*Math.sin(d),x[1]=v[0]*Math.sin(d)+v[1]*Math.cos(d),x[2]=v[2],l[0]=x[0]+o[0],l[1]=x[1]+o[1],l[2]=x[2]+o[2],l},m.bx=function(l,n,o,d){var v=[],x=[];return v[0]=n[0]-o[0],v[1]=n[1]-o[1],v[2]=n[2]-o[2],x[0]=v[0],x[1]=v[1]*Math.cos(d)-v[2]*Math.sin(d),x[2]=v[1]*Math.sin(d)+v[2]*Math.cos(d),l[0]=x[0]+o[0],l[1]=x[1]+o[1],l[2]=x[2]+o[2],l},m.by=function(l,n,o,d){var v=[],x=[];return v[0]=n[0]-o[0],v[1]=n[1]-o[1],v[2]=n[2]-o[2],x[0]=v[2]*Math.sin(d)+v[0]*Math.cos(d),x[1]=v[1],x[2]=v[2]*Math.cos(d)-v[0]*Math.sin(d),l[0]=x[0]+o[0],l[1]=x[1]+o[1],l[2]=x[2]+o[2],l},m.bz=function(l,n,o){var d=Math.sin(o),v=Math.cos(o),x=n[0],T=n[1],E=n[2],I=n[3],R=n[8],L=n[9],V=n[10],W=n[11];return n!==l&&(l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[0]=x*v-R*d,l[1]=T*v-L*d,l[2]=E*v-V*d,l[3]=I*v-W*d,l[8]=x*d+R*v,l[9]=T*d+L*v,l[10]=E*d+V*v,l[11]=I*d+W*v,l},m.c=re,m.c0=class extends Ch{},m.c1=lp,m.c2=class extends r{},m.c3=$m,m.c4=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},m.c5=Un,m.c6=function(l,n,o){var d=n[0],v=n[1],x=n[2],T=o[3]*d+o[7]*v+o[11]*x+o[15];return l[0]=(o[0]*d+o[4]*v+o[8]*x+o[12])/(T=T||1),l[1]=(o[1]*d+o[5]*v+o[9]*x+o[13])/T,l[2]=(o[2]*d+o[6]*v+o[10]*x+o[14])/T,l},m.c7=class extends Ya{},m.c8=class extends z{},m.c9=function(l,n){return l[0]===n[0]&&l[1]===n[1]&&l[2]===n[2]&&l[3]===n[3]&&l[4]===n[4]&&l[5]===n[5]&&l[6]===n[6]&&l[7]===n[7]&&l[8]===n[8]&&l[9]===n[9]&&l[10]===n[10]&&l[11]===n[11]&&l[12]===n[12]&&l[13]===n[13]&&l[14]===n[14]&&l[15]===n[15]},m.cA=function(l,n){ie.REGISTERED_PROTOCOLS[l]=n},m.cB=function(l){delete ie.REGISTERED_PROTOCOLS[l]},m.cC=function(l,n){const o={};for(let v=0;v<l.length;v++){const x=n&&n[l[v].id]||hu(l[v]);n&&(n[l[v].id]=x);let T=o[x];T||(T=o[x]=[]),T.push(l[v])}const d=[];for(const v in o)d.push(o[v]);return d},m.cD=zt,m.cE=yv,m.cF=fg,m.cG=_n,m.cH=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=ht/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const n=l.bucket.layers[0],o=n.layout,d=n._unevaluatedLayout._values,v={layoutIconSize:d["icon-size"].possiblyEvaluate(new nn(l.bucket.zoom+1),l.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new nn(l.bucket.zoom+1),l.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new nn(18))};if(l.bucket.textSizeData.kind==="composite"){const{minZoom:R,maxZoom:L}=l.bucket.textSizeData;v.compositeTextSizes=[d["text-size"].possiblyEvaluate(new nn(R),l.canonical),d["text-size"].possiblyEvaluate(new nn(L),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){const{minZoom:R,maxZoom:L}=l.bucket.iconSizeData;v.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new nn(R),l.canonical),d["icon-size"].possiblyEvaluate(new nn(L),l.canonical)]}const x=o.get("text-line-height")*gi,T=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",E=o.get("text-keep-upright"),I=o.get("text-size");for(const R of l.bucket.features){const L=o.get("text-font").evaluate(R,{},l.canonical).join(","),V=I.evaluate(R,{},l.canonical),W=v.layoutTextSize.evaluate(R,{},l.canonical),K=v.layoutIconSize.evaluate(R,{},l.canonical),ee={horizontal:{},vertical:void 0},le=R.text;let he,ye=[0,0];if(le){const je=le.toString(),Ye=o.get("text-letter-spacing").evaluate(R,{},l.canonical)*gi,it=ds(je)?Ye:0,gt=o.get("text-anchor").evaluate(R,{},l.canonical),Et=Sv(n,R,l.canonical);if(!Et){const It=o.get("text-radial-offset").evaluate(R,{},l.canonical);ye=It?wv(gt,[It*gi,gg]):o.get("text-offset").evaluate(R,{},l.canonical).map(kt=>kt*gi)}let Mt=T?"center":o.get("text-justify").evaluate(R,{},l.canonical);const jt=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(R,{},l.canonical)*gi:1/0,$t=()=>{l.bucket.allowVerticalPlacement&&Mc(je)&&(ee.vertical=pp(le,l.glyphMap,l.glyphPositions,l.imagePositions,L,jt,x,gt,"left",it,ye,m.ao.vertical,!0,W,V))};if(!T&&Et){const It=new Set;if(Mt==="auto")for(let dt=0;dt<Et.values.length;dt+=2)It.add(jp(Et.values[dt]));else It.add(Mt);let kt=!1;for(const dt of It)if(!ee.horizontal[dt])if(kt)ee.horizontal[dt]=ee.horizontal[0];else{const tr=pp(le,l.glyphMap,l.glyphPositions,l.imagePositions,L,jt,x,"center",dt,it,ye,m.ao.horizontal,!1,W,V);tr&&(ee.horizontal[dt]=tr,kt=tr.positionedLines.length===1)}$t()}else{Mt==="auto"&&(Mt=jp(gt));const It=pp(le,l.glyphMap,l.glyphPositions,l.imagePositions,L,jt,x,gt,Mt,it,ye,m.ao.horizontal,!1,W,V);It&&(ee.horizontal[Mt]=It),$t(),Mc(je)&&T&&E&&(ee.vertical=pp(le,l.glyphMap,l.glyphPositions,l.imagePositions,L,jt,x,gt,Mt,it,ye,m.ao.vertical,!1,W,V))}}let Be=!1;if(R.icon&&R.icon.name){const je=l.imageMap[R.icon.name];je&&(he=og(l.imagePositions[R.icon.name],o.get("icon-offset").evaluate(R,{},l.canonical),o.get("icon-anchor").evaluate(R,{},l.canonical)),Be=!!je.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=Be:l.bucket.sdfIcons!==Be&&Qt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(je.pixelRatio!==l.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}const Ae=yg(ee.horizontal)||ee.vertical;l.bucket.iconsInText=!!Ae&&Ae.iconsInText,(Ae||he)&&Jh(l.bucket,R,ee,he,l.imageMap,v,W,K,ye,Be,l.canonical,l.subdivisionGranularity)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},m.cI=ip,m.cJ=Gl,m.cK=Wd,m.cL=ap,m.cM=Yd,m.cN=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},m.cO=function(l,n,o,d,v){return c(this,void 0,void 0,function*(){if(te())try{return yield Ii(l,n,o,d,v)}catch{}return function(x,T,E,I,R){const L=x.width,V=x.height;ki&&Wi||(ki=new OffscreenCanvas(L,V),Wi=ki.getContext("2d",{willReadFrequently:!0})),ki.width=L,ki.height=V,Wi.drawImage(x,0,0,L,V);const W=Wi.getImageData(T,E,I,R);return Wi.clearRect(0,0,L,V),W.data}(l,n,o,d,v)})},m.cP=ys,m.cQ=C,m.cR=Ul,m.cS=jr,m.cT=jl,m.cU=function(l,n){const o=new Map;if(l!=null)if(l.type==="Feature")o.set(Kh(l,n),l);else for(const d of l.features)o.set(Kh(d,n),d);return o},m.cV=function(l,n){if(l==null)return!0;if(l.type==="Feature")return Kh(l,n)!=null;if(l.type==="FeatureCollection"){const o=new Set;for(const d of l.features){const v=Kh(d,n);if(v==null||o.has(v))return!1;o.add(v)}return!0}return!1},m.cW=function(l,n,o){var d,v,x,T;if(n.removeAll&&l.clear(),n.remove)for(const E of n.remove)l.delete(E);if(n.add)for(const E of n.add){const I=Kh(E,o);I!=null&&l.set(I,E)}if(n.update)for(const E of n.update){let I=l.get(E.id);if(I==null)continue;const R=!E.removeAllProperties&&(((d=E.removeProperties)===null||d===void 0?void 0:d.length)>0||((v=E.addOrUpdateProperties)===null||v===void 0?void 0:v.length)>0);if((E.newGeometry||E.removeAllProperties||R)&&(I=Object.assign({},I),l.set(E.id,I),R&&(I.properties=Object.assign({},I.properties))),E.newGeometry&&(I.geometry=E.newGeometry),E.removeAllProperties)I.properties={};else if(((x=E.removeProperties)===null||x===void 0?void 0:x.length)>0)for(const L of E.removeProperties)Object.prototype.hasOwnProperty.call(I.properties,L)&&delete I.properties[L];if(((T=E.addOrUpdateProperties)===null||T===void 0?void 0:T.length)>0)for(const{key:L,value:V}of E.addOrUpdateProperties)I.properties[L]=V}},m.cX=fs,m.ca=function(l,n){var o=l[0],d=l[1],v=l[2],x=l[3],T=l[4],E=l[5],I=l[6],R=l[7],L=l[8],V=l[9],W=l[10],K=l[11],ee=l[12],le=l[13],he=l[14],ye=l[15],Be=n[0],Ae=n[1],je=n[2],Ye=n[3],it=n[4],gt=n[5],Et=n[6],Mt=n[7],jt=n[8],$t=n[9],It=n[10],kt=n[11],dt=n[12],tr=n[13],ar=n[14],Gt=n[15];return Math.abs(o-Be)<=ae*Math.max(1,Math.abs(o),Math.abs(Be))&&Math.abs(d-Ae)<=ae*Math.max(1,Math.abs(d),Math.abs(Ae))&&Math.abs(v-je)<=ae*Math.max(1,Math.abs(v),Math.abs(je))&&Math.abs(x-Ye)<=ae*Math.max(1,Math.abs(x),Math.abs(Ye))&&Math.abs(T-it)<=ae*Math.max(1,Math.abs(T),Math.abs(it))&&Math.abs(E-gt)<=ae*Math.max(1,Math.abs(E),Math.abs(gt))&&Math.abs(I-Et)<=ae*Math.max(1,Math.abs(I),Math.abs(Et))&&Math.abs(R-Mt)<=ae*Math.max(1,Math.abs(R),Math.abs(Mt))&&Math.abs(L-jt)<=ae*Math.max(1,Math.abs(L),Math.abs(jt))&&Math.abs(V-$t)<=ae*Math.max(1,Math.abs(V),Math.abs($t))&&Math.abs(W-It)<=ae*Math.max(1,Math.abs(W),Math.abs(It))&&Math.abs(K-kt)<=ae*Math.max(1,Math.abs(K),Math.abs(kt))&&Math.abs(ee-dt)<=ae*Math.max(1,Math.abs(ee),Math.abs(dt))&&Math.abs(le-tr)<=ae*Math.max(1,Math.abs(le),Math.abs(tr))&&Math.abs(he-ar)<=ae*Math.max(1,Math.abs(he),Math.abs(ar))&&Math.abs(ye-Gt)<=ae*Math.max(1,Math.abs(ye),Math.abs(Gt))},m.cb=function(l,n){return l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15],l},m.cc=l=>l.type==="symbol",m.cd=l=>l.type==="circle",m.ce=l=>l.type==="heatmap",m.cf=l=>l.type==="line",m.cg=l=>l.type==="fill",m.ch=l=>l.type==="fill-extrusion",m.ci=l=>l.type==="hillshade",m.cj=l=>l.type==="color-relief",m.ck=l=>l.type==="background",m.cl=l=>l.type==="custom",m.cm=Pt,m.cn=function(l,n,o){const d=Ge(n.x-o.x,n.y-o.y),v=Ge(l.x-o.x,l.y-o.y);var x,T;return zi(Math.atan2(d[0]*v[1]-d[1]*v[0],(x=d)[0]*(T=v)[0]+x[1]*T[1]))},m.co=Vt,m.cp=function(l,n){return li[n]&&(l instanceof MouseEvent||l instanceof WheelEvent)},m.cq=function(l,n){return Qn[n]&&"touches"in l},m.cr=function(l){return Qn[l]||li[l]},m.cs=function(l,n,o){var d=n[0],v=n[1];return l[0]=o[0]*d+o[4]*v+o[12],l[1]=o[1]*d+o[5]*v+o[13],l},m.ct=function(l,n){const{x:o,y:d}=Wh.fromLngLat(n);return!(l<0||l>25||d<0||d>=1||o<0||o>=1)},m.cu=function(l,n){return l[0]=n[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=n[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=n[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},m.cv=class extends $s{},m.cw=L0,m.cy=function(l){return l.message===Ie},m.cz=Ee,m.d=Le,m.e=nr,m.f=l=>c(void 0,void 0,void 0,function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(n)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),m.g=de,m.h=l=>new Promise((n,o)=>{const d=new Image;d.onload=()=>{n(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=Ba})},d.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(l)],{type:"image/png"});d.src=l.byteLength?URL.createObjectURL(v):Ba}),m.i=tn,m.j=(l,n)=>He(nr(l,{type:"json"}),n),m.k=Bt,m.l=mt,m.m=He,m.n=(l,n)=>He(nr(l,{type:"arrayBuffer"}),n),m.o=function(l){return new Yd(l).readFields(ov,[])},m.p=ig,m.q=zc,m.r=Mi,m.s=Mo,m.t=an,m.u=br,m.v=Ue,m.w=Qt,m.x=Id,m.y=kd,m.z=va}),f("worker",["./shared"],function(m){class c{constructor(re,ie){this.keyCache={},re&&this.replace(re,ie)}replace(re,ie){this._layerConfigs={},this._layers={},this.update(re,[],ie)}update(re,ie,de){for(const Ee of re){this._layerConfigs[Ee.id]=Ee;const De=this._layers[Ee.id]=m.bJ(Ee,de);De._featureFilter=m.aa(De.filter,de),this.keyCache[Ee.id]&&delete this.keyCache[Ee.id]}for(const Ee of ie)delete this.keyCache[Ee],delete this._layerConfigs[Ee],delete this._layers[Ee];this.familiesBySource={};const Se=m.cC(Object.values(this._layerConfigs),this.keyCache);for(const Ee of Se){const De=Ee.map(Bt=>this._layers[Bt.id]),He=De[0];if(He.visibility==="none")continue;const Le=He.source||"";let ct=this.familiesBySource[Le];ct||(ct=this.familiesBySource[Le]={});const St=He.sourceLayer||"_geojsonTileLayer";let mt=ct[St];mt||(mt=ct[St]=[]),mt.push(De)}}}class M{constructor(re){const ie={},de=[];for(const He in re){const Le=re[He],ct=ie[He]={};for(const St in Le){const mt=Le[+St];if(!mt||mt.bitmap.width===0||mt.bitmap.height===0)continue;const Bt={x:0,y:0,w:mt.bitmap.width+2,h:mt.bitmap.height+2};de.push(Bt),ct[St]={rect:Bt,metrics:mt.metrics}}}const{w:Se,h:Ee}=m.p(de),De=new m.q({width:Se||1,height:Ee||1});for(const He in re){const Le=re[He];for(const ct in Le){const St=Le[+ct];if(!St||St.bitmap.width===0||St.bitmap.height===0)continue;const mt=ie[He][ct].rect;m.q.copy(St.bitmap,De,{x:0,y:0},{x:mt.x+1,y:mt.y+1},St.bitmap)}}this.image=De,this.positions=ie}}m.cD("GlyphAtlas",M);class C{constructor(re){this.tileID=new m.Z(re.tileID.overscaledZ,re.tileID.wrap,re.tileID.canonical.z,re.tileID.canonical.x,re.tileID.canonical.y),this.uid=re.uid,this.zoom=re.zoom,this.pixelRatio=re.pixelRatio,this.tileSize=re.tileSize,this.source=re.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=re.showCollisionBoxes,this.collectResourceTiming=!!re.collectResourceTiming,this.returnDependencies=!!re.returnDependencies,this.promoteId=re.promoteId,this.inFlightDependencies=[]}parse(re,ie,de,Se,Ee){return m._(this,void 0,void 0,function*(){this.status="parsing",this.data=re,this.collisionBoxArray=new m.a8;const De=new m.cE(Object.keys(re.layers).sort()),He=new m.cF(this.tileID,this.promoteId);He.bucketLayerIDs=[];const Le={},ct={featureIndex:He,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:de,subdivisionGranularity:Ee},St=ie.familiesBySource[this.source];for(const Ur in St){const wt=re.layers[Ur];if(!wt)continue;wt.version===1&&m.w(`Vector tile source "${this.source}" layer "${Ur}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Po=De.encode(Ur),ca=[];for(let Ai=0;Ai<wt.length;Ai++){const Wn=wt.feature(Ai),Ct=He.getId(Wn,Ur);ca.push({feature:Wn,id:Ct,index:Ai,sourceLayerIndex:Po})}for(const Ai of St[Ur]){const Wn=Ai[0];Wn.source!==this.source&&m.w(`layer.source = ${Wn.source} does not equal this.source = ${this.source}`),Wn.minzoom&&this.zoom<Math.floor(Wn.minzoom)||Wn.maxzoom&&this.zoom>=Wn.maxzoom||Wn.visibility!=="none"&&(D(Ai,this.zoom,de),(Le[Wn.id]=Wn.createBucket({index:He.bucketLayerIDs.length,layers:Ai,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Po,sourceID:this.source})).populate(ca,ct,this.tileID.canonical),He.bucketLayerIDs.push(Ai.map(Ct=>Ct.id)))}}const mt=m.bO(ct.glyphDependencies,Ur=>Object.keys(Ur).map(Number));this.inFlightDependencies.forEach(Ur=>Ur==null?void 0:Ur.abort()),this.inFlightDependencies=[];let Bt=Promise.resolve({});if(Object.keys(mt).length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),Bt=Se.sendAsync({type:"GG",data:{stacks:mt,source:this.source,tileID:this.tileID,type:"glyphs"}},Ur)}const Zt=Object.keys(ct.iconDependencies);let Ue=Promise.resolve({});if(Zt.length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),Ue=Se.sendAsync({type:"GI",data:{icons:Zt,source:this.source,tileID:this.tileID,type:"icons"}},Ur)}const Cr=Object.keys(ct.patternDependencies);let qr=Promise.resolve({});if(Cr.length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),qr=Se.sendAsync({type:"GI",data:{icons:Cr,source:this.source,tileID:this.tileID,type:"patterns"}},Ur)}const Ft=ct.dashDependencies;let Pr=Promise.resolve({});if(Object.keys(Ft).length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),Pr=Se.sendAsync({type:"GDA",data:{dashes:Ft}},Ur)}const[Jn,ci,hn,Zr]=yield Promise.all([Bt,Ue,qr,Pr]),Tr=new M(Jn),An=new m.cG(ci,hn);for(const Ur in Le){const wt=Le[Ur];wt instanceof m.a9?(D(wt.layers,this.zoom,de),m.cH({bucket:wt,glyphMap:Jn,glyphPositions:Tr.positions,imageMap:ci,imagePositions:An.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:ct.subdivisionGranularity})):wt.hasDependencies&&(wt instanceof m.cI||wt instanceof m.cJ||wt instanceof m.cK)&&(D(wt.layers,this.zoom,de),wt.addFeatures(ct,this.tileID.canonical,An.patternPositions,Zr))}return this.status="done",{buckets:Object.values(Le).filter(Ur=>!Ur.isEmpty()),featureIndex:He,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Tr.image,imageAtlas:An,dashPositions:Zr,glyphMap:this.returnDependencies?Jn:null,iconMap:this.returnDependencies?ci:null,glyphPositions:this.returnDependencies?Tr.positions:null}})}}function D(Ie,re,ie){const de=new m.F(re);for(const Se of Ie)Se.recalculate(de,ie)}class O{constructor(re,ie,de){this.actor=re,this.layerIndex=ie,this.availableImages=de,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(re,ie){return m._(this,void 0,void 0,function*(){const de=yield m.n(re.request,ie);try{return{vectorTile:new m.cL(new m.cM(de.data)),rawData:de.data,cacheControl:de.cacheControl,expires:de.expires}}catch(Se){const Ee=new Uint8Array(de.data);let De=`Unable to parse the tile at ${re.request.url}, `;throw De+=Ee[0]===31&&Ee[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Se.message}`,new Error(De)}})}loadTile(re){return m._(this,void 0,void 0,function*(){const ie=re.uid,de=!!(re&&re.request&&re.request.collectResourceTiming)&&new m.cN(re.request),Se=new C(re);this.loading[ie]=Se;const Ee=new AbortController;Se.abort=Ee;try{const De=yield this.loadVectorTile(re,Ee);if(delete this.loading[ie],!De)return null;const He=De.rawData,Le={};De.expires&&(Le.expires=De.expires),De.cacheControl&&(Le.cacheControl=De.cacheControl);const ct={};if(de){const mt=de.finish();mt&&(ct.resourceTiming=JSON.parse(JSON.stringify(mt)))}Se.vectorTile=De.vectorTile;const St=Se.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,re.subdivisionGranularity);this.loaded[ie]=Se,this.fetching[ie]={rawTileData:He,cacheControl:Le,resourceTiming:ct};try{const mt=yield St;return m.e({rawTileData:He.slice(0)},mt,Le,ct)}finally{delete this.fetching[ie]}}catch(De){throw delete this.loading[ie],Se.status="done",this.loaded[ie]=Se,De}})}reloadTile(re){return m._(this,void 0,void 0,function*(){const ie=re.uid;if(!this.loaded||!this.loaded[ie])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const de=this.loaded[ie];if(de.showCollisionBoxes=re.showCollisionBoxes,de.status==="parsing"){const Se=yield de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,re.subdivisionGranularity);let Ee;if(this.fetching[ie]){const{rawTileData:De,cacheControl:He,resourceTiming:Le}=this.fetching[ie];delete this.fetching[ie],Ee=m.e({rawTileData:De.slice(0)},Se,He,Le)}else Ee=Se;return Ee}if(de.status==="done"&&de.vectorTile)return de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,re.subdivisionGranularity)})}abortTile(re){return m._(this,void 0,void 0,function*(){const ie=this.loading,de=re.uid;ie&&ie[de]&&ie[de].abort&&(ie[de].abort.abort(),delete ie[de])})}removeTile(re){return m._(this,void 0,void 0,function*(){this.loaded&&this.loaded[re.uid]&&delete this.loaded[re.uid]})}}class B{constructor(){this.loaded={}}loadTile(re){return m._(this,void 0,void 0,function*(){const{uid:ie,encoding:de,rawImageData:Se,redFactor:Ee,greenFactor:De,blueFactor:He,baseShift:Le}=re,ct=Se.width+2,St=Se.height+2,mt=m.b(Se)?new m.R({width:ct,height:St},yield m.cO(Se,-1,-1,ct,St)):Se,Bt=new m.cP(ie,mt,de,Ee,De,He,Le);return this.loaded=this.loaded||{},this.loaded[ie]=Bt,Bt})}removeTile(re){const ie=this.loaded,de=re.uid;ie&&ie[de]&&delete ie[de]}}var F,X,Z=function(){if(X)return F;function Ie(ie,de){if(ie.length!==0){re(ie[0],de);for(var Se=1;Se<ie.length;Se++)re(ie[Se],!de)}}function re(ie,de){for(var Se=0,Ee=0,De=0,He=ie.length,Le=He-1;De<He;Le=De++){var ct=(ie[De][0]-ie[Le][0])*(ie[Le][1]+ie[De][1]),St=Se+ct;Ee+=Math.abs(Se)>=Math.abs(ct)?Se-St+ct:ct-St+Se,Se=St}Se+Ee>=0!=!!de&&ie.reverse()}return X=1,F=function ie(de,Se){var Ee,De=de&&de.type;if(De==="FeatureCollection")for(Ee=0;Ee<de.features.length;Ee++)ie(de.features[Ee],Se);else if(De==="GeometryCollection")for(Ee=0;Ee<de.geometries.length;Ee++)ie(de.geometries[Ee],Se);else if(De==="Feature")ie(de.geometry,Se);else if(De==="Polygon")Ie(de.coordinates,Se);else if(De==="MultiPolygon")for(Ee=0;Ee<de.coordinates.length;Ee++)Ie(de.coordinates[Ee],Se);return de}}(),U=m.cQ(Z);class te extends m.cS{constructor(re,ie){super(new m.cM,0,ie,[],[]),this.feature=re,this.type=re.type,this.properties=re.tags?re.tags:{},"id"in re&&(typeof re.id=="string"?this.id=parseInt(re.id,10):typeof re.id!="number"||isNaN(re.id)||(this.id=re.id))}loadGeometry(){const re=[],ie=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const de of ie){const Se=[];for(const Ee of de)Se.push(new m.P(Ee[0],Ee[1]));re.push(Se)}return re}}class ae extends m.cR{constructor(re,ie){super(new m.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ie?ie.version:1,this.extent=ie?ie.extent:4096,this.length=re.length,this.features=re}feature(re){return new te(this.features[re],this.extent)}}function ne(Ie,re){re.writeVarintField(15,Ie.version||1),re.writeStringField(1,Ie.name||""),re.writeVarintField(5,Ie.extent||4096);const ie={keys:[],values:[],keycache:{},valuecache:{}};for(let Ee=0;Ee<Ie.length;Ee++)ie.feature=Ie.feature(Ee),re.writeMessage(2,ue,ie);const de=ie.keys;for(const Ee of de)re.writeStringField(3,Ee);const Se=ie.values;for(const Ee of Se)re.writeMessage(4,ke,Ee)}function ue(Ie,re){if(!Ie.feature)return;const ie=Ie.feature;ie.id!==void 0&&re.writeVarintField(1,ie.id),re.writeMessage(2,J,Ie),re.writeVarintField(3,ie.type),re.writeMessage(4,_e,ie)}function J(Ie,re){var ie;for(const de in(ie=Ie.feature)==null?void 0:ie.properties){let Se=Ie.feature.properties[de],Ee=Ie.keycache[de];if(Se===null)continue;Ee===void 0&&(Ie.keys.push(de),Ee=Ie.keys.length-1,Ie.keycache[de]=Ee),re.writeVarint(Ee),typeof Se!="string"&&typeof Se!="boolean"&&typeof Se!="number"&&(Se=JSON.stringify(Se));const De=typeof Se+":"+Se;let He=Ie.valuecache[De];He===void 0&&(Ie.values.push(Se),He=Ie.values.length-1,Ie.valuecache[De]=He),re.writeVarint(He)}}function oe(Ie,re){return(re<<3)+(7&Ie)}function me(Ie){return Ie<<1^Ie>>31}function _e(Ie,re){const ie=Ie.loadGeometry(),de=Ie.type;let Se=0,Ee=0;for(const De of ie){let He=1;de===1&&(He=De.length),re.writeVarint(oe(1,He));const Le=de===3?De.length-1:De.length;for(let ct=0;ct<Le;ct++){ct===1&&de!==1&&re.writeVarint(oe(2,Le-1));const St=De[ct].x-Se,mt=De[ct].y-Ee;re.writeVarint(me(St)),re.writeVarint(me(mt)),Se+=St,Ee+=mt}Ie.type===3&&re.writeVarint(oe(7,1))}}function ke(Ie,re){const ie=typeof Ie;ie==="string"?re.writeStringField(1,Ie):ie==="boolean"?re.writeBooleanField(7,Ie):ie==="number"&&(Ie%1!=0?re.writeDoubleField(3,Ie):Ie<0?re.writeSVarintField(6,Ie):re.writeVarintField(5,Ie))}const at={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ie=>Ie},ze=Math.fround||(Fe=new Float32Array(1),Ie=>(Fe[0]=+Ie,Fe[0]));var Fe;class tt{constructor(re){this.options=Object.assign(Object.create(at),re),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(re){const{log:ie,minZoom:de,maxZoom:Se}=this.options;ie&&console.time("total time");const Ee=`prepare ${re.length} points`;ie&&console.time(Ee),this.points=re;const De=[];for(let Le=0;Le<re.length;Le++){const ct=re[Le];if(!ct.geometry)continue;const[St,mt]=ct.geometry.coordinates,Bt=ze(Pe(St)),Zt=ze(Ve(mt));De.push(Bt,Zt,1/0,Le,-1,1),this.options.reduce&&De.push(0)}let He=this.trees[Se+1]=this._createTree(De);ie&&console.timeEnd(Ee);for(let Le=Se;Le>=de;Le--){const ct=+Date.now();He=this.trees[Le]=this._createTree(this._cluster(He,Le)),ie&&console.log("z%d: %d clusters in %dms",Le,He.numItems,+Date.now()-ct)}return ie&&console.timeEnd("total time"),this}getClusters(re,ie){let de=((re[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,re[1]));let Ee=re[2]===180?180:((re[2]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,re[3]));if(re[2]-re[0]>=360)de=-180,Ee=180;else if(de>Ee){const mt=this.getClusters([de,Se,180,De],ie),Bt=this.getClusters([-180,Se,Ee,De],ie);return mt.concat(Bt)}const He=this.trees[this._limitZoom(ie)],Le=He.range(Pe(de),Ve(De),Pe(Ee),Ve(Se)),ct=He.data,St=[];for(const mt of Le){const Bt=this.stride*mt;St.push(ct[Bt+5]>1?ut(ct,Bt,this.clusterProps):this.points[ct[Bt+3]])}return St}getChildren(re){const ie=this._getOriginId(re),de=this._getOriginZoom(re),Se="No cluster with the specified id.",Ee=this.trees[de];if(!Ee)throw new Error(Se);const De=Ee.data;if(ie*this.stride>=De.length)throw new Error(Se);const He=this.options.radius/(this.options.extent*Math.pow(2,de-1)),Le=Ee.within(De[ie*this.stride],De[ie*this.stride+1],He),ct=[];for(const St of Le){const mt=St*this.stride;De[mt+4]===re&&ct.push(De[mt+5]>1?ut(De,mt,this.clusterProps):this.points[De[mt+3]])}if(ct.length===0)throw new Error(Se);return ct}getLeaves(re,ie,de){const Se=[];return this._appendLeaves(Se,re,ie=ie||10,de=de||0,0),Se}getTile(re,ie,de){const Se=this.trees[this._limitZoom(re)],Ee=Math.pow(2,re),{extent:De,radius:He}=this.options,Le=He/De,ct=(de-Le)/Ee,St=(de+1+Le)/Ee,mt={features:[]};return this._addTileFeatures(Se.range((ie-Le)/Ee,ct,(ie+1+Le)/Ee,St),Se.data,ie,de,Ee,mt),ie===0&&this._addTileFeatures(Se.range(1-Le/Ee,ct,1,St),Se.data,Ee,de,Ee,mt),ie===Ee-1&&this._addTileFeatures(Se.range(0,ct,Le/Ee,St),Se.data,-1,de,Ee,mt),mt.features.length?mt:null}getClusterExpansionZoom(re){let ie=this._getOriginZoom(re)-1;for(;ie<=this.options.maxZoom;){const de=this.getChildren(re);if(ie++,de.length!==1)break;re=de[0].properties.cluster_id}return ie}_appendLeaves(re,ie,de,Se,Ee){const De=this.getChildren(ie);for(const He of De){const Le=He.properties;if(Le&&Le.cluster?Ee+Le.point_count<=Se?Ee+=Le.point_count:Ee=this._appendLeaves(re,Le.cluster_id,de,Se,Ee):Ee<Se?Ee++:re.push(He),re.length===de)break}return Ee}_createTree(re){const ie=new m.aI(re.length/this.stride|0,this.options.nodeSize,Float32Array);for(let de=0;de<re.length;de+=this.stride)ie.add(re[de],re[de+1]);return ie.finish(),ie.data=re,ie}_addTileFeatures(re,ie,de,Se,Ee,De){for(const He of re){const Le=He*this.stride,ct=ie[Le+5]>1;let St,mt,Bt;if(ct)St=rt(ie,Le,this.clusterProps),mt=ie[Le],Bt=ie[Le+1];else{const Cr=this.points[ie[Le+3]];St=Cr.properties;const[qr,Ft]=Cr.geometry.coordinates;mt=Pe(qr),Bt=Ve(Ft)}const Zt={type:1,geometry:[[Math.round(this.options.extent*(mt*Ee-de)),Math.round(this.options.extent*(Bt*Ee-Se))]],tags:St};let Ue;Ue=ct||this.options.generateId?ie[Le+3]:this.points[ie[Le+3]].id,Ue!==void 0&&(Zt.id=Ue),De.features.push(Zt)}}_limitZoom(re){return Math.max(this.options.minZoom,Math.min(Math.floor(+re),this.options.maxZoom+1))}_cluster(re,ie){const{radius:de,extent:Se,reduce:Ee,minPoints:De}=this.options,He=de/(Se*Math.pow(2,ie)),Le=re.data,ct=[],St=this.stride;for(let mt=0;mt<Le.length;mt+=St){if(Le[mt+2]<=ie)continue;Le[mt+2]=ie;const Bt=Le[mt],Zt=Le[mt+1],Ue=re.within(Le[mt],Le[mt+1],He),Cr=Le[mt+5];let qr=Cr;for(const Ft of Ue){const Pr=Ft*St;Le[Pr+2]>ie&&(qr+=Le[Pr+5])}if(qr>Cr&&qr>=De){let Ft,Pr=Bt*Cr,Jn=Zt*Cr,ci=-1;const hn=(mt/St<<5)+(ie+1)+this.points.length;for(const Zr of Ue){const Tr=Zr*St;if(Le[Tr+2]<=ie)continue;Le[Tr+2]=ie;const An=Le[Tr+5];Pr+=Le[Tr]*An,Jn+=Le[Tr+1]*An,Le[Tr+4]=hn,Ee&&(Ft||(Ft=this._map(Le,mt,!0),ci=this.clusterProps.length,this.clusterProps.push(Ft)),Ee(Ft,this._map(Le,Tr)))}Le[mt+4]=hn,ct.push(Pr/qr,Jn/qr,1/0,hn,-1,qr),Ee&&ct.push(ci)}else{for(let Ft=0;Ft<St;Ft++)ct.push(Le[mt+Ft]);if(qr>1)for(const Ft of Ue){const Pr=Ft*St;if(!(Le[Pr+2]<=ie)){Le[Pr+2]=ie;for(let Jn=0;Jn<St;Jn++)ct.push(Le[Pr+Jn])}}}}return ct}_getOriginId(re){return re-this.points.length>>5}_getOriginZoom(re){return(re-this.points.length)%32}_map(re,ie,de){if(re[ie+5]>1){const De=this.clusterProps[re[ie+6]];return de?Object.assign({},De):De}const Se=this.points[re[ie+3]].properties,Ee=this.options.map(Se);return de&&Ee===Se?Object.assign({},Ee):Ee}}function ut(Ie,re,ie){return{type:"Feature",id:Ie[re+3],properties:rt(Ie,re,ie),geometry:{type:"Point",coordinates:[(de=Ie[re],360*(de-.5)),Ge(Ie[re+1])]}};var de}function rt(Ie,re,ie){const de=Ie[re+5],Se=de>=1e4?`${Math.round(de/1e3)}k`:de>=1e3?Math.round(de/100)/10+"k":de,Ee=Ie[re+6],De=Ee===-1?{}:Object.assign({},ie[Ee]);return Object.assign(De,{cluster:!0,cluster_id:Ie[re+3],point_count:de,point_count_abbreviated:Se})}function Pe(Ie){return Ie/360+.5}function Ve(Ie){const re=Math.sin(Ie*Math.PI/180),ie=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ie<0?0:ie>1?1:ie}function Ge(Ie){const re=(180-360*Ie)*Math.PI/180;return 360*Math.atan(Math.exp(re))/Math.PI-90}function ht(Ie,re,ie,de){let Se=de;const Ee=re+(ie-re>>1);let De,He=ie-re;const Le=Ie[re],ct=Ie[re+1],St=Ie[ie],mt=Ie[ie+1];for(let Bt=re+3;Bt<ie;Bt+=3){const Zt=be(Ie[Bt],Ie[Bt+1],Le,ct,St,mt);if(Zt>Se)De=Bt,Se=Zt;else if(Zt===Se){const Ue=Math.abs(Bt-Ee);Ue<He&&(De=Bt,He=Ue)}}Se>de&&(De-re>3&&ht(Ie,re,De,de),Ie[De+2]=Se,ie-De>3&&ht(Ie,De,ie,de))}function be(Ie,re,ie,de,Se,Ee){let De=Se-ie,He=Ee-de;if(De!==0||He!==0){const Le=((Ie-ie)*De+(re-de)*He)/(De*De+He*He);Le>1?(ie=Se,de=Ee):Le>0&&(ie+=De*Le,de+=He*Le)}return De=Ie-ie,He=re-de,De*De+He*He}function Xe(Ie,re,ie,de){const Se={id:Ie??null,type:re,geometry:ie,tags:de,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(re==="Point"||re==="MultiPoint"||re==="LineString")ot(Se,ie);else if(re==="Polygon")ot(Se,ie[0]);else if(re==="MultiLineString")for(const Ee of ie)ot(Se,Ee);else if(re==="MultiPolygon")for(const Ee of ie)ot(Se,Ee[0]);return Se}function ot(Ie,re){for(let ie=0;ie<re.length;ie+=3)Ie.minX=Math.min(Ie.minX,re[ie]),Ie.minY=Math.min(Ie.minY,re[ie+1]),Ie.maxX=Math.max(Ie.maxX,re[ie]),Ie.maxY=Math.max(Ie.maxY,re[ie+1])}function st(Ie,re,ie,de){if(!re.geometry)return;const Se=re.geometry.coordinates;if(Se&&Se.length===0)return;const Ee=re.geometry.type,De=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2);let He=[],Le=re.id;if(ie.promoteId?Le=re.properties[ie.promoteId]:ie.generateId&&(Le=de||0),Ee==="Point")Pt(Se,He);else if(Ee==="MultiPoint")for(const ct of Se)Pt(ct,He);else if(Ee==="LineString")Vt(Se,He,De,!1);else if(Ee==="MultiLineString"){if(ie.lineMetrics){for(const ct of Se)He=[],Vt(ct,He,De,!1),Ie.push(Xe(Le,"LineString",He,re.properties));return}Rt(Se,He,De,!1)}else if(Ee==="Polygon")Rt(Se,He,De,!0);else{if(Ee!=="MultiPolygon"){if(Ee==="GeometryCollection"){for(const ct of re.geometry.geometries)st(Ie,{id:Le,geometry:ct,properties:re.properties},ie,de);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const ct of Se){const St=[];Rt(ct,St,De,!0),He.push(St)}}Ie.push(Xe(Le,Ee,He,re.properties))}function Pt(Ie,re){re.push(mr(Ie[0]),nr(Ie[1]),0)}function Vt(Ie,re,ie,de){let Se,Ee,De=0;for(let Le=0;Le<Ie.length;Le++){const ct=mr(Ie[Le][0]),St=nr(Ie[Le][1]);re.push(ct,St,0),Le>0&&(De+=de?(Se*St-ct*Ee)/2:Math.sqrt(Math.pow(ct-Se,2)+Math.pow(St-Ee,2))),Se=ct,Ee=St}const He=re.length-3;re[2]=1,ht(re,0,He,ie),re[He+2]=1,re.size=Math.abs(De),re.start=0,re.end=re.size}function Rt(Ie,re,ie,de){for(let Se=0;Se<Ie.length;Se++){const Ee=[];Vt(Ie[Se],Ee,ie,de),re.push(Ee)}}function mr(Ie){return Ie/360+.5}function nr(Ie){const re=Math.sin(Ie*Math.PI/180),ie=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ie<0?0:ie>1?1:ie}function Ot(Ie,re,ie,de,Se,Ee,De,He){if(de/=re,Ee>=(ie/=re)&&De<de)return Ie;if(De<ie||Ee>=de)return null;const Le=[];for(const ct of Ie){const St=ct.geometry;let mt=ct.type;const Bt=Se===0?ct.minX:ct.minY,Zt=Se===0?ct.maxX:ct.maxY;if(Bt>=ie&&Zt<de){Le.push(ct);continue}if(Zt<ie||Bt>=de)continue;let Ue=[];if(mt==="Point"||mt==="MultiPoint")er(St,Ue,ie,de,Se);else if(mt==="LineString")ir(St,Ue,ie,de,Se,!1,He.lineMetrics);else if(mt==="MultiLineString")hr(St,Ue,ie,de,Se,!1);else if(mt==="Polygon")hr(St,Ue,ie,de,Se,!0);else if(mt==="MultiPolygon")for(const Cr of St){const qr=[];hr(Cr,qr,ie,de,Se,!0),qr.length&&Ue.push(qr)}if(Ue.length){if(He.lineMetrics&&mt==="LineString"){for(const Cr of Ue)Le.push(Xe(ct.id,mt,Cr,ct.tags));continue}mt!=="LineString"&&mt!=="MultiLineString"||(Ue.length===1?(mt="LineString",Ue=Ue[0]):mt="MultiLineString"),mt!=="Point"&&mt!=="MultiPoint"||(mt=Ue.length===3?"Point":"MultiPoint"),Le.push(Xe(ct.id,mt,Ue,ct.tags))}}return Le.length?Le:null}function er(Ie,re,ie,de,Se){for(let Ee=0;Ee<Ie.length;Ee+=3){const De=Ie[Ee+Se];De>=ie&&De<=de&&Qt(re,Ie[Ee],Ie[Ee+1],Ie[Ee+2])}}function ir(Ie,re,ie,de,Se,Ee,De){let He=_t(Ie);const Le=Se===0?Yr:tn;let ct,St,mt=Ie.start;for(let qr=0;qr<Ie.length-3;qr+=3){const Ft=Ie[qr],Pr=Ie[qr+1],Jn=Ie[qr+2],ci=Ie[qr+3],hn=Ie[qr+4],Zr=Se===0?Ft:Pr,Tr=Se===0?ci:hn;let An=!1;De&&(ct=Math.sqrt(Math.pow(Ft-ci,2)+Math.pow(Pr-hn,2))),Zr<ie?Tr>ie&&(St=Le(He,Ft,Pr,ci,hn,ie),De&&(He.start=mt+ct*St)):Zr>de?Tr<de&&(St=Le(He,Ft,Pr,ci,hn,de),De&&(He.start=mt+ct*St)):Qt(He,Ft,Pr,Jn),Tr<ie&&Zr>=ie&&(St=Le(He,Ft,Pr,ci,hn,ie),An=!0),Tr>de&&Zr<=de&&(St=Le(He,Ft,Pr,ci,hn,de),An=!0),!Ee&&An&&(De&&(He.end=mt+ct*St),re.push(He),He=_t(Ie)),De&&(mt+=ct)}let Bt=Ie.length-3;const Zt=Ie[Bt],Ue=Ie[Bt+1],Cr=Se===0?Zt:Ue;Cr>=ie&&Cr<=de&&Qt(He,Zt,Ue,Ie[Bt+2]),Bt=He.length-3,Ee&&Bt>=3&&(He[Bt]!==He[0]||He[Bt+1]!==He[1])&&Qt(He,He[0],He[1],He[2]),He.length&&re.push(He)}function _t(Ie){const re=[];return re.size=Ie.size,re.start=Ie.start,re.end=Ie.end,re}function hr(Ie,re,ie,de,Se,Ee){for(const De of Ie)ir(De,re,ie,de,Se,Ee,!1)}function Qt(Ie,re,ie,de){Ie.push(re,ie,de)}function Yr(Ie,re,ie,de,Se,Ee){const De=(Ee-re)/(de-re);return Qt(Ie,Ee,ie+(Se-ie)*De,1),De}function tn(Ie,re,ie,de,Se,Ee){const De=(Ee-ie)/(Se-ie);return Qt(Ie,re+(de-re)*De,Ee,1),De}function Kr(Ie,re){const ie=[];for(let de=0;de<Ie.length;de++){const Se=Ie[de],Ee=Se.type;let De;if(Ee==="Point"||Ee==="MultiPoint"||Ee==="LineString")De=Oi(Se.geometry,re);else if(Ee==="MultiLineString"||Ee==="Polygon"){De=[];for(const He of Se.geometry)De.push(Oi(He,re))}else if(Ee==="MultiPolygon"){De=[];for(const He of Se.geometry){const Le=[];for(const ct of He)Le.push(Oi(ct,re));De.push(Le)}}ie.push(Xe(Se.id,Ee,De,Se.tags))}return ie}function Oi(Ie,re){const ie=[];ie.size=Ie.size,Ie.start!==void 0&&(ie.start=Ie.start,ie.end=Ie.end);for(let de=0;de<Ie.length;de+=3)ie.push(Ie[de]+re,Ie[de+1],Ie[de+2]);return ie}function Xn(Ie,re){if(Ie.transformed)return Ie;const ie=1<<Ie.z,de=Ie.x,Se=Ie.y;for(const Ee of Ie.features){const De=Ee.geometry,He=Ee.type;if(Ee.geometry=[],He===1)for(let Le=0;Le<De.length;Le+=2)Ee.geometry.push(Ba(De[Le],De[Le+1],re,ie,de,Se));else for(let Le=0;Le<De.length;Le++){const ct=[];for(let St=0;St<De[Le].length;St+=2)ct.push(Ba(De[Le][St],De[Le][St+1],re,ie,de,Se));Ee.geometry.push(ct)}}return Ie.transformed=!0,Ie}function Ba(Ie,re,ie,de,Se,Ee){return[Math.round(ie*(Ie*de-Se)),Math.round(ie*(re*de-Ee))]}function Ii(Ie,re,ie,de,Se){const Ee=re===Se.maxZoom?0:Se.tolerance/((1<<re)*Se.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:Ie.length,source:null,x:ie,y:de,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const He of Ie)ki(De,He,Ee,Se);return De}function ki(Ie,re,ie,de){const Se=re.geometry,Ee=re.type,De=[];if(Ie.minX=Math.min(Ie.minX,re.minX),Ie.minY=Math.min(Ie.minY,re.minY),Ie.maxX=Math.max(Ie.maxX,re.maxX),Ie.maxY=Math.max(Ie.maxY,re.maxY),Ee==="Point"||Ee==="MultiPoint")for(let He=0;He<Se.length;He+=3)De.push(Se[He],Se[He+1]),Ie.numPoints++,Ie.numSimplified++;else if(Ee==="LineString")Wi(De,Se,Ie,ie,!1,!1);else if(Ee==="MultiLineString"||Ee==="Polygon")for(let He=0;He<Se.length;He++)Wi(De,Se[He],Ie,ie,Ee==="Polygon",He===0);else if(Ee==="MultiPolygon")for(let He=0;He<Se.length;He++){const Le=Se[He];for(let ct=0;ct<Le.length;ct++)Wi(De,Le[ct],Ie,ie,!0,ct===0)}if(De.length){let He=re.tags||null;if(Ee==="LineString"&&de.lineMetrics){He={};for(const ct in re.tags)He[ct]=re.tags[ct];He.mapbox_clip_start=Se.start/Se.size,He.mapbox_clip_end=Se.end/Se.size}const Le={geometry:De,type:Ee==="Polygon"||Ee==="MultiPolygon"?3:Ee==="LineString"||Ee==="MultiLineString"?2:1,tags:He};re.id!==null&&(Le.id=re.id),Ie.features.push(Le)}}function Wi(Ie,re,ie,de,Se,Ee){const De=de*de;if(de>0&&re.size<(Se?De:de))return void(ie.numPoints+=re.length/3);const He=[];for(let Le=0;Le<re.length;Le+=3)(de===0||re[Le+2]>De)&&(ie.numSimplified++,He.push(re[Le],re[Le+1])),ie.numPoints++;Se&&function(Le,ct){let St=0;for(let mt=0,Bt=Le.length,Zt=Bt-2;mt<Bt;Zt=mt,mt+=2)St+=(Le[mt]-Le[Zt])*(Le[mt+1]+Le[Zt+1]);if(St>0===ct)for(let mt=0,Bt=Le.length;mt<Bt/2;mt+=2){const Zt=Le[mt],Ue=Le[mt+1];Le[mt]=Le[Bt-2-mt],Le[mt+1]=Le[Bt-1-mt],Le[Bt-2-mt]=Zt,Le[Bt-1-mt]=Ue}}(He,Ee),Ie.push(He)}const Mo={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ts{constructor(re,ie){const de=(ie=this.options=function(Ee,De){for(const He in De)Ee[He]=De[He];return Ee}(Object.create(Mo),ie)).debug;if(de&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");let Se=function(Ee,De){const He=[];if(Ee.type==="FeatureCollection")for(let Le=0;Le<Ee.features.length;Le++)st(He,Ee.features[Le],De,Le);else st(He,Ee.type==="Feature"?Ee:{geometry:Ee},De);return He}(re,ie);this.tiles={},this.tileCoords=[],de&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Se=function(Ee,De){const He=De.buffer/De.extent;let Le=Ee;const ct=Ot(Ee,1,-1-He,He,0,-1,2,De),St=Ot(Ee,1,1-He,2+He,0,-1,2,De);return(ct||St)&&(Le=Ot(Ee,1,-He,1+He,0,-1,2,De)||[],ct&&(Le=Kr(ct,1).concat(Le)),St&&(Le=Le.concat(Kr(St,-1)))),Le}(Se,ie),Se.length&&this.splitTile(Se,0,0,0),de&&(Se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(re,ie,de,Se,Ee,De,He){const Le=[re,ie,de,Se],ct=this.options,St=ct.debug;for(;Le.length;){Se=Le.pop(),de=Le.pop(),ie=Le.pop(),re=Le.pop();const mt=1<<ie,Bt=zi(ie,de,Se);let Zt=this.tiles[Bt];if(!Zt&&(St>1&&console.time("creation"),Zt=this.tiles[Bt]=Ii(re,ie,de,Se,ct),this.tileCoords.push({z:ie,x:de,y:Se}),St)){St>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,de,Se,Zt.numFeatures,Zt.numPoints,Zt.numSimplified),console.timeEnd("creation"));const An=`z${ie}`;this.stats[An]=(this.stats[An]||0)+1,this.total++}if(Zt.source=re,Ee==null){if(ie===ct.indexMaxZoom||Zt.numPoints<=ct.indexMaxPoints)continue}else{if(ie===ct.maxZoom||ie===Ee)continue;if(Ee!=null){const An=Ee-ie;if(de!==De>>An||Se!==He>>An)continue}}if(Zt.source=null,re.length===0)continue;St>1&&console.time("clipping");const Ue=.5*ct.buffer/ct.extent,Cr=.5-Ue,qr=.5+Ue,Ft=1+Ue;let Pr=null,Jn=null,ci=null,hn=null,Zr=Ot(re,mt,de-Ue,de+qr,0,Zt.minX,Zt.maxX,ct),Tr=Ot(re,mt,de+Cr,de+Ft,0,Zt.minX,Zt.maxX,ct);re=null,Zr&&(Pr=Ot(Zr,mt,Se-Ue,Se+qr,1,Zt.minY,Zt.maxY,ct),Jn=Ot(Zr,mt,Se+Cr,Se+Ft,1,Zt.minY,Zt.maxY,ct),Zr=null),Tr&&(ci=Ot(Tr,mt,Se-Ue,Se+qr,1,Zt.minY,Zt.maxY,ct),hn=Ot(Tr,mt,Se+Cr,Se+Ft,1,Zt.minY,Zt.maxY,ct),Tr=null),St>1&&console.timeEnd("clipping"),Le.push(Pr||[],ie+1,2*de,2*Se),Le.push(Jn||[],ie+1,2*de,2*Se+1),Le.push(ci||[],ie+1,2*de+1,2*Se),Le.push(hn||[],ie+1,2*de+1,2*Se+1)}}getTile(re,ie,de){re=+re,ie=+ie,de=+de;const Se=this.options,{extent:Ee,debug:De}=Se;if(re<0||re>24)return null;const He=1<<re,Le=zi(re,ie=ie+He&He-1,de);if(this.tiles[Le])return Xn(this.tiles[Le],Ee);De>1&&console.log("drilling down to z%d-%d-%d",re,ie,de);let ct,St=re,mt=ie,Bt=de;for(;!ct&&St>0;)St--,mt>>=1,Bt>>=1,ct=this.tiles[zi(St,mt,Bt)];return ct&&ct.source?(De>1&&(console.log("found parent tile z%d-%d-%d",St,mt,Bt),console.time("drilling down")),this.splitTile(ct.source,St,mt,Bt,re,ie,de),De>1&&console.timeEnd("drilling down"),this.tiles[Le]?Xn(this.tiles[Le],Ee):null):null}}function zi(Ie,re,ie){return 32*((1<<Ie)*ie+re)+Ie}class Qn extends O{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(re,ie){return m._(this,void 0,void 0,function*(){const de=re.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Se=this._geoJSONIndex.getTile(de.z,de.x,de.y);if(!Se)return null;const Ee=new ae(Se.features,{version:2,extent:m.$});let De=function(He){const Le=new m.cM;return function(ct,St){for(const mt in ct.layers)St.writeMessage(3,ne,ct.layers[mt])}(He,Le),Le.finish()}(Ee);return De.byteOffset===0&&De.byteLength===De.buffer.byteLength||(De=new Uint8Array(De)),{vectorTile:Ee,rawData:De.buffer}})}loadData(re){return m._(this,void 0,void 0,function*(){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.abort();const de=!!(re&&re.request&&re.request.collectResourceTiming)&&new m.cN(re.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(re,this._pendingRequest);const Se=yield this._pendingData;this._geoJSONIndex=re.cluster?new tt(function({superclusterOptions:De,clusterProperties:He}){if(!He||!De)return De;const Le={},ct={},St={accumulated:null,zoom:0},mt={properties:null},Bt=Object.keys(He);for(const Zt of Bt){const[Ue,Cr]=He[Zt],qr=m.cT(Cr),Ft=m.cT(typeof Ue=="string"?[Ue,["accumulated"],["get",Zt]]:Ue);Le[Zt]=qr.value,ct[Zt]=Ft.value}return De.map=Zt=>{mt.properties=Zt;const Ue={};for(const Cr of Bt)Ue[Cr]=Le[Cr].evaluate(St,mt);return Ue},De.reduce=(Zt,Ue)=>{mt.properties=Ue;for(const Cr of Bt)St.accumulated=Zt[Cr],Zt[Cr]=ct[Cr].evaluate(St,mt)},De}(re)).load(Se.features):function(De,He){return new Ts(De,He)}(Se,re.geojsonVtOptions),this.loaded={};const Ee={data:Se};if(de){const De=de.finish();De&&(Ee.resourceTiming={},Ee.resourceTiming[re.source]=JSON.parse(JSON.stringify(De)))}return Ee}catch(Se){if(delete this._pendingRequest,m.cy(Se))return{abandoned:!0};throw Se}})}getData(){return m._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(re){const ie=this.loaded;return ie&&ie[re.uid]?super.reloadTile(re):this.loadTile(re)}loadAndProcessGeoJSON(re,ie){return m._(this,void 0,void 0,function*(){let de=yield this.loadGeoJSON(re,ie);if(delete this._pendingRequest,typeof de!="object")throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`);if(U(de,!0),re.filter){const Se=m.cT(re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Se.result==="error")throw new Error(Se.value.map(De=>`${De.key}: ${De.message}`).join(", "));de={type:"FeatureCollection",features:de.features.filter(De=>Se.value.evaluate({zoom:0},De))}}return de})}loadGeoJSON(re,ie){return m._(this,void 0,void 0,function*(){const{promoteId:de}=re;if(re.request){const Se=yield m.j(re.request,ie);return this._dataUpdateable=m.cV(Se.data,de)?m.cU(Se.data,de):void 0,Se.data}if(typeof re.data=="string")try{const Se=JSON.parse(re.data);return this._dataUpdateable=m.cV(Se,de)?m.cU(Se,de):void 0,Se}catch{throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`)}if(!re.dataDiff)throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${re.source}`);return m.cW(this._dataUpdateable,re.dataDiff,de),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(re){return m._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(re){return this._geoJSONIndex.getClusterExpansionZoom(re.clusterId)}getClusterChildren(re){return this._geoJSONIndex.getChildren(re.clusterId)}getClusterLeaves(re){return this._geoJSONIndex.getLeaves(re.clusterId,re.limit,re.offset)}}class li{constructor(re){this.self=re,this.actor=new m.J(re),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ie,de)=>{if(this.externalWorkerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.externalWorkerSourceTypes[ie]=de},this.self.addProtocol=m.cA,this.self.removeProtocol=m.cB,this.self.registerRTLTextPlugin=ie=>{m.cX.setMethods(ie)},this.actor.registerMessageHandler("LDT",(ie,de)=>this._getDEMWorkerSource(ie,de.source).loadTile(de)),this.actor.registerMessageHandler("RDT",(ie,de)=>m._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ie,de.source).removeTile(de)})),this.actor.registerMessageHandler("GCEZ",(ie,de)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,de.type,de.source).getClusterExpansionZoom(de)})),this.actor.registerMessageHandler("GCC",(ie,de)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,de.type,de.source).getClusterChildren(de)})),this.actor.registerMessageHandler("GCL",(ie,de)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,de.type,de.source).getClusterLeaves(de)})),this.actor.registerMessageHandler("LD",(ie,de)=>this._getWorkerSource(ie,de.type,de.source).loadData(de)),this.actor.registerMessageHandler("GD",(ie,de)=>this._getWorkerSource(ie,de.type,de.source).getData()),this.actor.registerMessageHandler("LT",(ie,de)=>this._getWorkerSource(ie,de.type,de.source).loadTile(de)),this.actor.registerMessageHandler("RT",(ie,de)=>this._getWorkerSource(ie,de.type,de.source).reloadTile(de)),this.actor.registerMessageHandler("AT",(ie,de)=>this._getWorkerSource(ie,de.type,de.source).abortTile(de)),this.actor.registerMessageHandler("RMT",(ie,de)=>this._getWorkerSource(ie,de.type,de.source).removeTile(de)),this.actor.registerMessageHandler("RS",(ie,de)=>m._(this,void 0,void 0,function*(){if(!this.workerSources[ie]||!this.workerSources[ie][de.type]||!this.workerSources[ie][de.type][de.source])return;const Se=this.workerSources[ie][de.type][de.source];delete this.workerSources[ie][de.type][de.source],Se.removeSource!==void 0&&Se.removeSource(de)})),this.actor.registerMessageHandler("RM",ie=>m._(this,void 0,void 0,function*(){delete this.layerIndexes[ie],delete this.availableImages[ie],delete this.workerSources[ie],delete this.demWorkerSources[ie],this.globalStates.delete(ie)})),this.actor.registerMessageHandler("SR",(ie,de)=>m._(this,void 0,void 0,function*(){this.referrer=de})),this.actor.registerMessageHandler("SRPS",(ie,de)=>this._syncRTLPluginState(ie,de)),this.actor.registerMessageHandler("IS",(ie,de)=>m._(this,void 0,void 0,function*(){this.self.importScripts(de)})),this.actor.registerMessageHandler("SI",(ie,de)=>this._setImages(ie,de)),this.actor.registerMessageHandler("UL",(ie,de)=>m._(this,void 0,void 0,function*(){this._getLayerIndex(ie).update(de.layers,de.removedIds,this._getGlobalState(ie))})),this.actor.registerMessageHandler("UGS",(ie,de)=>m._(this,void 0,void 0,function*(){const Se=this._getGlobalState(ie);for(const Ee in de)Se[Ee]=de[Ee]})),this.actor.registerMessageHandler("SL",(ie,de)=>m._(this,void 0,void 0,function*(){this._getLayerIndex(ie).replace(de,this._getGlobalState(ie))}))}_getGlobalState(re){let ie=this.globalStates.get(re);return ie||(ie={},this.globalStates.set(re,ie)),ie}_setImages(re,ie){return m._(this,void 0,void 0,function*(){this.availableImages[re]=ie;for(const de in this.workerSources[re]){const Se=this.workerSources[re][de];for(const Ee in Se)Se[Ee].availableImages=ie}})}_syncRTLPluginState(re,ie){return m._(this,void 0,void 0,function*(){return yield m.cX.syncState(ie,this.self.importScripts)})}_getAvailableImages(re){let ie=this.availableImages[re];return ie||(ie=[]),ie}_getLayerIndex(re){let ie=this.layerIndexes[re];return ie||(ie=this.layerIndexes[re]=new c),ie}_getWorkerSource(re,ie,de){if(this.workerSources[re]||(this.workerSources[re]={}),this.workerSources[re][ie]||(this.workerSources[re][ie]={}),!this.workerSources[re][ie][de]){const Se={sendAsync:(Ee,De)=>(Ee.targetMapId=re,this.actor.sendAsync(Ee,De))};switch(ie){case"vector":this.workerSources[re][ie][de]=new O(Se,this._getLayerIndex(re),this._getAvailableImages(re));break;case"geojson":this.workerSources[re][ie][de]=new Qn(Se,this._getLayerIndex(re),this._getAvailableImages(re));break;default:this.workerSources[re][ie][de]=new this.externalWorkerSourceTypes[ie](Se,this._getLayerIndex(re),this._getAvailableImages(re))}}return this.workerSources[re][ie][de]}_getDEMWorkerSource(re,ie){return this.demWorkerSources[re]||(this.demWorkerSources[re]={}),this.demWorkerSources[re][ie]||(this.demWorkerSources[re][ie]=new B),this.demWorkerSources[re][ie]}}return m.i(self)&&(self.worker=new li(self)),li}),f("index",["exports","./shared"],function(m,c){var M="5.9.0";function C(){var b=new c.A(4);return c.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}let D,O;const B={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(b,r,u){const p=requestAnimationFrame(w=>{_(),r(w)}),{unsubscribe:_}=c.s(b.signal,"abort",()=>{_(),cancelAnimationFrame(p),u(c.c())},!1)},frameAsync(b){return new Promise((r,u)=>{this.frame(b,r,u)})},getImageData(b,r=0){return this.getImageCanvasContext(b).getImageData(-r,-r,b.width+2*r,b.height+2*r)},getImageCanvasContext(b){const r=window.document.createElement("canvas"),u=r.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return r.width=b.width,r.height=b.height,u.drawImage(b,0,0,b.width,b.height),u},resolveURL:b=>(D||(D=document.createElement("a")),D.href=b,D.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(O==null&&(O=matchMedia("(prefers-reduced-motion: reduce)")),O.matches)}};class F{static testProp(r){if(!F.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in F.docStyle)return r[u];return r[0]}static create(r,u,p){const _=window.document.createElement(r);return u!==void 0&&(_.className=u),p&&p.appendChild(_),_}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){F.docStyle&&F.selectProp&&(F.userSelect=F.docStyle[F.selectProp],F.docStyle[F.selectProp]="none")}static enableDrag(){F.docStyle&&F.selectProp&&(F.docStyle[F.selectProp]=F.userSelect)}static setTransform(r,u){r.style[F.transformProp]=u}static addEventListener(r,u,p,_={}){r.addEventListener(u,p,"passive"in _?_:_.capture)}static removeEventListener(r,u,p,_={}){r.removeEventListener(u,p,"passive"in _?_:_.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",F.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",F.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",F.suppressClickInternal,!0)},0)}static getScale(r){const u=r.getBoundingClientRect();return{x:u.width/r.offsetWidth||1,y:u.height/r.offsetHeight||1,boundingClientRect:u}}static getPoint(r,u,p){const _=u.boundingClientRect;return new c.P((p.clientX-_.left)/u.x-r.clientLeft,(p.clientY-_.top)/u.y-r.clientTop)}static mousePos(r,u){const p=F.getScale(r);return F.getPoint(r,p,u)}static touchPos(r,u){const p=[],_=F.getScale(r);for(let w=0;w<u.length;w++)p.push(F.getPoint(r,_,u[w]));return p}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const u=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),p=u.querySelectorAll("script");for(const _ of p)_.remove();return F.clean(u),u.innerHTML}static isPossiblyDangerous(r,u){const p=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!p.includes("javascript:")&&!p.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const u=r.children;for(const p of u)F.removeAttributes(p),F.clean(p)}static removeAttributes(r){for(const{name:u,value:p}of r.attributes)F.isPossiblyDangerous(u,p)&&r.removeAttribute(u)}}F.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,F.selectProp=F.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),F.transformProp=F.testProp(["transform","WebkitTransform"]);const X={supported:!1,testSupport:function(b){!te&&U&&(ae?ne(b):Z=b)}};let Z,U,te=!1,ae=!1;function ne(b){const r=b.createTexture();b.bindTexture(b.TEXTURE_2D,r);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,U),b.isContextLost())return;X.supported=!0}catch{}b.deleteTexture(r),te=!0}var ue;typeof document<"u"&&(U=document.createElement("img"),U.onload=()=>{Z&&ne(Z),Z=null,ae=!0},U.onerror=()=>{te=!0,Z=null},U.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(b){let r,u,p,_;b.resetRequestQueue=()=>{r=[],u=0,p=0,_={}},b.addThrottleControl=z=>{const $=p++;return _[$]=z,$},b.removeThrottleControl=z=>{delete _[z],A()},b.getImage=(z,$,q=!0)=>new Promise((H,G)=>{X.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*"),c.e(z,{type:"image"}),r.push({abortController:$,requestParameters:z,supportImageRefresh:q,state:"queued",onError:Q=>{G(Q)},onSuccess:Q=>{H(Q)}}),A()});const w=z=>c._(this,void 0,void 0,function*(){z.state="running";const{requestParameters:$,supportImageRefresh:q,onError:H,onSuccess:G,abortController:Q}=z,se=q===!1&&!c.i(self)&&!c.g($.url)&&(!$.headers||Object.keys($.headers).reduce((ge,ve)=>ge&&ve==="accept",!0));u++;const pe=se?k($,Q):c.m($,Q);try{const ge=yield pe;delete z.abortController,z.state="completed",ge.data instanceof HTMLImageElement||c.b(ge.data)?G(ge):ge.data&&G({data:yield(fe=ge.data,typeof createImageBitmap=="function"?c.f(fe):c.h(fe)),cacheControl:ge.cacheControl,expires:ge.expires})}catch(ge){delete z.abortController,H(ge)}finally{u--,A()}var fe}),A=()=>{const z=(()=>{for(const $ of Object.keys(_))if(_[$]())return!0;return!1})()?c.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let $=u;$<z&&r.length>0;$++){const q=r.shift();q.abortController.signal.aborted?$--:w(q)}},k=(z,$)=>new Promise((q,H)=>{const G=new Image,Q=z.url,se=z.credentials;se&&se==="include"?G.crossOrigin="use-credentials":(se&&se==="same-origin"||!c.d(Q))&&(G.crossOrigin="anonymous"),$.signal.addEventListener("abort",()=>{G.src="",H(c.c())}),G.fetchPriority="high",G.onload=()=>{G.onerror=G.onload=null,q({data:G})},G.onerror=()=>{G.onerror=G.onload=null,$.signal.aborted||H(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},G.src=Q})}(ue||(ue={})),ue.resetRequestQueue();class J{constructor(r){this._transformRequestFn=r??null}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function oe(b){const r=[];if(typeof b=="string")r.push({id:"default",url:b});else if(b&&b.length>0){const u=[];for(const{id:p,url:_}of b){const w=`${p}${_}`;u.indexOf(w)===-1&&(u.push(w),r.push({id:p,url:_}))}}return r}function me(b,r,u){try{const p=new URL(b);return p.pathname+=`${r}${u}`,p.toString()}catch{throw new Error(`Invalid sprite URL "${b}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function _e(b){const{userImage:r}=b;return!!(r&&r.render&&r.render())&&(b.data.replace(new Uint8Array(r.data.buffer)),!0)}class ke extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,promiseResolve:p}of this.requestors)p(this._getImagesForIds(u));this.requestors=[]}}getImage(r){const u=this.images[r];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new c.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let p=!0;const _=u.data||u.spriteData;return this._validateStretch(u.stretchX,_&&_.width)||(this.fire(new c.k(new Error(`Image "${r}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,_&&_.height)||(this.fire(new c.k(new Error(`Image "${r}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new c.k(new Error(`Image "${r}" has invalid "content" value`))),p=!1),p}_validateStretch(r,u){if(!r)return!0;let p=0;for(const _ of r){if(_[0]<p||_[1]<_[0]||u<_[1])return!1;p=_[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;const p=u.spriteData,_=p&&p.width||u.data.width,w=p&&p.height||u.data.height;return!(r[0]<0||_<r[0]||r[1]<0||w<r[1]||r[2]<0||_<r[2]||r[3]<0||w<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,p=!0){const _=this.getImage(r);if(p&&(_.data.width!==u.data.width||_.data.height!==u.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=_.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((u,p)=>{let _=!0;if(!this.isLoaded())for(const w of r)this.images[w]||(_=!1);this.isLoaded()||_?u(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:u})})}_getImagesForIds(r){const u={};for(const p of r){let _=this.getImage(p);_||(this.fire(new c.l("styleimagemissing",{id:p})),_=this.getImage(p)),_?u[p]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:c.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],p=this.getImage(r);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const _={w:p.data.width+2,h:p.data.height+2,x:0,y:0},w=new c.I(_,p);this.patterns[r]={bin:_,position:w}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.T(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const w in this.patterns)r.push(this.patterns[w].bin);const{w:u,h:p}=c.p(r),_=this.atlasImage;_.resize({width:u||1,height:p||1});for(const w in this.patterns){const{bin:A}=this.patterns[w],k=A.x+1,z=A.y+1,$=this.getImage(w).data,q=$.width,H=$.height;c.R.copy($,_,{x:0,y:0},{x:k,y:z},{width:q,height:H}),c.R.copy($,_,{x:0,y:H-1},{x:k,y:z-1},{width:q,height:1}),c.R.copy($,_,{x:0,y:0},{x:k,y:z+H},{width:q,height:1}),c.R.copy($,_,{x:q-1,y:0},{x:k-1,y:z},{width:1,height:H}),c.R.copy($,_,{x:0,y:0},{x:k+q,y:z},{width:1,height:H})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||c.w(`Image with ID: "${u}" was not found`),_e(p)&&this.updateImage(u,p)}}}const at=1e20;function ze(b,r,u,p,_,w,A,k,z){for(let $=r;$<r+p;$++)Fe(b,u*w+$,w,_,A,k,z);for(let $=u;$<u+_;$++)Fe(b,$*w+r,1,p,A,k,z)}function Fe(b,r,u,p,_,w,A){w[0]=0,A[0]=-1e20,A[1]=at,_[0]=b[r];for(let k=1,z=0,$=0;k<p;k++){_[k]=b[r+k*u];const q=k*k;do{const H=w[z];$=(_[k]-_[H]+q-H*H)/(k-H)/2}while($<=A[z]&&--z>-1);z++,w[z]=k,A[z]=$,A[z+1]=at}for(let k=0,z=0;k<p;k++){for(;A[z+1]<k;)z++;const $=w[z],q=k-$;b[r+k*u]=_[$]+q*q}}class tt{constructor(r,u,p){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={},this.lang=p}setURL(r){this.url=r}getGlyphs(r){return c._(this,void 0,void 0,function*(){const u=[];for(const w in r)for(const A of r[w])u.push(this._getAndCacheGlyphsPromise(w,A));const p=yield Promise.all(u),_={};for(const{stack:w,id:A,glyph:k}of p)_[w]||(_[w]={}),_[w][A]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics};return _})}_getAndCacheGlyphsPromise(r,u){return c._(this,void 0,void 0,function*(){let p=this.entries[r];p||(p=this.entries[r]={glyphs:{},requests:{},ranges:{}});let _=p.glyphs[u];if(_!==void 0)return{stack:r,id:u,glyph:_};if(_=this._tinySDF(p,r,u),_)return p.glyphs[u]=_,{stack:r,id:u,glyph:_};const w=Math.floor(u/256);if(256*w>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[w])return{stack:r,id:u,glyph:_};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[w]){const k=tt.loadGlyphRange(r,w,this.url,this.requestManager);p.requests[w]=k}const A=yield p.requests[w];for(const k in A)this._doesCharSupportLocalGlyph(+k)||(p.glyphs[+k]=A[+k]);return p.ranges[w]=!0,{stack:r,id:u,glyph:A[u]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||c.u["CJK Unified Ideographs"](r)||c.u["Hangul Syllables"](r)||c.u.Hiragana(r)||c.u.Katakana(r)||c.u["CJK Symbols and Punctuation"](r)||c.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,u,p){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(p))return;let w=r.tinySDF;if(!w){let k="400";/bold/i.test(u)?k="900":/medium/i.test(u)?k="500":/light/i.test(u)&&(k="200"),w=r.tinySDF=new tt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:_,fontWeight:k})}const A=w.draw(String.fromCharCode(p));return{id:p,bitmap:new c.q({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}tt.loadGlyphRange=function(b,r,u,p){return c._(this,void 0,void 0,function*(){const _=256*r,w=_+255,A=p.transformRequest(u.replace("{fontstack}",b).replace("{range}",`${_}-${w}`),"Glyphs"),k=yield c.n(A,new AbortController);if(!k||!k.data)throw new Error(`Could not load glyph range. range: ${r}, ${_}-${w}`);const z={};for(const $ of c.o(k.data))z[$.id]=$;return z})},tt.TinySDF=class{constructor({fontSize:b=24,buffer:r=3,radius:u=8,cutoff:p=.25,fontFamily:_="sans-serif",fontWeight:w="normal",fontStyle:A="normal",lang:k=null}={}){this.buffer=r,this.cutoff=p,this.radius=u,this.lang=k;const z=this.size=b+4*r,$=this._createCanvas(z),q=this.ctx=$.getContext("2d",{willReadFrequently:!0});q.font=`${A} ${w} ${b}px ${_}`,q.textBaseline="alphabetic",q.textAlign="left",q.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(b){const r=document.createElement("canvas");return r.width=r.height=b,r}draw(b){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:_,actualBoundingBoxRight:w}=this.ctx.measureText(b),A=Math.ceil(u),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-_))),z=Math.min(this.size-this.buffer,A+Math.ceil(p)),$=k+2*this.buffer,q=z+2*this.buffer,H=Math.max($*q,0),G=new Uint8ClampedArray(H),Q={data:G,width:$,height:q,glyphWidth:k,glyphHeight:z,glyphTop:A,glyphLeft:0,glyphAdvance:r};if(k===0||z===0)return Q;const{ctx:se,buffer:pe,gridInner:fe,gridOuter:ge}=this;this.lang&&(se.lang=this.lang),se.clearRect(pe,pe,k,z),se.fillText(b,pe,pe+A);const ve=se.getImageData(pe,pe,k,z);ge.fill(at,0,H),fe.fill(0,0,H);for(let Te=0;Te<z;Te++)for(let xe=0;xe<k;xe++){const Ce=ve.data[4*(Te*k+xe)+3]/255;if(Ce===0)continue;const Oe=(Te+pe)*$+xe+pe;if(Ce===1)ge[Oe]=0,fe[Oe]=at;else{const we=.5-Ce;ge[Oe]=we>0?we*we:0,fe[Oe]=we<0?we*we:0}}ze(ge,0,0,$,q,$,this.f,this.v,this.z),ze(fe,pe,pe,k,z,$,this.f,this.v,this.z);for(let Te=0;Te<H;Te++){const xe=Math.sqrt(ge[Te])-Math.sqrt(fe[Te]);G[Te]=Math.round(255-255*(xe/this.radius+this.cutoff))}return Q}};class ut{constructor(){this.specification=c.v.light.position}possiblyEvaluate(r,u){return c.B(r.expression.evaluate(u))}interpolate(r,u,p){return{x:c.C.number(r.x,u.x,p),y:c.C.number(r.y,u.y,p),z:c.C.number(r.z,u.z,p)}}}let rt;class Pe extends c.E{constructor(r){super(),rt=rt||new c.r({anchor:new c.D(c.v.light.anchor),position:new ut,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.t(rt,void 0),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(c.x,r,u))for(const p in r){const _=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),_):this._transitionable.setValue(p,_)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,p){return(!p||p.validate!==!1)&&c.y(this,r.call(c.z,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.v}))}}const Ve=new c.r({"sky-color":new c.D(c.v.sky["sky-color"]),"horizon-color":new c.D(c.v.sky["horizon-color"]),"fog-color":new c.D(c.v.sky["fog-color"]),"fog-ground-blend":new c.D(c.v.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.v.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.v.sky["atmosphere-blend"])});class Ge extends c.E{constructor(r){super(),this._transitionable=new c.t(Ve,void 0),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.F(0))}setSky(r,u={}){if(!this._validate(c.G,r,u)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in r){const _=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),_):this._transitionable.setValue(p,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,p={}){return(p==null?void 0:p.validate)!==!1&&c.y(this,r.call(c.z,c.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class ht{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const p=r.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(r,u)),this.dashEntry[p]}getDashRanges(r,u,p){const _=[];let w=r.length%2==1?-r[r.length-1]*p:0,A=r[0]*p,k=!0;_.push({left:w,right:A,isDash:k,zeroLength:r[0]===0});let z=r[0];for(let $=1;$<r.length;$++){k=!k;const q=r[$];w=z*p,z+=q,A=z*p,_.push({left:w,right:A,isDash:k,zeroLength:q===0})}return _}addRoundDash(r,u,p){const _=u/2;for(let w=-p;w<=p;w++){const A=this.width*(this.nextRow+p+w);let k=0,z=r[k];for(let $=0;$<this.width;$++){$/z.right>1&&(z=r[++k]);const q=Math.abs($-z.left),H=Math.abs($-z.right),G=Math.min(q,H);let Q;const se=w/p*(_+1);if(z.isDash){const pe=_-Math.abs(se);Q=Math.sqrt(G*G+pe*pe)}else Q=_-Math.sqrt(G*G+se*se);this.data[A+$]=Math.max(0,Math.min(255,Q+128))}}}addRegularDash(r){for(let k=r.length-1;k>=0;--k){const z=r[k],$=r[k+1];z.zeroLength?r.splice(k,1):$&&$.isDash===z.isDash&&($.left=z.left,r.splice(k,1))}const u=r[0],p=r[r.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const _=this.width*this.nextRow;let w=0,A=r[w];for(let k=0;k<this.width;k++){k/A.right>1&&(A=r[++w]);const z=Math.abs(k-A.left),$=Math.abs(k-A.right),q=Math.min(z,$);this.data[_+k]=Math.max(0,Math.min(255,(A.isDash?q:-q)+128))}}addDash(r,u){const p=u?7:0,_=2*p+1;if(this.nextRow+_>this.height)return c.w("LineAtlas out of space"),null;let w=0;for(let k=0;k<r.length;k++)w+=r[k];if(w!==0){const k=this.width/w,z=this.getDashRanges(r,this.width,k);u?this.addRoundDash(z,k,p):this.addRegularDash(z)}const A={y:this.nextRow+p,height:2*p,width:w};return this.nextRow+=_,this.dirty=!0,A}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const be="maplibre_preloaded_worker_pool";class Xe{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Xe.workerCount;)this.workers.push(new Worker(c.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[be]}numActive(){return Object.keys(this.active).length}}const ot=Math.floor(B.hardwareConcurrency/2);let st,Pt;function Vt(){return st||(st=new Xe),st}Xe.workerCount=c.H(globalThis)?Math.max(Math.min(ot,3),1):1;class Rt{constructor(r,u){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=u;const p=this.workerPool.acquire(u);for(let _=0;_<p.length;_++){const w=new c.J(p[_],u);w.name=`Worker ${_}`,this.actors.push(w)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u){const p=[];for(const _ of this.actors)p.push(_.sendAsync({type:r,data:u}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,u){for(const p of this.actors)p.registerMessageHandler(r,u)}}function mr(){return Pt||(Pt=new Rt(Vt(),c.K),Pt.registerMessageHandler("GR",(b,r,u)=>c.m(r,u))),Pt}function nr(b,r){const u=c.L();return c.M(u,u,[1,1,0]),c.N(u,u,[.5*b.width,.5*b.height,1]),b.calculatePosMatrix?c.O(u,u,b.calculatePosMatrix(r.toUnwrapped())):u}function Ot(b,r,u,p,_,w,A){var k;const z=function(G,Q,se){if(G)for(const pe of G){const fe=Q[pe];if(fe&&fe.source===se&&fe.type==="fill-extrusion")return!0}else for(const pe in Q){const fe=Q[pe];if(fe.source===se&&fe.type==="fill-extrusion")return!0}return!1}((k=_==null?void 0:_.layers)!==null&&k!==void 0?k:null,r,b.id),$=w.maxPitchScaleFactor(),q=b.tilesIn(p,$,z);q.sort(er);const H=[];for(const G of q)H.push({wrappedTileID:G.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(r,u,b._state,G.queryGeometry,G.cameraQueryGeometry,G.scale,_,w,$,nr(b.transform,G.tileID),A?(Q,se)=>A(G.tileID,Q,se):void 0)});return function(G,Q){for(const se in G)for(const pe of G[se])ir(pe,Q);return G}(function(G){const Q={},se={};for(const pe of G){const fe=pe.queryResults,ge=pe.wrappedTileID,ve=se[ge]=se[ge]||{};for(const Te in fe){const xe=fe[Te],Ce=ve[Te]=ve[Te]||{},Oe=Q[Te]=Q[Te]||[];for(const we of xe)Ce[we.featureIndex]||(Ce[we.featureIndex]=!0,Oe.push(we))}}return Q}(H),b)}function er(b,r){const u=b.tileID,p=r.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}function ir(b,r){const u=b.feature,p=r.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=p}function _t(b,r,u){return c._(this,void 0,void 0,function*(){let p=b;if(b.url?p=(yield c.j(r.transformRequest(b.url,"Source"),u)).data:yield B.frameAsync(u),!p)return null;const _=c.Q(c.e(p,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(_.vectorLayerIds=p.vector_layers.map(w=>w.id)),_})}class hr{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof c.S?new c.S(r.lng,r.lat):c.S.convert(r),this}setSouthWest(r){return this._sw=r instanceof c.S?new c.S(r.lng,r.lat):c.S.convert(r),this}extend(r){const u=this._sw,p=this._ne;let _,w;if(r instanceof c.S)_=r,w=r;else{if(!(r instanceof hr))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(hr.convert(r)):this.extend(c.S.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(c.S.convert(r)):this;if(_=r._sw,w=r._ne,!_||!w)return this}return u||p?(u.lng=Math.min(_.lng,u.lng),u.lat=Math.min(_.lat,u.lat),p.lng=Math.max(w.lng,p.lng),p.lat=Math.max(w.lat,p.lat)):(this._sw=new c.S(_.lng,_.lat),this._ne=new c.S(w.lng,w.lat)),this}getCenter(){return new c.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.S(this.getWest(),this.getNorth())}getSouthEast(){return new c.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:u,lat:p}=c.S.convert(r);let _=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&_}static convert(r){return r instanceof hr?r:r&&new hr(r)}static fromLngLat(r,u=0){const p=360*u/40075017,_=p/Math.cos(Math.PI/180*r.lat);return new hr(new c.S(r.lng-_,r.lat-p),new c.S(r.lng+_,r.lat+p))}adjustAntiMeridian(){const r=new c.S(this._sw.lng,this._sw.lat),u=new c.S(this._ne.lng,this._ne.lat);return new hr(r,r.lng>u.lng?new c.S(u.lng+360,u.lat):u)}}class Qt{constructor(r,u,p){this.bounds=hr.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),p=Math.floor(c.V(this.bounds.getWest())*u),_=Math.floor(c.U(this.bounds.getNorth())*u),w=Math.ceil(c.V(this.bounds.getEast())*u),A=Math.ceil(c.U(this.bounds.getSouth())*u);return r.x>=p&&r.x<w&&r.y>=_&&r.y<A}}class Yr extends c.E{constructor(r,u,p,_){if(super(),this.id=r,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.Q(u,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield _t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(c.e(this,r),r.bounds&&(this.tileBounds=new Qt(r.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this._loaded=!0,this.fire(new c.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(r){return c._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(u,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};p.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((w,A)=>{r.reloadPromise={resolve:w,reject:A}})}else r.actor=this.dispatcher.getActor(),_="LT";r.abortController=new AbortController;try{const w=yield r.actor.sendAsync({type:_,data:p},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,w)}catch(w){if(delete r.abortController,r.aborted)return;if(w&&w.status!==404)throw w;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,u){if(u&&u.resourceTiming&&(r.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&r.setExpiryData(u),r.loadVectorData(u,this.map.painter),r.reloadPromise){const p=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(p.resolve).catch(p.reject)}}abortTile(r){return c._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return c._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class tn extends c.E{constructor(r,u,p,_){super(),this.id=r,this.dispatcher=p,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},u),c.e(this,c.Q(u,["url","scheme","tileSize"]))}load(){return c._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield _t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(c.e(this,u),u.bounds&&(this.tileBounds=new Qt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(u){this._tileJSONRequest=null,this._loaded=!0,this.fire(new c.k(u))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return c.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return c._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const p=yield ue.getImage(this.map._requestManager.transformRequest(u,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&r.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const _=this.map.painter.context,w=_.gl,A=p.data;r.texture=this.map.painter.getTileTexture(A.width),r.texture?r.texture.update(A,{useMipmap:!0}):(r.texture=new c.T(_,A,w.RGBA,{useMipmap:!0}),r.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(p){if(delete r.abortController,r.aborted)r.state="unloaded";else if(p)throw r.state="errored",p}})}abortTile(r){return c._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return c._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class Kr extends tn{constructor(r,u,p,_){super(r,u,p,_),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(r){return c._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(u,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const _=yield ue.getImage(p,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(_&&_.data){const w=_.data;this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&r.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const A=c.b(w)&&c.W()?w:yield this.readImageNow(w),k={type:this.type,uid:r.uid,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const z=yield r.actor.sendAsync({type:"LDT",data:k});r.dem=z,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(_){if(delete r.abortController,r.aborted)r.state="unloaded";else if(_)throw r.state="errored",_}})}readImageNow(r){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.X()){const u=r.width+2,p=r.height+2;try{return new c.R({width:u,height:p},yield c.Y(r,-1,-1,u,p))}catch{}}return B.getImageData(r,1)})}_getNeighboringTiles(r){const u=r.canonical,p=Math.pow(2,u.z),_=(u.x-1+p)%p,w=u.x===0?r.wrap-1:r.wrap,A=(u.x+1+p)%p,k=u.x+1===p?r.wrap+1:r.wrap,z={};return z[new c.Z(r.overscaledZ,w,u.z,_,u.y).key]={backfilled:!1},z[new c.Z(r.overscaledZ,k,u.z,A,u.y).key]={backfilled:!1},u.y>0&&(z[new c.Z(r.overscaledZ,w,u.z,_,u.y-1).key]={backfilled:!1},z[new c.Z(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},z[new c.Z(r.overscaledZ,k,u.z,A,u.y-1).key]={backfilled:!1}),u.y+1<p&&(z[new c.Z(r.overscaledZ,w,u.z,_,u.y+1).key]={backfilled:!1},z[new c.Z(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},z[new c.Z(r.overscaledZ,k,u.z,A,u.y+1).key]={backfilled:!1}),z}unloadTile(r){return c._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class Oi extends c.E{constructor(r,u,p,_){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:u.data},this.actor=p.getActor(),this.setEventedParent(_),this._data=u.data,this._options=c.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(u.buffer!==void 0?u.buffer:128),tolerance:this._pixelsToTileUnits(u.tolerance!==void 0?u.tolerance:.375),extent:c.$,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(u.clusterMaxZoom),minPoints:Math.max(2,u.clusterMinPoints||2),extent:c.$,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(c.$/this.tileSize)}_getClusterMaxZoom(r){const u=r?Math.round(r):this.maxzoom-1;return Number.isInteger(r)||r===void 0||c.w(`Integer expected for option 'clusterMaxZoom': provided value "${r}" rounded to "${u}"`),u}load(){return c._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._pendingWorkerUpdate={data:r},this._updateWorkerData(),this}updateData(r){return this._pendingWorkerUpdate.diff=c.a0(this._pendingWorkerUpdate.diff,r),this._updateWorkerData(),this}getData(){return c._(this,void 0,void 0,function*(){const r=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(u=>u.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return c._(this,void 0,void 0,function*(){const r=new hr,u=yield this.getData();let p;switch(u.type){case"FeatureCollection":p=u.features.map(_=>this.getCoordinatesFromGeometry(_.geometry)).flat(1/0);break;case"Feature":p=this.getCoordinatesFromGeometry(u.geometry);break;default:p=this.getCoordinatesFromGeometry(u)}if(p.length==0)return r;for(let _=0;_<p.length-1;_+=2)r.extend([p[_],p[_+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(r.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,u,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:u,offset:p}})}_updateWorkerData(){return c._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:r,diff:u}=this._pendingWorkerUpdate;if(!r&&!u)return void c.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const p=c.e({type:this.type},this.workerOptions);r?(typeof r=="string"?(p.request=this.map._requestManager.transformRequest(B.resolveURL(r),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(r),this._pendingWorkerUpdate.data=void 0):u&&(p.dataDiff=u,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new c.l("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:p});if(this._isUpdatingWorker=!1,this._removed||_.abandoned)return void this.fire(new c.l("dataabort",{dataType:"source"}));this._data=_.data;let w=null;_.resourceTiming&&_.resourceTiming[this.id]&&(w=_.resourceTiming[this.id].slice(0));const A={dataType:"source"};this._collectResourceTiming&&w&&w.length>0&&c.e(A,{resourceTiming:w}),this.fire(new c.l("data",Object.assign(Object.assign({},A),{sourceDataType:"metadata"}))),this.fire(new c.l("data",Object.assign(Object.assign({},A),{sourceDataType:"content"})))}catch(_){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new c.l("dataabort",{dataType:"source"}));this.fire(new c.k(_))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(r){return c._(this,void 0,void 0,function*(){const u=r.actor?"RT":"LT";r.actor=this.actor;const p={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const _=yield this.actor.sendAsync({type:u,data:p},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(_,this.map.painter,u==="RT")})}abortTile(r){return c._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return c._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Xn extends c.E{constructor(r,u,p,_){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=u}load(r){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield ue.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,r&&(this.coordinates=r),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new c.k(u))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const u=r.map(c.a1.fromLngLat);var p;return this.tileID=function(_){const w=c.a2.fromPoints(_),A=w.width(),k=w.height(),z=Math.max(A,k),$=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),q=Math.pow(2,$);return new c.a4($,Math.floor((w.minX+w.maxX)/2*q),Math.floor((w.minY+w.maxY)/2*q))}(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map(_=>this.tileID.getTilePoint(_)._round()),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,u=r.gl;this.texture||(this.texture=new c.T(r,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const _ in this.tiles){const w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,p=!0)}p&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return c._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){const{minX:u,minY:p,maxX:_,maxY:w}=c.a2.fromPoints(r),A={};for(let k=0;k<=c.a3;k++){const z=Math.pow(2,k),$=Math.floor(u*z),q=Math.floor(p*z),H=Math.floor(_*z),G=Math.floor(w*z);A[k]={minTileX:$,minTileY:q,maxTileX:H,maxTileY:G}}return A}}class Ba extends Xn{constructor(r,u,p,_){super(r,u,p,_),this.roundZoom=!0,this.type="video",this.options=u}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const u of r.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield c.a5(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new c.k(u))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new c.k(new c.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,u=r.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new c.T(r,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const _ in this.tiles){const w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,p=!0)}p&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ii extends Xn{constructor(r,u,p,_){super(r,u,p,_),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(w=>!Array.isArray(w)||w.length!==2||w.some(A=>typeof A!="number"))||this.fire(new c.k(new c.a6(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.k(new c.a6(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new c.k(new c.a6(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new c.k(new c.a6(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.k(new c.a6(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return c._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,p=u.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new c.T(u,this.canvas,p.RGBA,{premultiply:!0});let _=!1;for(const w in this.tiles){const A=this.tiles[w];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,_=!0)}_&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const ki={},Wi=b=>{switch(b){case"geojson":return Oi;case"image":return Xn;case"raster":return tn;case"raster-dem":return Kr;case"vector":return Yr;case"video":return Ba;case"canvas":return Ii}return ki[b]},Mo="RTLPluginLoaded";class Ts extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=mr()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(u=>{throw this.status="error",u})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return c._(this,arguments,void 0,function*(u,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=B.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return c._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.l(Mo))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let zi=null;function Qn(){return zi||(zi=new Ts),zi}var li,Ie;(function(b){b[b.Base=0]="Base",b[b.Parent=1]="Parent"})(li||(li={})),function(b){b[b.Departing=0]="Departing",b[b.Incoming=1]="Incoming"}(Ie||(Ie={}));class re{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=r,this.uid=c.a7(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(r){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(r||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:r,fadingDirection:u,fadingParentID:p,fadeEndTime:_}){this.resetFadeLogic(),this.fadingRole=r,this.fadingDirection=u,this.fadingParentID=p,this.fadeEndTime=_}setSelfFadeLogic(r){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=r}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=B.now(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(_,w){const A={};if(!w)return A;for(const k of _){const z=k.layerIds.map($=>w.getLayer($)).filter(Boolean);if(z.length!==0){k.layers=z,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map($=>z.filter(q=>q.id===$)[0]));for(const $ of z)A[$.id]=k}}return A}(r.buckets,u==null?void 0:u.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof c.a9){if(this.hasSymbolBuckets=!0,!p)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof c.a9&&w.hasRTLText){this.hasRTLText=!0,Qn().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const w=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(_).queryRadius(w))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),this.dashPositions=r.dashPositions}else this.collisionBoxArray=new c.a8}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const p in this.buckets){const _=this.buckets[p];_.uploadPending()&&_.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new c.T(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new c.T(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,p,_,w,A,k,z,$,q,H){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:w,scale:A,tileSize:this.tileSize,pixelPosMatrix:q,transform:z,params:k,queryPadding:this.queryPadding*$,getElevation:H},r,u,p):{}}querySourceFeatures(r,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const _=p.loadVTLayers(),w=u&&u.sourceLayer?u.sourceLayer:"",A=_._geojsonTileLayer||_[w];if(!A)return;const k=c.aa(u==null?void 0:u.filter,u==null?void 0:u.globalState),{z,x:$,y:q}=this.tileID.canonical,H={z,x:$,y:q};for(let G=0;G<A.length;G++){const Q=A.feature(G);if(k.needGeometry){const fe=c.ab(Q,!0);if(!k.filter(new c.F(this.tileID.overscaledZ),fe,this.tileID.canonical))continue}else if(!k.filter(new c.F(this.tileID.overscaledZ),Q))continue;const se=p.getId(Q,w),pe=new c.ac(Q,z,$,q,se);pe.tile=H,r.push(pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const p=c.ad(r.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const p=Date.now();let _=!1;if(this.expirationTime>p)_=!1;else if(u)if(this.expirationTime<u)_=!0;else{const w=this.expirationTime-u;w?this.expirationTime=p+Math.max(w,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!u.style.hasLayer(_))continue;const w=this.buckets[_],A=w.layers[0].sourceLayer||"_geojsonTileLayer",k=p[A],z=r[A];if(!k||!z||Object.keys(z).length===0)continue;w.update(z,k,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const $=u&&u.style&&u.style.getLayer(_);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(w)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<B.now()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(r){this.symbolFadeHoldUntil=B.now()+r}setDependencies(r,u){const p={};for(const _ of u)p[_]=!0;this.dependencies[r]=p}hasDependency(r,u){for(const p of r){const _=this.dependencies[p];if(_){for(const w of u)if(_[w])return!0}}return!1}}class ie{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,p){const _=r.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const w={value:u,timeout:void 0};if(p!==void 0&&(w.timeout=setTimeout(()=>{this.remove(r,w)},p)),this.data[_].push(w),this.order.push(_),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const p=r.wrapped().key,_=u===void 0?0:this.data[p].indexOf(u),w=this.data[p][_];return this.data[p].splice(_,1),w.timeout&&clearTimeout(w.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(w.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const p in this.data)for(const _ of this.data[p])r(_.value)||u.push(_);for(const p of u)this.remove(p.value.tileID,p)}}class de{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,p){const _=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][_]=this.stateChanges[r][_]||{},c.e(this.stateChanges[r][_],p),this.deletedStates[r]===null){this.deletedStates[r]={};for(const w in this.state[r])w!==_&&(this.deletedStates[r][w]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][_]===null){this.deletedStates[r][_]={};for(const w in this.state[r][_])p[w]||(this.deletedStates[r][_][w]=null)}else for(const w in p)this.deletedStates[r]&&this.deletedStates[r][_]&&this.deletedStates[r][_][w]===null&&delete this.deletedStates[r][_][w]}removeFeatureState(r,u,p){if(this.deletedStates[r]===null)return;const _=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},p&&u!==void 0)this.deletedStates[r][_]!==null&&(this.deletedStates[r][_]=this.deletedStates[r][_]||{},this.deletedStates[r][_][p]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][_])for(p in this.deletedStates[r][_]={},this.stateChanges[r][_])this.deletedStates[r][_][p]=null;else this.deletedStates[r][_]=null;else this.deletedStates[r]=null}getState(r,u){const p=String(u),_=c.e({},(this.state[r]||{})[p],(this.stateChanges[r]||{})[p]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const w=this.deletedStates[r][u];if(w===null)return{};for(const A in w)delete _[A]}return _}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const p={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const w={};for(const A in this.stateChanges[_])this.state[_][A]||(this.state[_][A]={}),c.e(this.state[_][A],this.stateChanges[_][A]),w[A]=this.state[_][A];p[_]=w}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const w={};if(this.deletedStates[_]===null)for(const A in this.state[_])w[A]={},this.state[_][A]={};else for(const A in this.deletedStates[_]){if(this.deletedStates[_][A]===null)this.state[_][A]={};else for(const k of Object.keys(this.deletedStates[_][A]))delete this.state[_][A][k];w[A]=this.state[_][A]}p[_]=p[_]||{},c.e(p[_],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const _ in r)r[_].setFeatureState(p,u)}}const Se=89.25;function Ee(b,r){const u=c.ah(r.lat,-c.ai,c.ai);return new c.P(c.V(r.lng)*b,c.U(u)*b)}function De(b,r){return new c.a1(r.x/b,r.y/b).toLngLat()}function He(b){return b.cameraToCenterDistance*Math.min(.85*Math.tan(c.ae(90-b.pitch)),Math.tan(c.ae(Se-b.pitch)))}function Le(b,r){const u=b.canonical,p=r/c.af(u.z),_=u.x+Math.pow(2,u.z)*b.wrap,w=c.ag(new Float64Array(16));return c.M(w,w,[_*p,u.y*p,0]),c.N(w,w,[p/c.$,p/c.$,1]),w}function ct(b,r,u,p,_){const w=c.a1.fromLngLat(b,r),A=_*c.aj(1,b.lat),k=A*Math.cos(c.ae(u)),z=Math.sqrt(A*A-k*k),$=z*Math.sin(c.ae(-p)),q=z*Math.cos(c.ae(-p));return new c.a1(w.x+$,w.y+q,w.z+k)}function St(b,r,u){const p=r.intersectsFrustum(b);if(!u||p===0)return p;const _=r.intersectsPlane(u);return _===0?0:p===2&&_===2?2:1}function mt(b,r,u){let p=0;const _=(u-r)/10;for(let w=0;w<10;w++)p+=_*Math.pow(Math.cos(r+(w+.5)/10*(u-r)),b);return p}function Bt(b,r){return function(u,p,_,w,A){const k=2*((b-1)/c.ak(Math.cos(c.ae(Se-A))/Math.cos(c.ae(Se)))-1),z=Math.acos(_/w),$=2*mt(k-1,0,c.ae(A/2)),q=Math.min(c.ae(Se),z+c.ae(A/2)),H=mt(k-1,Math.min(q,z-c.ae(A/2)),q),G=Math.atan(p/_),Q=Math.hypot(p,_);let se=u;return se+=c.ak(w/Q/Math.max(.5,Math.cos(c.ae(A/2)))),se+=k*c.ak(Math.cos(G))/2,se-=c.ak(Math.max(1,H/$/r))/2,se}}const Zt=Bt(9.314,3);function Ue(b,r){const u=(r.roundZoom?Math.round:Math.floor)(b.zoom+c.ak(b.tileSize/r.tileSize));return Math.max(0,u)}function Cr(b,r){const u=b.getCameraFrustum(),p=b.getClippingPlane(),_=b.screenPointToMercatorCoordinate(b.getCameraPoint()),w=c.a1.fromLngLat(b.center,b.elevation);_.z=w.z+Math.cos(b.pitchInRadians)*b.cameraToCenterDistance/b.worldSize;const A=b.getCoveringTilesDetailsProvider(),k=A.allowVariableZoom(b,r),z=Ue(b,r),$=r.minzoom||0,q=r.maxzoom!==void 0?r.maxzoom:b.maxZoom,H=Math.min(Math.max(0,z),q),G=Math.pow(2,H),Q=[G*_.x,G*_.y,0],se=[G*w.x,G*w.y,0],pe=Math.hypot(w.x-_.x,w.y-_.y),fe=Math.abs(w.z-_.z),ge=Math.hypot(pe,fe),ve=Ce=>({zoom:0,x:0,y:0,wrap:Ce,fullyVisible:!1}),Te=[],xe=[];if(b.renderWorldCopies&&A.allowWorldCopies())for(let Ce=1;Ce<=3;Ce++)Te.push(ve(-Ce)),Te.push(ve(Ce));for(Te.push(ve(0));Te.length>0;){const Ce=Te.pop(),Oe=Ce.x,we=Ce.y;let Re=Ce.fullyVisible;const nt={x:Oe,y:we,z:Ce.zoom},We=A.getTileBoundingVolume(nt,Ce.wrap,b.elevation,r);if(!Re){const At=St(u,We,p);if(At===0)continue;Re=At===2}const Ke=A.distanceToTile2d(_.x,_.y,nt,We);let Qe=z;k&&(Qe=(r.calculateTileZoom||Zt)(b.zoom+c.ak(b.tileSize/r.tileSize),Ke,fe,ge,b.fov)),Qe=(r.roundZoom?Math.round:Math.floor)(Qe),Qe=Math.max(0,Qe);const Tt=Math.min(Qe,q);if(Ce.wrap=A.getWrap(w,nt,Ce.wrap),Ce.zoom>=Tt){if(Ce.zoom<$)continue;const At=H-Ce.zoom,yt=Q[0]-.5-(Oe<<At),Lt=Q[1]-.5-(we<<At),or=r.reparseOverscaled?Math.max(Ce.zoom,Qe):Ce.zoom;xe.push({tileID:new c.Z(Ce.zoom===q?or:Ce.zoom,Ce.wrap,Ce.zoom,Oe,we),distanceSq:c.al([se[0]-.5-Oe,se[1]-.5-we]),tileDistanceToCamera:Math.sqrt(yt*yt+Lt*Lt)})}else for(let At=0;At<4;At++)Te.push({zoom:Ce.zoom+1,x:(Oe<<1)+At%2,y:(we<<1)+(At>>1),wrap:Ce.wrap,fullyVisible:Re})}return xe.sort((Ce,Oe)=>Ce.distanceSq-Oe.distanceSq).map(Ce=>Ce.tileID)}const qr=c.a2.fromPoints([new c.P(0,0),new c.P(c.$,c.$)]);class Ft extends c.E{constructor(r,u,p){super(),this.id=r,this.dispatcher=p,this.on("data",_=>this._dataHandler(_)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((_,w,A,k)=>{const z=new(Wi(w.type))(_,w,A,k);if(z.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${z.id}`);return z})(r,u,p,this),this._tiles={},this._cache=new ie(0,_=>this._unloadTile(_)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new de,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u,p){return c._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,u,p)}catch(_){r.state="errored",_.status!==404?this._source.fire(new c.k(_,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new c.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(r),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Pr).map(r=>r.key)}getRenderableIds(r){const u=[];for(const p in this._tiles)this._isIdRenderable(p,r)&&u.push(this._tiles[p]);return r?u.sort((p,_)=>{const w=p.tileID,A=_.tileID,k=new c.P(w.canonical.x,w.canonical.y)._rotate(-this.transform.bearingInRadians),z=new c.P(A.canonical.x,A.canonical.y)._rotate(-this.transform.bearingInRadians);return w.overscaledZ-A.overscaledZ||z.y-k.y||z.x-k.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(Pr).map(p=>p.key)}hasRenderableParent(r){const u=r.overscaledZ-1;if(u>=this._source.minzoom){const p=this._getLoadedTile(r.scaledTo(u));if(p)return this._isIdRenderable(p.tileID.key)}return!1}_isIdRenderable(r,u=!1){var p;return(p=this._tiles[r])===null||p===void 0?void 0:p.isRenderable(u)}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)r?this._reloadTile(u,"expired"):this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(r,u){return c._(this,void 0,void 0,function*(){const p=this._tiles[r];p&&(p.state!=="loading"&&(p.state=u),yield this._loadTile(p,r,u))})}_tileLoaded(r,u,p){r.timeAdded=B.now(),p==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new c.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let _=0;_<u.length;_++){const w=u[_];if(r.neighboringTiles&&r.neighboringTiles[w]){const A=this.getTileByID(w);p(r,A),p(A,r)}}function p(_,w){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let A=w.tileID.canonical.x-_.tileID.canonical.x;const k=w.tileID.canonical.y-_.tileID.canonical.y,z=Math.pow(2,_.tileID.canonical.z),$=w.tileID.key;A===0&&k===0||Math.abs(k)>1||(Math.abs(A)>1&&(Math.abs(A+z)===1?A+=z:Math.abs(A-z)===1&&(A-=z)),w.dem&&_.dem&&(_.dem.backfillBorder(w.dem,A,k),_.neighboringTiles&&_.neighboringTiles[$]&&(_.neighboringTiles[$].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u){const p=Object.values(r),_=this._getLoadedDescendents(p),w={};for(const A of p){const k=_[A.key];if(!(k!=null&&k.length)){w[A.key]=A;continue}const z=A.overscaledZ+Ft.maxUnderzooming,$=k.filter(G=>G.tileID.overscaledZ<=z);if(!$.length){w[A.key]=A;continue}const q=Math.min(...$.map(G=>G.tileID.overscaledZ)),H=$.filter(G=>G.tileID.overscaledZ===q).map(G=>G.tileID);for(const G of H)u[G.key]=G;this._areDescendentsComplete(H,q,A.overscaledZ)||(w[A.key]=A)}return w}_getLoadedDescendents(r){var u;const p={};for(const _ in this._tiles){const w=this._tiles[_];if(w.hasData())for(const A of r)w.tileID.isChildOf(A)&&(p[u=A.key]||(p[u]=[])).push(w)}return p}_areDescendentsComplete(r,u,p){return r.length===1&&r[0].isOverscaled()?r[0].overscaledZ===u:Math.pow(4,u-p)===r.length}_getLoadedTile(r){const u=this._tiles[r.key];return u!=null&&u.hasData()?u:null}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,p=Math.ceil(r.height/this._source.tileSize)+1,_=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?c.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(w)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const p={};for(const _ in this._tiles){const w=this._tiles[_];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+u),p[w.tileID.key]=w}this._tiles=p;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}update(r,u){if(!this._sourceLoaded||this._paused)return;let p;this.transform=r,this.terrain=u,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?p=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new c.Z(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(p=Cr(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter(z=>this._source.hasTile(z)))):p=[],this.usedForTerrain&&(p=this._addTerrainIdealTiles(p));const _=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,_&&this.fire(new c.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const w=Ue(r,this._source),A=this._updateRetainedTiles(p,w),k=Jn(this._source.type);k&&this._rasterFadeDuration>0&&!u&&this._updateFadingTiles(p,A),k?this._cleanUpRasterTiles(A):this._cleanUpVectorTiles(A)}_cleanUpRasterTiles(r){for(const u in this._tiles)r[u]||this._removeTile(u)}_cleanUpVectorTiles(r){for(const u in this._tiles){const p=this._tiles[u];r[u]?p.clearSymbolFadeHold():p.hasSymbolBuckets?p.holdingForSymbolFade()?p.symbolFadeFinished()&&this._removeTile(u):p.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(u)}}_addTerrainIdealTiles(r){const u=[];for(const p of r)if(p.canonical.z>this._source.minzoom){const _=p.scaledTo(p.canonical.z-1);u.push(_);const w=p.scaledTo(Math.max(this._source.minzoom,Math.min(p.canonical.z,5)));u.push(w)}return r.concat(u)}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForSymbolFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){var p;const _={},w={},A=Math.max(u-Ft.maxOverzooming,this._source.minzoom);let k={};for(const z of r){const $=this._addTile(z);_[z.key]=z,$.hasData()||(k[z.key]=z)}k=this._retainLoadedChildren(k,_);for(const z in k){const $=k[z];let q=this._tiles[z],H=q==null?void 0:q.wasRequested();for(let G=$.overscaledZ-1;G>=A;--G){const Q=$.scaledTo(G);if(w[Q.key])break;if(w[Q.key]=!0,q=this.getTile(Q),!q&&H&&(q=this._addTile(Q)),q){const se=q.hasData();if((se||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||H)&&(_[Q.key]=Q),H=q.wasRequested(),se)break}}}return _}_updateFadingTiles(r,u){const p=B.now(),_=c.am(r);for(const w of r){const A=this._tiles[w.key];A.fadingDirection!==Ie.Departing&&A.fadeOpacity!==0||A.resetFadeLogic(),this._updateFadingAncestor(A,u,p)||this._updateFadingDescendents(A,u,p)||this._updateFadingEdge(A,_,p)||A.resetFadeLogic()}}_updateFadingAncestor(r,u,p){if(!r.hasData())return!1;const{tileID:_,fadingRole:w,fadingDirection:A,fadingParentID:k}=r;if(w===li.Base&&A===Ie.Incoming&&k)return u[k.key]=k,!0;const z=Math.max(_.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let $=_.overscaledZ-1;$>=z;$--){const q=_.scaledTo($),H=this._getLoadedTile(q);if(H)return r.setCrossFadeLogic({fadingRole:li.Base,fadingDirection:Ie.Incoming,fadingParentID:H.tileID,fadeEndTime:p+this._rasterFadeDuration}),H.setCrossFadeLogic({fadingRole:li.Parent,fadingDirection:Ie.Departing,fadeEndTime:p+this._rasterFadeDuration}),u[q.key]=q,!0}return!1}_updateFadingDescendents(r,u,p){if(!r.hasData())return!1;const _=r.tileID.children(this._source.maxzoom);let w=this._updateFadingChildren(r,_,u,p);if(w)return!0;for(const A of _){const k=A.children(this._source.maxzoom);this._updateFadingChildren(r,k,u,p)&&(w=!0)}return w}_updateFadingChildren(r,u,p,_){if(u[0].overscaledZ>=this._source.maxzoom)return!1;let w=!1;for(const A of u){const k=this._getLoadedTile(A);if(!k)continue;const{fadingRole:z,fadingDirection:$,fadingParentID:q}=k;z===li.Base&&$===Ie.Departing&&q||(k.setCrossFadeLogic({fadingRole:li.Base,fadingDirection:Ie.Departing,fadingParentID:r.tileID,fadeEndTime:_+this._rasterFadeDuration}),r.setCrossFadeLogic({fadingRole:li.Parent,fadingDirection:Ie.Incoming,fadeEndTime:_+this._rasterFadeDuration})),p[A.key]=A,w=!0}return w}_updateFadingEdge(r,u,p){const _=r.tileID;return!!r.selfFading||!r.hasData()&&!!u.has(_)&&(r.setSelfFadeLogic(p+this._rasterFadeDuration),!0)}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(u.resetFadeLogic(),this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const p=u;return u||(u=new re(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,r.key,u.state)),u.uses++,this._tiles[r.key]=u,p||this._source.fire(new c.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const p=u.getExpiryTimeout();p&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},p))}refreshTiles(r){for(const u in this._tiles)(this._isIdRenderable(u)||this._tiles[u].state=="errored")&&r.some(p=>p.equals(this._tiles[u].tileID.canonical))&&this._reloadTile(u,"expired")}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(r){r.dataType==="source"&&(r.sourceDataType!=="metadata"?r.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,p){const _=[],w=this.transform;if(!w)return _;const A=w.getCoveringTilesDetailsProvider().allowWorldCopies(),k=p?w.getCameraQueryGeometry(r):r,z=Q=>w.screenPointToMercatorCoordinate(Q,this.terrain),$=this.transformBbox(r,z,!A),q=this.transformBbox(k,z,!A),H=this.getIds(),G=c.a2.fromPoints(q);for(let Q=0;Q<H.length;Q++){const se=this._tiles[H[Q]];if(se.holdingForSymbolFade())continue;const pe=A?[se.tileID]:[se.tileID.unwrapTo(-1),se.tileID.unwrapTo(0)],fe=Math.pow(2,w.zoom-se.tileID.overscaledZ),ge=u*se.queryPadding*c.$/se.tileSize/fe;for(const ve of pe){const Te=G.map(xe=>ve.getTilePoint(new c.a1(xe.x,xe.y)));if(Te.expandBy(ge),Te.intersects(qr)){const xe=$.map(Oe=>ve.getTilePoint(Oe)),Ce=q.map(Oe=>ve.getTilePoint(Oe));_.push({tile:se,tileID:A?ve:ve.unwrapTo(0),queryGeometry:xe,cameraQueryGeometry:Ce,scale:fe})}}}return _}transformBbox(r,u,p){let _=r.map(u);if(p){const w=c.a2.fromPoints(r);w.shrinkBy(.001*Math.min(w.width(),w.height()));const A=w.map(u);c.a2.fromPoints(_).covers(A)||(_=_.map(k=>k.x>.5?new c.a1(k.x-1,k.y,k.z):k))}return _}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(p=>this._tiles[p].tileID);return this.transform&&this.transform.populateCache(u),u}hasTransition(){if(this._source.hasTransition())return!0;if(Jn(this._source.type)&&this._rasterFadeDuration>0){const r=B.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setRasterFadeDuration(r){this._rasterFadeDuration=r}setFeatureState(r,u,p){this._state.updateState(r=r||"_geojsonTileLayer",u,p)}removeFeatureState(r,u,p){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,p)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,p){const _=this._tiles[r];_&&_.setDependencies(u,p)}reloadTilesForDependencies(r,u){for(const p in this._tiles)this._tiles[p].hasDependency(r,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(r,u))}}function Pr(b,r){const u=Math.abs(2*b.wrap)-+(b.wrap<0),p=Math.abs(2*r.wrap)-+(r.wrap<0);return b.overscaledZ-r.overscaledZ||p-u||r.canonical.y-b.canonical.y||r.canonical.x-b.canonical.x}function Jn(b){return b==="raster"||b==="image"||b==="video"}Ft.maxOverzooming=10,Ft.maxUnderzooming=3;class ci{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=c.ah(r,0,1);let u=1,p=this._distances[u];const _=r*this.paddedLength+this.padding;for(;p<_&&u<this._distances.length;)p=this._distances[++u];const w=u-1,A=this._distances[w],k=p-A,z=k>0?(_-A)/k:0;return this.points[w].mult(1-z).add(this.points[u].mult(z))}}function hn(b,r){let u=!0;return b==="always"||b!=="never"&&r!=="never"||(u=!1),u}class Zr{constructor(r,u,p){const _=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(r/p),this.yCellCount=Math.ceil(u/p);for(let A=0;A<this.xCellCount*this.yCellCount;A++)_.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,p,_,w){this._forEachCell(u,p,_,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(w)}insertCircle(r,u,p,_){this._forEachCell(u-_,p-_,u+_,p+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(p),this.circles.push(_)}_insertBoxCell(r,u,p,_,w,A){this.boxCells[w].push(A)}_insertCircleCell(r,u,p,_,w,A){this.circleCells[w].push(A)}_query(r,u,p,_,w,A,k){if(p<0||r>this.width||_<0||u>this.height)return[];const z=[];if(r<=0&&u<=0&&this.width<=p&&this.height<=_){if(w)return[{key:null,x1:r,y1:u,x2:p,y2:_}];for(let $=0;$<this.boxKeys.length;$++)z.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const q=this.circles[3*$],H=this.circles[3*$+1],G=this.circles[3*$+2];z.push({key:this.circleKeys[$],x1:q-G,y1:H-G,x2:q+G,y2:H+G})}}else this._forEachCell(r,u,p,_,this._queryCell,z,{hitTest:w,overlapMode:A,seenUids:{box:{},circle:{}}},k);return z}query(r,u,p,_){return this._query(r,u,p,_,!1,null)}hitTest(r,u,p,_,w,A){return this._query(r,u,p,_,!0,w,A).length>0}hitTestCircle(r,u,p,_,w){const A=r-p,k=r+p,z=u-p,$=u+p;if(k<0||A>this.width||$<0||z>this.height)return!1;const q=[];return this._forEachCell(A,z,k,$,this._queryCellCircle,q,{hitTest:!0,overlapMode:_,circle:{x:r,y:u,radius:p},seenUids:{box:{},circle:{}}},w),q.length>0}_queryCell(r,u,p,_,w,A,k,z){const{seenUids:$,hitTest:q,overlapMode:H}=k,G=this.boxCells[w];if(G!==null){const se=this.bboxes;for(const pe of G)if(!$.box[pe]){$.box[pe]=!0;const fe=4*pe,ge=this.boxKeys[pe];if(r<=se[fe+2]&&u<=se[fe+3]&&p>=se[fe+0]&&_>=se[fe+1]&&(!z||z(ge))&&(!q||!hn(H,ge.overlapMode))&&(A.push({key:ge,x1:se[fe],y1:se[fe+1],x2:se[fe+2],y2:se[fe+3]}),q))return!0}}const Q=this.circleCells[w];if(Q!==null){const se=this.circles;for(const pe of Q)if(!$.circle[pe]){$.circle[pe]=!0;const fe=3*pe,ge=this.circleKeys[pe];if(this._circleAndRectCollide(se[fe],se[fe+1],se[fe+2],r,u,p,_)&&(!z||z(ge))&&(!q||!hn(H,ge.overlapMode))){const ve=se[fe],Te=se[fe+1],xe=se[fe+2];if(A.push({key:ge,x1:ve-xe,y1:Te-xe,x2:ve+xe,y2:Te+xe}),q)return!0}}}return!1}_queryCellCircle(r,u,p,_,w,A,k,z){const{circle:$,seenUids:q,overlapMode:H}=k,G=this.boxCells[w];if(G!==null){const se=this.bboxes;for(const pe of G)if(!q.box[pe]){q.box[pe]=!0;const fe=4*pe,ge=this.boxKeys[pe];if(this._circleAndRectCollide($.x,$.y,$.radius,se[fe+0],se[fe+1],se[fe+2],se[fe+3])&&(!z||z(ge))&&!hn(H,ge.overlapMode))return A.push(!0),!0}}const Q=this.circleCells[w];if(Q!==null){const se=this.circles;for(const pe of Q)if(!q.circle[pe]){q.circle[pe]=!0;const fe=3*pe,ge=this.circleKeys[pe];if(this._circlesCollide(se[fe],se[fe+1],se[fe+2],$.x,$.y,$.radius)&&(!z||z(ge))&&!hn(H,ge.overlapMode))return A.push(!0),!0}}}_forEachCell(r,u,p,_,w,A,k,z){const $=this._convertToXCellCoord(r),q=this._convertToYCellCoord(u),H=this._convertToXCellCoord(p),G=this._convertToYCellCoord(_);for(let Q=$;Q<=H;Q++)for(let se=q;se<=G;se++)if(w.call(this,r,u,p,_,this.xCellCount*se+Q,A,k,z))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,p,_,w,A){const k=_-r,z=w-u,$=p+A;return $*$>k*k+z*z}_circleAndRectCollide(r,u,p,_,w,A,k){const z=(A-_)/2,$=Math.abs(r-(_+z));if($>z+p)return!1;const q=(k-w)/2,H=Math.abs(u-(w+q));if(H>q+p)return!1;if($<=z||H<=q)return!0;const G=$-z,Q=H-q;return G*G+Q*Q<=p*p}}function Tr(b,r,u){const p=c.L();if(!b){const{vecSouth:H,vecEast:G}=Ur(r),Q=C();Q[0]=G[0],Q[1]=G[1],Q[2]=H[0],Q[3]=H[1],_=Q,(q=(A=(w=Q)[0])*($=w[3])-(z=w[2])*(k=w[1]))&&(_[0]=$*(q=1/q),_[1]=-k*q,_[2]=-z*q,_[3]=A*q),p[0]=Q[0],p[1]=Q[1],p[4]=Q[2],p[5]=Q[3]}var _,w,A,k,z,$,q;return c.N(p,p,[1/u,1/u,1]),p}function An(b,r,u,p){if(b){const _=c.L();if(!r){const{vecSouth:w,vecEast:A}=Ur(u);_[0]=A[0],_[1]=A[1],_[4]=w[0],_[5]=w[1]}return c.N(_,_,[p,p,1]),_}return u.pixelsToClipSpaceMatrix}function Ur(b){const r=Math.cos(b.rollInRadians),u=Math.sin(b.rollInRadians),p=Math.cos(b.pitchInRadians),_=Math.cos(b.bearingInRadians),w=Math.sin(b.bearingInRadians),A=c.ar();A[0]=-_*p*u-w*r,A[1]=-w*p*u+_*r;const k=c.as(A);k<1e-9?c.at(A):c.au(A,A,1/k);const z=c.ar();z[0]=_*p*r-w*u,z[1]=w*p*r+_*u;const $=c.as(z);return $<1e-9?c.at(z):c.au(z,z,1/$),{vecEast:z,vecSouth:A}}function wt(b,r,u,p){let _;p?(_=[b,r,p(b,r),1],c.aw(_,_,u)):(_=[b,r,0,1],ul(_,_,u));const w=_[3];return{point:new c.P(_[0]/w,_[1]/w),signedDistanceFromCamera:w,isOccluded:!1}}function Po(b,r){return .5+b/r*.5}function ca(b,r){return b.x>=-r[0]&&b.x<=r[0]&&b.y>=-r[1]&&b.y<=r[1]}function Ai(b,r,u,p,_,w,A,k,z,$,q,H,G){const Q=u?b.textSizeData:b.iconSizeData,se=c.an(Q,r.transform.zoom),pe=[256/r.width*2+1,256/r.height*2+1],fe=u?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;fe.clear();const ge=b.lineVertexArray,ve=u?b.text.placedSymbolArray:b.icon.placedSymbolArray,Te=r.transform.width/r.transform.height;let xe=!1;for(let Ce=0;Ce<ve.length;Ce++){const Oe=ve.get(Ce);if(Oe.hidden||Oe.writingMode===c.ao.vertical&&!xe){Co(Oe.numGlyphs,fe);continue}xe=!1;const we=new c.P(Oe.anchorX,Oe.anchorY),Re={getElevation:G,pitchedLabelPlaneMatrix:p,lineVertexArray:ge,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:we,unwrappedTileID:z,width:$,height:q,translation:H},nt=gr(Oe.anchorX,Oe.anchorY,Re);if(!ca(nt.point,pe)){Co(Oe.numGlyphs,fe);continue}const We=Po(r.transform.cameraToCenterDistance,nt.signedDistanceFromCamera),Ke=c.ap(Q,se,Oe),Qe=w?Ke*r.transform.getPitchedTextCorrection(Oe.anchorX,Oe.anchorY,z)/We:Ke*We,Tt=fr({projectionContext:Re,pitchedLabelPlaneMatrixInverse:_,symbol:Oe,fontSize:Qe,flip:!1,keepUpright:A,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:fe,aspectRatio:Te,rotateToLine:k});xe=Tt.useVertical,(Tt.notEnoughRoom||xe||Tt.needsFlipping&&fr({projectionContext:Re,pitchedLabelPlaneMatrixInverse:_,symbol:Oe,fontSize:Qe,flip:!0,keepUpright:A,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:fe,aspectRatio:Te,rotateToLine:k}).notEnoughRoom)&&Co(Oe.numGlyphs,fe)}u?b.text.dynamicLayoutVertexBuffer.updateData(fe):b.icon.dynamicLayoutVertexBuffer.updateData(fe)}function Wn(b,r,u,p,_,w,A,k){const z=w.glyphStartIndex+w.numGlyphs,$=w.lineStartIndex,q=w.lineStartIndex+w.lineLength,H=r.getoffsetX(w.glyphStartIndex),G=r.getoffsetX(z-1),Q=cl(b*H,u,p,_,w.segment,$,q,k,A);if(!Q)return null;const se=cl(b*G,u,p,_,w.segment,$,q,k,A);return se?k.projectionCache.anyProjectionOccluded?null:{first:Q,last:se}:null}function Ct(b,r,u,p){return b===c.ao.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*p?{useVertical:!0}:(b===c.ao.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function fr(b){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:u,symbol:p,fontSize:_,flip:w,keepUpright:A,glyphOffsetArray:k,dynamicLayoutVertexArray:z,aspectRatio:$,rotateToLine:q}=b,H=_/24,G=p.lineOffsetX*H,Q=p.lineOffsetY*H;let se;if(p.numGlyphs>1){const pe=p.glyphStartIndex+p.numGlyphs,fe=p.lineStartIndex,ge=p.lineStartIndex+p.lineLength,ve=Wn(H,k,G,Q,w,p,q,r);if(!ve)return{notEnoughRoom:!0};const Te=so(ve.first.point.x,ve.first.point.y,r,u),xe=so(ve.last.point.x,ve.last.point.y,r,u);if(A&&!w){const Ce=Ct(p.writingMode,Te,xe,$);if(Ce)return Ce}se=[ve.first];for(let Ce=p.glyphStartIndex+1;Ce<pe-1;Ce++){const Oe=cl(H*k.getoffsetX(Ce),G,Q,w,p.segment,fe,ge,r,q);if(!Oe)return{notEnoughRoom:!0};se.push(Oe)}se.push(ve.last)}else{if(A&&!w){const fe=dn(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,ge=p.lineStartIndex+p.segment+1,ve=new c.P(r.lineVertexArray.getx(ge),r.lineVertexArray.gety(ge)),Te=dn(ve.x,ve.y,r),xe=Te.signedDistanceFromCamera>0?Te.point:dr(r.tileAnchorPoint,ve,fe,1,r),Ce=so(fe.x,fe.y,r,u),Oe=so(xe.x,xe.y,r,u),we=Ct(p.writingMode,Ce,Oe,$);if(we)return we}const pe=cl(H*k.getoffsetX(p.glyphStartIndex),G,Q,w,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,r,q);if(!pe||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};se=[pe]}for(const pe of se)c.av(z,pe.point,pe.angle);return{}}function dr(b,r,u,p,_){const w=b.add(b.sub(r)._unit()),A=dn(w.x,w.y,_).point,k=u.sub(A);return u.add(k._mult(p/k.mag()))}function yi(b,r,u){const p=r.projectionCache;if(p.projections[b])return p.projections[b];const _=new c.P(r.lineVertexArray.getx(b),r.lineVertexArray.gety(b)),w=dn(_.x,_.y,r);if(w.signedDistanceFromCamera>0)return p.projections[b]=w.point,p.anyProjectionOccluded=p.anyProjectionOccluded||w.isOccluded,w.point;const A=b-u.direction;return dr(u.distanceFromAnchor===0?r.tileAnchorPoint:new c.P(r.lineVertexArray.getx(A),r.lineVertexArray.gety(A)),_,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,r)}function dn(b,r,u){const p=b+u.translation[0],_=r+u.translation[1];let w;return u.pitchWithMap?(w=wt(p,_,u.pitchedLabelPlaneMatrix,u.getElevation),w.isOccluded=!1):(w=u.transform.projectTileCoordinates(p,_,u.unwrappedTileID,u.getElevation),w.point.x=(.5*w.point.x+.5)*u.width,w.point.y=(.5*-w.point.y+.5)*u.height),w}function so(b,r,u,p){if(u.pitchWithMap){const _=[b,r,0,1];return c.aw(_,_,p),u.transform.projectTileCoordinates(_[0]/_[3],_[1]/_[3],u.unwrappedTileID,u.getElevation).point}return{x:b/u.width*2-1,y:1-r/u.height*2}}function gr(b,r,u){return u.transform.projectTileCoordinates(b,r,u.unwrappedTileID,u.getElevation)}function Fa(b,r,u){return b._unit()._perp()._mult(r*u)}function Eo(b,r,u,p,_,w,A,k,z){if(k.projectionCache.offsets[b])return k.projectionCache.offsets[b];const $=u.add(r);if(b+z.direction<p||b+z.direction>=_)return k.projectionCache.offsets[b]=$,$;const q=yi(b+z.direction,k,z),H=Fa(q.sub(u),A,z.direction),G=u.add(H),Q=q.add(H);return k.projectionCache.offsets[b]=c.ax(w,$,G,Q)||$,k.projectionCache.offsets[b]}function cl(b,r,u,p,_,w,A,k,z){const $=p?b-r:b+r;let q=$>0?1:-1,H=0;p&&(q*=-1,H=Math.PI),q<0&&(H+=Math.PI);let G,Q=q>0?w+_:w+_+1;k.projectionCache.cachedAnchorPoint?G=k.projectionCache.cachedAnchorPoint:(G=dn(k.tileAnchorPoint.x,k.tileAnchorPoint.y,k).point,k.projectionCache.cachedAnchorPoint=G);let se,pe,fe=G,ge=G,ve=0,Te=0;const xe=Math.abs($),Ce=[];let Oe;for(;ve+Te<=xe;){if(Q+=q,Q<w||Q>=A)return null;ve+=Te,ge=fe,pe=se;const nt={absOffsetX:xe,direction:q,distanceFromAnchor:ve,previousVertex:ge};if(fe=yi(Q,k,nt),u===0)Ce.push(ge),Oe=fe.sub(ge);else{let We;const Ke=fe.sub(ge);We=Ke.mag()===0?Fa(yi(Q+q,k,nt).sub(fe),u,q):Fa(Ke,u,q),pe||(pe=ge.add(We)),se=Eo(Q,We,fe,w,A,pe,u,k,nt),Ce.push(pe),Oe=se.sub(pe)}Te=Oe.mag()}const we=Oe._mult((xe-ve)/Te)._add(pe||ge),Re=H+Math.atan2(fe.y-ge.y,fe.x-ge.x);return Ce.push(we),{point:we,angle:z?Re:0,path:Ce}}const lc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Co(b,r){for(let u=0;u<b;u++){const p=r.length;r.resize(p+4),r.float32.set(lc,3*p)}}function ul(b,r,u){const p=r[0],_=r[1];return b[0]=u[0]*p+u[4]*_+u[12],b[1]=u[1]*p+u[5]*_+u[13],b[3]=u[3]*p+u[7]*_+u[15],b}const Mn=100;class Di{constructor(r,u=new Zr(r.width+200,r.height+200,25),p=new Zr(r.width+200,r.height+200,25)){this.transform=r,this.grid=u,this.ignoredGrid=p,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Mn,this.screenBottomBoundary=r.height+Mn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,p,_,w,A,k,z,$,q,H,G){const Q=this.projectAndGetPerspectiveRatio(r.anchorPointX+z[0],r.anchorPointY+z[1],w,q,G),se=p*Q.perspectiveRatio;let pe;if(A||k)pe=this._projectCollisionBox(r,se,_,w,A,k,z,Q,q,H,G);else{const Oe=Q.x+(H?H.x*se:0),we=Q.y+(H?H.y*se:0);pe={allPointsOccluded:!1,box:[Oe+r.x1*se,we+r.y1*se,Oe+r.x2*se,we+r.y2*se]}}const[fe,ge,ve,Te]=pe.box,xe=A?pe.allPointsOccluded:Q.isOccluded;let Ce=xe;return Ce||(Ce=Q.perspectiveRatio<this.perspectiveRatioCutoff),Ce||(Ce=!this.isInsideGrid(fe,ge,ve,Te)),Ce||u!=="always"&&this.grid.hitTest(fe,ge,ve,Te,u,$)?{box:[fe,ge,ve,Te],placeable:!1,offscreen:!1,occluded:xe}:{box:[fe,ge,ve,Te],placeable:!0,offscreen:this.isOffscreen(fe,ge,ve,Te),occluded:xe}}placeCollisionCircles(r,u,p,_,w,A,k,z,$,q,H,G,Q,se){const pe=[],fe=new c.P(u.anchorX,u.anchorY),ge=this.getPerspectiveRatio(fe.x,fe.y,A,se),ve=($?w*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,A)/ge:w*ge)/c.aB,Te={getElevation:se,pitchedLabelPlaneMatrix:k,lineVertexArray:p,pitchWithMap:$,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:fe,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:Q},xe=Wn(ve,_,u.lineOffsetX*ve,u.lineOffsetY*ve,!1,u,!1,Te);let Ce=!1,Oe=!1,we=!0;if(xe){const Re=.5*H*ge+G,nt=new c.P(-100,-100),We=new c.P(this.screenRightBoundary,this.screenBottomBoundary),Ke=new ci,Qe=xe.first,Tt=xe.last;let At=[];for(let or=Qe.path.length-1;or>=1;or--)At.push(Qe.path[or]);for(let or=1;or<Tt.path.length;or++)At.push(Tt.path[or]);const yt=2.5*Re;if($){const or=this.projectPathToScreenSpace(At,Te);At=or.some(Hr=>Hr.signedDistanceFromCamera<=0)?[]:or.map(Hr=>Hr.point)}let Lt=[];if(At.length>0){const or=At[0].clone(),Hr=At[0].clone();for(let Xr=1;Xr<At.length;Xr++)or.x=Math.min(or.x,At[Xr].x),or.y=Math.min(or.y,At[Xr].y),Hr.x=Math.max(Hr.x,At[Xr].x),Hr.y=Math.max(Hr.y,At[Xr].y);Lt=or.x>=nt.x&&Hr.x<=We.x&&or.y>=nt.y&&Hr.y<=We.y?[At]:Hr.x<nt.x||or.x>We.x||Hr.y<nt.y||or.y>We.y?[]:c.ay([At],nt.x,nt.y,We.x,We.y)}for(const or of Lt){Ke.reset(or,.25*Re);let Hr=0;Hr=Ke.length<=.5*Re?1:Math.ceil(Ke.paddedLength/yt)+1;for(let Xr=0;Xr<Hr;Xr++){const ln=Xr/Math.max(Hr-1,1),Cn=Ke.lerp(ln),cn=Cn.x+Mn,wr=Cn.y+Mn;pe.push(cn,wr,Re,0);const fn=cn-Re,ii=wr-Re,Fn=cn+Re,$n=wr+Re;if(we=we&&this.isOffscreen(fn,ii,Fn,$n),Oe=Oe||this.isInsideGrid(fn,ii,Fn,$n),r!=="always"&&this.grid.hitTestCircle(cn,wr,Re,r,q)&&(Ce=!0,!z))return{circles:[],offscreen:!1,collisionDetected:Ce}}}}return{circles:!z&&Ce||!Oe||ge<this.perspectiveRatioCutoff?[]:pe,offscreen:we,collisionDetected:Ce}}projectPathToScreenSpace(r,u){const p=function(_,w){const A=c.L();return c.aq(A,w.pitchedLabelPlaneMatrix),_.map(k=>{const z=wt(k.x,k.y,A,w.getElevation),$=w.transform.projectTileCoordinates(z.point.x,z.point.y,w.unwrappedTileID,w.getElevation);return $.point.x=(.5*$.point.x+.5)*w.width,$.point.y=(.5*-$.point.y+.5)*w.height,$})}(r,u);return function(_){let w=0,A=0,k=0,z=0;for(let $=0;$<_.length;$++)_[$].isOccluded?(k=$+1,z=0):(z++,z>A&&(A=z,w=k));return _.slice(w,w+A)}(p)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[],p=new c.a2;for(const H of r){const G=new c.P(H.x+Mn,H.y+Mn);p.extend(G),u.push(G)}const{minX:_,minY:w,maxX:A,maxY:k}=p,z=this.grid.query(_,w,A,k).concat(this.ignoredGrid.query(_,w,A,k)),$={},q={};for(const H of z){const G=H.key;if($[G.bucketInstanceId]===void 0&&($[G.bucketInstanceId]={}),$[G.bucketInstanceId][G.featureIndex])continue;const Q=[new c.P(H.x1,H.y1),new c.P(H.x2,H.y1),new c.P(H.x2,H.y2),new c.P(H.x1,H.y2)];c.az(u,Q)&&($[G.bucketInstanceId][G.featureIndex]=!0,q[G.bucketInstanceId]===void 0&&(q[G.bucketInstanceId]=[]),q[G.bucketInstanceId].push(G.featureIndex))}return q}insertCollisionBox(r,u,p,_,w,A){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:w,collisionGroupID:A,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,p,_,w,A){const k=p?this.ignoredGrid:this.grid,z={bucketInstanceId:_,featureIndex:w,collisionGroupID:A,overlapMode:u};for(let $=0;$<r.length;$+=4)k.insertCircle(z,r[$],r[$+1],r[$+2])}projectAndGetPerspectiveRatio(r,u,p,_,w){if(w){let A;_?(A=[r,u,_(r,u),1],c.aw(A,A,w)):(A=[r,u,0,1],ul(A,A,w));const k=A[3];return{x:(A[0]/k+1)/2*this.transform.width+Mn,y:(-A[1]/k+1)/2*this.transform.height+Mn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/k*.5,isOccluded:!1,signedDistanceFromCamera:k}}{const A=this.transform.projectTileCoordinates(r,u,p,_);return{x:(A.point.x+1)/2*this.transform.width+Mn,y:(1-A.point.y)/2*this.transform.height+Mn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5,isOccluded:A.isOccluded,signedDistanceFromCamera:A.signedDistanceFromCamera}}}getPerspectiveRatio(r,u,p,_){const w=this.transform.projectTileCoordinates(r,u,p,_);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(r,u,p,_){return p<Mn||r>=this.screenRightBoundary||_<Mn||u>this.screenBottomBoundary}isInsideGrid(r,u,p,_){return p>=0&&r<this.gridRightBoundary&&_>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=c.ag([]);return c.M(r,r,[-100,-100,0]),r}_projectCollisionBox(r,u,p,_,w,A,k,z,$,q,H){let G=1,Q=0,se=0,pe=1;const fe=r.anchorPointX+k[0],ge=r.anchorPointY+k[1];if(A&&!w){const At=this.projectAndGetPerspectiveRatio(fe+1,ge,_,$,H),yt=At.x-z.x,Lt=Math.atan((At.y-z.y)/yt)+(yt<0?Math.PI:0),or=Math.sin(Lt),Hr=Math.cos(Lt);G=Hr,Q=or,se=-or,pe=Hr}else if(!A&&w){const At=Ur(this.transform);G=At.vecEast[0],Q=At.vecEast[1],se=At.vecSouth[0],pe=At.vecSouth[1]}let ve=z.x,Te=z.y,xe=u;w&&(ve=fe,Te=ge,xe=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),xe*=this.transform.getPitchedTextCorrection(fe,ge,_),q||(xe*=c.ah(.5+z.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),q&&(ve+=G*q.x*xe+se*q.y*xe,Te+=Q*q.x*xe+pe*q.y*xe);const Ce=r.x1*xe,Oe=r.x2*xe,we=(Ce+Oe)/2,Re=r.y1*xe,nt=r.y2*xe,We=(Re+nt)/2,Ke=[{offsetX:Ce,offsetY:Re},{offsetX:we,offsetY:Re},{offsetX:Oe,offsetY:Re},{offsetX:Oe,offsetY:We},{offsetX:Oe,offsetY:nt},{offsetX:we,offsetY:nt},{offsetX:Ce,offsetY:nt},{offsetX:Ce,offsetY:We}];let Qe=[];for(const{offsetX:At,offsetY:yt}of Ke)Qe.push(new c.P(ve+G*At+se*yt,Te+Q*At+pe*yt));let Tt=!1;if(w){const At=Qe.map(yt=>this.projectAndGetPerspectiveRatio(yt.x,yt.y,_,$,H));Tt=At.some(yt=>!yt.isOccluded),Qe=At.map(yt=>new c.P(yt.x,yt.y))}else Tt=!0;return{box:c.aA(Qe),allPointsOccluded:!Tt}}}class Vr{constructor(r,u,p,_){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):_&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class hl{constructor(r,u,p,_,w){this.text=new Vr(r?r.text:null,u,p,w),this.icon=new Vr(r?r.icon:null,u,_,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class dl{constructor(r,u,p){this.text=r,this.icon=u,this.skipFade=p}}class As{constructor(r,u,p,_,w){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=_,this.tileID=w}}class rs{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[r]}}function lo(b,r,u,p,_){const{horizontalAlign:w,verticalAlign:A}=c.aH(b);return new c.P(-(w-.5)*r+p[0]*_,-(A-.5)*u+p[1]*_)}class If{constructor(r,u,p,_,w){this.transform=r.clone(),this.terrain=u,this.collisionIndex=new Di(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new rs(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const u=this.terrain;return u?(p,_)=>u.getElevation(r,p,_):null}getBucketParts(r,u,p,_){const w=p.getBucket(u),A=p.latestFeatureIndex;if(!w||!A||u.id!==w.layerIds[0])return;const k=p.collisionBoxArray,z=w.layers[0].layout,$=w.layers[0].paint,q=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),H=p.tileSize/c.$,G=p.tileID.toUnwrapped(),Q=z.get("text-rotation-alignment")==="map",se=c.aC(p,1,this.transform.zoom),pe=c.aD(this.collisionIndex.transform,p,$.get("text-translate"),$.get("text-translate-anchor")),fe=c.aD(this.collisionIndex.transform,p,$.get("icon-translate"),$.get("icon-translate-anchor")),ge=Tr(Q,this.transform,se);this.retainedQueryData[w.bucketInstanceId]=new As(w.bucketInstanceId,A,w.sourceLayerIndex,w.index,p.tileID);const ve={bucket:w,layout:z,translationText:pe,translationIcon:fe,unwrappedTileID:G,pitchedLabelPlaneMatrix:ge,scale:q,textPixelRatio:H,holdingForFade:p.holdingForSymbolFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:c.an(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(_)for(const Te of w.sortKeyRanges){const{sortKey:xe,symbolInstanceStart:Ce,symbolInstanceEnd:Oe}=Te;r.push({sortKey:xe,symbolInstanceStart:Ce,symbolInstanceEnd:Oe,parameters:ve})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:ve})}attemptAnchorPlacement(r,u,p,_,w,A,k,z,$,q,H,G,Q,se,pe,fe,ge,ve,Te,xe){const Ce=c.aE[r.textAnchor],Oe=[r.textOffset0,r.textOffset1],we=lo(Ce,p,_,Oe,w),Re=this.collisionIndex.placeCollisionBox(u,G,z,$,q,k,A,fe,H.predicate,Te,we,xe);if((!ve||this.collisionIndex.placeCollisionBox(ve,G,z,$,q,k,A,ge,H.predicate,Te,we,xe).placeable)&&Re.placeable){let nt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(nt=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),Q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Q.crossTileID]={textOffset:Oe,width:p,height:_,anchor:Ce,textBoxScale:w,prevAnchor:nt},this.markUsedJustification(se,Ce,Q,pe),se.allowVerticalPlacement&&(this.markUsedOrientation(se,pe,Q),this.placedOrientations[Q.crossTileID]=pe),{shift:we,placedGlyphBoxes:Re}}}placeLayerBucketPart(r,u,p){const{bucket:_,layout:w,translationText:A,translationIcon:k,unwrappedTileID:z,pitchedLabelPlaneMatrix:$,textPixelRatio:q,holdingForFade:H,collisionBoxArray:G,partiallyEvaluatedTextSize:Q,collisionGroup:se}=r.parameters,pe=w.get("text-optional"),fe=w.get("icon-optional"),ge=c.aF(w,"text-overlap","text-allow-overlap"),ve=ge==="always",Te=c.aF(w,"icon-overlap","icon-allow-overlap"),xe=Te==="always",Ce=w.get("text-rotation-alignment")==="map",Oe=w.get("text-pitch-alignment")==="map",we=w.get("icon-text-fit")!=="none",Re=w.get("symbol-z-order")==="viewport-y",nt=ve&&(xe||!_.hasIconData()||fe),We=xe&&(ve||!_.hasTextData()||pe);!_.collisionArrays&&G&&_.deserializeCollisionBoxes(G);const Ke=this.retainedQueryData[_.bucketInstanceId].tileID,Qe=this._getTerrainElevationFunc(Ke),Tt=this.transform.getFastPathSimpleProjectionMatrix(Ke),At=(yt,Lt,or)=>{var Hr,Xr;if(u[yt.crossTileID])return;if(H)return void(this.placements[yt.crossTileID]=new dl(!1,!1,!1));let ln=!1,Cn=!1,cn=!0,wr=null,fn={box:null,placeable:!1,offscreen:null,occluded:!1},ii={placeable:!1},Fn=null,$n=null,xi=null,ms=0,Ka=0,Gs=0;Lt.textFeatureIndex?ms=Lt.textFeatureIndex:yt.useRuntimeCollisionCircles&&(ms=yt.featureIndex),Lt.verticalTextFeatureIndex&&(Ka=Lt.verticalTextFeatureIndex);const Qa=Lt.textBox;if(Qa){const qi=Dn=>{let on=c.ao.horizontal;if(_.allowVerticalPlacement&&!Dn&&this.prevPlacement){const qn=this.prevPlacement.placedOrientations[yt.crossTileID];qn&&(this.placedOrientations[yt.crossTileID]=qn,on=qn,this.markUsedOrientation(_,on,yt))}return on},_o=(Dn,on)=>{if(_.allowVerticalPlacement&&yt.numVerticalGlyphVertices>0&&Lt.verticalTextBox){for(const qn of _.writingModes)if(qn===c.ao.vertical?(fn=on(),ii=fn):fn=Dn(),fn&&fn.placeable)break}else fn=Dn()},bo=yt.textAnchorOffsetStartIndex,wi=yt.textAnchorOffsetEndIndex;if(wi===bo){const Dn=(on,qn)=>{const Sn=this.collisionIndex.placeCollisionBox(on,ge,q,Ke,z,Oe,Ce,A,se.predicate,Qe,void 0,Tt);return Sn&&Sn.placeable&&(this.markUsedOrientation(_,qn,yt),this.placedOrientations[yt.crossTileID]=qn),Sn};_o(()=>Dn(Qa,c.ao.horizontal),()=>{const on=Lt.verticalTextBox;return _.allowVerticalPlacement&&yt.numVerticalGlyphVertices>0&&on?Dn(on,c.ao.vertical):{box:null,offscreen:null}}),qi(fn&&fn.placeable)}else{let Dn=c.aE[(Xr=(Hr=this.prevPlacement)===null||Hr===void 0?void 0:Hr.variableOffsets[yt.crossTileID])===null||Xr===void 0?void 0:Xr.anchor];const on=(Sn,jh,Ja)=>{const ea=Sn.x2-Sn.x1,pn=Sn.y2-Sn.y1,_a=yt.textBoxScale,Go=we&&Te==="never"?jh:null;let Zo=null,Oh=ge==="never"?1:2,Ih="never";Dn&&Oh++;for(let ba=0;ba<Oh;ba++){for(let Oc=bo;Oc<wi;Oc++){const kh=_.textAnchorOffsets.get(Oc);if(Dn&&kh.textAnchor!==Dn)continue;const Ic=this.attemptAnchorPlacement(kh,Sn,ea,pn,_a,Ce,Oe,q,Ke,z,se,Ih,yt,_,Ja,A,k,Go,Qe);if(Ic&&(Zo=Ic.placedGlyphBoxes,Zo&&Zo.placeable))return ln=!0,wr=Ic.shift,Zo}Dn?Dn=null:Ih=ge}return p&&!Zo&&(Zo={box:this.collisionIndex.placeCollisionBox(Qa,"always",q,Ke,z,Oe,Ce,A,se.predicate,Qe,void 0,Tt).box,offscreen:!1,placeable:!1,occluded:!1}),Zo};_o(()=>on(Qa,Lt.iconBox,c.ao.horizontal),()=>{const Sn=Lt.verticalTextBox;return _.allowVerticalPlacement&&(!fn||!fn.placeable)&&yt.numVerticalGlyphVertices>0&&Sn?on(Sn,Lt.verticalIconBox,c.ao.vertical):{box:null,occluded:!0,offscreen:null}}),fn&&(ln=fn.placeable,cn=fn.offscreen);const qn=qi(fn&&fn.placeable);if(!ln&&this.prevPlacement){const Sn=this.prevPlacement.variableOffsets[yt.crossTileID];Sn&&(this.variableOffsets[yt.crossTileID]=Sn,this.markUsedJustification(_,Sn.anchor,yt,qn))}}}if(Fn=fn,ln=Fn&&Fn.placeable,cn=Fn&&Fn.offscreen,yt.useRuntimeCollisionCircles&&yt.centerJustifiedTextSymbolIndex>=0){const qi=_.text.placedSymbolArray.get(yt.centerJustifiedTextSymbolIndex),_o=c.ap(_.textSizeData,Q,qi),bo=w.get("text-padding");$n=this.collisionIndex.placeCollisionCircles(ge,qi,_.lineVertexArray,_.glyphOffsetArray,_o,z,$,p,Oe,se.predicate,yt.collisionCircleDiameter,bo,A,Qe),$n.circles.length&&$n.collisionDetected&&!p&&c.w("Collisions detected, but collision boxes are not shown"),ln=ve||$n.circles.length>0&&!$n.collisionDetected,cn=cn&&$n.offscreen}if(Lt.iconFeatureIndex&&(Gs=Lt.iconFeatureIndex),Lt.iconBox){const qi=_o=>this.collisionIndex.placeCollisionBox(_o,Te,q,Ke,z,Oe,Ce,k,se.predicate,Qe,we&&wr?wr:void 0,Tt);ii&&ii.placeable&&Lt.verticalIconBox?(xi=qi(Lt.verticalIconBox),Cn=xi.placeable):(xi=qi(Lt.iconBox),Cn=xi.placeable),cn=cn&&xi.offscreen}const Zs=pe||yt.numHorizontalGlyphVertices===0&&yt.numVerticalGlyphVertices===0,gs=fe||yt.numIconVertices===0;Zs||gs?gs?Zs||(Cn=Cn&&ln):ln=Cn&&ln:Cn=ln=Cn&&ln;const ka=Cn&&xi.placeable;if(ln&&Fn.placeable&&this.collisionIndex.insertCollisionBox(Fn.box,ge,w.get("text-ignore-placement"),_.bucketInstanceId,ii&&ii.placeable&&Ka?Ka:ms,se.ID),ka&&this.collisionIndex.insertCollisionBox(xi.box,Te,w.get("icon-ignore-placement"),_.bucketInstanceId,Gs,se.ID),$n&&ln&&this.collisionIndex.insertCollisionCircles($n.circles,ge,w.get("text-ignore-placement"),_.bucketInstanceId,ms,se.ID),p&&this.storeCollisionData(_.bucketInstanceId,or,Lt,Fn,xi,$n),yt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[yt.crossTileID]=new dl((ln||nt)&&!(Fn!=null&&Fn.occluded),(Cn||We)&&!(xi!=null&&xi.occluded),cn||_.justReloaded),u[yt.crossTileID]=!0};if(Re){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const yt=_.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Lt=yt.length-1;Lt>=0;--Lt){const or=yt[Lt];At(_.symbolInstances.get(or),_.collisionArrays[or],or)}}else for(let yt=r.symbolInstanceStart;yt<r.symbolInstanceEnd;yt++)At(_.symbolInstances.get(yt),_.collisionArrays[yt],yt);_.justReloaded=!1}storeCollisionData(r,u,p,_,w,A){if(p.textBox||p.iconBox){let k,z;this.collisionBoxArrays.has(r)?k=this.collisionBoxArrays.get(r):(k=new Map,this.collisionBoxArrays.set(r,k)),k.has(u)?z=k.get(u):(z={text:null,icon:null},k.set(u,z)),p.textBox&&(z.text=_.box),p.iconBox&&(z.icon=w.box)}if(A){let k=this.collisionCircleArrays[r];k===void 0&&(k=this.collisionCircleArrays[r]=[]);for(let z=0;z<A.circles.length;z+=4)k.push(A.circles[z+0]-Mn),k.push(A.circles[z+1]-Mn),k.push(A.circles[z+2]),k.push(A.collisionDetected?1:0)}}markUsedJustification(r,u,p,_){let w;w=_===c.ao.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[c.aG(u)];const A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const k of A)k>=0&&(r.text.placedSymbolArray.get(k).crossTileID=w>=0&&k!==w?0:p.crossTileID)}markUsedOrientation(r,u,p){const _=u===c.ao.horizontal||u===c.ao.horizontalOnly?u:0,w=u===c.ao.vertical?u:0,A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const k of A)r.text.placedSymbolArray.get(k).placedOrientation=_;p.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const _=u?u.symbolFadeChange(r):1,w=u?u.opacities:{},A=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const z in this.placements){const $=this.placements[z],q=w[z];q?(this.opacities[z]=new hl(q,_,$.text,$.icon),p=p||$.text!==q.text.placed||$.icon!==q.icon.placed):(this.opacities[z]=new hl(null,_,$.text,$.icon,$.skipFade),p=p||$.text||$.icon)}for(const z in w){const $=w[z];if(!this.opacities[z]){const q=new hl($,_,!1,!1);q.isHidden()||(this.opacities[z]=q,p=p||$.text.placed||$.icon.placed)}}for(const z in A)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=A[z]);for(const z in k)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=k[z]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const p={};for(const _ of u){const w=_.getBucket(r);w&&_.latestFeatureIndex&&r.id===w.layerIds[0]&&this.updateBucketOpacities(w,_.tileID,p,_.collisionBoxArray)}}updateBucketOpacities(r,u,p,_){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const w=r.layers[0],A=w.layout,k=new hl(null,0,!1,!1,!0),z=A.get("text-allow-overlap"),$=A.get("icon-allow-overlap"),q=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),H=A.get("text-rotation-alignment")==="map",G=A.get("text-pitch-alignment")==="map",Q=A.get("icon-text-fit")!=="none",se=new hl(null,0,z&&($||!r.hasIconData()||A.get("icon-optional")),$&&(z||!r.hasTextData()||A.get("text-optional")),!0);!r.collisionArrays&&_&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(_);const pe=(ge,ve,Te)=>{for(let xe=0;xe<ve/4;xe++)ge.opacityVertexArray.emplaceBack(Te);ge.hasVisibleVertices=ge.hasVisibleVertices||Te!==ns},fe=this.collisionBoxArrays.get(r.bucketInstanceId);for(let ge=0;ge<r.symbolInstances.length;ge++){const ve=r.symbolInstances.get(ge),{numHorizontalGlyphVertices:Te,numVerticalGlyphVertices:xe,crossTileID:Ce}=ve;let Oe=this.opacities[Ce];p[Ce]?Oe=k:Oe||(Oe=se,this.opacities[Ce]=Oe),p[Ce]=!0;const we=ve.numIconVertices>0,Re=this.placedOrientations[ve.crossTileID],nt=Re===c.ao.vertical,We=Re===c.ao.horizontal||Re===c.ao.horizontalOnly;if(Te>0||xe>0){const Qe=ua(Oe.text);pe(r.text,Te,nt?ns:Qe),pe(r.text,xe,We?ns:Qe);const Tt=Oe.text.isHidden();[ve.rightJustifiedTextSymbolIndex,ve.centerJustifiedTextSymbolIndex,ve.leftJustifiedTextSymbolIndex].forEach(Lt=>{Lt>=0&&(r.text.placedSymbolArray.get(Lt).hidden=Tt||nt?1:0)}),ve.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ve.verticalPlacedTextSymbolIndex).hidden=Tt||We?1:0);const At=this.variableOffsets[ve.crossTileID];At&&this.markUsedJustification(r,At.anchor,ve,Re);const yt=this.placedOrientations[ve.crossTileID];yt&&(this.markUsedJustification(r,"left",ve,yt),this.markUsedOrientation(r,yt,ve))}if(we){const Qe=ua(Oe.icon),Tt=!(Q&&ve.verticalPlacedIconSymbolIndex&&nt);ve.placedIconSymbolIndex>=0&&(pe(r.icon,ve.numIconVertices,Tt?Qe:ns),r.icon.placedSymbolArray.get(ve.placedIconSymbolIndex).hidden=Oe.icon.isHidden()),ve.verticalPlacedIconSymbolIndex>=0&&(pe(r.icon,ve.numVerticalIconVertices,Tt?ns:Qe),r.icon.placedSymbolArray.get(ve.verticalPlacedIconSymbolIndex).hidden=Oe.icon.isHidden())}const Ke=fe&&fe.has(ge)?fe.get(ge):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Qe=r.collisionArrays[ge];if(Qe){let Tt=new c.P(0,0);if(Qe.textBox||Qe.verticalTextBox){let At=!0;if(q){const yt=this.variableOffsets[Ce];yt?(Tt=lo(yt.anchor,yt.width,yt.height,yt.textOffset,yt.textBoxScale),H&&Tt._rotate(G?-this.transform.bearingInRadians:this.transform.bearingInRadians)):At=!1}if(Qe.textBox||Qe.verticalTextBox){let yt;Qe.textBox&&(yt=nt),Qe.verticalTextBox&&(yt=We),Qu(r.textCollisionBox.collisionVertexArray,Oe.text.placed,!At||yt,Ke.text,Tt.x,Tt.y)}}if(Qe.iconBox||Qe.verticalIconBox){const At=!!(!We&&Qe.verticalIconBox);let yt;Qe.iconBox&&(yt=At),Qe.verticalIconBox&&(yt=!At),Qu(r.iconCollisionBox.collisionVertexArray,Oe.icon.placed,yt,Ke.icon,Q?Tt.x:0,Q?Tt.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>r}setStale(){this.stale=!0}}function Qu(b,r,u,p,_,w){p&&p.length!==0||(p=[0,0,0,0]);const A=p[0]-Mn,k=p[1]-Mn,z=p[2]-Mn,$=p[3]-Mn;b.emplaceBack(r?1:0,u?1:0,_||0,w||0,A,k),b.emplaceBack(r?1:0,u?1:0,_||0,w||0,z,k),b.emplaceBack(r?1:0,u?1:0,_||0,w||0,z,$),b.emplaceBack(r?1:0,u?1:0,_||0,w||0,A,$)}const Ma=Math.pow(2,25),fl=Math.pow(2,24),kf=Math.pow(2,17),Ju=Math.pow(2,16),zf=Math.pow(2,9),eh=Math.pow(2,8),Df=Math.pow(2,1);function ua(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const r=b.placed?1:0,u=Math.floor(127*b.opacity);return u*Ma+r*fl+u*kf+r*Ju+u*zf+r*eh+u*Df+r}const ns=0;class th{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,p,_,w){const A=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(A,_,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((k,z)=>k.sortKey-z.sortKey));this._currentPartIndex<A.length;)if(u.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,w())return!0;return!1}}class rh{constructor(r,u,p,_,w,A,k,z){this.placement=new If(r,u,A,k,z),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(r,u,p){const _=B.now(),w=()=>!this._forceFullPlacement&&B.now()-_>2;for(;this._currentPlacementIndex>=0;){const A=u[r[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=k)&&(!A.maxzoom||A.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new th(A)),this._inProgressLayer.continuePlacement(p[A.source],this.placement,this._showCollisionBoxes,A,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const $a=512/c.$/2;class nh{constructor(r,u,p){this.tileID=r,this.bucketInstanceId=p,this._symbolsByKey={};const _=new Map;for(let w=0;w<u.length;w++){const A=u.get(w),k=A.key,z=_.get(k);z?z.push(A):_.set(k,[A])}for(const[w,A]of _){const k={positions:A.map(z=>({x:Math.floor(z.anchorX*$a),y:Math.floor(z.anchorY*$a)})),crossTileIDs:A.map(z=>z.crossTileID)};if(k.positions.length>128){const z=new c.aI(k.positions.length,16,Uint16Array);for(const{x:$,y:q}of k.positions)z.add($,q);z.finish(),delete k.positions,k.index=z}this._symbolsByKey[w]=k}}getScaledCoordinates(r,u){const{x:p,y:_,z:w}=this.tileID.canonical,{x:A,y:k,z}=u.canonical,$=$a/Math.pow(2,z-w),q=(k*c.$+r.anchorY)*$,H=_*c.$*$a;return{x:Math.floor((A*c.$+r.anchorX)*$-p*c.$*$a),y:Math.floor(q-H)}}findMatches(r,u,p){const _=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let w=0;w<r.length;w++){const A=r.get(w);if(A.crossTileID)continue;const k=this._symbolsByKey[A.key];if(!k)continue;const z=this.getScaledCoordinates(A,u);if(k.index){const $=k.index.range(z.x-_,z.y-_,z.x+_,z.y+_).sort();for(const q of $){const H=k.crossTileIDs[q];if(!p[H]){p[H]=!0,A.crossTileID=H;break}}}else if(k.positions)for(let $=0;$<k.positions.length;$++){const q=k.positions[$],H=k.crossTileIDs[$];if(Math.abs(q.x-z.x)<=_&&Math.abs(q.y-z.y)<=_&&!p[H]){p[H]=!0,A.crossTileID=H;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Rf{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class jo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const p in this.indexes){const _=this.indexes[p],w={};for(const A in _){const k=_[A];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),w[k.tileID.key]=k}this.indexes[p]=w}this.lng=r}addBucket(r,u,p){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let w=0;w<u.symbolInstances.length;w++)u.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const _=this.usedCrossTileIDs[r.overscaledZ];for(const w in this.indexes){const A=this.indexes[w];if(Number(w)>r.overscaledZ)for(const k in A){const z=A[k];z.tileID.isChildOf(r)&&z.findMatches(u.symbolInstances,r,_)}else{const k=A[r.scaledTo(Number(w)).key];k&&k.findMatches(u.symbolInstances,r,_)}}for(let w=0;w<u.symbolInstances.length;w++){const A=u.symbolInstances.get(w);A.crossTileID||(A.crossTileID=p.generate(),_[A.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new nh(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const p of u.getCrossTileIDsLists())for(const _ of p)delete this.usedCrossTileIDs[r][_]}removeStaleBuckets(r){let u=!1;for(const p in this.indexes){const _=this.indexes[p];for(const w in _)r[_[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,_[w]),delete _[w],u=!0)}return u}}class Yc{constructor(){this.layerIndexes={},this.crossTileIDs=new Rf,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,p){let _=this.layerIndexes[r.id];_===void 0&&(_=this.layerIndexes[r.id]=new jo);let w=!1;const A={};_.handleWrapJump(p);for(const k of u){const z=k.getBucket(r);z&&r.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(k.tileID,z,this.crossTileIDs)&&(w=!0),A[z.bucketInstanceId]=!0)}return _.removeStaleBuckets(A)&&(w=!0),w}pruneUnusedLayers(r){const u={};r.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}var ih="void main() {fragColor=vec4(1.0);}";const Ri={prelude:Ar(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Ar("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Ar("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Ar(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Ar(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ar(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ar(ih,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Ar(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Ar(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ar("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ar("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Ar(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Ar("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Ar(ih,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Ar(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Ar(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Ar(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Ar(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ar(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ar(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ar(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ar(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Ar(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ar(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ar(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ar(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Ar(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Ar(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Ar(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ar(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ar(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ar("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ar("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ar("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Ar("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Ar(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Ar("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ar(b,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=r.match(/in ([\w]+) ([\w]+)/g),_=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=w?w.concat(_):_,k={};return{fragmentSource:b=b.replace(u,(z,$,q,H,G)=>(k[G]=!0,$==="define"?`
#ifndef HAS_UNIFORM_u_${G}
in ${q} ${H} ${G};
#else
uniform ${q} ${H} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${q} ${H} ${G} = u_${G};
#endif
`)),vertexSource:r=r.replace(u,(z,$,q,H,G)=>{const Q=H==="float"?"vec2":"vec4",se=G.match(/color/)?"color":Q;return k[G]?$==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
in ${q} ${Q} a_${G};
out ${q} ${H} ${G};
#else
uniform ${q} ${H} u_${G};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${q} ${H} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${se}(a_${G}, u_${G}_t);
#else
    ${q} ${H} ${G} = u_${G};
#endif
`:$==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
in ${q} ${Q} a_${G};
#else
uniform ${q} ${H} u_${G};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${q} ${H} ${G} = a_${G};
#else
    ${q} ${H} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${q} ${H} ${G} = unpack_mix_${se}(a_${G}, u_${G}_t);
#else
    ${q} ${H} ${G} = u_${G};
#endif
`}),staticAttributes:p,staticUniforms:A}}class cc{constructor(r,u,p){this.vertexBuffer=r,this.indexBuffer=u,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Yi=c.aJ([{name:"a_pos",type:"Int16",components:2}]);const Oo="#define PROJECTION_MERCATOR",vr="mercator";class pl{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return vr}get shaderDefine(){return Oo}get shaderPreludeCode(){return Ri.projectionMercator}get vertexShaderPreludeCode(){return Ri.projectionMercator.vertexSource}get subdivisionGranularity(){return c.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,u,p,_,w){if(this._cachedMesh)return this._cachedMesh;const A=new c.aL;A.emplaceBack(0,0),A.emplaceBack(c.$,0),A.emplaceBack(0,c.$),A.emplaceBack(c.$,c.$);const k=r.createVertexBuffer(A,Yi.members),z=c.aM.simpleSegment(0,0,4,2),$=new c.aN;$.emplaceBack(1,0,2),$.emplaceBack(1,2,3);const q=r.createIndexBuffer($);return this._cachedMesh=new cc(k,q,z),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class Io{constructor(r=0,u=0,p=0,_=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=p,this.right=_}interpolate(r,u,p){return u.top!=null&&r.top!=null&&(this.top=c.C.number(r.top,u.top,p)),u.bottom!=null&&r.bottom!=null&&(this.bottom=c.C.number(r.bottom,u.bottom,p)),u.left!=null&&r.left!=null&&(this.left=c.C.number(r.left,u.left,p)),u.right!=null&&r.right!=null&&(this.right=c.C.number(r.right,u.right,p)),this}getCenter(r,u){const p=c.ah((this.left+r-this.right)/2,0,r),_=c.ah((this.top+u-this.bottom)/2,0,u);return new c.P(p,_)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Io(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function co(b,r){if(!b.renderWorldCopies||b.lngRange)return;const u=r.lng-b.center.lng;r.lng+=u>180?-360:u<-180?360:0}function Ki(b){return Math.max(0,Math.floor(b))}class ui{constructor(r,u,p,_,w,A){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=A===void 0||!!A,this._minZoom=u||0,this._maxZoom=p||22,this._minPitch=_??0,this._maxPitch=w??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new c.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Ki(this._zoom),this._scale=c.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Io,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,u,p){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=Ki(this._zoom),this._scale=c.af(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new Io(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!p&&r.autoCalculateNearFarZ,u&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const u=c.aO(r,-180,180)*Math.PI/180;var p,_,w,A,k,z,$,q,H;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=C(),p=this._rotationMatrix,w=-this._bearingInRadians,A=(_=this._rotationMatrix)[0],k=_[1],z=_[2],$=_[3],q=Math.sin(w),H=Math.cos(w),p[0]=A*H+z*q,p[1]=k*H+$*q,p[2]=A*-q+z*H,p[3]=k*-q+$*H)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const u=c.ah(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const u=r/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return c.aP(this._fovInRadians)}setFov(r){r=c.ah(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=c.ae(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const u=this.getConstrained(this._center,r).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=c.af(u),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,u){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,p){this._unmodified=!1,this._edgeInsets.interpolate(r,u,p),this._constrain(),this._calcMatrices()}resize(r,u,p=!0){this._width=r,this._height=u,p&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new hr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-c.ai,c.ai])}getConstrained(r,u){return this._callbacks.getConstrained(r,u)}getCameraQueryGeometry(r,u){if(u.length===1)return[u[0],r];{const{minX:p,minY:_,maxX:w,maxY:A}=c.a2.fromPoints(u).extend(r);return[new c.P(p,_),new c.P(w,_),new c.P(w,A),new c.P(p,A),new c.P(p,_)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:u,zoom:p}=this.getConstrained(this.center,this.zoom);this.setCenter(u),this.setZoom(p),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=c.ag(new Float64Array(16));c.N(r,r,[this._width/2,-this._height/2,1]),c.M(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=c.ag(new Float64Array(16)),c.N(r,r,[1,-1,1]),c.M(r,r,[-1,-1,0]),c.N(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,u,p,_){const w=p!==void 0?p:this.bearing,A=_=_!==void 0?_:this.pitch,k=c.a1.fromLngLat(r,u),z=-Math.cos(c.ae(A)),$=Math.sin(c.ae(A)),q=$*Math.sin(c.ae(w)),H=-$*Math.cos(c.ae(w));let G=this.elevation;const Q=u-G;let se;z*Q>=0||Math.abs(z)<.1?(se=1e4,G=u+se*z):se=-Q/z;let pe,fe,ge=c.aQ(1,k.y),ve=0;do{if(ve+=1,ve>10)break;fe=se/ge,pe=new c.a1(k.x+q*fe,k.y+H*fe),ge=1/pe.meterInMercatorCoordinateUnits()}while(Math.abs(se-fe*ge)>1e-12);return{center:pe.toLngLat(),elevation:G,zoom:c.ak(this.height/2/Math.tan(this.fovInRadians/2)/fe/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const u=c.aj(1,this.center.lat)*this.worldSize,p=this.cameraToCenterDistance/u,_=c.a1.fromLngLat(this.center,this.elevation),w=ct(this.center,this.elevation,this.pitch,this.bearing,p);this._elevation=r;const A=this.calculateCenterFromCameraLngLatAlt(w.toLngLat(),c.aQ(w.z,_.y),this.bearing,this.pitch);this._elevation=A.elevation,this._center=A.center,this.setZoom(A.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=c.aj(1,this.center.lat)*this.worldSize;return ct(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const u=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/u,r.canonical.y/u,1/u/c.$,1/u/c.$]}}class hi{constructor(r,u){this.min=r,this.max=u,this.center=c.aR([],c.aS([],this.min,this.max),.5)}quadrant(r){const u=[r%2==0,r<2],p=c.aT(this.min),_=c.aT(this.max);for(let w=0;w<u.length;w++)p[w]=u[w]?this.min[w]:this.center[w],_[w]=u[w]?this.center[w]:this.max[w];return _[2]=this.max[2],new hi(p,_)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let u=!0;for(let p=0;p<r.planes.length;p++){const _=this.intersectsPlane(r.planes[p]);if(_===0)return 0;_===1&&(u=!1)}return u?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let u=r[3],p=r[3];for(let _=0;_<3;_++)r[_]>0?(u+=r[_]*this.min[_],p+=r[_]*this.max[_]):(p+=r[_]*this.min[_],u+=r[_]*this.max[_]);return u>=0?2:p<0?0:1}}class Yn{distanceToTile2d(r,u,p,_){const w=_.distanceX([r,u]),A=_.distanceY([r,u]);return Math.hypot(w,A)}getWrap(r,u,p){return p}getTileBoundingVolume(r,u,p,_){var w,A;let k=0,z=0;if(_!=null&&_.terrain){const q=new c.Z(r.z,u,r.z,r.x,r.y),H=_.terrain.getMinMaxElevation(q);k=(w=H.minElevation)!==null&&w!==void 0?w:Math.min(0,p),z=(A=H.maxElevation)!==null&&A!==void 0?A:Math.max(0,p)}const $=1<<r.z;return new hi([u+r.x/$,r.y/$,k],[u+(r.x+1)/$,(r.y+1)/$,z])}allowVariableZoom(r,u){const p=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,_=c.ah(78.5-p/2,0,60);return!!u.terrain||r.pitch>_}allowWorldCopies(){return!0}prepareNextFrame(){}}class Br{constructor(r,u,p){this.points=r,this.planes=u,this.aabb=p}static fromInvProjectionMatrix(r,u=1,p=0,_,w){const A=w?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],k=Math.pow(2,p),z=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(G=>function(Q,se,pe,fe){const ge=c.aw([],Q,se),ve=1/ge[3]/pe*fe;return c.aY(ge,ge,[ve,ve,1/ge[3],ve])}(G,r,u,k));_&&function(G,Q,se,pe){const fe=pe?4:0,ge=pe?0:4;let ve=0;const Te=[],xe=[];for(let we=0;we<4;we++){const Re=c.aU([],G[we+ge],G[we+fe]),nt=c.aZ(Re);c.aR(Re,Re,1/nt),Te.push(nt),xe.push(Re)}for(let we=0;we<4;we++){const Re=c.a_(G[we+fe],xe[we],se);ve=Re!==null&&Re>=0?Math.max(ve,Re):Math.max(ve,Te[we])}const Ce=function(we,Re){const nt=c.aU([],we[Re[0]],we[Re[1]]),We=c.aU([],we[Re[2]],we[Re[1]]),Ke=[0,0,0,0];return c.aV(Ke,c.aW([],nt,We)),Ke[3]=-c.aX(Ke,we[Re[0]]),Ke}(G,Q),Oe=function(we,Re){const nt=c.a$(we),We=c.b0([],we,1/nt),Ke=c.aU([],Re,c.aR([],We,c.aX(Re,We))),Qe=c.a$(Ke);if(Qe>0){const Tt=Math.sqrt(1-We[3]*We[3]),At=c.aR([],We,-We[3]),yt=c.aS([],At,c.aR([],Ke,Tt/Qe));return c.b1(Re,yt)}return null}(se,Ce);if(Oe!==null){const we=Oe/c.aX(xe[0],Ce);ve=Math.min(ve,we)}for(let we=0;we<4;we++){const Re=Math.min(ve,Te[we]);G[we+ge]=[G[we+fe][0]+xe[we][0]*Re,G[we+fe][1]+xe[we][1]*Re,G[we+fe][2]+xe[we][2]*Re,1]}}(z,A[0],_,w);const $=A.map(G=>{const Q=c.aU([],z[G[0]],z[G[1]]),se=c.aU([],z[G[2]],z[G[1]]),pe=c.aV([],c.aW([],Q,se)),fe=-c.aX(pe,z[G[1]]);return pe.concat(fe)}),q=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],H=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const G of z)for(let Q=0;Q<3;Q++)q[Q]=Math.min(q[Q],G[Q]),H[Q]=Math.max(H[Q],G[Q]);return new Br(z,$,new hi(q,H))}}class Ms{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,u,p){return this._helper.interpolatePadding(r,u,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,u,p=!0){this._helper.resize(r,u,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,u){this._helper.overrideNearFarZ(r,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,u){}constructor(r,u,p,_,w){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new ui({calcMatrices:()=>{this._calcMatrices()},getConstrained:(A,k)=>this.getConstrained(A,k)},r,u,p,_,w),this._coveringTilesDetailsProvider=new Yn}clone(){const r=new Ms;return r.apply(this),r}apply(r,u,p){this._helper.apply(r,u,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const u=[new c.b2(0,r)];if(this._helper._renderWorldCopies){const p=this.screenPointToMercatorCoordinate(new c.P(0,0)),_=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,0)),w=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,this._helper._height)),A=this.screenPointToMercatorCoordinate(new c.P(0,this._helper._height)),k=Math.floor(Math.min(p.x,_.x,w.x,A.x)),z=Math.floor(Math.max(p.x,_.x,w.x,A.x)),$=1;for(let q=k-$;q<=z+$;q++)q!==0&&u.push(new c.b2(q,r))}return u}getCameraFrustum(){return Br.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const u=this.screenPointToLocation(this.centerPoint,r),p=r?r.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(r,u){const p=c.aj(this.elevation,this.center.lat),_=this.screenPointToMercatorCoordinateAtZ(u,p),w=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),A=c.a1.fromLngLat(r),k=new c.a1(A.x-(_.x-w.x),A.y-(_.y-w.y));this.setCenter(k==null?void 0:k.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,u){return u?this.coordinatePoint(c.a1.fromLngLat(r),u.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(c.a1.fromLngLat(r))}screenPointToLocation(r,u){var p;return(p=this.screenPointToMercatorCoordinate(r,u))===null||p===void 0?void 0:p.toLngLat()}screenPointToMercatorCoordinate(r,u){if(u){const p=u.pointCoordinate(r);if(p!=null)return p}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,u){const p=u||0,_=[r.x,r.y,0,1],w=[r.x,r.y,1,1];c.aw(_,_,this._pixelMatrixInverse),c.aw(w,w,this._pixelMatrixInverse);const A=_[3],k=w[3],z=_[1]/A,$=w[1]/k,q=_[2]/A,H=w[2]/k,G=q===H?0:(p-q)/(H-q);return new c.a1(c.C.number(_[0]/A,w[0]/k,G)/this.worldSize,c.C.number(z,$,G)/this.worldSize,p)}coordinatePoint(r,u=0,p=this._pixelMatrix){const _=[r.x*this.worldSize,r.y*this.worldSize,u,1];return c.aw(_,_,p),new c.P(_[0]/_[3],_[1]/_[3])}getBounds(){const r=Math.max(0,this._helper._height/2-He(this));return new hr().extend(this.screenPointToLocation(new c.P(0,r))).extend(this.screenPointToLocation(new c.P(this._helper._width,r))).extend(this.screenPointToLocation(new c.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new c.P(0,this._helper._height)))}isPointOnMapSurface(r,u){return u?u.pointCoordinate(r)!=null:r.y>this.height/2-He(this)}calculatePosMatrix(r,u=!1,p){var _;const w=(_=r.key)!==null&&_!==void 0?_:c.b3(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),A=u?this._alignedPosMatrixCache:this._posMatrixCache;if(A.has(w)){const $=A.get(w);return p?$.f32:$.f64}const k=Le(r,this.worldSize);c.O(k,u?this._alignedProjMatrix:this._viewProjMatrix,k);const z={f64:k,f32:new Float32Array(k)};return A.set(w,z),p?z.f32:z.f64}calculateFogMatrix(r){const u=r.key,p=this._fogMatrixCacheF32;if(p.has(u))return p.get(u);const _=Le(r,this.worldSize);return c.O(_,this._fogMatrix,_),p.set(u,new Float32Array(_)),p.get(u)}getConstrained(r,u){u=c.ah(+u,this.minZoom,this.maxZoom);const p={center:new c.S(r.lng,r.lat),zoom:u};let _=this._helper._lngRange;!this._helper._renderWorldCopies&&_===null&&(_=[-179.9999999999,179.9999999999]);const w=this.tileSize*c.af(p.zoom);let A=0,k=w,z=0,$=w,q=0,H=0;const{x:G,y:Q}=this.size;if(this._helper._latRange){const Te=this._helper._latRange;A=c.U(Te[1])*w,k=c.U(Te[0])*w,k-A<Q&&(q=Q/(k-A))}_&&(z=c.aO(c.V(_[0])*w,0,w),$=c.aO(c.V(_[1])*w,0,w),$<z&&($+=w),$-z<G&&(H=G/($-z)));const{x:se,y:pe}=Ee(w,r);let fe,ge;const ve=Math.max(H||0,q||0);if(ve){const Te=new c.P(H?($+z)/2:se,q?(k+A)/2:pe);return p.center=De(w,Te).wrap(),p.zoom+=c.ak(ve),p}if(this._helper._latRange){const Te=Q/2;pe-Te<A&&(ge=A+Te),pe+Te>k&&(ge=k-Te)}if(_){const Te=(z+$)/2;let xe=se;this._helper._renderWorldCopies&&(xe=c.aO(se,Te-w/2,Te+w/2));const Ce=G/2;xe-Ce<z&&(fe=z+Ce),xe+Ce>$&&(fe=$-Ce)}if(fe!==void 0||ge!==void 0){const Te=new c.P(fe??se,ge??pe);p.center=De(w,Te).wrap()}return p}calculateCenterFromCameraLngLatAlt(r,u,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(r,u,p,_)}_calculateNearFarZIfNeeded(r,u,p){if(!this._helper.autoCalculateNearFarZ)return;const _=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),w=r-_*this._helper._pixelPerMeter/Math.cos(u),A=_<0?w:r,k=Math.PI/2+this.pitchInRadians,z=c.ae(this.fov)*(Math.abs(Math.cos(c.ae(this.roll)))*this.height+Math.abs(Math.sin(c.ae(this.roll)))*this.width)/this.height*(.5+p.y/this.height),$=Math.sin(z)*A/Math.sin(c.ah(Math.PI-k-z,.01,Math.PI-.01)),q=He(this),H=Math.atan(q/this._helper.cameraToCenterDistance),G=c.ae(.75),Q=H>G?2*H*(.5+p.y/(2*q)):G,se=Math.sin(Q)*A/Math.sin(c.ah(Math.PI-k-Q,.01,Math.PI-.01)),pe=Math.min($,se);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*pe+A),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,u=Ee(this.worldSize,this.center),p=u.x,_=u.y;this._helper._pixelPerMeter=c.aj(1,this.center.lat)*this.worldSize;const w=c.ae(Math.min(this.pitch,Se)),A=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(w));let k;this._calculateNearFarZIfNeeded(A,w,r),k=new Float64Array(16),c.b4(k,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),c.aq(this._invProjMatrix,k),k[8]=2*-r.x/this._helper._width,k[9]=2*r.y/this._helper._height,this._projectionMatrix=c.b5(k),c.N(k,k,[1,-1,1]),c.M(k,k,[0,0,-this._helper.cameraToCenterDistance]),c.b6(k,k,-this.rollInRadians),c.b7(k,k,this.pitchInRadians),c.b6(k,k,-this.bearingInRadians),c.M(k,k,[-p,-_,0]),this._mercatorMatrix=c.N([],k,[this.worldSize,this.worldSize,this.worldSize]),c.N(k,k,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=c.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,k),c.M(k,k,[0,0,-this.elevation]),this._viewProjMatrix=k,this._invViewProjMatrix=c.aq([],k);const z=[0,0,-1,1];c.aw(z,z,this._invViewProjMatrix),this._cameraPosition=[z[0]/z[3],z[1]/z[3],z[2]/z[3]],this._fogMatrix=new Float64Array(16),c.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,A,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,c.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),c.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),c.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),c.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),c.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),c.M(this._fogMatrix,this._fogMatrix,[-p,-_,0]),c.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),c.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=c.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,k);const $=this._helper._width%2/2,q=this._helper._height%2/2,H=Math.cos(this.bearingInRadians),G=Math.sin(-this.bearingInRadians),Q=p-Math.round(p)+H*$+G*q,se=_-Math.round(_)+H*q+G*$,pe=new Float64Array(k);if(c.M(pe,pe,[Q>.5?Q-1:Q,se>.5?se-1:se,0]),this._alignedProjMatrix=pe,k=c.aq(new Float64Array(16),this._pixelMatrix),!k)throw new Error("failed to invert matrix");this._pixelMatrixInverse=k,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new c.P(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return c.aw(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=c.aj(1,this.center.lat)*this.worldSize;return ct(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,u){const p=c.a1.fromLngLat(r),_=[p.x*this.worldSize,p.y*this.worldSize,u,1];return c.aw(_,_,this._viewProjMatrix),_[2]/_[3]}getProjectionData(r){const{overscaledTileID:u,aligned:p,applyTerrainMatrix:_}=r,w=this._helper.getMercatorTileCoordinates(u),A=u?this.calculatePosMatrix(u,p,!0):null;let k;return k=u&&u.terrainRttPosMatrix32f&&_?u.terrainRttPosMatrix32f:A||c.b8(),{mainMatrix:k,tileMercatorCoords:w,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:k}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,u,p){return 1}transformLightDirection(r){return c.aT(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,u,p,_){const w=this.calculatePosMatrix(p);let A;_?(A=[r,u,_(r,u),1],c.aw(A,A,w)):(A=[r,u,0,1],ul(A,A,w));const k=A[3];return{point:new c.P(A[0]/k,A[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}populateCache(r){for(const u of r)this.calculatePosMatrix(u)}getMatrixForModel(r,u){const p=c.a1.fromLngLat(r,u),_=p.meterInMercatorCoordinateUnits(),w=c.b9();return c.M(w,w,[p.x,p.y,p.z]),c.b6(w,w,Math.PI),c.b7(w,w,Math.PI/2),c.N(w,w,[-_,_,_]),w}getProjectionDataForCustomLayer(r=!0){const u=new c.Z(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:r}),_=Le(u,this.worldSize);c.O(_,this._viewProjMatrix,_),p.tileMercatorCoords=[0,0,1,1];const w=[c.$,c.$,this.worldSize/this._helper.pixelsPerMeter],A=c.ba();return c.N(A,_,w),p.fallbackMatrix=A,p.mainMatrix=A,p}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function di(){c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ei(b){if(b.useSlerp)if(b.k<1){const r=c.bb(b.startEulerAngles.roll,b.startEulerAngles.pitch,b.startEulerAngles.bearing),u=c.bb(b.endEulerAngles.roll,b.endEulerAngles.pitch,b.endEulerAngles.bearing),p=new Float64Array(4);c.bc(p,r,u,b.k);const _=c.bd(p);b.tr.setRoll(_.roll),b.tr.setPitch(_.pitch),b.tr.setBearing(_.bearing)}else b.tr.setRoll(b.endEulerAngles.roll),b.tr.setPitch(b.endEulerAngles.pitch),b.tr.setBearing(b.endEulerAngles.bearing);else b.tr.setRoll(c.C.number(b.startEulerAngles.roll,b.endEulerAngles.roll,b.k)),b.tr.setPitch(c.C.number(b.startEulerAngles.pitch,b.endEulerAngles.pitch,b.k)),b.tr.setBearing(c.C.number(b.startEulerAngles.bearing,b.endEulerAngles.bearing,b.k))}function Ni(b,r,u,p,_){const w=_.padding,A=Ee(_.worldSize,u.getNorthWest()),k=Ee(_.worldSize,u.getNorthEast()),z=Ee(_.worldSize,u.getSouthEast()),$=Ee(_.worldSize,u.getSouthWest()),q=c.ae(-p),H=A.rotate(q),G=k.rotate(q),Q=z.rotate(q),se=$.rotate(q),pe=new c.P(Math.max(H.x,G.x,se.x,Q.x),Math.max(H.y,G.y,se.y,Q.y)),fe=new c.P(Math.min(H.x,G.x,se.x,Q.x),Math.min(H.y,G.y,se.y,Q.y)),ge=pe.sub(fe),ve=(_.width-(w.left+w.right+r.left+r.right))/ge.x,Te=(_.height-(w.top+w.bottom+r.top+r.bottom))/ge.y;if(Te<0||ve<0)return void di();const xe=Math.min(c.ak(_.scale*Math.min(ve,Te)),b.maxZoom),Ce=c.P.convert(b.offset),Oe=new c.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(c.ae(p)),we=Ce.add(Oe).mult(_.scale/c.af(xe));return{center:De(_.worldSize,A.add(z).div(2).sub(we)),zoom:xe,bearing:p}}class Ps{get useGlobeControls(){return!1}handlePanInertia(r,u){const p=r.mag(),_=Math.abs(He(u));return{easingOffset:r.mult(Math.min(.75*_/p,1)),easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(r,u){r.bearingDelta&&u.setBearing(u.bearing+r.bearingDelta),r.pitchDelta&&u.setPitch(u.pitch+r.pitchDelta),r.rollDelta&&u.setRoll(u.roll+r.rollDelta),r.zoomDelta&&u.setZoom(u.zoom+r.zoomDelta)}handleMapControlsPan(r,u,p){r.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(p,r.around)}cameraForBoxAndBearing(r,u,p,_,w){return Ni(r,u,p,_,w)}handleJumpToCenterZoom(r,u){r.zoom!==(u.zoom!==void 0?+u.zoom:r.zoom)&&r.setZoom(+u.zoom),u.center!==void 0&&r.setCenter(c.S.convert(u.center))}handleEaseTo(r,u){const p=r.zoom,_=r.padding,w={roll:r.roll,pitch:r.pitch,bearing:r.bearing},A={roll:u.roll===void 0?r.roll:u.roll,pitch:u.pitch===void 0?r.pitch:u.pitch,bearing:u.bearing===void 0?r.bearing:u.bearing},k=u.zoom!==void 0,z=!r.isPaddingEqual(u.padding);let $=!1;const q=k?+u.zoom:r.zoom;let H=r.centerPoint.add(u.offsetAsPoint);const G=r.screenPointToLocation(H),{center:Q,zoom:se}=r.getConstrained(c.S.convert(u.center||G),q??p);co(r,Q);const pe=Ee(r.worldSize,G),fe=Ee(r.worldSize,Q).sub(pe),ge=c.af(se-p);return $=se!==p,{easeFunc:ve=>{if($&&r.setZoom(c.C.number(p,se,ve)),c.be(w,A)||ei({startEulerAngles:w,endEulerAngles:A,tr:r,k:ve,useSlerp:w.roll!=A.roll}),z&&(r.interpolatePadding(_,u.padding,ve),H=r.centerPoint.add(u.offsetAsPoint)),u.around)r.setLocationAtPoint(u.around,u.aroundPoint);else{const Te=c.af(r.zoom-p),xe=se>p?Math.min(2,ge):Math.max(.5,ge),Ce=Math.pow(xe,1-ve),Oe=De(r.worldSize,pe.add(fe.mult(ve*Ce)).mult(Te));r.setLocationAtPoint(r.renderWorldCopies?Oe.wrap():Oe,H)}},isZooming:$,elevationCenter:Q}}handleFlyTo(r,u){const p=u.zoom!==void 0,_=r.zoom,w=r.getConstrained(c.S.convert(u.center||u.locationAtOffset),p?+u.zoom:_),A=w.center,k=w.zoom;co(r,A);const z=Ee(r.worldSize,u.locationAtOffset),$=Ee(r.worldSize,A).sub(z),q=$.mag(),H=c.af(k-_);let G;if(u.minZoom!==void 0){const Q=Math.min(+u.minZoom,_,k),se=r.getConstrained(A,Q).zoom;G=c.af(se-_)}return{easeFunc:(Q,se,pe,fe)=>{r.setZoom(Q===1?k:_+c.ak(se));const ge=Q===1?A:De(r.worldSize,z.add($.mult(pe)).mult(se));r.setLocationAtPoint(r.renderWorldCopies?ge.wrap():ge,fe)},scaleOfZoom:H,targetCenter:A,scaleOfMinZoom:G,pixelPathLength:q}}}class rn{constructor(r,u,p){this.blendFunction=r,this.blendColor=u,this.mask=p}}rn.Replace=[1,0],rn.disabled=new rn(rn.Replace,c.bf.transparent,[!1,!1,!1,!1]),rn.unblended=new rn(rn.Replace,c.bf.transparent,[!0,!0,!0,!0]),rn.alphaBlended=new rn([1,771],c.bf.transparent,[!0,!0,!0,!0]);const yn=2305;class _r{constructor(r,u,p){this.enable=r,this.mode=u,this.frontFace=p}}_r.disabled=new _r(!1,1029,yn),_r.backCCW=new _r(!0,1029,yn),_r.frontCCW=new _r(!0,1028,yn);class lr{constructor(r,u,p){this.func=r,this.mask=u,this.range=p}}lr.ReadOnly=!1,lr.ReadWrite=!0,lr.disabled=new lr(519,lr.ReadOnly,[0,1]);const fi=7680;class cr{constructor(r,u,p,_,w,A){this.test=r,this.ref=u,this.mask=p,this.fail=_,this.depthFail=w,this.pass=A}}cr.disabled=new cr({func:519,mask:0},0,0,fi,fi,fi);const ml=new WeakMap;function ti(b){var r;if(ml.has(b))return ml.get(b);{const u=(r=b.getParameter(b.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return ml.set(b,u),u}}class pd{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const u=r.context,p=u.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;const _=new c.aL;_.emplaceBack(-1,-1),_.emplaceBack(2,-1),_.emplaceBack(-1,2);const w=new c.aN;w.emplaceBack(0,1,2),this._fullscreenTriangle=new cc(u.createVertexBuffer(_,Yi.members),u.createIndexBuffer(w),c.aM.simpleSegment(0,0,_.length,w.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(p.TEXTURE1);const A=p.createTexture();p.bindTexture(p.TEXTURE_2D,A),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(A),ti(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,u){const p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,u),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,u=r.gl;r.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,u){const p=this._cachedRenderContext.context,_=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:c.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,_.TRIANGLES,lr.disabled,cr.disabled,rn.unblended,_r.disabled,((w,A)=>({u_input:w,u_output_expected:A}))(r,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ti(_)){_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.readBuffer(_.COLOR_ATTACHMENT0),_.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),_.bindBuffer(_.PIXEL_PACK_BUFFER,null);const w=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);_.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:w}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ti(r)){const u=r.clientWaitSync(this._readbackQueue.sync,0,0);if(u===r.WAIT_FAILED)return c.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=pd._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let u=0;return u+=r[0]/256,u+=r[1]/65536,u+=r[2]/16777216,r[3]<127&&(u=-u),u/128}}const gl=c.$/128;function yl(b,r){const u=b.granularity!==void 0?Math.max(b.granularity,1):1,p=u+(b.generateBorders?2:0),_=u+(b.extendToNorthPole||b.generateBorders?1:0)+(b.extendToSouthPole||b.generateBorders?1:0),w=p+1,A=_+1,k=b.generateBorders?-1:0,z=b.generateBorders||b.extendToNorthPole?-1:0,$=u+(b.generateBorders?1:0),q=u+(b.generateBorders||b.extendToSouthPole?1:0),H=w*A,G=p*_*6,Q=w*A>65536;if(Q&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const se=Q||r==="32bit",pe=new Int16Array(2*H);let fe=0;for(let Te=z;Te<=q;Te++)for(let xe=k;xe<=$;xe++){let Ce=xe/u*c.$;xe===-1&&(Ce=-gl),xe===u+1&&(Ce=c.$+gl);let Oe=Te/u*c.$;Te===-1&&(Oe=b.extendToNorthPole?c.bh:-gl),Te===u+1&&(Oe=b.extendToSouthPole?c.bi:c.$+gl),pe[fe++]=Ce,pe[fe++]=Oe}const ge=se?new Uint32Array(G):new Uint16Array(G);let ve=0;for(let Te=0;Te<_;Te++)for(let xe=0;xe<p;xe++){const Ce=xe+1+Te*w,Oe=xe+(Te+1)*w,we=xe+1+(Te+1)*w;ge[ve++]=xe+Te*w,ge[ve++]=Oe,ge[ve++]=Ce,ge[ve++]=Ce,ge[ve++]=Oe,ge[ve++]=we}return{vertices:pe.buffer.slice(0),indices:ge.buffer.slice(0),uses32bitIndices:se}}const ko=new c.aK({fill:new c.bj(128,2),line:new c.bj(512,0),tile:new c.bj(128,32),stencil:new c.bj(128,1),circle:3});class Es{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ri.projectionGlobe}get vertexShaderPreludeCode(){return Ri.projectionMercator.vertexSource}get subdivisionGranularity(){return ko}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new pd(r));const u=c.U(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,_=this._errorMeasurement.updateErrorLoop(u,p),w=B.now();_!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=_,this._errorMeasurementLastChangeTime=w);const A=Math.min(Math.max((w-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=c.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,c.bl(A))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,u,p,_,w){const A=(w==="stencil"?ko.stencil:ko.tile).getGranularityForZoomLevel(u.z);return this._getMesh(r,{granularity:A,generateBorders:p,extendToNorthPole:u.y===0&&_,extendToSouthPole:u.y===(1<<u.z)-1&&_})}_getMesh(r,u){const p=this._getMeshKey(u);if(p in this._tileMeshCache)return this._tileMeshCache[p];const _=function(w,A){const k=yl(A,"16bit"),z=c.aL.deserialize({arrayBuffer:k.vertices,length:k.vertices.byteLength/2/2}),$=c.aN.deserialize({arrayBuffer:k.indices,length:k.indices.byteLength/2/3});return new cc(w.createVertexBuffer(z,Yi.members),w.createIndexBuffer($),c.aM.simpleSegment(0,0,z.length,$.length))}(r,u);return this._tileMeshCache[p]=_,_}recalculate(r){}hasTransition(){const r=B.now();let u=!1;return u=u||(r-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const ah=new c.r({type:new c.D(c.v.projection.type)});class oh extends c.E{constructor(r){super(),this._transitionable=new c.t(ah,void 0),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.F(0)),this._mercatorProjection=new pl,this._verticalPerspectiveProjection=new Es}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof c.bm){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,u,p,_,w){return this.currentProjection.getMeshFromTileID(r,u,p,_,w)}setProjection(r){this._transitionable.setValue("type",(r==null?void 0:r.type)||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Kc(b){const r=vl(b.worldSize,b.center.lat);return 2*Math.PI*r}function zo(b,r,u,p,_){const w=1/(1<<_),A=r/c.$*w+p*w,k=c.bo((b/c.$*w+u*w)*Math.PI*2+Math.PI,2*Math.PI),z=2*Math.atan(Math.exp(Math.PI-A*Math.PI*2))-.5*Math.PI,$=Math.cos(z),q=new Float64Array(3);return q[0]=Math.sin(k)*$,q[1]=Math.sin(z),q[2]=Math.cos(k)*$,q}function ri(b){return function(r,u){const p=Math.cos(u),_=new Float64Array(3);return _[0]=Math.sin(r)*p,_[1]=Math.sin(u),_[2]=Math.cos(r)*p,_}(b.lng*Math.PI/180,b.lat*Math.PI/180)}function vl(b,r){return b/(2*Math.PI)/Math.cos(r*Math.PI/180)}function Qc(b){const r=Math.asin(b[1])/Math.PI*180,u=Math.sqrt(b[0]*b[0]+b[2]*b[2]);if(u>1e-6){const p=b[0]/u,_=Math.acos(b[2]/u),w=(p>0?_:-_)/Math.PI*180;return new c.S(c.aO(w,-180,180),r)}return new c.S(0,r)}function Cs(b){return Math.cos(b*Math.PI/180)}function vi(b,r){const u=Cs(b),p=Cs(r);return c.ak(p/u)}function sh(b,r){const u=b.rotate(r.bearingInRadians),p=r.zoom+vi(r.center.lat,0),_=c.bk(1/Cs(r.center.lat),1/Cs(Math.min(Math.abs(r.center.lat),60)),c.bn(p,7,3,0,1)),w=360/Kc({worldSize:r.worldSize,center:{lat:r.center.lat}});return new c.S(r.center.lng-u.x*w*_,c.ah(r.center.lat+u.y*w,-c.ai,c.ai))}function Jc(b){const r=.5*b,u=Math.sin(r),p=Math.cos(r);return Math.log(u+p)-Math.log(p-u)}function Nf(b,r,u,p){const _=b.lat+u*p;if(Math.abs(u)>1){const w=(Math.sign(b.lat+u)!==Math.sign(b.lat)?-Math.abs(b.lat):Math.abs(b.lat))*Math.PI/180,A=Math.abs(b.lat+u)*Math.PI/180,k=Jc(w+p*(A-w)),z=Jc(w),$=Jc(A);return new c.S(b.lng+r*((k-z)/($-z)),_)}return new c.S(b.lng+r*p,_)}class Pm{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=r}swapBuffers(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(r,u,p,_){const w=`${r.z}_${r.x}_${r.y}_${_!=null&&_.terrain?"t":""}`,A=this._cache.get(w);if(A)return A;const k=this._cachePrevious.get(w);if(k)return this._cache.set(w,k),k;const z=this._boundingVolumeFactory(r,u,p,_);return this._cache.set(w,z),this._hadAnyChanges=!0,z}}class pi{constructor(r,u,p,_){this.min=p,this.max=_,this.points=r,this.planes=u}static fromAabb(r,u){const p=[];for(let _=0;_<8;_++)p.push([1&~_?r[0]:u[0],(_>>1&1)==1?u[1]:r[1],(_>>2&1)==1?u[2]:r[2]]);return new pi(p,[[-1,0,0,u[0]],[1,0,0,-r[0]],[0,-1,0,u[1]],[0,1,0,-r[1]],[0,0,-1,u[2]],[0,0,1,-r[2]]],r,u)}static fromCenterSizeAngles(r,u,p){const _=c.br([],p[0],p[1],p[2]),w=c.bs([],[u[0],0,0],_),A=c.bs([],[0,u[1],0],_),k=c.bs([],[0,0,u[2]],_),z=[...r],$=[...r];for(let H=0;H<8;H++)for(let G=0;G<3;G++){const Q=r[G]+w[G]*(1&~H?-1:1)+A[G]*((H>>1&1)==1?1:-1)+k[G]*((H>>2&1)==1?1:-1);z[G]=Math.min(z[G],Q),$[G]=Math.max($[G],Q)}const q=[];for(let H=0;H<8;H++){const G=[...r];c.aS(G,G,c.aR([],w,1&~H?-1:1)),c.aS(G,G,c.aR([],A,(H>>1&1)==1?1:-1)),c.aS(G,G,c.aR([],k,(H>>2&1)==1?1:-1)),q.push(G)}return new pi(q,[[...w,-c.aX(w,q[0])],[...A,-c.aX(A,q[0])],[...k,-c.aX(k,q[0])],[-w[0],-w[1],-w[2],-c.aX(w,q[7])],[-A[0],-A[1],-A[2],-c.aX(A,q[7])],[-k[0],-k[1],-k[2],-c.aX(k,q[7])]],z,$)}intersectsFrustum(r){let u=!0;const p=this.points.length,_=this.planes.length,w=r.planes.length,A=r.points.length;for(let k=0;k<w;k++){const z=r.planes[k];let $=0;for(let q=0;q<p;q++){const H=this.points[q];z[0]*H[0]+z[1]*H[1]+z[2]*H[2]+z[3]>=0&&$++}if($===0)return 0;$<p&&(u=!1)}if(u)return 2;for(let k=0;k<_;k++){const z=this.planes[k];let $=0;for(let q=0;q<A;q++){const H=r.points[q];z[0]*H[0]+z[1]*H[1]+z[2]*H[2]+z[3]>=0&&$++}if($===0)return 0}return 1}intersectsPlane(r){const u=this.points.length;let p=0;for(let _=0;_<u;_++){const w=this.points[_];r[0]*w[0]+r[1]*w[1]+r[2]*w[2]+r[3]>=0&&p++}return p===u?2:p===0?0:1}}function uc(b,r,u){const p=b-r;return p<0?-p:Math.max(0,p-u)}function ha(b,r,u,p,_){const w=b-u;let A;return A=w<0?Math.min(-w,1+w-_):w>1?Math.min(Math.max(w-_,0),1-w):0,Math.max(A,uc(r,p,_))}class lh{constructor(){this._boundingVolumeCache=new Pm(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(r,u,p,_){const w=1<<p.z,A=1/w,k=p.x/w,z=p.y/w;let $=2;return $=Math.min($,ha(r,u,k,z,A)),$=Math.min($,ha(r,u,k+.5,-z-A,A)),$=Math.min($,ha(r,u,k+.5,2-z-A,A)),$}getWrap(r,u,p){const _=1<<u.z,w=1/_,A=u.x/_,k=uc(r.x,A,w),z=uc(r.x,A-1,w),$=uc(r.x,A+1,w),q=Math.min(k,z,$);return q===$?1:q===z?-1:0}allowVariableZoom(r,u){return Ue(r,u)>4}allowWorldCopies(){return!1}getTileBoundingVolume(r,u,p,_){return this._boundingVolumeCache.getTileBoundingVolume(r,u,p,_)}_computeTileBoundingVolume(r,u,p,_){var w,A;let k=0,z=0;if(_!=null&&_.terrain){const $=new c.Z(r.z,u,r.z,r.x,r.y),q=_.terrain.getMinMaxElevation($);k=(w=q.minElevation)!==null&&w!==void 0?w:Math.min(0,p),z=(A=q.maxElevation)!==null&&A!==void 0?A:Math.max(0,p)}if(k/=c.bu,z/=c.bu,k+=1,z+=1,r.z<=0)return pi.fromAabb([-z,-z,-z],[z,z,z]);if(r.z===1)return pi.fromAabb([r.x===0?-z:0,r.y===0?0:-z,-z],[r.x===0?0:z,r.y===0?z:0,z]);{const $=[zo(0,0,r.x,r.y,r.z),zo(c.$,0,r.x,r.y,r.z),zo(c.$,c.$,r.x,r.y,r.z),zo(0,c.$,r.x,r.y,r.z)],q=[];for(const Ke of $)q.push(c.aR([],Ke,z));if(z!==k)for(const Ke of $)q.push(c.aR([],Ke,k));r.y===0&&q.push([0,1,0]),r.y===(1<<r.z)-1&&q.push([0,-1,0]);const H=[1,1,1],G=[-1,-1,-1];for(const Ke of q)for(let Qe=0;Qe<3;Qe++)H[Qe]=Math.min(H[Qe],Ke[Qe]),G[Qe]=Math.max(G[Qe],Ke[Qe]);const Q=zo(c.$/2,c.$/2,r.x,r.y,r.z),se=c.aW([],[0,1,0],Q);c.aV(se,se);const pe=c.aW([],Q,se);c.aV(pe,pe);const fe=c.aW([],$[2],$[1]);c.aV(fe,fe);const ge=c.aW([],$[0],$[3]);c.aV(ge,ge),q.push(c.aR([],Q,z)),r.y>=(1<<r.z)/2&&q.push(c.aR([],zo(c.$/2,0,r.x,r.y,r.z),z)),r.y<(1<<r.z)/2&&q.push(c.aR([],zo(c.$/2,c.$,r.x,r.y,r.z),z));const ve=md(Q,q),Te=md(pe,q),xe=[-Q[0],-Q[1],-Q[2],ve.max],Ce=[Q[0],Q[1],Q[2],-ve.min],Oe=[-pe[0],-pe[1],-pe[2],Te.max],we=[pe[0],pe[1],pe[2],-Te.min],Re=[...fe,0],nt=[...ge,0],We=[];return r.y===0?We.push(c.bt(nt,Re,xe),c.bt(nt,Re,Ce)):We.push(c.bt(Oe,Re,xe),c.bt(Oe,Re,Ce),c.bt(Oe,nt,xe),c.bt(Oe,nt,Ce)),r.y===(1<<r.z)-1?We.push(c.bt(nt,Re,xe),c.bt(nt,Re,Ce)):We.push(c.bt(we,Re,xe),c.bt(we,Re,Ce),c.bt(we,nt,xe),c.bt(we,nt,Ce)),new pi(We,[xe,Ce,Oe,we,Re,nt],H,G)}}}function md(b,r){let u=1/0,p=-1/0;for(const _ of r){const w=c.aX(b,_);u=Math.min(u,w),p=Math.max(p,w)}return{min:u,max:p}}class eu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,u,p){return this._helper.interpolatePadding(r,u,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,u){this._helper.resize(r,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,u){this._helper.overrideNearFarZ(r,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=c.bv(),this._projectionMatrix=c.b9(),this._globeViewProjMatrix32f=c.b8(),this._globeViewProjMatrixNoCorrection=c.b9(),this._globeViewProjMatrixNoCorrectionInverted=c.b9(),this._globeProjMatrixInverted=c.b9(),this._cameraPosition=c.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new ui({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,u)=>this.getConstrained(r,u)}),this._coveringTilesDetailsProvider=new lh}clone(){const r=new eu;return r.apply(this),r}apply(r,u){this._globeLatitudeErrorCorrectionRadians=u||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=c.bp();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:u,applyGlobeMatrix:p}=r,_=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:_,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const u=this.pitchInRadians,p=this.cameraToCenterDistance/r,_=Math.sin(u)*p,w=Math.cos(u)*p+1,A=1/Math.sqrt(_*_+w*w)*1;let k=-_,z=w;const $=Math.sqrt(k*k+z*z);k/=$,z/=$;const q=[0,k,z];c.bw(q,q,[0,0,0],-this.bearingInRadians),c.bx(q,q,[0,0,0],-1*this.center.lat*Math.PI/180),c.by(q,q,[0,0,0],this.center.lng*Math.PI/180);const H=1/c.aZ(q);return c.aR(q,q,H),[...q,-A*H]}isLocationOccluded(r){return!this.isSurfacePointVisible(ri(r))}transformLightDirection(r){const u=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,_=Math.cos(p),w=[Math.sin(u)*_,Math.sin(p),Math.cos(u)*_],A=[w[2],0,-w[0]],k=[0,0,0];c.aW(k,A,w),c.aV(A,A),c.aV(k,k);const z=[0,0,0];return c.aV(z,[A[0]*r[0]+k[0]*r[1]+w[0]*r[2],A[1]*r[0]+k[1]*r[1]+w[1]*r[2],A[2]*r[0]+k[2]*r[1]+w[2]*r[2]]),z}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,u,p){const _=function(k,z,$){const q=1/(1<<$.z);return new c.a1(k/c.$*q+$.x*q,z/c.$*q+$.y*q)}(r,u,p.canonical),w=(A=_.y,[c.bo(_.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-A*Math.PI*2))-.5*Math.PI]);var A;return this.getCircleRadiusCorrection()/Math.cos(w[1])}projectTileCoordinates(r,u,p,_){const w=p.canonical,A=zo(r,u,w.x,w.y,w.z),k=1+(_?_(r,u):0)/c.bu,z=[A[0]*k,A[1]*k,A[2]*k,1];c.aw(z,z,this._globeViewProjMatrixNoCorrection);const $=this._cachedClippingPlane,q=$[0]*A[0]+$[1]*A[1]+$[2]*A[2]+$[3]<0;return{point:new c.P(z[0]/z[3],z[1]/z[3]),signedDistanceFromCamera:z[3],isOccluded:q}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=vl(this.worldSize,this.center.lat),u=c.ba(),p=c.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),c.b4(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const _=this.centerOffset;u[8]=2*-_.x/this._helper._width,u[9]=2*_.y/this._helper._height,this._projectionMatrix=c.b5(u),this._globeProjMatrixInverted=c.ba(),c.aq(this._globeProjMatrixInverted,u),c.M(u,u,[0,0,-this.cameraToCenterDistance]),c.b6(u,u,this.rollInRadians),c.b7(u,u,-this.pitchInRadians),c.b6(u,u,this.bearingInRadians),c.M(u,u,[0,0,-r]);const w=c.bp();w[0]=r,w[1]=r,w[2]=r,c.b7(p,u,this.center.lat*Math.PI/180),c.bz(p,p,-this.center.lng*Math.PI/180),c.N(p,p,w),this._globeViewProjMatrixNoCorrection=p,c.b7(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),c.bz(u,u,-this.center.lng*Math.PI/180),c.N(u,u,w),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=c.ba(),c.aq(this._globeViewProjMatrixNoCorrectionInverted,p);const A=c.bp();this._cameraPosition=c.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/r,c.bw(this._cameraPosition,this._cameraPosition,A,-this.rollInRadians),c.bx(this._cameraPosition,this._cameraPosition,A,this.pitchInRadians),c.bw(this._cameraPosition,this._cameraPosition,A,-this.bearingInRadians),c.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),c.bx(this._cameraPosition,this._cameraPosition,A,-this.center.lat*Math.PI/180),c.by(this._cameraPosition,this._cameraPosition,A,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const k=c.b5(this._globeViewProjMatrixNoCorrectionInverted);c.N(k,k,[1,1,-1]),this._cachedFrustum=Br.fromInvProjectionMatrix(k,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(r){c.w("calculateFogMatrix is not supported on globe projection.");const u=c.ba();return c.ag(u),u}getVisibleUnwrappedCoordinates(r){return[new c.b2(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&c.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,u){if(!this._globeViewProjMatrixNoCorrection)return 1;const p=ri(r);c.aR(p,p,1+u/c.bu);const _=c.bv();return c.aw(_,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),_[2]/_[3]}populateCache(r){}getBounds(){const r=.5*this.width,u=.5*this.height,p=[new c.P(0,0),new c.P(r,0),new c.P(this.width,0),new c.P(this.width,u),new c.P(this.width,this.height),new c.P(r,this.height),new c.P(0,this.height),new c.P(0,u)],_=[];for(const H of p)_.push(this.unprojectScreenPoint(H));let w=0,A=0,k=0,z=0;const $=this.center;for(const H of _){const G=c.bA($.lng,H.lng),Q=c.bA($.lat,H.lat);G<A&&(A=G),G>w&&(w=G),Q<z&&(z=Q),Q>k&&(k=Q)}const q=[$.lng+A,$.lat+z,$.lng+w,$.lat+k];return this.isSurfacePointOnScreen([0,1,0])&&(q[3]=90,q[0]=-180,q[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(q[1]=-90,q[0]=-180,q[2]=180),new hr(q)}getConstrained(r,u){const p=c.ah(r.lat,-c.ai,c.ai),_=c.ah(+u,this.minZoom+vi(0,p),this.maxZoom);return{center:new c.S(r.lng,p),zoom:_}}calculateCenterFromCameraLngLatAlt(r,u,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(r,u,p,_)}setLocationAtPoint(r,u){const p=ri(this.unprojectScreenPoint(u)),_=ri(r),w=c.bp();c.bB(w);const A=c.bp();c.by(A,p,w,-this.center.lng*Math.PI/180),c.bx(A,A,w,this.center.lat*Math.PI/180);const k=_[0]*_[0]+_[2]*_[2],z=A[0]*A[0];if(k<z)return;const $=Math.sqrt(k-z),q=-$,H=c.bC(_[0],_[2],A[0],$),G=c.bC(_[0],_[2],A[0],q),Q=c.bp();c.by(Q,_,w,-H);const se=c.bC(Q[1],Q[2],A[1],A[2]),pe=c.bp();c.by(pe,_,w,-G);const fe=c.bC(pe[1],pe[2],A[1],A[2]),ge=.5*Math.PI,ve=se>=-ge&&se<=ge,Te=fe>=-ge&&fe<=ge;let xe,Ce;if(ve&&Te){const nt=this.center.lng*Math.PI/180,We=this.center.lat*Math.PI/180;c.bD(H,nt)+c.bD(se,We)<c.bD(G,nt)+c.bD(fe,We)?(xe=H,Ce=se):(xe=G,Ce=fe)}else if(ve)xe=H,Ce=se;else{if(!Te)return;xe=G,Ce=fe}const Oe=xe/Math.PI*180,we=Ce/Math.PI*180,Re=this.center.lat;this.setCenter(new c.S(Oe,c.ah(we,-90,90))),this.setZoom(this.zoom+vi(Re,this.center.lat))}locationToScreenPoint(r,u){const p=ri(r);if(u){const _=u.getElevationForLngLatZoom(r,this._helper._tileZoom);c.aR(p,p,1+_/c.bu)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(r){const u=c.bv();return c.aw(u,[...r,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new c.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,u){if(u){const p=u.pointCoordinate(r);if(p)return p}return c.a1.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,u){var p;return(p=this.screenPointToMercatorCoordinate(r,u))===null||p===void 0?void 0:p.toLngLat()}isPointOnMapSurface(r,u){const p=this._cameraPosition,_=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(p,_)}getRayDirectionFromPixel(r){const u=c.bv();u[0]=r.x/this.width*2-1,u[1]=-1*(r.y/this.height*2-1),u[2]=1,u[3]=1,c.aw(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];const p=c.bp();p[0]=u[0]-this._cameraPosition[0],p[1]=u[1]-this._cameraPosition[1],p[2]=u[2]-this._cameraPosition[2];const _=c.bp();return c.aV(_,p),_}isSurfacePointVisible(r){const u=this._cachedClippingPlane;return u[0]*r[0]+u[1]*r[1]+u[2]*r[2]+u[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const u=c.bv();return c.aw(u,[...r,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(r,u){const p=c.aX(r,u),_=c.bp(),w=c.bp();c.aR(w,u,p),c.aU(_,r,w);const A=1-c.aX(_,_);if(A<0)return null;const k=c.aX(r,r)-1,z=-p+(p<0?1:-1)*Math.sqrt(A),$=k/z,q=z;return{tMin:Math.min($,q),tMax:Math.max($,q)}}unprojectScreenPoint(r){const u=this._cameraPosition,p=this.getRayDirectionFromPixel(r),_=this.rayPlanetIntersection(u,p);if(_){const q=c.bp();c.aS(q,u,[p[0]*_.tMin,p[1]*_.tMin,p[2]*_.tMin]);const H=c.bp();return c.aV(H,q),Qc(H)}const w=this._cachedClippingPlane,A=w[0]*p[0]+w[1]*p[1]+w[2]*p[2],k=-c.b1(w,u)/A,z=c.bp();if(k>0)c.aS(z,u,[p[0]*k,p[1]*k,p[2]*k]);else{const q=c.bp();c.aS(q,u,[2*p[0],2*p[1],2*p[2]]);const H=c.b1(this._cachedClippingPlane,q);c.aU(z,q,[this._cachedClippingPlane[0]*H,this._cachedClippingPlane[1]*H,this._cachedClippingPlane[2]*H])}const $=function(q){const H=c.bp();return H[0]=q[0]*-q[3],H[1]=q[1]*-q[3],H[2]=q[2]*-q[3],{center:H,radius:Math.sqrt(1-q[3]*q[3])}}(w);return Qc(function(q,H,G){const Q=c.bp();c.aU(Q,G,q);const se=c.bp();return c.bq(se,q,Q,H/c.a$(Q)),se}($.center,$.radius,z))}getMatrixForModel(r,u){const p=c.S.convert(r),_=1/c.bu,w=c.b9();return c.bz(w,w,p.lng/180*Math.PI),c.b7(w,w,-p.lat/180*Math.PI),c.M(w,w,[0,0,1+u/c.bu]),c.b7(w,w,.5*Math.PI),c.N(w,w,[_,_,_]),w}getProjectionDataForCustomLayer(r=!0){const u=this.getProjectionData({overscaledTileID:new c.Z(0,0,0,0,0),applyGlobeMatrix:r});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(r){}}class Do{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,u,p){return this._helper.interpolatePadding(r,u,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,u,p=!0){this._helper.resize(r,u,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,u){this._helper.overrideNearFarZ(r,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,u){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new ui({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,u)=>this.getConstrained(r,u)}),this._globeness=1,this._mercatorTransform=new Ms,this._verticalPerspectiveTransform=new eu}clone(){const r=new Do;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const u=this._mercatorTransform.getProjectionData(r),p=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:u.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return c.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return c.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,u,p){const _=this._mercatorTransform.getPitchedTextCorrection(r,u,p),w=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,u,p);return c.bk(_,w,this._globeness)}projectTileCoordinates(r,u,p,_){return this.currentTransform.projectTileCoordinates(r,u,p,_)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,u){return this.currentTransform.lngLatToCameraDepth(r,u)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,u){return this.currentTransform.getConstrained(r,u)}calculateCenterFromCameraLngLatAlt(r,u,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(r,u,p,_)}setLocationAtPoint(r,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,u),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,u),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,u){return this.currentTransform.locationToScreenPoint(r,u)}screenPointToMercatorCoordinate(r,u){return this.currentTransform.screenPointToMercatorCoordinate(r,u)}screenPointToLocation(r,u){return this.currentTransform.screenPointToLocation(r,u)}isPointOnMapSurface(r,u){return this.currentTransform.isPointOnMapSurface(r,u)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,u){return this.currentTransform.getMatrixForModel(r,u)}getProjectionDataForCustomLayer(r=!0){const u=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return u;const p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return p.fallbackMatrix=u.mainMatrix,p}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class uo{get useGlobeControls(){return!0}handlePanInertia(r,u){const p=sh(r,u);return Math.abs(p.lng-u.center.lng)>180&&(p.lng=u.center.lng+179.5*Math.sign(p.lng-u.center.lng)),{easingCenter:p,easingOffset:new c.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,u){const p=r.around,_=u.screenPointToLocation(p);r.bearingDelta&&u.setBearing(u.bearing+r.bearingDelta),r.pitchDelta&&u.setPitch(u.pitch+r.pitchDelta),r.rollDelta&&u.setRoll(u.roll+r.rollDelta);const w=u.zoom;r.zoomDelta&&u.setZoom(u.zoom+r.zoomDelta);const A=u.zoom-w;if(A===0)return;const k=c.bA(u.center.lng,_.lng),z=k/(Math.abs(k/180)+1),$=c.bA(u.center.lat,_.lat),q=u.getRayDirectionFromPixel(p),H=u.cameraPosition,G=-1*c.aX(H,q),Q=c.bp();c.aS(Q,H,[q[0]*G,q[1]*G,q[2]*G]);const se=c.aZ(Q)-1,pe=Math.exp(.5*-Math.max(se-.3,0)),fe=vl(u.worldSize,u.center.lat)/Math.min(u.width,u.height),ge=c.bn(fe,.9,.5,1,.25),ve=(1-c.af(-A))*Math.min(pe,ge),Te=u.center.lat,xe=u.zoom,Ce=new c.S(u.center.lng+z*ve,c.ah(u.center.lat+$*ve,-c.ai,c.ai));u.setLocationAtPoint(_,p);const Oe=u.center,we=c.bn(Math.abs(k),45,85,0,1),Re=c.bn(fe,.75,.35,0,1),nt=Math.pow(Math.max(we,Re),.25),We=c.bA(Oe.lng,Ce.lng),Ke=c.bA(Oe.lat,Ce.lat);u.setCenter(new c.S(Oe.lng+We*nt,Oe.lat+Ke*nt).wrap()),u.setZoom(xe+vi(Te,u.center.lat))}handleMapControlsPan(r,u,p){if(!r.panDelta)return;const _=u.center.lat,w=u.zoom;u.setCenter(sh(r.panDelta,u).wrap()),u.setZoom(w+vi(_,u.center.lat))}cameraForBoxAndBearing(r,u,p,_,w){const A=Ni(r,u,p,_,w),k=u.left/w.width*2-1,z=(w.width-u.right)/w.width*2-1,$=u.top/w.height*-2+1,q=(w.height-u.bottom)/w.height*-2+1,H=c.bA(p.getWest(),p.getEast())<0,G=H?p.getEast():p.getWest(),Q=H?p.getWest():p.getEast(),se=Math.max(p.getNorth(),p.getSouth()),pe=Math.min(p.getNorth(),p.getSouth()),fe=G+.5*c.bA(G,Q),ge=se+.5*c.bA(se,pe),ve=w.clone();ve.setCenter(A.center),ve.setBearing(A.bearing),ve.setPitch(0),ve.setRoll(0),ve.setZoom(A.zoom);const Te=ve.modelViewProjectionMatrix,xe=[ri(p.getNorthWest()),ri(p.getNorthEast()),ri(p.getSouthWest()),ri(p.getSouthEast()),ri(new c.S(Q,ge)),ri(new c.S(G,ge)),ri(new c.S(fe,se)),ri(new c.S(fe,pe))],Ce=ri(A.center);let Oe=Number.POSITIVE_INFINITY;for(const we of xe)k<0&&(Oe=uo.getLesserNonNegativeNonNull(Oe,uo.solveVectorScale(we,Ce,Te,"x",k))),z>0&&(Oe=uo.getLesserNonNegativeNonNull(Oe,uo.solveVectorScale(we,Ce,Te,"x",z))),$>0&&(Oe=uo.getLesserNonNegativeNonNull(Oe,uo.solveVectorScale(we,Ce,Te,"y",$))),q<0&&(Oe=uo.getLesserNonNegativeNonNull(Oe,uo.solveVectorScale(we,Ce,Te,"y",q)));if(Number.isFinite(Oe)&&Oe!==0)return A.zoom=ve.zoom+c.ak(Oe),A;di()}handleJumpToCenterZoom(r,u){const p=r.center.lat,_=r.getConstrained(u.center?c.S.convert(u.center):r.center,r.zoom).center;r.setCenter(_.wrap());const w=u.zoom!==void 0?+u.zoom:r.zoom+vi(p,_.lat);r.zoom!==w&&r.setZoom(w)}handleEaseTo(r,u){const p=r.zoom,_=r.center,w=r.padding,A={roll:r.roll,pitch:r.pitch,bearing:r.bearing},k={roll:u.roll===void 0?r.roll:u.roll,pitch:u.pitch===void 0?r.pitch:u.pitch,bearing:u.bearing===void 0?r.bearing:u.bearing},z=u.zoom!==void 0,$=!r.isPaddingEqual(u.padding);let q=!1;const H=u.center?c.S.convert(u.center):_,G=r.getConstrained(H,p).center;co(r,G);const Q=r.clone();Q.setCenter(G),Q.setZoom(z?+u.zoom:p+vi(_.lat,H.lat)),Q.setBearing(u.bearing);const se=new c.P(c.ah(r.centerPoint.x+u.offsetAsPoint.x,0,r.width),c.ah(r.centerPoint.y+u.offsetAsPoint.y,0,r.height));Q.setLocationAtPoint(G,se);const pe=(u.offset&&u.offsetAsPoint.mag())>0?Q.center:G,fe=z?+u.zoom:p+vi(_.lat,pe.lat),ge=p+vi(_.lat,0),ve=fe+vi(pe.lat,0),Te=c.bA(_.lng,pe.lng),xe=c.bA(_.lat,pe.lat),Ce=c.af(ve-ge);return q=fe!==p,{easeFunc:Oe=>{if(c.be(A,k)||ei({startEulerAngles:A,endEulerAngles:k,tr:r,k:Oe,useSlerp:A.roll!=k.roll}),$&&r.interpolatePadding(w,u.padding,Oe),u.around)c.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(u.around,u.aroundPoint);else{const we=ve>ge?Math.min(2,Ce):Math.max(.5,Ce),Re=Math.pow(we,1-Oe),nt=Nf(_,Te,xe,Oe*Re);r.setCenter(nt.wrap())}if(q){const we=c.C.number(ge,ve,Oe)+vi(0,r.center.lat);r.setZoom(we)}},isZooming:q,elevationCenter:pe}}handleFlyTo(r,u){const p=u.zoom!==void 0,_=r.center,w=r.zoom,A=r.padding,k=!r.isPaddingEqual(u.padding),z=r.getConstrained(c.S.convert(u.center||u.locationAtOffset),w).center,$=p?+u.zoom:r.zoom+vi(r.center.lat,z.lat),q=r.clone();q.setCenter(z),q.setZoom($),q.setBearing(u.bearing);const H=new c.P(c.ah(r.centerPoint.x+u.offsetAsPoint.x,0,r.width),c.ah(r.centerPoint.y+u.offsetAsPoint.y,0,r.height));q.setLocationAtPoint(z,H);const G=q.center;co(r,G);const Q=function(xe,Ce,Oe){const we=ri(Ce),Re=ri(Oe),nt=c.aX(we,Re),We=Math.acos(nt),Ke=Kc(xe);return We/(2*Math.PI)*Ke}(r,_,G),se=w+vi(_.lat,0),pe=$+vi(G.lat,0),fe=c.af(pe-se);let ge;if(typeof u.minZoom=="number"){const xe=+u.minZoom+vi(G.lat,0),Ce=Math.min(xe,se,pe)+vi(0,G.lat),Oe=r.getConstrained(G,Ce).zoom+vi(G.lat,0);ge=c.af(Oe-se)}const ve=c.bA(_.lng,G.lng),Te=c.bA(_.lat,G.lat);return{easeFunc:(xe,Ce,Oe,we)=>{const Re=Nf(_,ve,Te,Oe);k&&r.interpolatePadding(A,u.padding,xe);const nt=xe===1?G:Re;r.setCenter(nt.wrap());const We=se+c.ak(Ce);r.setZoom(xe===1?$:We+vi(0,nt.lat))},scaleOfZoom:fe,targetCenter:G,scaleOfMinZoom:ge,pixelPathLength:Q}}static solveVectorScale(r,u,p,_,w){const A=_==="x"?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],k=[p[3],p[7],p[11],p[15]],z=r[0]*A[0]+r[1]*A[1]+r[2]*A[2],$=r[0]*k[0]+r[1]*k[1]+r[2]*k[2],q=u[0]*A[0]+u[1]*A[1]+u[2]*A[2],H=u[0]*k[0]+u[1]*k[1]+u[2]*k[2];return q+w*$===z+w*H||k[3]*(z-q)+A[3]*(H-$)+z*H==q*$?null:(q+A[3]-w*H-w*k[3])/(q-z-w*H+w*$)}static getLesserNonNegativeNonNull(r,u){return u!==null&&u>=0&&u<r?u:r}}class Lf{constructor(r){this._globe=r,this._mercatorCameraHelper=new Ps,this._verticalPerspectiveCameraHelper=new uo}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,u){return this.currentHelper.handlePanInertia(r,u)}handleMapControlsRollPitchBearingZoom(r,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,u)}handleMapControlsPan(r,u,p){this.currentHelper.handleMapControlsPan(r,u,p)}cameraForBoxAndBearing(r,u,p,_,w){return this.currentHelper.cameraForBoxAndBearing(r,u,p,_,w)}handleJumpToCenterZoom(r,u){this.currentHelper.handleJumpToCenterZoom(r,u)}handleEaseTo(r,u){return this.currentHelper.handleEaseTo(r,u)}handleFlyTo(r,u){return this.currentHelper.handleFlyTo(r,u)}}const ch=(b,r)=>c.y(b,r&&r.filter(u=>u.identifier!=="source.canvas")),Em=c.bE();class gd extends c.E{constructor(r,u={}){var p,_;super(),this._rtlPluginLoaded=()=>{for(const A in this.sourceCaches){const k=this.sourceCaches[A].getSource().type;k!=="vector"&&k!=="geojson"||this.sourceCaches[A].reload()}},this.map=r,this.dispatcher=new Rt(Vt(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(A,k)=>this.getGlyphs(A,k)),this.dispatcher.registerMessageHandler("GI",(A,k)=>this.getImages(A,k)),this.dispatcher.registerMessageHandler("GDA",(A,k)=>this.getDashes(A,k)),this.imageManager=new ke,this.imageManager.setEventedParent(this);const w=((p=r._container)===null||p===void 0?void 0:p.lang)||typeof document<"u"&&((_=document.documentElement)===null||_===void 0?void 0:_.lang)||void 0;this.glyphManager=new tt(r._requestManager,u.localIdeographFontFamily,w),this.lineAtlas=new ht(256,512),this.crossTileSymbolIndex=new Yc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",c.bG()),Qn().on(Mo,this._rtlPluginLoaded),this.on("data",A=>{if(A.dataType!=="source"||A.sourceDataType!=="metadata")return;const k=this.sourceCaches[A.sourceId];if(!k)return;const z=k.getSource();if(z&&z.vectorLayerIds)for(const $ in this._layers){const q=this._layers[$];q.source===z.id&&this._validateLayer(q)}})}setGlobalStateProperty(r,u){var p,_,w;this._checkLoaded();const A=u===null?(w=(_=(p=this.stylesheet.state)===null||p===void 0?void 0:p[r])===null||_===void 0?void 0:_.default)!==null&&w!==void 0?w:null:u;if(c.bH(A,this._globalState[r]))return this;this._globalState[r]=A,this._applyGlobalStateChanges([r])}getGlobalState(){return this._globalState}setGlobalState(r){this._checkLoaded();const u=[];for(const p in r)!c.bH(this._globalState[p],r[p].default)&&(u.push(p),this._globalState[p]=r[p].default);this._applyGlobalStateChanges(u)}_applyGlobalStateChanges(r){if(r.length===0)return;const u=new Set,p={};for(const _ of r){p[_]=this._globalState[_];for(const w in this._layers){const A=this._layers[w],k=A.getLayoutAffectingGlobalStateRefs(),z=A.getPaintAffectingGlobalStateRefs();if(k.has(_)&&u.add(A.source),z.has(_))for(const{name:$,value:q}of z.get(_))this._updatePaintProperty(A,$,q)}}this.dispatcher.broadcast("UGS",p);for(const _ in this.sourceCaches)u.has(_)&&(this._reloadSource(_),this._changed=!0)}loadURL(r,u={},p){this.fire(new c.l("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const _=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const w=this._loadStyleRequest;c.j(_,this._loadStyleRequest).then(A=>{this._loadStyleRequest=null,this._load(A.data,u,p)}).catch(A=>{this._loadStyleRequest=null,A&&!w.signal.aborted&&this.fire(new c.k(A))})}loadJSON(r,u={},p){this.fire(new c.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,B.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(r,u,p)}).catch(()=>{})}loadEmpty(){this.fire(new c.l("dataloading",{dataType:"style"})),this._load(Em,{validate:!1})}_load(r,u,p){var _,w;let A=u.transformStyle?u.transformStyle(p,r):r;if(!u.validate||!ch(this,c.z(A))){A=Object.assign({},A),this._loaded=!0,this.stylesheet=A;for(const k in A.sources)this.addSource(k,A.sources[k],{validate:!1});A.sprite?this._loadSprite(A.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(A.glyphs),this._createLayers(),this.light=new Pe(this.stylesheet.light),this._setProjectionInternal(((_=this.stylesheet.projection)===null||_===void 0?void 0:_.type)||"mercator"),this.sky=new Ge(this.stylesheet.sky),this.map.setTerrain((w=this.stylesheet.terrain)!==null&&w!==void 0?w:null),this.fire(new c.l("data",{dataType:"style"})),this.fire(new c.l("style.load"))}}_createLayers(){var r,u,p;const _=c.bI(this.stylesheet.layers);this.setGlobalState((r=this.stylesheet.state)!==null&&r!==void 0?r:null),this.dispatcher.broadcast("SL",_),this._order=_.map(w=>w.id),this._layers={},this._serializedLayers=null;for(const w of _){const A=c.bJ(w,this._globalState);if(A.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=A,c.bK(A)&&this.sourceCaches[A.source]){const k=(p=(u=w.paint)===null||u===void 0?void 0:u["raster-fade-duration"])!==null&&p!==void 0?p:A.paint.get("raster-fade-duration");this.sourceCaches[A.source].setRasterFadeDuration(k)}}}_loadSprite(r,u=!1,p=void 0){let _;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(w,A,k,z){return c._(this,void 0,void 0,function*(){const $=oe(w),q=k>1?"@2x":"",H={},G={};for(const{id:Q,url:se}of $){const pe=A.transformRequest(me(se,q,".json"),"SpriteJSON");H[Q]=c.j(pe,z);const fe=A.transformRequest(me(se,q,".png"),"SpriteImage");G[Q]=ue.getImage(fe,z)}return yield Promise.all([...Object.values(H),...Object.values(G)]),function(Q,se){return c._(this,void 0,void 0,function*(){const pe={};for(const fe in Q){pe[fe]={};const ge=B.getImageCanvasContext((yield se[fe]).data),ve=(yield Q[fe]).data;for(const Te in ve){const{width:xe,height:Ce,x:Oe,y:we,sdf:Re,pixelRatio:nt,stretchX:We,stretchY:Ke,content:Qe,textFitWidth:Tt,textFitHeight:At}=ve[Te];pe[fe][Te]={data:null,pixelRatio:nt,sdf:Re,stretchX:We,stretchY:Ke,content:Qe,textFitWidth:Tt,textFitHeight:At,spriteData:{width:xe,height:Ce,x:Oe,y:we,context:ge}}}}return pe})}(H,G)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(w=>{if(this._spriteRequest=null,w)for(const A in w){this._spritesImagesIds[A]=[];const k=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter(z=>!(z in w)):[];for(const z of k)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in w[A]){const $=A==="default"?z:`${A}:${z}`;this._spritesImagesIds[A].push($),$ in this.imageManager.images?this.imageManager.updateImage($,w[A][z],!1):this.imageManager.addImage($,w[A][z]),u&&(this._changedImages[$]=!0)}}}).catch(w=>{this._spriteRequest=null,_=w,this.fire(new c.k(_))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"})),p&&p(_)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const p=r.sourceLayer;if(!p)return;const _=u.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(p)===-1)&&this.fire(new c.k(new Error(`Source layer "${p}" does not exist on source "${_.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,u=!1){const p=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u?c.bL(p):p);const _=[];for(const w of r)if(p[w]){const A=u?c.bL(p[w]):p[w];_.push(A)}return _}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const _=this._layers[p];_.type!=="custom"&&(r[p]=_.serialize())}return r}hasTransitions(){var r,u,p;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((u=this.sky)===null||u===void 0)&&u.hasTransition()||!((p=this.projection)===null||p===void 0)&&p.hasTransition())return!0;for(const _ in this.sourceCaches)if(this.sourceCaches[_].hasTransition())return!0;for(const _ in this._layers)if(this._layers[_].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(u){const _=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(_.length||w.length)&&this._updateWorkerLayers(_,w);for(const A in this._updatedSources){const k=this._updatedSources[A];if(k==="reload")this._reloadSource(A);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const p={};for(const _ in this.sourceCaches){const w=this.sourceCaches[_];p[_]=w.used,w.used=!1}for(const _ of this._order){const w=this._layers[_];w.recalculate(r,this._availableImages),!w.isHidden(r.zoom)&&w.source&&(this.sourceCaches[w.source].used=!0)}for(const _ in p){const w=this.sourceCaches[_];!!p[_]!=!!w.used&&w.fire(new c.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,u&&this.fire(new c.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){var p;this._checkLoaded();const _=this.serialize();if(r=u.transformStyle?u.transformStyle(_,r):r,((p=u.validate)===null||p===void 0||p)&&ch(this,c.z(r)))return!1;(r=c.bL(r)).layers=c.bI(r.layers);const w=c.bM(_,r),A=this._getOperationsToPerform(w);if(A.unimplemented.length>0)throw new Error(`Unimplemented: ${A.unimplemented.join(", ")}.`);if(A.operations.length===0)return!1;for(const k of A.operations)k();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const u=[],p=[];for(const _ of r)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push(()=>this.addLayer.apply(this,_.args));break;case"removeLayer":u.push(()=>this.removeLayer.apply(this,_.args));break;case"setPaintProperty":u.push(()=>this.setPaintProperty.apply(this,_.args));break;case"setLayoutProperty":u.push(()=>this.setLayoutProperty.apply(this,_.args));break;case"setFilter":u.push(()=>this.setFilter.apply(this,_.args));break;case"addSource":u.push(()=>this.addSource.apply(this,_.args));break;case"removeSource":u.push(()=>this.removeSource.apply(this,_.args));break;case"setLayerZoomRange":u.push(()=>this.setLayerZoomRange.apply(this,_.args));break;case"setLight":u.push(()=>this.setLight.apply(this,_.args));break;case"setGeoJSONSourceData":u.push(()=>this.setGeoJSONSourceData.apply(this,_.args));break;case"setGlyphs":u.push(()=>this.setGlyphs.apply(this,_.args));break;case"setSprite":u.push(()=>this.setSprite.apply(this,_.args));break;case"setTerrain":u.push(()=>this.map.setTerrain.apply(this,_.args));break;case"setSky":u.push(()=>this.setSky.apply(this,_.args));break;case"setProjection":this.setProjection.apply(this,_.args);break;case"setGlobalState":u.push(()=>this.setGlobalState.apply(this,_.args));break;case"setTransition":u.push(()=>{});break;default:p.push(_.command)}return{operations:u,unimplemented:p}}addImage(r,u){if(this.getImage(r))return this.fire(new c.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new c.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,p={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.z.source,`sources.${r}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const _=this.sourceCaches[r]=new Ft(r,u,this.dispatcher);_.style=this,_.setEventedParent(this,()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:r})),_.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===r)return this.fire(new c.k(new Error(`Source "${r}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new c.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const p=this.sourceCaches[r].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,p={}){this._checkLoaded();const _=r.id;if(this.getLayer(_))return void this.fire(new c.k(new Error(`Layer "${_}" already exists on this map.`)));let w;if(r.type==="custom"){if(ch(this,c.bN(r)))return;w=c.bJ(r,this._globalState)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(_,r.source),r=c.bL(r),r=c.e(r,{source:_})),this._validate(c.z.layer,`layers.${_}`,r,{arrayIndex:-1},p))return;w=c.bJ(r,this._globalState),this._validateLayer(w),w.setEventedParent(this,{layer:{id:_}})}const A=u?this._order.indexOf(u):this._order.length;if(u&&A===-1)this.fire(new c.k(new Error(`Cannot add layer "${_}" before non-existing layer "${u}".`)));else{if(this._order.splice(A,0,_),this._layerOrderChanged=!0,this._layers[_]=w,this._removedLayers[_]&&w.source&&w.type!=="custom"){const k=this._removedLayers[_];delete this._removedLayers[_],k.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new c.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const p=this._order.indexOf(r);this._order.splice(p,1);const _=u?this._order.indexOf(u):this._order.length;u&&_===-1?this.fire(new c.k(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(_,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new c.k(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const p=this._order.indexOf(r);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,p){this._checkLoaded();const _=this.getLayer(r);_?_.minzoom===u&&_.maxzoom===p||(u!=null&&(_.minzoom=u),p!=null&&(_.maxzoom=p),this._updateLayer(_)):this.fire(new c.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,p={}){this._checkLoaded();const _=this.getLayer(r);if(_){if(!c.bH(_.filter,u))return u==null?(_.setFilter(void 0),void this._updateLayer(_)):void(this._validate(c.z.filter,`layers.${_.id}.filter`,u,null,p)||(_.setFilter(c.bL(u)),this._updateLayer(_)))}else this.fire(new c.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return c.bL(this.getLayer(r).filter)}setLayoutProperty(r,u,p,_={}){this._checkLoaded();const w=this.getLayer(r);w?c.bH(w.getLayoutProperty(u),p)||(w.setLayoutProperty(u,p,_),this._updateLayer(w)):this.fire(new c.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const p=this.getLayer(r);if(p)return p.getLayoutProperty(u);this.fire(new c.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,p,_={}){this._checkLoaded();const w=this.getLayer(r);w?c.bH(w.getPaintProperty(u),p)||this._updatePaintProperty(w,u,p,_):this.fire(new c.k(new Error(`Cannot style non-existing layer "${r}".`)))}_updatePaintProperty(r,u,p,_={}){r.setPaintProperty(u,p,_)&&this._updateLayer(r),c.bK(r)&&u==="raster-fade-duration"&&this.sourceCaches[r.source].setRasterFadeDuration(p),this._changed=!0,this._updatedPaintProps[r.id]=!0,this._serializedLayers=null}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const p=r.source,_=r.sourceLayer,w=this.sourceCaches[p];if(w===void 0)return void this.fire(new c.k(new Error(`The source '${p}' does not exist in the map's style.`)));const A=w.getSource().type;A==="geojson"&&_?this.fire(new c.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||_?(r.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),w.setFeatureState(_,r.id,u)):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const p=r.source,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new c.k(new Error(`The source '${p}' does not exist in the map's style.`)));const w=_.getSource().type,A=w==="vector"?r.sourceLayer:void 0;w!=="vector"||A?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new c.k(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(A,r.id,u):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,p=r.sourceLayer,_=this.sourceCaches[u];if(_!==void 0)return _.getSource().type!=="vector"||p?(r.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),_.getFeatureState(p,r.id)):void this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=c.bO(this.sourceCaches,w=>w.serialize()),u=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,_=this.stylesheet;return c.bP({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,projection:_.projection,sources:r,layers:u,terrain:p},w=>w!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=A=>this._layers[A].type==="fill-extrusion",p={},_=[];for(let A=this._order.length-1;A>=0;A--){const k=this._order[A];if(u(k)){p[k]=A;for(const z of r){const $=z[k];if($)for(const q of $)_.push(q)}}}_.sort((A,k)=>k.intersectionZ-A.intersectionZ);const w=[];for(let A=this._order.length-1;A>=0;A--){const k=this._order[A];if(u(k))for(let z=_.length-1;z>=0;z--){const $=_[z].feature;if(p[$.layer.id]<A)break;w.push($),_.pop()}else for(const z of r){const $=z[k];if($)for(const q of $)w.push(q.feature)}}return w}queryRenderedFeatures(r,u,p){u&&u.filter&&this._validate(c.z.filter,"queryRenderedFeatures.filter",u.filter,null,u);const _={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new c.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const $ of u.layers){const q=this._layers[$];if(!q)return this.fire(new c.k(new Error(`The layer '${$}' does not exist in the map's style and cannot be queried for features.`))),[];_[q.source]=!0}}const w=[];u.availableImages=this._availableImages;const A=this._serializedAllLayers(),k=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,z=Object.assign(Object.assign({},u),{layers:k,globalState:this._globalState});for(const $ in this.sourceCaches)u.layers&&!_[$]||w.push(Ot(this.sourceCaches[$],this._layers,A,r,z,p,this.map.terrain?(q,H,G)=>this.map.terrain.getElevation(q,H,G):void 0));return this.placement&&w.push(function($,q,H,G,Q,se,pe){const fe={},ge=se.queryRenderedSymbols(G),ve=[];for(const Te of Object.keys(ge).map(Number))ve.push(pe[Te]);ve.sort(er);for(const Te of ve){const xe=Te.featureIndex.lookupSymbolFeatures(ge[Te.bucketInstanceId],q,Te.bucketIndex,Te.sourceLayerIndex,{filterSpec:Q.filter,globalState:Q.globalState},Q.layers,Q.availableImages,$);for(const Ce in xe){const Oe=fe[Ce]=fe[Ce]||[],we=xe[Ce];we.sort((Re,nt)=>{const We=Te.featureSortOrder;if(We){const Ke=We.indexOf(Re.featureIndex);return We.indexOf(nt.featureIndex)-Ke}return nt.featureIndex-Re.featureIndex});for(const Re of we)Oe.push(Re)}}return function(Te,xe,Ce){for(const Oe in Te)for(const we of Te[Oe])ir(we,Ce[xe[Oe].source]);return Te}(fe,$,H)}(this._layers,A,this.sourceCaches,r,z,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(r,u){u!=null&&u.filter&&this._validate(c.z.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[r];return p?function(_,w){const A=_.getRenderableIds().map($=>_.getTileByID($)),k=[],z={};for(let $=0;$<A.length;$++){const q=A[$],H=q.tileID.canonical.key;z[H]||(z[H]=!0,q.querySourceFeatures(k,w))}return k}(p,u?Object.assign(Object.assign({},u),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const p=this.light.getLight();let _=!1;for(const A in r)if(!c.bH(r[A],p[A])){_=!0;break}if(!_)return;const w={now:B.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(w)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,u={}){this._checkLoaded();const p=this.getSky();let _=!1;if(!r&&!p)return;if(r&&!p)_=!0;else if(!r&&p)_=!0;else for(const A in r)if(!c.bH(r[A],p[A])){_=!0;break}if(!_)return;const w={now:B.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,u),this.sky.updateTransitions(w)}_setProjectionInternal(r){const u=function(p){if(Array.isArray(p)){const _=new oh({type:p});return{projection:_,transform:new Do,cameraHelper:new Lf(_)}}switch(p){case"mercator":return{projection:new pl,transform:new Ms,cameraHelper:new Ps};case"globe":{const _=new oh({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:_,transform:new Do,cameraHelper:new Lf(_)}}case"vertical-perspective":return{projection:new Es,transform:new eu,cameraHelper:new uo};default:return c.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new pl,transform:new Ms,cameraHelper:new Ps}}}(r);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(const p in this.sourceCaches)this.sourceCaches[p].reload()}_validate(r,u,p,_,w={}){return(!w||w.validate!==!1)&&ch(this,r.call(c.z,c.e({key:u,style:this.serialize(),value:p,styleSpec:c.v},_)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Qn().off(Mo,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,p,_,w=!1){let A=!1,k=!1;const z={};for(const $ of this._order){const q=this._layers[$];if(q.type!=="symbol")continue;if(!z[q.source]){const G=this.sourceCaches[q.source];z[q.source]=G.getRenderableIds(!0).map(Q=>G.getTileByID(Q)).sort((Q,se)=>se.tileID.overscaledZ-Q.tileID.overscaledZ||(Q.tileID.isLessThan(se.tileID)?-1:1))}const H=this.crossTileSymbolIndex.addLayer(q,z[q.source],r.center.lng);A=A||H}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(B.now(),r.zoom))&&(this.pauseablePlacement=new rh(r,this.map.terrain,this._order,w,u,p,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(B.now()),k=!0),A&&this.pauseablePlacement.placement.setStale()),k||A)for(const $ of this._order){const q=this._layers[$];q.type==="symbol"&&this.placement.updateLayerOpacities(q,z[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(B.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u){return c._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const _=this.sourceCaches[u.source];return _&&_.setDependencies(u.tileID.key,u.type,u.icons),p})}getGlyphs(r,u){return c._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(u.stacks),_=this.sourceCaches[u.source];return _&&_.setDependencies(u.tileID.key,u.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(c.z.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}getDashes(r,u){return c._(this,void 0,void 0,function*(){const p={};for(const[_,w]of Object.entries(u.dashes))p[_]=this.lineAtlas.getDash(w.dasharray,w.round);return p})}addSprite(r,u,p={},_){this._checkLoaded();const w=[{id:r,url:u}],A=[...oe(this.stylesheet.sprite),...w];this._validate(c.z.sprite,"sprite",A,null,p)||(this.stylesheet.sprite=A,this._loadSprite(w,!0,_))}removeSprite(r){this._checkLoaded();const u=oe(this.stylesheet.sprite);if(u.find(p=>p.id===r)){if(this._spritesImagesIds[r])for(const p of this._spritesImagesIds[r])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}else this.fire(new c.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return oe(this.stylesheet.sprite)}setSprite(r,u={},p){this._checkLoaded(),r&&this._validate(c.z.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,p):(this._unloadSprite(),p&&p(null)))}}var Cm=c.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class uh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,p,_,w,A,k,z,$){this.context=r;let q=this.boundPaintVertexBuffers.length!==_.length;for(let H=0;!q&&H<_.length;H++)this.boundPaintVertexBuffers[H]!==_[H]&&(q=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||q||this.boundIndexBuffer!==w||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==$?this.freshBind(u,p,_,w,A,k,z,$):(r.bindVertexArray.set(this.vao),k&&k.bind(),w&&w.dynamicDraw&&w.bind(),z&&z.bind(),$&&$.bind())}freshBind(r,u,p,_,w,A,k,z){const $=r.numAttributes,q=this.context,H=q.gl;this.vao&&this.destroy(),this.vao=q.createVertexArray(),q.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=_,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=z,u.enableAttributes(H,r);for(const G of p)G.enableAttributes(H,r);A&&A.enableAttributes(H,r),k&&k.enableAttributes(H,r),z&&z.enableAttributes(H,r),u.bind(),u.setVertexAttribPointers(H,r,w);for(const G of p)G.bind(),G.setVertexAttribPointers(H,r,w);A&&(A.bind(),A.setVertexAttribPointers(H,r,w)),_&&_.bind(),k&&(k.bind(),k.setVertexAttribPointers(H,r,w)),z&&(z.bind(),z.setVertexAttribPointers(H,r,w)),q.currentNumAttributes=$}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const yd=(b,r,u,p,_)=>({u_texture:0,u_ele_delta:b,u_fog_matrix:r,u_fog_color:u?u.properties.get("fog-color"):c.bf.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?0:u?u.calculateFogBlendOpacity(p):0,u_horizon_color:u?u.properties.get("horizon-color"):c.bf.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:_?1:0}),hh={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function js(b){const r=[];for(let u=0;u<b.length;u++){if(b[u]===null)continue;const p=b[u].split(" ");r.push(p.pop())}return r}class _l{constructor(r,u,p,_,w,A,k,z,$=[]){const q=r.gl;this.program=q.createProgram();const H=js(u.staticAttributes),G=p?p.getBinderAttributes():[],Q=H.concat(G),se=Ri.prelude.staticUniforms?js(Ri.prelude.staticUniforms):[],pe=k.staticUniforms?js(k.staticUniforms):[],fe=u.staticUniforms?js(u.staticUniforms):[],ge=p?p.getBinderUniforms():[],ve=se.concat(pe).concat(fe).concat(ge),Te=[];for(const We of ve)Te.indexOf(We)<0&&Te.push(We);const xe=p?p.defines():[];ti(q)&&xe.unshift("#version 300 es"),w&&xe.push("#define OVERDRAW_INSPECTOR;"),A&&xe.push("#define TERRAIN3D;"),z&&xe.push(z),$&&xe.push(...$);let Ce=xe.concat(Ri.prelude.fragmentSource,k.fragmentSource,u.fragmentSource).join(`
`),Oe=xe.concat(Ri.prelude.vertexSource,k.vertexSource,u.vertexSource).join(`
`);ti(q)||(Ce=function(We){return We.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Ce),Oe=function(We){return We.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Oe));const we=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(we,Ce),q.compileShader(we),!q.getShaderParameter(we,q.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${q.getShaderInfoLog(we)}`);q.attachShader(this.program,we);const Re=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(Re,Oe),q.compileShader(Re),!q.getShaderParameter(Re,q.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${q.getShaderInfoLog(Re)}`);q.attachShader(this.program,Re),this.attributes={};const nt={};this.numAttributes=Q.length;for(let We=0;We<this.numAttributes;We++)Q[We]&&(q.bindAttribLocation(this.program,We,Q[We]),this.attributes[Q[We]]=We);if(q.linkProgram(this.program),!q.getProgramParameter(this.program,q.LINK_STATUS))throw new Error(`Program failed to link: ${q.getProgramInfoLog(this.program)}`);q.deleteShader(Re),q.deleteShader(we);for(let We=0;We<Te.length;We++){const Ke=Te[We];if(Ke&&!nt[Ke]){const Qe=q.getUniformLocation(this.program,Ke);Qe&&(nt[Ke]=Qe)}}this.fixedUniforms=_(r,nt),this.terrainUniforms=((We,Ke)=>({u_depth:new c.bQ(We,Ke.u_depth),u_terrain:new c.bQ(We,Ke.u_terrain),u_terrain_dim:new c.bg(We,Ke.u_terrain_dim),u_terrain_matrix:new c.bS(We,Ke.u_terrain_matrix),u_terrain_unpack:new c.bT(We,Ke.u_terrain_unpack),u_terrain_exaggeration:new c.bg(We,Ke.u_terrain_exaggeration)}))(r,nt),this.projectionUniforms=((We,Ke)=>({u_projection_matrix:new c.bS(We,Ke.u_projection_matrix),u_projection_tile_mercator_coords:new c.bT(We,Ke.u_projection_tile_mercator_coords),u_projection_clipping_plane:new c.bT(We,Ke.u_projection_clipping_plane),u_projection_transition:new c.bg(We,Ke.u_projection_transition),u_projection_fallback_matrix:new c.bS(We,Ke.u_projection_fallback_matrix)}))(r,nt),this.binderUniforms=p?p.getUniforms(r,nt):[]}draw(r,u,p,_,w,A,k,z,$,q,H,G,Q,se,pe,fe,ge,ve,Te){const xe=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(p),r.setStencilMode(_),r.setColorMode(w),r.setCullFace(A),z){r.activeTexture.set(xe.TEXTURE2),xe.bindTexture(xe.TEXTURE_2D,z.depthTexture),r.activeTexture.set(xe.TEXTURE3),xe.bindTexture(xe.TEXTURE_2D,z.texture);for(const Oe in this.terrainUniforms)this.terrainUniforms[Oe].set(z[Oe])}if($)for(const Oe in $)this.projectionUniforms[hh[Oe]].set($[Oe]);if(k)for(const Oe in this.fixedUniforms)this.fixedUniforms[Oe].set(k[Oe]);fe&&fe.setUniforms(r,this.binderUniforms,se,{zoom:pe});let Ce=0;switch(u){case xe.LINES:Ce=2;break;case xe.TRIANGLES:Ce=3;break;case xe.LINE_STRIP:Ce=1}for(const Oe of Q.get()){const we=Oe.vaos||(Oe.vaos={});(we[q]||(we[q]=new uh)).bind(r,this,H,fe?fe.getPaintVertexBuffers():[],G,Oe.vertexOffset,ge,ve,Te),xe.drawElements(u,Oe.primitiveLength*Ce,xe.UNSIGNED_SHORT,Oe.primitiveOffset*Ce*2)}}}function ho(b,r,u){const p=1/c.aC(u,1,r.transform.tileZoom),_=Math.pow(2,u.tileID.overscaledZ),w=u.tileSize*Math.pow(2,r.transform.tileZoom)/_,A=w*(u.tileID.canonical.x+u.tileID.wrap*_),k=w*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[A>>16,k>>16],u_pixel_coord_lower:[65535&A,65535&k]}}const vd=(b,r,u,p)=>{const _=b.style.light,w=_.properties.get("position"),A=[w.x,w.y,w.z],k=c.bW();_.properties.get("anchor")==="viewport"&&c.bX(k,b.transform.bearingInRadians),c.bY(A,A,k);const z=b.transform.transformLightDirection(A),$=_.properties.get("color");return{u_lightpos:A,u_lightpos_globe:z,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[$.r,$.g,$.b],u_vertical_gradient:+r,u_opacity:u,u_fill_translate:p}},dh=(b,r,u,p,_,w,A)=>c.e(vd(b,r,u,p),ho(w,b,A),{u_height_factor:-Math.pow(2,_.overscaledZ)/A.tileSize/8}),bl=(b,r,u,p)=>c.e(ho(r,b,u),{u_fill_translate:p}),hc=(b,r)=>({u_world:b,u_fill_translate:r}),Bf=(b,r,u,p,_)=>c.e(bl(b,r,u,_),{u_world:p}),is=(b,r,u,p,_)=>{const w=b.transform;let A,k,z=0;if(u.paint.get("circle-pitch-alignment")==="map"){const $=c.aC(r,1,w.zoom);A=!0,k=[$,$],z=$/(c.$*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*_}else A=!1,k=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+A,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:k,u_globe_extrude_scale:z,u_translate:p}},jm=b=>({u_pixel_extrude_scale:[1/b.width,1/b.height]}),dc=b=>({u_viewport_size:[b.width,b.height]}),Ff=(b,r=1)=>({u_color:b,u_overlay:0,u_overlay_scale:r}),fh=(b,r,u,p)=>{const _=c.aC(b,1,r)/(c.$*Math.pow(2,b.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:c.aC(b,1,r),u_intensity:u,u_globe_extrude_scale:_}},_d=(b,r,u,p)=>{const _=c.L();c.bZ(_,0,b.width,b.height,0,0,1);const w=b.context.gl;return{u_matrix:_,u_world:[w.drawingBufferWidth,w.drawingBufferHeight],u_image:u,u_color_ramp:p,u_opacity:r.paint.get("heatmap-opacity")}},fc=(b,r,u)=>{const p=u.paint.get("hillshade-accent-color");let _;switch(u.paint.get("hillshade-method")){case"basic":_=4;break;case"combined":_=1;break;case"igor":_=2;break;case"multidirectional":_=3;break;default:_=0}const w=u.getIlluminationProperties();for(let A=0;A<w.directionRadians.length;A++)u.paint.get("hillshade-illumination-anchor")==="viewport"&&(w.directionRadians[A]+=b.transform.bearingInRadians);return{u_image:0,u_latrange:$f(0,r.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:w.altitudeRadians,u_azimuths:w.directionRadians,u_accent:p,u_method:_,u_highlights:w.highlightColor,u_shadows:w.shadowColor}},xl=(b,r)=>{const u=r.stride,p=c.L();return c.bZ(p,0,c.$,-c.$,0,0,1),c.M(p,p,[0,-c.$,0]),{u_matrix:p,u_image:1,u_dimension:[u,u],u_zoom:b.overscaledZ,u_unpack:r.getUnpackVector()}};function $f(b,r){const u=Math.pow(2,r.canonical.z),p=r.canonical.y;return[new c.a1(0,p/u).toLngLat().lat,new c.a1(0,(p+1)/u).toLngLat().lat]}const tu=(b,r,u=0)=>({u_image:0,u_unpack:r.getUnpackVector(),u_dimension:[r.stride,r.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:u,u_opacity:b.paint.get("color-relief-opacity")}),pc=(b,r,u,p)=>{const _=b.transform;return{u_translation:wd(b,r,u),u_ratio:p/c.aC(r,1,_.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},bd=(b,r,u,p,_)=>c.e(pc(b,r,u,p),{u_image:0,u_image_height:_}),as=(b,r,u,p,_)=>{const w=b.transform,A=Os(r,w);return{u_translation:wd(b,r,u),u_texsize:r.imageAtlasTexture.size,u_ratio:p/c.aC(r,1,w.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[A,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},ph=(b,r,u,p,_)=>{const w=Os(r,b.transform);return c.e(pc(b,r,u,p),{u_tileratio:w,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image:0,u_mix:_.t,u_lineatlas_width:b.lineAtlas.width,u_lineatlas_height:b.lineAtlas.height})},xd=(b,r,u,p,_,w)=>{const A=Os(r,b.transform);return c.e(pc(b,r,u,p),{u_image:0,u_image_height:w,u_tileratio:A,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image_dash:1,u_mix:_.t,u_lineatlas_width:b.lineAtlas.width,u_lineatlas_height:b.lineAtlas.height})};function Os(b,r){return 1/c.aC(b,1,r.tileZoom)}function wd(b,r,u){return c.aD(b.transform,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const mh=(b,r,u,p,_)=>{return{u_tl_parent:b,u_scale_parent:r,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(A=p.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(w=p.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:Om(p.paint.get("raster-hue-rotate")),u_coords_top:[_[0].x,_[0].y,_[1].x,_[1].y],u_coords_bottom:[_[3].x,_[3].y,_[2].x,_[2].y]};var w,A};function Om(b){b*=Math.PI/180;const r=Math.sin(b),u=Math.cos(b);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const qf=(b,r,u,p,_,w,A,k,z,$,q,H,G)=>{const Q=A.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Q.cameraToCenterDistance,u_pitch:Q.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:Q.width/Q.height,u_fade_change:A.options.fadeDuration?A.symbolFadeChange:1,u_label_plane_matrix:k,u_coord_matrix:z,u_is_text:+q,u_pitch_with_map:+p,u_is_along_line:_,u_is_variable_anchor:w,u_texsize:H,u_texture:0,u_translation:$,u_pitched_scale:G}},Sd=(b,r,u,p,_,w,A,k,z,$,q,H,G,Q)=>{const se=A.transform;return c.e(qf(b,r,u,p,_,w,A,k,z,$,q,H,Q),{u_gamma_scale:p?Math.cos(se.pitch*Math.PI/180)*se.cameraToCenterDistance:1,u_device_pixel_ratio:A.pixelRatio,u_is_halo:1})},Uf=(b,r,u,p,_,w,A,k,z,$,q,H,G)=>c.e(Sd(b,r,u,p,_,w,A,k,z,$,!0,q,0,G),{u_texsize_icon:H,u_texture_icon:1}),da=(b,r)=>({u_opacity:b,u_color:r}),wl=(b,r,u,p,_)=>c.e(function(w,A,k,z){const $=k.imageManager.getPattern(w.from.toString()),q=k.imageManager.getPattern(w.to.toString()),{width:H,height:G}=k.imageManager.getPixelSize(),Q=Math.pow(2,z.tileID.overscaledZ),se=z.tileSize*Math.pow(2,k.transform.tileZoom)/Q,pe=se*(z.tileID.canonical.x+z.tileID.wrap*Q),fe=se*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:$.tl,u_pattern_br_a:$.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[H,G],u_mix:A.t,u_pattern_size_a:$.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/c.aC(z,1,k.transform.tileZoom),u_pixel_coord_upper:[pe>>16,fe>>16],u_pixel_coord_lower:[65535&pe,65535&fe]}}(u,_,r,p),{u_opacity:b}),gh=(b,r)=>{},ru={fillExtrusion:(b,r)=>({u_lightpos:new c.bU(b,r.u_lightpos),u_lightpos_globe:new c.bU(b,r.u_lightpos_globe),u_lightintensity:new c.bg(b,r.u_lightintensity),u_lightcolor:new c.bU(b,r.u_lightcolor),u_vertical_gradient:new c.bg(b,r.u_vertical_gradient),u_opacity:new c.bg(b,r.u_opacity),u_fill_translate:new c.bV(b,r.u_fill_translate)}),fillExtrusionPattern:(b,r)=>({u_lightpos:new c.bU(b,r.u_lightpos),u_lightpos_globe:new c.bU(b,r.u_lightpos_globe),u_lightintensity:new c.bg(b,r.u_lightintensity),u_lightcolor:new c.bU(b,r.u_lightcolor),u_vertical_gradient:new c.bg(b,r.u_vertical_gradient),u_height_factor:new c.bg(b,r.u_height_factor),u_opacity:new c.bg(b,r.u_opacity),u_fill_translate:new c.bV(b,r.u_fill_translate),u_image:new c.bQ(b,r.u_image),u_texsize:new c.bV(b,r.u_texsize),u_pixel_coord_upper:new c.bV(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.bV(b,r.u_pixel_coord_lower),u_scale:new c.bU(b,r.u_scale),u_fade:new c.bg(b,r.u_fade)}),fill:(b,r)=>({u_fill_translate:new c.bV(b,r.u_fill_translate)}),fillPattern:(b,r)=>({u_image:new c.bQ(b,r.u_image),u_texsize:new c.bV(b,r.u_texsize),u_pixel_coord_upper:new c.bV(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.bV(b,r.u_pixel_coord_lower),u_scale:new c.bU(b,r.u_scale),u_fade:new c.bg(b,r.u_fade),u_fill_translate:new c.bV(b,r.u_fill_translate)}),fillOutline:(b,r)=>({u_world:new c.bV(b,r.u_world),u_fill_translate:new c.bV(b,r.u_fill_translate)}),fillOutlinePattern:(b,r)=>({u_world:new c.bV(b,r.u_world),u_image:new c.bQ(b,r.u_image),u_texsize:new c.bV(b,r.u_texsize),u_pixel_coord_upper:new c.bV(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.bV(b,r.u_pixel_coord_lower),u_scale:new c.bU(b,r.u_scale),u_fade:new c.bg(b,r.u_fade),u_fill_translate:new c.bV(b,r.u_fill_translate)}),circle:(b,r)=>({u_camera_to_center_distance:new c.bg(b,r.u_camera_to_center_distance),u_scale_with_map:new c.bQ(b,r.u_scale_with_map),u_pitch_with_map:new c.bQ(b,r.u_pitch_with_map),u_extrude_scale:new c.bV(b,r.u_extrude_scale),u_device_pixel_ratio:new c.bg(b,r.u_device_pixel_ratio),u_globe_extrude_scale:new c.bg(b,r.u_globe_extrude_scale),u_translate:new c.bV(b,r.u_translate)}),collisionBox:(b,r)=>({u_pixel_extrude_scale:new c.bV(b,r.u_pixel_extrude_scale)}),collisionCircle:(b,r)=>({u_viewport_size:new c.bV(b,r.u_viewport_size)}),debug:(b,r)=>({u_color:new c.bR(b,r.u_color),u_overlay:new c.bQ(b,r.u_overlay),u_overlay_scale:new c.bg(b,r.u_overlay_scale)}),depth:gh,clippingMask:gh,heatmap:(b,r)=>({u_extrude_scale:new c.bg(b,r.u_extrude_scale),u_intensity:new c.bg(b,r.u_intensity),u_globe_extrude_scale:new c.bg(b,r.u_globe_extrude_scale)}),heatmapTexture:(b,r)=>({u_matrix:new c.bS(b,r.u_matrix),u_world:new c.bV(b,r.u_world),u_image:new c.bQ(b,r.u_image),u_color_ramp:new c.bQ(b,r.u_color_ramp),u_opacity:new c.bg(b,r.u_opacity)}),hillshade:(b,r)=>({u_image:new c.bQ(b,r.u_image),u_latrange:new c.bV(b,r.u_latrange),u_exaggeration:new c.bg(b,r.u_exaggeration),u_altitudes:new c.b$(b,r.u_altitudes),u_azimuths:new c.b$(b,r.u_azimuths),u_accent:new c.bR(b,r.u_accent),u_method:new c.bQ(b,r.u_method),u_shadows:new c.b_(b,r.u_shadows),u_highlights:new c.b_(b,r.u_highlights)}),hillshadePrepare:(b,r)=>({u_matrix:new c.bS(b,r.u_matrix),u_image:new c.bQ(b,r.u_image),u_dimension:new c.bV(b,r.u_dimension),u_zoom:new c.bg(b,r.u_zoom),u_unpack:new c.bT(b,r.u_unpack)}),colorRelief:(b,r)=>({u_image:new c.bQ(b,r.u_image),u_unpack:new c.bT(b,r.u_unpack),u_dimension:new c.bV(b,r.u_dimension),u_elevation_stops:new c.bQ(b,r.u_elevation_stops),u_color_stops:new c.bQ(b,r.u_color_stops),u_color_ramp_size:new c.bQ(b,r.u_color_ramp_size),u_opacity:new c.bg(b,r.u_opacity)}),line:(b,r)=>({u_translation:new c.bV(b,r.u_translation),u_ratio:new c.bg(b,r.u_ratio),u_device_pixel_ratio:new c.bg(b,r.u_device_pixel_ratio),u_units_to_pixels:new c.bV(b,r.u_units_to_pixels)}),lineGradient:(b,r)=>({u_translation:new c.bV(b,r.u_translation),u_ratio:new c.bg(b,r.u_ratio),u_device_pixel_ratio:new c.bg(b,r.u_device_pixel_ratio),u_units_to_pixels:new c.bV(b,r.u_units_to_pixels),u_image:new c.bQ(b,r.u_image),u_image_height:new c.bg(b,r.u_image_height)}),linePattern:(b,r)=>({u_translation:new c.bV(b,r.u_translation),u_texsize:new c.bV(b,r.u_texsize),u_ratio:new c.bg(b,r.u_ratio),u_device_pixel_ratio:new c.bg(b,r.u_device_pixel_ratio),u_image:new c.bQ(b,r.u_image),u_units_to_pixels:new c.bV(b,r.u_units_to_pixels),u_scale:new c.bU(b,r.u_scale),u_fade:new c.bg(b,r.u_fade)}),lineSDF:(b,r)=>({u_translation:new c.bV(b,r.u_translation),u_ratio:new c.bg(b,r.u_ratio),u_device_pixel_ratio:new c.bg(b,r.u_device_pixel_ratio),u_units_to_pixels:new c.bV(b,r.u_units_to_pixels),u_image:new c.bQ(b,r.u_image),u_mix:new c.bg(b,r.u_mix),u_tileratio:new c.bg(b,r.u_tileratio),u_crossfade_from:new c.bg(b,r.u_crossfade_from),u_crossfade_to:new c.bg(b,r.u_crossfade_to),u_lineatlas_width:new c.bg(b,r.u_lineatlas_width),u_lineatlas_height:new c.bg(b,r.u_lineatlas_height)}),lineGradientSDF:(b,r)=>({u_translation:new c.bV(b,r.u_translation),u_ratio:new c.bg(b,r.u_ratio),u_device_pixel_ratio:new c.bg(b,r.u_device_pixel_ratio),u_units_to_pixels:new c.bV(b,r.u_units_to_pixels),u_image:new c.bQ(b,r.u_image),u_image_height:new c.bg(b,r.u_image_height),u_tileratio:new c.bg(b,r.u_tileratio),u_crossfade_from:new c.bg(b,r.u_crossfade_from),u_crossfade_to:new c.bg(b,r.u_crossfade_to),u_image_dash:new c.bQ(b,r.u_image_dash),u_mix:new c.bg(b,r.u_mix),u_lineatlas_width:new c.bg(b,r.u_lineatlas_width),u_lineatlas_height:new c.bg(b,r.u_lineatlas_height)}),raster:(b,r)=>({u_tl_parent:new c.bV(b,r.u_tl_parent),u_scale_parent:new c.bg(b,r.u_scale_parent),u_buffer_scale:new c.bg(b,r.u_buffer_scale),u_fade_t:new c.bg(b,r.u_fade_t),u_opacity:new c.bg(b,r.u_opacity),u_image0:new c.bQ(b,r.u_image0),u_image1:new c.bQ(b,r.u_image1),u_brightness_low:new c.bg(b,r.u_brightness_low),u_brightness_high:new c.bg(b,r.u_brightness_high),u_saturation_factor:new c.bg(b,r.u_saturation_factor),u_contrast_factor:new c.bg(b,r.u_contrast_factor),u_spin_weights:new c.bU(b,r.u_spin_weights),u_coords_top:new c.bT(b,r.u_coords_top),u_coords_bottom:new c.bT(b,r.u_coords_bottom)}),symbolIcon:(b,r)=>({u_is_size_zoom_constant:new c.bQ(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bQ(b,r.u_is_size_feature_constant),u_size_t:new c.bg(b,r.u_size_t),u_size:new c.bg(b,r.u_size),u_camera_to_center_distance:new c.bg(b,r.u_camera_to_center_distance),u_pitch:new c.bg(b,r.u_pitch),u_rotate_symbol:new c.bQ(b,r.u_rotate_symbol),u_aspect_ratio:new c.bg(b,r.u_aspect_ratio),u_fade_change:new c.bg(b,r.u_fade_change),u_label_plane_matrix:new c.bS(b,r.u_label_plane_matrix),u_coord_matrix:new c.bS(b,r.u_coord_matrix),u_is_text:new c.bQ(b,r.u_is_text),u_pitch_with_map:new c.bQ(b,r.u_pitch_with_map),u_is_along_line:new c.bQ(b,r.u_is_along_line),u_is_variable_anchor:new c.bQ(b,r.u_is_variable_anchor),u_texsize:new c.bV(b,r.u_texsize),u_texture:new c.bQ(b,r.u_texture),u_translation:new c.bV(b,r.u_translation),u_pitched_scale:new c.bg(b,r.u_pitched_scale)}),symbolSDF:(b,r)=>({u_is_size_zoom_constant:new c.bQ(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bQ(b,r.u_is_size_feature_constant),u_size_t:new c.bg(b,r.u_size_t),u_size:new c.bg(b,r.u_size),u_camera_to_center_distance:new c.bg(b,r.u_camera_to_center_distance),u_pitch:new c.bg(b,r.u_pitch),u_rotate_symbol:new c.bQ(b,r.u_rotate_symbol),u_aspect_ratio:new c.bg(b,r.u_aspect_ratio),u_fade_change:new c.bg(b,r.u_fade_change),u_label_plane_matrix:new c.bS(b,r.u_label_plane_matrix),u_coord_matrix:new c.bS(b,r.u_coord_matrix),u_is_text:new c.bQ(b,r.u_is_text),u_pitch_with_map:new c.bQ(b,r.u_pitch_with_map),u_is_along_line:new c.bQ(b,r.u_is_along_line),u_is_variable_anchor:new c.bQ(b,r.u_is_variable_anchor),u_texsize:new c.bV(b,r.u_texsize),u_texture:new c.bQ(b,r.u_texture),u_gamma_scale:new c.bg(b,r.u_gamma_scale),u_device_pixel_ratio:new c.bg(b,r.u_device_pixel_ratio),u_is_halo:new c.bQ(b,r.u_is_halo),u_translation:new c.bV(b,r.u_translation),u_pitched_scale:new c.bg(b,r.u_pitched_scale)}),symbolTextAndIcon:(b,r)=>({u_is_size_zoom_constant:new c.bQ(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bQ(b,r.u_is_size_feature_constant),u_size_t:new c.bg(b,r.u_size_t),u_size:new c.bg(b,r.u_size),u_camera_to_center_distance:new c.bg(b,r.u_camera_to_center_distance),u_pitch:new c.bg(b,r.u_pitch),u_rotate_symbol:new c.bQ(b,r.u_rotate_symbol),u_aspect_ratio:new c.bg(b,r.u_aspect_ratio),u_fade_change:new c.bg(b,r.u_fade_change),u_label_plane_matrix:new c.bS(b,r.u_label_plane_matrix),u_coord_matrix:new c.bS(b,r.u_coord_matrix),u_is_text:new c.bQ(b,r.u_is_text),u_pitch_with_map:new c.bQ(b,r.u_pitch_with_map),u_is_along_line:new c.bQ(b,r.u_is_along_line),u_is_variable_anchor:new c.bQ(b,r.u_is_variable_anchor),u_texsize:new c.bV(b,r.u_texsize),u_texsize_icon:new c.bV(b,r.u_texsize_icon),u_texture:new c.bQ(b,r.u_texture),u_texture_icon:new c.bQ(b,r.u_texture_icon),u_gamma_scale:new c.bg(b,r.u_gamma_scale),u_device_pixel_ratio:new c.bg(b,r.u_device_pixel_ratio),u_is_halo:new c.bQ(b,r.u_is_halo),u_translation:new c.bV(b,r.u_translation),u_pitched_scale:new c.bg(b,r.u_pitched_scale)}),background:(b,r)=>({u_opacity:new c.bg(b,r.u_opacity),u_color:new c.bR(b,r.u_color)}),backgroundPattern:(b,r)=>({u_opacity:new c.bg(b,r.u_opacity),u_image:new c.bQ(b,r.u_image),u_pattern_tl_a:new c.bV(b,r.u_pattern_tl_a),u_pattern_br_a:new c.bV(b,r.u_pattern_br_a),u_pattern_tl_b:new c.bV(b,r.u_pattern_tl_b),u_pattern_br_b:new c.bV(b,r.u_pattern_br_b),u_texsize:new c.bV(b,r.u_texsize),u_mix:new c.bg(b,r.u_mix),u_pattern_size_a:new c.bV(b,r.u_pattern_size_a),u_pattern_size_b:new c.bV(b,r.u_pattern_size_b),u_scale_a:new c.bg(b,r.u_scale_a),u_scale_b:new c.bg(b,r.u_scale_b),u_pixel_coord_upper:new c.bV(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.bV(b,r.u_pixel_coord_lower),u_tile_units_to_pixels:new c.bg(b,r.u_tile_units_to_pixels)}),terrain:(b,r)=>({u_texture:new c.bQ(b,r.u_texture),u_ele_delta:new c.bg(b,r.u_ele_delta),u_fog_matrix:new c.bS(b,r.u_fog_matrix),u_fog_color:new c.bR(b,r.u_fog_color),u_fog_ground_blend:new c.bg(b,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.bg(b,r.u_fog_ground_blend_opacity),u_horizon_color:new c.bR(b,r.u_horizon_color),u_horizon_fog_blend:new c.bg(b,r.u_horizon_fog_blend),u_is_globe_mode:new c.bg(b,r.u_is_globe_mode)}),terrainDepth:(b,r)=>({u_ele_delta:new c.bg(b,r.u_ele_delta)}),terrainCoords:(b,r)=>({u_texture:new c.bQ(b,r.u_texture),u_terrain_coords_id:new c.bg(b,r.u_terrain_coords_id),u_ele_delta:new c.bg(b,r.u_ele_delta)}),projectionErrorMeasurement:(b,r)=>({u_input:new c.bg(b,r.u_input),u_output_expected:new c.bg(b,r.u_output_expected)}),atmosphere:(b,r)=>({u_sun_pos:new c.bU(b,r.u_sun_pos),u_atmosphere_blend:new c.bg(b,r.u_atmosphere_blend),u_globe_position:new c.bU(b,r.u_globe_position),u_globe_radius:new c.bg(b,r.u_globe_radius),u_inv_proj_matrix:new c.bS(b,r.u_inv_proj_matrix)}),sky:(b,r)=>({u_sky_color:new c.bR(b,r.u_sky_color),u_horizon_color:new c.bR(b,r.u_horizon_color),u_horizon:new c.bV(b,r.u_horizon),u_horizon_normal:new c.bV(b,r.u_horizon_normal),u_sky_horizon_blend:new c.bg(b,r.u_sky_horizon_blend),u_sky_blend:new c.bg(b,r.u_sky_blend)})};class Ro{constructor(r,u,p){this.context=r;const _=r.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const yh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class nu{constructor(r,u,p,_){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=_,this.context=r;const w=r.gl;this.buffer=w.createBuffer(),r.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let p=0;p<this.attributes.length;p++){const _=u.attributes[this.attributes[p].name];_!==void 0&&r.enableVertexAttribArray(_)}}setVertexAttribPointers(r,u,p){for(let _=0;_<this.attributes.length;_++){const w=this.attributes[_],A=u.attributes[w.name];A!==void 0&&r.vertexAttribPointer(A,w.components,r[yh[w.type]],!1,this.itemSize,w.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Fr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Sl extends Fr{getDefault(){return c.bf.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class iu extends Fr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class fo extends Fr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class au extends Fr{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Vf extends Fr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Tl extends Fr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class mc extends Fr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Td extends Fr{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Ad extends Fr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class Al extends Fr{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Md extends Fr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class ou extends Fr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class su extends Fr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class vh extends Fr{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Pd extends Fr{getDefault(){return c.bf.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ml extends Fr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class gc extends Fr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class Pl extends Fr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class fa extends Fr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class qa extends Fr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Ed extends Fr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class pa extends Fr{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class _i extends Fr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class os extends Fr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class yc extends Fr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Is extends Fr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class El extends Fr{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class _h extends Fr{getDefault(){return null}set(r){var u;if(r===this.current&&!this.dirty)return;const p=this.gl;ti(p)?p.bindVertexArray(r):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class po extends Fr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Cl extends Fr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class lu extends Fr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class No extends Fr{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class Mr extends No{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Li extends No{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Cd extends No{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const mo="Framebuffer is not complete";class vc{constructor(r,u,p,_,w){this.context=r,this.width=u,this.height=p;const A=r.gl,k=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new Mr(r,k),_)this.depthAttachment=w?new Cd(r,k):new Li(r,k);else if(w)throw new Error("Stencil cannot be set without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error(mo)}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&r.deleteRenderbuffer(p)}r.deleteFramebuffer(this.framebuffer)}}class bh{constructor(r){var u,p;if(this.gl=r,this.clearColor=new Sl(this),this.clearDepth=new iu(this),this.clearStencil=new fo(this),this.colorMask=new au(this),this.depthMask=new Vf(this),this.stencilMask=new Tl(this),this.stencilFunc=new mc(this),this.stencilOp=new Td(this),this.stencilTest=new Ad(this),this.depthRange=new Al(this),this.depthTest=new Md(this),this.depthFunc=new ou(this),this.blend=new su(this),this.blendFunc=new vh(this),this.blendColor=new Pd(this),this.blendEquation=new Ml(this),this.cullFace=new gc(this),this.cullFaceSide=new Pl(this),this.frontFace=new fa(this),this.program=new qa(this),this.activeTexture=new Ed(this),this.viewport=new pa(this),this.bindFramebuffer=new _i(this),this.bindRenderbuffer=new os(this),this.bindTexture=new yc(this),this.bindVertexBuffer=new Is(this),this.bindElementBuffer=new El(this),this.bindVertexArray=new _h(this),this.pixelStoreUnpack=new po(this),this.pixelStoreUnpackPremultiplyAlpha=new Cl(this),this.pixelStoreUnpackFlipY=new lu(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),ti(r)){this.HALF_FLOAT=r.HALF_FLOAT;const _=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=r.RGBA16F)!==null&&u!==void 0?u:_==null?void 0:_.RGBA16F_EXT,this.RGB16F=(p=r.RGB16F)!==null&&p!==void 0?p:_==null?void 0:_.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const _=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=_==null?void 0:_.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new Ro(this,r,u)}createVertexBuffer(r,u,p){return new nu(this,r,u,p)}createRenderbuffer(r,u,p){const _=this.gl,w=_.createRenderbuffer();return this.bindRenderbuffer.set(w),_.renderbufferStorage(_.RENDERBUFFER,r,u,p),this.bindRenderbuffer.set(null),w}createFramebuffer(r,u,p,_){return new vc(this,r,u,p,_)}clear({color:r,depth:u,stencil:p}){const _=this.gl;let w=0;r&&(w|=_.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(w|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(w|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),_.clear(w)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){c.bH(r.blendFunction,rn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return ti(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var u;return ti(this.gl)?this.gl.deleteVertexArray(r):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let Lo;function cu(b,r,u,p,_){const w=b.context,A=b.transform,k=w.gl,z=b.useProgram("collisionBox"),$=[];let q=0,H=0;for(let ge=0;ge<p.length;ge++){const ve=p[ge],Te=r.getTile(ve).getBucket(u);if(!Te)continue;const xe=_?Te.textCollisionBox:Te.iconCollisionBox,Ce=Te.collisionCircleArray;Ce.length>0&&($.push({circleArray:Ce,circleOffset:H,coord:ve}),q+=Ce.length/4,H=q),xe&&z.draw(w,k.LINES,lr.disabled,cr.disabled,b.colorModeForRenderPass(),_r.disabled,jm(b.transform),b.style.map.terrain&&b.style.map.terrain.getTerrainData(ve),A.getProjectionData({overscaledTileID:ve,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,null,b.transform.zoom,null,null,xe.collisionVertexBuffer)}if(!_||!$.length)return;const G=b.useProgram("collisionCircle"),Q=new c.c0;Q.resize(4*q),Q._trim();let se=0;for(const ge of $)for(let ve=0;ve<ge.circleArray.length/4;ve++){const Te=4*ve,xe=ge.circleArray[Te+0],Ce=ge.circleArray[Te+1],Oe=ge.circleArray[Te+2],we=ge.circleArray[Te+3];Q.emplace(se++,xe,Ce,Oe,we,0),Q.emplace(se++,xe,Ce,Oe,we,1),Q.emplace(se++,xe,Ce,Oe,we,2),Q.emplace(se++,xe,Ce,Oe,we,3)}(!Lo||Lo.length<2*q)&&(Lo=function(ge){const ve=2*ge,Te=new c.c2;Te.resize(ve),Te._trim();for(let xe=0;xe<ve;xe++){const Ce=6*xe;Te.uint16[Ce+0]=4*xe+0,Te.uint16[Ce+1]=4*xe+1,Te.uint16[Ce+2]=4*xe+2,Te.uint16[Ce+3]=4*xe+2,Te.uint16[Ce+4]=4*xe+3,Te.uint16[Ce+5]=4*xe+0}return Te}(q));const pe=w.createIndexBuffer(Lo,!0),fe=w.createVertexBuffer(Q,c.c1.members,!0);for(const ge of $){const ve=dc(b.transform);G.draw(w,k.TRIANGLES,lr.disabled,cr.disabled,b.colorModeForRenderPass(),_r.disabled,ve,b.style.map.terrain&&b.style.map.terrain.getTerrainData(ge.coord),null,u.id,fe,pe,c.aM.simpleSegment(0,2*ge.circleOffset,ge.circleArray.length,ge.circleArray.length/2),null,b.transform.zoom,null,null,null)}fe.destroy(),pe.destroy()}const jd=c.ag(new Float32Array(16));function ks(b,r,u,p,_,w){const{horizontalAlign:A,verticalAlign:k}=c.aH(b);return new c.P((-(A-.5)*r/_+p[0])*w,(-(k-.5)*u/_+p[1])*w)}function ss(b,r,u,p,_,w){const A=r.tileAnchorPoint.add(new c.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let k=p.mult(w);u||(k=k.rotate(-_));const z=A.add(k);return wt(z.x,z.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(u){const k=dn(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(b),z=Math.atan(k.y/k.x)+(k.x<0?Math.PI:0);return b.add(p.rotate(z))}return b.add(p)}function jl(b,r,u,p,_,w,A,k,z,$,q,H){const G=b.text.placedSymbolArray,Q=b.text.dynamicLayoutVertexArray,se=b.icon.dynamicLayoutVertexArray,pe={};Q.clear();for(let fe=0;fe<G.length;fe++){const ge=G.get(fe),ve=ge.hidden||!ge.crossTileID||b.allowVerticalPlacement&&!ge.placedOrientation?null:p[ge.crossTileID];if(ve){const Te=new c.P(ge.anchorX,ge.anchorY),xe={getElevation:H,width:_.width,height:_.height,pitchedLabelPlaneMatrix:w,pitchWithMap:u,transform:_,tileAnchorPoint:Te,translation:$,unwrappedTileID:q},Ce=u?gr(Te.x,Te.y,xe):dn(Te.x,Te.y,xe),Oe=Po(_.cameraToCenterDistance,Ce.signedDistanceFromCamera);let we=c.ap(b.textSizeData,k,ge)*Oe/c.aB;u&&(we*=b.tilePixelRatio/A);const{width:Re,height:nt,anchor:We,textOffset:Ke,textBoxScale:Qe}=ve,Tt=ks(We,Re,nt,Ke,Qe,we),At=_.getPitchedTextCorrection(Te.x+$[0],Te.y+$[1],q),yt=ss(Ce.point,xe,r,Tt,-_.bearingInRadians,At),Lt=b.allowVerticalPlacement&&ge.placedOrientation===c.ao.vertical?Math.PI/2:0;for(let or=0;or<ge.numGlyphs;or++)c.av(Q,yt,Lt);z&&ge.associatedIconIndex>=0&&(pe[ge.associatedIconIndex]={shiftedAnchor:yt,angle:Lt})}else Co(ge.numGlyphs,Q)}if(z){se.clear();const fe=b.icon.placedSymbolArray;for(let ge=0;ge<fe.length;ge++){const ve=fe.get(ge);if(ve.hidden)Co(ve.numGlyphs,se);else{const Te=pe[ge];if(Te)for(let xe=0;xe<ve.numGlyphs;xe++)c.av(se,Te.shiftedAnchor,Te.angle);else Co(ve.numGlyphs,se)}}b.icon.dynamicLayoutVertexBuffer.updateData(se)}b.text.dynamicLayoutVertexBuffer.updateData(Q)}function Ol(b,r,u){return u.iconsInText&&r?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function Qi(b,r,u,p,_,w,A,k,z,$,q,H,G){const Q=b.context,se=Q.gl,pe=b.transform,fe=k==="map",ge=z==="map",ve=k!=="viewport"&&u.layout.get("symbol-placement")!=="point",Te=fe&&!ge&&!ve,xe=!u.layout.get("symbol-sort-key").isConstant();let Ce=!1;const Oe=b.getDepthModeForSublayer(0,lr.ReadOnly),we=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Re=[],nt=pe.getCircleRadiusCorrection();for(const We of p){const Ke=r.getTile(We),Qe=Ke.getBucket(u);if(!Qe)continue;const Tt=_?Qe.text:Qe.icon;if(!Tt||!Tt.segments.get().length||!Tt.hasVisibleVertices)continue;const At=Tt.programConfigurations.get(u.id),yt=_||Qe.sdfIcons,Lt=_?Qe.textSizeData:Qe.iconSizeData,or=ge||pe.pitch!==0,Hr=b.useProgram(Ol(yt,_,Qe),At),Xr=c.an(Lt,pe.zoom),ln=b.style.map.terrain&&b.style.map.terrain.getTerrainData(We);let Cn,cn,wr,fn,ii=[0,0],Fn=null;if(_)cn=Ke.glyphAtlasTexture,wr=se.LINEAR,Cn=Ke.glyphAtlasTexture.size,Qe.iconsInText&&(ii=Ke.imageAtlasTexture.size,Fn=Ke.imageAtlasTexture,fn=or||b.options.rotating||b.options.zooming||Lt.kind==="composite"||Lt.kind==="camera"?se.LINEAR:se.NEAREST);else{const Dn=u.layout.get("icon-size").constantOr(0)!==1||Qe.iconsNeedLinear;cn=Ke.imageAtlasTexture,wr=yt||b.options.rotating||b.options.zooming||Dn||or?se.LINEAR:se.NEAREST,Cn=Ke.imageAtlasTexture.size}const $n=c.aC(Ke,1,b.transform.zoom),xi=Tr(fe,b.transform,$n),ms=c.L();c.aq(ms,xi);const Ka=An(ge,fe,b.transform,$n),Gs=c.aD(pe,Ke,w,A),Qa=pe.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),Zs=we&&Qe.hasTextData(),gs=u.layout.get("icon-text-fit")!=="none"&&Zs&&Qe.hasIconData();if(ve){const Dn=b.style.map.terrain?(qn,Sn)=>b.style.map.terrain.getElevation(We,qn,Sn):null,on=u.layout.get("text-rotation-alignment")==="map";Ai(Qe,b,_,xi,ms,ge,$,on,We.toUnwrapped(),pe.width,pe.height,Gs,Dn)}const ka=_&&we||gs,qi=ve||ka?jd:ge?xi:b.transform.clipSpaceToPixelsMatrix,_o=yt&&u.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let bo;bo=yt?Qe.iconsInText?Uf(Lt.kind,Xr,Te,ge,ve,ka,b,qi,Ka,Gs,Cn,ii,nt):Sd(Lt.kind,Xr,Te,ge,ve,ka,b,qi,Ka,Gs,_,Cn,0,nt):qf(Lt.kind,Xr,Te,ge,ve,ka,b,qi,Ka,Gs,_,Cn,nt);const wi={program:Hr,buffers:Tt,uniformValues:bo,projectionData:Qa,atlasTexture:cn,atlasTextureIcon:Fn,atlasInterpolation:wr,atlasInterpolationIcon:fn,isSDF:yt,hasHalo:_o};if(xe&&Qe.canOverlap){Ce=!0;const Dn=Tt.segments.get();for(const on of Dn)Re.push({segments:new c.aM([on]),sortKey:on.sortKey,state:wi,terrainData:ln})}else Re.push({segments:Tt.segments,sortKey:0,state:wi,terrainData:ln})}Ce&&Re.sort((We,Ke)=>We.sortKey-Ke.sortKey);for(const We of Re){const Ke=We.state;if(Q.activeTexture.set(se.TEXTURE0),Ke.atlasTexture.bind(Ke.atlasInterpolation,se.CLAMP_TO_EDGE),Ke.atlasTextureIcon&&(Q.activeTexture.set(se.TEXTURE1),Ke.atlasTextureIcon&&Ke.atlasTextureIcon.bind(Ke.atlasInterpolationIcon,se.CLAMP_TO_EDGE)),Ke.isSDF){const Qe=Ke.uniformValues;Ke.hasHalo&&(Qe.u_is_halo=1,ma(Ke.buffers,We.segments,u,b,Ke.program,Oe,q,H,Qe,Ke.projectionData,We.terrainData)),Qe.u_is_halo=0}ma(Ke.buffers,We.segments,u,b,Ke.program,Oe,q,H,Ke.uniformValues,Ke.projectionData,We.terrainData)}}function ma(b,r,u,p,_,w,A,k,z,$,q){const H=p.context;_.draw(H,H.gl.TRIANGLES,w,A,k,_r.backCCW,z,q,$,u.id,b.layoutVertexBuffer,b.indexBuffer,r,u.paint,p.transform.zoom,b.programConfigurations.get(u.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function Bo(b,r,u,p,_){const w=b.context,A=w.gl,k=cr.disabled,z=new rn([A.ONE,A.ONE],c.bf.transparent,[!0,!0,!0,!0]),$=r.getBucket(u);if(!$)return;const q=p.key;let H=u.heatmapFbos.get(q);H||(H=Pa(w,r.tileSize,r.tileSize),u.heatmapFbos.set(q,H)),w.bindFramebuffer.set(H.framebuffer),w.viewport.set([0,0,r.tileSize,r.tileSize]),w.clear({color:c.bf.transparent});const G=$.programConfigurations.get(u.id),Q=b.useProgram("heatmap",G,!_),se=b.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),pe=b.style.map.terrain.getTerrainData(p);Q.draw(w,A.TRIANGLES,lr.disabled,k,z,_r.disabled,fh(r,b.transform.zoom,u.paint.get("heatmap-intensity"),1),pe,se,u.id,$.layoutVertexBuffer,$.indexBuffer,$.segments,u.paint,b.transform.zoom,G)}function Ua(b,r,u,p,_){const w=b.context,A=w.gl,k=b.transform;w.setColorMode(b.colorModeForRenderPass());const z=Ea(w,r),$=u.key,q=r.heatmapFbos.get($);if(!q)return;w.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,q.colorAttachment.get()),w.activeTexture.set(A.TEXTURE1),z.bind(A.LINEAR,A.CLAMP_TO_EDGE);const H=k.getProjectionData({overscaledTileID:u,applyTerrainMatrix:_,applyGlobeMatrix:!p});b.useProgram("heatmapTexture").draw(w,A.TRIANGLES,lr.disabled,cr.disabled,b.colorModeForRenderPass(),_r.disabled,_d(b,r,0,1),null,H,r.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments,r.paint,k.zoom),q.destroy(),r.heatmapFbos.delete($)}function Pa(b,r,u){var p,_;const w=b.gl,A=w.createTexture();w.bindTexture(w.TEXTURE_2D,A),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR);const k=(p=b.HALF_FLOAT)!==null&&p!==void 0?p:w.UNSIGNED_BYTE,z=(_=b.RGBA16F)!==null&&_!==void 0?_:w.RGBA;w.texImage2D(w.TEXTURE_2D,0,z,r,u,0,w.RGBA,k,null);const $=b.createFramebuffer(r,u,!1,!1);return $.colorAttachment.set(A),$}function Ea(b,r){return r.colorRampTexture||(r.colorRampTexture=new c.T(b,r.colorRamp,b.gl.RGBA)),r.colorRampTexture}function uu(b,r,u,p,_,w,A,k){let z=256;if(_.stepInterpolant){const $=r.getSource().maxzoom,q=A.canonical.z===$?Math.ceil(1<<b.transform.maxZoom-A.canonical.z):1;z=c.ah(c.c4(w.maxLineLength/c.$*1024*q),256,u.maxTextureSize)}return k.gradient=c.c5({expression:_.gradientExpression(),evaluationKey:"lineProgress",resolution:z,image:k.gradient||void 0,clips:w.lineClipsArray}),k.texture?k.texture.update(k.gradient):k.texture=new c.T(u,k.gradient,p.RGBA),k.version=_.gradientVersion,k.texture}function Od(b,r,u,p,_){b.activeTexture.set(r.TEXTURE0),u.imageAtlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE),p.updatePaintBuffers(_)}function Il(b,r,u,p,_,w){(_||b.lineAtlas.dirty)&&(r.activeTexture.set(u.TEXTURE0),b.lineAtlas.bind(r)),p.updatePaintBuffers(w)}function Ji(b,r,u,p,_,w,A){const k=w.gradients[_.id];let z=k.texture;_.gradientVersion!==k.version&&(z=uu(b,r,u,p,_,w,A,k)),u.activeTexture.set(p.TEXTURE0),z.bind(_.stepInterpolant?p.NEAREST:p.LINEAR,p.CLAMP_TO_EDGE)}function zn(b,r,u,p,_,w,A,k,z){const $=w.gradients[_.id];let q=$.texture;_.gradientVersion!==$.version&&(q=uu(b,r,u,p,_,w,A,$)),u.activeTexture.set(p.TEXTURE0),q.bind(_.stepInterpolant?p.NEAREST:p.LINEAR,p.CLAMP_TO_EDGE),u.activeTexture.set(p.TEXTURE1),b.lineAtlas.bind(u),k.updatePaintBuffers(z)}function Dr(b,r,u,p,_){if(!u||!p||!p.imageAtlas)return;const w=p.imageAtlas.patternPositions;let A=w[u.to.toString()],k=w[u.from.toString()];if(!A&&k&&(A=k),!k&&A&&(k=A),!A||!k){const z=_.getPaintProperty(r);A=w[z],k=w[z]}A&&k&&b.setConstantPatternPositions(A,k)}function Fo(b,r,u,p,_,w,A,k){const z=b.context.gl,$="fill-pattern",q=u.paint.get($),H=q&&q.constantOr(1),G=u.getCrossfadeParameters();let Q,se,pe,fe,ge;const ve=b.transform,Te=u.paint.get("fill-translate"),xe=u.paint.get("fill-translate-anchor");A?(se=H&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Q=z.LINES):(se=H?"fillPattern":"fill",Q=z.TRIANGLES);const Ce=q.constantOr(null);for(const Oe of p){const we=r.getTile(Oe);if(H&&!we.patternsLoaded())continue;const Re=we.getBucket(u);if(!Re)continue;const nt=Re.programConfigurations.get(u.id),We=b.useProgram(se,nt),Ke=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Oe);H&&(b.context.activeTexture.set(z.TEXTURE0),we.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),nt.updatePaintBuffers(G)),Dr(nt,$,Ce,we,u);const Qe=ve.getProjectionData({overscaledTileID:Oe,applyGlobeMatrix:!k,applyTerrainMatrix:!0}),Tt=c.aD(ve,we,Te,xe);if(A){fe=Re.indexBuffer2,ge=Re.segments2;const yt=[z.drawingBufferWidth,z.drawingBufferHeight];pe=se==="fillOutlinePattern"&&H?Bf(b,G,we,yt,Tt):hc(yt,Tt)}else fe=Re.indexBuffer,ge=Re.segments,pe=H?bl(b,G,we,Tt):{u_fill_translate:Tt};const At=b.stencilModeForClipping(Oe);We.draw(b.context,Q,_,At,w,_r.backCCW,pe,Ke,Qe,u.id,Re.layoutVertexBuffer,fe,ge,u.paint,b.transform.zoom,nt)}}function Ca(b,r,u,p,_,w,A,k){const z=b.context,$=z.gl,q="fill-extrusion-pattern",H=u.paint.get(q),G=H.constantOr(1),Q=u.getCrossfadeParameters(),se=u.paint.get("fill-extrusion-opacity"),pe=H.constantOr(null),fe=b.transform;for(const ge of p){const ve=r.getTile(ge),Te=ve.getBucket(u);if(!Te)continue;const xe=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ge),Ce=Te.programConfigurations.get(u.id),Oe=b.useProgram(G?"fillExtrusionPattern":"fillExtrusion",Ce);G&&(b.context.activeTexture.set($.TEXTURE0),ve.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),Ce.updatePaintBuffers(Q));const we=fe.getProjectionData({overscaledTileID:ge,applyGlobeMatrix:!k,applyTerrainMatrix:!0});Dr(Ce,q,pe,ve,u);const Re=c.aD(fe,ve,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),nt=u.paint.get("fill-extrusion-vertical-gradient"),We=G?dh(b,nt,se,Re,ge,Q,ve):vd(b,nt,se,Re);Oe.draw(z,z.gl.TRIANGLES,_,w,A,_r.backCCW,We,xe,we,u.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,u.paint,b.transform.zoom,Ce,b.style.map.terrain&&Te.centroidVertexBuffer)}}function _c(b,r,u,p,_,w,A,k,z){var $;const q=b.style.projection,H=b.context,G=b.transform,Q=H.gl,se=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],pe=b.useProgram("hillshade",null,!1,se),fe=!b.options.moving;for(const ge of p){const ve=r.getTile(ge),Te=ve.fbo;if(!Te)continue;const xe=q.getMeshFromTileID(H,ge.canonical,k,!0,"raster"),Ce=($=b.style.map.terrain)===null||$===void 0?void 0:$.getTerrainData(ge);H.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,Te.colorAttachment.get());const Oe=G.getProjectionData({overscaledTileID:ge,aligned:fe,applyGlobeMatrix:!z,applyTerrainMatrix:!0});pe.draw(H,Q.TRIANGLES,w,_[ge.overscaledZ],A,_r.backCCW,fc(b,ve,u),Ce,Oe,u.id,xe.vertexBuffer,xe.indexBuffer,xe.segments)}}function Va(b,r,u,p,_,w,A,k,z){var $;const q=b.style.projection,H=b.context,G=b.transform,Q=H.gl,se=b.useProgram("colorRelief"),pe=!b.options.moving;let fe=!0,ge=0;for(const ve of p){const Te=r.getTile(ve),xe=Te.dem;if(fe){const We=Q.getParameter(Q.MAX_TEXTURE_SIZE),{elevationTexture:Ke,colorTexture:Qe}=u.getColorRampTextures(H,We,xe.getUnpackVector());H.activeTexture.set(Q.TEXTURE1),Ke.bind(Q.NEAREST,Q.CLAMP_TO_EDGE),H.activeTexture.set(Q.TEXTURE4),Qe.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),fe=!1,ge=Ke.size[0]}if(!xe||!xe.data)continue;const Ce=xe.stride,Oe=xe.getPixels();if(H.activeTexture.set(Q.TEXTURE0),H.pixelStoreUnpackPremultiplyAlpha.set(!1),Te.demTexture=Te.demTexture||b.getTileTexture(Ce),Te.demTexture){const We=Te.demTexture;We.update(Oe,{premultiply:!1}),We.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)}else Te.demTexture=new c.T(H,Oe,Q.RGBA,{premultiply:!1}),Te.demTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE);const we=q.getMeshFromTileID(H,ve.canonical,k,!0,"raster"),Re=($=b.style.map.terrain)===null||$===void 0?void 0:$.getTerrainData(ve),nt=G.getProjectionData({overscaledTileID:ve,aligned:pe,applyGlobeMatrix:!z,applyTerrainMatrix:!0});se.draw(H,Q.TRIANGLES,w,_[ve.overscaledZ],A,_r.backCCW,tu(u,Te.dem,ge),Re,nt,u.id,we.vertexBuffer,we.indexBuffer,we.segments)}}const bc=[new c.P(0,0),new c.P(c.$,0),new c.P(c.$,c.$),new c.P(0,c.$)];function hu(b,r,u,p,_,w,A,k,z=!1,$=!1){const q=p[p.length-1].overscaledZ,H=b.context,G=H.gl,Q=b.useProgram("raster"),se=b.transform,pe=b.style.projection,fe=b.colorModeForRenderPass(),ge=!b.options.moving,ve=u.paint.get("raster-opacity"),Te=u.paint.get("raster-resampling"),xe=u.paint.get("raster-fade-duration"),Ce=!!b.style.map.terrain;for(const Oe of p){const we=b.getDepthModeForSublayer(Oe.overscaledZ-q,ve===1?lr.ReadWrite:lr.ReadOnly,G.LESS),Re=r.getTile(Oe),nt=Te==="nearest"?G.NEAREST:G.LINEAR;H.activeTexture.set(G.TEXTURE0),Re.texture.bind(nt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),H.activeTexture.set(G.TEXTURE1);const{parentTile:We,parentScaleBy:Ke,parentTopLeft:Qe,fadeValues:Tt}=xc(Re,r,xe,Ce);Re.fadeOpacity=Tt.tileOpacity,We?(We.fadeOpacity=Tt.parentTileOpacity,We.texture.bind(nt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST)):Re.texture.bind(nt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),Re.texture.useMipmap&&H.extTextureFilterAnisotropic&&b.transform.pitch>20&&G.texParameterf(G.TEXTURE_2D,H.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,H.extTextureFilterAnisotropicMax);const At=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Oe),yt=se.getProjectionData({overscaledTileID:Oe,aligned:ge,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),Lt=mh(Qe,Ke,Tt.fadeMix,u,k),or=pe.getMeshFromTileID(H,Oe.canonical,w,A,"raster");Q.draw(H,G.TRIANGLES,we,_?_[Oe.overscaledZ]:cr.disabled,fe,z?_r.frontCCW:_r.backCCW,Lt,At,yt,u.id,or.vertexBuffer,or.indexBuffer,or.segments)}}function xc(b,r,u,p){const _={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(u===0||p)return _;if(b.fadingParentID){const w=r._getLoadedTile(b.fadingParentID);if(!w)return _;const A=Math.pow(2,w.tileID.overscaledZ-b.tileID.overscaledZ),k=[b.tileID.canonical.x*A%1,b.tileID.canonical.y*A%1],z=function($,q,H){const G=B.now(),Q=(G-q.timeAdded)/H,se=$.fadingDirection===Ie.Incoming,pe=c.ah((G-$.timeAdded)/H,0,1),fe=c.ah(1-Q,0,1),ge=se?pe:fe;return{tileOpacity:ge,parentTileOpacity:se?fe:pe,fadeMix:{opacity:1,mix:1-ge}}}(b,w,u);return{parentTile:w,parentScaleBy:A,parentTopLeft:k,fadeValues:z}}if(b.selfFading){const w=function(A,k){const z=B.now(),$=c.ah((z-A.timeAdded)/k,0,1);return{tileOpacity:$,fadeMix:{opacity:$,mix:0}}}(b,u);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:w}}return _}const vn=new c.bf(1,0,0,1),zs=new c.bf(0,1,0,1),Bi=new c.bf(0,0,1,1),du=new c.bf(1,0,1,1),$o=new c.bf(0,1,1,1);function go(b,r,u,p){ya(b,0,r+u/2,b.transform.width,u,p)}function ga(b,r,u,p){ya(b,r-u/2,0,u,b.transform.height,p)}function ya(b,r,u,p,_,w){const A=b.context,k=A.gl;k.enable(k.SCISSOR_TEST),k.scissor(r*b.pixelRatio,u*b.pixelRatio,p*b.pixelRatio,_*b.pixelRatio),A.clear({color:w}),k.disable(k.SCISSOR_TEST)}function kl(b,r,u){const p=b.context,_=p.gl,w=b.useProgram("debug"),A=lr.disabled,k=cr.disabled,z=b.colorModeForRenderPass(),$="$debug",q=b.style.map.terrain&&b.style.map.terrain.getTerrainData(u);p.activeTexture.set(_.TEXTURE0);const H=r.getTileByID(u.key).latestRawTileData,G=Math.floor((H&&H.byteLength||0)/1024),Q=r.getTile(u).tileSize,se=512/Math.min(Q,512)*(u.overscaledZ/b.transform.zoom)*.5;let pe=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(pe+=` => ${u.overscaledZ}`),function(ge,ve){ge.initDebugOverlayCanvas();const Te=ge.debugOverlayCanvas,xe=ge.context.gl,Ce=ge.debugOverlayCanvas.getContext("2d");Ce.clearRect(0,0,Te.width,Te.height),Ce.shadowColor="white",Ce.shadowBlur=2,Ce.lineWidth=1.5,Ce.strokeStyle="white",Ce.textBaseline="top",Ce.font="bold 36px Open Sans, sans-serif",Ce.fillText(ve,5,5),Ce.strokeText(ve,5,5),ge.debugOverlayTexture.update(Te),ge.debugOverlayTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE)}(b,`${pe} ${G}kB`);const fe=b.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(p,_.TRIANGLES,A,k,rn.alphaBlended,_r.disabled,Ff(c.bf.transparent,se),null,fe,$,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),w.draw(p,_.LINE_STRIP,A,k,z,_r.disabled,Ff(c.bf.red),q,fe,$,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function wc(b,r,u,p){const{isRenderingGlobe:_}=p,w=b.context,A=w.gl,k=b.transform,z=b.colorModeForRenderPass(),$=b.getDepthModeFor3D(),q=b.useProgram("terrain");w.bindFramebuffer.set(null),w.viewport.set([0,0,b.width,b.height]);for(const H of u){const G=r.getTerrainMesh(H.tileID),Q=b.renderToTexture.getTexture(H),se=r.getTerrainData(H.tileID);w.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,Q.texture);const pe=r.getMeshFrameDelta(k.zoom),fe=k.calculateFogMatrix(H.tileID.toUnwrapped()),ge=yd(pe,fe,b.style.sky,k.pitch,_),ve=k.getProjectionData({overscaledTileID:H.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});q.draw(w,A.TRIANGLES,$,cr.disabled,z,_r.backCCW,ge,se,ve,"terrain",G.vertexBuffer,G.indexBuffer,G.segments)}}function zl(b,r){if(!r.mesh){const u=new c.aL;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);const p=new c.aN;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),r.mesh=new cc(b.createVertexBuffer(u,Yi.members),b.createIndexBuffer(p),c.aM.simpleSegment(0,0,u.length,p.length))}return r.mesh}class fu{constructor(r,u){this.context=new bh(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ft.maxUnderzooming+Ft.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Yc}resize(r,u,p){if(this.width=Math.floor(r*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const r=this.context,u=new c.aL;u.emplaceBack(0,0),u.emplaceBack(c.$,0),u.emplaceBack(0,c.$),u.emplaceBack(c.$,c.$),this.tileExtentBuffer=r.createVertexBuffer(u,Yi.members),this.tileExtentSegments=c.aM.simpleSegment(0,0,4,2);const p=new c.aL;p.emplaceBack(0,0),p.emplaceBack(c.$,0),p.emplaceBack(0,c.$),p.emplaceBack(c.$,c.$),this.debugBuffer=r.createVertexBuffer(p,Yi.members),this.debugSegments=c.aM.simpleSegment(0,0,4,5);const _=new c.c7;_.emplaceBack(0,0,0,0),_.emplaceBack(c.$,0,c.$,0),_.emplaceBack(0,c.$,0,c.$),_.emplaceBack(c.$,c.$,c.$,c.$),this.rasterBoundsBuffer=r.createVertexBuffer(_,Cm.members),this.rasterBoundsSegments=c.aM.simpleSegment(0,0,4,2);const w=new c.aL;w.emplaceBack(0,0),w.emplaceBack(c.$,0),w.emplaceBack(0,c.$),w.emplaceBack(c.$,c.$),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(w,Yi.members),this.rasterBoundsSegmentsPosOnly=c.aM.simpleSegment(0,0,4,5);const A=new c.aL;A.emplaceBack(0,0),A.emplaceBack(1,0),A.emplaceBack(0,1),A.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(A,Yi.members),this.viewportSegments=c.aM.simpleSegment(0,0,4,2);const k=new c.c8;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(k);const z=new c.aN;z.emplaceBack(1,0,2),z.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(z);const $=this.context.gl;this.stencilClearMode=new cr({func:$.ALWAYS,mask:0},0,255,$.ZERO,$.ZERO,$.ZERO),this.tileExtentMesh=new cc(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=c.L();c.bZ(p,0,this.width,this.height,0,0,1),c.N(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]);const _={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(r,u.TRIANGLES,lr.disabled,this.stencilClearMode,rn.disabled,_r.disabled,null,null,_,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u,p){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source,this.nextStencilID+u.length>256&&this.clearStencil();const _=this.context;_.setColorMode(rn.disabled),_.setDepthMode(lr.disabled);const w={};for(const A of u)w[A.key]=this.nextStencilID++;this._renderTileMasks(w,u,p,!0),this._renderTileMasks(w,u,p,!1),this._tileClippingMaskIDs=w}_renderTileMasks(r,u,p,_){const w=this.context,A=w.gl,k=this.style.projection,z=this.transform,$=this.useProgram("clippingMask");for(const q of u){const H=r[q.key],G=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),Q=k.getMeshFromTileID(this.context,q.canonical,_,!0,"stencil"),se=z.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!p,applyTerrainMatrix:!0});$.draw(w,A.TRIANGLES,lr.disabled,new cr({func:A.ALWAYS,mask:0},H,255,A.KEEP,A.KEEP,A.REPLACE),rn.disabled,p?_r.disabled:_r.backCCW,null,G,se,"$clipping",Q.vertexBuffer,Q.indexBuffer,Q.segments)}}_renderTilesDepthBuffer(){const r=this.context,u=r.gl,p=this.style.projection,_=this.transform,w=this.useProgram("depth"),A=this.getDepthModeFor3D(),k=Cr(_,{tileSize:_.tileSize});for(const z of k){const $=this.style.map.terrain&&this.style.map.terrain.getTerrainData(z),q=p.getMeshFromTileID(this.context,z.canonical,!0,!0,"raster"),H=_.getProjectionData({overscaledTileID:z,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(r,u.TRIANGLES,A,cr.disabled,rn.disabled,_r.backCCW,null,$,H,"$clipping",q.vertexBuffer,q.indexBuffer,q.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new cr({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new cr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const u=this.context.gl,p=r.sort((A,k)=>k.overscaledZ-A.overscaledZ),_=p[p.length-1].overscaledZ,w=p[0].overscaledZ-_+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const A={};for(let k=0;k<w;k++)A[k+_]=new cr({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=w,[A,p]}return[{[_]:cr.disabled},p]}stencilConfigForOverlapTwoPass(r){const u=this.context.gl,p=r.sort((A,k)=>k.overscaledZ-A.overscaledZ),_=p[p.length-1].overscaledZ,w=p[0].overscaledZ-_+1;if(this.clearStencil(),w>1){const A={},k={};for(let z=0;z<w;z++)A[z+_]=new cr({func:u.GREATER,mask:255},w+1+z,255,u.KEEP,u.KEEP,u.REPLACE),k[z+_]=new cr({func:u.GREATER,mask:255},1+z,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*w+1,[A,k,p]}return this.nextStencilID=3,[{[_]:new cr({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[_]:new cr({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},p]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new rn([r.CONSTANT_COLOR,r.ONE],new c.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?rn.unblended:rn.alphaBlended}getDepthModeForSublayer(r,u,p){if(!this.opaquePassEnabledForLayer())return lr.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new lr(p||this.context.gl.LEQUAL,u,[_,_])}getDepthModeFor3D(){return new lr(this.context.gl.LEQUAL,lr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){var p,_;this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(B.now()),this.imageManager.beginFrame();const w=this.style._order,A=this.style.sourceCaches,k={},z={},$={},q={isRenderingToTexture:!1,isRenderingGlobe:((p=r.projection)===null||p===void 0?void 0:p.transitionState)>0};for(const G in A){const Q=A[G];Q.used&&Q.prepare(this.context),k[G]=Q.getVisibleCoordinates(!1),z[G]=k[G].slice().reverse(),$[G]=Q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let G=0;G<w.length;G++)if(this.style._layers[w[G]].is3D()){this.opaquePassCutoff=G;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const G of w){const Q=this.style._layers[G];if(!Q.hasOffscreenPass()||Q.isHidden(this.transform.zoom))continue;const se=z[Q.source];(Q.type==="custom"||se.length)&&this.renderLayer(this,A[Q.source],Q,se,q)}if((_=this.style.projection)===null||_===void 0||_.updateGPUdependent({context:this.context,useProgram:G=>this.useProgram(G)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?c.bf.black:c.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(G,Q){const se=G.context,pe=se.gl,fe=((Oe,we,Re)=>{const nt=Math.cos(we.rollInRadians),We=Math.sin(we.rollInRadians),Ke=He(we),Qe=we.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Oe.properties.get("sky-color"),u_horizon_color:Oe.properties.get("horizon-color"),u_horizon:[(we.width/2-Ke*We)*Re,(we.height/2+Ke*nt)*Re],u_horizon_normal:[-We,nt],u_sky_horizon_blend:Oe.properties.get("sky-horizon-blend")*we.height/2*Re,u_sky_blend:Qe}})(Q,G.style.map.transform,G.pixelRatio),ge=new lr(pe.LEQUAL,lr.ReadWrite,[0,1]),ve=cr.disabled,Te=G.colorModeForRenderPass(),xe=G.useProgram("sky"),Ce=zl(se,Q);xe.draw(se,pe.TRIANGLES,ge,ve,Te,_r.disabled,fe,null,void 0,"sky",Ce.vertexBuffer,Ce.indexBuffer,Ce.segments)}(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const G=this.style._layers[w[this.currentLayer]],Q=A[G.source],se=k[G.source];this._renderTileClippingMasks(G,se,!1),this.renderLayer(this,Q,G,se,q)}this.renderPass="translucent";let H=!1;for(this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const G=this.style._layers[w[this.currentLayer]],Q=A[G.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(G,q))continue;this.opaquePassEnabledForLayer()||H||(H=!0,q.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const se=(G.type==="symbol"?$:z)[G.source];this._renderTileClippingMasks(G,k[G.source],!!this.renderToTexture),this.renderLayer(this,Q,G,se,q)}if(q.isRenderingGlobe&&function(G,Q,se){const pe=G.context,fe=pe.gl,ge=G.useProgram("atmosphere"),ve=new lr(fe.LEQUAL,lr.ReadOnly,[0,1]),Te=G.transform,xe=function(Qe,Tt){const At=Qe.properties.get("position"),yt=[-At.x,-At.y,-At.z],Lt=c.ag(new Float64Array(16));return Qe.properties.get("anchor")==="map"&&(c.b6(Lt,Lt,Tt.rollInRadians),c.b7(Lt,Lt,-Tt.pitchInRadians),c.b6(Lt,Lt,Tt.bearingInRadians),c.b7(Lt,Lt,Tt.center.lat*Math.PI/180),c.bz(Lt,Lt,-Tt.center.lng*Math.PI/180)),c.c6(yt,yt,Lt),yt}(se,G.transform),Ce=Te.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Oe=Q.properties.get("atmosphere-blend")*Ce.projectionTransition;if(Oe===0)return;const we=vl(Te.worldSize,Te.center.lat),Re=Te.inverseProjectionMatrix,nt=new Float64Array(4);nt[3]=1,c.aw(nt,nt,Te.modelViewProjectionMatrix),nt[0]/=nt[3],nt[1]/=nt[3],nt[2]/=nt[3],nt[3]=1,c.aw(nt,nt,Re),nt[0]/=nt[3],nt[1]/=nt[3],nt[2]/=nt[3],nt[3]=1;const We=((Qe,Tt,At,yt,Lt)=>({u_sun_pos:Qe,u_atmosphere_blend:Tt,u_globe_position:At,u_globe_radius:yt,u_inv_proj_matrix:Lt}))(xe,Oe,[nt[0],nt[1],nt[2]],we,Re),Ke=zl(pe,Q);ge.draw(pe,fe.TRIANGLES,ve,cr.disabled,rn.alphaBlended,_r.disabled,We,null,null,"atmosphere",Ke.vertexBuffer,Ke.indexBuffer,Ke.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const G=function(Q,se){let pe=null;const fe=Object.values(Q._layers).flatMap(xe=>xe.source&&!xe.isHidden(se)?[Q.sourceCaches[xe.source]]:[]),ge=fe.filter(xe=>xe.getSource().type==="vector"),ve=fe.filter(xe=>xe.getSource().type!=="vector"),Te=xe=>{(!pe||pe.getSource().maxzoom<xe.getSource().maxzoom)&&(pe=xe)};return ge.forEach(xe=>Te(xe)),pe||ve.forEach(xe=>Te(xe)),pe}(this.style,this.transform.zoom);G&&function(Q,se,pe){for(let fe=0;fe<pe.length;fe++)kl(Q,se,pe[fe])}(this,G,G.getVisibleCoordinates())}this.options.showPadding&&function(G){const Q=G.transform.padding;go(G,G.transform.height-(Q.top||0),3,vn),go(G,Q.bottom||0,3,zs),ga(G,Q.left||0,3,Bi),ga(G,G.transform.width-(Q.right||0),3,du);const se=G.transform.centerPoint;(function(pe,fe,ge,ve){ya(pe,fe-1,ge-10,2,20,ve),ya(pe,fe-10,ge-1,20,2,ve)})(G,se.x,G.transform.height-se.y,$o)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=r?!c.c9(u,p):!c.ca(u,p)),_||(_=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),_&&(c.cb(u,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(w,A){const k=w.context,z=k.gl,$=w.transform,q=rn.unblended,H=new lr(z.LEQUAL,lr.ReadWrite,[0,1]),G=A.sourceCache.getRenderableTiles(),Q=w.useProgram("terrainDepth");k.bindFramebuffer.set(A.getFramebuffer("depth").framebuffer),k.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),k.clear({color:c.bf.transparent,depth:1});for(const se of G){const pe=A.getTerrainMesh(se.tileID),fe=A.getTerrainData(se.tileID),ge=$.getProjectionData({overscaledTileID:se.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ve={u_ele_delta:A.getMeshFrameDelta($.zoom)};Q.draw(k,z.TRIANGLES,H,cr.disabled,q,_r.backCCW,ve,fe,ge,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}k.bindFramebuffer.set(null),k.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain),function(w,A){const k=w.context,z=k.gl,$=w.transform,q=rn.unblended,H=new lr(z.LEQUAL,lr.ReadWrite,[0,1]),G=A.getCoordsTexture(),Q=A.sourceCache.getRenderableTiles(),se=w.useProgram("terrainCoords");k.bindFramebuffer.set(A.getFramebuffer("coords").framebuffer),k.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),k.clear({color:c.bf.transparent,depth:1}),A.coordsIndex=[];for(const pe of Q){const fe=A.getTerrainMesh(pe.tileID),ge=A.getTerrainData(pe.tileID);k.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,G.texture);const ve={u_terrain_coords_id:(255-A.coordsIndex.length)/255,u_texture:0,u_ele_delta:A.getMeshFrameDelta($.zoom)},Te=$.getProjectionData({overscaledTileID:pe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});se.draw(k,z.TRIANGLES,H,cr.disabled,q,_r.backCCW,ve,ge,Te,"terrain",fe.vertexBuffer,fe.indexBuffer,fe.segments),A.coordsIndex.push(pe.tileID.key)}k.bindFramebuffer.set(null),k.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain))}renderLayer(r,u,p,_,w){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(_||[]).length)&&(this.id=p.id,c.cc(p)?function(A,k,z,$,q,H){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:G}=H,Q=cr.disabled,se=A.colorModeForRenderPass();(z._unevaluatedLayout.hasValue("text-variable-anchor")||z._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(pe,fe,ge,ve,Te,xe,Ce,Oe,we){const Re=fe.transform,nt=fe.style.map.terrain,We=Te==="map",Ke=xe==="map";for(const Qe of pe){const Tt=ve.getTile(Qe),At=Tt.getBucket(ge);if(!At||!At.text||!At.text.segments.get().length)continue;const yt=c.an(At.textSizeData,Re.zoom),Lt=c.aC(Tt,1,fe.transform.zoom),or=Tr(We,fe.transform,Lt),Hr=ge.layout.get("icon-text-fit")!=="none"&&At.hasIconData();if(yt){const Xr=Math.pow(2,Re.zoom-Tt.tileID.overscaledZ),ln=nt?(Cn,cn)=>nt.getElevation(Qe,Cn,cn):null;jl(At,We,Ke,we,Re,or,Xr,yt,Hr,c.aD(Re,Tt,Ce,Oe),Qe.toUnwrapped(),ln)}}}($,A,z,k,z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),q),z.paint.get("icon-opacity").constantOr(1)!==0&&Qi(A,k,z,$,!1,z.paint.get("icon-translate"),z.paint.get("icon-translate-anchor"),z.layout.get("icon-rotation-alignment"),z.layout.get("icon-pitch-alignment"),z.layout.get("icon-keep-upright"),Q,se,G),z.paint.get("text-opacity").constantOr(1)!==0&&Qi(A,k,z,$,!0,z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.layout.get("text-keep-upright"),Q,se,G),k.map.showCollisionBoxes&&(cu(A,k,z,$,!0),cu(A,k,z,$,!1))}(r,u,p,_,this.style.placement.variableOffsets,w):c.cd(p)?function(A,k,z,$,q){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:H}=q,G=z.paint.get("circle-opacity"),Q=z.paint.get("circle-stroke-width"),se=z.paint.get("circle-stroke-opacity"),pe=!z.layout.get("circle-sort-key").isConstant();if(G.constantOr(1)===0&&(Q.constantOr(1)===0||se.constantOr(1)===0))return;const fe=A.context,ge=fe.gl,ve=A.transform,Te=A.getDepthModeForSublayer(0,lr.ReadOnly),xe=cr.disabled,Ce=A.colorModeForRenderPass(),Oe=[],we=ve.getCircleRadiusCorrection();for(let Re=0;Re<$.length;Re++){const nt=$[Re],We=k.getTile(nt),Ke=We.getBucket(z);if(!Ke)continue;const Qe=z.paint.get("circle-translate"),Tt=z.paint.get("circle-translate-anchor"),At=c.aD(ve,We,Qe,Tt),yt=Ke.programConfigurations.get(z.id),Lt=A.useProgram("circle",yt),or=Ke.layoutVertexBuffer,Hr=Ke.indexBuffer,Xr=A.style.map.terrain&&A.style.map.terrain.getTerrainData(nt),ln={programConfiguration:yt,program:Lt,layoutVertexBuffer:or,indexBuffer:Hr,uniformValues:is(A,We,z,At,we),terrainData:Xr,projectionData:ve.getProjectionData({overscaledTileID:nt,applyGlobeMatrix:!H,applyTerrainMatrix:!0})};if(pe){const Cn=Ke.segments.get();for(const cn of Cn)Oe.push({segments:new c.aM([cn]),sortKey:cn.sortKey,state:ln})}else Oe.push({segments:Ke.segments,sortKey:0,state:ln})}pe&&Oe.sort((Re,nt)=>Re.sortKey-nt.sortKey);for(const Re of Oe){const{programConfiguration:nt,program:We,layoutVertexBuffer:Ke,indexBuffer:Qe,uniformValues:Tt,terrainData:At,projectionData:yt}=Re.state;We.draw(fe,ge.TRIANGLES,Te,xe,Ce,_r.backCCW,Tt,At,yt,z.id,Ke,Qe,Re.segments,z.paint,A.transform.zoom,nt)}}(r,u,p,_,w):c.ce(p)?function(A,k,z,$,q){if(z.paint.get("heatmap-opacity")===0)return;const H=A.context,{isRenderingToTexture:G,isRenderingGlobe:Q}=q;if(A.style.map.terrain){for(const se of $){const pe=k.getTile(se);k.hasRenderableParent(se)||(A.renderPass==="offscreen"?Bo(A,pe,z,se,Q):A.renderPass==="translucent"&&Ua(A,z,se,G,Q))}H.viewport.set([0,0,A.width,A.height])}else A.renderPass==="offscreen"?function(se,pe,fe,ge){const ve=se.context,Te=ve.gl,xe=se.transform,Ce=cr.disabled,Oe=new rn([Te.ONE,Te.ONE],c.bf.transparent,[!0,!0,!0,!0]);(function(we,Re,nt){const We=we.gl;we.activeTexture.set(We.TEXTURE1),we.viewport.set([0,0,Re.width/4,Re.height/4]);let Ke=nt.heatmapFbos.get(c.c3);Ke?(We.bindTexture(We.TEXTURE_2D,Ke.colorAttachment.get()),we.bindFramebuffer.set(Ke.framebuffer)):(Ke=Pa(we,Re.width/4,Re.height/4),nt.heatmapFbos.set(c.c3,Ke))})(ve,se,fe),ve.clear({color:c.bf.transparent});for(let we=0;we<ge.length;we++){const Re=ge[we];if(pe.hasRenderableParent(Re))continue;const nt=pe.getTile(Re),We=nt.getBucket(fe);if(!We)continue;const Ke=We.programConfigurations.get(fe.id),Qe=se.useProgram("heatmap",Ke),Tt=xe.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),At=xe.getCircleRadiusCorrection();Qe.draw(ve,Te.TRIANGLES,lr.disabled,Ce,Oe,_r.backCCW,fh(nt,xe.zoom,fe.paint.get("heatmap-intensity"),At),null,Tt,fe.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,fe.paint,xe.zoom,Ke)}ve.viewport.set([0,0,se.width,se.height])}(A,k,z,$):A.renderPass==="translucent"&&function(se,pe){const fe=se.context,ge=fe.gl;fe.setColorMode(se.colorModeForRenderPass());const ve=pe.heatmapFbos.get(c.c3);ve&&(fe.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,ve.colorAttachment.get()),fe.activeTexture.set(ge.TEXTURE1),Ea(fe,pe).bind(ge.LINEAR,ge.CLAMP_TO_EDGE),se.useProgram("heatmapTexture").draw(fe,ge.TRIANGLES,lr.disabled,cr.disabled,se.colorModeForRenderPass(),_r.disabled,_d(se,pe,0,1),null,null,pe.id,se.viewportBuffer,se.quadTriangleIndexBuffer,se.viewportSegments,pe.paint,se.transform.zoom))}(A,z)}(r,u,p,_,w):c.cf(p)?function(A,k,z,$,q){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:H}=q,G=z.paint.get("line-opacity"),Q=z.paint.get("line-width");if(G.constantOr(1)===0||Q.constantOr(1)===0)return;const se=A.getDepthModeForSublayer(0,lr.ReadOnly),pe=A.colorModeForRenderPass(),fe=z.paint.get("line-dasharray"),ge=fe.constantOr(1),ve=z.paint.get("line-pattern"),Te=ve.constantOr(1),xe=z.paint.get("line-gradient"),Ce=z.getCrossfadeParameters();let Oe;Oe=Te?"linePattern":ge&&xe?"lineGradientSDF":ge?"lineSDF":xe?"lineGradient":"line";const we=A.context,Re=we.gl,nt=A.transform;let We=!0;for(const Ke of $){const Qe=k.getTile(Ke);if(Te&&!Qe.patternsLoaded())continue;const Tt=Qe.getBucket(z);if(!Tt)continue;const At=Tt.programConfigurations.get(z.id),yt=A.context.program.get(),Lt=A.useProgram(Oe,At),or=We||Lt.program!==yt,Hr=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ke),Xr=ve.constantOr(null),ln=fe&&fe.constantOr(null);if(Xr&&Qe.imageAtlas){const ii=Qe.imageAtlas,Fn=ii.patternPositions[Xr.to.toString()],$n=ii.patternPositions[Xr.from.toString()];Fn&&$n&&At.setConstantPatternPositions(Fn,$n)}else if(ln){const ii=z.layout.get("line-cap")==="round",Fn=A.lineAtlas.getDash(ln.to,ii),$n=A.lineAtlas.getDash(ln.from,ii);At.setConstantDashPositions(Fn,$n)}const Cn=nt.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),cn=nt.getPixelScale();let wr;Te?(wr=as(A,Qe,z,cn,Ce),Od(we,Re,Qe,At,Ce)):ge&&xe?(wr=xd(A,Qe,z,cn,Ce,Tt.lineClipsArray.length),zn(A,k,we,Re,z,Tt,Ke,At,Ce)):ge?(wr=ph(A,Qe,z,cn,Ce),Il(A,we,Re,At,or,Ce)):xe?(wr=bd(A,Qe,z,cn,Tt.lineClipsArray.length),Ji(A,k,we,Re,z,Tt,Ke)):wr=pc(A,Qe,z,cn);const fn=A.stencilModeForClipping(Ke);Lt.draw(we,Re.TRIANGLES,se,fn,pe,_r.disabled,wr,Hr,Cn,z.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,z.paint,A.transform.zoom,At,Tt.layoutVertexBuffer2),We=!1}}(r,u,p,_,w):c.cg(p)?function(A,k,z,$,q){const H=z.paint.get("fill-color"),G=z.paint.get("fill-opacity");if(G.constantOr(1)===0)return;const{isRenderingToTexture:Q}=q,se=A.colorModeForRenderPass(),pe=z.paint.get("fill-pattern"),fe=A.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&H.constantOr(c.bf.transparent).a===1&&G.constantOr(0)===1?"opaque":"translucent";if(A.renderPass===fe){const ge=A.getDepthModeForSublayer(1,A.renderPass==="opaque"?lr.ReadWrite:lr.ReadOnly);Fo(A,k,z,$,ge,se,!1,Q)}if(A.renderPass==="translucent"&&z.paint.get("fill-antialias")){const ge=A.getDepthModeForSublayer(z.getPaintProperty("fill-outline-color")?2:0,lr.ReadOnly);Fo(A,k,z,$,ge,se,!0,Q)}}(r,u,p,_,w):c.ch(p)?function(A,k,z,$,q){const H=z.paint.get("fill-extrusion-opacity");if(H===0)return;const{isRenderingToTexture:G}=q;if(A.renderPass==="translucent"){const Q=new lr(A.context.gl.LEQUAL,lr.ReadWrite,A.depthRangeFor3D);if(H!==1||z.paint.get("fill-extrusion-pattern").constantOr(1))Ca(A,k,z,$,Q,cr.disabled,rn.disabled,G),Ca(A,k,z,$,Q,A.stencilModeFor3D(),A.colorModeForRenderPass(),G);else{const se=A.colorModeForRenderPass();Ca(A,k,z,$,Q,cr.disabled,se,G)}}}(r,u,p,_,w):c.ci(p)?function(A,k,z,$,q){if(A.renderPass!=="offscreen"&&A.renderPass!=="translucent")return;const{isRenderingToTexture:H}=q,G=A.context,Q=A.style.projection.useSubdivision,se=A.getDepthModeForSublayer(0,lr.ReadOnly),pe=A.colorModeForRenderPass();if(A.renderPass==="offscreen")(function(fe,ge,ve,Te,xe,Ce,Oe){const we=fe.context,Re=we.gl;for(const nt of ve){const We=ge.getTile(nt),Ke=We.dem;if(!Ke||!Ke.data||!We.needsHillshadePrepare)continue;const Qe=Ke.dim,Tt=Ke.stride,At=Ke.getPixels();if(we.activeTexture.set(Re.TEXTURE1),we.pixelStoreUnpackPremultiplyAlpha.set(!1),We.demTexture=We.demTexture||fe.getTileTexture(Tt),We.demTexture){const Lt=We.demTexture;Lt.update(At,{premultiply:!1}),Lt.bind(Re.NEAREST,Re.CLAMP_TO_EDGE)}else We.demTexture=new c.T(we,At,Re.RGBA,{premultiply:!1}),We.demTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE);we.activeTexture.set(Re.TEXTURE0);let yt=We.fbo;if(!yt){const Lt=new c.T(we,{width:Qe,height:Qe,data:null},Re.RGBA);Lt.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),yt=We.fbo=we.createFramebuffer(Qe,Qe,!0,!1),yt.colorAttachment.set(Lt.texture)}we.bindFramebuffer.set(yt.framebuffer),we.viewport.set([0,0,Qe,Qe]),fe.useProgram("hillshadePrepare").draw(we,Re.TRIANGLES,xe,Ce,Oe,_r.disabled,xl(We.tileID,Ke),null,null,Te.id,fe.rasterBoundsBuffer,fe.quadTriangleIndexBuffer,fe.rasterBoundsSegments),We.needsHillshadePrepare=!1}})(A,k,$,z,se,cr.disabled,pe),G.viewport.set([0,0,A.width,A.height]);else if(A.renderPass==="translucent")if(Q){const[fe,ge,ve]=A.stencilConfigForOverlapTwoPass($);_c(A,k,z,ve,fe,se,pe,!1,H),_c(A,k,z,ve,ge,se,pe,!0,H)}else{const[fe,ge]=A.getStencilConfigForOverlapAndUpdateStencilID($);_c(A,k,z,ge,fe,se,pe,!1,H)}}(r,u,p,_,w):c.cj(p)?function(A,k,z,$,q){if(A.renderPass!=="translucent"||!$.length)return;const{isRenderingToTexture:H}=q,G=A.style.projection.useSubdivision,Q=A.getDepthModeForSublayer(0,lr.ReadOnly),se=A.colorModeForRenderPass();if(G){const[pe,fe,ge]=A.stencilConfigForOverlapTwoPass($);Va(A,k,z,ge,pe,Q,se,!1,H),Va(A,k,z,ge,fe,Q,se,!0,H)}else{const[pe,fe]=A.getStencilConfigForOverlapAndUpdateStencilID($);Va(A,k,z,fe,pe,Q,se,!1,H)}}(r,u,p,_,w):c.bK(p)?function(A,k,z,$,q){if(A.renderPass!=="translucent"||z.paint.get("raster-opacity")===0||!$.length)return;const{isRenderingToTexture:H}=q,G=k.getSource(),Q=A.style.projection.useSubdivision;if(G instanceof Xn)hu(A,k,z,$,null,!1,!1,G.tileCoords,G.flippedWindingOrder,H);else if(Q){const[se,pe,fe]=A.stencilConfigForOverlapTwoPass($);hu(A,k,z,fe,se,!1,!0,bc,!1,H),hu(A,k,z,fe,pe,!0,!0,bc,!1,H)}else{const[se,pe]=A.getStencilConfigForOverlapAndUpdateStencilID($);hu(A,k,z,pe,se,!1,!0,bc,!1,H)}}(r,u,p,_,w):c.ck(p)?function(A,k,z,$,q){const H=z.paint.get("background-color"),G=z.paint.get("background-opacity");if(G===0)return;const{isRenderingToTexture:Q}=q,se=A.context,pe=se.gl,fe=A.style.projection,ge=A.transform,ve=ge.tileSize,Te=z.paint.get("background-pattern");if(A.isPatternMissing(Te))return;const xe=!Te&&H.a===1&&G===1&&A.opaquePassEnabledForLayer()?"opaque":"translucent";if(A.renderPass!==xe)return;const Ce=cr.disabled,Oe=A.getDepthModeForSublayer(0,xe==="opaque"?lr.ReadWrite:lr.ReadOnly),we=A.colorModeForRenderPass(),Re=A.useProgram(Te?"backgroundPattern":"background"),nt=$||Cr(ge,{tileSize:ve,terrain:A.style.map.terrain});Te&&(se.activeTexture.set(pe.TEXTURE0),A.imageManager.bind(A.context));const We=z.getCrossfadeParameters();for(const Ke of nt){const Qe=ge.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!Q,applyTerrainMatrix:!0}),Tt=Te?wl(G,A,Te,{tileID:Ke,tileSize:ve},We):da(G,H),At=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ke),yt=fe.getMeshFromTileID(se,Ke.canonical,!1,!0,"raster");Re.draw(se,pe.TRIANGLES,Oe,Ce,we,_r.backCCW,Tt,At,Qe,z.id,yt.vertexBuffer,yt.indexBuffer,yt.segments)}}(r,0,p,_,w):c.cl(p)&&function(A,k,z,$){const{isRenderingGlobe:q}=$,H=A.context,G=z.implementation,Q=A.style.projection,se=A.transform,pe=se.getProjectionDataForCustomLayer(q),fe={farZ:se.farZ,nearZ:se.nearZ,fov:se.fov*Math.PI/180,modelViewProjectionMatrix:se.modelViewProjectionMatrix,projectionMatrix:se.projectionMatrix,shaderData:{variantName:Q.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Q.shaderPreludeCode.vertexSource}`,define:Q.shaderDefine},defaultProjectionData:pe},ge=G.renderingMode?G.renderingMode:"2d";if(A.renderPass==="offscreen"){const ve=G.prerender;ve&&(A.setCustomLayerDefaults(),H.setColorMode(A.colorModeForRenderPass()),ve.call(G,H.gl,fe),H.setDirty(),A.setBaseState())}else if(A.renderPass==="translucent"){A.setCustomLayerDefaults(),H.setColorMode(A.colorModeForRenderPass()),H.setStencilMode(cr.disabled);const ve=ge==="3d"?A.getDepthModeFor3D():A.getDepthModeForSublayer(0,lr.ReadOnly);H.setDepthMode(ve),G.render(H.gl,fe),H.setDirty(),A.setBaseState(),H.bindFramebuffer.set(null)}}(r,0,p,w))}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),p=this.imageManager.getPattern(r.to.toString());return!u||!p}useProgram(r,u,p=!1,_=[]){this.cache=this.cache||{};const w=!!this.style.map.terrain,A=this.style.projection,k=p?Ri.projectionMercator:A.shaderPreludeCode,z=p?Oo:A.shaderDefine,$=r+(u?u.cacheKey:"")+`/${p?vr:A.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(w?"/terrain":"")+(_?`/${_.join("/")}`:"");return this.cache[$]||(this.cache[$]=new _l(this.context,Ri[r],u,ru[r],this._showOverdrawInspector,w,k,z,_)),this.cache[$]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:u}=this.context.gl;return this.width!==r||this.height!==u}}function ls(b,r){let u,p=!1,_=null,w=null;const A=()=>{_=null,p&&(b.apply(w,u),_=setTimeout(A,r),p=!1)};return(...k)=>(p=!0,w=this,u=k,_||A(),_)}class bi{constructor(r){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(p=_)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(!this._isValidHash(u))return!1;const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const p=u.join("/");let _=p;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${p}`);let w=window.location.hash.replace(_,"");w.startsWith("#&")?w=w.slice(0,1)+w.slice(2):w==="#"&&(w="");let A=window.location.href.replace(/(#.+)?$/,w);A=A.replace("&&","&"),window.history.replaceState(window.history.state,null,A)},this._updateHash=ls(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,_=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,_),A=Math.round(u.lng*w)/w,k=Math.round(u.lat*w)/w,z=this._map.getBearing(),$=this._map.getPitch();let q="";if(q+=r?`/${A}/${k}/${p}`:`${p}/${k}/${A}`,(z||$)&&(q+="/"+Math.round(10*z)/10),$&&(q+=`/${Math.round($)}`),this._hashName){const H=this._hashName;let G=!1;const Q=window.location.hash.slice(1).split("&").map(se=>{const pe=se.split("=")[0];return pe===H?(G=!0,`${pe}=${q}`):se}).filter(se=>se);return G||Q.push(`${H}=${q}`),`#${Q.join("&")}`}return`#${q}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new c.S(+r[2],+r[1])}catch{return!1}const u=+r[0],p=+(r[3]||0),_=+(r[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&p>=-180&&p<=180&&_>=this._map.getMinPitch()&&_<=this._map.getMaxPitch()}}const cs={linearity:.3,easing:c.cm(0,0,.3,1)},Ds=c.e({deceleration:2500,maxSpeed:1400},cs),Gf=c.e({deceleration:20,maxSpeed:1400},cs),Zf=c.e({deceleration:1e3,maxSpeed:360},cs),Hf=c.e({deceleration:1e3,maxSpeed:90},cs),ni=c.e({deceleration:1e3,maxSpeed:360},cs);class xh{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:B.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=B.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,roll:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)u.zoom+=w.zoomDelta||0,u.bearing+=w.bearingDelta||0,u.pitch+=w.pitchDelta||0,u.roll+=w.rollDelta||0,w.panDelta&&u.pan._add(w.panDelta),w.around&&(u.around=w.around),w.pinchAround&&(u.pinchAround=w.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(u.pan.mag()){const w=Uo(u.pan.mag(),p,c.e({},Ds,r||{})),A=u.pan.mult(w.amount/u.pan.mag()),k=this._map.cameraHelper.handlePanInertia(A,this._map.transform);_.center=k.easingCenter,_.offset=k.easingOffset,qo(_,w)}if(u.zoom){const w=Uo(u.zoom,p,Gf);_.zoom=this._map.transform.zoom+w.amount,qo(_,w)}if(u.bearing){const w=Uo(u.bearing,p,Zf);_.bearing=this._map.transform.bearing+c.ah(w.amount,-179,179),qo(_,w)}if(u.pitch){const w=Uo(u.pitch,p,Hf);_.pitch=this._map.transform.pitch+w.amount,qo(_,w)}if(u.roll){const w=Uo(u.roll,p,ni);_.roll=this._map.transform.roll+c.ah(w.amount,-179,179),qo(_,w)}if(_.zoom||_.bearing){const w=u.pinchAround===void 0?u.around:u.pinchAround;_.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),c.e(_,{noMoveStart:!0})}}function qo(b,r){(!b.duration||b.duration<r.duration)&&(b.duration=r.duration,b.easing=r.easing)}function Uo(b,r,u){const{maxSpeed:p,linearity:_,deceleration:w}=u,A=c.ah(b*_/(r/1e3),-p,p),k=Math.abs(A)/(w*_);return{easing:u.easing,duration:1e3*k,amount:A*(k/2)}}class Fi extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,p,_={}){p=p instanceof MouseEvent?p:new MouseEvent(r,p);const w=F.mousePos(u.getCanvas(),p),A=u.unproject(w);super(r,c.e({point:w,lngLat:A,originalEvent:p},_)),this._defaultPrevented=!1,this.target=u}}class ja extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,p){const _=r==="touchend"?p.changedTouches:p.touches,w=F.touchPos(u.getCanvasContainer(),_),A=w.map(z=>u.unproject(z)),k=w.reduce((z,$,q,H)=>z.add($.div(H.length)),new c.P(0,0));super(r,{points:w,point:k,lngLats:A,lngLat:u.unproject(k),originalEvent:p}),this._defaultPrevented=!1}}class Rs extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,p){super(r,{originalEvent:p}),this._defaultPrevented=!1}}class Ga{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Rs(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new Fi(r.type,this._map,r))}mouseup(r){this._map.fire(new Fi(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Fi(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Fi(r.type,this._map,r))}mouseover(r){this._map.fire(new Fi(r.type,this._map,r))}mouseout(r){this._map.fire(new Fi(r.type,this._map,r))}touchstart(r){return this._firePreventable(new ja(r.type,this._map,r))}touchmove(r){this._map.fire(new ja(r.type,this._map,r))}touchend(r){this._map.fire(new ja(r.type,this._map,r))}touchcancel(r){this._map.fire(new ja(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Za{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Fi(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Fi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Fi(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Sc{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(c.P.convert(r),this._map.terrain)}}class Oa{constructor(r,u){this._map=r,this._tr=new Sc(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(F.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=p,this._box||(this._box=F.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const w=Math.min(_.x,p.x),A=Math.max(_.x,p.x),k=Math.min(_.y,p.y),z=Math.max(_.y,p.y);F.setTransform(this._box,`translate(${w}px,${k}px)`),this._box.style.width=A-w+"px",this._box.style.height=z-k+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const p=this._startPos,_=u;if(this.reset(),F.suppressClick(),p.x!==_.x||p.y!==_.y)return this._map.fire(new c.l("boxzoomend",{originalEvent:r})),{cameraAnimation:w=>w.fitScreenCoordinates(p,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(F.remove(this._box),this._box=null),F.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new c.l(r,{originalEvent:u}))}}function va(b,r){if(b.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${r.length}`);const u={};for(let p=0;p<b.length;p++)u[b[p].identifier]=r[p];return u}class Id{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),p.length===this.numTouches&&(this.centroid=function(_){const w=new c.P(0,0);for(const A of _)w._add(A);return w.div(_.length)}(u),this.touches=va(p,u)))}touchmove(r,u,p){if(this.aborted||!this.centroid)return;const _=va(p,u);for(const w in this.touches){const A=_[w];(!A||A.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(r,u,p){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Tc{constructor(r){this.singleTap=new Id(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,p){this.singleTap.touchstart(r,u,p)}touchmove(r,u,p){this.singleTap.touchmove(r,u,p)}touchend(r,u,p){const _=this.singleTap.touchend(r,u,p);if(_){const w=r.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(_)<30;if(w&&A||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class Xf{constructor(r){this._tr=new Sc(r),this._zoomIn=new Tc({numTouches:1,numTaps:2}),this._zoomOut=new Tc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,p){this._zoomIn.touchstart(r,u,p),this._zoomOut.touchstart(r,u,p)}touchmove(r,u,p){this._zoomIn.touchmove(r,u,p),this._zoomOut.touchmove(r,u,p)}touchend(r,u,p){const _=this._zoomIn.touchend(r,u,p),w=this._zoomOut.touchend(r,u,p),A=this._tr;return _?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(_)},{originalEvent:r})}):w?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(w)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class us{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const _=Array.isArray(u)?u[0]:u;return!this._moved&&_.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(p,_))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&F.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const kd=0,Ns=2,yo={[kd]:1,[Ns]:2};class zt{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const u=F.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,p){const _=yo[p];return u.buttons===void 0||(u.buttons&_)!==_}(r,this._eventButton)}isValidEndEvent(r){return F.mouseButton(r)===this._eventButton}}class pu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class wh{constructor(r=new zt({checkCorrectEvent:()=>!0}),u=new pu){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(r,u,p){return r instanceof MouseEvent?u(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?p(r):void 0}startMove(r){this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.startMove(u),u=>this.oneFingerTouchMoveStateManager.startMove(u))}endMove(r){this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.endMove(u),u=>this.oneFingerTouchMoveStateManager.endMove(u))}isValidStartEvent(r){return this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.isValidStartEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u))}isValidMoveEvent(r){return this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.isValidMoveEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u))}isValidEndEvent(r){return this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.isValidEndEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u))}}const hs=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=r=>{r.preventDefault()}};class Ac{constructor(r,u){this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,u,p){return this._calculateTransform(r,u,p)}touchmove(r,u,p){if(this._active){if(!this._shouldBePrevented(p.length))return r.preventDefault(),this._calculateTransform(r,u,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,u,p){this._calculateTransform(r,u,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,p){p.length>0&&(this._active=!0);const _=va(p,u),w=new c.P(0,0),A=new c.P(0,0);let k=0;for(const $ in _){const q=_[$],H=this._touches[$];H&&(w._add(q),A._add(q.sub(H)),k++,_[$]=q)}if(this._touches=_,this._shouldBePrevented(k)||!A.mag())return;const z=A.div(k);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(k),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ls{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,p){if(!this._firstTwoTouches)return;r.preventDefault();const[_,w]=this._firstTwoTouches,A=Ia(p,u,_),k=Ia(p,u,w);if(!A||!k)return;const z=this._aroundCenter?null:A.add(k).div(2);return this._move([A,k],z,r)}touchend(r,u,p){if(!this._firstTwoTouches)return;const[_,w]=this._firstTwoTouches,A=Ia(p,u,_),k=Ia(p,u,w);A&&k||(this._active&&F.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ia(b,r,u){for(let p=0;p<b.length;p++)if(b[p].identifier===u)return r[p]}function br(b,r){return Math.log(b/r)/Math.LN2}class Mc extends Ls{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const p=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(br(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:br(this._distance,p),pinchAround:u}}}function ds(b,r){return 180*b.angleWith(r)/Math.PI}class vo extends Ls{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u,p){const _=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ds(this._vector,_),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,p=ds(r,this._startVector);return Math.abs(p)<u}}function Dl(b){return Math.abs(b.y)>Math.abs(b.x)}class Sh extends Ls{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,p){super.touchstart(r,u,p),this._currentTouchCount=p.length}_start(r){this._lastPoints=r,Dl(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=r[0].sub(this._lastPoints[0]),w=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,w,p.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(_.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,p){if(this._valid!==void 0)return this._valid;const _=r.mag()>=2,w=u.mag()>=2;if(!_&&!w)return;if(!_||!w)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const A=r.y>0==u.y>0;return Dl(r)&&Dl(u)&&A}}const Th={panStep:100,bearingStep:15,pitchStep:10};class Bs{constructor(r){this._tr=new Sc(r);const u=Th;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,p=0,_=0,w=0,A=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?p=-1:(r.preventDefault(),w=-1);break;case 39:r.shiftKey?p=1:(r.preventDefault(),w=1);break;case 38:r.shiftKey?_=1:(r.preventDefault(),A=-1);break;case 40:r.shiftKey?_=-1:(r.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(p=0,_=0),{cameraAnimation:k=>{const z=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:Pc,zoom:u?Math.round(z.zoom)+u*(r.shiftKey?2:1):z.zoom,bearing:z.bearing+p*this._bearingStep,pitch:z.pitch+_*this._pitchStep,offset:[-w*this._panStep,-A*this._panStep],center:z.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Pc(b){return b*(2-b)}const zd=4.000244140625,Dd=1/450;class Rl{constructor(r,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=r,this._tr=new Sc(r),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Dd}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const p=B.now(),_=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%zd==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(_*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=F.mousePos(this._map.getCanvas(),r),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(c.S.convert(p.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const k=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=k),typeof this._targetZoom=="number"&&(this._targetZoom+=k)}if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>zd?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&z!==0&&(z=1/z);const $=typeof this._targetZoom!="number"?r.scale:c.af(this._targetZoom);this._targetZoom=r.getConstrained(r.getCameraLngLat(),c.ak($*z)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,p=this._startZoom,_=this._easing;let w,A=!1;if(this._type==="wheel"&&p&&_){const k=B.now()-this._lastWheelEventTime,z=Math.min((k+5)/200,1),$=_(z);w=c.C.number(p,u,$),z<1?this._frameId||(this._frameId=!0):A=!0}else w=u,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=w,{noInertia:!0,needsRenderFrame:!A,zoomDelta:w-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=c.co;if(this._prevEase){const p=this._prevEase,_=(B.now()-p.start)/p.duration,w=p.easing(_+.01)-p.easing(_),A=.27/Math.sqrt(w*w+1e-4)*.01,k=Math.sqrt(.0729-A*A);u=c.cm(A,k,.25,1)}return this._prevEase={start:B.now(),duration:r,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class mu{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class fs{constructor(r){this._tr=new Sc(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nn{constructor(){this._tap=new Tc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,u,p){if(!this._swipePoint)if(this._tapTime){const _=u[0],w=r.timeStamp-this._tapTime<500,A=this._tapPoint.dist(_)<30;w&&A?p.length>0&&(this._swipePoint=_,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(r,u,p)}touchmove(r,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const _=u[0],w=_.y-this._swipePoint.y;return this._swipePoint=_,r.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(r,u,p)}touchend(r,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const _=this._tap.touchend(r,u,p);_&&(this._tapTime=r.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ah{constructor(r,u,p){this._el=r,this._mousePan=u,this._touchPan=p}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ha{constructor(r,u,p,_){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=u,this._mousePitch=p,this._mouseRoll=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class xr{constructor(r,u,p,_){this._el=r,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class an{constructor(r,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=F.create("div","maplibregl-cooperative-gesture-screen",r);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=u,this._container.appendChild(_);const w=document.createElement("div");w.className="maplibregl-mobile-message",w.textContent=p,this._container.appendChild(w),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(F.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,u){this._enabled&&(this._map.fire(new c.l("cooperativegestureprevented",{gestureType:r,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Pn=b=>b.zoom||b.drag||b.roll||b.pitch||b.rotate;class gu extends c.l{}function Fs(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta||b.rollDelta}class $i{constructor(r,u){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,w)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=_.type==="renderFrame"?void 0:_,k={needsRenderFrame:!1},z={},$={};for(const{handlerName:G,handler:Q,allowed:se}of this._handlers){if(!Q.isEnabled())continue;let pe;if(this._blockedByActive($,se,G))Q.reset();else if(Q[w||_.type]){if(c.cp(_,w||_.type)){const fe=F.mousePos(this._map.getCanvas(),_);pe=Q[w||_.type](_,fe)}else if(c.cq(_,w||_.type)){const fe=this._getMapTouches(_.touches),ge=F.touchPos(this._map.getCanvas(),fe);pe=Q[w||_.type](_,ge,fe)}else c.cr(w||_.type)||(pe=Q[w||_.type](_));this.mergeHandlerResult(k,z,pe,G,A),pe&&pe.needsRenderFrame&&this._triggerRenderFrame()}(pe||Q.isActive())&&($[G]=Q)}const q={};for(const G in this._previousActiveHandlers)$[G]||(q[G]=A);this._previousActiveHandlers=$,(Object.keys(q).length||Fs(k))&&(this._changes.push([k,z,q]),this._triggerRenderFrame()),(Object.keys($).length||Fs(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:H}=k;H&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],H(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new xh(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,w,A]of this._listeners)F.addEventListener(_,w,_===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[r,u,p]of this._listeners)F.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(r){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Ga(u,r));const _=u.boxZoom=new Oa(u,r);this._add("boxZoom",_),r.interactive&&r.boxZoom&&_.enable();const w=u.cooperativeGestures=new an(u,r.cooperativeGestures);this._add("cooperativeGestures",w),r.cooperativeGestures&&w.enable();const A=new Xf(u),k=new fs(u);u.doubleClickZoom=new mu(k,A),this._add("tapZoom",A),this._add("clickZoom",k),r.interactive&&r.doubleClickZoom&&u.doubleClickZoom.enable();const z=new nn;this._add("tapDragZoom",z);const $=u.touchPitch=new Sh(u);this._add("touchPitch",$),r.interactive&&r.touchPitch&&u.touchPitch.enable(r.touchPitch);const q=()=>u.project(u.getCenter()),H=function({enable:xe,clickTolerance:Ce,aroundCenter:Oe=!0,minPixelCenterThreshold:we=100,rotateDegreesPerPixelMoved:Re=.8},nt){const We=new zt({checkCorrectEvent:Ke=>F.mouseButton(Ke)===0&&Ke.ctrlKey||F.mouseButton(Ke)===2&&!Ke.ctrlKey});return new us({clickTolerance:Ce,move:(Ke,Qe)=>{const Tt=nt();if(Oe&&Math.abs(Tt.y-Ke.y)>we)return{bearingDelta:c.cn(new c.P(Ke.x,Qe.y),Qe,Tt)};let At=(Qe.x-Ke.x)*Re;return Oe&&Qe.y<Tt.y&&(At=-At),{bearingDelta:At}},moveStateManager:We,enable:xe,assignEvents:hs})}(r,q),G=function({enable:xe,clickTolerance:Ce,pitchDegreesPerPixelMoved:Oe=-.5}){const we=new zt({checkCorrectEvent:Re=>F.mouseButton(Re)===0&&Re.ctrlKey||F.mouseButton(Re)===2});return new us({clickTolerance:Ce,move:(Re,nt)=>({pitchDelta:(nt.y-Re.y)*Oe}),moveStateManager:we,enable:xe,assignEvents:hs})}(r),Q=function({enable:xe,clickTolerance:Ce,rollDegreesPerPixelMoved:Oe=.3},we){const Re=new zt({checkCorrectEvent:nt=>F.mouseButton(nt)===2&&nt.ctrlKey});return new us({clickTolerance:Ce,move:(nt,We)=>{const Ke=we();let Qe=(We.x-nt.x)*Oe;return We.y<Ke.y&&(Qe=-Qe),{rollDelta:Qe}},moveStateManager:Re,enable:xe,assignEvents:hs})}(r,q);u.dragRotate=new Ha(r,H,G,Q),this._add("mouseRotate",H,["mousePitch"]),this._add("mousePitch",G,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Q,["mousePitch"]),r.interactive&&r.dragRotate&&u.dragRotate.enable();const se=function({enable:xe,clickTolerance:Ce}){const Oe=new zt({checkCorrectEvent:we=>F.mouseButton(we)===0&&!we.ctrlKey});return new us({clickTolerance:Ce,move:(we,Re)=>({around:Re,panDelta:Re.sub(we)}),activateOnStart:!0,moveStateManager:Oe,enable:xe,assignEvents:hs})}(r),pe=new Ac(r,u);u.dragPan=new Ah(p,se,pe),this._add("mousePan",se),this._add("touchPan",pe,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&u.dragPan.enable(r.dragPan);const fe=new vo,ge=new Mc;u.touchZoomRotate=new xr(p,ge,fe,z),this._add("touchRotate",fe,["touchPan","touchZoom"]),this._add("touchZoom",ge,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&u.touchZoomRotate.enable(r.touchZoomRotate);const ve=u.scrollZoom=new Rl(u,()=>this._triggerRenderFrame());this._add("scrollZoom",ve,["mousePan"]),r.interactive&&r.scrollZoom&&u.scrollZoom.enable(r.scrollZoom);const Te=u.keyboard=new Bs(u);this._add("keyboard",Te),r.interactive&&r.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Za(u))}_add(r,u,p){this._handlers.push({handlerName:r,handler:u,allowed:p}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Pn(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,p){for(const _ in r)if(_!==p&&(!u||u.indexOf(_)<0))return!0;return!1}_getMapTouches(r){const u=[];for(const p of r)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(r,u,p,_,w){if(!p)return;c.e(r,p);const A={handlerName:_,originalEvent:p.originalEvent||w};p.zoomDelta!==void 0&&(u.zoom=A),p.panDelta!==void 0&&(u.drag=A),p.rollDelta!==void 0&&(u.roll=A),p.pitchDelta!==void 0&&(u.pitch=A),p.bearingDelta!==void 0&&(u.rotate=A)}_applyChanges(){const r={},u={},p={};for(const[_,w,A]of this._changes)_.panDelta&&(r.panDelta=(r.panDelta||new c.P(0,0))._add(_.panDelta)),_.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+_.pitchDelta),_.rollDelta&&(r.rollDelta=(r.rollDelta||0)+_.rollDelta),_.around!==void 0&&(r.around=_.around),_.pinchAround!==void 0&&(r.pinchAround=_.pinchAround),_.noInertia&&(r.noInertia=_.noInertia),c.e(u,w),c.e(p,A);this._updateMapTransform(r,u,p),this._changes=[]}_updateMapTransform(r,u,p){const _=this._map,w=_._getTransformForUpdate(),A=_.terrain;if(!(Fs(r)||A&&this._terrainMovement))return this._fireEvents(u,p,!0);_._stop(!0);let{panDelta:k,zoomDelta:z,bearingDelta:$,pitchDelta:q,rollDelta:H,around:G,pinchAround:Q}=r;Q!==void 0&&(G=Q),G=G||_.transform.centerPoint,A&&!w.isPointOnMapSurface(G)&&(G=w.centerPoint);const se={panDelta:k,zoomDelta:z,rollDelta:H,pitchDelta:q,bearingDelta:$,around:G};this._map.cameraHelper.useGlobeControls&&!w.isPointOnMapSurface(G)&&(G=w.centerPoint);const pe=G.distSqr(w.centerPoint)<.01?w.center:w.screenPointToLocation(k?G.sub(k):G);this._handleMapControls({terrain:A,tr:w,deltasForHelper:se,preZoomAroundLoc:pe,combinedEventsInProgress:u,panDelta:k}),_._applyUpdatedTransform(w),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,p,!0)}_handleMapControls({terrain:r,tr:u,deltasForHelper:p,preZoomAroundLoc:_,combinedEventsInProgress:w,panDelta:A}){const k=this._map.cameraHelper;if(k.handleMapControlsRollPitchBearingZoom(p,u),r)return k.useGlobeControls?(this._terrainMovement||!w.drag&&!w.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void k.handleMapControlsPan(p,u,_)):this._terrainMovement||!w.drag&&!w.zoom?void(w.drag&&this._terrainMovement&&A?u.setCenter(u.screenPointToLocation(u.centerPoint.sub(A))):k.handleMapControlsPan(p,u,_)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void k.handleMapControlsPan(p,u,_));k.handleMapControlsPan(p,u,_)}_fireEvents(r,u,p){const _=Pn(this._eventsInProgress),w=Pn(r),A={};for(const H in r){const{originalEvent:G}=r[H];this._eventsInProgress[H]||(A[`${H}start`]=G),this._eventsInProgress[H]=r[H]}!_&&w&&this._fireEvent("movestart",w.originalEvent);for(const H in A)this._fireEvent(H,A[H]);w&&this._fireEvent("move",w.originalEvent);for(const H in r){const{originalEvent:G}=r[H];this._fireEvent(H,G)}const k={};let z;for(const H in this._eventsInProgress){const{handlerName:G,originalEvent:Q}=this._eventsInProgress[H];this._handlersById[G].isActive()||(delete this._eventsInProgress[H],z=u[G]||Q,k[`${H}end`]=z)}for(const H in k)this._fireEvent(H,k[H]);const $=Pn(this._eventsInProgress),q=(_||w)&&!$;if(q&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const H=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&H.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(H)}if(p&&q){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),G=Q=>Q!==0&&-this._bearingSnap<Q&&Q<this._bearingSnap;!H||!H.essential&&B.prefersReducedMotion?(this._map.fire(new c.l("moveend",{originalEvent:z})),G(this._map.getBearing())&&this._map.resetNorth()):(G(H.bearing||this._map.getBearing())&&(H.bearing=0),H.freezeElevation=!0,this._map.easeTo(H,{originalEvent:z})),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new c.l(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new gu("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Nl extends c.E{constructor(r,u,p){super(),this._renderFrameCallback=()=>{const _=Math.min((B.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=p.bearingSnap,this.cameraHelper=u,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,u){r.apply(this.transform),this.transform=r,this.cameraHelper=u}getCenter(){return new c.S(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,u){return this.jumpTo({elevation:r},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,u,p){return r=c.P.convert(r).mult(-1),this.panTo(this.transform.center,c.e({offset:r},u),p)}panTo(r,u,p){return this.easeTo(c.e({center:r},u),p)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,p){return this.easeTo(c.e({zoom:r},u),p)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,u){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new c.l("movestart",u)).fire(new c.l("move",u)).fire(new c.l("moveend",u))),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,p){return this.easeTo(c.e({bearing:r},u),p)}resetNorth(r,u){return this.rotateTo(0,c.e({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(c.e({bearing:0,pitch:0,roll:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}getRoll(){return this.transform.roll}setRoll(r,u){return this.jumpTo({roll:r},u),this}cameraForBounds(r,u){r=hr.convert(r).adjustAntiMeridian();const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),p,u)}_cameraForBoxAndBearing(r,u,p,_){const w={top:0,bottom:0,right:0,left:0};if(typeof(_=c.e({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const $=_.padding;_.padding={top:$,bottom:$,right:$,left:$}}const A=c.e(w,_.padding);_.padding=A;const k=this.transform,z=new hr(r,u);return this.cameraHelper.cameraForBoxAndBearing(_,A,z,p,k)}fitBounds(r,u,p){return this._fitInternal(this.cameraForBounds(r,u),u,p)}fitScreenCoordinates(r,u,p,_,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(c.P.convert(r)),this.transform.screenPointToLocation(c.P.convert(u)),p,_),_,w)}_fitInternal(r,u,p){return r?(delete(u=c.e(r,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(r,u){this.stop();const p=this._getTransformForUpdate();let _=!1,w=!1,A=!1;const k=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,r);const z=p.zoom!==k;return"elevation"in r&&p.elevation!==+r.elevation&&p.setElevation(+r.elevation),"bearing"in r&&p.bearing!==+r.bearing&&(_=!0,p.setBearing(+r.bearing)),"pitch"in r&&p.pitch!==+r.pitch&&(w=!0,p.setPitch(+r.pitch)),"roll"in r&&p.roll!==+r.roll&&(A=!0,p.setRoll(+r.roll)),r.padding==null||p.isPaddingEqual(r.padding)||p.setPadding(r.padding),this._applyUpdatedTransform(p),this.fire(new c.l("movestart",u)).fire(new c.l("move",u)),z&&this.fire(new c.l("zoomstart",u)).fire(new c.l("zoom",u)).fire(new c.l("zoomend",u)),_&&this.fire(new c.l("rotatestart",u)).fire(new c.l("rotate",u)).fire(new c.l("rotateend",u)),w&&this.fire(new c.l("pitchstart",u)).fire(new c.l("pitch",u)).fire(new c.l("pitchend",u)),A&&this.fire(new c.l("rollstart",u)).fire(new c.l("roll",u)).fire(new c.l("rollend",u)),this.fire(new c.l("moveend",u))}calculateCameraOptionsFromTo(r,u,p,_=0){const w=c.a1.fromLngLat(r,u),A=c.a1.fromLngLat(p,_),k=A.x-w.x,z=A.y-w.y,$=A.z-w.z,q=Math.hypot(k,z,$);if(q===0)throw new Error("Can't calculate camera options with same From and To");const H=Math.hypot(k,z),G=c.ak(this.transform.cameraToCenterDistance/q/this.transform.tileSize),Q=180*Math.atan2(k,-z)/Math.PI;let se=180*Math.acos(H/q)/Math.PI;return se=$<0?90-se:90+se,{center:A.toLngLat(),elevation:_,zoom:G,pitch:se,bearing:Q}}calculateCameraOptionsFromCameraLngLatAltRotation(r,u,p,_,w){const A=this.transform.calculateCenterFromCameraLngLatAlt(r,u,p,_);return{center:A.center,elevation:A.elevation,zoom:A.zoom,bearing:p,pitch:_,roll:w}}easeTo(r,u){this._stop(!1,r.easeId),((r=c.e({offset:[0,0],duration:500,easing:c.co},r)).animate===!1||!r.essential&&B.prefersReducedMotion)&&(r.duration=0);const p=this._getTransformForUpdate(),_=this.getBearing(),w=p.pitch,A=p.roll,k="bearing"in r?this._normalizeBearing(r.bearing,_):_,z="pitch"in r?+r.pitch:w,$="roll"in r?this._normalizeBearing(r.roll,A):A,q="padding"in r?r.padding:p.padding,H=c.P.convert(r.offset);let G,Q;r.around&&(G=c.S.convert(r.around),Q=p.locationToScreenPoint(G));const se={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},pe=this.cameraHelper.handleEaseTo(p,{bearing:k,pitch:z,roll:$,padding:q,around:G,aroundPoint:Q,offsetAsPoint:H,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||_!==k,this._pitching=this._pitching||z!==w,this._rolling=this._rolling||$!==A,this._padding=!p.isPaddingEqual(q),this._zooming=this._zooming||pe.isZooming,this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,se),this.terrain&&this._prepareElevation(pe.elevationCenter),this._ease(fe=>{pe.easeFunc(fe),this.terrain&&!r.freezeElevation&&this._updateElevation(fe),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},fe=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(u,fe)},r),this}_prepareEase(r,u,p={}){this._moving=!0,u||p.moving||this.fire(new c.l("movestart",r)),this._zooming&&!p.zooming&&this.fire(new c.l("zoomstart",r)),this._rotating&&!p.rotating&&this.fire(new c.l("rotatestart",r)),this._pitching&&!p.pitching&&this.fire(new c.l("pitchstart",r)),this._rolling&&!p.rolling&&this.fire(new c.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(p-(u-(p*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.setElevation(c.C.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const u=r.getCameraLngLat(),p=r.getCameraAltitude(),_=this.terrain?this.terrain.getElevationForLngLatZoom(u,r.zoom):0;if(p<_){const w=this.calculateCameraOptionsFromTo(u,_,r.center,r.elevation);return{pitch:w.pitch,zoom:w.zoom}}return{}}_applyUpdatedTransform(r){const u=[];if(u.push(_=>this._elevateCameraIfInsideTerrain(_)),this.transformCameraUpdate&&u.push(_=>this.transformCameraUpdate(_)),!u.length)return;const p=r.clone();for(const _ of u){const w=p.clone(),{center:A,zoom:k,roll:z,pitch:$,bearing:q,elevation:H}=_(w);A&&w.setCenter(A),H!==void 0&&w.setElevation(H),k!==void 0&&w.setZoom(k),z!==void 0&&w.setRoll(z),$!==void 0&&w.setPitch($),q!==void 0&&w.setBearing(q),p.apply(w)}this.transform.apply(p)}_fireMoveEvents(r){this.fire(new c.l("move",r)),this._zooming&&this.fire(new c.l("zoom",r)),this._rotating&&this.fire(new c.l("rotate",r)),this._pitching&&this.fire(new c.l("pitch",r)),this._rolling&&this.fire(new c.l("roll",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,_=this._rotating,w=this._pitching,A=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new c.l("zoomend",r)),_&&this.fire(new c.l("rotateend",r)),w&&this.fire(new c.l("pitchend",r)),A&&this.fire(new c.l("rollend",r)),this.fire(new c.l("moveend",r))}flyTo(r,u){if(!r.essential&&B.prefersReducedMotion){const Qe=c.Q(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Qe,u)}this.stop(),r=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.co},r);const p=this._getTransformForUpdate(),_=p.bearing,w=p.pitch,A=p.roll,k=p.padding,z="bearing"in r?this._normalizeBearing(r.bearing,_):_,$="pitch"in r?+r.pitch:w,q="roll"in r?this._normalizeBearing(r.roll,A):A,H="padding"in r?r.padding:p.padding,G=c.P.convert(r.offset);let Q=p.centerPoint.add(G);const se=p.screenPointToLocation(Q),pe=this.cameraHelper.handleFlyTo(p,{bearing:z,pitch:$,roll:q,padding:H,locationAtOffset:se,offsetAsPoint:G,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let fe=r.curve;const ge=Math.max(p.width,p.height),ve=ge/pe.scaleOfZoom,Te=pe.pixelPathLength;typeof pe.scaleOfMinZoom=="number"&&(fe=Math.sqrt(ge/pe.scaleOfMinZoom/Te*2));const xe=fe*fe;function Ce(Qe){const Tt=(ve*ve-ge*ge+(Qe?-1:1)*xe*xe*Te*Te)/(2*(Qe?ve:ge)*xe*Te);return Math.log(Math.sqrt(Tt*Tt+1)-Tt)}function Oe(Qe){return(Math.exp(Qe)-Math.exp(-Qe))/2}function we(Qe){return(Math.exp(Qe)+Math.exp(-Qe))/2}const Re=Ce(!1);let nt=function(Qe){return we(Re)/we(Re+fe*Qe)},We=function(Qe){return ge*((we(Re)*(Oe(Tt=Re+fe*Qe)/we(Tt))-Oe(Re))/xe)/Te;var Tt},Ke=(Ce(!0)-Re)/fe;if(Math.abs(Te)<2e-6||!isFinite(Ke)){if(Math.abs(ge-ve)<1e-6)return this.easeTo(r,u);const Qe=ve<ge?-1:1;Ke=Math.abs(Math.log(ve/ge))/fe,We=()=>0,nt=Tt=>Math.exp(Qe*fe*Tt)}return r.duration="duration"in r?+r.duration:1e3*Ke/("screenSpeed"in r?+r.screenSpeed/fe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=_!==z,this._pitching=$!==w,this._rolling=q!==A,this._padding=!p.isPaddingEqual(H),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(pe.targetCenter),this._ease(Qe=>{const Tt=Qe*Ke,At=1/nt(Tt),yt=We(Tt);this._rotating&&p.setBearing(c.C.number(_,z,Qe)),this._pitching&&p.setPitch(c.C.number(w,$,Qe)),this._rolling&&p.setRoll(c.C.number(A,q,Qe)),this._padding&&(p.interpolatePadding(k,H,Qe),Q=p.centerPoint.add(G)),pe.easeFunc(Qe,At,yt,Q),this.terrain&&!r.freezeElevation&&this._updateElevation(Qe),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,u)}return r||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(r,u,p){p.animate===!1||p.duration===0?(r(1),u()):(this._easeStart=B.now(),this._easeOptions=p,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,u){r=c.aO(r,-180,180);const p=Math.abs(r-u);return Math.abs(r-360-u)<p&&(r-=360),Math.abs(r+360-u)<p&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(c.S.convert(r),this.transform.tileZoom):null}}const Nt={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ht{constructor(r=Nt){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=F.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=F.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const p=this._map._getUIString(`AttributionControl.${u}`);r.title=p,r.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(_=>typeof _!="string"?"":_)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const u=this._map.style.sourceCaches;for(const _ in u){const w=u[_];if(w.used||w.usedForTerrain){const A=w.getSource();A.attribution&&r.indexOf(A.attribution)<0&&r.push(A.attribution)}}r=r.filter(_=>String(_).trim()),r.sort((_,w)=>_.length-w.length),r=r.filter((_,w)=>{for(let A=w+1;A<r.length;A++)if(r[A].indexOf(_)>=0)return!1;return!0});const p=r.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,r.length?(this._innerContainer.innerHTML=F.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ec{constructor(r={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=F.create("div","maplibregl-ctrl");const u=F.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){F.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Bn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const _ of p)if(_.id===r)return void(_.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Cc=c.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Mi extends c.E{constructor(r){super(),this._lastTilesetChange=B.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];const p={};for(const _ of Cr(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))p[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.terrainRttPosMatrix32f=new Float64Array(16),c.bZ(_.terrainRttPosMatrix32f,0,c.$,c.$,0,0,1),this._tiles[_.key]=new re(_,this.tileSize),this._lastTilesetChange=B.now());for(const _ in this._tiles)p[_]||delete this._tiles[_]}freeRtt(r){for(const u in this._tiles){const p=this._tiles[u];(!r||p.tileID.equals(r)||p.tileID.isChildOf(r)||r.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,u){return u?this._getTerrainCoordsForTileRanges(r,u):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const u={};for(const p of this._renderableTilesKeys){const _=this._tiles[p].tileID,w=r.clone(),A=c.ba();if(_.canonical.equals(r.canonical))c.bZ(A,0,c.$,c.$,0,0,1);else if(_.canonical.isChildOf(r.canonical)){const k=_.canonical.z-r.canonical.z,z=_.canonical.x-(_.canonical.x>>k<<k),$=_.canonical.y-(_.canonical.y>>k<<k),q=c.$>>k;c.bZ(A,0,q,q,0,0,1),c.M(A,A,[-z*q,-$*q,0])}else{if(!r.canonical.isChildOf(_.canonical))continue;{const k=r.canonical.z-_.canonical.z,z=r.canonical.x-(r.canonical.x>>k<<k),$=r.canonical.y-(r.canonical.y>>k<<k),q=c.$>>k;c.bZ(A,0,c.$,c.$,0,0,1),c.M(A,A,[z*q,$*q,0]),c.N(A,A,[1/2**k,1/2**k,0])}}w.terrainRttPosMatrix32f=new Float32Array(A),u[p]=w}return u}_getTerrainCoordsForTileRanges(r,u){const p={};for(const _ of this._renderableTilesKeys){const w=this._tiles[_].tileID;if(!this._isWithinTileRanges(w,u))continue;const A=r.clone(),k=c.ba();if(w.canonical.z===r.canonical.z){const z=r.canonical.x-w.canonical.x,$=r.canonical.y-w.canonical.y;c.bZ(k,0,c.$,c.$,0,0,1),c.M(k,k,[z*c.$,$*c.$,0])}else if(w.canonical.z>r.canonical.z){const z=w.canonical.z-r.canonical.z,$=w.canonical.x-(w.canonical.x>>z<<z),q=w.canonical.y-(w.canonical.y>>z<<z),H=r.canonical.x-(w.canonical.x>>z),G=r.canonical.y-(w.canonical.y>>z),Q=c.$>>z;c.bZ(k,0,Q,Q,0,0,1),c.M(k,k,[-$*Q+H*c.$,-q*Q+G*c.$,0])}else{const z=r.canonical.z-w.canonical.z,$=r.canonical.x-(r.canonical.x>>z<<z),q=r.canonical.y-(r.canonical.y>>z<<z),H=(r.canonical.x>>z)-w.canonical.x,G=(r.canonical.y>>z)-w.canonical.y,Q=c.$<<z;c.bZ(k,0,Q,Q,0,0,1),c.M(k,k,[$*c.$+H*Q,q*c.$+G*Q,0])}A.terrainRttPosMatrix32f=new Float32Array(k),p[_]=A}return p}getSourceTile(r,u){const p=this.sourceCache._source;let _=r.overscaledZ-this.deltaZoom;if(_>p.maxzoom&&(_=p.maxzoom),_<p.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(_).key);let w=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!w||!w.dem)&&u)for(;_>=p.minzoom&&(!w||!w.dem);)w=this.sourceCache.getTileByID(r.scaledTo(_--).key);return w}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,u){return u[r.canonical.z]&&r.canonical.x>=u[r.canonical.z].minTileX&&r.canonical.x<=u[r.canonical.z].maxTileX&&r.canonical.y>=u[r.canonical.z].minTileY&&r.canonical.y<=u[r.canonical.z].maxTileY}}class Rd{constructor(r,u,p){this._meshCache={},this.painter=r,this.sourceCache=new Mi(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,p,_=c.$){var w;if(!(u>=0&&u<_&&p>=0&&p<_))return 0;const A=this.getTerrainData(r),k=(w=A.tile)===null||w===void 0?void 0:w.dem;if(!k)return 0;const z=c.cs([],[u/_*c.$,p/_*c.$],A.u_terrain_matrix),$=[z[0]*k.dim,z[1]*k.dim],q=Math.floor($[0]),H=Math.floor($[1]),G=$[0]-q,Q=$[1]-H;return k.get(q,H)*(1-G)*(1-Q)+k.get(q+1,H)*G*(1-Q)+k.get(q,H+1)*(1-G)*Q+k.get(q+1,H+1)*G*Q}getElevationForLngLatZoom(r,u){if(!c.ct(u,r.wrap()))return 0;const{tileID:p,mercatorX:_,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(r,u);return this.getElevation(p,_%c.$,w%c.$,c.$)}getElevation(r,u,p,_=c.$){return this.getDEMElevation(r,u,p,_)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const _=this.painter.context,w=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new c.T(_,w,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new c.T(_,new c.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ag([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const _=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new c.T(_,u.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),u.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+r.key;if(p&&!this._demMatrixCache[p]){const _=this.sourceCache.sourceCache._source.maxzoom;let w=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=_?w=r.canonical.z-_:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=r.canonical.x-(r.canonical.x>>w<<w),k=r.canonical.y-(r.canonical.y>>w<<w),z=c.cu(new Float64Array(16),[1/(c.$<<w),1/(c.$<<w),0]);c.M(z,z,[A*c.$,k*c.$,0]),this._demMatrixCache[r.key]={matrix:z,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){const u=this.painter,p=u.width/devicePixelRatio,_=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new c.T(u.context,{width:p,height:_,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new c.T(u.context,{width:p,height:_,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,_,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,_))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,A=0;w<this._coordsTextureSize;w++)for(let k=0;k<this._coordsTextureSize;k++,A+=4)u[A+0]=255&k,u[A+1]=255&w,u[A+2]=k>>8<<4|w>>8,u[A+3]=0;const p=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),_=new c.T(r,p,r.gl.RGBA,{premultiply:!1});return _.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),p=this.painter.context,_=p.gl,w=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),A=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),k=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(w,k-A-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const z=u[0]+(u[2]>>4<<8),$=u[1]+((15&u[2])<<8),q=this.coordsIndex[255-u[3]],H=q&&this.sourceCache.getTileByID(q);if(!H)return null;const G=this._coordsTextureSize,Q=(1<<H.tileID.canonical.z)*G;return new c.a1((H.tileID.canonical.x*G+z)/Q+H.tileID.wrap,(H.tileID.canonical.y*G+$)/Q,this.getElevation(H.tileID,z,$,G))}depthAtPoint(r){const u=new Uint8Array(4),p=this.painter.context,_=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(r){var u;const p=((u=this.painter.style.projection)===null||u===void 0?void 0:u.transitionState)>0,_=p&&r.canonical.y===0,w=p&&r.canonical.y===(1<<r.canonical.z)-1,A=`m_${_?"n":""}_${w?"s":""}`;if(this._meshCache[A])return this._meshCache[A];const k=this.painter.context,z=new c.cv,$=new c.aN,q=this.meshSize,H=c.$/q,G=q*q;for(let we=0;we<=q;we++)for(let Re=0;Re<=q;Re++)z.emplaceBack(Re*H,we*H,0);for(let we=0;we<G;we+=q+1)for(let Re=0;Re<q;Re++)$.emplaceBack(Re+we,q+Re+we+1,q+Re+we+2),$.emplaceBack(Re+we,q+Re+we+2,Re+we+1);const Q=z.length,se=Q+(q+1),pe=(q+1)*q,fe=_?c.bh:0,ge=_?0:1,ve=w?c.bi:c.$,Te=w?0:1;for(let we=0;we<=q;we++)z.emplaceBack(we*H,fe,ge);for(let we=0;we<=q;we++)z.emplaceBack(we*H,ve,Te);for(let we=0;we<q;we++)$.emplaceBack(pe+we,se+we,se+we+1),$.emplaceBack(pe+we,se+we+1,pe+we+1),$.emplaceBack(0+we,Q+we+1,Q+we),$.emplaceBack(0+we,0+we+1,Q+we+1);const xe=z.length,Ce=xe+2*(q+1);for(const we of[0,1])for(let Re=0;Re<=q;Re++)for(const nt of[0,1])z.emplaceBack(we*c.$,Re*H,nt);for(let we=0;we<2*q;we+=2)$.emplaceBack(xe+we,xe+we+1,xe+we+3),$.emplaceBack(xe+we,xe+we+3,xe+we+2),$.emplaceBack(Ce+we,Ce+we+3,Ce+we+1),$.emplaceBack(Ce+we,Ce+we+2,Ce+we+3);const Oe=new cc(k.createVertexBuffer(z,Cc.members),k.createIndexBuffer($),c.aM.simpleSegment(0,0,z.length,$.length));return this._meshCache[A]=Oe,Oe}getMeshFrameDelta(r){return 2*Math.PI*c.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,u){var p;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(r,u);return(p=this.getMinMaxElevation(_).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(r,u){const p=c.a1.fromLngLat(r.wrap()),_=(1<<u)*c.$,w=p.x*_,A=p.y*_,k=Math.floor(w/c.$),z=Math.floor(A/c.$);return{tileID:new c.Z(u,0,u,k,z),mercatorX:w,mercatorY:A}}}class Xa{constructor(r,u,p){this._context=r,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new c.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:r,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Ll={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Nd{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new Xa(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(p=>!r._layers[p].isHidden(u)),this._coordsAscending={};for(const p in r.sourceCaches){this._coordsAscending[p]={};const _=r.sourceCaches[p].getVisibleCoordinates(),w=r.sourceCaches[p].getSource(),A=w instanceof Xn?w.terrainTileRanges:null;for(const k of _){const z=this.terrain.sourceCache.getTerrainCoords(k,A);for(const $ in z)this._coordsAscending[p][$]||(this._coordsAscending[p][$]=[]),this._coordsAscending[p][$].push(z[$])}}this._coordsAscendingStr={};for(const p of r._order){const _=r._layers[p],w=_.source;if(Ll[_.type]&&!this._coordsAscendingStr[w]){this._coordsAscendingStr[w]={};for(const A in this._coordsAscending[w])this._coordsAscendingStr[w][A]=this._coordsAscending[w][A].map(k=>k.key).sort().join()}}for(const p of this._renderableTiles)for(const _ in this._coordsAscendingStr){const w=this._coordsAscendingStr[_][p.tileID.key];w&&w!==p.rttCoords[_]&&(p.rtt=[])}}renderLayer(r,u){if(r.isHidden(this.painter.transform.zoom))return!1;const p=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),_=r.type,w=this.painter,A=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Ll[_]&&(this._prevType&&Ll[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(r.id),!A))return!0;if(Ll[this._prevType]||Ll[_]&&A){this._prevType=_;const k=this._stacks.length-1,z=this._stacks[k]||[];for(const $ of this._renderableTiles){if(this.pool.isFull()&&(wc(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push($),$.rtt[k]){const H=this.pool.getObjectForId($.rtt[k].id);if(H.stamp===$.rtt[k].stamp){this.pool.useObject(H);continue}}const q=this.pool.getOrCreateFreeObject();this.pool.useObject(q),this.pool.stampObject(q),$.rtt[k]={id:q.id,stamp:q.stamp},w.context.bindFramebuffer.set(q.fbo.framebuffer),w.context.clear({color:c.bf.transparent,stencil:0}),w.currentStencilSource=void 0;for(let H=0;H<z.length;H++){const G=w.style._layers[z[H]],Q=G.source?this._coordsAscending[G.source][$.tileID.key]:[$.tileID];w.context.viewport.set([0,0,q.fbo.width,q.fbo.height]),w._renderTileClippingMasks(G,Q,!0),w.renderLayer(w,w.style.sourceCaches[G.source],G,Q,p),G.source&&($.rttCoords[G.source]=this._coordsAscendingStr[G.source][$.tileID.key])}}return wc(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),Ll[_]}return!1}}const Ld={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Bd=M,mi={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Nt,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},yr={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class En{constructor(r,u,p=!1){this.mousedown=w=>{this.startMove(w,F.mousePos(this.element,w)),F.addEventListener(window,"mousemove",this.mousemove),F.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.move(w,F.mousePos(this.element,w))},this.mouseup=w=>{this._rotatePitchHandler.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=F.touchPos(this.element,w.targetTouches)[0],this.startMove(w,this._startPos),F.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=F.touchPos(this.element,w.targetTouches)[0],this.move(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;const _=new wh;this._rotatePitchHandler=new us({clickTolerance:3,move:(w,A)=>{const k=u.getBoundingClientRect(),z=new c.P((k.bottom-k.top)/2,(k.right-k.left)/2);return{bearingDelta:c.cn(new c.P(w.x,A.y),A,z),pitchDelta:p?-.5*(A.y-w.y):void 0}},moveStateManager:_,enable:!0,assignEvents:()=>{}}),this.map=r,F.addEventListener(u,"mousedown",this.mousedown),F.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),F.addEventListener(u,"touchcancel",this.reset)}startMove(r,u){this._rotatePitchHandler.dragStart(r,u),F.disableDrag()}move(r,u){const p=this.map,{bearingDelta:_,pitchDelta:w}=this._rotatePitchHandler.dragMove(r,u)||{};_&&p.setBearing(p.getBearing()+_),w&&p.setPitch(p.getPitch()+w)}off(){const r=this.element;F.removeEventListener(r,"mousedown",this.mousedown),F.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend),F.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){F.enableDrag(),F.removeEventListener(window,"mousemove",this.mousemove),F.removeEventListener(window,"mouseup",this.mouseup),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend)}}let Wa;function ps(b,r,u,p=!1){if(p||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return b==null?void 0:b.wrap();const _=new c.S(b.lng,b.lat);if(b=new c.S(b.lng,b.lat),r){const w=new c.S(b.lng-360,b.lat),A=new c.S(b.lng+360,b.lat),k=u.locationToScreenPoint(b).distSqr(r);u.locationToScreenPoint(w).distSqr(r)<k?b=w:u.locationToScreenPoint(A).distSqr(r)<k&&(b=A)}for(;Math.abs(b.lng-u.center.lng)>180;){const w=u.locationToScreenPoint(b);if(w.x>=0&&w.y>=0&&w.x<=u.width&&w.y<=u.height)break;b.lng>u.center.lng?b.lng-=360:b.lng+=360}return b.lng!==_.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(b))?b:_}const $s={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ya(b,r,u){const p=b.classList;for(const _ in $s)p.remove(`maplibregl-${u}-anchor-${_}`);p.add(`maplibregl-${u}-anchor-${r}`)}class qs extends c.E{constructor(r){if(super(),this._onKeyPress=u=>{const p=u.code,_=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,_=this._element;this._popup&&(p===_||_.contains(p))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=ps(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),F.setTransform(this._element,`${$s[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${_}`),B.frameAsync(new AbortController).then(()=>{this._updateOpacity(u&&u.type==="moveend")}).catch(()=>{})},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.l("dragstart"))),this.fire(new c.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=c.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=F.create("div");const u=F.createNS("http://www.w3.org/2000/svg","svg"),p=41,_=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${_}px`),u.setAttributeNS(null,"viewBox",`0 0 ${_} ${p}`);const w=F.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");const A=F.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const k=F.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ge of z){const ve=F.createNS("http://www.w3.org/2000/svg","ellipse");ve.setAttributeNS(null,"opacity","0.04"),ve.setAttributeNS(null,"cx","10.5"),ve.setAttributeNS(null,"cy","5.80029008"),ve.setAttributeNS(null,"rx",ge.rx),ve.setAttributeNS(null,"ry",ge.ry),k.appendChild(ve)}const $=F.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);const q=F.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(q);const H=F.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"opacity","0.25"),H.setAttributeNS(null,"fill","#000000");const G=F.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),H.appendChild(G);const Q=F.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Q.setAttributeNS(null,"fill","#FFFFFF");const se=F.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pe=F.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#000000"),pe.setAttributeNS(null,"opacity","0.25"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962");const fe=F.createNS("http://www.w3.org/2000/svg","circle");fe.setAttributeNS(null,"fill","#FFFFFF"),fe.setAttributeNS(null,"cx","5.5"),fe.setAttributeNS(null,"cy","5.5"),fe.setAttributeNS(null,"r","5.4999962"),se.appendChild(pe),se.appendChild(fe),A.appendChild(k),A.appendChild($),A.appendChild(H),A.appendChild(Q),A.appendChild(se),u.appendChild(A),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(u),this._offset=c.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Ya(this._element,this._anchor,"marker"),r&&r.className)for(const u of r.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),F.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=c.S.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const _=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var u,p;const _=(u=this._map)===null||u===void 0?void 0:u.terrain,w=this._map.transform.isLocationOccluded(this._lngLat);if(!_||w){const Q=w?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Q&&(this._element.style.opacity=Q))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const A=this._map,k=A.terrain.depthAtPoint(this._pos),z=A.terrain.getElevationForLngLatZoom(this._lngLat,A.transform.tileZoom);if(A.transform.lngLatToCameraDepth(this._lngLat,z)-k<.006)return void(this._element.style.opacity=this._opacity);const $=-this._offset.y/A.transform.pixelsPerMeter,q=Math.sin(A.getPitch()*Math.PI/180)*$,H=A.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),G=A.transform.lngLatToCameraDepth(this._lngLat,z+q)-H>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&G&&this._popup.remove(),this._element.style.opacity=G?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=c.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,u){return(this._opacity===void 0||r===void 0&&u===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const yu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Vo=0,Us=!1;const Mh={maxWidth:100,unit:"metric"};function vu(b,r,u){const p=u&&u.maxWidth||100,_=b._container.clientHeight/2,w=b._container.clientWidth/2,A=b.unproject([w-p/2,_]),k=b.unproject([w+p/2,_]),z=Math.round(b.project(k).x-b.project(A).x),$=Math.min(p,z,b._container.clientWidth),q=A.distanceTo(k);if(u&&u.unit==="imperial"){const H=3.2808*q;H>5280?Vs(r,$,H/5280,b._getUIString("ScaleControl.Miles")):Vs(r,$,H,b._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Vs(r,$,q/1852,b._getUIString("ScaleControl.NauticalMiles")):q>=1e3?Vs(r,$,q/1e3,b._getUIString("ScaleControl.Kilometers")):Vs(r,$,q,b._getUIString("ScaleControl.Meters"))}function Vs(b,r,u,p){const _=function(w){const A=Math.pow(10,`${Math.floor(w)}`.length-1);let k=w/A;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(z){const $=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*$)/$}(k),A*k}(u);b.style.width=r*(_/u)+"px",b.innerHTML=`${_}&nbsp;${p}`}const Ph={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Eh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function jc(b){if(b){if(typeof b=="number"){const r=Math.round(Math.abs(b)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,b),"top-left":new c.P(r,r),"top-right":new c.P(-r,r),bottom:new c.P(0,-b),"bottom-left":new c.P(r,-r),"bottom-right":new c.P(-r,-r),left:new c.P(b,0),right:new c.P(-b,0)}}if(b instanceof c.P||Array.isArray(b)){const r=c.P.convert(b);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:c.P.convert(b.center||[0,0]),top:c.P.convert(b.top||[0,0]),"top-left":c.P.convert(b["top-left"]||[0,0]),"top-right":c.P.convert(b["top-right"]||[0,0]),bottom:c.P.convert(b.bottom||[0,0]),"bottom-left":c.P.convert(b["bottom-left"]||[0,0]),"bottom-right":c.P.convert(b["bottom-right"]||[0,0]),left:c.P.convert(b.left||[0,0]),right:c.P.convert(b.right||[0,0])}}return jc(new c.P(0,0))}const Ch=M;m.AJAXError=c.cz,m.Event=c.l,m.Evented=c.E,m.LngLat=c.S,m.MercatorCoordinate=c.a1,m.Point=c.P,m.addProtocol=c.cA,m.config=c.a,m.removeProtocol=c.cB,m.AttributionControl=Ht,m.BoxZoomHandler=Oa,m.CanvasSource=Ii,m.CooperativeGesturesHandler=an,m.DoubleClickZoomHandler=mu,m.DragPanHandler=Ah,m.DragRotateHandler=Ha,m.EdgeInsets=Io,m.FullscreenControl=class extends c.E{constructor(b={}){super(),this._onFullscreenChange=()=>{var r;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=u==null?void 0:u.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){F.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const b=this._fullscreenButton=F.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);F.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},m.GeoJSONSource=Oi,m.GeolocateControl=class extends c.E{constructor(b){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new c.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const u=new c.S(r.coords.longitude,r.coords.latitude),p=r.coords.accuracy,_=this._map.getBearing(),w=c.e({bearing:_},this.options.fitBoundsOptions),A=hr.fromLngLat(u,p);this._map.fitBounds(A,w,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const u=new c.S(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=r.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Us)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=F.create("button","maplibregl-ctrl-geolocate",this._container),F.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new qs({element:this._dotElement}),this._circleElement=F.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new qs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{const p=(u==null?void 0:u[0])instanceof ResizeObserverEntry;u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.l("trackuserlocationend")),this.fire(new c.l("userlocationlostfocus")))})}},this.options=c.e({},yu,b)}onAdd(b){return this._map=b,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return c._(this,arguments,void 0,function*(r=!1){if(Wa!==void 0&&!r)return Wa;if(window.navigator.permissions===void 0)return Wa=!!window.navigator.geolocation,Wa;try{Wa=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Wa=!!window.navigator.geolocation}return Wa})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),F.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Vo=0,Us=!1}_isOutOfMapMaxBounds(b){const r=this._map.getMaxBounds(),u=b.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const b=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&b))return;const r=this._map.project(b),u=this._map.unproject([r.x+100,r.y]),p=b.distanceTo(u)/100,_=2*this._accuracy/p;this._circleElement.style.width=`${_.toFixed(2)}px`,this._circleElement.style.height=`${_.toFixed(2)}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Vo--,Us=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.l("trackuserlocationstart")),this.fire(new c.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Vo++,Vo>1?(b={maximumAge:6e5,timeout:0},Us=!0):(b=this.options.positionOptions,Us=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},m.GlobeControl=class{constructor(){this._toggleProjection=()=>{var b;const r=(b=this._map.getProjection())===null||b===void 0?void 0:b.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var b;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((b=this._map.getProjection())===null||b===void 0?void 0:b.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(b){return this._map=b,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=F.create("button","maplibregl-ctrl-globe",this._container),F.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},m.Hash=bi,m.ImageSource=Xn,m.KeyboardHandler=Bs,m.LngLatBounds=hr,m.LogoControl=Ec,m.Map=class extends Nl{constructor(b){var r,u;c.cw.mark(c.cx.create);const p=Object.assign(Object.assign(Object.assign({},mi),b),{canvasContextAttributes:Object.assign(Object.assign({},mi.canvasContextAttributes),b.canvasContextAttributes)});if(p.minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const _=new Ms,w=new Ps;if(p.minZoom!==void 0&&_.setMinZoom(p.minZoom),p.maxZoom!==void 0&&_.setMaxZoom(p.maxZoom),p.minPitch!==void 0&&_.setMinPitch(p.minPitch),p.maxPitch!==void 0&&_.setMaxPitch(p.maxPitch),p.renderWorldCopies!==void 0&&_.setRenderWorldCopies(p.renderWorldCopies),super(_,w,{bearingSnap:p.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Bn,this._controls=[],this._mapId=c.a7(),this._contextLost=k=>{k.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new c.l("webglcontextlost",{originalEvent:k}))},this._contextRestored=k=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.l("webglcontextrestored",{originalEvent:k}))},this._onMapScroll=k=>{if(k.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=p.trackResize===!0,this._bearingSnap=p.bearingSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=p.refreshExpiredTiles===!0,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions===!0,this._collectResourceTiming=p.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ld),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this.transformCameraUpdate=p.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=p.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ue.addThrottleControl(()=>this.isMoving()),this._requestManager=new J(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let k=!1;const z=ls($=>{this._trackResize&&!this._removed&&(this.resize($),this.redraw())},50);this._resizeObserver=new ResizeObserver($=>{k?z($):k=!0}),this._resizeObserver.observe(this._container)}this.handlers=new $i(this,p),this._hash=p.hash&&new bi(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,c.e({},p.fitBoundsOptions,{duration:0}))));const A=typeof p.style=="string"||((u=(r=p.style)===null||r===void 0?void 0:r.projection)===null||u===void 0?void 0:u.type)!=="globe";this.resize(null,A),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new Ht(typeof p.attributionControl=="boolean"?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new Ec,p.logoPosition),this.on("style.load",()=>{if(A||this._resizeTransform(),this.transform.unmodified){const k=c.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(k)}}),this.on("data",k=>{this._update(k.dataType==="style"),this.fire(new c.l(`${k.dataType}data`,k))}),this.on("dataloading",k=>{this.fire(new c.l(`${k.dataType}dataloading`,k))}),this.on("dataabort",k=>{this.fire(new c.l("sourcedataabort",k))})}_getMapId(){return this._mapId}setGlobalStateProperty(b,r){return this.style.setGlobalStateProperty(b,r),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(b,r){if(r===void 0&&(r=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new c.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=b.onAdd(this);this._controls.push(b);const p=this._controlPositions[r];return r.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new c.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(b);return r>-1&&this._controls.splice(r,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}coveringTiles(b){return Cr(this.transform,b)}calculateCameraOptionsFromTo(b,r,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,r,u,p)}resize(b,r=!0){const[u,p]=this._containerDimensions(),_=this._getClampedPixelRatio(u,p);if(this._resizeCanvas(u,p,_),this.painter.resize(u,p,_),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const k=this._getClampedPixelRatio(u,p);this._resizeCanvas(u,p,k),this.painter.resize(u,p,k)}this._resizeTransform(r);const w=!this._moving;return w&&(this.stop(),this.fire(new c.l("movestart",b)).fire(new c.l("move",b))),this.fire(new c.l("resize",b)),w&&this.fire(new c.l("moveend",b)),this}_resizeTransform(b=!0){var r;const[u,p]=this._containerDimensions();this.transform.resize(u,p,b),(r=this._requestedCameraState)===null||r===void 0||r.resize(u,p,b)}_getClampedPixelRatio(b,r){const{0:u,1:p}=this._maxCanvasSize,_=this.getPixelRatio(),w=b*_,A=r*_;return Math.min(w>u?u/w:1,A>p?p/A:1)*_}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(hr.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.setMinZoom(b),this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.setMaxZoom(b),this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.setMinPitch(b),this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(b>=this.transform.minPitch)return this.transform.setMaxPitch(b),this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.setRenderWorldCopies(b),this._update()}project(b){return this.transform.locationToScreenPoint(c.S.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.screenPointToLocation(c.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,r,u){if(b==="mouseenter"||b==="mouseover"){let p=!1;return{layers:r,listener:u,delegates:{mousemove:w=>{const A=r.filter(z=>this.getLayer(z)),k=A.length!==0?this.queryRenderedFeatures(w.point,{layers:A}):[];k.length?p||(p=!0,u.call(this,new Fi(b,this,w.originalEvent,{features:k}))):p=!1},mouseout:()=>{p=!1}}}}if(b==="mouseleave"||b==="mouseout"){let p=!1;return{layers:r,listener:u,delegates:{mousemove:A=>{const k=r.filter(z=>this.getLayer(z));(k.length!==0?this.queryRenderedFeatures(A.point,{layers:k}):[]).length?p=!0:p&&(p=!1,u.call(this,new Fi(b,this,A.originalEvent)))},mouseout:A=>{p&&(p=!1,u.call(this,new Fi(b,this,A.originalEvent)))}}}}{const p=_=>{const w=r.filter(k=>this.getLayer(k)),A=w.length!==0?this.queryRenderedFeatures(_.point,{layers:w}):[];A.length&&(_.features=A,u.call(this,_),delete _.features)};return{layers:r,listener:u,delegates:{[b]:p}}}}_saveDelegatedListener(b,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(r)}_removeDelegatedListener(b,r,u){if(!this._delegatedListeners||!this._delegatedListeners[b])return;const p=this._delegatedListeners[b];for(let _=0;_<p.length;_++){const w=p[_];if(w.listener===u&&w.layers.length===r.length&&w.layers.every(A=>r.includes(A))){for(const A in w.delegates)this.off(A,w.delegates[A]);return void p.splice(_,1)}}}on(b,r,u){if(u===void 0)return super.on(b,r);const p=typeof r=="string"?[r]:r,_=this._createDelegatedListener(b,p,u);this._saveDelegatedListener(b,_);for(const w in _.delegates)this.on(w,_.delegates[w]);return{unsubscribe:()=>{this._removeDelegatedListener(b,p,u)}}}once(b,r,u){if(u===void 0)return super.once(b,r);const p=typeof r=="string"?[r]:r,_=this._createDelegatedListener(b,p,u);for(const w in _.delegates){const A=_.delegates[w];_.delegates[w]=(...k)=>{this._removeDelegatedListener(b,p,u),A(...k)}}this._saveDelegatedListener(b,_);for(const w in _.delegates)this.once(w,_.delegates[w]);return this}off(b,r,u){return u===void 0?super.off(b,r):(this._removeDelegatedListener(b,typeof r=="string"?[r]:r,u),this)}queryRenderedFeatures(b,r){if(!this.style)return[];let u;const p=b instanceof c.P||Array.isArray(b),_=p?b:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(p?{}:b)||{},_ instanceof c.P||typeof _[0]=="number")u=[c.P.convert(_)];else{const w=c.P.convert(_[0]),A=c.P.convert(_[1]);u=[w,new c.P(A.x,w.y),A,new c.P(w.x,A.y),w]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(b,r){return this.style.querySourceFeatures(b,r)}setStyle(b,r){return(r=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(b,r))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const r=this._locale[b];if(r==null)throw new Error(`Missing UI string '${b}'`);return r}_updateStyle(b,r){var u,p;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(b,r));const _=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new gd(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,r,_):this.style.loadJSON(b,r,_),this):((p=(u=this.style)===null||u===void 0?void 0:u.projection)===null||p===void 0||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new gd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,r){if(typeof b=="string"){const u=this._requestManager.transformRequest(b,"Style");c.j(u,new AbortController).then(p=>{this._updateDiff(p.data,r)}).catch(p=>{p&&this.fire(new c.k(p))})}else typeof b=="object"&&this._updateDiff(b,r)}_updateDiff(b,r){try{this.style.setState(b,r)&&this._update(!0)}catch(u){c.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(b,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(b,r){return this._lazyInitEmptyStyle(),this.style.addSource(b,r),this._update(!0)}isSourceLoaded(b){const r=this.style&&this.style.sourceCaches[b];if(r!==void 0)return r.loaded();this.fire(new c.k(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){const r=this.style.sourceCaches[b.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);this.terrain===null&&r.reload();for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===b.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),p.type==="color-relief"&&p.source===b.source&&c.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Rd(this.painter,r,b),this.painter.renderToTexture=new Nd(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var p;u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==b.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((p=u.source)===null||p===void 0?void 0:p.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new c.l("terrain",{terrain:b})),this}getTerrain(){var b,r;return(r=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const b=this.style&&this.style.sourceCaches;for(const r in b){const u=b[r]._tiles;for(const p in u){const _=u[p];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}setSourceTileLodParams(b,r,u){if(u){const p=this.getSource(u);if(!p)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);p.calculateTileZoom=Bt(Math.max(1,b),Math.max(1,r))}else for(const p in this.style.sourceCaches)this.style.sourceCaches[p].getSource().calculateTileZoom=Bt(Math.max(1,b),Math.max(1,r));return this._update(!0),this}refreshTiles(b,r){const u=this.style.sourceCaches[b];if(!u)throw new Error(`There is no source cache with ID "${b}", cannot refresh tile`);r===void 0?u.reload(!0):u.refreshTiles(r.map(p=>new c.a4(p.z,p.x,p.y)))}addImage(b,r,u={}){const{pixelRatio:p=1,sdf:_=!1,stretchX:w,stretchY:A,content:k,textFitWidth:z,textFitHeight:$}=u;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||c.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:q,height:H,data:G}=r,Q=r;return this.style.addImage(b,{data:new c.R({width:q,height:H},new Uint8Array(G)),pixelRatio:p,stretchX:w,stretchY:A,content:k,textFitWidth:z,textFitHeight:$,sdf:_,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,b),this}}{const{width:q,height:H,data:G}=B.getImageData(r);this.style.addImage(b,{data:new c.R({width:q,height:H},G),pixelRatio:p,stretchX:w,stretchY:A,content:k,textFitWidth:z,textFitHeight:$,sdf:_,version:0})}}updateImage(b,r){const u=this.style.getImage(b);if(!u)return this.fire(new c.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=r instanceof HTMLImageElement||c.b(r)?B.getImageData(r):r,{width:_,height:w,data:A}=p;if(_===void 0||w===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==u.data.width||w!==u.data.height)return this.fire(new c.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(r instanceof HTMLImageElement||c.b(r));return u.data.replace(A,k),this.style.updateImage(b,u),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new c.k(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b){return ue.getImage(this._requestManager.transformRequest(b,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(b,r){return this._lazyInitEmptyStyle(),this.style.addLayer(b,r),this._update(!0)}moveLayer(b,r){return this.style.moveLayer(b,r),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,r,u){return this.style.setLayerZoomRange(b,r,u),this._update(!0)}setFilter(b,r,u={}){return this.style.setFilter(b,r,u),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,r,u,p={}){return this.style.setPaintProperty(b,r,u,p),this._update(!0)}getPaintProperty(b,r){return this.style.getPaintProperty(b,r)}setLayoutProperty(b,r,u,p={}){return this.style.setLayoutProperty(b,r,u,p),this._update(!0)}getLayoutProperty(b,r){return this.style.getLayoutProperty(b,r)}setGlyphs(b,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,r,u,p=>{p||this._update(!0)}),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,r,u=>{u||this._update(!0)}),this}setLight(b,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(b,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(b,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(b,r){return this.style.setFeatureState(b,r),this._update()}removeFeatureState(b,r){return this.style.removeFeatureState(b,r),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,r=0;return this._container&&(b=this._container.clientWidth||400,r=this._container.clientHeight||300),[b,r]}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map");const r=this._canvasContainer=F.create("div","maplibregl-canvas-container",b);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=F.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const _=this._controlContainer=F.create("div","maplibregl-control-container",b),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(A=>{w[A]=F.create("div",`maplibregl-ctrl-${A} `,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,r,u){this._canvas.width=Math.floor(u*b),this._canvas.height=Math.floor(u*r),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const b=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{r={requestedAttributes:b},p&&(r.statusMessage=p.statusMessage,r.type=p.type)},{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,b):this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b),!u){const p="Failed to initialize WebGL";throw r?(r.message=p,new Error(JSON.stringify(r))):new Error(p)}this.painter=new fu(u,this.transform),X.testSupport(u)}migrateProjection(b,r){super.migrateProjection(b,r),this.painter.transform=b,this.fire(new c.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){var r,u,p,_,w;const A=this._idleTriggered?this._fadeDuration:0,k=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let z=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const H=this.transform.zoom,G=B.now();this.style.zoomHistory.update(H,G);const Q=new c.F(H,{now:G,fadeDuration:A,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),se=Q.crossFadingFactor();se===1&&se===this._crossFadingFactor||(z=!0,this._crossFadingFactor=se),this.style.update(Q)}const $=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0!==k;(p=this.style.projection)===null||p===void 0||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((_=this.style.projection)===null||_===void 0?void 0:_.transitionState,(w=this.style.projection)===null||w===void 0?void 0:w.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||$)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,A,this._crossSourceCollisions,$),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:A,showPadding:this.showPadding}),this.fire(new c.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.cw.mark(c.cx.load),this.fire(new c.l("load"))),this.style&&(this.style.hasTransitions()||z)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const q=this._sourcesDirty||this._styleDirty||this._placementDirty;return q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.l("idle")),!this._loaded||this._fullyLoaded||q||(this._fullyLoaded=!0,c.cw.mark(c.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ue.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),F.remove(this._canvasContainer),F.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),c.cw.clearMetrics(),this._removed=!0,this.fire(new c.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,B.frame(this._frameRequest,b=>{c.cw.frame(b),this._frameRequest=null;try{this._render(b)}catch(r){if(!c.cy(r)&&!function(u){return u.message===mo}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return Bd}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(b){return this._lazyInitEmptyStyle(),this.style.setProjection(b),this._update(!0)}},m.MapMouseEvent=Fi,m.MapTouchEvent=ja,m.MapWheelEvent=Rs,m.Marker=qs,m.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{const r=this._map.getZoom(),u=r===this._map.getMaxZoom(),p=r===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);r.title=p,r.setAttribute("aria-label",p)},this.options=c.e({},yr,b),this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),F.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),F.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=F.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new En(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){F.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,r){const u=F.create("button",b,this._container);return u.type="button",u.addEventListener("click",r),u}},m.Popup=class extends c.E{constructor(b){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&F.remove(this._content),this._container&&(F.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=F.create("div","maplibregl-popup",this._map.getContainer()),this._tip=F.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ps(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const u=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor;const _=jc(this.options.offset);if(!p){const A=this._container.offsetWidth,k=this._container.offsetHeight;let z;z=u.y+_.bottom.y<k?["top"]:u.y>this._map.transform.height-k?["bottom"]:[],u.x<A/2?z.push("left"):u.x>this._map.transform.width-A/2&&z.push("right"),p=z.length===0?"bottom":z.join("-")}let w=u.add(_[p]);this.options.subpixelPositioning||(w=w.round()),F.setTransform(this._container,`${$s[p]} translate(${w.x}px,${w.y}px)`),Ya(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Ph),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=c.S.convert(b),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const r=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=b;p=u.firstChild,p;)r.appendChild(p);return this.setDOMContent(r)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=F.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){return this._container&&this._container.classList.add(b),this}removeClassName(b){return this._container&&this._container.classList.remove(b),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}setSubpixelPositioning(b){this.options.subpixelPositioning=b}_createCloseButton(){this.options.closeButton&&(this._closeButton=F.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(Eh);b&&b.focus()}},m.RasterDEMTileSource=Kr,m.RasterTileSource=tn,m.ScaleControl=class{constructor(b){this._onMove=()=>{vu(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,vu(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Mh),b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){F.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},m.ScrollZoomHandler=Rl,m.Style=gd,m.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=b}onAdd(b){return this._map=b,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=F.create("button","maplibregl-ctrl-terrain",this._container),F.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){F.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},m.TwoFingersTouchPitchHandler=Sh,m.TwoFingersTouchRotateHandler=vo,m.TwoFingersTouchZoomHandler=Mc,m.TwoFingersTouchZoomRotateHandler=xr,m.VectorTileSource=Yr,m.VideoSource=Ba,m.addSourceType=(b,r)=>c._(void 0,void 0,void 0,function*(){if(Wi(b))throw new Error(`A source type called "${b}" already exists.`);((u,p)=>{ki[u]=p})(b,r)}),m.clearPrewarmedResources=function(){const b=st;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(be),st=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},m.createTileMesh=yl,m.getMaxParallelImageRequests=function(){return c.a.MAX_PARALLEL_IMAGE_REQUESTS},m.getRTLTextPluginStatus=function(){return Qn().getRTLTextPluginStatus()},m.getVersion=function(){return Ch},m.getWorkerCount=function(){return Xe.workerCount},m.getWorkerUrl=function(){return c.a.WORKER_URL},m.importScriptInWorkers=function(b){return mr().broadcast("IS",b)},m.prewarm=function(){Vt().acquire(be)},m.setMaxParallelImageRequests=function(b){c.a.MAX_PARALLEL_IMAGE_REQUESTS=b},m.setRTLTextPlugin=function(b,r){return Qn().setRTLTextPlugin(b,r)},m.setWorkerCount=function(b){Xe.workerCount=b},m.setWorkerUrl=function(b){c.a.WORKER_URL=b}});var y=i;return y})}(qv)),qv.exports}var jX=CX();const Hw=kn(jX),OX="FeatureCollection",IX="بيانات أسعار البيع التجريبية - ريال/م²",kX="2025Q4",zX="2025-10-13",DX=[{type:"Feature",properties:{district:"العليا",city:"الرياض",price_per_sqm:6800,samples:27,confidence:82,trend:"stable"},geometry:{type:"Point",coordinates:[46.6753,24.7136]}},{type:"Feature",properties:{district:"الملقا",city:"الرياض",price_per_sqm:6200,samples:34,confidence:85,trend:"rising"},geometry:{type:"Point",coordinates:[46.6234,24.7743]}},{type:"Feature",properties:{district:"النرجس",city:"الرياض",price_per_sqm:5800,samples:29,confidence:80,trend:"rising"},geometry:{type:"Point",coordinates:[46.7234,24.8143]}},{type:"Feature",properties:{district:"الروضة",city:"جدة",price_per_sqm:6e3,samples:31,confidence:83,trend:"stable"},geometry:{type:"Point",coordinates:[39.1653,21.5811]}},{type:"Feature",properties:{district:"السلامة",city:"جدة",price_per_sqm:6400,samples:28,confidence:84,trend:"rising"},geometry:{type:"Point",coordinates:[39.1953,21.6211]}},{type:"Feature",properties:{district:"الفيصلية",city:"الدمام",price_per_sqm:4900,samples:22,confidence:78,trend:"stable"},geometry:{type:"Point",coordinates:[50.1088,26.4207]}}],RX={type:OX,note:IX,version:kX,updated_at:zX,features:DX},NX="FeatureCollection",LX="بيانات أسعار الإيجار التجريبية - ريال/م²/شهر",BX="2025Q4",FX="2025-10-13",$X=[{type:"Feature",properties:{district:"العليا",city:"الرياض",rent_per_sqm_month:75,samples:19,confidence:78,trend:"stable"},geometry:{type:"Point",coordinates:[46.6753,24.7136]}},{type:"Feature",properties:{district:"الملقا",city:"الرياض",rent_per_sqm_month:68,samples:24,confidence:81,trend:"rising"},geometry:{type:"Point",coordinates:[46.6234,24.7743]}},{type:"Feature",properties:{district:"النرجس",city:"الرياض",rent_per_sqm_month:63,samples:21,confidence:76,trend:"stable"},geometry:{type:"Point",coordinates:[46.7234,24.8143]}},{type:"Feature",properties:{district:"الروضة",city:"جدة",rent_per_sqm_month:66,samples:23,confidence:79,trend:"stable"},geometry:{type:"Point",coordinates:[39.1653,21.5811]}},{type:"Feature",properties:{district:"السلامة",city:"جدة",rent_per_sqm_month:70,samples:20,confidence:80,trend:"rising"},geometry:{type:"Point",coordinates:[39.1953,21.6211]}},{type:"Feature",properties:{district:"الفيصلية",city:"الدمام",rent_per_sqm_month:54,samples:16,confidence:74,trend:"stable"},geometry:{type:"Point",coordinates:[50.1088,26.4207]}}],qX={type:NX,note:LX,version:BX,updated_at:FX,features:$X};function UX(){var F,X;const e=pt.useRef(null),t=pt.useRef(null),[i,a]=pt.useState(!1),[f,y]=pt.useState("sale"),[m,c]=pt.useState(null),[M,C]=pt.useState({x:0,y:0});pt.useEffect(()=>{if(!t.current)return t.current=new Hw.Map({container:e.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap"}},layers:[{id:"osm",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},center:[45.0792,23.8859],zoom:5,attributionControl:!1,maxBounds:[[34,16],[56,32]]}),t.current.addControl(new Hw.NavigationControl,"top-left"),t.current.addControl(new Hw.ScaleControl,"bottom-right"),t.current.on("load",()=>{a(!0),D()}),()=>{t.current&&(t.current.remove(),t.current=null)}},[]);const D=()=>{t.current&&(t.current.addSource("sale-prices",{type:"geojson",data:RX}),t.current.addSource("rent-prices",{type:"geojson",data:qX}),t.current.addLayer({id:"sale-circles",type:"circle",source:"sale-prices",paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,8,10,20,15,40],"circle-color":["interpolate",["linear"],["get","price_per_sqm"],3e3,"#22c55e",5e3,"#eab308",7e3,"#f97316",9e3,"#ef4444"],"circle-opacity":.7,"circle-stroke-width":2,"circle-stroke-color":"#ffffff"},layout:{visibility:"visible"}}),t.current.addLayer({id:"rent-circles",type:"circle",source:"rent-prices",paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,8,10,20,15,40],"circle-color":["interpolate",["linear"],["get","rent_per_sqm_month"],40,"#22c55e",60,"#eab308",80,"#f97316",100,"#ef4444"],"circle-opacity":.7,"circle-stroke-width":2,"circle-stroke-color":"#ffffff"},layout:{visibility:"none"}}),O())},O=()=>{if(!t.current)return;["sale-circles","rent-circles"].forEach(U=>{t.current.on("mouseenter",U,te=>{if(t.current.getCanvas().style.cursor="pointer",te.features&&te.features.length>0){const ae=te.features[0];c(ae.properties),C({x:te.point.x,y:te.point.y})}}),t.current.on("mousemove",U,te=>{C({x:te.point.x,y:te.point.y})}),t.current.on("mouseleave",U,()=>{t.current.getCanvas().style.cursor="",c(null)})})},B=Z=>{!t.current||!i||(y(Z),Z==="sale"?(t.current.setLayoutProperty("sale-circles","visibility","visible"),t.current.setLayoutProperty("rent-circles","visibility","none")):(t.current.setLayoutProperty("sale-circles","visibility","none"),t.current.setLayoutProperty("rent-circles","visibility","visible")))};return P.jsxs("div",{className:"relative w-full h-full",children:[P.jsx("div",{ref:e,className:"w-full h-full"}),P.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-4 z-10",style:{direction:"rtl"},children:[P.jsx("h3",{className:"text-lg font-bold mb-3",children:"خريطة الأسعار"}),P.jsxs("div",{className:"flex gap-2 mb-4",children:[P.jsx("button",{onClick:()=>B("sale"),className:`px-4 py-2 rounded-lg transition-colors ${f==="sale"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"البيع"}),P.jsx("button",{onClick:()=>B("rent"),className:`px-4 py-2 rounded-lg transition-colors ${f==="rent"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"الإيجار"})]}),P.jsxs("div",{className:"text-sm",children:[P.jsx("p",{className:"font-semibold mb-2",children:"مفتاح الألوان:"}),P.jsxs("div",{className:"space-y-1",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),P.jsx("span",{children:"منخفض"})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-500"}),P.jsx("span",{children:"متوسط"})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("div",{className:"w-4 h-4 rounded-full bg-orange-500"}),P.jsx("span",{children:"مرتفع"})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),P.jsx("span",{children:"مرتفع جداً"})]})]})]})]}),m&&P.jsxs("div",{className:"absolute bg-white rounded-lg shadow-xl p-3 pointer-events-none z-20 text-sm",style:{left:`${M.x+15}px`,top:`${M.y-15}px`,direction:"rtl"},children:[P.jsxs("div",{className:"font-bold text-base mb-2",children:["📍 ",m.district]}),P.jsx("div",{className:"text-gray-600 mb-1",children:m.city}),f==="sale"&&P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:"font-semibold text-green-600",children:["💰 بيع: ",(F=m.price_per_sqm)==null?void 0:F.toLocaleString("ar-SA")," ر.س/م²"]}),P.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["عينات: ",m.samples," • الثقة: ",m.confidence,"%"]})]}),f==="rent"&&P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:"font-semibold text-blue-600",children:["🏷️ إيجار: ",(X=m.rent_per_sqm_month)==null?void 0:X.toLocaleString("ar-SA")," ر.س/م²/شهر"]}),P.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["عينات: ",m.samples," • الثقة: ",m.confidence,"%"]})]})]}),!i&&P.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 z-30",children:P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-3"}),P.jsx("p",{className:"text-gray-600",children:"جارٍ تحميل الخريطة..."})]})})]})}const VX={riyadh_olaya:{city:"الرياض",district:"العليا",coords:[46.6753,24.7136],services:{schools:12,parks:8,mosques:15,supermarkets:22,hospitals:4,restaurants:45,cafes:38},density_score:92},riyadh_malqa:{city:"الرياض",district:"الملقا",coords:[46.6234,24.7743],services:{schools:18,parks:12,mosques:20,supermarkets:28,hospitals:3,restaurants:35,cafes:25},density_score:88},riyadh_narjis:{city:"الرياض",district:"النرجس",coords:[46.7234,24.8143],services:{schools:15,parks:10,mosques:18,supermarkets:20,hospitals:2,restaurants:28,cafes:22},density_score:85},jeddah_rawdah:{city:"جدة",district:"الروضة",coords:[39.1653,21.5811],services:{schools:14,parks:9,mosques:17,supermarkets:25,hospitals:3,restaurants:40,cafes:32},density_score:90},jeddah_salamah:{city:"جدة",district:"السلامة",coords:[39.1953,21.6211],services:{schools:16,parks:11,mosques:19,supermarkets:23,hospitals:4,restaurants:38,cafes:30},density_score:87},dammam_faisaliyah:{city:"الدمام",district:"الفيصلية",coords:[50.1088,26.4207],services:{schools:10,parks:7,mosques:14,supermarkets:18,hospitals:2,restaurants:25,cafes:20},density_score:82}},F_={districts:VX},GX={riyadh_olaya:{main_roads_count:4,avg_distance_to_main_road_m:350,highway_exits_within_5km:3,avg_street_width_m:18,accessibility_score:95},riyadh_malqa:{main_roads_count:5,avg_distance_to_main_road_m:280,highway_exits_within_5km:4,avg_street_width_m:20,accessibility_score:92},riyadh_narjis:{main_roads_count:3,avg_distance_to_main_road_m:420,highway_exits_within_5km:2,avg_street_width_m:16,accessibility_score:88},jeddah_rawdah:{main_roads_count:4,avg_distance_to_main_road_m:300,highway_exits_within_5km:3,avg_street_width_m:19,accessibility_score:93},jeddah_salamah:{main_roads_count:5,avg_distance_to_main_road_m:250,highway_exits_within_5km:4,avg_street_width_m:21,accessibility_score:94},dammam_faisaliyah:{main_roads_count:3,avg_distance_to_main_road_m:400,highway_exits_within_5km:2,avg_street_width_m:17,accessibility_score:85}},ZX={districts:GX},HX={riyadh_olaya:{parks_count:8,total_green_area_m2:125e3,green_coverage_percent:12,avg_distance_to_park_m:420,greenery_score:88},riyadh_malqa:{parks_count:12,total_green_area_m2:185e3,green_coverage_percent:15,avg_distance_to_park_m:350,greenery_score:92},riyadh_narjis:{parks_count:10,total_green_area_m2:16e4,green_coverage_percent:14,avg_distance_to_park_m:380,greenery_score:90},jeddah_rawdah:{parks_count:9,total_green_area_m2:14e4,green_coverage_percent:13,avg_distance_to_park_m:400,greenery_score:89},jeddah_salamah:{parks_count:11,total_green_area_m2:17e4,green_coverage_percent:14,avg_distance_to_park_m:360,greenery_score:91},dammam_faisaliyah:{parks_count:7,total_green_area_m2:11e4,green_coverage_percent:11,avg_distance_to_park_m:450,greenery_score:85}},XX={districts:HX},WX={riyadh_olaya:{schools_count:12,private_schools:8,public_schools:4,universities_nearby:2,avg_distance_to_school_m:650,education_score:90},riyadh_malqa:{schools_count:18,private_schools:12,public_schools:6,universities_nearby:1,avg_distance_to_school_m:550,education_score:94},riyadh_narjis:{schools_count:15,private_schools:10,public_schools:5,universities_nearby:1,avg_distance_to_school_m:600,education_score:92},jeddah_rawdah:{schools_count:14,private_schools:9,public_schools:5,universities_nearby:2,avg_distance_to_school_m:620,education_score:91},jeddah_salamah:{schools_count:16,private_schools:11,public_schools:5,universities_nearby:1,avg_distance_to_school_m:580,education_score:93},dammam_faisaliyah:{schools_count:10,private_schools:6,public_schools:4,universities_nearby:1,avg_distance_to_school_m:700,education_score:87}},YX={districts:WX},KX={riyadh_olaya:{fiber_coverage_percent:95,street_lighting_score:92,cleanliness_score:90,noise_level:45,safety_score:93,municipal_services_score:91},riyadh_malqa:{fiber_coverage_percent:92,street_lighting_score:90,cleanliness_score:88,noise_level:40,safety_score:91,municipal_services_score:89},riyadh_narjis:{fiber_coverage_percent:90,street_lighting_score:89,cleanliness_score:87,noise_level:38,safety_score:90,municipal_services_score:88},jeddah_rawdah:{fiber_coverage_percent:93,street_lighting_score:91,cleanliness_score:89,noise_level:42,safety_score:92,municipal_services_score:90},jeddah_salamah:{fiber_coverage_percent:94,street_lighting_score:92,cleanliness_score:90,noise_level:41,safety_score:93,municipal_services_score:91},dammam_faisaliyah:{fiber_coverage_percent:88,street_lighting_score:86,cleanliness_score:85,noise_level:50,safety_score:88,municipal_services_score:86}},QX={districts:KX},JX={riyadh_olaya:{p25:5200,p50:6800,p75:8500,p90:10200,percentile_rank:90,wealth_indicator:"مرتفع جداً"},riyadh_malqa:{p25:4800,p50:6200,p75:7800,p90:9400,percentile_rank:85,wealth_indicator:"مرتفع"},riyadh_narjis:{p25:4500,p50:5800,p75:7200,p90:8600,percentile_rank:80,wealth_indicator:"مرتفع"},jeddah_rawdah:{p25:4600,p50:6e3,p75:7500,p90:9e3,percentile_rank:83,wealth_indicator:"مرتفع"},jeddah_salamah:{p25:4900,p50:6400,p75:8e3,p90:9600,percentile_rank:87,wealth_indicator:"مرتفع جداً"},dammam_faisaliyah:{p25:3800,p50:4900,p75:6100,p90:7300,percentile_rank:70,wealth_indicator:"متوسط-مرتفع"}},eW={districts:JX},Bp={services:.25,accessibility:.2,greenery:.15,education:.15,pricePercentile:.2,noise:.05};function tW(e){if(!e||e.length!==2)return null;const[t,i]=e;let a=null,f=1/0;return Object.keys(F_.districts).forEach(y=>{const m=F_.districts[y],[c,M]=m.coords,C=c-t,D=M-i,O=Math.sqrt(C*C+D*D);O<f&&(f=O,a=y)}),a}function rW(e,t){if(!e||!t)return null;for(const[i,a]of Object.entries(F_.districts))if(a.district===e&&a.city===t)return i;return null}function nW(e){const t=F_.districts[e];return t&&t.density_score||50}function iW(e){const t=ZX.districts[e];return t&&t.accessibility_score||50}function aW(e){const t=XX.districts[e];return t&&t.greenery_score||50}function oW(e){const t=YX.districts[e];return t&&t.education_score||50}function sW(e){const t=eW.districts[e];return t&&t.percentile_rank||50}function lW(e){const t=QX.districts[e];return t?100-(t.noise_level||50):50}function cW({coords:e,district:t,city:i}){let a=null;if(t&&i&&(a=rW(t,i)),!a&&e&&(a=tW(e)),!a)return{score:70,level:"متوسط",factors:{services:70,accessibility:70,greenery:70,education:70,pricePercentile:70,noise:70},districtFound:!1,message:"لم يتم العثور على بيانات الحي - استخدام قيمة افتراضية"};const f={services:nW(a),accessibility:iW(a),greenery:aW(a),education:oW(a),pricePercentile:sW(a),noise:lW(a)},y=f.services*Bp.services+f.accessibility*Bp.accessibility+f.greenery*Bp.greenery+f.education*Bp.education+f.pricePercentile*Bp.pricePercentile+f.noise*Bp.noise,m=Math.max(0,Math.min(100,Math.round(y)));let c="متوسط";return m>=85?c="مرتفع جداً":m>=75?c="مرتفع":m>=60?c="متوسط-مرتفع":m>=45?c="متوسط":c="منخفض",{score:m,level:c,factors:f,districtFound:!0,districtKey:a,message:`تم حساب جودة الحي تلقائياً بناءً على ${Object.keys(f).length} عوامل`}}function uW(e,t){const i=(e-50)/50*6,a=t*(i/100),f=t+a;return{adjustmentPercent:i.toFixed(2),adjustmentAmount:Math.round(a),adjustedPrice:Math.round(f),explanation:`تعديل جودة الحي: ${i>0?"+":""}${i.toFixed(1)}%`}}function hW(e){if(!e.districtFound)return"تحليل جودة الحي (تلقائي): متوسط — بيانات محدودة متاحة للحي";const{level:t,factors:i}=e,a=Object.entries(i).sort((m,c)=>c[1]-m[1]).slice(0,3),f={services:"كثافة الخدمات",accessibility:"سهولة النفاذ",greenery:"المساحات الخضراء",education:"المؤسسات التعليمية",pricePercentile:"موقع الحي السعري",noise:"الهدوء"},y=a.map(([m])=>f[m]||m).join("، ");return`تحليل جودة الحي (تلقائي): ${t} — استنادًا إلى ${y}`}const BO={الرياض:3500,جدة:3200,مكة:3e3,المدينة:2800,الدمام:2700,الخبر:2900,الظهران:3100,الطائف:2400,تبوك:2200,بريدة:2100,"خميس مشيط":2e3,حائل:1900,نجران:1800,جازان:1700,ينبع:2300,الأحساء:2e3,القطيف:2500,أبها:2200,عرعر:1600,سكاكا:1500,أخرى:2e3},dW={فيلا:1.15,شقة:.95,دور:1.05,عمارة:1.25,أرض:.7,دوبلكس:1.1,استوديو:.85,بنتهاوس:1.4,"تاون هاوس":1.08},fW={جديد:1.1,"1-5":1,"6-10":.95,"11-15":.88,"16-20":.8,"21-30":.7,"أكثر من 30":.6},pW={"راقي جداً":1.35,راقي:1.2,"متوسط إلى راقي":1.1,متوسط:1,شعبي:.85,قديم:.75},mW={شمالية:1.08,جنوبية:1.05,شرقية:1.03,غربية:1.02,"شمالية شرقية":1.1,"شمالية غربية":1.09,"جنوبية شرقية":1.07,"جنوبية غربية":1.06,"ثلاث واجهات":1.18,"أربع واجهات":1.25},gW={"< 10م":.95,"10-15م":1,"16-20م":1.08,"21-30م":1.15,"> 30م":1.22},yW={"سوبر لوكس":1.25,لوكس:1.15,ممتاز:1.08,"جيد جداً":1.03,جيد:1,متوسط:.95,بسيط:.88,"على العظم":.75},Xw={مسبح:8e4,مصعد:6e4,مولد_كهرباء:35e3,نظام_أمني:25e3,نظام_إطفاء:2e4,خزان_ماء:15e3,سخان_مركزي:3e4,تكييف_مركزي:5e4,غرفة_خادمة:4e4,غرفة_سائق:35e3,مجلس_رجال:45e3,صالة_رياضية:7e4,ملحق_خارجي:55e3,مطبخ_خارجي:25e3,موقف_مظلل:2e4},FO={مسجد:1.02,مدرسة:1.03,مستشفى:1.04,مركز_تجاري:1.05,حديقة:1.03,محطة_وقود:1.01,مواصلات_عامة:1.02,جامعة:1.03},vW={بحر:1.2,جبل:1.12,حديقة:1.1,"شارع رئيسي":1.05,"شارع فرعي":1,"مبنى مقابل":.97};async function $O(e){if(!e.area||!e.city)return{estimatedValue:0,confidence:0,error:"يرجى إدخال المساحة والمدينة على الأقل"};const t=parseFloat(e.area),i=BO[e.city]||BO.أخرى;let a=t*i,f=2;const y=100,m={baseCalculation:`${t} م² × ${i} ريال/م² = ${a.toLocaleString("ar-SA")} ريال`,appliedFactors:[]};if(e.propertyType){const U=dW[e.propertyType]||1;a*=U,m.appliedFactors.push({factor:"نوع العقار",value:e.propertyType,multiplier:U,impact:`${((U-1)*100).toFixed(1)}%`}),f++}if(e.age){const U=fW[e.age]||1;a*=U,m.appliedFactors.push({factor:"عمر العقار",value:e.age,multiplier:U,impact:`${((U-1)*100).toFixed(1)}%`}),f++}if(e.neighborhood){const U=pW[e.neighborhood]||1;a*=U,m.appliedFactors.push({factor:"مستوى الحي",value:e.neighborhood,multiplier:U,impact:`${((U-1)*100).toFixed(1)}%`}),f++}if(e.facade){const U=mW[e.facade]||1;a*=U,m.appliedFactors.push({factor:"الواجهة",value:e.facade,multiplier:U,impact:`${((U-1)*100).toFixed(1)}%`}),f++}if(e.streetWidth){const U=gW[e.streetWidth]||1;a*=U,m.appliedFactors.push({factor:"عرض الشارع",value:e.streetWidth,multiplier:U,impact:`${((U-1)*100).toFixed(1)}%`}),f++}if(e.finishing){const U=yW[e.finishing]||1;a*=U,m.appliedFactors.push({factor:"التشطيب",value:e.finishing,multiplier:U,impact:`${((U-1)*100).toFixed(1)}%`}),f++}if(e.view){const U=vW[e.view]||1;a*=U,m.appliedFactors.push({factor:"الإطلالة",value:e.view,multiplier:U,impact:`${((U-1)*100).toFixed(1)}%`}),f++}if(e.bedrooms){const U=parseInt(e.bedrooms);if(U>3){const te=U-3,ae=1+te*.02;a*=ae,m.appliedFactors.push({factor:"عدد الغرف",value:`${U} غرفة`,multiplier:ae,impact:`+${te*2}%`})}f++}if(e.bathrooms){const U=parseInt(e.bathrooms);if(U>2){const te=U-2,ae=1+te*.015;a*=ae,m.appliedFactors.push({factor:"دورات المياه",value:`${U} دورة`,multiplier:ae,impact:`+${te*1.5}%`})}f++}let c=0;const M=[];Object.keys(Xw).forEach(U=>{e[U]===!0&&(c+=Xw[U],M.push({name:U.replace(/_/g," "),value:Xw[U]}),f++)}),c>0&&(a+=c,m.appliedFactors.push({factor:"المرافق الإضافية",value:M.map(U=>U.name).join("، "),addition:c,impact:`+${c.toLocaleString("ar-SA")} ريال`}));let C=1;const D=[];if(Object.keys(FO).forEach(U=>{e[`قرب_${U}`]===!0&&(C*=FO[U],D.push(U.replace(/_/g," ")),f++)}),D.length>0&&(a*=C,m.appliedFactors.push({factor:"القرب من الخدمات",value:D.join("، "),multiplier:C,impact:`${((C-1)*100).toFixed(1)}%`})),e.parking){const U=parseInt(e.parking);if(U>0){const te=1+U*.01;a*=te,m.appliedFactors.push({factor:"مواقف السيارات",value:`${U} موقف`,multiplier:te,impact:`+${U}%`}),f++}}if(e.floor&&e.propertyType==="شقة"){const U=parseInt(e.floor);if(U>0){const te=1+U*.005;a*=te,m.appliedFactors.push({factor:"رقم الطابق",value:`الطابق ${U}`,multiplier:te,impact:`+${(U*.5).toFixed(1)}%`}),f++}}if(e.landArea&&["فيلا","عمارة","أرض"].includes(e.propertyType)){const U=parseFloat(e.landArea),te=parseFloat(e.area);if(U>te){const ae=U-te,ne=ae*(i*.5);a+=ne,m.appliedFactors.push({factor:"الأرض الفاضية",value:`${ae} م²`,addition:ne,impact:`+${ne.toLocaleString("ar-SA")} ريال`})}f++}let B=f/y*70;e.propertyType&&(B+=5),e.age&&(B+=5),e.neighborhood&&(B+=5),e.finishing&&(B+=5),e.bedrooms&&e.bathrooms&&(B+=5),e.facade&&(B+=3),e.streetWidth&&(B+=2),B=Math.min(Math.round(B),95);let F=null,X=null,Z=!1;try{try{const te=await(await fetch("/api/agent/score-nqs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({city:e.city,district:e.district,coords:e.coords||null,extras:{propertyType:e.propertyType,area:e.area}})})).json();if(te.ok&&te.source==="agent")F={score:te.nqs,level:te.level,districtFound:te.districtFound,source:"agent",notes:te.notes},Z=!0,console.log("✅ استخدام نتيجة الوكيل:",F);else if(te.fallback)throw console.log("⚠️ الوكيل غير متاح، استخدام الحساب المحلي"),new Error("Agent fallback requested")}catch(U){console.log("⚠️ فشل الوكيل، استخدام الحساب المحلي:",U.message),F=cW({coords:e.coords||null,district:e.district||null,city:e.city}),Z=!1}F&&F.score&&(X=uW(F.score,a),a=X.adjustedPrice,m.appliedFactors.push({factor:Z?"جودة الحي (ذكاء اصطناعي)":"جودة الحي (تلقائي)",value:F.level,score:F.score,multiplier:1+parseFloat(X.adjustmentPercent)/100,impact:`${X.adjustmentPercent>0?"+":""}${X.adjustmentPercent}%`}))}catch(U){console.warn("تعذر حساب NQS:",U),Z=!1}return _W({timestamp:new Date().toISOString(),formData:e,estimatedValue:a,confidence:B,filledFieldsCount:f}),{estimatedValue:Math.round(a),confidence:B,filledFieldsCount:f,totalPossibleFields:y,adjustments:m,priceRange:{min:Math.round(a*.9),max:Math.round(a*1.1)},recommendations:bW(e,B),nqs:F?{score:F.score,level:F.level,explanation:hW(F),districtFound:F.districtFound,source:F.source||"local"}:null,usedAgent:Z}}function _W(e){try{const t=JSON.parse(localStorage.getItem("evaluationHistory")||"[]");t.push(e),t.length>100&&t.shift(),localStorage.setItem("evaluationHistory",JSON.stringify(t))}catch(t){console.warn("تعذر حفظ التقييم في السجل:",t)}}function bW(e,t){const i=[];return t<50&&i.push("لتحسين دقة التقييم، يُنصح بإدخال المزيد من التفاصيل"),e.propertyType||i.push("إضافة نوع العقار سيحسن الدقة بشكل كبير"),e.age||i.push("تحديد عمر العقار مهم للحصول على تقييم دقيق"),e.neighborhood||i.push("مستوى الحي له تأثير كبير على القيمة"),e.finishing||i.push("جودة التشطيب تؤثر بشكل ملحوظ على السعر"),(!e.bedrooms||!e.bathrooms)&&i.push("عدد الغرف ودورات المياه من العوامل المهمة"),t>=70&&i.push("مستوى الثقة جيد! يمكنك الاعتماد على هذا التقييم"),i}const xS={apiKey:"",apiEndpoint:"https://api.openai.com/v1/chat/completions",model:"gpt-4o",temperature:.3,maxTokens:2e3,enabled:!1};function xW(){try{const e=localStorage.getItem("evaluationHistory");return e?JSON.parse(e):[]}catch(e){return console.warn("تعذر قراءة سجل التقييمات:",e),[]}}function wW(){try{return localStorage.removeItem("evaluationHistory"),!0}catch(e){return console.error("تعذر مسح السجل:",e),!1}}function SW(){const e=xW();if(e.length===0)return{totalEvaluations:0,gptEvaluations:0,localEvaluations:0,averageConfidence:0};const t=e.filter(f=>f.source==="gpt").length,i=e.length-t,a=e.reduce((f,y)=>{var c;const m=((c=y.evaluation)==null?void 0:c.confidence)||y.confidence||0;return f+m},0);return{totalEvaluations:e.length,gptEvaluations:t,localEvaluations:i,averageConfidence:Math.round(a/e.length)}}function TW(){pt.useEffect(()=>{try{const t=new URLSearchParams(window.location.search).get("ref");if(t&&t.length>=6&&t.length<=8){if(!/^[A-Z0-9]+$/.test(t)){console.warn("رمز إحالة غير صالح:",t);return}localStorage.setItem("muth_ref",t),localStorage.setItem("muth_ref_timestamp",Date.now().toString());const i=60*60*24*14;document.cookie=`muth_ref=${t};path=/;max-age=${i};SameSite=Lax`;let a=localStorage.getItem("muth_vid");a||(a=AW(),localStorage.setItem("muth_vid",a)),MW({type:"click",ref:t,visitorId:a,timestamp:Date.now(),url:window.location.href}),PW(t,a).catch(f=>{console.log("تتبع الإحالة (محلي فقط):",f.message)}),console.log("✅ تم حفظ رمز الإحالة:",t)}}catch(e){console.error("خطأ في معالجة رمز الإحالة:",e)}},[])}function AW(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"vid_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}function MW(e){try{const t=JSON.parse(localStorage.getItem("muth_ref_events")||"[]");t.push(e),t.length>100&&t.splice(0,t.length-100),localStorage.setItem("muth_ref_events",JSON.stringify(t))}catch(t){console.error("خطأ في تسجيل حدث الإحالة:",t)}}async function PW(e,t){return new URLSearchParams({ref:e,vid:t,ts:Date.now().toString()}),new Promise((i,a)=>{i({ok:!0,stub:!0})})}function EW(){TW();const[e,t]=pt.useState("home"),[i,a]=pt.useState(null),[f,y]=pt.useState(!1),[m,c]=pt.useState(null),[M,C]=pt.useState(xS.enabled),[D,O]=pt.useState(!1),B=async te=>{y(!0),c(null),a(null);try{let ae;M&&xS.enabled||(ae=await $O(te)),a(ae)}catch(ae){if(console.error("خطأ في التقييم:",ae),c(ae.message||"حدث خطأ أثناء التقييم. يرجى المحاولة مرة أخرى."),M)try{const ne=await $O(te);a(ne),c("تم استخدام المحرك المحلي بدلاً من GPT")}catch(ne){console.error("فشل المحرك المحلي أيضاً:",ne)}}finally{y(!1)}},F=()=>{a(null),c(null),window.scrollTo({top:0,behavior:"smooth"})},X=()=>{confirm("هل أنت متأكد من حذف سجل التقييمات؟")&&(wW(),alert("تم مسح السجل بنجاح"))},Z=SW(),U=te=>{t(te),a(null),c(null),window.scrollTo({top:0,behavior:"smooth"})};return e==="subscriptions"?P.jsxs(P.Fragment,{children:[P.jsx(kg,{currentPage:e,navigateTo:U}),P.jsx(iN,{}),P.jsx(zg,{})]}):e==="referrals"?P.jsxs(P.Fragment,{children:[P.jsx(kg,{currentPage:e,navigateTo:U}),P.jsx(fN,{}),P.jsx(zg,{})]}):e==="market"?P.jsxs(P.Fragment,{children:[P.jsx(kg,{currentPage:e,navigateTo:U}),P.jsx(PX,{}),P.jsx(zg,{})]}):e==="map"?P.jsxs(P.Fragment,{children:[P.jsx(kg,{currentPage:e,navigateTo:U}),P.jsxs("div",{className:"container mx-auto px-4 py-8",children:[P.jsxs("div",{className:"mb-6",children:[P.jsx("h1",{className:"text-3xl font-bold mb-2",children:"خريطة الأسعار التفاعلية"}),P.jsx("p",{className:"text-muted-foreground",children:"استكشف أسعار العقارات في مختلف أنحاء المملكة بشكل تفاعلي"})]}),P.jsx("div",{className:"h-[600px] rounded-lg overflow-hidden shadow-lg",children:P.jsx(UX,{})})]}),P.jsx(zg,{})]}):P.jsxs("div",{className:"app-container min-h-screen",children:[P.jsx(kg,{currentPage:e,navigateTo:U,showSettings:D,setShowSettings:O}),D&&P.jsx("div",{className:"border-b border-border/50 bg-white",children:P.jsx("div",{className:"container mx-auto px-4 py-4",children:P.jsx(CW,{useGPT:M,setUseGPT:C,stats:Z,onClearHistory:X})})}),P.jsxs("main",{className:"container mx-auto px-4 py-8",children:[!i&&P.jsxs("div",{className:"text-center mb-12 space-y-4",children:[P.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-semibold mb-4",children:[P.jsx($u,{className:"w-4 h-4"}),P.jsx("span",{children:"كل عقار له قصة… ومثمّن يقرأها لك"})]}),P.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-balance",children:["اكتشف القيمة الحقيقية",P.jsx("br",{}),"لعقارك في دقائق"]}),P.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto text-balance",children:"ذكاء يفهم السوق — قبل ما يتحرك السوق"}),P.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg max-w-2xl mx-auto",children:P.jsxs("p",{className:"text-sm text-green-900",children:[P.jsx("strong",{children:"🇸🇦 النسخة التجريبية الوطنية"})," للمشاركة في هاكاثون روشن 2025 — مفتوحة مجانًا للعرض العام"]})}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-4xl mx-auto mt-8",children:[P.jsxs(zr,{className:"p-6 hover-lift",children:[P.jsx("div",{className:"p-3 rounded-xl bg-blue-100 w-fit mx-auto mb-3",children:P.jsx(Fp,{className:"w-6 h-6 text-blue-600"})}),P.jsx("h3",{className:"font-bold mb-2",children:"ذكاء اصطناعي متقدم"}),P.jsx("p",{className:"text-sm text-muted-foreground",children:"كل تقييم جديد يجعل مثمّن أذكى من الأمس"})]}),P.jsxs(zr,{className:"p-6 hover-lift",children:[P.jsx("div",{className:"p-3 rounded-xl bg-green-100 w-fit mx-auto mb-3",children:P.jsx(lI,{className:"w-6 h-6 text-green-600"})}),P.jsx("h3",{className:"font-bold mb-2",children:"نتائج فورية"}),P.jsx("p",{className:"text-sm text-muted-foreground",children:"احصل على تقييم شامل في أقل من دقيقة"})]}),P.jsxs(zr,{className:"p-6 hover-lift",children:[P.jsx("div",{className:"p-3 rounded-xl bg-purple-100 w-fit mx-auto mb-3",children:P.jsx(Hc,{className:"w-6 h-6 text-purple-600"})}),P.jsx("h3",{className:"font-bold mb-2",children:"دقة عالية"}),P.jsx("p",{className:"text-sm text-muted-foreground",children:"تحليل متعدد الطبقات لأكثر من 100 متغير"})]})]})]}),m&&P.jsx(zr,{className:"mb-6 p-4 border-2 border-amber-200 bg-amber-50",children:P.jsxs("div",{className:"flex items-start gap-3",children:[P.jsx(Vp,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),P.jsxs("div",{children:[P.jsx("h3",{className:"font-semibold text-amber-900 mb-1",children:"تنبيه"}),P.jsx("p",{className:"text-sm text-amber-800",children:m})]})]})}),P.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[P.jsx("div",{className:i?"lg:sticky lg:top-24 lg:self-start":"",children:P.jsxs(zr,{className:"p-6 card-gradient",children:[P.jsxs("div",{className:"flex items-center justify-between mb-6",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx(od,{className:"w-5 h-5 text-primary"}),P.jsx("h3",{className:"text-xl font-bold",children:"بيانات العقار"})]}),i&&P.jsxs(Na,{variant:"outline",size:"sm",onClick:F,className:"gap-2",children:[P.jsx(F3,{className:"w-4 h-4"}),"تقييم جديد"]})]}),P.jsx(tN,{onSubmit:B,isLoading:f})]})}),i&&P.jsxs("div",{children:[P.jsx(rN,{result:i}),P.jsx(zr,{className:"mt-6 p-6 bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-200",children:P.jsxs("div",{className:"flex items-start gap-4",children:[P.jsx(I3,{className:"w-6 h-6 text-purple-600 flex-shrink-0 mt-1"}),P.jsxs("div",{children:[P.jsx("h3",{className:"font-bold mb-2",children:"🧠 الذكاء العقاري يتطور باستمرار"}),P.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"شاركنا تجربتك وساهم في تحسين دقة التقييم الوطني 🇸🇦"}),P.jsx(Na,{variant:"outline",size:"sm",disabled:!0,children:"قيّم التجربة (قريباً)"})]})]})}),P.jsx(zr,{className:"mt-6 p-6 bg-gradient-to-br from-blue-50 to-cyan-50 border-2 border-blue-200",children:P.jsxs("div",{className:"text-center",children:[P.jsx("h3",{className:"font-bold text-lg mb-2",children:"🔓 تحليل الحي الكامل، وأفضل مناطق السكن، والتكتلات السعريّة"}),P.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"قريبًا في خطة Smart Plan"}),P.jsx(Na,{variant:"default",onClick:()=>U("subscriptions"),children:"اكتشف الباقات"})]})})]})]}),!i&&P.jsxs(P.Fragment,{children:[P.jsxs(zr,{className:"mt-12 p-8 bg-gradient-to-br from-primary/5 to-purple-50 border-2 border-primary/20",children:[P.jsx("h3",{className:"text-2xl font-bold mb-4 text-center",children:"كيف يعمل مُثمّن؟"}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mt-6",children:[P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"1"}),P.jsx("h4",{className:"font-semibold mb-2",children:"أدخل البيانات"}),P.jsx("p",{className:"text-sm text-muted-foreground",children:"ابدأ بالمعلومات الأساسية وأضف التفاصيل"})]}),P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"2"}),P.jsx("h4",{className:"font-semibold mb-2",children:"التحليل الذكي"}),P.jsx("p",{className:"text-sm text-muted-foreground",children:"المحرك يحلل جميع العوامل المؤثرة"})]}),P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"3"}),P.jsx("h4",{className:"font-semibold mb-2",children:"التقييم الدقيق"}),P.jsx("p",{className:"text-sm text-muted-foreground",children:"احصل على السعر ونطاق التقييم"})]}),P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"4"}),P.jsx("h4",{className:"font-semibold mb-2",children:"التوصيات"}),P.jsx("p",{className:"text-sm text-muted-foreground",children:"نصائح لتحسين قيمة العقار"})]})]})]}),P.jsxs(zr,{className:"mt-8 p-8 bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-200 text-center",children:[P.jsx("h3",{className:"text-3xl font-black mb-3",children:"قريبًا: خريطة الوعي العقاري الأولى في المملكة 🇸🇦"}),P.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"استكشف الأسعار، الاتجاهات، والفرص في كل حي بتفاصيل غير مسبوقة"}),P.jsxs(Na,{size:"lg",onClick:()=>U("referrals"),className:"gap-2",children:[P.jsx($_,{className:"w-5 h-5"}),"افتحها بدعمك المبكر"]})]})]})]}),P.jsx(zg,{})]})}function kg({currentPage:e,navigateTo:t,showSettings:i,setShowSettings:a}){const f=[{id:"home",label:"التقييم",icon:Uv},{id:"market",label:"دراسة السوق",icon:vf},{id:"subscriptions",label:"الباقات",icon:s3},{id:"referrals",label:"الإحالات",icon:$_}];return P.jsx("header",{className:"border-b border-border/50 bg-white/80 backdrop-blur-sm sticky top-0 z-50",children:P.jsxs("div",{className:"container mx-auto px-4 py-4",children:[P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t("home"),children:[P.jsx("div",{className:"p-2 rounded-xl primary-gradient",children:P.jsx(Ey,{className:"w-8 h-8 text-white"})}),P.jsxs("div",{children:[P.jsx("h1",{className:"text-2xl font-black text-foreground",children:"مُثمّن"}),P.jsx("p",{className:"text-xs text-muted-foreground",children:"تقييم عقاري ذكي بالذكاء الاصطناعي"})]})]}),P.jsx("nav",{className:"hidden md:flex items-center gap-2",children:f.map(y=>{const m=y.icon;return P.jsxs(Na,{variant:e===y.id?"default":"ghost",size:"sm",onClick:()=>t(y.id),className:"gap-2",children:[P.jsx(m,{className:"w-4 h-4"}),y.label]},y.id)})}),e==="home"&&a&&P.jsxs(Na,{variant:"outline",size:"sm",onClick:()=>a(!i),className:"gap-2",children:[P.jsx(Z3,{className:"w-4 h-4"}),"الإعدادات"]})]}),P.jsx("nav",{className:"md:hidden flex items-center gap-2 mt-4 overflow-x-auto",children:f.map(y=>{const m=y.icon;return P.jsxs(Na,{variant:e===y.id?"default":"outline",size:"sm",onClick:()=>t(y.id),className:"gap-2 flex-shrink-0",children:[P.jsx(m,{className:"w-4 h-4"}),y.label]},y.id)})})]})})}function CW({useGPT:e,setUseGPT:t,stats:i,onClearHistory:a}){return P.jsxs(zr,{className:"p-4 space-y-4 animate-slide-in",children:[P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx(Fp,{className:"w-5 h-5 text-primary"}),P.jsxs("div",{children:[P.jsx("h3",{className:"font-semibold",children:"محرك التقييم"}),P.jsx("p",{className:"text-xs text-muted-foreground",children:"المحرك المحلي فقط"})]})]}),xS.enabled]}),P.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[P.jsx("p",{className:"text-sm text-blue-900 mb-2",children:P.jsx("strong",{children:"لتفعيل الذكاء الاصطناعي المتقدم:"})}),P.jsxs("ol",{className:"text-xs text-blue-800 space-y-1 mr-4",children:[P.jsxs("li",{children:["1. افتح ملف ",P.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"src/lib/apiConfig.js"})]}),P.jsxs("li",{children:["2. ضع API Key الخاص بك في ",P.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"API_CONFIG.apiKey"})]}),P.jsx("li",{children:"3. احفظ الملف وأعد تشغيل التطبيق"})]})]}),P.jsxs("div",{className:"pt-3 border-t border-border",children:[P.jsxs("div",{className:"flex items-center justify-between mb-2",children:[P.jsx("h3",{className:"font-semibold text-sm",children:"إحصائيات الاستخدام"}),P.jsx(Na,{variant:"ghost",size:"sm",onClick:a,className:"text-xs",children:"مسح السجل"})]}),P.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[P.jsxs("div",{className:"p-2 bg-muted rounded-lg",children:[P.jsx("p",{className:"text-xs text-muted-foreground",children:"إجمالي التقييمات"}),P.jsx("p",{className:"text-lg font-bold",children:i.totalEvaluations})]}),P.jsxs("div",{className:"p-2 bg-muted rounded-lg",children:[P.jsx("p",{className:"text-xs text-muted-foreground",children:"تقييمات GPT"}),P.jsx("p",{className:"text-lg font-bold text-primary",children:i.gptEvaluations})]}),P.jsxs("div",{className:"p-2 bg-muted rounded-lg",children:[P.jsx("p",{className:"text-xs text-muted-foreground",children:"متوسط الثقة"}),P.jsxs("p",{className:"text-lg font-bold text-green-600",children:[i.averageConfidence,"%"]})]})]})]})]})}function zg(){return P.jsx("footer",{className:"border-t border-border/50 bg-white/80 backdrop-blur-sm mt-16",children:P.jsxs("div",{className:"container mx-auto px-4 py-8",children:[P.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[P.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[P.jsx(Ey,{className:"w-4 h-4"}),P.jsx("span",{children:"© جميع الحقوق محفوظة 2025 لمنصّة مثمّن الذكاء العقاري السعودي"})]}),P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:P.jsx(v3,{className:"w-5 h-5"})}),P.jsx("a",{href:"mailto:info@mothammen.sa",className:"text-muted-foreground hover:text-primary transition-colors",children:P.jsx(P3,{className:"w-5 h-5"})})]})]}),P.jsx("div",{className:"mt-4 text-center text-xs text-muted-foreground",children:P.jsx("p",{children:"💡 هذا التطبيق يستخدم الذكاء الاصطناعي لتقديم تقييمات تقديرية. للحصول على تقييم رسمي معتمد، يُنصح بالتواصل مع مقيّم عقاري مرخّص."})})]})})}ND.createRoot(document.getElementById("root")).render(P.jsx(pt.StrictMode,{children:P.jsx(EW,{})}));
